c[?7l[2J[0mSeaBIOS (version rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org)


iPXE (http://ipxe.org) 00:03.0 CA00 PCI2.10 PnP PMM+7FF91000+7FEF1000 CA00
Press Ctrl-B to configure iPXE (PCI 00:03.0)...                                                                               


Booting from ROM...
c[?7l[2J[    0.000000] Linux version 6.5.0-rc4-a3fe9a2e1692+ (root@p-adls01) (gcc (GCC) 11.4.1 20230605 (Red Hat 11.4.1-2), GNU ld version 2.35.2-42.el9) #1 SMP PREEMPT_DYNAMIC Mon Jul 31 12:08:52 CST 2023
[    0.000000] ********************************************************************************************
[    0.000000] * WARNING: Project Intel Next sources and binaries include Intel Confidential information. *
[    0.000000] *          For use by Intel Employees only; do not distribute externally.                  *
[    0.000000] ********************************************************************************************
[    0.000000] Command line: console=ttyS0 root=/dev/sda earlyprintk=serial net.ifnames=0 quiet plymouth.enable=0
[    0.000000] KERNEL supported cpus:
[    0.000000]   Intel GenuineIntel
[    0.000000]   AMD AuthenticAMD
[    0.000000]   Hygon HygonGenuine
[    0.000000]   Centaur CentaurHauls
[    0.000000]   zhaoxin   Shanghai  
[    0.000000] BIOS-provided physical RAM map:
[    0.000000] BIOS-e820: [mem 0x0000000000000000-0x000000000009fbff] usable
[    0.000000] BIOS-e820: [mem 0x000000000009fc00-0x000000000009ffff] reserved
[    0.000000] BIOS-e820: [mem 0x00000000000f0000-0x00000000000fffff] reserved
[    0.000000] BIOS-e820: [mem 0x0000000000100000-0x000000007ffdffff] usable
[    0.000000] BIOS-e820: [mem 0x000000007ffe0000-0x000000007fffffff] reserved
[    0.000000] BIOS-e820: [mem 0x00000000feffc000-0x00000000feffffff] reserved
[    0.000000] BIOS-e820: [mem 0x00000000fffc0000-0x00000000ffffffff] reserved
[    0.000000] printk: bootconsole [earlyser0] enabled
[    0.306782] Spectre V2 : WARNING: Unprivileged eBPF is enabled with eIBRS on, data leaks possible via Spectre v2 BHB attacks!
[    3.995885] systemd[1]: Failed to start Load Kernel Modules.
[[0;1;31mFAILED[0m] Failed to start [0;1;39mLoad Kernel Modules[0m.

CentOS Stream 9
Kernel 6.5.0-rc4-a3fe9a2e1692+ on an x86_64

Activate the web console with: systemctl enable --now cockpit.socket

test login: [   14.525705] general protection fault, probably for non-canonical address 0xdffffc0000000006: 0000 [#1] PREEMPT SMP KASAN NOPTI
[   14.526161] KASAN: null-ptr-deref in range [0x0000000000000030-0x0000000000000037]
[   14.526438] CPU: 1 PID: 715 Comm: repro Not tainted 6.5.0-rc4-a3fe9a2e1692+ #1
[   14.526706] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   14.527121] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   14.527345] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   14.527994] RSP: 0018:ffff88802457fba8 EFLAGS: 00010206
[   14.528201] RAX: dffffc0000000000 RBX: ffff888014f9b000 RCX: 0000000000000000
[   14.528456] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   14.528710] RBP: ffff88802457fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   14.528964] R10: ffff88800aad88df R11: 0000000000000001 R12: 0000000000000000
[   14.529222] R13: ffffffff85cc0180 R14: ffff8880109b6ac0 R15: ffffffff87070ae0
[   14.529480] FS:  00007f354bf75600(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
[   14.529767] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   14.529974] CR2: 000055bf0ca7f990 CR3: 00000000135d2000 CR4: 0000000000750ee0
[   14.530233] PKRU: 55555554
[   14.530338] Call Trace:
[   14.530433]  <TASK>
[   14.530517]  ? show_regs+0x6e/0x80
[   14.530658]  ? die_addr+0x45/0xb0
[   14.530797]  ? exc_general_protection+0x159/0x250
[   14.530988]  ? asm_exc_general_protection+0x2b/0x30
[   14.531178]  ? sysfs_remove_link_from_group+0x21/0x90
[   14.531365]  ? sysfs_remove_link_from_group+0x37/0x90
[   14.531558]  ? sysfs_remove_link_from_group+0x21/0x90
[   14.531746]  iommu_device_unlink+0x85/0xd0
[   14.531908]  iommu_deinit_device+0x11f/0x4c0
[   14.532075]  __iommu_group_remove_device+0x26b/0x300
[   14.532262]  iommu_group_remove_device+0x8a/0xb0
[   14.532447]  iommufd_test+0x1f1a/0x2d10
[   14.532593]  ? __pfx_lock_release+0x10/0x10
[   14.532752]  ? __pfx_iommufd_test+0x10/0x10
[   14.532908]  ? __sanitizer_cov_trace_const_cmp8+0x1c/0x30
[   14.533108]  iommufd_fops_ioctl+0x377/0x510
[   14.533265]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   14.533438]  ? trace_hardirqs_on+0x26/0x120
[   14.533602]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   14.533832]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   14.534013]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   14.534208]  ? security_file_ioctl+0x9d/0xd0
[   14.534373]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   14.534546]  __x64_sys_ioctl+0x1b9/0x230
[   14.534696]  do_syscall_64+0x3c/0x90
[   14.534836]  entry_SYSCALL_64_after_hwframe+0x6e/0xd8
[   14.535019] RIP: 0033:0x7f354bc3ee5d
[   14.535153] Code: ff c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d 93 af 1b 00 f7 d8 64 89 01 48
[   14.535792] RSP: 002b:00007ffe42dd02d8 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   14.536061] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f354bc3ee5d
[   14.536310] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   14.536559] RBP: 00007ffe42dd02f0 R08: 0000000000000800 R09: 0000000000000800
[   14.536809] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffe42dd0408
[   14.537065] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f354bfb6000
[   14.537320]  </TASK>
[   14.537403] Modules linked in:
[   14.537544] ---[ end trace 0000000000000000 ]---
[   14.537727] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   14.537935] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   14.538589] RSP: 0018:ffff88802457fba8 EFLAGS: 00010206
[   14.538782] RAX: dffffc0000000000 RBX: ffff888014f9b000 RCX: 0000000000000000
[   14.539036] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   14.539292] RBP: ffff88802457fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   14.539541] R10: ffff88800aad88df R11: 0000000000000001 R12: 0000000000000000
[   14.539790] R13: ffffffff85cc0180 R14: ffff8880109b6ac0 R15: ffffffff87070ae0
[   14.540043] FS:  00007f354bf75600(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
[   14.540333] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   14.540541] CR2: 000055bf0ca7f990 CR3: 00000000135d2000 CR4: 0000000000750ee0
[   14.540795] PKRU: 55555554
[   14.541200] ------------[ cut here ]------------
[   14.541372] WARNING: CPU: 1 PID: 715 at drivers/iommu/iommufd/main.c:258 iommufd_fops_release+0x2a3/0x300
[   14.541714] Modules linked in:
[   14.541830] CPU: 1 PID: 715 Comm: repro Tainted: G      D            6.5.0-rc4-a3fe9a2e1692+ #1
[   14.542139] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   14.542538] RIP: 0010:iommufd_fops_release+0x2a3/0x300
[   14.542808] Code: 45 d0 65 48 2b 04 25 28 00 00 00 75 54 48 81 c4 88 00 00 00 31 c0 5b 41 5c 41 5d 41 5e 41 5f 5d c3 cc cc cc cc e8 ad 4f 0a fe <0f> 0b eb a6 e8 74 23 67 fe e9 f6 fe ff ff 48 89 85 50 ff ff ff e8
[   14.543459] RSP: 0018:ffff88802457fc00 EFLAGS: 00010293
[   14.543649] RAX: 0000000000000000 RBX: ffff88800ca7fd08 RCX: 0000000000000000
[   14.543928] RDX: ffff888012c48000 RSI: ffffffff835563e3 RDI: ffffffff86702b48
[   14.544182] RBP: ffff88802457fcb0 R08: 0000000000000000 R09: fffffbfff0eb2644
[   14.544437] R10: ffffffff87593227 R11: ffff88800b6d9000 R12: 0000000000000000
[   14.544690] R13: ffff8880139e4698 R14: ffff88802457fc48 R15: ffffffff83556140
[   14.544944] FS:  0000000000000000(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
[   14.545230] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   14.545437] CR2: 000055bf0ca7f990 CR3: 000000000687e000 CR4: 0000000000750ee0
[   14.545692] PKRU: 55555554
[   14.545794] Call Trace:
[   14.545887]  <TASK>
[   14.545969]  ? show_regs+0x6e/0x80
[   14.546101]  ? __warn+0xef/0x340
[   14.546229]  ? report_bug+0x25e/0x4b0
[   14.546371]  ? iommufd_fops_release+0x2a3/0x300
[   14.546541]  ? report_bug+0x2cb/0x4b0
[   14.546693]  ? handle_bug+0x46/0x90
[   14.546829]  ? exc_invalid_op+0x1d/0x50
[   14.546974]  ? asm_exc_invalid_op+0x1f/0x30
[   14.547130]  ? __pfx_iommufd_fops_release+0x10/0x10
[   14.547313]  ? iommufd_fops_release+0x2a3/0x300
[   14.547483]  ? iommufd_fops_release+0x2a3/0x300
[   14.547655]  ? __pfx_iommufd_fops_release+0x10/0x10
[   14.547857]  ? rcu_is_watching+0x19/0xc0
[   14.548009]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   14.548209]  ? __pfx_iommufd_fops_release+0x10/0x10
[   14.548390]  __fput+0x424/0xaf0
[   14.548518]  ____fput+0x1f/0x30
[   14.548641]  task_work_run+0x19d/0x2b0
[   14.548786]  ? __pfx_task_work_run+0x10/0x10
[   14.548946]  ? __sanitizer_cov_trace_const_cmp1+0x1e/0x30
[   14.549144]  ? switch_task_namespaces+0xa9/0xe0
[   14.549316]  do_exit+0xac9/0x2790
[   14.549444]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   14.549672]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   14.549855]  ? __pfx_do_exit+0x10/0x10
[   14.549997]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   14.550196]  ? security_file_ioctl+0x9d/0xd0
[   14.550359]  make_task_dead+0x182/0x3c0
[   14.550506]  rewind_stack_and_make_dead+0x17/0x20
[   14.550693] RIP: 0033:0x7f354bc3ee5d
[   14.550830] Code: Unable to access opcode bytes at 0x7f354bc3ee33.
[   14.551051] RSP: 002b:00007ffe42dd02d8 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   14.551322] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f354bc3ee5d
[   14.551576] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   14.551830] RBP: 00007ffe42dd02f0 R08: 0000000000000800 R09: 0000000000000800
[   14.552084] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffe42dd0408
[   14.552338] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f354bfb6000
[   14.552597]  </TASK>
[   14.552682] irq event stamp: 4869
[   14.552808] hardirqs last  enabled at (4869): [<ffffffff810caf06>] cond_local_irq_enable.isra.0+0x16/0x30
[   14.553151] hardirqs last disabled at (4868): [<ffffffff8543c97d>] exc_general_protection+0x2d/0x250
[   14.553476] softirqs last  enabled at (1722): [<ffffffff810f9cf1>] fpu_flush_thread+0x2a1/0x3c0
[   14.553788] softirqs last disabled at (1720): [<ffffffff810f9c75>] fpu_flush_thread+0x225/0x3c0
[   14.554099] ---[ end trace 0000000000000000 ]---
[   14.556841] iommufd_mock iommufd_mock1: Adding to iommu group 1
[   14.557085] iommufd_mock iommufd_mock1: Removing from iommu group 1
[   14.557337] general protection fault, probably for non-canonical address 0xdffffc0000000006: 0000 [#2] PREEMPT SMP KASAN NOPTI
[   14.557736] KASAN: null-ptr-deref in range [0x0000000000000030-0x0000000000000037]
[   14.558004] CPU: 1 PID: 717 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   14.558312] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   14.558718] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   14.558945] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   14.559593] RSP: 0018:ffff888014b97ba8 EFLAGS: 00010206
[   14.559784] RAX: dffffc0000000000 RBX: ffff88800fae1000 RCX: 0000000000000000
[   14.560039] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   14.560293] RBP: ffff888014b97bc0 R08: 0000000000000001 R09: ffffed100155b11b
[   14.560547] R10: ffff88800aad88df R11: 0000000000045a00 R12: 0000000000000000
[   14.560801] R13: ffffffff85cc0180 R14: ffff88800bbbd960 R15: ffffffff87070ae0
[   14.561056] FS:  00007f364a99a600(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
[   14.561343] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   14.561551] CR2: 0000000020000080 CR3: 00000000135d2000 CR4: 0000000000750ee0
[   14.561806] PKRU: 55555554
[   14.561909] Call Trace:
[   14.562001]  <TASK>
[   14.562085]  ? show_regs+0x6e/0x80
[   14.562219]  ? die_addr+0x45/0xb0
[   14.562351]  ? exc_general_protection+0x159/0x250
[   14.562532]  ? asm_exc_general_protection+0x2b/0x30
[   14.562716]  ? sysfs_remove_link_from_group+0x21/0x90
[   14.562910]  ? sysfs_remove_link_from_group+0x37/0x90
[   14.563100]  ? sysfs_remove_link_from_group+0x21/0x90
[   14.563288]  iommu_device_unlink+0x85/0xd0
[   14.563443]  iommu_deinit_device+0x11f/0x4c0
[   14.563606]  __iommu_group_remove_device+0x26b/0x300
[   14.563794]  iommu_group_remove_device+0x8a/0xb0
[   14.563968]  iommufd_test+0x1f1a/0x2d10
[   14.564112]  ? __pfx_lock_release+0x10/0x10
[   14.564270]  ? __pfx_lock_acquire+0x10/0x10
[   14.564429]  ? __pfx_iommufd_test+0x10/0x10
[   14.564586]  ? __sanitizer_cov_trace_const_cmp8+0x1c/0x30
[   14.564787]  iommufd_fops_ioctl+0x377/0x510
[   14.564946]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   14.565122]  ? trace_hardirqs_on+0x26/0x120
[   14.565282]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   14.565511]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   14.565697]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   14.565896]  ? security_file_ioctl+0x9d/0xd0
[   14.566059]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   14.566236]  __x64_sys_ioctl+0x1b9/0x230
[   14.566384]  do_syscall_64+0x3c/0x90
[   14.566520]  entry_SYSCALL_64_after_hwframe+0x6e/0xd8
[   14.566706] RIP: 0033:0x7f364a63ee5d
[   14.566867] Code: ff c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d 93 af 1b 00 f7 d8 64 89 01 48
[   14.567516] RSP: 002b:00007fff904bef48 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   14.567786] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f364a63ee5d
[   14.568040] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   14.568294] RBP: 00007fff904bef60 R08: 0000000000000800 R09: 0000000000000800
[   14.568548] R10: 0000000000000000 R11: 0000000000000213 R12: 00007fff904bf078
[   14.568801] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f364a9db000
[   14.569060]  </TASK>
[   14.569144] Modules linked in:
[   14.569320] ---[ end trace 0000000000000000 ]---
[   14.569489] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   14.569697] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   14.570344] RSP: 0018:ffff88802457fba8 EFLAGS: 00010206
[   14.570536] RAX: dffffc0000000000 RBX: ffff888014f9b000 RCX: 0000000000000000
[   14.570803] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   14.571065] RBP: ffff88802457fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   14.571319] R10: ffff88800aad88df R11: 0000000000000001 R12: 0000000000000000
[   14.571572] R13: ffffffff85cc0180 R14: ffff8880109b6ac0 R15: ffffffff87070ae0
[   14.571826] FS:  00007f364a99a600(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
[   14.572113] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   14.572320] CR2: 0000000020000080 CR3: 00000000135d2000 CR4: 0000000000750ee0
[   14.572575] PKRU: 55555554
[   14.572929] ------------[ cut here ]------------
[   14.573098] WARNING: CPU: 1 PID: 717 at drivers/iommu/iommufd/main.c:258 iommufd_fops_release+0x2a3/0x300
[   14.573439] Modules linked in:
[   14.573555] CPU: 1 PID: 717 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   14.573864] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   14.574263] RIP: 0010:iommufd_fops_release+0x2a3/0x300
[   14.574453] Code: 45 d0 65 48 2b 04 25 28 00 00 00 75 54 48 81 c4 88 00 00 00 31 c0 5b 41 5c 41 5d 41 5e 41 5f 5d c3 cc cc cc cc e8 ad 4f 0a fe <0f> 0b eb a6 e8 74 23 67 fe e9 f6 fe ff ff 48 89 85 50 ff ff ff e8
[   14.575116] RSP: 0018:ffff888014b97c00 EFLAGS: 00010293
[   14.575307] RAX: 0000000000000000 RBX: ffff888010aafa08 RCX: 0000000000000000
[   14.575561] RDX: ffff8880122b4a00 RSI: ffffffff835563e3 RDI: ffffffff86702b48
[   14.575815] RBP: ffff888014b97cb0 R08: 0000000000000000 R09: fffffbfff0eb2644
[   14.576069] R10: ffffffff87593227 R11: ffff888017232e00 R12: 0000000000000000
[   14.576322] R13: ffff888011e04698 R14: ffff888014b97c48 R15: ffffffff83556140
[   14.576576] FS:  0000000000000000(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
[   14.576862] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   14.577069] CR2: 0000000020000080 CR3: 000000000687e000 CR4: 0000000000750ee0
[   14.577324] PKRU: 55555554
[   14.577527] Call Trace:
[   14.577648]  <TASK>
[   14.577732]  ? show_regs+0x6e/0x80
[   14.577864]  ? __warn+0xef/0x340
[   14.577990]  ? report_bug+0x25e/0x4b0
[   14.578130]  ? iommufd_fops_release+0x2a3/0x300
[   14.578300]  ? report_bug+0x2cb/0x4b0
[   14.578442]  ? handle_bug+0x46/0x90
[   14.578590]  ? exc_invalid_op+0x1d/0x50
[   14.578736]  ? asm_exc_invalid_op+0x1f/0x30
[   14.578920]  ? __pfx_iommufd_fops_release+0x10/0x10
[   14.579110]  ? iommufd_fops_release+0x2a3/0x300
[   14.579280]  ? iommufd_fops_release+0x2a3/0x300
[   14.579451]  ? __pfx_iommufd_fops_release+0x10/0x10
[   14.579631]  ? rcu_is_watching+0x19/0xc0
[   14.579780]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   14.579979]  ? __pfx_iommufd_fops_release+0x10/0x10
[   14.580159]  __fput+0x424/0xaf0
[   14.580286]  ____fput+0x1f/0x30
[   14.580411]  task_work_run+0x19d/0x2b0
[   14.580553]  ? __pfx_task_work_run+0x10/0x10
[   14.580714]  ? __sanitizer_cov_trace_const_cmp1+0x1e/0x30
[   14.580911]  ? switch_task_namespaces+0xa9/0xe0
[   14.581082]  do_exit+0xac9/0x2790
[   14.581210]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   14.581438]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   14.581620]  ? __pfx_do_exit+0x10/0x10
[   14.581762]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   14.581960]  ? security_file_ioctl+0x9d/0xd0
[   14.582122]  make_task_dead+0x182/0x3c0
[   14.582268]  rewind_stack_and_make_dead+0x17/0x20
[   14.582444] RIP: 0033:0x7f364a63ee5d
[   14.582589] Code: Unable to access opcode bytes at 0x7f364a63ee33.
[   14.582815] RSP: 002b:00007fff904bef48 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   14.583089] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f364a63ee5d
[   14.583343] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   14.583596] RBP: 00007fff904bef60 R08: 0000000000000800 R09: 0000000000000800
[   14.583850] R10: 0000000000000000 R11: 0000000000000213 R12: 00007fff904bf078
[   14.584104] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f364a9db000
[   14.584362]  </TASK>
[   14.584447] irq event stamp: 0
[   14.584563] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   14.584788] hardirqs last disabled at (0): [<ffffffff8122f2d1>] copy_process+0x1c51/0x7140
[   14.585082] softirqs last  enabled at (0): [<ffffffff8122f312>] copy_process+0x1c92/0x7140
[   14.585375] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   14.585599] ---[ end trace 0000000000000000 ]---
[   14.588412] iommufd_mock iommufd_mock2: Adding to iommu group 2
[   14.588651] iommufd_mock iommufd_mock2: Removing from iommu group 2
[   14.588894] general protection fault, probably for non-canonical address 0xdffffc0000000006: 0000 [#3] PREEMPT SMP KASAN NOPTI
[   14.589294] KASAN: null-ptr-deref in range [0x0000000000000030-0x0000000000000037]
[   14.589563] CPU: 1 PID: 718 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   14.589872] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   14.590271] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   14.590481] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   14.591156] RSP: 0018:ffff88801493fba8 EFLAGS: 00010206
[   14.591347] RAX: dffffc0000000000 RBX: ffff88800fae2000 RCX: 0000000000000000
[   14.591601] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   14.591856] RBP: ffff88801493fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   14.592110] R10: ffff88800aad88df R11: 5f6466756d6d6f69 R12: 0000000000000000
[   14.592364] R13: ffffffff85cc0180 R14: ffff88800bbbd7c0 R15: ffffffff87070ae0
[   14.592618] FS:  00007fa9094c1600(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
[   14.592905] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   14.593113] CR2: 0000000020000080 CR3: 00000000135d2000 CR4: 0000000000750ee0
[   14.593368] PKRU: 55555554
[   14.593470] Call Trace:
[   14.593563]  <TASK>
[   14.593645]  ? show_regs+0x6e/0x80
[   14.593779]  ? die_addr+0x45/0xb0
[   14.593910]  ? exc_general_protection+0x159/0x250
[   14.594092]  ? asm_exc_general_protection+0x2b/0x30
[   14.594275]  ? sysfs_remove_link_from_group+0x21/0x90
[   14.594463]  ? sysfs_remove_link_from_group+0x37/0x90
[   14.594651]  ? sysfs_remove_link_from_group+0x21/0x90
[   14.594844]  iommu_device_unlink+0x85/0xd0
[   14.595001]  iommu_deinit_device+0x11f/0x4c0
[   14.595165]  __iommu_group_remove_device+0x26b/0x300
[   14.595352]  iommu_group_remove_device+0x8a/0xb0
[   14.595526]  iommufd_test+0x1f1a/0x2d10
[   14.595671]  ? __pfx_lock_release+0x10/0x10
[   14.595829]  ? __pfx_lock_acquire+0x10/0x10
[   14.595988]  ? __pfx_iommufd_test+0x10/0x10
[   14.596145]  ? __sanitizer_cov_trace_const_cmp8+0x1c/0x30
[   14.596346]  iommufd_fops_ioctl+0x377/0x510
[   14.596505]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   14.596681]  ? trace_hardirqs_on+0x26/0x120
[   14.596841]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   14.597071]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   14.597254]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   14.597453]  ? security_file_ioctl+0x9d/0xd0
[   14.597617]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   14.597794]  __x64_sys_ioctl+0x1b9/0x230
[   14.597942]  do_syscall_64+0x3c/0x90
[   14.598078]  entry_SYSCALL_64_after_hwframe+0x6e/0xd8
[   14.598264] RIP: 0033:0x7fa90923ee5d
[   14.598401] Code: ff c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d 93 af 1b 00 f7 d8 64 89 01 48
[   14.599052] RSP: 002b:00007ffe753fa1f8 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   14.599322] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007fa90923ee5d
[   14.599576] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   14.599831] RBP: 00007ffe753fa210 R08: 0000000000000800 R09: 0000000000000800
[   14.600086] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffe753fa328
[   14.600340] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007fa909502000
[   14.600599]  </TASK>
[   14.600684] Modules linked in:
[   14.600840] ---[ end trace 0000000000000000 ]---
[   14.601011] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   14.601220] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   14.601869] RSP: 0018:ffff88802457fba8 EFLAGS: 00010206
[   14.602060] RAX: dffffc0000000000 RBX: ffff888014f9b000 RCX: 0000000000000000
[   14.602315] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   14.602569] RBP: ffff88802457fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   14.602836] R10: ffff88800aad88df R11: 0000000000000001 R12: 0000000000000000
[   14.603090] R13: ffffffff85cc0180 R14: ffff8880109b6ac0 R15: ffffffff87070ae0
[   14.603344] FS:  00007fa9094c1600(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
[   14.603631] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   14.603839] CR2: 0000000020000080 CR3: 00000000135d2000 CR4: 0000000000750ee0
[   14.604094] PKRU: 55555554
[   14.604450] ------------[ cut here ]------------
[   14.604619] WARNING: CPU: 1 PID: 718 at drivers/iommu/iommufd/main.c:258 iommufd_fops_release+0x2a3/0x300
[   14.604960] Modules linked in:
[   14.605076] CPU: 1 PID: 718 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   14.605386] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   14.605786] RIP: 0010:iommufd_fops_release+0x2a3/0x300
[   14.605976] Code: 45 d0 65 48 2b 04 25 28 00 00 00 75 54 48 81 c4 88 00 00 00 31 c0 5b 41 5c 41 5d 41 5e 41 5f 5d c3 cc cc cc cc e8 ad 4f 0a fe <0f> 0b eb a6 e8 74 23 67 fe e9 f6 fe ff ff 48 89 85 50 ff ff ff e8
[   14.606676] RSP: 0018:ffff88801493fc00 EFLAGS: 00010293
[   14.606869] RAX: 0000000000000000 RBX: ffff888010aaf808 RCX: 0000000000000000
[   14.607123] RDX: ffff888012c30000 RSI: ffffffff835563e3 RDI: ffffffff86702b48
[   14.607378] RBP: ffff88801493fcb0 R08: 0000000000000000 R09: fffffbfff0eb2644
[   14.607632] R10: ffffffff87593227 R11: ffff88802092be00 R12: 0000000000000000
[   14.607885] R13: ffff888020928918 R14: ffff88801493fc48 R15: ffffffff83556140
[   14.608139] FS:  0000000000000000(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
[   14.608425] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   14.608632] CR2: 0000000020000080 CR3: 000000000687e000 CR4: 0000000000750ee0
[   14.608887] PKRU: 55555554
[   14.608990] Call Trace:
[   14.609083]  <TASK>
[   14.609165]  ? show_regs+0x6e/0x80
[   14.609297]  ? __warn+0xef/0x340
[   14.609422]  ? report_bug+0x25e/0x4b0
[   14.609562]  ? iommufd_fops_release+0x2a3/0x300
[   14.609732]  ? report_bug+0x2cb/0x4b0
[   14.609875]  ? handle_bug+0x46/0x90
[   14.610009]  ? exc_invalid_op+0x1d/0x50
[   14.610154]  ? asm_exc_invalid_op+0x1f/0x30
[   14.610309]  ? __pfx_iommufd_fops_release+0x10/0x10
[   14.610492]  ? iommufd_fops_release+0x2a3/0x300
[   14.610696]  ? iommufd_fops_release+0x2a3/0x300
[   14.610873]  ? __pfx_iommufd_fops_release+0x10/0x10
[   14.611057]  ? rcu_is_watching+0x19/0xc0
[   14.611213]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   14.611413]  ? __pfx_iommufd_fops_release+0x10/0x10
[   14.611593]  __fput+0x424/0xaf0
[   14.611720]  ____fput+0x1f/0x30
[   14.611842]  task_work_run+0x19d/0x2b0
[   14.611985]  ? __pfx_task_work_run+0x10/0x10
[   14.612146]  ? __sanitizer_cov_trace_const_cmp1+0x1e/0x30
[   14.612343]  ? switch_task_namespaces+0xa9/0xe0
[   14.612514]  do_exit+0xac9/0x2790
[   14.612642]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   14.612870]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   14.613052]  ? __pfx_do_exit+0x10/0x10
[   14.613194]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   14.613391]  ? security_file_ioctl+0x9d/0xd0
[   14.613554]  make_task_dead+0x182/0x3c0
[   14.613700]  rewind_stack_and_make_dead+0x17/0x20
[   14.613876] RIP: 0033:0x7fa90923ee5d
[   14.614010] Code: Unable to access opcode bytes at 0x7fa90923ee33.
[   14.614230] RSP: 002b:00007ffe753fa1f8 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   14.614500] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007fa90923ee5d
[   14.614793] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   14.615064] RBP: 00007ffe753fa210 R08: 0000000000000800 R09: 0000000000000800
[   14.615326] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffe753fa328
[   14.615580] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007fa909502000
[   14.615839]  </TASK>
[   14.615924] irq event stamp: 0
[   14.616039] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   14.616264] hardirqs last disabled at (0): [<ffffffff8122f2d1>] copy_process+0x1c51/0x7140
[   14.616558] softirqs last  enabled at (0): [<ffffffff8122f312>] copy_process+0x1c92/0x7140
[   14.616852] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   14.617076] ---[ end trace 0000000000000000 ]---
[   14.619799] iommufd_mock iommufd_mock3: Adding to iommu group 3
[   14.620045] iommufd_mock iommufd_mock3: Removing from iommu group 3
[   14.620293] general protection fault, probably for non-canonical address 0xdffffc0000000006: 0000 [#4] PREEMPT SMP KASAN NOPTI
[   14.620701] KASAN: null-ptr-deref in range [0x0000000000000030-0x0000000000000037]
[   14.620969] CPU: 1 PID: 719 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   14.621277] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   14.621676] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   14.621885] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   14.622533] RSP: 0018:ffff888013267ba8 EFLAGS: 00010206
[   14.622730] RAX: dffffc0000000000 RBX: ffff88800fae3000 RCX: 0000000000000000
[   14.622995] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   14.623248] RBP: ffff888013267bc0 R08: 0000000000000001 R09: ffffed100155b11b
[   14.623503] R10: ffff88800aad88df R11: 5f6466756d6d6f69 R12: 0000000000000000
[   14.623757] R13: ffffffff85cc0180 R14: ffff88800bbbd900 R15: ffffffff87070ae0
[   14.624012] FS:  00007f8a1cc49600(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
[   14.624299] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   14.624506] CR2: 0000000020000080 CR3: 00000000135d2000 CR4: 0000000000750ee0
[   14.624762] PKRU: 55555554
[   14.624864] Call Trace:
[   14.624957]  <TASK>
[   14.625039]  ? show_regs+0x6e/0x80
[   14.625173]  ? die_addr+0x45/0xb0
[   14.625304]  ? exc_general_protection+0x159/0x250
[   14.625485]  ? asm_exc_general_protection+0x2b/0x30
[   14.625669]  ? sysfs_remove_link_from_group+0x21/0x90
[   14.625857]  ? sysfs_remove_link_from_group+0x37/0x90
[   14.626044]  ? sysfs_remove_link_from_group+0x21/0x90
[   14.626232]  iommu_device_unlink+0x85/0xd0
[   14.626386]  iommu_deinit_device+0x11f/0x4c0
[   14.626549]  __iommu_group_remove_device+0x26b/0x300
[   14.626741]  iommu_group_remove_device+0x8a/0xb0
[   14.626922]  iommufd_test+0x1f1a/0x2d10
[   14.627070]  ? __pfx_lock_release+0x10/0x10
[   14.627231]  ? __pfx_lock_acquire+0x10/0x10
[   14.627394]  ? __pfx_iommufd_test+0x10/0x10
[   14.627554]  ? __sanitizer_cov_trace_const_cmp8+0x1c/0x30
[   14.627755]  iommufd_fops_ioctl+0x377/0x510
[   14.627914]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   14.628090]  ? trace_hardirqs_on+0x26/0x120
[   14.628249]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   14.628479]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   14.628663]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   14.628862]  ? security_file_ioctl+0x9d/0xd0
[   14.629026]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   14.629202]  __x64_sys_ioctl+0x1b9/0x230
[   14.629350]  do_syscall_64+0x3c/0x90
[   14.629485]  entry_SYSCALL_64_after_hwframe+0x6e/0xd8
[   14.629671] RIP: 0033:0x7f8a1ca3ee5d
[   14.629806] Code: ff c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d 93 af 1b 00 f7 d8 64 89 01 48
[   14.630457] RSP: 002b:00007ffe3222be98 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   14.630733] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f8a1ca3ee5d
[   14.630995] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   14.631249] RBP: 00007ffe3222beb0 R08: 0000000000000800 R09: 0000000000000800
[   14.631503] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffe3222bfc8
[   14.631757] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f8a1cc8a000
[   14.632017]  </TASK>
[   14.632102] Modules linked in:
[   14.632240] ---[ end trace 0000000000000000 ]---
[   14.632427] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   14.632641] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   14.633303] RSP: 0018:ffff88802457fba8 EFLAGS: 00010206
[   14.633498] RAX: dffffc0000000000 RBX: ffff888014f9b000 RCX: 0000000000000000
[   14.633758] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   14.634018] RBP: ffff88802457fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   14.634277] R10: ffff88800aad88df R11: 0000000000000001 R12: 0000000000000000
[   14.634536] R13: ffffffff85cc0180 R14: ffff8880109b6ac0 R15: ffffffff87070ae0
[   14.634810] FS:  00007f8a1cc49600(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
[   14.635104] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   14.635313] CR2: 0000000020000080 CR3: 00000000135d2000 CR4: 0000000000750ee0
[   14.635568] PKRU: 55555554
[   14.635924] ------------[ cut here ]------------
[   14.636093] WARNING: CPU: 1 PID: 719 at drivers/iommu/iommufd/main.c:258 iommufd_fops_release+0x2a3/0x300
[   14.636433] Modules linked in:
[   14.636548] CPU: 1 PID: 719 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   14.636856] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   14.637255] RIP: 0010:iommufd_fops_release+0x2a3/0x300
[   14.637444] Code: 45 d0 65 48 2b 04 25 28 00 00 00 75 54 48 81 c4 88 00 00 00 31 c0 5b 41 5c 41 5d 41 5e 41 5f 5d c3 cc cc cc cc e8 ad 4f 0a fe <0f> 0b eb a6 e8 74 23 67 fe e9 f6 fe ff ff 48 89 85 50 ff ff ff e8
[   14.638090] RSP: 0018:ffff888013267c00 EFLAGS: 00010293
[   14.638280] RAX: 0000000000000000 RBX: ffff888010aafc08 RCX: 0000000000000000
[   14.638533] RDX: ffff888012c34a00 RSI: ffffffff835563e3 RDI: ffffffff86702b48
[   14.638811] RBP: ffff888013267cb0 R08: 0000000000000000 R09: fffffbfff0eb2644
[   14.639081] R10: ffffffff87593227 R11: ffff88802008b200 R12: 0000000000000000
[   14.639342] R13: ffff888011183598 R14: ffff888013267c48 R15: ffffffff83556140
[   14.639608] FS:  0000000000000000(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
[   14.639911] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   14.640118] CR2: 0000000020000080 CR3: 000000000687e000 CR4: 0000000000750ee0
[   14.640378] PKRU: 55555554
[   14.640489] Call Trace:
[   14.640585]  <TASK>
[   14.640668]  ? show_regs+0x6e/0x80
[   14.640800]  ? __warn+0xef/0x340
[   14.640925]  ? report_bug+0x25e/0x4b0
[   14.641072]  ? iommufd_fops_release+0x2a3/0x300
[   14.641246]  ? report_bug+0x2cb/0x4b0
[   14.641415]  ? handle_bug+0x46/0x90
[   14.641553]  ? exc_invalid_op+0x1d/0x50
[   14.641704]  ? asm_exc_invalid_op+0x1f/0x30
[   14.641859]  ? __pfx_iommufd_fops_release+0x10/0x10
[   14.642042]  ? iommufd_fops_release+0x2a3/0x300
[   14.642211]  ? iommufd_fops_release+0x2a3/0x300
[   14.642382]  ? __pfx_iommufd_fops_release+0x10/0x10
[   14.642564]  ? rcu_is_watching+0x19/0xc0
[   14.642730]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   14.642956]  ? __pfx_iommufd_fops_release+0x10/0x10
[   14.643140]  __fput+0x424/0xaf0
[   14.643270]  ____fput+0x1f/0x30
[   14.643392]  task_work_run+0x19d/0x2b0
[   14.643535]  ? __pfx_task_work_run+0x10/0x10
[   14.643696]  ? __sanitizer_cov_trace_const_cmp1+0x1e/0x30
[   14.643896]  ? switch_task_namespaces+0xa9/0xe0
[   14.644068]  do_exit+0xac9/0x2790
[   14.644197]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   14.644424]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   14.644606]  ? __pfx_do_exit+0x10/0x10
[   14.644747]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   14.644945]  ? security_file_ioctl+0x9d/0xd0
[   14.645109]  make_task_dead+0x182/0x3c0
[   14.645254]  rewind_stack_and_make_dead+0x17/0x20
[   14.645430] RIP: 0033:0x7f8a1ca3ee5d
[   14.645564] Code: Unable to access opcode bytes at 0x7f8a1ca3ee33.
[   14.645784] RSP: 002b:00007ffe3222be98 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   14.646055] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f8a1ca3ee5d
[   14.646309] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   14.646563] RBP: 00007ffe3222beb0 R08: 0000000000000800 R09: 0000000000000800
[   14.646837] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffe3222bfc8
[   14.647108] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f8a1cc8a000
[   14.647376]  </TASK>
[   14.647461] irq event stamp: 0
[   14.647576] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   14.647801] hardirqs last disabled at (0): [<ffffffff8122f2d1>] copy_process+0x1c51/0x7140
[   14.648100] softirqs last  enabled at (0): [<ffffffff8122f312>] copy_process+0x1c92/0x7140
[   14.648393] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   14.648618] ---[ end trace 0000000000000000 ]---
[   14.651311] iommufd_mock iommufd_mock4: Adding to iommu group 4
[   14.651554] iommufd_mock iommufd_mock4: Removing from iommu group 4
[   14.651803] general protection fault, probably for non-canonical address 0xdffffc0000000006: 0000 [#5] PREEMPT SMP KASAN NOPTI
[   14.652213] KASAN: null-ptr-deref in range [0x0000000000000030-0x0000000000000037]
[   14.652482] CPU: 1 PID: 720 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   14.652791] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   14.653192] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   14.653402] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   14.654065] RSP: 0018:ffff888011e17ba8 EFLAGS: 00010206
[   14.654256] RAX: dffffc0000000000 RBX: ffff88800fae7000 RCX: 0000000000000000
[   14.654510] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   14.654776] RBP: ffff888011e17bc0 R08: 0000000000000001 R09: ffffed100155b11b
[   14.655036] R10: ffff88800aad88df R11: 5f6466756d6d6f69 R12: 0000000000000000
[   14.655296] R13: ffffffff85cc0180 R14: ffff88800bbbdbe0 R15: ffffffff87070ae0
[   14.655556] FS:  00007fd968ff5600(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
[   14.655853] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   14.656062] CR2: 0000000020000080 CR3: 00000000135d2000 CR4: 0000000000750ee0
[   14.656317] PKRU: 55555554
[   14.656420] Call Trace:
[   14.656512]  <TASK>
[   14.656595]  ? show_regs+0x6e/0x80
[   14.656729]  ? die_addr+0x45/0xb0
[   14.656861]  ? exc_general_protection+0x159/0x250
[   14.657042]  ? asm_exc_general_protection+0x2b/0x30
[   14.657226]  ? sysfs_remove_link_from_group+0x21/0x90
[   14.657416]  ? sysfs_remove_link_from_group+0x37/0x90
[   14.657605]  ? sysfs_remove_link_from_group+0x21/0x90
[   14.657794]  iommu_device_unlink+0x85/0xd0
[   14.657948]  iommu_deinit_device+0x11f/0x4c0
[   14.658112]  __iommu_group_remove_device+0x26b/0x300
[   14.658300]  iommu_group_remove_device+0x8a/0xb0
[   14.658474]  iommufd_test+0x1f1a/0x2d10
[   14.658620]  ? __pfx_lock_release+0x10/0x10
[   14.658784]  ? __pfx_lock_acquire+0x10/0x10
[   14.658948]  ? __pfx_iommufd_test+0x10/0x10
[   14.659109]  ? __sanitizer_cov_trace_const_cmp8+0x1c/0x30
[   14.659315]  iommufd_fops_ioctl+0x377/0x510
[   14.659478]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   14.659655]  ? trace_hardirqs_on+0x26/0x120
[   14.659815]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   14.660045]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   14.660229]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   14.660429]  ? security_file_ioctl+0x9d/0xd0
[   14.660593]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   14.660769]  __x64_sys_ioctl+0x1b9/0x230
[   14.660918]  do_syscall_64+0x3c/0x90
[   14.661053]  entry_SYSCALL_64_after_hwframe+0x6e/0xd8
[   14.661240] RIP: 0033:0x7fd968c3ee5d
[   14.661376] Code: ff c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d 93 af 1b 00 f7 d8 64 89 01 48
[   14.662025] RSP: 002b:00007ffe941e12e8 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   14.662296] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007fd968c3ee5d
[   14.662551] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   14.662823] RBP: 00007ffe941e1300 R08: 0000000000000800 R09: 0000000000000800
[   14.663083] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffe941e1418
[   14.663343] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007fd969036000
[   14.663606]  </TASK>
[   14.663691] Modules linked in:
[   14.663859] ---[ end trace 0000000000000000 ]---
[   14.664032] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   14.664245] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   14.664908] RSP: 0018:ffff88802457fba8 EFLAGS: 00010206
[   14.665104] RAX: dffffc0000000000 RBX: ffff888014f9b000 RCX: 0000000000000000
[   14.665364] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   14.665625] RBP: ffff88802457fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   14.665883] R10: ffff88800aad88df R11: 0000000000000001 R12: 0000000000000000
[   14.666137] R13: ffffffff85cc0180 R14: ffff8880109b6ac0 R15: ffffffff87070ae0
[   14.666391] FS:  00007fd968ff5600(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
[   14.666688] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   14.666902] CR2: 0000000020000080 CR3: 00000000135d2000 CR4: 0000000000750ee0
[   14.667166] PKRU: 55555554
[   14.667529] ------------[ cut here ]------------
[   14.667699] WARNING: CPU: 1 PID: 720 at drivers/iommu/iommufd/main.c:258 iommufd_fops_release+0x2a3/0x300
[   14.668041] Modules linked in:
[   14.668157] CPU: 1 PID: 720 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   14.668466] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   14.668866] RIP: 0010:iommufd_fops_release+0x2a3/0x300
[   14.669056] Code: 45 d0 65 48 2b 04 25 28 00 00 00 75 54 48 81 c4 88 00 00 00 31 c0 5b 41 5c 41 5d 41 5e 41 5f 5d c3 cc cc cc cc e8 ad 4f 0a fe <0f> 0b eb a6 e8 74 23 67 fe e9 f6 fe ff ff 48 89 85 50 ff ff ff e8
[   14.669703] RSP: 0018:ffff888011e17c00 EFLAGS: 00010293
[   14.669893] RAX: 0000000000000000 RBX: ffff888010aaf508 RCX: 0000000000000000
[   14.670147] RDX: ffff888011e82500 RSI: ffffffff835563e3 RDI: ffffffff86702b48
[   14.670402] RBP: ffff888011e17cb0 R08: 0000000000000000 R09: fffffbfff0eb2644
[   14.670665] R10: ffffffff87593227 R11: ffff888018a04400 R12: 0000000000000000
[   14.670921] R13: ffff88800fe49318 R14: ffff888011e17c48 R15: ffffffff83556140
[   14.671176] FS:  0000000000000000(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
[   14.671463] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   14.671671] CR2: 0000000020000080 CR3: 000000000687e000 CR4: 0000000000750ee0
[   14.671926] PKRU: 55555554
[   14.672028] Call Trace:
[   14.672121]  <TASK>
[   14.672203]  ? show_regs+0x6e/0x80
[   14.672335]  ? __warn+0xef/0x340
[   14.672460]  ? report_bug+0x25e/0x4b0
[   14.672601]  ? iommufd_fops_release+0x2a3/0x300
[   14.672771]  ? report_bug+0x2cb/0x4b0
[   14.672913]  ? handle_bug+0x46/0x90
[   14.673047]  ? exc_invalid_op+0x1d/0x50
[   14.673192]  ? asm_exc_invalid_op+0x1f/0x30
[   14.673347]  ? __pfx_iommufd_fops_release+0x10/0x10
[   14.673531]  ? iommufd_fops_release+0x2a3/0x300
[   14.673701]  ? iommufd_fops_release+0x2a3/0x300
[   14.673873]  ? __pfx_iommufd_fops_release+0x10/0x10
[   14.674053]  ? rcu_is_watching+0x19/0xc0
[   14.674203]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   14.674402]  ? __pfx_iommufd_fops_release+0x10/0x10
[   14.674591]  __fput+0x424/0xaf0
[   14.674718]  ____fput+0x1f/0x30
[   14.674843]  task_work_run+0x19d/0x2b0
[   14.674986]  ? __pfx_task_work_run+0x10/0x10
[   14.675150]  ? __sanitizer_cov_trace_const_cmp1+0x1e/0x30
[   14.675349]  ? switch_task_namespaces+0xa9/0xe0
[   14.675520]  do_exit+0xac9/0x2790
[   14.675648]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   14.675876]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   14.676059]  ? __pfx_do_exit+0x10/0x10
[   14.676201]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   14.676399]  ? security_file_ioctl+0x9d/0xd0
[   14.676563]  make_task_dead+0x182/0x3c0
[   14.676709]  rewind_stack_and_make_dead+0x17/0x20
[   14.676886] RIP: 0033:0x7fd968c3ee5d
[   14.677020] Code: Unable to access opcode bytes at 0x7fd968c3ee33.
[   14.677240] RSP: 002b:00007ffe941e12e8 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   14.677511] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007fd968c3ee5d
[   14.677765] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   14.678020] RBP: 00007ffe941e1300 R08: 0000000000000800 R09: 0000000000000800
[   14.678274] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffe941e1418
[   14.678528] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007fd969036000
[   14.678796]  </TASK>
[   14.678882] irq event stamp: 0
[   14.678996] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   14.679222] hardirqs last disabled at (0): [<ffffffff8122f2d1>] copy_process+0x1c51/0x7140
[   14.679518] softirqs last  enabled at (0): [<ffffffff8122f312>] copy_process+0x1c92/0x7140
[   14.679814] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   14.680039] ---[ end trace 0000000000000000 ]---
[   14.682499] iommufd_mock iommufd_mock5: Adding to iommu group 5
[   14.682874] iommufd_mock iommufd_mock5: Removing from iommu group 5
[   14.683123] general protection fault, probably for non-canonical address 0xdffffc0000000006: 0000 [#6] PREEMPT SMP KASAN NOPTI
[   14.683524] KASAN: null-ptr-deref in range [0x0000000000000030-0x0000000000000037]
[   14.683793] CPU: 1 PID: 721 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   14.684102] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   14.684503] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   14.684713] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   14.685359] RSP: 0018:ffff88800fc0fba8 EFLAGS: 00010206
[   14.685550] RAX: dffffc0000000000 RBX: ffff88800fae6000 RCX: 0000000000000000
[   14.685805] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   14.686059] RBP: ffff88800fc0fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   14.686313] R10: ffff88800aad88df R11: 5f6466756d6d6f69 R12: 0000000000000000
[   14.686567] R13: ffffffff85cc0180 R14: ffff88800bbbd980 R15: ffffffff87070ae0
[   14.686827] FS:  00007fda5d9e6600(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
[   14.687115] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   14.687323] CR2: 0000000020000080 CR3: 00000000135d2000 CR4: 0000000000750ee0
[   14.687579] PKRU: 55555554
[   14.687682] Call Trace:
[   14.687775]  <TASK>
[   14.687857]  ? show_regs+0x6e/0x80
[   14.687995]  ? die_addr+0x45/0xb0
[   14.688126]  ? exc_general_protection+0x159/0x250
[   14.688307]  ? asm_exc_general_protection+0x2b/0x30
[   14.688491]  ? sysfs_remove_link_from_group+0x21/0x90
[   14.688680]  ? sysfs_remove_link_from_group+0x37/0x90
[   14.688868]  ? sysfs_remove_link_from_group+0x21/0x90
[   14.689056]  iommu_device_unlink+0x85/0xd0
[   14.689210]  iommu_deinit_device+0x11f/0x4c0
[   14.689374]  __iommu_group_remove_device+0x26b/0x300
[   14.689561]  iommu_group_remove_device+0x8a/0xb0
[   14.689735]  iommufd_test+0x1f1a/0x2d10
[   14.689879]  ? __pfx_lock_release+0x10/0x10
[   14.690037]  ? __pfx_lock_acquire+0x10/0x10
[   14.690197]  ? __pfx_iommufd_test+0x10/0x10
[   14.690355]  ? __sanitizer_cov_trace_const_cmp8+0x1c/0x30
[   14.690555]  iommufd_fops_ioctl+0x377/0x510
[   14.690715]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   14.690909]  ? trace_hardirqs_on+0x26/0x120
[   14.691069]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   14.691301]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   14.691487]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   14.691687]  ? security_file_ioctl+0x9d/0xd0
[   14.691852]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   14.692031]  __x64_sys_ioctl+0x1b9/0x230
[   14.692180]  do_syscall_64+0x3c/0x90
[   14.692316]  entry_SYSCALL_64_after_hwframe+0x6e/0xd8
[   14.692503] RIP: 0033:0x7fda5d63ee5d
[   14.692639] Code: ff c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d 93 af 1b 00 f7 d8 64 89 01 48
[   14.693288] RSP: 002b:00007ffff404d0b8 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   14.693559] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007fda5d63ee5d
[   14.693814] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   14.694068] RBP: 00007ffff404d0d0 R08: 0000000000000800 R09: 0000000000000800
[   14.694323] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffff404d1e8
[   14.694578] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007fda5da27000
[   14.694846]  </TASK>
[   14.694931] Modules linked in:
[   14.695061] ---[ end trace 0000000000000000 ]---
[   14.695231] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   14.695443] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   14.696100] RSP: 0018:ffff88802457fba8 EFLAGS: 00010206
[   14.696299] RAX: dffffc0000000000 RBX: ffff888014f9b000 RCX: 0000000000000000
[   14.696553] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   14.696808] RBP: ffff88802457fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   14.697062] R10: ffff88800aad88df R11: 0000000000000001 R12: 0000000000000000
[   14.697317] R13: ffffffff85cc0180 R14: ffff8880109b6ac0 R15: ffffffff87070ae0
[   14.697572] FS:  00007fda5d9e6600(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
[   14.697860] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   14.698069] CR2: 0000000020000080 CR3: 00000000135d2000 CR4: 0000000000750ee0
[   14.698328] PKRU: 55555554
[   14.698762] ------------[ cut here ]------------
[   14.698937] WARNING: CPU: 1 PID: 721 at drivers/iommu/iommufd/main.c:258 iommufd_fops_release+0x2a3/0x300
[   14.699286] Modules linked in:
[   14.699402] CPU: 1 PID: 721 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   14.699712] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   14.700112] RIP: 0010:iommufd_fops_release+0x2a3/0x300
[   14.700302] Code: 45 d0 65 48 2b 04 25 28 00 00 00 75 54 48 81 c4 88 00 00 00 31 c0 5b 41 5c 41 5d 41 5e 41 5f 5d c3 cc cc cc cc e8 ad 4f 0a fe <0f> 0b eb a6 e8 74 23 67 fe e9 f6 fe ff ff 48 89 85 50 ff ff ff e8
[   14.700951] RSP: 0018:ffff88800fc0fc00 EFLAGS: 00010293
[   14.701142] RAX: 0000000000000000 RBX: ffff888010aaf408 RCX: 0000000000000000
[   14.701402] RDX: ffff888013a02500 RSI: ffffffff835563e3 RDI: ffffffff86702b48
[   14.701656] RBP: ffff88800fc0fcb0 R08: 0000000000000000 R09: fffffbfff0eb2644
[   14.701910] R10: ffffffff87593227 R11: ffff88800f522200 R12: 0000000000000000
[   14.702164] R13: ffff88800fe49818 R14: ffff88800fc0fc48 R15: ffffffff83556140
[   14.702418] FS:  0000000000000000(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
[   14.702739] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   14.702964] CR2: 0000000020000080 CR3: 000000000687e000 CR4: 0000000000750ee0
[   14.703226] PKRU: 55555554
[   14.703328] Call Trace:
[   14.703421]  <TASK>
[   14.703503]  ? show_regs+0x6e/0x80
[   14.703635]  ? __warn+0xef/0x340
[   14.703760]  ? report_bug+0x25e/0x4b0
[   14.703901]  ? iommufd_fops_release+0x2a3/0x300
[   14.704071]  ? report_bug+0x2cb/0x4b0
[   14.704213]  ? handle_bug+0x46/0x90
[   14.704347]  ? exc_invalid_op+0x1d/0x50
[   14.704492]  ? asm_exc_invalid_op+0x1f/0x30
[   14.704647]  ? __pfx_iommufd_fops_release+0x10/0x10
[   14.704831]  ? iommufd_fops_release+0x2a3/0x300
[   14.705001]  ? iommufd_fops_release+0x2a3/0x300
[   14.705174]  ? __pfx_iommufd_fops_release+0x10/0x10
[   14.705355]  ? rcu_is_watching+0x19/0xc0
[   14.705505]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   14.705704]  ? __pfx_iommufd_fops_release+0x10/0x10
[   14.705885]  __fput+0x424/0xaf0
[   14.706012]  ____fput+0x1f/0x30
[   14.706135]  task_work_run+0x19d/0x2b0
[   14.706278]  ? __pfx_task_work_run+0x10/0x10
[   14.706439]  ? __sanitizer_cov_trace_const_cmp1+0x1e/0x30
[   14.706648]  ? switch_task_namespaces+0xa9/0xe0
[   14.706828]  do_exit+0xac9/0x2790
[   14.706959]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   14.707195]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   14.707378]  ? __pfx_do_exit+0x10/0x10
[   14.707521]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   14.707719]  ? security_file_ioctl+0x9d/0xd0
[   14.707882]  make_task_dead+0x182/0x3c0
[   14.708028]  rewind_stack_and_make_dead+0x17/0x20
[   14.708204] RIP: 0033:0x7fda5d63ee5d
[   14.708338] Code: Unable to access opcode bytes at 0x7fda5d63ee33.
[   14.708558] RSP: 002b:00007ffff404d0b8 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   14.708829] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007fda5d63ee5d
[   14.709084] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   14.709338] RBP: 00007ffff404d0d0 R08: 0000000000000800 R09: 0000000000000800
[   14.709592] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffff404d1e8
[   14.709846] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007fda5da27000
[   14.710106]  </TASK>
[   14.710191] irq event stamp: 0
[   14.710306] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   14.710531] hardirqs last disabled at (0): [<ffffffff8122f2d1>] copy_process+0x1c51/0x7140
[   14.710845] softirqs last  enabled at (0): [<ffffffff8122f312>] copy_process+0x1c92/0x7140
[   14.711149] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   14.711380] ---[ end trace 0000000000000000 ]---
[   14.713909] iommufd_mock iommufd_mock6: Adding to iommu group 6
[   14.714155] iommufd_mock iommufd_mock6: Removing from iommu group 6
[   14.714404] general protection fault, probably for non-canonical address 0xdffffc0000000006: 0000 [#7] PREEMPT SMP KASAN NOPTI
[   14.714820] KASAN: null-ptr-deref in range [0x0000000000000030-0x0000000000000037]
[   14.715089] CPU: 1 PID: 722 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   14.715399] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   14.715798] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   14.716009] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   14.716656] RSP: 0018:ffff888014f27ba8 EFLAGS: 00010206
[   14.716846] RAX: dffffc0000000000 RBX: ffff88800fae4000 RCX: 0000000000000000
[   14.717100] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   14.717354] RBP: ffff888014f27bc0 R08: 0000000000000001 R09: ffffed100155b11b
[   14.717608] R10: ffff88800aad88df R11: 5f6466756d6d6f69 R12: 0000000000000000
[   14.717861] R13: ffffffff85cc0180 R14: ffff88800fd72860 R15: ffffffff87070ae0
[   14.718115] FS:  00007fd95aa22600(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
[   14.718402] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   14.718611] CR2: 0000000020000080 CR3: 00000000135d2000 CR4: 0000000000750ee0
[   14.718876] PKRU: 55555554
[   14.718979] Call Trace:
[   14.719071]  <TASK>
[   14.719154]  ? show_regs+0x6e/0x80
[   14.719289]  ? die_addr+0x45/0xb0
[   14.719420]  ? exc_general_protection+0x159/0x250
[   14.719602]  ? asm_exc_general_protection+0x2b/0x30
[   14.719786]  ? sysfs_remove_link_from_group+0x21/0x90
[   14.719974]  ? sysfs_remove_link_from_group+0x37/0x90
[   14.720161]  ? sysfs_remove_link_from_group+0x21/0x90
[   14.720349]  iommu_device_unlink+0x85/0xd0
[   14.720506]  iommu_deinit_device+0x11f/0x4c0
[   14.720670]  __iommu_group_remove_device+0x26b/0x300
[   14.720858]  iommu_group_remove_device+0x8a/0xb0
[   14.721033]  iommufd_test+0x1f1a/0x2d10
[   14.721177]  ? __pfx_lock_release+0x10/0x10
[   14.721337]  ? __pfx_lock_acquire+0x10/0x10
[   14.721497]  ? __pfx_iommufd_test+0x10/0x10
[   14.721654]  ? __sanitizer_cov_trace_const_cmp8+0x1c/0x30
[   14.721856]  iommufd_fops_ioctl+0x377/0x510
[   14.722015]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   14.722192]  ? trace_hardirqs_on+0x26/0x120
[   14.722352]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   14.722582]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   14.722770]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   14.722983]  ? security_file_ioctl+0x9d/0xd0
[   14.723147]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   14.723323]  __x64_sys_ioctl+0x1b9/0x230
[   14.723471]  do_syscall_64+0x3c/0x90
[   14.723607]  entry_SYSCALL_64_after_hwframe+0x6e/0xd8
[   14.723793] RIP: 0033:0x7fd95a83ee5d
[   14.723928] Code: ff c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d 93 af 1b 00 f7 d8 64 89 01 48
[   14.724575] RSP: 002b:00007fff85ca4f18 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   14.724845] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007fd95a83ee5d
[   14.725099] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   14.725354] RBP: 00007fff85ca4f30 R08: 0000000000000800 R09: 0000000000000800
[   14.725608] R10: 0000000000000000 R11: 0000000000000213 R12: 00007fff85ca5048
[   14.725861] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007fd95aa63000
[   14.726121]  </TASK>
[   14.726205] Modules linked in:
[   14.726425] ---[ end trace 0000000000000000 ]---
[   14.726600] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   14.726811] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   14.727458] RSP: 0018:ffff88802457fba8 EFLAGS: 00010206
[   14.727648] RAX: dffffc0000000000 RBX: ffff888014f9b000 RCX: 0000000000000000
[   14.727902] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   14.728156] RBP: ffff88802457fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   14.728409] R10: ffff88800aad88df R11: 0000000000000001 R12: 0000000000000000
[   14.728663] R13: ffffffff85cc0180 R14: ffff8880109b6ac0 R15: ffffffff87070ae0
[   14.728917] FS:  00007fd95aa22600(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
[   14.729202] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   14.729410] CR2: 0000000020000080 CR3: 00000000135d2000 CR4: 0000000000750ee0
[   14.729664] PKRU: 55555554
[   14.730020] ------------[ cut here ]------------
[   14.730189] WARNING: CPU: 1 PID: 722 at drivers/iommu/iommufd/main.c:258 iommufd_fops_release+0x2a3/0x300
[   14.730555] Modules linked in:
[   14.730682] CPU: 1 PID: 722 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   14.730997] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   14.731397] RIP: 0010:iommufd_fops_release+0x2a3/0x300
[   14.731587] Code: 45 d0 65 48 2b 04 25 28 00 00 00 75 54 48 81 c4 88 00 00 00 31 c0 5b 41 5c 41 5d 41 5e 41 5f 5d c3 cc cc cc cc e8 ad 4f 0a fe <0f> 0b eb a6 e8 74 23 67 fe e9 f6 fe ff ff 48 89 85 50 ff ff ff e8
[   14.732233] RSP: 0018:ffff888014f27c00 EFLAGS: 00010293
[   14.732423] RAX: 0000000000000000 RBX: ffff888010aaf708 RCX: 0000000000000000
[   14.732680] RDX: ffff888013a04a00 RSI: ffffffff835563e3 RDI: ffffffff86702b48
[   14.732935] RBP: ffff888014f27cb0 R08: 0000000000000000 R09: fffffbfff0eb2644
[   14.733189] R10: ffffffff87593227 R11: ffff88801179c200 R12: 0000000000000000
[   14.733443] R13: ffff88800fe48198 R14: ffff888014f27c48 R15: ffffffff83556140
[   14.733696] FS:  0000000000000000(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
[   14.733983] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   14.734190] CR2: 0000000020000080 CR3: 000000000687e000 CR4: 0000000000750ee0
[   14.734445] PKRU: 55555554
[   14.734547] Call Trace:
[   14.734646]  <TASK>
[   14.734729]  ? show_regs+0x6e/0x80
[   14.734869]  ? __warn+0xef/0x340
[   14.734996]  ? report_bug+0x25e/0x4b0
[   14.735137]  ? iommufd_fops_release+0x2a3/0x300
[   14.735307]  ? report_bug+0x2cb/0x4b0
[   14.735449]  ? handle_bug+0x46/0x90
[   14.735583]  ? exc_invalid_op+0x1d/0x50
[   14.735728]  ? asm_exc_invalid_op+0x1f/0x30
[   14.735884]  ? __pfx_iommufd_fops_release+0x10/0x10
[   14.736067]  ? iommufd_fops_release+0x2a3/0x300
[   14.736237]  ? iommufd_fops_release+0x2a3/0x300
[   14.736408]  ? __pfx_iommufd_fops_release+0x10/0x10
[   14.736588]  ? rcu_is_watching+0x19/0xc0
[   14.736738]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   14.736937]  ? __pfx_iommufd_fops_release+0x10/0x10
[   14.737118]  __fput+0x424/0xaf0
[   14.737244]  ____fput+0x1f/0x30
[   14.737367]  task_work_run+0x19d/0x2b0
[   14.737510]  ? __pfx_task_work_run+0x10/0x10
[   14.737671]  ? __sanitizer_cov_trace_const_cmp1+0x1e/0x30
[   14.737869]  ? switch_task_namespaces+0xa9/0xe0
[   14.738039]  do_exit+0xac9/0x2790
[   14.738168]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   14.738395]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   14.738585]  ? __pfx_do_exit+0x10/0x10
[   14.738727]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   14.738948]  ? security_file_ioctl+0x9d/0xd0
[   14.739112]  make_task_dead+0x182/0x3c0
[   14.739258]  rewind_stack_and_make_dead+0x17/0x20
[   14.739434] RIP: 0033:0x7fd95a83ee5d
[   14.739568] Code: Unable to access opcode bytes at 0x7fd95a83ee33.
[   14.739787] RSP: 002b:00007fff85ca4f18 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   14.740058] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007fd95a83ee5d
[   14.740312] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   14.740565] RBP: 00007fff85ca4f30 R08: 0000000000000800 R09: 0000000000000800
[   14.740819] R10: 0000000000000000 R11: 0000000000000213 R12: 00007fff85ca5048
[   14.741073] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007fd95aa63000
[   14.741333]  </TASK>
[   14.741418] irq event stamp: 0
[   14.741532] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   14.741758] hardirqs last disabled at (0): [<ffffffff8122f2d1>] copy_process+0x1c51/0x7140
[   14.742052] softirqs last  enabled at (0): [<ffffffff8122f312>] copy_process+0x1c92/0x7140
[   14.742346] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   14.742570] ---[ end trace 0000000000000000 ]---
[   14.745171] iommufd_mock iommufd_mock7: Adding to iommu group 7
[   14.745415] iommufd_mock iommufd_mock7: Removing from iommu group 7
[   14.745663] general protection fault, probably for non-canonical address 0xdffffc0000000006: 0000 [#8] PREEMPT SMP KASAN NOPTI
[   14.746070] KASAN: null-ptr-deref in range [0x0000000000000030-0x0000000000000037]
[   14.746344] CPU: 0 PID: 723 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   14.746660] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   14.747073] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   14.747287] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   14.747940] RSP: 0018:ffff888011e17ba8 EFLAGS: 00010206
[   14.748135] RAX: dffffc0000000000 RBX: ffff88801087d000 RCX: 0000000000000000
[   14.748394] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   14.748651] RBP: ffff888011e17bc0 R08: 0000000000000001 R09: ffffed100155b11b
[   14.748908] R10: ffff88800aad88df R11: 5f6466756d6d6f69 R12: 0000000000000000
[   14.749165] R13: ffffffff85cc0180 R14: ffff88800f4bc880 R15: ffffffff87070ae0
[   14.749423] FS:  00007f06d1ea0600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   14.749712] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   14.749922] CR2: 0000000020000080 CR3: 0000000018992000 CR4: 0000000000750ef0
[   14.750180] PKRU: 55555554
[   14.750284] Call Trace:
[   14.750377]  <TASK>
[   14.750460]  ? show_regs+0x6e/0x80
[   14.750596]  ? die_addr+0x45/0xb0
[   14.750729]  ? exc_general_protection+0x159/0x250
[   14.750917]  ? asm_exc_general_protection+0x2b/0x30
[   14.751103]  ? sysfs_remove_link_from_group+0x21/0x90
[   14.751296]  ? sysfs_remove_link_from_group+0x37/0x90
[   14.751486]  ? sysfs_remove_link_from_group+0x21/0x90
[   14.751676]  iommu_device_unlink+0x85/0xd0
[   14.751832]  iommu_deinit_device+0x11f/0x4c0
[   14.751997]  __iommu_group_remove_device+0x26b/0x300
[   14.752186]  iommu_group_remove_device+0x8a/0xb0
[   14.752362]  iommufd_test+0x1f1a/0x2d10
[   14.752508]  ? __pfx_lock_release+0x10/0x10
[   14.752667]  ? __pfx_lock_acquire+0x10/0x10
[   14.752828]  ? __pfx_iommufd_test+0x10/0x10
[   14.752988]  ? __sanitizer_cov_trace_const_cmp8+0x1c/0x30
[   14.753192]  iommufd_fops_ioctl+0x377/0x510
[   14.753352]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   14.753530]  ? trace_hardirqs_on+0x26/0x120
[   14.753692]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   14.753924]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   14.754110]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   14.754311]  ? security_file_ioctl+0x9d/0xd0
[   14.754476]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   14.754655]  __x64_sys_ioctl+0x1b9/0x230
[   14.754810]  do_syscall_64+0x3c/0x90
[   14.754947]  entry_SYSCALL_64_after_hwframe+0x6e/0xd8
[   14.755135] RIP: 0033:0x7f06d1c3ee5d
[   14.755272] Code: ff c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d 93 af 1b 00 f7 d8 64 89 01 48
[   14.755927] RSP: 002b:00007ffd0bfa8ec8 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   14.756201] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f06d1c3ee5d
[   14.756458] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   14.756714] RBP: 00007ffd0bfa8ee0 R08: 0000000000000800 R09: 0000000000000800
[   14.756971] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffd0bfa8ff8
[   14.757228] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f06d1ee1000
[   14.757490]  </TASK>
[   14.757575] Modules linked in:
[   14.757731] ---[ end trace 0000000000000000 ]---
[   14.757902] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   14.758113] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   14.758794] RSP: 0018:ffff88802457fba8 EFLAGS: 00010206
[   14.758988] RAX: dffffc0000000000 RBX: ffff888014f9b000 RCX: 0000000000000000
[   14.759246] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   14.759503] RBP: ffff88802457fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   14.759760] R10: ffff88800aad88df R11: 0000000000000001 R12: 0000000000000000
[   14.760018] R13: ffffffff85cc0180 R14: ffff8880109b6ac0 R15: ffffffff87070ae0
[   14.760275] FS:  00007f06d1ea0600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   14.760566] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   14.760776] CR2: 0000000020000080 CR3: 0000000018992000 CR4: 0000000000750ef0
[   14.761035] PKRU: 55555554
[   14.761561] ------------[ cut here ]------------
[   14.761743] WARNING: CPU: 1 PID: 723 at drivers/iommu/iommufd/main.c:258 iommufd_fops_release+0x2a3/0x300
[   14.762087] Modules linked in:
[   14.762203] CPU: 1 PID: 723 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   14.762512] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   14.762957] RIP: 0010:iommufd_fops_release+0x2a3/0x300
[   14.763151] Code: 45 d0 65 48 2b 04 25 28 00 00 00 75 54 48 81 c4 88 00 00 00 31 c0 5b 41 5c 41 5d 41 5e 41 5f 5d c3 cc cc cc cc e8 ad 4f 0a fe <0f> 0b eb a6 e8 74 23 67 fe e9 f6 fe ff ff 48 89 85 50 ff ff ff e8
[   14.763799] RSP: 0018:ffff888011e17c00 EFLAGS: 00010293
[   14.763989] RAX: 0000000000000000 RBX: ffff88800ca7f508 RCX: 0000000000000000
[   14.764243] RDX: ffff888012c4a500 RSI: ffffffff835563e3 RDI: ffffffff86702b48
[   14.764497] RBP: ffff888011e17cb0 R08: 0000000000000000 R09: fffffbfff0eb2644
[   14.764751] R10: ffffffff87593227 R11: ffff888013757a00 R12: 0000000000000000
[   14.765005] R13: ffff88801323a418 R14: ffff888011e17c48 R15: ffffffff83556140
[   14.765260] FS:  0000000000000000(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
[   14.765545] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   14.765753] CR2: 00007fa281e32020 CR3: 000000000687e000 CR4: 0000000000750ee0
[   14.766008] PKRU: 55555554
[   14.766110] Call Trace:
[   14.766202]  <TASK>
[   14.766284]  ? show_regs+0x6e/0x80
[   14.766416]  ? __warn+0xef/0x340
[   14.766542]  ? report_bug+0x25e/0x4b0
[   14.766705]  ? iommufd_fops_release+0x2a3/0x300
[   14.766878]  ? report_bug+0x2cb/0x4b0
[   14.767021]  ? handle_bug+0x46/0x90
[   14.767154]  ? exc_invalid_op+0x1d/0x50
[   14.767299]  ? asm_exc_invalid_op+0x1f/0x30
[   14.767455]  ? __pfx_iommufd_fops_release+0x10/0x10
[   14.767637]  ? iommufd_fops_release+0x2a3/0x300
[   14.767807]  ? iommufd_fops_release+0x2a3/0x300
[   14.767979]  ? __pfx_iommufd_fops_release+0x10/0x10
[   14.768159]  ? rcu_is_watching+0x19/0xc0
[   14.768309]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   14.768507]  ? __pfx_iommufd_fops_release+0x10/0x10
[   14.768688]  __fput+0x424/0xaf0
[   14.768814]  ____fput+0x1f/0x30
[   14.768936]  task_work_run+0x19d/0x2b0
[   14.769080]  ? __pfx_task_work_run+0x10/0x10
[   14.769240]  ? __sanitizer_cov_trace_const_cmp1+0x1e/0x30
[   14.769438]  ? switch_task_namespaces+0xa9/0xe0
[   14.769609]  do_exit+0xac9/0x2790
[   14.769738]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   14.769966]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   14.770149]  ? __pfx_do_exit+0x10/0x10
[   14.770290]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   14.770489]  ? security_file_ioctl+0x9d/0xd0
[   14.770673]  make_task_dead+0x182/0x3c0
[   14.770821]  rewind_stack_and_make_dead+0x17/0x20
[   14.770997] RIP: 0033:0x7f06d1c3ee5d
[   14.771132] Code: Unable to access opcode bytes at 0x7f06d1c3ee33.
[   14.771352] RSP: 002b:00007ffd0bfa8ec8 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   14.771623] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f06d1c3ee5d
[   14.771877] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   14.772131] RBP: 00007ffd0bfa8ee0 R08: 0000000000000800 R09: 0000000000000800
[   14.772385] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffd0bfa8ff8
[   14.772639] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f06d1ee1000
[   14.772898]  </TASK>
[   14.772983] irq event stamp: 0
[   14.773098] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   14.773323] hardirqs last disabled at (0): [<ffffffff8122f2d1>] copy_process+0x1c51/0x7140
[   14.773618] softirqs last  enabled at (0): [<ffffffff8122f312>] copy_process+0x1c92/0x7140
[   14.773913] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   14.774138] ---[ end trace 0000000000000000 ]---
[   14.776765] iommufd_mock iommufd_mock8: Adding to iommu group 8
[   14.777008] iommufd_mock iommufd_mock8: Removing from iommu group 8
[   14.777252] general protection fault, probably for non-canonical address 0xdffffc0000000006: 0000 [#9] PREEMPT SMP KASAN NOPTI
[   14.777652] KASAN: null-ptr-deref in range [0x0000000000000030-0x0000000000000037]
[   14.777921] CPU: 1 PID: 724 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   14.778230] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   14.778632] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   14.778847] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   14.779496] RSP: 0018:ffff888014f27ba8 EFLAGS: 00010206
[   14.779687] RAX: dffffc0000000000 RBX: ffff88800fae5000 RCX: 0000000000000000
[   14.779942] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   14.780197] RBP: ffff888014f27bc0 R08: 0000000000000001 R09: ffffed100155b11b
[   14.780452] R10: ffff88800aad88df R11: 5f6466756d6d6f69 R12: 0000000000000000
[   14.780706] R13: ffffffff85cc0180 R14: ffff88800fd72160 R15: ffffffff87070ae0
[   14.780961] FS:  00007f7b35c39600(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
[   14.781248] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   14.781459] CR2: 0000000020000080 CR3: 00000000203b0000 CR4: 0000000000750ee0
[   14.781716] PKRU: 55555554
[   14.781818] Call Trace:
[   14.781911]  <TASK>
[   14.781993]  ? show_regs+0x6e/0x80
[   14.782128]  ? die_addr+0x45/0xb0
[   14.782259]  ? exc_general_protection+0x159/0x250
[   14.782441]  ? asm_exc_general_protection+0x2b/0x30
[   14.782625]  ? sysfs_remove_link_from_group+0x21/0x90
[   14.782816]  ? sysfs_remove_link_from_group+0x37/0x90
[   14.783005]  ? sysfs_remove_link_from_group+0x21/0x90
[   14.783193]  iommu_device_unlink+0x85/0xd0
[   14.783348]  iommu_deinit_device+0x11f/0x4c0
[   14.783511]  __iommu_group_remove_device+0x26b/0x300
[   14.783699]  iommu_group_remove_device+0x8a/0xb0
[   14.783874]  iommufd_test+0x1f1a/0x2d10
[   14.784018]  ? __pfx_lock_release+0x10/0x10
[   14.784176]  ? __pfx_lock_acquire+0x10/0x10
[   14.784335]  ? __pfx_iommufd_test+0x10/0x10
[   14.784493]  ? __sanitizer_cov_trace_const_cmp8+0x1c/0x30
[   14.784695]  iommufd_fops_ioctl+0x377/0x510
[   14.784854]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   14.785031]  ? trace_hardirqs_on+0x26/0x120
[   14.785191]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   14.785421]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   14.785606]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   14.785806]  ? security_file_ioctl+0x9d/0xd0
[   14.785970]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   14.786147]  __x64_sys_ioctl+0x1b9/0x230
[   14.786296]  do_syscall_64+0x3c/0x90
[   14.786432]  entry_SYSCALL_64_after_hwframe+0x6e/0xd8
[   14.786618] RIP: 0033:0x7f7b35a3ee5d
[   14.786755] Code: ff c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d 93 af 1b 00 f7 d8 64 89 01 48
[   14.787403] RSP: 002b:00007ffcf47f8c98 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   14.787675] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f7b35a3ee5d
[   14.787929] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   14.788183] RBP: 00007ffcf47f8cb0 R08: 0000000000000800 R09: 0000000000000800
[   14.788437] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffcf47f8dc8
[   14.788691] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f7b35c7a000
[   14.788951]  </TASK>
[   14.789036] Modules linked in:
[   14.789175] ---[ end trace 0000000000000000 ]---
[   14.789344] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   14.789554] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   14.790202] RSP: 0018:ffff88802457fba8 EFLAGS: 00010206
[   14.790392] RAX: dffffc0000000000 RBX: ffff888014f9b000 RCX: 0000000000000000
[   14.790652] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   14.790910] RBP: ffff88802457fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   14.791166] R10: ffff88800aad88df R11: 0000000000000001 R12: 0000000000000000
[   14.791639] R13: ffffffff85cc0180 R14: ffff8880109b6ac0 R15: ffffffff87070ae0
[   14.791905] FS:  00007f7b35c39600(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
[   14.792308] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   14.792520] CR2: 0000000020000080 CR3: 00000000203b0000 CR4: 0000000000750ee0
[   14.792835] PKRU: 55555554
[   14.793218] ------------[ cut here ]------------
[   14.793405] WARNING: CPU: 1 PID: 724 at drivers/iommu/iommufd/main.c:258 iommufd_fops_release+0x2a3/0x300
[   14.793757] Modules linked in:
[   14.793895] CPU: 1 PID: 724 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   14.794231] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   14.794700] RIP: 0010:iommufd_fops_release+0x2a3/0x300
[   14.794899] Code: 45 d0 65 48 2b 04 25 28 00 00 00 75 54 48 81 c4 88 00 00 00 31 c0 5b 41 5c 41 5d 41 5e 41 5f 5d c3 cc cc cc cc e8 ad 4f 0a fe <0f> 0b eb a6 e8 74 23 67 fe e9 f6 fe ff ff 48 89 85 50 ff ff ff e8
[   14.795670] RSP: 0018:ffff888014f27c00 EFLAGS: 00010293
[   14.795867] RAX: 0000000000000000 RBX: ffff888010aaf208 RCX: 0000000000000000
[   14.796181] RDX: ffff888012c4ca00 RSI: ffffffff835563e3 RDI: ffffffff86702b48
[   14.796441] RBP: ffff888014f27cb0 R08: 0000000000000000 R09: fffffbfff0eb2644
[   14.796709] R10: ffffffff87593227 R11: ffff8880203e3800 R12: 0000000000000000
[   14.797012] R13: ffff888011f03a98 R14: ffff888014f27c48 R15: ffffffff83556140
[   14.797271] FS:  0000000000000000(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
[   14.797607] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   14.797819] CR2: 0000000020000080 CR3: 000000000687e000 CR4: 0000000000750ee0
[   14.798100] PKRU: 55555554
[   14.798231] Call Trace:
[   14.798327]  <TASK>
[   14.798411]  ? show_regs+0x6e/0x80
[   14.798545]  ? __warn+0xef/0x340
[   14.798694]  ? report_bug+0x25e/0x4b0
[   14.798858]  ? iommufd_fops_release+0x2a3/0x300
[   14.799032]  ? report_bug+0x2cb/0x4b0
[   14.799177]  ? handle_bug+0x46/0x90
[   14.799313]  ? exc_invalid_op+0x1d/0x50
[   14.799461]  ? asm_exc_invalid_op+0x1f/0x30
[   14.799619]  ? __pfx_iommufd_fops_release+0x10/0x10
[   14.799806]  ? iommufd_fops_release+0x2a3/0x300
[   14.800005]  ? iommufd_fops_release+0x2a3/0x300
[   14.800210]  ? __pfx_iommufd_fops_release+0x10/0x10
[   14.800394]  ? rcu_is_watching+0x19/0xc0
[   14.800553]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   14.800799]  ? __pfx_iommufd_fops_release+0x10/0x10
[   14.800984]  __fput+0x424/0xaf0
[   14.801113]  ____fput+0x1f/0x30
[   14.801242]  task_work_run+0x19d/0x2b0
[   14.801400]  ? __pfx_task_work_run+0x10/0x10
[   14.801579]  ? __sanitizer_cov_trace_const_cmp1+0x1e/0x30
[   14.801781]  ? switch_task_namespaces+0xa9/0xe0
[   14.801979]  do_exit+0xac9/0x2790
[   14.802135]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   14.802368]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   14.802556]  ? __pfx_do_exit+0x10/0x10
[   14.802707]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   14.802941]  ? security_file_ioctl+0x9d/0xd0
[   14.803109]  make_task_dead+0x182/0x3c0
[   14.803258]  rewind_stack_and_make_dead+0x17/0x20
[   14.803437] RIP: 0033:0x7f7b35a3ee5d
[   14.803575] Code: Unable to access opcode bytes at 0x7f7b35a3ee33.
[   14.803810] RSP: 002b:00007ffcf47f8c98 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   14.804116] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f7b35a3ee5d
[   14.804381] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   14.804683] RBP: 00007ffcf47f8cb0 R08: 0000000000000800 R09: 0000000000000800
[   14.804942] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffcf47f8dc8
[   14.805244] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f7b35c7a000
[   14.805509]  </TASK>
[   14.805596] irq event stamp: 0
[   14.805722] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   14.805989] hardirqs last disabled at (0): [<ffffffff8122f2d1>] copy_process+0x1c51/0x7140
[   14.806291] softirqs last  enabled at (0): [<ffffffff8122f312>] copy_process+0x1c92/0x7140
[   14.806638] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   14.806870] ---[ end trace 0000000000000000 ]---
[   14.809726] iommufd_mock iommufd_mock9: Adding to iommu group 9
[   14.809974] iommufd_mock iommufd_mock9: Removing from iommu group 9
[   14.810226] general protection fault, probably for non-canonical address 0xdffffc0000000006: 0000 [#10] PREEMPT SMP KASAN NOPTI
[   14.810691] KASAN: null-ptr-deref in range [0x0000000000000030-0x0000000000000037]
[   14.810976] CPU: 1 PID: 725 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   14.811300] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   14.811748] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   14.811971] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   14.812712] RSP: 0018:ffff888010a7fba8 EFLAGS: 00010206
[   14.812908] RAX: dffffc0000000000 RBX: ffff88800fae0000 RCX: 0000000000000000
[   14.813168] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   14.813477] RBP: ffff888010a7fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   14.813738] R10: ffff88800aad88df R11: 5f6466756d6d6f69 R12: 0000000000000000
[   14.814044] R13: ffffffff85cc0180 R14: ffff88800fd72520 R15: ffffffff87070ae0
[   14.814305] FS:  00007f1427d57600(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
[   14.814638] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   14.814857] CR2: 0000000020000080 CR3: 0000000018992000 CR4: 0000000000750ee0
[   14.815121] PKRU: 55555554
[   14.815235] Call Trace:
[   14.815367]  <TASK>
[   14.815451]  ? show_regs+0x6e/0x80
[   14.815589]  ? die_addr+0x45/0xb0
[   14.815723]  ? exc_general_protection+0x159/0x250
[   14.815929]  ? asm_exc_general_protection+0x2b/0x30
[   14.816142]  ? sysfs_remove_link_from_group+0x21/0x90
[   14.816334]  ? sysfs_remove_link_from_group+0x37/0x90
[   14.816540]  ? sysfs_remove_link_from_group+0x21/0x90
[   14.816759]  iommu_device_unlink+0x85/0xd0
[   14.816917]  iommu_deinit_device+0x11f/0x4c0
[   14.817084]  __iommu_group_remove_device+0x26b/0x300
[   14.817321]  iommu_group_remove_device+0x8a/0xb0
[   14.817500]  iommufd_test+0x1f1a/0x2d10
[   14.817648]  ? __pfx_lock_release+0x10/0x10
[   14.817830]  ? __pfx_lock_acquire+0x10/0x10
[   14.818018]  ? __pfx_iommufd_test+0x10/0x10
[   14.818180]  ? __sanitizer_cov_trace_const_cmp8+0x1c/0x30
[   14.818392]  iommufd_fops_ioctl+0x377/0x510
[   14.818593]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   14.818775]  ? trace_hardirqs_on+0x26/0x120
[   14.818965]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   14.819248]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   14.819436]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   14.819641]  ? security_file_ioctl+0x9d/0xd0
[   14.819830]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   14.820035]  __x64_sys_ioctl+0x1b9/0x230
[   14.820187]  do_syscall_64+0x3c/0x90
[   14.820326]  entry_SYSCALL_64_after_hwframe+0x6e/0xd8
[   14.820558] RIP: 0033:0x7f1427a3ee5d
[   14.820698] Code: ff c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d 93 af 1b 00 f7 d8 64 89 01 48
[   14.821414] RSP: 002b:00007ffcc2823638 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   14.821691] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f1427a3ee5d
[   14.821972] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   14.822250] RBP: 00007ffcc2823650 R08: 0000000000000800 R09: 0000000000000800
[   14.822511] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffcc2823768
[   14.822824] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f1427d98000
[   14.823093]  </TASK>
[   14.823179] Modules linked in:
[   14.823338] ---[ end trace 0000000000000000 ]---
[   14.823534] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   14.823747] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   14.824409] RSP: 0018:ffff88802457fba8 EFLAGS: 00010206
[   14.824603] RAX: dffffc0000000000 RBX: ffff888014f9b000 RCX: 0000000000000000
[   14.824863] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   14.825123] RBP: ffff88802457fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   14.825389] R10: ffff88800aad88df R11: 0000000000000001 R12: 0000000000000000
[   14.825686] R13: ffffffff85cc0180 R14: ffff8880109b6ac0 R15: ffffffff87070ae0
[   14.825946] FS:  00007f1427d57600(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
[   14.826292] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   14.826505] CR2: 0000000020000080 CR3: 0000000018992000 CR4: 0000000000750ee0
[   14.826893] PKRU: 55555554
[   14.827265] ------------[ cut here ]------------
[   14.827450] WARNING: CPU: 1 PID: 725 at drivers/iommu/iommufd/main.c:258 iommufd_fops_release+0x2a3/0x300
[   14.827805] Modules linked in:
[   14.827958] CPU: 1 PID: 725 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   14.828274] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   14.828728] RIP: 0010:iommufd_fops_release+0x2a3/0x300
[   14.828922] Code: 45 d0 65 48 2b 04 25 28 00 00 00 75 54 48 81 c4 88 00 00 00 31 c0 5b 41 5c 41 5d 41 5e 41 5f 5d c3 cc cc cc cc e8 ad 4f 0a fe <0f> 0b eb a6 e8 74 23 67 fe e9 f6 fe ff ff 48 89 85 50 ff ff ff e8
[   14.829632] RSP: 0018:ffff888010a7fc00 EFLAGS: 00010293
[   14.829847] RAX: 0000000000000000 RBX: ffff888010aaff08 RCX: 0000000000000000
[   14.830127] RDX: ffff888012234a00 RSI: ffffffff835563e3 RDI: ffffffff86702b48
[   14.830392] RBP: ffff888010a7fcb0 R08: 0000000000000000 R09: fffffbfff0eb2644
[   14.830712] R10: ffffffff87593227 R11: ffff888018b89800 R12: 0000000000000000
[   14.830978] R13: ffff888011ce9598 R14: ffff888010a7fc48 R15: ffffffff83556140
[   14.831238] FS:  0000000000000000(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
[   14.831580] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   14.831793] CR2: 0000000020000080 CR3: 000000000687e000 CR4: 0000000000750ee0
[   14.832065] PKRU: 55555554
[   14.832199] Call Trace:
[   14.832295]  <TASK>
[   14.832379]  ? show_regs+0x6e/0x80
[   14.832514]  ? __warn+0xef/0x340
[   14.832643]  ? report_bug+0x25e/0x4b0
[   14.832791]  ? iommufd_fops_release+0x2a3/0x300
[   14.832968]  ? report_bug+0x2cb/0x4b0
[   14.833115]  ? handle_bug+0x46/0x90
[   14.833252]  ? exc_invalid_op+0x1d/0x50
[   14.833399]  ? asm_exc_invalid_op+0x1f/0x30
[   14.833559]  ? __pfx_iommufd_fops_release+0x10/0x10
[   14.833798]  ? iommufd_fops_release+0x2a3/0x300
[   14.833972]  ? iommufd_fops_release+0x2a3/0x300
[   14.834148]  ? __pfx_iommufd_fops_release+0x10/0x10
[   14.834347]  ? rcu_is_watching+0x19/0xc0
[   14.834524]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   14.834736]  ? __pfx_iommufd_fops_release+0x10/0x10
[   14.834925]  __fput+0x424/0xaf0
[   14.835054]  ____fput+0x1f/0x30
[   14.835180]  task_work_run+0x19d/0x2b0
[   14.835327]  ? __pfx_task_work_run+0x10/0x10
[   14.835516]  ? __sanitizer_cov_trace_const_cmp1+0x1e/0x30
[   14.835741]  ? switch_task_namespaces+0xa9/0xe0
[   14.835916]  do_exit+0xac9/0x2790
[   14.836047]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   14.836325]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   14.836512]  ? __pfx_do_exit+0x10/0x10
[   14.836657]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   14.836907]  ? security_file_ioctl+0x9d/0xd0
[   14.837074]  make_task_dead+0x182/0x3c0
[   14.837224]  rewind_stack_and_make_dead+0x17/0x20
[   14.837404] RIP: 0033:0x7f1427a3ee5d
[   14.837541] Code: Unable to access opcode bytes at 0x7f1427a3ee33.
[   14.837815] RSP: 002b:00007ffcc2823638 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   14.838093] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f1427a3ee5d
[   14.838397] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   14.838663] RBP: 00007ffcc2823650 R08: 0000000000000800 R09: 0000000000000800
[   14.838926] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffcc2823768
[   14.839186] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f1427d98000
[   14.839501]  </TASK>
[   14.839587] irq event stamp: 0
[   14.839704] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   14.839945] hardirqs last disabled at (0): [<ffffffff8122f2d1>] copy_process+0x1c51/0x7140
[   14.840276] softirqs last  enabled at (0): [<ffffffff8122f312>] copy_process+0x1c92/0x7140
[   14.840597] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   14.840855] ---[ end trace 0000000000000000 ]---
[   14.843519] iommufd_mock iommufd_mock10: Adding to iommu group 10
[   14.843772] iommufd_mock iommufd_mock10: Removing from iommu group 10
[   14.844027] general protection fault, probably for non-canonical address 0xdffffc0000000006: 0000 [#11] PREEMPT SMP KASAN NOPTI
[   14.844444] KASAN: null-ptr-deref in range [0x0000000000000030-0x0000000000000037]
[   14.844784] CPU: 1 PID: 726 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   14.845100] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   14.845550] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   14.845765] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   14.846481] RSP: 0018:ffff888012e07ba8 EFLAGS: 00010206
[   14.846679] RAX: dffffc0000000000 RBX: ffff88800fc37000 RCX: 0000000000000000
[   14.846952] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   14.847230] RBP: ffff888012e07bc0 R08: 0000000000000001 R09: ffffed100155b11b
[   14.847491] R10: ffff88800aad88df R11: 5f6466756d6d6f69 R12: 0000000000000000
[   14.847797] R13: ffffffff85cc0180 R14: ffff88800fd72a60 R15: ffffffff87070ae0
[   14.848058] FS:  00007f5465c8a600(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
[   14.848399] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   14.848613] CR2: 0000000020000080 CR3: 000000002008e000 CR4: 0000000000750ee0
[   14.848883] PKRU: 55555554
[   14.849020] Call Trace:
[   14.849115]  <TASK>
[   14.849199]  ? show_regs+0x6e/0x80
[   14.849337]  ? die_addr+0x45/0xb0
[   14.849476]  ? exc_general_protection+0x159/0x250
[   14.849694]  ? asm_exc_general_protection+0x2b/0x30
[   14.849882]  ? sysfs_remove_link_from_group+0x21/0x90
[   14.850080]  ? sysfs_remove_link_from_group+0x37/0x90
[   14.850307]  ? sysfs_remove_link_from_group+0x21/0x90
[   14.850499]  iommu_device_unlink+0x85/0xd0
[   14.850658]  iommu_deinit_device+0x11f/0x4c0
[   14.850855]  __iommu_group_remove_device+0x26b/0x300
[   14.851046]  iommu_group_remove_device+0x8a/0xb0
[   14.851225]  iommufd_test+0x1f1a/0x2d10
[   14.851372]  ? __pfx_lock_release+0x10/0x10
[   14.851578]  ? __pfx_lock_acquire+0x10/0x10
[   14.851741]  ? __pfx_iommufd_test+0x10/0x10
[   14.851902]  ? __sanitizer_cov_trace_const_cmp8+0x1c/0x30
[   14.852129]  iommufd_fops_ioctl+0x377/0x510
[   14.852318]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   14.852499]  ? trace_hardirqs_on+0x26/0x120
[   14.852662]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   14.852936]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   14.853124]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   14.853338]  ? security_file_ioctl+0x9d/0xd0
[   14.853537]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   14.853718]  __x64_sys_ioctl+0x1b9/0x230
[   14.853871]  do_syscall_64+0x3c/0x90
[   14.854029]  entry_SYSCALL_64_after_hwframe+0x6e/0xd8
[   14.854232] RIP: 0033:0x7f5465a3ee5d
[   14.854370] Code: ff c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d 93 af 1b 00 f7 d8 64 89 01 48
[   14.855065] RSP: 002b:00007ffd0c5aef48 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   14.855343] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f5465a3ee5d
[   14.855648] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   14.855908] RBP: 00007ffd0c5aef60 R08: 0000000000000800 R09: 0000000000000800
[   14.856213] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffd0c5af078
[   14.856473] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f5465ccb000
[   14.856781]  </TASK>
[   14.856867] Modules linked in:
[   14.857086] ---[ end trace 0000000000000000 ]---
[   14.857259] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   14.857472] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   14.858134] RSP: 0018:ffff88802457fba8 EFLAGS: 00010206
[   14.858328] RAX: dffffc0000000000 RBX: ffff888014f9b000 RCX: 0000000000000000
[   14.858596] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   14.858870] RBP: ffff88802457fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   14.859145] R10: ffff88800aad88df R11: 0000000000000001 R12: 0000000000000000
[   14.859405] R13: ffffffff85cc0180 R14: ffff8880109b6ac0 R15: ffffffff87070ae0
[   14.859712] FS:  00007f5465c8a600(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
[   14.860005] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   14.860267] CR2: 0000000020000080 CR3: 000000002008e000 CR4: 0000000000750ee0
[   14.860530] PKRU: 55555554
[   14.860902] ------------[ cut here ]------------
[   14.861122] WARNING: CPU: 1 PID: 726 at drivers/iommu/iommufd/main.c:258 iommufd_fops_release+0x2a3/0x300
[   14.861472] Modules linked in:
[   14.861595] CPU: 1 PID: 726 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   14.861944] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   14.862395] RIP: 0010:iommufd_fops_release+0x2a3/0x300
[   14.862597] Code: 45 d0 65 48 2b 04 25 28 00 00 00 75 54 48 81 c4 88 00 00 00 31 c0 5b 41 5c 41 5d 41 5e 41 5f 5d c3 cc cc cc cc e8 ad 4f 0a fe <0f> 0b eb a6 e8 74 23 67 fe e9 f6 fe ff ff 48 89 85 50 ff ff ff e8
[   14.863283] RSP: 0018:ffff888012e07c00 EFLAGS: 00010293
[   14.863493] RAX: 0000000000000000 RBX: ffff888010aafb08 RCX: 0000000000000000
[   14.863753] RDX: ffff888012230000 RSI: ffffffff835563e3 RDI: ffffffff86702b48
[   14.864059] RBP: ffff888012e07cb0 R08: 0000000000000000 R09: fffffbfff0eb2644
[   14.864319] R10: ffffffff87593227 R11: ffff888013501600 R12: 0000000000000000
[   14.864624] R13: ffff8880124d5318 R14: ffff888012e07c48 R15: ffffffff83556140
[   14.864885] FS:  0000000000000000(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
[   14.865215] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   14.865430] CR2: 0000000020000080 CR3: 000000000687e000 CR4: 0000000000750ee0
[   14.865690] PKRU: 55555554
[   14.865815] Call Trace:
[   14.865937]  <TASK>
[   14.866021]  ? show_regs+0x6e/0x80
[   14.866156]  ? __warn+0xef/0x340
[   14.866284]  ? report_bug+0x25e/0x4b0
[   14.866451]  ? iommufd_fops_release+0x2a3/0x300
[   14.866654]  ? report_bug+0x2cb/0x4b0
[   14.866801]  ? handle_bug+0x46/0x90
[   14.866938]  ? exc_invalid_op+0x1d/0x50
[   14.867087]  ? asm_exc_invalid_op+0x1f/0x30
[   14.867246]  ? __pfx_iommufd_fops_release+0x10/0x10
[   14.867442]  ? iommufd_fops_release+0x2a3/0x300
[   14.867657]  ? iommufd_fops_release+0x2a3/0x300
[   14.867833]  ? __pfx_iommufd_fops_release+0x10/0x10
[   14.868018]  ? rcu_is_watching+0x19/0xc0
[   14.868212]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   14.868416]  ? __pfx_iommufd_fops_release+0x10/0x10
[   14.868601]  __fput+0x424/0xaf0
[   14.868737]  ____fput+0x1f/0x30
[   14.868898]  task_work_run+0x19d/0x2b0
[   14.869045]  ? __pfx_task_work_run+0x10/0x10
[   14.869209]  ? __sanitizer_cov_trace_const_cmp1+0x1e/0x30
[   14.869421]  ? switch_task_namespaces+0xa9/0xe0
[   14.869626]  do_exit+0xac9/0x2790
[   14.869757]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   14.869991]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   14.870200]  ? __pfx_do_exit+0x10/0x10
[   14.870363]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   14.870566]  ? security_file_ioctl+0x9d/0xd0
[   14.870742]  make_task_dead+0x182/0x3c0
[   14.870894]  rewind_stack_and_make_dead+0x17/0x20
[   14.871076] RIP: 0033:0x7f5465a3ee5d
[   14.871234] Code: Unable to access opcode bytes at 0x7f5465a3ee33.
[   14.871483] RSP: 002b:00007ffd0c5aef48 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   14.871760] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f5465a3ee5d
[   14.872068] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   14.872328] RBP: 00007ffd0c5aef60 R08: 0000000000000800 R09: 0000000000000800
[   14.872635] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffd0c5af078
[   14.872895] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f5465ccb000
[   14.873182]  </TASK>
[   14.873295] irq event stamp: 0
[   14.873413] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   14.873643] hardirqs last disabled at (0): [<ffffffff8122f2d1>] copy_process+0x1c51/0x7140
[   14.873994] softirqs last  enabled at (0): [<ffffffff8122f312>] copy_process+0x1c92/0x7140
[   14.874297] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   14.874581] ---[ end trace 0000000000000000 ]---
[   14.877167] iommufd_mock iommufd_mock11: Adding to iommu group 11
[   14.877419] iommufd_mock iommufd_mock11: Removing from iommu group 11
[   14.877674] general protection fault, probably for non-canonical address 0xdffffc0000000006: 0000 [#12] PREEMPT SMP KASAN NOPTI
[   14.878138] KASAN: null-ptr-deref in range [0x0000000000000030-0x0000000000000037]
[   14.878417] CPU: 1 PID: 727 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   14.878781] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   14.879191] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   14.879429] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   14.880161] RSP: 0018:ffff888014f27ba8 EFLAGS: 00010206
[   14.880358] RAX: dffffc0000000000 RBX: ffff88800fc30000 RCX: 0000000000000000
[   14.880626] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   14.880923] RBP: ffff888014f27bc0 R08: 0000000000000001 R09: ffffed100155b11b
[   14.881184] R10: ffff88800aad88df R11: 5f6466756d6d6f69 R12: 0000000000000000
[   14.881492] R13: ffffffff85cc0180 R14: ffff88800fd728a0 R15: ffffffff87070ae0
[   14.881754] FS:  00007fb0373cd600(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
[   14.882090] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   14.882304] CR2: 0000000020000080 CR3: 0000000018992000 CR4: 0000000000750ee0
[   14.882587] PKRU: 55555554
[   14.882719] Call Trace:
[   14.882818]  <TASK>
[   14.882902]  ? show_regs+0x6e/0x80
[   14.883040]  ? die_addr+0x45/0xb0
[   14.883176]  ? exc_general_protection+0x159/0x250
[   14.883409]  ? asm_exc_general_protection+0x2b/0x30
[   14.883597]  ? sysfs_remove_link_from_group+0x21/0x90
[   14.883790]  ? sysfs_remove_link_from_group+0x37/0x90
[   14.884027]  ? sysfs_remove_link_from_group+0x21/0x90
[   14.884220]  iommu_device_unlink+0x85/0xd0
[   14.884378]  iommu_deinit_device+0x11f/0x4c0
[   14.884568]  __iommu_group_remove_device+0x26b/0x300
[   14.884777]  iommu_group_remove_device+0x8a/0xb0
[   14.884955]  iommufd_test+0x1f1a/0x2d10
[   14.885108]  ? __pfx_lock_release+0x10/0x10
[   14.885309]  ? __pfx_lock_acquire+0x10/0x10
[   14.885472]  ? __pfx_iommufd_test+0x10/0x10
[   14.885633]  ? __sanitizer_cov_trace_const_cmp8+0x1c/0x30
[   14.885887]  iommufd_fops_ioctl+0x377/0x510
[   14.886051]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   14.886231]  ? trace_hardirqs_on+0x26/0x120
[   14.886400]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   14.886671]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   14.886862]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   14.887071]  ? security_file_ioctl+0x9d/0xd0
[   14.887280]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   14.887461]  __x64_sys_ioctl+0x1b9/0x230
[   14.887613]  do_syscall_64+0x3c/0x90
[   14.887772]  entry_SYSCALL_64_after_hwframe+0x6e/0xd8
[   14.887989] RIP: 0033:0x7fb03703ee5d
[   14.888128] Code: ff c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d 93 af 1b 00 f7 d8 64 89 01 48
[   14.888838] RSP: 002b:00007ffd3f83cd78 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   14.889121] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007fb03703ee5d
[   14.889419] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   14.889680] RBP: 00007ffd3f83cd90 R08: 0000000000000800 R09: 0000000000000800
[   14.889984] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffd3f83cea8
[   14.890245] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007fb03740e000
[   14.890554]  </TASK>
[   14.890642] Modules linked in:
[   14.890790] ---[ end trace 0000000000000000 ]---
[   14.890963] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   14.891176] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   14.891839] RSP: 0018:ffff88802457fba8 EFLAGS: 00010206
[   14.892034] RAX: dffffc0000000000 RBX: ffff888014f9b000 RCX: 0000000000000000
[   14.892294] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   14.892554] RBP: ffff88802457fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   14.892854] R10: ffff88800aad88df R11: 0000000000000001 R12: 0000000000000000
[   14.893114] R13: ffffffff85cc0180 R14: ffff8880109b6ac0 R15: ffffffff87070ae0
[   14.893423] FS:  00007fb0373cd600(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
[   14.893716] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   14.893935] CR2: 0000000020000080 CR3: 0000000018992000 CR4: 0000000000750ee0
[   14.894233] PKRU: 55555554
[   14.894651] ------------[ cut here ]------------
[   14.894831] WARNING: CPU: 1 PID: 727 at drivers/iommu/iommufd/main.c:258 iommufd_fops_release+0x2a3/0x300
[   14.895181] Modules linked in:
[   14.895300] CPU: 1 PID: 727 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   14.895616] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   14.896071] RIP: 0010:iommufd_fops_release+0x2a3/0x300
[   14.896266] Code: 45 d0 65 48 2b 04 25 28 00 00 00 75 54 48 81 c4 88 00 00 00 31 c0 5b 41 5c 41 5d 41 5e 41 5f 5d c3 cc cc cc cc e8 ad 4f 0a fe <0f> 0b eb a6 e8 74 23 67 fe e9 f6 fe ff ff 48 89 85 50 ff ff ff e8
[   14.896976] RSP: 0018:ffff888014f27c00 EFLAGS: 00010293
[   14.897214] RAX: 0000000000000000 RBX: ffff88801248ad08 RCX: 0000000000000000
[   14.897474] RDX: ffff888012232500 RSI: ffffffff835563e3 RDI: ffffffff86702b48
[   14.897756] RBP: ffff888014f27cb0 R08: 0000000000000000 R09: fffffbfff0eb2644
[   14.898039] R10: ffffffff87593227 R11: ffff8880127f6400 R12: 0000000000000000
[   14.898303] R13: ffff888011ce6b98 R14: ffff888014f27c48 R15: ffffffff83556140
[   14.898631] FS:  0000000000000000(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
[   14.898957] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   14.899172] CR2: 0000000020000080 CR3: 000000000687e000 CR4: 0000000000750ee0
[   14.899433] PKRU: 55555554
[   14.899537] Call Trace:
[   14.899643]  <TASK>
[   14.899765]  ? show_regs+0x6e/0x80
[   14.899900]  ? __warn+0xef/0x340
[   14.900028]  ? report_bug+0x25e/0x4b0
[   14.900172]  ? iommufd_fops_release+0x2a3/0x300
[   14.900369]  ? report_bug+0x2cb/0x4b0
[   14.900539]  ? handle_bug+0x46/0x90
[   14.900676]  ? exc_invalid_op+0x1d/0x50
[   14.900824]  ? asm_exc_invalid_op+0x1f/0x30
[   14.900994]  ? __pfx_iommufd_fops_release+0x10/0x10
[   14.901209]  ? iommufd_fops_release+0x2a3/0x300
[   14.901382]  ? iommufd_fops_release+0x2a3/0x300
[   14.901557]  ? __pfx_iommufd_fops_release+0x10/0x10
[   14.901785]  ? rcu_is_watching+0x19/0xc0
[   14.901937]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   14.902141]  ? __pfx_iommufd_fops_release+0x10/0x10
[   14.902370]  __fput+0x424/0xaf0
[   14.902498]  ____fput+0x1f/0x30
[   14.902637]  task_work_run+0x19d/0x2b0
[   14.902787]  ? __pfx_task_work_run+0x10/0x10
[   14.902952]  ? __sanitizer_cov_trace_const_cmp1+0x1e/0x30
[   14.903155]  ? switch_task_namespaces+0xa9/0xe0
[   14.903330]  do_exit+0xac9/0x2790
[   14.903469]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   14.903739]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   14.903925]  ? __pfx_do_exit+0x10/0x10
[   14.904074]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   14.904318]  ? security_file_ioctl+0x9d/0xd0
[   14.904485]  make_task_dead+0x182/0x3c0
[   14.904634]  rewind_stack_and_make_dead+0x17/0x20
[   14.904837] RIP: 0033:0x7fb03703ee5d
[   14.904991] Code: Unable to access opcode bytes at 0x7fb03703ee33.
[   14.905216] RSP: 002b:00007ffd3f83cd78 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   14.905537] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007fb03703ee5d
[   14.905796] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   14.906062] RBP: 00007ffd3f83cd90 R08: 0000000000000800 R09: 0000000000000800
[   14.906358] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffd3f83cea8
[   14.906624] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007fb03740e000
[   14.906892]  </TASK>
[   14.906978] irq event stamp: 0
[   14.907136] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   14.907366] hardirqs last disabled at (0): [<ffffffff8122f2d1>] copy_process+0x1c51/0x7140
[   14.907672] softirqs last  enabled at (0): [<ffffffff8122f312>] copy_process+0x1c92/0x7140
[   14.908015] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   14.908247] ---[ end trace 0000000000000000 ]---
[   14.910898] iommufd_mock iommufd_mock12: Adding to iommu group 12
[   14.911148] iommufd_mock iommufd_mock12: Removing from iommu group 12
[   14.911402] general protection fault, probably for non-canonical address 0xdffffc0000000006: 0000 [#13] PREEMPT SMP KASAN NOPTI
[   14.911814] KASAN: null-ptr-deref in range [0x0000000000000030-0x0000000000000037]
[   14.912089] CPU: 1 PID: 728 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   14.912405] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   14.912813] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   14.913027] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   14.913689] RSP: 0018:ffff888010a7fba8 EFLAGS: 00010206
[   14.913884] RAX: dffffc0000000000 RBX: ffff88800fc36000 RCX: 0000000000000000
[   14.914144] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   14.914404] RBP: ffff888010a7fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   14.914665] R10: ffff88800aad88df R11: 5f6466756d6d6f69 R12: 0000000000000000
[   14.914930] R13: ffffffff85cc0180 R14: ffff88800fd72640 R15: ffffffff87070ae0
[   14.915190] FS:  00007f1ed4e1d600(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
[   14.915483] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   14.915695] CR2: 0000000020000080 CR3: 000000002008e000 CR4: 0000000000750ee0
[   14.915956] PKRU: 55555554
[   14.916061] Call Trace:
[   14.916155]  <TASK>
[   14.916239]  ? show_regs+0x6e/0x80
[   14.916379]  ? die_addr+0x45/0xb0
[   14.916515]  ? exc_general_protection+0x159/0x250
[   14.916700]  ? asm_exc_general_protection+0x2b/0x30
[   14.916889]  ? sysfs_remove_link_from_group+0x21/0x90
[   14.917081]  ? sysfs_remove_link_from_group+0x37/0x90
[   14.917274]  ? sysfs_remove_link_from_group+0x21/0x90
[   14.917466]  iommu_device_unlink+0x85/0xd0
[   14.917625]  iommu_deinit_device+0x11f/0x4c0
[   14.917792]  __iommu_group_remove_device+0x26b/0x300
[   14.917985]  iommu_group_remove_device+0x8a/0xb0
[   14.918163]  iommufd_test+0x1f1a/0x2d10
[   14.918311]  ? __pfx_lock_release+0x10/0x10
[   14.918472]  ? __pfx_lock_acquire+0x10/0x10
[   14.918635]  ? __pfx_iommufd_test+0x10/0x10
[   14.918799]  ? __sanitizer_cov_trace_const_cmp8+0x1c/0x30
[   14.919005]  iommufd_fops_ioctl+0x377/0x510
[   14.919168]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   14.919348]  ? trace_hardirqs_on+0x26/0x120
[   14.919512]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   14.919748]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   14.919936]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   14.920140]  ? security_file_ioctl+0x9d/0xd0
[   14.920308]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   14.920489]  __x64_sys_ioctl+0x1b9/0x230
[   14.920641]  do_syscall_64+0x3c/0x90
[   14.920780]  entry_SYSCALL_64_after_hwframe+0x6e/0xd8
[   14.920971] RIP: 0033:0x7f1ed4c3ee5d
[   14.921110] Code: ff c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d 93 af 1b 00 f7 d8 64 89 01 48
[   14.921772] RSP: 002b:00007fff84f239f8 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   14.922049] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f1ed4c3ee5d
[   14.922309] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   14.922569] RBP: 00007fff84f23a10 R08: 0000000000000800 R09: 0000000000000800
[   14.922831] R10: 0000000000000000 R11: 0000000000000213 R12: 00007fff84f23b28
[   14.923092] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f1ed4e5e000
[   14.923357]  </TASK>
[   14.923444] Modules linked in:
[   14.923706] ---[ end trace 0000000000000000 ]---
[   14.923880] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   14.924094] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   14.924758] RSP: 0018:ffff88802457fba8 EFLAGS: 00010206
[   14.924953] RAX: dffffc0000000000 RBX: ffff888014f9b000 RCX: 0000000000000000
[   14.925213] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   14.925473] RBP: ffff88802457fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   14.925734] R10: ffff88800aad88df R11: 0000000000000001 R12: 0000000000000000
[   14.925994] R13: ffffffff85cc0180 R14: ffff8880109b6ac0 R15: ffffffff87070ae0
[   14.926254] FS:  00007f1ed4e1d600(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
[   14.926548] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   14.926774] CR2: 0000000020000080 CR3: 000000002008e000 CR4: 0000000000750ee0
[   14.927038] PKRU: 55555554
[   14.927399] ------------[ cut here ]------------
[   14.927569] WARNING: CPU: 1 PID: 728 at drivers/iommu/iommufd/main.c:258 iommufd_fops_release+0x2a3/0x300
[   14.927910] Modules linked in:
[   14.928026] CPU: 1 PID: 728 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   14.928336] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   14.928737] RIP: 0010:iommufd_fops_release+0x2a3/0x300
[   14.928926] Code: 45 d0 65 48 2b 04 25 28 00 00 00 75 54 48 81 c4 88 00 00 00 31 c0 5b 41 5c 41 5d 41 5e 41 5f 5d c3 cc cc cc cc e8 ad 4f 0a fe <0f> 0b eb a6 e8 74 23 67 fe e9 f6 fe ff ff 48 89 85 50 ff ff ff e8
[   14.929569] RSP: 0018:ffff888010a7fc00 EFLAGS: 00010293
[   14.929758] RAX: 0000000000000000 RBX: ffff88801248a508 RCX: 0000000000000000
[   14.930010] RDX: ffff8880232dca00 RSI: ffffffff835563e3 RDI: ffffffff86702b48
[   14.930263] RBP: ffff888010a7fcb0 R08: 0000000000000000 R09: fffffbfff0eb2644
[   14.930515] R10: ffffffff87593227 R11: ffff888018b11200 R12: 0000000000000000
[   14.930807] R13: ffff888012e14b98 R14: ffff888010a7fc48 R15: ffffffff83556140
[   14.931065] FS:  0000000000000000(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
[   14.931355] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   14.931565] CR2: 0000000020000080 CR3: 000000000687e000 CR4: 0000000000750ee0
[   14.931824] PKRU: 55555554
[   14.931931] Call Trace:
[   14.932023]  <TASK>
[   14.932105]  ? show_regs+0x6e/0x80
[   14.932235]  ? __warn+0xef/0x340
[   14.932360]  ? report_bug+0x25e/0x4b0
[   14.932500]  ? iommufd_fops_release+0x2a3/0x300
[   14.932670]  ? report_bug+0x2cb/0x4b0
[   14.932812]  ? handle_bug+0x46/0x90
[   14.932944]  ? exc_invalid_op+0x1d/0x50
[   14.933105]  ? asm_exc_invalid_op+0x1f/0x30
[   14.933260]  ? __pfx_iommufd_fops_release+0x10/0x10
[   14.933443]  ? iommufd_fops_release+0x2a3/0x300
[   14.933612]  ? iommufd_fops_release+0x2a3/0x300
[   14.933782]  ? __pfx_iommufd_fops_release+0x10/0x10
[   14.933962]  ? rcu_is_watching+0x19/0xc0
[   14.934111]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   14.934308]  ? __pfx_iommufd_fops_release+0x10/0x10
[   14.934488]  __fput+0x424/0xaf0
[   14.934626]  ____fput+0x1f/0x30
[   14.934754]  task_work_run+0x19d/0x2b0
[   14.934900]  ? __pfx_task_work_run+0x10/0x10
[   14.935063]  ? __sanitizer_cov_trace_const_cmp1+0x1e/0x30
[   14.935266]  ? switch_task_namespaces+0xa9/0xe0
[   14.935436]  do_exit+0xac9/0x2790
[   14.935564]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   14.935791]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   14.935972]  ? __pfx_do_exit+0x10/0x10
[   14.936114]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   14.936311]  ? security_file_ioctl+0x9d/0xd0
[   14.936473]  make_task_dead+0x182/0x3c0
[   14.936619]  rewind_stack_and_make_dead+0x17/0x20
[   14.936817] RIP: 0033:0x7f1ed4c3ee5d
[   14.936951] Code: Unable to access opcode bytes at 0x7f1ed4c3ee33.
[   14.937169] RSP: 002b:00007fff84f239f8 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   14.937439] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f1ed4c3ee5d
[   14.937691] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   14.937943] RBP: 00007fff84f23a10 R08: 0000000000000800 R09: 0000000000000800
[   14.938195] R10: 0000000000000000 R11: 0000000000000213 R12: 00007fff84f23b28
[   14.938448] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f1ed4e5e000
[   14.938717]  </TASK>
[   14.938806] irq event stamp: 0
[   14.938922] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   14.939153] hardirqs last disabled at (0): [<ffffffff8122f2d1>] copy_process+0x1c51/0x7140
[   14.939446] softirqs last  enabled at (0): [<ffffffff8122f312>] copy_process+0x1c92/0x7140
[   14.939739] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   14.939962] ---[ end trace 0000000000000000 ]---
[   14.942752] iommufd_mock iommufd_mock13: Adding to iommu group 13
[   14.943034] iommufd_mock iommufd_mock13: Removing from iommu group 13
[   14.943291] general protection fault, probably for non-canonical address 0xdffffc0000000006: 0000 [#14] PREEMPT SMP KASAN NOPTI
[   14.943707] KASAN: null-ptr-deref in range [0x0000000000000030-0x0000000000000037]
[   14.943983] CPU: 0 PID: 729 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   14.944302] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   14.944717] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   14.944933] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   14.945600] RSP: 0018:ffff888012e07ba8 EFLAGS: 00010206
[   14.945797] RAX: dffffc0000000000 RBX: ffff88801087a000 RCX: 0000000000000000
[   14.946058] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   14.946320] RBP: ffff888012e07bc0 R08: 0000000000000001 R09: ffffed100155b11b
[   14.946583] R10: ffff88800aad88df R11: 5f6466756d6d6f69 R12: 0000000000000000
[   14.946877] R13: ffffffff85cc0180 R14: ffff88800bd3dc60 R15: ffffffff87070ae0
[   14.947136] FS:  00007ff59413b600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   14.947425] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   14.947634] CR2: 0000000020000080 CR3: 0000000013340000 CR4: 0000000000750ef0
[   14.947891] PKRU: 55555554
[   14.947995] Call Trace:
[   14.948088]  <TASK>
[   14.948171]  ? show_regs+0x6e/0x80
[   14.948306]  ? die_addr+0x45/0xb0
[   14.948439]  ? exc_general_protection+0x159/0x250
[   14.948642]  ? asm_exc_general_protection+0x2b/0x30
[   14.948830]  ? sysfs_remove_link_from_group+0x21/0x90
[   14.949020]  ? sysfs_remove_link_from_group+0x37/0x90
[   14.949210]  ? sysfs_remove_link_from_group+0x21/0x90
[   14.949400]  iommu_device_unlink+0x85/0xd0
[   14.949558]  iommu_deinit_device+0x11f/0x4c0
[   14.949724]  __iommu_group_remove_device+0x26b/0x300
[   14.949912]  iommu_group_remove_device+0x8a/0xb0
[   14.950088]  iommufd_test+0x1f1a/0x2d10
[   14.950233]  ? __pfx_lock_release+0x10/0x10
[   14.950392]  ? __pfx_lock_acquire+0x10/0x10
[   14.950552]  ? __pfx_iommufd_test+0x10/0x10
[   14.950715]  ? __sanitizer_cov_trace_const_cmp8+0x1c/0x30
[   14.950927]  iommufd_fops_ioctl+0x377/0x510
[   14.951088]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   14.951268]  ? trace_hardirqs_on+0x26/0x120
[   14.951431]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   14.951665]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   14.951851]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   14.952053]  ? security_file_ioctl+0x9d/0xd0
[   14.952219]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   14.952398]  __x64_sys_ioctl+0x1b9/0x230
[   14.952549]  do_syscall_64+0x3c/0x90
[   14.952686]  entry_SYSCALL_64_after_hwframe+0x6e/0xd8
[   14.952875] RIP: 0033:0x7ff593e3ee5d
[   14.953012] Code: ff c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d 93 af 1b 00 f7 d8 64 89 01 48
[   14.953669] RSP: 002b:00007ffc9555e048 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   14.953943] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007ff593e3ee5d
[   14.954201] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   14.954458] RBP: 00007ffc9555e060 R08: 0000000000000800 R09: 0000000000000800
[   14.954725] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffc9555e178
[   14.954992] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007ff59417c000
[   14.955256]  </TASK>
[   14.955342] Modules linked in:
[   14.955510] ---[ end trace 0000000000000000 ]---
[   14.955686] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   14.955902] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   14.956573] RSP: 0018:ffff88802457fba8 EFLAGS: 00010206
[   14.956770] RAX: dffffc0000000000 RBX: ffff888014f9b000 RCX: 0000000000000000
[   14.957028] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   14.957286] RBP: ffff88802457fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   14.957542] R10: ffff88800aad88df R11: 0000000000000001 R12: 0000000000000000
[   14.957799] R13: ffffffff85cc0180 R14: ffff8880109b6ac0 R15: ffffffff87070ae0
[   14.958056] FS:  00007ff59413b600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   14.958346] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   14.958557] CR2: 0000000020000080 CR3: 0000000013340000 CR4: 0000000000750ef0
[   14.958858] PKRU: 55555554
[   14.959565] ------------[ cut here ]------------
[   14.959739] WARNING: CPU: 0 PID: 729 at drivers/iommu/iommufd/main.c:258 iommufd_fops_release+0x2a3/0x300
[   14.960086] Modules linked in:
[   14.960203] CPU: 0 PID: 729 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   14.960518] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   14.960923] RIP: 0010:iommufd_fops_release+0x2a3/0x300
[   14.961114] Code: 45 d0 65 48 2b 04 25 28 00 00 00 75 54 48 81 c4 88 00 00 00 31 c0 5b 41 5c 41 5d 41 5e 41 5f 5d c3 cc cc cc cc e8 ad 4f 0a fe <0f> 0b eb a6 e8 74 23 67 fe e9 f6 fe ff ff 48 89 85 50 ff ff ff e8
[   14.961768] RSP: 0018:ffff888012e07c00 EFLAGS: 00010293
[   14.961961] RAX: 0000000000000000 RBX: ffff88800ca7fc08 RCX: 0000000000000000
[   14.962218] RDX: ffff8880232da500 RSI: ffffffff835563e3 RDI: ffffffff86702b40
[   14.962475] RBP: ffff888012e07cb0 R08: 0000000000000000 R09: fffffbfff0eb2644
[   14.962754] R10: ffffffff87593227 R11: ffff888018b66c00 R12: 0000000000000000
[   14.963013] R13: ffff8880124cb818 R14: ffff888012e07c48 R15: ffffffff83556140
[   14.963270] FS:  0000000000000000(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   14.963555] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   14.963761] CR2: 0000000020000080 CR3: 000000000687e000 CR4: 0000000000750ef0
[   14.964015] PKRU: 55555554
[   14.964117] Call Trace:
[   14.964209]  <TASK>
[   14.964291]  ? show_regs+0x6e/0x80
[   14.964423]  ? __warn+0xef/0x340
[   14.964547]  ? report_bug+0x25e/0x4b0
[   14.964687]  ? iommufd_fops_release+0x2a3/0x300
[   14.964856]  ? report_bug+0x2cb/0x4b0
[   14.964998]  ? handle_bug+0x46/0x90
[   14.965130]  ? exc_invalid_op+0x1d/0x50
[   14.965275]  ? asm_exc_invalid_op+0x1f/0x30
[   14.965429]  ? __pfx_iommufd_fops_release+0x10/0x10
[   14.965611]  ? iommufd_fops_release+0x2a3/0x300
[   14.965780]  ? iommufd_fops_release+0x2a3/0x300
[   14.965950]  ? __pfx_iommufd_fops_release+0x10/0x10
[   14.966130]  ? rcu_is_watching+0x19/0xc0
[   14.966278]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   14.966476]  ? __pfx_iommufd_fops_release+0x10/0x10
[   14.966667]  __fput+0x424/0xaf0
[   14.966799]  ____fput+0x1f/0x30
[   14.966924]  task_work_run+0x19d/0x2b0
[   14.967070]  ? __pfx_task_work_run+0x10/0x10
[   14.967234]  ? __sanitizer_cov_trace_const_cmp1+0x1e/0x30
[   14.967430]  ? switch_task_namespaces+0xa9/0xe0
[   14.967600]  do_exit+0xac9/0x2790
[   14.967727]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   14.967954]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   14.968136]  ? __pfx_do_exit+0x10/0x10
[   14.968277]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   14.968474]  ? security_file_ioctl+0x9d/0xd0
[   14.968636]  make_task_dead+0x182/0x3c0
[   14.968781]  rewind_stack_and_make_dead+0x17/0x20
[   14.968956] RIP: 0033:0x7ff593e3ee5d
[   14.969089] Code: Unable to access opcode bytes at 0x7ff593e3ee33.
[   14.969308] RSP: 002b:00007ffc9555e048 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   14.969581] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007ff593e3ee5d
[   14.969833] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   14.970085] RBP: 00007ffc9555e060 R08: 0000000000000800 R09: 0000000000000800
[   14.970338] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffc9555e178
[   14.970598] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007ff59417c000
[   14.970878]  </TASK>
[   14.970964] irq event stamp: 0
[   14.971080] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   14.971308] hardirqs last disabled at (0): [<ffffffff8122f2d1>] copy_process+0x1c51/0x7140
[   14.971601] softirqs last  enabled at (0): [<ffffffff8122f312>] copy_process+0x1c92/0x7140
[   14.971894] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   14.972118] ---[ end trace 0000000000000000 ]---
[   14.974618] iommufd_mock iommufd_mock14: Adding to iommu group 14
[   14.974887] iommufd_mock iommufd_mock14: Removing from iommu group 14
[   14.975145] general protection fault, probably for non-canonical address 0xdffffc0000000006: 0000 [#15] PREEMPT SMP KASAN NOPTI
[   14.975561] KASAN: null-ptr-deref in range [0x0000000000000030-0x0000000000000037]
[   14.975839] CPU: 0 PID: 730 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   14.976159] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   14.976563] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   14.976775] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   14.977429] RSP: 0018:ffff888010307ba8 EFLAGS: 00010206
[   14.977622] RAX: dffffc0000000000 RBX: ffff888014f9f000 RCX: 0000000000000000
[   14.977879] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   14.978135] RBP: ffff888010307bc0 R08: 0000000000000001 R09: ffffed100155b11b
[   14.978391] R10: ffff88800aad88df R11: 5f6466756d6d6f69 R12: 0000000000000000
[   14.978661] R13: ffffffff85cc0180 R14: ffff88800bd3db00 R15: ffffffff87070ae0
[   14.978927] FS:  00007fd1ec015600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   14.979217] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   14.979428] CR2: 0000000020000080 CR3: 0000000013340000 CR4: 0000000000750ef0
[   14.979686] PKRU: 55555554
[   14.979790] Call Trace:
[   14.979883]  <TASK>
[   14.979967]  ? show_regs+0x6e/0x80
[   14.980102]  ? die_addr+0x45/0xb0
[   14.980235]  ? exc_general_protection+0x159/0x250
[   14.980417]  ? asm_exc_general_protection+0x2b/0x30
[   14.980603]  ? sysfs_remove_link_from_group+0x21/0x90
[   14.980793]  ? sysfs_remove_link_from_group+0x37/0x90
[   14.980983]  ? sysfs_remove_link_from_group+0x21/0x90
[   14.981172]  iommu_device_unlink+0x85/0xd0
[   14.981328]  iommu_deinit_device+0x11f/0x4c0
[   14.981494]  __iommu_group_remove_device+0x26b/0x300
[   14.981683]  iommu_group_remove_device+0x8a/0xb0
[   14.981859]  iommufd_test+0x1f1a/0x2d10
[   14.982005]  ? __pfx_lock_release+0x10/0x10
[   14.982163]  ? __pfx_lock_acquire+0x10/0x10
[   14.982327]  ? __pfx_iommufd_test+0x10/0x10
[   14.982485]  ? __sanitizer_cov_trace_const_cmp8+0x1c/0x30
[   14.982689]  iommufd_fops_ioctl+0x377/0x510
[   14.982853]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   14.983032]  ? trace_hardirqs_on+0x26/0x120
[   14.983193]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   14.983425]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   14.983611]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   14.983813]  ? security_file_ioctl+0x9d/0xd0
[   14.983978]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   14.984157]  __x64_sys_ioctl+0x1b9/0x230
[   14.984307]  do_syscall_64+0x3c/0x90
[   14.984443]  entry_SYSCALL_64_after_hwframe+0x6e/0xd8
[   14.984632] RIP: 0033:0x7fd1ebe3ee5d
[   14.984769] Code: ff c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d 93 af 1b 00 f7 d8 64 89 01 48
[   14.985424] RSP: 002b:00007ffc97c15528 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   14.985700] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007fd1ebe3ee5d
[   14.985957] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   14.986215] RBP: 00007ffc97c15540 R08: 0000000000000800 R09: 0000000000000800
[   14.986472] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffc97c15658
[   14.986752] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007fd1ec056000
[   14.987022]  </TASK>
[   14.987109] Modules linked in:
[   14.987253] ---[ end trace 0000000000000000 ]---
[   14.987424] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   14.987635] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   14.988292] RSP: 0018:ffff88802457fba8 EFLAGS: 00010206
[   14.988482] RAX: dffffc0000000000 RBX: ffff888014f9b000 RCX: 0000000000000000
[   14.988734] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   14.988987] RBP: ffff88802457fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   14.989239] R10: ffff88800aad88df R11: 0000000000000001 R12: 0000000000000000
[   14.989491] R13: ffffffff85cc0180 R14: ffff8880109b6ac0 R15: ffffffff87070ae0
[   14.989743] FS:  00007fd1ec015600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   14.990028] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   14.990234] CR2: 0000000020000080 CR3: 0000000013340000 CR4: 0000000000750ef0
[   14.990492] PKRU: 55555554
[   14.990887] ------------[ cut here ]------------
[   14.991063] WARNING: CPU: 0 PID: 730 at drivers/iommu/iommufd/main.c:258 iommufd_fops_release+0x2a3/0x300
[   14.991408] Modules linked in:
[   14.991525] CPU: 0 PID: 730 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   14.991839] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   14.992244] RIP: 0010:iommufd_fops_release+0x2a3/0x300
[   14.992435] Code: 45 d0 65 48 2b 04 25 28 00 00 00 75 54 48 81 c4 88 00 00 00 31 c0 5b 41 5c 41 5d 41 5e 41 5f 5d c3 cc cc cc cc e8 ad 4f 0a fe <0f> 0b eb a6 e8 74 23 67 fe e9 f6 fe ff ff 48 89 85 50 ff ff ff e8
[   14.993089] RSP: 0018:ffff888010307c00 EFLAGS: 00010293
[   14.993281] RAX: 0000000000000000 RBX: ffff88800ca7f808 RCX: 0000000000000000
[   14.993538] RDX: ffff8880232d8000 RSI: ffffffff835563e3 RDI: ffffffff86702b40
[   14.993795] RBP: ffff888010307cb0 R08: 0000000000000000 R09: fffffbfff0eb2644
[   14.994054] R10: ffffffff87593227 R11: ffff888018ac4a00 R12: 0000000000000000
[   14.994311] R13: ffff88801deff098 R14: ffff888010307c48 R15: ffffffff83556140
[   14.994572] FS:  0000000000000000(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   14.994894] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   14.995110] CR2: 0000000020000080 CR3: 000000000687e000 CR4: 0000000000750ef0
[   14.995368] PKRU: 55555554
[   14.995471] Call Trace:
[   14.995564]  <TASK>
[   14.995647]  ? show_regs+0x6e/0x80
[   14.995781]  ? __warn+0xef/0x340
[   14.995907]  ? report_bug+0x25e/0x4b0
[   14.996050]  ? iommufd_fops_release+0x2a3/0x300
[   14.996221]  ? report_bug+0x2cb/0x4b0
[   14.996370]  ? handle_bug+0x46/0x90
[   14.996521]  ? exc_invalid_op+0x1d/0x50
[   14.996769]  ? asm_exc_invalid_op+0x1f/0x30
[   14.996927]  ? __pfx_iommufd_fops_release+0x10/0x10
[   14.997112]  ? iommufd_fops_release+0x2a3/0x300
[   14.997284]  ? iommufd_fops_release+0x2a3/0x300
[   14.997457]  ? __pfx_iommufd_fops_release+0x10/0x10
[   14.997640]  ? rcu_is_watching+0x19/0xc0
[   14.997791]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   14.997992]  ? __pfx_iommufd_fops_release+0x10/0x10
[   14.998175]  __fput+0x424/0xaf0
[   14.998302]  ____fput+0x1f/0x30
[   14.998426]  task_work_run+0x19d/0x2b0
[   14.998596]  ? __pfx_task_work_run+0x10/0x10
[   14.998767]  ? __sanitizer_cov_trace_const_cmp1+0x1e/0x30
[   14.998972]  ? switch_task_namespaces+0xa9/0xe0
[   14.999149]  do_exit+0xac9/0x2790
[   14.999282]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   14.999514]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   14.999700]  ? __pfx_do_exit+0x10/0x10
[   14.999843]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   15.000044]  ? security_file_ioctl+0x9d/0xd0
[   15.000209]  make_task_dead+0x182/0x3c0
[   15.000357]  rewind_stack_and_make_dead+0x17/0x20
[   15.000535] RIP: 0033:0x7fd1ebe3ee5d
[   15.000671] Code: Unable to access opcode bytes at 0x7fd1ebe3ee33.
[   15.000893] RSP: 002b:00007ffc97c15528 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   15.001167] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007fd1ebe3ee5d
[   15.001423] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   15.001680] RBP: 00007ffc97c15540 R08: 0000000000000800 R09: 0000000000000800
[   15.001937] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffc97c15658
[   15.002194] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007fd1ec056000
[   15.002457]  </TASK>
[   15.002542] irq event stamp: 0
[   15.002680] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   15.002914] hardirqs last disabled at (0): [<ffffffff8122f2d1>] copy_process+0x1c51/0x7140
[   15.003233] softirqs last  enabled at (0): [<ffffffff8122f312>] copy_process+0x1c92/0x7140
[   15.003525] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   15.003749] ---[ end trace 0000000000000000 ]---
[   15.006213] iommufd_mock iommufd_mock15: Adding to iommu group 15
[   15.006469] iommufd_mock iommufd_mock15: Removing from iommu group 15
[   15.006794] general protection fault, probably for non-canonical address 0xdffffc0000000006: 0000 [#16] PREEMPT SMP KASAN NOPTI
[   15.007211] KASAN: null-ptr-deref in range [0x0000000000000030-0x0000000000000037]
[   15.007489] CPU: 0 PID: 731 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   15.007809] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   15.008212] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   15.008427] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   15.009084] RSP: 0018:ffff8880116cfba8 EFLAGS: 00010206
[   15.009276] RAX: dffffc0000000000 RBX: ffff888014f9e000 RCX: 0000000000000000
[   15.009532] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   15.009789] RBP: ffff8880116cfbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   15.010045] R10: ffff88800aad88df R11: 0000000000000000 R12: 0000000000000000
[   15.010301] R13: ffffffff85cc0180 R14: ffff88800bd3d0e0 R15: ffffffff87070ae0
[   15.010558] FS:  00007efdd9103600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   15.010864] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   15.011074] CR2: 0000000020000080 CR3: 0000000013340000 CR4: 0000000000750ef0
[   15.011332] PKRU: 55555554
[   15.011436] Call Trace:
[   15.011529]  <TASK>
[   15.011612]  ? show_regs+0x6e/0x80
[   15.011748]  ? die_addr+0x45/0xb0
[   15.011881]  ? exc_general_protection+0x159/0x250
[   15.012064]  ? asm_exc_general_protection+0x2b/0x30
[   15.012250]  ? sysfs_remove_link_from_group+0x21/0x90
[   15.012441]  ? sysfs_remove_link_from_group+0x37/0x90
[   15.012630]  ? sysfs_remove_link_from_group+0x21/0x90
[   15.012820]  iommu_device_unlink+0x85/0xd0
[   15.012976]  iommu_deinit_device+0x11f/0x4c0
[   15.013141]  __iommu_group_remove_device+0x26b/0x300
[   15.013330]  iommu_group_remove_device+0x8a/0xb0
[   15.013506]  iommufd_test+0x1f1a/0x2d10
[   15.013652]  ? __pfx_lock_release+0x10/0x10
[   15.013811]  ? __pfx_lock_acquire+0x10/0x10
[   15.013972]  ? __pfx_iommufd_test+0x10/0x10
[   15.014131]  ? __sanitizer_cov_trace_const_cmp8+0x1c/0x30
[   15.014339]  iommufd_fops_ioctl+0x377/0x510
[   15.014500]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   15.014681]  ? trace_hardirqs_on+0x26/0x120
[   15.014863]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   15.015096]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   15.015284]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   15.015485]  ? security_file_ioctl+0x9d/0xd0
[   15.015650]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   15.015829]  __x64_sys_ioctl+0x1b9/0x230
[   15.015980]  do_syscall_64+0x3c/0x90
[   15.016116]  entry_SYSCALL_64_after_hwframe+0x6e/0xd8
[   15.016305] RIP: 0033:0x7efdd8e3ee5d
[   15.016441] Code: ff c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d 93 af 1b 00 f7 d8 64 89 01 48
[   15.017095] RSP: 002b:00007fff98a04228 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   15.017368] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007efdd8e3ee5d
[   15.017626] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   15.017882] RBP: 00007fff98a04240 R08: 0000000000000800 R09: 0000000000000800
[   15.018139] R10: 0000000000000000 R11: 0000000000000213 R12: 00007fff98a04358
[   15.018396] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007efdd9144000
[   15.018664]  </TASK>
[   15.018755] Modules linked in:
[   15.018986] ---[ end trace 0000000000000000 ]---
[   15.019162] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   15.019377] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   15.020048] RSP: 0018:ffff88802457fba8 EFLAGS: 00010206
[   15.020241] RAX: dffffc0000000000 RBX: ffff888014f9b000 RCX: 0000000000000000
[   15.020498] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   15.020754] RBP: ffff88802457fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   15.021011] R10: ffff88800aad88df R11: 0000000000000001 R12: 0000000000000000
[   15.021268] R13: ffffffff85cc0180 R14: ffff8880109b6ac0 R15: ffffffff87070ae0
[   15.021524] FS:  00007efdd9103600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   15.021814] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   15.022024] CR2: 0000000020000080 CR3: 0000000013340000 CR4: 0000000000750ef0
[   15.022282] PKRU: 55555554
[   15.022664] ------------[ cut here ]------------
[   15.022844] WARNING: CPU: 0 PID: 731 at drivers/iommu/iommufd/main.c:258 iommufd_fops_release+0x2a3/0x300
[   15.023197] Modules linked in:
[   15.023315] CPU: 0 PID: 731 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   15.023628] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   15.024032] RIP: 0010:iommufd_fops_release+0x2a3/0x300
[   15.024224] Code: 45 d0 65 48 2b 04 25 28 00 00 00 75 54 48 81 c4 88 00 00 00 31 c0 5b 41 5c 41 5d 41 5e 41 5f 5d c3 cc cc cc cc e8 ad 4f 0a fe <0f> 0b eb a6 e8 74 23 67 fe e9 f6 fe ff ff 48 89 85 50 ff ff ff e8
[   15.024879] RSP: 0018:ffff8880116cfc00 EFLAGS: 00010293
[   15.025072] RAX: 0000000000000000 RBX: ffff88800ca7fa08 RCX: 0000000000000000
[   15.025329] RDX: ffff888016492500 RSI: ffffffff835563e3 RDI: ffffffff86702b40
[   15.025586] RBP: ffff8880116cfcb0 R08: 0000000000000000 R09: fffffbfff0eb2644
[   15.025843] R10: ffffffff87593227 R11: ffff888012646600 R12: 0000000000000000
[   15.026100] R13: ffff888019689098 R14: ffff8880116cfc48 R15: ffffffff83556140
[   15.026359] FS:  0000000000000000(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   15.026736] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   15.026949] CR2: 0000000020000080 CR3: 000000000687e000 CR4: 0000000000750ef0
[   15.027202] PKRU: 55555554
[   15.027304] Call Trace:
[   15.027398]  <TASK>
[   15.027480]  ? show_regs+0x6e/0x80
[   15.027617]  ? __warn+0xef/0x340
[   15.027742]  ? report_bug+0x25e/0x4b0
[   15.027882]  ? iommufd_fops_release+0x2a3/0x300
[   15.028051]  ? report_bug+0x2cb/0x4b0
[   15.028193]  ? handle_bug+0x46/0x90
[   15.028325]  ? exc_invalid_op+0x1d/0x50
[   15.028470]  ? asm_exc_invalid_op+0x1f/0x30
[   15.028624]  ? __pfx_iommufd_fops_release+0x10/0x10
[   15.028807]  ? iommufd_fops_release+0x2a3/0x300
[   15.028976]  ? iommufd_fops_release+0x2a3/0x300
[   15.029146]  ? __pfx_iommufd_fops_release+0x10/0x10
[   15.029326]  ? rcu_is_watching+0x19/0xc0
[   15.029475]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   15.029673]  ? __pfx_iommufd_fops_release+0x10/0x10
[   15.029852]  __fput+0x424/0xaf0
[   15.029980]  ____fput+0x1f/0x30
[   15.030102]  task_work_run+0x19d/0x2b0
[   15.030245]  ? __pfx_task_work_run+0x10/0x10
[   15.030405]  ? __sanitizer_cov_trace_const_cmp1+0x1e/0x30
[   15.030610]  ? switch_task_namespaces+0xa9/0xe0
[   15.030784]  do_exit+0xac9/0x2790
[   15.030911]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   15.031140]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   15.031325]  ? __pfx_do_exit+0x10/0x10
[   15.031466]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   15.031663]  ? security_file_ioctl+0x9d/0xd0
[   15.031826]  make_task_dead+0x182/0x3c0
[   15.031971]  rewind_stack_and_make_dead+0x17/0x20
[   15.032146] RIP: 0033:0x7efdd8e3ee5d
[   15.032279] Code: Unable to access opcode bytes at 0x7efdd8e3ee33.
[   15.032498] RSP: 002b:00007fff98a04228 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   15.032767] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007efdd8e3ee5d
[   15.033019] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   15.033275] RBP: 00007fff98a04240 R08: 0000000000000800 R09: 0000000000000800
[   15.033530] R10: 0000000000000000 R11: 0000000000000213 R12: 00007fff98a04358
[   15.033782] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007efdd9144000
[   15.034041]  </TASK>
[   15.034125] irq event stamp: 0
[   15.034239] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   15.034463] hardirqs last disabled at (0): [<ffffffff8122f2d1>] copy_process+0x1c51/0x7140
[   15.034767] softirqs last  enabled at (0): [<ffffffff8122f312>] copy_process+0x1c92/0x7140
[   15.035061] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   15.035285] ---[ end trace 0000000000000000 ]---
[   15.037670] iommufd_mock iommufd_mock16: Adding to iommu group 16
[   15.037923] iommufd_mock iommufd_mock16: Removing from iommu group 16
[   15.038176] general protection fault, probably for non-canonical address 0xdffffc0000000006: 0000 [#17] PREEMPT SMP KASAN NOPTI
[   15.038589] KASAN: null-ptr-deref in range [0x0000000000000030-0x0000000000000037]
[   15.038887] CPU: 0 PID: 732 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   15.039199] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   15.039603] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   15.039816] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   15.040471] RSP: 0018:ffff88801596fba8 EFLAGS: 00010206
[   15.040664] RAX: dffffc0000000000 RBX: ffff888014f9a000 RCX: 0000000000000000
[   15.040922] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   15.041178] RBP: ffff88801596fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   15.041434] R10: ffff88800aad88df R11: 5f6466756d6d6f69 R12: 0000000000000000
[   15.041691] R13: ffffffff85cc0180 R14: ffff88800bd3dc00 R15: ffffffff87070ae0
[   15.041949] FS:  00007f9d22de8600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   15.042238] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   15.042447] CR2: 0000000020000080 CR3: 0000000013340000 CR4: 0000000000750ef0
[   15.042705] PKRU: 55555554
[   15.042814] Call Trace:
[   15.042907]  <TASK>
[   15.042990]  ? show_regs+0x6e/0x80
[   15.043126]  ? die_addr+0x45/0xb0
[   15.043259]  ? exc_general_protection+0x159/0x250
[   15.043441]  ? asm_exc_general_protection+0x2b/0x30
[   15.043627]  ? sysfs_remove_link_from_group+0x21/0x90
[   15.043817]  ? sysfs_remove_link_from_group+0x37/0x90
[   15.044007]  ? sysfs_remove_link_from_group+0x21/0x90
[   15.044197]  iommu_device_unlink+0x85/0xd0
[   15.044353]  iommu_deinit_device+0x11f/0x4c0
[   15.044521]  __iommu_group_remove_device+0x26b/0x300
[   15.044713]  iommu_group_remove_device+0x8a/0xb0
[   15.044890]  iommufd_test+0x1f1a/0x2d10
[   15.045036]  ? __pfx_lock_release+0x10/0x10
[   15.045196]  ? __pfx_lock_acquire+0x10/0x10
[   15.045357]  ? __pfx_iommufd_test+0x10/0x10
[   15.045516]  ? __sanitizer_cov_trace_const_cmp8+0x1c/0x30
[   15.045720]  iommufd_fops_ioctl+0x377/0x510
[   15.045881]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   15.046061]  ? trace_hardirqs_on+0x26/0x120
[   15.046223]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   15.046455]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   15.046642]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   15.046854]  ? security_file_ioctl+0x9d/0xd0
[   15.047020]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   15.047198]  __x64_sys_ioctl+0x1b9/0x230
[   15.047347]  do_syscall_64+0x3c/0x90
[   15.047484]  entry_SYSCALL_64_after_hwframe+0x6e/0xd8
[   15.047672] RIP: 0033:0x7f9d22a3ee5d
[   15.047810] Code: ff c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d 93 af 1b 00 f7 d8 64 89 01 48
[   15.048463] RSP: 002b:00007ffe14a82a68 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   15.048737] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f9d22a3ee5d
[   15.049014] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   15.049271] RBP: 00007ffe14a82a80 R08: 0000000000000800 R09: 0000000000000800
[   15.049528] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffe14a82b98
[   15.049785] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f9d22e29000
[   15.050047]  </TASK>
[   15.050133] Modules linked in:
[   15.050275] ---[ end trace 0000000000000000 ]---
[   15.050446] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   15.050677] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   15.051353] RSP: 0018:ffff88802457fba8 EFLAGS: 00010206
[   15.051542] RAX: dffffc0000000000 RBX: ffff888014f9b000 RCX: 0000000000000000
[   15.051794] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   15.052047] RBP: ffff88802457fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   15.052300] R10: ffff88800aad88df R11: 0000000000000001 R12: 0000000000000000
[   15.052569] R13: ffffffff85cc0180 R14: ffff8880109b6ac0 R15: ffffffff87070ae0
[   15.052933] FS:  00007f9d22de8600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   15.053289] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   15.053496] CR2: 0000000020000080 CR3: 0000000013340000 CR4: 0000000000750ef0
[   15.053815] PKRU: 55555554
[   15.054412] ------------[ cut here ]------------
[   15.054663] WARNING: CPU: 0 PID: 732 at drivers/iommu/iommufd/main.c:258 iommufd_fops_release+0x2a3/0x300
[   15.055011] Modules linked in:
[   15.055129] CPU: 0 PID: 732 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   15.055441] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   15.055842] RIP: 0010:iommufd_fops_release+0x2a3/0x300
[   15.056031] Code: 45 d0 65 48 2b 04 25 28 00 00 00 75 54 48 81 c4 88 00 00 00 31 c0 5b 41 5c 41 5d 41 5e 41 5f 5d c3 cc cc cc cc e8 ad 4f 0a fe <0f> 0b eb a6 e8 74 23 67 fe e9 f6 fe ff ff 48 89 85 50 ff ff ff e8
[   15.056673] RSP: 0018:ffff88801596fc00 EFLAGS: 00010293
[   15.056863] RAX: 0000000000000000 RBX: ffff88800ca7f408 RCX: 0000000000000000
[   15.057116] RDX: ffff888011e40000 RSI: ffffffff835563e3 RDI: ffffffff86702b40
[   15.057368] RBP: ffff88801596fcb0 R08: 0000000000000000 R09: fffffbfff0eb2644
[   15.057621] R10: ffffffff87593227 R11: ffff8880130bb600 R12: 0000000000000000
[   15.057874] R13: ffff888019688698 R14: ffff88801596fc48 R15: ffffffff83556140
[   15.058127] FS:  0000000000000000(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   15.058412] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   15.058664] CR2: 0000000020000080 CR3: 00000000133d2000 CR4: 0000000000750ef0
[   15.058923] PKRU: 55555554
[   15.059026] Call Trace:
[   15.059118]  <TASK>
[   15.059200]  ? show_regs+0x6e/0x80
[   15.059338]  ? __warn+0xef/0x340
[   15.059478]  ? report_bug+0x25e/0x4b0
[   15.059685]  ? iommufd_fops_release+0x2a3/0x300
[   15.059855]  ? report_bug+0x2cb/0x4b0
[   15.060009]  ? handle_bug+0x46/0x90
[   15.060158]  ? exc_invalid_op+0x1d/0x50
[   15.060357]  ? asm_exc_invalid_op+0x1f/0x30
[   15.060514]  ? __pfx_iommufd_fops_release+0x10/0x10
[   15.060721]  ? iommufd_fops_release+0x2a3/0x300
[   15.060937]  ? iommufd_fops_release+0x2a3/0x300
[   15.061108]  ? __pfx_iommufd_fops_release+0x10/0x10
[   15.061308]  ? rcu_is_watching+0x19/0xc0
[   15.061510]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   15.061712]  ? __pfx_iommufd_fops_release+0x10/0x10
[   15.061945]  __fput+0x424/0xaf0
[   15.062071]  ____fput+0x1f/0x30
[   15.062193]  task_work_run+0x19d/0x2b0
[   15.062336]  ? __pfx_task_work_run+0x10/0x10
[   15.062517]  ? __sanitizer_cov_trace_const_cmp1+0x1e/0x30
[   15.062770]  ? switch_task_namespaces+0xa9/0xe0
[   15.062942]  do_exit+0xac9/0x2790
[   15.063070]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   15.063298]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   15.063488]  ? __pfx_do_exit+0x10/0x10
[   15.063700]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   15.063903]  ? security_file_ioctl+0x9d/0xd0
[   15.064076]  make_task_dead+0x182/0x3c0
[   15.064275]  rewind_stack_and_make_dead+0x17/0x20
[   15.064450] RIP: 0033:0x7f9d22a3ee5d
[   15.064584] Code: Unable to access opcode bytes at 0x7f9d22a3ee33.
[   15.064863] RSP: 002b:00007ffe14a82a68 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   15.065139] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f9d22a3ee5d
[   15.065457] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   15.065709] RBP: 00007ffe14a82a80 R08: 0000000000000800 R09: 0000000000000800
[   15.066026] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffe14a82b98
[   15.066282] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f9d22e29000
[   15.066566]  </TASK>
[   15.066695] irq event stamp: 0
[   15.066815] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   15.067044] hardirqs last disabled at (0): [<ffffffff8122f2d1>] copy_process+0x1c51/0x7140
[   15.067344] softirqs last  enabled at (0): [<ffffffff8122f312>] copy_process+0x1c92/0x7140
[   15.067698] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   15.067922] ---[ end trace 0000000000000000 ]---
[   15.071360] iommufd_mock iommufd_mock17: Adding to iommu group 17
[   15.071608] iommufd_mock iommufd_mock17: Removing from iommu group 17
[   15.071864] general protection fault, probably for non-canonical address 0xdffffc0000000006: 0000 [#18] PREEMPT SMP KASAN NOPTI
[   15.072279] KASAN: null-ptr-deref in range [0x0000000000000030-0x0000000000000037]
[   15.072605] CPU: 0 PID: 733 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   15.072925] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   15.073339] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   15.073557] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   15.074228] RSP: 0018:ffff8880116cfba8 EFLAGS: 00010206
[   15.074426] RAX: dffffc0000000000 RBX: ffff888014f9c000 RCX: 0000000000000000
[   15.074690] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   15.074980] RBP: ffff8880116cfbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   15.075243] R10: ffff88800aad88df R11: 5f6466756d6d6f69 R12: 0000000000000000
[   15.075505] R13: ffffffff85cc0180 R14: ffff8880109b60c0 R15: ffffffff87070ae0
[   15.075768] FS:  00007fc3e1dcf600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   15.076064] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   15.076279] CR2: 0000000020000080 CR3: 0000000018b5a000 CR4: 0000000000750ef0
[   15.076543] PKRU: 55555554
[   15.076649] Call Trace:
[   15.076746]  <TASK>
[   15.076831]  ? show_regs+0x6e/0x80
[   15.076969]  ? die_addr+0x45/0xb0
[   15.077105]  ? exc_general_protection+0x159/0x250
[   15.077292]  ? asm_exc_general_protection+0x2b/0x30
[   15.077483]  ? sysfs_remove_link_from_group+0x21/0x90
[   15.077677]  ? sysfs_remove_link_from_group+0x37/0x90
[   15.077870]  ? sysfs_remove_link_from_group+0x21/0x90
[   15.078064]  iommu_device_unlink+0x85/0xd0
[   15.078223]  iommu_deinit_device+0x11f/0x4c0
[   15.078392]  __iommu_group_remove_device+0x26b/0x300
[   15.078587]  iommu_group_remove_device+0x8a/0xb0
[   15.078795]  iommufd_test+0x1f1a/0x2d10
[   15.078946]  ? __pfx_lock_release+0x10/0x10
[   15.079109]  ? __pfx_lock_acquire+0x10/0x10
[   15.079274]  ? __pfx_iommufd_test+0x10/0x10
[   15.079436]  ? __sanitizer_cov_trace_const_cmp8+0x1c/0x30
[   15.079644]  iommufd_fops_ioctl+0x377/0x510
[   15.079811]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   15.079996]  ? trace_hardirqs_on+0x26/0x120
[   15.080160]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   15.080397]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   15.080586]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   15.080792]  ? security_file_ioctl+0x9d/0xd0
[   15.080961]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   15.081142]  __x64_sys_ioctl+0x1b9/0x230
[   15.081295]  do_syscall_64+0x3c/0x90
[   15.081434]  entry_SYSCALL_64_after_hwframe+0x6e/0xd8
[   15.081625] RIP: 0033:0x7fc3e1a3ee5d
[   15.081764] Code: ff c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d 93 af 1b 00 f7 d8 64 89 01 48
[   15.082434] RSP: 002b:00007ffcfedc50b8 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   15.082714] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007fc3e1a3ee5d
[   15.082987] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   15.083250] RBP: 00007ffcfedc50d0 R08: 0000000000000800 R09: 0000000000000800
[   15.083513] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffcfedc51e8
[   15.083777] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007fc3e1e10000
[   15.084046]  </TASK>
[   15.084134] Modules linked in:
[   15.084317] ---[ end trace 0000000000000000 ]---
[   15.084492] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   15.084699] systemd-journald[136]: Data hash table of /run/log/journal/938775788448454bb5b34822d5730c41/system.journal has a fill level at 75.0 (5446 of 7260 items, 4182016 file size, 767 bytes per hash table item), suggesting rotation.
[   15.084708] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   15.085459] systemd-journald[136]: /run/log/journal/938775788448454bb5b34822d5730c41/system.journal: Journal header limits reached or header out-of-date, rotating.
[   15.086114] RSP: 0018:ffff88802457fba8 EFLAGS: 00010206
[   15.086867] RAX: dffffc0000000000 RBX: ffff888014f9b000 RCX: 0000000000000000
[   15.087131] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   15.087392] RBP: ffff88802457fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   15.087654] R10: ffff88800aad88df R11: 0000000000000001 R12: 0000000000000000
[   15.087916] R13: ffffffff85cc0180 R14: ffff8880109b6ac0 R15: ffffffff87070ae0
[   15.088177] FS:  00007fc3e1dcf600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   15.088473] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   15.088688] CR2: 0000000020000080 CR3: 0000000018b5a000 CR4: 0000000000750ef0
[   15.088952] PKRU: 55555554
[   15.089323] ------------[ cut here ]------------
[   15.089500] WARNING: CPU: 0 PID: 733 at drivers/iommu/iommufd/main.c:258 iommufd_fops_release+0x2a3/0x300
[   15.089853] Modules linked in:
[   15.089973] CPU: 0 PID: 733 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   15.090293] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   15.090714] RIP: 0010:iommufd_fops_release+0x2a3/0x300
[   15.090939] Code: 45 d0 65 48 2b 04 25 28 00 00 00 75 54 48 81 c4 88 00 00 00 31 c0 5b 41 5c 41 5d 41 5e 41 5f 5d c3 cc cc cc cc e8 ad 4f 0a fe <0f> 0b eb a6 e8 74 23 67 fe e9 f6 fe ff ff 48 89 85 50 ff ff ff e8
[   15.091609] RSP: 0018:ffff8880116cfc00 EFLAGS: 00010293
[   15.091886] RAX: 0000000000000000 RBX: ffff88800ca7f708 RCX: 0000000000000000
[   15.092144] RDX: ffff8880138b4a00 RSI: ffffffff835563e3 RDI: ffffffff86702b40
[   15.092420] RBP: ffff8880116cfcb0 R08: 0000000000000000 R09: fffffbfff0eb2644
[   15.092723] R10: ffffffff87593227 R11: ffff888012f52e00 R12: 0000000000000000
[   15.093008] R13: ffff8880132de698 R14: ffff8880116cfc48 R15: ffffffff83556140
[   15.093303] FS:  0000000000000000(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   15.093619] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   15.093877] CR2: 0000000020000080 CR3: 000000000687e000 CR4: 0000000000750ef0
[   15.094144] PKRU: 55555554
[   15.094256] Call Trace:
[   15.094389]  <TASK>
[   15.094473]  ? show_regs+0x6e/0x80
[   15.094616]  ? __warn+0xef/0x340
[   15.094772]  ? report_bug+0x25e/0x4b0
[   15.094985]  ? iommufd_fops_release+0x2a3/0x300
[   15.095154]  ? report_bug+0x2cb/0x4b0
[   15.095296]  ? handle_bug+0x46/0x90
[   15.095429]  ? exc_invalid_op+0x1d/0x50
[   15.095573]  ? asm_exc_invalid_op+0x1f/0x30
[   15.095750]  ? __pfx_iommufd_fops_release+0x10/0x10
[   15.095975]  ? iommufd_fops_release+0x2a3/0x300
[   15.096146]  ? iommufd_fops_release+0x2a3/0x300
[   15.096343]  ? __pfx_iommufd_fops_release+0x10/0x10
[   15.096568]  ? rcu_is_watching+0x19/0xc0
[   15.096718]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   15.096916]  ? __pfx_iommufd_fops_release+0x10/0x10
[   15.097117]  __fput+0x424/0xaf0
[   15.097246]  ____fput+0x1f/0x30
[   15.097409]  task_work_run+0x19d/0x2b0
[   15.097555]  ? __pfx_task_work_run+0x10/0x10
[   15.097718]  ? __sanitizer_cov_trace_const_cmp1+0x1e/0x30
[   15.097942]  ? switch_task_namespaces+0xa9/0xe0
[   15.098159]  do_exit+0xac9/0x2790
[   15.098287]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   15.098513]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   15.098704]  ? __pfx_do_exit+0x10/0x10
[   15.098877]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   15.099078]  ? security_file_ioctl+0x9d/0xd0
[   15.099241]  make_task_dead+0x182/0x3c0
[   15.099387]  rewind_stack_and_make_dead+0x17/0x20
[   15.099586] RIP: 0033:0x7fc3e1a3ee5d
[   15.099723] Code: Unable to access opcode bytes at 0x7fc3e1a3ee33.
[   15.099981] RSP: 002b:00007ffcfedc50b8 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   15.100252] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007fc3e1a3ee5d
[   15.100505] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   15.100757] RBP: 00007ffcfedc50d0 R08: 0000000000000800 R09: 0000000000000800
[   15.101009] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffcfedc51e8
[   15.101261] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007fc3e1e10000
[   15.101519]  </TASK>
[   15.101604] irq event stamp: 0
[   15.101718] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   15.101942] hardirqs last disabled at (0): [<ffffffff8122f2d1>] copy_process+0x1c51/0x7140
[   15.102235] softirqs last  enabled at (0): [<ffffffff8122f312>] copy_process+0x1c92/0x7140
[   15.102528] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   15.102765] ---[ end trace 0000000000000000 ]---
[   15.105661] iommufd_mock iommufd_mock18: Adding to iommu group 18
[   15.105978] iommufd_mock iommufd_mock18: Removing from iommu group 18
[   15.106239] general protection fault, probably for non-canonical address 0xdffffc0000000006: 0000 [#19] PREEMPT SMP KASAN NOPTI
[   15.106659] KASAN: null-ptr-deref in range [0x0000000000000030-0x0000000000000037]
[   15.106962] CPU: 0 PID: 735 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   15.107335] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   15.107749] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   15.107968] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   15.108638] RSP: 0018:ffff888020857ba8 EFLAGS: 00010206
[   15.108836] RAX: dffffc0000000000 RBX: ffff888014f9d000 RCX: 0000000000000000
[   15.109099] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   15.109361] RBP: ffff888020857bc0 R08: 0000000000000001 R09: ffffed100155b11b
[   15.109625] R10: ffff88800aad88df R11: 5f6466756d6d6f69 R12: 0000000000000000
[   15.109888] R13: ffffffff85cc0180 R14: ffff8880109b6280 R15: ffffffff87070ae0
[   15.110153] FS:  00007feb20b2c600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   15.110449] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   15.110664] CR2: 0000000020000080 CR3: 000000000f740000 CR4: 0000000000750ef0
[   15.110940] PKRU: 55555554
[   15.111046] Call Trace:
[   15.111143]  <TASK>
[   15.111228]  ? show_regs+0x6e/0x80
[   15.111367]  ? die_addr+0x45/0xb0
[   15.111503]  ? exc_general_protection+0x159/0x250
[   15.111690]  ? asm_exc_general_protection+0x2b/0x30
[   15.111880]  ? sysfs_remove_link_from_group+0x21/0x90
[   15.112074]  ? sysfs_remove_link_from_group+0x37/0x90
[   15.112268]  ? sysfs_remove_link_from_group+0x21/0x90
[   15.112463]  iommu_device_unlink+0x85/0xd0
[   15.112624]  iommu_deinit_device+0x11f/0x4c0
[   15.112793]  __iommu_group_remove_device+0x26b/0x300
[   15.112989]  iommu_group_remove_device+0x8a/0xb0
[   15.113169]  iommufd_test+0x1f1a/0x2d10
[   15.113318]  ? __pfx_lock_release+0x10/0x10
[   15.113481]  ? __pfx_lock_acquire+0x10/0x10
[   15.113646]  ? __pfx_iommufd_test+0x10/0x10
[   15.113810]  ? __sanitizer_cov_trace_const_cmp8+0x1c/0x30
[   15.114021]  iommufd_fops_ioctl+0x377/0x510
[   15.114185]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   15.114368]  ? trace_hardirqs_on+0x26/0x120
[   15.114533]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   15.114798]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   15.114992]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   15.115194]  ? security_file_ioctl+0x9d/0xd0
[   15.115360]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   15.115538]  __x64_sys_ioctl+0x1b9/0x230
[   15.115688]  do_syscall_64+0x3c/0x90
[   15.115825]  entry_SYSCALL_64_after_hwframe+0x6e/0xd8
[   15.116013] RIP: 0033:0x7feb2083ee5d
[   15.116149] Code: ff c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d 93 af 1b 00 f7 d8 64 89 01 48
[   15.116805] RSP: 002b:00007fff9ea5ca28 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   15.117080] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007feb2083ee5d
[   15.117337] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   15.117595] RBP: 00007fff9ea5ca40 R08: 0000000000000800 R09: 0000000000000800
[   15.117854] R10: 0000000000000000 R11: 0000000000000213 R12: 00007fff9ea5cb58
[   15.118114] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007feb20b6d000
[   15.118377]  </TASK>
[   15.118463] Modules linked in:
[   15.118635] ---[ end trace 0000000000000000 ]---
[   15.118846] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   15.119115] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   15.119771] RSP: 0018:ffff88802457fba8 EFLAGS: 00010206
[   15.119964] RAX: dffffc0000000000 RBX: ffff888014f9b000 RCX: 0000000000000000
[   15.120222] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   15.120479] RBP: ffff88802457fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   15.120737] R10: ffff88800aad88df R11: 0000000000000001 R12: 0000000000000000
[   15.121027] R13: ffffffff85cc0180 R14: ffff8880109b6ac0 R15: ffffffff87070ae0
[   15.121346] FS:  00007feb20b2c600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   15.121659] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   15.121918] CR2: 0000000020000080 CR3: 000000000f740000 CR4: 0000000000750ef0
[   15.122260] PKRU: 55555554
[   15.122756] ------------[ cut here ]------------
[   15.122933] WARNING: CPU: 0 PID: 735 at drivers/iommu/iommufd/main.c:258 iommufd_fops_release+0x2a3/0x300
[   15.123302] Modules linked in:
[   15.123476] CPU: 0 PID: 735 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   15.123808] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   15.124266] RIP: 0010:iommufd_fops_release+0x2a3/0x300
[   15.124482] Code: 45 d0 65 48 2b 04 25 28 00 00 00 75 54 48 81 c4 88 00 00 00 31 c0 5b 41 5c 41 5d 41 5e 41 5f 5d c3 cc cc cc cc e8 ad 4f 0a fe <0f> 0b eb a6 e8 74 23 67 fe e9 f6 fe ff ff 48 89 85 50 ff ff ff e8
[   15.125217] RSP: 0018:ffff888020857c00 EFLAGS: 00010293
[   15.125436] RAX: 0000000000000000 RBX: ffff888024705a08 RCX: 0000000000000000
[   15.125740] RDX: ffff88800fc10000 RSI: ffffffff835563e3 RDI: ffffffff86702b40
[   15.126023] RBP: ffff888020857cb0 R08: 0000000000000000 R09: fffffbfff0eb2644
[   15.126311] R10: ffffffff87593227 R11: ffff88801305aa00 R12: 0000000000000000
[   15.126631] R13: ffff8880132dfa98 R14: ffff888020857c48 R15: ffffffff83556140
[   15.126901] FS:  0000000000000000(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   15.127196] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   15.127431] CR2: 0000000020000080 CR3: 000000000687e000 CR4: 0000000000750ef0
[   15.127735] PKRU: 55555554
[   15.127841] Call Trace:
[   15.127941]  <TASK>
[   15.128042]  ? show_regs+0x6e/0x80
[   15.128220]  ? __warn+0xef/0x340
[   15.128350]  ? report_bug+0x25e/0x4b0
[   15.128495]  ? iommufd_fops_release+0x2a3/0x300
[   15.128735]  ? report_bug+0x2cb/0x4b0
[   15.128882]  ? handle_bug+0x46/0x90
[   15.129019]  ? exc_invalid_op+0x1d/0x50
[   15.129184]  ? asm_exc_invalid_op+0x1f/0x30
[   15.129380]  ? __pfx_iommufd_fops_release+0x10/0x10
[   15.129569]  ? iommufd_fops_release+0x2a3/0x300
[   15.129752]  ? iommufd_fops_release+0x2a3/0x300
[   15.129978]  ? __pfx_iommufd_fops_release+0x10/0x10
[   15.130164]  ? rcu_is_watching+0x19/0xc0
[   15.130330]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   15.130593]  ? __pfx_iommufd_fops_release+0x10/0x10
[   15.130784]  __fput+0x424/0xaf0
[   15.130915]  ____fput+0x1f/0x30
[   15.131043]  task_work_run+0x19d/0x2b0
[   15.131206]  ? __pfx_task_work_run+0x10/0x10
[   15.131381]  ? __sanitizer_cov_trace_const_cmp1+0x1e/0x30
[   15.131633]  ? switch_task_namespaces+0xa9/0xe0
[   15.131809]  do_exit+0xac9/0x2790
[   15.131948]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   15.132240]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   15.132429]  ? __pfx_do_exit+0x10/0x10
[   15.132587]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   15.132836]  ? security_file_ioctl+0x9d/0xd0
[   15.133004]  make_task_dead+0x182/0x3c0
[   15.133155]  rewind_stack_and_make_dead+0x17/0x20
[   15.133412] RIP: 0033:0x7feb2083ee5d
[   15.133554] Code: Unable to access opcode bytes at 0x7feb2083ee33.
[   15.133786] RSP: 002b:00007fff9ea5ca28 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   15.134119] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007feb2083ee5d
[   15.134391] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   15.134708] RBP: 00007fff9ea5ca40 R08: 0000000000000800 R09: 0000000000000800
[   15.134977] R10: 0000000000000000 R11: 0000000000000213 R12: 00007fff9ea5cb58
[   15.135240] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007feb20b6d000
[   15.135565]  </TASK>
[   15.135654] irq event stamp: 0
[   15.135772] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   15.136068] hardirqs last disabled at (0): [<ffffffff8122f2d1>] copy_process+0x1c51/0x7140
[   15.136373] softirqs last  enabled at (0): [<ffffffff8122f312>] copy_process+0x1c92/0x7140
[   15.136735] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   15.136968] ---[ end trace 0000000000000000 ]---
[   15.139557] iommufd_mock iommufd_mock19: Adding to iommu group 19
[   15.139811] iommufd_mock iommufd_mock19: Removing from iommu group 19
[   15.140067] general protection fault, probably for non-canonical address 0xdffffc0000000006: 0000 [#20] PREEMPT SMP KASAN NOPTI
[   15.140479] KASAN: null-ptr-deref in range [0x0000000000000030-0x0000000000000037]
[   15.140754] CPU: 1 PID: 736 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   15.141069] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   15.141477] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   15.141691] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   15.142352] RSP: 0018:ffff88801596fba8 EFLAGS: 00010206
[   15.142549] RAX: dffffc0000000000 RBX: ffff88800fc33000 RCX: 0000000000000000
[   15.142817] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   15.143076] RBP: ffff88801596fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   15.143336] R10: ffff88800aad88df R11: 5f6466756d6d6f69 R12: 0000000000000000
[   15.143596] R13: ffffffff85cc0180 R14: ffff88800fd72e80 R15: ffffffff87070ae0
[   15.143858] FS:  00007f3b0ab94600(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
[   15.144151] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   15.144363] CR2: 0000000020000080 CR3: 000000000fe6a000 CR4: 0000000000750ee0
[   15.144623] PKRU: 55555554
[   15.144741] Call Trace:
[   15.144839]  <TASK>
[   15.144923]  ? show_regs+0x6e/0x80
[   15.145060]  ? die_addr+0x45/0xb0
[   15.145194]  ? exc_general_protection+0x159/0x250
[   15.145379]  ? asm_exc_general_protection+0x2b/0x30
[   15.145567]  ? sysfs_remove_link_from_group+0x21/0x90
[   15.145759]  ? sysfs_remove_link_from_group+0x37/0x90
[   15.145951]  ? sysfs_remove_link_from_group+0x21/0x90
[   15.146143]  iommu_device_unlink+0x85/0xd0
[   15.146301]  iommu_deinit_device+0x11f/0x4c0
[   15.146468]  __iommu_group_remove_device+0x26b/0x300
[   15.146659]  iommu_group_remove_device+0x8a/0xb0
[   15.146840]  iommufd_test+0x1f1a/0x2d10
[   15.146987]  ? __pfx_lock_release+0x10/0x10
[   15.147149]  ? __pfx_lock_acquire+0x10/0x10
[   15.147312]  ? __pfx_iommufd_test+0x10/0x10
[   15.147473]  ? __sanitizer_cov_trace_const_cmp8+0x1c/0x30
[   15.147678]  iommufd_fops_ioctl+0x377/0x510
[   15.147841]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   15.148021]  ? trace_hardirqs_on+0x26/0x120
[   15.148184]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   15.148418]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   15.148606]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   15.148809]  ? security_file_ioctl+0x9d/0xd0
[   15.148977]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   15.149160]  __x64_sys_ioctl+0x1b9/0x230
[   15.149311]  do_syscall_64+0x3c/0x90
[   15.149450]  entry_SYSCALL_64_after_hwframe+0x6e/0xd8
[   15.149640] RIP: 0033:0x7f3b0a83ee5d
[   15.149778] Code: ff c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d 93 af 1b 00 f7 d8 64 89 01 48
[   15.150439] RSP: 002b:00007ffecb0345b8 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   15.150717] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f3b0a83ee5d
[   15.150979] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   15.151240] RBP: 00007ffecb0345d0 R08: 0000000000000800 R09: 0000000000000800
[   15.151566] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffecb0346e8
[   15.151828] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f3b0abd5000
[   15.152144]  </TASK>
[   15.152231] Modules linked in:
[   15.152392] ---[ end trace 0000000000000000 ]---
[   15.152565] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   15.152779] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   15.153441] RSP: 0018:ffff88802457fba8 EFLAGS: 00010206
[   15.153635] RAX: dffffc0000000000 RBX: ffff888014f9b000 RCX: 0000000000000000
[   15.153895] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   15.154205] RBP: ffff88802457fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   15.154465] R10: ffff88800aad88df R11: 0000000000000001 R12: 0000000000000000
[   15.154823] R13: ffffffff85cc0180 R14: ffff8880109b6ac0 R15: ffffffff87070ae0
[   15.155086] FS:  00007f3b0ab94600(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
[   15.155425] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   15.155638] CR2: 0000000020000080 CR3: 000000000fe6a000 CR4: 0000000000750ee0
[   15.155943] PKRU: 55555554
[   15.156900] ------------[ cut here ]------------
[   15.157137] WARNING: CPU: 1 PID: 736 at drivers/iommu/iommufd/main.c:258 iommufd_fops_release+0x2a3/0x300
[   15.157501] Modules linked in:
[   15.157654] CPU: 1 PID: 736 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   15.157977] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   15.158430] RIP: 0010:iommufd_fops_release+0x2a3/0x300
[   15.158702] Code: 45 d0 65 48 2b 04 25 28 00 00 00 75 54 48 81 c4 88 00 00 00 31 c0 5b 41 5c 41 5d 41 5e 41 5f 5d c3 cc cc cc cc e8 ad 4f 0a fe <0f> 0b eb a6 e8 74 23 67 fe e9 f6 fe ff ff 48 89 85 50 ff ff ff e8
[   15.159375] RSP: 0018:ffff88801596fc00 EFLAGS: 00010293
[   15.159609] RAX: 0000000000000000 RBX: ffff88801248aa08 RCX: 0000000000000000
[   15.159868] RDX: ffff88800fc12500 RSI: ffffffff835563e3 RDI: ffffffff86702b48
[   15.160178] RBP: ffff88801596fcb0 R08: 0000000000000000 R09: fffffbfff0eb2644
[   15.160447] R10: ffffffff87593227 R11: ffff88801381bc00 R12: 0000000000000000
[   15.160742] R13: ffff88801359f598 R14: ffff88801596fc48 R15: ffffffff83556140
[   15.161023] FS:  0000000000000000(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
[   15.161341] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   15.161602] CR2: 0000000020000080 CR3: 00000000133d2000 CR4: 0000000000750ee0
[   15.161863] PKRU: 55555554
[   15.161968] Call Trace:
[   15.162077]  <TASK>
[   15.162192]  ? show_regs+0x6e/0x80
[   15.162327]  ? __warn+0xef/0x340
[   15.162456]  ? report_bug+0x25e/0x4b0
[   15.162666]  ? iommufd_fops_release+0x2a3/0x300
[   15.162842]  ? report_bug+0x2cb/0x4b0
[   15.162988]  ? handle_bug+0x46/0x90
[   15.163127]  ? exc_invalid_op+0x1d/0x50
[   15.163275]  ? asm_exc_invalid_op+0x1f/0x30
[   15.163449]  ? __pfx_iommufd_fops_release+0x10/0x10
[   15.163659]  ? iommufd_fops_release+0x2a3/0x300
[   15.163833]  ? iommufd_fops_release+0x2a3/0x300
[   15.164009]  ? __pfx_iommufd_fops_release+0x10/0x10
[   15.164242]  ? rcu_is_watching+0x19/0xc0
[   15.164394]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   15.164598]  ? __pfx_iommufd_fops_release+0x10/0x10
[   15.164782]  __fput+0x424/0xaf0
[   15.164930]  ____fput+0x1f/0x30
[   15.165080]  task_work_run+0x19d/0x2b0
[   15.165227]  ? __pfx_task_work_run+0x10/0x10
[   15.165391]  ? __sanitizer_cov_trace_const_cmp1+0x1e/0x30
[   15.165593]  ? switch_task_namespaces+0xa9/0xe0
[   15.165817]  do_exit+0xac9/0x2790
[   15.165948]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   15.166183]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   15.166375]  ? __pfx_do_exit+0x10/0x10
[   15.166566]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   15.166796]  ? security_file_ioctl+0x9d/0xd0
[   15.166964]  make_task_dead+0x182/0x3c0
[   15.167113]  rewind_stack_and_make_dead+0x17/0x20
[   15.167293] RIP: 0033:0x7f3b0a83ee5d
[   15.167430] Code: Unable to access opcode bytes at 0x7f3b0a83ee33.
[   15.167655] RSP: 002b:00007ffecb0345b8 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   15.167981] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f3b0a83ee5d
[   15.168241] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   15.168511] RBP: 00007ffecb0345d0 R08: 0000000000000800 R09: 0000000000000800
[   15.168809] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffecb0346e8
[   15.169070] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f3b0abd5000
[   15.169359]  </TASK>
[   15.169465] irq event stamp: 0
[   15.169582] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   15.169812] hardirqs last disabled at (0): [<ffffffff8122f2d1>] copy_process+0x1c51/0x7140
[   15.170128] softirqs last  enabled at (0): [<ffffffff8122f312>] copy_process+0x1c92/0x7140
[   15.170443] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   15.170695] ---[ end trace 0000000000000000 ]---
[   15.174691] iommufd_mock iommufd_mock20: Adding to iommu group 20
[   15.174952] iommufd_mock iommufd_mock20: Removing from iommu group 20
[   15.175208] general protection fault, probably for non-canonical address 0xdffffc0000000006: 0000 [#21] PREEMPT SMP KASAN NOPTI
[   15.175622] KASAN: null-ptr-deref in range [0x0000000000000030-0x0000000000000037]
[   15.175897] CPU: 1 PID: 737 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   15.176268] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   15.176703] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   15.176946] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   15.177663] RSP: 0018:ffff888014667ba8 EFLAGS: 00010206
[   15.177895] RAX: dffffc0000000000 RBX: ffff88800fc35000 RCX: 0000000000000000
[   15.178163] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   15.178462] RBP: ffff888014667bc0 R08: 0000000000000001 R09: ffffed100155b11b
[   15.178750] R10: ffff88800aad88df R11: 5f6466756d6d6f69 R12: 0000000000000000
[   15.179030] R13: ffffffff85cc0180 R14: ffff88800fd72da0 R15: ffffffff87070ae0
[   15.179330] FS:  00007f1f0816e600(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
[   15.179624] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   15.179837] CR2: 0000000020000080 CR3: 000000000f740000 CR4: 0000000000750ee0
[   15.180098] PKRU: 55555554
[   15.180203] Call Trace:
[   15.180298]  <TASK>
[   15.180382]  ? show_regs+0x6e/0x80
[   15.180520]  ? die_addr+0x45/0xb0
[   15.180655]  ? exc_general_protection+0x159/0x250
[   15.180840]  ? asm_exc_general_protection+0x2b/0x30
[   15.181029]  ? sysfs_remove_link_from_group+0x21/0x90
[   15.181221]  ? sysfs_remove_link_from_group+0x37/0x90
[   15.181415]  ? sysfs_remove_link_from_group+0x21/0x90
[   15.181607]  iommu_device_unlink+0x85/0xd0
[   15.181766]  iommu_deinit_device+0x11f/0x4c0
[   15.181933]  __iommu_group_remove_device+0x26b/0x300
[   15.182125]  iommu_group_remove_device+0x8a/0xb0
[   15.182303]  iommufd_test+0x1f1a/0x2d10
[   15.182451]  ? __pfx_lock_release+0x10/0x10
[   15.182612]  ? __pfx_lock_acquire+0x10/0x10
[   15.182779]  ? __pfx_iommufd_test+0x10/0x10
[   15.182941]  ? __sanitizer_cov_trace_const_cmp8+0x1c/0x30
[   15.183148]  iommufd_fops_ioctl+0x377/0x510
[   15.183311]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   15.183491]  ? trace_hardirqs_on+0x26/0x120
[   15.183655]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   15.183890]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   15.184078]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   15.184282]  ? security_file_ioctl+0x9d/0xd0
[   15.184449]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   15.184630]  __x64_sys_ioctl+0x1b9/0x230
[   15.184782]  do_syscall_64+0x3c/0x90
[   15.184921]  entry_SYSCALL_64_after_hwframe+0x6e/0xd8
[   15.185111] RIP: 0033:0x7f1f07e3ee5d
[   15.185249] Code: ff c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d 93 af 1b 00 f7 d8 64 89 01 48
[   15.185912] RSP: 002b:00007ffdcd51a0d8 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   15.186189] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f1f07e3ee5d
[   15.186451] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   15.186711] RBP: 00007ffdcd51a0f0 R08: 0000000000000800 R09: 0000000000000800
[   15.186974] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffdcd51a208
[   15.187234] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f1f081af000
[   15.187499]  </TASK>
[   15.187585] Modules linked in:
[   15.187731] ---[ end trace 0000000000000000 ]---
[   15.187904] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   15.188117] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   15.188780] RSP: 0018:ffff88802457fba8 EFLAGS: 00010206
[   15.188974] RAX: dffffc0000000000 RBX: ffff888014f9b000 RCX: 0000000000000000
[   15.189234] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   15.189494] RBP: ffff88802457fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   15.189753] R10: ffff88800aad88df R11: 0000000000000001 R12: 0000000000000000
[   15.190013] R13: ffffffff85cc0180 R14: ffff8880109b6ac0 R15: ffffffff87070ae0
[   15.190273] FS:  00007f1f0816e600(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
[   15.190568] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   15.190797] CR2: 0000000020000080 CR3: 000000000f740000 CR4: 0000000000750ee0
[   15.191058] PKRU: 55555554
[   15.191434] ------------[ cut here ]------------
[   15.191608] WARNING: CPU: 1 PID: 737 at drivers/iommu/iommufd/main.c:258 iommufd_fops_release+0x2a3/0x300
[   15.191959] Modules linked in:
[   15.192079] CPU: 1 PID: 737 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   15.192395] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   15.192804] RIP: 0010:iommufd_fops_release+0x2a3/0x300
[   15.192998] Code: 45 d0 65 48 2b 04 25 28 00 00 00 75 54 48 81 c4 88 00 00 00 31 c0 5b 41 5c 41 5d 41 5e 41 5f 5d c3 cc cc cc cc e8 ad 4f 0a fe <0f> 0b eb a6 e8 74 23 67 fe e9 f6 fe ff ff 48 89 85 50 ff ff ff e8
[   15.193660] RSP: 0018:ffff888014667c00 EFLAGS: 00010293
[   15.193855] RAX: 0000000000000000 RBX: ffff88801248a408 RCX: 0000000000000000
[   15.194114] RDX: ffff8880170d4a00 RSI: ffffffff835563e3 RDI: ffffffff86702b48
[   15.194374] RBP: ffff888014667cb0 R08: 0000000000000000 R09: fffffbfff0eb2644
[   15.194651] R10: ffffffff87593227 R11: ffff8880111da000 R12: 0000000000000000
[   15.194913] R13: ffff88801359ee18 R14: ffff888014667c48 R15: ffffffff83556140
[   15.195174] FS:  0000000000000000(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
[   15.195466] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   15.195679] CR2: 0000000020000080 CR3: 000000000687e000 CR4: 0000000000750ee0
[   15.195939] PKRU: 55555554
[   15.196044] Call Trace:
[   15.196139]  <TASK>
[   15.196222]  ? show_regs+0x6e/0x80
[   15.196358]  ? __warn+0xef/0x340
[   15.196486]  ? report_bug+0x25e/0x4b0
[   15.196629]  ? iommufd_fops_release+0x2a3/0x300
[   15.196803]  ? report_bug+0x2cb/0x4b0
[   15.196948]  ? handle_bug+0x46/0x90
[   15.197085]  ? exc_invalid_op+0x1d/0x50
[   15.197233]  ? asm_exc_invalid_op+0x1f/0x30
[   15.197392]  ? __pfx_iommufd_fops_release+0x10/0x10
[   15.197579]  ? iommufd_fops_release+0x2a3/0x300
[   15.197753]  ? iommufd_fops_release+0x2a3/0x300
[   15.197928]  ? __pfx_iommufd_fops_release+0x10/0x10
[   15.198113]  ? rcu_is_watching+0x19/0xc0
[   15.198266]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   15.198469]  ? __pfx_iommufd_fops_release+0x10/0x10
[   15.198661]  __fput+0x424/0xaf0
[   15.198792]  ____fput+0x1f/0x30
[   15.198924]  task_work_run+0x19d/0x2b0
[   15.199070]  ? __pfx_task_work_run+0x10/0x10
[   15.199235]  ? __sanitizer_cov_trace_const_cmp1+0x1e/0x30
[   15.199440]  ? switch_task_namespaces+0xa9/0xe0
[   15.199613]  do_exit+0xac9/0x2790
[   15.199743]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   15.199975]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   15.200160]  ? __pfx_do_exit+0x10/0x10
[   15.200304]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   15.200505]  ? security_file_ioctl+0x9d/0xd0
[   15.200672]  make_task_dead+0x182/0x3c0
[   15.200820]  rewind_stack_and_make_dead+0x17/0x20
[   15.200999] RIP: 0033:0x7f1f07e3ee5d
[   15.201133] Code: Unable to access opcode bytes at 0x7f1f07e3ee33.
[   15.201352] RSP: 002b:00007ffdcd51a0d8 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   15.201622] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f1f07e3ee5d
[   15.201874] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   15.202126] RBP: 00007ffdcd51a0f0 R08: 0000000000000800 R09: 0000000000000800
[   15.202380] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffdcd51a208
[   15.202640] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f1f081af000
[   15.202899]  </TASK>
[   15.202984] irq event stamp: 0
[   15.203098] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   15.203323] hardirqs last disabled at (0): [<ffffffff8122f2d1>] copy_process+0x1c51/0x7140
[   15.203616] softirqs last  enabled at (0): [<ffffffff8122f312>] copy_process+0x1c92/0x7140
[   15.203909] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   15.204132] ---[ end trace 0000000000000000 ]---
[   15.206813] iommufd_mock iommufd_mock21: Adding to iommu group 21
[   15.207065] iommufd_mock iommufd_mock21: Removing from iommu group 21
[   15.207317] general protection fault, probably for non-canonical address 0xdffffc0000000006: 0000 [#22] PREEMPT SMP KASAN NOPTI
[   15.207717] KASAN: null-ptr-deref in range [0x0000000000000030-0x0000000000000037]
[   15.207984] CPU: 1 PID: 738 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   15.208291] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   15.208689] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   15.208899] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   15.209543] RSP: 0018:ffff8880105e7ba8 EFLAGS: 00010206
[   15.209732] RAX: dffffc0000000000 RBX: ffff88800fc32000 RCX: 0000000000000000
[   15.209988] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   15.210246] RBP: ffff8880105e7bc0 R08: 0000000000000001 R09: ffffed100155b11b
[   15.210498] R10: ffff88800aad88df R11: 5f6466756d6d6f69 R12: 0000000000000000
[   15.210767] R13: ffffffff85cc0180 R14: ffff88800fd72d00 R15: ffffffff87070ae0
[   15.211028] FS:  00007f39d02cc600(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
[   15.211313] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   15.211519] CR2: 0000000020000080 CR3: 000000000f740000 CR4: 0000000000750ee0
[   15.211773] PKRU: 55555554
[   15.211875] Call Trace:
[   15.211967]  <TASK>
[   15.212049]  ? show_regs+0x6e/0x80
[   15.212183]  ? die_addr+0x45/0xb0
[   15.212314]  ? exc_general_protection+0x159/0x250
[   15.212494]  ? asm_exc_general_protection+0x2b/0x30
[   15.212676]  ? sysfs_remove_link_from_group+0x21/0x90
[   15.212864]  ? sysfs_remove_link_from_group+0x37/0x90
[   15.213050]  ? sysfs_remove_link_from_group+0x21/0x90
[   15.213237]  iommu_device_unlink+0x85/0xd0
[   15.213391]  iommu_deinit_device+0x11f/0x4c0
[   15.213554]  __iommu_group_remove_device+0x26b/0x300
[   15.213740]  iommu_group_remove_device+0x8a/0xb0
[   15.213913]  iommufd_test+0x1f1a/0x2d10
[   15.214059]  ? __pfx_lock_release+0x10/0x10
[   15.214216]  ? __pfx_lock_acquire+0x10/0x10
[   15.214374]  ? __pfx_iommufd_test+0x10/0x10
[   15.214531]  ? __sanitizer_cov_trace_const_cmp8+0x1c/0x30
[   15.214736]  iommufd_fops_ioctl+0x377/0x510
[   15.214900]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   15.215076]  ? trace_hardirqs_on+0x26/0x120
[   15.215235]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   15.215463]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   15.215647]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   15.215844]  ? security_file_ioctl+0x9d/0xd0
[   15.216007]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   15.216182]  __x64_sys_ioctl+0x1b9/0x230
[   15.216330]  do_syscall_64+0x3c/0x90
[   15.216465]  entry_SYSCALL_64_after_hwframe+0x6e/0xd8
[   15.216650] RIP: 0033:0x7f39d003ee5d
[   15.216784] Code: ff c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d 93 af 1b 00 f7 d8 64 89 01 48
[   15.217427] RSP: 002b:00007ffc26508f28 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   15.217697] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f39d003ee5d
[   15.217949] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   15.218202] RBP: 00007ffc26508f40 R08: 0000000000000800 R09: 0000000000000800
[   15.218454] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffc26509058
[   15.218715] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f39d030d000
[   15.218978]  </TASK>
[   15.219063] Modules linked in:
[   15.219299] ---[ end trace 0000000000000000 ]---
[   15.219567] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   15.219781] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   15.220438] RSP: 0018:ffff88802457fba8 EFLAGS: 00010206
[   15.220631] RAX: dffffc0000000000 RBX: ffff888014f9b000 RCX: 0000000000000000
[   15.220889] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   15.221144] RBP: ffff88802457fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   15.221398] R10: ffff88800aad88df R11: 0000000000000001 R12: 0000000000000000
[   15.221652] R13: ffffffff85cc0180 R14: ffff8880109b6ac0 R15: ffffffff87070ae0
[   15.221905] FS:  00007f39d02cc600(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
[   15.222190] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   15.222396] CR2: 0000000020000080 CR3: 000000000f740000 CR4: 0000000000750ee0
[   15.222661] PKRU: 55555554
[   15.223043] ------------[ cut here ]------------
[   15.223212] WARNING: CPU: 1 PID: 738 at drivers/iommu/iommufd/main.c:258 iommufd_fops_release+0x2a3/0x300
[   15.223552] Modules linked in:
[   15.223667] CPU: 1 PID: 738 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   15.223974] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   15.224371] RIP: 0010:iommufd_fops_release+0x2a3/0x300
[   15.224560] Code: 45 d0 65 48 2b 04 25 28 00 00 00 75 54 48 81 c4 88 00 00 00 31 c0 5b 41 5c 41 5d 41 5e 41 5f 5d c3 cc cc cc cc e8 ad 4f 0a fe <0f> 0b eb a6 e8 74 23 67 fe e9 f6 fe ff ff 48 89 85 50 ff ff ff e8
[   15.225201] RSP: 0018:ffff8880105e7c00 EFLAGS: 00010293
[   15.225390] RAX: 0000000000000000 RBX: ffff88801248a708 RCX: 0000000000000000
[   15.225644] RDX: ffff88801734a500 RSI: ffffffff835563e3 RDI: ffffffff86702b48
[   15.225897] RBP: ffff8880105e7cb0 R08: 0000000000000000 R09: fffffbfff0eb2644
[   15.226149] R10: ffffffff87593227 R11: ffff888013759600 R12: 0000000000000000
[   15.226401] R13: ffff88800f8db098 R14: ffff8880105e7c48 R15: ffffffff83556140
[   15.226674] FS:  0000000000000000(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
[   15.226969] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   15.227180] CR2: 0000000020000080 CR3: 000000000687e000 CR4: 0000000000750ee0
[   15.227456] PKRU: 55555554
[   15.227558] Call Trace:
[   15.227662]  <TASK>
[   15.227745]  ? show_regs+0x6e/0x80
[   15.227878]  ? __warn+0xef/0x340
[   15.228002]  ? report_bug+0x25e/0x4b0
[   15.228143]  ? iommufd_fops_release+0x2a3/0x300
[   15.228312]  ? report_bug+0x2cb/0x4b0
[   15.228454]  ? handle_bug+0x46/0x90
[   15.228587]  ? exc_invalid_op+0x1d/0x50
[   15.228731]  ? asm_exc_invalid_op+0x1f/0x30
[   15.228886]  ? __pfx_iommufd_fops_release+0x10/0x10
[   15.229069]  ? iommufd_fops_release+0x2a3/0x300
[   15.229238]  ? iommufd_fops_release+0x2a3/0x300
[   15.229408]  ? __pfx_iommufd_fops_release+0x10/0x10
[   15.229588]  ? rcu_is_watching+0x19/0xc0
[   15.229737]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   15.229935]  ? __pfx_iommufd_fops_release+0x10/0x10
[   15.230114]  __fput+0x424/0xaf0
[   15.230239]  ____fput+0x1f/0x30
[   15.230362]  task_work_run+0x19d/0x2b0
[   15.230504]  ? __pfx_task_work_run+0x10/0x10
[   15.230670]  ? __sanitizer_cov_trace_const_cmp1+0x1e/0x30
[   15.230873]  ? switch_task_namespaces+0xa9/0xe0
[   15.231047]  do_exit+0xac9/0x2790
[   15.231175]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   15.231405]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   15.231589]  ? __pfx_do_exit+0x10/0x10
[   15.231730]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   15.231927]  ? security_file_ioctl+0x9d/0xd0
[   15.232089]  make_task_dead+0x182/0x3c0
[   15.232234]  rewind_stack_and_make_dead+0x17/0x20
[   15.232410] RIP: 0033:0x7f39d003ee5d
[   15.232543] Code: Unable to access opcode bytes at 0x7f39d003ee33.
[   15.232761] RSP: 002b:00007ffc26508f28 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   15.233030] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f39d003ee5d
[   15.233286] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   15.233540] RBP: 00007ffc26508f40 R08: 0000000000000800 R09: 0000000000000800
[   15.233814] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffc26509058
[   15.234068] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f39d030d000
[   15.234325]  </TASK>
[   15.234409] irq event stamp: 0
[   15.234523] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   15.234755] hardirqs last disabled at (0): [<ffffffff8122f2d1>] copy_process+0x1c51/0x7140
[   15.235064] softirqs last  enabled at (0): [<ffffffff8122f312>] copy_process+0x1c92/0x7140
[   15.235356] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   15.235580] ---[ end trace 0000000000000000 ]---
[   15.238351] iommufd_mock iommufd_mock22: Adding to iommu group 22
[   15.238617] iommufd_mock iommufd_mock22: Removing from iommu group 22
[   15.238873] general protection fault, probably for non-canonical address 0xdffffc0000000006: 0000 [#23] PREEMPT SMP KASAN NOPTI
[   15.239277] KASAN: null-ptr-deref in range [0x0000000000000030-0x0000000000000037]
[   15.239547] CPU: 1 PID: 739 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   15.239857] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   15.240257] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   15.240468] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   15.241117] RSP: 0018:ffff888012d2fba8 EFLAGS: 00010206
[   15.241308] RAX: dffffc0000000000 RBX: ffff88800fc34000 RCX: 0000000000000000
[   15.241563] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   15.241818] RBP: ffff888012d2fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   15.242073] R10: ffff88800aad88df R11: 5f6466756d6d6f69 R12: 0000000000000000
[   15.242327] R13: ffffffff85cc0180 R14: ffff888010165320 R15: ffffffff87070ae0
[   15.242583] FS:  00007f3326593600(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
[   15.242874] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   15.243082] CR2: 0000000020000080 CR3: 000000000f740000 CR4: 0000000000750ee0
[   15.243337] PKRU: 55555554
[   15.243440] Call Trace:
[   15.243533]  <TASK>
[   15.243615]  ? show_regs+0x6e/0x80
[   15.243750]  ? die_addr+0x45/0xb0
[   15.243881]  ? exc_general_protection+0x159/0x250
[   15.244063]  ? asm_exc_general_protection+0x2b/0x30
[   15.244248]  ? sysfs_remove_link_from_group+0x21/0x90
[   15.244436]  ? sysfs_remove_link_from_group+0x37/0x90
[   15.244624]  ? sysfs_remove_link_from_group+0x21/0x90
[   15.244814]  iommu_device_unlink+0x85/0xd0
[   15.244991]  iommu_deinit_device+0x11f/0x4c0
[   15.245155]  __iommu_group_remove_device+0x26b/0x300
[   15.245342]  iommu_group_remove_device+0x8a/0xb0
[   15.245516]  iommufd_test+0x1f1a/0x2d10
[   15.245662]  ? __pfx_lock_release+0x10/0x10
[   15.245819]  ? __pfx_lock_acquire+0x10/0x10
[   15.245979]  ? __pfx_iommufd_test+0x10/0x10
[   15.246136]  ? __sanitizer_cov_trace_const_cmp8+0x1c/0x30
[   15.246338]  iommufd_fops_ioctl+0x377/0x510
[   15.246497]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   15.246673]  ? trace_hardirqs_on+0x26/0x120
[   15.246838]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   15.247068]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   15.247253]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   15.247452]  ? security_file_ioctl+0x9d/0xd0
[   15.247616]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   15.247793]  __x64_sys_ioctl+0x1b9/0x230
[   15.247941]  do_syscall_64+0x3c/0x90
[   15.248077]  entry_SYSCALL_64_after_hwframe+0x6e/0xd8
[   15.248263] RIP: 0033:0x7f332623ee5d
[   15.248398] Code: ff c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d 93 af 1b 00 f7 d8 64 89 01 48
[   15.249046] RSP: 002b:00007ffd54722d58 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   15.249322] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f332623ee5d
[   15.249577] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   15.249832] RBP: 00007ffd54722d70 R08: 0000000000000800 R09: 0000000000000800
[   15.250087] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffd54722e88
[   15.250342] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f33265d4000
[   15.250601]  </TASK>
[   15.250686] Modules linked in:
[   15.250890] ---[ end trace 0000000000000000 ]---
[   15.251059] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   15.251269] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   15.251917] RSP: 0018:ffff88802457fba8 EFLAGS: 00010206
[   15.252107] RAX: dffffc0000000000 RBX: ffff888014f9b000 RCX: 0000000000000000
[   15.252361] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   15.252615] RBP: ffff88802457fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   15.252869] R10: ffff88800aad88df R11: 0000000000000001 R12: 0000000000000000
[   15.253123] R13: ffffffff85cc0180 R14: ffff8880109b6ac0 R15: ffffffff87070ae0
[   15.253377] FS:  00007f3326593600(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
[   15.253664] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   15.253871] CR2: 0000000020000080 CR3: 000000000f740000 CR4: 0000000000750ee0
[   15.254126] PKRU: 55555554
[   15.254480] ------------[ cut here ]------------
[   15.254659] WARNING: CPU: 1 PID: 739 at drivers/iommu/iommufd/main.c:258 iommufd_fops_release+0x2a3/0x300
[   15.255005] Modules linked in:
[   15.255121] CPU: 1 PID: 739 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   15.255430] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   15.255831] RIP: 0010:iommufd_fops_release+0x2a3/0x300
[   15.256021] Code: 45 d0 65 48 2b 04 25 28 00 00 00 75 54 48 81 c4 88 00 00 00 31 c0 5b 41 5c 41 5d 41 5e 41 5f 5d c3 cc cc cc cc e8 ad 4f 0a fe <0f> 0b eb a6 e8 74 23 67 fe e9 f6 fe ff ff 48 89 85 50 ff ff ff e8
[   15.256669] RSP: 0018:ffff888012d2fc00 EFLAGS: 00010293
[   15.256860] RAX: 0000000000000000 RBX: ffff88801248a308 RCX: 0000000000000000
[   15.257114] RDX: ffff888010562500 RSI: ffffffff835563e3 RDI: ffffffff86702b48
[   15.257368] RBP: ffff888012d2fcb0 R08: 0000000000000000 R09: fffffbfff0eb2644
[   15.257622] R10: ffffffff87593227 R11: ffff888010ff1200 R12: 0000000000000000
[   15.257877] R13: ffff88800f8da198 R14: ffff888012d2fc48 R15: ffffffff83556140
[   15.258131] FS:  0000000000000000(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
[   15.258418] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   15.258638] CR2: 0000000020000080 CR3: 000000000687e000 CR4: 0000000000750ee0
[   15.258915] PKRU: 55555554
[   15.259019] Call Trace:
[   15.259112]  <TASK>
[   15.259194]  ? show_regs+0x6e/0x80
[   15.259326]  ? __warn+0xef/0x340
[   15.259451]  ? report_bug+0x25e/0x4b0
[   15.259592]  ? iommufd_fops_release+0x2a3/0x300
[   15.259762]  ? report_bug+0x2cb/0x4b0
[   15.259904]  ? handle_bug+0x46/0x90
[   15.260038]  ? exc_invalid_op+0x1d/0x50
[   15.260183]  ? asm_exc_invalid_op+0x1f/0x30
[   15.260338]  ? __pfx_iommufd_fops_release+0x10/0x10
[   15.260522]  ? iommufd_fops_release+0x2a3/0x300
[   15.260691]  ? iommufd_fops_release+0x2a3/0x300
[   15.260863]  ? __pfx_iommufd_fops_release+0x10/0x10
[   15.261043]  ? rcu_is_watching+0x19/0xc0
[   15.261193]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   15.261392]  ? __pfx_iommufd_fops_release+0x10/0x10
[   15.261573]  __fput+0x424/0xaf0
[   15.261700]  ____fput+0x1f/0x30
[   15.261822]  task_work_run+0x19d/0x2b0
[   15.261966]  ? __pfx_task_work_run+0x10/0x10
[   15.262126]  ? __sanitizer_cov_trace_const_cmp1+0x1e/0x30
[   15.262324]  ? switch_task_namespaces+0xa9/0xe0
[   15.262496]  do_exit+0xac9/0x2790
[   15.262636]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   15.262867]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   15.263050]  ? __pfx_do_exit+0x10/0x10
[   15.263192]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   15.263391]  ? security_file_ioctl+0x9d/0xd0
[   15.263554]  make_task_dead+0x182/0x3c0
[   15.263701]  rewind_stack_and_make_dead+0x17/0x20
[   15.263877] RIP: 0033:0x7f332623ee5d
[   15.264012] Code: Unable to access opcode bytes at 0x7f332623ee33.
[   15.264232] RSP: 002b:00007ffd54722d58 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   15.264503] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f332623ee5d
[   15.264757] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   15.265012] RBP: 00007ffd54722d70 R08: 0000000000000800 R09: 0000000000000800
[   15.265268] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffd54722e88
[   15.265523] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f33265d4000
[   15.265783]  </TASK>
[   15.265869] irq event stamp: 0
[   15.265983] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   15.266209] hardirqs last disabled at (0): [<ffffffff8122f2d1>] copy_process+0x1c51/0x7140
[   15.266503] softirqs last  enabled at (0): [<ffffffff8122f312>] copy_process+0x1c92/0x7140
[   15.266805] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   15.267031] ---[ end trace 0000000000000000 ]---
[   15.269524] iommufd_mock iommufd_mock23: Adding to iommu group 23
[   15.269769] iommufd_mock iommufd_mock23: Removing from iommu group 23
[   15.270018] general protection fault, probably for non-canonical address 0xdffffc0000000006: 0000 [#24] PREEMPT SMP KASAN NOPTI
[   15.270421] KASAN: null-ptr-deref in range [0x0000000000000030-0x0000000000000037]
[   15.270691] CPU: 1 PID: 740 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   15.271007] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   15.271407] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   15.271617] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   15.272264] RSP: 0018:ffff888011e8fba8 EFLAGS: 00010206
[   15.272455] RAX: dffffc0000000000 RBX: ffff88800fc31000 RCX: 0000000000000000
[   15.272709] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   15.272963] RBP: ffff888011e8fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   15.273217] R10: ffff88800aad88df R11: 5f6466756d6d6f69 R12: 0000000000000000
[   15.273472] R13: ffffffff85cc0180 R14: ffff88800b9449e0 R15: ffffffff87070ae0
[   15.273726] FS:  00007f17fc93e600(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
[   15.274013] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   15.274220] CR2: 0000000020000080 CR3: 0000000018940000 CR4: 0000000000750ee0
[   15.274475] PKRU: 55555554
[   15.274578] Call Trace:
[   15.274671]  <TASK>
[   15.274755]  ? show_regs+0x6e/0x80
[   15.274916]  ? die_addr+0x45/0xb0
[   15.275050]  ? exc_general_protection+0x159/0x250
[   15.275233]  ? asm_exc_general_protection+0x2b/0x30
[   15.275420]  ? sysfs_remove_link_from_group+0x21/0x90
[   15.275611]  ? sysfs_remove_link_from_group+0x37/0x90
[   15.275801]  ? sysfs_remove_link_from_group+0x21/0x90
[   15.275992]  iommu_device_unlink+0x85/0xd0
[   15.276148]  iommu_deinit_device+0x11f/0x4c0
[   15.276314]  __iommu_group_remove_device+0x26b/0x300
[   15.276504]  iommu_group_remove_device+0x8a/0xb0
[   15.276680]  iommufd_test+0x1f1a/0x2d10
[   15.276827]  ? __pfx_lock_release+0x10/0x10
[   15.276987]  ? __pfx_lock_acquire+0x10/0x10
[   15.277149]  ? __pfx_iommufd_test+0x10/0x10
[   15.277308]  ? __sanitizer_cov_trace_const_cmp8+0x1c/0x30
[   15.277512]  iommufd_fops_ioctl+0x377/0x510
[   15.277673]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   15.277851]  ? trace_hardirqs_on+0x26/0x120
[   15.278013]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   15.278246]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   15.278433]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   15.278634]  ? security_file_ioctl+0x9d/0xd0
[   15.278814]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   15.278993]  __x64_sys_ioctl+0x1b9/0x230
[   15.279143]  do_syscall_64+0x3c/0x90
[   15.279285]  entry_SYSCALL_64_after_hwframe+0x6e/0xd8
[   15.279474] RIP: 0033:0x7f17fc63ee5d
[   15.279610] Code: ff c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d 93 af 1b 00 f7 d8 64 89 01 48
[   15.280264] RSP: 002b:00007fffc7edf618 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   15.280539] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f17fc63ee5d
[   15.280796] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   15.281054] RBP: 00007fffc7edf630 R08: 0000000000000800 R09: 0000000000000800
[   15.281311] R10: 0000000000000000 R11: 0000000000000213 R12: 00007fffc7edf748
[   15.281568] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f17fc97f000
[   15.281830]  </TASK>
[   15.281916] Modules linked in:
[   15.282054] ---[ end trace 0000000000000000 ]---
[   15.282225] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   15.282436] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   15.283100] RSP: 0018:ffff88802457fba8 EFLAGS: 00010206
[   15.283292] RAX: dffffc0000000000 RBX: ffff888014f9b000 RCX: 0000000000000000
[   15.283549] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   15.283805] RBP: ffff88802457fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   15.284063] R10: ffff88800aad88df R11: 0000000000000001 R12: 0000000000000000
[   15.284321] R13: ffffffff85cc0180 R14: ffff8880109b6ac0 R15: ffffffff87070ae0
[   15.284578] FS:  00007f17fc93e600(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
[   15.284867] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   15.285077] CR2: 0000000020000080 CR3: 0000000018940000 CR4: 0000000000750ee0
[   15.285334] PKRU: 55555554
[   15.285692] ------------[ cut here ]------------
[   15.285863] WARNING: CPU: 1 PID: 740 at drivers/iommu/iommufd/main.c:258 iommufd_fops_release+0x2a3/0x300
[   15.286207] Modules linked in:
[   15.286324] CPU: 1 PID: 740 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   15.286646] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   15.287054] RIP: 0010:iommufd_fops_release+0x2a3/0x300
[   15.287247] Code: 45 d0 65 48 2b 04 25 28 00 00 00 75 54 48 81 c4 88 00 00 00 31 c0 5b 41 5c 41 5d 41 5e 41 5f 5d c3 cc cc cc cc e8 ad 4f 0a fe <0f> 0b eb a6 e8 74 23 67 fe e9 f6 fe ff ff 48 89 85 50 ff ff ff e8
[   15.287903] RSP: 0018:ffff888011e8fc00 EFLAGS: 00010293
[   15.288096] RAX: 0000000000000000 RBX: ffff88801248a108 RCX: 0000000000000000
[   15.288353] RDX: ffff88801475a500 RSI: ffffffff835563e3 RDI: ffffffff86702b48
[   15.288610] RBP: ffff888011e8fcb0 R08: 0000000000000000 R09: fffffbfff0eb2644
[   15.288867] R10: ffffffff87593227 R11: ffff888013826a00 R12: 0000000000000000
[   15.289124] R13: ffff88801967ae18 R14: ffff888011e8fc48 R15: ffffffff83556140
[   15.289381] FS:  0000000000000000(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
[   15.289671] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   15.289882] CR2: 0000000020000080 CR3: 000000000687e000 CR4: 0000000000750ee0
[   15.290140] PKRU: 55555554
[   15.290244] Call Trace:
[   15.290338]  <TASK>
[   15.290421]  ? show_regs+0x6e/0x80
[   15.290555]  ? __warn+0xef/0x340
[   15.290688]  ? report_bug+0x25e/0x4b0
[   15.290834]  ? iommufd_fops_release+0x2a3/0x300
[   15.291007]  ? report_bug+0x2cb/0x4b0
[   15.291152]  ? handle_bug+0x46/0x90
[   15.291289]  ? exc_invalid_op+0x1d/0x50
[   15.291440]  ? asm_exc_invalid_op+0x1f/0x30
[   15.291617]  ? __pfx_iommufd_fops_release+0x10/0x10
[   15.291807]  ? iommufd_fops_release+0x2a3/0x300
[   15.291995]  ? iommufd_fops_release+0x2a3/0x300
[   15.292170]  ? __pfx_iommufd_fops_release+0x10/0x10
[   15.292354]  ? rcu_is_watching+0x19/0xc0
[   15.292506]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   15.292710]  ? __pfx_iommufd_fops_release+0x10/0x10
[   15.292894]  __fput+0x424/0xaf0
[   15.293023]  ____fput+0x1f/0x30
[   15.293148]  task_work_run+0x19d/0x2b0
[   15.293294]  ? __pfx_task_work_run+0x10/0x10
[   15.293457]  ? __sanitizer_cov_trace_const_cmp1+0x1e/0x30
[   15.293659]  ? switch_task_namespaces+0xa9/0xe0
[   15.293833]  do_exit+0xac9/0x2790
[   15.293964]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   15.294196]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   15.294383]  ? __pfx_do_exit+0x10/0x10
[   15.294528]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   15.294737]  ? security_file_ioctl+0x9d/0xd0
[   15.294906]  make_task_dead+0x182/0x3c0
[   15.295054]  rewind_stack_and_make_dead+0x17/0x20
[   15.295233] RIP: 0033:0x7f17fc63ee5d
[   15.295369] Code: Unable to access opcode bytes at 0x7f17fc63ee33.
[   15.295591] RSP: 002b:00007fffc7edf618 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   15.295865] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f17fc63ee5d
[   15.296122] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   15.296378] RBP: 00007fffc7edf630 R08: 0000000000000800 R09: 0000000000000800
[   15.296635] R10: 0000000000000000 R11: 0000000000000213 R12: 00007fffc7edf748
[   15.296892] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f17fc97f000
[   15.297154]  </TASK>
[   15.297240] irq event stamp: 0
[   15.297356] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   15.297584] hardirqs last disabled at (0): [<ffffffff8122f2d1>] copy_process+0x1c51/0x7140
[   15.297882] softirqs last  enabled at (0): [<ffffffff8122f312>] copy_process+0x1c92/0x7140
[   15.298180] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   15.298408] ---[ end trace 0000000000000000 ]---
[   15.301076] iommufd_mock iommufd_mock24: Adding to iommu group 24
[   15.301321] iommufd_mock iommufd_mock24: Removing from iommu group 24
[   15.301572] general protection fault, probably for non-canonical address 0xdffffc0000000006: 0000 [#25] PREEMPT SMP KASAN NOPTI
[   15.301979] KASAN: null-ptr-deref in range [0x0000000000000030-0x0000000000000037]
[   15.302250] CPU: 1 PID: 741 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   15.302562] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   15.302975] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   15.303188] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   15.303840] RSP: 0018:ffff8880138a7ba8 EFLAGS: 00010206
[   15.304033] RAX: dffffc0000000000 RBX: ffff8880233ad000 RCX: 0000000000000000
[   15.304289] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   15.304545] RBP: ffff8880138a7bc0 R08: 0000000000000001 R09: ffffed100155b11b
[   15.304800] R10: ffff88800aad88df R11: 5f6466756d6d6f69 R12: 0000000000000000
[   15.305056] R13: ffffffff85cc0180 R14: ffff88800b944640 R15: ffffffff87070ae0
[   15.305313] FS:  00007fcc4d26f600(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
[   15.305602] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   15.305811] CR2: 0000000020000080 CR3: 0000000018940000 CR4: 0000000000750ee0
[   15.306069] PKRU: 55555554
[   15.306172] Call Trace:
[   15.306265]  <TASK>
[   15.306348]  ? show_regs+0x6e/0x80
[   15.306484]  ? die_addr+0x45/0xb0
[   15.306619]  ? exc_general_protection+0x159/0x250
[   15.306806]  ? asm_exc_general_protection+0x2b/0x30
[   15.306992]  ? sysfs_remove_link_from_group+0x21/0x90
[   15.307183]  ? sysfs_remove_link_from_group+0x37/0x90
[   15.307373]  ? sysfs_remove_link_from_group+0x21/0x90
[   15.307563]  iommu_device_unlink+0x85/0xd0
[   15.307719]  iommu_deinit_device+0x11f/0x4c0
[   15.307884]  __iommu_group_remove_device+0x26b/0x300
[   15.308073]  iommu_group_remove_device+0x8a/0xb0
[   15.308250]  iommufd_test+0x1f1a/0x2d10
[   15.308393]  ? __pfx_lock_release+0x10/0x10
[   15.308550]  ? __pfx_lock_acquire+0x10/0x10
[   15.308708]  ? __pfx_iommufd_test+0x10/0x10
[   15.308865]  ? __sanitizer_cov_trace_const_cmp8+0x1c/0x30
[   15.309065]  iommufd_fops_ioctl+0x377/0x510
[   15.309223]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   15.309399]  ? trace_hardirqs_on+0x26/0x120
[   15.309558]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   15.309785]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   15.309968]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   15.310166]  ? security_file_ioctl+0x9d/0xd0
[   15.310328]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   15.310504]  __x64_sys_ioctl+0x1b9/0x230
[   15.310651]  do_syscall_64+0x3c/0x90
[   15.310791]  entry_SYSCALL_64_after_hwframe+0x6e/0xd8
[   15.310977] RIP: 0033:0x7fcc4d03ee5d
[   15.311110] Code: ff c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d 93 af 1b 00 f7 d8 64 89 01 48
[   15.311754] RSP: 002b:00007fff41e67f08 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   15.312022] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007fcc4d03ee5d
[   15.312274] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   15.312528] RBP: 00007fff41e67f20 R08: 0000000000000800 R09: 0000000000000800
[   15.312780] R10: 0000000000000000 R11: 0000000000000213 R12: 00007fff41e68038
[   15.313032] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007fcc4d2b0000
[   15.313289]  </TASK>
[   15.313373] Modules linked in:
[   15.313592] ---[ end trace 0000000000000000 ]---
[   15.313761] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   15.313968] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   15.314620] RSP: 0018:ffff88802457fba8 EFLAGS: 00010206
[   15.314811] RAX: dffffc0000000000 RBX: ffff888014f9b000 RCX: 0000000000000000
[   15.315063] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   15.315316] RBP: ffff88802457fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   15.315691] R10: ffff88800aad88df R11: 0000000000000001 R12: 0000000000000000
[   15.316090] R13: ffffffff85cc0180 R14: ffff8880109b6ac0 R15: ffffffff87070ae0
[   15.316397] FS:  00007fcc4d26f600(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
[   15.316727] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   15.316952] CR2: 0000000020000080 CR3: 0000000018940000 CR4: 0000000000750ee0
[   15.317259] PKRU: 55555554
[   15.317635] ------------[ cut here ]------------
[   15.317811] WARNING: CPU: 1 PID: 741 at drivers/iommu/iommufd/main.c:258 iommufd_fops_release+0x2a3/0x300
[   15.318196] Modules linked in:
[   15.318324] CPU: 1 PID: 741 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   15.318677] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   15.319158] RIP: 0010:iommufd_fops_release+0x2a3/0x300
[   15.319351] Code: 45 d0 65 48 2b 04 25 28 00 00 00 75 54 48 81 c4 88 00 00 00 31 c0 5b 41 5c 41 5d 41 5e 41 5f 5d c3 cc cc cc cc e8 ad 4f 0a fe <0f> 0b eb a6 e8 74 23 67 fe e9 f6 fe ff ff 48 89 85 50 ff ff ff e8
[   15.320068] RSP: 0018:ffff8880138a7c00 EFLAGS: 00010293
[   15.320268] RAX: 0000000000000000 RBX: ffff88801248ae08 RCX: 0000000000000000
[   15.320567] RDX: ffff888014758000 RSI: ffffffff835563e3 RDI: ffffffff86702b48
[   15.320826] RBP: ffff8880138a7cb0 R08: 0000000000000000 R09: fffffbfff0eb2644
[   15.321131] R10: ffffffff87593227 R11: ffff888013099a00 R12: 0000000000000000
[   15.321390] R13: ffff88801967a698 R14: ffff8880138a7c48 R15: ffffffff83556140
[   15.321649] FS:  0000000000000000(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
[   15.321988] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   15.322200] CR2: 0000000020000080 CR3: 000000000687e000 CR4: 0000000000750ee0
[   15.322481] PKRU: 55555554
[   15.322614] Call Trace:
[   15.322709]  <TASK>
[   15.322795]  ? show_regs+0x6e/0x80
[   15.322929]  ? __warn+0xef/0x340
[   15.323057]  ? report_bug+0x25e/0x4b0
[   15.323201]  ? iommufd_fops_release+0x2a3/0x300
[   15.323374]  ? report_bug+0x2cb/0x4b0
[   15.323519]  ? handle_bug+0x46/0x90
[   15.323678]  ? exc_invalid_op+0x1d/0x50
[   15.323849]  ? asm_exc_invalid_op+0x1f/0x30
[   15.324008]  ? __pfx_iommufd_fops_release+0x10/0x10
[   15.324195]  ? iommufd_fops_release+0x2a3/0x300
[   15.324393]  ? iommufd_fops_release+0x2a3/0x300
[   15.324592]  ? __pfx_iommufd_fops_release+0x10/0x10
[   15.324776]  ? rcu_is_watching+0x19/0xc0
[   15.324928]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   15.325154]  ? __pfx_iommufd_fops_release+0x10/0x10
[   15.325364]  __fput+0x424/0xaf0
[   15.325492]  ____fput+0x1f/0x30
[   15.325618]  task_work_run+0x19d/0x2b0
[   15.325786]  ? __pfx_task_work_run+0x10/0x10
[   15.325981]  ? __sanitizer_cov_trace_const_cmp1+0x1e/0x30
[   15.326183]  ? switch_task_namespaces+0xa9/0xe0
[   15.326364]  do_exit+0xac9/0x2790
[   15.326509]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   15.326783]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   15.326970]  ? __pfx_do_exit+0x10/0x10
[   15.327114]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   15.327317]  ? security_file_ioctl+0x9d/0xd0
[   15.327483]  make_task_dead+0x182/0x3c0
[   15.327653]  rewind_stack_and_make_dead+0x17/0x20
[   15.327858] RIP: 0033:0x7fcc4d03ee5d
[   15.327995] Code: Unable to access opcode bytes at 0x7fcc4d03ee33.
[   15.328226] RSP: 002b:00007fff41e67f08 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   15.328531] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007fcc4d03ee5d
[   15.328790] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   15.329094] RBP: 00007fff41e67f20 R08: 0000000000000800 R09: 0000000000000800
[   15.329353] R10: 0000000000000000 R11: 0000000000000213 R12: 00007fff41e68038
[   15.329634] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007fcc4d2b0000
[   15.329924]  </TASK>
[   15.330011] irq event stamp: 0
[   15.330127] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   15.330405] hardirqs last disabled at (0): [<ffffffff8122f2d1>] copy_process+0x1c51/0x7140
[   15.330714] softirqs last  enabled at (0): [<ffffffff8122f312>] copy_process+0x1c92/0x7140
[   15.331016] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   15.331246] ---[ end trace 0000000000000000 ]---
[   15.333973] iommufd_mock iommufd_mock25: Adding to iommu group 25
[   15.334227] iommufd_mock iommufd_mock25: Removing from iommu group 25
[   15.334486] general protection fault, probably for non-canonical address 0xdffffc0000000006: 0000 [#26] PREEMPT SMP KASAN NOPTI
[   15.334970] KASAN: null-ptr-deref in range [0x0000000000000030-0x0000000000000037]
[   15.335251] CPU: 1 PID: 742 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   15.335619] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   15.336037] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   15.336303] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   15.337022] RSP: 0018:ffff88801104fba8 EFLAGS: 00010206
[   15.337221] RAX: dffffc0000000000 RBX: ffff8880233ac000 RCX: 0000000000000000
[   15.337497] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   15.337793] RBP: ffff88801104fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   15.338060] R10: ffff88800aad88df R11: 5f6466756d6d6f69 R12: 0000000000000000
[   15.338368] R13: ffffffff85cc0180 R14: ffff88800b944860 R15: ffffffff87070ae0
[   15.338633] FS:  00007f6aba68d600(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
[   15.338938] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   15.339179] CR2: 0000000020000080 CR3: 0000000018940000 CR4: 0000000000750ee0
[   15.339445] PKRU: 55555554
[   15.339552] Call Trace:
[   15.339656]  <TASK>
[   15.339780]  ? show_regs+0x6e/0x80
[   15.339919]  ? die_addr+0x45/0xb0
[   15.340057]  ? exc_general_protection+0x159/0x250
[   15.340246]  ? asm_exc_general_protection+0x2b/0x30
[   15.340437]  ? sysfs_remove_link_from_group+0x21/0x90
[   15.340652]  ? sysfs_remove_link_from_group+0x37/0x90
[   15.340873]  ? sysfs_remove_link_from_group+0x21/0x90
[   15.341068]  iommu_device_unlink+0x85/0xd0
[   15.341230]  iommu_deinit_device+0x11f/0x4c0
[   15.341446]  __iommu_group_remove_device+0x26b/0x300
[   15.341641]  iommu_group_remove_device+0x8a/0xb0
[   15.341822]  iommufd_test+0x1f1a/0x2d10
[   15.341983]  ? __pfx_lock_release+0x10/0x10
[   15.342183]  ? __pfx_lock_acquire+0x10/0x10
[   15.342350]  ? __pfx_iommufd_test+0x10/0x10
[   15.342514]  ? __sanitizer_cov_trace_const_cmp8+0x1c/0x30
[   15.342743]  iommufd_fops_ioctl+0x377/0x510
[   15.342955]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   15.343139]  ? trace_hardirqs_on+0x26/0x120
[   15.343305]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   15.343589]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   15.343780]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   15.343989]  ? security_file_ioctl+0x9d/0xd0
[   15.344206]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   15.344390]  __x64_sys_ioctl+0x1b9/0x230
[   15.344544]  do_syscall_64+0x3c/0x90
[   15.344686]  entry_SYSCALL_64_after_hwframe+0x6e/0xd8
[   15.344925] RIP: 0033:0x7f6aba43ee5d
[   15.345068] Code: ff c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d 93 af 1b 00 f7 d8 64 89 01 48
[   15.345786] RSP: 002b:00007ffc33fce398 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   15.346068] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f6aba43ee5d
[   15.346374] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   15.346638] RBP: 00007ffc33fce3b0 R08: 0000000000000800 R09: 0000000000000800
[   15.346907] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffc33fce4c8
[   15.347218] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f6aba6ce000
[   15.347489]  </TASK>
[   15.347578] Modules linked in:
[   15.347811] ---[ end trace 0000000000000000 ]---
[   15.347988] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   15.348207] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   15.348881] RSP: 0018:ffff88802457fba8 EFLAGS: 00010206
[   15.349079] RAX: dffffc0000000000 RBX: ffff888014f9b000 RCX: 0000000000000000
[   15.349343] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   15.349613] RBP: ffff88802457fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   15.349878] R10: ffff88800aad88df R11: 0000000000000001 R12: 0000000000000000
[   15.350186] R13: ffffffff85cc0180 R14: ffff8880109b6ac0 R15: ffffffff87070ae0
[   15.350450] FS:  00007f6aba68d600(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
[   15.350828] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   15.351043] CR2: 0000000020000080 CR3: 0000000018940000 CR4: 0000000000750ee0
[   15.351306] PKRU: 55555554
[   15.351679] ------------[ cut here ]------------
[   15.351876] WARNING: CPU: 1 PID: 742 at drivers/iommu/iommufd/main.c:258 iommufd_fops_release+0x2a3/0x300
[   15.352258] Modules linked in:
[   15.352379] CPU: 1 PID: 742 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   15.352750] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   15.353166] RIP: 0010:iommufd_fops_release+0x2a3/0x300
[   15.353410] Code: 45 d0 65 48 2b 04 25 28 00 00 00 75 54 48 81 c4 88 00 00 00 31 c0 5b 41 5c 41 5d 41 5e 41 5f 5d c3 cc cc cc cc e8 ad 4f 0a fe <0f> 0b eb a6 e8 74 23 67 fe e9 f6 fe ff ff 48 89 85 50 ff ff ff e8
[   15.354133] RSP: 0018:ffff88801104fc00 EFLAGS: 00010293
[   15.354332] RAX: 0000000000000000 RBX: ffff88801248a608 RCX: 0000000000000000
[   15.354628] RDX: ffff888012c34a00 RSI: ffffffff835563e3 RDI: ffffffff86702b48
[   15.354920] RBP: ffff88801104fcb0 R08: 0000000000000000 R09: fffffbfff0eb2644
[   15.355185] R10: ffffffff87593227 R11: ffff888023174e00 R12: 0000000000000000
[   15.355450] R13: ffff888013a22b98 R14: ffff88801104fc48 R15: ffffffff83556140
[   15.355763] FS:  0000000000000000(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
[   15.356062] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   15.356297] CR2: 0000000020000080 CR3: 000000000687e000 CR4: 0000000000750ee0
[   15.356588] PKRU: 55555554
[   15.356694] Call Trace:
[   15.356791]  <TASK>
[   15.356876]  ? show_regs+0x6e/0x80
[   15.357058]  ? __warn+0xef/0x340
[   15.357189]  ? report_bug+0x25e/0x4b0
[   15.357335]  ? iommufd_fops_release+0x2a3/0x300
[   15.357512]  ? report_bug+0x2cb/0x4b0
[   15.357680]  ? handle_bug+0x46/0x90
[   15.357833]  ? exc_invalid_op+0x1d/0x50
[   15.357984]  ? asm_exc_invalid_op+0x1f/0x30
[   15.358146]  ? __pfx_iommufd_fops_release+0x10/0x10
[   15.358345]  ? iommufd_fops_release+0x2a3/0x300
[   15.358556]  ? iommufd_fops_release+0x2a3/0x300
[   15.358768]  ? __pfx_iommufd_fops_release+0x10/0x10
[   15.358954]  ? rcu_is_watching+0x19/0xc0
[   15.359108]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   15.359313]  ? __pfx_iommufd_fops_release+0x10/0x10
[   15.359551]  __fput+0x424/0xaf0
[   15.359683]  ____fput+0x1f/0x30
[   15.359809]  task_work_run+0x19d/0x2b0
[   15.359957]  ? __pfx_task_work_run+0x10/0x10
[   15.360135]  ? __sanitizer_cov_trace_const_cmp1+0x1e/0x30
[   15.360372]  ? switch_task_namespaces+0xa9/0xe0
[   15.360548]  do_exit+0xac9/0x2790
[   15.360680]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   15.360956]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   15.361144]  ? __pfx_do_exit+0x10/0x10
[   15.361291]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   15.361510]  ? security_file_ioctl+0x9d/0xd0
[   15.361700]  make_task_dead+0x182/0x3c0
[   15.361851]  rewind_stack_and_make_dead+0x17/0x20
[   15.362032] RIP: 0033:0x7f6aba43ee5d
[   15.362191] Code: Unable to access opcode bytes at 0x7f6aba43ee33.
[   15.362446] RSP: 002b:00007ffc33fce398 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   15.362733] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f6aba43ee5d
[   15.362996] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   15.363301] RBP: 00007ffc33fce3b0 R08: 0000000000000800 R09: 0000000000000800
[   15.363563] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffc33fce4c8
[   15.363824] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f6aba6ce000
[   15.364129]  </TASK>
[   15.364216] irq event stamp: 0
[   15.364334] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   15.364566] hardirqs last disabled at (0): [<ffffffff8122f2d1>] copy_process+0x1c51/0x7140
[   15.364918] softirqs last  enabled at (0): [<ffffffff8122f312>] copy_process+0x1c92/0x7140
[   15.365222] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   15.365500] ---[ end trace 0000000000000000 ]---
[   15.368220] iommufd_mock iommufd_mock26: Adding to iommu group 26
[   15.368479] iommufd_mock iommufd_mock26: Removing from iommu group 26
[   15.368742] general protection fault, probably for non-canonical address 0xdffffc0000000006: 0000 [#27] PREEMPT SMP KASAN NOPTI
[   15.369222] KASAN: null-ptr-deref in range [0x0000000000000030-0x0000000000000037]
[   15.369505] CPU: 1 PID: 743 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   15.369878] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   15.370298] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   15.370543] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   15.371252] RSP: 0018:ffff888012d2fba8 EFLAGS: 00010206
[   15.371468] RAX: dffffc0000000000 RBX: ffff8880233aa000 RCX: 0000000000000000
[   15.371771] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   15.372038] RBP: ffff888012d2fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   15.372350] R10: ffff88800aad88df R11: 5f6466756d6d6f69 R12: 0000000000000000
[   15.372618] R13: ffffffff85cc0180 R14: ffff88800b1a5580 R15: ffffffff87070ae0
[   15.372905] FS:  00007f3e7c80b600(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
[   15.373232] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   15.373455] CR2: 0000000020000080 CR3: 00000000202da000 CR4: 0000000000750ee0
[   15.373768] PKRU: 55555554
[   15.373875] Call Trace:
[   15.373976]  <TASK>
[   15.374063]  ? show_regs+0x6e/0x80
[   15.374226]  ? die_addr+0x45/0xb0
[   15.374405]  ? exc_general_protection+0x159/0x250
[   15.374596]  ? asm_exc_general_protection+0x2b/0x30
[   15.374793]  ? sysfs_remove_link_from_group+0x21/0x90
[   15.375033]  ? sysfs_remove_link_from_group+0x37/0x90
[   15.375230]  ? sysfs_remove_link_from_group+0x21/0x90
[   15.375428]  iommu_device_unlink+0x85/0xd0
[   15.375604]  iommu_deinit_device+0x11f/0x4c0
[   15.375818]  __iommu_group_remove_device+0x26b/0x300
[   15.376015]  iommu_group_remove_device+0x8a/0xb0
[   15.376198]  iommufd_test+0x1f1a/0x2d10
[   15.376402]  ? __pfx_lock_release+0x10/0x10
[   15.376568]  ? __pfx_lock_acquire+0x10/0x10
[   15.376735]  ? __pfx_iommufd_test+0x10/0x10
[   15.376900]  ? __sanitizer_cov_trace_const_cmp8+0x1c/0x30
[   15.377170]  iommufd_fops_ioctl+0x377/0x510
[   15.377337]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   15.377522]  ? trace_hardirqs_on+0x26/0x120
[   15.377703]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   15.377992]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   15.378185]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   15.378394]  ? security_file_ioctl+0x9d/0xd0
[   15.378566]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   15.378754]  __x64_sys_ioctl+0x1b9/0x230
[   15.378910]  do_syscall_64+0x3c/0x90
[   15.379052]  entry_SYSCALL_64_after_hwframe+0x6e/0xd8
[   15.379247] RIP: 0033:0x7f3e7c63ee5d
[   15.379389] Code: ff c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d 93 af 1b 00 f7 d8 64 89 01 48
[   15.380069] RSP: 002b:00007fff3ab29198 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   15.380354] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f3e7c63ee5d
[   15.380621] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   15.380888] RBP: 00007fff3ab291b0 R08: 0000000000000800 R09: 0000000000000800
[   15.381155] R10: 0000000000000000 R11: 0000000000000213 R12: 00007fff3ab292c8
[   15.381422] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f3e7c84c000
[   15.381695]  </TASK>
[   15.381783] Modules linked in:
[   15.382035] ---[ end trace 0000000000000000 ]---
[   15.382213] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   15.382432] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   15.383121] RSP: 0018:ffff88802457fba8 EFLAGS: 00010206
[   15.383321] RAX: dffffc0000000000 RBX: ffff888014f9b000 RCX: 0000000000000000
[   15.383587] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   15.383854] RBP: ffff88802457fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   15.384121] R10: ffff88800aad88df R11: 0000000000000001 R12: 0000000000000000
[   15.384387] R13: ffffffff85cc0180 R14: ffff8880109b6ac0 R15: ffffffff87070ae0
[   15.384655] FS:  00007f3e7c80b600(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
[   15.384955] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   15.385173] CR2: 0000000020000080 CR3: 00000000202da000 CR4: 0000000000750ee0
[   15.385441] PKRU: 55555554
[   15.385823] ------------[ cut here ]------------
[   15.386001] WARNING: CPU: 1 PID: 743 at drivers/iommu/iommufd/main.c:258 iommufd_fops_release+0x2a3/0x300
[   15.386359] Modules linked in:
[   15.386481] CPU: 1 PID: 743 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   15.386818] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   15.387231] RIP: 0010:iommufd_fops_release+0x2a3/0x300
[   15.387426] Code: 45 d0 65 48 2b 04 25 28 00 00 00 75 54 48 81 c4 88 00 00 00 31 c0 5b 41 5c 41 5d 41 5e 41 5f 5d c3 cc cc cc cc e8 ad 4f 0a fe <0f> 0b eb a6 e8 74 23 67 fe e9 f6 fe ff ff 48 89 85 50 ff ff ff e8
[   15.388094] RSP: 0018:ffff888012d2fc00 EFLAGS: 00010293
[   15.388289] RAX: 0000000000000000 RBX: ffff88801248a008 RCX: 0000000000000000
[   15.388551] RDX: ffff8880170d2500 RSI: ffffffff835563e3 RDI: ffffffff86702b48
[   15.388813] RBP: ffff888012d2fcb0 R08: 0000000000000000 R09: fffffbfff0eb2644
[   15.389075] R10: ffffffff87593227 R11: ffff888020926c00 R12: 0000000000000000
[   15.389337] R13: ffff888013a22198 R14: ffff888012d2fc48 R15: ffffffff83556140
[   15.389600] FS:  0000000000000000(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
[   15.389896] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   15.390110] CR2: 0000000020000080 CR3: 000000000687e000 CR4: 0000000000750ee0
[   15.390373] PKRU: 55555554
[   15.390478] Call Trace:
[   15.390583]  <TASK>
[   15.390668]  ? show_regs+0x6e/0x80
[   15.390805]  ? __warn+0xef/0x340
[   15.390935]  ? report_bug+0x25e/0x4b0
[   15.391080]  ? iommufd_fops_release+0x2a3/0x300
[   15.391256]  ? report_bug+0x2cb/0x4b0
[   15.391402]  ? handle_bug+0x46/0x90
[   15.391540]  ? exc_invalid_op+0x1d/0x50
[   15.391691]  ? asm_exc_invalid_op+0x1f/0x30
[   15.391850]  ? __pfx_iommufd_fops_release+0x10/0x10
[   15.392038]  ? iommufd_fops_release+0x2a3/0x300
[   15.392211]  ? iommufd_fops_release+0x2a3/0x300
[   15.392386]  ? __pfx_iommufd_fops_release+0x10/0x10
[   15.392571]  ? rcu_is_watching+0x19/0xc0
[   15.392724]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   15.392927]  ? __pfx_iommufd_fops_release+0x10/0x10
[   15.393112]  __fput+0x424/0xaf0
[   15.393241]  ____fput+0x1f/0x30
[   15.393366]  task_work_run+0x19d/0x2b0
[   15.393515]  ? __pfx_task_work_run+0x10/0x10
[   15.393680]  ? __sanitizer_cov_trace_const_cmp1+0x1e/0x30
[   15.393882]  ? switch_task_namespaces+0xa9/0xe0
[   15.394057]  do_exit+0xac9/0x2790
[   15.394188]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   15.394422]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   15.394617]  ? __pfx_do_exit+0x10/0x10
[   15.394764]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   15.394967]  ? security_file_ioctl+0x9d/0xd0
[   15.395133]  make_task_dead+0x182/0x3c0
[   15.395283]  rewind_stack_and_make_dead+0x17/0x20
[   15.395462] RIP: 0033:0x7f3e7c63ee5d
[   15.395600] Code: Unable to access opcode bytes at 0x7f3e7c63ee33.
[   15.395825] RSP: 002b:00007fff3ab29198 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   15.396101] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f3e7c63ee5d
[   15.396360] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   15.396620] RBP: 00007fff3ab291b0 R08: 0000000000000800 R09: 0000000000000800
[   15.396880] R10: 0000000000000000 R11: 0000000000000213 R12: 00007fff3ab292c8
[   15.397140] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f3e7c84c000
[   15.397406]  </TASK>
[   15.397493] irq event stamp: 0
[   15.397611] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   15.397846] hardirqs last disabled at (0): [<ffffffff8122f2d1>] copy_process+0x1c51/0x7140
[   15.398143] softirqs last  enabled at (0): [<ffffffff8122f312>] copy_process+0x1c92/0x7140
[   15.398437] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   15.398668] ---[ end trace 0000000000000000 ]---
[   15.401026] iommufd_mock iommufd_mock27: Adding to iommu group 27
[   15.401276] iommufd_mock iommufd_mock27: Removing from iommu group 27
[   15.401528] general protection fault, probably for non-canonical address 0xdffffc0000000006: 0000 [#28] PREEMPT SMP KASAN NOPTI
[   15.401934] KASAN: null-ptr-deref in range [0x0000000000000030-0x0000000000000037]
[   15.402206] CPU: 0 PID: 744 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   15.402516] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   15.402938] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   15.403152] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   15.403805] RSP: 0018:ffff888011e8fba8 EFLAGS: 00010206
[   15.403997] RAX: dffffc0000000000 RBX: ffff888014f98000 RCX: 0000000000000000
[   15.404254] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   15.404509] RBP: ffff888011e8fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   15.404765] R10: ffff88800aad88df R11: 5f6466756d6d6f69 R12: 0000000000000000
[   15.405022] R13: ffffffff85cc0180 R14: ffff88801032e5c0 R15: ffffffff87070ae0
[   15.405279] FS:  00007f66bec92600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   15.405569] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   15.405777] CR2: 0000000020000080 CR3: 0000000019672000 CR4: 0000000000750ef0
[   15.406035] PKRU: 55555554
[   15.406138] Call Trace:
[   15.406232]  <TASK>
[   15.406315]  ? show_regs+0x6e/0x80
[   15.406451]  ? die_addr+0x45/0xb0
[   15.406584]  ? exc_general_protection+0x159/0x250
[   15.406772]  ? asm_exc_general_protection+0x2b/0x30
[   15.406971]  ? sysfs_remove_link_from_group+0x21/0x90
[   15.407161]  ? sysfs_remove_link_from_group+0x37/0x90
[   15.407379]  ? sysfs_remove_link_from_group+0x21/0x90
[   15.407611]  iommu_device_unlink+0x85/0xd0
[   15.407768]  iommu_deinit_device+0x11f/0x4c0
[   15.407934]  __iommu_group_remove_device+0x26b/0x300
[   15.408124]  iommu_group_remove_device+0x8a/0xb0
[   15.408301]  iommufd_test+0x1f1a/0x2d10
[   15.408447]  ? __pfx_lock_release+0x10/0x10
[   15.408607]  ? __pfx_lock_acquire+0x10/0x10
[   15.408768]  ? __pfx_iommufd_test+0x10/0x10
[   15.408928]  ? __sanitizer_cov_trace_const_cmp8+0x1c/0x30
[   15.409131]  iommufd_fops_ioctl+0x377/0x510
[   15.409293]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   15.409471]  ? trace_hardirqs_on+0x26/0x120
[   15.409633]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   15.409866]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   15.410052]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   15.410254]  ? security_file_ioctl+0x9d/0xd0
[   15.410420]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   15.410599]  __x64_sys_ioctl+0x1b9/0x230
[   15.410752]  do_syscall_64+0x3c/0x90
[   15.410905]  entry_SYSCALL_64_after_hwframe+0x6e/0xd8
[   15.411094] RIP: 0033:0x7f66bea3ee5d
[   15.411231] Code: ff c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d 93 af 1b 00 f7 d8 64 89 01 48
[   15.411888] RSP: 002b:00007ffe36eb7f98 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   15.412164] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f66bea3ee5d
[   15.412422] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   15.412679] RBP: 00007ffe36eb7fb0 R08: 0000000000000800 R09: 0000000000000800
[   15.412937] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffe36eb80c8
[   15.413195] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f66becd3000
[   15.413458]  </TASK>
[   15.413544] Modules linked in:
[   15.413718] ---[ end trace 0000000000000000 ]---
[   15.413890] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   15.414102] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   15.414971] RSP: 0018:ffff88802457fba8 EFLAGS: 00010206
[   15.415174] RAX: dffffc0000000000 RBX: ffff888014f9b000 RCX: 0000000000000000
[   15.415433] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   15.415692] RBP: ffff88802457fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   15.415951] R10: ffff88800aad88df R11: 0000000000000001 R12: 0000000000000000
[   15.416210] R13: ffffffff85cc0180 R14: ffff8880109b6ac0 R15: ffffffff87070ae0
[   15.416469] FS:  00007f66bec92600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   15.416761] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   15.416973] CR2: 0000000020000080 CR3: 0000000019672000 CR4: 0000000000750ef0
[   15.417233] PKRU: 55555554
[   15.417732] ------------[ cut here ]------------
[   15.417916] WARNING: CPU: 1 PID: 744 at drivers/iommu/iommufd/main.c:258 iommufd_fops_release+0x2a3/0x300
[   15.418269] Modules linked in:
[   15.418388] CPU: 1 PID: 744 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   15.418741] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   15.419147] RIP: 0010:iommufd_fops_release+0x2a3/0x300
[   15.419338] Code: 45 d0 65 48 2b 04 25 28 00 00 00 75 54 48 81 c4 88 00 00 00 31 c0 5b 41 5c 41 5d 41 5e 41 5f 5d c3 cc cc cc cc e8 ad 4f 0a fe <0f> 0b eb a6 e8 74 23 67 fe e9 f6 fe ff ff 48 89 85 50 ff ff ff e8
[   15.419986] RSP: 0018:ffff888011e8fc00 EFLAGS: 00010293
[   15.420177] RAX: 0000000000000000 RBX: ffff888024705708 RCX: 0000000000000000
[   15.420432] RDX: ffff888010e3ca00 RSI: ffffffff835563e3 RDI: ffffffff86702b48
[   15.420687] RBP: ffff888011e8fcb0 R08: 0000000000000000 R09: fffffbfff0eb2644
[   15.420942] R10: ffffffff87593227 R11: ffff8880135a5c00 R12: 0000000000000000
[   15.421197] R13: ffff888012639098 R14: ffff888011e8fc48 R15: ffffffff83556140
[   15.421451] FS:  0000000000000000(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
[   15.421737] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   15.421946] CR2: 00007fa2819d1000 CR3: 000000000687e000 CR4: 0000000000750ee0
[   15.422202] PKRU: 55555554
[   15.422304] Call Trace:
[   15.422397]  <TASK>
[   15.422480]  ? show_regs+0x6e/0x80
[   15.422632]  ? __warn+0xef/0x340
[   15.422760]  ? report_bug+0x25e/0x4b0
[   15.422900]  ? iommufd_fops_release+0x2a3/0x300
[   15.423070]  ? report_bug+0x2cb/0x4b0
[   15.423213]  ? handle_bug+0x46/0x90
[   15.423346]  ? exc_invalid_op+0x1d/0x50
[   15.423491]  ? asm_exc_invalid_op+0x1f/0x30
[   15.423647]  ? __pfx_iommufd_fops_release+0x10/0x10
[   15.423831]  ? iommufd_fops_release+0x2a3/0x300
[   15.424001]  ? iommufd_fops_release+0x2a3/0x300
[   15.424172]  ? __pfx_iommufd_fops_release+0x10/0x10
[   15.424353]  ? rcu_is_watching+0x19/0xc0
[   15.424502]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   15.424702]  ? __pfx_iommufd_fops_release+0x10/0x10
[   15.424883]  __fput+0x424/0xaf0
[   15.425009]  ____fput+0x1f/0x30
[   15.425133]  task_work_run+0x19d/0x2b0
[   15.425277]  ? __pfx_task_work_run+0x10/0x10
[   15.425437]  ? __sanitizer_cov_trace_const_cmp1+0x1e/0x30
[   15.425635]  ? switch_task_namespaces+0xa9/0xe0
[   15.425807]  do_exit+0xac9/0x2790
[   15.425935]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   15.426163]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   15.426345]  ? __pfx_do_exit+0x10/0x10
[   15.426487]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   15.426715]  ? security_file_ioctl+0x9d/0xd0
[   15.426881]  make_task_dead+0x182/0x3c0
[   15.427027]  rewind_stack_and_make_dead+0x17/0x20
[   15.427204] RIP: 0033:0x7f66bea3ee5d
[   15.427341] Code: Unable to access opcode bytes at 0x7f66bea3ee33.
[   15.427561] RSP: 002b:00007ffe36eb7f98 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   15.427832] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f66bea3ee5d
[   15.428086] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   15.428341] RBP: 00007ffe36eb7fb0 R08: 0000000000000800 R09: 0000000000000800
[   15.428595] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffe36eb80c8
[   15.428850] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f66becd3000
[   15.429109]  </TASK>
[   15.429194] irq event stamp: 0
[   15.429309] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   15.429534] hardirqs last disabled at (0): [<ffffffff8122f2d1>] copy_process+0x1c51/0x7140
[   15.429830] softirqs last  enabled at (0): [<ffffffff8122f312>] copy_process+0x1c92/0x7140
[   15.430125] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   15.430350] ---[ end trace 0000000000000000 ]---
[   15.432907] iommufd_mock iommufd_mock28: Adding to iommu group 28
[   15.433161] iommufd_mock iommufd_mock28: Removing from iommu group 28
[   15.433414] general protection fault, probably for non-canonical address 0xdffffc0000000006: 0000 [#29] PREEMPT SMP KASAN NOPTI
[   15.433824] KASAN: null-ptr-deref in range [0x0000000000000030-0x0000000000000037]
[   15.434122] CPU: 0 PID: 745 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   15.434439] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   15.434878] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   15.435094] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   15.435749] RSP: 0018:ffff888012d2fba8 EFLAGS: 00010206
[   15.435941] RAX: dffffc0000000000 RBX: ffff88800ee82000 RCX: 0000000000000000
[   15.436199] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   15.436460] RBP: ffff888012d2fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   15.436713] R10: ffff88800aad88df R11: 5f6466756d6d6f69 R12: 0000000000000000
[   15.436965] R13: ffffffff85cc0180 R14: ffff88801032e5e0 R15: ffffffff87070ae0
[   15.437218] FS:  00007f91a854a600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   15.437503] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   15.437710] CR2: 0000000020000080 CR3: 00000000202da000 CR4: 0000000000750ef0
[   15.437964] PKRU: 55555554
[   15.438066] Call Trace:
[   15.438159]  <TASK>
[   15.438240]  ? show_regs+0x6e/0x80
[   15.438374]  ? die_addr+0x45/0xb0
[   15.438504]  ? exc_general_protection+0x159/0x250
[   15.438698]  ? asm_exc_general_protection+0x2b/0x30
[   15.438891]  ? sysfs_remove_link_from_group+0x21/0x90
[   15.439079]  ? sysfs_remove_link_from_group+0x37/0x90
[   15.439266]  ? sysfs_remove_link_from_group+0x21/0x90
[   15.439453]  iommu_device_unlink+0x85/0xd0
[   15.439607]  iommu_deinit_device+0x11f/0x4c0
[   15.439770]  __iommu_group_remove_device+0x26b/0x300
[   15.439957]  iommu_group_remove_device+0x8a/0xb0
[   15.440130]  iommufd_test+0x1f1a/0x2d10
[   15.440275]  ? __pfx_lock_release+0x10/0x10
[   15.440432]  ? __pfx_lock_acquire+0x10/0x10
[   15.440590]  ? __pfx_iommufd_test+0x10/0x10
[   15.440746]  ? __sanitizer_cov_trace_const_cmp8+0x1c/0x30
[   15.440946]  iommufd_fops_ioctl+0x377/0x510
[   15.441104]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   15.441279]  ? trace_hardirqs_on+0x26/0x120
[   15.441438]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   15.441666]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   15.441849]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   15.442047]  ? security_file_ioctl+0x9d/0xd0
[   15.442210]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   15.442386]  __x64_sys_ioctl+0x1b9/0x230
[   15.442533]  do_syscall_64+0x3c/0x90
[   15.442681]  entry_SYSCALL_64_after_hwframe+0x6e/0xd8
[   15.442875] RIP: 0033:0x7f91a823ee5d
[   15.443009] Code: ff c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d 93 af 1b 00 f7 d8 64 89 01 48
[   15.443652] RSP: 002b:00007fffcdf30b28 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   15.443921] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f91a823ee5d
[   15.444174] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   15.444426] RBP: 00007fffcdf30b40 R08: 0000000000000800 R09: 0000000000000800
[   15.444678] R10: 0000000000000000 R11: 0000000000000213 R12: 00007fffcdf30c58
[   15.444930] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f91a858b000
[   15.445189]  </TASK>
[   15.445273] Modules linked in:
[   15.445436] ---[ end trace 0000000000000000 ]---
[   15.445605] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   15.445813] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   15.446457] RSP: 0018:ffff88802457fba8 EFLAGS: 00010206
[   15.446677] RAX: dffffc0000000000 RBX: ffff888014f9b000 RCX: 0000000000000000
[   15.446940] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   15.447196] RBP: ffff88802457fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   15.447449] R10: ffff88800aad88df R11: 0000000000000001 R12: 0000000000000000
[   15.447701] R13: ffffffff85cc0180 R14: ffff8880109b6ac0 R15: ffffffff87070ae0
[   15.447954] FS:  00007f91a854a600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   15.448239] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   15.448446] CR2: 0000000020000080 CR3: 00000000202da000 CR4: 0000000000750ef0
[   15.448699] PKRU: 55555554
[   15.449062] ------------[ cut here ]------------
[   15.449234] WARNING: CPU: 0 PID: 745 at drivers/iommu/iommufd/main.c:258 iommufd_fops_release+0x2a3/0x300
[   15.449582] Modules linked in:
[   15.449717] CPU: 0 PID: 745 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   15.450031] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   15.450435] RIP: 0010:iommufd_fops_release+0x2a3/0x300
[   15.450708] Code: 45 d0 65 48 2b 04 25 28 00 00 00 75 54 48 81 c4 88 00 00 00 31 c0 5b 41 5c 41 5d 41 5e 41 5f 5d c3 cc cc cc cc e8 ad 4f 0a fe <0f> 0b eb a6 e8 74 23 67 fe e9 f6 fe ff ff 48 89 85 50 ff ff ff e8
[   15.451359] RSP: 0018:ffff888012d2fc00 EFLAGS: 00010293
[   15.451549] RAX: 0000000000000000 RBX: ffff888024705308 RCX: 0000000000000000
[   15.451803] RDX: ffff88800f784a00 RSI: ffffffff835563e3 RDI: ffffffff86702b40
[   15.452056] RBP: ffff888012d2fcb0 R08: 0000000000000000 R09: fffffbfff0eb2644
[   15.452309] R10: ffffffff87593227 R11: ffff88800fe0da00 R12: 0000000000000000
[   15.452562] R13: ffff8880114e3098 R14: ffff888012d2fc48 R15: ffffffff83556140
[   15.452815] FS:  0000000000000000(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   15.453100] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   15.453307] CR2: 0000000020000080 CR3: 000000000687e000 CR4: 0000000000750ef0
[   15.453561] PKRU: 55555554
[   15.453662] Call Trace:
[   15.453754]  <TASK>
[   15.453836]  ? show_regs+0x6e/0x80
[   15.453967]  ? __warn+0xef/0x340
[   15.454092]  ? report_bug+0x25e/0x4b0
[   15.454232]  ? iommufd_fops_release+0x2a3/0x300
[   15.454401]  ? report_bug+0x2cb/0x4b0
[   15.454542]  ? handle_bug+0x46/0x90
[   15.454685]  ? exc_invalid_op+0x1d/0x50
[   15.454833]  ? asm_exc_invalid_op+0x1f/0x30
[   15.454988]  ? __pfx_iommufd_fops_release+0x10/0x10
[   15.455171]  ? iommufd_fops_release+0x2a3/0x300
[   15.455340]  ? iommufd_fops_release+0x2a3/0x300
[   15.455511]  ? __pfx_iommufd_fops_release+0x10/0x10
[   15.455691]  ? rcu_is_watching+0x19/0xc0
[   15.455840]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   15.456038]  ? __pfx_iommufd_fops_release+0x10/0x10
[   15.456218]  __fput+0x424/0xaf0
[   15.456344]  ____fput+0x1f/0x30
[   15.456466]  task_work_run+0x19d/0x2b0
[   15.456609]  ? __pfx_task_work_run+0x10/0x10
[   15.456768]  ? __sanitizer_cov_trace_const_cmp1+0x1e/0x30
[   15.456965]  ? switch_task_namespaces+0xa9/0xe0
[   15.457135]  do_exit+0xac9/0x2790
[   15.457263]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   15.457489]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   15.457672]  ? __pfx_do_exit+0x10/0x10
[   15.457813]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   15.458010]  ? security_file_ioctl+0x9d/0xd0
[   15.458172]  make_task_dead+0x182/0x3c0
[   15.458318]  rewind_stack_and_make_dead+0x17/0x20
[   15.458493] RIP: 0033:0x7f91a823ee5d
[   15.458636] Code: Unable to access opcode bytes at 0x7f91a823ee33.
[   15.458858] RSP: 002b:00007fffcdf30b28 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   15.459127] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f91a823ee5d
[   15.459380] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   15.459632] RBP: 00007fffcdf30b40 R08: 0000000000000800 R09: 0000000000000800
[   15.459884] R10: 0000000000000000 R11: 0000000000000213 R12: 00007fffcdf30c58
[   15.460138] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f91a858b000
[   15.460397]  </TASK>
[   15.460481] irq event stamp: 0
[   15.460595] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   15.460820] hardirqs last disabled at (0): [<ffffffff8122f2d1>] copy_process+0x1c51/0x7140
[   15.461113] softirqs last  enabled at (0): [<ffffffff8122f312>] copy_process+0x1c92/0x7140
[   15.461407] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   15.461630] ---[ end trace 0000000000000000 ]---
[   15.464050] iommufd_mock iommufd_mock29: Adding to iommu group 29
[   15.464301] iommufd_mock iommufd_mock29: Removing from iommu group 29
[   15.464553] general protection fault, probably for non-canonical address 0xdffffc0000000006: 0000 [#30] PREEMPT SMP KASAN NOPTI
[   15.464960] KASAN: null-ptr-deref in range [0x0000000000000030-0x0000000000000037]
[   15.465233] CPU: 0 PID: 746 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   15.465546] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   15.465950] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   15.466163] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   15.466851] RSP: 0018:ffff88800f87fba8 EFLAGS: 00010206
[   15.467048] RAX: dffffc0000000000 RBX: ffff88800ee85000 RCX: 0000000000000000
[   15.467306] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   15.467563] RBP: ffff88800f87fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   15.467820] R10: ffff88800aad88df R11: 5f6466756d6d6f69 R12: 0000000000000000
[   15.468078] R13: ffffffff85cc0180 R14: ffff88800bd3dfe0 R15: ffffffff87070ae0
[   15.468336] FS:  00007ff89d407600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   15.468625] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   15.468837] CR2: 0000000020000080 CR3: 00000000202da000 CR4: 0000000000750ef0
[   15.469095] PKRU: 55555554
[   15.469199] Call Trace:
[   15.469293]  <TASK>
[   15.469376]  ? show_regs+0x6e/0x80
[   15.469512]  ? die_addr+0x45/0xb0
[   15.469645]  ? exc_general_protection+0x159/0x250
[   15.469829]  ? asm_exc_general_protection+0x2b/0x30
[   15.470016]  ? sysfs_remove_link_from_group+0x21/0x90
[   15.470207]  ? sysfs_remove_link_from_group+0x37/0x90
[   15.470396]  ? sysfs_remove_link_from_group+0x21/0x90
[   15.470587]  iommu_device_unlink+0x85/0xd0
[   15.470744]  iommu_deinit_device+0x11f/0x4c0
[   15.470920]  __iommu_group_remove_device+0x26b/0x300
[   15.471109]  iommu_group_remove_device+0x8a/0xb0
[   15.471285]  iommufd_test+0x1f1a/0x2d10
[   15.471431]  ? __pfx_lock_release+0x10/0x10
[   15.471591]  ? __pfx_lock_acquire+0x10/0x10
[   15.471752]  ? __pfx_iommufd_test+0x10/0x10
[   15.471911]  ? __sanitizer_cov_trace_const_cmp8+0x1c/0x30
[   15.472114]  iommufd_fops_ioctl+0x377/0x510
[   15.472275]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   15.472453]  ? trace_hardirqs_on+0x26/0x120
[   15.472618]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   15.472850]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   15.473036]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   15.473238]  ? security_file_ioctl+0x9d/0xd0
[   15.473403]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   15.473582]  __x64_sys_ioctl+0x1b9/0x230
[   15.473732]  do_syscall_64+0x3c/0x90
[   15.473869]  entry_SYSCALL_64_after_hwframe+0x6e/0xd8
[   15.474057] RIP: 0033:0x7ff89d03ee5d
[   15.474193] Code: ff c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d 93 af 1b 00 f7 d8 64 89 01 48
[   15.474856] RSP: 002b:00007ffd951d0c88 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   15.475130] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007ff89d03ee5d
[   15.475387] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   15.475645] RBP: 00007ffd951d0ca0 R08: 0000000000000800 R09: 0000000000000800
[   15.475902] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffd951d0db8
[   15.476159] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007ff89d448000
[   15.476422]  </TASK>
[   15.476508] Modules linked in:
[   15.476728] ---[ end trace 0000000000000000 ]---
[   15.476899] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   15.477110] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   15.477764] RSP: 0018:ffff88802457fba8 EFLAGS: 00010206
[   15.477957] RAX: dffffc0000000000 RBX: ffff888014f9b000 RCX: 0000000000000000
[   15.478215] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   15.478471] RBP: ffff88802457fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   15.478736] R10: ffff88800aad88df R11: 0000000000000001 R12: 0000000000000000
[   15.479005] R13: ffffffff85cc0180 R14: ffff8880109b6ac0 R15: ffffffff87070ae0
[   15.479262] FS:  00007ff89d407600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   15.479553] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   15.479763] CR2: 0000000020000080 CR3: 00000000202da000 CR4: 0000000000750ef0
[   15.480022] PKRU: 55555554
[   15.480377] ------------[ cut here ]------------
[   15.480548] WARNING: CPU: 0 PID: 746 at drivers/iommu/iommufd/main.c:258 iommufd_fops_release+0x2a3/0x300
[   15.480894] Modules linked in:
[   15.481011] CPU: 0 PID: 746 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   15.481323] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   15.481729] RIP: 0010:iommufd_fops_release+0x2a3/0x300
[   15.481921] Code: 45 d0 65 48 2b 04 25 28 00 00 00 75 54 48 81 c4 88 00 00 00 31 c0 5b 41 5c 41 5d 41 5e 41 5f 5d c3 cc cc cc cc e8 ad 4f 0a fe <0f> 0b eb a6 e8 74 23 67 fe e9 f6 fe ff ff 48 89 85 50 ff ff ff e8
[   15.482585] RSP: 0018:ffff88800f87fc00 EFLAGS: 00010293
[   15.482784] RAX: 0000000000000000 RBX: ffff888024705108 RCX: 0000000000000000
[   15.483042] RDX: ffff88800f780000 RSI: ffffffff835563e3 RDI: ffffffff86702b40
[   15.483301] RBP: ffff88800f87fcb0 R08: 0000000000000000 R09: fffffbfff0eb2644
[   15.483559] R10: ffffffff87593227 R11: ffff88800fc03800 R12: 0000000000000000
[   15.483816] R13: ffff8880132ca918 R14: ffff88800f87fc48 R15: ffffffff83556140
[   15.484073] FS:  0000000000000000(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   15.484364] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   15.484576] CR2: 0000000020000080 CR3: 000000000687e000 CR4: 0000000000750ef0
[   15.484834] PKRU: 55555554
[   15.484937] Call Trace:
[   15.485031]  <TASK>
[   15.485115]  ? show_regs+0x6e/0x80
[   15.485249]  ? __warn+0xef/0x340
[   15.485376]  ? report_bug+0x25e/0x4b0
[   15.485518]  ? iommufd_fops_release+0x2a3/0x300
[   15.485690]  ? report_bug+0x2cb/0x4b0
[   15.485834]  ? handle_bug+0x46/0x90
[   15.485969]  ? exc_invalid_op+0x1d/0x50
[   15.486116]  ? asm_exc_invalid_op+0x1f/0x30
[   15.486273]  ? __pfx_iommufd_fops_release+0x10/0x10
[   15.486458]  ? iommufd_fops_release+0x2a3/0x300
[   15.486643]  ? iommufd_fops_release+0x2a3/0x300
[   15.486826]  ? __pfx_iommufd_fops_release+0x10/0x10
[   15.487009]  ? rcu_is_watching+0x19/0xc0
[   15.487161]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   15.487362]  ? __pfx_iommufd_fops_release+0x10/0x10
[   15.487545]  __fput+0x424/0xaf0
[   15.487673]  ____fput+0x1f/0x30
[   15.487797]  task_work_run+0x19d/0x2b0
[   15.487942]  ? __pfx_task_work_run+0x10/0x10
[   15.488105]  ? __sanitizer_cov_trace_const_cmp1+0x1e/0x30
[   15.488305]  ? switch_task_namespaces+0xa9/0xe0
[   15.488479]  do_exit+0xac9/0x2790
[   15.488608]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   15.488840]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   15.489025]  ? __pfx_do_exit+0x10/0x10
[   15.489168]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   15.489369]  ? security_file_ioctl+0x9d/0xd0
[   15.489535]  make_task_dead+0x182/0x3c0
[   15.489683]  rewind_stack_and_make_dead+0x17/0x20
[   15.489861] RIP: 0033:0x7ff89d03ee5d
[   15.489997] Code: Unable to access opcode bytes at 0x7ff89d03ee33.
[   15.490221] RSP: 002b:00007ffd951d0c88 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   15.490494] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007ff89d03ee5d
[   15.490767] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   15.491025] RBP: 00007ffd951d0ca0 R08: 0000000000000800 R09: 0000000000000800
[   15.491284] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffd951d0db8
[   15.491541] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007ff89d448000
[   15.491804]  </TASK>
[   15.491890] irq event stamp: 0
[   15.492006] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   15.492235] hardirqs last disabled at (0): [<ffffffff8122f2d1>] copy_process+0x1c51/0x7140
[   15.492534] softirqs last  enabled at (0): [<ffffffff8122f312>] copy_process+0x1c92/0x7140
[   15.492833] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   15.493062] ---[ end trace 0000000000000000 ]---
[   15.495541] iommufd_mock iommufd_mock30: Adding to iommu group 30
[   15.495791] iommufd_mock iommufd_mock30: Removing from iommu group 30
[   15.496042] general protection fault, probably for non-canonical address 0xdffffc0000000006: 0000 [#31] PREEMPT SMP KASAN NOPTI
[   15.496451] KASAN: null-ptr-deref in range [0x0000000000000030-0x0000000000000037]
[   15.496723] CPU: 0 PID: 747 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   15.497036] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   15.497442] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   15.497655] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   15.498311] RSP: 0018:ffff88800ff97ba8 EFLAGS: 00010206
[   15.498505] RAX: dffffc0000000000 RBX: ffff88800ee57000 RCX: 0000000000000000
[   15.498771] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   15.499028] RBP: ffff88800ff97bc0 R08: 0000000000000001 R09: ffffed100155b11b
[   15.499286] R10: ffff88800aad88df R11: 5f6466756d6d6f69 R12: 0000000000000000
[   15.499544] R13: ffffffff85cc0180 R14: ffff8880109b6ce0 R15: ffffffff87070ae0
[   15.499803] FS:  00007fbc61fea600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   15.500094] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   15.500305] CR2: 0000000020000080 CR3: 00000000202da000 CR4: 0000000000750ef0
[   15.500563] PKRU: 55555554
[   15.500667] Call Trace:
[   15.500761]  <TASK>
[   15.500844]  ? show_regs+0x6e/0x80
[   15.500981]  ? die_addr+0x45/0xb0
[   15.501114]  ? exc_general_protection+0x159/0x250
[   15.501298]  ? asm_exc_general_protection+0x2b/0x30
[   15.501485]  ? sysfs_remove_link_from_group+0x21/0x90
[   15.501676]  ? sysfs_remove_link_from_group+0x37/0x90
[   15.501866]  ? sysfs_remove_link_from_group+0x21/0x90
[   15.502056]  iommu_device_unlink+0x85/0xd0
[   15.502213]  iommu_deinit_device+0x11f/0x4c0
[   15.502379]  __iommu_group_remove_device+0x26b/0x300
[   15.502569]  iommu_group_remove_device+0x8a/0xb0
[   15.502771]  iommufd_test+0x1f1a/0x2d10
[   15.502921]  ? __pfx_lock_release+0x10/0x10
[   15.503082]  ? __pfx_lock_acquire+0x10/0x10
[   15.503243]  ? __pfx_iommufd_test+0x10/0x10
[   15.503403]  ? __sanitizer_cov_trace_const_cmp8+0x1c/0x30
[   15.503608]  iommufd_fops_ioctl+0x377/0x510
[   15.503770]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   15.503948]  ? trace_hardirqs_on+0x26/0x120
[   15.504110]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   15.504344]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   15.504531]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   15.504732]  ? security_file_ioctl+0x9d/0xd0
[   15.504898]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   15.505077]  __x64_sys_ioctl+0x1b9/0x230
[   15.505227]  do_syscall_64+0x3c/0x90
[   15.505368]  entry_SYSCALL_64_after_hwframe+0x6e/0xd8
[   15.505557] RIP: 0033:0x7fbc61c3ee5d
[   15.505694] Code: ff c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d 93 af 1b 00 f7 d8 64 89 01 48
[   15.506350] RSP: 002b:00007ffee38ffbf8 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   15.506626] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007fbc61c3ee5d
[   15.506889] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   15.507147] RBP: 00007ffee38ffc10 R08: 0000000000000800 R09: 0000000000000800
[   15.507404] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffee38ffd28
[   15.507662] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007fbc6202b000
[   15.507925]  </TASK>
[   15.508011] Modules linked in:
[   15.508168] ---[ end trace 0000000000000000 ]---
[   15.508340] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   15.508552] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   15.509209] RSP: 0018:ffff88802457fba8 EFLAGS: 00010206
[   15.509401] RAX: dffffc0000000000 RBX: ffff888014f9b000 RCX: 0000000000000000
[   15.509659] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   15.509917] RBP: ffff88802457fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   15.510175] R10: ffff88800aad88df R11: 0000000000000001 R12: 0000000000000000
[   15.510432] R13: ffffffff85cc0180 R14: ffff8880109b6ac0 R15: ffffffff87070ae0
[   15.510697] FS:  00007fbc61fea600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   15.510990] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   15.511197] CR2: 0000000020000080 CR3: 00000000202da000 CR4: 0000000000750ef0
[   15.511450] PKRU: 55555554
[   15.511805] ------------[ cut here ]------------
[   15.511977] WARNING: CPU: 0 PID: 747 at drivers/iommu/iommufd/main.c:258 iommufd_fops_release+0x2a3/0x300
[   15.512324] Modules linked in:
[   15.512441] CPU: 0 PID: 747 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   15.512756] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   15.513161] RIP: 0010:iommufd_fops_release+0x2a3/0x300
[   15.513353] Code: 45 d0 65 48 2b 04 25 28 00 00 00 75 54 48 81 c4 88 00 00 00 31 c0 5b 41 5c 41 5d 41 5e 41 5f 5d c3 cc cc cc cc e8 ad 4f 0a fe <0f> 0b eb a6 e8 74 23 67 fe e9 f6 fe ff ff 48 89 85 50 ff ff ff e8
[   15.514009] RSP: 0018:ffff88800ff97c00 EFLAGS: 00010293
[   15.514203] RAX: 0000000000000000 RBX: ffff888024705e08 RCX: 0000000000000000
[   15.514460] RDX: ffff88800f782500 RSI: ffffffff835563e3 RDI: ffffffff86702b40
[   15.514731] RBP: ffff88800ff97cb0 R08: 0000000000000000 R09: fffffbfff0eb2644
[   15.514989] R10: ffffffff87593227 R11: ffff8880196f2200 R12: 0000000000000000
[   15.515242] R13: ffff888013517d18 R14: ffff88800ff97c48 R15: ffffffff83556140
[   15.515496] FS:  0000000000000000(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   15.515781] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   15.515989] CR2: 0000000020000080 CR3: 000000000687e000 CR4: 0000000000750ef0
[   15.516243] PKRU: 55555554
[   15.516347] Call Trace:
[   15.516440]  <TASK>
[   15.516522]  ? show_regs+0x6e/0x80
[   15.516654]  ? __warn+0xef/0x340
[   15.516779]  ? report_bug+0x25e/0x4b0
[   15.516920]  ? iommufd_fops_release+0x2a3/0x300
[   15.517090]  ? report_bug+0x2cb/0x4b0
[   15.517232]  ? handle_bug+0x46/0x90
[   15.517365]  ? exc_invalid_op+0x1d/0x50
[   15.517510]  ? asm_exc_invalid_op+0x1f/0x30
[   15.517665]  ? __pfx_iommufd_fops_release+0x10/0x10
[   15.517848]  ? iommufd_fops_release+0x2a3/0x300
[   15.518018]  ? iommufd_fops_release+0x2a3/0x300
[   15.518189]  ? __pfx_iommufd_fops_release+0x10/0x10
[   15.518369]  ? rcu_is_watching+0x19/0xc0
[   15.518518]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   15.518734]  ? __pfx_iommufd_fops_release+0x10/0x10
[   15.518917]  __fput+0x424/0xaf0
[   15.519043]  ____fput+0x1f/0x30
[   15.519166]  task_work_run+0x19d/0x2b0
[   15.519309]  ? __pfx_task_work_run+0x10/0x10
[   15.519469]  ? __sanitizer_cov_trace_const_cmp1+0x1e/0x30
[   15.519666]  ? switch_task_namespaces+0xa9/0xe0
[   15.519837]  do_exit+0xac9/0x2790
[   15.519964]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   15.520192]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   15.520374]  ? __pfx_do_exit+0x10/0x10
[   15.520515]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   15.520712]  ? security_file_ioctl+0x9d/0xd0
[   15.520875]  make_task_dead+0x182/0x3c0
[   15.521021]  rewind_stack_and_make_dead+0x17/0x20
[   15.521196] RIP: 0033:0x7fbc61c3ee5d
[   15.521330] Code: Unable to access opcode bytes at 0x7fbc61c3ee33.
[   15.521550] RSP: 002b:00007ffee38ffbf8 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   15.521819] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007fbc61c3ee5d
[   15.522072] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   15.522325] RBP: 00007ffee38ffc10 R08: 0000000000000800 R09: 0000000000000800
[   15.522584] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffee38ffd28
[   15.522842] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007fbc6202b000
[   15.523101]  </TASK>
[   15.523186] irq event stamp: 0
[   15.523300] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   15.523524] hardirqs last disabled at (0): [<ffffffff8122f2d1>] copy_process+0x1c51/0x7140
[   15.523817] softirqs last  enabled at (0): [<ffffffff8122f312>] copy_process+0x1c92/0x7140
[   15.524110] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   15.524334] ---[ end trace 0000000000000000 ]---
[   15.526835] iommufd_mock iommufd_mock31: Adding to iommu group 31
[   15.527085] iommufd_mock iommufd_mock31: Removing from iommu group 31
[   15.527337] general protection fault, probably for non-canonical address 0xdffffc0000000006: 0000 [#32] PREEMPT SMP KASAN NOPTI
[   15.527747] KASAN: null-ptr-deref in range [0x0000000000000030-0x0000000000000037]
[   15.528020] CPU: 0 PID: 748 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   15.528334] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   15.528743] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   15.528956] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   15.529612] RSP: 0018:ffff88801204fba8 EFLAGS: 00010206
[   15.529806] RAX: dffffc0000000000 RBX: ffff88800f37b000 RCX: 0000000000000000
[   15.530063] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   15.530320] RBP: ffff88801204fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   15.530579] R10: ffff88800aad88df R11: 5f6466756d6d6f69 R12: 0000000000000000
[   15.530861] R13: ffffffff85cc0180 R14: ffff88800fd72720 R15: ffffffff87070ae0
[   15.531119] FS:  00007f002f943600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   15.531411] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   15.531622] CR2: 0000000020000080 CR3: 00000000202da000 CR4: 0000000000750ef0
[   15.531883] PKRU: 55555554
[   15.531988] Call Trace:
[   15.532082]  <TASK>
[   15.532167]  ? show_regs+0x6e/0x80
[   15.532304]  ? die_addr+0x45/0xb0
[   15.532438]  ? exc_general_protection+0x159/0x250
[   15.532626]  ? asm_exc_general_protection+0x2b/0x30
[   15.532812]  ? sysfs_remove_link_from_group+0x21/0x90
[   15.533003]  ? sysfs_remove_link_from_group+0x37/0x90
[   15.533194]  ? sysfs_remove_link_from_group+0x21/0x90
[   15.533384]  iommu_device_unlink+0x85/0xd0
[   15.533541]  iommu_deinit_device+0x11f/0x4c0
[   15.533707]  __iommu_group_remove_device+0x26b/0x300
[   15.533897]  iommu_group_remove_device+0x8a/0xb0
[   15.534074]  iommufd_test+0x1f1a/0x2d10
[   15.534222]  ? __pfx_lock_release+0x10/0x10
[   15.534397]  ? __pfx_lock_acquire+0x10/0x10
[   15.534559]  ? __pfx_iommufd_test+0x10/0x10
[   15.534720]  ? __sanitizer_cov_trace_const_cmp8+0x1c/0x30
[   15.534938]  iommufd_fops_ioctl+0x377/0x510
[   15.535100]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   15.535280]  ? trace_hardirqs_on+0x26/0x120
[   15.535459]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   15.535692]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   15.535880]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   15.536082]  ? security_file_ioctl+0x9d/0xd0
[   15.536248]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   15.536428]  __x64_sys_ioctl+0x1b9/0x230
[   15.536578]  do_syscall_64+0x3c/0x90
[   15.536715]  entry_SYSCALL_64_after_hwframe+0x6e/0xd8
[   15.536904] RIP: 0033:0x7f002f63ee5d
[   15.537041] Code: ff c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d 93 af 1b 00 f7 d8 64 89 01 48
[   15.537696] RSP: 002b:00007fff95875b68 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   15.537971] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f002f63ee5d
[   15.538229] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   15.538488] RBP: 00007fff95875b80 R08: 0000000000000800 R09: 0000000000000800
[   15.538749] R10: 0000000000000000 R11: 0000000000000213 R12: 00007fff95875c98
[   15.539009] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f002f984000
[   15.539272]  </TASK>
[   15.539358] Modules linked in:
[   15.539592] ---[ end trace 0000000000000000 ]---
[   15.539765] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   15.539977] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   15.540637] RSP: 0018:ffff88802457fba8 EFLAGS: 00010206
[   15.540830] RAX: dffffc0000000000 RBX: ffff888014f9b000 RCX: 0000000000000000
[   15.541089] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   15.541347] RBP: ffff88802457fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   15.541605] R10: ffff88800aad88df R11: 0000000000000001 R12: 0000000000000000
[   15.541863] R13: ffffffff85cc0180 R14: ffff8880109b6ac0 R15: ffffffff87070ae0
[   15.542120] FS:  00007f002f943600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   15.542410] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   15.542628] CR2: 0000000020000080 CR3: 00000000202da000 CR4: 0000000000750ef0
[   15.542888] PKRU: 55555554
[   15.543243] ------------[ cut here ]------------
[   15.543415] WARNING: CPU: 0 PID: 748 at drivers/iommu/iommufd/main.c:258 iommufd_fops_release+0x2a3/0x300
[   15.543760] Modules linked in:
[   15.543877] CPU: 0 PID: 748 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   15.544191] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   15.544597] RIP: 0010:iommufd_fops_release+0x2a3/0x300
[   15.544789] Code: 45 d0 65 48 2b 04 25 28 00 00 00 75 54 48 81 c4 88 00 00 00 31 c0 5b 41 5c 41 5d 41 5e 41 5f 5d c3 cc cc cc cc e8 ad 4f 0a fe <0f> 0b eb a6 e8 74 23 67 fe e9 f6 fe ff ff 48 89 85 50 ff ff ff e8
[   15.545450] RSP: 0018:ffff88801204fc00 EFLAGS: 00010293
[   15.545643] RAX: 0000000000000000 RBX: ffff888024705608 RCX: 0000000000000000
[   15.545901] RDX: ffff88800fadca00 RSI: ffffffff835563e3 RDI: ffffffff86702b40
[   15.546159] RBP: ffff88801204fcb0 R08: 0000000000000000 R09: fffffbfff0eb2644
[   15.546418] R10: ffffffff87593227 R11: ffff888013420000 R12: 0000000000000000
[   15.546685] R13: ffff888020928418 R14: ffff88801204fc48 R15: ffffffff83556140
[   15.546943] FS:  0000000000000000(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   15.547228] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   15.547436] CR2: 0000000020000080 CR3: 000000000687e000 CR4: 0000000000750ef0
[   15.547689] PKRU: 55555554
[   15.547791] Call Trace:
[   15.547883]  <TASK>
[   15.547965]  ? show_regs+0x6e/0x80
[   15.548096]  ? __warn+0xef/0x340
[   15.548221]  ? report_bug+0x25e/0x4b0
[   15.548362]  ? iommufd_fops_release+0x2a3/0x300
[   15.548532]  ? report_bug+0x2cb/0x4b0
[   15.548674]  ? handle_bug+0x46/0x90
[   15.548806]  ? exc_invalid_op+0x1d/0x50
[   15.548951]  ? asm_exc_invalid_op+0x1f/0x30
[   15.549107]  ? __pfx_iommufd_fops_release+0x10/0x10
[   15.549290]  ? iommufd_fops_release+0x2a3/0x300
[   15.549462]  ? iommufd_fops_release+0x2a3/0x300
[   15.549633]  ? __pfx_iommufd_fops_release+0x10/0x10
[   15.549814]  ? rcu_is_watching+0x19/0xc0
[   15.549966]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   15.550165]  ? __pfx_iommufd_fops_release+0x10/0x10
[   15.550345]  __fput+0x424/0xaf0
[   15.550472]  ____fput+0x1f/0x30
[   15.550601]  task_work_run+0x19d/0x2b0
[   15.550744]  ? __pfx_task_work_run+0x10/0x10
[   15.550909]  ? __sanitizer_cov_trace_const_cmp1+0x1e/0x30
[   15.551106]  ? switch_task_namespaces+0xa9/0xe0
[   15.551276]  do_exit+0xac9/0x2790
[   15.551404]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   15.551632]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   15.551814]  ? __pfx_do_exit+0x10/0x10
[   15.551956]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   15.552153]  ? security_file_ioctl+0x9d/0xd0
[   15.552315]  make_task_dead+0x182/0x3c0
[   15.552461]  rewind_stack_and_make_dead+0x17/0x20
[   15.552637] RIP: 0033:0x7f002f63ee5d
[   15.552770] Code: Unable to access opcode bytes at 0x7f002f63ee33.
[   15.552990] RSP: 002b:00007fff95875b68 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   15.553260] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f002f63ee5d
[   15.553514] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   15.553766] RBP: 00007fff95875b80 R08: 0000000000000800 R09: 0000000000000800
[   15.554021] R10: 0000000000000000 R11: 0000000000000213 R12: 00007fff95875c98
[   15.554274] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f002f984000
[   15.554532]  </TASK>
[   15.554623] irq event stamp: 0
[   15.554740] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   15.554976] hardirqs last disabled at (0): [<ffffffff8122f2d1>] copy_process+0x1c51/0x7140
[   15.555270] softirqs last  enabled at (0): [<ffffffff8122f312>] copy_process+0x1c92/0x7140
[   15.555564] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   15.555787] ---[ end trace 0000000000000000 ]---
[   15.558246] iommufd_mock iommufd_mock32: Adding to iommu group 32
[   15.558500] iommufd_mock iommufd_mock32: Removing from iommu group 32
[   15.558799] general protection fault, probably for non-canonical address 0xdffffc0000000006: 0000 [#33] PREEMPT SMP KASAN NOPTI
[   15.559207] KASAN: null-ptr-deref in range [0x0000000000000030-0x0000000000000037]
[   15.559474] CPU: 0 PID: 749 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   15.559782] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   15.560179] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   15.560388] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   15.561031] RSP: 0018:ffff888012d1fba8 EFLAGS: 00010206
[   15.561220] RAX: dffffc0000000000 RBX: ffff888013f74000 RCX: 0000000000000000
[   15.561473] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   15.561725] RBP: ffff888012d1fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   15.561980] R10: ffff88800aad88df R11: 5f6466756d6d6f69 R12: 0000000000000000
[   15.562232] R13: ffffffff85cc0180 R14: ffff888013971c40 R15: ffffffff87070ae0
[   15.562485] FS:  00007fa7ef377600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   15.562778] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   15.562985] CR2: 0000000020000080 CR3: 00000000202da000 CR4: 0000000000750ef0
[   15.563239] PKRU: 55555554
[   15.563341] Call Trace:
[   15.563434]  <TASK>
[   15.563515]  ? show_regs+0x6e/0x80
[   15.563649]  ? die_addr+0x45/0xb0
[   15.563780]  ? exc_general_protection+0x159/0x250
[   15.563960]  ? asm_exc_general_protection+0x2b/0x30
[   15.564143]  ? sysfs_remove_link_from_group+0x21/0x90
[   15.564330]  ? sysfs_remove_link_from_group+0x37/0x90
[   15.564517]  ? sysfs_remove_link_from_group+0x21/0x90
[   15.564704]  iommu_device_unlink+0x85/0xd0
[   15.564858]  iommu_deinit_device+0x11f/0x4c0
[   15.565021]  __iommu_group_remove_device+0x26b/0x300
[   15.565207]  iommu_group_remove_device+0x8a/0xb0
[   15.565381]  iommufd_test+0x1f1a/0x2d10
[   15.565524]  ? __pfx_lock_release+0x10/0x10
[   15.565681]  ? __pfx_lock_acquire+0x10/0x10
[   15.565839]  ? __pfx_iommufd_test+0x10/0x10
[   15.565996]  ? __sanitizer_cov_trace_const_cmp8+0x1c/0x30
[   15.566196]  iommufd_fops_ioctl+0x377/0x510
[   15.566354]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   15.566529]  ? trace_hardirqs_on+0x26/0x120
[   15.566689]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   15.566925]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   15.567108]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   15.567307]  ? security_file_ioctl+0x9d/0xd0
[   15.567469]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   15.567644]  __x64_sys_ioctl+0x1b9/0x230
[   15.567792]  do_syscall_64+0x3c/0x90
[   15.567927]  entry_SYSCALL_64_after_hwframe+0x6e/0xd8
[   15.568112] RIP: 0033:0x7fa7ef03ee5d
[   15.568245] Code: ff c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d 93 af 1b 00 f7 d8 64 89 01 48
[   15.568889] RSP: 002b:00007ffe8ccc9ce8 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   15.569158] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007fa7ef03ee5d
[   15.569410] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   15.569663] RBP: 00007ffe8ccc9d00 R08: 0000000000000800 R09: 0000000000000800
[   15.569915] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffe8ccc9e18
[   15.570167] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007fa7ef3b8000
[   15.570424]  </TASK>
[   15.570508] Modules linked in:
[   15.570759] ---[ end trace 0000000000000000 ]---
[   15.570955] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   15.571165] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   15.571807] RSP: 0018:ffff88802457fba8 EFLAGS: 00010206
[   15.571996] RAX: dffffc0000000000 RBX: ffff888014f9b000 RCX: 0000000000000000
[   15.572248] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   15.572500] RBP: ffff88802457fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   15.572752] R10: ffff88800aad88df R11: 0000000000000001 R12: 0000000000000000
[   15.573005] R13: ffffffff85cc0180 R14: ffff8880109b6ac0 R15: ffffffff87070ae0
[   15.573257] FS:  00007fa7ef377600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   15.573541] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   15.573747] CR2: 0000000020000080 CR3: 00000000202da000 CR4: 0000000000750ef0
[   15.574001] PKRU: 55555554
[   15.574350] ------------[ cut here ]------------
[   15.574522] WARNING: CPU: 0 PID: 749 at drivers/iommu/iommufd/main.c:258 iommufd_fops_release+0x2a3/0x300
[   15.574881] Modules linked in:
[   15.574997] CPU: 0 PID: 749 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   15.575304] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   15.575701] RIP: 0010:iommufd_fops_release+0x2a3/0x300
[   15.575889] Code: 45 d0 65 48 2b 04 25 28 00 00 00 75 54 48 81 c4 88 00 00 00 31 c0 5b 41 5c 41 5d 41 5e 41 5f 5d c3 cc cc cc cc e8 ad 4f 0a fe <0f> 0b eb a6 e8 74 23 67 fe e9 f6 fe ff ff 48 89 85 50 ff ff ff e8
[   15.576533] RSP: 0018:ffff888012d1fc00 EFLAGS: 00010293
[   15.576721] RAX: 0000000000000000 RBX: ffff888024705008 RCX: 0000000000000000
[   15.576974] RDX: ffff88800fad8000 RSI: ffffffff835563e3 RDI: ffffffff86702b40
[   15.577227] RBP: ffff888012d1fcb0 R08: 0000000000000000 R09: fffffbfff0eb2644
[   15.577479] R10: ffffffff87593227 R11: ffff888019740a00 R12: 0000000000000000
[   15.577732] R13: ffff888020928918 R14: ffff888012d1fc48 R15: ffffffff83556140
[   15.577985] FS:  0000000000000000(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   15.578270] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   15.578477] CR2: 0000000020000080 CR3: 000000000687e000 CR4: 0000000000750ef0
[   15.578738] PKRU: 55555554
[   15.578842] Call Trace:
[   15.578935]  <TASK>
[   15.579016]  ? show_regs+0x6e/0x80
[   15.579148]  ? __warn+0xef/0x340
[   15.579273]  ? report_bug+0x25e/0x4b0
[   15.579413]  ? iommufd_fops_release+0x2a3/0x300
[   15.579582]  ? report_bug+0x2cb/0x4b0
[   15.579724]  ? handle_bug+0x46/0x90
[   15.579857]  ? exc_invalid_op+0x1d/0x50
[   15.580002]  ? asm_exc_invalid_op+0x1f/0x30
[   15.580156]  ? __pfx_iommufd_fops_release+0x10/0x10
[   15.580338]  ? iommufd_fops_release+0x2a3/0x300
[   15.580507]  ? iommufd_fops_release+0x2a3/0x300
[   15.580677]  ? __pfx_iommufd_fops_release+0x10/0x10
[   15.580858]  ? rcu_is_watching+0x19/0xc0
[   15.581007]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   15.581204]  ? __pfx_iommufd_fops_release+0x10/0x10
[   15.581384]  __fput+0x424/0xaf0
[   15.581511]  ____fput+0x1f/0x30
[   15.581633]  task_work_run+0x19d/0x2b0
[   15.581775]  ? __pfx_task_work_run+0x10/0x10
[   15.581935]  ? __sanitizer_cov_trace_const_cmp1+0x1e/0x30
[   15.582131]  ? switch_task_namespaces+0xa9/0xe0
[   15.582301]  do_exit+0xac9/0x2790
[   15.582429]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   15.582663]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   15.582848]  ? __pfx_do_exit+0x10/0x10
[   15.582989]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   15.583186]  ? security_file_ioctl+0x9d/0xd0
[   15.583349]  make_task_dead+0x182/0x3c0
[   15.583494]  rewind_stack_and_make_dead+0x17/0x20
[   15.583669] RIP: 0033:0x7fa7ef03ee5d
[   15.583802] Code: Unable to access opcode bytes at 0x7fa7ef03ee33.
[   15.584020] RSP: 002b:00007ffe8ccc9ce8 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   15.584288] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007fa7ef03ee5d
[   15.584541] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   15.584793] RBP: 00007ffe8ccc9d00 R08: 0000000000000800 R09: 0000000000000800
[   15.585045] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffe8ccc9e18
[   15.585297] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007fa7ef3b8000
[   15.585553]  </TASK>
[   15.585638] irq event stamp: 0
[   15.585752] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   15.585975] hardirqs last disabled at (0): [<ffffffff8122f2d1>] copy_process+0x1c51/0x7140
[   15.586268] softirqs last  enabled at (0): [<ffffffff8122f312>] copy_process+0x1c92/0x7140
[   15.586561] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   15.586793] ---[ end trace 0000000000000000 ]---
[   15.589419] iommufd_mock iommufd_mock33: Adding to iommu group 33
[   15.589683] iommufd_mock iommufd_mock33: Removing from iommu group 33
[   15.589943] general protection fault, probably for non-canonical address 0xdffffc0000000006: 0000 [#34] PREEMPT SMP KASAN NOPTI
[   15.590353] KASAN: null-ptr-deref in range [0x0000000000000030-0x0000000000000037]
[   15.590628] CPU: 1 PID: 750 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   15.590958] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   15.591368] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   15.591583] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   15.592243] RSP: 0018:ffff88800ff97ba8 EFLAGS: 00010206
[   15.592437] RAX: dffffc0000000000 RBX: ffff8880233ab000 RCX: 0000000000000000
[   15.592697] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   15.592955] RBP: ffff88800ff97bc0 R08: 0000000000000001 R09: ffffed100155b11b
[   15.593215] R10: ffff88800aad88df R11: 5f6466756d6d6f69 R12: 0000000000000000
[   15.593473] R13: ffffffff85cc0180 R14: ffff88800f9914e0 R15: ffffffff87070ae0
[   15.593732] FS:  00007ff28c46e600(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
[   15.594024] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   15.594235] CR2: 0000000020000080 CR3: 0000000011b6c000 CR4: 0000000000750ee0
[   15.594496] PKRU: 55555554
[   15.594600] Call Trace:
[   15.594712]  <TASK>
[   15.594817]  ? show_regs+0x6e/0x80
[   15.594959]  ? die_addr+0x45/0xb0
[   15.595093]  ? exc_general_protection+0x159/0x250
[   15.595278]  ? asm_exc_general_protection+0x2b/0x30
[   15.595465]  ? sysfs_remove_link_from_group+0x21/0x90
[   15.595656]  ? sysfs_remove_link_from_group+0x37/0x90
[   15.595848]  ? sysfs_remove_link_from_group+0x21/0x90
[   15.596040]  iommu_device_unlink+0x85/0xd0
[   15.596197]  iommu_deinit_device+0x11f/0x4c0
[   15.596365]  __iommu_group_remove_device+0x26b/0x300
[   15.596556]  iommu_group_remove_device+0x8a/0xb0
[   15.596734]  iommufd_test+0x1f1a/0x2d10
[   15.596881]  ? __pfx_lock_release+0x10/0x10
[   15.597042]  ? __pfx_lock_acquire+0x10/0x10
[   15.597205]  ? __pfx_iommufd_test+0x10/0x10
[   15.597366]  ? __sanitizer_cov_trace_const_cmp8+0x1c/0x30
[   15.597571]  iommufd_fops_ioctl+0x377/0x510
[   15.597733]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   15.597913]  ? trace_hardirqs_on+0x26/0x120
[   15.598076]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   15.598310]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   15.598497]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   15.598704]  ? security_file_ioctl+0x9d/0xd0
[   15.598878]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   15.599060]  __x64_sys_ioctl+0x1b9/0x230
[   15.599211]  do_syscall_64+0x3c/0x90
[   15.599350]  entry_SYSCALL_64_after_hwframe+0x6e/0xd8
[   15.599540] RIP: 0033:0x7ff28c23ee5d
[   15.599677] Code: ff c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d 93 af 1b 00 f7 d8 64 89 01 48
[   15.600337] RSP: 002b:00007ffc6aff20b8 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   15.600614] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007ff28c23ee5d
[   15.600873] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   15.601131] RBP: 00007ffc6aff20d0 R08: 0000000000000800 R09: 0000000000000800
[   15.601390] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffc6aff21e8
[   15.601649] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007ff28c4af000
[   15.601914]  </TASK>
[   15.602000] Modules linked in:
[   15.602156] ---[ end trace 0000000000000000 ]---
[   15.602329] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   15.602541] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   15.603255] RSP: 0018:ffff88802457fba8 EFLAGS: 00010206
[   15.603450] RAX: dffffc0000000000 RBX: ffff888014f9b000 RCX: 0000000000000000
[   15.603709] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   15.604121] RBP: ffff88802457fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   15.604387] R10: ffff88800aad88df R11: 0000000000000001 R12: 0000000000000000
[   15.604672] R13: ffffffff85cc0180 R14: ffff8880109b6ac0 R15: ffffffff87070ae0
[   15.604983] FS:  00007ff28c46e600(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
[   15.605283] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   15.605507] CR2: 0000000020000080 CR3: 0000000011b6c000 CR4: 0000000000750ee0
[   15.605815] PKRU: 55555554
[   15.606398] ------------[ cut here ]------------
[   15.606621] WARNING: CPU: 1 PID: 750 at drivers/iommu/iommufd/main.c:258 iommufd_fops_release+0x2a3/0x300
[   15.606988] Modules linked in:
[   15.607107] CPU: 1 PID: 750 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   15.607450] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   15.607896] RIP: 0010:iommufd_fops_release+0x2a3/0x300
[   15.608115] Code: 45 d0 65 48 2b 04 25 28 00 00 00 75 54 48 81 c4 88 00 00 00 31 c0 5b 41 5c 41 5d 41 5e 41 5f 5d c3 cc cc cc cc e8 ad 4f 0a fe <0f> 0b eb a6 e8 74 23 67 fe e9 f6 fe ff ff 48 89 85 50 ff ff ff e8
[   15.608832] RSP: 0018:ffff88800ff97c00 EFLAGS: 00010293
[   15.609066] RAX: 0000000000000000 RBX: ffff88801248ab08 RCX: 0000000000000000
[   15.609319] RDX: ffff888012c30000 RSI: ffffffff835563e3 RDI: ffffffff86702b48
[   15.609597] RBP: ffff88800ff97cb0 R08: 0000000000000000 R09: fffffbfff0eb2644
[   15.609895] R10: ffffffff87593227 R11: ffff88801381a800 R12: 0000000000000000
[   15.610185] R13: ffff888013a53098 R14: ffff88800ff97c48 R15: ffffffff83556140
[   15.610482] FS:  0000000000000000(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
[   15.610807] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   15.611022] CR2: 0000000020000080 CR3: 000000000687e000 CR4: 0000000000750ee0
[   15.611302] PKRU: 55555554
[   15.611410] Call Trace:
[   15.611542]  <TASK>
[   15.611624]  ? show_regs+0x6e/0x80
[   15.611767]  ? __warn+0xef/0x340
[   15.611907]  ? report_bug+0x25e/0x4b0
[   15.612063]  ? iommufd_fops_release+0x2a3/0x300
[   15.612284]  ? report_bug+0x2cb/0x4b0
[   15.612426]  ? handle_bug+0x46/0x90
[   15.612563]  ? exc_invalid_op+0x1d/0x50
[   15.612721]  ? asm_exc_invalid_op+0x1f/0x30
[   15.612917]  ? __pfx_iommufd_fops_release+0x10/0x10
[   15.613105]  ? iommufd_fops_release+0x2a3/0x300
[   15.613280]  ? iommufd_fops_release+0x2a3/0x300
[   15.613478]  ? __pfx_iommufd_fops_release+0x10/0x10
[   15.613689]  ? rcu_is_watching+0x19/0xc0
[   15.613838]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   15.614042]  ? __pfx_iommufd_fops_release+0x10/0x10
[   15.614250]  __fput+0x424/0xaf0
[   15.614415]  ____fput+0x1f/0x30
[   15.614539]  task_work_run+0x19d/0x2b0
[   15.614704]  ? __pfx_task_work_run+0x10/0x10
[   15.614881]  ? __sanitizer_cov_trace_const_cmp1+0x1e/0x30
[   15.615080]  ? switch_task_namespaces+0xa9/0xe0
[   15.615266]  do_exit+0xac9/0x2790
[   15.615412]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   15.615683]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   15.615868]  ? __pfx_do_exit+0x10/0x10
[   15.616030]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   15.616235]  ? security_file_ioctl+0x9d/0xd0
[   15.616425]  make_task_dead+0x182/0x3c0
[   15.616572]  rewind_stack_and_make_dead+0x17/0x20
[   15.616773] RIP: 0033:0x7ff28c23ee5d
[   15.616937] Code: Unable to access opcode bytes at 0x7ff28c23ee33.
[   15.617162] RSP: 002b:00007ffc6aff20b8 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   15.617486] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007ff28c23ee5d
[   15.617747] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   15.618018] RBP: 00007ffc6aff20d0 R08: 0000000000000800 R09: 0000000000000800
[   15.618322] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffc6aff21e8
[   15.618605] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007ff28c4af000
[   15.618874]  </TASK>
[   15.618969] irq event stamp: 0
[   15.619114] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   15.619345] hardirqs last disabled at (0): [<ffffffff8122f2d1>] copy_process+0x1c51/0x7140
[   15.619647] softirqs last  enabled at (0): [<ffffffff8122f312>] copy_process+0x1c92/0x7140
[   15.620012] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   15.620242] ---[ end trace 0000000000000000 ]---
[   15.623306] iommufd_mock iommufd_mock34: Adding to iommu group 34
[   15.623611] iommufd_mock iommufd_mock34: Removing from iommu group 34
[   15.623873] general protection fault, probably for non-canonical address 0xdffffc0000000006: 0000 [#35] PREEMPT SMP KASAN NOPTI
[   15.624298] KASAN: null-ptr-deref in range [0x0000000000000030-0x0000000000000037]
[   15.624582] CPU: 1 PID: 751 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   15.624967] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   15.625411] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   15.625667] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   15.626397] RSP: 0018:ffff8880171ffba8 EFLAGS: 00010206
[   15.626599] RAX: dffffc0000000000 RBX: ffff8880233a8000 RCX: 0000000000000000
[   15.626873] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   15.627162] RBP: ffff8880171ffbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   15.627469] R10: ffff88800aad88df R11: 5f6466756d6d6f69 R12: 0000000000000000
[   15.627737] R13: ffffffff85cc0180 R14: ffff88800bbbd920 R15: ffffffff87070ae0
[   15.628060] FS:  00007f637a985600(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
[   15.628362] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   15.628642] CR2: 0000000020000080 CR3: 00000000202da000 CR4: 0000000000750ee0
[   15.628912] PKRU: 55555554
[   15.629020] Call Trace:
[   15.629117]  <TASK>
[   15.629229]  ? show_regs+0x6e/0x80
[   15.629408]  ? die_addr+0x45/0xb0
[   15.629547]  ? exc_general_protection+0x159/0x250
[   15.629737]  ? asm_exc_general_protection+0x2b/0x30
[   15.629984]  ? sysfs_remove_link_from_group+0x21/0x90
[   15.630182]  ? sysfs_remove_link_from_group+0x37/0x90
[   15.630382]  ? sysfs_remove_link_from_group+0x21/0x90
[   15.630601]  iommu_device_unlink+0x85/0xd0
[   15.630798]  iommu_deinit_device+0x11f/0x4c0
[   15.630970]  __iommu_group_remove_device+0x26b/0x300
[   15.631167]  iommu_group_remove_device+0x8a/0xb0
[   15.631403]  iommufd_test+0x1f1a/0x2d10
[   15.631555]  ? __pfx_lock_release+0x10/0x10
[   15.631721]  ? __pfx_lock_acquire+0x10/0x10
[   15.631889]  ? __pfx_iommufd_test+0x10/0x10
[   15.632088]  ? __sanitizer_cov_trace_const_cmp8+0x1c/0x30
[   15.632300]  iommufd_fops_ioctl+0x377/0x510
[   15.632468]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   15.632661]  ? trace_hardirqs_on+0x26/0x120
[   15.632866]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   15.633107]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   15.633306]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   15.633568]  ? security_file_ioctl+0x9d/0xd0
[   15.633741]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   15.633926]  __x64_sys_ioctl+0x1b9/0x230
[   15.634104]  do_syscall_64+0x3c/0x90
[   15.634278]  entry_SYSCALL_64_after_hwframe+0x6e/0xd8
[   15.634474] RIP: 0033:0x7f637a63ee5d
[   15.634617] Code: ff c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d 93 af 1b 00 f7 d8 64 89 01 48
[   15.635336] RSP: 002b:00007ffffe6d0988 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   15.635680] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f637a63ee5d
[   15.635947] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   15.636267] RBP: 00007ffffe6d09a0 R08: 0000000000000800 R09: 0000000000000800
[   15.636535] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffffe6d0ab8
[   15.636814] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f637a9c6000
[   15.637139]  </TASK>
[   15.637228] Modules linked in:
[   15.637380] ---[ end trace 0000000000000000 ]---
[   15.637558] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   15.637778] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   15.638458] RSP: 0018:ffff88802457fba8 EFLAGS: 00010206
[   15.638667] RAX: dffffc0000000000 RBX: ffff888014f9b000 RCX: 0000000000000000
[   15.638937] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   15.639264] RBP: ffff88802457fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   15.639531] R10: ffff88800aad88df R11: 0000000000000001 R12: 0000000000000000
[   15.639822] R13: ffffffff85cc0180 R14: ffff8880109b6ac0 R15: ffffffff87070ae0
[   15.640127] FS:  00007f637a985600(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
[   15.640435] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   15.640701] CR2: 0000000020000080 CR3: 00000000202da000 CR4: 0000000000750ee0
[   15.640969] PKRU: 55555554
[   15.641341] ------------[ cut here ]------------
[   15.641519] WARNING: CPU: 1 PID: 751 at drivers/iommu/iommufd/main.c:258 iommufd_fops_release+0x2a3/0x300
[   15.641938] Modules linked in:
[   15.642062] CPU: 1 PID: 751 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   15.642387] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   15.642874] RIP: 0010:iommufd_fops_release+0x2a3/0x300
[   15.643073] Code: 45 d0 65 48 2b 04 25 28 00 00 00 75 54 48 81 c4 88 00 00 00 31 c0 5b 41 5c 41 5d 41 5e 41 5f 5d c3 cc cc cc cc e8 ad 4f 0a fe <0f> 0b eb a6 e8 74 23 67 fe e9 f6 fe ff ff 48 89 85 50 ff ff ff e8
[   15.643809] RSP: 0018:ffff8880171ffc00 EFLAGS: 00010293
[   15.644009] RAX: 0000000000000000 RBX: ffff88801248a208 RCX: 0000000000000000
[   15.644332] RDX: ffff88800fada500 RSI: ffffffff835563e3 RDI: ffffffff86702b48
[   15.644606] RBP: ffff8880171ffcb0 R08: 0000000000000000 R09: fffffbfff0eb2644
[   15.644879] R10: ffffffff87593227 R11: ffff888013756800 R12: 0000000000000000
[   15.645193] R13: ffff888013a53d18 R14: ffff8880171ffc48 R15: ffffffff83556140
[   15.645461] FS:  0000000000000000(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
[   15.645796] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   15.646015] CR2: 0000000020000080 CR3: 000000000687e000 CR4: 0000000000750ee0
[   15.646293] PKRU: 55555554
[   15.646448] Call Trace:
[   15.646546]  <TASK>
[   15.646641]  ? show_regs+0x6e/0x80
[   15.646780]  ? __warn+0xef/0x340
[   15.646910]  ? report_bug+0x25e/0x4b0
[   15.647055]  ? iommufd_fops_release+0x2a3/0x300
[   15.647237]  ? report_bug+0x2cb/0x4b0
[   15.647434]  ? handle_bug+0x46/0x90
[   15.647572]  ? exc_invalid_op+0x1d/0x50
[   15.647722]  ? asm_exc_invalid_op+0x1f/0x30
[   15.647882]  ? __pfx_iommufd_fops_release+0x10/0x10
[   15.648125]  ? iommufd_fops_release+0x2a3/0x300
[   15.648300]  ? iommufd_fops_release+0x2a3/0x300
[   15.648476]  ? __pfx_iommufd_fops_release+0x10/0x10
[   15.648685]  ? rcu_is_watching+0x19/0xc0
[   15.648871]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   15.649077]  ? __pfx_iommufd_fops_release+0x10/0x10
[   15.649264]  __fput+0x424/0xaf0
[   15.649410]  ____fput+0x1f/0x30
[   15.649570]  task_work_run+0x19d/0x2b0
[   15.649718]  ? __pfx_task_work_run+0x10/0x10
[   15.649884]  ? __sanitizer_cov_trace_const_cmp1+0x1e/0x30
[   15.650111]  ? switch_task_namespaces+0xa9/0xe0
[   15.650304]  do_exit+0xac9/0x2790
[   15.650436]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   15.650679]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   15.650911]  ? __pfx_do_exit+0x10/0x10
[   15.651057]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   15.651261]  ? security_file_ioctl+0x9d/0xd0
[   15.651430]  make_task_dead+0x182/0x3c0
[   15.651580]  rewind_stack_and_make_dead+0x17/0x20
[   15.651761] RIP: 0033:0x7f637a63ee5d
[   15.651927] Code: Unable to access opcode bytes at 0x7f637a63ee33.
[   15.652185] RSP: 002b:00007ffffe6d0988 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   15.652464] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f637a63ee5d
[   15.652788] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   15.653050] RBP: 00007ffffe6d09a0 R08: 0000000000000800 R09: 0000000000000800
[   15.653367] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffffe6d0ab8
[   15.653630] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f637a9c6000
[   15.653906]  </TASK>
[   15.654029] irq event stamp: 0
[   15.654148] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   15.654380] hardirqs last disabled at (0): [<ffffffff8122f2d1>] copy_process+0x1c51/0x7140
[   15.654740] softirqs last  enabled at (0): [<ffffffff8122f312>] copy_process+0x1c92/0x7140
[   15.655046] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   15.655278] ---[ end trace 0000000000000000 ]---
[   15.658105] iommufd_mock iommufd_mock35: Adding to iommu group 35
[   15.658363] iommufd_mock iommufd_mock35: Removing from iommu group 35
[   15.658643] general protection fault, probably for non-canonical address 0xdffffc0000000006: 0000 [#36] PREEMPT SMP KASAN NOPTI
[   15.659065] KASAN: null-ptr-deref in range [0x0000000000000030-0x0000000000000037]
[   15.659343] CPU: 1 PID: 752 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   15.659720] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   15.660146] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   15.660391] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   15.661120] RSP: 0018:ffff8880171f7ba8 EFLAGS: 00010206
[   15.661317] RAX: dffffc0000000000 RBX: ffff8880123fb000 RCX: 0000000000000000
[   15.661600] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   15.661903] RBP: ffff8880171f7bc0 R08: 0000000000000001 R09: ffffed100155b11b
[   15.662165] R10: ffff88800aad88df R11: 5f6466756d6d6f69 R12: 0000000000000000
[   15.662484] R13: ffffffff85cc0180 R14: ffff88800bbbd400 R15: ffffffff87070ae0
[   15.662750] FS:  00007fe0542be600(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
[   15.663082] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   15.663296] CR2: 0000000020000080 CR3: 0000000011b6c000 CR4: 0000000000750ee0
[   15.663560] PKRU: 55555554
[   15.663686] Call Trace:
[   15.663815]  <TASK>
[   15.663900]  ? show_regs+0x6e/0x80
[   15.664039]  ? die_addr+0x45/0xb0
[   15.664175]  ? exc_general_protection+0x159/0x250
[   15.664387]  ? asm_exc_general_protection+0x2b/0x30
[   15.664600]  ? sysfs_remove_link_from_group+0x21/0x90
[   15.664794]  ? sysfs_remove_link_from_group+0x37/0x90
[   15.665002]  ? sysfs_remove_link_from_group+0x21/0x90
[   15.665231]  iommu_device_unlink+0x85/0xd0
[   15.665391]  iommu_deinit_device+0x11f/0x4c0
[   15.665560]  __iommu_group_remove_device+0x26b/0x300
[   15.665812]  iommu_group_remove_device+0x8a/0xb0
[   15.665992]  iommufd_test+0x1f1a/0x2d10
[   15.666143]  ? __pfx_lock_release+0x10/0x10
[   15.666311]  ? __pfx_lock_acquire+0x10/0x10
[   15.666531]  ? __pfx_iommufd_test+0x10/0x10
[   15.666693]  ? __sanitizer_cov_trace_const_cmp8+0x1c/0x30
[   15.666903]  iommufd_fops_ioctl+0x377/0x510
[   15.667068]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   15.667300]  ? trace_hardirqs_on+0x26/0x120
[   15.667466]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   15.667703]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   15.667950]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   15.668156]  ? security_file_ioctl+0x9d/0xd0
[   15.668325]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   15.668529]  __x64_sys_ioctl+0x1b9/0x230
[   15.668710]  do_syscall_64+0x3c/0x90
[   15.668850]  entry_SYSCALL_64_after_hwframe+0x6e/0xd8
[   15.669042] RIP: 0033:0x7fe05403ee5d
[   15.669206] Code: ff c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d 93 af 1b 00 f7 d8 64 89 01 48
[   15.669962] RSP: 002b:00007fff89ad7388 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   15.670242] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007fe05403ee5d
[   15.670520] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   15.670813] RBP: 00007fff89ad73a0 R08: 0000000000000800 R09: 0000000000000800
[   15.671075] R10: 0000000000000000 R11: 0000000000000213 R12: 00007fff89ad74b8
[   15.671395] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007fe0542ff000
[   15.671663]  </TASK>
[   15.671750] Modules linked in:
[   15.671967] ---[ end trace 0000000000000000 ]---
[   15.672142] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   15.672357] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   15.673025] RSP: 0018:ffff88802457fba8 EFLAGS: 00010206
[   15.673222] RAX: dffffc0000000000 RBX: ffff888014f9b000 RCX: 0000000000000000
[   15.673492] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   15.673804] RBP: ffff88802457fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   15.674067] R10: ffff88800aad88df R11: 0000000000000001 R12: 0000000000000000
[   15.674367] R13: ffffffff85cc0180 R14: ffff8880109b6ac0 R15: ffffffff87070ae0
[   15.674638] FS:  00007fe0542be600(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
[   15.674937] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   15.675202] CR2: 0000000020000080 CR3: 0000000011b6c000 CR4: 0000000000750ee0
[   15.675465] PKRU: 55555554
[   15.675839] ------------[ cut here ]------------
[   15.676017] WARNING: CPU: 1 PID: 752 at drivers/iommu/iommufd/main.c:258 iommufd_fops_release+0x2a3/0x300
[   15.676386] Modules linked in:
[   15.676549] CPU: 1 PID: 752 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   15.676873] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   15.677345] RIP: 0010:iommufd_fops_release+0x2a3/0x300
[   15.677544] Code: 45 d0 65 48 2b 04 25 28 00 00 00 75 54 48 81 c4 88 00 00 00 31 c0 5b 41 5c 41 5d 41 5e 41 5f 5d c3 cc cc cc cc e8 ad 4f 0a fe <0f> 0b eb a6 e8 74 23 67 fe e9 f6 fe ff ff 48 89 85 50 ff ff ff e8
[   15.678280] RSP: 0018:ffff8880171f7c00 EFLAGS: 00010293
[   15.678535] RAX: 0000000000000000 RBX: ffff88801248af08 RCX: 0000000000000000
[   15.678816] RDX: ffff888014580000 RSI: ffffffff835563e3 RDI: ffffffff86702b48
[   15.679079] RBP: ffff8880171f7cb0 R08: 0000000000000000 R09: fffffbfff0eb2644
[   15.679341] R10: ffffffff87593227 R11: ffff88801328f400 R12: 0000000000000000
[   15.679660] R13: ffff888013a2c198 R14: ffff8880171f7c48 R15: ffffffff83556140
[   15.679923] FS:  0000000000000000(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
[   15.680280] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   15.680494] CR2: 0000000020000080 CR3: 000000000687e000 CR4: 0000000000750ee0
[   15.680758] PKRU: 55555554
[   15.680887] Call Trace:
[   15.681011]  <TASK>
[   15.681096]  ? show_regs+0x6e/0x80
[   15.681233]  ? __warn+0xef/0x340
[   15.681362]  ? report_bug+0x25e/0x4b0
[   15.681517]  ? iommufd_fops_release+0x2a3/0x300
[   15.681737]  ? report_bug+0x2cb/0x4b0
[   15.681884]  ? handle_bug+0x46/0x90
[   15.682022]  ? exc_invalid_op+0x1d/0x50
[   15.682181]  ? asm_exc_invalid_op+0x1f/0x30
[   15.682385]  ? __pfx_iommufd_fops_release+0x10/0x10
[   15.682581]  ? iommufd_fops_release+0x2a3/0x300
[   15.682759]  ? iommufd_fops_release+0x2a3/0x300
[   15.682936]  ? __pfx_iommufd_fops_release+0x10/0x10
[   15.683122]  ? rcu_is_watching+0x19/0xc0
[   15.683299]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   15.683532]  ? __pfx_iommufd_fops_release+0x10/0x10
[   15.683721]  __fput+0x424/0xaf0
[   15.683851]  ____fput+0x1f/0x30
[   15.684024]  task_work_run+0x19d/0x2b0
[   15.684172]  ? __pfx_task_work_run+0x10/0x10
[   15.684338]  ? __sanitizer_cov_trace_const_cmp1+0x1e/0x30
[   15.684552]  ? switch_task_namespaces+0xa9/0xe0
[   15.684774]  do_exit+0xac9/0x2790
[   15.684906]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   15.685141]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   15.685345]  ? __pfx_do_exit+0x10/0x10
[   15.685526]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   15.685730]  ? security_file_ioctl+0x9d/0xd0
[   15.685899]  make_task_dead+0x182/0x3c0
[   15.686099]  rewind_stack_and_make_dead+0x17/0x20
[   15.686281] RIP: 0033:0x7fe05403ee5d
[   15.686419] Code: Unable to access opcode bytes at 0x7fe05403ee33.
[   15.686660] RSP: 002b:00007fff89ad7388 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   15.686976] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007fe05403ee5d
[   15.687238] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   15.687500] RBP: 00007fff89ad73a0 R08: 0000000000000800 R09: 0000000000000800
[   15.687777] R10: 0000000000000000 R11: 0000000000000213 R12: 00007fff89ad74b8
[   15.688055] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007fe0542ff000
[   15.688323]  </TASK>
[   15.688419] irq event stamp: 0
[   15.688578] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   15.688810] hardirqs last disabled at (0): [<ffffffff8122f2d1>] copy_process+0x1c51/0x7140
[   15.689140] softirqs last  enabled at (0): [<ffffffff8122f312>] copy_process+0x1c92/0x7140
[   15.689472] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   15.689704] ---[ end trace 0000000000000000 ]---
[   15.692375] iommufd_mock iommufd_mock36: Adding to iommu group 36
[   15.692633] iommufd_mock iommufd_mock36: Removing from iommu group 36
[   15.692895] general protection fault, probably for non-canonical address 0xdffffc0000000006: 0000 [#37] PREEMPT SMP KASAN NOPTI
[   15.693318] KASAN: null-ptr-deref in range [0x0000000000000030-0x0000000000000037]
[   15.693653] CPU: 1 PID: 753 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   15.693977] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   15.694459] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   15.694681] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   15.695421] RSP: 0018:ffff88800ff97ba8 EFLAGS: 00010206
[   15.695621] RAX: dffffc0000000000 RBX: ffff8880123fc000 RCX: 0000000000000000
[   15.695944] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   15.696212] RBP: ffff88800ff97bc0 R08: 0000000000000001 R09: ffffed100155b11b
[   15.696488] R10: ffff88800aad88df R11: 5f6466756d6d6f69 R12: 0000000000000000
[   15.696803] R13: ffffffff85cc0180 R14: ffff88800bbbd6e0 R15: ffffffff87070ae0
[   15.697070] FS:  00007f83c4610600(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
[   15.697428] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   15.697647] CR2: 0000000020000080 CR3: 0000000018920000 CR4: 0000000000750ee0
[   15.697922] PKRU: 55555554
[   15.698081] Call Trace:
[   15.698180]  <TASK>
[   15.698266]  ? show_regs+0x6e/0x80
[   15.698407]  ? die_addr+0x45/0xb0
[   15.698545]  ? exc_general_protection+0x159/0x250
[   15.698805]  ? asm_exc_general_protection+0x2b/0x30
[   15.698998]  ? sysfs_remove_link_from_group+0x21/0x90
[   15.699196]  ? sysfs_remove_link_from_group+0x37/0x90
[   15.699413]  ? sysfs_remove_link_from_group+0x21/0x90
[   15.699651]  iommu_device_unlink+0x85/0xd0
[   15.699814]  iommu_deinit_device+0x11f/0x4c0
[   15.699985]  __iommu_group_remove_device+0x26b/0x300
[   15.700204]  iommu_group_remove_device+0x8a/0xb0
[   15.700398]  iommufd_test+0x1f1a/0x2d10
[   15.700549]  ? __pfx_lock_release+0x10/0x10
[   15.700720]  ? __pfx_lock_acquire+0x10/0x10
[   15.700921]  ? __pfx_iommufd_test+0x10/0x10
[   15.701087]  ? __sanitizer_cov_trace_const_cmp8+0x1c/0x30
[   15.701299]  iommufd_fops_ioctl+0x377/0x510
[   15.701489]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   15.701694]  ? trace_hardirqs_on+0x26/0x120
[   15.701864]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   15.702123]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   15.702338]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   15.702547]  ? security_file_ioctl+0x9d/0xd0
[   15.702719]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   15.702920]  __x64_sys_ioctl+0x1b9/0x230
[   15.703094]  do_syscall_64+0x3c/0x90
[   15.703236]  entry_SYSCALL_64_after_hwframe+0x6e/0xd8
[   15.703432] RIP: 0033:0x7f83c443ee5d
[   15.703598] Code: ff c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d 93 af 1b 00 f7 d8 64 89 01 48
[   15.704353] RSP: 002b:00007ffc447b4148 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   15.704638] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f83c443ee5d
[   15.704926] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   15.705221] RBP: 00007ffc447b4160 R08: 0000000000000800 R09: 0000000000000800
[   15.705488] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffc447b4278
[   15.705804] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f83c4651000
[   15.706076]  </TASK>
[   15.706165] Modules linked in:
[   15.706433] ---[ end trace 0000000000000000 ]---
[   15.706615] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   15.706832] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   15.707498] RSP: 0018:ffff88802457fba8 EFLAGS: 00010206
[   15.707694] RAX: dffffc0000000000 RBX: ffff888014f9b000 RCX: 0000000000000000
[   15.707955] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   15.708217] RBP: ffff88802457fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   15.708479] R10: ffff88800aad88df R11: 0000000000000001 R12: 0000000000000000
[   15.708740] R13: ffffffff85cc0180 R14: ffff8880109b6ac0 R15: ffffffff87070ae0
[   15.709003] FS:  00007f83c4610600(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
[   15.709297] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   15.709511] CR2: 0000000020000080 CR3: 0000000018920000 CR4: 0000000000750ee0
[   15.709774] PKRU: 55555554
[   15.710141] ------------[ cut here ]------------
[   15.710318] WARNING: CPU: 1 PID: 753 at drivers/iommu/iommufd/main.c:258 iommufd_fops_release+0x2a3/0x300
[   15.710686] Modules linked in:
[   15.710810] CPU: 1 PID: 753 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   15.711128] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   15.711541] RIP: 0010:iommufd_fops_release+0x2a3/0x300
[   15.711736] Code: 45 d0 65 48 2b 04 25 28 00 00 00 75 54 48 81 c4 88 00 00 00 31 c0 5b 41 5c 41 5d 41 5e 41 5f 5d c3 cc cc cc cc e8 ad 4f 0a fe <0f> 0b eb a6 e8 74 23 67 fe e9 f6 fe ff ff 48 89 85 50 ff ff ff e8
[   15.712402] RSP: 0018:ffff88800ff97c00 EFLAGS: 00010293
[   15.712598] RAX: 0000000000000000 RBX: ffff88801248a908 RCX: 0000000000000000
[   15.712859] RDX: ffff888014cdca00 RSI: ffffffff835563e3 RDI: ffffffff86702b48
[   15.713120] RBP: ffff88800ff97cb0 R08: 0000000000000000 R09: fffffbfff0eb2644
[   15.713382] R10: ffffffff87593227 R11: ffff8880131cfc00 R12: 0000000000000000
[   15.713643] R13: ffff888013a2ce18 R14: ffff88800ff97c48 R15: ffffffff83556140
[   15.713906] FS:  0000000000000000(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
[   15.714200] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   15.714416] CR2: 0000000020000080 CR3: 000000000687e000 CR4: 0000000000750ee0
[   15.714686] PKRU: 55555554
[   15.714793] Call Trace:
[   15.714888]  <TASK>
[   15.714973]  ? show_regs+0x6e/0x80
[   15.715110]  ? __warn+0xef/0x340
[   15.715237]  ? report_bug+0x25e/0x4b0
[   15.715379]  ? iommufd_fops_release+0x2a3/0x300
[   15.715550]  ? report_bug+0x2cb/0x4b0
[   15.715694]  ? handle_bug+0x46/0x90
[   15.715829]  ? exc_invalid_op+0x1d/0x50
[   15.715975]  ? asm_exc_invalid_op+0x1f/0x30
[   15.716132]  ? __pfx_iommufd_fops_release+0x10/0x10
[   15.716317]  ? iommufd_fops_release+0x2a3/0x300
[   15.716489]  ? iommufd_fops_release+0x2a3/0x300
[   15.716661]  ? __pfx_iommufd_fops_release+0x10/0x10
[   15.716843]  ? rcu_is_watching+0x19/0xc0
[   15.716994]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   15.717195]  ? __pfx_iommufd_fops_release+0x10/0x10
[   15.717378]  __fput+0x424/0xaf0
[   15.717505]  ____fput+0x1f/0x30
[   15.717629]  task_work_run+0x19d/0x2b0
[   15.717773]  ? __pfx_task_work_run+0x10/0x10
[   15.717935]  ? __sanitizer_cov_trace_const_cmp1+0x1e/0x30
[   15.718135]  ? switch_task_namespaces+0xa9/0xe0
[   15.718307]  do_exit+0xac9/0x2790
[   15.718436]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   15.718675]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   15.718865]  ? __pfx_do_exit+0x10/0x10
[   15.719011]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   15.719218]  ? security_file_ioctl+0x9d/0xd0
[   15.719382]  make_task_dead+0x182/0x3c0
[   15.719528]  rewind_stack_and_make_dead+0x17/0x20
[   15.719704] RIP: 0033:0x7f83c443ee5d
[   15.719838] Code: Unable to access opcode bytes at 0x7f83c443ee33.
[   15.720058] RSP: 002b:00007ffc447b4148 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   15.720329] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f83c443ee5d
[   15.720583] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   15.720837] RBP: 00007ffc447b4160 R08: 0000000000000800 R09: 0000000000000800
[   15.721091] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffc447b4278
[   15.721345] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f83c4651000
[   15.721604]  </TASK>
[   15.721689] irq event stamp: 0
[   15.721804] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   15.722029] hardirqs last disabled at (0): [<ffffffff8122f2d1>] copy_process+0x1c51/0x7140
[   15.722324] softirqs last  enabled at (0): [<ffffffff8122f312>] copy_process+0x1c92/0x7140
[   15.722627] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   15.722860] ---[ end trace 0000000000000000 ]---
[   15.725356] iommufd_mock iommufd_mock37: Adding to iommu group 37
[   15.725612] iommufd_mock iommufd_mock37: Removing from iommu group 37
[   15.725880] general protection fault, probably for non-canonical address 0xdffffc0000000006: 0000 [#38] PREEMPT SMP KASAN NOPTI
[   15.726300] KASAN: null-ptr-deref in range [0x0000000000000030-0x0000000000000037]
[   15.726582] CPU: 0 PID: 754 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   15.726913] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   15.727326] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   15.727544] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   15.728216] RSP: 0018:ffff8880171ffba8 EFLAGS: 00010206
[   15.728415] RAX: dffffc0000000000 RBX: ffff888013f77000 RCX: 0000000000000000
[   15.728672] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   15.728928] RBP: ffff8880171ffbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   15.729185] R10: ffff88800aad88df R11: 5f6466756d6d6f69 R12: 0000000000000000
[   15.729441] R13: ffffffff85cc0180 R14: ffff888013971d40 R15: ffffffff87070ae0
[   15.729699] FS:  00007f2652ac0600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   15.729990] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   15.730200] CR2: 0000000020000080 CR3: 000000000f550000 CR4: 0000000000750ef0
[   15.730458] PKRU: 55555554
[   15.730561] Call Trace:
[   15.730656]  <TASK>
[   15.730739]  ? show_regs+0x6e/0x80
[   15.730880]  ? die_addr+0x45/0xb0
[   15.731013]  ? exc_general_protection+0x159/0x250
[   15.731197]  ? asm_exc_general_protection+0x2b/0x30
[   15.731383]  ? sysfs_remove_link_from_group+0x21/0x90
[   15.731573]  ? sysfs_remove_link_from_group+0x37/0x90
[   15.731765]  ? sysfs_remove_link_from_group+0x21/0x90
[   15.731956]  iommu_device_unlink+0x85/0xd0
[   15.732115]  iommu_deinit_device+0x11f/0x4c0
[   15.732283]  __iommu_group_remove_device+0x26b/0x300
[   15.732472]  iommu_group_remove_device+0x8a/0xb0
[   15.732649]  iommufd_test+0x1f1a/0x2d10
[   15.732795]  ? __pfx_lock_release+0x10/0x10
[   15.732955]  ? __pfx_lock_acquire+0x10/0x10
[   15.733117]  ? __pfx_iommufd_test+0x10/0x10
[   15.733276]  ? __sanitizer_cov_trace_const_cmp8+0x1c/0x30
[   15.733480]  iommufd_fops_ioctl+0x377/0x510
[   15.733640]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   15.733819]  ? trace_hardirqs_on+0x26/0x120
[   15.733981]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   15.734214]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   15.734400]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   15.734604]  ? security_file_ioctl+0x9d/0xd0
[   15.734778]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   15.734957]  __x64_sys_ioctl+0x1b9/0x230
[   15.735109]  do_syscall_64+0x3c/0x90
[   15.735248]  entry_SYSCALL_64_after_hwframe+0x6e/0xd8
[   15.735436] RIP: 0033:0x7f265283ee5d
[   15.735573] Code: ff c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d 93 af 1b 00 f7 d8 64 89 01 48
[   15.736227] RSP: 002b:00007ffe5c5aa1a8 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   15.736502] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f265283ee5d
[   15.736760] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   15.737017] RBP: 00007ffe5c5aa1c0 R08: 0000000000000800 R09: 0000000000000800
[   15.737274] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffe5c5aa2d8
[   15.737532] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f2652b01000
[   15.737795]  </TASK>
[   15.737881] Modules linked in:
[   15.738043] ---[ end trace 0000000000000000 ]---
[   15.738215] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   15.738427] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   15.739109] RSP: 0018:ffff88802457fba8 EFLAGS: 00010206
[   15.739303] RAX: dffffc0000000000 RBX: ffff888014f9b000 RCX: 0000000000000000
[   15.739561] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   15.739817] RBP: ffff88802457fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   15.740074] R10: ffff88800aad88df R11: 0000000000000001 R12: 0000000000000000
[   15.740331] R13: ffffffff85cc0180 R14: ffff8880109b6ac0 R15: ffffffff87070ae0
[   15.740589] FS:  00007f2652ac0600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   15.740879] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   15.741090] CR2: 0000000020000080 CR3: 000000000f550000 CR4: 0000000000750ef0
[   15.741347] PKRU: 55555554
[   15.741836] ------------[ cut here ]------------
[   15.742023] WARNING: CPU: 1 PID: 754 at drivers/iommu/iommufd/main.c:258 iommufd_fops_release+0x2a3/0x300
[   15.742376] Modules linked in:
[   15.742495] CPU: 1 PID: 754 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   15.742852] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   15.743252] RIP: 0010:iommufd_fops_release+0x2a3/0x300
[   15.743442] Code: 45 d0 65 48 2b 04 25 28 00 00 00 75 54 48 81 c4 88 00 00 00 31 c0 5b 41 5c 41 5d 41 5e 41 5f 5d c3 cc cc cc cc e8 ad 4f 0a fe <0f> 0b eb a6 e8 74 23 67 fe e9 f6 fe ff ff 48 89 85 50 ff ff ff e8
[   15.744090] RSP: 0018:ffff8880171ffc00 EFLAGS: 00010293
[   15.744281] RAX: 0000000000000000 RBX: ffff888024705a08 RCX: 0000000000000000
[   15.744536] RDX: ffff888014cd8000 RSI: ffffffff835563e3 RDI: ffffffff86702b48
[   15.744791] RBP: ffff8880171ffcb0 R08: 0000000000000000 R09: fffffbfff0eb2644
[   15.745045] R10: ffffffff87593227 R11: ffff888013449800 R12: 0000000000000000
[   15.745299] R13: ffff888012e89598 R14: ffff8880171ffc48 R15: ffffffff83556140
[   15.745554] FS:  0000000000000000(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
[   15.745846] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   15.746055] CR2: 00007fa281a25010 CR3: 000000000687e000 CR4: 0000000000750ee0
[   15.746313] PKRU: 55555554
[   15.746416] Call Trace:
[   15.746510]  <TASK>
[   15.746629]  ? show_regs+0x6e/0x80
[   15.746768]  ? __warn+0xef/0x340
[   15.746897]  ? report_bug+0x25e/0x4b0
[   15.747045]  ? iommufd_fops_release+0x2a3/0x300
[   15.747219]  ? report_bug+0x2cb/0x4b0
[   15.747366]  ? handle_bug+0x46/0x90
[   15.747500]  ? exc_invalid_op+0x1d/0x50
[   15.747645]  ? asm_exc_invalid_op+0x1f/0x30
[   15.747802]  ? __pfx_iommufd_fops_release+0x10/0x10
[   15.747985]  ? iommufd_fops_release+0x2a3/0x300
[   15.748156]  ? iommufd_fops_release+0x2a3/0x300
[   15.748328]  ? __pfx_iommufd_fops_release+0x10/0x10
[   15.748509]  ? rcu_is_watching+0x19/0xc0
[   15.748659]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   15.748859]  ? __pfx_iommufd_fops_release+0x10/0x10
[   15.749041]  __fput+0x424/0xaf0
[   15.749168]  ____fput+0x1f/0x30
[   15.749291]  task_work_run+0x19d/0x2b0
[   15.749435]  ? __pfx_task_work_run+0x10/0x10
[   15.749596]  ? __sanitizer_cov_trace_const_cmp1+0x1e/0x30
[   15.749794]  ? switch_task_namespaces+0xa9/0xe0
[   15.749965]  do_exit+0xac9/0x2790
[   15.750094]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   15.750325]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   15.750512]  ? __pfx_do_exit+0x10/0x10
[   15.750685]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   15.750892]  ? security_file_ioctl+0x9d/0xd0
[   15.751060]  make_task_dead+0x182/0x3c0
[   15.751212]  rewind_stack_and_make_dead+0x17/0x20
[   15.751388] RIP: 0033:0x7f265283ee5d
[   15.751522] Code: Unable to access opcode bytes at 0x7f265283ee33.
[   15.751743] RSP: 002b:00007ffe5c5aa1a8 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   15.752014] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f265283ee5d
[   15.752269] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   15.752523] RBP: 00007ffe5c5aa1c0 R08: 0000000000000800 R09: 0000000000000800
[   15.752777] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffe5c5aa2d8
[   15.753032] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f2652b01000
[   15.753292]  </TASK>
[   15.753377] irq event stamp: 0
[   15.753492] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   15.753718] hardirqs last disabled at (0): [<ffffffff8122f2d1>] copy_process+0x1c51/0x7140
[   15.754015] softirqs last  enabled at (0): [<ffffffff8122f312>] copy_process+0x1c92/0x7140
[   15.754311] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   15.754536] ---[ end trace 0000000000000000 ]---
[   15.757004] iommufd_mock iommufd_mock38: Adding to iommu group 38
[   15.757257] iommufd_mock iommufd_mock38: Removing from iommu group 38
[   15.757511] general protection fault, probably for non-canonical address 0xdffffc0000000006: 0000 [#39] PREEMPT SMP KASAN NOPTI
[   15.757918] KASAN: null-ptr-deref in range [0x0000000000000030-0x0000000000000037]
[   15.758190] CPU: 0 PID: 755 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   15.758502] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   15.758926] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   15.759140] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   15.759797] RSP: 0018:ffff88800ff97ba8 EFLAGS: 00010206
[   15.759991] RAX: dffffc0000000000 RBX: ffff888013f75000 RCX: 0000000000000000
[   15.760249] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   15.760505] RBP: ffff88800ff97bc0 R08: 0000000000000001 R09: ffffed100155b11b
[   15.760764] R10: ffff88800aad88df R11: 5f6466756d6d6f69 R12: 0000000000000000
[   15.761020] R13: ffffffff85cc0180 R14: ffff888013971080 R15: ffffffff87070ae0
[   15.761278] FS:  00007f7b1c5cb600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   15.761568] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   15.761779] CR2: 0000000020000080 CR3: 0000000018920000 CR4: 0000000000750ef0
[   15.762038] PKRU: 55555554
[   15.762142] Call Trace:
[   15.762236]  <TASK>
[   15.762319]  ? show_regs+0x6e/0x80
[   15.762455]  ? die_addr+0x45/0xb0
[   15.762589]  ? exc_general_protection+0x159/0x250
[   15.762777]  ? asm_exc_general_protection+0x2b/0x30
[   15.762963]  ? sysfs_remove_link_from_group+0x21/0x90
[   15.763154]  ? sysfs_remove_link_from_group+0x37/0x90
[   15.763345]  ? sysfs_remove_link_from_group+0x21/0x90
[   15.763535]  iommu_device_unlink+0x85/0xd0
[   15.763692]  iommu_deinit_device+0x11f/0x4c0
[   15.763858]  __iommu_group_remove_device+0x26b/0x300
[   15.764047]  iommu_group_remove_device+0x8a/0xb0
[   15.764224]  iommufd_test+0x1f1a/0x2d10
[   15.764370]  ? __pfx_lock_release+0x10/0x10
[   15.764530]  ? __pfx_lock_acquire+0x10/0x10
[   15.764691]  ? __pfx_iommufd_test+0x10/0x10
[   15.764850]  ? __sanitizer_cov_trace_const_cmp8+0x1c/0x30
[   15.765054]  iommufd_fops_ioctl+0x377/0x510
[   15.765214]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   15.765392]  ? trace_hardirqs_on+0x26/0x120
[   15.765554]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   15.765786]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   15.765972]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   15.766174]  ? security_file_ioctl+0x9d/0xd0
[   15.766339]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   15.766518]  __x64_sys_ioctl+0x1b9/0x230
[   15.766668]  do_syscall_64+0x3c/0x90
[   15.766809]  entry_SYSCALL_64_after_hwframe+0x6e/0xd8
[   15.766999] RIP: 0033:0x7f7b1c23ee5d
[   15.767136] Code: ff c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d 93 af 1b 00 f7 d8 64 89 01 48
[   15.767793] RSP: 002b:00007ffd885923a8 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   15.768067] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f7b1c23ee5d
[   15.768325] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   15.768582] RBP: 00007ffd885923c0 R08: 0000000000000800 R09: 0000000000000800
[   15.768840] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffd885924d8
[   15.769097] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f7b1c60c000
[   15.769359]  </TASK>
[   15.769445] Modules linked in:
[   15.769604] ---[ end trace 0000000000000000 ]---
[   15.769777] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   15.769988] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   15.770668] RSP: 0018:ffff88802457fba8 EFLAGS: 00010206
[   15.770862] RAX: dffffc0000000000 RBX: ffff888014f9b000 RCX: 0000000000000000
[   15.771115] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   15.771368] RBP: ffff88802457fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   15.771621] R10: ffff88800aad88df R11: 0000000000000001 R12: 0000000000000000
[   15.771874] R13: ffffffff85cc0180 R14: ffff8880109b6ac0 R15: ffffffff87070ae0
[   15.772127] FS:  00007f7b1c5cb600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   15.772413] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   15.772619] CR2: 0000000020000080 CR3: 0000000018920000 CR4: 0000000000750ef0
[   15.772874] PKRU: 55555554
[   15.773276] ------------[ cut here ]------------
[   15.773449] WARNING: CPU: 0 PID: 755 at drivers/iommu/iommufd/main.c:258 iommufd_fops_release+0x2a3/0x300
[   15.773795] Modules linked in:
[   15.773913] CPU: 0 PID: 755 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   15.774226] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   15.774708] RIP: 0010:iommufd_fops_release+0x2a3/0x300
[   15.774907] Code: 45 d0 65 48 2b 04 25 28 00 00 00 75 54 48 81 c4 88 00 00 00 31 c0 5b 41 5c 41 5d 41 5e 41 5f 5d c3 cc cc cc cc e8 ad 4f 0a fe <0f> 0b eb a6 e8 74 23 67 fe e9 f6 fe ff ff 48 89 85 50 ff ff ff e8
[   15.775551] RSP: 0018:ffff88800ff97c00 EFLAGS: 00010293
[   15.775740] RAX: 0000000000000000 RBX: ffff888024705b08 RCX: 0000000000000000
[   15.775992] RDX: ffff888010b50000 RSI: ffffffff835563e3 RDI: ffffffff86702b40
[   15.776245] RBP: ffff88800ff97cb0 R08: 0000000000000000 R09: fffffbfff0eb2644
[   15.776497] R10: ffffffff87593227 R11: ffff88801390c000 R12: 0000000000000000
[   15.776750] R13: ffff888013771818 R14: ffff88800ff97c48 R15: ffffffff83556140
[   15.777003] FS:  0000000000000000(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   15.777287] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   15.777494] CR2: 0000000020000080 CR3: 000000000687e000 CR4: 0000000000750ef0
[   15.777748] PKRU: 55555554
[   15.777850] Call Trace:
[   15.777943]  <TASK>
[   15.778024]  ? show_regs+0x6e/0x80
[   15.778156]  ? __warn+0xef/0x340
[   15.778281]  ? report_bug+0x25e/0x4b0
[   15.778423]  ? iommufd_fops_release+0x2a3/0x300
[   15.778601]  ? report_bug+0x2cb/0x4b0
[   15.778743]  ? handle_bug+0x46/0x90
[   15.778900]  ? exc_invalid_op+0x1d/0x50
[   15.779047]  ? asm_exc_invalid_op+0x1f/0x30
[   15.779202]  ? __pfx_iommufd_fops_release+0x10/0x10
[   15.779384]  ? iommufd_fops_release+0x2a3/0x300
[   15.779555]  ? iommufd_fops_release+0x2a3/0x300
[   15.779726]  ? __pfx_iommufd_fops_release+0x10/0x10
[   15.779906]  ? rcu_is_watching+0x19/0xc0
[   15.780055]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   15.780253]  ? __pfx_iommufd_fops_release+0x10/0x10
[   15.780433]  __fput+0x424/0xaf0
[   15.780559]  ____fput+0x1f/0x30
[   15.780681]  task_work_run+0x19d/0x2b0
[   15.780823]  ? __pfx_task_work_run+0x10/0x10
[   15.780983]  ? __sanitizer_cov_trace_const_cmp1+0x1e/0x30
[   15.781179]  ? switch_task_namespaces+0xa9/0xe0
[   15.781349]  do_exit+0xac9/0x2790
[   15.781476]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   15.781703]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   15.781885]  ? __pfx_do_exit+0x10/0x10
[   15.782026]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   15.782223]  ? security_file_ioctl+0x9d/0xd0
[   15.782386]  make_task_dead+0x182/0x3c0
[   15.782531]  rewind_stack_and_make_dead+0x17/0x20
[   15.782716] RIP: 0033:0x7f7b1c23ee5d
[   15.782854] Code: Unable to access opcode bytes at 0x7f7b1c23ee33.
[   15.783073] RSP: 002b:00007ffd885923a8 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   15.783343] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f7b1c23ee5d
[   15.783596] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   15.783848] RBP: 00007ffd885923c0 R08: 0000000000000800 R09: 0000000000000800
[   15.784100] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffd885924d8
[   15.784352] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f7b1c60c000
[   15.784610]  </TASK>
[   15.784695] irq event stamp: 0
[   15.784809] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   15.785033] hardirqs last disabled at (0): [<ffffffff8122f2d1>] copy_process+0x1c51/0x7140
[   15.785326] softirqs last  enabled at (0): [<ffffffff8122f312>] copy_process+0x1c92/0x7140
[   15.785618] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   15.785842] ---[ end trace 0000000000000000 ]---
[   15.788324] iommufd_mock iommufd_mock39: Adding to iommu group 39
[   15.788573] iommufd_mock iommufd_mock39: Removing from iommu group 39
[   15.788824] general protection fault, probably for non-canonical address 0xdffffc0000000006: 0000 [#40] PREEMPT SMP KASAN NOPTI
[   15.789232] KASAN: null-ptr-deref in range [0x0000000000000030-0x0000000000000037]
[   15.789504] CPU: 0 PID: 756 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   15.789816] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   15.790220] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   15.790432] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   15.791101] RSP: 0018:ffff888012017ba8 EFLAGS: 00010206
[   15.791294] RAX: dffffc0000000000 RBX: ffff888013f72000 RCX: 0000000000000000
[   15.791551] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   15.791808] RBP: ffff888012017bc0 R08: 0000000000000001 R09: ffffed100155b11b
[   15.792069] R10: ffff88800aad88df R11: 5f6466756d6d6f69 R12: 0000000000000000
[   15.792325] R13: ffffffff85cc0180 R14: ffff888013971340 R15: ffffffff87070ae0
[   15.792586] FS:  00007f3020c91600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   15.792878] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   15.793088] CR2: 0000000020000080 CR3: 0000000018920000 CR4: 0000000000750ef0
[   15.793347] PKRU: 55555554
[   15.793450] Call Trace:
[   15.793544]  <TASK>
[   15.793627]  ? show_regs+0x6e/0x80
[   15.793763]  ? die_addr+0x45/0xb0
[   15.793896]  ? exc_general_protection+0x159/0x250
[   15.794080]  ? asm_exc_general_protection+0x2b/0x30
[   15.794266]  ? sysfs_remove_link_from_group+0x21/0x90
[   15.794456]  ? sysfs_remove_link_from_group+0x37/0x90
[   15.794680]  ? sysfs_remove_link_from_group+0x21/0x90
[   15.794876]  iommu_device_unlink+0x85/0xd0
[   15.795033]  iommu_deinit_device+0x11f/0x4c0
[   15.795199]  __iommu_group_remove_device+0x26b/0x300
[   15.795389]  iommu_group_remove_device+0x8a/0xb0
[   15.795566]  iommufd_test+0x1f1a/0x2d10
[   15.795713]  ? __pfx_lock_release+0x10/0x10
[   15.795874]  ? __pfx_lock_acquire+0x10/0x10
[   15.796035]  ? __pfx_iommufd_test+0x10/0x10
[   15.796195]  ? __sanitizer_cov_trace_const_cmp8+0x1c/0x30
[   15.796399]  iommufd_fops_ioctl+0x377/0x510
[   15.796561]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   15.796740]  ? trace_hardirqs_on+0x26/0x120
[   15.796902]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   15.797135]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   15.797322]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   15.797524]  ? security_file_ioctl+0x9d/0xd0
[   15.797691]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   15.797869]  __x64_sys_ioctl+0x1b9/0x230
[   15.798020]  do_syscall_64+0x3c/0x90
[   15.798157]  entry_SYSCALL_64_after_hwframe+0x6e/0xd8
[   15.798347] RIP: 0033:0x7f3020a3ee5d
[   15.798483] Code: ff c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d 93 af 1b 00 f7 d8 64 89 01 48
[   15.799144] RSP: 002b:00007ffea7607088 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   15.799419] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f3020a3ee5d
[   15.799677] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   15.799935] RBP: 00007ffea76070a0 R08: 0000000000000800 R09: 0000000000000800
[   15.800193] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffea76071b8
[   15.800451] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f3020cd2000
[   15.800715]  </TASK>
[   15.800801] Modules linked in:
[   15.800949] ---[ end trace 0000000000000000 ]---
[   15.801121] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   15.801336] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   15.801992] RSP: 0018:ffff88802457fba8 EFLAGS: 00010206
[   15.802185] RAX: dffffc0000000000 RBX: ffff888014f9b000 RCX: 0000000000000000
[   15.802443] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   15.802708] RBP: ffff88802457fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   15.802970] R10: ffff88800aad88df R11: 0000000000000001 R12: 0000000000000000
[   15.803228] R13: ffffffff85cc0180 R14: ffff8880109b6ac0 R15: ffffffff87070ae0
[   15.803486] FS:  00007f3020c91600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   15.803777] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   15.803987] CR2: 0000000020000080 CR3: 0000000018920000 CR4: 0000000000750ef0
[   15.804246] PKRU: 55555554
[   15.804612] ------------[ cut here ]------------
[   15.804784] WARNING: CPU: 0 PID: 756 at drivers/iommu/iommufd/main.c:258 iommufd_fops_release+0x2a3/0x300
[   15.805129] Modules linked in:
[   15.805247] CPU: 0 PID: 756 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   15.805561] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   15.805965] RIP: 0010:iommufd_fops_release+0x2a3/0x300
[   15.806157] Code: 45 d0 65 48 2b 04 25 28 00 00 00 75 54 48 81 c4 88 00 00 00 31 c0 5b 41 5c 41 5d 41 5e 41 5f 5d c3 cc cc cc cc e8 ad 4f 0a fe <0f> 0b eb a6 e8 74 23 67 fe e9 f6 fe ff ff 48 89 85 50 ff ff ff e8
[   15.806836] RSP: 0018:ffff888012017c00 EFLAGS: 00010293
[   15.807029] RAX: 0000000000000000 RBX: ffff888024705208 RCX: 0000000000000000
[   15.807286] RDX: ffff88801388a500 RSI: ffffffff835563e3 RDI: ffffffff86702b40
[   15.807543] RBP: ffff888012017cb0 R08: 0000000000000000 R09: fffffbfff0eb2644
[   15.807800] R10: ffffffff87593227 R11: ffff88801374d600 R12: 0000000000000000
[   15.808058] R13: ffff888018ab0198 R14: ffff888012017c48 R15: ffffffff83556140
[   15.808315] FS:  0000000000000000(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   15.808607] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   15.808817] CR2: 0000000020000080 CR3: 000000000687e000 CR4: 0000000000750ef0
[   15.809076] PKRU: 55555554
[   15.809180] Call Trace:
[   15.809274]  <TASK>
[   15.809357]  ? show_regs+0x6e/0x80
[   15.809490]  ? __warn+0xef/0x340
[   15.809617]  ? report_bug+0x25e/0x4b0
[   15.809759]  ? iommufd_fops_release+0x2a3/0x300
[   15.809932]  ? report_bug+0x2cb/0x4b0
[   15.810076]  ? handle_bug+0x46/0x90
[   15.810211]  ? exc_invalid_op+0x1d/0x50
[   15.810358]  ? asm_exc_invalid_op+0x1f/0x30
[   15.810516]  ? __pfx_iommufd_fops_release+0x10/0x10
[   15.810708]  ? iommufd_fops_release+0x2a3/0x300
[   15.810882]  ? iommufd_fops_release+0x2a3/0x300
[   15.811053]  ? __pfx_iommufd_fops_release+0x10/0x10
[   15.811233]  ? rcu_is_watching+0x19/0xc0
[   15.811382]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   15.811580]  ? __pfx_iommufd_fops_release+0x10/0x10
[   15.811760]  __fput+0x424/0xaf0
[   15.811887]  ____fput+0x1f/0x30
[   15.812009]  task_work_run+0x19d/0x2b0
[   15.812152]  ? __pfx_task_work_run+0x10/0x10
[   15.812312]  ? __sanitizer_cov_trace_const_cmp1+0x1e/0x30
[   15.812509]  ? switch_task_namespaces+0xa9/0xe0
[   15.812679]  do_exit+0xac9/0x2790
[   15.812807]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   15.813033]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   15.813216]  ? __pfx_do_exit+0x10/0x10
[   15.813357]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   15.813555]  ? security_file_ioctl+0x9d/0xd0
[   15.813717]  make_task_dead+0x182/0x3c0
[   15.813862]  rewind_stack_and_make_dead+0x17/0x20
[   15.814037] RIP: 0033:0x7f3020a3ee5d
[   15.814171] Code: Unable to access opcode bytes at 0x7f3020a3ee33.
[   15.814390] RSP: 002b:00007ffea7607088 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   15.814666] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f3020a3ee5d
[   15.814930] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   15.815183] RBP: 00007ffea76070a0 R08: 0000000000000800 R09: 0000000000000800
[   15.815436] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffea76071b8
[   15.815808] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f3020cd2000
[   15.816066]  </TASK>
[   15.816150] irq event stamp: 0
[   15.816264] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   15.816489] hardirqs last disabled at (0): [<ffffffff8122f2d1>] copy_process+0x1c51/0x7140
[   15.816782] softirqs last  enabled at (0): [<ffffffff8122f312>] copy_process+0x1c92/0x7140
[   15.817075] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   15.817299] ---[ end trace 0000000000000000 ]---
[   15.819765] iommufd_mock iommufd_mock40: Adding to iommu group 40
[   15.820014] iommufd_mock iommufd_mock40: Removing from iommu group 40
[   15.820267] general protection fault, probably for non-canonical address 0xdffffc0000000006: 0000 [#41] PREEMPT SMP KASAN NOPTI
[   15.820676] KASAN: null-ptr-deref in range [0x0000000000000030-0x0000000000000037]
[   15.820949] CPU: 0 PID: 757 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   15.821262] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   15.821666] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   15.821879] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   15.822533] RSP: 0018:ffff888014e67ba8 EFLAGS: 00010206
[   15.822727] RAX: dffffc0000000000 RBX: ffff888013f76000 RCX: 0000000000000000
[   15.822992] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   15.823250] RBP: ffff888014e67bc0 R08: 0000000000000001 R09: ffffed100155b11b
[   15.823508] R10: ffff88800aad88df R11: 5f6466756d6d6f69 R12: 0000000000000000
[   15.823766] R13: ffffffff85cc0180 R14: ffff88800f8d2720 R15: ffffffff87070ae0
[   15.824023] FS:  00007f6309512600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   15.824314] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   15.824524] CR2: 0000000020000080 CR3: 0000000018920000 CR4: 0000000000750ef0
[   15.824783] PKRU: 55555554
[   15.824887] Call Trace:
[   15.824985]  <TASK>
[   15.825069]  ? show_regs+0x6e/0x80
[   15.825205]  ? die_addr+0x45/0xb0
[   15.825339]  ? exc_general_protection+0x159/0x250
[   15.825522]  ? asm_exc_general_protection+0x2b/0x30
[   15.825708]  ? sysfs_remove_link_from_group+0x21/0x90
[   15.825899]  ? sysfs_remove_link_from_group+0x37/0x90
[   15.826090]  ? sysfs_remove_link_from_group+0x21/0x90
[   15.826281]  iommu_device_unlink+0x85/0xd0
[   15.826438]  iommu_deinit_device+0x11f/0x4c0
[   15.826604]  __iommu_group_remove_device+0x26b/0x300
[   15.826801]  iommu_group_remove_device+0x8a/0xb0
[   15.826978]  iommufd_test+0x1f1a/0x2d10
[   15.827124]  ? __pfx_lock_release+0x10/0x10
[   15.827284]  ? __pfx_lock_acquire+0x10/0x10
[   15.827445]  ? __pfx_iommufd_test+0x10/0x10
[   15.827605]  ? __sanitizer_cov_trace_const_cmp8+0x1c/0x30
[   15.827809]  iommufd_fops_ioctl+0x377/0x510
[   15.827973]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   15.828154]  ? trace_hardirqs_on+0x26/0x120
[   15.828316]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   15.828549]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   15.828735]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   15.828937]  ? security_file_ioctl+0x9d/0xd0
[   15.829103]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   15.829282]  __x64_sys_ioctl+0x1b9/0x230
[   15.829433]  do_syscall_64+0x3c/0x90
[   15.829571]  entry_SYSCALL_64_after_hwframe+0x6e/0xd8
[   15.829759] RIP: 0033:0x7f630923ee5d
[   15.829895] Code: ff c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d 93 af 1b 00 f7 d8 64 89 01 48
[   15.830551] RSP: 002b:00007fff2ba31b98 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   15.830833] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f630923ee5d
[   15.831091] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   15.831348] RBP: 00007fff2ba31bb0 R08: 0000000000000800 R09: 0000000000000800
[   15.831605] R10: 0000000000000000 R11: 0000000000000213 R12: 00007fff2ba31cc8
[   15.831862] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f6309553000
[   15.832124]  </TASK>
[   15.832210] Modules linked in:
[   15.832362] ---[ end trace 0000000000000000 ]---
[   15.832535] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   15.832746] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   15.833401] RSP: 0018:ffff88802457fba8 EFLAGS: 00010206
[   15.833593] RAX: dffffc0000000000 RBX: ffff888014f9b000 RCX: 0000000000000000
[   15.833850] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   15.834108] RBP: ffff88802457fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   15.834365] R10: ffff88800aad88df R11: 0000000000000001 R12: 0000000000000000
[   15.834643] R13: ffffffff85cc0180 R14: ffff8880109b6ac0 R15: ffffffff87070ae0
[   15.834914] FS:  00007f6309512600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   15.835200] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   15.835406] CR2: 0000000020000080 CR3: 0000000018920000 CR4: 0000000000750ef0
[   15.835660] PKRU: 55555554
[   15.836013] ------------[ cut here ]------------
[   15.836184] WARNING: CPU: 0 PID: 757 at drivers/iommu/iommufd/main.c:258 iommufd_fops_release+0x2a3/0x300
[   15.836530] Modules linked in:
[   15.836647] CPU: 0 PID: 757 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   15.836959] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   15.837364] RIP: 0010:iommufd_fops_release+0x2a3/0x300
[   15.837555] Code: 45 d0 65 48 2b 04 25 28 00 00 00 75 54 48 81 c4 88 00 00 00 31 c0 5b 41 5c 41 5d 41 5e 41 5f 5d c3 cc cc cc cc e8 ad 4f 0a fe <0f> 0b eb a6 e8 74 23 67 fe e9 f6 fe ff ff 48 89 85 50 ff ff ff e8
[   15.838209] RSP: 0018:ffff888014e67c00 EFLAGS: 00010293
[   15.838401] RAX: 0000000000000000 RBX: ffff888024705f08 RCX: 0000000000000000
[   15.838671] RDX: ffff88801388ca00 RSI: ffffffff835563e3 RDI: ffffffff86702b40
[   15.838929] RBP: ffff888014e67cb0 R08: 0000000000000000 R09: fffffbfff0eb2644
[   15.839182] R10: ffffffff87593227 R11: ffff888018b66e00 R12: 0000000000000000
[   15.839433] R13: ffff888013548b98 R14: ffff888014e67c48 R15: ffffffff83556140
[   15.839686] FS:  0000000000000000(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   15.839971] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   15.840177] CR2: 0000000020000080 CR3: 000000000687e000 CR4: 0000000000750ef0
[   15.840431] PKRU: 55555554
[   15.840533] Call Trace:
[   15.840625]  <TASK>
[   15.840707]  ? show_regs+0x6e/0x80
[   15.840838]  ? __warn+0xef/0x340
[   15.840963]  ? report_bug+0x25e/0x4b0
[   15.841103]  ? iommufd_fops_release+0x2a3/0x300
[   15.841272]  ? report_bug+0x2cb/0x4b0
[   15.841414]  ? handle_bug+0x46/0x90
[   15.841547]  ? exc_invalid_op+0x1d/0x50
[   15.841691]  ? asm_exc_invalid_op+0x1f/0x30
[   15.841846]  ? __pfx_iommufd_fops_release+0x10/0x10
[   15.842028]  ? iommufd_fops_release+0x2a3/0x300
[   15.842197]  ? iommufd_fops_release+0x2a3/0x300
[   15.842367]  ? __pfx_iommufd_fops_release+0x10/0x10
[   15.842548]  ? rcu_is_watching+0x19/0xc0
[   15.842707]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   15.842908]  ? __pfx_iommufd_fops_release+0x10/0x10
[   15.843088]  __fput+0x424/0xaf0
[   15.843213]  ____fput+0x1f/0x30
[   15.843336]  task_work_run+0x19d/0x2b0
[   15.843478]  ? __pfx_task_work_run+0x10/0x10
[   15.843638]  ? __sanitizer_cov_trace_const_cmp1+0x1e/0x30
[   15.843835]  ? switch_task_namespaces+0xa9/0xe0
[   15.844005]  do_exit+0xac9/0x2790
[   15.844134]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   15.844363]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   15.844544]  ? __pfx_do_exit+0x10/0x10
[   15.844685]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   15.844882]  ? security_file_ioctl+0x9d/0xd0
[   15.845044]  make_task_dead+0x182/0x3c0
[   15.845189]  rewind_stack_and_make_dead+0x17/0x20
[   15.845364] RIP: 0033:0x7f630923ee5d
[   15.845497] Code: Unable to access opcode bytes at 0x7f630923ee33.
[   15.845716] RSP: 002b:00007fff2ba31b98 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   15.846010] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f630923ee5d
[   15.846264] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   15.846516] RBP: 00007fff2ba31bb0 R08: 0000000000000800 R09: 0000000000000800
[   15.846779] R10: 0000000000000000 R11: 0000000000000213 R12: 00007fff2ba31cc8
[   15.847032] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f6309553000
[   15.847290]  </TASK>
[   15.847375] irq event stamp: 0
[   15.847489] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   15.847714] hardirqs last disabled at (0): [<ffffffff8122f2d1>] copy_process+0x1c51/0x7140
[   15.848008] softirqs last  enabled at (0): [<ffffffff8122f312>] copy_process+0x1c92/0x7140
[   15.848300] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   15.848524] ---[ end trace 0000000000000000 ]---
[   15.851021] iommufd_mock iommufd_mock41: Adding to iommu group 41
[   15.851274] iommufd_mock iommufd_mock41: Removing from iommu group 41
[   15.851538] general protection fault, probably for non-canonical address 0xdffffc0000000006: 0000 [#42] PREEMPT SMP KASAN NOPTI
[   15.851952] KASAN: null-ptr-deref in range [0x0000000000000030-0x0000000000000037]
[   15.852224] CPU: 0 PID: 758 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   15.852536] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   15.852941] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   15.853153] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   15.853807] RSP: 0018:ffff8880147a7ba8 EFLAGS: 00010206
[   15.853999] RAX: dffffc0000000000 RBX: ffff888013f70000 RCX: 0000000000000000
[   15.854256] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   15.854512] RBP: ffff8880147a7bc0 R08: 0000000000000001 R09: ffffed100155b11b
[   15.854814] R10: ffff88800aad88df R11: 5f6466756d6d6f69 R12: 0000000000000000
[   15.855081] R13: ffffffff85cc0180 R14: ffff88800bd3d360 R15: ffffffff87070ae0
[   15.855338] FS:  00007f0a26521600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   15.855629] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   15.855840] CR2: 0000000020000080 CR3: 0000000018920000 CR4: 0000000000750ef0
[   15.856099] PKRU: 55555554
[   15.856203] Call Trace:
[   15.856297]  <TASK>
[   15.856380]  ? show_regs+0x6e/0x80
[   15.856517]  ? die_addr+0x45/0xb0
[   15.856650]  ? exc_general_protection+0x159/0x250
[   15.856833]  ? asm_exc_general_protection+0x2b/0x30
[   15.857019]  ? sysfs_remove_link_from_group+0x21/0x90
[   15.857214]  ? sysfs_remove_link_from_group+0x37/0x90
[   15.857405]  ? sysfs_remove_link_from_group+0x21/0x90
[   15.857595]  iommu_device_unlink+0x85/0xd0
[   15.857752]  iommu_deinit_device+0x11f/0x4c0
[   15.857918]  __iommu_group_remove_device+0x26b/0x300
[   15.858107]  iommu_group_remove_device+0x8a/0xb0
[   15.858284]  iommufd_test+0x1f1a/0x2d10
[   15.858430]  ? __pfx_lock_release+0x10/0x10
[   15.858590]  ? __pfx_lock_acquire+0x10/0x10
[   15.858767]  ? __pfx_iommufd_test+0x10/0x10
[   15.858946]  ? __sanitizer_cov_trace_const_cmp8+0x1c/0x30
[   15.859150]  iommufd_fops_ioctl+0x377/0x510
[   15.859311]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   15.859489]  ? trace_hardirqs_on+0x26/0x120
[   15.859651]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   15.859883]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   15.860070]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   15.860272]  ? security_file_ioctl+0x9d/0xd0
[   15.860438]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   15.860617]  __x64_sys_ioctl+0x1b9/0x230
[   15.860767]  do_syscall_64+0x3c/0x90
[   15.860905]  entry_SYSCALL_64_after_hwframe+0x6e/0xd8
[   15.861094] RIP: 0033:0x7f0a2623ee5d
[   15.861229] Code: ff c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d 93 af 1b 00 f7 d8 64 89 01 48
[   15.861886] RSP: 002b:00007fff9532c6d8 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   15.862168] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f0a2623ee5d
[   15.862426] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   15.862688] RBP: 00007fff9532c6f0 R08: 0000000000000800 R09: 0000000000000800
[   15.862956] R10: 0000000000000000 R11: 0000000000000213 R12: 00007fff9532c808
[   15.863213] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f0a26562000
[   15.863476]  </TASK>
[   15.863561] Modules linked in:
[   15.863793] ---[ end trace 0000000000000000 ]---
[   15.863968] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   15.864183] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   15.864852] RSP: 0018:ffff88802457fba8 EFLAGS: 00010206
[   15.865049] RAX: dffffc0000000000 RBX: ffff888014f9b000 RCX: 0000000000000000
[   15.865314] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   15.865578] RBP: ffff88802457fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   15.865871] R10: ffff88800aad88df R11: 0000000000000001 R12: 0000000000000000
[   15.866201] R13: ffffffff85cc0180 R14: ffff8880109b6ac0 R15: ffffffff87070ae0
[   15.866512] FS:  00007f0a26521600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   15.866837] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   15.867056] CR2: 0000000020000080 CR3: 0000000018920000 CR4: 0000000000750ef0
[   15.867341] PKRU: 55555554
[   15.867752] ------------[ cut here ]------------
[   15.867948] WARNING: CPU: 0 PID: 758 at drivers/iommu/iommufd/main.c:258 iommufd_fops_release+0x2a3/0x300
[   15.868333] Modules linked in:
[   15.868461] CPU: 0 PID: 758 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   15.868828] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   15.869291] RIP: 0010:iommufd_fops_release+0x2a3/0x300
[   15.869484] Code: 45 d0 65 48 2b 04 25 28 00 00 00 75 54 48 81 c4 88 00 00 00 31 c0 5b 41 5c 41 5d 41 5e 41 5f 5d c3 cc cc cc cc e8 ad 4f 0a fe <0f> 0b eb a6 e8 74 23 67 fe e9 f6 fe ff ff 48 89 85 50 ff ff ff e8
[   15.870200] RSP: 0018:ffff8880147a7c00 EFLAGS: 00010293
[   15.870416] RAX: 0000000000000000 RBX: ffff888024705908 RCX: 0000000000000000
[   15.870726] RDX: ffff88800bb2a500 RSI: ffffffff835563e3 RDI: ffffffff86702b40
[   15.871009] RBP: ffff8880147a7cb0 R08: 0000000000000000 R09: fffffbfff0eb2644
[   15.871280] R10: ffffffff87593227 R11: ffff888018a95000 R12: 0000000000000000
[   15.871586] R13: ffff8880132deb98 R14: ffff8880147a7c48 R15: ffffffff83556140
[   15.871851] FS:  0000000000000000(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   15.872184] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   15.872396] CR2: 0000000020000080 CR3: 000000000687e000 CR4: 0000000000750ef0
[   15.872677] PKRU: 55555554
[   15.872820] Call Trace:
[   15.872915]  <TASK>
[   15.872998]  ? show_regs+0x6e/0x80
[   15.873141]  ? __warn+0xef/0x340
[   15.873281]  ? report_bug+0x25e/0x4b0
[   15.873462]  ? iommufd_fops_release+0x2a3/0x300
[   15.873635]  ? report_bug+0x2cb/0x4b0
[   15.873795]  ? handle_bug+0x46/0x90
[   15.873967]  ? exc_invalid_op+0x1d/0x50
[   15.874116]  ? asm_exc_invalid_op+0x1f/0x30
[   15.874274]  ? __pfx_iommufd_fops_release+0x10/0x10
[   15.874482]  ? iommufd_fops_release+0x2a3/0x300
[   15.874862]  ? iommufd_fops_release+0x2a3/0x300
[   15.875039]  ? __pfx_iommufd_fops_release+0x10/0x10
[   15.875223]  ? rcu_is_watching+0x19/0xc0
[   15.875375]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   15.875587]  ? __pfx_iommufd_fops_release+0x10/0x10
[   15.875822]  __fput+0x424/0xaf0
[   15.875952]  ____fput+0x1f/0x30
[   15.876077]  task_work_run+0x19d/0x2b0
[   15.876233]  ? __pfx_task_work_run+0x10/0x10
[   15.876436]  ? __sanitizer_cov_trace_const_cmp1+0x1e/0x30
[   15.876637]  ? switch_task_namespaces+0xa9/0xe0
[   15.876821]  do_exit+0xac9/0x2790
[   15.876995]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   15.877227]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   15.877420]  ? __pfx_do_exit+0x10/0x10
[   15.877611]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   15.877812]  ? security_file_ioctl+0x9d/0xd0
[   15.877977]  make_task_dead+0x182/0x3c0
[   15.878126]  rewind_stack_and_make_dead+0x17/0x20
[   15.878365] RIP: 0033:0x7f0a2623ee5d
[   15.878504] Code: Unable to access opcode bytes at 0x7f0a2623ee33.
[   15.878735] RSP: 002b:00007fff9532c6d8 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   15.879015] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f0a2623ee5d
[   15.879296] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   15.879593] RBP: 00007fff9532c6f0 R08: 0000000000000800 R09: 0000000000000800
[   15.879857] R10: 0000000000000000 R11: 0000000000000213 R12: 00007fff9532c808
[   15.880165] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f0a26562000
[   15.880429]  </TASK>
[   15.880534] irq event stamp: 0
[   15.880691] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   15.880920] hardirqs last disabled at (0): [<ffffffff8122f2d1>] copy_process+0x1c51/0x7140
[   15.881280] softirqs last  enabled at (0): [<ffffffff8122f312>] copy_process+0x1c92/0x7140
[   15.881579] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   15.881869] ---[ end trace 0000000000000000 ]---
[   15.884991] iommufd_mock iommufd_mock42: Adding to iommu group 42
[   15.885307] iommufd_mock iommufd_mock42: Removing from iommu group 42
[   15.885568] general protection fault, probably for non-canonical address 0xdffffc0000000006: 0000 [#43] PREEMPT SMP KASAN NOPTI
[   15.885985] KASAN: null-ptr-deref in range [0x0000000000000030-0x0000000000000037]
[   15.886295] CPU: 0 PID: 759 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   15.886622] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   15.887060] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   15.887282] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   15.887953] RSP: 0018:ffff888014e67ba8 EFLAGS: 00010206
[   15.888150] RAX: dffffc0000000000 RBX: ffff88800bbe1000 RCX: 0000000000000000
[   15.888414] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   15.888677] RBP: ffff888014e67bc0 R08: 0000000000000001 R09: ffffed100155b11b
[   15.888940] R10: ffff88800aad88df R11: 5f6466756d6d6f69 R12: 0000000000000000
[   15.889203] R13: ffffffff85cc0180 R14: ffff88800bc88020 R15: ffffffff87070ae0
[   15.889466] FS:  00007f934dca4600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   15.889763] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   15.889978] CR2: 0000000020000080 CR3: 0000000011dac000 CR4: 0000000000750ef0
[   15.890243] PKRU: 55555554
[   15.890348] Call Trace:
[   15.890444]  <TASK>
[   15.890529]  ? show_regs+0x6e/0x80
[   15.890669]  ? die_addr+0x45/0xb0
[   15.890812]  ? exc_general_protection+0x159/0x250
[   15.891001]  ? asm_exc_general_protection+0x2b/0x30
[   15.891192]  ? sysfs_remove_link_from_group+0x21/0x90
[   15.891386]  ? sysfs_remove_link_from_group+0x37/0x90
[   15.891581]  ? sysfs_remove_link_from_group+0x21/0x90
[   15.891778]  iommu_device_unlink+0x85/0xd0
[   15.891938]  iommu_deinit_device+0x11f/0x4c0
[   15.892107]  __iommu_group_remove_device+0x26b/0x300
[   15.892302]  iommu_group_remove_device+0x8a/0xb0
[   15.892482]  iommufd_test+0x1f1a/0x2d10
[   15.892632]  ? __pfx_lock_release+0x10/0x10
[   15.892796]  ? __pfx_lock_acquire+0x10/0x10
[   15.892961]  ? __pfx_iommufd_test+0x10/0x10
[   15.893124]  ? __sanitizer_cov_trace_const_cmp8+0x1c/0x30
[   15.893332]  iommufd_fops_ioctl+0x377/0x510
[   15.893496]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   15.893678]  ? trace_hardirqs_on+0x26/0x120
[   15.893844]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   15.894082]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   15.894273]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   15.894479]  ? security_file_ioctl+0x9d/0xd0
[   15.894648]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   15.894835]  __x64_sys_ioctl+0x1b9/0x230
[   15.894989]  do_syscall_64+0x3c/0x90
[   15.895129]  entry_SYSCALL_64_after_hwframe+0x6e/0xd8
[   15.895322] RIP: 0033:0x7f934da3ee5d
[   15.895462] Code: ff c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d 93 af 1b 00 f7 d8 64 89 01 48
[   15.896131] RSP: 002b:00007fff7ea2cad8 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   15.896411] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f934da3ee5d
[   15.896674] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   15.896937] RBP: 00007fff7ea2caf0 R08: 0000000000000800 R09: 0000000000000800
[   15.897199] R10: 0000000000000000 R11: 0000000000000213 R12: 00007fff7ea2cc08
[   15.897462] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f934dce5000
[   15.897730]  </TASK>
[   15.897818] Modules linked in:
[   15.898000] ---[ end trace 0000000000000000 ]---
[   15.898176] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   15.898392] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   15.899100] RSP: 0018:ffff88802457fba8 EFLAGS: 00010206
[   15.899294] RAX: dffffc0000000000 RBX: ffff888014f9b000 RCX: 0000000000000000
[   15.899552] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   15.899879] RBP: ffff88802457fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   15.900138] R10: ffff88800aad88df R11: 0000000000000001 R12: 0000000000000000
[   15.900416] R13: ffffffff85cc0180 R14: ffff8880109b6ac0 R15: ffffffff87070ae0
[   15.900701] FS:  00007f934dca4600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   15.900999] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   15.901257] CR2: 0000000020000080 CR3: 0000000011dac000 CR4: 0000000000750ef0
[   15.901516] PKRU: 55555554
[   15.901941] ------------[ cut here ]------------
[   15.902117] WARNING: CPU: 0 PID: 759 at drivers/iommu/iommufd/main.c:258 iommufd_fops_release+0x2a3/0x300
[   15.902529] Modules linked in:
[   15.902665] CPU: 0 PID: 759 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   15.902991] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   15.903469] RIP: 0010:iommufd_fops_release+0x2a3/0x300
[   15.903672] Code: 45 d0 65 48 2b 04 25 28 00 00 00 75 54 48 81 c4 88 00 00 00 31 c0 5b 41 5c 41 5d 41 5e 41 5f 5d c3 cc cc cc cc e8 ad 4f 0a fe <0f> 0b eb a6 e8 74 23 67 fe e9 f6 fe ff ff 48 89 85 50 ff ff ff e8
[   15.904394] RSP: 0018:ffff888014e67c00 EFLAGS: 00010293
[   15.904654] RAX: 0000000000000000 RBX: ffff888024705408 RCX: 0000000000000000
[   15.904919] RDX: ffff88800fc12500 RSI: ffffffff835563e3 RDI: ffffffff86702b40
[   15.905199] RBP: ffff888014e67cb0 R08: 0000000000000000 R09: fffffbfff0eb2644
[   15.905501] R10: ffffffff87593227 R11: ffff888013310e00 R12: 0000000000000000
[   15.905770] R13: ffff8880111ec198 R14: ffff888014e67c48 R15: ffffffff83556140
[   15.906084] FS:  0000000000000000(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   15.906386] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   15.906686] CR2: 0000000020000080 CR3: 000000000687e000 CR4: 0000000000750ef0
[   15.906956] PKRU: 55555554
[   15.907062] Call Trace:
[   15.907158]  <TASK>
[   15.907243]  ? show_regs+0x6e/0x80
[   15.907386]  ? __warn+0xef/0x340
[   15.907571]  ? report_bug+0x25e/0x4b0
[   15.907717]  ? iommufd_fops_release+0x2a3/0x300
[   15.907893]  ? report_bug+0x2cb/0x4b0
[   15.908054]  ? handle_bug+0x46/0x90
[   15.908233]  ? exc_invalid_op+0x1d/0x50
[   15.908383]  ? asm_exc_invalid_op+0x1f/0x30
[   15.908545]  ? __pfx_iommufd_fops_release+0x10/0x10
[   15.908791]  ? iommufd_fops_release+0x2a3/0x300
[   15.908967]  ? iommufd_fops_release+0x2a3/0x300
[   15.909144]  ? __pfx_iommufd_fops_release+0x10/0x10
[   15.909388]  ? rcu_is_watching+0x19/0xc0
[   15.909544]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   15.909751]  ? __pfx_iommufd_fops_release+0x10/0x10
[   15.909997]  __fput+0x424/0xaf0
[   15.910129]  ____fput+0x1f/0x30
[   15.910257]  task_work_run+0x19d/0x2b0
[   15.910405]  ? __pfx_task_work_run+0x10/0x10
[   15.910600]  ? __sanitizer_cov_trace_const_cmp1+0x1e/0x30
[   15.910856]  ? switch_task_namespaces+0xa9/0xe0
[   15.911034]  do_exit+0xac9/0x2790
[   15.911167]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   15.911403]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   15.911604]  ? __pfx_do_exit+0x10/0x10
[   15.911796]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   15.912002]  ? security_file_ioctl+0x9d/0xd0
[   15.912180]  make_task_dead+0x182/0x3c0
[   15.912382]  rewind_stack_and_make_dead+0x17/0x20
[   15.912564] RIP: 0033:0x7f934da3ee5d
[   15.912704] Code: Unable to access opcode bytes at 0x7f934da3ee33.
[   15.912990] RSP: 002b:00007fff7ea2cad8 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   15.913271] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f934da3ee5d
[   15.913591] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   15.913854] RBP: 00007fff7ea2caf0 R08: 0000000000000800 R09: 0000000000000800
[   15.914177] R10: 0000000000000000 R11: 0000000000000213 R12: 00007fff7ea2cc08
[   15.914442] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f934dce5000
[   15.914738]  </TASK>
[   15.914870] irq event stamp: 0
[   15.914987] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   15.915215] hardirqs last disabled at (0): [<ffffffff8122f2d1>] copy_process+0x1c51/0x7140
[   15.915515] softirqs last  enabled at (0): [<ffffffff8122f312>] copy_process+0x1c92/0x7140
[   15.915878] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   15.916107] ---[ end trace 0000000000000000 ]---
[   15.919006] iommufd_mock iommufd_mock43: Adding to iommu group 43
[   15.919255] iommufd_mock iommufd_mock43: Removing from iommu group 43
[   15.919513] general protection fault, probably for non-canonical address 0xdffffc0000000006: 0000 [#44] PREEMPT SMP KASAN NOPTI
[   15.919928] KASAN: null-ptr-deref in range [0x0000000000000030-0x0000000000000037]
[   15.920253] CPU: 0 PID: 760 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   15.920572] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   15.920985] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   15.921204] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   15.921870] RSP: 0018:ffff8880147a7ba8 EFLAGS: 00010206
[   15.922067] RAX: dffffc0000000000 RBX: ffff888011658000 RCX: 0000000000000000
[   15.922329] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   15.922593] RBP: ffff8880147a7bc0 R08: 0000000000000001 R09: ffffed100155b11b
[   15.922863] R10: ffff88800aad88df R11: 5f6466756d6d6f69 R12: 0000000000000000
[   15.923125] R13: ffffffff85cc0180 R14: ffff88800fd72560 R15: ffffffff87070ae0
[   15.923388] FS:  00007f413ba68600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   15.923683] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   15.923898] CR2: 0000000020000080 CR3: 0000000018920000 CR4: 0000000000750ef0
[   15.924162] PKRU: 55555554
[   15.924267] Call Trace:
[   15.924364]  <TASK>
[   15.924448]  ? show_regs+0x6e/0x80
[   15.924587]  ? die_addr+0x45/0xb0
[   15.924722]  ? exc_general_protection+0x159/0x250
[   15.924909]  ? asm_exc_general_protection+0x2b/0x30
[   15.925100]  ? sysfs_remove_link_from_group+0x21/0x90
[   15.925294]  ? sysfs_remove_link_from_group+0x37/0x90
[   15.925488]  ? sysfs_remove_link_from_group+0x21/0x90
[   15.925682]  iommu_device_unlink+0x85/0xd0
[   15.925842]  iommu_deinit_device+0x11f/0x4c0
[   15.926010]  __iommu_group_remove_device+0x26b/0x300
[   15.926204]  iommu_group_remove_device+0x8a/0xb0
[   15.926384]  iommufd_test+0x1f1a/0x2d10
[   15.926533]  ? __pfx_lock_release+0x10/0x10
[   15.926697]  ? __pfx_lock_acquire+0x10/0x10
[   15.926866]  ? __pfx_iommufd_test+0x10/0x10
[   15.927029]  ? __sanitizer_cov_trace_const_cmp8+0x1c/0x30
[   15.927237]  iommufd_fops_ioctl+0x377/0x510
[   15.927401]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   15.927583]  ? trace_hardirqs_on+0x26/0x120
[   15.927751]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   15.927988]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   15.928178]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   15.928384]  ? security_file_ioctl+0x9d/0xd0
[   15.928553]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   15.928735]  __x64_sys_ioctl+0x1b9/0x230
[   15.928888]  do_syscall_64+0x3c/0x90
[   15.929028]  entry_SYSCALL_64_after_hwframe+0x6e/0xd8
[   15.929220] RIP: 0033:0x7f413b83ee5d
[   15.929359] Code: ff c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d 93 af 1b 00 f7 d8 64 89 01 48
[   15.930025] RSP: 002b:00007fff9e1fb018 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   15.930304] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f413b83ee5d
[   15.930566] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   15.930833] RBP: 00007fff9e1fb030 R08: 0000000000000800 R09: 0000000000000800
[   15.931096] R10: 0000000000000000 R11: 0000000000000213 R12: 00007fff9e1fb148
[   15.931358] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f413baa9000
[   15.931626]  </TASK>
[   15.931714] Modules linked in:
[   15.931956] ---[ end trace 0000000000000000 ]---
[   15.932132] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   15.932348] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   15.933020] RSP: 0018:ffff88802457fba8 EFLAGS: 00010206
[   15.933216] RAX: dffffc0000000000 RBX: ffff888014f9b000 RCX: 0000000000000000
[   15.933477] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   15.933811] RBP: ffff88802457fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   15.934077] R10: ffff88800aad88df R11: 0000000000000001 R12: 0000000000000000
[   15.934404] R13: ffffffff85cc0180 R14: ffff8880109b6ac0 R15: ffffffff87070ae0
[   15.934676] FS:  00007f413ba68600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   15.934971] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   15.935269] CR2: 0000000020000080 CR3: 0000000018920000 CR4: 0000000000750ef0
[   15.935528] PKRU: 55555554
[   15.935928] ------------[ cut here ]------------
[   15.936104] WARNING: CPU: 0 PID: 760 at drivers/iommu/iommufd/main.c:258 iommufd_fops_release+0x2a3/0x300
[   15.936522] Modules linked in:
[   15.936641] CPU: 0 PID: 760 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   15.936965] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   15.937423] RIP: 0010:iommufd_fops_release+0x2a3/0x300
[   15.937638] Code: 45 d0 65 48 2b 04 25 28 00 00 00 75 54 48 81 c4 88 00 00 00 31 c0 5b 41 5c 41 5d 41 5e 41 5f 5d c3 cc cc cc cc e8 ad 4f 0a fe <0f> 0b eb a6 e8 74 23 67 fe e9 f6 fe ff ff 48 89 85 50 ff ff ff e8
[   15.938328] RSP: 0018:ffff8880147a7c00 EFLAGS: 00010293
[   15.938595] RAX: 0000000000000000 RBX: ffff888024705d08 RCX: 0000000000000000
[   15.938858] RDX: ffff88800fc10000 RSI: ffffffff835563e3 RDI: ffffffff86702b40
[   15.939116] RBP: ffff8880147a7cb0 R08: 0000000000000000 R09: fffffbfff0eb2644
[   15.939431] R10: ffffffff87593227 R11: ffff88800fb9d800 R12: 0000000000000000
[   15.939689] R13: ffff8880111edd18 R14: ffff8880147a7c48 R15: ffffffff83556140
[   15.939970] FS:  0000000000000000(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   15.940302] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   15.940516] CR2: 0000000020000080 CR3: 000000000687e000 CR4: 0000000000750ef0
[   15.940834] PKRU: 55555554
[   15.940938] Call Trace:
[   15.941032]  <TASK>
[   15.941116]  ? show_regs+0x6e/0x80
[   15.941310]  ? __warn+0xef/0x340
[   15.941438]  ? report_bug+0x25e/0x4b0
[   15.941581]  ? iommufd_fops_release+0x2a3/0x300
[   15.941759]  ? report_bug+0x2cb/0x4b0
[   15.941958]  ? handle_bug+0x46/0x90
[   15.942095]  ? exc_invalid_op+0x1d/0x50
[   15.942242]  ? asm_exc_invalid_op+0x1f/0x30
[   15.942416]  ? __pfx_iommufd_fops_release+0x10/0x10
[   15.942658]  ? iommufd_fops_release+0x2a3/0x300
[   15.942836]  ? iommufd_fops_release+0x2a3/0x300
[   15.943010]  ? __pfx_iommufd_fops_release+0x10/0x10
[   15.943194]  ? rcu_is_watching+0x19/0xc0
[   15.943346]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   15.943574]  ? __pfx_iommufd_fops_release+0x10/0x10
[   15.943790]  __fput+0x424/0xaf0
[   15.943919]  ____fput+0x1f/0x30
[   15.944044]  task_work_run+0x19d/0x2b0
[   15.944248]  ? __pfx_task_work_run+0x10/0x10
[   15.944412]  ? __sanitizer_cov_trace_const_cmp1+0x1e/0x30
[   15.944613]  ? switch_task_namespaces+0xa9/0xe0
[   15.944844]  do_exit+0xac9/0x2790
[   15.944975]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   15.945207]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   15.945414]  ? __pfx_do_exit+0x10/0x10
[   15.945589]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   15.945791]  ? security_file_ioctl+0x9d/0xd0
[   15.945968]  make_task_dead+0x182/0x3c0
[   15.946166]  rewind_stack_and_make_dead+0x17/0x20
[   15.946345] RIP: 0033:0x7f413b83ee5d
[   15.946481] Code: Unable to access opcode bytes at 0x7f413b83ee33.
[   15.946787] RSP: 002b:00007fff9e1fb018 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   15.947062] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f413b83ee5d
[   15.947320] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   15.947588] RBP: 00007fff9e1fb030 R08: 0000000000000800 R09: 0000000000000800
[   15.947898] R10: 0000000000000000 R11: 0000000000000213 R12: 00007fff9e1fb148
[   15.948162] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f413baa9000
[   15.948483]  </TASK>
[   15.948570] irq event stamp: 0
[   15.948686] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   15.948935] hardirqs last disabled at (0): [<ffffffff8122f2d1>] copy_process+0x1c51/0x7140
[   15.949271] softirqs last  enabled at (0): [<ffffffff8122f312>] copy_process+0x1c92/0x7140
[   15.949653] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   15.949886] ---[ end trace 0000000000000000 ]---
[   15.952766] iommufd_mock iommufd_mock44: Adding to iommu group 44
[   15.953068] iommufd_mock iommufd_mock44: Removing from iommu group 44
[   15.953326] general protection fault, probably for non-canonical address 0xdffffc0000000006: 0000 [#45] PREEMPT SMP KASAN NOPTI
[   15.953742] KASAN: null-ptr-deref in range [0x0000000000000030-0x0000000000000037]
[   15.954064] CPU: 0 PID: 761 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   15.954384] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   15.954805] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   15.955023] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   15.955690] RSP: 0018:ffff88800b9bfba8 EFLAGS: 00010206
[   15.955887] RAX: dffffc0000000000 RBX: ffff88801165e000 RCX: 0000000000000000
[   15.956151] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   15.956413] RBP: ffff88800b9bfbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   15.956676] R10: ffff88800aad88df R11: 5f6466756d6d6f69 R12: 0000000000000000
[   15.956938] R13: ffffffff85cc0180 R14: ffff88800fd72020 R15: ffffffff87070ae0
[   15.957200] FS:  00007f3e32a83600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   15.957496] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   15.957711] CR2: 0000000020000080 CR3: 0000000011dac000 CR4: 0000000000750ef0
[   15.957974] PKRU: 55555554
[   15.958080] Call Trace:
[   15.958175]  <TASK>
[   15.958260]  ? show_regs+0x6e/0x80
[   15.958399]  ? die_addr+0x45/0xb0
[   15.958534]  ? exc_general_protection+0x159/0x250
[   15.958721]  ? asm_exc_general_protection+0x2b/0x30
[   15.958915]  ? sysfs_remove_link_from_group+0x21/0x90
[   15.959109]  ? sysfs_remove_link_from_group+0x37/0x90
[   15.959304]  ? sysfs_remove_link_from_group+0x21/0x90
[   15.959497]  iommu_device_unlink+0x85/0xd0
[   15.959657]  iommu_deinit_device+0x11f/0x4c0
[   15.959825]  __iommu_group_remove_device+0x26b/0x300
[   15.960019]  iommu_group_remove_device+0x8a/0xb0
[   15.960198]  iommufd_test+0x1f1a/0x2d10
[   15.960348]  ? __pfx_lock_release+0x10/0x10
[   15.960511]  ? __pfx_lock_acquire+0x10/0x10
[   15.960675]  ? __pfx_iommufd_test+0x10/0x10
[   15.960837]  ? __sanitizer_cov_trace_const_cmp8+0x1c/0x30
[   15.961044]  iommufd_fops_ioctl+0x377/0x510
[   15.961208]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   15.961390]  ? trace_hardirqs_on+0x26/0x120
[   15.961555]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   15.961792]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   15.961982]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   15.962188]  ? security_file_ioctl+0x9d/0xd0
[   15.962357]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   15.962539]  __x64_sys_ioctl+0x1b9/0x230
[   15.962696]  do_syscall_64+0x3c/0x90
[   15.962842]  entry_SYSCALL_64_after_hwframe+0x6e/0xd8
[   15.963035] RIP: 0033:0x7f3e3283ee5d
[   15.963174] Code: ff c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d 93 af 1b 00 f7 d8 64 89 01 48
[   15.963842] RSP: 002b:00007ffc4621a088 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   15.964122] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f3e3283ee5d
[   15.964385] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   15.964646] RBP: 00007ffc4621a0a0 R08: 0000000000000800 R09: 0000000000000800
[   15.964908] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffc4621a1b8
[   15.965170] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f3e32ac4000
[   15.965437]  </TASK>
[   15.965524] Modules linked in:
[   15.965773] ---[ end trace 0000000000000000 ]---
[   15.965949] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   15.966164] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   15.966844] RSP: 0018:ffff88802457fba8 EFLAGS: 00010206
[   15.967038] RAX: dffffc0000000000 RBX: ffff888014f9b000 RCX: 0000000000000000
[   15.967301] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   15.967619] RBP: ffff88802457fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   15.967873] R10: ffff88800aad88df R11: 0000000000000001 R12: 0000000000000000
[   15.968151] R13: ffffffff85cc0180 R14: ffff8880109b6ac0 R15: ffffffff87070ae0
[   15.968445] FS:  00007f3e32a83600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   15.968749] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   15.968999] CR2: 0000000020000080 CR3: 0000000011dac000 CR4: 0000000000750ef0
[   15.969258] PKRU: 55555554
[   15.969663] ------------[ cut here ]------------
[   15.969835] WARNING: CPU: 0 PID: 761 at drivers/iommu/iommufd/main.c:258 iommufd_fops_release+0x2a3/0x300
[   15.970204] Modules linked in:
[   15.970366] CPU: 0 PID: 761 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   15.970713] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   15.971170] RIP: 0010:iommufd_fops_release+0x2a3/0x300
[   15.971363] Code: 45 d0 65 48 2b 04 25 28 00 00 00 75 54 48 81 c4 88 00 00 00 31 c0 5b 41 5c 41 5d 41 5e 41 5f 5d c3 cc cc cc cc e8 ad 4f 0a fe <0f> 0b eb a6 e8 74 23 67 fe e9 f6 fe ff ff 48 89 85 50 ff ff ff e8
[   15.972083] RSP: 0018:ffff88800b9bfc00 EFLAGS: 00010293
[   15.972339] RAX: 0000000000000000 RBX: ffff888024705508 RCX: 0000000000000000
[   15.972598] RDX: ffff8880170d4a00 RSI: ffffffff835563e3 RDI: ffffffff86702b40
[   15.972877] RBP: ffff88800b9bfcb0 R08: 0000000000000000 R09: fffffbfff0eb2644
[   15.973169] R10: ffffffff87593227 R11: ffff888019400c00 R12: 0000000000000000
[   15.973439] R13: ffff88801213a918 R14: ffff88800b9bfc48 R15: ffffffff83556140
[   15.973742] FS:  0000000000000000(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   15.974043] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   15.974305] CR2: 0000000020000080 CR3: 000000000687e000 CR4: 0000000000750ef0
[   15.974565] PKRU: 55555554
[   15.974687] Call Trace:
[   15.974843]  <TASK>
[   15.974927]  ? show_regs+0x6e/0x80
[   15.975062]  ? __warn+0xef/0x340
[   15.975190]  ? report_bug+0x25e/0x4b0
[   15.975336]  ? iommufd_fops_release+0x2a3/0x300
[   15.975508]  ? report_bug+0x2cb/0x4b0
[   15.975653]  ? handle_bug+0x46/0x90
[   15.975813]  ? exc_invalid_op+0x1d/0x50
[   15.976001]  ? asm_exc_invalid_op+0x1f/0x30
[   15.976160]  ? __pfx_iommufd_fops_release+0x10/0x10
[   15.976353]  ? iommufd_fops_release+0x2a3/0x300
[   15.976570]  ? iommufd_fops_release+0x2a3/0x300
[   15.976745]  ? __pfx_iommufd_fops_release+0x10/0x10
[   15.976932]  ? rcu_is_watching+0x19/0xc0
[   15.977140]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   15.977343]  ? __pfx_iommufd_fops_release+0x10/0x10
[   15.977527]  __fput+0x424/0xaf0
[   15.977710]  ____fput+0x1f/0x30
[   15.977835]  task_work_run+0x19d/0x2b0
[   15.977981]  ? __pfx_task_work_run+0x10/0x10
[   15.978144]  ? __sanitizer_cov_trace_const_cmp1+0x1e/0x30
[   15.978408]  ? switch_task_namespaces+0xa9/0xe0
[   15.978590]  do_exit+0xac9/0x2790
[   15.978720]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   15.978956]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   15.979141]  ? __pfx_do_exit+0x10/0x10
[   15.979348]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   15.979549]  ? security_file_ioctl+0x9d/0xd0
[   15.979715]  make_task_dead+0x182/0x3c0
[   15.979884]  rewind_stack_and_make_dead+0x17/0x20
[   15.980104] RIP: 0033:0x7f3e3283ee5d
[   15.980241] Code: Unable to access opcode bytes at 0x7f3e3283ee33.
[   15.980480] RSP: 002b:00007ffc4621a088 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   15.980799] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f3e3283ee5d
[   15.981058] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   15.981371] RBP: 00007ffc4621a0a0 R08: 0000000000000800 R09: 0000000000000800
[   15.981630] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffc4621a1b8
[   15.981948] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f3e32ac4000
[   15.982212]  </TASK>
[   15.982299] irq event stamp: 0
[   15.982420] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   15.982713] hardirqs last disabled at (0): [<ffffffff8122f2d1>] copy_process+0x1c51/0x7140
[   15.983046] softirqs last  enabled at (0): [<ffffffff8122f312>] copy_process+0x1c92/0x7140
[   15.983342] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   15.983577] ---[ end trace 0000000000000000 ]---
[   15.986480] iommufd_mock iommufd_mock45: Adding to iommu group 45
[   15.986739] iommufd_mock iommufd_mock45: Removing from iommu group 45
[   15.987634] general protection fault, probably for non-canonical address 0xdffffc0000000006: 0000 [#46] PREEMPT SMP KASAN NOPTI
[   15.988043] KASAN: null-ptr-deref in range [0x0000000000000030-0x0000000000000037]
[   15.988311] CPU: 0 PID: 762 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   15.988621] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   15.989018] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   15.989226] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   15.989869] RSP: 0018:ffff888014e67ba8 EFLAGS: 00010206
[   15.990058] RAX: dffffc0000000000 RBX: ffff88800bf23000 RCX: 0000000000000000
[   15.990310] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   15.990562] RBP: ffff888014e67bc0 R08: 0000000000000001 R09: ffffed10023d0005
[   15.990825] R10: ffff888011e8002b R11: 0000000000000000 R12: 0000000000000000
[   15.991078] R13: ffffffff85cc0180 R14: ffff88800fd72c20 R15: ffffffff87070ae0
[   15.991331] FS:  00007f8dc1919600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   15.991616] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   15.991823] CR2: 00007f3141de0018 CR3: 0000000018920000 CR4: 0000000000750ef0
[   15.992078] PKRU: 55555554
[   15.992181] Call Trace:
[   15.992273]  <TASK>
[   15.992355]  ? show_regs+0x6e/0x80
[   15.992489]  ? die_addr+0x45/0xb0
[   15.992621]  ? exc_general_protection+0x159/0x250
[   15.992802]  ? asm_exc_general_protection+0x2b/0x30
[   15.992986]  ? sysfs_remove_link_from_group+0x21/0x90
[   15.993174]  ? sysfs_remove_link_from_group+0x37/0x90
[   15.993362]  ? sysfs_remove_link_from_group+0x21/0x90
[   15.993549]  iommu_device_unlink+0x85/0xd0
[   15.993703]  iommu_deinit_device+0x11f/0x4c0
[   15.993867]  __iommu_group_remove_device+0x26b/0x300
[   15.994055]  iommu_group_remove_device+0x8a/0xb0
[   15.994229]  iommufd_test+0x1f1a/0x2d10
[   15.994373]  ? __pfx_lock_release+0x10/0x10
[   15.994530]  ? __pfx_lock_acquire+0x10/0x10
[   15.994690]  ? __pfx_iommufd_test+0x10/0x10
[   15.994852]  ? __sanitizer_cov_trace_const_cmp8+0x1c/0x30
[   15.995053]  iommufd_fops_ioctl+0x377/0x510
[   15.995212]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   15.995387]  ? trace_hardirqs_on+0x26/0x120
[   15.995547]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   15.995776]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   15.995960]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   15.996159]  ? security_file_ioctl+0x9d/0xd0
[   15.996322]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   15.996498]  __x64_sys_ioctl+0x1b9/0x230
[   15.996646]  do_syscall_64+0x3c/0x90
[   15.996782]  entry_SYSCALL_64_after_hwframe+0x6e/0xd8
[   15.996968] RIP: 0033:0x7f8dc163ee5d
[   15.997102] Code: ff c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d 93 af 1b 00 f7 d8 64 89 01 48
[   15.997746] RSP: 002b:00007ffca28e4638 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   15.998016] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f8dc163ee5d
[   15.998269] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   15.998523] RBP: 00007ffca28e4650 R08: 0000000000000800 R09: 0000000000000800
[   15.998782] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffca28e4768
[   15.999035] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f8dc195a000
[   15.999293]  </TASK>
[   15.999377] Modules linked in:
[   15.999555] ---[ end trace 0000000000000000 ]---
[   15.999722] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   15.999930] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   16.000573] RSP: 0018:ffff88802457fba8 EFLAGS: 00010206
[   16.000762] RAX: dffffc0000000000 RBX: ffff888014f9b000 RCX: 0000000000000000
[   16.001014] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   16.001266] RBP: ffff88802457fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   16.001518] R10: ffff88800aad88df R11: 0000000000000001 R12: 0000000000000000
[   16.001770] R13: ffffffff85cc0180 R14: ffff8880109b6ac0 R15: ffffffff87070ae0
[   16.002022] FS:  00007f8dc1919600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   16.002307] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   16.002513] CR2: 00007f3141de0018 CR3: 0000000018920000 CR4: 0000000000750ef0
[   16.002780] PKRU: 55555554
[   16.003142] ------------[ cut here ]------------
[   16.003310] WARNING: CPU: 0 PID: 762 at drivers/iommu/iommufd/main.c:258 iommufd_fops_release+0x2a3/0x300
[   16.003649] Modules linked in:
[   16.003764] CPU: 0 PID: 762 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   16.004071] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   16.004462] RIP: 0010:iommufd_fops_release+0x2a3/0x300
[   16.004647] Code: 45 d0 65 48 2b 04 25 28 00 00 00 75 54 48 81 c4 88 00 00 00 31 c0 5b 41 5c 41 5d 41 5e 41 5f 5d c3 cc cc cc cc e8 ad 4f 0a fe <0f> 0b eb a6 e8 74 23 67 fe e9 f6 fe ff ff 48 89 85 50 ff ff ff e8
[   16.005275] RSP: 0018:ffff888014e67c00 EFLAGS: 00010293
[   16.005459] RAX: 0000000000000000 RBX: ffff888024705c08 RCX: 0000000000000000
[   16.005706] RDX: ffff8880170d0000 RSI: ffffffff835563e3 RDI: ffffffff86702b40
[   16.005952] RBP: ffff888014e67cb0 R08: 0000000000000000 R09: fffffbfff0eb2644
[   16.006199] R10: ffffffff87593227 R11: ffff888012403000 R12: 0000000000000000
[   16.006445] R13: ffff88801213a198 R14: ffff888014e67c48 R15: ffffffff83556140
[   16.006702] FS:  0000000000000000(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   16.006986] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   16.007189] CR2: 00007f3141de0018 CR3: 000000000687e000 CR4: 0000000000750ef0
[   16.007436] PKRU: 55555554
[   16.007538] Call Trace:
[   16.007628]  <TASK>
[   16.007709]  ? show_regs+0x6e/0x80
[   16.007837]  ? __warn+0xef/0x340
[   16.007959]  ? report_bug+0x25e/0x4b0
[   16.008096]  ? iommufd_fops_release+0x2a3/0x300
[   16.008261]  ? report_bug+0x2cb/0x4b0
[   16.008400]  ? handle_bug+0x46/0x90
[   16.008530]  ? exc_invalid_op+0x1d/0x50
[   16.008671]  ? asm_exc_invalid_op+0x1f/0x30
[   16.008823]  ? __pfx_iommufd_fops_release+0x10/0x10
[   16.009002]  ? iommufd_fops_release+0x2a3/0x300
[   16.009172]  ? iommufd_fops_release+0x2a3/0x300
[   16.009340]  ? __pfx_iommufd_fops_release+0x10/0x10
[   16.009516]  ? rcu_is_watching+0x19/0xc0
[   16.009662]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   16.009856]  ? __pfx_iommufd_fops_release+0x10/0x10
[   16.010032]  __fput+0x424/0xaf0
[   16.010154]  ____fput+0x1f/0x30
[   16.010274]  task_work_run+0x19d/0x2b0
[   16.010413]  ? __pfx_task_work_run+0x10/0x10
[   16.010569]  ? __sanitizer_cov_trace_const_cmp1+0x1e/0x30
[   16.010779]  ? switch_task_namespaces+0xa9/0xe0
[   16.010948]  do_exit+0xac9/0x2790
[   16.011074]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   16.011296]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   16.011474]  ? __pfx_do_exit+0x10/0x10
[   16.011612]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   16.011805]  ? security_file_ioctl+0x9d/0xd0
[   16.011964]  make_task_dead+0x182/0x3c0
[   16.012106]  rewind_stack_and_make_dead+0x17/0x20
[   16.012277] RIP: 0033:0x7f8dc163ee5d
[   16.012408] Code: Unable to access opcode bytes at 0x7f8dc163ee33.
[   16.012621] RSP: 002b:00007ffca28e4638 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   16.012885] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f8dc163ee5d
[   16.013132] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   16.013379] RBP: 00007ffca28e4650 R08: 0000000000000800 R09: 0000000000000800
[   16.013626] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffca28e4768
[   16.013873] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f8dc195a000
[   16.014125]  </TASK>
[   16.014208] irq event stamp: 0
[   16.014319] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   16.014538] hardirqs last disabled at (0): [<ffffffff8122f2d1>] copy_process+0x1c51/0x7140
[   16.014841] softirqs last  enabled at (0): [<ffffffff8122f312>] copy_process+0x1c92/0x7140
[   16.015130] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   16.015349] ---[ end trace 0000000000000000 ]---
[   16.017706] iommufd_mock iommufd_mock46: Adding to iommu group 46
[   16.017946] iommufd_mock iommufd_mock46: Removing from iommu group 46
[   16.018196] general protection fault, probably for non-canonical address 0xdffffc0000000006: 0000 [#47] PREEMPT SMP KASAN NOPTI
[   16.018589] KASAN: null-ptr-deref in range [0x0000000000000030-0x0000000000000037]
[   16.018861] CPU: 0 PID: 763 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   16.019166] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   16.019555] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   16.019764] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   16.020427] RSP: 0018:ffff888013cffba8 EFLAGS: 00010206
[   16.020628] RAX: dffffc0000000000 RBX: ffff88800fcf5000 RCX: 0000000000000000
[   16.020875] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   16.021123] RBP: ffff888013cffbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   16.021371] R10: ffff88800aad88df R11: 5f6466756d6d6f69 R12: 0000000000000000
[   16.021618] R13: ffffffff85cc0180 R14: ffff88800fd724a0 R15: ffffffff87070ae0
[   16.021879] FS:  00007ff94746f600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   16.022171] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   16.022373] CR2: 0000000020000080 CR3: 0000000018920000 CR4: 0000000000750ef0
[   16.022623] PKRU: 55555554
[   16.022723] Call Trace:
[   16.022819]  <TASK>
[   16.022903]  ? show_regs+0x6e/0x80
[   16.023034]  ? die_addr+0x45/0xb0
[   16.023162]  ? exc_general_protection+0x159/0x250
[   16.023339]  ? asm_exc_general_protection+0x2b/0x30
[   16.023518]  ? sysfs_remove_link_from_group+0x21/0x90
[   16.023702]  ? sysfs_remove_link_from_group+0x37/0x90
[   16.023885]  ? sysfs_remove_link_from_group+0x21/0x90
[   16.024068]  iommu_device_unlink+0x85/0xd0
[   16.024219]  iommu_deinit_device+0x11f/0x4c0
[   16.024378]  __iommu_group_remove_device+0x26b/0x300
[   16.024561]  iommu_group_remove_device+0x8a/0xb0
[   16.024731]  iommufd_test+0x1f1a/0x2d10
[   16.024872]  ? __pfx_lock_release+0x10/0x10
[   16.025026]  ? __pfx_lock_acquire+0x10/0x10
[   16.025181]  ? __pfx_iommufd_test+0x10/0x10
[   16.025335]  ? __sanitizer_cov_trace_const_cmp8+0x1c/0x30
[   16.025532]  iommufd_fops_ioctl+0x377/0x510
[   16.025687]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   16.025859]  ? trace_hardirqs_on+0x26/0x120
[   16.026015]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   16.026239]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   16.026418]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   16.026615]  ? security_file_ioctl+0x9d/0xd0
[   16.026803]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   16.026993]  __x64_sys_ioctl+0x1b9/0x230
[   16.027138]  do_syscall_64+0x3c/0x90
[   16.027270]  entry_SYSCALL_64_after_hwframe+0x6e/0xd8
[   16.027452] RIP: 0033:0x7ff94723ee5d
[   16.027583] Code: ff c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d 93 af 1b 00 f7 d8 64 89 01 48
[   16.028215] RSP: 002b:00007ffe537206f8 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   16.028477] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007ff94723ee5d
[   16.028724] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   16.028971] RBP: 00007ffe53720710 R08: 0000000000000800 R09: 0000000000000800
[   16.029218] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffe53720828
[   16.029466] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007ff9474b0000
[   16.029718]  </TASK>
[   16.029801] Modules linked in:
[   16.029939] ---[ end trace 0000000000000000 ]---
[   16.030106] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   16.030313] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   16.031136] RSP: 0018:ffff88802457fba8 EFLAGS: 00010206
[   16.031322] RAX: dffffc0000000000 RBX: ffff888014f9b000 RCX: 0000000000000000
[   16.031569] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   16.031816] RBP: ffff88802457fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   16.032063] R10: ffff88800aad88df R11: 0000000000000001 R12: 0000000000000000
[   16.032310] R13: ffffffff85cc0180 R14: ffff8880109b6ac0 R15: ffffffff87070ae0
[   16.032559] FS:  00007ff94746f600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   16.032841] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   16.033043] CR2: 0000000020000080 CR3: 0000000018920000 CR4: 0000000000750ef0
[   16.033291] PKRU: 55555554
[   16.033643] ------------[ cut here ]------------
[   16.033808] WARNING: CPU: 0 PID: 763 at drivers/iommu/iommufd/main.c:258 iommufd_fops_release+0x2a3/0x300
[   16.034141] Modules linked in:
[   16.034253] CPU: 0 PID: 763 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   16.034554] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   16.034975] RIP: 0010:iommufd_fops_release+0x2a3/0x300
[   16.035160] Code: 45 d0 65 48 2b 04 25 28 00 00 00 75 54 48 81 c4 88 00 00 00 31 c0 5b 41 5c 41 5d 41 5e 41 5f 5d c3 cc cc cc cc e8 ad 4f 0a fe <0f> 0b eb a6 e8 74 23 67 fe e9 f6 fe ff ff 48 89 85 50 ff ff ff e8
[   16.035808] RSP: 0018:ffff888013cffc00 EFLAGS: 00010293
[   16.035993] RAX: 0000000000000000 RBX: ffff888024705808 RCX: 0000000000000000
[   16.036239] RDX: ffff88800bb28000 RSI: ffffffff835563e3 RDI: ffffffff86702b40
[   16.036486] RBP: ffff888013cffcb0 R08: 0000000000000000 R09: fffffbfff0eb2644
[   16.036732] R10: ffffffff87593227 R11: ffff888013175a00 R12: 0000000000000000
[   16.036978] R13: ffff888012f57d18 R14: ffff888013cffc48 R15: ffffffff83556140
[   16.037225] FS:  0000000000000000(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   16.037503] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   16.037704] CR2: 0000000020000080 CR3: 000000000687e000 CR4: 0000000000750ef0
[   16.037952] PKRU: 55555554
[   16.038051] Call Trace:
[   16.038141]  <TASK>
[   16.038220]  ? show_regs+0x6e/0x80
[   16.038349]  ? __warn+0xef/0x340
[   16.038471]  ? report_bug+0x25e/0x4b0
[   16.038615]  ? iommufd_fops_release+0x2a3/0x300
[   16.038785]  ? report_bug+0x2cb/0x4b0
[   16.038924]  ? handle_bug+0x46/0x90
[   16.039054]  ? exc_invalid_op+0x1d/0x50
[   16.039195]  ? asm_exc_invalid_op+0x1f/0x30
[   16.039346]  ? __pfx_iommufd_fops_release+0x10/0x10
[   16.039524]  ? iommufd_fops_release+0x2a3/0x300
[   16.039689]  ? iommufd_fops_release+0x2a3/0x300
[   16.039856]  ? __pfx_iommufd_fops_release+0x10/0x10
[   16.040031]  ? rcu_is_watching+0x19/0xc0
[   16.040177]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   16.040371]  ? __pfx_iommufd_fops_release+0x10/0x10
[   16.040547]  __fput+0x424/0xaf0
[   16.040672]  ____fput+0x1f/0x30
[   16.040792]  task_work_run+0x19d/0x2b0
[   16.040931]  ? __pfx_task_work_run+0x10/0x10
[   16.041087]  ? __sanitizer_cov_trace_const_cmp1+0x1e/0x30
[   16.041279]  ? switch_task_namespaces+0xa9/0xe0
[   16.041446]  do_exit+0xac9/0x2790
[   16.041571]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   16.041793]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   16.041970]  ? __pfx_do_exit+0x10/0x10
[   16.042108]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   16.042300]  ? security_file_ioctl+0x9d/0xd0
[   16.042458]  make_task_dead+0x182/0x3c0
[   16.042609]  rewind_stack_and_make_dead+0x17/0x20
[   16.042785] RIP: 0033:0x7ff94723ee5d
[   16.042916] Code: Unable to access opcode bytes at 0x7ff94723ee33.
[   16.043131] RSP: 002b:00007ffe537206f8 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   16.043394] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007ff94723ee5d
[   16.043640] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   16.043887] RBP: 00007ffe53720710 R08: 0000000000000800 R09: 0000000000000800
[   16.044134] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffe53720828
[   16.044380] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007ff9474b0000
[   16.044633]  </TASK>
[   16.044715] irq event stamp: 0
[   16.044827] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   16.045046] hardirqs last disabled at (0): [<ffffffff8122f2d1>] copy_process+0x1c51/0x7140
[   16.045332] softirqs last  enabled at (0): [<ffffffff8122f312>] copy_process+0x1c92/0x7140
[   16.045618] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   16.045837] ---[ end trace 0000000000000000 ]---
[   16.048319] iommufd_mock iommufd_mock47: Adding to iommu group 47
[   16.048558] iommufd_mock iommufd_mock47: Removing from iommu group 47
[   16.048808] general protection fault, probably for non-canonical address 0xdffffc0000000006: 0000 [#48] PREEMPT SMP KASAN NOPTI
[   16.049200] KASAN: null-ptr-deref in range [0x0000000000000030-0x0000000000000037]
[   16.049461] CPU: 0 PID: 764 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   16.049762] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   16.050153] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   16.050357] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   16.051024] RSP: 0018:ffff8880174a7ba8 EFLAGS: 00010206
[   16.051210] RAX: dffffc0000000000 RBX: ffff888012078000 RCX: 0000000000000000
[   16.051458] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   16.051705] RBP: ffff8880174a7bc0 R08: 0000000000000001 R09: ffffed100155b11b
[   16.051953] R10: ffff88800aad88df R11: 5f6466756d6d6f69 R12: 0000000000000000
[   16.052200] R13: ffffffff85cc0180 R14: ffff88800b944b60 R15: ffffffff87070ae0
[   16.052447] FS:  00007efcb7022600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   16.052726] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   16.052928] CR2: 0000000020000080 CR3: 0000000018920000 CR4: 0000000000750ef0
[   16.053177] PKRU: 55555554
[   16.053276] Call Trace:
[   16.053370]  <TASK>
[   16.053450]  ? show_regs+0x6e/0x80
[   16.053581]  ? die_addr+0x45/0xb0
[   16.053709]  ? exc_general_protection+0x159/0x250
[   16.053886]  ? asm_exc_general_protection+0x2b/0x30
[   16.054065]  ? sysfs_remove_link_from_group+0x21/0x90
[   16.054249]  ? sysfs_remove_link_from_group+0x37/0x90
[   16.054433]  ? sysfs_remove_link_from_group+0x21/0x90
[   16.054616]  iommu_device_unlink+0x85/0xd0
[   16.054786]  iommu_deinit_device+0x11f/0x4c0
[   16.054950]  __iommu_group_remove_device+0x26b/0x300
[   16.055133]  iommu_group_remove_device+0x8a/0xb0
[   16.055302]  iommufd_test+0x1f1a/0x2d10
[   16.055443]  ? __pfx_lock_release+0x10/0x10
[   16.055596]  ? __pfx_lock_acquire+0x10/0x10
[   16.055751]  ? __pfx_iommufd_test+0x10/0x10
[   16.055905]  ? __sanitizer_cov_trace_const_cmp8+0x1c/0x30
[   16.056101]  iommufd_fops_ioctl+0x377/0x510
[   16.056256]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   16.056427]  ? trace_hardirqs_on+0x26/0x120
[   16.056583]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   16.056807]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   16.056986]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   16.057180]  ? security_file_ioctl+0x9d/0xd0
[   16.057339]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   16.057513]  __x64_sys_ioctl+0x1b9/0x230
[   16.057657]  do_syscall_64+0x3c/0x90
[   16.057790]  entry_SYSCALL_64_after_hwframe+0x6e/0xd8
[   16.057972] RIP: 0033:0x7efcb6e3ee5d
[   16.058103] Code: ff c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d 93 af 1b 00 f7 d8 64 89 01 48
[   16.058733] RSP: 002b:00007ffd94bbec98 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   16.059005] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007efcb6e3ee5d
[   16.059253] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   16.059500] RBP: 00007ffd94bbecb0 R08: 0000000000000800 R09: 0000000000000800
[   16.059747] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffd94bbedc8
[   16.059994] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007efcb7063000
[   16.060247]  </TASK>
[   16.060329] Modules linked in:
[   16.060468] ---[ end trace 0000000000000000 ]---
[   16.060633] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   16.060836] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   16.061464] RSP: 0018:ffff88802457fba8 EFLAGS: 00010206
[   16.061649] RAX: dffffc0000000000 RBX: ffff888014f9b000 RCX: 0000000000000000
[   16.061895] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   16.062141] RBP: ffff88802457fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   16.062387] R10: ffff88800aad88df R11: 0000000000000001 R12: 0000000000000000
[   16.062642] R13: ffffffff85cc0180 R14: ffff8880109b6ac0 R15: ffffffff87070ae0
[   16.062894] FS:  00007efcb7022600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   16.063172] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   16.063373] CR2: 0000000020000080 CR3: 0000000018920000 CR4: 0000000000750ef0
[   16.063620] PKRU: 55555554
[   16.063979] ------------[ cut here ]------------
[   16.064143] WARNING: CPU: 0 PID: 764 at drivers/iommu/iommufd/main.c:258 iommufd_fops_release+0x2a3/0x300
[   16.064476] Modules linked in:
[   16.064588] CPU: 0 PID: 764 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   16.064888] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   16.065275] RIP: 0010:iommufd_fops_release+0x2a3/0x300
[   16.065459] Code: 45 d0 65 48 2b 04 25 28 00 00 00 75 54 48 81 c4 88 00 00 00 31 c0 5b 41 5c 41 5d 41 5e 41 5f 5d c3 cc cc cc cc e8 ad 4f 0a fe <0f> 0b eb a6 e8 74 23 67 fe e9 f6 fe ff ff 48 89 85 50 ff ff ff e8
[   16.066086] RSP: 0018:ffff8880174a7c00 EFLAGS: 00010293
[   16.066271] RAX: 0000000000000000 RBX: ffff888024705708 RCX: 0000000000000000
[   16.066517] RDX: ffff88800f780000 RSI: ffffffff835563e3 RDI: ffffffff86702b40
[   16.066778] RBP: ffff8880174a7cb0 R08: 0000000000000000 R09: fffffbfff0eb2644
[   16.067025] R10: ffffffff87593227 R11: ffff888013043400 R12: 0000000000000000
[   16.067272] R13: ffff888012f57318 R14: ffff8880174a7c48 R15: ffffffff83556140
[   16.067518] FS:  0000000000000000(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   16.067796] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   16.067997] CR2: 0000000020000080 CR3: 000000000687e000 CR4: 0000000000750ef0
[   16.068244] PKRU: 55555554
[   16.068343] Call Trace:
[   16.068433]  <TASK>
[   16.068513]  ? show_regs+0x6e/0x80
[   16.068641]  ? __warn+0xef/0x340
[   16.068763]  ? report_bug+0x25e/0x4b0
[   16.068899]  ? iommufd_fops_release+0x2a3/0x300
[   16.069065]  ? report_bug+0x2cb/0x4b0
[   16.069203]  ? handle_bug+0x46/0x90
[   16.069333]  ? exc_invalid_op+0x1d/0x50
[   16.069474]  ? asm_exc_invalid_op+0x1f/0x30
[   16.069625]  ? __pfx_iommufd_fops_release+0x10/0x10
[   16.069804]  ? iommufd_fops_release+0x2a3/0x300
[   16.069968]  ? iommufd_fops_release+0x2a3/0x300
[   16.070135]  ? __pfx_iommufd_fops_release+0x10/0x10
[   16.070310]  ? rcu_is_watching+0x19/0xc0
[   16.070456]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   16.070656]  ? __pfx_iommufd_fops_release+0x10/0x10
[   16.070837]  __fput+0x424/0xaf0
[   16.070960]  ____fput+0x1f/0x30
[   16.071080]  task_work_run+0x19d/0x2b0
[   16.071219]  ? __pfx_task_work_run+0x10/0x10
[   16.071376]  ? __sanitizer_cov_trace_const_cmp1+0x1e/0x30
[   16.071568]  ? switch_task_namespaces+0xa9/0xe0
[   16.071734]  do_exit+0xac9/0x2790
[   16.071859]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   16.072084]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   16.072262]  ? __pfx_do_exit+0x10/0x10
[   16.072400]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   16.072592]  ? security_file_ioctl+0x9d/0xd0
[   16.072751]  make_task_dead+0x182/0x3c0
[   16.072894]  rewind_stack_and_make_dead+0x17/0x20
[   16.073065] RIP: 0033:0x7efcb6e3ee5d
[   16.073195] Code: Unable to access opcode bytes at 0x7efcb6e3ee33.
[   16.073409] RSP: 002b:00007ffd94bbec98 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   16.073672] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007efcb6e3ee5d
[   16.073918] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   16.074164] RBP: 00007ffd94bbecb0 R08: 0000000000000800 R09: 0000000000000800
[   16.074411] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffd94bbedc8
[   16.074665] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007efcb7063000
[   16.074923]  </TASK>
[   16.075006] irq event stamp: 0
[   16.075117] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   16.075336] hardirqs last disabled at (0): [<ffffffff8122f2d1>] copy_process+0x1c51/0x7140
[   16.075622] softirqs last  enabled at (0): [<ffffffff8122f312>] copy_process+0x1c92/0x7140
[   16.075908] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   16.076126] ---[ end trace 0000000000000000 ]---
[   16.078434] iommufd_mock iommufd_mock48: Adding to iommu group 48
[   16.078797] iommufd_mock iommufd_mock48: Removing from iommu group 48
[   16.079048] general protection fault, probably for non-canonical address 0xdffffc0000000006: 0000 [#49] PREEMPT SMP KASAN NOPTI
[   16.079440] KASAN: null-ptr-deref in range [0x0000000000000030-0x0000000000000037]
[   16.079701] CPU: 0 PID: 765 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   16.080002] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   16.080410] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   16.080619] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   16.081248] RSP: 0018:ffff88801705fba8 EFLAGS: 00010206
[   16.081433] RAX: dffffc0000000000 RBX: ffff88801207e000 RCX: 0000000000000000
[   16.081680] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   16.081927] RBP: ffff88801705fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   16.082175] R10: ffff88800aad88df R11: 5f6466756d6d6f69 R12: 0000000000000000
[   16.082422] R13: ffffffff85cc0180 R14: ffff88800b944120 R15: ffffffff87070ae0
[   16.082671] FS:  00007ff0320e0600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   16.082955] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   16.083157] CR2: 0000000020000080 CR3: 0000000018920000 CR4: 0000000000750ef0
[   16.083406] PKRU: 55555554
[   16.083506] Call Trace:
[   16.083596]  <TASK>
[   16.083676]  ? show_regs+0x6e/0x80
[   16.083807]  ? die_addr+0x45/0xb0
[   16.083935]  ? exc_general_protection+0x159/0x250
[   16.084112]  ? asm_exc_general_protection+0x2b/0x30
[   16.084291]  ? sysfs_remove_link_from_group+0x21/0x90
[   16.084508]  ? sysfs_remove_link_from_group+0x37/0x90
[   16.084692]  ? sysfs_remove_link_from_group+0x21/0x90
[   16.084875]  iommu_device_unlink+0x85/0xd0
[   16.085026]  iommu_deinit_device+0x11f/0x4c0
[   16.085185]  __iommu_group_remove_device+0x26b/0x300
[   16.085368]  iommu_group_remove_device+0x8a/0xb0
[   16.085538]  iommufd_test+0x1f1a/0x2d10
[   16.085679]  ? __pfx_lock_release+0x10/0x10
[   16.085833]  ? __pfx_lock_acquire+0x10/0x10
[   16.085988]  ? __pfx_iommufd_test+0x10/0x10
[   16.086142]  ? __sanitizer_cov_trace_const_cmp8+0x1c/0x30
[   16.086338]  iommufd_fops_ioctl+0x377/0x510
[   16.086493]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   16.086665]  ? trace_hardirqs_on+0x26/0x120
[   16.086826]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   16.087049]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   16.087229]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   16.087424]  ? security_file_ioctl+0x9d/0xd0
[   16.087583]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   16.087755]  __x64_sys_ioctl+0x1b9/0x230
[   16.087900]  do_syscall_64+0x3c/0x90
[   16.088032]  entry_SYSCALL_64_after_hwframe+0x6e/0xd8
[   16.088213] RIP: 0033:0x7ff031e3ee5d
[   16.088354] Code: ff c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d 93 af 1b 00 f7 d8 64 89 01 48
[   16.088987] RSP: 002b:00007ffeae3bdba8 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   16.089250] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007ff031e3ee5d
[   16.089497] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   16.089744] RBP: 00007ffeae3bdbc0 R08: 0000000000000800 R09: 0000000000000800
[   16.089991] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffeae3bdcd8
[   16.090238] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007ff032121000
[   16.090490]  </TASK>
[   16.090572] Modules linked in:
[   16.090704] ---[ end trace 0000000000000000 ]---
[   16.090894] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   16.091099] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   16.091727] RSP: 0018:ffff88802457fba8 EFLAGS: 00010206
[   16.091912] RAX: dffffc0000000000 RBX: ffff888014f9b000 RCX: 0000000000000000
[   16.092159] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   16.092406] RBP: ffff88802457fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   16.092653] R10: ffff88800aad88df R11: 0000000000000001 R12: 0000000000000000
[   16.092899] R13: ffffffff85cc0180 R14: ffff8880109b6ac0 R15: ffffffff87070ae0
[   16.093147] FS:  00007ff0320e0600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   16.093425] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   16.093627] CR2: 0000000020000080 CR3: 0000000018920000 CR4: 0000000000750ef0
[   16.093874] PKRU: 55555554
[   16.094228] ------------[ cut here ]------------
[   16.094393] WARNING: CPU: 0 PID: 765 at drivers/iommu/iommufd/main.c:258 iommufd_fops_release+0x2a3/0x300
[   16.094743] Modules linked in:
[   16.094866] CPU: 0 PID: 765 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   16.095167] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   16.095555] RIP: 0010:iommufd_fops_release+0x2a3/0x300
[   16.095739] Code: 45 d0 65 48 2b 04 25 28 00 00 00 75 54 48 81 c4 88 00 00 00 31 c0 5b 41 5c 41 5d 41 5e 41 5f 5d c3 cc cc cc cc e8 ad 4f 0a fe <0f> 0b eb a6 e8 74 23 67 fe e9 f6 fe ff ff 48 89 85 50 ff ff ff e8
[   16.096367] RSP: 0018:ffff88801705fc00 EFLAGS: 00010293
[   16.096552] RAX: 0000000000000000 RBX: ffff888010aafb08 RCX: 0000000000000000
[   16.096798] RDX: ffff88800f782500 RSI: ffffffff835563e3 RDI: ffffffff86702b40
[   16.097045] RBP: ffff88801705fcb0 R08: 0000000000000000 R09: fffffbfff0eb2644
[   16.097291] R10: ffffffff87593227 R11: ffff888019419800 R12: 0000000000000000
[   16.097538] R13: ffff888019688198 R14: ffff88801705fc48 R15: ffffffff83556140
[   16.097785] FS:  0000000000000000(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   16.098063] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   16.098265] CR2: 0000000020000080 CR3: 000000000687e000 CR4: 0000000000750ef0
[   16.098512] PKRU: 55555554
[   16.098619] Call Trace:
[   16.098710]  <TASK>
[   16.098794]  ? show_regs+0x6e/0x80
[   16.098923]  ? __warn+0xef/0x340
[   16.099045]  ? report_bug+0x25e/0x4b0
[   16.099181]  ? iommufd_fops_release+0x2a3/0x300
[   16.099346]  ? report_bug+0x2cb/0x4b0
[   16.099485]  ? handle_bug+0x46/0x90
[   16.099615]  ? exc_invalid_op+0x1d/0x50
[   16.099788]  ? asm_exc_invalid_op+0x1f/0x30
[   16.099941]  ? __pfx_iommufd_fops_release+0x10/0x10
[   16.100121]  ? iommufd_fops_release+0x2a3/0x300
[   16.100287]  ? iommufd_fops_release+0x2a3/0x300
[   16.100456]  ? __pfx_iommufd_fops_release+0x10/0x10
[   16.100634]  ? rcu_is_watching+0x19/0xc0
[   16.100783]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   16.100977]  ? __pfx_iommufd_fops_release+0x10/0x10
[   16.101152]  __fput+0x424/0xaf0
[   16.101276]  ____fput+0x1f/0x30
[   16.101395]  task_work_run+0x19d/0x2b0
[   16.101534]  ? __pfx_task_work_run+0x10/0x10
[   16.101690]  ? __sanitizer_cov_trace_const_cmp1+0x1e/0x30
[   16.101882]  ? switch_task_namespaces+0xa9/0xe0
[   16.102049]  do_exit+0xac9/0x2790
[   16.102174]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   16.102395]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   16.102582]  ? __pfx_do_exit+0x10/0x10
[   16.102721]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   16.102922]  ? security_file_ioctl+0x9d/0xd0
[   16.103088]  make_task_dead+0x182/0x3c0
[   16.103230]  rewind_stack_and_make_dead+0x17/0x20
[   16.103403] RIP: 0033:0x7ff031e3ee5d
[   16.103534] Code: Unable to access opcode bytes at 0x7ff031e3ee33.
[   16.103747] RSP: 002b:00007ffeae3bdba8 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   16.104010] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007ff031e3ee5d
[   16.104257] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   16.104503] RBP: 00007ffeae3bdbc0 R08: 0000000000000800 R09: 0000000000000800
[   16.104749] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffeae3bdcd8
[   16.104996] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007ff032121000
[   16.105248]  </TASK>
[   16.105330] irq event stamp: 0
[   16.105441] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   16.105660] hardirqs last disabled at (0): [<ffffffff8122f2d1>] copy_process+0x1c51/0x7140
[   16.105946] softirqs last  enabled at (0): [<ffffffff8122f312>] copy_process+0x1c92/0x7140
[   16.106243] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   16.106461] ---[ end trace 0000000000000000 ]---
[   16.108956] iommufd_mock iommufd_mock49: Adding to iommu group 49
[   16.109216] iommufd_mock iommufd_mock49: Removing from iommu group 49
[   16.109467] general protection fault, probably for non-canonical address 0xdffffc0000000006: 0000 [#50] PREEMPT SMP KASAN NOPTI
[   16.109868] KASAN: null-ptr-deref in range [0x0000000000000030-0x0000000000000037]
[   16.110145] CPU: 1 PID: 766 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   16.110453] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   16.110877] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   16.111101] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   16.111745] RSP: 0018:ffff888013cffba8 EFLAGS: 00010206
[   16.111931] RAX: dffffc0000000000 RBX: ffff8880123ff000 RCX: 0000000000000000
[   16.112187] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   16.112435] RBP: ffff888013cffbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   16.112682] R10: ffff88800aad88df R11: 5f6466756d6d6f69 R12: 0000000000000000
[   16.112929] R13: ffffffff85cc0180 R14: ffff88800f9916e0 R15: ffffffff87070ae0
[   16.113185] FS:  00007f97764a6600(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
[   16.113465] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   16.113667] CR2: 0000000020000080 CR3: 00000000119f8000 CR4: 0000000000750ee0
[   16.113916] PKRU: 55555554
[   16.114016] Call Trace:
[   16.114115]  <TASK>
[   16.114195]  ? show_regs+0x6e/0x80
[   16.114326]  ? die_addr+0x45/0xb0
[   16.114455]  ? exc_general_protection+0x159/0x250
[   16.114639]  ? asm_exc_general_protection+0x2b/0x30
[   16.114829]  ? sysfs_remove_link_from_group+0x21/0x90
[   16.115019]  ? sysfs_remove_link_from_group+0x37/0x90
[   16.115211]  ? sysfs_remove_link_from_group+0x21/0x90
[   16.115395]  iommu_device_unlink+0x85/0xd0
[   16.115546]  iommu_deinit_device+0x11f/0x4c0
[   16.115705]  __iommu_group_remove_device+0x26b/0x300
[   16.115887]  iommu_group_remove_device+0x8a/0xb0
[   16.116057]  iommufd_test+0x1f1a/0x2d10
[   16.116209]  ? __pfx_lock_release+0x10/0x10
[   16.116363]  ? __pfx_lock_acquire+0x10/0x10
[   16.116519]  ? __pfx_iommufd_test+0x10/0x10
[   16.116672]  ? __sanitizer_cov_trace_const_cmp8+0x1c/0x30
[   16.116869]  iommufd_fops_ioctl+0x377/0x510
[   16.117023]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   16.117203]  ? trace_hardirqs_on+0x26/0x120
[   16.117359]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   16.117583]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   16.117762]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   16.117956]  ? security_file_ioctl+0x9d/0xd0
[   16.118116]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   16.118297]  __x64_sys_ioctl+0x1b9/0x230
[   16.118441]  do_syscall_64+0x3c/0x90
[   16.118573]  entry_SYSCALL_64_after_hwframe+0x6e/0xd8
[   16.118767] RIP: 0033:0x7f977623ee5d
[   16.118903] Code: ff c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d 93 af 1b 00 f7 d8 64 89 01 48
[   16.119541] RSP: 002b:00007ffd82e941b8 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   16.119805] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f977623ee5d
[   16.120052] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   16.120308] RBP: 00007ffd82e941d0 R08: 0000000000000800 R09: 0000000000000800
[   16.120554] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffd82e942e8
[   16.120801] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f97764e7000
[   16.121053]  </TASK>
[   16.121136] Modules linked in:
[   16.121313] ---[ end trace 0000000000000000 ]---
[   16.121482] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   16.121689] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   16.122340] RSP: 0018:ffff88802457fba8 EFLAGS: 00010206
[   16.122530] RAX: dffffc0000000000 RBX: ffff888014f9b000 RCX: 0000000000000000
[   16.122867] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   16.123148] RBP: ffff88802457fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   16.123435] R10: ffff88800aad88df R11: 0000000000000001 R12: 0000000000000000
[   16.123709] R13: ffffffff85cc0180 R14: ffff8880109b6ac0 R15: ffffffff87070ae0
[   16.123962] FS:  00007f97764a6600(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
[   16.124277] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   16.124511] CR2: 0000000020000080 CR3: 00000000119f8000 CR4: 0000000000750ee0
[   16.124764] PKRU: 55555554
[   16.125253] ------------[ cut here ]------------
[   16.125425] WARNING: CPU: 1 PID: 766 at drivers/iommu/iommufd/main.c:258 iommufd_fops_release+0x2a3/0x300
[   16.125831] Modules linked in:
[   16.125947] CPU: 1 PID: 766 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   16.126283] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   16.126883] RIP: 0010:iommufd_fops_release+0x2a3/0x300
[   16.127079] Code: 45 d0 65 48 2b 04 25 28 00 00 00 75 54 48 81 c4 88 00 00 00 31 c0 5b 41 5c 41 5d 41 5e 41 5f 5d c3 cc cc cc cc e8 ad 4f 0a fe <0f> 0b eb a6 e8 74 23 67 fe e9 f6 fe ff ff 48 89 85 50 ff ff ff e8
[   16.127784] RSP: 0018:ffff888013cffc00 EFLAGS: 00010293
[   16.127974] RAX: 0000000000000000 RBX: ffff88801248a008 RCX: 0000000000000000
[   16.128292] RDX: ffff8880170d2500 RSI: ffffffff835563e3 RDI: ffffffff86702b48
[   16.128545] RBP: ffff888013cffcb0 R08: 0000000000000000 R09: fffffbfff0eb2644
[   16.128826] R10: ffffffff87593227 R11: ffff8880132eba00 R12: 0000000000000000
[   16.129106] R13: ffff888013516198 R14: ffff888013cffc48 R15: ffffffff83556140
[   16.129374] FS:  0000000000000000(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
[   16.129701] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   16.129907] CR2: 0000000020000080 CR3: 000000000687e000 CR4: 0000000000750ee0
[   16.130186] PKRU: 55555554
[   16.130316] Call Trace:
[   16.130409]  <TASK>
[   16.130491]  ? show_regs+0x6e/0x80
[   16.130653]  ? __warn+0xef/0x340
[   16.130792]  ? report_bug+0x25e/0x4b0
[   16.130937]  ? iommufd_fops_release+0x2a3/0x300
[   16.131138]  ? report_bug+0x2cb/0x4b0
[   16.131310]  ? handle_bug+0x46/0x90
[   16.131443]  ? exc_invalid_op+0x1d/0x50
[   16.131587]  ? asm_exc_invalid_op+0x1f/0x30
[   16.131760]  ? __pfx_iommufd_fops_release+0x10/0x10
[   16.131964]  ? iommufd_fops_release+0x2a3/0x300
[   16.132140]  ? iommufd_fops_release+0x2a3/0x300
[   16.132323]  ? __pfx_iommufd_fops_release+0x10/0x10
[   16.132560]  ? rcu_is_watching+0x19/0xc0
[   16.132713]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   16.132917]  ? __pfx_iommufd_fops_release+0x10/0x10
[   16.133114]  __fput+0x424/0xaf0
[   16.133265]  ____fput+0x1f/0x30
[   16.133399]  task_work_run+0x19d/0x2b0
[   16.133544]  ? __pfx_task_work_run+0x10/0x10
[   16.133713]  ? __sanitizer_cov_trace_const_cmp1+0x1e/0x30
[   16.133950]  ? switch_task_namespaces+0xa9/0xe0
[   16.134124]  do_exit+0xac9/0x2790
[   16.134255]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   16.134509]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   16.134732]  ? __pfx_do_exit+0x10/0x10
[   16.134890]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   16.135092]  ? security_file_ioctl+0x9d/0xd0
[   16.135259]  make_task_dead+0x182/0x3c0
[   16.135417]  rewind_stack_and_make_dead+0x17/0x20
[   16.135603] RIP: 0033:0x7f977623ee5d
[   16.135777] Code: Unable to access opcode bytes at 0x7f977623ee33.
[   16.136001] RSP: 002b:00007ffd82e941b8 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   16.136286] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f977623ee5d
[   16.136585] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   16.136843] RBP: 00007ffd82e941d0 R08: 0000000000000800 R09: 0000000000000800
[   16.137147] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffd82e942e8
[   16.137422] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f97764e7000
[   16.137731]  </TASK>
[   16.137817] irq event stamp: 0
[   16.137933] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   16.138170] hardirqs last disabled at (0): [<ffffffff8122f2d1>] copy_process+0x1c51/0x7140
[   16.138516] softirqs last  enabled at (0): [<ffffffff8122f312>] copy_process+0x1c92/0x7140
[   16.138828] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   16.139057] ---[ end trace 0000000000000000 ]---
[   16.141709] iommufd_mock iommufd_mock50: Adding to iommu group 50
[   16.141959] iommufd_mock iommufd_mock50: Removing from iommu group 50
[   16.142212] general protection fault, probably for non-canonical address 0xdffffc0000000006: 0000 [#51] PREEMPT SMP KASAN NOPTI
[   16.142636] KASAN: null-ptr-deref in range [0x0000000000000030-0x0000000000000037]
[   16.142961] CPU: 1 PID: 767 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   16.143278] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   16.143723] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   16.143937] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   16.144648] RSP: 0018:ffff888012167ba8 EFLAGS: 00010206
[   16.144888] RAX: dffffc0000000000 RBX: ffff8880123fd000 RCX: 0000000000000000
[   16.145146] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   16.145410] RBP: ffff888012167bc0 R08: 0000000000000001 R09: ffffed100155b11b
[   16.145707] R10: ffff88800aad88df R11: 5f6466756d6d6f69 R12: 0000000000000000
[   16.145965] R13: ffffffff85cc0180 R14: ffff888013971980 R15: ffffffff87070ae0
[   16.146266] FS:  00007f89a14f3600(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
[   16.146567] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   16.146784] CR2: 0000000020000080 CR3: 0000000018920000 CR4: 0000000000750ee0
[   16.147072] PKRU: 55555554
[   16.147176] Call Trace:
[   16.147270]  <TASK>
[   16.147360]  ? show_regs+0x6e/0x80
[   16.147507]  ? die_addr+0x45/0xb0
[   16.147661]  ? exc_general_protection+0x159/0x250
[   16.147873]  ? asm_exc_general_protection+0x2b/0x30
[   16.148059]  ? sysfs_remove_link_from_group+0x21/0x90
[   16.148259]  ? sysfs_remove_link_from_group+0x37/0x90
[   16.148490]  ? sysfs_remove_link_from_group+0x21/0x90
[   16.148681]  iommu_device_unlink+0x85/0xd0
[   16.148838]  iommu_deinit_device+0x11f/0x4c0
[   16.149046]  __iommu_group_remove_device+0x26b/0x300
[   16.149236]  iommu_group_remove_device+0x8a/0xb0
[   16.149421]  iommufd_test+0x1f1a/0x2d10
[   16.149576]  ? __pfx_lock_release+0x10/0x10
[   16.149772]  ? __pfx_lock_acquire+0x10/0x10
[   16.149933]  ? __pfx_iommufd_test+0x10/0x10
[   16.150093]  ? __sanitizer_cov_trace_const_cmp8+0x1c/0x30
[   16.150337]  iommufd_fops_ioctl+0x377/0x510
[   16.150508]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   16.150686]  ? trace_hardirqs_on+0x26/0x120
[   16.150855]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   16.151158]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   16.151344]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   16.151555]  ? security_file_ioctl+0x9d/0xd0
[   16.151768]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   16.151947]  __x64_sys_ioctl+0x1b9/0x230
[   16.152098]  do_syscall_64+0x3c/0x90
[   16.152235]  entry_SYSCALL_64_after_hwframe+0x6e/0xd8
[   16.152479] RIP: 0033:0x7f89a123ee5d
[   16.152616] Code: ff c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d 93 af 1b 00 f7 d8 64 89 01 48
[   16.153315] RSP: 002b:00007ffc6770b678 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   16.153598] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f89a123ee5d
[   16.153898] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   16.154156] RBP: 00007ffc6770b690 R08: 0000000000000800 R09: 0000000000000800
[   16.154450] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffc6770b7a8
[   16.154717] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f89a1534000
[   16.154984]  </TASK>
[   16.155092] Modules linked in:
[   16.155271] ---[ end trace 0000000000000000 ]---
[   16.155449] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   16.155695] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   16.156351] RSP: 0018:ffff88802457fba8 EFLAGS: 00010206
[   16.156553] RAX: dffffc0000000000 RBX: ffff888014f9b000 RCX: 0000000000000000
[   16.156811] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   16.157069] RBP: ffff88802457fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   16.157327] R10: ffff88800aad88df R11: 0000000000000001 R12: 0000000000000000
[   16.157640] R13: ffffffff85cc0180 R14: ffff8880109b6ac0 R15: ffffffff87070ae0
[   16.157899] FS:  00007f89a14f3600(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
[   16.158190] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   16.158445] CR2: 0000000020000080 CR3: 0000000018920000 CR4: 0000000000750ee0
[   16.158725] PKRU: 55555554
[   16.159099] ------------[ cut here ]------------
[   16.159313] WARNING: CPU: 1 PID: 767 at drivers/iommu/iommufd/main.c:258 iommufd_fops_release+0x2a3/0x300
[   16.159670] Modules linked in:
[   16.159793] CPU: 1 PID: 767 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   16.160145] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   16.160595] RIP: 0010:iommufd_fops_release+0x2a3/0x300
[   16.160789] Code: 45 d0 65 48 2b 04 25 28 00 00 00 75 54 48 81 c4 88 00 00 00 31 c0 5b 41 5c 41 5d 41 5e 41 5f 5d c3 cc cc cc cc e8 ad 4f 0a fe <0f> 0b eb a6 e8 74 23 67 fe e9 f6 fe ff ff 48 89 85 50 ff ff ff e8
[   16.161488] RSP: 0018:ffff888012167c00 EFLAGS: 00010293
[   16.161689] RAX: 0000000000000000 RBX: ffff88801248a608 RCX: 0000000000000000
[   16.161987] RDX: ffff88800f784a00 RSI: ffffffff835563e3 RDI: ffffffff86702b48
[   16.162245] RBP: ffff888012167cb0 R08: 0000000000000000 R09: fffffbfff0eb2644
[   16.162546] R10: ffffffff87593227 R11: ffff88801323cc00 R12: 0000000000000000
[   16.162846] R13: ffff8880132ca198 R14: ffff888012167c48 R15: ffffffff83556140
[   16.163115] FS:  0000000000000000(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
[   16.163405] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   16.163686] CR2: 0000000020000080 CR3: 000000000687e000 CR4: 0000000000750ee0
[   16.163945] PKRU: 55555554
[   16.164049] Call Trace:
[   16.164143]  <TASK>
[   16.164234]  ? show_regs+0x6e/0x80
[   16.164415]  ? __warn+0xef/0x340
[   16.164543]  ? report_bug+0x25e/0x4b0
[   16.164694]  ? iommufd_fops_release+0x2a3/0x300
[   16.164866]  ? report_bug+0x2cb/0x4b0
[   16.165052]  ? handle_bug+0x46/0x90
[   16.165187]  ? exc_invalid_op+0x1d/0x50
[   16.165335]  ? asm_exc_invalid_op+0x1f/0x30
[   16.165493]  ? __pfx_iommufd_fops_release+0x10/0x10
[   16.165729]  ? iommufd_fops_release+0x2a3/0x300
[   16.165901]  ? iommufd_fops_release+0x2a3/0x300
[   16.166075]  ? __pfx_iommufd_fops_release+0x10/0x10
[   16.166274]  ? rcu_is_watching+0x19/0xc0
[   16.166451]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   16.166672]  ? __pfx_iommufd_fops_release+0x10/0x10
[   16.166860]  __fput+0x424/0xaf0
[   16.166988]  ____fput+0x1f/0x30
[   16.167113]  task_work_run+0x19d/0x2b0
[   16.167258]  ? __pfx_task_work_run+0x10/0x10
[   16.167469]  ? __sanitizer_cov_trace_const_cmp1+0x1e/0x30
[   16.167679]  ? switch_task_namespaces+0xa9/0xe0
[   16.167852]  do_exit+0xac9/0x2790
[   16.167988]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   16.168255]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   16.168440]  ? __pfx_do_exit+0x10/0x10
[   16.168584]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   16.168837]  ? security_file_ioctl+0x9d/0xd0
[   16.169003]  make_task_dead+0x182/0x3c0
[   16.169151]  rewind_stack_and_make_dead+0x17/0x20
[   16.169338] RIP: 0033:0x7f89a123ee5d
[   16.169508] Code: Unable to access opcode bytes at 0x7f89a123ee33.
[   16.169739] RSP: 002b:00007ffc6770b678 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   16.170035] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f89a123ee5d
[   16.170313] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   16.170571] RBP: 00007ffc6770b690 R08: 0000000000000800 R09: 0000000000000800
[   16.170833] systemd-journald[136]: Data hash table of /run/log/journal/938775788448454bb5b34822d5730c41/system.journal has a fill level at 75.0 (5446 of 7260 items, 4182016 file size, 767 bytes per hash table item), suggesting rotation.
[   16.170851] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffc6770b7a8
[   16.171578] systemd-journald[136]: /run/log/journal/938775788448454bb5b34822d5730c41/system.journal: Journal header limits reached or header out-of-date, rotating.
[   16.171833] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f89a1534000
[   16.172590]  </TASK>
[   16.172676] irq event stamp: 0
[   16.172800] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   16.173028] hardirqs last disabled at (0): [<ffffffff8122f2d1>] copy_process+0x1c51/0x7140
[   16.173339] softirqs last  enabled at (0): [<ffffffff8122f312>] copy_process+0x1c92/0x7140
[   16.173637] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   16.173877] ---[ end trace 0000000000000000 ]---
[   16.176472] iommufd_mock iommufd_mock51: Adding to iommu group 51
[   16.176720] iommufd_mock iommufd_mock51: Removing from iommu group 51
[   16.176988] general protection fault, probably for non-canonical address 0xdffffc0000000006: 0000 [#52] PREEMPT SMP KASAN NOPTI
[   16.177447] KASAN: null-ptr-deref in range [0x0000000000000030-0x0000000000000037]
[   16.177721] CPU: 1 PID: 768 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   16.178089] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   16.178494] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   16.178760] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   16.179426] RSP: 0018:ffff88800fb2fba8 EFLAGS: 00010206
[   16.179620] RAX: dffffc0000000000 RBX: ffff88800ed62000 RCX: 0000000000000000
[   16.179937] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   16.180195] RBP: ffff88800fb2fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   16.180502] R10: ffff88800aad88df R11: 5f6466756d6d6f69 R12: 0000000000000000
[   16.180760] R13: ffffffff85cc0180 R14: ffff88800fd72b60 R15: ffffffff87070ae0
[   16.181038] FS:  00007f45ff815600(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
[   16.181365] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   16.181576] CR2: 0000000020000080 CR3: 00000000119f8000 CR4: 0000000000750ee0
[   16.181894] PKRU: 55555554
[   16.181998] Call Trace:
[   16.182092]  <TASK>
[   16.182176]  ? show_regs+0x6e/0x80
[   16.182313]  ? die_addr+0x45/0xb0
[   16.182450]  ? exc_general_protection+0x159/0x250
[   16.182635]  ? asm_exc_general_protection+0x2b/0x30
[   16.182828]  ? sysfs_remove_link_from_group+0x21/0x90
[   16.183030]  ? sysfs_remove_link_from_group+0x37/0x90
[   16.183267]  ? sysfs_remove_link_from_group+0x21/0x90
[   16.183458]  iommu_device_unlink+0x85/0xd0
[   16.183615]  iommu_deinit_device+0x11f/0x4c0
[   16.183781]  __iommu_group_remove_device+0x26b/0x300
[   16.183979]  iommu_group_remove_device+0x8a/0xb0
[   16.184157]  iommufd_test+0x1f1a/0x2d10
[   16.184303]  ? __pfx_lock_release+0x10/0x10
[   16.184464]  ? __pfx_lock_acquire+0x10/0x10
[   16.184626]  ? __pfx_iommufd_test+0x10/0x10
[   16.184786]  ? __sanitizer_cov_trace_const_cmp8+0x1c/0x30
[   16.184998]  iommufd_fops_ioctl+0x377/0x510
[   16.185159]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   16.185338]  ? trace_hardirqs_on+0x26/0x120
[   16.185500]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   16.185734]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   16.185929]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   16.186131]  ? security_file_ioctl+0x9d/0xd0
[   16.186299]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   16.186479]  __x64_sys_ioctl+0x1b9/0x230
[   16.186629]  do_syscall_64+0x3c/0x90
[   16.186772]  entry_SYSCALL_64_after_hwframe+0x6e/0xd8
[   16.186970] RIP: 0033:0x7f45ff63ee5d
[   16.187108] Code: ff c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d 93 af 1b 00 f7 d8 64 89 01 48
[   16.187765] RSP: 002b:00007ffdb19f8658 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   16.188048] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f45ff63ee5d
[   16.188306] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   16.188563] RBP: 00007ffdb19f8670 R08: 0000000000000800 R09: 0000000000000800
[   16.188821] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffdb19f8788
[   16.189087] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f45ff856000
[   16.189350]  </TASK>
[   16.189436] Modules linked in:
[   16.189664] ---[ end trace 0000000000000000 ]---
[   16.189836] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   16.190059] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   16.190721] RSP: 0018:ffff88802457fba8 EFLAGS: 00010206
[   16.190919] RAX: dffffc0000000000 RBX: ffff888014f9b000 RCX: 0000000000000000
[   16.191185] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   16.191443] RBP: ffff88802457fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   16.191750] R10: ffff88800aad88df R11: 0000000000000001 R12: 0000000000000000
[   16.192016] R13: ffffffff85cc0180 R14: ffff8880109b6ac0 R15: ffffffff87070ae0
[   16.192283] FS:  00007f45ff815600(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
[   16.192610] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   16.192821] CR2: 0000000020000080 CR3: 00000000119f8000 CR4: 0000000000750ee0
[   16.193135] PKRU: 55555554
[   16.193498] ------------[ cut here ]------------
[   16.193670] WARNING: CPU: 1 PID: 768 at drivers/iommu/iommufd/main.c:258 iommufd_fops_release+0x2a3/0x300
[   16.194075] Modules linked in:
[   16.194193] CPU: 1 PID: 768 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   16.194549] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   16.194977] RIP: 0010:iommufd_fops_release+0x2a3/0x300
[   16.195180] Code: 45 d0 65 48 2b 04 25 28 00 00 00 75 54 48 81 c4 88 00 00 00 31 c0 5b 41 5c 41 5d 41 5e 41 5f 5d c3 cc cc cc cc e8 ad 4f 0a fe <0f> 0b eb a6 e8 74 23 67 fe e9 f6 fe ff ff 48 89 85 50 ff ff ff e8
[   16.195877] RSP: 0018:ffff88800fb2fc00 EFLAGS: 00010293
[   16.196089] RAX: 0000000000000000 RBX: ffff88801248ae08 RCX: 0000000000000000
[   16.196375] RDX: ffff888010e3ca00 RSI: ffffffff835563e3 RDI: ffffffff86702b48
[   16.196633] RBP: ffff88800fb2fcb0 R08: 0000000000000000 R09: fffffbfff0eb2644
[   16.196892] R10: ffffffff87593227 R11: ffff8880114db600 R12: 0000000000000000
[   16.197157] R13: ffff8880114e2418 R14: ffff88800fb2fc48 R15: ffffffff83556140
[   16.197414] FS:  0000000000000000(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
[   16.197704] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   16.197914] CR2: 0000000020000080 CR3: 000000000687e000 CR4: 0000000000750ee0
[   16.198185] PKRU: 55555554
[   16.198289] Call Trace:
[   16.198383]  <TASK>
[   16.198466]  ? show_regs+0x6e/0x80
[   16.198612]  ? __warn+0xef/0x340
[   16.198740]  ? report_bug+0x25e/0x4b0
[   16.198888]  ? iommufd_fops_release+0x2a3/0x300
[   16.199061]  ? report_bug+0x2cb/0x4b0
[   16.199214]  ? handle_bug+0x46/0x90
[   16.199350]  ? exc_invalid_op+0x1d/0x50
[   16.199497]  ? asm_exc_invalid_op+0x1f/0x30
[   16.199655]  ? __pfx_iommufd_fops_release+0x10/0x10
[   16.199841]  ? iommufd_fops_release+0x2a3/0x300
[   16.200013]  ? iommufd_fops_release+0x2a3/0x300
[   16.200196]  ? __pfx_iommufd_fops_release+0x10/0x10
[   16.200382]  ? rcu_is_watching+0x19/0xc0
[   16.200536]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   16.200738]  ? __pfx_iommufd_fops_release+0x10/0x10
[   16.200921]  __fput+0x424/0xaf0
[   16.201049]  ____fput+0x1f/0x30
[   16.201183]  task_work_run+0x19d/0x2b0
[   16.201328]  ? __pfx_task_work_run+0x10/0x10
[   16.201491]  ? __sanitizer_cov_trace_const_cmp1+0x1e/0x30
[   16.201693]  ? switch_task_namespaces+0xa9/0xe0
[   16.201867]  do_exit+0xac9/0x2790
[   16.201998]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   16.202239]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   16.202424]  ? __pfx_do_exit+0x10/0x10
[   16.202568]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   16.202783]  ? security_file_ioctl+0x9d/0xd0
[   16.202950]  make_task_dead+0x182/0x3c0
[   16.203098]  rewind_stack_and_make_dead+0x17/0x20
[   16.203286] RIP: 0033:0x7f45ff63ee5d
[   16.203422] Code: Unable to access opcode bytes at 0x7f45ff63ee33.
[   16.203646] RSP: 002b:00007ffdb19f8658 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   16.203920] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f45ff63ee5d
[   16.204186] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   16.204443] RBP: 00007ffdb19f8670 R08: 0000000000000800 R09: 0000000000000800
[   16.204700] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffdb19f8788
[   16.204957] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f45ff856000
[   16.205228]  </TASK>
[   16.205314] irq event stamp: 0
[   16.205431] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   16.205659] hardirqs last disabled at (0): [<ffffffff8122f2d1>] copy_process+0x1c51/0x7140
[   16.205957] softirqs last  enabled at (0): [<ffffffff8122f312>] copy_process+0x1c92/0x7140
[   16.206264] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   16.206492] ---[ end trace 0000000000000000 ]---
[   16.208826] iommufd_mock iommufd_mock52: Adding to iommu group 52
[   16.209069] iommufd_mock iommufd_mock52: Removing from iommu group 52
[   16.209311] general protection fault, probably for non-canonical address 0xdffffc0000000006: 0000 [#53] PREEMPT SMP KASAN NOPTI
[   16.209706] KASAN: null-ptr-deref in range [0x0000000000000030-0x0000000000000037]
[   16.209967] CPU: 0 PID: 770 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   16.210267] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   16.210657] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   16.210879] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   16.211512] RSP: 0018:ffff888013cffba8 EFLAGS: 00010206
[   16.211697] RAX: dffffc0000000000 RBX: ffff88801207d000 RCX: 0000000000000000
[   16.211944] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   16.212192] RBP: ffff888013cffbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   16.212439] R10: ffff88800aad88df R11: 5f6466756d6d6f69 R12: 0000000000000000
[   16.212687] R13: ffffffff85cc0180 R14: ffff88801032e160 R15: ffffffff87070ae0
[   16.212934] FS:  00007f01d0af0600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   16.213213] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   16.213415] CR2: 0000000020000080 CR3: 00000000114ec000 CR4: 0000000000750ef0
[   16.213664] PKRU: 55555554
[   16.213764] Call Trace:
[   16.213854]  <TASK>
[   16.213934]  ? show_regs+0x6e/0x80
[   16.214066]  ? die_addr+0x45/0xb0
[   16.214195]  ? exc_general_protection+0x159/0x250
[   16.214371]  ? asm_exc_general_protection+0x2b/0x30
[   16.214551]  ? sysfs_remove_link_from_group+0x21/0x90
[   16.214735]  ? sysfs_remove_link_from_group+0x37/0x90
[   16.214922]  ? sysfs_remove_link_from_group+0x21/0x90
[   16.215105]  iommu_device_unlink+0x85/0xd0
[   16.215255]  iommu_deinit_device+0x11f/0x4c0
[   16.215414]  __iommu_group_remove_device+0x26b/0x300
[   16.215598]  iommu_group_remove_device+0x8a/0xb0
[   16.215767]  iommufd_test+0x1f1a/0x2d10
[   16.215908]  ? __pfx_lock_release+0x10/0x10
[   16.216062]  ? __pfx_lock_acquire+0x10/0x10
[   16.216217]  ? __pfx_iommufd_test+0x10/0x10
[   16.216370]  ? __sanitizer_cov_trace_const_cmp8+0x1c/0x30
[   16.216567]  iommufd_fops_ioctl+0x377/0x510
[   16.216722]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   16.216893]  ? trace_hardirqs_on+0x26/0x120
[   16.217049]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   16.217272]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   16.217451]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   16.217645]  ? security_file_ioctl+0x9d/0xd0
[   16.217805]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   16.217976]  __x64_sys_ioctl+0x1b9/0x230
[   16.218121]  do_syscall_64+0x3c/0x90
[   16.218253]  entry_SYSCALL_64_after_hwframe+0x6e/0xd8
[   16.218434] RIP: 0033:0x7f01d083ee5d
[   16.218566] Code: ff c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d 93 af 1b 00 f7 d8 64 89 01 48
[   16.219209] RSP: 002b:00007ffce1168c58 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   16.219474] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f01d083ee5d
[   16.219721] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   16.219967] RBP: 00007ffce1168c70 R08: 0000000000000800 R09: 0000000000000800
[   16.220214] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffce1168d88
[   16.220460] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f01d0b31000
[   16.220713]  </TASK>
[   16.220796] Modules linked in:
[   16.220953] ---[ end trace 0000000000000000 ]---
[   16.221118] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   16.221320] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   16.221951] RSP: 0018:ffff88802457fba8 EFLAGS: 00010206
[   16.222136] RAX: dffffc0000000000 RBX: ffff888014f9b000 RCX: 0000000000000000
[   16.222382] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   16.222652] RBP: ffff88802457fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   16.222907] R10: ffff88800aad88df R11: 0000000000000001 R12: 0000000000000000
[   16.223154] R13: ffffffff85cc0180 R14: ffff8880109b6ac0 R15: ffffffff87070ae0
[   16.223400] FS:  00007f01d0af0600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   16.223678] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   16.223880] CR2: 0000000020000080 CR3: 00000000114ec000 CR4: 0000000000750ef0
[   16.224128] PKRU: 55555554
[   16.224555] ------------[ cut here ]------------
[   16.224737] WARNING: CPU: 1 PID: 770 at drivers/iommu/iommufd/main.c:258 iommufd_fops_release+0x2a3/0x300
[   16.225089] Modules linked in:
[   16.225205] CPU: 1 PID: 770 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   16.225587] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   16.226014] RIP: 0010:iommufd_fops_release+0x2a3/0x300
[   16.226231] Code: 45 d0 65 48 2b 04 25 28 00 00 00 75 54 48 81 c4 88 00 00 00 31 c0 5b 41 5c 41 5d 41 5e 41 5f 5d c3 cc cc cc cc e8 ad 4f 0a fe <0f> 0b eb a6 e8 74 23 67 fe e9 f6 fe ff ff 48 89 85 50 ff ff ff e8
[   16.226978] RSP: 0018:ffff888013cffc00 EFLAGS: 00010293
[   16.227174] RAX: 0000000000000000 RBX: ffff888010aaf708 RCX: 0000000000000000
[   16.227447] RDX: ffff888012c34a00 RSI: ffffffff835563e3 RDI: ffffffff86702b48
[   16.227723] RBP: ffff888013cffcb0 R08: 0000000000000000 R09: fffffbfff0eb2644
[   16.227985] R10: ffffffff87593227 R11: ffff8880135e9800 R12: 0000000000000000
[   16.228260] R13: ffff888011b85818 R14: ffff888013cffc48 R15: ffffffff83556140
[   16.228538] FS:  0000000000000000(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
[   16.228841] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   16.229083] CR2: 00007fa281d6c000 CR3: 000000000687e000 CR4: 0000000000750ee0
[   16.229337] PKRU: 55555554
[   16.229443] Call Trace:
[   16.229552]  <TASK>
[   16.229639]  ? show_regs+0x6e/0x80
[   16.229791]  ? __warn+0xef/0x340
[   16.229924]  ? report_bug+0x25e/0x4b0
[   16.230064]  ? iommufd_fops_release+0x2a3/0x300
[   16.230252]  ? report_bug+0x2cb/0x4b0
[   16.230399]  ? handle_bug+0x46/0x90
[   16.230547]  ? exc_invalid_op+0x1d/0x50
[   16.230714]  ? asm_exc_invalid_op+0x1f/0x30
[   16.230879]  ? __pfx_iommufd_fops_release+0x10/0x10
[   16.231087]  ? iommufd_fops_release+0x2a3/0x300
[   16.231278]  ? iommufd_fops_release+0x2a3/0x300
[   16.231450]  ? __pfx_iommufd_fops_release+0x10/0x10
[   16.231630]  ? rcu_is_watching+0x19/0xc0
[   16.231798]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   16.232024]  ? __pfx_iommufd_fops_release+0x10/0x10
[   16.232204]  __fput+0x424/0xaf0
[   16.232330]  ____fput+0x1f/0x30
[   16.232469]  task_work_run+0x19d/0x2b0
[   16.232632]  ? __pfx_task_work_run+0x10/0x10
[   16.232798]  ? __sanitizer_cov_trace_const_cmp1+0x1e/0x30
[   16.233010]  ? switch_task_namespaces+0xa9/0xe0
[   16.233227]  do_exit+0xac9/0x2790
[   16.233358]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   16.233589]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   16.233780]  ? __pfx_do_exit+0x10/0x10
[   16.233973]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   16.234175]  ? security_file_ioctl+0x9d/0xd0
[   16.234341]  make_task_dead+0x182/0x3c0
[   16.234499]  rewind_stack_and_make_dead+0x17/0x20
[   16.234738] RIP: 0033:0x7f01d083ee5d
[   16.234879] Code: Unable to access opcode bytes at 0x7f01d083ee33.
[   16.235112] RSP: 002b:00007ffce1168c58 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   16.235434] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f01d083ee5d
[   16.235695] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   16.235955] RBP: 00007ffce1168c70 R08: 0000000000000800 R09: 0000000000000800
[   16.236265] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffce1168d88
[   16.236523] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f01d0b31000
[   16.236806]  </TASK>
[   16.236916] irq event stamp: 0
[   16.237041] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   16.237269] hardirqs last disabled at (0): [<ffffffff8122f2d1>] copy_process+0x1c51/0x7140
[   16.237612] softirqs last  enabled at (0): [<ffffffff8122f312>] copy_process+0x1c92/0x7140
[   16.237911] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   16.238161] ---[ end trace 0000000000000000 ]---
[   16.242702] iommufd_mock iommufd_mock53: Adding to iommu group 53
[   16.242973] iommufd_mock iommufd_mock53: Removing from iommu group 53
[   16.243242] general protection fault, probably for non-canonical address 0xdffffc0000000006: 0000 [#54] PREEMPT SMP KASAN NOPTI
[   16.243698] KASAN: null-ptr-deref in range [0x0000000000000030-0x0000000000000037]
[   16.243972] CPU: 1 PID: 771 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   16.244338] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   16.244743] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   16.245002] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   16.245669] RSP: 0018:ffff888012eefba8 EFLAGS: 00010206
[   16.245862] RAX: dffffc0000000000 RBX: ffff88800ed64000 RCX: 0000000000000000
[   16.246123] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   16.246391] RBP: ffff888012eefbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   16.246663] R10: ffff88800aad88df R11: 5f6466756d6d6f69 R12: 0000000000000000
[   16.246925] R13: ffffffff85cc0180 R14: ffff88801679aa20 R15: ffffffff87070ae0
[   16.247178] FS:  00007fee90229600(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
[   16.247472] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   16.247678] CR2: 0000000020000080 CR3: 0000000018920000 CR4: 0000000000750ee0
[   16.247932] PKRU: 55555554
[   16.248034] Call Trace:
[   16.248126]  <TASK>
[   16.248216]  ? show_regs+0x6e/0x80
[   16.248350]  ? die_addr+0x45/0xb0
[   16.248481]  ? exc_general_protection+0x159/0x250
[   16.248662]  ? asm_exc_general_protection+0x2b/0x30
[   16.248845]  ? sysfs_remove_link_from_group+0x21/0x90
[   16.249032]  ? sysfs_remove_link_from_group+0x37/0x90
[   16.249227]  ? sysfs_remove_link_from_group+0x21/0x90
[   16.249414]  iommu_device_unlink+0x85/0xd0
[   16.249568]  iommu_deinit_device+0x11f/0x4c0
[   16.249730]  __iommu_group_remove_device+0x26b/0x300
[   16.249917]  iommu_group_remove_device+0x8a/0xb0
[   16.250091]  iommufd_test+0x1f1a/0x2d10
[   16.250243]  ? __pfx_lock_release+0x10/0x10
[   16.250400]  ? __pfx_lock_acquire+0x10/0x10
[   16.250558]  ? __pfx_iommufd_test+0x10/0x10
[   16.250720]  ? __sanitizer_cov_trace_const_cmp8+0x1c/0x30
[   16.250929]  iommufd_fops_ioctl+0x377/0x510
[   16.251087]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   16.251273]  ? trace_hardirqs_on+0x26/0x120
[   16.251435]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   16.251663]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   16.251847]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   16.252045]  ? security_file_ioctl+0x9d/0xd0
[   16.252208]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   16.252392]  __x64_sys_ioctl+0x1b9/0x230
[   16.252539]  do_syscall_64+0x3c/0x90
[   16.252674]  entry_SYSCALL_64_after_hwframe+0x6e/0xd8
[   16.252859] RIP: 0033:0x7fee9003ee5d
[   16.252993] Code: ff c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d 93 af 1b 00 f7 d8 64 89 01 48
[   16.253642] RSP: 002b:00007ffdde382cd8 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   16.253911] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007fee9003ee5d
[   16.254163] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   16.254424] RBP: 00007ffdde382cf0 R08: 0000000000000800 R09: 0000000000000800
[   16.254689] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffdde382e08
[   16.254951] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007fee9026a000
[   16.255209]  </TASK>
[   16.255301] Modules linked in:
[   16.255478] ---[ end trace 0000000000000000 ]---
[   16.255651] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   16.255863] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   16.256531] RSP: 0018:ffff88802457fba8 EFLAGS: 00010206
[   16.256724] RAX: dffffc0000000000 RBX: ffff888014f9b000 RCX: 0000000000000000
[   16.256982] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   16.257240] RBP: ffff88802457fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   16.257507] R10: ffff88800aad88df R11: 0000000000000001 R12: 0000000000000000
[   16.257764] R13: ffffffff85cc0180 R14: ffff8880109b6ac0 R15: ffffffff87070ae0
[   16.258022] FS:  00007fee90229600(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
[   16.258312] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   16.258531] CR2: 0000000020000080 CR3: 0000000018920000 CR4: 0000000000750ee0
[   16.258803] PKRU: 55555554
[   16.259184] ------------[ cut here ]------------
[   16.259362] WARNING: CPU: 1 PID: 771 at drivers/iommu/iommufd/main.c:258 iommufd_fops_release+0x2a3/0x300
[   16.259701] Modules linked in:
[   16.259816] CPU: 1 PID: 771 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   16.260122] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   16.260527] RIP: 0010:iommufd_fops_release+0x2a3/0x300
[   16.260715] Code: 45 d0 65 48 2b 04 25 28 00 00 00 75 54 48 81 c4 88 00 00 00 31 c0 5b 41 5c 41 5d 41 5e 41 5f 5d c3 cc cc cc cc e8 ad 4f 0a fe <0f> 0b eb a6 e8 74 23 67 fe e9 f6 fe ff ff 48 89 85 50 ff ff ff e8
[   16.261359] RSP: 0018:ffff888012eefc00 EFLAGS: 00010293
[   16.261556] RAX: 0000000000000000 RBX: ffff88801248a108 RCX: 0000000000000000
[   16.261808] RDX: ffff888014758000 RSI: ffffffff835563e3 RDI: ffffffff86702b48
[   16.262060] RBP: ffff888012eefcb0 R08: 0000000000000000 R09: fffffbfff0eb2644
[   16.262312] R10: ffffffff87593227 R11: ffff888011146400 R12: 0000000000000000
[   16.262705] R13: ffff8880139e4198 R14: ffff888012eefc48 R15: ffffffff83556140
[   16.262967] FS:  0000000000000000(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
[   16.263258] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   16.263473] CR2: 0000000020000080 CR3: 000000000687e000 CR4: 0000000000750ee0
[   16.263725] PKRU: 55555554
[   16.263827] Call Trace:
[   16.263919]  <TASK>
[   16.264000]  ? show_regs+0x6e/0x80
[   16.264131]  ? __warn+0xef/0x340
[   16.264256]  ? report_bug+0x25e/0x4b0
[   16.264395]  ? iommufd_fops_release+0x2a3/0x300
[   16.264574]  ? report_bug+0x2cb/0x4b0
[   16.264715]  ? handle_bug+0x46/0x90
[   16.264848]  ? exc_invalid_op+0x1d/0x50
[   16.264992]  ? asm_exc_invalid_op+0x1f/0x30
[   16.265148]  ? __pfx_iommufd_fops_release+0x10/0x10
[   16.265333]  ? iommufd_fops_release+0x2a3/0x300
[   16.265510]  ? iommufd_fops_release+0x2a3/0x300
[   16.265680]  ? __pfx_iommufd_fops_release+0x10/0x10
[   16.265860]  ? rcu_is_watching+0x19/0xc0
[   16.266008]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   16.266206]  ? __pfx_iommufd_fops_release+0x10/0x10
[   16.266386]  __fput+0x424/0xaf0
[   16.266520]  ____fput+0x1f/0x30
[   16.266671]  task_work_run+0x19d/0x2b0
[   16.266818]  ? __pfx_task_work_run+0x10/0x10
[   16.266977]  ? __sanitizer_cov_trace_const_cmp1+0x1e/0x30
[   16.267174]  ? switch_task_namespaces+0xa9/0xe0
[   16.267344]  do_exit+0xac9/0x2790
[   16.267480]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   16.267706]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   16.267887]  ? __pfx_do_exit+0x10/0x10
[   16.268028]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   16.268224]  ? security_file_ioctl+0x9d/0xd0
[   16.268386]  make_task_dead+0x182/0x3c0
[   16.268539]  rewind_stack_and_make_dead+0x17/0x20
[   16.268714] RIP: 0033:0x7fee9003ee5d
[   16.268847] Code: Unable to access opcode bytes at 0x7fee9003ee33.
[   16.269065] RSP: 002b:00007ffdde382cd8 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   16.269334] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007fee9003ee5d
[   16.269594] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   16.269845] RBP: 00007ffdde382cf0 R08: 0000000000000800 R09: 0000000000000800
[   16.270096] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffdde382e08
[   16.270347] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007fee9026a000
[   16.270640]  </TASK>
[   16.270725] irq event stamp: 0
[   16.270842] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   16.271065] hardirqs last disabled at (0): [<ffffffff8122f2d1>] copy_process+0x1c51/0x7140
[   16.271356] softirqs last  enabled at (0): [<ffffffff8122f312>] copy_process+0x1c92/0x7140
[   16.271651] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   16.271870] ---[ end trace 0000000000000000 ]---
[   16.274455] iommufd_mock iommufd_mock54: Adding to iommu group 54
[   16.275186] iommufd_mock iommufd_mock54: Removing from iommu group 54
[   16.275439] general protection fault, probably for non-canonical address 0xdffffc0000000006: 0000 [#55] PREEMPT SMP KASAN NOPTI
[   16.275832] KASAN: null-ptr-deref in range [0x0000000000000030-0x0000000000000037]
[   16.276093] CPU: 0 PID: 772 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   16.276394] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   16.276783] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   16.276988] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   16.277616] RSP: 0018:ffff888013cffba8 EFLAGS: 00010206
[   16.277801] RAX: dffffc0000000000 RBX: ffff88801443a000 RCX: 0000000000000000
[   16.278049] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   16.278296] RBP: ffff888013cffbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   16.278542] R10: ffff88800aad88df R11: 5f6466756d6d6f69 R12: 0000000000000000
[   16.278799] R13: ffffffff85cc0180 R14: ffff888010830960 R15: ffffffff87070ae0
[   16.279050] FS:  00007f8ef8203600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   16.279323] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   16.279522] CR2: 0000000020000080 CR3: 00000000119f8000 CR4: 0000000000750ef0
[   16.279773] PKRU: 55555554
[   16.279873] Call Trace:
[   16.279966]  <TASK>
[   16.280044]  ? show_regs+0x6e/0x80
[   16.280173]  ? die_addr+0x45/0xb0
[   16.280299]  ? exc_general_protection+0x159/0x250
[   16.280472]  ? asm_exc_general_protection+0x2b/0x30
[   16.280649]  ? sysfs_remove_link_from_group+0x21/0x90
[   16.280829]  ? sysfs_remove_link_from_group+0x37/0x90
[   16.281016]  ? sysfs_remove_link_from_group+0x21/0x90
[   16.281195]  iommu_device_unlink+0x85/0xd0
[   16.281343]  iommu_deinit_device+0x11f/0x4c0
[   16.281500]  __iommu_group_remove_device+0x26b/0x300
[   16.281680]  iommu_group_remove_device+0x8a/0xb0
[   16.281846]  iommufd_test+0x1f1a/0x2d10
[   16.281986]  ? __pfx_lock_release+0x10/0x10
[   16.282145]  ? __pfx_lock_acquire+0x10/0x10
[   16.282302]  ? __pfx_iommufd_test+0x10/0x10
[   16.282456]  ? __sanitizer_cov_trace_const_cmp8+0x1c/0x30
[   16.282653]  iommufd_fops_ioctl+0x377/0x510
[   16.282829]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   16.283006]  ? trace_hardirqs_on+0x26/0x120
[   16.283162]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   16.283386]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   16.283567]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   16.283761]  ? security_file_ioctl+0x9d/0xd0
[   16.283921]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   16.284094]  __x64_sys_ioctl+0x1b9/0x230
[   16.284239]  do_syscall_64+0x3c/0x90
[   16.284373]  entry_SYSCALL_64_after_hwframe+0x6e/0xd8
[   16.284555] RIP: 0033:0x7f8ef7e3ee5d
[   16.284687] Code: ff c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d 93 af 1b 00 f7 d8 64 89 01 48
[   16.285319] RSP: 002b:00007fffef6df8b8 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   16.285584] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f8ef7e3ee5d
[   16.285831] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   16.286079] RBP: 00007fffef6df8d0 R08: 0000000000000800 R09: 0000000000000800
[   16.286327] R10: 0000000000000000 R11: 0000000000000213 R12: 00007fffef6df9e8
[   16.286575] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f8ef8244000
[   16.286837]  </TASK>
[   16.286924] Modules linked in:
[   16.287142] ---[ end trace 0000000000000000 ]---
[   16.287315] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   16.287526] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   16.288168] RSP: 0018:ffff88802457fba8 EFLAGS: 00010206
[   16.288354] RAX: dffffc0000000000 RBX: ffff888014f9b000 RCX: 0000000000000000
[   16.288602] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   16.288852] RBP: ffff88802457fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   16.289099] R10: ffff88800aad88df R11: 0000000000000001 R12: 0000000000000000
[   16.289345] R13: ffffffff85cc0180 R14: ffff8880109b6ac0 R15: ffffffff87070ae0
[   16.289592] FS:  00007f8ef8203600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   16.289870] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   16.290072] CR2: 0000000020000080 CR3: 00000000119f8000 CR4: 0000000000750ef0
[   16.290320] PKRU: 55555554
[   16.290695] ------------[ cut here ]------------
[   16.290868] WARNING: CPU: 0 PID: 772 at drivers/iommu/iommufd/main.c:258 iommufd_fops_release+0x2a3/0x300
[   16.291200] Modules linked in:
[   16.291313] CPU: 0 PID: 772 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   16.291612] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   16.291999] RIP: 0010:iommufd_fops_release+0x2a3/0x300
[   16.292186] Code: 45 d0 65 48 2b 04 25 28 00 00 00 75 54 48 81 c4 88 00 00 00 31 c0 5b 41 5c 41 5d 41 5e 41 5f 5d c3 cc cc cc cc e8 ad 4f 0a fe <0f> 0b eb a6 e8 74 23 67 fe e9 f6 fe ff ff 48 89 85 50 ff ff ff e8
[   16.292816] RSP: 0018:ffff888013cffc00 EFLAGS: 00010293
[   16.293001] RAX: 0000000000000000 RBX: ffff888010aaf408 RCX: 0000000000000000
[   16.293247] RDX: ffff88801475a500 RSI: ffffffff835563e3 RDI: ffffffff86702b40
[   16.293494] RBP: ffff888013cffcb0 R08: 0000000000000000 R09: fffffbfff0eb2644
[   16.293741] R10: ffffffff87593227 R11: ffff888013761a00 R12: 0000000000000000
[   16.293988] R13: ffff88801307c918 R14: ffff888013cffc48 R15: ffffffff83556140
[   16.294236] FS:  0000000000000000(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   16.294514] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   16.294810] CR2: 0000000020000080 CR3: 000000000687e000 CR4: 0000000000750ef0
[   16.295065] PKRU: 55555554
[   16.295165] Call Trace:
[   16.295256]  <TASK>
[   16.295336]  ? show_regs+0x6e/0x80
[   16.295465]  ? __warn+0xef/0x340
[   16.295587]  ? report_bug+0x25e/0x4b0
[   16.295724]  ? iommufd_fops_release+0x2a3/0x300
[   16.295890]  ? report_bug+0x2cb/0x4b0
[   16.296029]  ? handle_bug+0x46/0x90
[   16.296158]  ? exc_invalid_op+0x1d/0x50
[   16.296299]  ? asm_exc_invalid_op+0x1f/0x30
[   16.296450]  ? __pfx_iommufd_fops_release+0x10/0x10
[   16.296629]  ? iommufd_fops_release+0x2a3/0x300
[   16.296794]  ? iommufd_fops_release+0x2a3/0x300
[   16.296961]  ? __pfx_iommufd_fops_release+0x10/0x10
[   16.297137]  ? rcu_is_watching+0x19/0xc0
[   16.297283]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   16.297477]  ? __pfx_iommufd_fops_release+0x10/0x10
[   16.297652]  __fput+0x424/0xaf0
[   16.297775]  ____fput+0x1f/0x30
[   16.297895]  task_work_run+0x19d/0x2b0
[   16.298035]  ? __pfx_task_work_run+0x10/0x10
[   16.298191]  ? __sanitizer_cov_trace_const_cmp1+0x1e/0x30
[   16.298384]  ? switch_task_namespaces+0xa9/0xe0
[   16.298553]  do_exit+0xac9/0x2790
[   16.298686]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   16.298931]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   16.299109]  ? __pfx_do_exit+0x10/0x10
[   16.299248]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   16.299440]  ? security_file_ioctl+0x9d/0xd0
[   16.299599]  make_task_dead+0x182/0x3c0
[   16.299742]  rewind_stack_and_make_dead+0x17/0x20
[   16.299913] RIP: 0033:0x7f8ef7e3ee5d
[   16.300044] Code: Unable to access opcode bytes at 0x7f8ef7e3ee33.
[   16.300258] RSP: 002b:00007fffef6df8b8 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   16.300525] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f8ef7e3ee5d
[   16.300775] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   16.301022] RBP: 00007fffef6df8d0 R08: 0000000000000800 R09: 0000000000000800
[   16.301269] R10: 0000000000000000 R11: 0000000000000213 R12: 00007fffef6df9e8
[   16.301516] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f8ef8244000
[   16.301769]  </TASK>
[   16.301852] irq event stamp: 0
[   16.301963] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   16.302183] hardirqs last disabled at (0): [<ffffffff8122f2d1>] copy_process+0x1c51/0x7140
[   16.302469] softirqs last  enabled at (0): [<ffffffff8122f312>] copy_process+0x1c92/0x7140
[   16.302768] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   16.302987] ---[ end trace 0000000000000000 ]---
[   16.305349] iommufd_mock iommufd_mock55: Adding to iommu group 55
[   16.305591] iommufd_mock iommufd_mock55: Removing from iommu group 55
[   16.305837] general protection fault, probably for non-canonical address 0xdffffc0000000006: 0000 [#56] PREEMPT SMP KASAN NOPTI
[   16.306229] KASAN: null-ptr-deref in range [0x0000000000000030-0x0000000000000037]
[   16.306491] CPU: 0 PID: 773 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   16.306801] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   16.307189] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   16.307396] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   16.308027] RSP: 0018:ffff88802459fba8 EFLAGS: 00010206
[   16.308212] RAX: dffffc0000000000 RBX: ffff88801443b000 RCX: 0000000000000000
[   16.308459] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   16.308706] RBP: ffff88802459fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   16.308953] R10: ffff88800aad88df R11: 5f6466756d6d6f69 R12: 0000000000000000
[   16.309200] R13: ffffffff85cc0180 R14: ffff88800bd79dc0 R15: ffffffff87070ae0
[   16.309447] FS:  00007fe450e1f600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   16.309726] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   16.309928] CR2: 0000000020000080 CR3: 00000000119f8000 CR4: 0000000000750ef0
[   16.310176] PKRU: 55555554
[   16.310275] Call Trace:
[   16.310366]  <TASK>
[   16.310445]  ? show_regs+0x6e/0x80
[   16.310576]  ? die_addr+0x45/0xb0
[   16.310704]  ? exc_general_protection+0x159/0x250
[   16.310887]  ? asm_exc_general_protection+0x2b/0x30
[   16.311066]  ? sysfs_remove_link_from_group+0x21/0x90
[   16.311249]  ? sysfs_remove_link_from_group+0x37/0x90
[   16.311433]  ? sysfs_remove_link_from_group+0x21/0x90
[   16.311616]  iommu_device_unlink+0x85/0xd0
[   16.311767]  iommu_deinit_device+0x11f/0x4c0
[   16.311927]  __iommu_group_remove_device+0x26b/0x300
[   16.312110]  iommu_group_remove_device+0x8a/0xb0
[   16.312280]  iommufd_test+0x1f1a/0x2d10
[   16.312420]  ? __pfx_lock_release+0x10/0x10
[   16.312575]  ? __pfx_lock_acquire+0x10/0x10
[   16.312730]  ? __pfx_iommufd_test+0x10/0x10
[   16.312884]  ? __sanitizer_cov_trace_const_cmp8+0x1c/0x30
[   16.313080]  iommufd_fops_ioctl+0x377/0x510
[   16.313235]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   16.313406]  ? trace_hardirqs_on+0x26/0x120
[   16.313562]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   16.313786]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   16.313966]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   16.314160]  ? security_file_ioctl+0x9d/0xd0
[   16.314320]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   16.314492]  __x64_sys_ioctl+0x1b9/0x230
[   16.314637]  do_syscall_64+0x3c/0x90
[   16.314775]  entry_SYSCALL_64_after_hwframe+0x6e/0xd8
[   16.314957] RIP: 0033:0x7fe450c3ee5d
[   16.315087] Code: ff c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d 93 af 1b 00 f7 d8 64 89 01 48
[   16.315717] RSP: 002b:00007ffdf289a868 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   16.315980] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007fe450c3ee5d
[   16.316228] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   16.316475] RBP: 00007ffdf289a880 R08: 0000000000000800 R09: 0000000000000800
[   16.316722] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffdf289a998
[   16.316969] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007fe450e60000
[   16.317220]  </TASK>
[   16.317303] Modules linked in:
[   16.317442] ---[ end trace 0000000000000000 ]---
[   16.317606] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   16.317809] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   16.318436] RSP: 0018:ffff88802457fba8 EFLAGS: 00010206
[   16.318673] RAX: dffffc0000000000 RBX: ffff888014f9b000 RCX: 0000000000000000
[   16.318927] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   16.319173] RBP: ffff88802457fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   16.319420] R10: ffff88800aad88df R11: 0000000000000001 R12: 0000000000000000
[   16.319667] R13: ffffffff85cc0180 R14: ffff8880109b6ac0 R15: ffffffff87070ae0
[   16.319914] FS:  00007fe450e1f600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   16.320193] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   16.320394] CR2: 0000000020000080 CR3: 00000000119f8000 CR4: 0000000000750ef0
[   16.320642] PKRU: 55555554
[   16.321001] ------------[ cut here ]------------
[   16.321165] WARNING: CPU: 0 PID: 773 at drivers/iommu/iommufd/main.c:258 iommufd_fops_release+0x2a3/0x300
[   16.321496] Modules linked in:
[   16.321609] CPU: 0 PID: 773 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   16.321909] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   16.322297] RIP: 0010:iommufd_fops_release+0x2a3/0x300
[   16.322481] Code: 45 d0 65 48 2b 04 25 28 00 00 00 75 54 48 81 c4 88 00 00 00 31 c0 5b 41 5c 41 5d 41 5e 41 5f 5d c3 cc cc cc cc e8 ad 4f 0a fe <0f> 0b eb a6 e8 74 23 67 fe e9 f6 fe ff ff 48 89 85 50 ff ff ff e8
[   16.323123] RSP: 0018:ffff88802459fc00 EFLAGS: 00010293
[   16.323308] RAX: 0000000000000000 RBX: ffff888010aaf508 RCX: 0000000000000000
[   16.323555] RDX: ffff888014428000 RSI: ffffffff835563e3 RDI: ffffffff86702b40
[   16.323802] RBP: ffff88802459fcb0 R08: 0000000000000000 R09: fffffbfff0eb2644
[   16.324048] R10: ffffffff87593227 R11: ffff888012507c00 R12: 0000000000000000
[   16.324295] R13: ffff888012ff3098 R14: ffff88802459fc48 R15: ffffffff83556140
[   16.324542] FS:  0000000000000000(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   16.324819] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   16.325022] CR2: 0000000020000080 CR3: 000000000687e000 CR4: 0000000000750ef0
[   16.325269] PKRU: 55555554
[   16.325369] Call Trace:
[   16.325459]  <TASK>
[   16.325539]  ? show_regs+0x6e/0x80
[   16.325667]  ? __warn+0xef/0x340
[   16.325789]  ? report_bug+0x25e/0x4b0
[   16.325926]  ? iommufd_fops_release+0x2a3/0x300
[   16.326091]  ? report_bug+0x2cb/0x4b0
[   16.326230]  ? handle_bug+0x46/0x90
[   16.326360]  ? exc_invalid_op+0x1d/0x50
[   16.326501]  ? asm_exc_invalid_op+0x1f/0x30
[   16.326667]  ? __pfx_iommufd_fops_release+0x10/0x10
[   16.326851]  ? iommufd_fops_release+0x2a3/0x300
[   16.327016]  ? iommufd_fops_release+0x2a3/0x300
[   16.327183]  ? __pfx_iommufd_fops_release+0x10/0x10
[   16.327358]  ? rcu_is_watching+0x19/0xc0
[   16.327504]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   16.327697]  ? __pfx_iommufd_fops_release+0x10/0x10
[   16.327873]  __fput+0x424/0xaf0
[   16.327995]  ____fput+0x1f/0x30
[   16.328115]  task_work_run+0x19d/0x2b0
[   16.328254]  ? __pfx_task_work_run+0x10/0x10
[   16.328410]  ? __sanitizer_cov_trace_const_cmp1+0x1e/0x30
[   16.328602]  ? switch_task_namespaces+0xa9/0xe0
[   16.328769]  do_exit+0xac9/0x2790
[   16.328894]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   16.329116]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   16.329293]  ? __pfx_do_exit+0x10/0x10
[   16.329431]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   16.329624]  ? security_file_ioctl+0x9d/0xd0
[   16.329786]  make_task_dead+0x182/0x3c0
[   16.329928]  rewind_stack_and_make_dead+0x17/0x20
[   16.330099] RIP: 0033:0x7fe450c3ee5d
[   16.330229] Code: Unable to access opcode bytes at 0x7fe450c3ee33.
[   16.330442] RSP: 002b:00007ffdf289a868 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   16.330713] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007fe450c3ee5d
[   16.330968] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   16.331214] RBP: 00007ffdf289a880 R08: 0000000000000800 R09: 0000000000000800
[   16.331460] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffdf289a998
[   16.331706] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007fe450e60000
[   16.331958]  </TASK>
[   16.332040] irq event stamp: 0
[   16.332151] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   16.332369] hardirqs last disabled at (0): [<ffffffff8122f2d1>] copy_process+0x1c51/0x7140
[   16.332656] softirqs last  enabled at (0): [<ffffffff8122f312>] copy_process+0x1c92/0x7140
[   16.332944] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   16.333170] ---[ end trace 0000000000000000 ]---
[   16.335547] iommufd_mock iommufd_mock56: Adding to iommu group 56
[   16.335787] iommufd_mock iommufd_mock56: Removing from iommu group 56
[   16.336055] general protection fault, probably for non-canonical address 0xdffffc0000000006: 0000 [#57] PREEMPT SMP KASAN NOPTI
[   16.336446] KASAN: null-ptr-deref in range [0x0000000000000030-0x0000000000000037]
[   16.336707] CPU: 0 PID: 774 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   16.337008] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   16.337397] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   16.337602] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   16.338231] RSP: 0018:ffff88800fe8fba8 EFLAGS: 00010206
[   16.338417] RAX: dffffc0000000000 RBX: ffff88800bc4a000 RCX: 0000000000000000
[   16.338665] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   16.338920] RBP: ffff88800fe8fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   16.339168] R10: ffff88800aad88df R11: 5f6466756d6d6f69 R12: 0000000000000000
[   16.339416] R13: ffffffff85cc0180 R14: ffff88800bd79be0 R15: ffffffff87070ae0
[   16.339664] FS:  00007f799ce10600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   16.339943] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   16.340146] CR2: 0000000020000080 CR3: 00000000119f8000 CR4: 0000000000750ef0
[   16.340394] PKRU: 55555554
[   16.340495] Call Trace:
[   16.340585]  <TASK>
[   16.340666]  ? show_regs+0x6e/0x80
[   16.340797]  ? die_addr+0x45/0xb0
[   16.340925]  ? exc_general_protection+0x159/0x250
[   16.341102]  ? asm_exc_general_protection+0x2b/0x30
[   16.341281]  ? sysfs_remove_link_from_group+0x21/0x90
[   16.341464]  ? sysfs_remove_link_from_group+0x37/0x90
[   16.341648]  ? sysfs_remove_link_from_group+0x21/0x90
[   16.341830]  iommu_device_unlink+0x85/0xd0
[   16.341981]  iommu_deinit_device+0x11f/0x4c0
[   16.342141]  __iommu_group_remove_device+0x26b/0x300
[   16.342328]  iommu_group_remove_device+0x8a/0xb0
[   16.342498]  iommufd_test+0x1f1a/0x2d10
[   16.342638]  ? __pfx_lock_release+0x10/0x10
[   16.342796]  ? __pfx_lock_acquire+0x10/0x10
[   16.342952]  ? __pfx_iommufd_test+0x10/0x10
[   16.343106]  ? __sanitizer_cov_trace_const_cmp8+0x1c/0x30
[   16.343302]  iommufd_fops_ioctl+0x377/0x510
[   16.343457]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   16.343629]  ? trace_hardirqs_on+0x26/0x120
[   16.343785]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   16.344008]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   16.344188]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   16.344383]  ? security_file_ioctl+0x9d/0xd0
[   16.344542]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   16.344714]  __x64_sys_ioctl+0x1b9/0x230
[   16.344858]  do_syscall_64+0x3c/0x90
[   16.344990]  entry_SYSCALL_64_after_hwframe+0x6e/0xd8
[   16.345171] RIP: 0033:0x7f799cc3ee5d
[   16.345302] Code: ff c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d 93 af 1b 00 f7 d8 64 89 01 48
[   16.345932] RSP: 002b:00007ffdfbbd4db8 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   16.346195] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f799cc3ee5d
[   16.346443] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   16.346693] RBP: 00007ffdfbbd4dd0 R08: 0000000000000800 R09: 0000000000000800
[   16.346947] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffdfbbd4ee8
[   16.347193] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f799ce51000
[   16.347445]  </TASK>
[   16.347527] Modules linked in:
[   16.347741] ---[ end trace 0000000000000000 ]---
[   16.347905] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   16.348109] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   16.348737] RSP: 0018:ffff88802457fba8 EFLAGS: 00010206
[   16.348922] RAX: dffffc0000000000 RBX: ffff888014f9b000 RCX: 0000000000000000
[   16.349169] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   16.349416] RBP: ffff88802457fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   16.349663] R10: ffff88800aad88df R11: 0000000000000001 R12: 0000000000000000
[   16.349910] R13: ffffffff85cc0180 R14: ffff8880109b6ac0 R15: ffffffff87070ae0
[   16.350157] FS:  00007f799ce10600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   16.350435] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   16.350646] CR2: 0000000020000080 CR3: 00000000119f8000 CR4: 0000000000750ef0
[   16.350899] PKRU: 55555554
[   16.351254] ------------[ cut here ]------------
[   16.351421] WARNING: CPU: 0 PID: 774 at drivers/iommu/iommufd/main.c:258 iommufd_fops_release+0x2a3/0x300
[   16.351755] Modules linked in:
[   16.351868] CPU: 0 PID: 774 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   16.352168] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   16.352555] RIP: 0010:iommufd_fops_release+0x2a3/0x300
[   16.352741] Code: 45 d0 65 48 2b 04 25 28 00 00 00 75 54 48 81 c4 88 00 00 00 31 c0 5b 41 5c 41 5d 41 5e 41 5f 5d c3 cc cc cc cc e8 ad 4f 0a fe <0f> 0b eb a6 e8 74 23 67 fe e9 f6 fe ff ff 48 89 85 50 ff ff ff e8
[   16.353368] RSP: 0018:ffff88800fe8fc00 EFLAGS: 00010293
[   16.353551] RAX: 0000000000000000 RBX: ffff888010aafc08 RCX: 0000000000000000
[   16.353798] RDX: ffff888014cd8000 RSI: ffffffff835563e3 RDI: ffffffff86702b40
[   16.354044] RBP: ffff88800fe8fcb0 R08: 0000000000000000 R09: fffffbfff0eb2644
[   16.354290] R10: ffffffff87593227 R11: ffff8880137ef600 R12: 0000000000000000
[   16.354536] R13: ffff888012ff2418 R14: ffff88800fe8fc48 R15: ffffffff83556140
[   16.354798] FS:  0000000000000000(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   16.355075] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   16.355278] CR2: 0000000020000080 CR3: 000000000687e000 CR4: 0000000000750ef0
[   16.355525] PKRU: 55555554
[   16.355625] Call Trace:
[   16.355715]  <TASK>
[   16.355794]  ? show_regs+0x6e/0x80
[   16.355922]  ? __warn+0xef/0x340
[   16.356044]  ? report_bug+0x25e/0x4b0
[   16.356181]  ? iommufd_fops_release+0x2a3/0x300
[   16.356346]  ? report_bug+0x2cb/0x4b0
[   16.356485]  ? handle_bug+0x46/0x90
[   16.356615]  ? exc_invalid_op+0x1d/0x50
[   16.356755]  ? asm_exc_invalid_op+0x1f/0x30
[   16.356906]  ? __pfx_iommufd_fops_release+0x10/0x10
[   16.357084]  ? iommufd_fops_release+0x2a3/0x300
[   16.357249]  ? iommufd_fops_release+0x2a3/0x300
[   16.357416]  ? __pfx_iommufd_fops_release+0x10/0x10
[   16.357591]  ? rcu_is_watching+0x19/0xc0
[   16.357737]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   16.357930]  ? __pfx_iommufd_fops_release+0x10/0x10
[   16.358106]  __fput+0x424/0xaf0
[   16.358228]  ____fput+0x1f/0x30
[   16.358347]  task_work_run+0x19d/0x2b0
[   16.358487]  ? __pfx_task_work_run+0x10/0x10
[   16.358662]  ? __sanitizer_cov_trace_const_cmp1+0x1e/0x30
[   16.358872]  ? switch_task_namespaces+0xa9/0xe0
[   16.359039]  do_exit+0xac9/0x2790
[   16.359164]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   16.359388]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   16.359566]  ? __pfx_do_exit+0x10/0x10
[   16.359706]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   16.359899]  ? security_file_ioctl+0x9d/0xd0
[   16.360058]  make_task_dead+0x182/0x3c0
[   16.360201]  rewind_stack_and_make_dead+0x17/0x20
[   16.360373] RIP: 0033:0x7f799cc3ee5d
[   16.360504] Code: Unable to access opcode bytes at 0x7f799cc3ee33.
[   16.360719] RSP: 002b:00007ffdfbbd4db8 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   16.360984] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f799cc3ee5d
[   16.361232] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   16.361480] RBP: 00007ffdfbbd4dd0 R08: 0000000000000800 R09: 0000000000000800
[   16.361729] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffdfbbd4ee8
[   16.361977] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f799ce51000
[   16.362231]  </TASK>
[   16.362315] irq event stamp: 0
[   16.362426] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   16.362655] hardirqs last disabled at (0): [<ffffffff8122f2d1>] copy_process+0x1c51/0x7140
[   16.362947] softirqs last  enabled at (0): [<ffffffff8122f312>] copy_process+0x1c92/0x7140
[   16.363235] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   16.363455] ---[ end trace 0000000000000000 ]---
[   16.365812] iommufd_mock iommufd_mock57: Adding to iommu group 57
[   16.366054] iommufd_mock iommufd_mock57: Removing from iommu group 57
[   16.366298] general protection fault, probably for non-canonical address 0xdffffc0000000006: 0000 [#58] PREEMPT SMP KASAN NOPTI
[   16.366694] KASAN: null-ptr-deref in range [0x0000000000000030-0x0000000000000037]
[   16.366968] CPU: 0 PID: 775 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   16.367271] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   16.367662] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   16.367870] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   16.368503] RSP: 0018:ffff8880103d7ba8 EFLAGS: 00010206
[   16.368689] RAX: dffffc0000000000 RBX: ffff88801651c000 RCX: 0000000000000000
[   16.368938] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   16.369186] RBP: ffff8880103d7bc0 R08: 0000000000000001 R09: ffffed100155b11b
[   16.369434] R10: ffff88800aad88df R11: 5f6466756d6d6f69 R12: 0000000000000000
[   16.369684] R13: ffffffff85cc0180 R14: ffff88800bd79960 R15: ffffffff87070ae0
[   16.369932] FS:  00007f65b0b34600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   16.370213] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   16.370417] CR2: 0000000020000080 CR3: 00000000119f8000 CR4: 0000000000750ef0
[   16.370666] PKRU: 55555554
[   16.370776] Call Trace:
[   16.370867]  <TASK>
[   16.370948]  ? show_regs+0x6e/0x80
[   16.371079]  ? die_addr+0x45/0xb0
[   16.371208]  ? exc_general_protection+0x159/0x250
[   16.371386]  ? asm_exc_general_protection+0x2b/0x30
[   16.371566]  ? sysfs_remove_link_from_group+0x21/0x90
[   16.371751]  ? sysfs_remove_link_from_group+0x37/0x90
[   16.371935]  ? sysfs_remove_link_from_group+0x21/0x90
[   16.372119]  iommu_device_unlink+0x85/0xd0
[   16.372271]  iommu_deinit_device+0x11f/0x4c0
[   16.372432]  __iommu_group_remove_device+0x26b/0x300
[   16.372616]  iommu_group_remove_device+0x8a/0xb0
[   16.372787]  iommufd_test+0x1f1a/0x2d10
[   16.372928]  ? __pfx_lock_release+0x10/0x10
[   16.373083]  ? __pfx_lock_acquire+0x10/0x10
[   16.373239]  ? __pfx_iommufd_test+0x10/0x10
[   16.373395]  ? __sanitizer_cov_trace_const_cmp8+0x1c/0x30
[   16.373592]  iommufd_fops_ioctl+0x377/0x510
[   16.373748]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   16.373921]  ? trace_hardirqs_on+0x26/0x120
[   16.374078]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   16.374303]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   16.374484]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   16.374679]  ? security_file_ioctl+0x9d/0xd0
[   16.374847]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   16.375022]  __x64_sys_ioctl+0x1b9/0x230
[   16.375168]  do_syscall_64+0x3c/0x90
[   16.375301]  entry_SYSCALL_64_after_hwframe+0x6e/0xd8
[   16.375483] RIP: 0033:0x7f65b083ee5d
[   16.375616] Code: ff c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d 93 af 1b 00 f7 d8 64 89 01 48
[   16.376250] RSP: 002b:00007ffef0582fb8 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   16.376514] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f65b083ee5d
[   16.376763] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   16.377011] RBP: 00007ffef0582fd0 R08: 0000000000000800 R09: 0000000000000800
[   16.377260] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffef05830e8
[   16.377509] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f65b0b75000
[   16.377762]  </TASK>
[   16.377845] Modules linked in:
[   16.378025] ---[ end trace 0000000000000000 ]---
[   16.378191] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   16.378396] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   16.379047] RSP: 0018:ffff88802457fba8 EFLAGS: 00010206
[   16.379233] RAX: dffffc0000000000 RBX: ffff888014f9b000 RCX: 0000000000000000
[   16.379482] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   16.379733] RBP: ffff88802457fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   16.379982] R10: ffff88800aad88df R11: 0000000000000001 R12: 0000000000000000
[   16.380270] R13: ffffffff85cc0180 R14: ffff8880109b6ac0 R15: ffffffff87070ae0
[   16.380587] FS:  00007f65b0b34600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   16.380891] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   16.381132] CR2: 0000000020000080 CR3: 00000000119f8000 CR4: 0000000000750ef0
[   16.381389] PKRU: 55555554
[   16.381792] ------------[ cut here ]------------
[   16.381959] WARNING: CPU: 0 PID: 775 at drivers/iommu/iommufd/main.c:258 iommufd_fops_release+0x2a3/0x300
[   16.382316] Modules linked in:
[   16.382468] CPU: 0 PID: 775 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   16.382790] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   16.383248] RIP: 0010:iommufd_fops_release+0x2a3/0x300
[   16.383435] Code: 45 d0 65 48 2b 04 25 28 00 00 00 75 54 48 81 c4 88 00 00 00 31 c0 5b 41 5c 41 5d 41 5e 41 5f 5d c3 cc cc cc cc e8 ad 4f 0a fe <0f> 0b eb a6 e8 74 23 67 fe e9 f6 fe ff ff 48 89 85 50 ff ff ff e8
[   16.384134] RSP: 0018:ffff8880103d7c00 EFLAGS: 00010293
[   16.384321] RAX: 0000000000000000 RBX: ffff888010aaf808 RCX: 0000000000000000
[   16.384594] RDX: ffff888014cdca00 RSI: ffffffff835563e3 RDI: ffffffff86702b40
[   16.384884] RBP: ffff8880103d7cb0 R08: 0000000000000000 R09: fffffbfff0eb2644
[   16.385133] R10: ffffffff87593227 R11: ffff88802038d000 R12: 0000000000000000
[   16.385441] R13: ffff8880135c4698 R14: ffff8880103d7c48 R15: ffffffff83556140
[   16.385695] FS:  0000000000000000(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   16.386043] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   16.386251] CR2: 0000000020000080 CR3: 000000000687e000 CR4: 0000000000750ef0
[   16.386506] PKRU: 55555554
[   16.386713] Call Trace:
[   16.386812]  <TASK>
[   16.386892]  ? show_regs+0x6e/0x80
[   16.387021]  ? __warn+0xef/0x340
[   16.387144]  ? report_bug+0x25e/0x4b0
[   16.387282]  ? iommufd_fops_release+0x2a3/0x300
[   16.387449]  ? report_bug+0x2cb/0x4b0
[   16.387588]  ? handle_bug+0x46/0x90
[   16.387743]  ? exc_invalid_op+0x1d/0x50
[   16.387928]  ? asm_exc_invalid_op+0x1f/0x30
[   16.388081]  ? __pfx_iommufd_fops_release+0x10/0x10
[   16.388260]  ? iommufd_fops_release+0x2a3/0x300
[   16.388451]  ? iommufd_fops_release+0x2a3/0x300
[   16.388661]  ? __pfx_iommufd_fops_release+0x10/0x10
[   16.388838]  ? rcu_is_watching+0x19/0xc0
[   16.388985]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   16.389203]  ? __pfx_iommufd_fops_release+0x10/0x10
[   16.389423]  __fput+0x424/0xaf0
[   16.389547]  ____fput+0x1f/0x30
[   16.389668]  task_work_run+0x19d/0x2b0
[   16.389830]  ? __pfx_task_work_run+0x10/0x10
[   16.390032]  ? __sanitizer_cov_trace_const_cmp1+0x1e/0x30
[   16.390230]  ? switch_task_namespaces+0xa9/0xe0
[   16.390409]  do_exit+0xac9/0x2790
[   16.390599]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   16.390831]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   16.391014]  ? __pfx_do_exit+0x10/0x10
[   16.391155]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   16.391351]  ? security_file_ioctl+0x9d/0xd0
[   16.391533]  make_task_dead+0x182/0x3c0
[   16.391718]  rewind_stack_and_make_dead+0x17/0x20
[   16.391894] RIP: 0033:0x7f65b083ee5d
[   16.392027] Code: Unable to access opcode bytes at 0x7f65b083ee33.
[   16.392306] RSP: 002b:00007ffef0582fb8 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   16.392575] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f65b083ee5d
[   16.392911] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   16.393216] RBP: 00007ffef0582fd0 R08: 0000000000000800 R09: 0000000000000800
[   16.393468] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffef05830e8
[   16.393729] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f65b0b75000
[   16.394034]  </TASK>
[   16.394119] irq event stamp: 0
[   16.394233] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   16.394470] hardirqs last disabled at (0): [<ffffffff8122f2d1>] copy_process+0x1c51/0x7140
[   16.394820] softirqs last  enabled at (0): [<ffffffff8122f312>] copy_process+0x1c92/0x7140
[   16.395113] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   16.395337] ---[ end trace 0000000000000000 ]---
[   16.398514] iommufd_mock iommufd_mock58: Adding to iommu group 58
[   16.398790] iommufd_mock iommufd_mock58: Removing from iommu group 58
[   16.399043] general protection fault, probably for non-canonical address 0xdffffc0000000006: 0000 [#59] PREEMPT SMP KASAN NOPTI
[   16.399444] KASAN: null-ptr-deref in range [0x0000000000000030-0x0000000000000037]
[   16.399711] CPU: 0 PID: 776 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   16.400068] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   16.400466] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   16.400678] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   16.401323] RSP: 0018:ffff88802459fba8 EFLAGS: 00010206
[   16.401513] RAX: dffffc0000000000 RBX: ffff88801651b000 RCX: 0000000000000000
[   16.401767] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   16.402020] RBP: ffff88802459fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   16.402273] R10: ffff88800aad88df R11: 5f6466756d6d6f69 R12: 0000000000000000
[   16.402526] R13: ffffffff85cc0180 R14: ffff88800bd79160 R15: ffffffff87070ae0
[   16.402788] FS:  00007fb74b5a6600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   16.403084] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   16.403293] CR2: 0000000020000080 CR3: 00000000233b2000 CR4: 0000000000750ef0
[   16.403542] PKRU: 55555554
[   16.403642] Call Trace:
[   16.403733]  <TASK>
[   16.403813]  ? show_regs+0x6e/0x80
[   16.403945]  ? die_addr+0x45/0xb0
[   16.404073]  ? exc_general_protection+0x159/0x250
[   16.404253]  ? asm_exc_general_protection+0x2b/0x30
[   16.404439]  ? sysfs_remove_link_from_group+0x21/0x90
[   16.404622]  ? sysfs_remove_link_from_group+0x37/0x90
[   16.404806]  ? sysfs_remove_link_from_group+0x21/0x90
[   16.404989]  iommu_device_unlink+0x85/0xd0
[   16.405140]  iommu_deinit_device+0x11f/0x4c0
[   16.405300]  __iommu_group_remove_device+0x26b/0x300
[   16.405488]  iommu_group_remove_device+0x8a/0xb0
[   16.405660]  iommufd_test+0x1f1a/0x2d10
[   16.405801]  ? __pfx_lock_release+0x10/0x10
[   16.405956]  ? __pfx_lock_acquire+0x10/0x10
[   16.406111]  ? __pfx_iommufd_test+0x10/0x10
[   16.406265]  ? __sanitizer_cov_trace_const_cmp8+0x1c/0x30
[   16.406462]  iommufd_fops_ioctl+0x377/0x510
[   16.406632]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   16.406813]  ? trace_hardirqs_on+0x26/0x120
[   16.406973]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   16.407202]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   16.407386]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   16.407584]  ? security_file_ioctl+0x9d/0xd0
[   16.407750]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   16.407922]  __x64_sys_ioctl+0x1b9/0x230
[   16.408067]  do_syscall_64+0x3c/0x90
[   16.408200]  entry_SYSCALL_64_after_hwframe+0x6e/0xd8
[   16.408381] RIP: 0033:0x7fb74b23ee5d
[   16.408513] Code: ff c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d 93 af 1b 00 f7 d8 64 89 01 48
[   16.409155] RSP: 002b:00007ffe97d66328 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   16.409419] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007fb74b23ee5d
[   16.409667] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   16.409920] RBP: 00007ffe97d66340 R08: 0000000000000800 R09: 0000000000000800
[   16.410168] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffe97d66458
[   16.410415] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007fb74b5e7000
[   16.410672]  </TASK>
[   16.410762] Modules linked in:
[   16.410986] ---[ end trace 0000000000000000 ]---
[   16.411155] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   16.411362] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   16.412009] RSP: 0018:ffff88802457fba8 EFLAGS: 00010206
[   16.412194] RAX: dffffc0000000000 RBX: ffff888014f9b000 RCX: 0000000000000000
[   16.412442] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   16.412688] RBP: ffff88802457fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   16.412938] R10: ffff88800aad88df R11: 0000000000000001 R12: 0000000000000000
[   16.413189] R13: ffffffff85cc0180 R14: ffff8880109b6ac0 R15: ffffffff87070ae0
[   16.413436] FS:  00007fb74b5a6600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   16.413714] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   16.413917] CR2: 0000000020000080 CR3: 00000000233b2000 CR4: 0000000000750ef0
[   16.414172] PKRU: 55555554
[   16.414863] ------------[ cut here ]------------
[   16.415033] WARNING: CPU: 0 PID: 776 at drivers/iommu/iommufd/main.c:258 iommufd_fops_release+0x2a3/0x300
[   16.415371] Modules linked in:
[   16.415483] CPU: 0 PID: 776 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   16.415801] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   16.416242] RIP: 0010:iommufd_fops_release+0x2a3/0x300
[   16.416428] Code: 45 d0 65 48 2b 04 25 28 00 00 00 75 54 48 81 c4 88 00 00 00 31 c0 5b 41 5c 41 5d 41 5e 41 5f 5d c3 cc cc cc cc e8 ad 4f 0a fe <0f> 0b eb a6 e8 74 23 67 fe e9 f6 fe ff ff 48 89 85 50 ff ff ff e8
[   16.417126] RSP: 0018:ffff88802459fc00 EFLAGS: 00010293
[   16.417334] RAX: 0000000000000000 RBX: ffff888010aafa08 RCX: 0000000000000000
[   16.417620] RDX: ffff88800fada500 RSI: ffffffff835563e3 RDI: ffffffff86702b40
[   16.417876] RBP: ffff88802459fcb0 R08: 0000000000000000 R09: fffffbfff0eb2644
[   16.418169] R10: ffffffff87593227 R11: ffff88800fe0c800 R12: 0000000000000000
[   16.418416] R13: ffff8880123d9818 R14: ffff88802459fc48 R15: ffffffff83556140
[   16.418710] FS:  0000000000000000(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   16.419035] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   16.419238] CR2: 0000000020000080 CR3: 000000000687e000 CR4: 0000000000750ef0
[   16.419491] PKRU: 55555554
[   16.419601] Call Trace:
[   16.419694]  <TASK>
[   16.419811]  ? show_regs+0x6e/0x80
[   16.419940]  ? __warn+0xef/0x340
[   16.420063]  ? report_bug+0x25e/0x4b0
[   16.420221]  ? iommufd_fops_release+0x2a3/0x300
[   16.420432]  ? report_bug+0x2cb/0x4b0
[   16.420571]  ? handle_bug+0x46/0x90
[   16.420701]  ? exc_invalid_op+0x1d/0x50
[   16.420852]  ? asm_exc_invalid_op+0x1f/0x30
[   16.421049]  ? __pfx_iommufd_fops_release+0x10/0x10
[   16.421233]  ? iommufd_fops_release+0x2a3/0x300
[   16.421402]  ? iommufd_fops_release+0x2a3/0x300
[   16.421638]  ? __pfx_iommufd_fops_release+0x10/0x10
[   16.421818]  ? rcu_is_watching+0x19/0xc0
[   16.421967]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   16.422180]  ? __pfx_iommufd_fops_release+0x10/0x10
[   16.422389]  __fput+0x424/0xaf0
[   16.422516]  ____fput+0x1f/0x30
[   16.422646]  task_work_run+0x19d/0x2b0
[   16.422793]  ? __pfx_task_work_run+0x10/0x10
[   16.422953]  ? __sanitizer_cov_trace_const_cmp1+0x1e/0x30
[   16.423150]  ? switch_task_namespaces+0xa9/0xe0
[   16.423335]  do_exit+0xac9/0x2790
[   16.423505]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   16.423732]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   16.423913]  ? __pfx_do_exit+0x10/0x10
[   16.424065]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   16.424305]  ? security_file_ioctl+0x9d/0xd0
[   16.424468]  make_task_dead+0x182/0x3c0
[   16.424614]  rewind_stack_and_make_dead+0x17/0x20
[   16.424849] RIP: 0033:0x7fb74b23ee5d
[   16.424983] Code: Unable to access opcode bytes at 0x7fb74b23ee33.
[   16.425201] RSP: 002b:00007ffe97d66328 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   16.425527] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007fb74b23ee5d
[   16.425779] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   16.426051] RBP: 00007ffe97d66340 R08: 0000000000000800 R09: 0000000000000800
[   16.426341] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffe97d66458
[   16.426602] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007fb74b5e7000
[   16.426866]  </TASK>
[   16.426950] irq event stamp: 0
[   16.427112] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   16.427337] hardirqs last disabled at (0): [<ffffffff8122f2d1>] copy_process+0x1c51/0x7140
[   16.427630] softirqs last  enabled at (0): [<ffffffff8122f312>] copy_process+0x1c92/0x7140
[   16.427982] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   16.428206] ---[ end trace 0000000000000000 ]---
[   16.431059] iommufd_mock iommufd_mock59: Adding to iommu group 59
[   16.431301] iommufd_mock iommufd_mock59: Removing from iommu group 59
[   16.431550] general protection fault, probably for non-canonical address 0xdffffc0000000006: 0000 [#60] PREEMPT SMP KASAN NOPTI
[   16.431995] KASAN: null-ptr-deref in range [0x0000000000000030-0x0000000000000037]
[   16.432263] CPU: 0 PID: 777 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   16.432571] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   16.432969] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   16.433202] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   16.433847] RSP: 0018:ffff8880103d7ba8 EFLAGS: 00010206
[   16.434037] RAX: dffffc0000000000 RBX: ffff8880149f3000 RCX: 0000000000000000
[   16.434289] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   16.434542] RBP: ffff8880103d7bc0 R08: 0000000000000001 R09: ffffed100155b11b
[   16.434802] R10: ffff88800aad88df R11: 5f6466756d6d6f69 R12: 0000000000000000
[   16.435056] R13: ffffffff85cc0180 R14: ffff88800bd79fc0 R15: ffffffff87070ae0
[   16.435309] FS:  00007f71170d0600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   16.435594] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   16.435801] CR2: 0000000020000080 CR3: 00000000196aa000 CR4: 0000000000750ef0
[   16.436057] PKRU: 55555554
[   16.436160] Call Trace:
[   16.436254]  <TASK>
[   16.436336]  ? show_regs+0x6e/0x80
[   16.436470]  ? die_addr+0x45/0xb0
[   16.436601]  ? exc_general_protection+0x159/0x250
[   16.436781]  ? asm_exc_general_protection+0x2b/0x30
[   16.436965]  ? sysfs_remove_link_from_group+0x21/0x90
[   16.437152]  ? sysfs_remove_link_from_group+0x37/0x90
[   16.437340]  ? sysfs_remove_link_from_group+0x21/0x90
[   16.437527]  iommu_device_unlink+0x85/0xd0
[   16.437681]  iommu_deinit_device+0x11f/0x4c0
[   16.437844]  __iommu_group_remove_device+0x26b/0x300
[   16.438032]  iommu_group_remove_device+0x8a/0xb0
[   16.438206]  iommufd_test+0x1f1a/0x2d10
[   16.438349]  ? __pfx_lock_release+0x10/0x10
[   16.438507]  ? __pfx_lock_acquire+0x10/0x10
[   16.438666]  ? __pfx_iommufd_test+0x10/0x10
[   16.438827]  ? __sanitizer_cov_trace_const_cmp8+0x1c/0x30
[   16.439028]  iommufd_fops_ioctl+0x377/0x510
[   16.439187]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   16.439362]  ? trace_hardirqs_on+0x26/0x120
[   16.439522]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   16.439751]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   16.439934]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   16.440133]  ? security_file_ioctl+0x9d/0xd0
[   16.440296]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   16.440472]  __x64_sys_ioctl+0x1b9/0x230
[   16.440620]  do_syscall_64+0x3c/0x90
[   16.440755]  entry_SYSCALL_64_after_hwframe+0x6e/0xd8
[   16.440941] RIP: 0033:0x7f7116e3ee5d
[   16.441075] Code: ff c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d 93 af 1b 00 f7 d8 64 89 01 48
[   16.441719] RSP: 002b:00007ffd838a3b68 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   16.441989] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f7116e3ee5d
[   16.442242] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   16.442495] RBP: 00007ffd838a3b80 R08: 0000000000000800 R09: 0000000000000800
[   16.442753] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffd838a3c98
[   16.443073] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f7117111000
[   16.443340]  </TASK>
[   16.443426] Modules linked in:
[   16.443612] ---[ end trace 0000000000000000 ]---
[   16.443784] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   16.444000] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   16.444656] RSP: 0018:ffff88802457fba8 EFLAGS: 00010206
[   16.444850] RAX: dffffc0000000000 RBX: ffff888014f9b000 RCX: 0000000000000000
[   16.445107] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   16.445536] RBP: ffff88802457fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   16.445794] R10: ffff88800aad88df R11: 0000000000000001 R12: 0000000000000000
[   16.446062] R13: ffffffff85cc0180 R14: ffff8880109b6ac0 R15: ffffffff87070ae0
[   16.446365] FS:  00007f71170d0600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   16.446670] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   16.446952] CR2: 0000000020000080 CR3: 00000000196aa000 CR4: 0000000000750ef0
[   16.447210] PKRU: 55555554
[   16.447581] ------------[ cut here ]------------
[   16.447802] WARNING: CPU: 0 PID: 777 at drivers/iommu/iommufd/main.c:258 iommufd_fops_release+0x2a3/0x300
[   16.448143] Modules linked in:
[   16.448267] CPU: 0 PID: 777 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   16.448628] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   16.449087] RIP: 0010:iommufd_fops_release+0x2a3/0x300
[   16.449281] Code: 45 d0 65 48 2b 04 25 28 00 00 00 75 54 48 81 c4 88 00 00 00 31 c0 5b 41 5c 41 5d 41 5e 41 5f 5d c3 cc cc cc cc e8 ad 4f 0a fe <0f> 0b eb a6 e8 74 23 67 fe e9 f6 fe ff ff 48 89 85 50 ff ff ff e8
[   16.450003] RSP: 0018:ffff8880103d7c00 EFLAGS: 00010293
[   16.450201] RAX: 0000000000000000 RBX: ffff88800ca7f708 RCX: 0000000000000000
[   16.450513] RDX: ffff88800fadca00 RSI: ffffffff835563e3 RDI: ffffffff86702b40
[   16.450790] RBP: ffff8880103d7cb0 R08: 0000000000000000 R09: fffffbfff0eb2644
[   16.451048] R10: ffffffff87593227 R11: ffff8880111f3e00 R12: 0000000000000000
[   16.451372] R13: ffff8880123d8918 R14: ffff8880103d7c48 R15: ffffffff83556140
[   16.451633] FS:  0000000000000000(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   16.451989] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   16.452200] CR2: 0000000020000080 CR3: 000000000687e000 CR4: 0000000000750ef0
[   16.452459] PKRU: 55555554
[   16.452572] Call Trace:
[   16.452716]  <TASK>
[   16.452800]  ? show_regs+0x6e/0x80
[   16.452936]  ? __warn+0xef/0x340
[   16.453063]  ? report_bug+0x25e/0x4b0
[   16.453214]  ? iommufd_fops_release+0x2a3/0x300
[   16.453433]  ? report_bug+0x2cb/0x4b0
[   16.453578]  ? handle_bug+0x46/0x90
[   16.453713]  ? exc_invalid_op+0x1d/0x50
[   16.453879]  ? asm_exc_invalid_op+0x1f/0x30
[   16.454077]  ? __pfx_iommufd_fops_release+0x10/0x10
[   16.454264]  ? iommufd_fops_release+0x2a3/0x300
[   16.454436]  ? iommufd_fops_release+0x2a3/0x300
[   16.454672]  ? __pfx_iommufd_fops_release+0x10/0x10
[   16.454862]  ? rcu_is_watching+0x19/0xc0
[   16.455011]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   16.455209]  ? __pfx_iommufd_fops_release+0x10/0x10
[   16.455389]  __fput+0x424/0xaf0
[   16.455520]  ____fput+0x1f/0x30
[   16.455698]  task_work_run+0x19d/0x2b0
[   16.455843]  ? __pfx_task_work_run+0x10/0x10
[   16.456002]  ? __sanitizer_cov_trace_const_cmp1+0x1e/0x30
[   16.456208]  ? switch_task_namespaces+0xa9/0xe0
[   16.456436]  do_exit+0xac9/0x2790
[   16.456564]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   16.456791]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   16.457032]  ? __pfx_do_exit+0x10/0x10
[   16.457174]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   16.457387]  ? security_file_ioctl+0x9d/0xd0
[   16.457558]  make_task_dead+0x182/0x3c0
[   16.457754]  rewind_stack_and_make_dead+0x17/0x20
[   16.457929] RIP: 0033:0x7f7116e3ee5d
[   16.458063] Code: Unable to access opcode bytes at 0x7f7116e3ee33.
[   16.458344] RSP: 002b:00007ffd838a3b68 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   16.458625] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f7116e3ee5d
[   16.458892] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   16.459144] RBP: 00007ffd838a3b80 R08: 0000000000000800 R09: 0000000000000800
[   16.459458] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffd838a3c98
[   16.459711] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f7117111000
[   16.460029]  </TASK>
[   16.460114] irq event stamp: 0
[   16.460228] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   16.460452] hardirqs last disabled at (0): [<ffffffff8122f2d1>] copy_process+0x1c51/0x7140
[   16.460806] softirqs last  enabled at (0): [<ffffffff8122f312>] copy_process+0x1c92/0x7140
[   16.461100] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   16.461385] ---[ end trace 0000000000000000 ]---
[   16.464213] iommufd_mock iommufd_mock60: Adding to iommu group 60
[   16.464456] iommufd_mock iommufd_mock60: Removing from iommu group 60
[   16.464706] general protection fault, probably for non-canonical address 0xdffffc0000000006: 0000 [#61] PREEMPT SMP KASAN NOPTI
[   16.465106] KASAN: null-ptr-deref in range [0x0000000000000030-0x0000000000000037]
[   16.465440] CPU: 0 PID: 778 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   16.465748] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   16.466145] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   16.466356] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   16.467012] RSP: 0018:ffff88800fe8fba8 EFLAGS: 00010206
[   16.467202] RAX: dffffc0000000000 RBX: ffff88800bcfe000 RCX: 0000000000000000
[   16.467455] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   16.467708] RBP: ffff88800fe8fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   16.467961] R10: ffff88800aad88df R11: 5f6466756d6d6f69 R12: 0000000000000000
[   16.468214] R13: ffffffff85cc0180 R14: ffff88800bd79e60 R15: ffffffff87070ae0
[   16.468467] FS:  00007fecbaa87600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   16.468752] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   16.468958] CR2: 0000000020000080 CR3: 00000000233b2000 CR4: 0000000000750ef0
[   16.469213] PKRU: 55555554
[   16.469315] Call Trace:
[   16.469407]  <TASK>
[   16.469489]  ? show_regs+0x6e/0x80
[   16.469623]  ? die_addr+0x45/0xb0
[   16.469754]  ? exc_general_protection+0x159/0x250
[   16.469935]  ? asm_exc_general_protection+0x2b/0x30
[   16.470118]  ? sysfs_remove_link_from_group+0x21/0x90
[   16.470305]  ? sysfs_remove_link_from_group+0x37/0x90
[   16.470493]  ? sysfs_remove_link_from_group+0x21/0x90
[   16.470680]  iommu_device_unlink+0x85/0xd0
[   16.470839]  iommu_deinit_device+0x11f/0x4c0
[   16.471007]  __iommu_group_remove_device+0x26b/0x300
[   16.471194]  iommu_group_remove_device+0x8a/0xb0
[   16.471368]  iommufd_test+0x1f1a/0x2d10
[   16.471512]  ? __pfx_lock_release+0x10/0x10
[   16.471669]  ? __pfx_lock_acquire+0x10/0x10
[   16.471828]  ? __pfx_iommufd_test+0x10/0x10
[   16.471986]  ? __sanitizer_cov_trace_const_cmp8+0x1c/0x30
[   16.472186]  iommufd_fops_ioctl+0x377/0x510
[   16.472346]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   16.472521]  ? trace_hardirqs_on+0x26/0x120
[   16.472681]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   16.472910]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   16.473094]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   16.473293]  ? security_file_ioctl+0x9d/0xd0
[   16.473456]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   16.473632]  __x64_sys_ioctl+0x1b9/0x230
[   16.473780]  do_syscall_64+0x3c/0x90
[   16.473915]  entry_SYSCALL_64_after_hwframe+0x6e/0xd8
[   16.474101] RIP: 0033:0x7fecba83ee5d
[   16.474236] Code: ff c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d 93 af 1b 00 f7 d8 64 89 01 48
[   16.474898] RSP: 002b:00007ffd1dd7efb8 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   16.475168] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007fecba83ee5d
[   16.475422] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   16.475675] RBP: 00007ffd1dd7efd0 R08: 0000000000000800 R09: 0000000000000800
[   16.475928] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffd1dd7f0e8
[   16.476180] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007fecbaac8000
[   16.476439]  </TASK>
[   16.476526] Modules linked in:
[   16.476789] ---[ end trace 0000000000000000 ]---
[   16.476959] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   16.477168] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   16.477812] RSP: 0018:ffff88802457fba8 EFLAGS: 00010206
[   16.478002] RAX: dffffc0000000000 RBX: ffff888014f9b000 RCX: 0000000000000000
[   16.478266] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   16.478603] RBP: ffff88802457fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   16.478864] R10: ffff88800aad88df R11: 0000000000000001 R12: 0000000000000000
[   16.479146] R13: ffffffff85cc0180 R14: ffff8880109b6ac0 R15: ffffffff87070ae0
[   16.479452] FS:  00007fecbaa87600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   16.479738] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   16.480014] CR2: 0000000020000080 CR3: 00000000233b2000 CR4: 0000000000750ef0
[   16.480268] PKRU: 55555554
[   16.480682] ------------[ cut here ]------------
[   16.480851] WARNING: CPU: 0 PID: 778 at drivers/iommu/iommufd/main.c:258 iommufd_fops_release+0x2a3/0x300
[   16.481264] Modules linked in:
[   16.481381] CPU: 0 PID: 778 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   16.481689] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   16.482149] RIP: 0010:iommufd_fops_release+0x2a3/0x300
[   16.482339] Code: 45 d0 65 48 2b 04 25 28 00 00 00 75 54 48 81 c4 88 00 00 00 31 c0 5b 41 5c 41 5d 41 5e 41 5f 5d c3 cc cc cc cc e8 ad 4f 0a fe <0f> 0b eb a6 e8 74 23 67 fe e9 f6 fe ff ff 48 89 85 50 ff ff ff e8
[   16.483081] RSP: 0018:ffff88800fe8fc00 EFLAGS: 00010293
[   16.483272] RAX: 0000000000000000 RBX: ffff88800ca7f408 RCX: 0000000000000000
[   16.483599] RDX: ffff888014580000 RSI: ffffffff835563e3 RDI: ffffffff86702b40
[   16.483852] RBP: ffff88800fe8fcb0 R08: 0000000000000000 R09: fffffbfff0eb2644
[   16.484118] R10: ffffffff87593227 R11: ffff888018afe200 R12: 0000000000000000
[   16.484425] R13: ffff888013549098 R14: ffff88800fe8fc48 R15: ffffffff83556140
[   16.484678] FS:  0000000000000000(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   16.485020] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   16.485227] CR2: 0000000020000080 CR3: 000000000687e000 CR4: 0000000000750ef0
[   16.485554] PKRU: 55555554
[   16.485657] Call Trace:
[   16.485749]  <TASK>
[   16.485831]  ? show_regs+0x6e/0x80
[   16.485963]  ? __warn+0xef/0x340
[   16.486098]  ? report_bug+0x25e/0x4b0
[   16.486295]  ? iommufd_fops_release+0x2a3/0x300
[   16.486465]  ? report_bug+0x2cb/0x4b0
[   16.486615]  ? handle_bug+0x46/0x90
[   16.486751]  ? exc_invalid_op+0x1d/0x50
[   16.486910]  ? asm_exc_invalid_op+0x1f/0x30
[   16.487077]  ? __pfx_iommufd_fops_release+0x10/0x10
[   16.487324]  ? iommufd_fops_release+0x2a3/0x300
[   16.487494]  ? iommufd_fops_release+0x2a3/0x300
[   16.487665]  ? __pfx_iommufd_fops_release+0x10/0x10
[   16.487916]  ? rcu_is_watching+0x19/0xc0
[   16.488065]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   16.488263]  ? __pfx_iommufd_fops_release+0x10/0x10
[   16.488468]  __fput+0x424/0xaf0
[   16.488618]  ____fput+0x1f/0x30
[   16.488741]  task_work_run+0x19d/0x2b0
[   16.488883]  ? __pfx_task_work_run+0x10/0x10
[   16.489054]  ? __sanitizer_cov_trace_const_cmp1+0x1e/0x30
[   16.489308]  ? switch_task_namespaces+0xa9/0xe0
[   16.489480]  do_exit+0xac9/0x2790
[   16.489607]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   16.489905]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   16.490088]  ? __pfx_do_exit+0x10/0x10
[   16.490229]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   16.490447]  ? security_file_ioctl+0x9d/0xd0
[   16.490671]  make_task_dead+0x182/0x3c0
[   16.490824]  rewind_stack_and_make_dead+0x17/0x20
[   16.491004] RIP: 0033:0x7fecba83ee5d
[   16.491138] Code: Unable to access opcode bytes at 0x7fecba83ee33.
[   16.491356] RSP: 002b:00007ffd1dd7efb8 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   16.491703] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007fecba83ee5d
[   16.491956] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   16.492233] RBP: 00007ffd1dd7efd0 R08: 0000000000000800 R09: 0000000000000800
[   16.492531] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffd1dd7f0e8
[   16.492791] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007fecbaac8000
[   16.493113]  </TASK>
[   16.493198] irq event stamp: 0
[   16.493312] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   16.493609] hardirqs last disabled at (0): [<ffffffff8122f2d1>] copy_process+0x1c51/0x7140
[   16.493903] softirqs last  enabled at (0): [<ffffffff8122f312>] copy_process+0x1c92/0x7140
[   16.494209] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   16.494492] ---[ end trace 0000000000000000 ]---
[   16.497337] iommufd_mock iommufd_mock61: Adding to iommu group 61
[   16.497578] iommufd_mock iommufd_mock61: Removing from iommu group 61
[   16.497828] general protection fault, probably for non-canonical address 0xdffffc0000000006: 0000 [#62] PREEMPT SMP KASAN NOPTI
[   16.498228] KASAN: null-ptr-deref in range [0x0000000000000030-0x0000000000000037]
[   16.498558] CPU: 0 PID: 779 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   16.498886] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   16.499287] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   16.499498] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   16.500142] RSP: 0018:ffff88802459fba8 EFLAGS: 00010206
[   16.500332] RAX: dffffc0000000000 RBX: ffff88800bcfa000 RCX: 0000000000000000
[   16.500585] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   16.500837] RBP: ffff88802459fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   16.501090] R10: ffff88800aad88df R11: 5f6466756d6d6f69 R12: 0000000000000000
[   16.501342] R13: ffffffff85cc0180 R14: ffff88800bd79120 R15: ffffffff87070ae0
[   16.501595] FS:  00007f2ad05b9600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   16.501880] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   16.502087] CR2: 0000000020000080 CR3: 00000000196aa000 CR4: 0000000000750ef0
[   16.502341] PKRU: 55555554
[   16.502443] Call Trace:
[   16.502536]  <TASK>
[   16.502618]  ? show_regs+0x6e/0x80
[   16.502754]  ? die_addr+0x45/0xb0
[   16.502904]  ? exc_general_protection+0x159/0x250
[   16.503085]  ? asm_exc_general_protection+0x2b/0x30
[   16.503268]  ? sysfs_remove_link_from_group+0x21/0x90
[   16.503455]  ? sysfs_remove_link_from_group+0x37/0x90
[   16.503643]  ? sysfs_remove_link_from_group+0x21/0x90
[   16.503830]  iommu_device_unlink+0x85/0xd0
[   16.503985]  iommu_deinit_device+0x11f/0x4c0
[   16.504148]  __iommu_group_remove_device+0x26b/0x300
[   16.504335]  iommu_group_remove_device+0x8a/0xb0
[   16.504509]  iommufd_test+0x1f1a/0x2d10
[   16.504653]  ? __pfx_lock_release+0x10/0x10
[   16.504811]  ? __pfx_lock_acquire+0x10/0x10
[   16.504969]  ? __pfx_iommufd_test+0x10/0x10
[   16.505126]  ? __sanitizer_cov_trace_const_cmp8+0x1c/0x30
[   16.505327]  iommufd_fops_ioctl+0x377/0x510
[   16.505485]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   16.505661]  ? trace_hardirqs_on+0x26/0x120
[   16.505820]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   16.506049]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   16.506233]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   16.506431]  ? security_file_ioctl+0x9d/0xd0
[   16.506594]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   16.506772]  __x64_sys_ioctl+0x1b9/0x230
[   16.506948]  do_syscall_64+0x3c/0x90
[   16.507085]  entry_SYSCALL_64_after_hwframe+0x6e/0xd8
[   16.507271] RIP: 0033:0x7f2ad023ee5d
[   16.507406] Code: ff c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d 93 af 1b 00 f7 d8 64 89 01 48
[   16.508050] RSP: 002b:00007ffee0a00798 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   16.508320] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f2ad023ee5d
[   16.508573] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   16.508826] RBP: 00007ffee0a007b0 R08: 0000000000000800 R09: 0000000000000800
[   16.509079] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffee0a008c8
[   16.509332] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f2ad05fa000
[   16.509591]  </TASK>
[   16.509676] Modules linked in:
[   16.509846] ---[ end trace 0000000000000000 ]---
[   16.510015] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   16.510223] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   16.510942] RSP: 0018:ffff88802457fba8 EFLAGS: 00010206
[   16.511132] RAX: dffffc0000000000 RBX: ffff888014f9b000 RCX: 0000000000000000
[   16.511385] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   16.511639] RBP: ffff88802457fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   16.511981] R10: ffff88800aad88df R11: 0000000000000001 R12: 0000000000000000
[   16.512235] R13: ffffffff85cc0180 R14: ffff8880109b6ac0 R15: ffffffff87070ae0
[   16.512488] FS:  00007f2ad05b9600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   16.512849] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   16.513057] CR2: 0000000020000080 CR3: 00000000196aa000 CR4: 0000000000750ef0
[   16.513386] PKRU: 55555554
[   16.513746] ------------[ cut here ]------------
[   16.513931] WARNING: CPU: 0 PID: 779 at drivers/iommu/iommufd/main.c:258 iommufd_fops_release+0x2a3/0x300
[   16.514330] Modules linked in:
[   16.514446] CPU: 0 PID: 779 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   16.514849] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   16.515249] RIP: 0010:iommufd_fops_release+0x2a3/0x300
[   16.515443] Code: 45 d0 65 48 2b 04 25 28 00 00 00 75 54 48 81 c4 88 00 00 00 31 c0 5b 41 5c 41 5d 41 5e 41 5f 5d c3 cc cc cc cc e8 ad 4f 0a fe <0f> 0b eb a6 e8 74 23 67 fe e9 f6 fe ff ff 48 89 85 50 ff ff ff e8
[   16.516157] RSP: 0018:ffff88802459fc00 EFLAGS: 00010293
[   16.516422] RAX: 0000000000000000 RBX: ffff88800ca7fa08 RCX: 0000000000000000
[   16.516675] RDX: ffff888012c30000 RSI: ffffffff835563e3 RDI: ffffffff86702b40
[   16.516948] RBP: ffff88802459fcb0 R08: 0000000000000000 R09: fffffbfff0eb2644
[   16.517250] R10: ffffffff87593227 R11: ffff888020331c00 R12: 0000000000000000
[   16.517503] R13: ffff888013770b98 R14: ffff88802459fc48 R15: ffffffff83556140
[   16.517817] FS:  0000000000000000(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   16.518103] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   16.518309] CR2: 0000000020000080 CR3: 000000000687e000 CR4: 0000000000750ef0
[   16.518563] PKRU: 55555554
[   16.518676] Call Trace:
[   16.518781]  <TASK>
[   16.518864]  ? show_regs+0x6e/0x80
[   16.519000]  ? __warn+0xef/0x340
[   16.519125]  ? report_bug+0x25e/0x4b0
[   16.519265]  ? iommufd_fops_release+0x2a3/0x300
[   16.519433]  ? report_bug+0x2cb/0x4b0
[   16.519575]  ? handle_bug+0x46/0x90
[   16.519708]  ? exc_invalid_op+0x1d/0x50
[   16.519852]  ? asm_exc_invalid_op+0x1f/0x30
[   16.520007]  ? __pfx_iommufd_fops_release+0x10/0x10
[   16.520189]  ? iommufd_fops_release+0x2a3/0x300
[   16.520359]  ? iommufd_fops_release+0x2a3/0x300
[   16.520529]  ? __pfx_iommufd_fops_release+0x10/0x10
[   16.520708]  ? rcu_is_watching+0x19/0xc0
[   16.520857]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   16.521056]  ? __pfx_iommufd_fops_release+0x10/0x10
[   16.521235]  __fput+0x424/0xaf0
[   16.521362]  ____fput+0x1f/0x30
[   16.521484]  task_work_run+0x19d/0x2b0
[   16.521626]  ? __pfx_task_work_run+0x10/0x10
[   16.521786]  ? __sanitizer_cov_trace_const_cmp1+0x1e/0x30
[   16.521983]  ? switch_task_namespaces+0xa9/0xe0
[   16.522153]  do_exit+0xac9/0x2790
[   16.522281]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   16.522508]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   16.522697]  ? __pfx_do_exit+0x10/0x10
[   16.522843]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   16.523044]  ? security_file_ioctl+0x9d/0xd0
[   16.523206]  make_task_dead+0x182/0x3c0
[   16.523352]  rewind_stack_and_make_dead+0x17/0x20
[   16.523527] RIP: 0033:0x7f2ad023ee5d
[   16.523661] Code: Unable to access opcode bytes at 0x7f2ad023ee33.
[   16.523879] RSP: 002b:00007ffee0a00798 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   16.524148] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f2ad023ee5d
[   16.524402] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   16.524654] RBP: 00007ffee0a007b0 R08: 0000000000000800 R09: 0000000000000800
[   16.524907] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffee0a008c8
[   16.525160] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f2ad05fa000
[   16.525418]  </TASK>
[   16.525503] irq event stamp: 0
[   16.525617] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   16.525840] hardirqs last disabled at (0): [<ffffffff8122f2d1>] copy_process+0x1c51/0x7140
[   16.526133] softirqs last  enabled at (0): [<ffffffff8122f312>] copy_process+0x1c92/0x7140
[   16.526425] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   16.526656] ---[ end trace 0000000000000000 ]---
[   16.529156] iommufd_mock iommufd_mock62: Adding to iommu group 62
[   16.529404] iommufd_mock iommufd_mock62: Removing from iommu group 62
[   16.529653] general protection fault, probably for non-canonical address 0xdffffc0000000006: 0000 [#63] PREEMPT SMP KASAN NOPTI
[   16.530055] KASAN: null-ptr-deref in range [0x0000000000000030-0x0000000000000037]
[   16.530331] CPU: 1 PID: 780 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   16.530641] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   16.531061] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   16.531281] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   16.531924] RSP: 0018:ffff8880103d7ba8 EFLAGS: 00010206
[   16.532122] RAX: dffffc0000000000 RBX: ffff88800bd48000 RCX: 0000000000000000
[   16.532376] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   16.532629] RBP: ffff8880103d7bc0 R08: 0000000000000001 R09: ffffed100155b11b
[   16.532882] R10: ffff88800aad88df R11: 5f6466756d6d6f69 R12: 0000000000000000
[   16.533142] R13: ffffffff85cc0180 R14: ffff88801679abe0 R15: ffffffff87070ae0
[   16.533398] FS:  00007f1dec842600(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
[   16.533685] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   16.533892] CR2: 0000000020000080 CR3: 000000000fee4000 CR4: 0000000000750ee0
[   16.534155] PKRU: 55555554
[   16.534257] Call Trace:
[   16.534349]  <TASK>
[   16.534431]  ? show_regs+0x6e/0x80
[   16.534565]  ? die_addr+0x45/0xb0
[   16.534696]  ? exc_general_protection+0x159/0x250
[   16.534887]  ? asm_exc_general_protection+0x2b/0x30
[   16.535070]  ? sysfs_remove_link_from_group+0x21/0x90
[   16.535266]  ? sysfs_remove_link_from_group+0x37/0x90
[   16.535453]  ? sysfs_remove_link_from_group+0x21/0x90
[   16.535640]  iommu_device_unlink+0x85/0xd0
[   16.535794]  iommu_deinit_device+0x11f/0x4c0
[   16.535957]  __iommu_group_remove_device+0x26b/0x300
[   16.536152]  iommu_group_remove_device+0x8a/0xb0
[   16.536327]  iommufd_test+0x1f1a/0x2d10
[   16.536472]  ? __pfx_lock_release+0x10/0x10
[   16.536630]  ? __pfx_lock_acquire+0x10/0x10
[   16.536789]  ? __pfx_iommufd_test+0x10/0x10
[   16.536946]  ? __sanitizer_cov_trace_const_cmp8+0x1c/0x30
[   16.537152]  iommufd_fops_ioctl+0x377/0x510
[   16.537314]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   16.537490]  ? trace_hardirqs_on+0x26/0x120
[   16.537649]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   16.537878]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   16.538061]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   16.538268]  ? security_file_ioctl+0x9d/0xd0
[   16.538431]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   16.538607]  __x64_sys_ioctl+0x1b9/0x230
[   16.538757]  do_syscall_64+0x3c/0x90
[   16.538897]  entry_SYSCALL_64_after_hwframe+0x6e/0xd8
[   16.539085] RIP: 0033:0x7f1dec63ee5d
[   16.539228] Code: ff c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d 93 af 1b 00 f7 d8 64 89 01 48
[   16.539872] RSP: 002b:00007ffd3d9df768 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   16.540141] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f1dec63ee5d
[   16.540402] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   16.540654] RBP: 00007ffd3d9df780 R08: 0000000000000800 R09: 0000000000000800
[   16.540907] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffd3d9df898
[   16.541159] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f1dec883000
[   16.541425]  </TASK>
[   16.541509] Modules linked in:
[   16.541673] ---[ end trace 0000000000000000 ]---
[   16.541842] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   16.542049] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   16.542729] RSP: 0018:ffff88802457fba8 EFLAGS: 00010206
[   16.542941] RAX: dffffc0000000000 RBX: ffff888014f9b000 RCX: 0000000000000000
[   16.543194] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   16.543456] RBP: ffff88802457fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   16.543709] R10: ffff88800aad88df R11: 0000000000000001 R12: 0000000000000000
[   16.543961] R13: ffffffff85cc0180 R14: ffff8880109b6ac0 R15: ffffffff87070ae0
[   16.544213] FS:  00007f1dec842600(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
[   16.544506] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   16.544714] CR2: 0000000020000080 CR3: 000000000fee4000 CR4: 0000000000750ee0
[   16.544967] PKRU: 55555554
[   16.545388] ------------[ cut here ]------------
[   16.545570] WARNING: CPU: 0 PID: 780 at drivers/iommu/iommufd/main.c:258 iommufd_fops_release+0x2a3/0x300
[   16.545913] Modules linked in:
[   16.546029] CPU: 0 PID: 780 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   16.546337] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   16.546792] RIP: 0010:iommufd_fops_release+0x2a3/0x300
[   16.546990] Code: 45 d0 65 48 2b 04 25 28 00 00 00 75 54 48 81 c4 88 00 00 00 31 c0 5b 41 5c 41 5d 41 5e 41 5f 5d c3 cc cc cc cc e8 ad 4f 0a fe <0f> 0b eb a6 e8 74 23 67 fe e9 f6 fe ff ff 48 89 85 50 ff ff ff e8
[   16.547636] RSP: 0018:ffff8880103d7c00 EFLAGS: 00010293
[   16.547823] RAX: 0000000000000000 RBX: ffff88801248a708 RCX: 0000000000000000
[   16.548072] RDX: ffff8880138b4a00 RSI: ffffffff835563e3 RDI: ffffffff86702b40
[   16.548320] RBP: ffff8880103d7cb0 R08: 0000000000000000 R09: fffffbfff0eb2644
[   16.548576] R10: ffffffff87593227 R11: ffff88800f8f6a00 R12: 0000000000000000
[   16.548825] R13: ffff88800f8dab98 R14: ffff8880103d7c48 R15: ffffffff83556140
[   16.549074] FS:  0000000000000000(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   16.549354] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   16.549561] CR2: 00007fa281dd7000 CR3: 000000000687e000 CR4: 0000000000750ef0
[   16.549814] PKRU: 55555554
[   16.549917] Call Trace:
[   16.550007]  <TASK>
[   16.550087]  ? show_regs+0x6e/0x80
[   16.550216]  ? __warn+0xef/0x340
[   16.550339]  ? report_bug+0x25e/0x4b0
[   16.550476]  ? iommufd_fops_release+0x2a3/0x300
[   16.550679]  ? report_bug+0x2cb/0x4b0
[   16.550824]  ? handle_bug+0x46/0x90
[   16.550957]  ? exc_invalid_op+0x1d/0x50
[   16.551102]  ? asm_exc_invalid_op+0x1f/0x30
[   16.551261]  ? __pfx_iommufd_fops_release+0x10/0x10
[   16.551440]  ? iommufd_fops_release+0x2a3/0x300
[   16.551606]  ? iommufd_fops_release+0x2a3/0x300
[   16.551776]  ? __pfx_iommufd_fops_release+0x10/0x10
[   16.551958]  ? rcu_is_watching+0x19/0xc0
[   16.552107]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   16.552301]  ? __pfx_iommufd_fops_release+0x10/0x10
[   16.552478]  __fput+0x424/0xaf0
[   16.552601]  ____fput+0x1f/0x30
[   16.552721]  task_work_run+0x19d/0x2b0
[   16.552865]  ? __pfx_task_work_run+0x10/0x10
[   16.553028]  ? __sanitizer_cov_trace_const_cmp1+0x1e/0x30
[   16.553221]  ? switch_task_namespaces+0xa9/0xe0
[   16.553388]  do_exit+0xac9/0x2790
[   16.553514]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   16.553737]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   16.553915]  ? __pfx_do_exit+0x10/0x10
[   16.554073]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   16.554267]  ? security_file_ioctl+0x9d/0xd0
[   16.554427]  make_task_dead+0x182/0x3c0
[   16.554609]  rewind_stack_and_make_dead+0x17/0x20
[   16.554788] RIP: 0033:0x7f1dec63ee5d
[   16.554922] Code: Unable to access opcode bytes at 0x7f1dec63ee33.
[   16.555142] RSP: 002b:00007ffd3d9df768 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   16.555412] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f1dec63ee5d
[   16.555659] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   16.555907] RBP: 00007ffd3d9df780 R08: 0000000000000800 R09: 0000000000000800
[   16.556158] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffd3d9df898
[   16.556410] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f1dec883000
[   16.556664]  </TASK>
[   16.556747] irq event stamp: 0
[   16.556859] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   16.557078] hardirqs last disabled at (0): [<ffffffff8122f2d1>] copy_process+0x1c51/0x7140
[   16.557379] softirqs last  enabled at (0): [<ffffffff8122f312>] copy_process+0x1c92/0x7140
[   16.557666] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   16.557885] ---[ end trace 0000000000000000 ]---
[   16.560558] iommufd_mock iommufd_mock63: Adding to iommu group 63
[   16.560804] iommufd_mock iommufd_mock63: Removing from iommu group 63
[   16.561052] general protection fault, probably for non-canonical address 0xdffffc0000000006: 0000 [#64] PREEMPT SMP KASAN NOPTI
[   16.561464] KASAN: null-ptr-deref in range [0x0000000000000030-0x0000000000000037]
[   16.561731] CPU: 1 PID: 781 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   16.562037] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   16.562444] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   16.562656] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   16.563297] RSP: 0018:ffff88802459fba8 EFLAGS: 00010206
[   16.563492] RAX: dffffc0000000000 RBX: ffff888012f9d000 RCX: 0000000000000000
[   16.563740] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   16.563987] RBP: ffff88802459fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   16.564234] R10: ffff88800aad88df R11: 5f6466756d6d6f69 R12: 0000000000000000
[   16.564489] R13: ffffffff85cc0180 R14: ffff88801679a960 R15: ffffffff87070ae0
[   16.564740] FS:  00007f52892e8600(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
[   16.565023] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   16.565225] CR2: 0000000020000080 CR3: 00000000132a0000 CR4: 0000000000750ee0
[   16.565481] PKRU: 55555554
[   16.565581] Call Trace:
[   16.565671]  <TASK>
[   16.565751]  ? show_regs+0x6e/0x80
[   16.565882]  ? die_addr+0x45/0xb0
[   16.566009]  ? exc_general_protection+0x159/0x250
[   16.566186]  ? asm_exc_general_protection+0x2b/0x30
[   16.566365]  ? sysfs_remove_link_from_group+0x21/0x90
[   16.566556]  ? sysfs_remove_link_from_group+0x37/0x90
[   16.566753]  ? sysfs_remove_link_from_group+0x21/0x90
[   16.566957]  iommu_device_unlink+0x85/0xd0
[   16.567108]  iommu_deinit_device+0x11f/0x4c0
[   16.567267]  __iommu_group_remove_device+0x26b/0x300
[   16.567458]  iommu_group_remove_device+0x8a/0xb0
[   16.567628]  iommufd_test+0x1f1a/0x2d10
[   16.567768]  ? __pfx_lock_release+0x10/0x10
[   16.567922]  ? __pfx_lock_acquire+0x10/0x10
[   16.568077]  ? __pfx_iommufd_test+0x10/0x10
[   16.568231]  ? __sanitizer_cov_trace_const_cmp8+0x1c/0x30
[   16.568434]  iommufd_fops_ioctl+0x377/0x510
[   16.568590]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   16.568762]  ? trace_hardirqs_on+0x26/0x120
[   16.568918]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   16.569141]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   16.569321]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   16.569523]  ? security_file_ioctl+0x9d/0xd0
[   16.569683]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   16.569854]  __x64_sys_ioctl+0x1b9/0x230
[   16.569999]  do_syscall_64+0x3c/0x90
[   16.570131]  entry_SYSCALL_64_after_hwframe+0x6e/0xd8
[   16.570312] RIP: 0033:0x7f528903ee5d
[   16.570448] Code: ff c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d 93 af 1b 00 f7 d8 64 89 01 48
[   16.571095] RSP: 002b:00007ffcfbbf5908 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   16.571359] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f528903ee5d
[   16.571614] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   16.571860] RBP: 00007ffcfbbf5920 R08: 0000000000000800 R09: 0000000000000800
[   16.572107] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffcfbbf5a38
[   16.572354] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f5289329000
[   16.572613]  </TASK>
[   16.572695] Modules linked in:
[   16.572898] ---[ end trace 0000000000000000 ]---
[   16.573066] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   16.573273] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   16.573924] RSP: 0018:ffff88802457fba8 EFLAGS: 00010206
[   16.574113] RAX: dffffc0000000000 RBX: ffff888014f9b000 RCX: 0000000000000000
[   16.574365] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   16.574635] RBP: ffff88802457fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   16.574895] R10: ffff88800aad88df R11: 0000000000000001 R12: 0000000000000000
[   16.575142] R13: ffffffff85cc0180 R14: ffff8880109b6ac0 R15: ffffffff87070ae0
[   16.575389] FS:  00007f52892e8600(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
[   16.575675] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   16.575877] CR2: 0000000020000080 CR3: 00000000132a0000 CR4: 0000000000750ee0
[   16.576124] PKRU: 55555554
[   16.576474] ------------[ cut here ]------------
[   16.576649] WARNING: CPU: 1 PID: 781 at drivers/iommu/iommufd/main.c:258 iommufd_fops_release+0x2a3/0x300
[   16.576981] Modules linked in:
[   16.577094] CPU: 1 PID: 781 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   16.577394] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   16.577790] RIP: 0010:iommufd_fops_release+0x2a3/0x300
[   16.577975] Code: 45 d0 65 48 2b 04 25 28 00 00 00 75 54 48 81 c4 88 00 00 00 31 c0 5b 41 5c 41 5d 41 5e 41 5f 5d c3 cc cc cc cc e8 ad 4f 0a fe <0f> 0b eb a6 e8 74 23 67 fe e9 f6 fe ff ff 48 89 85 50 ff ff ff e8
[   16.578623] RSP: 0018:ffff88802459fc00 EFLAGS: 00010293
[   16.578818] RAX: 0000000000000000 RBX: ffff88801248a408 RCX: 0000000000000000
[   16.579073] RDX: ffff88801734a500 RSI: ffffffff835563e3 RDI: ffffffff86702b48
[   16.579320] RBP: ffff88802459fcb0 R08: 0000000000000000 R09: fffffbfff0eb2644
[   16.579575] R10: ffffffff87593227 R11: ffff88801380a000 R12: 0000000000000000
[   16.579821] R13: ffff888012f56418 R14: ffff88802459fc48 R15: ffffffff83556140
[   16.580067] FS:  0000000000000000(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
[   16.580345] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   16.580546] CR2: 0000000020000080 CR3: 000000000687e000 CR4: 0000000000750ee0
[   16.580826] PKRU: 55555554
[   16.580929] Call Trace:
[   16.581019]  <TASK>
[   16.581100]  ? show_regs+0x6e/0x80
[   16.581229]  ? __warn+0xef/0x340
[   16.581351]  ? report_bug+0x25e/0x4b0
[   16.581488]  ? iommufd_fops_release+0x2a3/0x300
[   16.581663]  ? report_bug+0x2cb/0x4b0
[   16.581802]  ? handle_bug+0x46/0x90
[   16.581932]  ? exc_invalid_op+0x1d/0x50
[   16.582073]  ? asm_exc_invalid_op+0x1f/0x30
[   16.582224]  ? __pfx_iommufd_fops_release+0x10/0x10
[   16.582402]  ? iommufd_fops_release+0x2a3/0x300
[   16.582567]  ? iommufd_fops_release+0x2a3/0x300
[   16.582772]  ? __pfx_iommufd_fops_release+0x10/0x10
[   16.582952]  ? rcu_is_watching+0x19/0xc0
[   16.583101]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   16.583298]  ? __pfx_iommufd_fops_release+0x10/0x10
[   16.583474]  __fput+0x424/0xaf0
[   16.583596]  ____fput+0x1f/0x30
[   16.583725]  task_work_run+0x19d/0x2b0
[   16.583865]  ? __pfx_task_work_run+0x10/0x10
[   16.584021]  ? __sanitizer_cov_trace_const_cmp1+0x1e/0x30
[   16.584213]  ? switch_task_namespaces+0xa9/0xe0
[   16.584380]  do_exit+0xac9/0x2790
[   16.584505]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   16.584735]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   16.584913]  ? __pfx_do_exit+0x10/0x10
[   16.585052]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   16.585245]  ? security_file_ioctl+0x9d/0xd0
[   16.585403]  make_task_dead+0x182/0x3c0
[   16.585545]  rewind_stack_and_make_dead+0x17/0x20
[   16.585724] RIP: 0033:0x7f528903ee5d
[   16.585855] Code: Unable to access opcode bytes at 0x7f528903ee33.
[   16.586068] RSP: 002b:00007ffcfbbf5908 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   16.586332] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f528903ee5d
[   16.586593] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   16.586870] RBP: 00007ffcfbbf5920 R08: 0000000000000800 R09: 0000000000000800
[   16.587125] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffcfbbf5a38
[   16.587371] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f5289329000
[   16.587624]  </TASK>
[   16.587715] irq event stamp: 0
[   16.587826] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   16.588045] hardirqs last disabled at (0): [<ffffffff8122f2d1>] copy_process+0x1c51/0x7140
[   16.588333] softirqs last  enabled at (0): [<ffffffff8122f312>] copy_process+0x1c92/0x7140
[   16.588619] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   16.588846] ---[ end trace 0000000000000000 ]---
[   16.591444] iommufd_mock iommufd_mock64: Adding to iommu group 64
[   16.591701] iommufd_mock iommufd_mock64: Removing from iommu group 64
[   16.591966] general protection fault, probably for non-canonical address 0xdffffc0000000006: 0000 [#65] PREEMPT SMP KASAN NOPTI
[   16.592367] KASAN: null-ptr-deref in range [0x0000000000000030-0x0000000000000037]
[   16.592628] CPU: 1 PID: 782 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   16.592938] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   16.593326] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   16.593531] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   16.594170] RSP: 0018:ffff88801705fba8 EFLAGS: 00010206
[   16.594356] RAX: dffffc0000000000 RBX: ffff888012f9e000 RCX: 0000000000000000
[   16.594604] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   16.594891] RBP: ffff88801705fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   16.595144] R10: ffff88800aad88df R11: 5f6466756d6d6f69 R12: 0000000000000000
[   16.595392] R13: ffffffff85cc0180 R14: ffff88801679a160 R15: ffffffff87070ae0
[   16.595641] FS:  00007fc245751600(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
[   16.595927] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   16.596129] CR2: 0000000020000080 CR3: 00000000132a0000 CR4: 0000000000750ee0
[   16.596377] PKRU: 55555554
[   16.596477] Call Trace:
[   16.596568]  <TASK>
[   16.596648]  ? show_regs+0x6e/0x80
[   16.596779]  ? die_addr+0x45/0xb0
[   16.596915]  ? exc_general_protection+0x159/0x250
[   16.597092]  ? asm_exc_general_protection+0x2b/0x30
[   16.597271]  ? sysfs_remove_link_from_group+0x21/0x90
[   16.597454]  ? sysfs_remove_link_from_group+0x37/0x90
[   16.597637]  ? sysfs_remove_link_from_group+0x21/0x90
[   16.597820]  iommu_device_unlink+0x85/0xd0
[   16.597978]  iommu_deinit_device+0x11f/0x4c0
[   16.598138]  __iommu_group_remove_device+0x26b/0x300
[   16.598320]  iommu_group_remove_device+0x8a/0xb0
[   16.598490]  iommufd_test+0x1f1a/0x2d10
[   16.598633]  ? __pfx_lock_release+0x10/0x10
[   16.598794]  ? __pfx_lock_acquire+0x10/0x10
[   16.598963]  ? __pfx_iommufd_test+0x10/0x10
[   16.599117]  ? __sanitizer_cov_trace_const_cmp8+0x1c/0x30
[   16.599313]  iommufd_fops_ioctl+0x377/0x510
[   16.599467]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   16.599639]  ? trace_hardirqs_on+0x26/0x120
[   16.599795]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   16.600027]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   16.600206]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   16.600400]  ? security_file_ioctl+0x9d/0xd0
[   16.600559]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   16.600731]  __x64_sys_ioctl+0x1b9/0x230
[   16.600883]  do_syscall_64+0x3c/0x90
[   16.601016]  entry_SYSCALL_64_after_hwframe+0x6e/0xd8
[   16.601198] RIP: 0033:0x7fc24543ee5d
[   16.601329] Code: ff c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d 93 af 1b 00 f7 d8 64 89 01 48
[   16.601966] RSP: 002b:00007ffea7f7cac8 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   16.602230] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007fc24543ee5d
[   16.602476] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   16.602727] RBP: 00007ffea7f7cae0 R08: 0000000000000800 R09: 0000000000000800
[   16.602991] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffea7f7cbf8
[   16.603238] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007fc245792000
[   16.603490]  </TASK>
[   16.603573] Modules linked in:
[   16.603700] ---[ end trace 0000000000000000 ]---
[   16.603882] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   16.604097] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   16.604741] RSP: 0018:ffff88802457fba8 EFLAGS: 00010206
[   16.604938] RAX: dffffc0000000000 RBX: ffff888014f9b000 RCX: 0000000000000000
[   16.605190] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   16.605442] RBP: ffff88802457fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   16.605694] R10: ffff88800aad88df R11: 0000000000000001 R12: 0000000000000000
[   16.605957] R13: ffffffff85cc0180 R14: ffff8880109b6ac0 R15: ffffffff87070ae0
[   16.606212] FS:  00007fc245751600(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
[   16.606496] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   16.606711] CR2: 0000000020000080 CR3: 00000000132a0000 CR4: 0000000000750ee0
[   16.606979] PKRU: 55555554
[   16.607336] ------------[ cut here ]------------
[   16.607502] WARNING: CPU: 1 PID: 782 at drivers/iommu/iommufd/main.c:258 iommufd_fops_release+0x2a3/0x300
[   16.607835] Modules linked in:
[   16.607952] CPU: 1 PID: 782 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   16.608258] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   16.608645] RIP: 0010:iommufd_fops_release+0x2a3/0x300
[   16.608829] Code: 45 d0 65 48 2b 04 25 28 00 00 00 75 54 48 81 c4 88 00 00 00 31 c0 5b 41 5c 41 5d 41 5e 41 5f 5d c3 cc cc cc cc e8 ad 4f 0a fe <0f> 0b eb a6 e8 74 23 67 fe e9 f6 fe ff ff 48 89 85 50 ff ff ff e8
[   16.609465] RSP: 0018:ffff88801705fc00 EFLAGS: 00010293
[   16.609650] RAX: 0000000000000000 RBX: ffff88801248aa08 RCX: 0000000000000000
[   16.609897] RDX: ffff88800f782500 RSI: ffffffff835563e3 RDI: ffffffff86702b48
[   16.610153] RBP: ffff88801705fcb0 R08: 0000000000000000 R09: fffffbfff0eb2644
[   16.610399] R10: ffffffff87593227 R11: ffff8880111e7a00 R12: 0000000000000000
[   16.610659] R13: ffff888012f57d18 R14: ffff88801705fc48 R15: ffffffff83556140
[   16.610919] FS:  0000000000000000(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
[   16.611213] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   16.611414] CR2: 0000000020000080 CR3: 000000000687e000 CR4: 0000000000750ee0
[   16.611662] PKRU: 55555554
[   16.611761] Call Trace:
[   16.611852]  <TASK>
[   16.611931]  ? show_regs+0x6e/0x80
[   16.612068]  ? __warn+0xef/0x340
[   16.612190]  ? report_bug+0x25e/0x4b0
[   16.612327]  ? iommufd_fops_release+0x2a3/0x300
[   16.612492]  ? report_bug+0x2cb/0x4b0
[   16.612631]  ? handle_bug+0x46/0x90
[   16.612760]  ? exc_invalid_op+0x1d/0x50
[   16.612901]  ? asm_exc_invalid_op+0x1f/0x30
[   16.613061]  ? __pfx_iommufd_fops_release+0x10/0x10
[   16.613239]  ? iommufd_fops_release+0x2a3/0x300
[   16.613405]  ? iommufd_fops_release+0x2a3/0x300
[   16.613571]  ? __pfx_iommufd_fops_release+0x10/0x10
[   16.613752]  ? rcu_is_watching+0x19/0xc0
[   16.613903]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   16.614176]  ? __pfx_iommufd_fops_release+0x10/0x10
[   16.614356]  __fput+0x424/0xaf0
[   16.614481]  ____fput+0x1f/0x30
[   16.614611]  task_work_run+0x19d/0x2b0
[   16.614757]  ? __pfx_task_work_run+0x10/0x10
[   16.614917]  ? __sanitizer_cov_trace_const_cmp1+0x1e/0x30
[   16.615123]  ? switch_task_namespaces+0xa9/0xe0
[   16.615293]  do_exit+0xac9/0x2790
[   16.615420]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   16.615646]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   16.615827]  ? __pfx_do_exit+0x10/0x10
[   16.615968]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   16.616173]  ? security_file_ioctl+0x9d/0xd0
[   16.616335]  make_task_dead+0x182/0x3c0
[   16.616480]  rewind_stack_and_make_dead+0x17/0x20
[   16.616654] RIP: 0033:0x7fc24543ee5d
[   16.616787] Code: Unable to access opcode bytes at 0x7fc24543ee33.
[   16.617005] RSP: 002b:00007ffea7f7cac8 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   16.617281] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007fc24543ee5d
[   16.617533] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   16.617785] RBP: 00007ffea7f7cae0 R08: 0000000000000800 R09: 0000000000000800
[   16.618036] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffea7f7cbf8
[   16.618297] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007fc245792000
[   16.618554]  </TASK>
[   16.618647] irq event stamp: 0
[   16.618764] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   16.618987] hardirqs last disabled at (0): [<ffffffff8122f2d1>] copy_process+0x1c51/0x7140
[   16.619288] softirqs last  enabled at (0): [<ffffffff8122f312>] copy_process+0x1c92/0x7140
[   16.619580] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   16.619802] ---[ end trace 0000000000000000 ]---
[   16.622345] iommufd_mock iommufd_mock65: Adding to iommu group 65
[   16.622614] iommufd_mock iommufd_mock65: Removing from iommu group 65
[   16.622878] general protection fault, probably for non-canonical address 0xdffffc0000000006: 0000 [#66] PREEMPT SMP KASAN NOPTI
[   16.623310] KASAN: null-ptr-deref in range [0x0000000000000030-0x0000000000000037]
[   16.623600] CPU: 1 PID: 783 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   16.623922] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   16.624328] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   16.624538] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   16.625179] RSP: 0018:ffff88801204fba8 EFLAGS: 00010206
[   16.625378] RAX: dffffc0000000000 RBX: ffff888012199000 RCX: 0000000000000000
[   16.625629] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   16.625881] RBP: ffff88801204fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   16.626133] R10: ffff88800aad88df R11: 5f6466756d6d6f69 R12: 0000000000000000
[   16.626394] R13: ffffffff85cc0180 R14: ffff88801679afc0 R15: ffffffff87070ae0
[   16.626647] FS:  00007f3dc0efa600(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
[   16.626945] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   16.627154] CR2: 0000000020000080 CR3: 00000000132a0000 CR4: 0000000000750ee0
[   16.627426] PKRU: 55555554
[   16.627528] Call Trace:
[   16.627621]  <TASK>
[   16.627703]  ? show_regs+0x6e/0x80
[   16.627837]  ? die_addr+0x45/0xb0
[   16.627967]  ? exc_general_protection+0x159/0x250
[   16.628148]  ? asm_exc_general_protection+0x2b/0x30
[   16.628339]  ? sysfs_remove_link_from_group+0x21/0x90
[   16.628527]  ? sysfs_remove_link_from_group+0x37/0x90
[   16.628714]  ? sysfs_remove_link_from_group+0x21/0x90
[   16.628901]  iommu_device_unlink+0x85/0xd0
[   16.629055]  iommu_deinit_device+0x11f/0x4c0
[   16.629218]  __iommu_group_remove_device+0x26b/0x300
[   16.629414]  iommu_group_remove_device+0x8a/0xb0
[   16.629587]  iommufd_test+0x1f1a/0x2d10
[   16.629731]  ? __pfx_lock_release+0x10/0x10
[   16.629888]  ? __pfx_lock_acquire+0x10/0x10
[   16.630046]  ? __pfx_iommufd_test+0x10/0x10
[   16.630203]  ? __sanitizer_cov_trace_const_cmp8+0x1c/0x30
[   16.630412]  iommufd_fops_ioctl+0x377/0x510
[   16.630570]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   16.630750]  ? trace_hardirqs_on+0x26/0x120
[   16.630915]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   16.631147]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   16.631339]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   16.631536]  ? security_file_ioctl+0x9d/0xd0
[   16.631700]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   16.631875]  __x64_sys_ioctl+0x1b9/0x230
[   16.632023]  do_syscall_64+0x3c/0x90
[   16.632157]  entry_SYSCALL_64_after_hwframe+0x6e/0xd8
[   16.632351] RIP: 0033:0x7f3dc0c3ee5d
[   16.632485] Code: ff c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d 93 af 1b 00 f7 d8 64 89 01 48
[   16.633127] RSP: 002b:00007ffcfae4c708 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   16.633404] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f3dc0c3ee5d
[   16.633682] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   16.633934] RBP: 00007ffcfae4c720 R08: 0000000000000800 R09: 0000000000000800
[   16.634186] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffcfae4c838
[   16.634447] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f3dc0f3b000
[   16.634705]  </TASK>
[   16.634796] Modules linked in:
[   16.635055] ---[ end trace 0000000000000000 ]---
[   16.635224] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   16.635440] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   16.636083] RSP: 0018:ffff88802457fba8 EFLAGS: 00010206
[   16.636269] RAX: dffffc0000000000 RBX: ffff888014f9b000 RCX: 0000000000000000
[   16.636527] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   16.636775] RBP: ffff88802457fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   16.637022] R10: ffff88800aad88df R11: 0000000000000001 R12: 0000000000000000
[   16.637269] R13: ffffffff85cc0180 R14: ffff8880109b6ac0 R15: ffffffff87070ae0
[   16.637524] FS:  00007f3dc0efa600(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
[   16.637802] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   16.638004] CR2: 0000000020000080 CR3: 00000000132a0000 CR4: 0000000000750ee0
[   16.638251] PKRU: 55555554
[   16.638634] ------------[ cut here ]------------
[   16.638814] WARNING: CPU: 1 PID: 783 at drivers/iommu/iommufd/main.c:258 iommufd_fops_release+0x2a3/0x300
[   16.639154] Modules linked in:
[   16.639267] CPU: 1 PID: 783 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   16.639577] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   16.639965] RIP: 0010:iommufd_fops_release+0x2a3/0x300
[   16.640150] Code: 45 d0 65 48 2b 04 25 28 00 00 00 75 54 48 81 c4 88 00 00 00 31 c0 5b 41 5c 41 5d 41 5e 41 5f 5d c3 cc cc cc cc e8 ad 4f 0a fe <0f> 0b eb a6 e8 74 23 67 fe e9 f6 fe ff ff 48 89 85 50 ff ff ff e8
[   16.640786] RSP: 0018:ffff88801204fc00 EFLAGS: 00010293
[   16.640971] RAX: 0000000000000000 RBX: ffff88801248a908 RCX: 0000000000000000
[   16.641218] RDX: ffff888016492500 RSI: ffffffff835563e3 RDI: ffffffff86702b48
[   16.641473] RBP: ffff88801204fcb0 R08: 0000000000000000 R09: fffffbfff0eb2644
[   16.641719] R10: ffffffff87593227 R11: ffff888018b3c000 R12: 0000000000000000
[   16.641966] R13: ffff88801213a698 R14: ffff88801204fc48 R15: ffffffff83556140
[   16.642212] FS:  0000000000000000(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
[   16.642499] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   16.642713] CR2: 0000000020000080 CR3: 000000000687e000 CR4: 0000000000750ee0
[   16.642970] PKRU: 55555554
[   16.643073] Call Trace:
[   16.643164]  <TASK>
[   16.643244]  ? show_regs+0x6e/0x80
[   16.643373]  ? __warn+0xef/0x340
[   16.643503]  ? report_bug+0x25e/0x4b0
[   16.643641]  ? iommufd_fops_release+0x2a3/0x300
[   16.643806]  ? report_bug+0x2cb/0x4b0
[   16.643945]  ? handle_bug+0x46/0x90
[   16.644075]  ? exc_invalid_op+0x1d/0x50
[   16.644216]  ? asm_exc_invalid_op+0x1f/0x30
[   16.644368]  ? __pfx_iommufd_fops_release+0x10/0x10
[   16.644554]  ? iommufd_fops_release+0x2a3/0x300
[   16.644720]  ? iommufd_fops_release+0x2a3/0x300
[   16.644887]  ? __pfx_iommufd_fops_release+0x10/0x10
[   16.645063]  ? rcu_is_watching+0x19/0xc0
[   16.645208]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   16.645402]  ? __pfx_iommufd_fops_release+0x10/0x10
[   16.645587]  __fput+0x424/0xaf0
[   16.645711]  ____fput+0x1f/0x30
[   16.645831]  task_work_run+0x19d/0x2b0
[   16.645971]  ? __pfx_task_work_run+0x10/0x10
[   16.646127]  ? __sanitizer_cov_trace_const_cmp1+0x1e/0x30
[   16.646319]  ? switch_task_namespaces+0xa9/0xe0
[   16.646496]  do_exit+0xac9/0x2790
[   16.646641]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   16.646872]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   16.647056]  ? __pfx_do_exit+0x10/0x10
[   16.647198]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   16.647396]  ? security_file_ioctl+0x9d/0xd0
[   16.647564]  make_task_dead+0x182/0x3c0
[   16.647706]  rewind_stack_and_make_dead+0x17/0x20
[   16.647877] RIP: 0033:0x7f3dc0c3ee5d
[   16.648008] Code: Unable to access opcode bytes at 0x7f3dc0c3ee33.
[   16.648222] RSP: 002b:00007ffcfae4c708 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   16.648494] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f3dc0c3ee5d
[   16.648741] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   16.648988] RBP: 00007ffcfae4c720 R08: 0000000000000800 R09: 0000000000000800
[   16.649235] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffcfae4c838
[   16.649490] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f3dc0f3b000
[   16.649743]  </TASK>
[   16.649826] irq event stamp: 0
[   16.649938] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   16.650156] hardirqs last disabled at (0): [<ffffffff8122f2d1>] copy_process+0x1c51/0x7140
[   16.650443] softirqs last  enabled at (0): [<ffffffff8122f312>] copy_process+0x1c92/0x7140
[   16.650756] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   16.650980] ---[ end trace 0000000000000000 ]---
[   16.653640] iommufd_mock iommufd_mock66: Adding to iommu group 66
[   16.653884] iommufd_mock iommufd_mock66: Removing from iommu group 66
[   16.654132] general protection fault, probably for non-canonical address 0xdffffc0000000006: 0000 [#67] PREEMPT SMP KASAN NOPTI
[   16.654531] KASAN: null-ptr-deref in range [0x0000000000000030-0x0000000000000037]
[   16.654819] CPU: 1 PID: 784 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   16.655141] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   16.655539] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   16.655754] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   16.656384] RSP: 0018:ffff888014fdfba8 EFLAGS: 00010206
[   16.656570] RAX: dffffc0000000000 RBX: ffff88800bd5d000 RCX: 0000000000000000
[   16.656825] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   16.657072] RBP: ffff888014fdfbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   16.657319] R10: ffff88800aad88df R11: 5f6466756d6d6f69 R12: 0000000000000000
[   16.657566] R13: ffffffff85cc0180 R14: ffff88801679ae60 R15: ffffffff87070ae0
[   16.657822] FS:  00007fad72c97600(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
[   16.658100] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   16.658302] CR2: 0000000020000080 CR3: 00000000132a0000 CR4: 0000000000750ee0
[   16.658550] PKRU: 55555554
[   16.658670] Call Trace:
[   16.658767]  <TASK>
[   16.658850]  ? show_regs+0x6e/0x80
[   16.658986]  ? die_addr+0x45/0xb0
[   16.659114]  ? exc_general_protection+0x159/0x250
[   16.659290]  ? asm_exc_general_protection+0x2b/0x30
[   16.659469]  ? sysfs_remove_link_from_group+0x21/0x90
[   16.659661]  ? sysfs_remove_link_from_group+0x37/0x90
[   16.659844]  ? sysfs_remove_link_from_group+0x21/0x90
[   16.660027]  iommu_device_unlink+0x85/0xd0
[   16.660177]  iommu_deinit_device+0x11f/0x4c0
[   16.660337]  __iommu_group_remove_device+0x26b/0x300
[   16.660519]  iommu_group_remove_device+0x8a/0xb0
[   16.660697]  iommufd_test+0x1f1a/0x2d10
[   16.660838]  ? __pfx_lock_release+0x10/0x10
[   16.660991]  ? __pfx_lock_acquire+0x10/0x10
[   16.661147]  ? __pfx_iommufd_test+0x10/0x10
[   16.661300]  ? __sanitizer_cov_trace_const_cmp8+0x1c/0x30
[   16.661496]  iommufd_fops_ioctl+0x377/0x510
[   16.661657]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   16.661832]  ? trace_hardirqs_on+0x26/0x120
[   16.661987]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   16.662210]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   16.662389]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   16.662583]  ? security_file_ioctl+0x9d/0xd0
[   16.662759]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   16.662948]  __x64_sys_ioctl+0x1b9/0x230
[   16.663092]  do_syscall_64+0x3c/0x90
[   16.663225]  entry_SYSCALL_64_after_hwframe+0x6e/0xd8
[   16.663406] RIP: 0033:0x7fad72a3ee5d
[   16.663538] Code: ff c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d 93 af 1b 00 f7 d8 64 89 01 48
[   16.664175] RSP: 002b:00007ffdfb716538 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   16.664439] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007fad72a3ee5d
[   16.664692] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   16.664941] RBP: 00007ffdfb716550 R08: 0000000000000800 R09: 0000000000000800
[   16.665188] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffdfb716668
[   16.665434] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007fad72cd8000
[   16.665687]  </TASK>
[   16.665777] Modules linked in:
[   16.666046] ---[ end trace 0000000000000000 ]---
[   16.666243] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   16.666479] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   16.667143] RSP: 0018:ffff88802457fba8 EFLAGS: 00010206
[   16.667332] RAX: dffffc0000000000 RBX: ffff888014f9b000 RCX: 0000000000000000
[   16.667585] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   16.667846] RBP: ffff88802457fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   16.668099] R10: ffff88800aad88df R11: 0000000000000001 R12: 0000000000000000
[   16.668350] R13: ffffffff85cc0180 R14: ffff8880109b6ac0 R15: ffffffff87070ae0
[   16.668602] FS:  00007fad72c97600(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
[   16.668894] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   16.669100] CR2: 0000000020000080 CR3: 00000000132a0000 CR4: 0000000000750ee0
[   16.669353] PKRU: 55555554
[   16.669709] ------------[ cut here ]------------
[   16.669887] WARNING: CPU: 1 PID: 784 at drivers/iommu/iommufd/main.c:258 iommufd_fops_release+0x2a3/0x300
[   16.670224] Modules linked in:
[   16.670336] CPU: 1 PID: 784 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   16.670648] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   16.671058] RIP: 0010:iommufd_fops_release+0x2a3/0x300
[   16.671246] Code: 45 d0 65 48 2b 04 25 28 00 00 00 75 54 48 81 c4 88 00 00 00 31 c0 5b 41 5c 41 5d 41 5e 41 5f 5d c3 cc cc cc cc e8 ad 4f 0a fe <0f> 0b eb a6 e8 74 23 67 fe e9 f6 fe ff ff 48 89 85 50 ff ff ff e8
[   16.671897] RSP: 0018:ffff888014fdfc00 EFLAGS: 00010293
[   16.672086] RAX: 0000000000000000 RBX: ffff88801248af08 RCX: 0000000000000000
[   16.672337] RDX: ffff888011e40000 RSI: ffffffff835563e3 RDI: ffffffff86702b48
[   16.672589] RBP: ffff888014fdfcb0 R08: 0000000000000000 R09: fffffbfff0eb2644
[   16.672849] R10: ffffffff87593227 R11: ffff888012dece00 R12: 0000000000000000
[   16.673103] R13: ffff888012639098 R14: ffff888014fdfc48 R15: ffffffff83556140
[   16.673353] FS:  0000000000000000(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
[   16.673633] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   16.673845] CR2: 0000000020000080 CR3: 000000000687e000 CR4: 0000000000750ee0
[   16.674097] PKRU: 55555554
[   16.674199] Call Trace:
[   16.674292]  <TASK>
[   16.674375]  ? show_regs+0x6e/0x80
[   16.674507]  ? __warn+0xef/0x340
[   16.674641]  ? report_bug+0x25e/0x4b0
[   16.674785]  ? iommufd_fops_release+0x2a3/0x300
[   16.674965]  ? report_bug+0x2cb/0x4b0
[   16.675107]  ? handle_bug+0x46/0x90
[   16.675238]  ? exc_invalid_op+0x1d/0x50
[   16.675380]  ? asm_exc_invalid_op+0x1f/0x30
[   16.675533]  ? __pfx_iommufd_fops_release+0x10/0x10
[   16.675713]  ? iommufd_fops_release+0x2a3/0x300
[   16.675888]  ? iommufd_fops_release+0x2a3/0x300
[   16.676057]  ? __pfx_iommufd_fops_release+0x10/0x10
[   16.676233]  ? rcu_is_watching+0x19/0xc0
[   16.676380]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   16.676575]  ? __pfx_iommufd_fops_release+0x10/0x10
[   16.676753]  __fput+0x424/0xaf0
[   16.676886]  ____fput+0x1f/0x30
[   16.677006]  task_work_run+0x19d/0x2b0
[   16.677147]  ? __pfx_task_work_run+0x10/0x10
[   16.677304]  ? __sanitizer_cov_trace_const_cmp1+0x1e/0x30
[   16.677498]  ? switch_task_namespaces+0xa9/0xe0
[   16.677666]  do_exit+0xac9/0x2790
[   16.677792]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   16.678024]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   16.678203]  ? __pfx_do_exit+0x10/0x10
[   16.678342]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   16.678536]  ? security_file_ioctl+0x9d/0xd0
[   16.678705]  make_task_dead+0x182/0x3c0
[   16.678862]  rewind_stack_and_make_dead+0x17/0x20
[   16.679043] RIP: 0033:0x7fad72a3ee5d
[   16.679178] Code: Unable to access opcode bytes at 0x7fad72a3ee33.
[   16.679399] RSP: 002b:00007ffdfb716538 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   16.679699] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007fad72a3ee5d
[   16.679989] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   16.680260] RBP: 00007ffdfb716550 R08: 0000000000000800 R09: 0000000000000800
[   16.680533] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffdfb716668
[   16.680792] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007fad72cd8000
[   16.681096]  </TASK>
[   16.681182] irq event stamp: 0
[   16.681296] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   16.681563] hardirqs last disabled at (0): [<ffffffff8122f2d1>] copy_process+0x1c51/0x7140
[   16.681863] softirqs last  enabled at (0): [<ffffffff8122f312>] copy_process+0x1c92/0x7140
[   16.682198] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   16.682434] ---[ end trace 0000000000000000 ]---
[   16.686182] iommufd_mock iommufd_mock67: Adding to iommu group 67
[   16.686429] iommufd_mock iommufd_mock67: Removing from iommu group 67
[   16.686700] general protection fault, probably for non-canonical address 0xdffffc0000000006: 0000 [#68] PREEMPT SMP KASAN NOPTI
[   16.687125] KASAN: null-ptr-deref in range [0x0000000000000030-0x0000000000000037]
[   16.687396] CPU: 1 PID: 785 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   16.687706] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   16.688193] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   16.688406] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   16.689137] RSP: 0018:ffff88801705fba8 EFLAGS: 00010206
[   16.689379] RAX: dffffc0000000000 RBX: ffff88800bd58000 RCX: 0000000000000000
[   16.689639] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   16.689950] RBP: ffff88801705fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   16.690221] R10: ffff88800aad88df R11: 5f6466756d6d6f69 R12: 0000000000000000
[   16.690529] R13: ffffffff85cc0180 R14: ffff88801679a120 R15: ffffffff87070ae0
[   16.690790] FS:  00007f1d862e5600(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
[   16.691145] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   16.691353] CR2: 0000000020000080 CR3: 00000000203a6000 CR4: 0000000000750ee0
[   16.691663] PKRU: 55555554
[   16.691767] Call Trace:
[   16.691859]  <TASK>
[   16.691942]  ? show_regs+0x6e/0x80
[   16.692090]  ? die_addr+0x45/0xb0
[   16.692270]  ? exc_general_protection+0x159/0x250
[   16.692453]  ? asm_exc_general_protection+0x2b/0x30
[   16.692643]  ? sysfs_remove_link_from_group+0x21/0x90
[   16.692877]  ? sysfs_remove_link_from_group+0x37/0x90
[   16.693066]  ? sysfs_remove_link_from_group+0x21/0x90
[   16.693323]  iommu_device_unlink+0x85/0xd0
[   16.693479]  iommu_deinit_device+0x11f/0x4c0
[   16.693643]  __iommu_group_remove_device+0x26b/0x300
[   16.693887]  iommu_group_remove_device+0x8a/0xb0
[   16.694062]  iommufd_test+0x1f1a/0x2d10
[   16.694216]  ? __pfx_lock_release+0x10/0x10
[   16.694432]  ? __pfx_lock_acquire+0x10/0x10
[   16.694592]  ? __pfx_iommufd_test+0x10/0x10
[   16.694754]  ? __sanitizer_cov_trace_const_cmp8+0x1c/0x30
[   16.695000]  iommufd_fops_ioctl+0x377/0x510
[   16.695168]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   16.695350]  ? trace_hardirqs_on+0x26/0x120
[   16.695542]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   16.695772]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   16.695974]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   16.696210]  ? security_file_ioctl+0x9d/0xd0
[   16.696375]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   16.696607]  __x64_sys_ioctl+0x1b9/0x230
[   16.696756]  do_syscall_64+0x3c/0x90
[   16.696892]  entry_SYSCALL_64_after_hwframe+0x6e/0xd8
[   16.697140] RIP: 0033:0x7f1d8603ee5d
[   16.697276] Code: ff c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d 93 af 1b 00 f7 d8 64 89 01 48
[   16.697983] RSP: 002b:00007ffe73477538 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   16.698317] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f1d8603ee5d
[   16.698571] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   16.698886] RBP: 00007ffe73477550 R08: 0000000000000800 R09: 0000000000000800
[   16.699142] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffe73477668
[   16.699400] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f1d86326000
[   16.699669]  </TASK>
[   16.699797] Modules linked in:
[   16.699929] ---[ end trace 0000000000000000 ]---
[   16.700096] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   16.700312] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   16.700955] RSP: 0018:ffff88802457fba8 EFLAGS: 00010206
[   16.701144] RAX: dffffc0000000000 RBX: ffff888014f9b000 RCX: 0000000000000000
[   16.701432] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   16.701710] RBP: ffff88802457fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   16.701962] R10: ffff88800aad88df R11: 0000000000000001 R12: 0000000000000000
[   16.702228] R13: ffffffff85cc0180 R14: ffff8880109b6ac0 R15: ffffffff87070ae0
[   16.702526] FS:  00007f1d862e5600(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
[   16.702828] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   16.703039] CR2: 0000000020000080 CR3: 00000000203a6000 CR4: 0000000000750ee0
[   16.703331] PKRU: 55555554
[   16.704166] ------------[ cut here ]------------
[   16.704397] WARNING: CPU: 1 PID: 785 at drivers/iommu/iommufd/main.c:258 iommufd_fops_release+0x2a3/0x300
[   16.704748] Modules linked in:
[   16.704899] CPU: 1 PID: 785 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   16.705215] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   16.705670] RIP: 0010:iommufd_fops_release+0x2a3/0x300
[   16.705910] Code: 45 d0 65 48 2b 04 25 28 00 00 00 75 54 48 81 c4 88 00 00 00 31 c0 5b 41 5c 41 5d 41 5e 41 5f 5d c3 cc cc cc cc e8 ad 4f 0a fe <0f> 0b eb a6 e8 74 23 67 fe e9 f6 fe ff ff 48 89 85 50 ff ff ff e8
[   16.706630] RSP: 0018:ffff88801705fc00 EFLAGS: 00010293
[   16.706834] RAX: 0000000000000000 RBX: ffff88801248a208 RCX: 0000000000000000
[   16.707096] RDX: ffff8880170d0000 RSI: ffffffff835563e3 RDI: ffffffff86702b48
[   16.707404] RBP: ffff88801705fcb0 R08: 0000000000000000 R09: fffffbfff0eb2644
[   16.707656] R10: ffffffff87593227 R11: ffff888018abc800 R12: 0000000000000000
[   16.707961] R13: ffff888020928198 R14: ffff88801705fc48 R15: ffffffff83556140
[   16.708214] FS:  0000000000000000(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
[   16.708552] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   16.708766] CR2: 00007f3134012008 CR3: 00000000133d2000 CR4: 0000000000750ee0
[   16.709062] PKRU: 55555554
[   16.709164] Call Trace:
[   16.709257]  <TASK>
[   16.709373]  ? show_regs+0x6e/0x80
[   16.709522]  ? __warn+0xef/0x340
[   16.709647]  ? report_bug+0x25e/0x4b0
[   16.709791]  ? iommufd_fops_release+0x2a3/0x300
[   16.710005]  ? report_bug+0x2cb/0x4b0
[   16.710147]  ? handle_bug+0x46/0x90
[   16.710285]  ? exc_invalid_op+0x1d/0x50
[   16.710487]  ? asm_exc_invalid_op+0x1f/0x30
[   16.710685]  ? __pfx_iommufd_fops_release+0x10/0x10
[   16.710887]  ? iommufd_fops_release+0x2a3/0x300
[   16.711057]  ? iommufd_fops_release+0x2a3/0x300
[   16.711227]  ? __pfx_iommufd_fops_release+0x10/0x10
[   16.711415]  ? rcu_is_watching+0x19/0xc0
[   16.711620]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   16.711819]  ? __pfx_iommufd_fops_release+0x10/0x10
[   16.711999]  __fput+0x424/0xaf0
[   16.712174]  ____fput+0x1f/0x30
[   16.712298]  task_work_run+0x19d/0x2b0
[   16.712448]  ? __pfx_task_work_run+0x10/0x10
[   16.712641]  ? __sanitizer_cov_trace_const_cmp1+0x1e/0x30
[   16.712859]  ? switch_task_namespaces+0xa9/0xe0
[   16.713029]  do_exit+0xac9/0x2790
[   16.713205]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   16.713440]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   16.713629]  ? __pfx_do_exit+0x10/0x10
[   16.713806]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   16.714003]  ? security_file_ioctl+0x9d/0xd0
[   16.714196]  make_task_dead+0x182/0x3c0
[   16.714374]  rewind_stack_and_make_dead+0x17/0x20
[   16.714549] RIP: 0033:0x7f1d8603ee5d
[   16.714716] Code: Unable to access opcode bytes at 0x7f1d8603ee33.
[   16.714994] RSP: 002b:00007ffe73477538 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   16.715263] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f1d8603ee5d
[   16.715523] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   16.715832] RBP: 00007ffe73477550 R08: 0000000000000800 R09: 0000000000000800
[   16.716084] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffe73477668
[   16.716418] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f1d86326000
[   16.716680]  </TASK>
[   16.716778] irq event stamp: 0
[   16.716935] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   16.717159] hardirqs last disabled at (0): [<ffffffff8122f2d1>] copy_process+0x1c51/0x7140
[   16.717503] softirqs last  enabled at (0): [<ffffffff8122f312>] copy_process+0x1c92/0x7140
[   16.717800] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   16.718072] ---[ end trace 0000000000000000 ]---
[   16.721974] iommufd_mock iommufd_mock68: Adding to iommu group 68
[   16.722226] iommufd_mock iommufd_mock68: Removing from iommu group 68
[   16.722476] general protection fault, probably for non-canonical address 0xdffffc0000000006: 0000 [#69] PREEMPT SMP KASAN NOPTI
[   16.722902] KASAN: null-ptr-deref in range [0x0000000000000030-0x0000000000000037]
[   16.723184] CPU: 1 PID: 786 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   16.723524] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   16.723962] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   16.724178] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   16.724908] RSP: 0018:ffff88800ba67ba8 EFLAGS: 00010206
[   16.725098] RAX: dffffc0000000000 RBX: ffff88800bd5e000 RCX: 0000000000000000
[   16.725393] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   16.725653] RBP: ffff88800ba67bc0 R08: 0000000000000001 R09: ffffed100155b11b
[   16.725953] R10: ffff88800aad88df R11: 5f6466756d6d6f69 R12: 0000000000000000
[   16.726206] R13: ffffffff85cc0180 R14: ffff88801679ac60 R15: ffffffff87070ae0
[   16.726502] FS:  00007f52890bd600(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
[   16.726801] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   16.727039] CR2: 0000000020000080 CR3: 00000000132a0000 CR4: 0000000000750ee0
[   16.727292] PKRU: 55555554
[   16.727395] Call Trace:
[   16.727508]  <TASK>
[   16.727624]  ? show_regs+0x6e/0x80
[   16.727758]  ? die_addr+0x45/0xb0
[   16.727889]  ? exc_general_protection+0x159/0x250
[   16.728110]  ? asm_exc_general_protection+0x2b/0x30
[   16.728294]  ? sysfs_remove_link_from_group+0x21/0x90
[   16.728486]  ? sysfs_remove_link_from_group+0x37/0x90
[   16.728709]  ? sysfs_remove_link_from_group+0x21/0x90
[   16.728896]  iommu_device_unlink+0x85/0xd0
[   16.729065]  iommu_deinit_device+0x11f/0x4c0
[   16.729252]  __iommu_group_remove_device+0x26b/0x300
[   16.729439]  iommu_group_remove_device+0x8a/0xb0
[   16.729662]  iommufd_test+0x1f1a/0x2d10
[   16.729806]  ? __pfx_lock_release+0x10/0x10
[   16.729964]  ? __pfx_lock_acquire+0x10/0x10
[   16.730134]  ? __pfx_iommufd_test+0x10/0x10
[   16.730314]  ? __sanitizer_cov_trace_const_cmp8+0x1c/0x30
[   16.730514]  iommufd_fops_ioctl+0x377/0x510
[   16.730719]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   16.730906]  ? trace_hardirqs_on+0x26/0x120
[   16.731065]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   16.731331]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   16.731514]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   16.731761]  ? security_file_ioctl+0x9d/0xd0
[   16.731925]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   16.732100]  __x64_sys_ioctl+0x1b9/0x230
[   16.732286]  do_syscall_64+0x3c/0x90
[   16.732422]  entry_SYSCALL_64_after_hwframe+0x6e/0xd8
[   16.732607] RIP: 0033:0x7f5288e3ee5d
[   16.732766] Code: ff c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d 93 af 1b 00 f7 d8 64 89 01 48
[   16.733433] RSP: 002b:00007fff2ddb8e48 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   16.733714] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f5288e3ee5d
[   16.733968] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   16.734220] RBP: 00007fff2ddb8e60 R08: 0000000000000800 R09: 0000000000000800
[   16.734472] R10: 0000000000000000 R11: 0000000000000213 R12: 00007fff2ddb8f78
[   16.734733] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f52890fe000
[   16.734999]  </TASK>
[   16.735084] Modules linked in:
[   16.735225] ---[ end trace 0000000000000000 ]---
[   16.735393] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   16.735601] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   16.736252] RSP: 0018:ffff88802457fba8 EFLAGS: 00010206
[   16.736442] RAX: dffffc0000000000 RBX: ffff888014f9b000 RCX: 0000000000000000
[   16.736720] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   16.736975] RBP: ffff88802457fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   16.737227] R10: ffff88800aad88df R11: 0000000000000001 R12: 0000000000000000
[   16.737479] R13: ffffffff85cc0180 R14: ffff8880109b6ac0 R15: ffffffff87070ae0
[   16.737739] FS:  00007f52890bd600(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
[   16.738024] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   16.738232] CR2: 0000000020000080 CR3: 00000000132a0000 CR4: 0000000000750ee0
[   16.738485] PKRU: 55555554
[   16.738885] ------------[ cut here ]------------
[   16.739062] WARNING: CPU: 1 PID: 786 at drivers/iommu/iommufd/main.c:258 iommufd_fops_release+0x2a3/0x300
[   16.739402] Modules linked in:
[   16.739518] CPU: 1 PID: 786 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   16.739835] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   16.740231] RIP: 0010:iommufd_fops_release+0x2a3/0x300
[   16.740420] Code: 45 d0 65 48 2b 04 25 28 00 00 00 75 54 48 81 c4 88 00 00 00 31 c0 5b 41 5c 41 5d 41 5e 41 5f 5d c3 cc cc cc cc e8 ad 4f 0a fe <0f> 0b eb a6 e8 74 23 67 fe e9 f6 fe ff ff 48 89 85 50 ff ff ff e8
[   16.741070] RSP: 0018:ffff88800ba67c00 EFLAGS: 00010293
[   16.741259] RAX: 0000000000000000 RBX: ffff88801248ae08 RCX: 0000000000000000
[   16.741511] RDX: ffff8880170d4a00 RSI: ffffffff835563e3 RDI: ffffffff86702b48
[   16.741772] RBP: ffff88800ba67cb0 R08: 0000000000000000 R09: fffffbfff0eb2644
[   16.742023] R10: ffffffff87593227 R11: ffff88801214b200 R12: 0000000000000000
[   16.742274] R13: ffff888020929098 R14: ffff88800ba67c48 R15: ffffffff83556140
[   16.742526] FS:  0000000000000000(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
[   16.742847] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   16.743068] CR2: 0000000020000080 CR3: 000000000687e000 CR4: 0000000000750ee0
[   16.743322] PKRU: 55555554
[   16.743424] Call Trace:
[   16.743516]  <TASK>
[   16.743598]  ? show_regs+0x6e/0x80
[   16.743730]  ? __warn+0xef/0x340
[   16.743864]  ? report_bug+0x25e/0x4b0
[   16.744004]  ? iommufd_fops_release+0x2a3/0x300
[   16.744173]  ? report_bug+0x2cb/0x4b0
[   16.744314]  ? handle_bug+0x46/0x90
[   16.744447]  ? exc_invalid_op+0x1d/0x50
[   16.744591]  ? asm_exc_invalid_op+0x1f/0x30
[   16.744746]  ? __pfx_iommufd_fops_release+0x10/0x10
[   16.744936]  ? iommufd_fops_release+0x2a3/0x300
[   16.745105]  ? iommufd_fops_release+0x2a3/0x300
[   16.745275]  ? __pfx_iommufd_fops_release+0x10/0x10
[   16.745454]  ? rcu_is_watching+0x19/0xc0
[   16.745603]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   16.745809]  ? __pfx_iommufd_fops_release+0x10/0x10
[   16.745988]  __fput+0x424/0xaf0
[   16.746114]  ____fput+0x1f/0x30
[   16.746236]  task_work_run+0x19d/0x2b0
[   16.746378]  ? __pfx_task_work_run+0x10/0x10
[   16.746538]  ? __sanitizer_cov_trace_const_cmp1+0x1e/0x30
[   16.746749]  ? switch_task_namespaces+0xa9/0xe0
[   16.746947]  do_exit+0xac9/0x2790
[   16.747075]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   16.747325]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   16.747508]  ? __pfx_do_exit+0x10/0x10
[   16.747649]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   16.747854]  ? security_file_ioctl+0x9d/0xd0
[   16.748016]  make_task_dead+0x182/0x3c0
[   16.748162]  rewind_stack_and_make_dead+0x17/0x20
[   16.748336] RIP: 0033:0x7f5288e3ee5d
[   16.748470] Code: Unable to access opcode bytes at 0x7f5288e3ee33.
[   16.748688] RSP: 002b:00007fff2ddb8e48 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   16.748965] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f5288e3ee5d
[   16.749216] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   16.749467] RBP: 00007fff2ddb8e60 R08: 0000000000000800 R09: 0000000000000800
[   16.749718] R10: 0000000000000000 R11: 0000000000000213 R12: 00007fff2ddb8f78
[   16.749979] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f52890fe000
[   16.750235]  </TASK>
[   16.750319] irq event stamp: 0
[   16.750433] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   16.750664] hardirqs last disabled at (0): [<ffffffff8122f2d1>] copy_process+0x1c51/0x7140
[   16.750975] softirqs last  enabled at (0): [<ffffffff8122f312>] copy_process+0x1c92/0x7140
[   16.751268] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   16.751491] ---[ end trace 0000000000000000 ]---
[   16.754044] iommufd_mock iommufd_mock69: Adding to iommu group 69
[   16.754291] iommufd_mock iommufd_mock69: Removing from iommu group 69
[   16.754540] general protection fault, probably for non-canonical address 0xdffffc0000000006: 0000 [#70] PREEMPT SMP KASAN NOPTI
[   16.754957] KASAN: null-ptr-deref in range [0x0000000000000030-0x0000000000000037]
[   16.755226] CPU: 0 PID: 787 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   16.755536] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   16.755936] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   16.756148] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   16.756796] RSP: 0018:ffff88800b9f7ba8 EFLAGS: 00010206
[   16.756987] RAX: dffffc0000000000 RBX: ffff88800bcff000 RCX: 0000000000000000
[   16.757241] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   16.757495] RBP: ffff88800b9f7bc0 R08: 0000000000000001 R09: ffffed100155b11b
[   16.757749] R10: ffff88800aad88df R11: 5f6466756d6d6f69 R12: 0000000000000000
[   16.758003] R13: ffffffff85cc0180 R14: ffff88800bd79b80 R15: ffffffff87070ae0
[   16.758257] FS:  00007fb852316600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   16.758544] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   16.758754] CR2: 0000000020000080 CR3: 0000000012f48000 CR4: 0000000000750ef0
[   16.759011] PKRU: 55555554
[   16.759114] Call Trace:
[   16.759207]  <TASK>
[   16.759289]  ? show_regs+0x6e/0x80
[   16.759424]  ? die_addr+0x45/0xb0
[   16.759556]  ? exc_general_protection+0x159/0x250
[   16.759738]  ? asm_exc_general_protection+0x2b/0x30
[   16.759922]  ? sysfs_remove_link_from_group+0x21/0x90
[   16.760111]  ? sysfs_remove_link_from_group+0x37/0x90
[   16.760300]  ? sysfs_remove_link_from_group+0x21/0x90
[   16.760488]  iommu_device_unlink+0x85/0xd0
[   16.760643]  iommu_deinit_device+0x11f/0x4c0
[   16.760807]  __iommu_group_remove_device+0x26b/0x300
[   16.760995]  iommu_group_remove_device+0x8a/0xb0
[   16.761170]  iommufd_test+0x1f1a/0x2d10
[   16.761314]  ? __pfx_lock_release+0x10/0x10
[   16.761473]  ? __pfx_lock_acquire+0x10/0x10
[   16.761632]  ? __pfx_iommufd_test+0x10/0x10
[   16.761791]  ? __sanitizer_cov_trace_const_cmp8+0x1c/0x30
[   16.761992]  iommufd_fops_ioctl+0x377/0x510
[   16.762152]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   16.762329]  ? trace_hardirqs_on+0x26/0x120
[   16.762490]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   16.762720]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   16.762913]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   16.763113]  ? security_file_ioctl+0x9d/0xd0
[   16.763277]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   16.763457]  __x64_sys_ioctl+0x1b9/0x230
[   16.763603]  do_syscall_64+0x3c/0x90
[   16.763737]  entry_SYSCALL_64_after_hwframe+0x6e/0xd8
[   16.763939] RIP: 0033:0x7fb85203ee5d
[   16.764072] Code: ff c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d 93 af 1b 00 f7 d8 64 89 01 48
[   16.764715] RSP: 002b:00007fffff749f28 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   16.764981] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007fb85203ee5d
[   16.765231] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   16.765483] RBP: 00007fffff749f40 R08: 0000000000000800 R09: 0000000000000800
[   16.765738] R10: 0000000000000000 R11: 0000000000000213 R12: 00007fffff74a058
[   16.765988] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007fb852357000
[   16.766242]  </TASK>
[   16.766325] Modules linked in:
[   16.766494] ---[ end trace 0000000000000000 ]---
[   16.766686] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   16.766898] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   16.767545] RSP: 0018:ffff88802457fba8 EFLAGS: 00010206
[   16.767737] RAX: dffffc0000000000 RBX: ffff888014f9b000 RCX: 0000000000000000
[   16.767986] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   16.768235] RBP: ffff88802457fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   16.768484] R10: ffff88800aad88df R11: 0000000000000001 R12: 0000000000000000
[   16.768737] R13: ffffffff85cc0180 R14: ffff8880109b6ac0 R15: ffffffff87070ae0
[   16.768991] FS:  00007fb852316600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   16.769277] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   16.769485] CR2: 0000000020000080 CR3: 0000000012f48000 CR4: 0000000000750ef0
[   16.769740] PKRU: 55555554
[   16.770194] ------------[ cut here ]------------
[   16.770377] WARNING: CPU: 1 PID: 787 at drivers/iommu/iommufd/main.c:258 iommufd_fops_release+0x2a3/0x300
[   16.770774] Modules linked in:
[   16.770892] CPU: 1 PID: 787 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   16.771198] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   16.771586] RIP: 0010:iommufd_fops_release+0x2a3/0x300
[   16.771771] Code: 45 d0 65 48 2b 04 25 28 00 00 00 75 54 48 81 c4 88 00 00 00 31 c0 5b 41 5c 41 5d 41 5e 41 5f 5d c3 cc cc cc cc e8 ad 4f 0a fe <0f> 0b eb a6 e8 74 23 67 fe e9 f6 fe ff ff 48 89 85 50 ff ff ff e8
[   16.772408] RSP: 0018:ffff88800b9f7c00 EFLAGS: 00010293
[   16.772598] RAX: 0000000000000000 RBX: ffff88800ca7f808 RCX: 0000000000000000
[   16.772851] RDX: ffff8880170d2500 RSI: ffffffff835563e3 RDI: ffffffff86702b48
[   16.773104] RBP: ffff88800b9f7cb0 R08: 0000000000000000 R09: fffffbfff0eb2644
[   16.773357] R10: ffffffff87593227 R11: ffff88800b1d8a00 R12: 0000000000000000
[   16.773610] R13: ffff888018af8918 R14: ffff88800b9f7c48 R15: ffffffff83556140
[   16.773863] FS:  0000000000000000(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
[   16.774148] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   16.774354] CR2: 00007fa281e11000 CR3: 000000000687e000 CR4: 0000000000750ee0
[   16.774631] PKRU: 55555554
[   16.774734] Call Trace:
[   16.774835]  <TASK>
[   16.774920]  ? show_regs+0x6e/0x80
[   16.775052]  ? __warn+0xef/0x340
[   16.775177]  ? report_bug+0x25e/0x4b0
[   16.775317]  ? iommufd_fops_release+0x2a3/0x300
[   16.775486]  ? report_bug+0x2cb/0x4b0
[   16.775629]  ? handle_bug+0x46/0x90
[   16.775762]  ? exc_invalid_op+0x1d/0x50
[   16.775906]  ? asm_exc_invalid_op+0x1f/0x30
[   16.776061]  ? __pfx_iommufd_fops_release+0x10/0x10
[   16.776243]  ? iommufd_fops_release+0x2a3/0x300
[   16.776412]  ? iommufd_fops_release+0x2a3/0x300
[   16.776582]  ? __pfx_iommufd_fops_release+0x10/0x10
[   16.776762]  ? rcu_is_watching+0x19/0xc0
[   16.776911]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   16.777109]  ? __pfx_iommufd_fops_release+0x10/0x10
[   16.777289]  __fput+0x424/0xaf0
[   16.777415]  ____fput+0x1f/0x30
[   16.777538]  task_work_run+0x19d/0x2b0
[   16.777681]  ? __pfx_task_work_run+0x10/0x10
[   16.777841]  ? __sanitizer_cov_trace_const_cmp1+0x1e/0x30
[   16.778038]  ? switch_task_namespaces+0xa9/0xe0
[   16.778208]  do_exit+0xac9/0x2790
[   16.778336]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   16.778563]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   16.778785]  ? __pfx_do_exit+0x10/0x10
[   16.778933]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   16.779132]  ? security_file_ioctl+0x9d/0xd0
[   16.779296]  make_task_dead+0x182/0x3c0
[   16.779442]  rewind_stack_and_make_dead+0x17/0x20
[   16.779617] RIP: 0033:0x7fb85203ee5d
[   16.779751] Code: Unable to access opcode bytes at 0x7fb85203ee33.
[   16.779970] RSP: 002b:00007fffff749f28 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   16.780239] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007fb85203ee5d
[   16.780492] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   16.780745] RBP: 00007fffff749f40 R08: 0000000000000800 R09: 0000000000000800
[   16.780997] R10: 0000000000000000 R11: 0000000000000213 R12: 00007fffff74a058
[   16.781250] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007fb852357000
[   16.781508]  </TASK>
[   16.781593] irq event stamp: 0
[   16.781707] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   16.781931] hardirqs last disabled at (0): [<ffffffff8122f2d1>] copy_process+0x1c51/0x7140
[   16.782226] softirqs last  enabled at (0): [<ffffffff8122f312>] copy_process+0x1c92/0x7140
[   16.782519] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   16.782765] ---[ end trace 0000000000000000 ]---
[   16.785208] iommufd_mock iommufd_mock70: Adding to iommu group 70
[   16.785456] iommufd_mock iommufd_mock70: Removing from iommu group 70
[   16.785706] general protection fault, probably for non-canonical address 0xdffffc0000000006: 0000 [#71] PREEMPT SMP KASAN NOPTI
[   16.786109] KASAN: null-ptr-deref in range [0x0000000000000030-0x0000000000000037]
[   16.786377] CPU: 0 PID: 788 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   16.786687] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   16.787108] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   16.787320] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   16.787967] RSP: 0018:ffff88800ba67ba8 EFLAGS: 00010206
[   16.788158] RAX: dffffc0000000000 RBX: ffff88800bcf8000 RCX: 0000000000000000
[   16.788412] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   16.788666] RBP: ffff88800ba67bc0 R08: 0000000000000001 R09: ffffed100155b11b
[   16.788920] R10: ffff88800aad88df R11: 5f6466756d6d6f69 R12: 0000000000000000
[   16.789174] R13: ffffffff85cc0180 R14: ffff88800bd79880 R15: ffffffff87070ae0
[   16.789429] FS:  00007fe2b5fd9600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   16.789715] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   16.789923] CR2: 0000000020000080 CR3: 00000000132a0000 CR4: 0000000000750ef0
[   16.790179] PKRU: 55555554
[   16.790281] Call Trace:
[   16.790374]  <TASK>
[   16.790457]  ? show_regs+0x6e/0x80
[   16.790591]  ? die_addr+0x45/0xb0
[   16.790723]  ? exc_general_protection+0x159/0x250
[   16.790907]  ? asm_exc_general_protection+0x2b/0x30
[   16.791091]  ? sysfs_remove_link_from_group+0x21/0x90
[   16.791279]  ? sysfs_remove_link_from_group+0x37/0x90
[   16.791467]  ? sysfs_remove_link_from_group+0x21/0x90
[   16.791655]  iommu_device_unlink+0x85/0xd0
[   16.791812]  iommu_deinit_device+0x11f/0x4c0
[   16.791978]  __iommu_group_remove_device+0x26b/0x300
[   16.792165]  iommu_group_remove_device+0x8a/0xb0
[   16.792339]  iommufd_test+0x1f1a/0x2d10
[   16.792483]  ? __pfx_lock_release+0x10/0x10
[   16.792642]  ? __pfx_lock_acquire+0x10/0x10
[   16.792802]  ? __pfx_iommufd_test+0x10/0x10
[   16.792959]  ? __sanitizer_cov_trace_const_cmp8+0x1c/0x30
[   16.793161]  iommufd_fops_ioctl+0x377/0x510
[   16.793320]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   16.793497]  ? trace_hardirqs_on+0x26/0x120
[   16.793657]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   16.793886]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   16.794070]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   16.794270]  ? security_file_ioctl+0x9d/0xd0
[   16.794434]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   16.794611]  __x64_sys_ioctl+0x1b9/0x230
[   16.794764]  do_syscall_64+0x3c/0x90
[   16.794904]  entry_SYSCALL_64_after_hwframe+0x6e/0xd8
[   16.795093] RIP: 0033:0x7fe2b5c3ee5d
[   16.795228] Code: ff c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d 93 af 1b 00 f7 d8 64 89 01 48
[   16.795875] RSP: 002b:00007fff6313c558 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   16.796146] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007fe2b5c3ee5d
[   16.796400] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   16.796654] RBP: 00007fff6313c570 R08: 0000000000000800 R09: 0000000000000800
[   16.796908] R10: 0000000000000000 R11: 0000000000000213 R12: 00007fff6313c688
[   16.797162] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007fe2b601a000
[   16.797421]  </TASK>
[   16.797505] Modules linked in:
[   16.797663] ---[ end trace 0000000000000000 ]---
[   16.797847] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   16.798069] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   16.798743] RSP: 0018:ffff88802457fba8 EFLAGS: 00010206
[   16.798950] RAX: dffffc0000000000 RBX: ffff888014f9b000 RCX: 0000000000000000
[   16.799205] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   16.799458] RBP: ffff88802457fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   16.799712] R10: ffff88800aad88df R11: 0000000000000001 R12: 0000000000000000
[   16.799967] R13: ffffffff85cc0180 R14: ffff8880109b6ac0 R15: ffffffff87070ae0
[   16.800222] FS:  00007fe2b5fd9600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   16.800509] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   16.800717] CR2: 0000000020000080 CR3: 00000000132a0000 CR4: 0000000000750ef0
[   16.800972] PKRU: 55555554
[   16.801381] ------------[ cut here ]------------
[   16.801551] WARNING: CPU: 0 PID: 788 at drivers/iommu/iommufd/main.c:258 iommufd_fops_release+0x2a3/0x300
[   16.801892] Modules linked in:
[   16.802009] CPU: 0 PID: 788 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   16.802318] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   16.802811] RIP: 0010:iommufd_fops_release+0x2a3/0x300
[   16.803007] Code: 45 d0 65 48 2b 04 25 28 00 00 00 75 54 48 81 c4 88 00 00 00 31 c0 5b 41 5c 41 5d 41 5e 41 5f 5d c3 cc cc cc cc e8 ad 4f 0a fe <0f> 0b eb a6 e8 74 23 67 fe e9 f6 fe ff ff 48 89 85 50 ff ff ff e8
[   16.803654] RSP: 0018:ffff88800ba67c00 EFLAGS: 00010293
[   16.803845] RAX: 0000000000000000 RBX: ffff88800ca7fc08 RCX: 0000000000000000
[   16.804099] RDX: ffff888010e3ca00 RSI: ffffffff835563e3 RDI: ffffffff86702b40
[   16.804353] RBP: ffff88800ba67cb0 R08: 0000000000000000 R09: fffffbfff0eb2644
[   16.804607] R10: ffffffff87593227 R11: ffff888013174e00 R12: 0000000000000000
[   16.804860] R13: ffff888018af8418 R14: ffff88800ba67c48 R15: ffffffff83556140
[   16.805114] FS:  0000000000000000(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   16.805400] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   16.805608] CR2: 0000000020000080 CR3: 000000000687e000 CR4: 0000000000750ef0
[   16.805863] PKRU: 55555554
[   16.805965] Call Trace:
[   16.806079]  <TASK>
[   16.806162]  ? show_regs+0x6e/0x80
[   16.806295]  ? __warn+0xef/0x340
[   16.806422]  ? report_bug+0x25e/0x4b0
[   16.806564]  ? iommufd_fops_release+0x2a3/0x300
[   16.806745]  ? report_bug+0x2cb/0x4b0
[   16.806895]  ? handle_bug+0x46/0x90
[   16.807030]  ? exc_invalid_op+0x1d/0x50
[   16.807176]  ? asm_exc_invalid_op+0x1f/0x30
[   16.807333]  ? __pfx_iommufd_fops_release+0x10/0x10
[   16.807518]  ? iommufd_fops_release+0x2a3/0x300
[   16.807690]  ? iommufd_fops_release+0x2a3/0x300
[   16.807863]  ? __pfx_iommufd_fops_release+0x10/0x10
[   16.808045]  ? rcu_is_watching+0x19/0xc0
[   16.808197]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   16.808397]  ? __pfx_iommufd_fops_release+0x10/0x10
[   16.808579]  __fput+0x424/0xaf0
[   16.808706]  ____fput+0x1f/0x30
[   16.808830]  task_work_run+0x19d/0x2b0
[   16.808975]  ? __pfx_task_work_run+0x10/0x10
[   16.809137]  ? __sanitizer_cov_trace_const_cmp1+0x1e/0x30
[   16.809337]  ? switch_task_namespaces+0xa9/0xe0
[   16.809509]  do_exit+0xac9/0x2790
[   16.809638]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   16.809868]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   16.810052]  ? __pfx_do_exit+0x10/0x10
[   16.810195]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   16.810395]  ? security_file_ioctl+0x9d/0xd0
[   16.810560]  make_task_dead+0x182/0x3c0
[   16.810718]  rewind_stack_and_make_dead+0x17/0x20
[   16.810901] RIP: 0033:0x7fe2b5c3ee5d
[   16.811037] Code: Unable to access opcode bytes at 0x7fe2b5c3ee33.
[   16.811259] RSP: 002b:00007fff6313c558 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   16.811532] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007fe2b5c3ee5d
[   16.811789] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   16.812044] RBP: 00007fff6313c570 R08: 0000000000000800 R09: 0000000000000800
[   16.812298] R10: 0000000000000000 R11: 0000000000000213 R12: 00007fff6313c688
[   16.812552] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007fe2b601a000
[   16.812832]  </TASK>
[   16.812919] irq event stamp: 0
[   16.813034] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   16.813259] hardirqs last disabled at (0): [<ffffffff8122f2d1>] copy_process+0x1c51/0x7140
[   16.813554] softirqs last  enabled at (0): [<ffffffff8122f312>] copy_process+0x1c92/0x7140
[   16.813849] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   16.814077] ---[ end trace 0000000000000000 ]---
[   16.816771] iommufd_mock iommufd_mock71: Adding to iommu group 71
[   16.817019] iommufd_mock iommufd_mock71: Removing from iommu group 71
[   16.817281] general protection fault, probably for non-canonical address 0xdffffc0000000006: 0000 [#72] PREEMPT SMP KASAN NOPTI
[   16.817688] KASAN: null-ptr-deref in range [0x0000000000000030-0x0000000000000037]
[   16.817958] CPU: 0 PID: 789 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   16.818269] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   16.818672] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   16.818894] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   16.819547] RSP: 0018:ffff8880116bfba8 EFLAGS: 00010206
[   16.819740] RAX: dffffc0000000000 RBX: ffff8880119cb000 RCX: 0000000000000000
[   16.819996] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   16.820252] RBP: ffff8880116bfbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   16.820508] R10: ffff88800aad88df R11: 5f6466756d6d6f69 R12: 0000000000000000
[   16.820764] R13: ffffffff85cc0180 R14: ffff88800bd79440 R15: ffffffff87070ae0
[   16.821021] FS:  00007f73b24a2600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   16.821309] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   16.821518] CR2: 0000000020000080 CR3: 00000000132a0000 CR4: 0000000000750ef0
[   16.821776] PKRU: 55555554
[   16.821879] Call Trace:
[   16.821973]  <TASK>
[   16.822057]  ? show_regs+0x6e/0x80
[   16.822192]  ? die_addr+0x45/0xb0
[   16.822324]  ? exc_general_protection+0x159/0x250
[   16.822507]  ? asm_exc_general_protection+0x2b/0x30
[   16.822692]  ? sysfs_remove_link_from_group+0x21/0x90
[   16.822888]  ? sysfs_remove_link_from_group+0x37/0x90
[   16.823077]  ? sysfs_remove_link_from_group+0x21/0x90
[   16.823267]  iommu_device_unlink+0x85/0xd0
[   16.823423]  iommu_deinit_device+0x11f/0x4c0
[   16.823588]  __iommu_group_remove_device+0x26b/0x300
[   16.823776]  iommu_group_remove_device+0x8a/0xb0
[   16.823952]  iommufd_test+0x1f1a/0x2d10
[   16.824098]  ? __pfx_lock_release+0x10/0x10
[   16.824257]  ? __pfx_lock_acquire+0x10/0x10
[   16.824417]  ? __pfx_iommufd_test+0x10/0x10
[   16.824576]  ? __sanitizer_cov_trace_const_cmp8+0x1c/0x30
[   16.824779]  iommufd_fops_ioctl+0x377/0x510
[   16.824939]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   16.825117]  ? trace_hardirqs_on+0x26/0x120
[   16.825278]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   16.825510]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   16.825696]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   16.825897]  ? security_file_ioctl+0x9d/0xd0
[   16.826062]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   16.826240]  __x64_sys_ioctl+0x1b9/0x230
[   16.826390]  do_syscall_64+0x3c/0x90
[   16.826527]  entry_SYSCALL_64_after_hwframe+0x6e/0xd8
[   16.826715] RIP: 0033:0x7f73b223ee5d
[   16.826856] Code: ff c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d 93 af 1b 00 f7 d8 64 89 01 48
[   16.827497] RSP: 002b:00007ffc4dd90308 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   16.827768] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f73b223ee5d
[   16.828020] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   16.828271] RBP: 00007ffc4dd90320 R08: 0000000000000800 R09: 0000000000000800
[   16.828522] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffc4dd90438
[   16.828776] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f73b24e3000
[   16.829032]  </TASK>
[   16.829116] Modules linked in:
[   16.829266] ---[ end trace 0000000000000000 ]---
[   16.829437] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   16.829647] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   16.830297] RSP: 0018:ffff88802457fba8 EFLAGS: 00010206
[   16.830489] RAX: dffffc0000000000 RBX: ffff888014f9b000 RCX: 0000000000000000
[   16.830753] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   16.831012] RBP: ffff88802457fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   16.831263] R10: ffff88800aad88df R11: 0000000000000001 R12: 0000000000000000
[   16.831514] R13: ffffffff85cc0180 R14: ffff8880109b6ac0 R15: ffffffff87070ae0
[   16.831765] FS:  00007f73b24a2600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   16.832048] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   16.832253] CR2: 0000000020000080 CR3: 00000000132a0000 CR4: 0000000000750ef0
[   16.832505] PKRU: 55555554
[   16.832858] ------------[ cut here ]------------
[   16.833025] WARNING: CPU: 0 PID: 789 at drivers/iommu/iommufd/main.c:258 iommufd_fops_release+0x2a3/0x300
[   16.833364] Modules linked in:
[   16.833480] CPU: 0 PID: 789 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   16.833786] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   16.834180] RIP: 0010:iommufd_fops_release+0x2a3/0x300
[   16.834367] Code: 45 d0 65 48 2b 04 25 28 00 00 00 75 54 48 81 c4 88 00 00 00 31 c0 5b 41 5c 41 5d 41 5e 41 5f 5d c3 cc cc cc cc e8 ad 4f 0a fe <0f> 0b eb a6 e8 74 23 67 fe e9 f6 fe ff ff 48 89 85 50 ff ff ff e8
[   16.835026] RSP: 0018:ffff8880116bfc00 EFLAGS: 00010293
[   16.835218] RAX: 0000000000000000 RBX: ffff88800ca7f508 RCX: 0000000000000000
[   16.835474] RDX: ffff888014428000 RSI: ffffffff835563e3 RDI: ffffffff86702b40
[   16.835726] RBP: ffff8880116bfcb0 R08: 0000000000000000 R09: fffffbfff0eb2644
[   16.835977] R10: ffffffff87593227 R11: ffff888013460e00 R12: 0000000000000000
[   16.836228] R13: ffff8880202dee18 R14: ffff8880116bfc48 R15: ffffffff83556140
[   16.836480] FS:  0000000000000000(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   16.836764] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   16.836969] CR2: 0000000020000080 CR3: 000000000687e000 CR4: 0000000000750ef0
[   16.837221] PKRU: 55555554
[   16.837322] Call Trace:
[   16.837414]  <TASK>
[   16.837494]  ? show_regs+0x6e/0x80
[   16.837624]  ? __warn+0xef/0x340
[   16.837748]  ? report_bug+0x25e/0x4b0
[   16.837887]  ? iommufd_fops_release+0x2a3/0x300
[   16.838056]  ? report_bug+0x2cb/0x4b0
[   16.838197]  ? handle_bug+0x46/0x90
[   16.838329]  ? exc_invalid_op+0x1d/0x50
[   16.838473]  ? asm_exc_invalid_op+0x1f/0x30
[   16.838634]  ? __pfx_iommufd_fops_release+0x10/0x10
[   16.838822]  ? iommufd_fops_release+0x2a3/0x300
[   16.838995]  ? iommufd_fops_release+0x2a3/0x300
[   16.839168]  ? __pfx_iommufd_fops_release+0x10/0x10
[   16.839347]  ? rcu_is_watching+0x19/0xc0
[   16.839495]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   16.839691]  ? __pfx_iommufd_fops_release+0x10/0x10
[   16.839870]  __fput+0x424/0xaf0
[   16.839994]  ____fput+0x1f/0x30
[   16.840115]  task_work_run+0x19d/0x2b0
[   16.840256]  ? __pfx_task_work_run+0x10/0x10
[   16.840415]  ? __sanitizer_cov_trace_const_cmp1+0x1e/0x30
[   16.840610]  ? switch_task_namespaces+0xa9/0xe0
[   16.840780]  do_exit+0xac9/0x2790
[   16.840906]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   16.841132]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   16.841313]  ? __pfx_do_exit+0x10/0x10
[   16.841453]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   16.841649]  ? security_file_ioctl+0x9d/0xd0
[   16.841810]  make_task_dead+0x182/0x3c0
[   16.841954]  rewind_stack_and_make_dead+0x17/0x20
[   16.842128] RIP: 0033:0x7f73b223ee5d
[   16.842261] Code: Unable to access opcode bytes at 0x7f73b223ee33.
[   16.842478] RSP: 002b:00007ffc4dd90308 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   16.842758] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f73b223ee5d
[   16.843014] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   16.843270] RBP: 00007ffc4dd90320 R08: 0000000000000800 R09: 0000000000000800
[   16.843528] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffc4dd90438
[   16.843780] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f73b24e3000
[   16.844037]  </TASK>
[   16.844121] irq event stamp: 0
[   16.844234] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   16.844457] hardirqs last disabled at (0): [<ffffffff8122f2d1>] copy_process+0x1c51/0x7140
[   16.844749] softirqs last  enabled at (0): [<ffffffff8122f312>] copy_process+0x1c92/0x7140
[   16.845040] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   16.845263] ---[ end trace 0000000000000000 ]---
[   16.847726] iommufd_mock iommufd_mock72: Adding to iommu group 72
[   16.847973] iommufd_mock iommufd_mock72: Removing from iommu group 72
[   16.848224] general protection fault, probably for non-canonical address 0xdffffc0000000006: 0000 [#73] PREEMPT SMP KASAN NOPTI
[   16.848629] KASAN: null-ptr-deref in range [0x0000000000000030-0x0000000000000037]
[   16.848894] CPU: 0 PID: 790 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   16.849200] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   16.849596] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   16.849804] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   16.850444] RSP: 0018:ffff888012537ba8 EFLAGS: 00010206
[   16.850635] RAX: dffffc0000000000 RBX: ffff88801480d000 RCX: 0000000000000000
[   16.850897] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   16.851148] RBP: ffff888012537bc0 R08: 0000000000000001 R09: ffffed100155b11b
[   16.851399] R10: ffff88800aad88df R11: 5f6466756d6d6f69 R12: 0000000000000000
[   16.851650] R13: ffffffff85cc0180 R14: ffff88800bd79380 R15: ffffffff87070ae0
[   16.851902] FS:  00007fd29bc86600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   16.852185] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   16.852390] CR2: 0000000020000080 CR3: 00000000132a0000 CR4: 0000000000750ef0
[   16.852642] PKRU: 55555554
[   16.852744] Call Trace:
[   16.852835]  <TASK>
[   16.852916]  ? show_regs+0x6e/0x80
[   16.853049]  ? die_addr+0x45/0xb0
[   16.853179]  ? exc_general_protection+0x159/0x250
[   16.853358]  ? asm_exc_general_protection+0x2b/0x30
[   16.853541]  ? sysfs_remove_link_from_group+0x21/0x90
[   16.853727]  ? sysfs_remove_link_from_group+0x37/0x90
[   16.853913]  ? sysfs_remove_link_from_group+0x21/0x90
[   16.854099]  iommu_device_unlink+0x85/0xd0
[   16.854252]  iommu_deinit_device+0x11f/0x4c0
[   16.854414]  __iommu_group_remove_device+0x26b/0x300
[   16.854600]  iommu_group_remove_device+0x8a/0xb0
[   16.854778]  iommufd_test+0x1f1a/0x2d10
[   16.854926]  ? __pfx_lock_release+0x10/0x10
[   16.855082]  ? __pfx_lock_acquire+0x10/0x10
[   16.855240]  ? __pfx_iommufd_test+0x10/0x10
[   16.855396]  ? __sanitizer_cov_trace_const_cmp8+0x1c/0x30
[   16.855595]  iommufd_fops_ioctl+0x377/0x510
[   16.855752]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   16.855926]  ? trace_hardirqs_on+0x26/0x120
[   16.856085]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   16.856312]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   16.856494]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   16.856691]  ? security_file_ioctl+0x9d/0xd0
[   16.856853]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   16.857027]  __x64_sys_ioctl+0x1b9/0x230
[   16.857174]  do_syscall_64+0x3c/0x90
[   16.857308]  entry_SYSCALL_64_after_hwframe+0x6e/0xd8
[   16.857492] RIP: 0033:0x7fd29ba3ee5d
[   16.857625] Code: ff c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d 93 af 1b 00 f7 d8 64 89 01 48
[   16.858265] RSP: 002b:00007ffc610bb578 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   16.858532] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007fd29ba3ee5d
[   16.858789] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   16.859043] RBP: 00007ffc610bb590 R08: 0000000000000800 R09: 0000000000000800
[   16.859293] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffc610bb6a8
[   16.859544] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007fd29bcc7000
[   16.859800]  </TASK>
[   16.859884] Modules linked in:
[   16.860026] ---[ end trace 0000000000000000 ]---
[   16.860196] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   16.860407] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   16.861059] RSP: 0018:ffff88802457fba8 EFLAGS: 00010206
[   16.861251] RAX: dffffc0000000000 RBX: ffff888014f9b000 RCX: 0000000000000000
[   16.861508] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   16.861764] RBP: ffff88802457fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   16.862020] R10: ffff88800aad88df R11: 0000000000000001 R12: 0000000000000000
[   16.862277] R13: ffffffff85cc0180 R14: ffff8880109b6ac0 R15: ffffffff87070ae0
[   16.862533] FS:  00007fd29bc86600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   16.862832] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   16.863042] CR2: 0000000020000080 CR3: 00000000132a0000 CR4: 0000000000750ef0
[   16.863295] PKRU: 55555554
[   16.863644] ------------[ cut here ]------------
[   16.863811] WARNING: CPU: 0 PID: 790 at drivers/iommu/iommufd/main.c:258 iommufd_fops_release+0x2a3/0x300
[   16.864148] Modules linked in:
[   16.864263] CPU: 0 PID: 790 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   16.864568] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   16.864962] RIP: 0010:iommufd_fops_release+0x2a3/0x300
[   16.865149] Code: 45 d0 65 48 2b 04 25 28 00 00 00 75 54 48 81 c4 88 00 00 00 31 c0 5b 41 5c 41 5d 41 5e 41 5f 5d c3 cc cc cc cc e8 ad 4f 0a fe <0f> 0b eb a6 e8 74 23 67 fe e9 f6 fe ff ff 48 89 85 50 ff ff ff e8
[   16.865789] RSP: 0018:ffff888012537c00 EFLAGS: 00010293
[   16.865977] RAX: 0000000000000000 RBX: ffff88800ca7fd08 RCX: 0000000000000000
[   16.866228] RDX: ffff88800fc10000 RSI: ffffffff835563e3 RDI: ffffffff86702b40
[   16.866480] RBP: ffff888012537cb0 R08: 0000000000000000 R09: fffffbfff0eb2644
[   16.866752] R10: ffffffff87593227 R11: ffff888019740e00 R12: 0000000000000000
[   16.867009] R13: ffff888011b85818 R14: ffff888012537c48 R15: ffffffff83556140
[   16.867263] FS:  0000000000000000(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   16.867546] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   16.867751] CR2: 0000000020000080 CR3: 000000000687e000 CR4: 0000000000750ef0
[   16.868002] PKRU: 55555554
[   16.868103] Call Trace:
[   16.868195]  <TASK>
[   16.868276]  ? show_regs+0x6e/0x80
[   16.868406]  ? __warn+0xef/0x340
[   16.868530]  ? report_bug+0x25e/0x4b0
[   16.868669]  ? iommufd_fops_release+0x2a3/0x300
[   16.868837]  ? report_bug+0x2cb/0x4b0
[   16.868978]  ? handle_bug+0x46/0x90
[   16.869110]  ? exc_invalid_op+0x1d/0x50
[   16.869253]  ? asm_exc_invalid_op+0x1f/0x30
[   16.869407]  ? __pfx_iommufd_fops_release+0x10/0x10
[   16.869588]  ? iommufd_fops_release+0x2a3/0x300
[   16.869755]  ? iommufd_fops_release+0x2a3/0x300
[   16.869924]  ? __pfx_iommufd_fops_release+0x10/0x10
[   16.870103]  ? rcu_is_watching+0x19/0xc0
[   16.870251]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   16.870448]  ? __pfx_iommufd_fops_release+0x10/0x10
[   16.870644]  __fput+0x424/0xaf0
[   16.870773]  ____fput+0x1f/0x30
[   16.870897]  task_work_run+0x19d/0x2b0
[   16.871042]  ? __pfx_task_work_run+0x10/0x10
[   16.871204]  ? __sanitizer_cov_trace_const_cmp1+0x1e/0x30
[   16.871400]  ? switch_task_namespaces+0xa9/0xe0
[   16.871569]  do_exit+0xac9/0x2790
[   16.871696]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   16.871921]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   16.872102]  ? __pfx_do_exit+0x10/0x10
[   16.872243]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   16.872438]  ? security_file_ioctl+0x9d/0xd0
[   16.872599]  make_task_dead+0x182/0x3c0
[   16.872743]  rewind_stack_and_make_dead+0x17/0x20
[   16.872917] RIP: 0033:0x7fd29ba3ee5d
[   16.873050] Code: Unable to access opcode bytes at 0x7fd29ba3ee33.
[   16.873268] RSP: 002b:00007ffc610bb578 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   16.873535] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007fd29ba3ee5d
[   16.873787] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   16.874038] RBP: 00007ffc610bb590 R08: 0000000000000800 R09: 0000000000000800
[   16.874288] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffc610bb6a8
[   16.874541] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007fd29bcc7000
[   16.874811]  </TASK>
[   16.874897] irq event stamp: 0
[   16.875013] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   16.875240] hardirqs last disabled at (0): [<ffffffff8122f2d1>] copy_process+0x1c51/0x7140
[   16.875535] softirqs last  enabled at (0): [<ffffffff8122f312>] copy_process+0x1c92/0x7140
[   16.875826] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   16.876048] ---[ end trace 0000000000000000 ]---
[   16.878465] iommufd_mock iommufd_mock73: Adding to iommu group 73
[   16.878741] iommufd_mock iommufd_mock73: Removing from iommu group 73
[   16.879003] general protection fault, probably for non-canonical address 0xdffffc0000000006: 0000 [#74] PREEMPT SMP KASAN NOPTI
[   16.879407] KASAN: null-ptr-deref in range [0x0000000000000030-0x0000000000000037]
[   16.879677] CPU: 0 PID: 791 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   16.879988] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   16.880388] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   16.880600] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   16.881248] RSP: 0018:ffff888015b87ba8 EFLAGS: 00010206
[   16.881439] RAX: dffffc0000000000 RBX: ffff88800bfec000 RCX: 0000000000000000
[   16.881694] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   16.881948] RBP: ffff888015b87bc0 R08: 0000000000000001 R09: ffffed100155b11b
[   16.882202] R10: ffff88800aad88df R11: 5f6466756d6d6f69 R12: 0000000000000000
[   16.882456] R13: ffffffff85cc0180 R14: ffff88800bd79d00 R15: ffffffff87070ae0
[   16.882712] FS:  00007fa816069600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   16.883004] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   16.883212] CR2: 0000000020000080 CR3: 00000000132a0000 CR4: 0000000000750ef0
[   16.883467] PKRU: 55555554
[   16.883570] Call Trace:
[   16.883663]  <TASK>
[   16.883746]  ? show_regs+0x6e/0x80
[   16.883880]  ? die_addr+0x45/0xb0
[   16.884012]  ? exc_general_protection+0x159/0x250
[   16.884193]  ? asm_exc_general_protection+0x2b/0x30
[   16.884377]  ? sysfs_remove_link_from_group+0x21/0x90
[   16.884566]  ? sysfs_remove_link_from_group+0x37/0x90
[   16.884755]  ? sysfs_remove_link_from_group+0x21/0x90
[   16.884943]  iommu_device_unlink+0x85/0xd0
[   16.885099]  iommu_deinit_device+0x11f/0x4c0
[   16.885263]  __iommu_group_remove_device+0x26b/0x300
[   16.885451]  iommu_group_remove_device+0x8a/0xb0
[   16.885626]  iommufd_test+0x1f1a/0x2d10
[   16.885771]  ? __pfx_lock_release+0x10/0x10
[   16.885930]  ? __pfx_lock_acquire+0x10/0x10
[   16.886090]  ? __pfx_iommufd_test+0x10/0x10
[   16.886248]  ? __sanitizer_cov_trace_const_cmp8+0x1c/0x30
[   16.886450]  iommufd_fops_ioctl+0x377/0x510
[   16.886609]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   16.886789]  ? trace_hardirqs_on+0x26/0x120
[   16.886952]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   16.887182]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   16.887367]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   16.887567]  ? security_file_ioctl+0x9d/0xd0
[   16.887731]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   16.887908]  __x64_sys_ioctl+0x1b9/0x230
[   16.888057]  do_syscall_64+0x3c/0x90
[   16.888193]  entry_SYSCALL_64_after_hwframe+0x6e/0xd8
[   16.888380] RIP: 0033:0x7fa815e3ee5d
[   16.888515] Code: ff c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d 93 af 1b 00 f7 d8 64 89 01 48
[   16.889163] RSP: 002b:00007ffc1971cd38 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   16.889435] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007fa815e3ee5d
[   16.889689] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   16.889944] RBP: 00007ffc1971cd50 R08: 0000000000000800 R09: 0000000000000800
[   16.890199] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffc1971ce68
[   16.890453] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007fa8160aa000
[   16.890713]  </TASK>
[   16.890801] Modules linked in:
[   16.891037] ---[ end trace 0000000000000000 ]---
[   16.891207] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   16.891417] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   16.892062] RSP: 0018:ffff88802457fba8 EFLAGS: 00010206
[   16.892253] RAX: dffffc0000000000 RBX: ffff888014f9b000 RCX: 0000000000000000
[   16.892507] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   16.892761] RBP: ffff88802457fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   16.893015] R10: ffff88800aad88df R11: 0000000000000001 R12: 0000000000000000
[   16.893269] R13: ffffffff85cc0180 R14: ffff8880109b6ac0 R15: ffffffff87070ae0
[   16.893523] FS:  00007fa816069600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   16.893810] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   16.894019] CR2: 0000000020000080 CR3: 00000000132a0000 CR4: 0000000000750ef0
[   16.894274] PKRU: 55555554
[   16.894639] ------------[ cut here ]------------
[   16.894819] WARNING: CPU: 0 PID: 791 at drivers/iommu/iommufd/main.c:258 iommufd_fops_release+0x2a3/0x300
[   16.895164] Modules linked in:
[   16.895280] CPU: 0 PID: 791 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   16.895589] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   16.895988] RIP: 0010:iommufd_fops_release+0x2a3/0x300
[   16.896178] Code: 45 d0 65 48 2b 04 25 28 00 00 00 75 54 48 81 c4 88 00 00 00 31 c0 5b 41 5c 41 5d 41 5e 41 5f 5d c3 cc cc cc cc e8 ad 4f 0a fe <0f> 0b eb a6 e8 74 23 67 fe e9 f6 fe ff ff 48 89 85 50 ff ff ff e8
[   16.896825] RSP: 0018:ffff888015b87c00 EFLAGS: 00010293
[   16.897015] RAX: 0000000000000000 RBX: ffff88800fe06e08 RCX: 0000000000000000
[   16.897269] RDX: ffff88800fc12500 RSI: ffffffff835563e3 RDI: ffffffff86702b40
[   16.897524] RBP: ffff888015b87cb0 R08: 0000000000000000 R09: fffffbfff0eb2644
[   16.897779] R10: ffffffff87593227 R11: ffff8880115d7800 R12: 0000000000000000
[   16.898033] R13: ffff888011b85318 R14: ffff888015b87c48 R15: ffffffff83556140
[   16.898288] FS:  0000000000000000(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   16.898731] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   16.898945] CR2: 0000000020000080 CR3: 000000000687e000 CR4: 0000000000750ef0
[   16.899200] PKRU: 55555554
[   16.899303] Call Trace:
[   16.899396]  <TASK>
[   16.899477]  ? show_regs+0x6e/0x80
[   16.899609]  ? __warn+0xef/0x340
[   16.899735]  ? report_bug+0x25e/0x4b0
[   16.899876]  ? iommufd_fops_release+0x2a3/0x300
[   16.900046]  ? report_bug+0x2cb/0x4b0
[   16.900189]  ? handle_bug+0x46/0x90
[   16.900323]  ? exc_invalid_op+0x1d/0x50
[   16.900468]  ? asm_exc_invalid_op+0x1f/0x30
[   16.900624]  ? __pfx_iommufd_fops_release+0x10/0x10
[   16.900808]  ? iommufd_fops_release+0x2a3/0x300
[   16.900978]  ? iommufd_fops_release+0x2a3/0x300
[   16.901150]  ? __pfx_iommufd_fops_release+0x10/0x10
[   16.901330]  ? rcu_is_watching+0x19/0xc0
[   16.901480]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   16.901679]  ? __pfx_iommufd_fops_release+0x10/0x10
[   16.901861]  __fput+0x424/0xaf0
[   16.901987]  ____fput+0x1f/0x30
[   16.902111]  task_work_run+0x19d/0x2b0
[   16.902254]  ? __pfx_task_work_run+0x10/0x10
[   16.902415]  ? __sanitizer_cov_trace_const_cmp1+0x1e/0x30
[   16.902620]  ? switch_task_namespaces+0xa9/0xe0
[   16.902795]  do_exit+0xac9/0x2790
[   16.902927]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   16.903156]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   16.903339]  ? __pfx_do_exit+0x10/0x10
[   16.903481]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   16.903679]  ? security_file_ioctl+0x9d/0xd0
[   16.903843]  make_task_dead+0x182/0x3c0
[   16.903990]  rewind_stack_and_make_dead+0x17/0x20
[   16.904166] RIP: 0033:0x7fa815e3ee5d
[   16.904300] Code: Unable to access opcode bytes at 0x7fa815e3ee33.
[   16.904521] RSP: 002b:00007ffc1971cd38 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   16.904792] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007fa815e3ee5d
[   16.905046] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   16.905301] RBP: 00007ffc1971cd50 R08: 0000000000000800 R09: 0000000000000800
[   16.905555] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffc1971ce68
[   16.905809] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007fa8160aa000
[   16.906070]  </TASK>
[   16.906155] irq event stamp: 0
[   16.906270] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   16.906496] hardirqs last disabled at (0): [<ffffffff8122f2d1>] copy_process+0x1c51/0x7140
[   16.906801] softirqs last  enabled at (0): [<ffffffff8122f312>] copy_process+0x1c92/0x7140
[   16.907100] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   16.907326] ---[ end trace 0000000000000000 ]---
[   16.909677] iommufd_mock iommufd_mock74: Adding to iommu group 74
[   16.909921] iommufd_mock iommufd_mock74: Removing from iommu group 74
[   16.910170] general protection fault, probably for non-canonical address 0xdffffc0000000006: 0000 [#75] PREEMPT SMP KASAN NOPTI
[   16.910575] KASAN: null-ptr-deref in range [0x0000000000000030-0x0000000000000037]
[   16.910856] CPU: 0 PID: 792 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   16.911165] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   16.911558] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   16.911765] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   16.912400] RSP: 0018:ffff88802458fba8 EFLAGS: 00010206
[   16.912587] RAX: dffffc0000000000 RBX: ffff888015875000 RCX: 0000000000000000
[   16.912837] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   16.913086] RBP: ffff88802458fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   16.913336] R10: ffff88800aad88df R11: 5f6466756d6d6f69 R12: 0000000000000000
[   16.913585] R13: ffffffff85cc0180 R14: ffff88800bd79ea0 R15: ffffffff87070ae0
[   16.913835] FS:  00007f2c1083b600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   16.914117] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   16.914320] CR2: 0000000020000080 CR3: 00000000132a0000 CR4: 0000000000750ef0
[   16.914570] PKRU: 55555554
[   16.914673] Call Trace:
[   16.914769]  <TASK>
[   16.914851]  ? show_regs+0x6e/0x80
[   16.914984]  ? die_addr+0x45/0xb0
[   16.915113]  ? exc_general_protection+0x159/0x250
[   16.915291]  ? asm_exc_general_protection+0x2b/0x30
[   16.915471]  ? sysfs_remove_link_from_group+0x21/0x90
[   16.915655]  ? sysfs_remove_link_from_group+0x37/0x90
[   16.915840]  ? sysfs_remove_link_from_group+0x21/0x90
[   16.916024]  iommu_device_unlink+0x85/0xd0
[   16.916176]  iommu_deinit_device+0x11f/0x4c0
[   16.916336]  __iommu_group_remove_device+0x26b/0x300
[   16.916520]  iommu_group_remove_device+0x8a/0xb0
[   16.916691]  iommufd_test+0x1f1a/0x2d10
[   16.916833]  ? __pfx_lock_release+0x10/0x10
[   16.916988]  ? __pfx_lock_acquire+0x10/0x10
[   16.917144]  ? __pfx_iommufd_test+0x10/0x10
[   16.917298]  ? __sanitizer_cov_trace_const_cmp8+0x1c/0x30
[   16.917495]  iommufd_fops_ioctl+0x377/0x510
[   16.917651]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   16.917824]  ? trace_hardirqs_on+0x26/0x120
[   16.917981]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   16.918206]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   16.918386]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   16.918582]  ? security_file_ioctl+0x9d/0xd0
[   16.918745]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   16.918926]  __x64_sys_ioctl+0x1b9/0x230
[   16.919072]  do_syscall_64+0x3c/0x90
[   16.919205]  entry_SYSCALL_64_after_hwframe+0x6e/0xd8
[   16.919387] RIP: 0033:0x7f2c1063ee5d
[   16.919519] Code: ff c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d 93 af 1b 00 f7 d8 64 89 01 48
[   16.920153] RSP: 002b:00007ffcb8605648 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   16.920418] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f2c1063ee5d
[   16.920667] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   16.920916] RBP: 00007ffcb8605660 R08: 0000000000000800 R09: 0000000000000800
[   16.921164] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffcb8605778
[   16.921413] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f2c1087c000
[   16.921666]  </TASK>
[   16.921749] Modules linked in:
[   16.921899] ---[ end trace 0000000000000000 ]---
[   16.922069] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   16.922277] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   16.922949] RSP: 0018:ffff88802457fba8 EFLAGS: 00010206
[   16.923141] RAX: dffffc0000000000 RBX: ffff888014f9b000 RCX: 0000000000000000
[   16.923394] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   16.923649] RBP: ffff88802457fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   16.923898] R10: ffff88800aad88df R11: 0000000000000001 R12: 0000000000000000
[   16.924146] R13: ffffffff85cc0180 R14: ffff8880109b6ac0 R15: ffffffff87070ae0
[   16.924394] FS:  00007f2c1083b600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   16.924674] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   16.924877] CR2: 0000000020000080 CR3: 00000000132a0000 CR4: 0000000000750ef0
[   16.925127] PKRU: 55555554
[   16.925741] ------------[ cut here ]------------
[   16.925913] WARNING: CPU: 0 PID: 792 at drivers/iommu/iommufd/main.c:258 iommufd_fops_release+0x2a3/0x300
[   16.926255] Modules linked in:
[   16.926371] CPU: 0 PID: 792 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   16.926694] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   16.927101] RIP: 0010:iommufd_fops_release+0x2a3/0x300
[   16.927291] Code: 45 d0 65 48 2b 04 25 28 00 00 00 75 54 48 81 c4 88 00 00 00 31 c0 5b 41 5c 41 5d 41 5e 41 5f 5d c3 cc cc cc cc e8 ad 4f 0a fe <0f> 0b eb a6 e8 74 23 67 fe e9 f6 fe ff ff 48 89 85 50 ff ff ff e8
[   16.927937] RSP: 0018:ffff88802458fc00 EFLAGS: 00010293
[   16.928124] RAX: 0000000000000000 RBX: ffff88800fe06608 RCX: 0000000000000000
[   16.928373] RDX: ffff888014cd8000 RSI: ffffffff835563e3 RDI: ffffffff86702b40
[   16.928623] RBP: ffff88802458fcb0 R08: 0000000000000000 R09: fffffbfff0eb2644
[   16.928871] R10: ffffffff87593227 R11: ffff888011c50e00 R12: 0000000000000000
[   16.929120] R13: ffff888013551098 R14: ffff88802458fc48 R15: ffffffff83556140
[   16.929369] FS:  0000000000000000(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   16.929650] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   16.929854] CR2: 0000000020000080 CR3: 000000000687e000 CR4: 0000000000750ef0
[   16.930104] PKRU: 55555554
[   16.930204] Call Trace:
[   16.930295]  <TASK>
[   16.930375]  ? show_regs+0x6e/0x80
[   16.930505]  ? __warn+0xef/0x340
[   16.930718]  ? report_bug+0x25e/0x4b0
[   16.930862]  ? iommufd_fops_release+0x2a3/0x300
[   16.931033]  ? report_bug+0x2cb/0x4b0
[   16.931176]  ? handle_bug+0x46/0x90
[   16.931310]  ? exc_invalid_op+0x1d/0x50
[   16.931452]  ? asm_exc_invalid_op+0x1f/0x30
[   16.931605]  ? __pfx_iommufd_fops_release+0x10/0x10
[   16.931785]  ? iommufd_fops_release+0x2a3/0x300
[   16.931952]  ? iommufd_fops_release+0x2a3/0x300
[   16.932120]  ? __pfx_iommufd_fops_release+0x10/0x10
[   16.932297]  ? rcu_is_watching+0x19/0xc0
[   16.932444]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   16.932639]  ? __pfx_iommufd_fops_release+0x10/0x10
[   16.932816]  __fput+0x424/0xaf0
[   16.932940]  ____fput+0x1f/0x30
[   16.933061]  task_work_run+0x19d/0x2b0
[   16.933202]  ? __pfx_task_work_run+0x10/0x10
[   16.933359]  ? __sanitizer_cov_trace_const_cmp1+0x1e/0x30
[   16.933553]  ? switch_task_namespaces+0xa9/0xe0
[   16.933721]  do_exit+0xac9/0x2790
[   16.933847]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   16.934071]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   16.934250]  ? __pfx_do_exit+0x10/0x10
[   16.934390]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   16.934591]  ? security_file_ioctl+0x9d/0xd0
[   16.934756]  make_task_dead+0x182/0x3c0
[   16.934902]  rewind_stack_and_make_dead+0x17/0x20
[   16.935078] RIP: 0033:0x7f2c1063ee5d
[   16.935213] Code: Unable to access opcode bytes at 0x7f2c1063ee33.
[   16.935434] RSP: 002b:00007ffcb8605648 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   16.935801] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f2c1063ee5d
[   16.936054] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   16.936377] RBP: 00007ffcb8605660 R08: 0000000000000800 R09: 0000000000000800
[   16.936637] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffcb8605778
[   16.936945] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f2c1087c000
[   16.937249]  </TASK>
[   16.937335] irq event stamp: 0
[   16.937450] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   16.937736] hardirqs last disabled at (0): [<ffffffff8122f2d1>] copy_process+0x1c51/0x7140
[   16.938039] softirqs last  enabled at (0): [<ffffffff8122f312>] copy_process+0x1c92/0x7140
[   16.938388] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   16.938683] ---[ end trace 0000000000000000 ]---
[   16.943129] iommufd_mock iommufd_mock75: Adding to iommu group 75
[   16.943372] iommufd_mock iommufd_mock75: Removing from iommu group 75
[   16.943624] general protection fault, probably for non-canonical address 0xdffffc0000000006: 0000 [#76] PREEMPT SMP KASAN NOPTI
[   16.944038] KASAN: null-ptr-deref in range [0x0000000000000030-0x0000000000000037]
[   16.944341] CPU: 0 PID: 793 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   16.944651] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   16.945053] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   16.945266] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   16.945916] RSP: 0018:ffff888015b87ba8 EFLAGS: 00010206
[   16.946108] RAX: dffffc0000000000 RBX: ffff888014e1f000 RCX: 0000000000000000
[   16.946362] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   16.946618] RBP: ffff888015b87bc0 R08: 0000000000000001 R09: ffffed100155b11b
[   16.946880] R10: ffff88800aad88df R11: 5f6466756d6d6f69 R12: 0000000000000000
[   16.947136] R13: ffffffff85cc0180 R14: ffff88800bd79f20 R15: ffffffff87070ae0
[   16.947391] FS:  00007f1478a37600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   16.947679] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   16.947888] CR2: 0000000020000080 CR3: 0000000013756000 CR4: 0000000000750ef0
[   16.948144] PKRU: 55555554
[   16.948247] Call Trace:
[   16.948341]  <TASK>
[   16.948424]  ? show_regs+0x6e/0x80
[   16.948559]  ? die_addr+0x45/0xb0
[   16.948691]  ? exc_general_protection+0x159/0x250
[   16.948874]  ? asm_exc_general_protection+0x2b/0x30
[   16.949059]  ? sysfs_remove_link_from_group+0x21/0x90
[   16.949248]  ? sysfs_remove_link_from_group+0x37/0x90
[   16.949437]  ? sysfs_remove_link_from_group+0x21/0x90
[   16.949627]  iommu_device_unlink+0x85/0xd0
[   16.949782]  iommu_deinit_device+0x11f/0x4c0
[   16.949947]  __iommu_group_remove_device+0x26b/0x300
[   16.950136]  iommu_group_remove_device+0x8a/0xb0
[   16.950311]  iommufd_test+0x1f1a/0x2d10
[   16.950456]  ? __pfx_lock_release+0x10/0x10
[   16.950616]  ? __pfx_lock_acquire+0x10/0x10
[   16.950779]  ? __pfx_iommufd_test+0x10/0x10
[   16.950941]  ? __sanitizer_cov_trace_const_cmp8+0x1c/0x30
[   16.951143]  iommufd_fops_ioctl+0x377/0x510
[   16.951303]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   16.951480]  ? trace_hardirqs_on+0x26/0x120
[   16.951641]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   16.951872]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   16.952057]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   16.952258]  ? security_file_ioctl+0x9d/0xd0
[   16.952423]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   16.952600]  __x64_sys_ioctl+0x1b9/0x230
[   16.952749]  do_syscall_64+0x3c/0x90
[   16.952886]  entry_SYSCALL_64_after_hwframe+0x6e/0xd8
[   16.953073] RIP: 0033:0x7f147883ee5d
[   16.953210] Code: ff c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d 93 af 1b 00 f7 d8 64 89 01 48
[   16.953860] RSP: 002b:00007ffefa828568 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   16.954133] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f147883ee5d
[   16.954389] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   16.954644] RBP: 00007ffefa828580 R08: 0000000000000800 R09: 0000000000000800
[   16.954903] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffefa828698
[   16.955159] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f1478a78000
[   16.955419]  </TASK>
[   16.955504] Modules linked in:
[   16.955671] ---[ end trace 0000000000000000 ]---
[   16.955841] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   16.956051] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   16.956701] RSP: 0018:ffff88802457fba8 EFLAGS: 00010206
[   16.956892] RAX: dffffc0000000000 RBX: ffff888014f9b000 RCX: 0000000000000000
[   16.957146] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   16.957402] RBP: ffff88802457fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   16.957657] R10: ffff88800aad88df R11: 0000000000000001 R12: 0000000000000000
[   16.957912] R13: ffffffff85cc0180 R14: ffff8880109b6ac0 R15: ffffffff87070ae0
[   16.958167] FS:  00007f1478a37600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   16.958454] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   16.958688] CR2: 0000000020000080 CR3: 0000000013756000 CR4: 0000000000750ef0
[   16.958966] PKRU: 55555554
[   16.959390] ------------[ cut here ]------------
[   16.959641] WARNING: CPU: 0 PID: 793 at drivers/iommu/iommufd/main.c:258 iommufd_fops_release+0x2a3/0x300
[   16.959992] Modules linked in:
[   16.960168] CPU: 0 PID: 793 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   16.960484] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   16.960944] RIP: 0010:iommufd_fops_release+0x2a3/0x300
[   16.961197] Code: 45 d0 65 48 2b 04 25 28 00 00 00 75 54 48 81 c4 88 00 00 00 31 c0 5b 41 5c 41 5d 41 5e 41 5f 5d c3 cc cc cc cc e8 ad 4f 0a fe <0f> 0b eb a6 e8 74 23 67 fe e9 f6 fe ff ff 48 89 85 50 ff ff ff e8
[   16.961903] RSP: 0018:ffff888015b87c00 EFLAGS: 00010293
[   16.962094] RAX: 0000000000000000 RBX: ffff88800fe06008 RCX: 0000000000000000
[   16.962361] RDX: ffff88801475a500 RSI: ffffffff835563e3 RDI: ffffffff86702b40
[   16.962678] RBP: ffff888015b87cb0 R08: 0000000000000000 R09: fffffbfff0eb2644
[   16.962944] R10: ffffffff87593227 R11: ffff8880124ff000 R12: 0000000000000000
[   16.963205] R13: ffff888013550198 R14: ffff888015b87c48 R15: ffffffff83556140
[   16.963518] FS:  0000000000000000(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   16.963806] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   16.964075] CR2: 0000000020000080 CR3: 000000000687e000 CR4: 0000000000750ef0
[   16.964333] PKRU: 55555554
[   16.964435] Call Trace:
[   16.964545]  <TASK>
[   16.964672]  ? show_regs+0x6e/0x80
[   16.964806]  ? __warn+0xef/0x340
[   16.964933]  ? report_bug+0x25e/0x4b0
[   16.965075]  ? iommufd_fops_release+0x2a3/0x300
[   16.965306]  ? report_bug+0x2cb/0x4b0
[   16.965450]  ? handle_bug+0x46/0x90
[   16.965584]  ? exc_invalid_op+0x1d/0x50
[   16.965730]  ? asm_exc_invalid_op+0x1f/0x30
[   16.965911]  ? __pfx_iommufd_fops_release+0x10/0x10
[   16.966129]  ? iommufd_fops_release+0x2a3/0x300
[   16.966301]  ? iommufd_fops_release+0x2a3/0x300
[   16.966479]  ? __pfx_iommufd_fops_release+0x10/0x10
[   16.966811]  ? rcu_is_watching+0x19/0xc0
[   16.966966]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   16.967166]  ? __pfx_iommufd_fops_release+0x10/0x10
[   16.967349]  __fput+0x424/0xaf0
[   16.967476]  ____fput+0x1f/0x30
[   16.967599]  task_work_run+0x19d/0x2b0
[   16.967811]  ? __pfx_task_work_run+0x10/0x10
[   16.967973]  ? __sanitizer_cov_trace_const_cmp1+0x1e/0x30
[   16.968172]  ? switch_task_namespaces+0xa9/0xe0
[   16.968365]  do_exit+0xac9/0x2790
[   16.968534]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   16.968764]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   16.968959]  ? __pfx_do_exit+0x10/0x10
[   16.969144]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   16.969343]  ? security_file_ioctl+0x9d/0xd0
[   16.969508]  make_task_dead+0x182/0x3c0
[   16.969708]  rewind_stack_and_make_dead+0x17/0x20
[   16.969886] RIP: 0033:0x7f147883ee5d
[   16.970021] Code: Unable to access opcode bytes at 0x7f147883ee33.
[   16.970252] RSP: 002b:00007ffefa828568 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   16.970567] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f147883ee5d
[   16.970837] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   16.971142] RBP: 00007ffefa828580 R08: 0000000000000800 R09: 0000000000000800
[   16.971398] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffefa828698
[   16.971652] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f1478a78000
[   16.971927]  </TASK>
[   16.972057] irq event stamp: 0
[   16.972172] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   16.972399] hardirqs last disabled at (0): [<ffffffff8122f2d1>] copy_process+0x1c51/0x7140
[   16.972756] softirqs last  enabled at (0): [<ffffffff8122f312>] copy_process+0x1c92/0x7140
[   16.973053] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   16.973328] ---[ end trace 0000000000000000 ]---
[   16.976192] iommufd_mock iommufd_mock76: Adding to iommu group 76
[   16.976434] iommufd_mock iommufd_mock76: Removing from iommu group 76
[   16.976684] general protection fault, probably for non-canonical address 0xdffffc0000000006: 0000 [#77] PREEMPT SMP KASAN NOPTI
[   16.977105] KASAN: null-ptr-deref in range [0x0000000000000030-0x0000000000000037]
[   16.977404] CPU: 0 PID: 794 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   16.977715] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   16.978116] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   16.978329] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   16.978986] RSP: 0018:ffff88802458fba8 EFLAGS: 00010206
[   16.979178] RAX: dffffc0000000000 RBX: ffff888014e1a000 RCX: 0000000000000000
[   16.979433] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   16.979688] RBP: ffff88802458fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   16.979943] R10: ffff88800aad88df R11: 5f6466756d6d6f69 R12: 0000000000000000
[   16.980197] R13: ffffffff85cc0180 R14: ffff88800bd79ac0 R15: ffffffff87070ae0
[   16.980452] FS:  00007f8c597f0600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   16.980739] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   16.980947] CR2: 0000000020000080 CR3: 00000000132a0000 CR4: 0000000000750ef0
[   16.981203] PKRU: 55555554
[   16.981306] Call Trace:
[   16.981399]  <TASK>
[   16.981482]  ? show_regs+0x6e/0x80
[   16.981617]  ? die_addr+0x45/0xb0
[   16.981749]  ? exc_general_protection+0x159/0x250
[   16.981931]  ? asm_exc_general_protection+0x2b/0x30
[   16.982115]  ? sysfs_remove_link_from_group+0x21/0x90
[   16.982304]  ? sysfs_remove_link_from_group+0x37/0x90
[   16.982492]  ? sysfs_remove_link_from_group+0x21/0x90
[   16.982681]  iommu_device_unlink+0x85/0xd0
[   16.982839]  iommu_deinit_device+0x11f/0x4c0
[   16.983005]  __iommu_group_remove_device+0x26b/0x300
[   16.983194]  iommu_group_remove_device+0x8a/0xb0
[   16.983369]  iommufd_test+0x1f1a/0x2d10
[   16.983514]  ? __pfx_lock_release+0x10/0x10
[   16.983672]  ? __pfx_lock_acquire+0x10/0x10
[   16.983832]  ? __pfx_iommufd_test+0x10/0x10
[   16.983990]  ? __sanitizer_cov_trace_const_cmp8+0x1c/0x30
[   16.984192]  iommufd_fops_ioctl+0x377/0x510
[   16.984352]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   16.984528]  ? trace_hardirqs_on+0x26/0x120
[   16.984689]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   16.984919]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   16.985104]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   16.985304]  ? security_file_ioctl+0x9d/0xd0
[   16.985469]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   16.985646]  __x64_sys_ioctl+0x1b9/0x230
[   16.985794]  do_syscall_64+0x3c/0x90
[   16.985930]  entry_SYSCALL_64_after_hwframe+0x6e/0xd8
[   16.986117] RIP: 0033:0x7f8c5943ee5d
[   16.986252] Code: ff c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d 93 af 1b 00 f7 d8 64 89 01 48
[   16.986903] RSP: 002b:00007ffd8aaf6738 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   16.987174] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f8c5943ee5d
[   16.987428] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   16.987682] RBP: 00007ffd8aaf6750 R08: 0000000000000800 R09: 0000000000000800
[   16.987936] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffd8aaf6868
[   16.988190] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f8c59831000
[   16.988449]  </TASK>
[   16.988534] Modules linked in:
[   16.988717] ---[ end trace 0000000000000000 ]---
[   16.988887] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   16.989097] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   16.989745] RSP: 0018:ffff88802457fba8 EFLAGS: 00010206
[   16.989935] RAX: dffffc0000000000 RBX: ffff888014f9b000 RCX: 0000000000000000
[   16.990189] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   16.990522] RBP: ffff88802457fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   16.990790] R10: ffff88800aad88df R11: 0000000000000001 R12: 0000000000000000
[   16.991047] R13: ffffffff85cc0180 R14: ffff8880109b6ac0 R15: ffffffff87070ae0
[   16.991370] FS:  00007f8c597f0600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   16.991659] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   16.991893] CR2: 0000000020000080 CR3: 00000000132a0000 CR4: 0000000000750ef0
[   16.992189] PKRU: 55555554
[   16.992592] ------------[ cut here ]------------
[   16.992762] WARNING: CPU: 0 PID: 794 at drivers/iommu/iommufd/main.c:258 iommufd_fops_release+0x2a3/0x300
[   16.993114] Modules linked in:
[   16.993288] CPU: 0 PID: 794 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   16.993599] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   16.994060] RIP: 0010:iommufd_fops_release+0x2a3/0x300
[   16.994252] Code: 45 d0 65 48 2b 04 25 28 00 00 00 75 54 48 81 c4 88 00 00 00 31 c0 5b 41 5c 41 5d 41 5e 41 5f 5d c3 cc cc cc cc e8 ad 4f 0a fe <0f> 0b eb a6 e8 74 23 67 fe e9 f6 fe ff ff 48 89 85 50 ff ff ff e8
[   16.994983] RSP: 0018:ffff88802458fc00 EFLAGS: 00010293
[   16.995174] RAX: 0000000000000000 RBX: ffff88800fe06b08 RCX: 0000000000000000
[   16.995488] RDX: ffff888014758000 RSI: ffffffff835563e3 RDI: ffffffff86702b40
[   16.995743] RBP: ffff88802458fcb0 R08: 0000000000000000 R09: fffffbfff0eb2644
[   16.996019] R10: ffffffff87593227 R11: ffff888013a41c00 R12: 0000000000000000
[   16.996315] R13: ffff88801279c698 R14: ffff88802458fc48 R15: ffffffff83556140
[   16.996575] FS:  0000000000000000(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   16.996915] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   16.997124] CR2: 0000000020000080 CR3: 000000000687e000 CR4: 0000000000750ef0
[   16.997439] PKRU: 55555554
[   16.997542] Call Trace:
[   16.997636]  <TASK>
[   16.997718]  ? show_regs+0x6e/0x80
[   16.997851]  ? __warn+0xef/0x340
[   16.998027]  ? report_bug+0x25e/0x4b0
[   16.998169]  ? iommufd_fops_release+0x2a3/0x300
[   16.998339]  ? report_bug+0x2cb/0x4b0
[   16.998482]  ? handle_bug+0x46/0x90
[   16.998683]  ? exc_invalid_op+0x1d/0x50
[   16.998836]  ? asm_exc_invalid_op+0x1f/0x30
[   16.998994]  ? __pfx_iommufd_fops_release+0x10/0x10
[   16.999178]  ? iommufd_fops_release+0x2a3/0x300
[   16.999348]  ? iommufd_fops_release+0x2a3/0x300
[   16.999528]  ? __pfx_iommufd_fops_release+0x10/0x10
[   16.999749]  ? rcu_is_watching+0x19/0xc0
[   16.999900]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   17.000100]  ? __pfx_iommufd_fops_release+0x10/0x10
[   17.000341]  __fput+0x424/0xaf0
[   17.000469]  ____fput+0x1f/0x30
[   17.000592]  task_work_run+0x19d/0x2b0
[   17.000737]  ? __pfx_task_work_run+0x10/0x10
[   17.000960]  ? __sanitizer_cov_trace_const_cmp1+0x1e/0x30
[   17.001159]  ? switch_task_namespaces+0xa9/0xe0
[   17.001331]  do_exit+0xac9/0x2790
[   17.001470]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   17.001752]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   17.001935]  ? __pfx_do_exit+0x10/0x10
[   17.002077]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   17.002338]  ? security_file_ioctl+0x9d/0xd0
[   17.002502]  make_task_dead+0x182/0x3c0
[   17.002657]  rewind_stack_and_make_dead+0x17/0x20
[   17.002839] RIP: 0033:0x7f8c5943ee5d
[   17.002976] Code: Unable to access opcode bytes at 0x7f8c5943ee33.
[   17.003196] RSP: 002b:00007ffd8aaf6738 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   17.003536] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f8c5943ee5d
[   17.003791] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   17.004113] RBP: 00007ffd8aaf6750 R08: 0000000000000800 R09: 0000000000000800
[   17.004368] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffd8aaf6868
[   17.004687] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f8c59831000
[   17.004947]  </TASK>
[   17.005032] irq event stamp: 0
[   17.005147] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   17.005436] hardirqs last disabled at (0): [<ffffffff8122f2d1>] copy_process+0x1c51/0x7140
[   17.005732] softirqs last  enabled at (0): [<ffffffff8122f312>] copy_process+0x1c92/0x7140
[   17.006082] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   17.006308] ---[ end trace 0000000000000000 ]---
[   17.009196] iommufd_mock iommufd_mock77: Adding to iommu group 77
[   17.009438] iommufd_mock iommufd_mock77: Removing from iommu group 77
[   17.009689] general protection fault, probably for non-canonical address 0xdffffc0000000006: 0000 [#78] PREEMPT SMP KASAN NOPTI
[   17.010138] KASAN: null-ptr-deref in range [0x0000000000000030-0x0000000000000037]
[   17.010408] CPU: 0 PID: 795 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   17.010720] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   17.011130] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   17.011344] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   17.011992] RSP: 0018:ffff8880116bfba8 EFLAGS: 00010206
[   17.012184] RAX: dffffc0000000000 RBX: ffff888014415000 RCX: 0000000000000000
[   17.012438] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   17.012693] RBP: ffff8880116bfbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   17.012948] R10: ffff88800aad88df R11: 5f6466756d6d6f69 R12: 0000000000000000
[   17.013202] R13: ffffffff85cc0180 R14: ffff88800bd79c20 R15: ffffffff87070ae0
[   17.013457] FS:  00007f78bd9dd600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   17.013745] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   17.013953] CR2: 0000000020000080 CR3: 0000000013756000 CR4: 0000000000750ef0
[   17.014210] PKRU: 55555554
[   17.014313] Call Trace:
[   17.014407]  <TASK>
[   17.014489]  ? show_regs+0x6e/0x80
[   17.014624]  ? die_addr+0x45/0xb0
[   17.014758]  ? exc_general_protection+0x159/0x250
[   17.014943]  ? asm_exc_general_protection+0x2b/0x30
[   17.015127]  ? sysfs_remove_link_from_group+0x21/0x90
[   17.015316]  ? sysfs_remove_link_from_group+0x37/0x90
[   17.015505]  ? sysfs_remove_link_from_group+0x21/0x90
[   17.015693]  iommu_device_unlink+0x85/0xd0
[   17.015848]  iommu_deinit_device+0x11f/0x4c0
[   17.016012]  __iommu_group_remove_device+0x26b/0x300
[   17.016200]  iommu_group_remove_device+0x8a/0xb0
[   17.016375]  iommufd_test+0x1f1a/0x2d10
[   17.016519]  ? __pfx_lock_release+0x10/0x10
[   17.016678]  ? __pfx_lock_acquire+0x10/0x10
[   17.016837]  ? __pfx_iommufd_test+0x10/0x10
[   17.016995]  ? __sanitizer_cov_trace_const_cmp8+0x1c/0x30
[   17.017197]  iommufd_fops_ioctl+0x377/0x510
[   17.017356]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   17.017533]  ? trace_hardirqs_on+0x26/0x120
[   17.017694]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   17.017923]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   17.018109]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   17.018308]  ? security_file_ioctl+0x9d/0xd0
[   17.018473]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   17.018650]  __x64_sys_ioctl+0x1b9/0x230
[   17.018802]  do_syscall_64+0x3c/0x90
[   17.018941]  entry_SYSCALL_64_after_hwframe+0x6e/0xd8
[   17.019128] RIP: 0033:0x7f78bd63ee5d
[   17.019263] Code: ff c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d 93 af 1b 00 f7 d8 64 89 01 48
[   17.019911] RSP: 002b:00007fff5b596768 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   17.020184] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f78bd63ee5d
[   17.020436] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   17.020690] RBP: 00007fff5b596780 R08: 0000000000000800 R09: 0000000000000800
[   17.020943] R10: 0000000000000000 R11: 0000000000000213 R12: 00007fff5b596898
[   17.021195] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f78bda1e000
[   17.021452]  </TASK>
[   17.021536] Modules linked in:
[   17.021729] ---[ end trace 0000000000000000 ]---
[   17.021898] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   17.022106] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   17.022787] RSP: 0018:ffff88802457fba8 EFLAGS: 00010206
[   17.022982] RAX: dffffc0000000000 RBX: ffff888014f9b000 RCX: 0000000000000000
[   17.023235] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   17.023561] RBP: ffff88802457fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   17.023815] R10: ffff88800aad88df R11: 0000000000000001 R12: 0000000000000000
[   17.024077] R13: ffffffff85cc0180 R14: ffff8880109b6ac0 R15: ffffffff87070ae0
[   17.024385] FS:  00007f78bd9dd600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   17.024670] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   17.024940] CR2: 0000000020000080 CR3: 0000000013756000 CR4: 0000000000750ef0
[   17.025195] PKRU: 55555554
[   17.026976] ------------[ cut here ]------------
[   17.027152] WARNING: CPU: 0 PID: 795 at drivers/iommu/iommufd/main.c:258 iommufd_fops_release+0x2a3/0x300
[   17.027505] Modules linked in:
[   17.027697] CPU: 0 PID: 795 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   17.028009] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   17.028465] RIP: 0010:iommufd_fops_release+0x2a3/0x300
[   17.028655] Code: 45 d0 65 48 2b 04 25 28 00 00 00 75 54 48 81 c4 88 00 00 00 31 c0 5b 41 5c 41 5d 41 5e 41 5f 5d c3 cc cc cc cc e8 ad 4f 0a fe <0f> 0b eb a6 e8 74 23 67 fe e9 f6 fe ff ff 48 89 85 50 ff ff ff e8
[   17.029371] RSP: 0018:ffff8880116bfc00 EFLAGS: 00010293
[   17.029623] RAX: 0000000000000000 RBX: ffff88800fe06208 RCX: 0000000000000000
[   17.029876] RDX: ffff888012c34a00 RSI: ffffffff835563e3 RDI: ffffffff86702b40
[   17.030130] RBP: ffff8880116bfcb0 R08: 0000000000000000 R09: fffffbfff0eb2644
[   17.030441] R10: ffffffff87593227 R11: ffff88801940b600 R12: 0000000000000000
[   17.030824] R13: ffff8880117cdd18 R14: ffff8880116bfc48 R15: ffffffff83556140
[   17.031089] FS:  0000000000000000(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   17.031381] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   17.031640] CR2: 0000557ca0dbe1f8 CR3: 000000000687e000 CR4: 0000000000750ef0
[   17.031895] PKRU: 55555554
[   17.031997] Call Trace:
[   17.032109]  <TASK>
[   17.032233]  ? show_regs+0x6e/0x80
[   17.032366]  ? __warn+0xef/0x340
[   17.032491]  ? report_bug+0x25e/0x4b0
[   17.032631]  ? iommufd_fops_release+0x2a3/0x300
[   17.032859]  ? report_bug+0x2cb/0x4b0
[   17.033002]  ? handle_bug+0x46/0x90
[   17.033135]  ? exc_invalid_op+0x1d/0x50
[   17.033279]  ? asm_exc_invalid_op+0x1f/0x30
[   17.033493]  ? __pfx_iommufd_fops_release+0x10/0x10
[   17.033675]  ? iommufd_fops_release+0x2a3/0x300
[   17.033845]  ? iommufd_fops_release+0x2a3/0x300
[   17.034029]  ? __pfx_iommufd_fops_release+0x10/0x10
[   17.034273]  ? rcu_is_watching+0x19/0xc0
[   17.034423]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   17.034630]  ? __pfx_iommufd_fops_release+0x10/0x10
[   17.034818]  __fput+0x424/0xaf0
[   17.034953]  ____fput+0x1f/0x30
[   17.035078]  task_work_run+0x19d/0x2b0
[   17.035286]  ? __pfx_task_work_run+0x10/0x10
[   17.035447]  ? __sanitizer_cov_trace_const_cmp1+0x1e/0x30
[   17.035644]  ? switch_task_namespaces+0xa9/0xe0
[   17.035838]  do_exit+0xac9/0x2790
[   17.035997]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   17.036225]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   17.036413]  ? __pfx_do_exit+0x10/0x10
[   17.036609]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   17.036807]  ? security_file_ioctl+0x9d/0xd0
[   17.036970]  make_task_dead+0x182/0x3c0
[   17.037137]  rewind_stack_and_make_dead+0x17/0x20
[   17.037343] RIP: 0033:0x7f78bd63ee5d
[   17.037479] Code: Unable to access opcode bytes at 0x7f78bd63ee33.
[   17.037701] RSP: 002b:00007fff5b596768 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   17.038023] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f78bd63ee5d
[   17.038277] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   17.038534] RBP: 00007fff5b596780 R08: 0000000000000800 R09: 0000000000000800
[   17.038862] R10: 0000000000000000 R11: 0000000000000213 R12: 00007fff5b596898
[   17.039119] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f78bda1e000
[   17.039377]  </TASK>
[   17.039462] irq event stamp: 0
[   17.039581] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   17.039864] hardirqs last disabled at (0): [<ffffffff8122f2d1>] copy_process+0x1c51/0x7140
[   17.040159] softirqs last  enabled at (0): [<ffffffff8122f312>] copy_process+0x1c92/0x7140
[   17.040515] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   17.040739] ---[ end trace 0000000000000000 ]---
[   17.043827] iommufd_mock iommufd_mock78: Adding to iommu group 78
[   17.044152] iommufd_mock iommufd_mock78: Removing from iommu group 78
[   17.044429] general protection fault, probably for non-canonical address 0xdffffc0000000006: 0000 [#79] PREEMPT SMP KASAN NOPTI
[   17.044839] KASAN: null-ptr-deref in range [0x0000000000000030-0x0000000000000037]
[   17.045120] CPU: 0 PID: 796 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   17.045470] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   17.045883] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   17.046099] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   17.046763] RSP: 0018:ffff88802458fba8 EFLAGS: 00010206
[   17.046957] RAX: dffffc0000000000 RBX: ffff888014417000 RCX: 0000000000000000
[   17.047216] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   17.047474] RBP: ffff88802458fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   17.047730] R10: ffff88800aad88df R11: 5f6466756d6d6f69 R12: 0000000000000000
[   17.047985] R13: ffffffff85cc0180 R14: ffff88800bd79d40 R15: ffffffff87070ae0
[   17.048238] FS:  00007fda0e63f600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   17.048531] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   17.048738] CR2: 0000000020000080 CR3: 00000000132a0000 CR4: 0000000000750ef0
[   17.048992] PKRU: 55555554
[   17.049094] Call Trace:
[   17.049186]  <TASK>
[   17.049268]  ? show_regs+0x6e/0x80
[   17.049402]  ? die_addr+0x45/0xb0
[   17.049540]  ? exc_general_protection+0x159/0x250
[   17.049725]  ? asm_exc_general_protection+0x2b/0x30
[   17.049909]  ? sysfs_remove_link_from_group+0x21/0x90
[   17.050097]  ? sysfs_remove_link_from_group+0x37/0x90
[   17.050285]  ? sysfs_remove_link_from_group+0x21/0x90
[   17.050472]  iommu_device_unlink+0x85/0xd0
[   17.050630]  iommu_deinit_device+0x11f/0x4c0
[   17.050799]  __iommu_group_remove_device+0x26b/0x300
[   17.050989]  iommu_group_remove_device+0x8a/0xb0
[   17.051164]  iommufd_test+0x1f1a/0x2d10
[   17.051308]  ? __pfx_lock_release+0x10/0x10
[   17.051465]  ? __pfx_lock_acquire+0x10/0x10
[   17.051624]  ? __pfx_iommufd_test+0x10/0x10
[   17.051781]  ? __sanitizer_cov_trace_const_cmp8+0x1c/0x30
[   17.051982]  iommufd_fops_ioctl+0x377/0x510
[   17.052140]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   17.052316]  ? trace_hardirqs_on+0x26/0x120
[   17.052476]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   17.052705]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   17.052891]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   17.053093]  ? security_file_ioctl+0x9d/0xd0
[   17.053256]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   17.053432]  __x64_sys_ioctl+0x1b9/0x230
[   17.053580]  do_syscall_64+0x3c/0x90
[   17.053715]  entry_SYSCALL_64_after_hwframe+0x6e/0xd8
[   17.053901] RIP: 0033:0x7fda0e43ee5d
[   17.054036] Code: ff c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d 93 af 1b 00 f7 d8 64 89 01 48
[   17.054680] RSP: 002b:00007fff884fff58 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   17.054959] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007fda0e43ee5d
[   17.055212] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   17.055465] RBP: 00007fff884fff70 R08: 0000000000000800 R09: 0000000000000800
[   17.055718] R10: 0000000000000000 R11: 0000000000000213 R12: 00007fff88500088
[   17.055971] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007fda0e680000
[   17.056229]  </TASK>
[   17.056313] Modules linked in:
[   17.056585] ---[ end trace 0000000000000000 ]---
[   17.056754] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   17.056963] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   17.057607] RSP: 0018:ffff88802457fba8 EFLAGS: 00010206
[   17.057797] RAX: dffffc0000000000 RBX: ffff888014f9b000 RCX: 0000000000000000
[   17.058049] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   17.058374] RBP: ffff88802457fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   17.058636] R10: ffff88800aad88df R11: 0000000000000001 R12: 0000000000000000
[   17.058897] R13: ffffffff85cc0180 R14: ffff8880109b6ac0 R15: ffffffff87070ae0
[   17.059200] FS:  00007fda0e63f600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   17.059486] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   17.059714] CR2: 0000000020000080 CR3: 00000000132a0000 CR4: 0000000000750ef0
[   17.060009] PKRU: 55555554
[   17.060406] ------------[ cut here ]------------
[   17.060575] WARNING: CPU: 0 PID: 796 at drivers/iommu/iommufd/main.c:258 iommufd_fops_release+0x2a3/0x300
[   17.060924] Modules linked in:
[   17.061091] CPU: 0 PID: 796 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   17.061400] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   17.061866] RIP: 0010:iommufd_fops_release+0x2a3/0x300
[   17.062056] Code: 45 d0 65 48 2b 04 25 28 00 00 00 75 54 48 81 c4 88 00 00 00 31 c0 5b 41 5c 41 5d 41 5e 41 5f 5d c3 cc cc cc cc e8 ad 4f 0a fe <0f> 0b eb a6 e8 74 23 67 fe e9 f6 fe ff ff 48 89 85 50 ff ff ff e8
[   17.062793] RSP: 0018:ffff88802458fc00 EFLAGS: 00010293
[   17.062988] RAX: 0000000000000000 RBX: ffff88800fe06f08 RCX: 0000000000000000
[   17.063309] RDX: ffff88800fadca00 RSI: ffffffff835563e3 RDI: ffffffff86702b40
[   17.063562] RBP: ffff88802458fcb0 R08: 0000000000000000 R09: fffffbfff0eb2644
[   17.063814] R10: ffffffff87593227 R11: ffff88800f509000 R12: 0000000000000000
[   17.064135] R13: ffff88801301cb98 R14: ffff88802458fc48 R15: ffffffff83556140
[   17.064389] FS:  0000000000000000(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   17.064750] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   17.064958] CR2: 0000000020000080 CR3: 000000000687e000 CR4: 0000000000750ef0
[   17.065232] PKRU: 55555554
[   17.065377] Call Trace:
[   17.065470]  <TASK>
[   17.065552]  ? show_regs+0x6e/0x80
[   17.065684]  ? __warn+0xef/0x340
[   17.065814]  ? report_bug+0x25e/0x4b0
[   17.066016]  ? iommufd_fops_release+0x2a3/0x300
[   17.066186]  ? report_bug+0x2cb/0x4b0
[   17.066329]  ? handle_bug+0x46/0x90
[   17.066462]  ? exc_invalid_op+0x1d/0x50
[   17.066668]  ? asm_exc_invalid_op+0x1f/0x30
[   17.066831]  ? __pfx_iommufd_fops_release+0x10/0x10
[   17.067016]  ? iommufd_fops_release+0x2a3/0x300
[   17.067186]  ? iommufd_fops_release+0x2a3/0x300
[   17.067357]  ? __pfx_iommufd_fops_release+0x10/0x10
[   17.067543]  ? rcu_is_watching+0x19/0xc0
[   17.067749]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   17.067948]  ? __pfx_iommufd_fops_release+0x10/0x10
[   17.068128]  __fput+0x424/0xaf0
[   17.068322]  ____fput+0x1f/0x30
[   17.068445]  task_work_run+0x19d/0x2b0
[   17.068588]  ? __pfx_task_work_run+0x10/0x10
[   17.068747]  ? __sanitizer_cov_trace_const_cmp1+0x1e/0x30
[   17.069007]  ? switch_task_namespaces+0xa9/0xe0
[   17.069178]  do_exit+0xac9/0x2790
[   17.069305]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   17.069600]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   17.069783]  ? __pfx_do_exit+0x10/0x10
[   17.069924]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   17.070131]  ? security_file_ioctl+0x9d/0xd0
[   17.070337]  make_task_dead+0x182/0x3c0
[   17.070484]  rewind_stack_and_make_dead+0x17/0x20
[   17.070668] RIP: 0033:0x7fda0e43ee5d
[   17.070814] Code: Unable to access opcode bytes at 0x7fda0e43ee33.
[   17.071037] RSP: 002b:00007fff884fff58 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   17.071382] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007fda0e43ee5d
[   17.071636] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   17.071898] RBP: 00007fff884fff70 R08: 0000000000000800 R09: 0000000000000800
[   17.072215] R10: 0000000000000000 R11: 0000000000000213 R12: 00007fff88500088
[   17.072469] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007fda0e680000
[   17.072798]  </TASK>
[   17.072884] irq event stamp: 0
[   17.072998] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   17.073244] hardirqs last disabled at (0): [<ffffffff8122f2d1>] copy_process+0x1c51/0x7140
[   17.073584] softirqs last  enabled at (0): [<ffffffff8122f312>] copy_process+0x1c92/0x7140
[   17.073896] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   17.074166] ---[ end trace 0000000000000000 ]---
[   17.077233] iommufd_mock iommufd_mock79: Adding to iommu group 79
[   17.077479] iommufd_mock iommufd_mock79: Removing from iommu group 79
[   17.077728] general protection fault, probably for non-canonical address 0xdffffc0000000006: 0000 [#80] PREEMPT SMP KASAN NOPTI
[   17.078168] KASAN: null-ptr-deref in range [0x0000000000000030-0x0000000000000037]
[   17.078436] CPU: 0 PID: 797 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   17.078751] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   17.079164] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   17.079376] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   17.080020] RSP: 0018:ffff888023187ba8 EFLAGS: 00010206
[   17.080210] RAX: dffffc0000000000 RBX: ffff888014416000 RCX: 0000000000000000
[   17.080463] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   17.080716] RBP: ffff888023187bc0 R08: 0000000000000001 R09: ffffed100155b11b
[   17.080969] R10: ffff88800aad88df R11: 5f6466756d6d6f69 R12: 0000000000000000
[   17.081222] R13: ffffffff85cc0180 R14: ffff88800bd792a0 R15: ffffffff87070ae0
[   17.081476] FS:  00007fa5caee8600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   17.081761] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   17.081968] CR2: 0000000020000080 CR3: 0000000013756000 CR4: 0000000000750ef0
[   17.082223] PKRU: 55555554
[   17.082325] Call Trace:
[   17.082417]  <TASK>
[   17.082500]  ? show_regs+0x6e/0x80
[   17.082634]  ? die_addr+0x45/0xb0
[   17.082768]  ? exc_general_protection+0x159/0x250
[   17.082967]  ? asm_exc_general_protection+0x2b/0x30
[   17.083151]  ? sysfs_remove_link_from_group+0x21/0x90
[   17.083338]  ? sysfs_remove_link_from_group+0x37/0x90
[   17.083525]  ? sysfs_remove_link_from_group+0x21/0x90
[   17.083713]  iommu_device_unlink+0x85/0xd0
[   17.083867]  iommu_deinit_device+0x11f/0x4c0
[   17.084031]  __iommu_group_remove_device+0x26b/0x300
[   17.084218]  iommu_group_remove_device+0x8a/0xb0
[   17.084392]  iommufd_test+0x1f1a/0x2d10
[   17.084535]  ? __pfx_lock_release+0x10/0x10
[   17.084693]  ? __pfx_lock_acquire+0x10/0x10
[   17.084852]  ? __pfx_iommufd_test+0x10/0x10
[   17.085009]  ? __sanitizer_cov_trace_const_cmp8+0x1c/0x30
[   17.085210]  iommufd_fops_ioctl+0x377/0x510
[   17.085369]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   17.085545]  ? trace_hardirqs_on+0x26/0x120
[   17.085704]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   17.085933]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   17.086117]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   17.086316]  ? security_file_ioctl+0x9d/0xd0
[   17.086479]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   17.086655]  __x64_sys_ioctl+0x1b9/0x230
[   17.086808]  do_syscall_64+0x3c/0x90
[   17.086948]  entry_SYSCALL_64_after_hwframe+0x6e/0xd8
[   17.087134] RIP: 0033:0x7fa5cac3ee5d
[   17.087269] Code: ff c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d 93 af 1b 00 f7 d8 64 89 01 48
[   17.087912] RSP: 002b:00007ffd76df1e78 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   17.088182] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007fa5cac3ee5d
[   17.088434] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   17.088687] RBP: 00007ffd76df1e90 R08: 0000000000000800 R09: 0000000000000800
[   17.088939] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffd76df1fa8
[   17.089192] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007fa5caf29000
[   17.089450]  </TASK>
[   17.089534] Modules linked in:
[   17.089772] ---[ end trace 0000000000000000 ]---
[   17.089943] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   17.090152] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   17.090814] RSP: 0018:ffff88802457fba8 EFLAGS: 00010206
[   17.091007] RAX: dffffc0000000000 RBX: ffff888014f9b000 RCX: 0000000000000000
[   17.091260] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   17.091590] RBP: ffff88802457fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   17.091845] R10: ffff88800aad88df R11: 0000000000000001 R12: 0000000000000000
[   17.092102] R13: ffffffff85cc0180 R14: ffff8880109b6ac0 R15: ffffffff87070ae0
[   17.092416] FS:  00007fa5caee8600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   17.092702] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   17.092973] CR2: 0000000020000080 CR3: 0000000013756000 CR4: 0000000000750ef0
[   17.093227] PKRU: 55555554
[   17.093623] ------------[ cut here ]------------
[   17.093792] WARNING: CPU: 0 PID: 797 at drivers/iommu/iommufd/main.c:258 iommufd_fops_release+0x2a3/0x300
[   17.094191] Modules linked in:
[   17.094308] CPU: 0 PID: 797 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   17.094628] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   17.095055] RIP: 0010:iommufd_fops_release+0x2a3/0x300
[   17.095293] Code: 45 d0 65 48 2b 04 25 28 00 00 00 75 54 48 81 c4 88 00 00 00 31 c0 5b 41 5c 41 5d 41 5e 41 5f 5d c3 cc cc cc cc e8 ad 4f 0a fe <0f> 0b eb a6 e8 74 23 67 fe e9 f6 fe ff ff 48 89 85 50 ff ff ff e8
[   17.095989] RSP: 0018:ffff888023187c00 EFLAGS: 00010293
[   17.096180] RAX: 0000000000000000 RBX: ffff88800fe06908 RCX: 0000000000000000
[   17.096494] RDX: ffff88800fada500 RSI: ffffffff835563e3 RDI: ffffffff86702b40
[   17.096747] RBP: ffff888023187cb0 R08: 0000000000000000 R09: fffffbfff0eb2644
[   17.097012] R10: ffffffff87593227 R11: ffff888023173e00 R12: 0000000000000000
[   17.097308] R13: ffff88800f5cae18 R14: ffff888023187c48 R15: ffffffff83556140
[   17.097565] FS:  0000000000000000(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   17.097908] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   17.098115] CR2: 0000000020000080 CR3: 000000000687e000 CR4: 0000000000750ef0
[   17.098429] PKRU: 55555554
[   17.098531] Call Trace:
[   17.098634]  <TASK>
[   17.098716]  ? show_regs+0x6e/0x80
[   17.098857]  ? __warn+0xef/0x340
[   17.098986]  ? report_bug+0x25e/0x4b0
[   17.099127]  ? iommufd_fops_release+0x2a3/0x300
[   17.099306]  ? report_bug+0x2cb/0x4b0
[   17.099489]  ? handle_bug+0x46/0x90
[   17.099623]  ? exc_invalid_op+0x1d/0x50
[   17.099767]  ? asm_exc_invalid_op+0x1f/0x30
[   17.099932]  ? __pfx_iommufd_fops_release+0x10/0x10
[   17.100167]  ? iommufd_fops_release+0x2a3/0x300
[   17.100337]  ? iommufd_fops_release+0x2a3/0x300
[   17.100508]  ? __pfx_iommufd_fops_release+0x10/0x10
[   17.100749]  ? rcu_is_watching+0x19/0xc0
[   17.100900]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   17.101098]  ? __pfx_iommufd_fops_release+0x10/0x10
[   17.101342]  __fput+0x424/0xaf0
[   17.101469]  ____fput+0x1f/0x30
[   17.101592]  task_work_run+0x19d/0x2b0
[   17.101735]  ? __pfx_task_work_run+0x10/0x10
[   17.101905]  ? __sanitizer_cov_trace_const_cmp1+0x1e/0x30
[   17.102146]  ? switch_task_namespaces+0xa9/0xe0
[   17.102317]  do_exit+0xac9/0x2790
[   17.102444]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   17.102731]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   17.102925]  ? __pfx_do_exit+0x10/0x10
[   17.103067]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   17.103264]  ? security_file_ioctl+0x9d/0xd0
[   17.103427]  make_task_dead+0x182/0x3c0
[   17.103573]  rewind_stack_and_make_dead+0x17/0x20
[   17.103808] RIP: 0033:0x7fa5cac3ee5d
[   17.103942] Code: Unable to access opcode bytes at 0x7fa5cac3ee33.
[   17.104161] RSP: 002b:00007ffd76df1e78 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   17.104495] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007fa5cac3ee5d
[   17.104749] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   17.105061] RBP: 00007ffd76df1e90 R08: 0000000000000800 R09: 0000000000000800
[   17.105315] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffd76df1fa8
[   17.105575] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007fa5caf29000
[   17.105886]  </TASK>
[   17.105971] irq event stamp: 0
[   17.106086] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   17.106371] hardirqs last disabled at (0): [<ffffffff8122f2d1>] copy_process+0x1c51/0x7140
[   17.106675] softirqs last  enabled at (0): [<ffffffff8122f312>] copy_process+0x1c92/0x7140
[   17.106979] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   17.107211] ---[ end trace 0000000000000000 ]---
[   17.110098] iommufd_mock iommufd_mock80: Adding to iommu group 80
[   17.110340] iommufd_mock iommufd_mock80: Removing from iommu group 80
[   17.110622] general protection fault, probably for non-canonical address 0xdffffc0000000006: 0000 [#81] PREEMPT SMP KASAN NOPTI
[   17.111040] KASAN: null-ptr-deref in range [0x0000000000000030-0x0000000000000037]
[   17.111309] CPU: 0 PID: 798 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   17.111617] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   17.112064] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   17.112275] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   17.112921] RSP: 0018:ffff8880116bfba8 EFLAGS: 00010206
[   17.113111] RAX: dffffc0000000000 RBX: ffff88800bc43000 RCX: 0000000000000000
[   17.113365] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   17.113618] RBP: ffff8880116bfbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   17.113872] R10: ffff88800aad88df R11: 5f6466756d6d6f69 R12: 0000000000000000
[   17.114125] R13: ffffffff85cc0180 R14: ffff88800bd795a0 R15: ffffffff87070ae0
[   17.114379] FS:  00007fb36652d600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   17.114667] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   17.114888] CR2: 0000000020000080 CR3: 0000000012646000 CR4: 0000000000750ef0
[   17.115142] PKRU: 55555554
[   17.115244] Call Trace:
[   17.115337]  <TASK>
[   17.115419]  ? show_regs+0x6e/0x80
[   17.115553]  ? die_addr+0x45/0xb0
[   17.115684]  ? exc_general_protection+0x159/0x250
[   17.115866]  ? asm_exc_general_protection+0x2b/0x30
[   17.116049]  ? sysfs_remove_link_from_group+0x21/0x90
[   17.116237]  ? sysfs_remove_link_from_group+0x37/0x90
[   17.116425]  ? sysfs_remove_link_from_group+0x21/0x90
[   17.116612]  iommu_device_unlink+0x85/0xd0
[   17.116767]  iommu_deinit_device+0x11f/0x4c0
[   17.116930]  __iommu_group_remove_device+0x26b/0x300
[   17.117117]  iommu_group_remove_device+0x8a/0xb0
[   17.117291]  iommufd_test+0x1f1a/0x2d10
[   17.117435]  ? __pfx_lock_release+0x10/0x10
[   17.117593]  ? __pfx_lock_acquire+0x10/0x10
[   17.117752]  ? __pfx_iommufd_test+0x10/0x10
[   17.117909]  ? __sanitizer_cov_trace_const_cmp8+0x1c/0x30
[   17.118110]  iommufd_fops_ioctl+0x377/0x510
[   17.118270]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   17.118445]  ? trace_hardirqs_on+0x26/0x120
[   17.118605]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   17.118848]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   17.119036]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   17.119235]  ? security_file_ioctl+0x9d/0xd0
[   17.119399]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   17.119576]  __x64_sys_ioctl+0x1b9/0x230
[   17.119724]  do_syscall_64+0x3c/0x90
[   17.119860]  entry_SYSCALL_64_after_hwframe+0x6e/0xd8
[   17.120047] RIP: 0033:0x7fb36623ee5d
[   17.120182] Code: ff c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d 93 af 1b 00 f7 d8 64 89 01 48
[   17.120827] RSP: 002b:00007fffb2049188 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   17.121097] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007fb36623ee5d
[   17.121351] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   17.121605] RBP: 00007fffb20491a0 R08: 0000000000000800 R09: 0000000000000800
[   17.121858] R10: 0000000000000000 R11: 0000000000000213 R12: 00007fffb20492b8
[   17.122111] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007fb36656e000
[   17.122370]  </TASK>
[   17.122454] Modules linked in:
[   17.122702] ---[ end trace 0000000000000000 ]---
[   17.122884] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   17.123096] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   17.123812] RSP: 0018:ffff88802457fba8 EFLAGS: 00010206
[   17.124003] RAX: dffffc0000000000 RBX: ffff888014f9b000 RCX: 0000000000000000
[   17.124256] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   17.124574] RBP: ffff88802457fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   17.124828] R10: ffff88800aad88df R11: 0000000000000001 R12: 0000000000000000
[   17.125089] R13: ffffffff85cc0180 R14: ffff8880109b6ac0 R15: ffffffff87070ae0
[   17.125391] FS:  00007fb36652d600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   17.125678] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   17.125950] CR2: 0000000020000080 CR3: 0000000012646000 CR4: 0000000000750ef0
[   17.126205] PKRU: 55555554
[   17.126613] ------------[ cut here ]------------
[   17.126790] WARNING: CPU: 0 PID: 798 at drivers/iommu/iommufd/main.c:258 iommufd_fops_release+0x2a3/0x300
[   17.127135] Modules linked in:
[   17.127255] CPU: 0 PID: 798 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   17.127622] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   17.128106] RIP: 0010:iommufd_fops_release+0x2a3/0x300
[   17.128296] Code: 45 d0 65 48 2b 04 25 28 00 00 00 75 54 48 81 c4 88 00 00 00 31 c0 5b 41 5c 41 5d 41 5e 41 5f 5d c3 cc cc cc cc e8 ad 4f 0a fe <0f> 0b eb a6 e8 74 23 67 fe e9 f6 fe ff ff 48 89 85 50 ff ff ff e8
[   17.129000] RSP: 0018:ffff8880116bfc00 EFLAGS: 00010293
[   17.129191] RAX: 0000000000000000 RBX: ffff88800fe06d08 RCX: 0000000000000000
[   17.129506] RDX: ffff88800fad8000 RSI: ffffffff835563e3 RDI: ffffffff86702b40
[   17.129760] RBP: ffff8880116bfcb0 R08: 0000000000000000 R09: fffffbfff0eb2644
[   17.130076] R10: ffffffff87593227 R11: ffff8880131a7200 R12: 0000000000000000
[   17.130330] R13: ffff88800f5ca698 R14: ffff8880116bfc48 R15: ffffffff83556140
[   17.130591] FS:  0000000000000000(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   17.130897] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   17.131110] CR2: 0000000020000080 CR3: 000000000687e000 CR4: 0000000000750ef0
[   17.131364] PKRU: 55555554
[   17.131466] Call Trace:
[   17.131559]  <TASK>
[   17.131641]  ? show_regs+0x6e/0x80
[   17.131773]  ? __warn+0xef/0x340
[   17.131898]  ? report_bug+0x25e/0x4b0
[   17.132039]  ? iommufd_fops_release+0x2a3/0x300
[   17.132209]  ? report_bug+0x2cb/0x4b0
[   17.132350]  ? handle_bug+0x46/0x90
[   17.132484]  ? exc_invalid_op+0x1d/0x50
[   17.132628]  ? asm_exc_invalid_op+0x1f/0x30
[   17.132783]  ? __pfx_iommufd_fops_release+0x10/0x10
[   17.132965]  ? iommufd_fops_release+0x2a3/0x300
[   17.133135]  ? iommufd_fops_release+0x2a3/0x300
[   17.133306]  ? __pfx_iommufd_fops_release+0x10/0x10
[   17.133485]  ? rcu_is_watching+0x19/0xc0
[   17.133634]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   17.133833]  ? __pfx_iommufd_fops_release+0x10/0x10
[   17.134012]  __fput+0x424/0xaf0
[   17.134139]  ____fput+0x1f/0x30
[   17.134263]  task_work_run+0x19d/0x2b0
[   17.134409]  ? __pfx_task_work_run+0x10/0x10
[   17.134568]  ? __sanitizer_cov_trace_const_cmp1+0x1e/0x30
[   17.134777]  ? switch_task_namespaces+0xa9/0xe0
[   17.134973]  do_exit+0xac9/0x2790
[   17.135101]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   17.135328]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   17.135510]  ? __pfx_do_exit+0x10/0x10
[   17.135652]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   17.135849]  ? security_file_ioctl+0x9d/0xd0
[   17.136013]  make_task_dead+0x182/0x3c0
[   17.136158]  rewind_stack_and_make_dead+0x17/0x20
[   17.136333] RIP: 0033:0x7fb36623ee5d
[   17.136467] Code: Unable to access opcode bytes at 0x7fb36623ee33.
[   17.136686] RSP: 002b:00007fffb2049188 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   17.136956] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007fb36623ee5d
[   17.137208] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   17.137463] RBP: 00007fffb20491a0 R08: 0000000000000800 R09: 0000000000000800
[   17.137719] R10: 0000000000000000 R11: 0000000000000213 R12: 00007fffb20492b8
[   17.137972] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007fb36656e000
[   17.138230]  </TASK>
[   17.138314] irq event stamp: 0
[   17.138429] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   17.138665] hardirqs last disabled at (0): [<ffffffff8122f2d1>] copy_process+0x1c51/0x7140
[   17.138966] softirqs last  enabled at (0): [<ffffffff8122f312>] copy_process+0x1c92/0x7140
[   17.139259] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   17.139482] ---[ end trace 0000000000000000 ]---
[   17.141978] iommufd_mock iommufd_mock81: Adding to iommu group 81
[   17.142238] iommufd_mock iommufd_mock81: Removing from iommu group 81
[   17.142488] general protection fault, probably for non-canonical address 0xdffffc0000000006: 0000 [#82] PREEMPT SMP KASAN NOPTI
[   17.142900] KASAN: null-ptr-deref in range [0x0000000000000030-0x0000000000000037]
[   17.143176] CPU: 1 PID: 799 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   17.143490] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   17.143887] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   17.144097] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   17.144748] RSP: 0018:ffff88802458fba8 EFLAGS: 00010206
[   17.144937] RAX: dffffc0000000000 RBX: ffff88800bd5b000 RCX: 0000000000000000
[   17.145190] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   17.145451] RBP: ffff88802458fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   17.145703] R10: ffff88800aad88df R11: 5f6466756d6d6f69 R12: 0000000000000000
[   17.145955] R13: ffffffff85cc0180 R14: ffff88801679a180 R15: ffffffff87070ae0
[   17.146211] FS:  00007fd5c36b4600(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
[   17.146502] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   17.146710] CR2: 0000000020000080 CR3: 000000000fb9c000 CR4: 0000000000750ee0
[   17.146974] PKRU: 55555554
[   17.147076] Call Trace:
[   17.147168]  <TASK>
[   17.147259]  ? show_regs+0x6e/0x80
[   17.147393]  ? die_addr+0x45/0xb0
[   17.147524]  ? exc_general_protection+0x159/0x250
[   17.147704]  ? asm_exc_general_protection+0x2b/0x30
[   17.147912]  ? sysfs_remove_link_from_group+0x21/0x90
[   17.148099]  ? sysfs_remove_link_from_group+0x37/0x90
[   17.148295]  ? sysfs_remove_link_from_group+0x21/0x90
[   17.148483]  iommu_device_unlink+0x85/0xd0
[   17.148637]  iommu_deinit_device+0x11f/0x4c0
[   17.148799]  __iommu_group_remove_device+0x26b/0x300
[   17.148986]  iommu_group_remove_device+0x8a/0xb0
[   17.149160]  iommufd_test+0x1f1a/0x2d10
[   17.149312]  ? __pfx_lock_release+0x10/0x10
[   17.149469]  ? __pfx_lock_acquire+0x10/0x10
[   17.149627]  ? __pfx_iommufd_test+0x10/0x10
[   17.149784]  ? __sanitizer_cov_trace_const_cmp8+0x1c/0x30
[   17.149984]  iommufd_fops_ioctl+0x377/0x510
[   17.150143]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   17.150327]  ? trace_hardirqs_on+0x26/0x120
[   17.150487]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   17.150715]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   17.150914]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   17.151116]  ? security_file_ioctl+0x9d/0xd0
[   17.151285]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   17.151463]  __x64_sys_ioctl+0x1b9/0x230
[   17.151612]  do_syscall_64+0x3c/0x90
[   17.151747]  entry_SYSCALL_64_after_hwframe+0x6e/0xd8
[   17.151933] RIP: 0033:0x7fd5c343ee5d
[   17.152067] Code: ff c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d 93 af 1b 00 f7 d8 64 89 01 48
[   17.152717] RSP: 002b:00007ffd09ef9418 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   17.152987] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007fd5c343ee5d
[   17.153244] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   17.153505] RBP: 00007ffd09ef9430 R08: 0000000000000800 R09: 0000000000000800
[   17.153757] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffd09ef9548
[   17.154009] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007fd5c36f5000
[   17.154267]  </TASK>
[   17.154360] Modules linked in:
[   17.154523] ---[ end trace 0000000000000000 ]---
[   17.154714] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   17.154958] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   17.155611] RSP: 0018:ffff88802457fba8 EFLAGS: 00010206
[   17.155800] RAX: dffffc0000000000 RBX: ffff888014f9b000 RCX: 0000000000000000
[   17.156053] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   17.156304] RBP: ffff88802457fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   17.156565] R10: ffff88800aad88df R11: 0000000000000001 R12: 0000000000000000
[   17.156818] R13: ffffffff85cc0180 R14: ffff8880109b6ac0 R15: ffffffff87070ae0
[   17.157070] FS:  00007fd5c36b4600(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
[   17.157361] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   17.157570] CR2: 0000000020000080 CR3: 000000000fb9c000 CR4: 0000000000750ee0
[   17.157823] PKRU: 55555554
[   17.158308] ------------[ cut here ]------------
[   17.158492] WARNING: CPU: 0 PID: 799 at drivers/iommu/iommufd/main.c:258 iommufd_fops_release+0x2a3/0x300
[   17.158886] Modules linked in:
[   17.159008] CPU: 0 PID: 799 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   17.159318] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   17.159719] RIP: 0010:iommufd_fops_release+0x2a3/0x300
[   17.159908] Code: 45 d0 65 48 2b 04 25 28 00 00 00 75 54 48 81 c4 88 00 00 00 31 c0 5b 41 5c 41 5d 41 5e 41 5f 5d c3 cc cc cc cc e8 ad 4f 0a fe <0f> 0b eb a6 e8 74 23 67 fe e9 f6 fe ff ff 48 89 85 50 ff ff ff e8
[   17.160552] RSP: 0018:ffff88802458fc00 EFLAGS: 00010293
[   17.160742] RAX: 0000000000000000 RBX: ffff88801248af08 RCX: 0000000000000000
[   17.160995] RDX: ffff88800f782500 RSI: ffffffff835563e3 RDI: ffffffff86702b40
[   17.161249] RBP: ffff88802458fcb0 R08: 0000000000000000 R09: fffffbfff0eb2644
[   17.161502] R10: ffffffff87593227 R11: ffff8880122a5400 R12: 0000000000000000
[   17.161755] R13: ffff8880114e1098 R14: ffff88802458fc48 R15: ffffffff83556140
[   17.162008] FS:  0000000000000000(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   17.162293] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   17.162500] CR2: 00007fa281eaa030 CR3: 000000000687e000 CR4: 0000000000750ef0
[   17.162811] PKRU: 55555554
[   17.162918] Call Trace:
[   17.163012]  <TASK>
[   17.163094]  ? show_regs+0x6e/0x80
[   17.163226]  ? __warn+0xef/0x340
[   17.163351]  ? report_bug+0x25e/0x4b0
[   17.163492]  ? iommufd_fops_release+0x2a3/0x300
[   17.163661]  ? report_bug+0x2cb/0x4b0
[   17.163805]  ? handle_bug+0x46/0x90
[   17.163938]  ? exc_invalid_op+0x1d/0x50
[   17.164082]  ? asm_exc_invalid_op+0x1f/0x30
[   17.164238]  ? __pfx_iommufd_fops_release+0x10/0x10
[   17.164421]  ? iommufd_fops_release+0x2a3/0x300
[   17.164590]  ? iommufd_fops_release+0x2a3/0x300
[   17.164761]  ? __pfx_iommufd_fops_release+0x10/0x10
[   17.164941]  ? rcu_is_watching+0x19/0xc0
[   17.165090]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   17.165289]  ? __pfx_iommufd_fops_release+0x10/0x10
[   17.165469]  __fput+0x424/0xaf0
[   17.165597]  ____fput+0x1f/0x30
[   17.165717]  task_work_run+0x19d/0x2b0
[   17.165859]  ? __pfx_task_work_run+0x10/0x10
[   17.166024]  ? __sanitizer_cov_trace_const_cmp1+0x1e/0x30
[   17.166217]  ? switch_task_namespaces+0xa9/0xe0
[   17.166385]  do_exit+0xac9/0x2790
[   17.166510]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   17.166762]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   17.166969]  ? __pfx_do_exit+0x10/0x10
[   17.167111]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   17.167312]  ? security_file_ioctl+0x9d/0xd0
[   17.167476]  make_task_dead+0x182/0x3c0
[   17.167622]  rewind_stack_and_make_dead+0x17/0x20
[   17.167794] RIP: 0033:0x7fd5c343ee5d
[   17.167926] Code: Unable to access opcode bytes at 0x7fd5c343ee33.
[   17.168148] RSP: 002b:00007ffd09ef9418 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   17.168412] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007fd5c343ee5d
[   17.168660] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   17.168908] RBP: 00007ffd09ef9430 R08: 0000000000000800 R09: 0000000000000800
[   17.169160] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffd09ef9548
[   17.169412] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007fd5c36f5000
[   17.169666]  </TASK>
[   17.169749] irq event stamp: 0
[   17.169861] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   17.170081] hardirqs last disabled at (0): [<ffffffff8122f2d1>] copy_process+0x1c51/0x7140
[   17.170374] softirqs last  enabled at (0): [<ffffffff8122f312>] copy_process+0x1c92/0x7140
[   17.170701] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   17.170954] ---[ end trace 0000000000000000 ]---
[   17.173699] iommufd_mock iommufd_mock82: Adding to iommu group 82
[   17.173949] iommufd_mock iommufd_mock82: Removing from iommu group 82
[   17.174198] general protection fault, probably for non-canonical address 0xdffffc0000000006: 0000 [#83] PREEMPT SMP KASAN NOPTI
[   17.174601] KASAN: null-ptr-deref in range [0x0000000000000030-0x0000000000000037]
[   17.174878] CPU: 0 PID: 800 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   17.175191] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   17.175590] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   17.175802] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   17.176448] RSP: 0018:ffff888017547ba8 EFLAGS: 00010206
[   17.176638] RAX: dffffc0000000000 RBX: ffff88801089d000 RCX: 0000000000000000
[   17.176892] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   17.177146] RBP: ffff888017547bc0 R08: 0000000000000001 R09: ffffed100155b11b
[   17.177400] R10: ffff88800aad88df R11: 5f6466756d6d6f69 R12: 0000000000000000
[   17.177653] R13: ffffffff85cc0180 R14: ffff88800bd79a60 R15: ffffffff87070ae0
[   17.177908] FS:  00007f2da5109600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   17.178194] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   17.178401] CR2: 0000000020000080 CR3: 000000000fb9c000 CR4: 0000000000750ef0
[   17.178656] PKRU: 55555554
[   17.178761] Call Trace:
[   17.178874]  <TASK>
[   17.178958]  ? show_regs+0x6e/0x80
[   17.179092]  ? die_addr+0x45/0xb0
[   17.179224]  ? exc_general_protection+0x159/0x250
[   17.179405]  ? asm_exc_general_protection+0x2b/0x30
[   17.179589]  ? sysfs_remove_link_from_group+0x21/0x90
[   17.179777]  ? sysfs_remove_link_from_group+0x37/0x90
[   17.179965]  ? sysfs_remove_link_from_group+0x21/0x90
[   17.180153]  iommu_device_unlink+0x85/0xd0
[   17.180307]  iommu_deinit_device+0x11f/0x4c0
[   17.180471]  __iommu_group_remove_device+0x26b/0x300
[   17.180658]  iommu_group_remove_device+0x8a/0xb0
[   17.180832]  iommufd_test+0x1f1a/0x2d10
[   17.180976]  ? __pfx_lock_release+0x10/0x10
[   17.181134]  ? __pfx_lock_acquire+0x10/0x10
[   17.181293]  ? __pfx_iommufd_test+0x10/0x10
[   17.181451]  ? __sanitizer_cov_trace_const_cmp8+0x1c/0x30
[   17.181652]  iommufd_fops_ioctl+0x377/0x510
[   17.181811]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   17.181987]  ? trace_hardirqs_on+0x26/0x120
[   17.182147]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   17.182377]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   17.182561]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   17.182762]  ? security_file_ioctl+0x9d/0xd0
[   17.182955]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   17.183132]  __x64_sys_ioctl+0x1b9/0x230
[   17.183281]  do_syscall_64+0x3c/0x90
[   17.183417]  entry_SYSCALL_64_after_hwframe+0x6e/0xd8
[   17.183604] RIP: 0033:0x7f2da4e3ee5d
[   17.183739] Code: ff c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d 93 af 1b 00 f7 d8 64 89 01 48
[   17.184387] RSP: 002b:00007ffd4e1d64d8 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   17.184659] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f2da4e3ee5d
[   17.184913] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   17.185167] RBP: 00007ffd4e1d64f0 R08: 0000000000000800 R09: 0000000000000800
[   17.185422] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffd4e1d6608
[   17.185677] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f2da514a000
[   17.185936]  </TASK>
[   17.186021] Modules linked in:
[   17.186170] ---[ end trace 0000000000000000 ]---
[   17.186340] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   17.186550] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   17.187223] RSP: 0018:ffff88802457fba8 EFLAGS: 00010206
[   17.187413] RAX: dffffc0000000000 RBX: ffff888014f9b000 RCX: 0000000000000000
[   17.187668] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   17.187923] RBP: ffff88802457fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   17.188178] R10: ffff88800aad88df R11: 0000000000000001 R12: 0000000000000000
[   17.188432] R13: ffffffff85cc0180 R14: ffff8880109b6ac0 R15: ffffffff87070ae0
[   17.188686] FS:  00007f2da5109600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   17.188974] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   17.189181] CR2: 0000000020000080 CR3: 000000000fb9c000 CR4: 0000000000750ef0
[   17.189437] PKRU: 55555554
[   17.189802] ------------[ cut here ]------------
[   17.189972] WARNING: CPU: 0 PID: 800 at drivers/iommu/iommufd/main.c:258 iommufd_fops_release+0x2a3/0x300
[   17.190317] Modules linked in:
[   17.190434] CPU: 0 PID: 800 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   17.190757] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   17.191160] RIP: 0010:iommufd_fops_release+0x2a3/0x300
[   17.191349] Code: 45 d0 65 48 2b 04 25 28 00 00 00 75 54 48 81 c4 88 00 00 00 31 c0 5b 41 5c 41 5d 41 5e 41 5f 5d c3 cc cc cc cc e8 ad 4f 0a fe <0f> 0b eb a6 e8 74 23 67 fe e9 f6 fe ff ff 48 89 85 50 ff ff ff e8
[   17.192095] RSP: 0018:ffff888017547c00 EFLAGS: 00010293
[   17.192314] RAX: 0000000000000000 RBX: ffff88800fe06508 RCX: 0000000000000000
[   17.192606] RDX: ffff888014cdca00 RSI: ffffffff835563e3 RDI: ffffffff86702b40
[   17.192860] RBP: ffff888017547cb0 R08: 0000000000000000 R09: fffffbfff0eb2644
[   17.193170] R10: ffffffff87593227 R11: ffff8880134a0e00 R12: 0000000000000000
[   17.193423] R13: ffff888013582918 R14: ffff888017547c48 R15: ffffffff83556140
[   17.193694] FS:  0000000000000000(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   17.194017] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   17.194228] CR2: 0000000020000080 CR3: 000000000687e000 CR4: 0000000000750ef0
[   17.194545] PKRU: 55555554
[   17.194657] Call Trace:
[   17.194753]  <TASK>
[   17.194839]  ? show_regs+0x6e/0x80
[   17.194975]  ? __warn+0xef/0x340
[   17.195100]  ? report_bug+0x25e/0x4b0
[   17.195240]  ? iommufd_fops_release+0x2a3/0x300
[   17.195468]  ? report_bug+0x2cb/0x4b0
[   17.195611]  ? handle_bug+0x46/0x90
[   17.195744]  ? exc_invalid_op+0x1d/0x50
[   17.195889]  ? asm_exc_invalid_op+0x1f/0x30
[   17.196061]  ? __pfx_iommufd_fops_release+0x10/0x10
[   17.196277]  ? iommufd_fops_release+0x2a3/0x300
[   17.196447]  ? iommufd_fops_release+0x2a3/0x300
[   17.196626]  ? __pfx_iommufd_fops_release+0x10/0x10
[   17.196850]  ? rcu_is_watching+0x19/0xc0
[   17.197000]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   17.197198]  ? __pfx_iommufd_fops_release+0x10/0x10
[   17.197401]  __fput+0x424/0xaf0
[   17.197561]  ____fput+0x1f/0x30
[   17.197684]  task_work_run+0x19d/0x2b0
[   17.197826]  ? __pfx_task_work_run+0x10/0x10
[   17.198004]  ? __sanitizer_cov_trace_const_cmp1+0x1e/0x30
[   17.198236]  ? switch_task_namespaces+0xa9/0xe0
[   17.198406]  do_exit+0xac9/0x2790
[   17.198533]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   17.198828]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   17.199011]  ? __pfx_do_exit+0x10/0x10
[   17.199152]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   17.199349]  ? security_file_ioctl+0x9d/0xd0
[   17.199511]  make_task_dead+0x182/0x3c0
[   17.199656]  rewind_stack_and_make_dead+0x17/0x20
[   17.199854] RIP: 0033:0x7f2da4e3ee5d
[   17.200019] Code: Unable to access opcode bytes at 0x7f2da4e3ee33.
[   17.200238] RSP: 002b:00007ffd4e1d64d8 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   17.200529] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f2da4e3ee5d
[   17.200815] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   17.201078] RBP: 00007ffd4e1d64f0 R08: 0000000000000800 R09: 0000000000000800
[   17.201372] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffd4e1d6608
[   17.201625] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f2da514a000
[   17.201938]  </TASK>
[   17.202023] irq event stamp: 0
[   17.202137] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   17.202366] hardirqs last disabled at (0): [<ffffffff8122f2d1>] copy_process+0x1c51/0x7140
[   17.202724] softirqs last  enabled at (0): [<ffffffff8122f312>] copy_process+0x1c92/0x7140
[   17.203027] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   17.203251] ---[ end trace 0000000000000000 ]---
[   17.206089] iommufd_mock iommufd_mock83: Adding to iommu group 83
[   17.206373] iommufd_mock iommufd_mock83: Removing from iommu group 83
[   17.206643] general protection fault, probably for non-canonical address 0xdffffc0000000006: 0000 [#84] PREEMPT SMP KASAN NOPTI
[   17.207058] KASAN: null-ptr-deref in range [0x0000000000000030-0x0000000000000037]
[   17.207326] CPU: 0 PID: 801 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   17.207633] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   17.208072] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   17.208283] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   17.208927] RSP: 0018:ffff8880116bfba8 EFLAGS: 00010206
[   17.209117] RAX: dffffc0000000000 RBX: ffff88801089c000 RCX: 0000000000000000
[   17.209370] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   17.209623] RBP: ffff8880116bfbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   17.209875] R10: ffff88800aad88df R11: 5f6466756d6d6f69 R12: 0000000000000000
[   17.210128] R13: ffffffff85cc0180 R14: ffff88800bd79940 R15: ffffffff87070ae0
[   17.210381] FS:  00007ff02ea6b600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   17.210667] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   17.210884] CR2: 0000000020000080 CR3: 0000000012646000 CR4: 0000000000750ef0
[   17.211138] PKRU: 55555554
[   17.211239] Call Trace:
[   17.211332]  <TASK>
[   17.211415]  ? show_regs+0x6e/0x80
[   17.211548]  ? die_addr+0x45/0xb0
[   17.211680]  ? exc_general_protection+0x159/0x250
[   17.211861]  ? asm_exc_general_protection+0x2b/0x30
[   17.212044]  ? sysfs_remove_link_from_group+0x21/0x90
[   17.212231]  ? sysfs_remove_link_from_group+0x37/0x90
[   17.212418]  ? sysfs_remove_link_from_group+0x21/0x90
[   17.212606]  iommu_device_unlink+0x85/0xd0
[   17.212760]  iommu_deinit_device+0x11f/0x4c0
[   17.212923]  __iommu_group_remove_device+0x26b/0x300
[   17.213110]  iommu_group_remove_device+0x8a/0xb0
[   17.213284]  iommufd_test+0x1f1a/0x2d10
[   17.213428]  ? __pfx_lock_release+0x10/0x10
[   17.213586]  ? __pfx_lock_acquire+0x10/0x10
[   17.213745]  ? __pfx_iommufd_test+0x10/0x10
[   17.213903]  ? __sanitizer_cov_trace_const_cmp8+0x1c/0x30
[   17.214104]  iommufd_fops_ioctl+0x377/0x510
[   17.214263]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   17.214439]  ? trace_hardirqs_on+0x26/0x120
[   17.214599]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   17.214842]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   17.215029]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   17.215228]  ? security_file_ioctl+0x9d/0xd0
[   17.215392]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   17.215568]  __x64_sys_ioctl+0x1b9/0x230
[   17.215716]  do_syscall_64+0x3c/0x90
[   17.215851]  entry_SYSCALL_64_after_hwframe+0x6e/0xd8
[   17.216037] RIP: 0033:0x7ff02e83ee5d
[   17.216172] Code: ff c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d 93 af 1b 00 f7 d8 64 89 01 48
[   17.216816] RSP: 002b:00007ffcfd88ee28 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   17.217086] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007ff02e83ee5d
[   17.217339] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   17.217592] RBP: 00007ffcfd88ee40 R08: 0000000000000800 R09: 0000000000000800
[   17.217845] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffcfd88ef58
[   17.218098] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007ff02eaac000
[   17.218356]  </TASK>
[   17.218440] Modules linked in:
[   17.218597] ---[ end trace 0000000000000000 ]---
[   17.218783] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   17.218997] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   17.219655] RSP: 0018:ffff88802457fba8 EFLAGS: 00010206
[   17.219849] RAX: dffffc0000000000 RBX: ffff888014f9b000 RCX: 0000000000000000
[   17.220102] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   17.220355] RBP: ffff88802457fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   17.220608] R10: ffff88800aad88df R11: 0000000000000001 R12: 0000000000000000
[   17.220860] R13: ffffffff85cc0180 R14: ffff8880109b6ac0 R15: ffffffff87070ae0
[   17.221112] FS:  00007ff02ea6b600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   17.221397] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   17.221603] CR2: 0000000020000080 CR3: 0000000012646000 CR4: 0000000000750ef0
[   17.221857] PKRU: 55555554
[   17.222303] ------------[ cut here ]------------
[   17.222473] WARNING: CPU: 0 PID: 801 at drivers/iommu/iommufd/main.c:258 iommufd_fops_release+0x2a3/0x300
[   17.222993] Modules linked in:
[   17.223110] CPU: 0 PID: 801 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   17.223418] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   17.223906] RIP: 0010:iommufd_fops_release+0x2a3/0x300
[   17.224098] Code: 45 d0 65 48 2b 04 25 28 00 00 00 75 54 48 81 c4 88 00 00 00 31 c0 5b 41 5c 41 5d 41 5e 41 5f 5d c3 cc cc cc cc e8 ad 4f 0a fe <0f> 0b eb a6 e8 74 23 67 fe e9 f6 fe ff ff 48 89 85 50 ff ff ff e8
[   17.224810] RSP: 0018:ffff8880116bfc00 EFLAGS: 00010293
[   17.225032] RAX: 0000000000000000 RBX: ffff88800fe06c08 RCX: 0000000000000000
[   17.225329] RDX: ffff88800f784a00 RSI: ffffffff835563e3 RDI: ffffffff86702b40
[   17.225589] RBP: ffff8880116bfcb0 R08: 0000000000000000 R09: fffffbfff0eb2644
[   17.225888] R10: ffffffff87593227 R11: ffff88800b6d9000 R12: 0000000000000000
[   17.226142] R13: ffff88801330ce18 R14: ffff8880116bfc48 R15: ffffffff83556140
[   17.226457] FS:  0000000000000000(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   17.226763] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   17.226975] CR2: 0000000020000080 CR3: 000000000687e000 CR4: 0000000000750ef0
[   17.227250] PKRU: 55555554
[   17.227394] Call Trace:
[   17.227487]  <TASK>
[   17.227569]  ? show_regs+0x6e/0x80
[   17.227701]  ? __warn+0xef/0x340
[   17.227832]  ? report_bug+0x25e/0x4b0
[   17.228036]  ? iommufd_fops_release+0x2a3/0x300
[   17.228208]  ? report_bug+0x2cb/0x4b0
[   17.228353]  ? handle_bug+0x46/0x90
[   17.228497]  ? exc_invalid_op+0x1d/0x50
[   17.228687]  ? asm_exc_invalid_op+0x1f/0x30
[   17.228842]  ? __pfx_iommufd_fops_release+0x10/0x10
[   17.229028]  ? iommufd_fops_release+0x2a3/0x300
[   17.229263]  ? iommufd_fops_release+0x2a3/0x300
[   17.229436]  ? __pfx_iommufd_fops_release+0x10/0x10
[   17.229620]  ? rcu_is_watching+0x19/0xc0
[   17.229769]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   17.230026]  ? __pfx_iommufd_fops_release+0x10/0x10
[   17.230207]  __fput+0x424/0xaf0
[   17.230332]  ____fput+0x1f/0x30
[   17.230462]  task_work_run+0x19d/0x2b0
[   17.230669]  ? __pfx_task_work_run+0x10/0x10
[   17.230837]  ? __sanitizer_cov_trace_const_cmp1+0x1e/0x30
[   17.231039]  ? switch_task_namespaces+0xa9/0xe0
[   17.231213]  do_exit+0xac9/0x2790
[   17.231343]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   17.231576]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   17.231810]  ? __pfx_do_exit+0x10/0x10
[   17.231952]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   17.232149]  ? security_file_ioctl+0x9d/0xd0
[   17.232376]  make_task_dead+0x182/0x3c0
[   17.232522]  rewind_stack_and_make_dead+0x17/0x20
[   17.232708] RIP: 0033:0x7ff02e83ee5d
[   17.232852] Code: Unable to access opcode bytes at 0x7ff02e83ee33.
[   17.233127] RSP: 002b:00007ffcfd88ee28 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   17.233397] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007ff02e83ee5d
[   17.233710] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   17.233971] RBP: 00007ffcfd88ee40 R08: 0000000000000800 R09: 0000000000000800
[   17.234279] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffcfd88ef58
[   17.234536] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007ff02eaac000
[   17.234815]  </TASK>
[   17.234958] irq event stamp: 0
[   17.235074] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   17.235298] hardirqs last disabled at (0): [<ffffffff8122f2d1>] copy_process+0x1c51/0x7140
[   17.235591] softirqs last  enabled at (0): [<ffffffff8122f312>] copy_process+0x1c92/0x7140
[   17.235910] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   17.236181] ---[ end trace 0000000000000000 ]---
[   17.239052] iommufd_mock iommufd_mock84: Adding to iommu group 84
[   17.239302] iommufd_mock iommufd_mock84: Removing from iommu group 84
[   17.239560] general protection fault, probably for non-canonical address 0xdffffc0000000006: 0000 [#85] PREEMPT SMP KASAN NOPTI
[   17.240042] KASAN: null-ptr-deref in range [0x0000000000000030-0x0000000000000037]
[   17.240318] CPU: 0 PID: 802 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   17.240634] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   17.241064] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   17.241281] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   17.241941] RSP: 0018:ffff888017547ba8 EFLAGS: 00010206
[   17.242135] RAX: dffffc0000000000 RBX: ffff88801089b000 RCX: 0000000000000000
[   17.242395] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   17.242655] RBP: ffff888017547bc0 R08: 0000000000000001 R09: ffffed100155b11b
[   17.242920] R10: ffff88800aad88df R11: 5f6466756d6d6f69 R12: 0000000000000000
[   17.243175] R13: ffffffff85cc0180 R14: ffff88800bd792e0 R15: ffffffff87070ae0
[   17.243453] FS:  00007fabc1114600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   17.243743] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   17.243950] CR2: 0000000020000080 CR3: 00000000132a0000 CR4: 0000000000750ef0
[   17.244205] PKRU: 55555554
[   17.244307] Call Trace:
[   17.244400]  <TASK>
[   17.244482]  ? show_regs+0x6e/0x80
[   17.244616]  ? die_addr+0x45/0xb0
[   17.244747]  ? exc_general_protection+0x159/0x250
[   17.244928]  ? asm_exc_general_protection+0x2b/0x30
[   17.245112]  ? sysfs_remove_link_from_group+0x21/0x90
[   17.245299]  ? sysfs_remove_link_from_group+0x37/0x90
[   17.245487]  ? sysfs_remove_link_from_group+0x21/0x90
[   17.245675]  iommu_device_unlink+0x85/0xd0
[   17.245829]  iommu_deinit_device+0x11f/0x4c0
[   17.245992]  __iommu_group_remove_device+0x26b/0x300
[   17.246179]  iommu_group_remove_device+0x8a/0xb0
[   17.246353]  iommufd_test+0x1f1a/0x2d10
[   17.246497]  ? __pfx_lock_release+0x10/0x10
[   17.246658]  ? __pfx_lock_acquire+0x10/0x10
[   17.246825]  ? __pfx_iommufd_test+0x10/0x10
[   17.246988]  ? __sanitizer_cov_trace_const_cmp8+0x1c/0x30
[   17.247189]  iommufd_fops_ioctl+0x377/0x510
[   17.247348]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   17.247524]  ? trace_hardirqs_on+0x26/0x120
[   17.247683]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   17.247921]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   17.248108]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   17.248307]  ? security_file_ioctl+0x9d/0xd0
[   17.248471]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   17.248647]  __x64_sys_ioctl+0x1b9/0x230
[   17.248794]  do_syscall_64+0x3c/0x90
[   17.248930]  entry_SYSCALL_64_after_hwframe+0x6e/0xd8
[   17.249116] RIP: 0033:0x7fabc0e3ee5d
[   17.249250] Code: ff c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d 93 af 1b 00 f7 d8 64 89 01 48
[   17.249894] RSP: 002b:00007ffe8e8e1d88 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   17.250165] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007fabc0e3ee5d
[   17.250418] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   17.250675] RBP: 00007ffe8e8e1da0 R08: 0000000000000800 R09: 0000000000000800
[   17.250935] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffe8e8e1eb8
[   17.251189] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007fabc1155000
[   17.251448]  </TASK>
[   17.251532] Modules linked in:
[   17.251709] ---[ end trace 0000000000000000 ]---
[   17.251882] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   17.252095] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   17.252752] RSP: 0018:ffff88802457fba8 EFLAGS: 00010206
[   17.252945] RAX: dffffc0000000000 RBX: ffff888014f9b000 RCX: 0000000000000000
[   17.253203] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   17.253486] RBP: ffff88802457fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   17.253744] R10: ffff88800aad88df R11: 0000000000000001 R12: 0000000000000000
[   17.254002] R13: ffffffff85cc0180 R14: ffff8880109b6ac0 R15: ffffffff87070ae0
[   17.254260] FS:  00007fabc1114600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   17.254550] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   17.254771] CR2: 0000000020000080 CR3: 00000000132a0000 CR4: 0000000000750ef0
[   17.255058] PKRU: 55555554
[   17.255415] ------------[ cut here ]------------
[   17.255583] WARNING: CPU: 0 PID: 802 at drivers/iommu/iommufd/main.c:258 iommufd_fops_release+0x2a3/0x300
[   17.255923] Modules linked in:
[   17.256038] CPU: 0 PID: 802 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   17.256346] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   17.256743] RIP: 0010:iommufd_fops_release+0x2a3/0x300
[   17.256932] Code: 45 d0 65 48 2b 04 25 28 00 00 00 75 54 48 81 c4 88 00 00 00 31 c0 5b 41 5c 41 5d 41 5e 41 5f 5d c3 cc cc cc cc e8 ad 4f 0a fe <0f> 0b eb a6 e8 74 23 67 fe e9 f6 fe ff ff 48 89 85 50 ff ff ff e8
[   17.257577] RSP: 0018:ffff888017547c00 EFLAGS: 00010293
[   17.257766] RAX: 0000000000000000 RBX: ffff88800fe06808 RCX: 0000000000000000
[   17.258018] RDX: ffff88800f780000 RSI: ffffffff835563e3 RDI: ffffffff86702b40
[   17.258278] RBP: ffff888017547cb0 R08: 0000000000000000 R09: fffffbfff0eb2644
[   17.258625] R10: ffffffff87593227 R11: ffff8880132ebe00 R12: 0000000000000000
[   17.258891] R13: ffff88801330d318 R14: ffff888017547c48 R15: ffffffff83556140
[   17.259146] FS:  0000000000000000(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   17.259431] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   17.259637] CR2: 0000000020000080 CR3: 000000000687e000 CR4: 0000000000750ef0
[   17.259890] PKRU: 55555554
[   17.259992] Call Trace:
[   17.260084]  <TASK>
[   17.260166]  ? show_regs+0x6e/0x80
[   17.260298]  ? __warn+0xef/0x340
[   17.260423]  ? report_bug+0x25e/0x4b0
[   17.260563]  ? iommufd_fops_release+0x2a3/0x300
[   17.260732]  ? report_bug+0x2cb/0x4b0
[   17.260874]  ? handle_bug+0x46/0x90
[   17.261007]  ? exc_invalid_op+0x1d/0x50
[   17.261151]  ? asm_exc_invalid_op+0x1f/0x30
[   17.261306]  ? __pfx_iommufd_fops_release+0x10/0x10
[   17.261489]  ? iommufd_fops_release+0x2a3/0x300
[   17.261658]  ? iommufd_fops_release+0x2a3/0x300
[   17.261829]  ? __pfx_iommufd_fops_release+0x10/0x10
[   17.262009]  ? rcu_is_watching+0x19/0xc0
[   17.262158]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   17.262357]  ? __pfx_iommufd_fops_release+0x10/0x10
[   17.262537]  __fput+0x424/0xaf0
[   17.262671]  ____fput+0x1f/0x30
[   17.262796]  task_work_run+0x19d/0x2b0
[   17.262954]  ? __pfx_task_work_run+0x10/0x10
[   17.263117]  ? __sanitizer_cov_trace_const_cmp1+0x1e/0x30
[   17.263315]  ? switch_task_namespaces+0xa9/0xe0
[   17.263485]  do_exit+0xac9/0x2790
[   17.263613]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   17.263840]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   17.264021]  ? __pfx_do_exit+0x10/0x10
[   17.264163]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   17.264360]  ? security_file_ioctl+0x9d/0xd0
[   17.264523]  make_task_dead+0x182/0x3c0
[   17.264668]  rewind_stack_and_make_dead+0x17/0x20
[   17.264843] RIP: 0033:0x7fabc0e3ee5d
[   17.264978] Code: Unable to access opcode bytes at 0x7fabc0e3ee33.
[   17.265197] RSP: 002b:00007ffe8e8e1d88 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   17.265468] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007fabc0e3ee5d
[   17.265720] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   17.265973] RBP: 00007ffe8e8e1da0 R08: 0000000000000800 R09: 0000000000000800
[   17.266226] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffe8e8e1eb8
[   17.266478] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007fabc1155000
[   17.266742]  </TASK>
[   17.266832] irq event stamp: 0
[   17.266950] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   17.266979] systemd-journald[136]: Data hash table of /run/log/journal/938775788448454bb5b34822d5730c41/system.journal has a fill level at 75.0 (5446 of 7260 items, 4182016 file size, 767 bytes per hash table item), suggesting rotation.
[   17.267173] hardirqs last disabled at (0): [<ffffffff8122f2d1>] copy_process+0x1c51/0x7140
[   17.267905] systemd-journald[136]: /run/log/journal/938775788448454bb5b34822d5730c41/system.journal: Journal header limits reached or header out-of-date, rotating.
[   17.268185] softirqs last  enabled at (0): [<ffffffff8122f312>] copy_process+0x1c92/0x7140
[   17.268971] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   17.269194] ---[ end trace 0000000000000000 ]---
[   17.271875] iommufd_mock iommufd_mock85: Adding to iommu group 85
[   17.272121] iommufd_mock iommufd_mock85: Removing from iommu group 85
[   17.272371] general protection fault, probably for non-canonical address 0xdffffc0000000006: 0000 [#86] PREEMPT SMP KASAN NOPTI
[   17.272773] KASAN: null-ptr-deref in range [0x0000000000000030-0x0000000000000037]
[   17.273043] CPU: 0 PID: 803 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   17.273351] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   17.273750] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   17.273961] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   17.274611] RSP: 0018:ffff88802458fba8 EFLAGS: 00010206
[   17.274807] RAX: dffffc0000000000 RBX: ffff888010898000 RCX: 0000000000000000
[   17.275061] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   17.275315] RBP: ffff88802458fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   17.275569] R10: ffff88800aad88df R11: 5f6466756d6d6f69 R12: 0000000000000000
[   17.275826] R13: ffffffff85cc0180 R14: ffff88800bd79260 R15: ffffffff87070ae0
[   17.276083] FS:  00007fab65429600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   17.276369] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   17.276576] CR2: 0000000020000080 CR3: 0000000012646000 CR4: 0000000000750ef0
[   17.276831] PKRU: 55555554
[   17.276933] Call Trace:
[   17.277026]  <TASK>
[   17.277108]  ? show_regs+0x6e/0x80
[   17.277242]  ? die_addr+0x45/0xb0
[   17.277374]  ? exc_general_protection+0x159/0x250
[   17.277555]  ? asm_exc_general_protection+0x2b/0x30
[   17.277738]  ? sysfs_remove_link_from_group+0x21/0x90
[   17.277926]  ? sysfs_remove_link_from_group+0x37/0x90
[   17.278114]  ? sysfs_remove_link_from_group+0x21/0x90
[   17.278302]  iommu_device_unlink+0x85/0xd0
[   17.278456]  iommu_deinit_device+0x11f/0x4c0
[   17.278620]  __iommu_group_remove_device+0x26b/0x300
[   17.278815]  iommu_group_remove_device+0x8a/0xb0
[   17.278994]  iommufd_test+0x1f1a/0x2d10
[   17.279138]  ? __pfx_lock_release+0x10/0x10
[   17.279296]  ? __pfx_lock_acquire+0x10/0x10
[   17.279455]  ? __pfx_iommufd_test+0x10/0x10
[   17.279613]  ? __sanitizer_cov_trace_const_cmp8+0x1c/0x30
[   17.279814]  iommufd_fops_ioctl+0x377/0x510
[   17.279974]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   17.280150]  ? trace_hardirqs_on+0x26/0x120
[   17.280310]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   17.280540]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   17.280724]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   17.280924]  ? security_file_ioctl+0x9d/0xd0
[   17.281088]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   17.281264]  __x64_sys_ioctl+0x1b9/0x230
[   17.281412]  do_syscall_64+0x3c/0x90
[   17.281549]  entry_SYSCALL_64_after_hwframe+0x6e/0xd8
[   17.281735] RIP: 0033:0x7fab6523ee5d
[   17.281872] Code: ff c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d 93 af 1b 00 f7 d8 64 89 01 48
[   17.282516] RSP: 002b:00007ffef2bbec78 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   17.282794] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007fab6523ee5d
[   17.283053] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   17.283307] RBP: 00007ffef2bbec90 R08: 0000000000000800 R09: 0000000000000800
[   17.283561] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffef2bbeda8
[   17.283815] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007fab6546a000
[   17.284074]  </TASK>
[   17.284158] Modules linked in:
[   17.284323] ---[ end trace 0000000000000000 ]---
[   17.284495] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   17.284703] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   17.285349] RSP: 0018:ffff88802457fba8 EFLAGS: 00010206
[   17.285540] RAX: dffffc0000000000 RBX: ffff888014f9b000 RCX: 0000000000000000
[   17.285793] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   17.286049] RBP: ffff88802457fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   17.286305] R10: ffff88800aad88df R11: 0000000000000001 R12: 0000000000000000
[   17.286558] R13: ffffffff85cc0180 R14: ffff8880109b6ac0 R15: ffffffff87070ae0
[   17.286851] FS:  00007fab65429600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   17.287140] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   17.287348] CR2: 0000000020000080 CR3: 0000000012646000 CR4: 0000000000750ef0
[   17.287602] PKRU: 55555554
[   17.287988] ------------[ cut here ]------------
[   17.288159] WARNING: CPU: 0 PID: 803 at drivers/iommu/iommufd/main.c:258 iommufd_fops_release+0x2a3/0x300
[   17.288499] Modules linked in:
[   17.288627] CPU: 0 PID: 803 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   17.289026] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   17.289497] RIP: 0010:iommufd_fops_release+0x2a3/0x300
[   17.289692] Code: 45 d0 65 48 2b 04 25 28 00 00 00 75 54 48 81 c4 88 00 00 00 31 c0 5b 41 5c 41 5d 41 5e 41 5f 5d c3 cc cc cc cc e8 ad 4f 0a fe <0f> 0b eb a6 e8 74 23 67 fe e9 f6 fe ff ff 48 89 85 50 ff ff ff e8
[   17.290403] RSP: 0018:ffff88802458fc00 EFLAGS: 00010293
[   17.290722] RAX: 0000000000000000 RBX: ffff88800fe06a08 RCX: 0000000000000000
[   17.290986] RDX: ffff888011e82500 RSI: ffffffff835563e3 RDI: ffffffff86702b40
[   17.291245] RBP: ffff88802458fcb0 R08: 0000000000000000 R09: fffffbfff0eb2644
[   17.291503] R10: ffffffff87593227 R11: ffff88801179ec00 R12: 0000000000000000
[   17.291781] R13: ffff888013308418 R14: ffff88802458fc48 R15: ffffffff83556140
[   17.292085] FS:  0000000000000000(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   17.292382] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   17.292651] CR2: 0000000020000080 CR3: 000000000687e000 CR4: 0000000000750ef0
[   17.292911] PKRU: 55555554
[   17.293016] Call Trace:
[   17.293121]  <TASK>
[   17.293251]  ? show_regs+0x6e/0x80
[   17.293386]  ? __warn+0xef/0x340
[   17.293514]  ? report_bug+0x25e/0x4b0
[   17.293657]  ? iommufd_fops_release+0x2a3/0x300
[   17.293889]  ? report_bug+0x2cb/0x4b0
[   17.294034]  ? handle_bug+0x46/0x90
[   17.294170]  ? exc_invalid_op+0x1d/0x50
[   17.294318]  ? asm_exc_invalid_op+0x1f/0x30
[   17.294496]  ? __pfx_iommufd_fops_release+0x10/0x10
[   17.294724]  ? iommufd_fops_release+0x2a3/0x300
[   17.294902]  ? iommufd_fops_release+0x2a3/0x300
[   17.295077]  ? __pfx_iommufd_fops_release+0x10/0x10
[   17.295260]  ? rcu_is_watching+0x19/0xc0
[   17.295413]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   17.295647]  ? __pfx_iommufd_fops_release+0x10/0x10
[   17.295876]  __fput+0x424/0xaf0
[   17.296006]  ____fput+0x1f/0x30
[   17.296131]  task_work_run+0x19d/0x2b0
[   17.296286]  ? __pfx_task_work_run+0x10/0x10
[   17.296508]  ? __sanitizer_cov_trace_const_cmp1+0x1e/0x30
[   17.296710]  ? switch_task_namespaces+0xa9/0xe0
[   17.296885]  do_exit+0xac9/0x2790
[   17.297074]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   17.297306]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   17.297493]  ? __pfx_do_exit+0x10/0x10
[   17.297645]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   17.297903]  ? security_file_ioctl+0x9d/0xd0
[   17.298070]  make_task_dead+0x182/0x3c0
[   17.298218]  rewind_stack_and_make_dead+0x17/0x20
[   17.298457] RIP: 0033:0x7fab6523ee5d
[   17.298605] Code: Unable to access opcode bytes at 0x7fab6523ee33.
[   17.298831] RSP: 002b:00007ffef2bbec78 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   17.299107] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007fab6523ee5d
[   17.299365] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   17.299684] RBP: 00007ffef2bbec90 R08: 0000000000000800 R09: 0000000000000800
[   17.299944] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffef2bbeda8
[   17.300266] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007fab6546a000
[   17.300531]  </TASK>
[   17.300617] irq event stamp: 0
[   17.300734] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   17.301028] hardirqs last disabled at (0): [<ffffffff8122f2d1>] copy_process+0x1c51/0x7140
[   17.301328] softirqs last  enabled at (0): [<ffffffff8122f312>] copy_process+0x1c92/0x7140
[   17.301691] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   17.301921] ---[ end trace 0000000000000000 ]---
[   17.304789] iommufd_mock iommufd_mock86: Adding to iommu group 86
[   17.305037] iommufd_mock iommufd_mock86: Removing from iommu group 86
[   17.305291] general protection fault, probably for non-canonical address 0xdffffc0000000006: 0000 [#87] PREEMPT SMP KASAN NOPTI
[   17.305713] KASAN: null-ptr-deref in range [0x0000000000000030-0x0000000000000037]
[   17.306021] CPU: 0 PID: 805 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   17.306336] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   17.306745] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   17.306967] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   17.307622] RSP: 0018:ffff888017547ba8 EFLAGS: 00010206
[   17.307812] RAX: dffffc0000000000 RBX: ffff88801089f000 RCX: 0000000000000000
[   17.308065] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   17.308318] RBP: ffff888017547bc0 R08: 0000000000000001 R09: ffffed100155b11b
[   17.308572] R10: ffff88800aad88df R11: 5f6466756d6d6f69 R12: 0000000000000000
[   17.308824] R13: ffffffff85cc0180 R14: ffff88800bd79580 R15: ffffffff87070ae0
[   17.309078] FS:  00007f0526598600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   17.309363] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   17.309570] CR2: 0000000020000080 CR3: 00000000132a0000 CR4: 0000000000750ef0
[   17.309825] PKRU: 55555554
[   17.309928] Call Trace:
[   17.310020]  <TASK>
[   17.310103]  ? show_regs+0x6e/0x80
[   17.310237]  ? die_addr+0x45/0xb0
[   17.310369]  ? exc_general_protection+0x159/0x250
[   17.310550]  ? asm_exc_general_protection+0x2b/0x30
[   17.310738]  ? sysfs_remove_link_from_group+0x21/0x90
[   17.310933]  ? sysfs_remove_link_from_group+0x37/0x90
[   17.311121]  ? sysfs_remove_link_from_group+0x21/0x90
[   17.311309]  iommu_device_unlink+0x85/0xd0
[   17.311463]  iommu_deinit_device+0x11f/0x4c0
[   17.311626]  __iommu_group_remove_device+0x26b/0x300
[   17.311813]  iommu_group_remove_device+0x8a/0xb0
[   17.311987]  iommufd_test+0x1f1a/0x2d10
[   17.312131]  ? __pfx_lock_release+0x10/0x10
[   17.312289]  ? __pfx_lock_acquire+0x10/0x10
[   17.312448]  ? __pfx_iommufd_test+0x10/0x10
[   17.312605]  ? __sanitizer_cov_trace_const_cmp8+0x1c/0x30
[   17.312806]  iommufd_fops_ioctl+0x377/0x510
[   17.312965]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   17.313141]  ? trace_hardirqs_on+0x26/0x120
[   17.313301]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   17.313530]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   17.313714]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   17.313912]  ? security_file_ioctl+0x9d/0xd0
[   17.314076]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   17.314252]  __x64_sys_ioctl+0x1b9/0x230
[   17.314401]  do_syscall_64+0x3c/0x90
[   17.314536]  entry_SYSCALL_64_after_hwframe+0x6e/0xd8
[   17.314738] RIP: 0033:0x7f052623ee5d
[   17.314880] Code: ff c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d 93 af 1b 00 f7 d8 64 89 01 48
[   17.315526] RSP: 002b:00007ffe7ee36798 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   17.315796] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f052623ee5d
[   17.316050] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   17.316303] RBP: 00007ffe7ee367b0 R08: 0000000000000800 R09: 0000000000000800
[   17.316556] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffe7ee368c8
[   17.316809] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f05265d9000
[   17.317068]  </TASK>
[   17.317152] Modules linked in:
[   17.317395] ---[ end trace 0000000000000000 ]---
[   17.317568] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   17.317794] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   17.318460] RSP: 0018:ffff88802457fba8 EFLAGS: 00010206
[   17.318660] RAX: dffffc0000000000 RBX: ffff888014f9b000 RCX: 0000000000000000
[   17.318921] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   17.319260] RBP: ffff88802457fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   17.319514] R10: ffff88800aad88df R11: 0000000000000001 R12: 0000000000000000
[   17.319777] R13: ffffffff85cc0180 R14: ffff8880109b6ac0 R15: ffffffff87070ae0
[   17.320091] FS:  00007f0526598600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   17.320378] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   17.320610] CR2: 0000000020000080 CR3: 00000000132a0000 CR4: 0000000000750ef0
[   17.320908] PKRU: 55555554
[   17.321320] ------------[ cut here ]------------
[   17.321492] WARNING: CPU: 0 PID: 805 at drivers/iommu/iommufd/main.c:258 iommufd_fops_release+0x2a3/0x300
[   17.321847] Modules linked in:
[   17.322021] CPU: 0 PID: 805 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   17.322336] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   17.322841] RIP: 0010:iommufd_fops_release+0x2a3/0x300
[   17.323035] Code: 45 d0 65 48 2b 04 25 28 00 00 00 75 54 48 81 c4 88 00 00 00 31 c0 5b 41 5c 41 5d 41 5e 41 5f 5d c3 cc cc cc cc e8 ad 4f 0a fe <0f> 0b eb a6 e8 74 23 67 fe e9 f6 fe ff ff 48 89 85 50 ff ff ff e8
[   17.323756] RSP: 0018:ffff888017547c00 EFLAGS: 00010293
[   17.323950] RAX: 0000000000000000 RBX: ffff88800fe06408 RCX: 0000000000000000
[   17.324209] RDX: ffff888011e84a00 RSI: ffffffff835563e3 RDI: ffffffff86702b40
[   17.324526] RBP: ffff888017547cb0 R08: 0000000000000000 R09: fffffbfff0eb2644
[   17.324785] R10: ffffffff87593227 R11: ffff8880131ca800 R12: 0000000000000000
[   17.325102] R13: ffff888013309598 R14: ffff888017547c48 R15: ffffffff83556140
[   17.325361] FS:  0000000000000000(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   17.325700] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   17.325912] CR2: 0000000020000080 CR3: 000000000687e000 CR4: 0000000000750ef0
[   17.326172] PKRU: 55555554
[   17.326287] Call Trace:
[   17.326417]  <TASK>
[   17.326501]  ? show_regs+0x6e/0x80
[   17.326644]  ? __warn+0xef/0x340
[   17.326777]  ? report_bug+0x25e/0x4b0
[   17.326937]  ? iommufd_fops_release+0x2a3/0x300
[   17.327110]  ? report_bug+0x2cb/0x4b0
[   17.327262]  ? handle_bug+0x46/0x90
[   17.327443]  ? exc_invalid_op+0x1d/0x50
[   17.327591]  ? asm_exc_invalid_op+0x1f/0x30
[   17.327750]  ? __pfx_iommufd_fops_release+0x10/0x10
[   17.327937]  ? iommufd_fops_release+0x2a3/0x300
[   17.328161]  ? iommufd_fops_release+0x2a3/0x300
[   17.328338]  ? __pfx_iommufd_fops_release+0x10/0x10
[   17.328523]  ? rcu_is_watching+0x19/0xc0
[   17.328675]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   17.328878]  ? __pfx_iommufd_fops_release+0x10/0x10
[   17.329062]  __fput+0x424/0xaf0
[   17.329190]  ____fput+0x1f/0x30
[   17.329315]  task_work_run+0x19d/0x2b0
[   17.329461]  ? __pfx_task_work_run+0x10/0x10
[   17.329624]  ? __sanitizer_cov_trace_const_cmp1+0x1e/0x30
[   17.329826]  ? switch_task_namespaces+0xa9/0xe0
[   17.330001]  do_exit+0xac9/0x2790
[   17.330131]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   17.330364]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   17.330551]  ? __pfx_do_exit+0x10/0x10
[   17.330706]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   17.330913]  ? security_file_ioctl+0x9d/0xd0
[   17.331080]  make_task_dead+0x182/0x3c0
[   17.331229]  rewind_stack_and_make_dead+0x17/0x20
[   17.331408] RIP: 0033:0x7f052623ee5d
[   17.331545] Code: Unable to access opcode bytes at 0x7f052623ee33.
[   17.331768] RSP: 002b:00007ffe7ee36798 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   17.332044] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f052623ee5d
[   17.332302] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   17.332560] RBP: 00007ffe7ee367b0 R08: 0000000000000800 R09: 0000000000000800
[   17.332818] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffe7ee368c8
[   17.333077] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f05265d9000
[   17.333341]  </TASK>
[   17.333428] irq event stamp: 0
[   17.333545] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   17.333774] hardirqs last disabled at (0): [<ffffffff8122f2d1>] copy_process+0x1c51/0x7140
[   17.334074] softirqs last  enabled at (0): [<ffffffff8122f312>] copy_process+0x1c92/0x7140
[   17.334373] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   17.334635] ---[ end trace 0000000000000000 ]---
[   17.337116] iommufd_mock iommufd_mock87: Adding to iommu group 87
[   17.337367] iommufd_mock iommufd_mock87: Removing from iommu group 87
[   17.337630] general protection fault, probably for non-canonical address 0xdffffc0000000006: 0000 [#88] PREEMPT SMP KASAN NOPTI
[   17.338048] KASAN: null-ptr-deref in range [0x0000000000000030-0x0000000000000037]
[   17.338323] CPU: 1 PID: 806 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   17.338642] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   17.339060] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   17.339277] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   17.339939] RSP: 0018:ffff8880116bfba8 EFLAGS: 00010206
[   17.340134] RAX: dffffc0000000000 RBX: ffff888012699000 RCX: 0000000000000000
[   17.340393] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   17.340653] RBP: ffff8880116bfbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   17.340913] R10: ffff88800aad88df R11: 5f6466756d6d6f69 R12: 0000000000000000
[   17.341175] R13: ffffffff85cc0180 R14: ffff88801679ab80 R15: ffffffff87070ae0
[   17.341438] FS:  00007f349e80d600(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
[   17.341730] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   17.341942] CR2: 0000000020000080 CR3: 0000000020928000 CR4: 0000000000750ee0
[   17.342210] PKRU: 55555554
[   17.342314] Call Trace:
[   17.342409]  <TASK>
[   17.342493]  ? show_regs+0x6e/0x80
[   17.342631]  ? die_addr+0x45/0xb0
[   17.342767]  ? exc_general_protection+0x159/0x250
[   17.342953]  ? asm_exc_general_protection+0x2b/0x30
[   17.343142]  ? sysfs_remove_link_from_group+0x21/0x90
[   17.343335]  ? sysfs_remove_link_from_group+0x37/0x90
[   17.343527]  ? sysfs_remove_link_from_group+0x21/0x90
[   17.343720]  iommu_device_unlink+0x85/0xd0
[   17.343878]  iommu_deinit_device+0x11f/0x4c0
[   17.344045]  __iommu_group_remove_device+0x26b/0x300
[   17.344237]  iommu_group_remove_device+0x8a/0xb0
[   17.344415]  iommufd_test+0x1f1a/0x2d10
[   17.344563]  ? __pfx_lock_release+0x10/0x10
[   17.344724]  ? __pfx_lock_acquire+0x10/0x10
[   17.344887]  ? __pfx_iommufd_test+0x10/0x10
[   17.345049]  ? __sanitizer_cov_trace_const_cmp8+0x1c/0x30
[   17.345255]  iommufd_fops_ioctl+0x377/0x510
[   17.345418]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   17.345598]  ? trace_hardirqs_on+0x26/0x120
[   17.345762]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   17.345997]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   17.346186]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   17.346390]  ? security_file_ioctl+0x9d/0xd0
[   17.346558]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   17.346739]  __x64_sys_ioctl+0x1b9/0x230
[   17.346893]  do_syscall_64+0x3c/0x90
[   17.347032]  entry_SYSCALL_64_after_hwframe+0x6e/0xd8
[   17.347222] RIP: 0033:0x7f349e63ee5d
[   17.347360] Code: ff c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d 93 af 1b 00 f7 d8 64 89 01 48
[   17.348021] RSP: 002b:00007ffdd2dc6e38 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   17.348303] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f349e63ee5d
[   17.348563] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   17.348822] RBP: 00007ffdd2dc6e50 R08: 0000000000000800 R09: 0000000000000800
[   17.349082] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffdd2dc6f68
[   17.349341] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f349e84e000
[   17.349607]  </TASK>
[   17.349693] Modules linked in:
[   17.349858] ---[ end trace 0000000000000000 ]---
[   17.350032] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   17.350246] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   17.350934] RSP: 0018:ffff88802457fba8 EFLAGS: 00010206
[   17.351129] RAX: dffffc0000000000 RBX: ffff888014f9b000 RCX: 0000000000000000
[   17.351390] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   17.351649] RBP: ffff88802457fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   17.351909] R10: ffff88800aad88df R11: 0000000000000001 R12: 0000000000000000
[   17.352169] R13: ffffffff85cc0180 R14: ffff8880109b6ac0 R15: ffffffff87070ae0
[   17.352430] FS:  00007f349e80d600(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
[   17.352723] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   17.352935] CR2: 0000000020000080 CR3: 0000000020928000 CR4: 0000000000750ee0
[   17.353196] PKRU: 55555554
[   17.353705] ------------[ cut here ]------------
[   17.353888] WARNING: CPU: 0 PID: 806 at drivers/iommu/iommufd/main.c:258 iommufd_fops_release+0x2a3/0x300
[   17.354236] Modules linked in:
[   17.354355] CPU: 0 PID: 806 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   17.354707] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   17.355117] RIP: 0010:iommufd_fops_release+0x2a3/0x300
[   17.355306] Code: 45 d0 65 48 2b 04 25 28 00 00 00 75 54 48 81 c4 88 00 00 00 31 c0 5b 41 5c 41 5d 41 5e 41 5f 5d c3 cc cc cc cc e8 ad 4f 0a fe <0f> 0b eb a6 e8 74 23 67 fe e9 f6 fe ff ff 48 89 85 50 ff ff ff e8
[   17.355950] RSP: 0018:ffff8880116bfc00 EFLAGS: 00010293
[   17.356139] RAX: 0000000000000000 RBX: ffff88801248a208 RCX: 0000000000000000
[   17.356392] RDX: ffff888010b50000 RSI: ffffffff835563e3 RDI: ffffffff86702b40
[   17.356645] RBP: ffff8880116bfcb0 R08: 0000000000000000 R09: fffffbfff0eb2644
[   17.356898] R10: ffffffff87593227 R11: ffff888018964e00 R12: 0000000000000000
[   17.357150] R13: ffff888013270918 R14: ffff8880116bfc48 R15: ffffffff83556140
[   17.357403] FS:  0000000000000000(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   17.357688] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   17.357895] CR2: 00007fa281978028 CR3: 000000000687e000 CR4: 0000000000750ef0
[   17.358149] PKRU: 55555554
[   17.358251] Call Trace:
[   17.358344]  <TASK>
[   17.358426]  ? show_regs+0x6e/0x80
[   17.358558]  ? __warn+0xef/0x340
[   17.358706]  ? report_bug+0x25e/0x4b0
[   17.358861]  ? iommufd_fops_release+0x2a3/0x300
[   17.359032]  ? report_bug+0x2cb/0x4b0
[   17.359177]  ? handle_bug+0x46/0x90
[   17.359317]  ? exc_invalid_op+0x1d/0x50
[   17.359462]  ? asm_exc_invalid_op+0x1f/0x30
[   17.359617]  ? __pfx_iommufd_fops_release+0x10/0x10
[   17.359800]  ? iommufd_fops_release+0x2a3/0x300
[   17.359970]  ? iommufd_fops_release+0x2a3/0x300
[   17.360141]  ? __pfx_iommufd_fops_release+0x10/0x10
[   17.360321]  ? rcu_is_watching+0x19/0xc0
[   17.360471]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   17.360670]  ? __pfx_iommufd_fops_release+0x10/0x10
[   17.360850]  __fput+0x424/0xaf0
[   17.360977]  ____fput+0x1f/0x30
[   17.361099]  task_work_run+0x19d/0x2b0
[   17.361242]  ? __pfx_task_work_run+0x10/0x10
[   17.361402]  ? __sanitizer_cov_trace_const_cmp1+0x1e/0x30
[   17.361602]  ? switch_task_namespaces+0xa9/0xe0
[   17.361772]  do_exit+0xac9/0x2790
[   17.361900]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   17.362127]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   17.362309]  ? __pfx_do_exit+0x10/0x10
[   17.362450]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   17.362678]  ? security_file_ioctl+0x9d/0xd0
[   17.362848]  make_task_dead+0x182/0x3c0
[   17.362997]  rewind_stack_and_make_dead+0x17/0x20
[   17.363177] RIP: 0033:0x7f349e63ee5d
[   17.363315] Code: Unable to access opcode bytes at 0x7f349e63ee33.
[   17.363534] RSP: 002b:00007ffdd2dc6e38 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   17.363804] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f349e63ee5d
[   17.364056] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   17.364309] RBP: 00007ffdd2dc6e50 R08: 0000000000000800 R09: 0000000000000800
[   17.364562] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffdd2dc6f68
[   17.364814] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f349e84e000
[   17.365072]  </TASK>
[   17.365157] irq event stamp: 0
[   17.365271] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   17.365496] hardirqs last disabled at (0): [<ffffffff8122f2d1>] copy_process+0x1c51/0x7140
[   17.365790] softirqs last  enabled at (0): [<ffffffff8122f312>] copy_process+0x1c92/0x7140
[   17.366083] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   17.366308] ---[ end trace 0000000000000000 ]---
[   17.368766] iommufd_mock iommufd_mock88: Adding to iommu group 88
[   17.369016] iommufd_mock iommufd_mock88: Removing from iommu group 88
[   17.369271] general protection fault, probably for non-canonical address 0xdffffc0000000006: 0000 [#89] PREEMPT SMP KASAN NOPTI
[   17.369682] KASAN: null-ptr-deref in range [0x0000000000000030-0x0000000000000037]
[   17.369958] CPU: 1 PID: 807 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   17.370273] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   17.370682] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   17.370911] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   17.371559] RSP: 0018:ffff888017547ba8 EFLAGS: 00010206
[   17.371751] RAX: dffffc0000000000 RBX: ffff88801269c000 RCX: 0000000000000000
[   17.372006] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   17.372260] RBP: ffff888017547bc0 R08: 0000000000000001 R09: ffffed100155b11b
[   17.372515] R10: ffff88800aad88df R11: 5f6466756d6d6f69 R12: 0000000000000000
[   17.372770] R13: ffffffff85cc0180 R14: ffff88801679a3c0 R15: ffffffff87070ae0
[   17.373024] FS:  00007feeb75df600(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
[   17.373312] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   17.373520] CR2: 0000000020000080 CR3: 00000000132a0000 CR4: 0000000000750ee0
[   17.373775] PKRU: 55555554
[   17.373878] Call Trace:
[   17.373970]  <TASK>
[   17.374052]  ? show_regs+0x6e/0x80
[   17.374187]  ? die_addr+0x45/0xb0
[   17.374319]  ? exc_general_protection+0x159/0x250
[   17.374501]  ? asm_exc_general_protection+0x2b/0x30
[   17.374688]  ? sysfs_remove_link_from_group+0x21/0x90
[   17.374883]  ? sysfs_remove_link_from_group+0x37/0x90
[   17.375071]  ? sysfs_remove_link_from_group+0x21/0x90
[   17.375259]  iommu_device_unlink+0x85/0xd0
[   17.375414]  iommu_deinit_device+0x11f/0x4c0
[   17.375578]  __iommu_group_remove_device+0x26b/0x300
[   17.375765]  iommu_group_remove_device+0x8a/0xb0
[   17.375940]  iommufd_test+0x1f1a/0x2d10
[   17.376084]  ? __pfx_lock_release+0x10/0x10
[   17.376242]  ? __pfx_lock_acquire+0x10/0x10
[   17.376402]  ? __pfx_iommufd_test+0x10/0x10
[   17.376559]  ? __sanitizer_cov_trace_const_cmp8+0x1c/0x30
[   17.376761]  iommufd_fops_ioctl+0x377/0x510
[   17.376920]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   17.377097]  ? trace_hardirqs_on+0x26/0x120
[   17.377258]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   17.377488]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   17.377672]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   17.377872]  ? security_file_ioctl+0x9d/0xd0
[   17.378035]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   17.378212]  __x64_sys_ioctl+0x1b9/0x230
[   17.378361]  do_syscall_64+0x3c/0x90
[   17.378497]  entry_SYSCALL_64_after_hwframe+0x6e/0xd8
[   17.378687] RIP: 0033:0x7feeb723ee5d
[   17.378827] Code: ff c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d 93 af 1b 00 f7 d8 64 89 01 48
[   17.379479] RSP: 002b:00007fff8b58f098 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   17.379750] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007feeb723ee5d
[   17.380004] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   17.380259] RBP: 00007fff8b58f0b0 R08: 0000000000000800 R09: 0000000000000800
[   17.380514] R10: 0000000000000000 R11: 0000000000000213 R12: 00007fff8b58f1c8
[   17.380768] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007feeb7620000
[   17.381027]  </TASK>
[   17.381112] Modules linked in:
[   17.381283] ---[ end trace 0000000000000000 ]---
[   17.381457] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   17.381670] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   17.382331] RSP: 0018:ffff88802457fba8 EFLAGS: 00010206
[   17.382525] RAX: dffffc0000000000 RBX: ffff888014f9b000 RCX: 0000000000000000
[   17.382803] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   17.383064] RBP: ffff88802457fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   17.383318] R10: ffff88800aad88df R11: 0000000000000001 R12: 0000000000000000
[   17.383572] R13: ffffffff85cc0180 R14: ffff8880109b6ac0 R15: ffffffff87070ae0
[   17.383825] FS:  00007feeb75df600(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
[   17.384111] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   17.384320] CR2: 0000000020000080 CR3: 00000000132a0000 CR4: 0000000000750ee0
[   17.384574] PKRU: 55555554
[   17.384943] ------------[ cut here ]------------
[   17.385113] WARNING: CPU: 1 PID: 807 at drivers/iommu/iommufd/main.c:258 iommufd_fops_release+0x2a3/0x300
[   17.385456] Modules linked in:
[   17.385572] CPU: 1 PID: 807 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   17.385881] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   17.386280] RIP: 0010:iommufd_fops_release+0x2a3/0x300
[   17.386470] Code: 45 d0 65 48 2b 04 25 28 00 00 00 75 54 48 81 c4 88 00 00 00 31 c0 5b 41 5c 41 5d 41 5e 41 5f 5d c3 cc cc cc cc e8 ad 4f 0a fe <0f> 0b eb a6 e8 74 23 67 fe e9 f6 fe ff ff 48 89 85 50 ff ff ff e8
[   17.387188] RSP: 0018:ffff888017547c00 EFLAGS: 00010293
[   17.387379] RAX: 0000000000000000 RBX: ffff88801248a908 RCX: 0000000000000000
[   17.387635] RDX: ffff8880121d8000 RSI: ffffffff835563e3 RDI: ffffffff86702b48
[   17.387889] RBP: ffff888017547cb0 R08: 0000000000000000 R09: fffffbfff0eb2644
[   17.388144] R10: ffffffff87593227 R11: ffff888018b66a00 R12: 0000000000000000
[   17.388398] R13: ffff8880132bfa98 R14: ffff888017547c48 R15: ffffffff83556140
[   17.388652] FS:  0000000000000000(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
[   17.388939] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   17.389147] CR2: 0000000020000080 CR3: 000000000687e000 CR4: 0000000000750ee0
[   17.389402] PKRU: 55555554
[   17.389505] Call Trace:
[   17.389597]  <TASK>
[   17.389680]  ? show_regs+0x6e/0x80
[   17.389811]  ? __warn+0xef/0x340
[   17.389937]  ? report_bug+0x25e/0x4b0
[   17.390077]  ? iommufd_fops_release+0x2a3/0x300
[   17.390248]  ? report_bug+0x2cb/0x4b0
[   17.390390]  ? handle_bug+0x46/0x90
[   17.390524]  ? exc_invalid_op+0x1d/0x50
[   17.390676]  ? asm_exc_invalid_op+0x1f/0x30
[   17.390836]  ? __pfx_iommufd_fops_release+0x10/0x10
[   17.391019]  ? iommufd_fops_release+0x2a3/0x300
[   17.391189]  ? iommufd_fops_release+0x2a3/0x300
[   17.391361]  ? __pfx_iommufd_fops_release+0x10/0x10
[   17.391541]  ? rcu_is_watching+0x19/0xc0
[   17.391691]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   17.391890]  ? __pfx_iommufd_fops_release+0x10/0x10
[   17.392072]  __fput+0x424/0xaf0
[   17.392199]  ____fput+0x1f/0x30
[   17.392322]  task_work_run+0x19d/0x2b0
[   17.392466]  ? __pfx_task_work_run+0x10/0x10
[   17.392626]  ? __sanitizer_cov_trace_const_cmp1+0x1e/0x30
[   17.392824]  ? switch_task_namespaces+0xa9/0xe0
[   17.392996]  do_exit+0xac9/0x2790
[   17.393124]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   17.393352]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   17.393536]  ? __pfx_do_exit+0x10/0x10
[   17.393678]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   17.393876]  ? security_file_ioctl+0x9d/0xd0
[   17.394040]  make_task_dead+0x182/0x3c0
[   17.394186]  rewind_stack_and_make_dead+0x17/0x20
[   17.394362] RIP: 0033:0x7feeb723ee5d
[   17.394497] Code: Unable to access opcode bytes at 0x7feeb723ee33.
[   17.394729] RSP: 002b:00007fff8b58f098 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   17.395003] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007feeb723ee5d
[   17.395259] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   17.395513] RBP: 00007fff8b58f0b0 R08: 0000000000000800 R09: 0000000000000800
[   17.395767] R10: 0000000000000000 R11: 0000000000000213 R12: 00007fff8b58f1c8
[   17.396022] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007feeb7620000
[   17.396281]  </TASK>
[   17.396366] irq event stamp: 0
[   17.396480] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   17.396706] hardirqs last disabled at (0): [<ffffffff8122f2d1>] copy_process+0x1c51/0x7140
[   17.397001] softirqs last  enabled at (0): [<ffffffff8122f312>] copy_process+0x1c92/0x7140
[   17.397296] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   17.397521] ---[ end trace 0000000000000000 ]---
[   17.400042] iommufd_mock iommufd_mock89: Adding to iommu group 89
[   17.400296] iommufd_mock iommufd_mock89: Removing from iommu group 89
[   17.400551] general protection fault, probably for non-canonical address 0xdffffc0000000006: 0000 [#90] PREEMPT SMP KASAN NOPTI
[   17.400962] KASAN: null-ptr-deref in range [0x0000000000000030-0x0000000000000037]
[   17.401230] CPU: 1 PID: 808 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   17.401539] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   17.401938] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   17.402148] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   17.402827] RSP: 0018:ffff888013db7ba8 EFLAGS: 00010206
[   17.403023] RAX: dffffc0000000000 RBX: ffff888012698000 RCX: 0000000000000000
[   17.403276] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   17.403563] RBP: ffff888013db7bc0 R08: 0000000000000001 R09: ffffed100155b11b
[   17.403865] R10: ffff88800aad88df R11: 5f6466756d6d6f69 R12: 0000000000000000
[   17.404119] R13: ffffffff85cc0180 R14: ffff88801679ae20 R15: ffffffff87070ae0
[   17.404373] FS:  00007f6b87429600(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
[   17.404659] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   17.404867] CR2: 0000000020000080 CR3: 00000000132a0000 CR4: 0000000000750ee0
[   17.405121] PKRU: 55555554
[   17.405224] Call Trace:
[   17.405317]  <TASK>
[   17.405399]  ? show_regs+0x6e/0x80
[   17.405534]  ? die_addr+0x45/0xb0
[   17.405666]  ? exc_general_protection+0x159/0x250
[   17.405847]  ? asm_exc_general_protection+0x2b/0x30
[   17.406031]  ? sysfs_remove_link_from_group+0x21/0x90
[   17.406220]  ? sysfs_remove_link_from_group+0x37/0x90
[   17.406408]  ? sysfs_remove_link_from_group+0x21/0x90
[   17.406597]  iommu_device_unlink+0x85/0xd0
[   17.406757]  iommu_deinit_device+0x11f/0x4c0
[   17.406926]  __iommu_group_remove_device+0x26b/0x300
[   17.407112]  iommu_group_remove_device+0x8a/0xb0
[   17.407302]  iommufd_test+0x1f1a/0x2d10
[   17.407479]  ? __pfx_lock_release+0x10/0x10
[   17.407700]  ? __pfx_lock_acquire+0x10/0x10
[   17.407933]  ? __pfx_iommufd_test+0x10/0x10
[   17.408173]  ? __sanitizer_cov_trace_const_cmp8+0x1c/0x30
[   17.408476]  iommufd_fops_ioctl+0x377/0x510
[   17.408711]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   17.408954]  ? trace_hardirqs_on+0x26/0x120
[   17.409115]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   17.409343]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   17.409526]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   17.409725]  ? security_file_ioctl+0x9d/0xd0
[   17.409887]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   17.410062]  __x64_sys_ioctl+0x1b9/0x230
[   17.410210]  do_syscall_64+0x3c/0x90
[   17.410345]  entry_SYSCALL_64_after_hwframe+0x6e/0xd8
[   17.410530] RIP: 0033:0x7f6b8723ee5d
[   17.410675] Code: ff c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d 93 af 1b 00 f7 d8 64 89 01 48
[   17.411354] RSP: 002b:00007ffcde6599e8 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   17.411625] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f6b8723ee5d
[   17.411877] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   17.412129] RBP: 00007ffcde659a00 R08: 0000000000000800 R09: 0000000000000800
[   17.412381] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffcde659b18
[   17.412633] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f6b8746a000
[   17.412891]  </TASK>
[   17.412975] Modules linked in:
[   17.413211] ---[ end trace 0000000000000000 ]---
[   17.413383] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   17.413595] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   17.414256] RSP: 0018:ffff88802457fba8 EFLAGS: 00010206
[   17.414449] RAX: dffffc0000000000 RBX: ffff888014f9b000 RCX: 0000000000000000
[   17.414713] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   17.414978] RBP: ffff88802457fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   17.415231] R10: ffff88800aad88df R11: 0000000000000001 R12: 0000000000000000
[   17.415491] R13: ffffffff85cc0180 R14: ffff8880109b6ac0 R15: ffffffff87070ae0
[   17.415743] FS:  00007f6b87429600(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
[   17.416028] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   17.416234] CR2: 0000000020000080 CR3: 00000000132a0000 CR4: 0000000000750ee0
[   17.416488] PKRU: 55555554
[   17.416849] ------------[ cut here ]------------
[   17.417017] WARNING: CPU: 1 PID: 808 at drivers/iommu/iommufd/main.c:258 iommufd_fops_release+0x2a3/0x300
[   17.417357] Modules linked in:
[   17.417472] CPU: 1 PID: 808 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   17.417780] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   17.418177] RIP: 0010:iommufd_fops_release+0x2a3/0x300
[   17.418365] Code: 45 d0 65 48 2b 04 25 28 00 00 00 75 54 48 81 c4 88 00 00 00 31 c0 5b 41 5c 41 5d 41 5e 41 5f 5d c3 cc cc cc cc e8 ad 4f 0a fe <0f> 0b eb a6 e8 74 23 67 fe e9 f6 fe ff ff 48 89 85 50 ff ff ff e8
[   17.419047] RSP: 0018:ffff888013db7c00 EFLAGS: 00010293
[   17.419243] RAX: 0000000000000000 RBX: ffff88801248aa08 RCX: 0000000000000000
[   17.419512] RDX: ffff8880121dca00 RSI: ffffffff835563e3 RDI: ffffffff86702b48
[   17.419764] RBP: ffff888013db7cb0 R08: 0000000000000000 R09: fffffbfff0eb2644
[   17.420017] R10: ffffffff87593227 R11: ffff888019753800 R12: 0000000000000000
[   17.420269] R13: ffff88801315a918 R14: ffff888013db7c48 R15: ffffffff83556140
[   17.420522] FS:  0000000000000000(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
[   17.420807] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   17.421013] CR2: 0000000020000080 CR3: 000000000687e000 CR4: 0000000000750ee0
[   17.421267] PKRU: 55555554
[   17.421368] Call Trace:
[   17.421461]  <TASK>
[   17.421543]  ? show_regs+0x6e/0x80
[   17.421674]  ? __warn+0xef/0x340
[   17.421799]  ? report_bug+0x25e/0x4b0
[   17.421939]  ? iommufd_fops_release+0x2a3/0x300
[   17.422108]  ? report_bug+0x2cb/0x4b0
[   17.422250]  ? handle_bug+0x46/0x90
[   17.422383]  ? exc_invalid_op+0x1d/0x50
[   17.422527]  ? asm_exc_invalid_op+0x1f/0x30
[   17.422693]  ? __pfx_iommufd_fops_release+0x10/0x10
[   17.422883]  ? iommufd_fops_release+0x2a3/0x300
[   17.423056]  ? iommufd_fops_release+0x2a3/0x300
[   17.423230]  ? __pfx_iommufd_fops_release+0x10/0x10
[   17.423474]  ? rcu_is_watching+0x19/0xc0
[   17.423650]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   17.423848]  ? __pfx_iommufd_fops_release+0x10/0x10
[   17.424028]  __fput+0x424/0xaf0
[   17.424153]  ____fput+0x1f/0x30
[   17.424276]  task_work_run+0x19d/0x2b0
[   17.424418]  ? __pfx_task_work_run+0x10/0x10
[   17.424578]  ? __sanitizer_cov_trace_const_cmp1+0x1e/0x30
[   17.424775]  ? switch_task_namespaces+0xa9/0xe0
[   17.424945]  do_exit+0xac9/0x2790
[   17.425073]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   17.425300]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   17.425483]  ? __pfx_do_exit+0x10/0x10
[   17.425624]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   17.425821]  ? security_file_ioctl+0x9d/0xd0
[   17.425983]  make_task_dead+0x182/0x3c0
[   17.426129]  rewind_stack_and_make_dead+0x17/0x20
[   17.426304] RIP: 0033:0x7f6b8723ee5d
[   17.426437] Code: Unable to access opcode bytes at 0x7f6b8723ee33.
[   17.426667] RSP: 002b:00007ffcde6599e8 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   17.426946] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f6b8723ee5d
[   17.427205] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   17.427466] RBP: 00007ffcde659a00 R08: 0000000000000800 R09: 0000000000000800
[   17.427718] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffcde659b18
[   17.427970] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f6b8746a000
[   17.428228]  </TASK>
[   17.428313] irq event stamp: 0
[   17.428428] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   17.428653] hardirqs last disabled at (0): [<ffffffff8122f2d1>] copy_process+0x1c51/0x7140
[   17.428946] softirqs last  enabled at (0): [<ffffffff8122f312>] copy_process+0x1c92/0x7140
[   17.429246] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   17.429470] ---[ end trace 0000000000000000 ]---
[   17.432008] iommufd_mock iommufd_mock90: Adding to iommu group 90
[   17.432258] iommufd_mock iommufd_mock90: Removing from iommu group 90
[   17.432512] general protection fault, probably for non-canonical address 0xdffffc0000000006: 0000 [#91] PREEMPT SMP KASAN NOPTI
[   17.432920] KASAN: null-ptr-deref in range [0x0000000000000030-0x0000000000000037]
[   17.433187] CPU: 1 PID: 809 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   17.433493] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   17.433890] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   17.434099] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   17.434774] RSP: 0018:ffff8880177efba8 EFLAGS: 00010206
[   17.434968] RAX: dffffc0000000000 RBX: ffff88801269b000 RCX: 0000000000000000
[   17.435222] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   17.435484] RBP: ffff8880177efbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   17.435736] R10: ffff88800aad88df R11: 5f6466756d6d6f69 R12: 0000000000000000
[   17.435988] R13: ffffffff85cc0180 R14: ffff88801679a280 R15: ffffffff87070ae0
[   17.436241] FS:  00007ff569669600(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
[   17.436525] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   17.436731] CR2: 0000000020000080 CR3: 00000000132a0000 CR4: 0000000000750ee0
[   17.436985] PKRU: 55555554
[   17.437087] Call Trace:
[   17.437179]  <TASK>
[   17.437261]  ? show_regs+0x6e/0x80
[   17.437395]  ? die_addr+0x45/0xb0
[   17.437525]  ? exc_general_protection+0x159/0x250
[   17.437705]  ? asm_exc_general_protection+0x2b/0x30
[   17.437888]  ? sysfs_remove_link_from_group+0x21/0x90
[   17.438075]  ? sysfs_remove_link_from_group+0x37/0x90
[   17.438279]  ? sysfs_remove_link_from_group+0x21/0x90
[   17.438466]  iommu_device_unlink+0x85/0xd0
[   17.438623]  iommu_deinit_device+0x11f/0x4c0
[   17.438793]  __iommu_group_remove_device+0x26b/0x300
[   17.438983]  iommu_group_remove_device+0x8a/0xb0
[   17.439157]  iommufd_test+0x1f1a/0x2d10
[   17.439311]  ? __pfx_lock_release+0x10/0x10
[   17.439470]  ? __pfx_lock_acquire+0x10/0x10
[   17.439629]  ? __pfx_iommufd_test+0x10/0x10
[   17.439786]  ? __sanitizer_cov_trace_const_cmp8+0x1c/0x30
[   17.439986]  iommufd_fops_ioctl+0x377/0x510
[   17.440145]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   17.440320]  ? trace_hardirqs_on+0x26/0x120
[   17.440480]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   17.440708]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   17.440891]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   17.441090]  ? security_file_ioctl+0x9d/0xd0
[   17.441253]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   17.441428]  __x64_sys_ioctl+0x1b9/0x230
[   17.441576]  do_syscall_64+0x3c/0x90
[   17.441711]  entry_SYSCALL_64_after_hwframe+0x6e/0xd8
[   17.441896] RIP: 0033:0x7ff56943ee5d
[   17.442031] Code: ff c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d 93 af 1b 00 f7 d8 64 89 01 48
[   17.442676] RSP: 002b:00007ffe7aaa5968 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   17.442979] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007ff56943ee5d
[   17.443231] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   17.443484] RBP: 00007ffe7aaa5980 R08: 0000000000000800 R09: 0000000000000800
[   17.443736] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffe7aaa5a98
[   17.443989] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007ff5696aa000
[   17.444246]  </TASK>
[   17.444331] Modules linked in:
[   17.444461] ---[ end trace 0000000000000000 ]---
[   17.444629] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   17.444836] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   17.445478] RSP: 0018:ffff88802457fba8 EFLAGS: 00010206
[   17.445666] RAX: dffffc0000000000 RBX: ffff888014f9b000 RCX: 0000000000000000
[   17.445919] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   17.446172] RBP: ffff88802457fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   17.446442] R10: ffff88800aad88df R11: 0000000000000001 R12: 0000000000000000
[   17.446819] R13: ffffffff85cc0180 R14: ffff8880109b6ac0 R15: ffffffff87070ae0
[   17.447077] FS:  00007ff569669600(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
[   17.447370] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   17.447629] CR2: 0000000020000080 CR3: 00000000132a0000 CR4: 0000000000750ee0
[   17.447885] PKRU: 55555554
[   17.448436] ------------[ cut here ]------------
[   17.448609] WARNING: CPU: 1 PID: 809 at drivers/iommu/iommufd/main.c:258 iommufd_fops_release+0x2a3/0x300
[   17.449021] Modules linked in:
[   17.449139] CPU: 1 PID: 809 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   17.449465] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   17.449895] RIP: 0010:iommufd_fops_release+0x2a3/0x300
[   17.450103] Code: 45 d0 65 48 2b 04 25 28 00 00 00 75 54 48 81 c4 88 00 00 00 31 c0 5b 41 5c 41 5d 41 5e 41 5f 5d c3 cc cc cc cc e8 ad 4f 0a fe <0f> 0b eb a6 e8 74 23 67 fe e9 f6 fe ff ff 48 89 85 50 ff ff ff e8
[   17.451016] RSP: 0018:ffff8880177efc00 EFLAGS: 00010293
[   17.451218] RAX: 0000000000000000 RBX: ffff88801248a408 RCX: 0000000000000000
[   17.451480] RDX: ffff888010562500 RSI: ffffffff835563e3 RDI: ffffffff86702b48
[   17.451775] RBP: ffff8880177efcb0 R08: 0000000000000000 R09: fffffbfff0eb2644
[   17.452151] R10: ffffffff87593227 R11: ffff88801311bc00 R12: 0000000000000000
[   17.452544] R13: ffff88801315a418 R14: ffff8880177efc48 R15: ffffffff83556140
[   17.452829] FS:  0000000000000000(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
[   17.453189] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   17.453406] CR2: 0000000020000080 CR3: 000000000687e000 CR4: 0000000000750ee0
[   17.453731] PKRU: 55555554
[   17.453840] Call Trace:
[   17.453937]  <TASK>
[   17.454047]  ? show_regs+0x6e/0x80
[   17.454206]  ? __warn+0xef/0x340
[   17.454368]  ? report_bug+0x25e/0x4b0
[   17.454515]  ? iommufd_fops_release+0x2a3/0x300
[   17.454710]  ? report_bug+0x2cb/0x4b0
[   17.454863]  ? handle_bug+0x46/0x90
[   17.455000]  ? exc_invalid_op+0x1d/0x50
[   17.455203]  ? asm_exc_invalid_op+0x1f/0x30
[   17.455366]  ? __pfx_iommufd_fops_release+0x10/0x10
[   17.455558]  ? iommufd_fops_release+0x2a3/0x300
[   17.455792]  ? iommufd_fops_release+0x2a3/0x300
[   17.455970]  ? __pfx_iommufd_fops_release+0x10/0x10
[   17.456158]  ? rcu_is_watching+0x19/0xc0
[   17.456373]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   17.456581]  ? __pfx_iommufd_fops_release+0x10/0x10
[   17.456774]  __fput+0x424/0xaf0
[   17.456952]  ____fput+0x1f/0x30
[   17.457080]  task_work_run+0x19d/0x2b0
[   17.457229]  ? __pfx_task_work_run+0x10/0x10
[   17.457410]  ? __sanitizer_cov_trace_const_cmp1+0x1e/0x30
[   17.457659]  ? switch_task_namespaces+0xa9/0xe0
[   17.457837]  do_exit+0xac9/0x2790
[   17.457976]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   17.458259]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   17.458449]  ? __pfx_do_exit+0x10/0x10
[   17.458623]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   17.458899]  ? security_file_ioctl+0x9d/0xd0
[   17.459071]  make_task_dead+0x182/0x3c0
[   17.459222]  rewind_stack_and_make_dead+0x17/0x20
[   17.459403] RIP: 0033:0x7ff56943ee5d
[   17.459544] Code: Unable to access opcode bytes at 0x7ff56943ee33.
[   17.459818] RSP: 002b:00007ffe7aaa5968 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   17.460098] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007ff56943ee5d
[   17.460413] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   17.460676] RBP: 00007ffe7aaa5980 R08: 0000000000000800 R09: 0000000000000800
[   17.460996] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffe7aaa5a98
[   17.461259] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007ff5696aa000
[   17.461578]  </TASK>
[   17.461666] irq event stamp: 0
[   17.461784] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   17.462028] hardirqs last disabled at (0): [<ffffffff8122f2d1>] copy_process+0x1c51/0x7140
[   17.462362] softirqs last  enabled at (0): [<ffffffff8122f312>] copy_process+0x1c92/0x7140
[   17.462726] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   17.462956] ---[ end trace 0000000000000000 ]---
[   17.467209] iommufd_mock iommufd_mock91: Adding to iommu group 91
[   17.467464] iommufd_mock iommufd_mock91: Removing from iommu group 91
[   17.467728] general protection fault, probably for non-canonical address 0xdffffc0000000006: 0000 [#92] PREEMPT SMP KASAN NOPTI
[   17.468146] KASAN: null-ptr-deref in range [0x0000000000000030-0x0000000000000037]
[   17.468485] CPU: 1 PID: 810 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   17.468805] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   17.469267] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   17.469503] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   17.470265] RSP: 0018:ffff888013db7ba8 EFLAGS: 00010206
[   17.470463] RAX: dffffc0000000000 RBX: ffff8880231a6000 RCX: 0000000000000000
[   17.470783] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   17.471046] RBP: ffff888013db7bc0 R08: 0000000000000001 R09: ffffed100155b11b
[   17.471321] R10: ffff88800aad88df R11: ffff88806ca45a00 R12: 0000000000000000
[   17.471626] R13: ffffffff85cc0180 R14: ffff88801679a080 R15: ffffffff87070ae0
[   17.471904] FS:  00007f493608e600(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
[   17.472239] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   17.472472] CR2: 0000000020000080 CR3: 00000000132ee000 CR4: 0000000000750ee0
[   17.472763] PKRU: 55555554
[   17.472870] Call Trace:
[   17.472970]  <TASK>
[   17.473094]  ? show_regs+0x6e/0x80
[   17.473233]  ? die_addr+0x45/0xb0
[   17.473369]  ? exc_general_protection+0x159/0x250
[   17.473568]  ? asm_exc_general_protection+0x2b/0x30
[   17.473792]  ? sysfs_remove_link_from_group+0x21/0x90
[   17.473987]  ? sysfs_remove_link_from_group+0x37/0x90
[   17.474200]  ? sysfs_remove_link_from_group+0x21/0x90
[   17.474426]  iommu_device_unlink+0x85/0xd0
[   17.474586]  iommu_deinit_device+0x11f/0x4c0
[   17.474774]  __iommu_group_remove_device+0x26b/0x300
[   17.474983]  iommu_group_remove_device+0x8a/0xb0
[   17.475164]  iommufd_test+0x1f1a/0x2d10
[   17.475320]  ? __pfx_lock_release+0x10/0x10
[   17.475508]  ? __pfx_lock_acquire+0x10/0x10
[   17.475673]  ? __pfx_iommufd_test+0x10/0x10
[   17.475843]  ? __sanitizer_cov_trace_const_cmp8+0x1c/0x30
[   17.476086]  iommufd_fops_ioctl+0x377/0x510
[   17.476251]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   17.476451]  ? trace_hardirqs_on+0x26/0x120
[   17.476632]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   17.476891]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   17.477121]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   17.477328]  ? security_file_ioctl+0x9d/0xd0
[   17.477497]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   17.477718]  __x64_sys_ioctl+0x1b9/0x230
[   17.477872]  do_syscall_64+0x3c/0x90
[   17.478013]  entry_SYSCALL_64_after_hwframe+0x6e/0xd8
[   17.478243] RIP: 0033:0x7f4935e3ee5d
[   17.478384] Code: ff c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d 93 af 1b 00 f7 d8 64 89 01 48
[   17.479119] RSP: 002b:00007ffe2452e618 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   17.479440] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f4935e3ee5d
[   17.479702] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   17.480010] RBP: 00007ffe2452e630 R08: 0000000000000800 R09: 0000000000000800
[   17.480272] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffe2452e748
[   17.480571] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f49360cf000
[   17.480839]  </TASK>
[   17.480927] Modules linked in:
[   17.481104] ---[ end trace 0000000000000000 ]---
[   17.481279] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   17.481494] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   17.482163] RSP: 0018:ffff88802457fba8 EFLAGS: 00010206
[   17.482359] RAX: dffffc0000000000 RBX: ffff888014f9b000 RCX: 0000000000000000
[   17.482629] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   17.482903] RBP: ffff88802457fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   17.483182] R10: ffff88800aad88df R11: 0000000000000001 R12: 0000000000000000
[   17.483471] R13: ffffffff85cc0180 R14: ffff8880109b6ac0 R15: ffffffff87070ae0
[   17.483734] FS:  00007f493608e600(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
[   17.484072] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   17.484288] CR2: 0000000020000080 CR3: 00000000132ee000 CR4: 0000000000750ee0
[   17.484551] PKRU: 55555554
[   17.485344] ------------[ cut here ]------------
[   17.485566] WARNING: CPU: 1 PID: 810 at drivers/iommu/iommufd/main.c:258 iommufd_fops_release+0x2a3/0x300
[   17.485922] Modules linked in:
[   17.486052] CPU: 1 PID: 810 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   17.486403] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   17.486880] RIP: 0010:iommufd_fops_release+0x2a3/0x300
[   17.487078] Code: 45 d0 65 48 2b 04 25 28 00 00 00 75 54 48 81 c4 88 00 00 00 31 c0 5b 41 5c 41 5d 41 5e 41 5f 5d c3 cc cc cc cc e8 ad 4f 0a fe <0f> 0b eb a6 e8 74 23 67 fe e9 f6 fe ff ff 48 89 85 50 ff ff ff e8
[   17.487795] RSP: 0018:ffff888013db7c00 EFLAGS: 00010293
[   17.487992] RAX: 0000000000000000 RBX: ffff88801248a708 RCX: 0000000000000000
[   17.488296] RDX: ffff88800fc12500 RSI: ffffffff835563e3 RDI: ffffffff86702b48
[   17.488559] RBP: ffff888013db7cb0 R08: 0000000000000000 R09: fffffbfff0eb2644
[   17.488840] R10: ffffffff87593227 R11: ffff888018abc400 R12: 0000000000000000
[   17.489121] R13: ffff888018b79598 R14: ffff888013db7c48 R15: ffffffff83556140
[   17.489388] FS:  0000000000000000(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
[   17.489716] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   17.489932] CR2: 00007f31340140f8 CR3: 00000000133d2000 CR4: 0000000000750ee0
[   17.490195] PKRU: 55555554
[   17.490301] Call Trace:
[   17.490398]  <TASK>
[   17.490483]  ? show_regs+0x6e/0x80
[   17.490660]  ? __warn+0xef/0x340
[   17.490795]  ? report_bug+0x25e/0x4b0
[   17.490941]  ? iommufd_fops_release+0x2a3/0x300
[   17.491117]  ? report_bug+0x2cb/0x4b0
[   17.491265]  ? handle_bug+0x46/0x90
[   17.491403]  ? exc_invalid_op+0x1d/0x50
[   17.491553]  ? asm_exc_invalid_op+0x1f/0x30
[   17.491714]  ? __pfx_iommufd_fops_release+0x10/0x10
[   17.491904]  ? iommufd_fops_release+0x2a3/0x300
[   17.492079]  ? iommufd_fops_release+0x2a3/0x300
[   17.492257]  ? __pfx_iommufd_fops_release+0x10/0x10
[   17.492444]  ? rcu_is_watching+0x19/0xc0
[   17.492599]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   17.492805]  ? __pfx_iommufd_fops_release+0x10/0x10
[   17.492992]  __fput+0x424/0xaf0
[   17.493123]  ____fput+0x1f/0x30
[   17.493250]  task_work_run+0x19d/0x2b0
[   17.493398]  ? __pfx_task_work_run+0x10/0x10
[   17.493564]  ? __sanitizer_cov_trace_const_cmp1+0x1e/0x30
[   17.493769]  ? switch_task_namespaces+0xa9/0xe0
[   17.493947]  do_exit+0xac9/0x2790
[   17.494080]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   17.494316]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   17.494505]  ? __pfx_do_exit+0x10/0x10
[   17.494688]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   17.494895]  ? security_file_ioctl+0x9d/0xd0
[   17.495065]  make_task_dead+0x182/0x3c0
[   17.495217]  rewind_stack_and_make_dead+0x17/0x20
[   17.495399] RIP: 0033:0x7f4935e3ee5d
[   17.495538] Code: Unable to access opcode bytes at 0x7f4935e3ee33.
[   17.495765] RSP: 002b:00007ffe2452e618 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   17.496045] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f4935e3ee5d
[   17.496308] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   17.496570] RBP: 00007ffe2452e630 R08: 0000000000000800 R09: 0000000000000800
[   17.496833] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffe2452e748
[   17.497095] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f49360cf000
[   17.497363]  </TASK>
[   17.497451] irq event stamp: 0
[   17.497570] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   17.497802] hardirqs last disabled at (0): [<ffffffff8122f2d1>] copy_process+0x1c51/0x7140
[   17.498106] softirqs last  enabled at (0): [<ffffffff8122f312>] copy_process+0x1c92/0x7140
[   17.498410] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   17.498667] ---[ end trace 0000000000000000 ]---
[   17.501104] iommufd_mock iommufd_mock92: Adding to iommu group 92
[   17.501357] iommufd_mock iommufd_mock92: Removing from iommu group 92
[   17.501611] general protection fault, probably for non-canonical address 0xdffffc0000000006: 0000 [#93] PREEMPT SMP KASAN NOPTI
[   17.502021] KASAN: null-ptr-deref in range [0x0000000000000030-0x0000000000000037]
[   17.502294] CPU: 0 PID: 811 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   17.502610] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   17.503021] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   17.503237] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   17.503895] RSP: 0018:ffff8880177efba8 EFLAGS: 00010206
[   17.504090] RAX: dffffc0000000000 RBX: ffff888010899000 RCX: 0000000000000000
[   17.504348] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   17.504607] RBP: ffff8880177efbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   17.504866] R10: ffff88800aad88df R11: 5f6466756d6d6f69 R12: 0000000000000000
[   17.505125] R13: ffffffff85cc0180 R14: ffff88800bd799c0 R15: ffffffff87070ae0
[   17.505384] FS:  00007f30f8b54600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   17.505675] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   17.505886] CR2: 0000000020000080 CR3: 00000000203f0000 CR4: 0000000000750ef0
[   17.506146] PKRU: 55555554
[   17.506251] Call Trace:
[   17.506345]  <TASK>
[   17.506429]  ? show_regs+0x6e/0x80
[   17.506566]  ? die_addr+0x45/0xb0
[   17.506700]  ? exc_general_protection+0x159/0x250
[   17.506890]  ? asm_exc_general_protection+0x2b/0x30
[   17.507073]  ? sysfs_remove_link_from_group+0x21/0x90
[   17.507260]  ? sysfs_remove_link_from_group+0x37/0x90
[   17.507448]  ? sysfs_remove_link_from_group+0x21/0x90
[   17.507635]  iommu_device_unlink+0x85/0xd0
[   17.507789]  iommu_deinit_device+0x11f/0x4c0
[   17.507952]  __iommu_group_remove_device+0x26b/0x300
[   17.508139]  iommu_group_remove_device+0x8a/0xb0
[   17.508313]  iommufd_test+0x1f1a/0x2d10
[   17.508457]  ? __pfx_lock_release+0x10/0x10
[   17.508615]  ? __pfx_lock_acquire+0x10/0x10
[   17.508774]  ? __pfx_iommufd_test+0x10/0x10
[   17.508931]  ? __sanitizer_cov_trace_const_cmp8+0x1c/0x30
[   17.509131]  iommufd_fops_ioctl+0x377/0x510
[   17.509290]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   17.509465]  ? trace_hardirqs_on+0x26/0x120
[   17.509625]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   17.509853]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   17.510037]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   17.510253]  ? security_file_ioctl+0x9d/0xd0
[   17.510420]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   17.510600]  __x64_sys_ioctl+0x1b9/0x230
[   17.510753]  do_syscall_64+0x3c/0x90
[   17.510893]  entry_SYSCALL_64_after_hwframe+0x6e/0xd8
[   17.511079] RIP: 0033:0x7f30f883ee5d
[   17.511213] Code: ff c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d 93 af 1b 00 f7 d8 64 89 01 48
[   17.511857] RSP: 002b:00007ffdfa251168 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   17.512126] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f30f883ee5d
[   17.512379] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   17.512632] RBP: 00007ffdfa251180 R08: 0000000000000800 R09: 0000000000000800
[   17.512884] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffdfa251298
[   17.513136] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f30f8b95000
[   17.513394]  </TASK>
[   17.513479] Modules linked in:
[   17.513773] ---[ end trace 0000000000000000 ]---
[   17.513947] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   17.514159] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   17.514844] RSP: 0018:ffff88802457fba8 EFLAGS: 00010206
[   17.515040] RAX: dffffc0000000000 RBX: ffff888014f9b000 RCX: 0000000000000000
[   17.515293] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   17.515546] RBP: ffff88802457fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   17.515798] R10: ffff88800aad88df R11: 0000000000000001 R12: 0000000000000000
[   17.516050] R13: ffffffff85cc0180 R14: ffff8880109b6ac0 R15: ffffffff87070ae0
[   17.516303] FS:  00007f30f8b54600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   17.516588] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   17.516794] CR2: 0000000020000080 CR3: 00000000203f0000 CR4: 0000000000750ef0
[   17.517048] PKRU: 55555554
[   17.517478] ------------[ cut here ]------------
[   17.517648] WARNING: CPU: 0 PID: 811 at drivers/iommu/iommufd/main.c:258 iommufd_fops_release+0x2a3/0x300
[   17.517989] Modules linked in:
[   17.518105] CPU: 0 PID: 811 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   17.518412] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   17.518888] RIP: 0010:iommufd_fops_release+0x2a3/0x300
[   17.519077] Code: 45 d0 65 48 2b 04 25 28 00 00 00 75 54 48 81 c4 88 00 00 00 31 c0 5b 41 5c 41 5d 41 5e 41 5f 5d c3 cc cc cc cc e8 ad 4f 0a fe <0f> 0b eb a6 e8 74 23 67 fe e9 f6 fe ff ff 48 89 85 50 ff ff ff e8
[   17.520014] RSP: 0018:ffff8880177efc00 EFLAGS: 00010293
[   17.520253] RAX: 0000000000000000 RBX: ffff88800fe06f08 RCX: 0000000000000000
[   17.520550] RDX: ffff88800fc10000 RSI: ffffffff835563e3 RDI: ffffffff86702b40
[   17.520807] RBP: ffff8880177efcb0 R08: 0000000000000000 R09: fffffbfff0eb2644
[   17.521120] R10: ffffffff87593227 R11: ffff88800fe3fc00 R12: 0000000000000000
[   17.521378] R13: ffff888013510418 R14: ffff8880177efc48 R15: ffffffff83556140
[   17.521688] FS:  0000000000000000(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   17.521980] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   17.522235] CR2: 0000000020000080 CR3: 000000000687e000 CR4: 0000000000750ef0
[   17.522490] PKRU: 55555554
[   17.522612] Call Trace:
[   17.522722]  <TASK>
[   17.522845]  ? show_regs+0x6e/0x80
[   17.522999]  ? __warn+0xef/0x340
[   17.523126]  ? report_bug+0x25e/0x4b0
[   17.523266]  ? iommufd_fops_release+0x2a3/0x300
[   17.523434]  ? report_bug+0x2cb/0x4b0
[   17.523581]  ? handle_bug+0x46/0x90
[   17.523754]  ? exc_invalid_op+0x1d/0x50
[   17.523935]  ? asm_exc_invalid_op+0x1f/0x30
[   17.524090]  ? __pfx_iommufd_fops_release+0x10/0x10
[   17.524271]  ? iommufd_fops_release+0x2a3/0x300
[   17.524476]  ? iommufd_fops_release+0x2a3/0x300
[   17.524688]  ? __pfx_iommufd_fops_release+0x10/0x10
[   17.524868]  ? rcu_is_watching+0x19/0xc0
[   17.525020]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   17.525285]  ? __pfx_iommufd_fops_release+0x10/0x10
[   17.525465]  __fput+0x424/0xaf0
[   17.525591]  ____fput+0x1f/0x30
[   17.525719]  task_work_run+0x19d/0x2b0
[   17.525929]  ? __pfx_task_work_run+0x10/0x10
[   17.526092]  ? __sanitizer_cov_trace_const_cmp1+0x1e/0x30
[   17.526293]  ? switch_task_namespaces+0xa9/0xe0
[   17.526498]  do_exit+0xac9/0x2790
[   17.526671]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   17.526909]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   17.527091]  ? __pfx_do_exit+0x10/0x10
[   17.527231]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   17.527428]  ? security_file_ioctl+0x9d/0xd0
[   17.527590]  make_task_dead+0x182/0x3c0
[   17.527735]  rewind_stack_and_make_dead+0x17/0x20
[   17.527910] RIP: 0033:0x7f30f883ee5d
[   17.528044] Code: Unable to access opcode bytes at 0x7f30f883ee33.
[   17.528277] RSP: 002b:00007ffdfa251168 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   17.528548] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f30f883ee5d
[   17.528802] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   17.529054] RBP: 00007ffdfa251180 R08: 0000000000000800 R09: 0000000000000800
[   17.529305] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffdfa251298
[   17.529557] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f30f8b95000
[   17.529814]  </TASK>
[   17.529899] irq event stamp: 0
[   17.530012] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   17.530235] hardirqs last disabled at (0): [<ffffffff8122f2d1>] copy_process+0x1c51/0x7140
[   17.530528] softirqs last  enabled at (0): [<ffffffff8122f312>] copy_process+0x1c92/0x7140
[   17.530844] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   17.531072] ---[ end trace 0000000000000000 ]---
[   17.533906] iommufd_mock iommufd_mock93: Adding to iommu group 93
[   17.534148] iommufd_mock iommufd_mock93: Removing from iommu group 93
[   17.534396] general protection fault, probably for non-canonical address 0xdffffc0000000006: 0000 [#94] PREEMPT SMP KASAN NOPTI
[   17.534839] KASAN: null-ptr-deref in range [0x0000000000000030-0x0000000000000037]
[   17.535113] CPU: 0 PID: 812 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   17.535422] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   17.535822] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   17.536033] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   17.536679] RSP: 0018:ffff88802479fba8 EFLAGS: 00010206
[   17.536881] RAX: dffffc0000000000 RBX: ffff88801089a000 RCX: 0000000000000000
[   17.537185] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   17.537438] RBP: ffff88802479fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   17.537691] R10: ffff88800aad88df R11: 5f6466756d6d6f69 R12: 0000000000000000
[   17.537944] R13: ffffffff85cc0180 R14: ffff88800bd79bc0 R15: ffffffff87070ae0
[   17.538197] FS:  00007fb699b96600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   17.538486] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   17.538693] CR2: 0000000020000080 CR3: 00000000132ee000 CR4: 0000000000750ef0
[   17.538958] PKRU: 55555554
[   17.539060] Call Trace:
[   17.539153]  <TASK>
[   17.539235]  ? show_regs+0x6e/0x80
[   17.539369]  ? die_addr+0x45/0xb0
[   17.539500]  ? exc_general_protection+0x159/0x250
[   17.539682]  ? asm_exc_general_protection+0x2b/0x30
[   17.539865]  ? sysfs_remove_link_from_group+0x21/0x90
[   17.540053]  ? sysfs_remove_link_from_group+0x37/0x90
[   17.540240]  ? sysfs_remove_link_from_group+0x21/0x90
[   17.540428]  iommu_device_unlink+0x85/0xd0
[   17.540582]  iommu_deinit_device+0x11f/0x4c0
[   17.540745]  __iommu_group_remove_device+0x26b/0x300
[   17.540933]  iommu_group_remove_device+0x8a/0xb0
[   17.541107]  iommufd_test+0x1f1a/0x2d10
[   17.541251]  ? __pfx_lock_release+0x10/0x10
[   17.541409]  ? __pfx_lock_acquire+0x10/0x10
[   17.541568]  ? __pfx_iommufd_test+0x10/0x10
[   17.541725]  ? __sanitizer_cov_trace_const_cmp8+0x1c/0x30
[   17.541926]  iommufd_fops_ioctl+0x377/0x510
[   17.542084]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   17.542260]  ? trace_hardirqs_on+0x26/0x120
[   17.542420]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   17.542649]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   17.542845]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   17.543046]  ? security_file_ioctl+0x9d/0xd0
[   17.543210]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   17.543386]  __x64_sys_ioctl+0x1b9/0x230
[   17.543534]  do_syscall_64+0x3c/0x90
[   17.543670]  entry_SYSCALL_64_after_hwframe+0x6e/0xd8
[   17.543855] RIP: 0033:0x7fb69983ee5d
[   17.543990] Code: ff c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d 93 af 1b 00 f7 d8 64 89 01 48
[   17.544634] RSP: 002b:00007ffe594c47d8 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   17.544903] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007fb69983ee5d
[   17.545156] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   17.545409] RBP: 00007ffe594c47f0 R08: 0000000000000800 R09: 0000000000000800
[   17.545662] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffe594c4908
[   17.545914] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007fb699bd7000
[   17.546172]  </TASK>
[   17.546257] Modules linked in:
[   17.546446] ---[ end trace 0000000000000000 ]---
[   17.546771] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   17.547011] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   17.547654] RSP: 0018:ffff88802457fba8 EFLAGS: 00010206
[   17.547843] RAX: dffffc0000000000 RBX: ffff888014f9b000 RCX: 0000000000000000
[   17.548096] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   17.548446] RBP: ffff88802457fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   17.548702] R10: ffff88800aad88df R11: 0000000000000001 R12: 0000000000000000
[   17.548955] R13: ffffffff85cc0180 R14: ffff8880109b6ac0 R15: ffffffff87070ae0
[   17.549285] FS:  00007fb699b96600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   17.549572] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   17.549809] CR2: 0000000020000080 CR3: 00000000132ee000 CR4: 0000000000750ef0
[   17.550115] PKRU: 55555554
[   17.550477] ------------[ cut here ]------------
[   17.550715] WARNING: CPU: 0 PID: 812 at drivers/iommu/iommufd/main.c:258 iommufd_fops_release+0x2a3/0x300
[   17.551069] Modules linked in:
[   17.551187] CPU: 0 PID: 812 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   17.551520] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   17.551982] RIP: 0010:iommufd_fops_release+0x2a3/0x300
[   17.552182] Code: 45 d0 65 48 2b 04 25 28 00 00 00 75 54 48 81 c4 88 00 00 00 31 c0 5b 41 5c 41 5d 41 5e 41 5f 5d c3 cc cc cc cc e8 ad 4f 0a fe <0f> 0b eb a6 e8 74 23 67 fe e9 f6 fe ff ff 48 89 85 50 ff ff ff e8
[   17.552893] RSP: 0018:ffff88802479fc00 EFLAGS: 00010293
[   17.553123] RAX: 0000000000000000 RBX: ffff88800fe06208 RCX: 0000000000000000
[   17.553417] RDX: ffff888010564a00 RSI: ffffffff835563e3 RDI: ffffffff86702b40
[   17.553677] RBP: ffff88802479fcb0 R08: 0000000000000000 R09: fffffbfff0eb2644
[   17.554023] R10: ffffffff87593227 R11: ffff888013985400 R12: 0000000000000000
[   17.554277] R13: ffff8880134d0b98 R14: ffff88802479fc48 R15: ffffffff83556140
[   17.554616] FS:  0000000000000000(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   17.554913] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   17.555119] CR2: 0000000020000080 CR3: 000000000687e000 CR4: 0000000000750ef0
[   17.555379] PKRU: 55555554
[   17.555512] Call Trace:
[   17.555644]  <TASK>
[   17.555726]  ? show_regs+0x6e/0x80
[   17.555858]  ? __warn+0xef/0x340
[   17.555983]  ? report_bug+0x25e/0x4b0
[   17.556161]  ? iommufd_fops_release+0x2a3/0x300
[   17.556383]  ? report_bug+0x2cb/0x4b0
[   17.556525]  ? handle_bug+0x46/0x90
[   17.556658]  ? exc_invalid_op+0x1d/0x50
[   17.556808]  ? asm_exc_invalid_op+0x1f/0x30
[   17.557028]  ? __pfx_iommufd_fops_release+0x10/0x10
[   17.557215]  ? iommufd_fops_release+0x2a3/0x300
[   17.557384]  ? iommufd_fops_release+0x2a3/0x300
[   17.557555]  ? __pfx_iommufd_fops_release+0x10/0x10
[   17.557734]  ? rcu_is_watching+0x19/0xc0
[   17.557883]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   17.558081]  ? __pfx_iommufd_fops_release+0x10/0x10
[   17.558260]  __fput+0x424/0xaf0
[   17.558386]  ____fput+0x1f/0x30
[   17.558509]  task_work_run+0x19d/0x2b0
[   17.558660]  ? __pfx_task_work_run+0x10/0x10
[   17.558836]  ? __sanitizer_cov_trace_const_cmp1+0x1e/0x30
[   17.559036]  ? switch_task_namespaces+0xa9/0xe0
[   17.559206]  do_exit+0xac9/0x2790
[   17.559334]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   17.559561]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   17.559744]  ? __pfx_do_exit+0x10/0x10
[   17.559885]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   17.560082]  ? security_file_ioctl+0x9d/0xd0
[   17.560244]  make_task_dead+0x182/0x3c0
[   17.560389]  rewind_stack_and_make_dead+0x17/0x20
[   17.560564] RIP: 0033:0x7fb69983ee5d
[   17.560698] Code: Unable to access opcode bytes at 0x7fb69983ee33.
[   17.560916] RSP: 002b:00007ffe594c47d8 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   17.561186] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007fb69983ee5d
[   17.561438] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   17.561691] RBP: 00007ffe594c47f0 R08: 0000000000000800 R09: 0000000000000800
[   17.561943] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffe594c4908
[   17.562196] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007fb699bd7000
[   17.562454]  </TASK>
[   17.562538] irq event stamp: 0
[   17.562659] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   17.562902] hardirqs last disabled at (0): [<ffffffff8122f2d1>] copy_process+0x1c51/0x7140
[   17.563195] softirqs last  enabled at (0): [<ffffffff8122f312>] copy_process+0x1c92/0x7140
[   17.563488] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   17.563712] ---[ end trace 0000000000000000 ]---
[   17.566320] iommufd_mock iommufd_mock94: Adding to iommu group 94
[   17.566564] iommufd_mock iommufd_mock94: Removing from iommu group 94
[   17.566931] general protection fault, probably for non-canonical address 0xdffffc0000000006: 0000 [#95] PREEMPT SMP KASAN NOPTI
[   17.567334] KASAN: null-ptr-deref in range [0x0000000000000030-0x0000000000000037]
[   17.567602] CPU: 0 PID: 813 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   17.567911] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   17.568309] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   17.568519] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   17.569163] RSP: 0018:ffff8880109bfba8 EFLAGS: 00010206
[   17.569353] RAX: dffffc0000000000 RBX: ffff88800bfda000 RCX: 0000000000000000
[   17.569606] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   17.569859] RBP: ffff8880109bfbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   17.570112] R10: ffff88800aad88df R11: 5f6466756d6d6f69 R12: 0000000000000000
[   17.570365] R13: ffffffff85cc0180 R14: ffff88800bd79220 R15: ffffffff87070ae0
[   17.570619] FS:  00007fb1d9fb4600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   17.570916] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   17.571124] CR2: 0000000020000080 CR3: 00000000132ee000 CR4: 0000000000750ef0
[   17.571378] PKRU: 55555554
[   17.571480] Call Trace:
[   17.571573]  <TASK>
[   17.571655]  ? show_regs+0x6e/0x80
[   17.571790]  ? die_addr+0x45/0xb0
[   17.571921]  ? exc_general_protection+0x159/0x250
[   17.572101]  ? asm_exc_general_protection+0x2b/0x30
[   17.572284]  ? sysfs_remove_link_from_group+0x21/0x90
[   17.572472]  ? sysfs_remove_link_from_group+0x37/0x90
[   17.572660]  ? sysfs_remove_link_from_group+0x21/0x90
[   17.572847]  iommu_device_unlink+0x85/0xd0
[   17.573001]  iommu_deinit_device+0x11f/0x4c0
[   17.573164]  __iommu_group_remove_device+0x26b/0x300
[   17.573351]  iommu_group_remove_device+0x8a/0xb0
[   17.573526]  iommufd_test+0x1f1a/0x2d10
[   17.573670]  ? __pfx_lock_release+0x10/0x10
[   17.573827]  ? __pfx_lock_acquire+0x10/0x10
[   17.573987]  ? __pfx_iommufd_test+0x10/0x10
[   17.574144]  ? __sanitizer_cov_trace_const_cmp8+0x1c/0x30
[   17.574346]  iommufd_fops_ioctl+0x377/0x510
[   17.574505]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   17.574682]  ? trace_hardirqs_on+0x26/0x120
[   17.574847]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   17.575077]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   17.575261]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   17.575460]  ? security_file_ioctl+0x9d/0xd0
[   17.575623]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   17.575800]  __x64_sys_ioctl+0x1b9/0x230
[   17.575948]  do_syscall_64+0x3c/0x90
[   17.576083]  entry_SYSCALL_64_after_hwframe+0x6e/0xd8
[   17.576269] RIP: 0033:0x7fb1d9c3ee5d
[   17.576404] Code: ff c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d 93 af 1b 00 f7 d8 64 89 01 48
[   17.577048] RSP: 002b:00007ffe1b163338 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   17.577318] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007fb1d9c3ee5d
[   17.577572] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   17.577825] RBP: 00007ffe1b163350 R08: 0000000000000800 R09: 0000000000000800
[   17.578079] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffe1b163468
[   17.578333] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007fb1d9ff5000
[   17.578595]  </TASK>
[   17.578681] Modules linked in:
[   17.578832] ---[ end trace 0000000000000000 ]---
[   17.579004] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   17.579212] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   17.579860] RSP: 0018:ffff88802457fba8 EFLAGS: 00010206
[   17.580049] RAX: dffffc0000000000 RBX: ffff888014f9b000 RCX: 0000000000000000
[   17.580301] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   17.580555] RBP: ffff88802457fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   17.580807] R10: ffff88800aad88df R11: 0000000000000001 R12: 0000000000000000
[   17.581061] R13: ffffffff85cc0180 R14: ffff8880109b6ac0 R15: ffffffff87070ae0
[   17.581314] FS:  00007fb1d9fb4600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   17.581599] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   17.581806] CR2: 0000000020000080 CR3: 00000000132ee000 CR4: 0000000000750ef0
[   17.582059] PKRU: 55555554
[   17.582425] ------------[ cut here ]------------
[   17.582605] WARNING: CPU: 0 PID: 813 at drivers/iommu/iommufd/main.c:258 iommufd_fops_release+0x2a3/0x300
[   17.582961] Modules linked in:
[   17.583076] CPU: 0 PID: 813 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   17.583383] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   17.583781] RIP: 0010:iommufd_fops_release+0x2a3/0x300
[   17.583970] Code: 45 d0 65 48 2b 04 25 28 00 00 00 75 54 48 81 c4 88 00 00 00 31 c0 5b 41 5c 41 5d 41 5e 41 5f 5d c3 cc cc cc cc e8 ad 4f 0a fe <0f> 0b eb a6 e8 74 23 67 fe e9 f6 fe ff ff 48 89 85 50 ff ff ff e8
[   17.584614] RSP: 0018:ffff8880109bfc00 EFLAGS: 00010293
[   17.584803] RAX: 0000000000000000 RBX: ffff88800fe06b08 RCX: 0000000000000000
[   17.585055] RDX: ffff88800fada500 RSI: ffffffff835563e3 RDI: ffffffff86702b40
[   17.585308] RBP: ffff8880109bfcb0 R08: 0000000000000000 R09: fffffbfff0eb2644
[   17.585561] R10: ffffffff87593227 R11: ffff88801deee400 R12: 0000000000000000
[   17.585814] R13: ffff888013136198 R14: ffff8880109bfc48 R15: ffffffff83556140
[   17.586067] FS:  0000000000000000(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   17.586353] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   17.586560] CR2: 0000000020000080 CR3: 000000000687e000 CR4: 0000000000750ef0
[   17.586829] PKRU: 55555554
[   17.586935] Call Trace:
[   17.587028]  <TASK>
[   17.587110]  ? show_regs+0x6e/0x80
[   17.587241]  ? __warn+0xef/0x340
[   17.587366]  ? report_bug+0x25e/0x4b0
[   17.587506]  ? iommufd_fops_release+0x2a3/0x300
[   17.587675]  ? report_bug+0x2cb/0x4b0
[   17.587817]  ? handle_bug+0x46/0x90
[   17.587950]  ? exc_invalid_op+0x1d/0x50
[   17.588094]  ? asm_exc_invalid_op+0x1f/0x30
[   17.588249]  ? __pfx_iommufd_fops_release+0x10/0x10
[   17.588431]  ? iommufd_fops_release+0x2a3/0x300
[   17.588600]  ? iommufd_fops_release+0x2a3/0x300
[   17.588771]  ? __pfx_iommufd_fops_release+0x10/0x10
[   17.588951]  ? rcu_is_watching+0x19/0xc0
[   17.589101]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   17.589299]  ? __pfx_iommufd_fops_release+0x10/0x10
[   17.589479]  __fput+0x424/0xaf0
[   17.589605]  ____fput+0x1f/0x30
[   17.589728]  task_work_run+0x19d/0x2b0
[   17.589871]  ? __pfx_task_work_run+0x10/0x10
[   17.590031]  ? __sanitizer_cov_trace_const_cmp1+0x1e/0x30
[   17.590228]  ? switch_task_namespaces+0xa9/0xe0
[   17.590398]  do_exit+0xac9/0x2790
[   17.590526]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   17.590761]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   17.590949]  ? __pfx_do_exit+0x10/0x10
[   17.591091]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   17.591288]  ? security_file_ioctl+0x9d/0xd0
[   17.591450]  make_task_dead+0x182/0x3c0
[   17.591596]  rewind_stack_and_make_dead+0x17/0x20
[   17.591771] RIP: 0033:0x7fb1d9c3ee5d
[   17.591905] Code: Unable to access opcode bytes at 0x7fb1d9c3ee33.
[   17.592124] RSP: 002b:00007ffe1b163338 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   17.592394] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007fb1d9c3ee5d
[   17.592647] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   17.592899] RBP: 00007ffe1b163350 R08: 0000000000000800 R09: 0000000000000800
[   17.593152] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffe1b163468
[   17.593405] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007fb1d9ff5000
[   17.593664]  </TASK>
[   17.593748] irq event stamp: 0
[   17.593862] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   17.594086] hardirqs last disabled at (0): [<ffffffff8122f2d1>] copy_process+0x1c51/0x7140
[   17.594379] softirqs last  enabled at (0): [<ffffffff8122f312>] copy_process+0x1c92/0x7140
[   17.594677] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   17.594910] ---[ end trace 0000000000000000 ]---
[   17.597518] iommufd_mock iommufd_mock95: Adding to iommu group 95
[   17.597781] iommufd_mock iommufd_mock95: Removing from iommu group 95
[   17.598035] general protection fault, probably for non-canonical address 0xdffffc0000000006: 0000 [#96] PREEMPT SMP KASAN NOPTI
[   17.598446] KASAN: null-ptr-deref in range [0x0000000000000030-0x0000000000000037]
[   17.598722] CPU: 0 PID: 814 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   17.599048] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   17.599449] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   17.599660] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   17.600308] RSP: 0018:ffff888013c07ba8 EFLAGS: 00010206
[   17.600498] RAX: dffffc0000000000 RBX: ffff88800bfd8000 RCX: 0000000000000000
[   17.600753] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   17.601007] RBP: ffff888013c07bc0 R08: 0000000000000001 R09: ffffed100155b11b
[   17.601261] R10: ffff88800aad88df R11: 5f6466756d6d6f69 R12: 0000000000000000
[   17.601515] R13: ffffffff85cc0180 R14: ffff88800bd79760 R15: ffffffff87070ae0
[   17.601769] FS:  00007f852809d600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   17.602056] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   17.602263] CR2: 0000000020000080 CR3: 00000000132ee000 CR4: 0000000000750ef0
[   17.602518] PKRU: 55555554
[   17.602633] Call Trace:
[   17.602728]  <TASK>
[   17.602814]  ? show_regs+0x6e/0x80
[   17.602954]  ? die_addr+0x45/0xb0
[   17.603088]  ? exc_general_protection+0x159/0x250
[   17.603270]  ? asm_exc_general_protection+0x2b/0x30
[   17.603454]  ? sysfs_remove_link_from_group+0x21/0x90
[   17.603642]  ? sysfs_remove_link_from_group+0x37/0x90
[   17.603830]  ? sysfs_remove_link_from_group+0x21/0x90
[   17.604018]  iommu_device_unlink+0x85/0xd0
[   17.604173]  iommu_deinit_device+0x11f/0x4c0
[   17.604336]  __iommu_group_remove_device+0x26b/0x300
[   17.604524]  iommu_group_remove_device+0x8a/0xb0
[   17.604698]  iommufd_test+0x1f1a/0x2d10
[   17.604842]  ? __pfx_lock_release+0x10/0x10
[   17.605000]  ? __pfx_lock_acquire+0x10/0x10
[   17.605159]  ? __pfx_iommufd_test+0x10/0x10
[   17.605317]  ? __sanitizer_cov_trace_const_cmp8+0x1c/0x30
[   17.605518]  iommufd_fops_ioctl+0x377/0x510
[   17.605677]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   17.605853]  ? trace_hardirqs_on+0x26/0x120
[   17.606013]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   17.606243]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   17.606427]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   17.606626]  ? security_file_ioctl+0x9d/0xd0
[   17.606794]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   17.606972]  __x64_sys_ioctl+0x1b9/0x230
[   17.607120]  do_syscall_64+0x3c/0x90
[   17.607256]  entry_SYSCALL_64_after_hwframe+0x6e/0xd8
[   17.607442] RIP: 0033:0x7f8527e3ee5d
[   17.607577] Code: ff c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d 93 af 1b 00 f7 d8 64 89 01 48
[   17.608224] RSP: 002b:00007ffdc44f5378 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   17.608495] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f8527e3ee5d
[   17.608749] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   17.609003] RBP: 00007ffdc44f5390 R08: 0000000000000800 R09: 0000000000000800
[   17.609257] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffdc44f54a8
[   17.609511] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f85280de000
[   17.609770]  </TASK>
[   17.609855] Modules linked in:
[   17.610076] ---[ end trace 0000000000000000 ]---
[   17.610247] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   17.610455] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   17.611118] RSP: 0018:ffff88802457fba8 EFLAGS: 00010206
[   17.611308] RAX: dffffc0000000000 RBX: ffff888014f9b000 RCX: 0000000000000000
[   17.611563] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   17.611819] RBP: ffff88802457fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   17.612073] R10: ffff88800aad88df R11: 0000000000000001 R12: 0000000000000000
[   17.612327] R13: ffffffff85cc0180 R14: ffff8880109b6ac0 R15: ffffffff87070ae0
[   17.612582] FS:  00007f852809d600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   17.612869] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   17.613076] CR2: 0000000020000080 CR3: 00000000132ee000 CR4: 0000000000750ef0
[   17.613331] PKRU: 55555554
[   17.613688] ------------[ cut here ]------------
[   17.613857] WARNING: CPU: 0 PID: 814 at drivers/iommu/iommufd/main.c:258 iommufd_fops_release+0x2a3/0x300
[   17.614198] Modules linked in:
[   17.614314] CPU: 0 PID: 814 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   17.614640] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   17.615049] RIP: 0010:iommufd_fops_release+0x2a3/0x300
[   17.615239] Code: 45 d0 65 48 2b 04 25 28 00 00 00 75 54 48 81 c4 88 00 00 00 31 c0 5b 41 5c 41 5d 41 5e 41 5f 5d c3 cc cc cc cc e8 ad 4f 0a fe <0f> 0b eb a6 e8 74 23 67 fe e9 f6 fe ff ff 48 89 85 50 ff ff ff e8
[   17.615885] RSP: 0018:ffff888013c07c00 EFLAGS: 00010293
[   17.616075] RAX: 0000000000000000 RBX: ffff88800fe06008 RCX: 0000000000000000
[   17.616329] RDX: ffff88800fadca00 RSI: ffffffff835563e3 RDI: ffffffff86702b40
[   17.616583] RBP: ffff888013c07cb0 R08: 0000000000000000 R09: fffffbfff0eb2644
[   17.616837] R10: ffffffff87593227 R11: ffff88801394e200 R12: 0000000000000000
[   17.617091] R13: ffff888013626418 R14: ffff888013c07c48 R15: ffffffff83556140
[   17.617345] FS:  0000000000000000(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   17.617631] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   17.617838] CR2: 0000000020000080 CR3: 000000000687e000 CR4: 0000000000750ef0
[   17.618093] PKRU: 55555554
[   17.618195] Call Trace:
[   17.618288]  <TASK>
[   17.618370]  ? show_regs+0x6e/0x80
[   17.618502]  ? __warn+0xef/0x340
[   17.618634]  ? report_bug+0x25e/0x4b0
[   17.618780]  ? iommufd_fops_release+0x2a3/0x300
[   17.618955]  ? report_bug+0x2cb/0x4b0
[   17.619098]  ? handle_bug+0x46/0x90
[   17.619232]  ? exc_invalid_op+0x1d/0x50
[   17.619376]  ? asm_exc_invalid_op+0x1f/0x30
[   17.619532]  ? __pfx_iommufd_fops_release+0x10/0x10
[   17.619715]  ? iommufd_fops_release+0x2a3/0x300
[   17.619884]  ? iommufd_fops_release+0x2a3/0x300
[   17.620056]  ? __pfx_iommufd_fops_release+0x10/0x10
[   17.620237]  ? rcu_is_watching+0x19/0xc0
[   17.620386]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   17.620585]  ? __pfx_iommufd_fops_release+0x10/0x10
[   17.620766]  __fput+0x424/0xaf0
[   17.620892]  ____fput+0x1f/0x30
[   17.621015]  task_work_run+0x19d/0x2b0
[   17.621158]  ? __pfx_task_work_run+0x10/0x10
[   17.621318]  ? __sanitizer_cov_trace_const_cmp1+0x1e/0x30
[   17.621516]  ? switch_task_namespaces+0xa9/0xe0
[   17.621687]  do_exit+0xac9/0x2790
[   17.621816]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   17.622044]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   17.622227]  ? __pfx_do_exit+0x10/0x10
[   17.622368]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   17.622567]  ? security_file_ioctl+0x9d/0xd0
[   17.622737]  make_task_dead+0x182/0x3c0
[   17.622892]  rewind_stack_and_make_dead+0x17/0x20
[   17.623068] RIP: 0033:0x7f8527e3ee5d
[   17.623202] Code: Unable to access opcode bytes at 0x7f8527e3ee33.
[   17.623422] RSP: 002b:00007ffdc44f5378 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   17.623693] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f8527e3ee5d
[   17.623946] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   17.624200] RBP: 00007ffdc44f5390 R08: 0000000000000800 R09: 0000000000000800
[   17.624453] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffdc44f54a8
[   17.624707] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f85280de000
[   17.624966]  </TASK>
[   17.625050] irq event stamp: 0
[   17.625165] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   17.625390] hardirqs last disabled at (0): [<ffffffff8122f2d1>] copy_process+0x1c51/0x7140
[   17.625684] softirqs last  enabled at (0): [<ffffffff8122f312>] copy_process+0x1c92/0x7140
[   17.625978] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   17.626203] ---[ end trace 0000000000000000 ]---
[   17.628692] iommufd_mock iommufd_mock96: Adding to iommu group 96
[   17.628936] iommufd_mock iommufd_mock96: Removing from iommu group 96
[   17.629186] general protection fault, probably for non-canonical address 0xdffffc0000000006: 0000 [#97] PREEMPT SMP KASAN NOPTI
[   17.629588] KASAN: null-ptr-deref in range [0x0000000000000030-0x0000000000000037]
[   17.629857] CPU: 0 PID: 815 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   17.630165] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   17.630564] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   17.630782] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   17.631437] RSP: 0018:ffff88801756fba8 EFLAGS: 00010206
[   17.631628] RAX: dffffc0000000000 RBX: ffff88802479f000 RCX: 0000000000000000
[   17.631882] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   17.632136] RBP: ffff88801756fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   17.632390] R10: ffff88800aad88df R11: 5f6466756d6d6f69 R12: 0000000000000000
[   17.632644] R13: ffffffff85cc0180 R14: ffff88800bd79c60 R15: ffffffff87070ae0
[   17.632898] FS:  00007f2cccb5b600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   17.633185] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   17.633392] CR2: 0000000020000080 CR3: 00000000132ee000 CR4: 0000000000750ef0
[   17.633647] PKRU: 55555554
[   17.633750] Call Trace:
[   17.633842]  <TASK>
[   17.633925]  ? show_regs+0x6e/0x80
[   17.634059]  ? die_addr+0x45/0xb0
[   17.634190]  ? exc_general_protection+0x159/0x250
[   17.634372]  ? asm_exc_general_protection+0x2b/0x30
[   17.634555]  ? sysfs_remove_link_from_group+0x21/0x90
[   17.634743]  ? sysfs_remove_link_from_group+0x37/0x90
[   17.634934]  ? sysfs_remove_link_from_group+0x21/0x90
[   17.635124]  iommu_device_unlink+0x85/0xd0
[   17.635281]  iommu_deinit_device+0x11f/0x4c0
[   17.635444]  __iommu_group_remove_device+0x26b/0x300
[   17.635631]  iommu_group_remove_device+0x8a/0xb0
[   17.635805]  iommufd_test+0x1f1a/0x2d10
[   17.635949]  ? __pfx_lock_release+0x10/0x10
[   17.636107]  ? __pfx_lock_acquire+0x10/0x10
[   17.636266]  ? __pfx_iommufd_test+0x10/0x10
[   17.636424]  ? __sanitizer_cov_trace_const_cmp8+0x1c/0x30
[   17.636625]  iommufd_fops_ioctl+0x377/0x510
[   17.636784]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   17.636960]  ? trace_hardirqs_on+0x26/0x120
[   17.637120]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   17.637350]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   17.637534]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   17.637733]  ? security_file_ioctl+0x9d/0xd0
[   17.637896]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   17.638073]  __x64_sys_ioctl+0x1b9/0x230
[   17.638221]  do_syscall_64+0x3c/0x90
[   17.638357]  entry_SYSCALL_64_after_hwframe+0x6e/0xd8
[   17.638545] RIP: 0033:0x7f2ccc83ee5d
[   17.638683] Code: ff c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d 93 af 1b 00 f7 d8 64 89 01 48
[   17.639339] RSP: 002b:00007ffe460c1d18 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   17.639610] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f2ccc83ee5d
[   17.639864] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   17.640118] RBP: 00007ffe460c1d30 R08: 0000000000000800 R09: 0000000000000800
[   17.640372] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffe460c1e48
[   17.640626] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f2cccb9c000
[   17.640885]  </TASK>
[   17.640970] Modules linked in:
[   17.641120] ---[ end trace 0000000000000000 ]---
[   17.641289] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   17.641498] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   17.642145] RSP: 0018:ffff88802457fba8 EFLAGS: 00010206
[   17.642335] RAX: dffffc0000000000 RBX: ffff888014f9b000 RCX: 0000000000000000
[   17.642597] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   17.642862] RBP: ffff88802457fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   17.643115] R10: ffff88800aad88df R11: 0000000000000001 R12: 0000000000000000
[   17.643369] R13: ffffffff85cc0180 R14: ffff8880109b6ac0 R15: ffffffff87070ae0
[   17.643622] FS:  00007f2cccb5b600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   17.643908] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   17.644116] CR2: 0000000020000080 CR3: 00000000132ee000 CR4: 0000000000750ef0
[   17.644374] PKRU: 55555554
[   17.644737] ------------[ cut here ]------------
[   17.644906] WARNING: CPU: 0 PID: 815 at drivers/iommu/iommufd/main.c:258 iommufd_fops_release+0x2a3/0x300
[   17.645247] Modules linked in:
[   17.645363] CPU: 0 PID: 815 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   17.645672] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   17.646070] RIP: 0010:iommufd_fops_release+0x2a3/0x300
[   17.646259] Code: 45 d0 65 48 2b 04 25 28 00 00 00 75 54 48 81 c4 88 00 00 00 31 c0 5b 41 5c 41 5d 41 5e 41 5f 5d c3 cc cc cc cc e8 ad 4f 0a fe <0f> 0b eb a6 e8 74 23 67 fe e9 f6 fe ff ff 48 89 85 50 ff ff ff e8
[   17.647041] RSP: 0018:ffff88801756fc00 EFLAGS: 00010293
[   17.647233] RAX: 0000000000000000 RBX: ffff88800fe06608 RCX: 0000000000000000
[   17.647486] RDX: ffff888014428000 RSI: ffffffff835563e3 RDI: ffffffff86702b40
[   17.647740] RBP: ffff88801756fcb0 R08: 0000000000000000 R09: fffffbfff0eb2644
[   17.647993] R10: ffffffff87593227 R11: ffff8880139b7200 R12: 0000000000000000
[   17.648246] R13: ffff888013626918 R14: ffff88801756fc48 R15: ffffffff83556140
[   17.648500] FS:  0000000000000000(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   17.648791] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   17.648999] CR2: 0000000020000080 CR3: 000000000687e000 CR4: 0000000000750ef0
[   17.649254] PKRU: 55555554
[   17.649356] Call Trace:
[   17.649449]  <TASK>
[   17.649531]  ? show_regs+0x6e/0x80
[   17.649662]  ? __warn+0xef/0x340
[   17.649788]  ? report_bug+0x25e/0x4b0
[   17.649929]  ? iommufd_fops_release+0x2a3/0x300
[   17.650098]  ? report_bug+0x2cb/0x4b0
[   17.650240]  ? handle_bug+0x46/0x90
[   17.650374]  ? exc_invalid_op+0x1d/0x50
[   17.650519]  ? asm_exc_invalid_op+0x1f/0x30
[   17.650690]  ? __pfx_iommufd_fops_release+0x10/0x10
[   17.650894]  ? iommufd_fops_release+0x2a3/0x300
[   17.651066]  ? iommufd_fops_release+0x2a3/0x300
[   17.651237]  ? __pfx_iommufd_fops_release+0x10/0x10
[   17.651417]  ? rcu_is_watching+0x19/0xc0
[   17.651567]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   17.651766]  ? __pfx_iommufd_fops_release+0x10/0x10
[   17.651946]  __fput+0x424/0xaf0
[   17.652072]  ____fput+0x1f/0x30
[   17.652195]  task_work_run+0x19d/0x2b0
[   17.652338]  ? __pfx_task_work_run+0x10/0x10
[   17.652499]  ? __sanitizer_cov_trace_const_cmp1+0x1e/0x30
[   17.652696]  ? switch_task_namespaces+0xa9/0xe0
[   17.652868]  do_exit+0xac9/0x2790
[   17.652996]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   17.653224]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   17.653406]  ? __pfx_do_exit+0x10/0x10
[   17.653548]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   17.653746]  ? security_file_ioctl+0x9d/0xd0
[   17.653909]  make_task_dead+0x182/0x3c0
[   17.654055]  rewind_stack_and_make_dead+0x17/0x20
[   17.654234] RIP: 0033:0x7f2ccc83ee5d
[   17.654370] Code: Unable to access opcode bytes at 0x7f2ccc83ee33.
[   17.654596] RSP: 002b:00007ffe460c1d18 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   17.654875] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f2ccc83ee5d
[   17.655129] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   17.655382] RBP: 00007ffe460c1d30 R08: 0000000000000800 R09: 0000000000000800
[   17.655635] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffe460c1e48
[   17.655889] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f2cccb9c000
[   17.656148]  </TASK>
[   17.656233] irq event stamp: 0
[   17.656347] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   17.656572] hardirqs last disabled at (0): [<ffffffff8122f2d1>] copy_process+0x1c51/0x7140
[   17.656866] softirqs last  enabled at (0): [<ffffffff8122f312>] copy_process+0x1c92/0x7140
[   17.657161] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   17.657385] ---[ end trace 0000000000000000 ]---
[   17.660056] iommufd_mock iommufd_mock97: Adding to iommu group 97
[   17.660298] iommufd_mock iommufd_mock97: Removing from iommu group 97
[   17.660545] general protection fault, probably for non-canonical address 0xdffffc0000000006: 0000 [#98] PREEMPT SMP KASAN NOPTI
[   17.660946] KASAN: null-ptr-deref in range [0x0000000000000030-0x0000000000000037]
[   17.661213] CPU: 0 PID: 816 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   17.661520] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   17.661916] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   17.662125] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   17.662787] RSP: 0018:ffff888024757ba8 EFLAGS: 00010206
[   17.662980] RAX: dffffc0000000000 RBX: ffff88802479c000 RCX: 0000000000000000
[   17.663233] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   17.663703] RBP: ffff888024757bc0 R08: 0000000000000001 R09: ffffed100155b11b
[   17.663960] R10: ffff88800aad88df R11: 5f6466756d6d6f69 R12: 0000000000000000
[   17.664214] R13: ffffffff85cc0180 R14: ffff88800bd79180 R15: ffffffff87070ae0
[   17.664467] FS:  00007fd2ded34600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   17.664752] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   17.664958] CR2: 0000000020000080 CR3: 00000000132ee000 CR4: 0000000000750ef0
[   17.665213] PKRU: 55555554
[   17.665315] Call Trace:
[   17.665408]  <TASK>
[   17.665490]  ? show_regs+0x6e/0x80
[   17.665625]  ? die_addr+0x45/0xb0
[   17.665756]  ? exc_general_protection+0x159/0x250
[   17.665937]  ? asm_exc_general_protection+0x2b/0x30
[   17.666119]  ? sysfs_remove_link_from_group+0x21/0x90
[   17.666307]  ? sysfs_remove_link_from_group+0x37/0x90
[   17.666494]  ? sysfs_remove_link_from_group+0x21/0x90
[   17.666682]  iommu_device_unlink+0x85/0xd0
[   17.666846]  iommu_deinit_device+0x11f/0x4c0
[   17.667009]  __iommu_group_remove_device+0x26b/0x300
[   17.667196]  iommu_group_remove_device+0x8a/0xb0
[   17.667371]  iommufd_test+0x1f1a/0x2d10
[   17.667514]  ? __pfx_lock_release+0x10/0x10
[   17.667672]  ? __pfx_lock_acquire+0x10/0x10
[   17.667831]  ? __pfx_iommufd_test+0x10/0x10
[   17.667988]  ? __sanitizer_cov_trace_const_cmp8+0x1c/0x30
[   17.668188]  iommufd_fops_ioctl+0x377/0x510
[   17.668347]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   17.668524]  ? trace_hardirqs_on+0x26/0x120
[   17.668683]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   17.668912]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   17.669096]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   17.669295]  ? security_file_ioctl+0x9d/0xd0
[   17.669458]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   17.669634]  __x64_sys_ioctl+0x1b9/0x230
[   17.669782]  do_syscall_64+0x3c/0x90
[   17.669917]  entry_SYSCALL_64_after_hwframe+0x6e/0xd8
[   17.670102] RIP: 0033:0x7fd2dea3ee5d
[   17.670236] Code: ff c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d 93 af 1b 00 f7 d8 64 89 01 48
[   17.670887] RSP: 002b:00007fffc9f3bc48 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   17.671157] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007fd2dea3ee5d
[   17.671410] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   17.671662] RBP: 00007fffc9f3bc60 R08: 0000000000000800 R09: 0000000000000800
[   17.671915] R10: 0000000000000000 R11: 0000000000000213 R12: 00007fffc9f3bd78
[   17.672169] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007fd2ded75000
[   17.672428]  </TASK>
[   17.672513] Modules linked in:
[   17.672714] ---[ end trace 0000000000000000 ]---
[   17.672884] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   17.673092] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   17.673736] RSP: 0018:ffff88802457fba8 EFLAGS: 00010206
[   17.673925] RAX: dffffc0000000000 RBX: ffff888014f9b000 RCX: 0000000000000000
[   17.674179] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   17.674433] RBP: ffff88802457fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   17.674693] R10: ffff88800aad88df R11: 0000000000000001 R12: 0000000000000000
[   17.674970] R13: ffffffff85cc0180 R14: ffff8880109b6ac0 R15: ffffffff87070ae0
[   17.675223] FS:  00007fd2ded34600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   17.675508] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   17.675715] CR2: 0000000020000080 CR3: 00000000132ee000 CR4: 0000000000750ef0
[   17.675970] PKRU: 55555554
[   17.676332] ------------[ cut here ]------------
[   17.676501] WARNING: CPU: 0 PID: 816 at drivers/iommu/iommufd/main.c:258 iommufd_fops_release+0x2a3/0x300
[   17.676841] Modules linked in:
[   17.676956] CPU: 0 PID: 816 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   17.677264] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   17.677661] RIP: 0010:iommufd_fops_release+0x2a3/0x300
[   17.677849] Code: 45 d0 65 48 2b 04 25 28 00 00 00 75 54 48 81 c4 88 00 00 00 31 c0 5b 41 5c 41 5d 41 5e 41 5f 5d c3 cc cc cc cc e8 ad 4f 0a fe <0f> 0b eb a6 e8 74 23 67 fe e9 f6 fe ff ff 48 89 85 50 ff ff ff e8
[   17.678493] RSP: 0018:ffff888024757c00 EFLAGS: 00010293
[   17.678691] RAX: 0000000000000000 RBX: ffff88800fe06e08 RCX: 0000000000000000
[   17.678956] RDX: ffff8880170d2500 RSI: ffffffff835563e3 RDI: ffffffff86702b40
[   17.679209] RBP: ffff888024757cb0 R08: 0000000000000000 R09: fffffbfff0eb2644
[   17.679462] R10: ffffffff87593227 R11: ffff8880114db600 R12: 0000000000000000
[   17.679715] R13: ffff888013356918 R14: ffff888024757c48 R15: ffffffff83556140
[   17.679968] FS:  0000000000000000(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   17.680253] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   17.680460] CR2: 0000000020000080 CR3: 000000000687e000 CR4: 0000000000750ef0
[   17.680714] PKRU: 55555554
[   17.680816] Call Trace:
[   17.680909]  <TASK>
[   17.680990]  ? show_regs+0x6e/0x80
[   17.681121]  ? __warn+0xef/0x340
[   17.681247]  ? report_bug+0x25e/0x4b0
[   17.681387]  ? iommufd_fops_release+0x2a3/0x300
[   17.681556]  ? report_bug+0x2cb/0x4b0
[   17.681699]  ? handle_bug+0x46/0x90
[   17.681832]  ? exc_invalid_op+0x1d/0x50
[   17.681977]  ? asm_exc_invalid_op+0x1f/0x30
[   17.682131]  ? __pfx_iommufd_fops_release+0x10/0x10
[   17.682314]  ? iommufd_fops_release+0x2a3/0x300
[   17.682483]  ? iommufd_fops_release+0x2a3/0x300
[   17.682664]  ? __pfx_iommufd_fops_release+0x10/0x10
[   17.682849]  ? rcu_is_watching+0x19/0xc0
[   17.683002]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   17.683201]  ? __pfx_iommufd_fops_release+0x10/0x10
[   17.683382]  __fput+0x424/0xaf0
[   17.683508]  ____fput+0x1f/0x30
[   17.683631]  task_work_run+0x19d/0x2b0
[   17.683774]  ? __pfx_task_work_run+0x10/0x10
[   17.683934]  ? __sanitizer_cov_trace_const_cmp1+0x1e/0x30
[   17.684131]  ? switch_task_namespaces+0xa9/0xe0
[   17.684302]  do_exit+0xac9/0x2790
[   17.684430]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   17.684658]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   17.684841]  ? __pfx_do_exit+0x10/0x10
[   17.684982]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   17.685181]  ? security_file_ioctl+0x9d/0xd0
[   17.685344]  make_task_dead+0x182/0x3c0
[   17.685490]  rewind_stack_and_make_dead+0x17/0x20
[   17.685665] RIP: 0033:0x7fd2dea3ee5d
[   17.685799] Code: Unable to access opcode bytes at 0x7fd2dea3ee33.
[   17.686018] RSP: 002b:00007fffc9f3bc48 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   17.686288] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007fd2dea3ee5d
[   17.686541] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   17.686808] RBP: 00007fffc9f3bc60 R08: 0000000000000800 R09: 0000000000000800
[   17.687069] R10: 0000000000000000 R11: 0000000000000213 R12: 00007fffc9f3bd78
[   17.687322] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007fd2ded75000
[   17.687581]  </TASK>
[   17.687665] irq event stamp: 0
[   17.687780] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   17.688004] hardirqs last disabled at (0): [<ffffffff8122f2d1>] copy_process+0x1c51/0x7140
[   17.688298] softirqs last  enabled at (0): [<ffffffff8122f312>] copy_process+0x1c92/0x7140
[   17.688591] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   17.688816] ---[ end trace 0000000000000000 ]---
[   17.691560] iommufd_mock iommufd_mock98: Adding to iommu group 98
[   17.691805] iommufd_mock iommufd_mock98: Removing from iommu group 98
[   17.692053] general protection fault, probably for non-canonical address 0xdffffc0000000006: 0000 [#99] PREEMPT SMP KASAN NOPTI
[   17.692456] KASAN: null-ptr-deref in range [0x0000000000000030-0x0000000000000037]
[   17.692724] CPU: 0 PID: 817 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   17.693033] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   17.693432] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   17.693642] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   17.694287] RSP: 0018:ffff8880145a7ba8 EFLAGS: 00010206
[   17.694478] RAX: dffffc0000000000 RBX: ffff888024799000 RCX: 0000000000000000
[   17.694734] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   17.695000] RBP: ffff8880145a7bc0 R08: 0000000000000001 R09: ffffed100155b11b
[   17.695255] R10: ffff88800aad88df R11: 5f6466756d6d6f69 R12: 0000000000000000
[   17.695508] R13: ffffffff85cc0180 R14: ffff88800bd79a00 R15: ffffffff87070ae0
[   17.695762] FS:  00007fb01b81c600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   17.696049] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   17.696256] CR2: 0000000020000080 CR3: 00000000132ee000 CR4: 0000000000750ef0
[   17.696511] PKRU: 55555554
[   17.696614] Call Trace:
[   17.696707]  <TASK>
[   17.696789]  ? show_regs+0x6e/0x80
[   17.696923]  ? die_addr+0x45/0xb0
[   17.697055]  ? exc_general_protection+0x159/0x250
[   17.697235]  ? asm_exc_general_protection+0x2b/0x30
[   17.697419]  ? sysfs_remove_link_from_group+0x21/0x90
[   17.697607]  ? sysfs_remove_link_from_group+0x37/0x90
[   17.697795]  ? sysfs_remove_link_from_group+0x21/0x90
[   17.697983]  iommu_device_unlink+0x85/0xd0
[   17.698138]  iommu_deinit_device+0x11f/0x4c0
[   17.698301]  __iommu_group_remove_device+0x26b/0x300
[   17.698489]  iommu_group_remove_device+0x8a/0xb0
[   17.698664]  iommufd_test+0x1f1a/0x2d10
[   17.698816]  ? __pfx_lock_release+0x10/0x10
[   17.698973]  ? __pfx_lock_acquire+0x10/0x10
[   17.699133]  ? __pfx_iommufd_test+0x10/0x10
[   17.699290]  ? __sanitizer_cov_trace_const_cmp8+0x1c/0x30
[   17.699491]  iommufd_fops_ioctl+0x377/0x510
[   17.699651]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   17.699827]  ? trace_hardirqs_on+0x26/0x120
[   17.699987]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   17.700216]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   17.700400]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   17.700600]  ? security_file_ioctl+0x9d/0xd0
[   17.700763]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   17.700940]  __x64_sys_ioctl+0x1b9/0x230
[   17.701088]  do_syscall_64+0x3c/0x90
[   17.701224]  entry_SYSCALL_64_after_hwframe+0x6e/0xd8
[   17.701410] RIP: 0033:0x7fb01b63ee5d
[   17.701544] Code: ff c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d 93 af 1b 00 f7 d8 64 89 01 48
[   17.702190] RSP: 002b:00007ffffddcfd18 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   17.702461] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007fb01b63ee5d
[   17.702715] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   17.702977] RBP: 00007ffffddcfd30 R08: 0000000000000800 R09: 0000000000000800
[   17.703232] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffffddcfe48
[   17.703485] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007fb01b85d000
[   17.703745]  </TASK>
[   17.703830] Modules linked in:
[   17.703989] ---[ end trace 0000000000000000 ]---
[   17.704158] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   17.704367] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   17.705014] RSP: 0018:ffff88802457fba8 EFLAGS: 00010206
[   17.705204] RAX: dffffc0000000000 RBX: ffff888014f9b000 RCX: 0000000000000000
[   17.705457] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   17.705711] RBP: ffff88802457fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   17.705964] R10: ffff88800aad88df R11: 0000000000000001 R12: 0000000000000000
[   17.706217] R13: ffffffff85cc0180 R14: ffff8880109b6ac0 R15: ffffffff87070ae0
[   17.706471] FS:  00007fb01b81c600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   17.706768] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   17.706996] CR2: 0000000020000080 CR3: 00000000132ee000 CR4: 0000000000750ef0
[   17.707250] PKRU: 55555554
[   17.707606] ------------[ cut here ]------------
[   17.707775] WARNING: CPU: 0 PID: 817 at drivers/iommu/iommufd/main.c:258 iommufd_fops_release+0x2a3/0x300
[   17.708116] Modules linked in:
[   17.708233] CPU: 0 PID: 817 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   17.708542] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   17.708941] RIP: 0010:iommufd_fops_release+0x2a3/0x300
[   17.709130] Code: 45 d0 65 48 2b 04 25 28 00 00 00 75 54 48 81 c4 88 00 00 00 31 c0 5b 41 5c 41 5d 41 5e 41 5f 5d c3 cc cc cc cc e8 ad 4f 0a fe <0f> 0b eb a6 e8 74 23 67 fe e9 f6 fe ff ff 48 89 85 50 ff ff ff e8
[   17.709776] RSP: 0018:ffff8880145a7c00 EFLAGS: 00010293
[   17.709967] RAX: 0000000000000000 RBX: ffff88800fe06308 RCX: 0000000000000000
[   17.710220] RDX: ffff8880170d4a00 RSI: ffffffff835563e3 RDI: ffffffff86702b40
[   17.710474] RBP: ffff8880145a7cb0 R08: 0000000000000000 R09: fffffbfff0eb2644
[   17.710739] R10: ffffffff87593227 R11: ffff88800fe12a00 R12: 0000000000000000
[   17.711001] R13: ffff888013357098 R14: ffff8880145a7c48 R15: ffffffff83556140
[   17.711259] FS:  0000000000000000(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   17.711554] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   17.711762] CR2: 0000000020000080 CR3: 000000000687e000 CR4: 0000000000750ef0
[   17.712017] PKRU: 55555554
[   17.712119] Call Trace:
[   17.712212]  <TASK>
[   17.712294]  ? show_regs+0x6e/0x80
[   17.712425]  ? __warn+0xef/0x340
[   17.712552]  ? report_bug+0x25e/0x4b0
[   17.712692]  ? iommufd_fops_release+0x2a3/0x300
[   17.712861]  ? report_bug+0x2cb/0x4b0
[   17.713004]  ? handle_bug+0x46/0x90
[   17.713137]  ? exc_invalid_op+0x1d/0x50
[   17.713282]  ? asm_exc_invalid_op+0x1f/0x30
[   17.713438]  ? __pfx_iommufd_fops_release+0x10/0x10
[   17.713621]  ? iommufd_fops_release+0x2a3/0x300
[   17.713791]  ? iommufd_fops_release+0x2a3/0x300
[   17.713963]  ? __pfx_iommufd_fops_release+0x10/0x10
[   17.714144]  ? rcu_is_watching+0x19/0xc0
[   17.714293]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   17.714492]  ? __pfx_iommufd_fops_release+0x10/0x10
[   17.714680]  __fput+0x424/0xaf0
[   17.714811]  ____fput+0x1f/0x30
[   17.714938]  task_work_run+0x19d/0x2b0
[   17.715081]  ? __pfx_task_work_run+0x10/0x10
[   17.715242]  ? __sanitizer_cov_trace_const_cmp1+0x1e/0x30
[   17.715439]  ? switch_task_namespaces+0xa9/0xe0
[   17.715611]  do_exit+0xac9/0x2790
[   17.715739]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   17.715967]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   17.716150]  ? __pfx_do_exit+0x10/0x10
[   17.716292]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   17.716490]  ? security_file_ioctl+0x9d/0xd0
[   17.716653]  make_task_dead+0x182/0x3c0
[   17.716799]  rewind_stack_and_make_dead+0x17/0x20
[   17.716975] RIP: 0033:0x7fb01b63ee5d
[   17.717109] Code: Unable to access opcode bytes at 0x7fb01b63ee33.
[   17.717329] RSP: 002b:00007ffffddcfd18 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   17.717600] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007fb01b63ee5d
[   17.717854] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   17.718109] RBP: 00007ffffddcfd30 R08: 0000000000000800 R09: 0000000000000800
[   17.718362] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffffddcfe48
[   17.718623] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007fb01b85d000
[   17.718891]  </TASK>
[   17.718976] irq event stamp: 0
[   17.719091] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   17.719316] hardirqs last disabled at (0): [<ffffffff8122f2d1>] copy_process+0x1c51/0x7140
[   17.719610] softirqs last  enabled at (0): [<ffffffff8122f312>] copy_process+0x1c92/0x7140
[   17.719904] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   17.720128] ---[ end trace 0000000000000000 ]---
[   17.722899] iommufd_mock iommufd_mock99: Adding to iommu group 99
[   17.723144] iommufd_mock iommufd_mock99: Removing from iommu group 99
[   17.723392] general protection fault, probably for non-canonical address 0xdffffc0000000006: 0000 [#100] PREEMPT SMP KASAN NOPTI
[   17.723798] KASAN: null-ptr-deref in range [0x0000000000000030-0x0000000000000037]
[   17.724067] CPU: 0 PID: 818 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   17.724376] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   17.724776] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   17.724986] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   17.725633] RSP: 0018:ffff888014c7fba8 EFLAGS: 00010206
[   17.725824] RAX: dffffc0000000000 RBX: ffff88802479b000 RCX: 0000000000000000
[   17.726078] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   17.726332] RBP: ffff888014c7fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   17.726587] R10: ffff88800aad88df R11: 5f6466756d6d6f69 R12: 0000000000000000
[   17.726848] R13: ffffffff85cc0180 R14: ffff88800bd798c0 R15: ffffffff87070ae0
[   17.727107] FS:  00007f5f414dc600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   17.727395] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   17.727603] CR2: 0000000020000080 CR3: 00000000132ee000 CR4: 0000000000750ef0
[   17.727859] PKRU: 55555554
[   17.727961] Call Trace:
[   17.728054]  <TASK>
[   17.728137]  ? show_regs+0x6e/0x80
[   17.728271]  ? die_addr+0x45/0xb0
[   17.728403]  ? exc_general_protection+0x159/0x250
[   17.728599]  ? asm_exc_general_protection+0x2b/0x30
[   17.728786]  ? sysfs_remove_link_from_group+0x21/0x90
[   17.728974]  ? sysfs_remove_link_from_group+0x37/0x90
[   17.729162]  ? sysfs_remove_link_from_group+0x21/0x90
[   17.729351]  iommu_device_unlink+0x85/0xd0
[   17.729505]  iommu_deinit_device+0x11f/0x4c0
[   17.729669]  __iommu_group_remove_device+0x26b/0x300
[   17.729856]  iommu_group_remove_device+0x8a/0xb0
[   17.730031]  iommufd_test+0x1f1a/0x2d10
[   17.730176]  ? __pfx_lock_release+0x10/0x10
[   17.730334]  ? __pfx_lock_acquire+0x10/0x10
[   17.730493]  ? __pfx_iommufd_test+0x10/0x10
[   17.730651]  ? __sanitizer_cov_trace_const_cmp8+0x1c/0x30
[   17.730858]  iommufd_fops_ioctl+0x377/0x510
[   17.731022]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   17.731198]  ? trace_hardirqs_on+0x26/0x120
[   17.731358]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   17.731588]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   17.731772]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   17.731972]  ? security_file_ioctl+0x9d/0xd0
[   17.732136]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   17.732313]  __x64_sys_ioctl+0x1b9/0x230
[   17.732462]  do_syscall_64+0x3c/0x90
[   17.732598]  entry_SYSCALL_64_after_hwframe+0x6e/0xd8
[   17.732784] RIP: 0033:0x7f5f4123ee5d
[   17.732920] Code: ff c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d 93 af 1b 00 f7 d8 64 89 01 48
[   17.733569] RSP: 002b:00007ffe82e59778 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   17.733840] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f5f4123ee5d
[   17.734095] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   17.734349] RBP: 00007ffe82e59790 R08: 0000000000000800 R09: 0000000000000800
[   17.734604] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffe82e598a8
[   17.734866] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f5f4151d000
[   17.735125]  </TASK>
[   17.735213] Modules linked in:
[   17.735446] ---[ end trace 0000000000000000 ]---
[   17.735616] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   17.735825] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   17.736472] RSP: 0018:ffff88802457fba8 EFLAGS: 00010206
[   17.736662] RAX: dffffc0000000000 RBX: ffff888014f9b000 RCX: 0000000000000000
[   17.736916] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   17.737171] RBP: ffff88802457fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   17.737425] R10: ffff88800aad88df R11: 0000000000000001 R12: 0000000000000000
[   17.737679] R13: ffffffff85cc0180 R14: ffff8880109b6ac0 R15: ffffffff87070ae0
[   17.737934] FS:  00007f5f414dc600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   17.738220] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   17.738428] CR2: 0000000020000080 CR3: 00000000132ee000 CR4: 0000000000750ef0
[   17.738691] PKRU: 55555554
[   17.739061] ------------[ cut here ]------------
[   17.739231] WARNING: CPU: 0 PID: 818 at drivers/iommu/iommufd/main.c:258 iommufd_fops_release+0x2a3/0x300
[   17.739572] Modules linked in:
[   17.739688] CPU: 0 PID: 818 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   17.739997] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   17.740396] RIP: 0010:iommufd_fops_release+0x2a3/0x300
[   17.740586] Code: 45 d0 65 48 2b 04 25 28 00 00 00 75 54 48 81 c4 88 00 00 00 31 c0 5b 41 5c 41 5d 41 5e 41 5f 5d c3 cc cc cc cc e8 ad 4f 0a fe <0f> 0b eb a6 e8 74 23 67 fe e9 f6 fe ff ff 48 89 85 50 ff ff ff e8
[   17.741232] RSP: 0018:ffff888014c7fc00 EFLAGS: 00010293
[   17.741423] RAX: 0000000000000000 RBX: ffff88800fe06108 RCX: 0000000000000000
[   17.741676] RDX: ffff8880170d0000 RSI: ffffffff835563e3 RDI: ffffffff86702b40
[   17.741930] RBP: ffff888014c7fcb0 R08: 0000000000000000 R09: fffffbfff0eb2644
[   17.742183] R10: ffffffff87593227 R11: ffff8880114d3200 R12: 0000000000000000
[   17.742437] R13: ffff88801359fd18 R14: ffff888014c7fc48 R15: ffffffff83556140
[   17.742699] FS:  0000000000000000(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   17.742994] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   17.743204] CR2: 0000000020000080 CR3: 000000000687e000 CR4: 0000000000750ef0
[   17.743462] PKRU: 55555554
[   17.743565] Call Trace:
[   17.743657]  <TASK>
[   17.743740]  ? show_regs+0x6e/0x80
[   17.743871]  ? __warn+0xef/0x340
[   17.743997]  ? report_bug+0x25e/0x4b0
[   17.744138]  ? iommufd_fops_release+0x2a3/0x300
[   17.744308]  ? report_bug+0x2cb/0x4b0
[   17.744450]  ? handle_bug+0x46/0x90
[   17.744584]  ? exc_invalid_op+0x1d/0x50
[   17.744729]  ? asm_exc_invalid_op+0x1f/0x30
[   17.744884]  ? __pfx_iommufd_fops_release+0x10/0x10
[   17.745068]  ? iommufd_fops_release+0x2a3/0x300
[   17.745238]  ? iommufd_fops_release+0x2a3/0x300
[   17.745410]  ? __pfx_iommufd_fops_release+0x10/0x10
[   17.745591]  ? rcu_is_watching+0x19/0xc0
[   17.745741]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   17.745940]  ? __pfx_iommufd_fops_release+0x10/0x10
[   17.746121]  __fput+0x424/0xaf0
[   17.746247]  ____fput+0x1f/0x30
[   17.746370]  task_work_run+0x19d/0x2b0
[   17.746513]  ? __pfx_task_work_run+0x10/0x10
[   17.746680]  ? __sanitizer_cov_trace_const_cmp1+0x1e/0x30
[   17.746892]  ? switch_task_namespaces+0xa9/0xe0
[   17.747063]  do_exit+0xac9/0x2790
[   17.747191]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   17.747419]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   17.747602]  ? __pfx_do_exit+0x10/0x10
[   17.747744]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   17.747942]  ? security_file_ioctl+0x9d/0xd0
[   17.748106]  make_task_dead+0x182/0x3c0
[   17.748253]  rewind_stack_and_make_dead+0x17/0x20
[   17.748429] RIP: 0033:0x7f5f4123ee5d
[   17.748563] Code: Unable to access opcode bytes at 0x7f5f4123ee33.
[   17.748785] RSP: 002b:00007ffe82e59778 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   17.749059] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f5f4123ee5d
[   17.749313] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   17.749568] RBP: 00007ffe82e59790 R08: 0000000000000800 R09: 0000000000000800
[   17.749822] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffe82e598a8
[   17.750077] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f5f4151d000
[   17.750337]  </TASK>
[   17.750422] irq event stamp: 0
[   17.750537] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   17.750784] hardirqs last disabled at (0): [<ffffffff8122f2d1>] copy_process+0x1c51/0x7140
[   17.751087] softirqs last  enabled at (0): [<ffffffff8122f312>] copy_process+0x1c92/0x7140
[   17.751382] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   17.751607] ---[ end trace 0000000000000000 ]---
[   17.754151] iommufd_mock iommufd_mock100: Adding to iommu group 100
[   17.754403] iommufd_mock iommufd_mock100: Removing from iommu group 100
[   17.754693] general protection fault, probably for non-canonical address 0xdffffc0000000006: 0000 [#101] PREEMPT SMP KASAN NOPTI
[   17.755112] KASAN: null-ptr-deref in range [0x0000000000000030-0x0000000000000037]
[   17.755380] CPU: 0 PID: 819 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   17.755689] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   17.756088] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   17.756298] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   17.756946] RSP: 0018:ffff888013bc7ba8 EFLAGS: 00010206
[   17.757136] RAX: dffffc0000000000 RBX: ffff88802479a000 RCX: 0000000000000000
[   17.757390] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   17.757644] RBP: ffff888013bc7bc0 R08: 0000000000000001 R09: ffffed100155b11b
[   17.757898] R10: ffff88800aad88df R11: 5f6466756d6d6f69 R12: 0000000000000000
[   17.758152] R13: ffffffff85cc0180 R14: ffff88800bbbdc40 R15: ffffffff87070ae0
[   17.758408] FS:  00007f9a4ab03600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   17.758698] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   17.758917] CR2: 0000000020000080 CR3: 00000000132ee000 CR4: 0000000000750ef0
[   17.759172] PKRU: 55555554
[   17.759274] Call Trace:
[   17.759367]  <TASK>
[   17.759450]  ? show_regs+0x6e/0x80
[   17.759584]  ? die_addr+0x45/0xb0
[   17.759716]  ? exc_general_protection+0x159/0x250
[   17.759897]  ? asm_exc_general_protection+0x2b/0x30
[   17.760081]  ? sysfs_remove_link_from_group+0x21/0x90
[   17.760269]  ? sysfs_remove_link_from_group+0x37/0x90
[   17.760457]  ? sysfs_remove_link_from_group+0x21/0x90
[   17.760645]  iommu_device_unlink+0x85/0xd0
[   17.760800]  iommu_deinit_device+0x11f/0x4c0
[   17.760963]  __iommu_group_remove_device+0x26b/0x300
[   17.761151]  iommu_group_remove_device+0x8a/0xb0
[   17.761325]  iommufd_test+0x1f1a/0x2d10
[   17.761470]  ? __pfx_lock_release+0x10/0x10
[   17.761628]  ? __pfx_lock_acquire+0x10/0x10
[   17.761787]  ? __pfx_iommufd_test+0x10/0x10
[   17.761945]  ? __sanitizer_cov_trace_const_cmp8+0x1c/0x30
[   17.762147]  iommufd_fops_ioctl+0x377/0x510
[   17.762306]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   17.762483]  ? trace_hardirqs_on+0x26/0x120
[   17.762643]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   17.762879]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   17.763064]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   17.763263]  ? security_file_ioctl+0x9d/0xd0
[   17.763427]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   17.763604]  __x64_sys_ioctl+0x1b9/0x230
[   17.763752]  do_syscall_64+0x3c/0x90
[   17.763888]  entry_SYSCALL_64_after_hwframe+0x6e/0xd8
[   17.764074] RIP: 0033:0x7f9a4a83ee5d
[   17.764209] Code: ff c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d 93 af 1b 00 f7 d8 64 89 01 48
[   17.764854] RSP: 002b:00007fff766b67b8 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   17.765125] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f9a4a83ee5d
[   17.765379] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   17.765633] RBP: 00007fff766b67d0 R08: 0000000000000800 R09: 0000000000000800
[   17.765887] R10: 0000000000000000 R11: 0000000000000213 R12: 00007fff766b68e8
[   17.766140] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f9a4ab44000
[   17.766400]  </TASK>
[   17.766484] Modules linked in:
[   17.766727] ---[ end trace 0000000000000000 ]---
[   17.766906] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   17.767115] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   17.767761] RSP: 0018:ffff88802457fba8 EFLAGS: 00010206
[   17.767951] RAX: dffffc0000000000 RBX: ffff888014f9b000 RCX: 0000000000000000
[   17.768204] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   17.768458] RBP: ffff88802457fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   17.768711] R10: ffff88800aad88df R11: 0000000000000001 R12: 0000000000000000
[   17.768965] R13: ffffffff85cc0180 R14: ffff8880109b6ac0 R15: ffffffff87070ae0
[   17.769219] FS:  00007f9a4ab03600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   17.769505] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   17.769712] CR2: 0000000020000080 CR3: 00000000132ee000 CR4: 0000000000750ef0
[   17.769967] PKRU: 55555554
[   17.770325] ------------[ cut here ]------------
[   17.770493] WARNING: CPU: 0 PID: 819 at drivers/iommu/iommufd/main.c:258 iommufd_fops_release+0x2a3/0x300
[   17.770853] Modules linked in:
[   17.770969] CPU: 0 PID: 819 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   17.771278] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   17.771676] RIP: 0010:iommufd_fops_release+0x2a3/0x300
[   17.771866] Code: 45 d0 65 48 2b 04 25 28 00 00 00 75 54 48 81 c4 88 00 00 00 31 c0 5b 41 5c 41 5d 41 5e 41 5f 5d c3 cc cc cc cc e8 ad 4f 0a fe <0f> 0b eb a6 e8 74 23 67 fe e9 f6 fe ff ff 48 89 85 50 ff ff ff e8
[   17.772512] RSP: 0018:ffff888013bc7c00 EFLAGS: 00010293
[   17.772701] RAX: 0000000000000000 RBX: ffff88800fe06d08 RCX: 0000000000000000
[   17.772955] RDX: ffff88800f782500 RSI: ffffffff835563e3 RDI: ffffffff86702b40
[   17.773209] RBP: ffff888013bc7cb0 R08: 0000000000000000 R09: fffffbfff0eb2644
[   17.773463] R10: ffffffff87593227 R11: ffff888012ca4000 R12: 0000000000000000
[   17.773717] R13: ffff88801966b598 R14: ffff888013bc7c48 R15: ffffffff83556140
[   17.773970] FS:  0000000000000000(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   17.774256] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   17.774464] CR2: 0000000020000080 CR3: 000000000687e000 CR4: 0000000000750ef0
[   17.774726] PKRU: 55555554
[   17.774833] Call Trace:
[   17.774930]  <TASK>
[   17.775012]  ? show_regs+0x6e/0x80
[   17.775144]  ? __warn+0xef/0x340
[   17.775270]  ? report_bug+0x25e/0x4b0
[   17.775411]  ? iommufd_fops_release+0x2a3/0x300
[   17.775640]  ? report_bug+0x2cb/0x4b0
[   17.775862]  ? handle_bug+0x46/0x90
[   17.775996]  ? exc_invalid_op+0x1d/0x50
[   17.776141]  ? asm_exc_invalid_op+0x1f/0x30
[   17.776335]  ? __pfx_iommufd_fops_release+0x10/0x10
[   17.776561]  ? iommufd_fops_release+0x2a3/0x300
[   17.776731]  ? iommufd_fops_release+0x2a3/0x300
[   17.776947]  ? __pfx_iommufd_fops_release+0x10/0x10
[   17.777161]  ? rcu_is_watching+0x19/0xc0
[   17.777311]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   17.777552]  ? __pfx_iommufd_fops_release+0x10/0x10
[   17.777770]  __fput+0x424/0xaf0
[   17.777897]  ____fput+0x1f/0x30
[   17.778072]  task_work_run+0x19d/0x2b0
[   17.778265]  ? __pfx_task_work_run+0x10/0x10
[   17.778429]  ? __sanitizer_cov_trace_const_cmp1+0x1e/0x30
[   17.778639]  ? switch_task_namespaces+0xa9/0xe0
[   17.778882]  do_exit+0xac9/0x2790
[   17.779011]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   17.779239]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   17.779428]  ? __pfx_do_exit+0x10/0x10
[   17.779632]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   17.779831]  ? security_file_ioctl+0x9d/0xd0
[   17.779994]  make_task_dead+0x182/0x3c0
[   17.780170]  rewind_stack_and_make_dead+0x17/0x20
[   17.780407] RIP: 0033:0x7f9a4a83ee5d
[   17.780542] Code: Unable to access opcode bytes at 0x7f9a4a83ee33.
[   17.780761] RSP: 002b:00007fff766b67b8 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   17.781107] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f9a4a83ee5d
[   17.781361] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   17.781648] RBP: 00007fff766b67d0 R08: 0000000000000800 R09: 0000000000000800
[   17.781948] R10: 0000000000000000 R11: 0000000000000213 R12: 00007fff766b68e8
[   17.782202] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f9a4ab44000
[   17.782540]  </TASK>
[   17.782634] irq event stamp: 0
[   17.782753] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   17.782982] hardirqs last disabled at (0): [<ffffffff8122f2d1>] copy_process+0x1c51/0x7140
[   17.783282] softirqs last  enabled at (0): [<ffffffff8122f312>] copy_process+0x1c92/0x7140
[   17.783582] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   17.783893] ---[ end trace 0000000000000000 ]---
[   17.786692] iommufd_mock iommufd_mock101: Adding to iommu group 101
[   17.786951] iommufd_mock iommufd_mock101: Removing from iommu group 101
[   17.787210] general protection fault, probably for non-canonical address 0xdffffc0000000006: 0000 [#102] PREEMPT SMP KASAN NOPTI
[   17.787621] KASAN: null-ptr-deref in range [0x0000000000000030-0x0000000000000037]
[   17.787902] CPU: 0 PID: 820 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   17.788258] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   17.788664] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   17.788878] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   17.789536] RSP: 0018:ffff8880145a7ba8 EFLAGS: 00010206
[   17.789730] RAX: dffffc0000000000 RBX: ffff888024798000 RCX: 0000000000000000
[   17.789989] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   17.790248] RBP: ffff8880145a7bc0 R08: 0000000000000001 R09: ffffed100155b11b
[   17.790507] R10: ffff88800aad88df R11: 5f6466756d6d6f69 R12: 0000000000000000
[   17.790770] R13: ffffffff85cc0180 R14: ffff8880109b68e0 R15: ffffffff87070ae0
[   17.791028] FS:  00007fc5b2954600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   17.791319] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   17.791530] CR2: 0000000020000080 CR3: 000000000fdd2000 CR4: 0000000000750ef0
[   17.791790] PKRU: 55555554
[   17.791893] Call Trace:
[   17.791988]  <TASK>
[   17.792072]  ? show_regs+0x6e/0x80
[   17.792208]  ? die_addr+0x45/0xb0
[   17.792342]  ? exc_general_protection+0x159/0x250
[   17.792526]  ? asm_exc_general_protection+0x2b/0x30
[   17.792713]  ? sysfs_remove_link_from_group+0x21/0x90
[   17.792905]  ? sysfs_remove_link_from_group+0x37/0x90
[   17.793096]  ? sysfs_remove_link_from_group+0x21/0x90
[   17.793287]  iommu_device_unlink+0x85/0xd0
[   17.793445]  iommu_deinit_device+0x11f/0x4c0
[   17.793612]  __iommu_group_remove_device+0x26b/0x300
[   17.793803]  iommu_group_remove_device+0x8a/0xb0
[   17.793980]  iommufd_test+0x1f1a/0x2d10
[   17.794128]  ? __pfx_lock_release+0x10/0x10
[   17.794289]  ? __pfx_lock_acquire+0x10/0x10
[   17.794452]  ? __pfx_iommufd_test+0x10/0x10
[   17.794613]  ? __sanitizer_cov_trace_const_cmp8+0x1c/0x30
[   17.794820]  iommufd_fops_ioctl+0x377/0x510
[   17.794983]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   17.795165]  ? trace_hardirqs_on+0x26/0x120
[   17.795328]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   17.795563]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   17.795751]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   17.795954]  ? security_file_ioctl+0x9d/0xd0
[   17.796121]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   17.796301]  __x64_sys_ioctl+0x1b9/0x230
[   17.796452]  do_syscall_64+0x3c/0x90
[   17.796590]  entry_SYSCALL_64_after_hwframe+0x6e/0xd8
[   17.796780] RIP: 0033:0x7fc5b263ee5d
[   17.796918] Code: ff c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d 93 af 1b 00 f7 d8 64 89 01 48
[   17.797577] RSP: 002b:00007fff5e9f1958 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   17.797853] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007fc5b263ee5d
[   17.798112] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   17.798371] RBP: 00007fff5e9f1970 R08: 0000000000000800 R09: 0000000000000800
[   17.798630] R10: 0000000000000000 R11: 0000000000000213 R12: 00007fff5e9f1a88
[   17.798895] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007fc5b2995000
[   17.799154]  </TASK>
[   17.799238] Modules linked in:
[   17.799517] ---[ end trace 0000000000000000 ]---
[   17.799691] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   17.799904] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   17.800599] RSP: 0018:ffff88802457fba8 EFLAGS: 00010206
[   17.800837] RAX: dffffc0000000000 RBX: ffff888014f9b000 RCX: 0000000000000000
[   17.801090] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   17.801369] RBP: ffff88802457fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   17.801665] R10: ffff88800aad88df R11: 0000000000000001 R12: 0000000000000000
[   17.801919] R13: ffffffff85cc0180 R14: ffff8880109b6ac0 R15: ffffffff87070ae0
[   17.802238] FS:  00007fc5b2954600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   17.802539] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   17.802776] CR2: 0000000020000080 CR3: 000000000fdd2000 CR4: 0000000000750ef0
[   17.803118] PKRU: 55555554
[   17.803502] ------------[ cut here ]------------
[   17.803682] WARNING: CPU: 0 PID: 820 at drivers/iommu/iommufd/main.c:258 iommufd_fops_release+0x2a3/0x300
[   17.804088] Modules linked in:
[   17.804207] CPU: 0 PID: 820 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   17.804590] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   17.804996] RIP: 0010:iommufd_fops_release+0x2a3/0x300
[   17.805250] Code: 45 d0 65 48 2b 04 25 28 00 00 00 75 54 48 81 c4 88 00 00 00 31 c0 5b 41 5c 41 5d 41 5e 41 5f 5d c3 cc cc cc cc e8 ad 4f 0a fe <0f> 0b eb a6 e8 74 23 67 fe e9 f6 fe ff ff 48 89 85 50 ff ff ff e8
[   17.805967] RSP: 0018:ffff8880145a7c00 EFLAGS: 00010293
[   17.806161] RAX: 0000000000000000 RBX: ffff88800fe06908 RCX: 0000000000000000
[   17.806422] RDX: ffff888014758000 RSI: ffffffff835563e3 RDI: ffffffff86702b40
[   17.806761] RBP: ffff8880145a7cb0 R08: 0000000000000000 R09: fffffbfff0eb2644
[   17.807020] R10: ffffffff87593227 R11: ffff8880137ef200 R12: 0000000000000000
[   17.807278] R13: ffff88801966b818 R14: ffff8880145a7c48 R15: ffffffff83556140
[   17.807608] FS:  0000000000000000(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   17.807899] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   17.808119] CR2: 0000000020000080 CR3: 000000000687e000 CR4: 0000000000750ef0
[   17.808414] PKRU: 55555554
[   17.808519] Call Trace:
[   17.808613]  <TASK>
[   17.808697]  ? show_regs+0x6e/0x80
[   17.808892]  ? __warn+0xef/0x340
[   17.809021]  ? report_bug+0x25e/0x4b0
[   17.809165]  ? iommufd_fops_release+0x2a3/0x300
[   17.809338]  ? report_bug+0x2cb/0x4b0
[   17.809504]  ? handle_bug+0x46/0x90
[   17.809686]  ? exc_invalid_op+0x1d/0x50
[   17.809834]  ? asm_exc_invalid_op+0x1f/0x30
[   17.809992]  ? __pfx_iommufd_fops_release+0x10/0x10
[   17.810186]  ? iommufd_fops_release+0x2a3/0x300
[   17.810392]  ? iommufd_fops_release+0x2a3/0x300
[   17.810567]  ? __pfx_iommufd_fops_release+0x10/0x10
[   17.810763]  ? rcu_is_watching+0x19/0xc0
[   17.810916]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   17.811119]  ? __pfx_iommufd_fops_release+0x10/0x10
[   17.811353]  __fput+0x424/0xaf0
[   17.811482]  ____fput+0x1f/0x30
[   17.811607]  task_work_run+0x19d/0x2b0
[   17.811753]  ? __pfx_task_work_run+0x10/0x10
[   17.811921]  ? __sanitizer_cov_trace_const_cmp1+0x1e/0x30
[   17.812177]  ? switch_task_namespaces+0xa9/0xe0
[   17.812351]  do_exit+0xac9/0x2790
[   17.812481]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   17.812780]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   17.812967]  ? __pfx_do_exit+0x10/0x10
[   17.813111]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   17.813336]  ? security_file_ioctl+0x9d/0xd0
[   17.813525]  make_task_dead+0x182/0x3c0
[   17.813673]  rewind_stack_and_make_dead+0x17/0x20
[   17.813852] RIP: 0033:0x7fc5b263ee5d
[   17.813995] Code: Unable to access opcode bytes at 0x7fc5b263ee33.
[   17.814272] RSP: 002b:00007fff5e9f1958 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   17.814548] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007fc5b263ee5d
[   17.814888] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   17.815147] RBP: 00007fff5e9f1970 R08: 0000000000000800 R09: 0000000000000800
[   17.815405] R10: 0000000000000000 R11: 0000000000000213 R12: 00007fff5e9f1a88
[   17.815663] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007fc5b2995000
[   17.815996]  </TASK>
[   17.816083] irq event stamp: 0
[   17.816200] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   17.816438] hardirqs last disabled at (0): [<ffffffff8122f2d1>] copy_process+0x1c51/0x7140
[   17.816769] softirqs last  enabled at (0): [<ffffffff8122f312>] copy_process+0x1c92/0x7140
[   17.817076] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   17.817355] ---[ end trace 0000000000000000 ]---
[   17.820238] iommufd_mock iommufd_mock102: Adding to iommu group 102
[   17.820489] iommufd_mock iommufd_mock102: Removing from iommu group 102
[   17.820748] general protection fault, probably for non-canonical address 0xdffffc0000000006: 0000 [#103] PREEMPT SMP KASAN NOPTI
[   17.821160] KASAN: null-ptr-deref in range [0x0000000000000030-0x0000000000000037]
[   17.821483] CPU: 0 PID: 821 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   17.821798] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   17.822205] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   17.822421] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   17.823084] RSP: 0018:ffff888014c7fba8 EFLAGS: 00010206
[   17.823274] RAX: dffffc0000000000 RBX: ffff88802479e000 RCX: 0000000000000000
[   17.823527] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   17.823782] RBP: ffff888014c7fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   17.824040] R10: ffff88800aad88df R11: 5f6466756d6d6f69 R12: 0000000000000000
[   17.824292] R13: ffffffff85cc0180 R14: ffff888010830da0 R15: ffffffff87070ae0
[   17.824546] FS:  00007fe2972e9600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   17.824831] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   17.825045] CR2: 0000000020000080 CR3: 00000000132ee000 CR4: 0000000000750ef0
[   17.825299] PKRU: 55555554
[   17.825401] Call Trace:
[   17.825494]  <TASK>
[   17.825576]  ? show_regs+0x6e/0x80
[   17.825710]  ? die_addr+0x45/0xb0
[   17.825841]  ? exc_general_protection+0x159/0x250
[   17.826022]  ? asm_exc_general_protection+0x2b/0x30
[   17.826205]  ? sysfs_remove_link_from_group+0x21/0x90
[   17.826393]  ? sysfs_remove_link_from_group+0x37/0x90
[   17.826580]  ? sysfs_remove_link_from_group+0x21/0x90
[   17.826769]  iommu_device_unlink+0x85/0xd0
[   17.826937]  iommu_deinit_device+0x11f/0x4c0
[   17.827101]  __iommu_group_remove_device+0x26b/0x300
[   17.827287]  iommu_group_remove_device+0x8a/0xb0
[   17.827462]  iommufd_test+0x1f1a/0x2d10
[   17.827606]  ? __pfx_lock_release+0x10/0x10
[   17.827764]  ? __pfx_lock_acquire+0x10/0x10
[   17.827923]  ? __pfx_iommufd_test+0x10/0x10
[   17.828080]  ? __sanitizer_cov_trace_const_cmp8+0x1c/0x30
[   17.828280]  iommufd_fops_ioctl+0x377/0x510
[   17.828439]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   17.828615]  ? trace_hardirqs_on+0x26/0x120
[   17.828777]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   17.829008]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   17.829192]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   17.829394]  ? security_file_ioctl+0x9d/0xd0
[   17.829558]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   17.829734]  __x64_sys_ioctl+0x1b9/0x230
[   17.829882]  do_syscall_64+0x3c/0x90
[   17.830018]  entry_SYSCALL_64_after_hwframe+0x6e/0xd8
[   17.830204] RIP: 0033:0x7fe29703ee5d
[   17.830338] Code: ff c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d 93 af 1b 00 f7 d8 64 89 01 48
[   17.830993] RSP: 002b:00007ffe96da7f88 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   17.831262] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007fe29703ee5d
[   17.831516] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   17.831768] RBP: 00007ffe96da7fa0 R08: 0000000000000800 R09: 0000000000000800
[   17.832021] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffe96da80b8
[   17.832274] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007fe29732a000
[   17.832532]  </TASK>
[   17.832617] Modules linked in:
[   17.832876] ---[ end trace 0000000000000000 ]---
[   17.833047] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   17.833256] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   17.833915] RSP: 0018:ffff88802457fba8 EFLAGS: 00010206
[   17.834108] RAX: dffffc0000000000 RBX: ffff888014f9b000 RCX: 0000000000000000
[   17.834374] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   17.834712] RBP: ffff88802457fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   17.834998] R10: ffff88800aad88df R11: 0000000000000001 R12: 0000000000000000
[   17.835254] R13: ffffffff85cc0180 R14: ffff8880109b6ac0 R15: ffffffff87070ae0
[   17.835601] FS:  00007fe2972e9600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   17.835888] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   17.836108] CR2: 0000000020000080 CR3: 00000000132ee000 CR4: 0000000000750ef0
[   17.836412] PKRU: 55555554
[   17.836804] ------------[ cut here ]------------
[   17.836973] WARNING: CPU: 0 PID: 821 at drivers/iommu/iommufd/main.c:258 iommufd_fops_release+0x2a3/0x300
[   17.837313] Modules linked in:
[   17.837493] CPU: 0 PID: 821 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   17.837824] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   17.838289] RIP: 0010:iommufd_fops_release+0x2a3/0x300
[   17.838479] Code: 45 d0 65 48 2b 04 25 28 00 00 00 75 54 48 81 c4 88 00 00 00 31 c0 5b 41 5c 41 5d 41 5e 41 5f 5d c3 cc cc cc cc e8 ad 4f 0a fe <0f> 0b eb a6 e8 74 23 67 fe e9 f6 fe ff ff 48 89 85 50 ff ff ff e8
[   17.839230] RSP: 0018:ffff888014c7fc00 EFLAGS: 00010293
[   17.839420] RAX: 0000000000000000 RBX: ffff88800fe06808 RCX: 0000000000000000
[   17.839673] RDX: ffff88801475a500 RSI: ffffffff835563e3 RDI: ffffffff86702b40
[   17.839984] RBP: ffff888014c7fcb0 R08: 0000000000000000 R09: fffffbfff0eb2644
[   17.840237] R10: ffffffff87593227 R11: ffff88801358ba00 R12: 0000000000000000
[   17.840492] R13: ffff888011f03818 R14: ffff888014c7fc48 R15: ffffffff83556140
[   17.840790] FS:  0000000000000000(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   17.841076] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   17.841331] CR2: 0000000020000080 CR3: 000000000687e000 CR4: 0000000000750ef0
[   17.841585] PKRU: 55555554
[   17.841687] Call Trace:
[   17.841779]  <TASK>
[   17.841873]  ? show_regs+0x6e/0x80
[   17.842038]  ? __warn+0xef/0x340
[   17.842165]  ? report_bug+0x25e/0x4b0
[   17.842306]  ? iommufd_fops_release+0x2a3/0x300
[   17.842476]  ? report_bug+0x2cb/0x4b0
[   17.842647]  ? handle_bug+0x46/0x90
[   17.842828]  ? exc_invalid_op+0x1d/0x50
[   17.842977]  ? asm_exc_invalid_op+0x1f/0x30
[   17.843132]  ? __pfx_iommufd_fops_release+0x10/0x10
[   17.843314]  ? iommufd_fops_release+0x2a3/0x300
[   17.843484]  ? iommufd_fops_release+0x2a3/0x300
[   17.843667]  ? __pfx_iommufd_fops_release+0x10/0x10
[   17.843880]  ? rcu_is_watching+0x19/0xc0
[   17.844031]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   17.844229]  ? __pfx_iommufd_fops_release+0x10/0x10
[   17.844463]  __fput+0x424/0xaf0
[   17.844591]  ____fput+0x1f/0x30
[   17.844713]  task_work_run+0x19d/0x2b0
[   17.844856]  ? __pfx_task_work_run+0x10/0x10
[   17.845037]  ? __sanitizer_cov_trace_const_cmp1+0x1e/0x30
[   17.845257]  ? switch_task_namespaces+0xa9/0xe0
[   17.845428]  do_exit+0xac9/0x2790
[   17.845556]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   17.845835]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   17.846018]  ? __pfx_do_exit+0x10/0x10
[   17.846159]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   17.846363]  ? security_file_ioctl+0x9d/0xd0
[   17.846568]  make_task_dead+0x182/0x3c0
[   17.846725]  rewind_stack_and_make_dead+0x17/0x20
[   17.846918] RIP: 0033:0x7fe29703ee5d
[   17.847053] Code: Unable to access opcode bytes at 0x7fe29703ee33.
[   17.847271] RSP: 002b:00007ffe96da7f88 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   17.847595] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007fe29703ee5d
[   17.847848] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   17.848106] RBP: 00007ffe96da7fa0 R08: 0000000000000800 R09: 0000000000000800
[   17.848398] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffe96da80b8
[   17.848652] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007fe29732a000
[   17.848988]  </TASK>
[   17.849075] irq event stamp: 0
[   17.849189] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   17.849416] hardirqs last disabled at (0): [<ffffffff8122f2d1>] copy_process+0x1c51/0x7140
[   17.849768] softirqs last  enabled at (0): [<ffffffff8122f312>] copy_process+0x1c92/0x7140
[   17.850062] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   17.850330] ---[ end trace 0000000000000000 ]---
[   17.853147] iommufd_mock iommufd_mock103: Adding to iommu group 103
[   17.853395] iommufd_mock iommufd_mock103: Removing from iommu group 103
[   17.853651] general protection fault, probably for non-canonical address 0xdffffc0000000006: 0000 [#104] PREEMPT SMP KASAN NOPTI
[   17.854092] KASAN: null-ptr-deref in range [0x0000000000000030-0x0000000000000037]
[   17.854360] CPU: 0 PID: 822 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   17.854673] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   17.855084] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   17.855295] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   17.855941] RSP: 0018:ffff888013bc7ba8 EFLAGS: 00010206
[   17.856131] RAX: dffffc0000000000 RBX: ffff88802479d000 RCX: 0000000000000000
[   17.856384] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   17.856637] RBP: ffff888013bc7bc0 R08: 0000000000000001 R09: ffffed100155b11b
[   17.856890] R10: ffff88800aad88df R11: 5f6466756d6d6f69 R12: 0000000000000000
[   17.857143] R13: ffffffff85cc0180 R14: ffff888010830a80 R15: ffffffff87070ae0
[   17.857397] FS:  00007ff04746b600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   17.857683] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   17.857890] CR2: 0000000020000080 CR3: 000000000fdd2000 CR4: 0000000000750ef0
[   17.858144] PKRU: 55555554
[   17.858247] Call Trace:
[   17.858339]  <TASK>
[   17.858421]  ? show_regs+0x6e/0x80
[   17.858555]  ? die_addr+0x45/0xb0
[   17.858709]  ? exc_general_protection+0x159/0x250
[   17.858912]  ? asm_exc_general_protection+0x2b/0x30
[   17.859097]  ? sysfs_remove_link_from_group+0x21/0x90
[   17.859284]  ? sysfs_remove_link_from_group+0x37/0x90
[   17.859471]  ? sysfs_remove_link_from_group+0x21/0x90
[   17.859659]  iommu_device_unlink+0x85/0xd0
[   17.859813]  iommu_deinit_device+0x11f/0x4c0
[   17.859976]  __iommu_group_remove_device+0x26b/0x300
[   17.860163]  iommu_group_remove_device+0x8a/0xb0
[   17.860336]  iommufd_test+0x1f1a/0x2d10
[   17.860480]  ? __pfx_lock_release+0x10/0x10
[   17.860637]  ? __pfx_lock_acquire+0x10/0x10
[   17.860796]  ? __pfx_iommufd_test+0x10/0x10
[   17.860953]  ? __sanitizer_cov_trace_const_cmp8+0x1c/0x30
[   17.861154]  iommufd_fops_ioctl+0x377/0x510
[   17.861313]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   17.861488]  ? trace_hardirqs_on+0x26/0x120
[   17.861647]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   17.861877]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   17.862060]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   17.862258]  ? security_file_ioctl+0x9d/0xd0
[   17.862422]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   17.862598]  __x64_sys_ioctl+0x1b9/0x230
[   17.862749]  do_syscall_64+0x3c/0x90
[   17.862890]  entry_SYSCALL_64_after_hwframe+0x6e/0xd8
[   17.863076] RIP: 0033:0x7ff04723ee5d
[   17.863210] Code: ff c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d 93 af 1b 00 f7 d8 64 89 01 48
[   17.863855] RSP: 002b:00007fff4a643258 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   17.864124] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007ff04723ee5d
[   17.864377] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   17.864630] RBP: 00007fff4a643270 R08: 0000000000000800 R09: 0000000000000800
[   17.864883] R10: 0000000000000000 R11: 0000000000000213 R12: 00007fff4a643388
[   17.865135] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007ff0474ac000
[   17.865394]  </TASK>
[   17.865478] Modules linked in:
[   17.865686] ---[ end trace 0000000000000000 ]---
[   17.865855] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   17.866063] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   17.866713] RSP: 0018:ffff88802457fba8 EFLAGS: 00010206
[   17.866913] RAX: dffffc0000000000 RBX: ffff888014f9b000 RCX: 0000000000000000
[   17.867166] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   17.867498] RBP: ffff88802457fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   17.867806] R10: ffff88800aad88df R11: 0000000000000001 R12: 0000000000000000
[   17.868059] R13: ffffffff85cc0180 R14: ffff8880109b6ac0 R15: ffffffff87070ae0
[   17.868317] FS:  00007ff04746b600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   17.868665] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   17.868873] CR2: 0000000020000080 CR3: 000000000fdd2000 CR4: 0000000000750ef0
[   17.869192] PKRU: 55555554
[   17.869551] ------------[ cut here ]------------
[   17.869742] WARNING: CPU: 0 PID: 822 at drivers/iommu/iommufd/main.c:258 iommufd_fops_release+0x2a3/0x300
[   17.870134] Modules linked in:
[   17.870251] CPU: 0 PID: 822 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   17.870633] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   17.871042] RIP: 0010:iommufd_fops_release+0x2a3/0x300
[   17.871232] Code: 45 d0 65 48 2b 04 25 28 00 00 00 75 54 48 81 c4 88 00 00 00 31 c0 5b 41 5c 41 5d 41 5e 41 5f 5d c3 cc cc cc cc e8 ad 4f 0a fe <0f> 0b eb a6 e8 74 23 67 fe e9 f6 fe ff ff 48 89 85 50 ff ff ff e8
[   17.871934] RSP: 0018:ffff888013bc7c00 EFLAGS: 00010293
[   17.872146] RAX: 0000000000000000 RBX: ffff88800fe06c08 RCX: 0000000000000000
[   17.872438] RDX: ffff888014cdca00 RSI: ffffffff835563e3 RDI: ffffffff86702b40
[   17.872698] RBP: ffff888013bc7cb0 R08: 0000000000000000 R09: fffffbfff0eb2644
[   17.873006] R10: ffffffff87593227 R11: ffff88801313ca00 R12: 0000000000000000
[   17.873260] R13: ffff888011f02e18 R14: ffff888013bc7c48 R15: ffffffff83556140
[   17.873575] FS:  0000000000000000(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   17.873861] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   17.874085] CR2: 0000000020000080 CR3: 000000000687e000 CR4: 0000000000750ef0
[   17.874393] PKRU: 55555554
[   17.874495] Call Trace:
[   17.874596]  <TASK>
[   17.874678]  ? show_regs+0x6e/0x80
[   17.874818]  ? __warn+0xef/0x340
[   17.874947]  ? report_bug+0x25e/0x4b0
[   17.875110]  ? iommufd_fops_release+0x2a3/0x300
[   17.875328]  ? report_bug+0x2cb/0x4b0
[   17.875473]  ? handle_bug+0x46/0x90
[   17.875609]  ? exc_invalid_op+0x1d/0x50
[   17.875763]  ? asm_exc_invalid_op+0x1f/0x30
[   17.875976]  ? __pfx_iommufd_fops_release+0x10/0x10
[   17.876163]  ? iommufd_fops_release+0x2a3/0x300
[   17.876336]  ? iommufd_fops_release+0x2a3/0x300
[   17.876570]  ? __pfx_iommufd_fops_release+0x10/0x10
[   17.876753]  ? rcu_is_watching+0x19/0xc0
[   17.876902]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   17.877107]  ? __pfx_iommufd_fops_release+0x10/0x10
[   17.877349]  __fput+0x424/0xaf0
[   17.877476]  ____fput+0x1f/0x30
[   17.877599]  task_work_run+0x19d/0x2b0
[   17.877741]  ? __pfx_task_work_run+0x10/0x10
[   17.877964]  ? __sanitizer_cov_trace_const_cmp1+0x1e/0x30
[   17.878166]  ? switch_task_namespaces+0xa9/0xe0
[   17.878336]  do_exit+0xac9/0x2790
[   17.878475]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   17.878765]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   17.878953]  ? __pfx_do_exit+0x10/0x10
[   17.879095]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   17.879292]  ? security_file_ioctl+0x9d/0xd0
[   17.879455]  make_task_dead+0x182/0x3c0
[   17.879610]  rewind_stack_and_make_dead+0x17/0x20
[   17.879837] RIP: 0033:0x7ff04723ee5d
[   17.879972] Code: Unable to access opcode bytes at 0x7ff04723ee33.
[   17.880191] RSP: 002b:00007fff4a643258 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   17.880522] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007ff04723ee5d
[   17.880776] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   17.881051] RBP: 00007fff4a643270 R08: 0000000000000800 R09: 0000000000000800
[   17.881344] R10: 0000000000000000 R11: 0000000000000213 R12: 00007fff4a643388
[   17.881605] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007ff0474ac000
[   17.881916]  </TASK>
[   17.882002] irq event stamp: 0
[   17.882119] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   17.882410] hardirqs last disabled at (0): [<ffffffff8122f2d1>] copy_process+0x1c51/0x7140
[   17.882718] softirqs last  enabled at (0): [<ffffffff8122f312>] copy_process+0x1c92/0x7140
[   17.883019] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   17.883247] ---[ end trace 0000000000000000 ]---
[   17.886124] iommufd_mock iommufd_mock104: Adding to iommu group 104
[   17.886375] iommufd_mock iommufd_mock104: Removing from iommu group 104
[   17.886654] general protection fault, probably for non-canonical address 0xdffffc0000000006: 0000 [#105] PREEMPT SMP KASAN NOPTI
[   17.887073] KASAN: null-ptr-deref in range [0x0000000000000030-0x0000000000000037]
[   17.887347] CPU: 0 PID: 823 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   17.887661] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   17.888120] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   17.888336] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   17.888995] RSP: 0018:ffff8880145a7ba8 EFLAGS: 00010206
[   17.889189] RAX: dffffc0000000000 RBX: ffff8880166d3000 RCX: 0000000000000000
[   17.889448] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   17.889707] RBP: ffff8880145a7bc0 R08: 0000000000000001 R09: ffffed100155b11b
[   17.889965] R10: ffff88800aad88df R11: 5f6466756d6d6f69 R12: 0000000000000000
[   17.890224] R13: ffffffff85cc0180 R14: ffff8880139713e0 R15: ffffffff87070ae0
[   17.890483] FS:  00007f22a61d3600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   17.890779] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   17.890991] CR2: 0000000020000080 CR3: 00000000132ee000 CR4: 0000000000750ef0
[   17.891251] PKRU: 55555554
[   17.891355] Call Trace:
[   17.891450]  <TASK>
[   17.891534]  ? show_regs+0x6e/0x80
[   17.891671]  ? die_addr+0x45/0xb0
[   17.891806]  ? exc_general_protection+0x159/0x250
[   17.891990]  ? asm_exc_general_protection+0x2b/0x30
[   17.892178]  ? sysfs_remove_link_from_group+0x21/0x90
[   17.892370]  ? sysfs_remove_link_from_group+0x37/0x90
[   17.892561]  ? sysfs_remove_link_from_group+0x21/0x90
[   17.892753]  iommu_device_unlink+0x85/0xd0
[   17.892912]  iommu_deinit_device+0x11f/0x4c0
[   17.893079]  __iommu_group_remove_device+0x26b/0x300
[   17.893270]  iommu_group_remove_device+0x8a/0xb0
[   17.893448]  iommufd_test+0x1f1a/0x2d10
[   17.893594]  ? __pfx_lock_release+0x10/0x10
[   17.893755]  ? __pfx_lock_acquire+0x10/0x10
[   17.893918]  ? __pfx_iommufd_test+0x10/0x10
[   17.894079]  ? __sanitizer_cov_trace_const_cmp8+0x1c/0x30
[   17.894284]  iommufd_fops_ioctl+0x377/0x510
[   17.894446]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   17.894625]  ? trace_hardirqs_on+0x26/0x120
[   17.894792]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   17.895027]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   17.895210]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   17.895409]  ? security_file_ioctl+0x9d/0xd0
[   17.895572]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   17.895748]  __x64_sys_ioctl+0x1b9/0x230
[   17.895896]  do_syscall_64+0x3c/0x90
[   17.896032]  entry_SYSCALL_64_after_hwframe+0x6e/0xd8
[   17.896217] RIP: 0033:0x7f22a5e3ee5d
[   17.896352] Code: ff c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d 93 af 1b 00 f7 d8 64 89 01 48
[   17.896996] RSP: 002b:00007ffeaadfcfd8 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   17.897265] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f22a5e3ee5d
[   17.897518] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   17.897771] RBP: 00007ffeaadfcff0 R08: 0000000000000800 R09: 0000000000000800
[   17.898024] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffeaadfd108
[   17.898277] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f22a6214000
[   17.898536]  </TASK>
[   17.898623] Modules linked in:
[   17.898892] ---[ end trace 0000000000000000 ]---
[   17.899065] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   17.899278] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   17.900017] RSP: 0018:ffff88802457fba8 EFLAGS: 00010206
[   17.900208] RAX: dffffc0000000000 RBX: ffff888014f9b000 RCX: 0000000000000000
[   17.900461] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   17.900738] RBP: ffff88802457fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   17.901032] R10: ffff88800aad88df R11: 0000000000000001 R12: 0000000000000000
[   17.901291] R13: ffffffff85cc0180 R14: ffff8880109b6ac0 R15: ffffffff87070ae0
[   17.901603] FS:  00007f22a61d3600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   17.901888] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   17.902145] CR2: 0000000020000080 CR3: 00000000132ee000 CR4: 0000000000750ef0
[   17.902449] PKRU: 55555554
[   17.902842] ------------[ cut here ]------------
[   17.903093] WARNING: CPU: 0 PID: 823 at drivers/iommu/iommufd/main.c:258 iommufd_fops_release+0x2a3/0x300
[   17.903442] Modules linked in:
[   17.903560] CPU: 0 PID: 823 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   17.903943] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   17.904351] RIP: 0010:iommufd_fops_release+0x2a3/0x300
[   17.904610] Code: 45 d0 65 48 2b 04 25 28 00 00 00 75 54 48 81 c4 88 00 00 00 31 c0 5b 41 5c 41 5d 41 5e 41 5f 5d c3 cc cc cc cc e8 ad 4f 0a fe <0f> 0b eb a6 e8 74 23 67 fe e9 f6 fe ff ff 48 89 85 50 ff ff ff e8
[   17.905329] RSP: 0018:ffff8880145a7c00 EFLAGS: 00010293
[   17.905523] RAX: 0000000000000000 RBX: ffff88800fe06508 RCX: 0000000000000000
[   17.905793] RDX: ffff888014cd8000 RSI: ffffffff835563e3 RDI: ffffffff86702b40
[   17.906100] RBP: ffff8880145a7cb0 R08: 0000000000000000 R09: fffffbfff0eb2644
[   17.906360] R10: ffffffff87593227 R11: ffff88801895fe00 R12: 0000000000000000
[   17.906690] R13: ffff8880133e6b98 R14: ffff8880145a7c48 R15: ffffffff83556140
[   17.906961] FS:  0000000000000000(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   17.907253] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   17.907472] CR2: 0000000020000080 CR3: 000000000687e000 CR4: 0000000000750ef0
[   17.907786] PKRU: 55555554
[   17.907891] Call Trace:
[   17.907986]  <TASK>
[   17.908069]  ? show_regs+0x6e/0x80
[   17.908227]  ? __warn+0xef/0x340
[   17.908392]  ? report_bug+0x25e/0x4b0
[   17.908537]  ? iommufd_fops_release+0x2a3/0x300
[   17.908710]  ? report_bug+0x2cb/0x4b0
[   17.908869]  ? handle_bug+0x46/0x90
[   17.909048]  ? exc_invalid_op+0x1d/0x50
[   17.909197]  ? asm_exc_invalid_op+0x1f/0x30
[   17.909355]  ? __pfx_iommufd_fops_release+0x10/0x10
[   17.909601]  ? iommufd_fops_release+0x2a3/0x300
[   17.909775]  ? iommufd_fops_release+0x2a3/0x300
[   17.909950]  ? __pfx_iommufd_fops_release+0x10/0x10
[   17.910134]  ? rcu_is_watching+0x19/0xc0
[   17.910346]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   17.910550]  ? __pfx_iommufd_fops_release+0x10/0x10
[   17.910743]  __fput+0x424/0xaf0
[   17.910875]  ____fput+0x1f/0x30
[   17.911000]  task_work_run+0x19d/0x2b0
[   17.911146]  ? __pfx_task_work_run+0x10/0x10
[   17.911323]  ? __sanitizer_cov_trace_const_cmp1+0x1e/0x30
[   17.911577]  ? switch_task_namespaces+0xa9/0xe0
[   17.911752]  do_exit+0xac9/0x2790
[   17.911882]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   17.912180]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   17.912367]  ? __pfx_do_exit+0x10/0x10
[   17.912511]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   17.912732]  ? security_file_ioctl+0x9d/0xd0
[   17.912934]  make_task_dead+0x182/0x3c0
[   17.913084]  rewind_stack_and_make_dead+0x17/0x20
[   17.913263] RIP: 0033:0x7f22a5e3ee5d
[   17.913464] Code: Unable to access opcode bytes at 0x7f22a5e3ee33.
[   17.913688] RSP: 002b:00007ffeaadfcfd8 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   17.913963] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f22a5e3ee5d
[   17.914281] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   17.914540] RBP: 00007ffeaadfcff0 R08: 0000000000000800 R09: 0000000000000800
[   17.914861] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffeaadfd108
[   17.915121] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f22a6214000
[   17.915384]  </TASK>
[   17.915471] irq event stamp: 0
[   17.915588] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   17.915825] hardirqs last disabled at (0): [<ffffffff8122f2d1>] copy_process+0x1c51/0x7140
[   17.916178] softirqs last  enabled at (0): [<ffffffff8122f312>] copy_process+0x1c92/0x7140
[   17.916487] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   17.916769] ---[ end trace 0000000000000000 ]---
[   17.919652] iommufd_mock iommufd_mock105: Adding to iommu group 105
[   17.919902] iommufd_mock iommufd_mock105: Removing from iommu group 105
[   17.920162] general protection fault, probably for non-canonical address 0xdffffc0000000006: 0000 [#106] PREEMPT SMP KASAN NOPTI
[   17.920575] KASAN: null-ptr-deref in range [0x0000000000000030-0x0000000000000037]
[   17.920899] CPU: 0 PID: 824 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   17.921214] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   17.921621] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   17.921837] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   17.922497] RSP: 0018:ffff888014c7fba8 EFLAGS: 00010206
[   17.922692] RAX: dffffc0000000000 RBX: ffff8880166d2000 RCX: 0000000000000000
[   17.922958] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   17.923212] RBP: ffff888014c7fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   17.923465] R10: ffff88800aad88df R11: 5f6466756d6d6f69 R12: 0000000000000000
[   17.923718] R13: ffffffff85cc0180 R14: ffff8880139718a0 R15: ffffffff87070ae0
[   17.923971] FS:  00007ff9dca32600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   17.924257] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   17.924464] CR2: 0000000020000080 CR3: 000000000fdd0000 CR4: 0000000000750ef0
[   17.924719] PKRU: 55555554
[   17.924820] Call Trace:
[   17.924913]  <TASK>
[   17.924995]  ? show_regs+0x6e/0x80
[   17.925129]  ? die_addr+0x45/0xb0
[   17.925260]  ? exc_general_protection+0x159/0x250
[   17.925441]  ? asm_exc_general_protection+0x2b/0x30
[   17.925624]  ? sysfs_remove_link_from_group+0x21/0x90
[   17.925812]  ? sysfs_remove_link_from_group+0x37/0x90
[   17.925999]  ? sysfs_remove_link_from_group+0x21/0x90
[   17.926188]  iommu_device_unlink+0x85/0xd0
[   17.926345]  iommu_deinit_device+0x11f/0x4c0
[   17.926508]  __iommu_group_remove_device+0x26b/0x300
[   17.926699]  iommu_group_remove_device+0x8a/0xb0
[   17.926881]  iommufd_test+0x1f1a/0x2d10
[   17.927029]  ? __pfx_lock_release+0x10/0x10
[   17.927186]  ? __pfx_lock_acquire+0x10/0x10
[   17.927346]  ? __pfx_iommufd_test+0x10/0x10
[   17.927503]  ? __sanitizer_cov_trace_const_cmp8+0x1c/0x30
[   17.927705]  iommufd_fops_ioctl+0x377/0x510
[   17.927864]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   17.928039]  ? trace_hardirqs_on+0x26/0x120
[   17.928198]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   17.928427]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   17.928611]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   17.928810]  ? security_file_ioctl+0x9d/0xd0
[   17.928976]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   17.929154]  __x64_sys_ioctl+0x1b9/0x230
[   17.929302]  do_syscall_64+0x3c/0x90
[   17.929437]  entry_SYSCALL_64_after_hwframe+0x6e/0xd8
[   17.929623] RIP: 0033:0x7ff9dc83ee5d
[   17.929758] Code: ff c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d 93 af 1b 00 f7 d8 64 89 01 48
[   17.930403] RSP: 002b:00007ffd8d18ad58 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   17.930682] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007ff9dc83ee5d
[   17.930943] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   17.931196] RBP: 00007ffd8d18ad70 R08: 0000000000000800 R09: 0000000000000800
[   17.931449] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffd8d18ae88
[   17.931702] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007ff9dca73000
[   17.931960]  </TASK>
[   17.932044] Modules linked in:
[   17.932386] ---[ end trace 0000000000000000 ]---
[   17.932560] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   17.932774] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   17.933435] RSP: 0018:ffff88802457fba8 EFLAGS: 00010206
[   17.933628] RAX: dffffc0000000000 RBX: ffff888014f9b000 RCX: 0000000000000000
[   17.933888] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   17.934231] RBP: ffff88802457fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   17.934491] R10: ffff88800aad88df R11: 0000000000000001 R12: 0000000000000000
[   17.934772] R13: ffffffff85cc0180 R14: ffff8880109b6ac0 R15: ffffffff87070ae0
[   17.935085] FS:  00007ff9dca32600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   17.935377] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   17.935592] CR2: 0000000020000080 CR3: 000000000fdd0000 CR4: 0000000000750ef0
[   17.935917] PKRU: 55555554
[   17.936282] ------------[ cut here ]------------
[   17.936477] WARNING: CPU: 0 PID: 824 at drivers/iommu/iommufd/main.c:258 iommufd_fops_release+0x2a3/0x300
[   17.936858] Modules linked in:
[   17.936976] CPU: 0 PID: 824 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   17.937357] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   17.937772] RIP: 0010:iommufd_fops_release+0x2a3/0x300
[   17.938016] Code: 45 d0 65 48 2b 04 25 28 00 00 00 75 54 48 81 c4 88 00 00 00 31 c0 5b 41 5c 41 5d 41 5e 41 5f 5d c3 cc cc cc cc e8 ad 4f 0a fe <0f> 0b eb a6 e8 74 23 67 fe e9 f6 fe ff ff 48 89 85 50 ff ff ff e8
[   17.938754] RSP: 0018:ffff888014c7fc00 EFLAGS: 00010293
[   17.938949] RAX: 0000000000000000 RBX: ffff88800fe06708 RCX: 0000000000000000
[   17.939213] RDX: ffff8880122b4a00 RSI: ffffffff835563e3 RDI: ffffffff86702b40
[   17.939498] RBP: ffff888014c7fcb0 R08: 0000000000000000 R09: fffffbfff0eb2644
[   17.939798] R10: ffffffff87593227 R11: ffff888011cde400 R12: 0000000000000000
[   17.940057] R13: ffff8880133e6698 R14: ffff888014c7fc48 R15: ffffffff83556140
[   17.940380] FS:  0000000000000000(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   17.940672] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   17.940904] CR2: 0000000020000080 CR3: 000000000687e000 CR4: 0000000000750ef0
[   17.941202] PKRU: 55555554
[   17.941306] Call Trace:
[   17.941401]  <TASK>
[   17.941489]  ? show_regs+0x6e/0x80
[   17.941675]  ? __warn+0xef/0x340
[   17.941804]  ? report_bug+0x25e/0x4b0
[   17.941947]  ? iommufd_fops_release+0x2a3/0x300
[   17.942121]  ? report_bug+0x2cb/0x4b0
[   17.942317]  ? handle_bug+0x46/0x90
[   17.942454]  ? exc_invalid_op+0x1d/0x50
[   17.942610]  ? asm_exc_invalid_op+0x1f/0x30
[   17.942790]  ? __pfx_iommufd_fops_release+0x10/0x10
[   17.943021]  ? iommufd_fops_release+0x2a3/0x300
[   17.943195]  ? iommufd_fops_release+0x2a3/0x300
[   17.943369]  ? __pfx_iommufd_fops_release+0x10/0x10
[   17.943620]  ? rcu_is_watching+0x19/0xc0
[   17.943773]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   17.943975]  ? __pfx_iommufd_fops_release+0x10/0x10
[   17.944159]  __fput+0x424/0xaf0
[   17.944355]  ____fput+0x1f/0x30
[   17.944481]  task_work_run+0x19d/0x2b0
[   17.944627]  ? __pfx_task_work_run+0x10/0x10
[   17.944790]  ? __sanitizer_cov_trace_const_cmp1+0x1e/0x30
[   17.945053]  ? switch_task_namespaces+0xa9/0xe0
[   17.945227]  do_exit+0xac9/0x2790
[   17.945358]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   17.945605]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   17.945835]  ? __pfx_do_exit+0x10/0x10
[   17.945980]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   17.946182]  ? security_file_ioctl+0x9d/0xd0
[   17.946405]  make_task_dead+0x182/0x3c0
[   17.946554]  rewind_stack_and_make_dead+0x17/0x20
[   17.946742] RIP: 0033:0x7ff9dc83ee5d
[   17.946886] Code: Unable to access opcode bytes at 0x7ff9dc83ee33.
[   17.947109] RSP: 002b:00007ffd8d18ad58 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   17.947453] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007ff9dc83ee5d
[   17.947711] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   17.947970] RBP: 00007ffd8d18ad70 R08: 0000000000000800 R09: 0000000000000800
[   17.948291] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffd8d18ae88
[   17.948550] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007ff9dca73000
[   17.948871]  </TASK>
[   17.948958] irq event stamp: 0
[   17.949091] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   17.949323] hardirqs last disabled at (0): [<ffffffff8122f2d1>] copy_process+0x1c51/0x7140
[   17.949686] softirqs last  enabled at (0): [<ffffffff8122f312>] copy_process+0x1c92/0x7140
[   17.949986] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   17.950274] ---[ end trace 0000000000000000 ]---
[   17.953112] iommufd_mock iommufd_mock106: Adding to iommu group 106
[   17.953432] iommufd_mock iommufd_mock106: Removing from iommu group 106
[   17.953695] general protection fault, probably for non-canonical address 0xdffffc0000000006: 0000 [#107] PREEMPT SMP KASAN NOPTI
[   17.954107] KASAN: null-ptr-deref in range [0x0000000000000030-0x0000000000000037]
[   17.954390] CPU: 0 PID: 825 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   17.954760] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   17.955173] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   17.955388] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   17.956047] RSP: 0018:ffff888013bc7ba8 EFLAGS: 00010206
[   17.956242] RAX: dffffc0000000000 RBX: ffff8880166d0000 RCX: 0000000000000000
[   17.956500] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   17.956758] RBP: ffff888013bc7bc0 R08: 0000000000000001 R09: ffffed100155b11b
[   17.957017] R10: ffff88800aad88df R11: 5f6466756d6d6f69 R12: 0000000000000000
[   17.957275] R13: ffffffff85cc0180 R14: ffff88800fd72a40 R15: ffffffff87070ae0
[   17.957536] FS:  00007f40975c8600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   17.957821] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   17.958029] CR2: 0000000020000080 CR3: 00000000132ee000 CR4: 0000000000750ef0
[   17.958283] PKRU: 55555554
[   17.958385] Call Trace:
[   17.958477]  <TASK>
[   17.958559]  ? show_regs+0x6e/0x80
[   17.958698]  ? die_addr+0x45/0xb0
[   17.958834]  ? exc_general_protection+0x159/0x250
[   17.959019]  ? asm_exc_general_protection+0x2b/0x30
[   17.959202]  ? sysfs_remove_link_from_group+0x21/0x90
[   17.959389]  ? sysfs_remove_link_from_group+0x37/0x90
[   17.959577]  ? sysfs_remove_link_from_group+0x21/0x90
[   17.959764]  iommu_device_unlink+0x85/0xd0
[   17.959918]  iommu_deinit_device+0x11f/0x4c0
[   17.960081]  __iommu_group_remove_device+0x26b/0x300
[   17.960268]  iommu_group_remove_device+0x8a/0xb0
[   17.960442]  iommufd_test+0x1f1a/0x2d10
[   17.960586]  ? __pfx_lock_release+0x10/0x10
[   17.960744]  ? __pfx_lock_acquire+0x10/0x10
[   17.960902]  ? __pfx_iommufd_test+0x10/0x10
[   17.961059]  ? __sanitizer_cov_trace_const_cmp8+0x1c/0x30
[   17.961260]  iommufd_fops_ioctl+0x377/0x510
[   17.961419]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   17.961595]  ? trace_hardirqs_on+0x26/0x120
[   17.961754]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   17.961983]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   17.962167]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   17.962366]  ? security_file_ioctl+0x9d/0xd0
[   17.962529]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   17.962710]  __x64_sys_ioctl+0x1b9/0x230
[   17.962880]  do_syscall_64+0x3c/0x90
[   17.963019]  entry_SYSCALL_64_after_hwframe+0x6e/0xd8
[   17.963205] RIP: 0033:0x7f409723ee5d
[   17.963340] Code: ff c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d 93 af 1b 00 f7 d8 64 89 01 48
[   17.963984] RSP: 002b:00007fff7f38ebf8 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   17.964254] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f409723ee5d
[   17.964507] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   17.964760] RBP: 00007fff7f38ec10 R08: 0000000000000800 R09: 0000000000000800
[   17.965013] R10: 0000000000000000 R11: 0000000000000213 R12: 00007fff7f38ed28
[   17.965265] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f4097609000
[   17.965524]  </TASK>
[   17.965608] Modules linked in:
[   17.965846] ---[ end trace 0000000000000000 ]---
[   17.966020] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   17.966233] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   17.966912] RSP: 0018:ffff88802457fba8 EFLAGS: 00010206
[   17.967105] RAX: dffffc0000000000 RBX: ffff888014f9b000 RCX: 0000000000000000
[   17.967364] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   17.967698] RBP: ffff88802457fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   17.967952] R10: ffff88800aad88df R11: 0000000000000001 R12: 0000000000000000
[   17.968219] R13: ffffffff85cc0180 R14: ffff8880109b6ac0 R15: ffffffff87070ae0
[   17.968519] FS:  00007f40975c8600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   17.968805] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   17.969021] CR2: 0000000020000080 CR3: 00000000132ee000 CR4: 0000000000750ef0
[   17.969328] PKRU: 55555554
[   17.969688] ------------[ cut here ]------------
[   17.969920] WARNING: CPU: 0 PID: 825 at drivers/iommu/iommufd/main.c:258 iommufd_fops_release+0x2a3/0x300
[   17.970262] Modules linked in:
[   17.970396] CPU: 0 PID: 825 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   17.970774] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   17.971181] RIP: 0010:iommufd_fops_release+0x2a3/0x300
[   17.971438] Code: 45 d0 65 48 2b 04 25 28 00 00 00 75 54 48 81 c4 88 00 00 00 31 c0 5b 41 5c 41 5d 41 5e 41 5f 5d c3 cc cc cc cc e8 ad 4f 0a fe <0f> 0b eb a6 e8 74 23 67 fe e9 f6 fe ff ff 48 89 85 50 ff ff ff e8
[   17.972162] RSP: 0018:ffff888013bc7c00 EFLAGS: 00010293
[   17.972356] RAX: 0000000000000000 RBX: ffff88800fe06408 RCX: 0000000000000000
[   17.972614] RDX: ffff888012c34a00 RSI: ffffffff835563e3 RDI: ffffffff86702b40
[   17.972935] RBP: ffff888013bc7cb0 R08: 0000000000000000 R09: fffffbfff0eb2644
[   17.973194] R10: ffffffff87593227 R11: ffff8880125bfa00 R12: 0000000000000000
[   17.973515] R13: ffff88801324b818 R14: ffff888013bc7c48 R15: ffffffff83556140
[   17.973775] FS:  0000000000000000(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   17.974082] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   17.974338] CR2: 0000000020000080 CR3: 000000000687e000 CR4: 0000000000750ef0
[   17.974607] PKRU: 55555554
[   17.974712] Call Trace:
[   17.974811]  <TASK>
[   17.974895]  ? show_regs+0x6e/0x80
[   17.975045]  ? __warn+0xef/0x340
[   17.975222]  ? report_bug+0x25e/0x4b0
[   17.975366]  ? iommufd_fops_release+0x2a3/0x300
[   17.975539]  ? report_bug+0x2cb/0x4b0
[   17.975694]  ? handle_bug+0x46/0x90
[   17.975882]  ? exc_invalid_op+0x1d/0x50
[   17.976030]  ? asm_exc_invalid_op+0x1f/0x30
[   17.976189]  ? __pfx_iommufd_fops_release+0x10/0x10
[   17.976375]  ? iommufd_fops_release+0x2a3/0x300
[   17.976610]  ? iommufd_fops_release+0x2a3/0x300
[   17.976786]  ? __pfx_iommufd_fops_release+0x10/0x10
[   17.976969]  ? rcu_is_watching+0x19/0xc0
[   17.977137]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   17.977385]  ? __pfx_iommufd_fops_release+0x10/0x10
[   17.977569]  __fput+0x424/0xaf0
[   17.977699]  ____fput+0x1f/0x30
[   17.977887]  task_work_run+0x19d/0x2b0
[   17.978033]  ? __pfx_task_work_run+0x10/0x10
[   17.978197]  ? __sanitizer_cov_trace_const_cmp1+0x1e/0x30
[   17.978404]  ? switch_task_namespaces+0xa9/0xe0
[   17.978644]  do_exit+0xac9/0x2790
[   17.978779]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   17.979011]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   17.979197]  ? __pfx_do_exit+0x10/0x10
[   17.979342]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   17.979554]  ? security_file_ioctl+0x9d/0xd0
[   17.979769]  make_task_dead+0x182/0x3c0
[   17.979919]  rewind_stack_and_make_dead+0x17/0x20
[   17.980098] RIP: 0033:0x7f409723ee5d
[   17.980239] Code: Unable to access opcode bytes at 0x7f409723ee33.
[   17.980523] RSP: 002b:00007fff7f38ebf8 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   17.980799] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f409723ee5d
[   17.981117] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   17.981377] RBP: 00007fff7f38ec10 R08: 0000000000000800 R09: 0000000000000800
[   17.981643] R10: 0000000000000000 R11: 0000000000000213 R12: 00007fff7f38ed28
[   17.981951] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f4097609000
[   17.982216]  </TASK>
[   17.982310] irq event stamp: 0
[   17.982477] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   17.982715] hardirqs last disabled at (0): [<ffffffff8122f2d1>] copy_process+0x1c51/0x7140
[   17.983019] softirqs last  enabled at (0): [<ffffffff8122f312>] copy_process+0x1c92/0x7140
[   17.983319] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   17.983613] ---[ end trace 0000000000000000 ]---
[   17.986370] iommufd_mock iommufd_mock107: Adding to iommu group 107
[   17.986643] iommufd_mock iommufd_mock107: Removing from iommu group 107
[   17.986913] general protection fault, probably for non-canonical address 0xdffffc0000000006: 0000 [#108] PREEMPT SMP KASAN NOPTI
[   17.987327] KASAN: null-ptr-deref in range [0x0000000000000030-0x0000000000000037]
[   17.987600] CPU: 0 PID: 826 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   17.987917] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   17.988314] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   17.988524] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   17.989169] RSP: 0018:ffff8880145a7ba8 EFLAGS: 00010206
[   17.989359] RAX: dffffc0000000000 RBX: ffff8880166d6000 RCX: 0000000000000000
[   17.989612] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   17.989865] RBP: ffff8880145a7bc0 R08: 0000000000000001 R09: ffffed100155b11b
[   17.990118] R10: ffff88800aad88df R11: 5f6466756d6d6f69 R12: 0000000000000000
[   17.990371] R13: ffffffff85cc0180 R14: ffff88800fd72be0 R15: ffffffff87070ae0
[   17.990629] FS:  00007f0234976600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   17.990923] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   17.991135] CR2: 0000000020000080 CR3: 0000000020928000 CR4: 0000000000750ef0
[   17.991390] PKRU: 55555554
[   17.991492] Call Trace:
[   17.991585]  <TASK>
[   17.991667]  ? show_regs+0x6e/0x80
[   17.991801]  ? die_addr+0x45/0xb0
[   17.991932]  ? exc_general_protection+0x159/0x250
[   17.992113]  ? asm_exc_general_protection+0x2b/0x30
[   17.992297]  ? sysfs_remove_link_from_group+0x21/0x90
[   17.992484]  ? sysfs_remove_link_from_group+0x37/0x90
[   17.992672]  ? sysfs_remove_link_from_group+0x21/0x90
[   17.992859]  iommu_device_unlink+0x85/0xd0
[   17.993014]  iommu_deinit_device+0x11f/0x4c0
[   17.993177]  __iommu_group_remove_device+0x26b/0x300
[   17.993365]  iommu_group_remove_device+0x8a/0xb0
[   17.993539]  iommufd_test+0x1f1a/0x2d10
[   17.993683]  ? __pfx_lock_release+0x10/0x10
[   17.993841]  ? __pfx_lock_acquire+0x10/0x10
[   17.994000]  ? __pfx_iommufd_test+0x10/0x10
[   17.994157]  ? __sanitizer_cov_trace_const_cmp8+0x1c/0x30
[   17.994358]  iommufd_fops_ioctl+0x377/0x510
[   17.994517]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   17.994698]  ? trace_hardirqs_on+0x26/0x120
[   17.994865]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   17.995095]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   17.995278]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   17.995478]  ? security_file_ioctl+0x9d/0xd0
[   17.995641]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   17.995817]  __x64_sys_ioctl+0x1b9/0x230
[   17.995966]  do_syscall_64+0x3c/0x90
[   17.996101]  entry_SYSCALL_64_after_hwframe+0x6e/0xd8
[   17.996288] RIP: 0033:0x7f023463ee5d
[   17.996423] Code: ff c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d 93 af 1b 00 f7 d8 64 89 01 48
[   17.997069] RSP: 002b:00007ffcd354b838 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   17.997340] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f023463ee5d
[   17.997592] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   17.997845] RBP: 00007ffcd354b850 R08: 0000000000000800 R09: 0000000000000800
[   17.998099] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffcd354b968
[   17.998352] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f02349b7000
[   17.998619]  </TASK>
[   17.998706] Modules linked in:
[   17.998916] ---[ end trace 0000000000000000 ]---
[   17.999088] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   17.999301] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   17.999962] RSP: 0018:ffff88802457fba8 EFLAGS: 00010206
[   18.000151] RAX: dffffc0000000000 RBX: ffff888014f9b000 RCX: 0000000000000000
[   18.000404] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   18.000656] RBP: ffff88802457fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   18.000909] R10: ffff88800aad88df R11: 0000000000000001 R12: 0000000000000000
[   18.001161] R13: ffffffff85cc0180 R14: ffff8880109b6ac0 R15: ffffffff87070ae0
[   18.001415] FS:  00007f0234976600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   18.001700] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   18.001906] CR2: 0000000020000080 CR3: 0000000020928000 CR4: 0000000000750ef0
[   18.002160] PKRU: 55555554
[   18.002515] ------------[ cut here ]------------
[   18.002707] WARNING: CPU: 0 PID: 826 at drivers/iommu/iommufd/main.c:258 iommufd_fops_release+0x2a3/0x300
[   18.003058] Modules linked in:
[   18.003173] CPU: 0 PID: 826 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   18.003481] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   18.003878] RIP: 0010:iommufd_fops_release+0x2a3/0x300
[   18.004067] Code: 45 d0 65 48 2b 04 25 28 00 00 00 75 54 48 81 c4 88 00 00 00 31 c0 5b 41 5c 41 5d 41 5e 41 5f 5d c3 cc cc cc cc e8 ad 4f 0a fe <0f> 0b eb a6 e8 74 23 67 fe e9 f6 fe ff ff 48 89 85 50 ff ff ff e8
[   18.004710] RSP: 0018:ffff8880145a7c00 EFLAGS: 00010293
[   18.004899] RAX: 0000000000000000 RBX: ffff88800fe06a08 RCX: 0000000000000000
[   18.005152] RDX: ffff888012c30000 RSI: ffffffff835563e3 RDI: ffffffff86702b40
[   18.005406] RBP: ffff8880145a7cb0 R08: 0000000000000000 R09: fffffbfff0eb2644
[   18.005662] R10: ffffffff87593227 R11: ffff88801179e000 R12: 0000000000000000
[   18.005914] R13: ffff888013966918 R14: ffff8880145a7c48 R15: ffffffff83556140
[   18.006166] FS:  0000000000000000(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   18.006451] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   18.006668] CR2: 0000000020000080 CR3: 000000000687e000 CR4: 0000000000750ef0
[   18.006931] PKRU: 55555554
[   18.007032] Call Trace:
[   18.007125]  <TASK>
[   18.007206]  ? show_regs+0x6e/0x80
[   18.007338]  ? __warn+0xef/0x340
[   18.007463]  ? report_bug+0x25e/0x4b0
[   18.007603]  ? iommufd_fops_release+0x2a3/0x300
[   18.007773]  ? report_bug+0x2cb/0x4b0
[   18.007914]  ? handle_bug+0x46/0x90
[   18.008047]  ? exc_invalid_op+0x1d/0x50
[   18.008191]  ? asm_exc_invalid_op+0x1f/0x30
[   18.008346]  ? __pfx_iommufd_fops_release+0x10/0x10
[   18.008529]  ? iommufd_fops_release+0x2a3/0x300
[   18.008698]  ? iommufd_fops_release+0x2a3/0x300
[   18.008868]  ? __pfx_iommufd_fops_release+0x10/0x10
[   18.009048]  ? rcu_is_watching+0x19/0xc0
[   18.009197]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   18.009395]  ? __pfx_iommufd_fops_release+0x10/0x10
[   18.009575]  __fput+0x424/0xaf0
[   18.009700]  ____fput+0x1f/0x30
[   18.009823]  task_work_run+0x19d/0x2b0
[   18.009966]  ? __pfx_task_work_run+0x10/0x10
[   18.010126]  ? __sanitizer_cov_trace_const_cmp1+0x1e/0x30
[   18.010322]  ? switch_task_namespaces+0xa9/0xe0
[   18.010492]  do_exit+0xac9/0x2790
[   18.010626]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   18.010859]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   18.011045]  ? __pfx_do_exit+0x10/0x10
[   18.011186]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   18.011383]  ? security_file_ioctl+0x9d/0xd0
[   18.011546]  make_task_dead+0x182/0x3c0
[   18.011692]  rewind_stack_and_make_dead+0x17/0x20
[   18.011866] RIP: 0033:0x7f023463ee5d
[   18.011999] Code: Unable to access opcode bytes at 0x7f023463ee33.
[   18.012218] RSP: 002b:00007ffcd354b838 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   18.012487] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f023463ee5d
[   18.012740] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   18.012993] RBP: 00007ffcd354b850 R08: 0000000000000800 R09: 0000000000000800
[   18.013246] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffcd354b968
[   18.013498] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f02349b7000
[   18.013755]  </TASK>
[   18.013840] irq event stamp: 0
[   18.013954] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   18.014177] hardirqs last disabled at (0): [<ffffffff8122f2d1>] copy_process+0x1c51/0x7140
[   18.014470] softirqs last  enabled at (0): [<ffffffff8122f312>] copy_process+0x1c92/0x7140
[   18.014785] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   18.015017] ---[ end trace 0000000000000000 ]---
[   18.017569] iommufd_mock iommufd_mock108: Adding to iommu group 108
[   18.017816] iommufd_mock iommufd_mock108: Removing from iommu group 108
[   18.018155] general protection fault, probably for non-canonical address 0xdffffc0000000006: 0000 [#109] PREEMPT SMP KASAN NOPTI
[   18.018562] KASAN: null-ptr-deref in range [0x0000000000000030-0x0000000000000037]
[   18.018838] CPU: 0 PID: 827 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   18.019150] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   18.019547] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   18.019757] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   18.020401] RSP: 0018:ffff88801149fba8 EFLAGS: 00010206
[   18.020591] RAX: dffffc0000000000 RBX: ffff8880166d5000 RCX: 0000000000000000
[   18.020844] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   18.021097] RBP: ffff88801149fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   18.021350] R10: ffff88800aad88df R11: 0000000000000000 R12: 0000000000000000
[   18.021603] R13: ffffffff85cc0180 R14: ffff88800f9916c0 R15: ffffffff87070ae0
[   18.021856] FS:  00007f4c2576c600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   18.022141] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   18.022348] CR2: 0000000020000080 CR3: 0000000020928000 CR4: 0000000000750ef0
[   18.022602] PKRU: 55555554
[   18.022704] Call Trace:
[   18.022807]  <TASK>
[   18.022891]  ? show_regs+0x6e/0x80
[   18.023026]  ? die_addr+0x45/0xb0
[   18.023158]  ? exc_general_protection+0x159/0x250
[   18.023338]  ? asm_exc_general_protection+0x2b/0x30
[   18.023521]  ? sysfs_remove_link_from_group+0x21/0x90
[   18.023708]  ? sysfs_remove_link_from_group+0x37/0x90
[   18.023895]  ? sysfs_remove_link_from_group+0x21/0x90
[   18.024082]  iommu_device_unlink+0x85/0xd0
[   18.024237]  iommu_deinit_device+0x11f/0x4c0
[   18.024400]  __iommu_group_remove_device+0x26b/0x300
[   18.024587]  iommu_group_remove_device+0x8a/0xb0
[   18.024760]  iommufd_test+0x1f1a/0x2d10
[   18.024904]  ? __pfx_lock_release+0x10/0x10
[   18.025061]  ? __pfx_lock_acquire+0x10/0x10
[   18.025220]  ? __pfx_iommufd_test+0x10/0x10
[   18.025377]  ? __sanitizer_cov_trace_const_cmp8+0x1c/0x30
[   18.025578]  iommufd_fops_ioctl+0x377/0x510
[   18.025736]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   18.025912]  ? trace_hardirqs_on+0x26/0x120
[   18.026072]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   18.026300]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   18.026484]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   18.026683]  ? security_file_ioctl+0x9d/0xd0
[   18.026853]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   18.027032]  __x64_sys_ioctl+0x1b9/0x230
[   18.027180]  do_syscall_64+0x3c/0x90
[   18.027315]  entry_SYSCALL_64_after_hwframe+0x6e/0xd8
[   18.027500] RIP: 0033:0x7f4c2543ee5d
[   18.027634] Code: ff c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d 93 af 1b 00 f7 d8 64 89 01 48
[   18.028278] RSP: 002b:00007fff2ad82758 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   18.028547] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f4c2543ee5d
[   18.028800] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   18.029076] RBP: 00007fff2ad82770 R08: 0000000000000800 R09: 0000000000000800
[   18.029332] R10: 0000000000000000 R11: 0000000000000213 R12: 00007fff2ad82888
[   18.029584] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f4c257ad000
[   18.029843]  </TASK>
[   18.029927] Modules linked in:
[   18.030221] ---[ end trace 0000000000000000 ]---
[   18.030391] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   18.030606] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   18.031269] RSP: 0018:ffff88802457fba8 EFLAGS: 00010206
[   18.031458] RAX: dffffc0000000000 RBX: ffff888014f9b000 RCX: 0000000000000000
[   18.031711] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   18.031965] RBP: ffff88802457fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   18.032218] R10: ffff88800aad88df R11: 0000000000000001 R12: 0000000000000000
[   18.032470] R13: ffffffff85cc0180 R14: ffff8880109b6ac0 R15: ffffffff87070ae0
[   18.032722] FS:  00007f4c2576c600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   18.033007] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   18.033213] CR2: 0000000020000080 CR3: 0000000020928000 CR4: 0000000000750ef0
[   18.033467] PKRU: 55555554
[   18.033825] ------------[ cut here ]------------
[   18.033994] WARNING: CPU: 0 PID: 827 at drivers/iommu/iommufd/main.c:258 iommufd_fops_release+0x2a3/0x300
[   18.034334] Modules linked in:
[   18.034449] CPU: 0 PID: 827 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   18.034781] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   18.035187] RIP: 0010:iommufd_fops_release+0x2a3/0x300
[   18.035376] Code: 45 d0 65 48 2b 04 25 28 00 00 00 75 54 48 81 c4 88 00 00 00 31 c0 5b 41 5c 41 5d 41 5e 41 5f 5d c3 cc cc cc cc e8 ad 4f 0a fe <0f> 0b eb a6 e8 74 23 67 fe e9 f6 fe ff ff 48 89 85 50 ff ff ff e8
[   18.036160] RSP: 0018:ffff88801149fc00 EFLAGS: 00010293
[   18.036358] RAX: 0000000000000000 RBX: ffff88800fe06f08 RCX: 0000000000000000
[   18.036667] RDX: ffff88800f780000 RSI: ffffffff835563e3 RDI: ffffffff86702b40
[   18.036920] RBP: ffff88801149fcb0 R08: 0000000000000000 R09: fffffbfff0eb2644
[   18.037197] R10: ffffffff87593227 R11: ffff8880111e5200 R12: 0000000000000000
[   18.037502] R13: ffff888013967318 R14: ffff88801149fc48 R15: ffffffff83556140
[   18.037754] FS:  0000000000000000(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   18.038102] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   18.038310] CR2: 0000000020000080 CR3: 000000000687e000 CR4: 0000000000750ef0
[   18.038596] PKRU: 55555554
[   18.038741] Call Trace:
[   18.038840]  <TASK>
[   18.038925]  ? show_regs+0x6e/0x80
[   18.039057]  ? __warn+0xef/0x340
[   18.039182]  ? report_bug+0x25e/0x4b0
[   18.039325]  ? iommufd_fops_release+0x2a3/0x300
[   18.039497]  ? report_bug+0x2cb/0x4b0
[   18.039667]  ? handle_bug+0x46/0x90
[   18.039846]  ? exc_invalid_op+0x1d/0x50
[   18.039991]  ? asm_exc_invalid_op+0x1f/0x30
[   18.040146]  ? __pfx_iommufd_fops_release+0x10/0x10
[   18.040348]  ? iommufd_fops_release+0x2a3/0x300
[   18.040568]  ? iommufd_fops_release+0x2a3/0x300
[   18.040741]  ? __pfx_iommufd_fops_release+0x10/0x10
[   18.040920]  ? rcu_is_watching+0x19/0xc0
[   18.041092]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   18.041341]  ? __pfx_iommufd_fops_release+0x10/0x10
[   18.041521]  __fput+0x424/0xaf0
[   18.041647]  ____fput+0x1f/0x30
[   18.041792]  task_work_run+0x19d/0x2b0
[   18.041978]  ? __pfx_task_work_run+0x10/0x10
[   18.042142]  ? __sanitizer_cov_trace_const_cmp1+0x1e/0x30
[   18.042343]  ? switch_task_namespaces+0xa9/0xe0
[   18.042588]  do_exit+0xac9/0x2790
[   18.042720]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   18.042957]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   18.043144]  ? __pfx_do_exit+0x10/0x10
[   18.043288]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   18.043500]  ? security_file_ioctl+0x9d/0xd0
[   18.043719]  make_task_dead+0x182/0x3c0
[   18.043869]  rewind_stack_and_make_dead+0x17/0x20
[   18.044047] RIP: 0033:0x7f4c2543ee5d
[   18.044192] Code: Unable to access opcode bytes at 0x7f4c2543ee33.
[   18.044473] RSP: 002b:00007fff2ad82758 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   18.044748] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f4c2543ee5d
[   18.045070] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   18.045328] RBP: 00007fff2ad82770 R08: 0000000000000800 R09: 0000000000000800
[   18.045596] R10: 0000000000000000 R11: 0000000000000213 R12: 00007fff2ad82888
[   18.045907] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f4c257ad000
[   18.046171]  </TASK>
[   18.046266] irq event stamp: 0
[   18.046436] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   18.046673] hardirqs last disabled at (0): [<ffffffff8122f2d1>] copy_process+0x1c51/0x7140
[   18.046975] softirqs last  enabled at (0): [<ffffffff8122f312>] copy_process+0x1c92/0x7140
[   18.047290] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   18.047564] ---[ end trace 0000000000000000 ]---
[   18.050358] iommufd_mock iommufd_mock109: Adding to iommu group 109
[   18.050628] iommufd_mock iommufd_mock109: Removing from iommu group 109
[   18.050894] general protection fault, probably for non-canonical address 0xdffffc0000000006: 0000 [#110] PREEMPT SMP KASAN NOPTI
[   18.051306] KASAN: null-ptr-deref in range [0x0000000000000030-0x0000000000000037]
[   18.051579] CPU: 0 PID: 828 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   18.051893] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   18.052350] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   18.052565] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   18.053221] RSP: 0018:ffff888013bc7ba8 EFLAGS: 00010206
[   18.053415] RAX: dffffc0000000000 RBX: ffff8880166d7000 RCX: 0000000000000000
[   18.053673] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   18.053931] RBP: ffff888013bc7bc0 R08: 0000000000000001 R09: ffffed100155b11b
[   18.054188] R10: ffff88800aad88df R11: 5f6466756d6d6f69 R12: 0000000000000000
[   18.054446] R13: ffffffff85cc0180 R14: ffff88800bc88260 R15: ffffffff87070ae0
[   18.054705] FS:  00007fea2ce22600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   18.055003] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   18.055216] CR2: 0000000020000080 CR3: 000000000fb58000 CR4: 0000000000750ef0
[   18.055475] PKRU: 55555554
[   18.055579] Call Trace:
[   18.055673]  <TASK>
[   18.055756]  ? show_regs+0x6e/0x80
[   18.055893]  ? die_addr+0x45/0xb0
[   18.056027]  ? exc_general_protection+0x159/0x250
[   18.056211]  ? asm_exc_general_protection+0x2b/0x30
[   18.056398]  ? sysfs_remove_link_from_group+0x21/0x90
[   18.056588]  ? sysfs_remove_link_from_group+0x37/0x90
[   18.056780]  ? sysfs_remove_link_from_group+0x21/0x90
[   18.056971]  iommu_device_unlink+0x85/0xd0
[   18.057128]  iommu_deinit_device+0x11f/0x4c0
[   18.057294]  __iommu_group_remove_device+0x26b/0x300
[   18.057485]  iommu_group_remove_device+0x8a/0xb0
[   18.057662]  iommufd_test+0x1f1a/0x2d10
[   18.057808]  ? __pfx_lock_release+0x10/0x10
[   18.057969]  ? __pfx_lock_acquire+0x10/0x10
[   18.058131]  ? __pfx_iommufd_test+0x10/0x10
[   18.058291]  ? __sanitizer_cov_trace_const_cmp8+0x1c/0x30
[   18.058496]  iommufd_fops_ioctl+0x377/0x510
[   18.058658]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   18.058839]  ? trace_hardirqs_on+0x26/0x120
[   18.059001]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   18.059234]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   18.059421]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   18.059623]  ? security_file_ioctl+0x9d/0xd0
[   18.059789]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   18.059969]  __x64_sys_ioctl+0x1b9/0x230
[   18.060119]  do_syscall_64+0x3c/0x90
[   18.060257]  entry_SYSCALL_64_after_hwframe+0x6e/0xd8
[   18.060446] RIP: 0033:0x7fea2cc3ee5d
[   18.060583] Code: ff c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d 93 af 1b 00 f7 d8 64 89 01 48
[   18.061240] RSP: 002b:00007ffff89154f8 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   18.061515] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007fea2cc3ee5d
[   18.061773] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   18.062031] RBP: 00007ffff8915510 R08: 0000000000000800 R09: 0000000000000800
[   18.062289] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffff8915628
[   18.062547] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007fea2ce63000
[   18.062814]  </TASK>
[   18.062902] Modules linked in:
[   18.063084] ---[ end trace 0000000000000000 ]---
[   18.063257] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   18.063469] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   18.064129] RSP: 0018:ffff88802457fba8 EFLAGS: 00010206
[   18.064433] RAX: dffffc0000000000 RBX: ffff888014f9b000 RCX: 0000000000000000
[   18.064692] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   18.064950] RBP: ffff88802457fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   18.065281] R10: ffff88800aad88df R11: 0000000000000001 R12: 0000000000000000
[   18.065540] R13: ffffffff85cc0180 R14: ffff8880109b6ac0 R15: ffffffff87070ae0
[   18.065811] FS:  00007fea2ce22600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   18.066159] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   18.066372] CR2: 0000000020000080 CR3: 000000000fb58000 CR4: 0000000000750ef0
[   18.066708] PKRU: 55555554
[   18.067077] ------------[ cut here ]------------
[   18.067251] WARNING: CPU: 0 PID: 828 at drivers/iommu/iommufd/main.c:258 iommufd_fops_release+0x2a3/0x300
[   18.067666] Modules linked in:
[   18.067786] CPU: 0 PID: 828 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   18.068112] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   18.068569] RIP: 0010:iommufd_fops_release+0x2a3/0x300
[   18.068773] Code: 45 d0 65 48 2b 04 25 28 00 00 00 75 54 48 81 c4 88 00 00 00 31 c0 5b 41 5c 41 5d 41 5e 41 5f 5d c3 cc cc cc cc e8 ad 4f 0a fe <0f> 0b eb a6 e8 74 23 67 fe e9 f6 fe ff ff 48 89 85 50 ff ff ff e8
[   18.069480] RSP: 0018:ffff888013bc7c00 EFLAGS: 00010293
[   18.069737] RAX: 0000000000000000 RBX: ffff88800fe06e08 RCX: 0000000000000000
[   18.069996] RDX: ffff88800ececa00 RSI: ffffffff835563e3 RDI: ffffffff86702b40
[   18.070267] RBP: ffff888013bc7cb0 R08: 0000000000000000 R09: fffffbfff0eb2644
[   18.070587] R10: ffffffff87593227 R11: ffff88801302f600 R12: 0000000000000000
[   18.070852] R13: ffff8880130b1318 R14: ffff888013bc7c48 R15: ffffffff83556140
[   18.071112] FS:  0000000000000000(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   18.071465] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   18.071678] CR2: 0000000020000080 CR3: 000000000687e000 CR4: 0000000000750ef0
[   18.071999] PKRU: 55555554
[   18.072105] Call Trace:
[   18.072200]  <TASK>
[   18.072284]  ? show_regs+0x6e/0x80
[   18.072419]  ? __warn+0xef/0x340
[   18.072552]  ? report_bug+0x25e/0x4b0
[   18.072752]  ? iommufd_fops_release+0x2a3/0x300
[   18.072926]  ? report_bug+0x2cb/0x4b0
[   18.073072]  ? handle_bug+0x46/0x90
[   18.073208]  ? exc_invalid_op+0x1d/0x50
[   18.073380]  ? asm_exc_invalid_op+0x1f/0x30
[   18.073579]  ? __pfx_iommufd_fops_release+0x10/0x10
[   18.073767]  ? iommufd_fops_release+0x2a3/0x300
[   18.073940]  ? iommufd_fops_release+0x2a3/0x300
[   18.074180]  ? __pfx_iommufd_fops_release+0x10/0x10
[   18.074366]  ? rcu_is_watching+0x19/0xc0
[   18.074519]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   18.074731]  ? __pfx_iommufd_fops_release+0x10/0x10
[   18.074921]  __fput+0x424/0xaf0
[   18.075049]  ____fput+0x1f/0x30
[   18.075175]  task_work_run+0x19d/0x2b0
[   18.075321]  ? __pfx_task_work_run+0x10/0x10
[   18.075487]  ? __sanitizer_cov_trace_const_cmp1+0x1e/0x30
[   18.075684]  ? switch_task_namespaces+0xa9/0xe0
[   18.075856]  do_exit+0xac9/0x2790
[   18.075984]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   18.076212]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   18.076395]  ? __pfx_do_exit+0x10/0x10
[   18.076537]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   18.076735]  ? security_file_ioctl+0x9d/0xd0
[   18.076898]  make_task_dead+0x182/0x3c0
[   18.077044]  rewind_stack_and_make_dead+0x17/0x20
[   18.077221] RIP: 0033:0x7fea2cc3ee5d
[   18.077355] Code: Unable to access opcode bytes at 0x7fea2cc3ee33.
[   18.077575] RSP: 002b:00007ffff89154f8 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   18.077848] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007fea2cc3ee5d
[   18.078100] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   18.078352] RBP: 00007ffff8915510 R08: 0000000000000800 R09: 0000000000000800
[   18.078614] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffff8915628
[   18.078873] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007fea2ce63000
[   18.079138]  </TASK>
[   18.079222] irq event stamp: 0
[   18.079336] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   18.079560] hardirqs last disabled at (0): [<ffffffff8122f2d1>] copy_process+0x1c51/0x7140
[   18.079852] softirqs last  enabled at (0): [<ffffffff8122f312>] copy_process+0x1c92/0x7140
[   18.080145] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   18.080369] ---[ end trace 0000000000000000 ]---
[   18.083100] iommufd_mock iommufd_mock110: Adding to iommu group 110
[   18.083363] iommufd_mock iommufd_mock110: Removing from iommu group 110
[   18.083621] general protection fault, probably for non-canonical address 0xdffffc0000000006: 0000 [#111] PREEMPT SMP KASAN NOPTI
[   18.084031] KASAN: null-ptr-deref in range [0x0000000000000030-0x0000000000000037]
[   18.084297] CPU: 0 PID: 829 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   18.084604] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   18.085000] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   18.085209] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   18.085850] RSP: 0018:ffff888015b9fba8 EFLAGS: 00010206
[   18.086039] RAX: dffffc0000000000 RBX: ffff8880166d4000 RCX: 0000000000000000
[   18.086291] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   18.086543] RBP: ffff888015b9fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   18.086810] R10: ffff88800aad88df R11: 5f6466756d6d6f69 R12: 0000000000000000
[   18.087067] R13: ffffffff85cc0180 R14: ffff888024c35fe0 R15: ffffffff87070ae0
[   18.087321] FS:  00007fdbae422600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   18.087606] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   18.087812] CR2: 0000000020000080 CR3: 000000000fb58000 CR4: 0000000000750ef0
[   18.088065] PKRU: 55555554
[   18.088167] Call Trace:
[   18.088260]  <TASK>
[   18.088341]  ? show_regs+0x6e/0x80
[   18.088475]  ? die_addr+0x45/0xb0
[   18.088606]  ? exc_general_protection+0x159/0x250
[   18.088787]  ? asm_exc_general_protection+0x2b/0x30
[   18.088970]  ? sysfs_remove_link_from_group+0x21/0x90
[   18.089157]  ? sysfs_remove_link_from_group+0x37/0x90
[   18.089344]  ? sysfs_remove_link_from_group+0x21/0x90
[   18.089531]  iommu_device_unlink+0x85/0xd0
[   18.089685]  iommu_deinit_device+0x11f/0x4c0
[   18.089848]  __iommu_group_remove_device+0x26b/0x300
[   18.090035]  iommu_group_remove_device+0x8a/0xb0
[   18.090209]  iommufd_test+0x1f1a/0x2d10
[   18.090353]  ? __pfx_lock_release+0x10/0x10
[   18.090513]  ? __pfx_lock_acquire+0x10/0x10
[   18.090677]  ? __pfx_iommufd_test+0x10/0x10
[   18.090842]  ? __sanitizer_cov_trace_const_cmp8+0x1c/0x30
[   18.091043]  iommufd_fops_ioctl+0x377/0x510
[   18.091202]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   18.091377]  ? trace_hardirqs_on+0x26/0x120
[   18.091536]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   18.091764]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   18.091948]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   18.092146]  ? security_file_ioctl+0x9d/0xd0
[   18.092309]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   18.092484]  __x64_sys_ioctl+0x1b9/0x230
[   18.092632]  do_syscall_64+0x3c/0x90
[   18.092767]  entry_SYSCALL_64_after_hwframe+0x6e/0xd8
[   18.092952] RIP: 0033:0x7fdbae23ee5d
[   18.093087] Code: ff c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d 93 af 1b 00 f7 d8 64 89 01 48
[   18.093731] RSP: 002b:00007fff605ea038 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   18.094000] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007fdbae23ee5d
[   18.094253] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   18.094506] RBP: 00007fff605ea050 R08: 0000000000000800 R09: 0000000000000800
[   18.094767] R10: 0000000000000000 R11: 0000000000000213 R12: 00007fff605ea168
[   18.095025] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007fdbae463000
[   18.095283]  </TASK>
[   18.095367] Modules linked in:
[   18.095687] ---[ end trace 0000000000000000 ]---
[   18.095861] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   18.096073] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   18.096731] RSP: 0018:ffff88802457fba8 EFLAGS: 00010206
[   18.096927] RAX: dffffc0000000000 RBX: ffff888014f9b000 RCX: 0000000000000000
[   18.097188] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   18.097440] RBP: ffff88802457fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   18.097693] R10: ffff88800aad88df R11: 0000000000000001 R12: 0000000000000000
[   18.097946] R13: ffffffff85cc0180 R14: ffff8880109b6ac0 R15: ffffffff87070ae0
[   18.098199] FS:  00007fdbae422600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   18.098484] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   18.098708] CR2: 0000000020000080 CR3: 000000000fb58000 CR4: 0000000000750ef0
[   18.098970] PKRU: 55555554
[   18.099329] ------------[ cut here ]------------
[   18.099497] WARNING: CPU: 0 PID: 829 at drivers/iommu/iommufd/main.c:258 iommufd_fops_release+0x2a3/0x300
[   18.099837] Modules linked in:
[   18.099952] CPU: 0 PID: 829 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   18.100259] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   18.100657] RIP: 0010:iommufd_fops_release+0x2a3/0x300
[   18.100845] Code: 45 d0 65 48 2b 04 25 28 00 00 00 75 54 48 81 c4 88 00 00 00 31 c0 5b 41 5c 41 5d 41 5e 41 5f 5d c3 cc cc cc cc e8 ad 4f 0a fe <0f> 0b eb a6 e8 74 23 67 fe e9 f6 fe ff ff 48 89 85 50 ff ff ff e8
[   18.101488] RSP: 0018:ffff888015b9fc00 EFLAGS: 00010293
[   18.101678] RAX: 0000000000000000 RBX: ffff88800fe06608 RCX: 0000000000000000
[   18.101930] RDX: ffff88800f784a00 RSI: ffffffff835563e3 RDI: ffffffff86702b40
[   18.102182] RBP: ffff888015b9fcb0 R08: 0000000000000000 R09: fffffbfff0eb2644
[   18.102435] R10: ffffffff87593227 R11: ffff88801300b000 R12: 0000000000000000
[   18.102699] R13: ffff8880130b1098 R14: ffff888015b9fc48 R15: ffffffff83556140
[   18.102962] FS:  0000000000000000(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   18.103246] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   18.103453] CR2: 0000000020000080 CR3: 000000000687e000 CR4: 0000000000750ef0
[   18.103706] PKRU: 55555554
[   18.103807] Call Trace:
[   18.103899]  <TASK>
[   18.103981]  ? show_regs+0x6e/0x80
[   18.104112]  ? __warn+0xef/0x340
[   18.104237]  ? report_bug+0x25e/0x4b0
[   18.104377]  ? iommufd_fops_release+0x2a3/0x300
[   18.104547]  ? report_bug+0x2cb/0x4b0
[   18.104689]  ? handle_bug+0x46/0x90
[   18.104821]  ? exc_invalid_op+0x1d/0x50
[   18.104966]  ? asm_exc_invalid_op+0x1f/0x30
[   18.105121]  ? __pfx_iommufd_fops_release+0x10/0x10
[   18.105304]  ? iommufd_fops_release+0x2a3/0x300
[   18.105472]  ? iommufd_fops_release+0x2a3/0x300
[   18.105642]  ? __pfx_iommufd_fops_release+0x10/0x10
[   18.105822]  ? rcu_is_watching+0x19/0xc0
[   18.105971]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   18.106169]  ? __pfx_iommufd_fops_release+0x10/0x10
[   18.106349]  __fput+0x424/0xaf0
[   18.106475]  ____fput+0x1f/0x30
[   18.106668]  task_work_run+0x19d/0x2b0
[   18.106816]  ? __pfx_task_work_run+0x10/0x10
[   18.106980]  ? __sanitizer_cov_trace_const_cmp1+0x1e/0x30
[   18.107177]  ? switch_task_namespaces+0xa9/0xe0
[   18.107348]  do_exit+0xac9/0x2790
[   18.107476]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   18.107703]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   18.107885]  ? __pfx_do_exit+0x10/0x10
[   18.108026]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   18.108223]  ? security_file_ioctl+0x9d/0xd0
[   18.108385]  make_task_dead+0x182/0x3c0
[   18.108530]  rewind_stack_and_make_dead+0x17/0x20
[   18.108705] RIP: 0033:0x7fdbae23ee5d
[   18.108839] Code: Unable to access opcode bytes at 0x7fdbae23ee33.
[   18.109057] RSP: 002b:00007fff605ea038 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   18.109326] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007fdbae23ee5d
[   18.109578] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   18.109830] RBP: 00007fff605ea050 R08: 0000000000000800 R09: 0000000000000800
[   18.110082] R10: 0000000000000000 R11: 0000000000000213 R12: 00007fff605ea168
[   18.110334] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007fdbae463000
[   18.110598]  </TASK>
[   18.110683] irq event stamp: 0
[   18.110801] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   18.111029] hardirqs last disabled at (0): [<ffffffff8122f2d1>] copy_process+0x1c51/0x7140
[   18.111322] softirqs last  enabled at (0): [<ffffffff8122f312>] copy_process+0x1c92/0x7140
[   18.111615] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   18.111838] ---[ end trace 0000000000000000 ]---
[   18.114406] iommufd_mock iommufd_mock111: Adding to iommu group 111
[   18.114673] iommufd_mock iommufd_mock111: Removing from iommu group 111
[   18.114947] general protection fault, probably for non-canonical address 0xdffffc0000000006: 0000 [#112] PREEMPT SMP KASAN NOPTI
[   18.115351] KASAN: null-ptr-deref in range [0x0000000000000030-0x0000000000000037]
[   18.115618] CPU: 0 PID: 830 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   18.115926] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   18.116324] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   18.116532] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   18.117177] RSP: 0018:ffff88801127fba8 EFLAGS: 00010206
[   18.117366] RAX: dffffc0000000000 RBX: ffff8880166d1000 RCX: 0000000000000000
[   18.117619] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   18.117872] RBP: ffff88801127fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   18.118124] R10: ffff88800aad88df R11: 5f6466756d6d6f69 R12: 0000000000000000
[   18.118382] R13: ffffffff85cc0180 R14: ffff888024c359c0 R15: ffffffff87070ae0
[   18.118639] FS:  00007f7ede7c6600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   18.118956] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   18.119164] CR2: 0000000020000080 CR3: 000000000fb58000 CR4: 0000000000750ef0
[   18.119418] PKRU: 55555554
[   18.119520] Call Trace:
[   18.119612]  <TASK>
[   18.119694]  ? show_regs+0x6e/0x80
[   18.119827]  ? die_addr+0x45/0xb0
[   18.119958]  ? exc_general_protection+0x159/0x250
[   18.120138]  ? asm_exc_general_protection+0x2b/0x30
[   18.120321]  ? sysfs_remove_link_from_group+0x21/0x90
[   18.120508]  ? sysfs_remove_link_from_group+0x37/0x90
[   18.120695]  ? sysfs_remove_link_from_group+0x21/0x90
[   18.120882]  iommu_device_unlink+0x85/0xd0
[   18.121036]  iommu_deinit_device+0x11f/0x4c0
[   18.121199]  __iommu_group_remove_device+0x26b/0x300
[   18.121386]  iommu_group_remove_device+0x8a/0xb0
[   18.121559]  iommufd_test+0x1f1a/0x2d10
[   18.121703]  ? __pfx_lock_release+0x10/0x10
[   18.121860]  ? __pfx_lock_acquire+0x10/0x10
[   18.122019]  ? __pfx_iommufd_test+0x10/0x10
[   18.122175]  ? __sanitizer_cov_trace_const_cmp8+0x1c/0x30
[   18.122376]  iommufd_fops_ioctl+0x377/0x510
[   18.122534]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   18.122710]  ? trace_hardirqs_on+0x26/0x120
[   18.122882]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   18.123111]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   18.123294]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   18.123492]  ? security_file_ioctl+0x9d/0xd0
[   18.123655]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   18.123830]  __x64_sys_ioctl+0x1b9/0x230
[   18.123978]  do_syscall_64+0x3c/0x90
[   18.124113]  entry_SYSCALL_64_after_hwframe+0x6e/0xd8
[   18.124299] RIP: 0033:0x7f7ede43ee5d
[   18.124433] Code: ff c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d 93 af 1b 00 f7 d8 64 89 01 48
[   18.125076] RSP: 002b:00007ffd35600688 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   18.125345] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f7ede43ee5d
[   18.125598] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   18.125851] RBP: 00007ffd356006a0 R08: 0000000000000800 R09: 0000000000000800
[   18.126103] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffd356007b8
[   18.126356] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f7ede807000
[   18.126613]  </TASK>
[   18.126698] Modules linked in:
[   18.126865] ---[ end trace 0000000000000000 ]---
[   18.127038] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   18.127246] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   18.127893] RSP: 0018:ffff88802457fba8 EFLAGS: 00010206
[   18.128082] RAX: dffffc0000000000 RBX: ffff888014f9b000 RCX: 0000000000000000
[   18.128335] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   18.128588] RBP: ffff88802457fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   18.128840] R10: ffff88800aad88df R11: 0000000000000001 R12: 0000000000000000
[   18.129093] R13: ffffffff85cc0180 R14: ffff8880109b6ac0 R15: ffffffff87070ae0
[   18.129348] FS:  00007f7ede7c6600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   18.129635] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   18.129841] CR2: 0000000020000080 CR3: 000000000fb58000 CR4: 0000000000750ef0
[   18.130095] PKRU: 55555554
[   18.130453] ------------[ cut here ]------------
[   18.130641] WARNING: CPU: 0 PID: 830 at drivers/iommu/iommufd/main.c:258 iommufd_fops_release+0x2a3/0x300
[   18.130994] Modules linked in:
[   18.131109] CPU: 0 PID: 830 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   18.131417] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   18.131813] RIP: 0010:iommufd_fops_release+0x2a3/0x300
[   18.132002] Code: 45 d0 65 48 2b 04 25 28 00 00 00 75 54 48 81 c4 88 00 00 00 31 c0 5b 41 5c 41 5d 41 5e 41 5f 5d c3 cc cc cc cc e8 ad 4f 0a fe <0f> 0b eb a6 e8 74 23 67 fe e9 f6 fe ff ff 48 89 85 50 ff ff ff e8
[   18.132644] RSP: 0018:ffff88801127fc00 EFLAGS: 00010293
[   18.132833] RAX: 0000000000000000 RBX: ffff88800fe06008 RCX: 0000000000000000
[   18.133085] RDX: ffff8880170d0000 RSI: ffffffff835563e3 RDI: ffffffff86702b40
[   18.133338] RBP: ffff88801127fcb0 R08: 0000000000000000 R09: fffffbfff0eb2644
[   18.133590] R10: ffffffff87593227 R11: ffff8880134c1600 R12: 0000000000000000
[   18.133843] R13: ffff88801399ee18 R14: ffff88801127fc48 R15: ffffffff83556140
[   18.134096] FS:  0000000000000000(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   18.134380] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   18.134596] CR2: 0000000020000080 CR3: 000000000687e000 CR4: 0000000000750ef0
[   18.134856] PKRU: 55555554
[   18.134963] Call Trace:
[   18.135055]  <TASK>
[   18.135137]  ? show_regs+0x6e/0x80
[   18.135268]  ? __warn+0xef/0x340
[   18.135393]  ? report_bug+0x25e/0x4b0
[   18.135533]  ? iommufd_fops_release+0x2a3/0x300
[   18.135702]  ? report_bug+0x2cb/0x4b0
[   18.135846]  ? handle_bug+0x46/0x90
[   18.135982]  ? exc_invalid_op+0x1d/0x50
[   18.136127]  ? asm_exc_invalid_op+0x1f/0x30
[   18.136282]  ? __pfx_iommufd_fops_release+0x10/0x10
[   18.136464]  ? iommufd_fops_release+0x2a3/0x300
[   18.136633]  ? iommufd_fops_release+0x2a3/0x300
[   18.136803]  ? __pfx_iommufd_fops_release+0x10/0x10
[   18.136983]  ? rcu_is_watching+0x19/0xc0
[   18.137132]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   18.137330]  ? __pfx_iommufd_fops_release+0x10/0x10
[   18.137511]  __fput+0x424/0xaf0
[   18.137636]  ____fput+0x1f/0x30
[   18.137759]  task_work_run+0x19d/0x2b0
[   18.137901]  ? __pfx_task_work_run+0x10/0x10
[   18.138061]  ? __sanitizer_cov_trace_const_cmp1+0x1e/0x30
[   18.138258]  ? switch_task_namespaces+0xa9/0xe0
[   18.138428]  do_exit+0xac9/0x2790
[   18.138556]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   18.138803]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   18.138993]  ? __pfx_do_exit+0x10/0x10
[   18.139134]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   18.139331]  ? security_file_ioctl+0x9d/0xd0
[   18.139496]  make_task_dead+0x182/0x3c0
[   18.139643]  rewind_stack_and_make_dead+0x17/0x20
[   18.139819] RIP: 0033:0x7f7ede43ee5d
[   18.139952] Code: Unable to access opcode bytes at 0x7f7ede43ee33.
[   18.140170] RSP: 002b:00007ffd35600688 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   18.140439] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f7ede43ee5d
[   18.140691] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   18.140944] RBP: 00007ffd356006a0 R08: 0000000000000800 R09: 0000000000000800
[   18.141196] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffd356007b8
[   18.141448] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f7ede807000
[   18.141706]  </TASK>
[   18.141790] irq event stamp: 0
[   18.141904] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   18.142128] hardirqs last disabled at (0): [<ffffffff8122f2d1>] copy_process+0x1c51/0x7140
[   18.142420] softirqs last  enabled at (0): [<ffffffff8122f312>] copy_process+0x1c92/0x7140
[   18.142720] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   18.142957] ---[ end trace 0000000000000000 ]---
[   18.145603] iommufd_mock iommufd_mock112: Adding to iommu group 112
[   18.145852] iommufd_mock iommufd_mock112: Removing from iommu group 112
[   18.146105] general protection fault, probably for non-canonical address 0xdffffc0000000006: 0000 [#113] PREEMPT SMP KASAN NOPTI
[   18.146509] KASAN: null-ptr-deref in range [0x0000000000000030-0x0000000000000037]
[   18.146786] CPU: 0 PID: 831 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   18.147099] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   18.147497] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   18.147707] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   18.148351] RSP: 0018:ffff888013cf7ba8 EFLAGS: 00010206
[   18.148542] RAX: dffffc0000000000 RBX: ffff8880167fb000 RCX: 0000000000000000
[   18.148795] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   18.149048] RBP: ffff888013cf7bc0 R08: 0000000000000001 R09: ffffed100155b11b
[   18.149301] R10: ffff88800aad88df R11: 5f6466756d6d6f69 R12: 0000000000000000
[   18.149560] R13: ffffffff85cc0180 R14: ffff888024c35f60 R15: ffffffff87070ae0
[   18.149813] FS:  00007f369c979600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   18.150099] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   18.150306] CR2: 0000000020000080 CR3: 000000000fb58000 CR4: 0000000000750ef0
[   18.150560] PKRU: 55555554
[   18.150662] Call Trace:
[   18.150757]  <TASK>
[   18.150854]  ? show_regs+0x6e/0x80
[   18.150992]  ? die_addr+0x45/0xb0
[   18.151122]  ? exc_general_protection+0x159/0x250
[   18.151303]  ? asm_exc_general_protection+0x2b/0x30
[   18.151487]  ? sysfs_remove_link_from_group+0x21/0x90
[   18.151674]  ? sysfs_remove_link_from_group+0x37/0x90
[   18.151862]  ? sysfs_remove_link_from_group+0x21/0x90
[   18.152049]  iommu_device_unlink+0x85/0xd0
[   18.152204]  iommu_deinit_device+0x11f/0x4c0
[   18.152367]  __iommu_group_remove_device+0x26b/0x300
[   18.152553]  iommu_group_remove_device+0x8a/0xb0
[   18.152727]  iommufd_test+0x1f1a/0x2d10
[   18.152871]  ? __pfx_lock_release+0x10/0x10
[   18.153028]  ? __pfx_lock_acquire+0x10/0x10
[   18.153187]  ? __pfx_iommufd_test+0x10/0x10
[   18.153344]  ? __sanitizer_cov_trace_const_cmp8+0x1c/0x30
[   18.153544]  iommufd_fops_ioctl+0x377/0x510
[   18.153703]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   18.153878]  ? trace_hardirqs_on+0x26/0x120
[   18.154037]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   18.154266]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   18.154449]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   18.154647]  ? security_file_ioctl+0x9d/0xd0
[   18.154815]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   18.154996]  __x64_sys_ioctl+0x1b9/0x230
[   18.155144]  do_syscall_64+0x3c/0x90
[   18.155282]  entry_SYSCALL_64_after_hwframe+0x6e/0xd8
[   18.155470] RIP: 0033:0x7f369c63ee5d
[   18.155606] Code: ff c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d 93 af 1b 00 f7 d8 64 89 01 48
[   18.156249] RSP: 002b:00007ffc97be3688 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   18.156518] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f369c63ee5d
[   18.156771] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   18.157023] RBP: 00007ffc97be36a0 R08: 0000000000000800 R09: 0000000000000800
[   18.157275] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffc97be37b8
[   18.157528] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f369c9ba000
[   18.157786]  </TASK>
[   18.157870] Modules linked in:
[   18.158007] ---[ end trace 0000000000000000 ]---
[   18.158176] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   18.158384] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   18.159140] RSP: 0018:ffff88802457fba8 EFLAGS: 00010206
[   18.159330] RAX: dffffc0000000000 RBX: ffff888014f9b000 RCX: 0000000000000000
[   18.159583] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   18.159837] RBP: ffff88802457fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   18.160089] R10: ffff88800aad88df R11: 0000000000000001 R12: 0000000000000000
[   18.160342] R13: ffffffff85cc0180 R14: ffff8880109b6ac0 R15: ffffffff87070ae0
[   18.160595] FS:  00007f369c979600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   18.160879] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   18.161086] CR2: 0000000020000080 CR3: 000000000fb58000 CR4: 0000000000750ef0
[   18.161340] PKRU: 55555554
[   18.161690] ------------[ cut here ]------------
[   18.161858] WARNING: CPU: 0 PID: 831 at drivers/iommu/iommufd/main.c:258 iommufd_fops_release+0x2a3/0x300
[   18.162199] Modules linked in:
[   18.162314] CPU: 0 PID: 831 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   18.162631] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   18.163037] RIP: 0010:iommufd_fops_release+0x2a3/0x300
[   18.163226] Code: 45 d0 65 48 2b 04 25 28 00 00 00 75 54 48 81 c4 88 00 00 00 31 c0 5b 41 5c 41 5d 41 5e 41 5f 5d c3 cc cc cc cc e8 ad 4f 0a fe <0f> 0b eb a6 e8 74 23 67 fe e9 f6 fe ff ff 48 89 85 50 ff ff ff e8
[   18.163865] RSP: 0018:ffff888013cf7c00 EFLAGS: 00010293
[   18.164054] RAX: 0000000000000000 RBX: ffff88800fe06b08 RCX: 0000000000000000
[   18.164306] RDX: ffff8880170d4a00 RSI: ffffffff835563e3 RDI: ffffffff86702b40
[   18.164559] RBP: ffff888013cf7cb0 R08: 0000000000000000 R09: fffffbfff0eb2644
[   18.164812] R10: ffffffff87593227 R11: ffff888019410a00 R12: 0000000000000000
[   18.165064] R13: ffff88800fe5c698 R14: ffff888013cf7c48 R15: ffffffff83556140
[   18.165316] FS:  0000000000000000(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   18.165601] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   18.165807] CR2: 0000000020000080 CR3: 000000000687e000 CR4: 0000000000750ef0
[   18.166061] PKRU: 55555554
[   18.166163] Call Trace:
[   18.166255]  <TASK>
[   18.166337]  ? show_regs+0x6e/0x80
[   18.166468]  ? __warn+0xef/0x340
[   18.166599]  ? report_bug+0x25e/0x4b0
[   18.166741]  ? iommufd_fops_release+0x2a3/0x300
[   18.166920]  ? report_bug+0x2cb/0x4b0
[   18.167063]  ? handle_bug+0x46/0x90
[   18.167196]  ? exc_invalid_op+0x1d/0x50
[   18.167340]  ? asm_exc_invalid_op+0x1f/0x30
[   18.167495]  ? __pfx_iommufd_fops_release+0x10/0x10
[   18.167677]  ? iommufd_fops_release+0x2a3/0x300
[   18.167846]  ? iommufd_fops_release+0x2a3/0x300
[   18.168017]  ? __pfx_iommufd_fops_release+0x10/0x10
[   18.168196]  ? rcu_is_watching+0x19/0xc0
[   18.168345]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   18.168543]  ? __pfx_iommufd_fops_release+0x10/0x10
[   18.168723]  __fput+0x424/0xaf0
[   18.168849]  ____fput+0x1f/0x30
[   18.168971]  task_work_run+0x19d/0x2b0
[   18.169114]  ? __pfx_task_work_run+0x10/0x10
[   18.169273]  ? __sanitizer_cov_trace_const_cmp1+0x1e/0x30
[   18.169470]  ? switch_task_namespaces+0xa9/0xe0
[   18.169641]  do_exit+0xac9/0x2790
[   18.169768]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   18.169996]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   18.170178]  ? __pfx_do_exit+0x10/0x10
[   18.170319]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   18.170515]  ? security_file_ioctl+0x9d/0xd0
[   18.170685]  make_task_dead+0x182/0x3c0
[   18.170854]  rewind_stack_and_make_dead+0x17/0x20
[   18.171035] RIP: 0033:0x7f369c63ee5d
[   18.171168] Code: Unable to access opcode bytes at 0x7f369c63ee33.
[   18.171387] RSP: 002b:00007ffc97be3688 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   18.171655] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f369c63ee5d
[   18.171906] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   18.172158] RBP: 00007ffc97be36a0 R08: 0000000000000800 R09: 0000000000000800
[   18.172410] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffc97be37b8
[   18.172662] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f369c9ba000
[   18.172920]  </TASK>
[   18.173005] irq event stamp: 0
[   18.173119] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   18.173342] hardirqs last disabled at (0): [<ffffffff8122f2d1>] copy_process+0x1c51/0x7140
[   18.173635] softirqs last  enabled at (0): [<ffffffff8122f312>] copy_process+0x1c92/0x7140
[   18.173929] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   18.174153] ---[ end trace 0000000000000000 ]---
[   18.176830] iommufd_mock iommufd_mock113: Adding to iommu group 113
[   18.177089] iommufd_mock iommufd_mock113: Removing from iommu group 113
[   18.177349] general protection fault, probably for non-canonical address 0xdffffc0000000006: 0000 [#114] PREEMPT SMP KASAN NOPTI
[   18.177762] KASAN: null-ptr-deref in range [0x0000000000000030-0x0000000000000037]
[   18.178036] CPU: 1 PID: 832 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   18.178350] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   18.178766] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   18.178986] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   18.179645] RSP: 0018:ffff8880119c7ba8 EFLAGS: 00010206
[   18.179839] RAX: dffffc0000000000 RBX: ffff8880231a2000 RCX: 0000000000000000
[   18.180098] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   18.180356] RBP: ffff8880119c7bc0 R08: 0000000000000001 R09: ffffed100155b11b
[   18.180614] R10: ffff88800aad88df R11: 5f6466756d6d6f69 R12: 0000000000000000
[   18.180872] R13: ffffffff85cc0180 R14: ffff88801679a360 R15: ffffffff87070ae0
[   18.181131] FS:  00007ff9c4fc8600(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
[   18.181423] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   18.181634] CR2: 0000000020000080 CR3: 0000000018a06000 CR4: 0000000000750ee0
[   18.181893] PKRU: 55555554
[   18.181996] Call Trace:
[   18.182090]  <TASK>
[   18.182173]  ? show_regs+0x6e/0x80
[   18.182309]  ? die_addr+0x45/0xb0
[   18.182442]  ? exc_general_protection+0x159/0x250
[   18.182626]  ? asm_exc_general_protection+0x2b/0x30
[   18.182823]  ? sysfs_remove_link_from_group+0x21/0x90
[   18.183021]  ? sysfs_remove_link_from_group+0x37/0x90
[   18.183210]  ? sysfs_remove_link_from_group+0x21/0x90
[   18.183399]  iommu_device_unlink+0x85/0xd0
[   18.183556]  iommu_deinit_device+0x11f/0x4c0
[   18.183721]  __iommu_group_remove_device+0x26b/0x300
[   18.183911]  iommu_group_remove_device+0x8a/0xb0
[   18.184088]  iommufd_test+0x1f1a/0x2d10
[   18.184233]  ? __pfx_lock_release+0x10/0x10
[   18.184393]  ? __pfx_lock_acquire+0x10/0x10
[   18.184553]  ? __pfx_iommufd_test+0x10/0x10
[   18.184713]  ? __sanitizer_cov_trace_const_cmp8+0x1c/0x30
[   18.184916]  iommufd_fops_ioctl+0x377/0x510
[   18.185077]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   18.185254]  ? trace_hardirqs_on+0x26/0x120
[   18.185415]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   18.185646]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   18.185831]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   18.186033]  ? security_file_ioctl+0x9d/0xd0
[   18.186198]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   18.186377]  __x64_sys_ioctl+0x1b9/0x230
[   18.186527]  do_syscall_64+0x3c/0x90
[   18.186664]  entry_SYSCALL_64_after_hwframe+0x6e/0xd8
[   18.186859] RIP: 0033:0x7ff9c4c3ee5d
[   18.186996] Code: ff c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d 93 af 1b 00 f7 d8 64 89 01 48
[   18.187649] RSP: 002b:00007ffd540f5c48 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   18.187923] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007ff9c4c3ee5d
[   18.188179] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   18.188434] RBP: 00007ffd540f5c60 R08: 0000000000000800 R09: 0000000000000800
[   18.188690] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffd540f5d78
[   18.188945] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007ff9c5009000
[   18.189206]  </TASK>
[   18.189291] Modules linked in:
[   18.189451] ---[ end trace 0000000000000000 ]---
[   18.189622] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   18.189856] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   18.190511] RSP: 0018:ffff88802457fba8 EFLAGS: 00010206
[   18.190726] RAX: dffffc0000000000 RBX: ffff888014f9b000 RCX: 0000000000000000
[   18.190991] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   18.191243] RBP: ffff88802457fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   18.191495] R10: ffff88800aad88df R11: 0000000000000001 R12: 0000000000000000
[   18.191746] R13: ffffffff85cc0180 R14: ffff8880109b6ac0 R15: ffffffff87070ae0
[   18.191997] FS:  00007ff9c4fc8600(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
[   18.192281] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   18.192486] CR2: 0000000020000080 CR3: 0000000018a06000 CR4: 0000000000750ee0
[   18.192738] PKRU: 55555554
[   18.193268] ------------[ cut here ]------------
[   18.193449] WARNING: CPU: 0 PID: 832 at drivers/iommu/iommufd/main.c:258 iommufd_fops_release+0x2a3/0x300
[   18.193792] Modules linked in:
[   18.193908] CPU: 0 PID: 832 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   18.194217] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   18.194660] RIP: 0010:iommufd_fops_release+0x2a3/0x300
[   18.194860] Code: 45 d0 65 48 2b 04 25 28 00 00 00 75 54 48 81 c4 88 00 00 00 31 c0 5b 41 5c 41 5d 41 5e 41 5f 5d c3 cc cc cc cc e8 ad 4f 0a fe <0f> 0b eb a6 e8 74 23 67 fe e9 f6 fe ff ff 48 89 85 50 ff ff ff e8
[   18.195510] RSP: 0018:ffff8880119c7c00 EFLAGS: 00010293
[   18.195700] RAX: 0000000000000000 RBX: ffff88801248a708 RCX: 0000000000000000
[   18.195953] RDX: ffff8880170d2500 RSI: ffffffff835563e3 RDI: ffffffff86702b40
[   18.196206] RBP: ffff8880119c7cb0 R08: 0000000000000000 R09: fffffbfff0eb2644
[   18.196459] R10: ffffffff87593227 R11: ffff888019752400 R12: 0000000000000000
[   18.196712] R13: ffff888011ce6918 R14: ffff8880119c7c48 R15: ffffffff83556140
[   18.196965] FS:  0000000000000000(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   18.197251] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   18.197458] CR2: 00007fa281a9e030 CR3: 000000000687e000 CR4: 0000000000750ef0
[   18.197712] PKRU: 55555554
[   18.197814] Call Trace:
[   18.197906]  <TASK>
[   18.197987]  ? show_regs+0x6e/0x80
[   18.198118]  ? __warn+0xef/0x340
[   18.198244]  ? report_bug+0x25e/0x4b0
[   18.198384]  ? iommufd_fops_release+0x2a3/0x300
[   18.198553]  ? report_bug+0x2cb/0x4b0
[   18.198719]  ? handle_bug+0x46/0x90
[   18.198859]  ? exc_invalid_op+0x1d/0x50
[   18.199009]  ? asm_exc_invalid_op+0x1f/0x30
[   18.199163]  ? __pfx_iommufd_fops_release+0x10/0x10
[   18.199346]  ? iommufd_fops_release+0x2a3/0x300
[   18.199515]  ? iommufd_fops_release+0x2a3/0x300
[   18.199686]  ? __pfx_iommufd_fops_release+0x10/0x10
[   18.199865]  ? rcu_is_watching+0x19/0xc0
[   18.200014]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   18.200212]  ? __pfx_iommufd_fops_release+0x10/0x10
[   18.200392]  __fput+0x424/0xaf0
[   18.200518]  ____fput+0x1f/0x30
[   18.200640]  task_work_run+0x19d/0x2b0
[   18.200782]  ? __pfx_task_work_run+0x10/0x10
[   18.200942]  ? __sanitizer_cov_trace_const_cmp1+0x1e/0x30
[   18.201139]  ? switch_task_namespaces+0xa9/0xe0
[   18.201310]  do_exit+0xac9/0x2790
[   18.201437]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   18.201664]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   18.201846]  ? __pfx_do_exit+0x10/0x10
[   18.201987]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   18.202183]  ? security_file_ioctl+0x9d/0xd0
[   18.202346]  make_task_dead+0x182/0x3c0
[   18.202491]  rewind_stack_and_make_dead+0x17/0x20
[   18.202689] RIP: 0033:0x7ff9c4c3ee5d
[   18.202829] Code: Unable to access opcode bytes at 0x7ff9c4c3ee33.
[   18.203050] RSP: 002b:00007ffd540f5c48 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   18.203321] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007ff9c4c3ee5d
[   18.203574] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   18.203826] RBP: 00007ffd540f5c60 R08: 0000000000000800 R09: 0000000000000800
[   18.204078] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffd540f5d78
[   18.204331] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007ff9c5009000
[   18.204588]  </TASK>
[   18.204672] irq event stamp: 0
[   18.204786] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   18.205010] hardirqs last disabled at (0): [<ffffffff8122f2d1>] copy_process+0x1c51/0x7140
[   18.205304] softirqs last  enabled at (0): [<ffffffff8122f312>] copy_process+0x1c92/0x7140
[   18.205597] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   18.205820] ---[ end trace 0000000000000000 ]---
[   18.208470] iommufd_mock iommufd_mock114: Adding to iommu group 114
[   18.208723] iommufd_mock iommufd_mock114: Removing from iommu group 114
[   18.208980] general protection fault, probably for non-canonical address 0xdffffc0000000006: 0000 [#115] PREEMPT SMP KASAN NOPTI
[   18.209389] KASAN: null-ptr-deref in range [0x0000000000000030-0x0000000000000037]
[   18.209661] CPU: 1 PID: 833 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   18.209973] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   18.210376] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   18.210589] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   18.211262] RSP: 0018:ffff88800bacfba8 EFLAGS: 00010206
[   18.211455] RAX: dffffc0000000000 RBX: ffff8880231a3000 RCX: 0000000000000000
[   18.211712] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   18.211968] RBP: ffff88800bacfbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   18.212224] R10: ffff88800aad88df R11: 5f6466756d6d6f69 R12: 0000000000000000
[   18.212480] R13: ffffffff85cc0180 R14: ffff88801679a720 R15: ffffffff87070ae0
[   18.212737] FS:  00007f0bac172600(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
[   18.213026] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   18.213236] CR2: 0000000020000080 CR3: 000000002031e000 CR4: 0000000000750ee0
[   18.213493] PKRU: 55555554
[   18.213596] Call Trace:
[   18.213689]  <TASK>
[   18.213772]  ? show_regs+0x6e/0x80
[   18.213907]  ? die_addr+0x45/0xb0
[   18.214040]  ? exc_general_protection+0x159/0x250
[   18.214222]  ? asm_exc_general_protection+0x2b/0x30
[   18.214408]  ? sysfs_remove_link_from_group+0x21/0x90
[   18.214597]  ? sysfs_remove_link_from_group+0x37/0x90
[   18.214795]  ? sysfs_remove_link_from_group+0x21/0x90
[   18.214987]  iommu_device_unlink+0x85/0xd0
[   18.215142]  iommu_deinit_device+0x11f/0x4c0
[   18.215306]  __iommu_group_remove_device+0x26b/0x300
[   18.215495]  iommu_group_remove_device+0x8a/0xb0
[   18.215670]  iommufd_test+0x1f1a/0x2d10
[   18.215815]  ? __pfx_lock_release+0x10/0x10
[   18.215973]  ? __pfx_lock_acquire+0x10/0x10
[   18.216134]  ? __pfx_iommufd_test+0x10/0x10
[   18.216293]  ? __sanitizer_cov_trace_const_cmp8+0x1c/0x30
[   18.216495]  iommufd_fops_ioctl+0x377/0x510
[   18.216655]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   18.216832]  ? trace_hardirqs_on+0x26/0x120
[   18.216993]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   18.217225]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   18.217409]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   18.217610]  ? security_file_ioctl+0x9d/0xd0
[   18.217775]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   18.217952]  __x64_sys_ioctl+0x1b9/0x230
[   18.218100]  do_syscall_64+0x3c/0x90
[   18.218237]  entry_SYSCALL_64_after_hwframe+0x6e/0xd8
[   18.218424] RIP: 0033:0x7f0babe3ee5d
[   18.218560] Code: ff c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d 93 af 1b 00 f7 d8 64 89 01 48
[   18.219221] RSP: 002b:00007ffc9bd0e588 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   18.219493] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f0babe3ee5d
[   18.219748] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   18.220003] RBP: 00007ffc9bd0e5a0 R08: 0000000000000800 R09: 0000000000000800
[   18.220259] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffc9bd0e6b8
[   18.220513] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f0bac1b3000
[   18.220775]  </TASK>
[   18.220860] Modules linked in:
[   18.221000] ---[ end trace 0000000000000000 ]---
[   18.221170] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   18.221381] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   18.222032] RSP: 0018:ffff88802457fba8 EFLAGS: 00010206
[   18.222223] RAX: dffffc0000000000 RBX: ffff888014f9b000 RCX: 0000000000000000
[   18.222478] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   18.222781] RBP: ffff88802457fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   18.223044] R10: ffff88800aad88df R11: 0000000000000001 R12: 0000000000000000
[   18.223300] R13: ffffffff85cc0180 R14: ffff8880109b6ac0 R15: ffffffff87070ae0
[   18.223557] FS:  00007f0bac172600(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
[   18.223846] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   18.224055] CR2: 0000000020000080 CR3: 000000002031e000 CR4: 0000000000750ee0
[   18.224313] PKRU: 55555554
[   18.224668] ------------[ cut here ]------------
[   18.224839] WARNING: CPU: 1 PID: 833 at drivers/iommu/iommufd/main.c:258 iommufd_fops_release+0x2a3/0x300
[   18.225183] Modules linked in:
[   18.225299] CPU: 1 PID: 833 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   18.225610] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   18.226012] RIP: 0010:iommufd_fops_release+0x2a3/0x300
[   18.226203] Code: 45 d0 65 48 2b 04 25 28 00 00 00 75 54 48 81 c4 88 00 00 00 31 c0 5b 41 5c 41 5d 41 5e 41 5f 5d c3 cc cc cc cc e8 ad 4f 0a fe <0f> 0b eb a6 e8 74 23 67 fe e9 f6 fe ff ff 48 89 85 50 ff ff ff e8
[   18.226872] RSP: 0018:ffff88800bacfc00 EFLAGS: 00010293
[   18.227065] RAX: 0000000000000000 RBX: ffff88801248a408 RCX: 0000000000000000
[   18.227321] RDX: ffff888014580000 RSI: ffffffff835563e3 RDI: ffffffff86702b48
[   18.227578] RBP: ffff88800bacfcb0 R08: 0000000000000000 R09: fffffbfff0eb2644
[   18.227834] R10: ffffffff87593227 R11: ffff88801311b800 R12: 0000000000000000
[   18.228090] R13: ffff88801897d098 R14: ffff88800bacfc48 R15: ffffffff83556140
[   18.228347] FS:  0000000000000000(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
[   18.228635] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   18.228845] CR2: 0000000020000080 CR3: 000000000687e000 CR4: 0000000000750ee0
[   18.229102] PKRU: 55555554
[   18.229204] Call Trace:
[   18.229298]  <TASK>
[   18.229380]  ? show_regs+0x6e/0x80
[   18.229528]  ? __warn+0xef/0x340
[   18.229664]  ? report_bug+0x25e/0x4b0
[   18.229806]  ? iommufd_fops_release+0x2a3/0x300
[   18.229977]  ? report_bug+0x2cb/0x4b0
[   18.230120]  ? handle_bug+0x46/0x90
[   18.230255]  ? exc_invalid_op+0x1d/0x50
[   18.230401]  ? asm_exc_invalid_op+0x1f/0x30
[   18.230558]  ? __pfx_iommufd_fops_release+0x10/0x10
[   18.230753]  ? iommufd_fops_release+0x2a3/0x300
[   18.230940]  ? iommufd_fops_release+0x2a3/0x300
[   18.231113]  ? __pfx_iommufd_fops_release+0x10/0x10
[   18.231296]  ? rcu_is_watching+0x19/0xc0
[   18.231447]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   18.231648]  ? __pfx_iommufd_fops_release+0x10/0x10
[   18.231830]  __fput+0x424/0xaf0
[   18.231957]  ____fput+0x1f/0x30
[   18.232082]  task_work_run+0x19d/0x2b0
[   18.232226]  ? __pfx_task_work_run+0x10/0x10
[   18.232388]  ? __sanitizer_cov_trace_const_cmp1+0x1e/0x30
[   18.232588]  ? switch_task_namespaces+0xa9/0xe0
[   18.232761]  do_exit+0xac9/0x2790
[   18.232890]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   18.233121]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   18.233305]  ? __pfx_do_exit+0x10/0x10
[   18.233448]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   18.233648]  ? security_file_ioctl+0x9d/0xd0
[   18.233813]  make_task_dead+0x182/0x3c0
[   18.233960]  rewind_stack_and_make_dead+0x17/0x20
[   18.234138] RIP: 0033:0x7f0babe3ee5d
[   18.234273] Code: Unable to access opcode bytes at 0x7f0babe3ee33.
[   18.234495] RSP: 002b:00007ffc9bd0e588 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   18.234790] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f0babe3ee5d
[   18.235055] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   18.235311] RBP: 00007ffc9bd0e5a0 R08: 0000000000000800 R09: 0000000000000800
[   18.235568] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffc9bd0e6b8
[   18.235824] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f0bac1b3000
[   18.236089]  </TASK>
[   18.236177] irq event stamp: 0
[   18.236292] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   18.236519] hardirqs last disabled at (0): [<ffffffff8122f2d1>] copy_process+0x1c51/0x7140
[   18.236817] softirqs last  enabled at (0): [<ffffffff8122f312>] copy_process+0x1c92/0x7140
[   18.237115] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   18.237343] ---[ end trace 0000000000000000 ]---
[   18.239813] iommufd_mock iommufd_mock115: Adding to iommu group 115
[   18.240068] iommufd_mock iommufd_mock115: Removing from iommu group 115
[   18.240323] general protection fault, probably for non-canonical address 0xdffffc0000000006: 0000 [#116] PREEMPT SMP KASAN NOPTI
[   18.240738] KASAN: null-ptr-deref in range [0x0000000000000030-0x0000000000000037]
[   18.241009] CPU: 1 PID: 834 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   18.241319] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   18.241721] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   18.241932] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   18.242585] RSP: 0018:ffff888013e0fba8 EFLAGS: 00010206
[   18.242808] RAX: dffffc0000000000 RBX: ffff8880231a5000 RCX: 0000000000000000
[   18.243067] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   18.243322] RBP: ffff888013e0fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   18.243578] R10: ffff88800aad88df R11: 5f6466756d6d6f69 R12: 0000000000000000
[   18.243833] R13: ffffffff85cc0180 R14: ffff88801679a600 R15: ffffffff87070ae0
[   18.244089] FS:  00007f7100e67600(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
[   18.244377] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   18.244587] CR2: 0000000020000080 CR3: 000000002031e000 CR4: 0000000000750ee0
[   18.244843] PKRU: 55555554
[   18.244946] Call Trace:
[   18.245039]  <TASK>
[   18.245121]  ? show_regs+0x6e/0x80
[   18.245255]  ? die_addr+0x45/0xb0
[   18.245387]  ? exc_general_protection+0x159/0x250
[   18.245569]  ? asm_exc_general_protection+0x2b/0x30
[   18.245754]  ? sysfs_remove_link_from_group+0x21/0x90
[   18.245943]  ? sysfs_remove_link_from_group+0x37/0x90
[   18.246132]  ? sysfs_remove_link_from_group+0x21/0x90
[   18.246321]  iommu_device_unlink+0x85/0xd0
[   18.246476]  iommu_deinit_device+0x11f/0x4c0
[   18.246641]  __iommu_group_remove_device+0x26b/0x300
[   18.246841]  iommu_group_remove_device+0x8a/0xb0
[   18.247016]  iommufd_test+0x1f1a/0x2d10
[   18.247161]  ? __pfx_lock_release+0x10/0x10
[   18.247319]  ? __pfx_lock_acquire+0x10/0x10
[   18.247478]  ? __pfx_iommufd_test+0x10/0x10
[   18.247636]  ? __sanitizer_cov_trace_const_cmp8+0x1c/0x30
[   18.247838]  iommufd_fops_ioctl+0x377/0x510
[   18.247998]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   18.248174]  ? trace_hardirqs_on+0x26/0x120
[   18.248335]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   18.248565]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   18.248750]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   18.248949]  ? security_file_ioctl+0x9d/0xd0
[   18.249113]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   18.249290]  __x64_sys_ioctl+0x1b9/0x230
[   18.249439]  do_syscall_64+0x3c/0x90
[   18.249576]  entry_SYSCALL_64_after_hwframe+0x6e/0xd8
[   18.249765] RIP: 0033:0x7f7100c3ee5d
[   18.249900] Code: ff c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d 93 af 1b 00 f7 d8 64 89 01 48
[   18.250552] RSP: 002b:00007ffd961c8e78 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   18.250826] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f7100c3ee5d
[   18.251082] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   18.251337] RBP: 00007ffd961c8e90 R08: 0000000000000800 R09: 0000000000000800
[   18.251593] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffd961c8fa8
[   18.251847] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f7100ea8000
[   18.252107]  </TASK>
[   18.252192] Modules linked in:
[   18.252396] ---[ end trace 0000000000000000 ]---
[   18.252567] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   18.252775] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   18.253427] RSP: 0018:ffff88802457fba8 EFLAGS: 00010206
[   18.253617] RAX: dffffc0000000000 RBX: ffff888014f9b000 RCX: 0000000000000000
[   18.253872] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   18.254127] RBP: ffff88802457fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   18.254381] R10: ffff88800aad88df R11: 0000000000000001 R12: 0000000000000000
[   18.254642] R13: ffffffff85cc0180 R14: ffff8880109b6ac0 R15: ffffffff87070ae0
[   18.254907] FS:  00007f7100e67600(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
[   18.255195] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   18.255406] CR2: 0000000020000080 CR3: 000000002031e000 CR4: 0000000000750ee0
[   18.255666] PKRU: 55555554
[   18.256019] ------------[ cut here ]------------
[   18.256189] WARNING: CPU: 1 PID: 834 at drivers/iommu/iommufd/main.c:258 iommufd_fops_release+0x2a3/0x300
[   18.256531] Modules linked in:
[   18.256647] CPU: 1 PID: 834 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   18.256956] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   18.257357] RIP: 0010:iommufd_fops_release+0x2a3/0x300
[   18.257546] Code: 45 d0 65 48 2b 04 25 28 00 00 00 75 54 48 81 c4 88 00 00 00 31 c0 5b 41 5c 41 5d 41 5e 41 5f 5d c3 cc cc cc cc e8 ad 4f 0a fe <0f> 0b eb a6 e8 74 23 67 fe e9 f6 fe ff ff 48 89 85 50 ff ff ff e8
[   18.258196] RSP: 0018:ffff888013e0fc00 EFLAGS: 00010293
[   18.258386] RAX: 0000000000000000 RBX: ffff88801248aa08 RCX: 0000000000000000
[   18.258649] RDX: ffff888013a04a00 RSI: ffffffff835563e3 RDI: ffffffff86702b48
[   18.258923] RBP: ffff888013e0fcb0 R08: 0000000000000000 R09: fffffbfff0eb2644
[   18.259177] R10: ffffffff87593227 R11: ffff8880135c2e00 R12: 0000000000000000
[   18.259431] R13: ffff88801897ce18 R14: ffff888013e0fc48 R15: ffffffff83556140
[   18.259685] FS:  0000000000000000(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
[   18.259972] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   18.260180] CR2: 0000000020000080 CR3: 000000000687e000 CR4: 0000000000750ee0
[   18.260436] PKRU: 55555554
[   18.260538] Call Trace:
[   18.260631]  <TASK>
[   18.260712]  ? show_regs+0x6e/0x80
[   18.260844]  ? __warn+0xef/0x340
[   18.260969]  ? report_bug+0x25e/0x4b0
[   18.261109]  ? iommufd_fops_release+0x2a3/0x300
[   18.261280]  ? report_bug+0x2cb/0x4b0
[   18.261422]  ? handle_bug+0x46/0x90
[   18.261556]  ? exc_invalid_op+0x1d/0x50
[   18.261701]  ? asm_exc_invalid_op+0x1f/0x30
[   18.261857]  ? __pfx_iommufd_fops_release+0x10/0x10
[   18.262040]  ? iommufd_fops_release+0x2a3/0x300
[   18.262210]  ? iommufd_fops_release+0x2a3/0x300
[   18.262382]  ? __pfx_iommufd_fops_release+0x10/0x10
[   18.262562]  ? rcu_is_watching+0x19/0xc0
[   18.262718]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   18.262932]  ? __pfx_iommufd_fops_release+0x10/0x10
[   18.263115]  __fput+0x424/0xaf0
[   18.263241]  ____fput+0x1f/0x30
[   18.263364]  task_work_run+0x19d/0x2b0
[   18.263508]  ? __pfx_task_work_run+0x10/0x10
[   18.263669]  ? __sanitizer_cov_trace_const_cmp1+0x1e/0x30
[   18.263868]  ? switch_task_namespaces+0xa9/0xe0
[   18.264039]  do_exit+0xac9/0x2790
[   18.264167]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   18.264396]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   18.264579]  ? __pfx_do_exit+0x10/0x10
[   18.264721]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   18.264920]  ? security_file_ioctl+0x9d/0xd0
[   18.265084]  make_task_dead+0x182/0x3c0
[   18.265230]  rewind_stack_and_make_dead+0x17/0x20
[   18.265406] RIP: 0033:0x7f7100c3ee5d
[   18.265541] Code: Unable to access opcode bytes at 0x7f7100c3ee33.
[   18.265763] RSP: 002b:00007ffd961c8e78 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   18.266035] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f7100c3ee5d
[   18.266290] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   18.266545] RBP: 00007ffd961c8e90 R08: 0000000000000800 R09: 0000000000000800
[   18.266814] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffd961c8fa8
[   18.267076] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f7100ea8000
[   18.267337]  </TASK>
[   18.267422] irq event stamp: 0
[   18.267537] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   18.267764] hardirqs last disabled at (0): [<ffffffff8122f2d1>] copy_process+0x1c51/0x7140
[   18.268060] softirqs last  enabled at (0): [<ffffffff8122f312>] copy_process+0x1c92/0x7140
[   18.268356] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   18.268582] ---[ end trace 0000000000000000 ]---
[   18.271091] iommufd_mock iommufd_mock116: Adding to iommu group 116
[   18.271342] iommufd_mock iommufd_mock116: Removing from iommu group 116
[   18.271598] general protection fault, probably for non-canonical address 0xdffffc0000000006: 0000 [#117] PREEMPT SMP KASAN NOPTI
[   18.272009] KASAN: null-ptr-deref in range [0x0000000000000030-0x0000000000000037]
[   18.272280] CPU: 1 PID: 835 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   18.272591] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   18.272995] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   18.273206] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   18.273861] RSP: 0018:ffff888012cf7ba8 EFLAGS: 00010206
[   18.274053] RAX: dffffc0000000000 RBX: ffff888014b61000 RCX: 0000000000000000
[   18.274309] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   18.274565] RBP: ffff888012cf7bc0 R08: 0000000000000001 R09: ffffed100155b11b
[   18.274845] R10: ffff88800aad88df R11: 5f6466756d6d6f69 R12: 0000000000000000
[   18.275105] R13: ffffffff85cc0180 R14: ffff88801679a580 R15: ffffffff87070ae0
[   18.275367] FS:  00007ffaaeb4f600(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
[   18.275657] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   18.275866] CR2: 0000000020000080 CR3: 000000002031e000 CR4: 0000000000750ee0
[   18.276124] PKRU: 55555554
[   18.276226] Call Trace:
[   18.276319]  <TASK>
[   18.276402]  ? show_regs+0x6e/0x80
[   18.276536]  ? die_addr+0x45/0xb0
[   18.276669]  ? exc_general_protection+0x159/0x250
[   18.276851]  ? asm_exc_general_protection+0x2b/0x30
[   18.277037]  ? sysfs_remove_link_from_group+0x21/0x90
[   18.277227]  ? sysfs_remove_link_from_group+0x37/0x90
[   18.277416]  ? sysfs_remove_link_from_group+0x21/0x90
[   18.277605]  iommu_device_unlink+0x85/0xd0
[   18.277761]  iommu_deinit_device+0x11f/0x4c0
[   18.277925]  __iommu_group_remove_device+0x26b/0x300
[   18.278114]  iommu_group_remove_device+0x8a/0xb0
[   18.278290]  iommufd_test+0x1f1a/0x2d10
[   18.278435]  ? __pfx_lock_release+0x10/0x10
[   18.278595]  ? __pfx_lock_acquire+0x10/0x10
[   18.278762]  ? __pfx_iommufd_test+0x10/0x10
[   18.278928]  ? __sanitizer_cov_trace_const_cmp8+0x1c/0x30
[   18.279131]  iommufd_fops_ioctl+0x377/0x510
[   18.279291]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   18.279468]  ? trace_hardirqs_on+0x26/0x120
[   18.279629]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   18.279860]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   18.280046]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   18.280247]  ? security_file_ioctl+0x9d/0xd0
[   18.280411]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   18.280589]  __x64_sys_ioctl+0x1b9/0x230
[   18.280738]  do_syscall_64+0x3c/0x90
[   18.280874]  entry_SYSCALL_64_after_hwframe+0x6e/0xd8
[   18.281062] RIP: 0033:0x7ffaae83ee5d
[   18.281197] Code: ff c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d 93 af 1b 00 f7 d8 64 89 01 48
[   18.281851] RSP: 002b:00007ffce7d72068 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   18.282124] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007ffaae83ee5d
[   18.282380] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   18.282635] RBP: 00007ffce7d72080 R08: 0000000000000800 R09: 0000000000000800
[   18.282898] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffce7d72198
[   18.283154] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007ffaaeb90000
[   18.283414]  </TASK>
[   18.283499] Modules linked in:
[   18.283650] ---[ end trace 0000000000000000 ]---
[   18.283820] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   18.284030] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   18.284684] RSP: 0018:ffff88802457fba8 EFLAGS: 00010206
[   18.284875] RAX: dffffc0000000000 RBX: ffff888014f9b000 RCX: 0000000000000000
[   18.285131] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   18.285387] RBP: ffff88802457fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   18.285643] R10: ffff88800aad88df R11: 0000000000000001 R12: 0000000000000000
[   18.285898] R13: ffffffff85cc0180 R14: ffff8880109b6ac0 R15: ffffffff87070ae0
[   18.286154] FS:  00007ffaaeb4f600(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
[   18.286442] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   18.286657] CR2: 0000000020000080 CR3: 000000002031e000 CR4: 0000000000750ee0
[   18.286929] PKRU: 55555554
[   18.287280] ------------[ cut here ]------------
[   18.287451] WARNING: CPU: 1 PID: 835 at drivers/iommu/iommufd/main.c:258 iommufd_fops_release+0x2a3/0x300
[   18.287795] Modules linked in:
[   18.287911] CPU: 1 PID: 835 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   18.288222] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   18.288624] RIP: 0010:iommufd_fops_release+0x2a3/0x300
[   18.288815] Code: 45 d0 65 48 2b 04 25 28 00 00 00 75 54 48 81 c4 88 00 00 00 31 c0 5b 41 5c 41 5d 41 5e 41 5f 5d c3 cc cc cc cc e8 ad 4f 0a fe <0f> 0b eb a6 e8 74 23 67 fe e9 f6 fe ff ff 48 89 85 50 ff ff ff e8
[   18.289467] RSP: 0018:ffff888012cf7c00 EFLAGS: 00010293
[   18.289658] RAX: 0000000000000000 RBX: ffff88801248a908 RCX: 0000000000000000
[   18.289914] RDX: ffff888013a02500 RSI: ffffffff835563e3 RDI: ffffffff86702b48
[   18.290169] RBP: ffff888012cf7cb0 R08: 0000000000000000 R09: fffffbfff0eb2644
[   18.290425] R10: ffffffff87593227 R11: ffff8880196ece00 R12: 0000000000000000
[   18.290688] R13: ffff888018b5e418 R14: ffff888012cf7c48 R15: ffffffff83556140
[   18.290953] FS:  0000000000000000(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
[   18.291243] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   18.291485] CR2: 0000000020000080 CR3: 000000000687e000 CR4: 0000000000750ee0
[   18.291786] PKRU: 55555554
[   18.291888] Call Trace:
[   18.291981]  <TASK>
[   18.292068]  ? show_regs+0x6e/0x80
[   18.292222]  ? __warn+0xef/0x340
[   18.292369]  ? report_bug+0x25e/0x4b0
[   18.292511]  ? iommufd_fops_release+0x2a3/0x300
[   18.292689]  ? report_bug+0x2cb/0x4b0
[   18.292861]  ? handle_bug+0x46/0x90
[   18.292998]  ? exc_invalid_op+0x1d/0x50
[   18.293144]  ? asm_exc_invalid_op+0x1f/0x30
[   18.293319]  ? __pfx_iommufd_fops_release+0x10/0x10
[   18.293528]  ? iommufd_fops_release+0x2a3/0x300
[   18.293699]  ? iommufd_fops_release+0x2a3/0x300
[   18.293879]  ? __pfx_iommufd_fops_release+0x10/0x10
[   18.294093]  ? rcu_is_watching+0x19/0xc0
[   18.294243]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   18.294457]  ? __pfx_iommufd_fops_release+0x10/0x10
[   18.294675]  __fput+0x424/0xaf0
[   18.294807]  ____fput+0x1f/0x30
[   18.294934]  task_work_run+0x19d/0x2b0
[   18.295097]  ? __pfx_task_work_run+0x10/0x10
[   18.295289]  ? __sanitizer_cov_trace_const_cmp1+0x1e/0x30
[   18.295488]  ? switch_task_namespaces+0xa9/0xe0
[   18.295688]  do_exit+0xac9/0x2790
[   18.295847]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   18.296077]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   18.296260]  ? __pfx_do_exit+0x10/0x10
[   18.296403]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   18.296602]  ? security_file_ioctl+0x9d/0xd0
[   18.296791]  make_task_dead+0x182/0x3c0
[   18.296965]  rewind_stack_and_make_dead+0x17/0x20
[   18.297146] RIP: 0033:0x7ffaae83ee5d
[   18.297283] Code: Unable to access opcode bytes at 0x7ffaae83ee33.
[   18.297561] RSP: 002b:00007ffce7d72068 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   18.297840] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007ffaae83ee5d
[   18.298143] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   18.298404] RBP: 00007ffce7d72080 R08: 0000000000000800 R09: 0000000000000800
[   18.298714] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffce7d72198
[   18.298978] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007ffaaeb90000
[   18.299245]  </TASK>
[   18.299341] irq event stamp: 0
[   18.299493] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   18.299725] hardirqs last disabled at (0): [<ffffffff8122f2d1>] copy_process+0x1c51/0x7140
[   18.300069] softirqs last  enabled at (0): [<ffffffff8122f312>] copy_process+0x1c92/0x7140
[   18.300372] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   18.300647] ---[ end trace 0000000000000000 ]---
[   18.304401] iommufd_mock iommufd_mock117: Adding to iommu group 117
[   18.304661] iommufd_mock iommufd_mock117: Removing from iommu group 117
[   18.304924] general protection fault, probably for non-canonical address 0xdffffc0000000006: 0000 [#118] PREEMPT SMP KASAN NOPTI
[   18.305355] KASAN: null-ptr-deref in range [0x0000000000000030-0x0000000000000037]
[   18.305669] CPU: 1 PID: 836 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   18.306033] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   18.306453] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   18.306710] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   18.307427] RSP: 0018:ffff88800bacfba8 EFLAGS: 00010206
[   18.307623] RAX: dffffc0000000000 RBX: ffff888014b63000 RCX: 0000000000000000
[   18.307932] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   18.308194] RBP: ffff88800bacfbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   18.308496] R10: ffff88800aad88df R11: 5f6466756d6d6f69 R12: 0000000000000000
[   18.308758] R13: ffffffff85cc0180 R14: ffff88801679ae40 R15: ffffffff87070ae0
[   18.309062] FS:  00007fe560b6c600(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
[   18.309358] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   18.309615] CR2: 0000000020000080 CR3: 0000000018bcc000 CR4: 0000000000750ee0
[   18.309878] PKRU: 55555554
[   18.309983] Call Trace:
[   18.310086]  <TASK>
[   18.310201]  ? show_regs+0x6e/0x80
[   18.310340]  ? die_addr+0x45/0xb0
[   18.310475]  ? exc_general_protection+0x159/0x250
[   18.310681]  ? asm_exc_general_protection+0x2b/0x30
[   18.310900]  ? sysfs_remove_link_from_group+0x21/0x90
[   18.311094]  ? sysfs_remove_link_from_group+0x37/0x90
[   18.311329]  ? sysfs_remove_link_from_group+0x21/0x90
[   18.311523]  iommu_device_unlink+0x85/0xd0
[   18.311683]  iommu_deinit_device+0x11f/0x4c0
[   18.311892]  __iommu_group_remove_device+0x26b/0x300
[   18.312085]  iommu_group_remove_device+0x8a/0xb0
[   18.312264]  iommufd_test+0x1f1a/0x2d10
[   18.312453]  ? __pfx_lock_release+0x10/0x10
[   18.312616]  ? __pfx_lock_acquire+0x10/0x10
[   18.312780]  ? __pfx_iommufd_test+0x10/0x10
[   18.312953]  ? __sanitizer_cov_trace_const_cmp8+0x1c/0x30
[   18.313191]  iommufd_fops_ioctl+0x377/0x510
[   18.313355]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   18.313559]  ? trace_hardirqs_on+0x26/0x120
[   18.313748]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   18.313985]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   18.314216]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   18.314422]  ? security_file_ioctl+0x9d/0xd0
[   18.314596]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   18.314799]  __x64_sys_ioctl+0x1b9/0x230
[   18.314952]  do_syscall_64+0x3c/0x90
[   18.315091]  entry_SYSCALL_64_after_hwframe+0x6e/0xd8
[   18.315324] RIP: 0033:0x7fe56083ee5d
[   18.315462] Code: ff c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d 93 af 1b 00 f7 d8 64 89 01 48
[   18.316171] RSP: 002b:00007ffd38018738 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   18.316491] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007fe56083ee5d
[   18.316752] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   18.317053] RBP: 00007ffd38018750 R08: 0000000000000800 R09: 0000000000000800
[   18.317315] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffd38018868
[   18.317620] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007fe560bad000
[   18.317887]  </TASK>
[   18.317991] Modules linked in:
[   18.318178] ---[ end trace 0000000000000000 ]---
[   18.318353] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   18.318567] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   18.319261] RSP: 0018:ffff88802457fba8 EFLAGS: 00010206
[   18.319456] RAX: dffffc0000000000 RBX: ffff888014f9b000 RCX: 0000000000000000
[   18.319717] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   18.319978] RBP: ffff88802457fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   18.320282] R10: ffff88800aad88df R11: 0000000000000001 R12: 0000000000000000
[   18.320543] R13: ffffffff85cc0180 R14: ffff8880109b6ac0 R15: ffffffff87070ae0
[   18.320850] FS:  00007fe560b6c600(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
[   18.321145] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   18.321363] CR2: 0000000020000080 CR3: 0000000018bcc000 CR4: 0000000000750ee0
[   18.321664] PKRU: 55555554
[   18.322236] ------------[ cut here ]------------
[   18.322418] WARNING: CPU: 0 PID: 836 at drivers/iommu/iommufd/main.c:258 iommufd_fops_release+0x2a3/0x300
[   18.322926] Modules linked in:
[   18.323045] CPU: 0 PID: 836 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   18.323572] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   18.324188] RIP: 0010:iommufd_fops_release+0x2a3/0x300
[   18.324511] Code: 45 d0 65 48 2b 04 25 28 00 00 00 75 54 48 81 c4 88 00 00 00 31 c0 5b 41 5c 41 5d 41 5e 41 5f 5d c3 cc cc cc cc e8 ad 4f 0a fe <0f> 0b eb a6 e8 74 23 67 fe e9 f6 fe ff ff 48 89 85 50 ff ff ff e8
[   18.325228] RSP: 0018:ffff88800bacfc00 EFLAGS: 00010293
[   18.325440] RAX: 0000000000000000 RBX: ffff88801248a208 RCX: 0000000000000000
[   18.325739] RDX: ffff888011e40000 RSI: ffffffff835563e3 RDI: ffffffff86702b40
[   18.325997] RBP: ffff88800bacfcb0 R08: 0000000000000000 R09: fffffbfff0eb2644
[   18.326317] R10: ffffffff87593227 R11: ffff88800b6d9600 R12: 0000000000000000
[   18.326587] R13: ffff888018b5fa98 R14: ffff88800bacfc48 R15: ffffffff83556140
[   18.326849] FS:  0000000000000000(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   18.327152] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   18.327411] CR2: 00007f313c12e128 CR3: 000000000687e000 CR4: 0000000000750ef0
[   18.327670] PKRU: 55555554
[   18.327779] Call Trace:
[   18.327926]  <TASK>
[   18.328010]  ? show_regs+0x6e/0x80
[   18.328144]  ? __warn+0xef/0x340
[   18.328271]  ? report_bug+0x25e/0x4b0
[   18.328413]  ? iommufd_fops_release+0x2a3/0x300
[   18.328643]  ? report_bug+0x2cb/0x4b0
[   18.328788]  ? handle_bug+0x46/0x90
[   18.328922]  ? exc_invalid_op+0x1d/0x50
[   18.329069]  ? asm_exc_invalid_op+0x1f/0x30
[   18.329284]  ? __pfx_iommufd_fops_release+0x10/0x10
[   18.329471]  ? iommufd_fops_release+0x2a3/0x300
[   18.329645]  ? iommufd_fops_release+0x2a3/0x300
[   18.329822]  ? __pfx_iommufd_fops_release+0x10/0x10
[   18.330069]  ? rcu_is_watching+0x19/0xc0
[   18.330221]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   18.330423]  ? __pfx_iommufd_fops_release+0x10/0x10
[   18.330635]  __fput+0x424/0xaf0
[   18.330791]  ____fput+0x1f/0x30
[   18.330915]  task_work_run+0x19d/0x2b0
[   18.331061]  ? __pfx_task_work_run+0x10/0x10
[   18.331223]  ? __sanitizer_cov_trace_const_cmp1+0x1e/0x30
[   18.331423]  ? switch_task_namespaces+0xa9/0xe0
[   18.331597]  do_exit+0xac9/0x2790
[   18.331789]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   18.332020]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   18.332205]  ? __pfx_do_exit+0x10/0x10
[   18.332361]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   18.332606]  ? security_file_ioctl+0x9d/0xd0
[   18.332772]  make_task_dead+0x182/0x3c0
[   18.332920]  rewind_stack_and_make_dead+0x17/0x20
[   18.333160] RIP: 0033:0x7fe56083ee5d
[   18.333297] Code: Unable to access opcode bytes at 0x7fe56083ee33.
[   18.333520] RSP: 002b:00007ffd38018738 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   18.333859] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007fe56083ee5d
[   18.334117] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   18.334382] RBP: 00007ffd38018750 R08: 0000000000000800 R09: 0000000000000800
[   18.334702] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffd38018868
[   18.334962] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007fe560bad000
[   18.335226]  </TASK>
[   18.335311] irq event stamp: 0
[   18.335434] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   18.335717] hardirqs last disabled at (0): [<ffffffff8122f2d1>] copy_process+0x1c51/0x7140
[   18.336017] softirqs last  enabled at (0): [<ffffffff8122f312>] copy_process+0x1c92/0x7140
[   18.336404] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   18.336633] ---[ end trace 0000000000000000 ]---
[   18.340178] iommufd_mock iommufd_mock118: Adding to iommu group 118
[   18.340434] iommufd_mock iommufd_mock118: Removing from iommu group 118
[   18.340769] general protection fault, probably for non-canonical address 0xdffffc0000000006: 0000 [#119] PREEMPT SMP KASAN NOPTI
[   18.341181] KASAN: null-ptr-deref in range [0x0000000000000030-0x0000000000000037]
[   18.341487] CPU: 0 PID: 837 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   18.341801] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   18.342207] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   18.342421] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   18.343085] RSP: 0018:ffff8880165e7ba8 EFLAGS: 00010206
[   18.343279] RAX: dffffc0000000000 RBX: ffff8880167fe000 RCX: 0000000000000000
[   18.343536] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   18.343793] RBP: ffff8880165e7bc0 R08: 0000000000000001 R09: ffffed100155b11b
[   18.344050] R10: ffff88800aad88df R11: 5f6466756d6d6f69 R12: 0000000000000000
[   18.344307] R13: ffffffff85cc0180 R14: ffff888024c35320 R15: ffffffff87070ae0
[   18.344566] FS:  00007f8357568600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   18.344856] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   18.345066] CR2: 0000000020000080 CR3: 000000000fb58000 CR4: 0000000000750ef0
[   18.345324] PKRU: 55555554
[   18.345427] Call Trace:
[   18.345520]  <TASK>
[   18.345603]  ? show_regs+0x6e/0x80
[   18.345739]  ? die_addr+0x45/0xb0
[   18.345872]  ? exc_general_protection+0x159/0x250
[   18.346056]  ? asm_exc_general_protection+0x2b/0x30
[   18.346242]  ? sysfs_remove_link_from_group+0x21/0x90
[   18.346434]  ? sysfs_remove_link_from_group+0x37/0x90
[   18.346625]  ? sysfs_remove_link_from_group+0x21/0x90
[   18.346817]  iommu_device_unlink+0x85/0xd0
[   18.346974]  iommu_deinit_device+0x11f/0x4c0
[   18.347140]  __iommu_group_remove_device+0x26b/0x300
[   18.347331]  iommu_group_remove_device+0x8a/0xb0
[   18.347508]  iommufd_test+0x1f1a/0x2d10
[   18.347654]  ? __pfx_lock_release+0x10/0x10
[   18.347814]  ? __pfx_lock_acquire+0x10/0x10
[   18.347975]  ? __pfx_iommufd_test+0x10/0x10
[   18.348135]  ? __sanitizer_cov_trace_const_cmp8+0x1c/0x30
[   18.348339]  iommufd_fops_ioctl+0x377/0x510
[   18.348500]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   18.348678]  ? trace_hardirqs_on+0x26/0x120
[   18.348840]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   18.349073]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   18.349259]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   18.349461]  ? security_file_ioctl+0x9d/0xd0
[   18.349627]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   18.349808]  __x64_sys_ioctl+0x1b9/0x230
[   18.349961]  do_syscall_64+0x3c/0x90
[   18.350098]  entry_SYSCALL_64_after_hwframe+0x6e/0xd8
[   18.350287] RIP: 0033:0x7f835723ee5d
[   18.350424] Code: ff c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d 93 af 1b 00 f7 d8 64 89 01 48
[   18.351082] RSP: 002b:00007ffe26e72708 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   18.351351] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f835723ee5d
[   18.351604] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   18.351856] RBP: 00007ffe26e72720 R08: 0000000000000800 R09: 0000000000000800
[   18.352108] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffe26e72838
[   18.352360] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f83575a9000
[   18.352616]  </TASK>
[   18.352700] Modules linked in:
[   18.352995] ---[ end trace 0000000000000000 ]---
[   18.353168] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   18.353380] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   18.354035] RSP: 0018:ffff88802457fba8 EFLAGS: 00010206
[   18.354227] RAX: dffffc0000000000 RBX: ffff888014f9b000 RCX: 0000000000000000
[   18.354493] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   18.354839] RBP: ffff88802457fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   18.355096] R10: ffff88800aad88df R11: 0000000000000001 R12: 0000000000000000
[   18.355347] R13: ffffffff85cc0180 R14: ffff8880109b6ac0 R15: ffffffff87070ae0
[   18.355687] FS:  00007f8357568600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   18.355980] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   18.356255] CR2: 0000000020000080 CR3: 000000000fb58000 CR4: 0000000000750ef0
[   18.356510] PKRU: 55555554
[   18.356889] ------------[ cut here ]------------
[   18.357101] WARNING: CPU: 0 PID: 837 at drivers/iommu/iommufd/main.c:258 iommufd_fops_release+0x2a3/0x300
[   18.357449] Modules linked in:
[   18.357577] CPU: 0 PID: 837 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   18.357924] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   18.358380] RIP: 0010:iommufd_fops_release+0x2a3/0x300
[   18.358573] Code: 45 d0 65 48 2b 04 25 28 00 00 00 75 54 48 81 c4 88 00 00 00 31 c0 5b 41 5c 41 5d 41 5e 41 5f 5d c3 cc cc cc cc e8 ad 4f 0a fe <0f> 0b eb a6 e8 74 23 67 fe e9 f6 fe ff ff 48 89 85 50 ff ff ff e8
[   18.359319] RSP: 0018:ffff8880165e7c00 EFLAGS: 00010293
[   18.359512] RAX: 0000000000000000 RBX: ffff88800fe06808 RCX: 0000000000000000
[   18.359768] RDX: ffff88800f782500 RSI: ffffffff835563e3 RDI: ffffffff86702b40
[   18.360087] RBP: ffff8880165e7cb0 R08: 0000000000000000 R09: fffffbfff0eb2644
[   18.360345] R10: ffffffff87593227 R11: ffff888018a9f600 R12: 0000000000000000
[   18.360665] R13: ffff888012485098 R14: ffff8880165e7c48 R15: ffffffff83556140
[   18.360923] FS:  0000000000000000(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   18.361234] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   18.361483] CR2: 0000000020000080 CR3: 000000000687e000 CR4: 0000000000750ef0
[   18.361742] PKRU: 55555554
[   18.361855] Call Trace:
[   18.362000]  <TASK>
[   18.362083]  ? show_regs+0x6e/0x80
[   18.362218]  ? __warn+0xef/0x340
[   18.362345]  ? report_bug+0x25e/0x4b0
[   18.362487]  ? iommufd_fops_release+0x2a3/0x300
[   18.362724]  ? report_bug+0x2cb/0x4b0
[   18.362873]  ? handle_bug+0x46/0x90
[   18.362959] systemd-journald[136]: Data hash table of /run/log/journal/938775788448454bb5b34822d5730c41/system.journal has a fill level at 75.0 (5446 of 7260 items, 4182016 file size, 767 bytes per hash table item), suggesting rotation.
[   18.363008]  ? exc_invalid_op+0x1d/0x50
[   18.363768] systemd-journald[136]: /run/log/journal/938775788448454bb5b34822d5730c41/system.journal: Journal header limits reached or header out-of-date, rotating.
[   18.363902]  ? asm_exc_invalid_op+0x1f/0x30
[   18.364575]  ? __pfx_iommufd_fops_release+0x10/0x10
[   18.364760]  ? iommufd_fops_release+0x2a3/0x300
[   18.364932]  ? iommufd_fops_release+0x2a3/0x300
[   18.365105]  ? __pfx_iommufd_fops_release+0x10/0x10
[   18.365287]  ? rcu_is_watching+0x19/0xc0
[   18.365438]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   18.365639]  ? __pfx_iommufd_fops_release+0x10/0x10
[   18.365822]  __fput+0x424/0xaf0
[   18.365949]  ____fput+0x1f/0x30
[   18.366073]  task_work_run+0x19d/0x2b0
[   18.366218]  ? __pfx_task_work_run+0x10/0x10
[   18.366380]  ? __sanitizer_cov_trace_const_cmp1+0x1e/0x30
[   18.366585]  ? switch_task_namespaces+0xa9/0xe0
[   18.366761]  do_exit+0xac9/0x2790
[   18.366891]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   18.367121]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   18.367306]  ? __pfx_do_exit+0x10/0x10
[   18.367450]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   18.367651]  ? security_file_ioctl+0x9d/0xd0
[   18.367816]  make_task_dead+0x182/0x3c0
[   18.367964]  rewind_stack_and_make_dead+0x17/0x20
[   18.368142] RIP: 0033:0x7f835723ee5d
[   18.368278] Code: Unable to access opcode bytes at 0x7f835723ee33.
[   18.368500] RSP: 002b:00007ffe26e72708 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   18.368775] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f835723ee5d
[   18.369038] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   18.369362] RBP: 00007ffe26e72720 R08: 0000000000000800 R09: 0000000000000800
[   18.369621] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffe26e72838
[   18.369945] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f83575a9000
[   18.370209]  </TASK>
[   18.370295] irq event stamp: 0
[   18.370411] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   18.370715] hardirqs last disabled at (0): [<ffffffff8122f2d1>] copy_process+0x1c51/0x7140
[   18.371017] softirqs last  enabled at (0): [<ffffffff8122f312>] copy_process+0x1c92/0x7140
[   18.371324] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   18.371620] ---[ end trace 0000000000000000 ]---
[   18.375004] iommufd_mock iommufd_mock119: Adding to iommu group 119
[   18.375354] iommufd_mock iommufd_mock119: Removing from iommu group 119
[   18.375624] general protection fault, probably for non-canonical address 0xdffffc0000000006: 0000 [#120] PREEMPT SMP KASAN NOPTI
[   18.376047] KASAN: null-ptr-deref in range [0x0000000000000030-0x0000000000000037]
[   18.376329] CPU: 0 PID: 839 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   18.376651] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   18.377064] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   18.377285] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   18.377959] RSP: 0018:ffff888014cbfba8 EFLAGS: 00010206
[   18.378158] RAX: dffffc0000000000 RBX: ffff8880167fd000 RCX: 0000000000000000
[   18.378422] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   18.378686] RBP: ffff888014cbfbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   18.378957] R10: ffff88800aad88df R11: 5f6466756d6d6f69 R12: 0000000000000000
[   18.379273] R13: ffffffff85cc0180 R14: ffff888024c35cc0 R15: ffffffff87070ae0
[   18.379537] FS:  00007f103fccd600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   18.379834] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   18.380051] CR2: 0000000020000080 CR3: 0000000018bcc000 CR4: 0000000000750ef0
[   18.380317] PKRU: 55555554
[   18.380424] Call Trace:
[   18.380520]  <TASK>
[   18.380606]  ? show_regs+0x6e/0x80
[   18.380745]  ? die_addr+0x45/0xb0
[   18.380882]  ? exc_general_protection+0x159/0x250
[   18.381071]  ? asm_exc_general_protection+0x2b/0x30
[   18.381263]  ? sysfs_remove_link_from_group+0x21/0x90
[   18.381461]  ? sysfs_remove_link_from_group+0x37/0x90
[   18.381657]  ? sysfs_remove_link_from_group+0x21/0x90
[   18.381853]  iommu_device_unlink+0x85/0xd0
[   18.382016]  iommu_deinit_device+0x11f/0x4c0
[   18.382185]  __iommu_group_remove_device+0x26b/0x300
[   18.382380]  iommu_group_remove_device+0x8a/0xb0
[   18.382562]  iommufd_test+0x1f1a/0x2d10
[   18.382713]  ? __pfx_lock_release+0x10/0x10
[   18.382878]  ? __pfx_lock_acquire+0x10/0x10
[   18.383042]  ? __pfx_iommufd_test+0x10/0x10
[   18.383203]  ? __sanitizer_cov_trace_const_cmp8+0x1c/0x30
[   18.383408]  iommufd_fops_ioctl+0x377/0x510
[   18.383570]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   18.383750]  ? trace_hardirqs_on+0x26/0x120
[   18.383914]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   18.384148]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   18.384337]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   18.384540]  ? security_file_ioctl+0x9d/0xd0
[   18.384708]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   18.384887]  __x64_sys_ioctl+0x1b9/0x230
[   18.385039]  do_syscall_64+0x3c/0x90
[   18.385178]  entry_SYSCALL_64_after_hwframe+0x6e/0xd8
[   18.385369] RIP: 0033:0x7f103fa3ee5d
[   18.385507] Code: ff c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d 93 af 1b 00 f7 d8 64 89 01 48
[   18.386171] RSP: 002b:00007ffffea1f778 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   18.386448] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f103fa3ee5d
[   18.386708] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   18.386970] RBP: 00007ffffea1f790 R08: 0000000000000800 R09: 0000000000000800
[   18.387229] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffffea1f8a8
[   18.387488] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f103fd0e000
[   18.387753]  </TASK>
[   18.387839] Modules linked in:
[   18.388063] ---[ end trace 0000000000000000 ]---
[   18.388310] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   18.388525] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   18.389188] RSP: 0018:ffff88802457fba8 EFLAGS: 00010206
[   18.389382] RAX: dffffc0000000000 RBX: ffff888014f9b000 RCX: 0000000000000000
[   18.389642] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   18.389901] RBP: ffff88802457fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   18.390160] R10: ffff88800aad88df R11: 0000000000000001 R12: 0000000000000000
[   18.390494] R13: ffffffff85cc0180 R14: ffff8880109b6ac0 R15: ffffffff87070ae0
[   18.390777] FS:  00007f103fccd600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   18.391121] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   18.391334] CR2: 0000000020000080 CR3: 0000000018bcc000 CR4: 0000000000750ef0
[   18.391663] PKRU: 55555554
[   18.392036] ------------[ cut here ]------------
[   18.392229] WARNING: CPU: 0 PID: 839 at drivers/iommu/iommufd/main.c:258 iommufd_fops_release+0x2a3/0x300
[   18.392628] Modules linked in:
[   18.392752] CPU: 0 PID: 839 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   18.393125] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   18.393597] RIP: 0010:iommufd_fops_release+0x2a3/0x300
[   18.393792] Code: 45 d0 65 48 2b 04 25 28 00 00 00 75 54 48 81 c4 88 00 00 00 31 c0 5b 41 5c 41 5d 41 5e 41 5f 5d c3 cc cc cc cc e8 ad 4f 0a fe <0f> 0b eb a6 e8 74 23 67 fe e9 f6 fe ff ff 48 89 85 50 ff ff ff e8
[   18.394511] RSP: 0018:ffff888014cbfc00 EFLAGS: 00010293
[   18.394716] RAX: 0000000000000000 RBX: ffff88800fe06908 RCX: 0000000000000000
[   18.394980] RDX: ffff888016492500 RSI: ffffffff835563e3 RDI: ffffffff86702b40
[   18.395301] RBP: ffff888014cbfcb0 R08: 0000000000000000 R09: fffffbfff0eb2644
[   18.395560] R10: ffffffff87593227 R11: ffff8880189ee000 R12: 0000000000000000
[   18.395877] R13: ffff88801242c918 R14: ffff888014cbfc48 R15: ffffffff83556140
[   18.396137] FS:  0000000000000000(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   18.396435] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   18.396699] CR2: 0000000020000080 CR3: 000000000687e000 CR4: 0000000000750ef0
[   18.396959] PKRU: 55555554
[   18.397064] Call Trace:
[   18.397174]  <TASK>
[   18.397303]  ? show_regs+0x6e/0x80
[   18.397439]  ? __warn+0xef/0x340
[   18.397566]  ? report_bug+0x25e/0x4b0
[   18.397710]  ? iommufd_fops_release+0x2a3/0x300
[   18.397883]  ? report_bug+0x2cb/0x4b0
[   18.398028]  ? handle_bug+0x46/0x90
[   18.398164]  ? exc_invalid_op+0x1d/0x50
[   18.398312]  ? asm_exc_invalid_op+0x1f/0x30
[   18.398471]  ? __pfx_iommufd_fops_release+0x10/0x10
[   18.398666]  ? iommufd_fops_release+0x2a3/0x300
[   18.398843]  ? iommufd_fops_release+0x2a3/0x300
[   18.399018]  ? __pfx_iommufd_fops_release+0x10/0x10
[   18.399202]  ? rcu_is_watching+0x19/0xc0
[   18.399371]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   18.399624]  ? __pfx_iommufd_fops_release+0x10/0x10
[   18.399809]  __fput+0x424/0xaf0
[   18.399937]  ____fput+0x1f/0x30
[   18.400128]  task_work_run+0x19d/0x2b0
[   18.400275]  ? __pfx_task_work_run+0x10/0x10
[   18.400438]  ? __sanitizer_cov_trace_const_cmp1+0x1e/0x30
[   18.400640]  ? switch_task_namespaces+0xa9/0xe0
[   18.400815]  do_exit+0xac9/0x2790
[   18.400945]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   18.401240]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   18.401427]  ? __pfx_do_exit+0x10/0x10
[   18.401571]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   18.401782]  ? security_file_ioctl+0x9d/0xd0
[   18.402006]  make_task_dead+0x182/0x3c0
[   18.402155]  rewind_stack_and_make_dead+0x17/0x20
[   18.402335] RIP: 0033:0x7f103fa3ee5d
[   18.402484] Code: Unable to access opcode bytes at 0x7f103fa3ee33.
[   18.402773] RSP: 002b:00007ffffea1f778 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   18.403050] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f103fa3ee5d
[   18.403309] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   18.403582] RBP: 00007ffffea1f790 R08: 0000000000000800 R09: 0000000000000800
[   18.403879] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffffea1f8a8
[   18.404138] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f103fd0e000
[   18.404469]  </TASK>
[   18.404556] irq event stamp: 0
[   18.404672] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   18.404906] hardirqs last disabled at (0): [<ffffffff8122f2d1>] copy_process+0x1c51/0x7140
[   18.405265] softirqs last  enabled at (0): [<ffffffff8122f312>] copy_process+0x1c92/0x7140
[   18.405565] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   18.405854] ---[ end trace 0000000000000000 ]---
[   18.409288] iommufd_mock iommufd_mock120: Adding to iommu group 120
[   18.409618] iommufd_mock iommufd_mock120: Removing from iommu group 120
[   18.409878] general protection fault, probably for non-canonical address 0xdffffc0000000006: 0000 [#121] PREEMPT SMP KASAN NOPTI
[   18.410331] KASAN: null-ptr-deref in range [0x0000000000000030-0x0000000000000037]
[   18.410607] CPU: 0 PID: 840 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   18.410929] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   18.411335] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   18.411550] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   18.412206] RSP: 0018:ffff88800bacfba8 EFLAGS: 00010206
[   18.412399] RAX: dffffc0000000000 RBX: ffff8880167ff000 RCX: 0000000000000000
[   18.412657] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   18.412914] RBP: ffff88800bacfbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   18.413171] R10: ffff88800aad88df R11: 5f6466756d6d6f69 R12: 0000000000000000
[   18.413427] R13: ffffffff85cc0180 R14: ffff888024c35a20 R15: ffffffff87070ae0
[   18.413686] FS:  00007f9232289600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   18.413970] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   18.414177] CR2: 0000000020000080 CR3: 000000000fb58000 CR4: 0000000000750ef0
[   18.414430] PKRU: 55555554
[   18.414531] Call Trace:
[   18.414625]  <TASK>
[   18.414709]  ? show_regs+0x6e/0x80
[   18.414848]  ? die_addr+0x45/0xb0
[   18.414980]  ? exc_general_protection+0x159/0x250
[   18.415160]  ? asm_exc_general_protection+0x2b/0x30
[   18.415343]  ? sysfs_remove_link_from_group+0x21/0x90
[   18.415530]  ? sysfs_remove_link_from_group+0x37/0x90
[   18.415717]  ? sysfs_remove_link_from_group+0x21/0x90
[   18.415904]  iommu_device_unlink+0x85/0xd0
[   18.416058]  iommu_deinit_device+0x11f/0x4c0
[   18.416220]  __iommu_group_remove_device+0x26b/0x300
[   18.416406]  iommu_group_remove_device+0x8a/0xb0
[   18.416579]  iommufd_test+0x1f1a/0x2d10
[   18.416722]  ? __pfx_lock_release+0x10/0x10
[   18.416879]  ? __pfx_lock_acquire+0x10/0x10
[   18.417037]  ? __pfx_iommufd_test+0x10/0x10
[   18.417193]  ? __sanitizer_cov_trace_const_cmp8+0x1c/0x30
[   18.417393]  iommufd_fops_ioctl+0x377/0x510
[   18.417550]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   18.417725]  ? trace_hardirqs_on+0x26/0x120
[   18.417883]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   18.418112]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   18.418294]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   18.418491]  ? security_file_ioctl+0x9d/0xd0
[   18.418666]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   18.418849]  __x64_sys_ioctl+0x1b9/0x230
[   18.418997]  do_syscall_64+0x3c/0x90
[   18.419131]  entry_SYSCALL_64_after_hwframe+0x6e/0xd8
[   18.419316] RIP: 0033:0x7f923203ee5d
[   18.419450] Code: ff c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d 93 af 1b 00 f7 d8 64 89 01 48
[   18.420097] RSP: 002b:00007ffe583fc3a8 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   18.420499] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f923203ee5d
[   18.420755] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   18.421007] RBP: 00007ffe583fc3c0 R08: 0000000000000800 R09: 0000000000000800
[   18.421258] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffe583fc4d8
[   18.421510] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f92322ca000
[   18.421766]  </TASK>
[   18.421850] Modules linked in:
[   18.422036] ---[ end trace 0000000000000000 ]---
[   18.422208] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   18.422419] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   18.423114] RSP: 0018:ffff88802457fba8 EFLAGS: 00010206
[   18.423307] RAX: dffffc0000000000 RBX: ffff888014f9b000 RCX: 0000000000000000
[   18.423564] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   18.423825] RBP: ffff88802457fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   18.424076] R10: ffff88800aad88df R11: 0000000000000001 R12: 0000000000000000
[   18.424328] R13: ffffffff85cc0180 R14: ffff8880109b6ac0 R15: ffffffff87070ae0
[   18.424580] FS:  00007f9232289600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   18.424864] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   18.425069] CR2: 0000000020000080 CR3: 000000000fb58000 CR4: 0000000000750ef0
[   18.425322] PKRU: 55555554
[   18.425813] ------------[ cut here ]------------
[   18.425988] WARNING: CPU: 0 PID: 840 at drivers/iommu/iommufd/main.c:258 iommufd_fops_release+0x2a3/0x300
[   18.426335] Modules linked in:
[   18.426452] CPU: 0 PID: 840 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   18.426826] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   18.427244] RIP: 0010:iommufd_fops_release+0x2a3/0x300
[   18.427513] Code: 45 d0 65 48 2b 04 25 28 00 00 00 75 54 48 81 c4 88 00 00 00 31 c0 5b 41 5c 41 5d 41 5e 41 5f 5d c3 cc cc cc cc e8 ad 4f 0a fe <0f> 0b eb a6 e8 74 23 67 fe e9 f6 fe ff ff 48 89 85 50 ff ff ff e8
[   18.428233] RSP: 0018:ffff88800bacfc00 EFLAGS: 00010293
[   18.428427] RAX: 0000000000000000 RBX: ffff88800fe06d08 RCX: 0000000000000000
[   18.428684] RDX: ffff888010b50000 RSI: ffffffff835563e3 RDI: ffffffff86702b40
[   18.429006] RBP: ffff88800bacfcb0 R08: 0000000000000000 R09: fffffbfff0eb2644
[   18.429263] R10: ffffffff87593227 R11: ffff888010ff1200 R12: 0000000000000000
[   18.429534] R13: ffff88801317b318 R14: ffff88800bacfc48 R15: ffffffff83556140
[   18.429834] FS:  0000000000000000(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   18.430127] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   18.430402] CR2: 0000000020000080 CR3: 000000000687e000 CR4: 0000000000750ef0
[   18.430669] PKRU: 55555554
[   18.430777] Call Trace:
[   18.430870]  <TASK>
[   18.430952]  ? show_regs+0x6e/0x80
[   18.431086]  ? __warn+0xef/0x340
[   18.431213]  ? report_bug+0x25e/0x4b0
[   18.431416]  ? iommufd_fops_release+0x2a3/0x300
[   18.431589]  ? report_bug+0x2cb/0x4b0
[   18.431733]  ? handle_bug+0x46/0x90
[   18.431868]  ? exc_invalid_op+0x1d/0x50
[   18.432022]  ? asm_exc_invalid_op+0x1f/0x30
[   18.432234]  ? __pfx_iommufd_fops_release+0x10/0x10
[   18.432419]  ? iommufd_fops_release+0x2a3/0x300
[   18.432591]  ? iommufd_fops_release+0x2a3/0x300
[   18.432789]  ? __pfx_iommufd_fops_release+0x10/0x10
[   18.433002]  ? rcu_is_watching+0x19/0xc0
[   18.433153]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   18.433355]  ? __pfx_iommufd_fops_release+0x10/0x10
[   18.433598]  __fput+0x424/0xaf0
[   18.433727]  ____fput+0x1f/0x30
[   18.433851]  task_work_run+0x19d/0x2b0
[   18.433995]  ? __pfx_task_work_run+0x10/0x10
[   18.434180]  ? __sanitizer_cov_trace_const_cmp1+0x1e/0x30
[   18.434421]  ? switch_task_namespaces+0xa9/0xe0
[   18.434603]  do_exit+0xac9/0x2790
[   18.434732]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   18.434968]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   18.435154]  ? __pfx_do_exit+0x10/0x10
[   18.435303]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   18.435560]  ? security_file_ioctl+0x9d/0xd0
[   18.435726]  make_task_dead+0x182/0x3c0
[   18.435873]  rewind_stack_and_make_dead+0x17/0x20
[   18.436059] RIP: 0033:0x7f923203ee5d
[   18.436249] Code: Unable to access opcode bytes at 0x7f923203ee33.
[   18.436499] RSP: 002b:00007ffe583fc3a8 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   18.436778] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f923203ee5d
[   18.437090] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   18.437348] RBP: 00007ffe583fc3c0 R08: 0000000000000800 R09: 0000000000000800
[   18.437660] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffe583fc4d8
[   18.437918] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f92322ca000
[   18.438180]  </TASK>
[   18.438286] irq event stamp: 0
[   18.438446] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   18.438682] hardirqs last disabled at (0): [<ffffffff8122f2d1>] copy_process+0x1c51/0x7140
[   18.438984] softirqs last  enabled at (0): [<ffffffff8122f312>] copy_process+0x1c92/0x7140
[   18.439295] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   18.439572] ---[ end trace 0000000000000000 ]---
[   18.443070] iommufd_mock iommufd_mock121: Adding to iommu group 121
[   18.443391] iommufd_mock iommufd_mock121: Removing from iommu group 121
[   18.443651] general protection fault, probably for non-canonical address 0xdffffc0000000006: 0000 [#122] PREEMPT SMP KASAN NOPTI
[   18.444108] KASAN: null-ptr-deref in range [0x0000000000000030-0x0000000000000037]
[   18.444381] CPU: 0 PID: 841 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   18.444694] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   18.445099] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   18.445313] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   18.445969] RSP: 0018:ffff888014cbfba8 EFLAGS: 00010206
[   18.446162] RAX: dffffc0000000000 RBX: ffff8880167fc000 RCX: 0000000000000000
[   18.446419] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   18.446677] RBP: ffff888014cbfbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   18.446940] R10: ffff88800aad88df R11: 5f6466756d6d6f69 R12: 0000000000000000
[   18.447196] R13: ffffffff85cc0180 R14: ffff888024c350c0 R15: ffffffff87070ae0
[   18.447454] FS:  00007f643cb5e600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   18.447744] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   18.447954] CR2: 0000000020000080 CR3: 0000000018bcc000 CR4: 0000000000750ef0
[   18.448212] PKRU: 55555554
[   18.448315] Call Trace:
[   18.448408]  <TASK>
[   18.448491]  ? show_regs+0x6e/0x80
[   18.448627]  ? die_addr+0x45/0xb0
[   18.448760]  ? exc_general_protection+0x159/0x250
[   18.448943]  ? asm_exc_general_protection+0x2b/0x30
[   18.449130]  ? sysfs_remove_link_from_group+0x21/0x90
[   18.449320]  ? sysfs_remove_link_from_group+0x37/0x90
[   18.449510]  ? sysfs_remove_link_from_group+0x21/0x90
[   18.449700]  iommu_device_unlink+0x85/0xd0
[   18.449876]  iommu_deinit_device+0x11f/0x4c0
[   18.450043]  __iommu_group_remove_device+0x26b/0x300
[   18.450234]  iommu_group_remove_device+0x8a/0xb0
[   18.450410]  iommufd_test+0x1f1a/0x2d10
[   18.450556]  ? __pfx_lock_release+0x10/0x10
[   18.450716]  ? __pfx_lock_acquire+0x10/0x10
[   18.450878]  ? __pfx_iommufd_test+0x10/0x10
[   18.451038]  ? __sanitizer_cov_trace_const_cmp8+0x1c/0x30
[   18.451241]  iommufd_fops_ioctl+0x377/0x510
[   18.451402]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   18.451581]  ? trace_hardirqs_on+0x26/0x120
[   18.451743]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   18.451975]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   18.452162]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   18.452363]  ? security_file_ioctl+0x9d/0xd0
[   18.452529]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   18.452707]  __x64_sys_ioctl+0x1b9/0x230
[   18.452857]  do_syscall_64+0x3c/0x90
[   18.452994]  entry_SYSCALL_64_after_hwframe+0x6e/0xd8
[   18.453182] RIP: 0033:0x7f643c83ee5d
[   18.453319] Code: ff c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d 93 af 1b 00 f7 d8 64 89 01 48
[   18.453975] RSP: 002b:00007fffa46ac168 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   18.454249] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f643c83ee5d
[   18.454507] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   18.454766] RBP: 00007fffa46ac180 R08: 0000000000000800 R09: 0000000000000800
[   18.455024] R10: 0000000000000000 R11: 0000000000000213 R12: 00007fffa46ac298
[   18.455284] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f643cb9f000
[   18.455541]  </TASK>
[   18.455624] Modules linked in:
[   18.455907] ---[ end trace 0000000000000000 ]---
[   18.456081] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   18.456292] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   18.456947] RSP: 0018:ffff88802457fba8 EFLAGS: 00010206
[   18.457139] RAX: dffffc0000000000 RBX: ffff888014f9b000 RCX: 0000000000000000
[   18.457401] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   18.457728] RBP: ffff88802457fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   18.457985] R10: ffff88800aad88df R11: 0000000000000001 R12: 0000000000000000
[   18.458266] R13: ffffffff85cc0180 R14: ffff8880109b6ac0 R15: ffffffff87070ae0
[   18.458568] FS:  00007f643cb5e600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   18.458884] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   18.459093] CR2: 0000000020000080 CR3: 0000000018bcc000 CR4: 0000000000750ef0
[   18.459413] PKRU: 55555554
[   18.459785] ------------[ cut here ]------------
[   18.460028] WARNING: CPU: 0 PID: 841 at drivers/iommu/iommufd/main.c:258 iommufd_fops_release+0x2a3/0x300
[   18.460375] Modules linked in:
[   18.460493] CPU: 0 PID: 841 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   18.460872] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   18.461278] RIP: 0010:iommufd_fops_release+0x2a3/0x300
[   18.461530] Code: 45 d0 65 48 2b 04 25 28 00 00 00 75 54 48 81 c4 88 00 00 00 31 c0 5b 41 5c 41 5d 41 5e 41 5f 5d c3 cc cc cc cc e8 ad 4f 0a fe <0f> 0b eb a6 e8 74 23 67 fe e9 f6 fe ff ff 48 89 85 50 ff ff ff e8
[   18.462251] RSP: 0018:ffff888014cbfc00 EFLAGS: 00010293
[   18.462444] RAX: 0000000000000000 RBX: ffff88800fe06108 RCX: 0000000000000000
[   18.462825] RDX: ffff8880138b4a00 RSI: ffffffff835563e3 RDI: ffffffff86702b40
[   18.463083] RBP: ffff888014cbfcb0 R08: 0000000000000000 R09: fffffbfff0eb2644
[   18.463407] R10: ffffffff87593227 R11: ffff888011248400 R12: 0000000000000000
[   18.463664] R13: ffff888013511a98 R14: ffff888014cbfc48 R15: ffffffff83556140
[   18.463926] FS:  0000000000000000(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   18.464269] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   18.464480] CR2: 0000000020000080 CR3: 000000000687e000 CR4: 0000000000750ef0
[   18.464800] PKRU: 55555554
[   18.464903] Call Trace:
[   18.464997]  <TASK>
[   18.465079]  ? show_regs+0x6e/0x80
[   18.465213]  ? __warn+0xef/0x340
[   18.465340]  ? report_bug+0x25e/0x4b0
[   18.465548]  ? iommufd_fops_release+0x2a3/0x300
[   18.465721]  ? report_bug+0x2cb/0x4b0
[   18.465865]  ? handle_bug+0x46/0x90
[   18.466000]  ? exc_invalid_op+0x1d/0x50
[   18.466169]  ? asm_exc_invalid_op+0x1f/0x30
[   18.466368]  ? __pfx_iommufd_fops_release+0x10/0x10
[   18.466554]  ? iommufd_fops_release+0x2a3/0x300
[   18.466734]  ? iommufd_fops_release+0x2a3/0x300
[   18.466913]  ? __pfx_iommufd_fops_release+0x10/0x10
[   18.467096]  ? rcu_is_watching+0x19/0xc0
[   18.467317]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   18.467519]  ? __pfx_iommufd_fops_release+0x10/0x10
[   18.467702]  __fput+0x424/0xaf0
[   18.467829]  ____fput+0x1f/0x30
[   18.467979]  task_work_run+0x19d/0x2b0
[   18.468164]  ? __pfx_task_work_run+0x10/0x10
[   18.468327]  ? __sanitizer_cov_trace_const_cmp1+0x1e/0x30
[   18.468527]  ? switch_task_namespaces+0xa9/0xe0
[   18.468706]  do_exit+0xac9/0x2790
[   18.468889]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   18.469120]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   18.469304]  ? __pfx_do_exit+0x10/0x10
[   18.469513]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   18.469714]  ? security_file_ioctl+0x9d/0xd0
[   18.469879]  make_task_dead+0x182/0x3c0
[   18.470027]  rewind_stack_and_make_dead+0x17/0x20
[   18.470264] RIP: 0033:0x7f643c83ee5d
[   18.470401] Code: Unable to access opcode bytes at 0x7f643c83ee33.
[   18.470633] RSP: 002b:00007fffa46ac168 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   18.470910] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f643c83ee5d
[   18.471174] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   18.471487] RBP: 00007fffa46ac180 R08: 0000000000000800 R09: 0000000000000800
[   18.471745] R10: 0000000000000000 R11: 0000000000000213 R12: 00007fffa46ac298
[   18.472066] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f643cb9f000
[   18.472330]  </TASK>
[   18.472415] irq event stamp: 0
[   18.472531] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   18.472822] hardirqs last disabled at (0): [<ffffffff8122f2d1>] copy_process+0x1c51/0x7140
[   18.473121] softirqs last  enabled at (0): [<ffffffff8122f312>] copy_process+0x1c92/0x7140
[   18.473444] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   18.473704] ---[ end trace 0000000000000000 ]---
[   18.476137] iommufd_mock iommufd_mock122: Adding to iommu group 122
[   18.476394] iommufd_mock iommufd_mock122: Removing from iommu group 122
[   18.476656] general protection fault, probably for non-canonical address 0xdffffc0000000006: 0000 [#123] PREEMPT SMP KASAN NOPTI
[   18.477074] KASAN: null-ptr-deref in range [0x0000000000000030-0x0000000000000037]
[   18.477351] CPU: 1 PID: 842 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   18.477668] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   18.478079] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   18.478295] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   18.478967] RSP: 0018:ffff88800bacfba8 EFLAGS: 00010206
[   18.479164] RAX: dffffc0000000000 RBX: ffff888014b62000 RCX: 0000000000000000
[   18.479425] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   18.479686] RBP: ffff88800bacfbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   18.479948] R10: ffff88800aad88df R11: 5f6466756d6d6f69 R12: 0000000000000000
[   18.480209] R13: ffffffff85cc0180 R14: ffff88801679aa00 R15: ffffffff87070ae0
[   18.480471] FS:  00007fce62dbb600(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
[   18.480765] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   18.480979] CR2: 0000000020000080 CR3: 000000002031e000 CR4: 0000000000750ee0
[   18.481241] PKRU: 55555554
[   18.481346] Call Trace:
[   18.481441]  <TASK>
[   18.481525]  ? show_regs+0x6e/0x80
[   18.481662]  ? die_addr+0x45/0xb0
[   18.481797]  ? exc_general_protection+0x159/0x250
[   18.481983]  ? asm_exc_general_protection+0x2b/0x30
[   18.482172]  ? sysfs_remove_link_from_group+0x21/0x90
[   18.482366]  ? sysfs_remove_link_from_group+0x37/0x90
[   18.482559]  ? sysfs_remove_link_from_group+0x21/0x90
[   18.482758]  iommu_device_unlink+0x85/0xd0
[   18.482929]  iommu_deinit_device+0x11f/0x4c0
[   18.483099]  __iommu_group_remove_device+0x26b/0x300
[   18.483292]  iommu_group_remove_device+0x8a/0xb0
[   18.483471]  iommufd_test+0x1f1a/0x2d10
[   18.483621]  ? __pfx_lock_release+0x10/0x10
[   18.483783]  ? __pfx_lock_acquire+0x10/0x10
[   18.483946]  ? __pfx_iommufd_test+0x10/0x10
[   18.484109]  ? __sanitizer_cov_trace_const_cmp8+0x1c/0x30
[   18.484316]  iommufd_fops_ioctl+0x377/0x510
[   18.484479]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   18.484660]  ? trace_hardirqs_on+0x26/0x120
[   18.484824]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   18.485060]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   18.485250]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   18.485454]  ? security_file_ioctl+0x9d/0xd0
[   18.485622]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   18.485804]  __x64_sys_ioctl+0x1b9/0x230
[   18.485957]  do_syscall_64+0x3c/0x90
[   18.486096]  entry_SYSCALL_64_after_hwframe+0x6e/0xd8
[   18.486288] RIP: 0033:0x7fce62a3ee5d
[   18.486426] Code: ff c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d 93 af 1b 00 f7 d8 64 89 01 48
[   18.487095] RSP: 002b:00007ffc57886e08 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   18.487375] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007fce62a3ee5d
[   18.487637] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   18.487897] RBP: 00007ffc57886e20 R08: 0000000000000800 R09: 0000000000000800
[   18.488158] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffc57886f38
[   18.488420] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007fce62dfc000
[   18.488686]  </TASK>
[   18.488773] Modules linked in:
[   18.489054] ---[ end trace 0000000000000000 ]---
[   18.489229] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   18.489445] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   18.490112] RSP: 0018:ffff88802457fba8 EFLAGS: 00010206
[   18.490308] RAX: dffffc0000000000 RBX: ffff888014f9b000 RCX: 0000000000000000
[   18.490570] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   18.490856] RBP: ffff88802457fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   18.491119] R10: ffff88800aad88df R11: 0000000000000001 R12: 0000000000000000
[   18.491380] R13: ffffffff85cc0180 R14: ffff8880109b6ac0 R15: ffffffff87070ae0
[   18.491641] FS:  00007fce62dbb600(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
[   18.491936] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   18.492150] CR2: 0000000020000080 CR3: 000000002031e000 CR4: 0000000000750ee0
[   18.492413] PKRU: 55555554
[   18.492788] ------------[ cut here ]------------
[   18.492962] WARNING: CPU: 1 PID: 842 at drivers/iommu/iommufd/main.c:258 iommufd_fops_release+0x2a3/0x300
[   18.493314] Modules linked in:
[   18.493433] CPU: 1 PID: 842 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   18.493751] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   18.494163] RIP: 0010:iommufd_fops_release+0x2a3/0x300
[   18.494359] Code: 45 d0 65 48 2b 04 25 28 00 00 00 75 54 48 81 c4 88 00 00 00 31 c0 5b 41 5c 41 5d 41 5e 41 5f 5d c3 cc cc cc cc e8 ad 4f 0a fe <0f> 0b eb a6 e8 74 23 67 fe e9 f6 fe ff ff 48 89 85 50 ff ff ff e8
[   18.495073] RSP: 0018:ffff88800bacfc00 EFLAGS: 00010293
[   18.495270] RAX: 0000000000000000 RBX: ffff88801248a308 RCX: 0000000000000000
[   18.495531] RDX: ffff88801734a500 RSI: ffffffff835563e3 RDI: ffffffff86702b48
[   18.495793] RBP: ffff88800bacfcb0 R08: 0000000000000000 R09: fffffbfff0eb2644
[   18.496055] R10: ffffffff87593227 R11: ffff88800f431800 R12: 0000000000000000
[   18.496317] R13: ffff888013a53098 R14: ffff88800bacfc48 R15: ffffffff83556140
[   18.496578] FS:  0000000000000000(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
[   18.496873] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   18.497087] CR2: 0000000020000080 CR3: 000000000687e000 CR4: 0000000000750ee0
[   18.497349] PKRU: 55555554
[   18.497454] Call Trace:
[   18.497549]  <TASK>
[   18.497633]  ? show_regs+0x6e/0x80
[   18.497769]  ? __warn+0xef/0x340
[   18.497898]  ? report_bug+0x25e/0x4b0
[   18.498042]  ? iommufd_fops_release+0x2a3/0x300
[   18.498216]  ? report_bug+0x2cb/0x4b0
[   18.498362]  ? handle_bug+0x46/0x90
[   18.498499]  ? exc_invalid_op+0x1d/0x50
[   18.498655]  ? asm_exc_invalid_op+0x1f/0x30
[   18.498816]  ? __pfx_iommufd_fops_release+0x10/0x10
[   18.499005]  ? iommufd_fops_release+0x2a3/0x300
[   18.499180]  ? iommufd_fops_release+0x2a3/0x300
[   18.499356]  ? __pfx_iommufd_fops_release+0x10/0x10
[   18.499542]  ? rcu_is_watching+0x19/0xc0
[   18.499695]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   18.499900]  ? __pfx_iommufd_fops_release+0x10/0x10
[   18.500085]  __fput+0x424/0xaf0
[   18.500215]  ____fput+0x1f/0x30
[   18.500341]  task_work_run+0x19d/0x2b0
[   18.500488]  ? __pfx_task_work_run+0x10/0x10
[   18.500653]  ? __sanitizer_cov_trace_const_cmp1+0x1e/0x30
[   18.500856]  ? switch_task_namespaces+0xa9/0xe0
[   18.501032]  do_exit+0xac9/0x2790
[   18.501164]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   18.501398]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   18.501586]  ? __pfx_do_exit+0x10/0x10
[   18.501732]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   18.501935]  ? security_file_ioctl+0x9d/0xd0
[   18.502103]  make_task_dead+0x182/0x3c0
[   18.502253]  rewind_stack_and_make_dead+0x17/0x20
[   18.502434] RIP: 0033:0x7fce62a3ee5d
[   18.502572] Code: Unable to access opcode bytes at 0x7fce62a3ee33.
[   18.502809] RSP: 002b:00007ffc57886e08 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   18.503087] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007fce62a3ee5d
[   18.503347] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   18.503608] RBP: 00007ffc57886e20 R08: 0000000000000800 R09: 0000000000000800
[   18.503868] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffc57886f38
[   18.504129] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007fce62dfc000
[   18.504395]  </TASK>
[   18.504482] irq event stamp: 0
[   18.504599] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   18.504830] hardirqs last disabled at (0): [<ffffffff8122f2d1>] copy_process+0x1c51/0x7140
[   18.505132] softirqs last  enabled at (0): [<ffffffff8122f312>] copy_process+0x1c92/0x7140
[   18.505435] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   18.505665] ---[ end trace 0000000000000000 ]---
[   18.508048] iommufd_mock iommufd_mock123: Adding to iommu group 123
[   18.508307] iommufd_mock iommufd_mock123: Removing from iommu group 123
[   18.508569] general protection fault, probably for non-canonical address 0xdffffc0000000006: 0000 [#124] PREEMPT SMP KASAN NOPTI
[   18.508987] KASAN: null-ptr-deref in range [0x0000000000000030-0x0000000000000037]
[   18.509263] CPU: 1 PID: 843 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   18.509582] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   18.509993] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   18.510210] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   18.510877] RSP: 0018:ffff888017217ba8 EFLAGS: 00010206
[   18.511070] RAX: dffffc0000000000 RBX: ffff888014b60000 RCX: 0000000000000000
[   18.511325] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   18.511581] RBP: ffff888017217bc0 R08: 0000000000000001 R09: ffffed100155b11b
[   18.511837] R10: ffff88800aad88df R11: 5f6466756d6d6f69 R12: 0000000000000000
[   18.512092] R13: ffffffff85cc0180 R14: ffff88801679aaa0 R15: ffffffff87070ae0
[   18.512349] FS:  00007f0b490b9600(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
[   18.512637] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   18.512847] CR2: 0000000020000080 CR3: 000000002031e000 CR4: 0000000000750ee0
[   18.513104] PKRU: 55555554
[   18.513207] Call Trace:
[   18.513300]  <TASK>
[   18.513382]  ? show_regs+0x6e/0x80
[   18.513517]  ? die_addr+0x45/0xb0
[   18.513649]  ? exc_general_protection+0x159/0x250
[   18.513832]  ? asm_exc_general_protection+0x2b/0x30
[   18.514017]  ? sysfs_remove_link_from_group+0x21/0x90
[   18.514207]  ? sysfs_remove_link_from_group+0x37/0x90
[   18.514397]  ? sysfs_remove_link_from_group+0x21/0x90
[   18.514585]  iommu_device_unlink+0x85/0xd0
[   18.514743]  iommu_deinit_device+0x11f/0x4c0
[   18.514916]  __iommu_group_remove_device+0x26b/0x300
[   18.515105]  iommu_group_remove_device+0x8a/0xb0
[   18.515280]  iommufd_test+0x1f1a/0x2d10
[   18.515424]  ? __pfx_lock_release+0x10/0x10
[   18.515583]  ? __pfx_lock_acquire+0x10/0x10
[   18.515743]  ? __pfx_iommufd_test+0x10/0x10
[   18.515902]  ? __sanitizer_cov_trace_const_cmp8+0x1c/0x30
[   18.516104]  iommufd_fops_ioctl+0x377/0x510
[   18.516264]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   18.516441]  ? trace_hardirqs_on+0x26/0x120
[   18.516602]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   18.516833]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   18.517018]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   18.517219]  ? security_file_ioctl+0x9d/0xd0
[   18.517383]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   18.517561]  __x64_sys_ioctl+0x1b9/0x230
[   18.517710]  do_syscall_64+0x3c/0x90
[   18.517847]  entry_SYSCALL_64_after_hwframe+0x6e/0xd8
[   18.518035] RIP: 0033:0x7f0b48e3ee5d
[   18.518170] Code: ff c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d 93 af 1b 00 f7 d8 64 89 01 48
[   18.518825] RSP: 002b:00007ffe03c91868 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   18.519097] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f0b48e3ee5d
[   18.519353] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   18.519609] RBP: 00007ffe03c91880 R08: 0000000000000800 R09: 0000000000000800
[   18.519865] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffe03c91998
[   18.520122] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f0b490fa000
[   18.520383]  </TASK>
[   18.520468] Modules linked in:
[   18.520739] ---[ end trace 0000000000000000 ]---
[   18.520910] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   18.521121] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   18.521775] RSP: 0018:ffff88802457fba8 EFLAGS: 00010206
[   18.521966] RAX: dffffc0000000000 RBX: ffff888014f9b000 RCX: 0000000000000000
[   18.522222] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   18.522477] RBP: ffff88802457fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   18.522767] R10: ffff88800aad88df R11: 0000000000000001 R12: 0000000000000000
[   18.523020] R13: ffffffff85cc0180 R14: ffff8880109b6ac0 R15: ffffffff87070ae0
[   18.523272] FS:  00007f0b490b9600(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
[   18.523557] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   18.523763] CR2: 0000000020000080 CR3: 000000002031e000 CR4: 0000000000750ee0
[   18.524015] PKRU: 55555554
[   18.524413] ------------[ cut here ]------------
[   18.524585] WARNING: CPU: 1 PID: 843 at drivers/iommu/iommufd/main.c:258 iommufd_fops_release+0x2a3/0x300
[   18.524929] Modules linked in:
[   18.525045] CPU: 1 PID: 843 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   18.525356] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   18.525758] RIP: 0010:iommufd_fops_release+0x2a3/0x300
[   18.525949] Code: 45 d0 65 48 2b 04 25 28 00 00 00 75 54 48 81 c4 88 00 00 00 31 c0 5b 41 5c 41 5d 41 5e 41 5f 5d c3 cc cc cc cc e8 ad 4f 0a fe <0f> 0b eb a6 e8 74 23 67 fe e9 f6 fe ff ff 48 89 85 50 ff ff ff e8
[   18.526629] RSP: 0018:ffff888017217c00 EFLAGS: 00010293
[   18.526827] RAX: 0000000000000000 RBX: ffff88801248ab08 RCX: 0000000000000000
[   18.527084] RDX: ffff88800f780000 RSI: ffffffff835563e3 RDI: ffffffff86702b48
[   18.527341] RBP: ffff888017217cb0 R08: 0000000000000000 R09: fffffbfff0eb2644
[   18.527597] R10: ffffffff87593227 R11: ffff888013a0de00 R12: 0000000000000000
[   18.527854] R13: ffff888013a53a98 R14: ffff888017217c48 R15: ffffffff83556140
[   18.528111] FS:  0000000000000000(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
[   18.528400] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   18.528610] CR2: 0000000020000080 CR3: 000000000687e000 CR4: 0000000000750ee0
[   18.528868] PKRU: 55555554
[   18.528971] Call Trace:
[   18.529064]  <TASK>
[   18.529147]  ? show_regs+0x6e/0x80
[   18.529280]  ? __warn+0xef/0x340
[   18.529407]  ? report_bug+0x25e/0x4b0
[   18.529549]  ? iommufd_fops_release+0x2a3/0x300
[   18.529720]  ? report_bug+0x2cb/0x4b0
[   18.529866]  ? handle_bug+0x46/0x90
[   18.530004]  ? exc_invalid_op+0x1d/0x50
[   18.530150]  ? asm_exc_invalid_op+0x1f/0x30
[   18.530307]  ? __pfx_iommufd_fops_release+0x10/0x10
[   18.530492]  ? iommufd_fops_release+0x2a3/0x300
[   18.530671]  ? iommufd_fops_release+0x2a3/0x300
[   18.530848]  ? __pfx_iommufd_fops_release+0x10/0x10
[   18.531031]  ? rcu_is_watching+0x19/0xc0
[   18.531183]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   18.531384]  ? __pfx_iommufd_fops_release+0x10/0x10
[   18.531567]  __fput+0x424/0xaf0
[   18.531695]  ____fput+0x1f/0x30
[   18.531819]  task_work_run+0x19d/0x2b0
[   18.531963]  ? __pfx_task_work_run+0x10/0x10
[   18.532125]  ? __sanitizer_cov_trace_const_cmp1+0x1e/0x30
[   18.532325]  ? switch_task_namespaces+0xa9/0xe0
[   18.532498]  do_exit+0xac9/0x2790
[   18.532628]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   18.532858]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   18.533042]  ? __pfx_do_exit+0x10/0x10
[   18.533185]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   18.533385]  ? security_file_ioctl+0x9d/0xd0
[   18.533550]  make_task_dead+0x182/0x3c0
[   18.533697]  rewind_stack_and_make_dead+0x17/0x20
[   18.533876] RIP: 0033:0x7f0b48e3ee5d
[   18.534011] Code: Unable to access opcode bytes at 0x7f0b48e3ee33.
[   18.534233] RSP: 002b:00007ffe03c91868 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   18.534507] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f0b48e3ee5d
[   18.534778] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   18.535036] RBP: 00007ffe03c91880 R08: 0000000000000800 R09: 0000000000000800
[   18.535293] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffe03c91998
[   18.535549] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f0b490fa000
[   18.535811]  </TASK>
[   18.535896] irq event stamp: 0
[   18.536011] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   18.536239] hardirqs last disabled at (0): [<ffffffff8122f2d1>] copy_process+0x1c51/0x7140
[   18.536539] softirqs last  enabled at (0): [<ffffffff8122f312>] copy_process+0x1c92/0x7140
[   18.536839] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   18.537065] ---[ end trace 0000000000000000 ]---
[   18.539467] iommufd_mock iommufd_mock124: Adding to iommu group 124
[   18.539721] iommufd_mock iommufd_mock124: Removing from iommu group 124
[   18.539977] general protection fault, probably for non-canonical address 0xdffffc0000000006: 0000 [#125] PREEMPT SMP KASAN NOPTI
[   18.540389] KASAN: null-ptr-deref in range [0x0000000000000030-0x0000000000000037]
[   18.540662] CPU: 1 PID: 844 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   18.540976] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   18.541380] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   18.541592] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   18.542245] RSP: 0018:ffff88801025fba8 EFLAGS: 00010206
[   18.542437] RAX: dffffc0000000000 RBX: ffff888014b66000 RCX: 0000000000000000
[   18.542694] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   18.542956] RBP: ffff88801025fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   18.543211] R10: ffff88800aad88df R11: 5f6466756d6d6f69 R12: 0000000000000000
[   18.543467] R13: ffffffff85cc0180 R14: ffff88801679ad20 R15: ffffffff87070ae0
[   18.543722] FS:  00007f093ffb9600(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
[   18.544011] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   18.544220] CR2: 0000000020000080 CR3: 000000002031e000 CR4: 0000000000750ee0
[   18.544475] PKRU: 55555554
[   18.544578] Call Trace:
[   18.544671]  <TASK>
[   18.544753]  ? show_regs+0x6e/0x80
[   18.544888]  ? die_addr+0x45/0xb0
[   18.545020]  ? exc_general_protection+0x159/0x250
[   18.545202]  ? asm_exc_general_protection+0x2b/0x30
[   18.545386]  ? sysfs_remove_link_from_group+0x21/0x90
[   18.545575]  ? sysfs_remove_link_from_group+0x37/0x90
[   18.545764]  ? sysfs_remove_link_from_group+0x21/0x90
[   18.545953]  iommu_device_unlink+0x85/0xd0
[   18.546109]  iommu_deinit_device+0x11f/0x4c0
[   18.546273]  __iommu_group_remove_device+0x26b/0x300
[   18.546462]  iommu_group_remove_device+0x8a/0xb0
[   18.546636]  iommufd_test+0x1f1a/0x2d10
[   18.546790]  ? __pfx_lock_release+0x10/0x10
[   18.546949]  ? __pfx_lock_acquire+0x10/0x10
[   18.547109]  ? __pfx_iommufd_test+0x10/0x10
[   18.547267]  ? __sanitizer_cov_trace_const_cmp8+0x1c/0x30
[   18.547470]  iommufd_fops_ioctl+0x377/0x510
[   18.547629]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   18.547806]  ? trace_hardirqs_on+0x26/0x120
[   18.547967]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   18.548199]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   18.548384]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   18.548585]  ? security_file_ioctl+0x9d/0xd0
[   18.548749]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   18.548926]  __x64_sys_ioctl+0x1b9/0x230
[   18.549076]  do_syscall_64+0x3c/0x90
[   18.549212]  entry_SYSCALL_64_after_hwframe+0x6e/0xd8
[   18.549399] RIP: 0033:0x7f093fc3ee5d
[   18.549535] Code: ff c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d 93 af 1b 00 f7 d8 64 89 01 48
[   18.550193] RSP: 002b:00007fff1a480138 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   18.550465] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f093fc3ee5d
[   18.550721] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   18.550978] RBP: 00007fff1a480150 R08: 0000000000000800 R09: 0000000000000800
[   18.551233] R10: 0000000000000000 R11: 0000000000000213 R12: 00007fff1a480268
[   18.551488] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f093fffa000
[   18.551748]  </TASK>
[   18.551833] Modules linked in:
[   18.552030] ---[ end trace 0000000000000000 ]---
[   18.552201] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   18.552410] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   18.553063] RSP: 0018:ffff88802457fba8 EFLAGS: 00010206
[   18.553254] RAX: dffffc0000000000 RBX: ffff888014f9b000 RCX: 0000000000000000
[   18.553510] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   18.553768] RBP: ffff88802457fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   18.554059] R10: ffff88800aad88df R11: 0000000000000001 R12: 0000000000000000
[   18.554354] R13: ffffffff85cc0180 R14: ffff8880109b6ac0 R15: ffffffff87070ae0
[   18.554620] FS:  00007f093ffb9600(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
[   18.554967] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   18.555177] CR2: 0000000020000080 CR3: 000000002031e000 CR4: 0000000000750ee0
[   18.555434] PKRU: 55555554
[   18.556003] ------------[ cut here ]------------
[   18.556214] WARNING: CPU: 1 PID: 844 at drivers/iommu/iommufd/main.c:258 iommufd_fops_release+0x2a3/0x300
[   18.556602] Modules linked in:
[   18.556719] CPU: 1 PID: 844 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   18.557085] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   18.557509] RIP: 0010:iommufd_fops_release+0x2a3/0x300
[   18.557724] Code: 45 d0 65 48 2b 04 25 28 00 00 00 75 54 48 81 c4 88 00 00 00 31 c0 5b 41 5c 41 5d 41 5e 41 5f 5d c3 cc cc cc cc e8 ad 4f 0a fe <0f> 0b eb a6 e8 74 23 67 fe e9 f6 fe ff ff 48 89 85 50 ff ff ff e8
[   18.558423] RSP: 0018:ffff88801025fc00 EFLAGS: 00010293
[   18.558632] RAX: 0000000000000000 RBX: ffff88801248a808 RCX: 0000000000000000
[   18.558938] RDX: ffff888011e84a00 RSI: ffffffff835563e3 RDI: ffffffff86702b48
[   18.559199] RBP: ffff88801025fcb0 R08: 0000000000000000 R09: fffffbfff0eb2644
[   18.559461] R10: ffffffff87593227 R11: 0000000000000000 R12: 0000000000000000
[   18.559765] R13: ffff88801362a698 R14: ffff88801025fc48 R15: ffffffff83556140
[   18.560026] FS:  0000000000000000(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
[   18.560365] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   18.560578] CR2: 0000000020000080 CR3: 00000000133d2000 CR4: 0000000000750ee0
[   18.560882] PKRU: 55555554
[   18.560985] Call Trace:
[   18.561079]  <TASK>
[   18.561162]  ? show_regs+0x6e/0x80
[   18.561295]  ? __warn+0xef/0x340
[   18.561440]  ? report_bug+0x25e/0x4b0
[   18.561607]  ? iommufd_fops_release+0x2a3/0x300
[   18.561778]  ? report_bug+0x2cb/0x4b0
[   18.561929]  ? handle_bug+0x46/0x90
[   18.562093]  ? exc_invalid_op+0x1d/0x50
[   18.562243]  ? asm_exc_invalid_op+0x1f/0x30
[   18.562399]  ? __pfx_iommufd_fops_release+0x10/0x10
[   18.562646]  ? iommufd_fops_release+0x2a3/0x300
[   18.562827]  ? iommufd_fops_release+0x2a3/0x300
[   18.563000]  ? __pfx_iommufd_fops_release+0x10/0x10
[   18.563183]  ? rcu_is_watching+0x19/0xc0
[   18.563334]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   18.563549]  ? __pfx_iommufd_fops_release+0x10/0x10
[   18.563766]  __fput+0x424/0xaf0
[   18.563893]  ____fput+0x1f/0x30
[   18.564016]  task_work_run+0x19d/0x2b0
[   18.564168]  ? __pfx_task_work_run+0x10/0x10
[   18.564359]  ? __sanitizer_cov_trace_const_cmp1+0x1e/0x30
[   18.564562]  ? switch_task_namespaces+0xa9/0xe0
[   18.564745]  do_exit+0xac9/0x2790
[   18.564914]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   18.565149]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   18.565349]  ? __pfx_do_exit+0x10/0x10
[   18.565519]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   18.565722]  ? security_file_ioctl+0x9d/0xd0
[   18.565894]  make_task_dead+0x182/0x3c0
[   18.566081]  rewind_stack_and_make_dead+0x17/0x20
[   18.566261] RIP: 0033:0x7f093fc3ee5d
[   18.566399] Code: Unable to access opcode bytes at 0x7f093fc3ee33.
[   18.566689] RSP: 002b:00007fff1a480138 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   18.566965] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f093fc3ee5d
[   18.567222] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   18.567484] RBP: 00007fff1a480150 R08: 0000000000000800 R09: 0000000000000800
[   18.567779] R10: 0000000000000000 R11: 0000000000000213 R12: 00007fff1a480268
[   18.568036] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f093fffa000
[   18.568341]  </TASK>
[   18.568427] irq event stamp: 0
[   18.568542] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   18.568814] hardirqs last disabled at (0): [<ffffffff8122f2d1>] copy_process+0x1c51/0x7140
[   18.569112] softirqs last  enabled at (0): [<ffffffff8122f312>] copy_process+0x1c92/0x7140
[   18.569447] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   18.569674] ---[ end trace 0000000000000000 ]---
[   18.573523] iommufd_mock iommufd_mock125: Adding to iommu group 125
[   18.573828] iommufd_mock iommufd_mock125: Removing from iommu group 125
[   18.574098] general protection fault, probably for non-canonical address 0xdffffc0000000006: 0000 [#126] PREEMPT SMP KASAN NOPTI
[   18.574519] KASAN: null-ptr-deref in range [0x0000000000000030-0x0000000000000037]
[   18.574826] CPU: 1 PID: 845 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   18.575154] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   18.575617] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   18.575836] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   18.576548] RSP: 0018:ffff888017217ba8 EFLAGS: 00010206
[   18.576788] RAX: dffffc0000000000 RBX: ffff888014b65000 RCX: 0000000000000000
[   18.577050] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   18.577348] RBP: ffff888017217bc0 R08: 0000000000000001 R09: ffffed100155b11b
[   18.577610] R10: ffff88800aad88df R11: ffff88806ca45a00 R12: 0000000000000000
[   18.577891] R13: ffffffff85cc0180 R14: ffff88801679a9a0 R15: ffffffff87070ae0
[   18.578172] FS:  00007fddb48eb600(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
[   18.578486] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   18.578710] CR2: 0000000020000080 CR3: 0000000012372000 CR4: 0000000000750ee0
[   18.578984] PKRU: 55555554
[   18.579124] Call Trace:
[   18.579220]  <TASK>
[   18.579304]  ? show_regs+0x6e/0x80
[   18.579442]  ? die_addr+0x45/0xb0
[   18.579584]  ? exc_general_protection+0x159/0x250
[   18.579804]  ? asm_exc_general_protection+0x2b/0x30
[   18.579993]  ? sysfs_remove_link_from_group+0x21/0x90
[   18.580191]  ? sysfs_remove_link_from_group+0x37/0x90
[   18.580423]  ? sysfs_remove_link_from_group+0x21/0x90
[   18.580616]  iommu_device_unlink+0x85/0xd0
[   18.580780]  iommu_deinit_device+0x11f/0x4c0
[   18.580988]  __iommu_group_remove_device+0x26b/0x300
[   18.581176]  iommu_group_remove_device+0x8a/0xb0
[   18.581352]  iommufd_test+0x1f1a/0x2d10
[   18.581501]  ? __pfx_lock_release+0x10/0x10
[   18.581663]  ? __pfx_lock_acquire+0x10/0x10
[   18.581827]  ? __pfx_iommufd_test+0x10/0x10
[   18.581990]  ? __sanitizer_cov_trace_const_cmp8+0x1c/0x30
[   18.582197]  iommufd_fops_ioctl+0x377/0x510
[   18.582361]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   18.582543]  ? trace_hardirqs_on+0x26/0x120
[   18.582708]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   18.582950]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   18.583140]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   18.583345]  ? security_file_ioctl+0x9d/0xd0
[   18.583514]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   18.583696]  __x64_sys_ioctl+0x1b9/0x230
[   18.583849]  do_syscall_64+0x3c/0x90
[   18.583988]  entry_SYSCALL_64_after_hwframe+0x6e/0xd8
[   18.584181] RIP: 0033:0x7fddb463ee5d
[   18.584320] Code: ff c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d 93 af 1b 00 f7 d8 64 89 01 48
[   18.584990] RSP: 002b:00007ffec1f7d318 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   18.585270] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007fddb463ee5d
[   18.585534] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   18.585796] RBP: 00007ffec1f7d330 R08: 0000000000000800 R09: 0000000000000800
[   18.586059] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffec1f7d448
[   18.586321] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007fddb492c000
[   18.586589]  </TASK>
[   18.586677] Modules linked in:
[   18.586844] ---[ end trace 0000000000000000 ]---
[   18.587020] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   18.587235] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   18.587904] RSP: 0018:ffff88802457fba8 EFLAGS: 00010206
[   18.588100] RAX: dffffc0000000000 RBX: ffff888014f9b000 RCX: 0000000000000000
[   18.588362] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   18.588624] RBP: ffff88802457fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   18.588886] R10: ffff88800aad88df R11: 0000000000000001 R12: 0000000000000000
[   18.589148] R13: ffffffff85cc0180 R14: ffff8880109b6ac0 R15: ffffffff87070ae0
[   18.589410] FS:  00007fddb48eb600(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
[   18.589705] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   18.589920] CR2: 0000000020000080 CR3: 0000000012372000 CR4: 0000000000750ee0
[   18.590182] PKRU: 55555554
[   18.590554] ------------[ cut here ]------------
[   18.590744] WARNING: CPU: 1 PID: 845 at drivers/iommu/iommufd/main.c:258 iommufd_fops_release+0x2a3/0x300
[   18.591105] Modules linked in:
[   18.591224] CPU: 1 PID: 845 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   18.591542] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   18.591954] RIP: 0010:iommufd_fops_release+0x2a3/0x300
[   18.592149] Code: 45 d0 65 48 2b 04 25 28 00 00 00 75 54 48 81 c4 88 00 00 00 31 c0 5b 41 5c 41 5d 41 5e 41 5f 5d c3 cc cc cc cc e8 ad 4f 0a fe <0f> 0b eb a6 e8 74 23 67 fe e9 f6 fe ff ff 48 89 85 50 ff ff ff e8
[   18.592817] RSP: 0018:ffff888017217c00 EFLAGS: 00010293
[   18.593013] RAX: 0000000000000000 RBX: ffff88801248ac08 RCX: 0000000000000000
[   18.593275] RDX: ffff88801388a500 RSI: ffffffff835563e3 RDI: ffffffff86702b48
[   18.593537] RBP: ffff888017217cb0 R08: 0000000000000000 R09: fffffbfff0eb2644
[   18.593799] R10: ffffffff87593227 R11: ffff88801313d000 R12: 0000000000000000
[   18.594060] R13: ffff88801362b598 R14: ffff888017217c48 R15: ffffffff83556140
[   18.594322] FS:  0000000000000000(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
[   18.594625] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   18.594837] CR2: 0000000020000080 CR3: 000000000687e000 CR4: 0000000000750ee0
[   18.595096] PKRU: 55555554
[   18.595197] Call Trace:
[   18.595289]  <TASK>
[   18.595370]  ? show_regs+0x6e/0x80
[   18.595501]  ? __warn+0xef/0x340
[   18.595626]  ? report_bug+0x25e/0x4b0
[   18.595765]  ? iommufd_fops_release+0x2a3/0x300
[   18.595934]  ? report_bug+0x2cb/0x4b0
[   18.596074]  ? handle_bug+0x46/0x90
[   18.596206]  ? exc_invalid_op+0x1d/0x50
[   18.596349]  ? asm_exc_invalid_op+0x1f/0x30
[   18.596503]  ? __pfx_iommufd_fops_release+0x10/0x10
[   18.596685]  ? iommufd_fops_release+0x2a3/0x300
[   18.596853]  ? iommufd_fops_release+0x2a3/0x300
[   18.597023]  ? __pfx_iommufd_fops_release+0x10/0x10
[   18.597202]  ? rcu_is_watching+0x19/0xc0
[   18.597350]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   18.597547]  ? __pfx_iommufd_fops_release+0x10/0x10
[   18.597733]  __fput+0x424/0xaf0
[   18.597858]  ____fput+0x1f/0x30
[   18.597979]  task_work_run+0x19d/0x2b0
[   18.598121]  ? __pfx_task_work_run+0x10/0x10
[   18.598280]  ? __sanitizer_cov_trace_const_cmp1+0x1e/0x30
[   18.598476]  ? switch_task_namespaces+0xa9/0xe0
[   18.598660]  do_exit+0xac9/0x2790
[   18.598794]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   18.599025]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   18.599211]  ? __pfx_do_exit+0x10/0x10
[   18.599351]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   18.599547]  ? security_file_ioctl+0x9d/0xd0
[   18.599709]  make_task_dead+0x182/0x3c0
[   18.599854]  rewind_stack_and_make_dead+0x17/0x20
[   18.600028] RIP: 0033:0x7fddb463ee5d
[   18.600160] Code: Unable to access opcode bytes at 0x7fddb463ee33.
[   18.600378] RSP: 002b:00007ffec1f7d318 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   18.600646] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007fddb463ee5d
[   18.600897] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   18.601150] RBP: 00007ffec1f7d330 R08: 0000000000000800 R09: 0000000000000800
[   18.601402] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffec1f7d448
[   18.601653] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007fddb492c000
[   18.601909]  </TASK>
[   18.601993] irq event stamp: 0
[   18.602106] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   18.602329] hardirqs last disabled at (0): [<ffffffff8122f2d1>] copy_process+0x1c51/0x7140
[   18.602631] softirqs last  enabled at (0): [<ffffffff8122f312>] copy_process+0x1c92/0x7140
[   18.602932] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   18.603169] ---[ end trace 0000000000000000 ]---
[   18.605551] iommufd_mock iommufd_mock126: Adding to iommu group 126
[   18.605819] iommufd_mock iommufd_mock126: Removing from iommu group 126
[   18.606146] general protection fault, probably for non-canonical address 0xdffffc0000000006: 0000 [#127] PREEMPT SMP KASAN NOPTI
[   18.606566] KASAN: null-ptr-deref in range [0x0000000000000030-0x0000000000000037]
[   18.606855] CPU: 1 PID: 846 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   18.607169] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   18.607574] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   18.607788] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   18.608444] RSP: 0018:ffff8880230e7ba8 EFLAGS: 00010206
[   18.608636] RAX: dffffc0000000000 RBX: ffff888014b67000 RCX: 0000000000000000
[   18.608893] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   18.609149] RBP: ffff8880230e7bc0 R08: 0000000000000001 R09: ffffed100155b11b
[   18.609405] R10: ffff88800aad88df R11: 0000000000000000 R12: 0000000000000000
[   18.609661] R13: ffffffff85cc0180 R14: ffff88801679ab60 R15: ffffffff87070ae0
[   18.609918] FS:  00007fbc80e8c600(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
[   18.610207] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   18.610416] CR2: 0000000020000080 CR3: 0000000012372000 CR4: 0000000000750ee0
[   18.610674] PKRU: 55555554
[   18.610780] Call Trace:
[   18.610873]  <TASK>
[   18.610955]  ? show_regs+0x6e/0x80
[   18.611090]  ? die_addr+0x45/0xb0
[   18.611223]  ? exc_general_protection+0x159/0x250
[   18.611406]  ? asm_exc_general_protection+0x2b/0x30
[   18.611591]  ? sysfs_remove_link_from_group+0x21/0x90
[   18.611781]  ? sysfs_remove_link_from_group+0x37/0x90
[   18.611970]  ? sysfs_remove_link_from_group+0x21/0x90
[   18.612160]  iommu_device_unlink+0x85/0xd0
[   18.612316]  iommu_deinit_device+0x11f/0x4c0
[   18.612481]  __iommu_group_remove_device+0x26b/0x300
[   18.612670]  iommu_group_remove_device+0x8a/0xb0
[   18.612846]  iommufd_test+0x1f1a/0x2d10
[   18.612991]  ? __pfx_lock_release+0x10/0x10
[   18.613151]  ? __pfx_lock_acquire+0x10/0x10
[   18.613312]  ? __pfx_iommufd_test+0x10/0x10
[   18.613470]  ? __sanitizer_cov_trace_const_cmp8+0x1c/0x30
[   18.613674]  iommufd_fops_ioctl+0x377/0x510
[   18.613834]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   18.614012]  ? trace_hardirqs_on+0x26/0x120
[   18.614174]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   18.614405]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   18.614591]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   18.614799]  ? security_file_ioctl+0x9d/0xd0
[   18.614964]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   18.615142]  __x64_sys_ioctl+0x1b9/0x230
[   18.615291]  do_syscall_64+0x3c/0x90
[   18.615427]  entry_SYSCALL_64_after_hwframe+0x6e/0xd8
[   18.615615] RIP: 0033:0x7fbc80c3ee5d
[   18.615751] Code: ff c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d 93 af 1b 00 f7 d8 64 89 01 48
[   18.616404] RSP: 002b:00007fff73337a78 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   18.616677] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007fbc80c3ee5d
[   18.616934] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   18.617190] RBP: 00007fff73337a90 R08: 0000000000000800 R09: 0000000000000800
[   18.617446] R10: 0000000000000000 R11: 0000000000000213 R12: 00007fff73337ba8
[   18.617702] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007fbc80ecd000
[   18.617963]  </TASK>
[   18.618048] Modules linked in:
[   18.618267] ---[ end trace 0000000000000000 ]---
[   18.618439] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   18.618655] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   18.619312] RSP: 0018:ffff88802457fba8 EFLAGS: 00010206
[   18.619504] RAX: dffffc0000000000 RBX: ffff888014f9b000 RCX: 0000000000000000
[   18.619761] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   18.620018] RBP: ffff88802457fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   18.620306] R10: ffff88800aad88df R11: 0000000000000001 R12: 0000000000000000
[   18.620600] R13: ffffffff85cc0180 R14: ffff8880109b6ac0 R15: ffffffff87070ae0
[   18.620856] FS:  00007fbc80e8c600(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
[   18.621194] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   18.621403] CR2: 0000000020000080 CR3: 0000000012372000 CR4: 0000000000750ee0
[   18.621677] PKRU: 55555554
[   18.622066] ------------[ cut here ]------------
[   18.622236] WARNING: CPU: 1 PID: 846 at drivers/iommu/iommufd/main.c:258 iommufd_fops_release+0x2a3/0x300
[   18.622642] Modules linked in:
[   18.622763] CPU: 1 PID: 846 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   18.623069] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   18.623471] RIP: 0010:iommufd_fops_release+0x2a3/0x300
[   18.623699] Code: 45 d0 65 48 2b 04 25 28 00 00 00 75 54 48 81 c4 88 00 00 00 31 c0 5b 41 5c 41 5d 41 5e 41 5f 5d c3 cc cc cc cc e8 ad 4f 0a fe <0f> 0b eb a6 e8 74 23 67 fe e9 f6 fe ff ff 48 89 85 50 ff ff ff e8
[   18.624372] RSP: 0018:ffff8880230e7c00 EFLAGS: 00010293
[   18.624591] RAX: 0000000000000000 RBX: ffff88801248a508 RCX: 0000000000000000
[   18.624842] RDX: ffff888011e82500 RSI: ffffffff835563e3 RDI: ffffffff86702b48
[   18.625116] RBP: ffff8880230e7cb0 R08: 0000000000000000 R09: fffffbfff0eb2644
[   18.625411] R10: ffffffff87593227 R11: ffff8880138f0400 R12: 0000000000000000
[   18.625663] R13: ffff888011246698 R14: ffff8880230e7c48 R15: ffffffff83556140
[   18.625939] FS:  0000000000000000(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
[   18.626250] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   18.626459] CR2: 0000000020000080 CR3: 000000000687e000 CR4: 0000000000750ee0
[   18.626745] PKRU: 55555554
[   18.626867] Call Trace:
[   18.626960]  <TASK>
[   18.627043]  ? show_regs+0x6e/0x80
[   18.627176]  ? __warn+0xef/0x340
[   18.627302]  ? report_bug+0x25e/0x4b0
[   18.627444]  ? iommufd_fops_release+0x2a3/0x300
[   18.627615]  ? report_bug+0x2cb/0x4b0
[   18.627759]  ? handle_bug+0x46/0x90
[   18.627938]  ? exc_invalid_op+0x1d/0x50
[   18.628081]  ? asm_exc_invalid_op+0x1f/0x30
[   18.628235]  ? __pfx_iommufd_fops_release+0x10/0x10
[   18.628416]  ? iommufd_fops_release+0x2a3/0x300
[   18.628604]  ? iommufd_fops_release+0x2a3/0x300
[   18.628799]  ? __pfx_iommufd_fops_release+0x10/0x10
[   18.628982]  ? rcu_is_watching+0x19/0xc0
[   18.629133]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   18.629347]  ? __pfx_iommufd_fops_release+0x10/0x10
[   18.629550]  __fput+0x424/0xaf0
[   18.629675]  ____fput+0x1f/0x30
[   18.629802]  task_work_run+0x19d/0x2b0
[   18.629956]  ? __pfx_task_work_run+0x10/0x10
[   18.630123]  ? __sanitizer_cov_trace_const_cmp1+0x1e/0x30
[   18.630380]  ? switch_task_namespaces+0xa9/0xe0
[   18.630550]  do_exit+0xac9/0x2790
[   18.630684]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   18.630912]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   18.631093]  ? __pfx_do_exit+0x10/0x10
[   18.631233]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   18.631452]  ? security_file_ioctl+0x9d/0xd0
[   18.631638]  make_task_dead+0x182/0x3c0
[   18.631784]  rewind_stack_and_make_dead+0x17/0x20
[   18.631958] RIP: 0033:0x7fbc80c3ee5d
[   18.632095] Code: Unable to access opcode bytes at 0x7fbc80c3ee33.
[   18.632350] RSP: 002b:00007fff73337a78 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   18.632624] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007fbc80c3ee5d
[   18.632888] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   18.633184] RBP: 00007fff73337a90 R08: 0000000000000800 R09: 0000000000000800
[   18.633441] R10: 0000000000000000 R11: 0000000000000213 R12: 00007fff73337ba8
[   18.633707] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007fbc80ecd000
[   18.634007]  </TASK>
[   18.634092] irq event stamp: 0
[   18.634207] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   18.634439] hardirqs last disabled at (0): [<ffffffff8122f2d1>] copy_process+0x1c51/0x7140
[   18.634786] softirqs last  enabled at (0): [<ffffffff8122f312>] copy_process+0x1c92/0x7140
[   18.635085] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   18.635312] ---[ end trace 0000000000000000 ]---
[   18.638071] iommufd_mock iommufd_mock127: Adding to iommu group 127
[   18.638331] iommufd_mock iommufd_mock127: Removing from iommu group 127
[   18.638622] general protection fault, probably for non-canonical address 0xdffffc0000000006: 0000 [#128] PREEMPT SMP KASAN NOPTI
[   18.639079] KASAN: null-ptr-deref in range [0x0000000000000030-0x0000000000000037]
[   18.639358] CPU: 1 PID: 847 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   18.639686] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   18.640141] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   18.640358] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   18.641074] RSP: 0018:ffff88801025fba8 EFLAGS: 00010206
[   18.641273] RAX: dffffc0000000000 RBX: ffff888014b64000 RCX: 0000000000000000
[   18.641583] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   18.641845] RBP: ffff88801025fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   18.642112] R10: ffff88800aad88df R11: 5f6466756d6d6f69 R12: 0000000000000000
[   18.642410] R13: ffffffff85cc0180 R14: ffff88801679a740 R15: ffffffff87070ae0
[   18.642674] FS:  00007f4ec6488600(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
[   18.642977] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   18.643212] CR2: 0000000020000080 CR3: 000000000f5ae000 CR4: 0000000000750ee0
[   18.643506] PKRU: 55555554
[   18.643611] Call Trace:
[   18.643707]  <TASK>
[   18.643791]  ? show_regs+0x6e/0x80
[   18.643929]  ? die_addr+0x45/0xb0
[   18.644065]  ? exc_general_protection+0x159/0x250
[   18.644251]  ? asm_exc_general_protection+0x2b/0x30
[   18.644440]  ? sysfs_remove_link_from_group+0x21/0x90
[   18.644634]  ? sysfs_remove_link_from_group+0x37/0x90
[   18.644827]  ? sysfs_remove_link_from_group+0x21/0x90
[   18.645021]  iommu_device_unlink+0x85/0xd0
[   18.645180]  iommu_deinit_device+0x11f/0x4c0
[   18.645349]  __iommu_group_remove_device+0x26b/0x300
[   18.645542]  iommu_group_remove_device+0x8a/0xb0
[   18.645722]  iommufd_test+0x1f1a/0x2d10
[   18.645873]  ? __pfx_lock_release+0x10/0x10
[   18.646032]  ? __pfx_lock_acquire+0x10/0x10
[   18.646193]  ? __pfx_iommufd_test+0x10/0x10
[   18.646352]  ? __sanitizer_cov_trace_const_cmp8+0x1c/0x30
[   18.646555]  iommufd_fops_ioctl+0x377/0x510
[   18.646720]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   18.646908]  ? trace_hardirqs_on+0x26/0x120
[   18.647069]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   18.647300]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   18.647486]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   18.647686]  ? security_file_ioctl+0x9d/0xd0
[   18.647850]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   18.648027]  __x64_sys_ioctl+0x1b9/0x230
[   18.648176]  do_syscall_64+0x3c/0x90
[   18.648312]  entry_SYSCALL_64_after_hwframe+0x6e/0xd8
[   18.648499] RIP: 0033:0x7f4ec623ee5d
[   18.648635] Code: ff c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d 93 af 1b 00 f7 d8 64 89 01 48
[   18.649287] RSP: 002b:00007fff85449ca8 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   18.649559] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f4ec623ee5d
[   18.649815] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   18.650070] RBP: 00007fff85449cc0 R08: 0000000000000800 R09: 0000000000000800
[   18.650327] R10: 0000000000000000 R11: 0000000000000213 R12: 00007fff85449dd8
[   18.650584] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f4ec64c9000
[   18.650855]  </TASK>
[   18.650940] Modules linked in:
[   18.651080] ---[ end trace 0000000000000000 ]---
[   18.651267] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   18.651481] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   18.652144] RSP: 0018:ffff88802457fba8 EFLAGS: 00010206
[   18.652438] RAX: dffffc0000000000 RBX: ffff888014f9b000 RCX: 0000000000000000
[   18.652696] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   18.652952] RBP: ffff88802457fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   18.653209] R10: ffff88800aad88df R11: 0000000000000001 R12: 0000000000000000
[   18.653465] R13: ffffffff85cc0180 R14: ffff8880109b6ac0 R15: ffffffff87070ae0
[   18.653722] FS:  00007f4ec6488600(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
[   18.654011] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   18.654221] CR2: 0000000020000080 CR3: 000000000f5ae000 CR4: 0000000000750ee0
[   18.654478] PKRU: 55555554
[   18.654877] ------------[ cut here ]------------
[   18.655054] WARNING: CPU: 1 PID: 847 at drivers/iommu/iommufd/main.c:258 iommufd_fops_release+0x2a3/0x300
[   18.655399] Modules linked in:
[   18.655516] CPU: 1 PID: 847 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   18.655828] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   18.656232] RIP: 0010:iommufd_fops_release+0x2a3/0x300
[   18.656449] Code: 45 d0 65 48 2b 04 25 28 00 00 00 75 54 48 81 c4 88 00 00 00 31 c0 5b 41 5c 41 5d 41 5e 41 5f 5d c3 cc cc cc cc e8 ad 4f 0a fe <0f> 0b eb a6 e8 74 23 67 fe e9 f6 fe ff ff 48 89 85 50 ff ff ff e8
[   18.657102] RSP: 0018:ffff88801025fc00 EFLAGS: 00010293
[   18.657294] RAX: 0000000000000000 RBX: ffff88801248ad08 RCX: 0000000000000000
[   18.657550] RDX: ffff88800ececa00 RSI: ffffffff835563e3 RDI: ffffffff86702b48
[   18.657807] RBP: ffff88801025fcb0 R08: 0000000000000000 R09: fffffbfff0eb2644
[   18.658063] R10: ffffffff87593227 R11: ffff8880111f2a00 R12: 0000000000000000
[   18.658320] R13: ffff888018af4b98 R14: ffff88801025fc48 R15: ffffffff83556140
[   18.658589] FS:  0000000000000000(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
[   18.658898] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   18.659112] CR2: 0000000020000080 CR3: 000000000687e000 CR4: 0000000000750ee0
[   18.659370] PKRU: 55555554
[   18.659472] Call Trace:
[   18.659565]  <TASK>
[   18.659648]  ? show_regs+0x6e/0x80
[   18.659780]  ? __warn+0xef/0x340
[   18.659907]  ? report_bug+0x25e/0x4b0
[   18.660049]  ? iommufd_fops_release+0x2a3/0x300
[   18.660220]  ? report_bug+0x2cb/0x4b0
[   18.660362]  ? handle_bug+0x46/0x90
[   18.660496]  ? exc_invalid_op+0x1d/0x50
[   18.660643]  ? asm_exc_invalid_op+0x1f/0x30
[   18.660799]  ? __pfx_iommufd_fops_release+0x10/0x10
[   18.660984]  ? iommufd_fops_release+0x2a3/0x300
[   18.661155]  ? iommufd_fops_release+0x2a3/0x300
[   18.661327]  ? __pfx_iommufd_fops_release+0x10/0x10
[   18.661509]  ? rcu_is_watching+0x19/0xc0
[   18.661660]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   18.661861]  ? __pfx_iommufd_fops_release+0x10/0x10
[   18.662043]  __fput+0x424/0xaf0
[   18.662170]  ____fput+0x1f/0x30
[   18.662294]  task_work_run+0x19d/0x2b0
[   18.662438]  ? __pfx_task_work_run+0x10/0x10
[   18.662687]  ? __sanitizer_cov_trace_const_cmp1+0x1e/0x30
[   18.662894]  ? switch_task_namespaces+0xa9/0xe0
[   18.663071]  do_exit+0xac9/0x2790
[   18.663203]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   18.663439]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   18.663624]  ? __pfx_do_exit+0x10/0x10
[   18.663766]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   18.663966]  ? security_file_ioctl+0x9d/0xd0
[   18.664130]  make_task_dead+0x182/0x3c0
[   18.664277]  rewind_stack_and_make_dead+0x17/0x20
[   18.664454] RIP: 0033:0x7f4ec623ee5d
[   18.664590] Code: Unable to access opcode bytes at 0x7f4ec623ee33.
[   18.664811] RSP: 002b:00007fff85449ca8 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   18.665084] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f4ec623ee5d
[   18.665341] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   18.665598] RBP: 00007fff85449cc0 R08: 0000000000000800 R09: 0000000000000800
[   18.665855] R10: 0000000000000000 R11: 0000000000000213 R12: 00007fff85449dd8
[   18.666112] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f4ec64c9000
[   18.666373]  </TASK>
[   18.666458] irq event stamp: 0
[   18.666615] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   18.666851] hardirqs last disabled at (0): [<ffffffff8122f2d1>] copy_process+0x1c51/0x7140
[   18.667156] softirqs last  enabled at (0): [<ffffffff8122f312>] copy_process+0x1c92/0x7140
[   18.667456] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   18.667683] ---[ end trace 0000000000000000 ]---
[   18.670213] iommufd_mock iommufd_mock128: Adding to iommu group 128
[   18.670463] iommufd_mock iommufd_mock128: Removing from iommu group 128
[   18.670894] general protection fault, probably for non-canonical address 0xdffffc0000000006: 0000 [#129] PREEMPT SMP KASAN NOPTI
[   18.671300] KASAN: null-ptr-deref in range [0x0000000000000030-0x0000000000000037]
[   18.671568] CPU: 0 PID: 848 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   18.671876] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   18.672274] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   18.672483] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   18.673127] RSP: 0018:ffff8880230e7ba8 EFLAGS: 00010206
[   18.673317] RAX: dffffc0000000000 RBX: ffff8880167fa000 RCX: 0000000000000000
[   18.673569] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   18.673821] RBP: ffff8880230e7bc0 R08: 0000000000000001 R09: ffffed100155b11b
[   18.674074] R10: ffff88800aad88df R11: 0000000000000000 R12: 0000000000000000
[   18.674327] R13: ffffffff85cc0180 R14: ffff888024c35740 R15: ffffffff87070ae0
[   18.674582] FS:  00007f0da529d600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   18.674872] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   18.675079] CR2: 0000000020000080 CR3: 000000000b6da000 CR4: 0000000000750ef0
[   18.675333] PKRU: 55555554
[   18.675434] Call Trace:
[   18.675526]  <TASK>
[   18.675607]  ? show_regs+0x6e/0x80
[   18.675741]  ? die_addr+0x45/0xb0
[   18.675872]  ? exc_general_protection+0x159/0x250
[   18.676052]  ? asm_exc_general_protection+0x2b/0x30
[   18.676235]  ? sysfs_remove_link_from_group+0x21/0x90
[   18.676423]  ? sysfs_remove_link_from_group+0x37/0x90
[   18.676610]  ? sysfs_remove_link_from_group+0x21/0x90
[   18.676797]  iommu_device_unlink+0x85/0xd0
[   18.676951]  iommu_deinit_device+0x11f/0x4c0
[   18.677114]  __iommu_group_remove_device+0x26b/0x300
[   18.677300]  iommu_group_remove_device+0x8a/0xb0
[   18.677473]  iommufd_test+0x1f1a/0x2d10
[   18.677617]  ? __pfx_lock_release+0x10/0x10
[   18.677774]  ? __pfx_lock_acquire+0x10/0x10
[   18.677932]  ? __pfx_iommufd_test+0x10/0x10
[   18.678089]  ? __sanitizer_cov_trace_const_cmp8+0x1c/0x30
[   18.678289]  iommufd_fops_ioctl+0x377/0x510
[   18.678447]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   18.678622]  ? trace_hardirqs_on+0x26/0x120
[   18.678783]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   18.679012]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   18.679194]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   18.679392]  ? security_file_ioctl+0x9d/0xd0
[   18.679555]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   18.679730]  __x64_sys_ioctl+0x1b9/0x230
[   18.679877]  do_syscall_64+0x3c/0x90
[   18.680012]  entry_SYSCALL_64_after_hwframe+0x6e/0xd8
[   18.680197] RIP: 0033:0x7f0da503ee5d
[   18.680331] Code: ff c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d 93 af 1b 00 f7 d8 64 89 01 48
[   18.680975] RSP: 002b:00007fff5d1716a8 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   18.681244] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f0da503ee5d
[   18.681497] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   18.681749] RBP: 00007fff5d1716c0 R08: 0000000000000800 R09: 0000000000000800
[   18.682001] R10: 0000000000000000 R11: 0000000000000213 R12: 00007fff5d1717d8
[   18.682253] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f0da52de000
[   18.682510]  </TASK>
[   18.682594] Modules linked in:
[   18.682799] ---[ end trace 0000000000000000 ]---
[   18.682967] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   18.683174] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   18.683820] RSP: 0018:ffff88802457fba8 EFLAGS: 00010206
[   18.684010] RAX: dffffc0000000000 RBX: ffff888014f9b000 RCX: 0000000000000000
[   18.684263] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   18.684516] RBP: ffff88802457fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   18.684769] R10: ffff88800aad88df R11: 0000000000000001 R12: 0000000000000000
[   18.685021] R13: ffffffff85cc0180 R14: ffff8880109b6ac0 R15: ffffffff87070ae0
[   18.685275] FS:  00007f0da529d600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   18.685560] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   18.685766] CR2: 0000000020000080 CR3: 000000000b6da000 CR4: 0000000000750ef0
[   18.686020] PKRU: 55555554
[   18.686377] ------------[ cut here ]------------
[   18.686546] WARNING: CPU: 0 PID: 848 at drivers/iommu/iommufd/main.c:258 iommufd_fops_release+0x2a3/0x300
[   18.686898] Modules linked in:
[   18.687013] CPU: 0 PID: 848 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   18.687322] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   18.687720] RIP: 0010:iommufd_fops_release+0x2a3/0x300
[   18.687909] Code: 45 d0 65 48 2b 04 25 28 00 00 00 75 54 48 81 c4 88 00 00 00 31 c0 5b 41 5c 41 5d 41 5e 41 5f 5d c3 cc cc cc cc e8 ad 4f 0a fe <0f> 0b eb a6 e8 74 23 67 fe e9 f6 fe ff ff 48 89 85 50 ff ff ff e8
[   18.688555] RSP: 0018:ffff8880230e7c00 EFLAGS: 00010293
[   18.688744] RAX: 0000000000000000 RBX: ffff88800fe06008 RCX: 0000000000000000
[   18.688998] RDX: ffff888012c34a00 RSI: ffffffff835563e3 RDI: ffffffff86702b40
[   18.689250] RBP: ffff8880230e7cb0 R08: 0000000000000000 R09: fffffbfff0eb2644
[   18.689506] R10: ffffffff87593227 R11: ffff8880134c5c00 R12: 0000000000000000
[   18.689761] R13: ffff8880111ff818 R14: ffff8880230e7c48 R15: ffffffff83556140
[   18.690015] FS:  0000000000000000(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   18.690299] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   18.690506] CR2: 0000000020000080 CR3: 000000000687e000 CR4: 0000000000750ef0
[   18.690767] PKRU: 55555554
[   18.690871] Call Trace:
[   18.690966]  <TASK>
[   18.691047]  ? show_regs+0x6e/0x80
[   18.691178]  ? __warn+0xef/0x340
[   18.691303]  ? report_bug+0x25e/0x4b0
[   18.691442]  ? iommufd_fops_release+0x2a3/0x300
[   18.691612]  ? report_bug+0x2cb/0x4b0
[   18.691753]  ? handle_bug+0x46/0x90
[   18.691886]  ? exc_invalid_op+0x1d/0x50
[   18.692030]  ? asm_exc_invalid_op+0x1f/0x30
[   18.692184]  ? __pfx_iommufd_fops_release+0x10/0x10
[   18.692366]  ? iommufd_fops_release+0x2a3/0x300
[   18.692535]  ? iommufd_fops_release+0x2a3/0x300
[   18.692705]  ? __pfx_iommufd_fops_release+0x10/0x10
[   18.692885]  ? rcu_is_watching+0x19/0xc0
[   18.693034]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   18.693232]  ? __pfx_iommufd_fops_release+0x10/0x10
[   18.693412]  __fput+0x424/0xaf0
[   18.693537]  ____fput+0x1f/0x30
[   18.693659]  task_work_run+0x19d/0x2b0
[   18.693801]  ? __pfx_task_work_run+0x10/0x10
[   18.693961]  ? __sanitizer_cov_trace_const_cmp1+0x1e/0x30
[   18.694158]  ? switch_task_namespaces+0xa9/0xe0
[   18.694329]  do_exit+0xac9/0x2790
[   18.694456]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   18.694690]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   18.694875]  ? __pfx_do_exit+0x10/0x10
[   18.695016]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   18.695214]  ? security_file_ioctl+0x9d/0xd0
[   18.695378]  make_task_dead+0x182/0x3c0
[   18.695523]  rewind_stack_and_make_dead+0x17/0x20
[   18.695698] RIP: 0033:0x7f0da503ee5d
[   18.695832] Code: Unable to access opcode bytes at 0x7f0da503ee33.
[   18.696050] RSP: 002b:00007fff5d1716a8 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   18.696320] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f0da503ee5d
[   18.696574] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   18.696827] RBP: 00007fff5d1716c0 R08: 0000000000000800 R09: 0000000000000800
[   18.697080] R10: 0000000000000000 R11: 0000000000000213 R12: 00007fff5d1717d8
[   18.697333] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f0da52de000
[   18.697591]  </TASK>
[   18.697676] irq event stamp: 0
[   18.697789] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   18.698013] hardirqs last disabled at (0): [<ffffffff8122f2d1>] copy_process+0x1c51/0x7140
[   18.698307] softirqs last  enabled at (0): [<ffffffff8122f312>] copy_process+0x1c92/0x7140
[   18.698607] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   18.698833] ---[ end trace 0000000000000000 ]---
[   18.701457] iommufd_mock iommufd_mock129: Adding to iommu group 129
[   18.701707] iommufd_mock iommufd_mock129: Removing from iommu group 129
[   18.701960] general protection fault, probably for non-canonical address 0xdffffc0000000006: 0000 [#130] PREEMPT SMP KASAN NOPTI
[   18.702362] KASAN: null-ptr-deref in range [0x0000000000000030-0x0000000000000037]
[   18.702630] CPU: 0 PID: 849 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   18.702945] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   18.703341] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   18.703550] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   18.704191] RSP: 0018:ffff88802308fba8 EFLAGS: 00010206
[   18.704379] RAX: dffffc0000000000 RBX: ffff8880167f9000 RCX: 0000000000000000
[   18.704631] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   18.704881] RBP: ffff88802308fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   18.705132] R10: ffff88800aad88df R11: 5f6466756d6d6f69 R12: 0000000000000000
[   18.705383] R13: ffffffff85cc0180 R14: ffff888024c35c80 R15: ffffffff87070ae0
[   18.705635] FS:  00007f2126d60600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   18.705919] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   18.706124] CR2: 0000000020000080 CR3: 000000000b6da000 CR4: 0000000000750ef0
[   18.706376] PKRU: 55555554
[   18.706477] Call Trace:
[   18.706568]  <TASK>
[   18.706649]  ? show_regs+0x6e/0x80
[   18.706784]  ? die_addr+0x45/0xb0
[   18.706914]  ? exc_general_protection+0x159/0x250
[   18.707093]  ? asm_exc_general_protection+0x2b/0x30
[   18.707274]  ? sysfs_remove_link_from_group+0x21/0x90
[   18.707460]  ? sysfs_remove_link_from_group+0x37/0x90
[   18.707646]  ? sysfs_remove_link_from_group+0x21/0x90
[   18.707832]  iommu_device_unlink+0x85/0xd0
[   18.707985]  iommu_deinit_device+0x11f/0x4c0
[   18.708147]  __iommu_group_remove_device+0x26b/0x300
[   18.708332]  iommu_group_remove_device+0x8a/0xb0
[   18.708504]  iommufd_test+0x1f1a/0x2d10
[   18.708647]  ? __pfx_lock_release+0x10/0x10
[   18.708802]  ? __pfx_lock_acquire+0x10/0x10
[   18.708960]  ? __pfx_iommufd_test+0x10/0x10
[   18.709115]  ? __sanitizer_cov_trace_const_cmp8+0x1c/0x30
[   18.709314]  iommufd_fops_ioctl+0x377/0x510
[   18.709471]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   18.709645]  ? trace_hardirqs_on+0x26/0x120
[   18.709803]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   18.710030]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   18.710212]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   18.710409]  ? security_file_ioctl+0x9d/0xd0
[   18.710571]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   18.710745]  __x64_sys_ioctl+0x1b9/0x230
[   18.710895]  do_syscall_64+0x3c/0x90
[   18.711029]  entry_SYSCALL_64_after_hwframe+0x6e/0xd8
[   18.711213] RIP: 0033:0x7f2126a3ee5d
[   18.711346] Code: ff c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d 93 af 1b 00 f7 d8 64 89 01 48
[   18.711988] RSP: 002b:00007fffdc6bf778 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   18.712256] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f2126a3ee5d
[   18.712508] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   18.712759] RBP: 00007fffdc6bf790 R08: 0000000000000800 R09: 0000000000000800
[   18.713011] R10: 0000000000000000 R11: 0000000000000213 R12: 00007fffdc6bf8a8
[   18.713262] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f2126da1000
[   18.713519]  </TASK>
[   18.713603] Modules linked in:
[   18.713743] ---[ end trace 0000000000000000 ]---
[   18.713912] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   18.714119] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   18.714797] RSP: 0018:ffff88802457fba8 EFLAGS: 00010206
[   18.714987] RAX: dffffc0000000000 RBX: ffff888014f9b000 RCX: 0000000000000000
[   18.715239] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   18.715491] RBP: ffff88802457fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   18.715743] R10: ffff88800aad88df R11: 0000000000000001 R12: 0000000000000000
[   18.715995] R13: ffffffff85cc0180 R14: ffff8880109b6ac0 R15: ffffffff87070ae0
[   18.716246] FS:  00007f2126d60600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   18.716530] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   18.716736] CR2: 0000000020000080 CR3: 000000000b6da000 CR4: 0000000000750ef0
[   18.716988] PKRU: 55555554
[   18.717376] ------------[ cut here ]------------
[   18.717545] WARNING: CPU: 0 PID: 849 at drivers/iommu/iommufd/main.c:258 iommufd_fops_release+0x2a3/0x300
[   18.717882] Modules linked in:
[   18.717996] CPU: 0 PID: 849 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   18.718302] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   18.718798] RIP: 0010:iommufd_fops_release+0x2a3/0x300
[   18.718989] Code: 45 d0 65 48 2b 04 25 28 00 00 00 75 54 48 81 c4 88 00 00 00 31 c0 5b 41 5c 41 5d 41 5e 41 5f 5d c3 cc cc cc cc e8 ad 4f 0a fe <0f> 0b eb a6 e8 74 23 67 fe e9 f6 fe ff ff 48 89 85 50 ff ff ff e8
[   18.719630] RSP: 0018:ffff88802308fc00 EFLAGS: 00010293
[   18.719817] RAX: 0000000000000000 RBX: ffff88800fe06608 RCX: 0000000000000000
[   18.720068] RDX: ffff888012c30000 RSI: ffffffff835563e3 RDI: ffffffff86702b40
[   18.720318] RBP: ffff88802308fcb0 R08: 0000000000000000 R09: fffffbfff0eb2644
[   18.720570] R10: ffffffff87593227 R11: ffff88800f8f6400 R12: 0000000000000000
[   18.720820] R13: ffff888012735d18 R14: ffff88802308fc48 R15: ffffffff83556140
[   18.721071] FS:  0000000000000000(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   18.721354] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   18.721559] CR2: 0000000020000080 CR3: 000000000687e000 CR4: 0000000000750ef0
[   18.721811] PKRU: 55555554
[   18.721911] Call Trace:
[   18.722002]  <TASK>
[   18.722083]  ? show_regs+0x6e/0x80
[   18.722213]  ? __warn+0xef/0x340
[   18.722337]  ? report_bug+0x25e/0x4b0
[   18.722475]  ? iommufd_fops_release+0x2a3/0x300
[   18.722651]  ? report_bug+0x2cb/0x4b0
[   18.722794]  ? handle_bug+0x46/0x90
[   18.722925]  ? exc_invalid_op+0x1d/0x50
[   18.723069]  ? asm_exc_invalid_op+0x1f/0x30
[   18.723222]  ? __pfx_iommufd_fops_release+0x10/0x10
[   18.723403]  ? iommufd_fops_release+0x2a3/0x300
[   18.723571]  ? iommufd_fops_release+0x2a3/0x300
[   18.723740]  ? __pfx_iommufd_fops_release+0x10/0x10
[   18.723918]  ? rcu_is_watching+0x19/0xc0
[   18.724065]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   18.724262]  ? __pfx_iommufd_fops_release+0x10/0x10
[   18.724440]  __fput+0x424/0xaf0
[   18.724565]  ____fput+0x1f/0x30
[   18.724686]  task_work_run+0x19d/0x2b0
[   18.724827]  ? __pfx_task_work_run+0x10/0x10
[   18.724985]  ? __sanitizer_cov_trace_const_cmp1+0x1e/0x30
[   18.725181]  ? switch_task_namespaces+0xa9/0xe0
[   18.725350]  do_exit+0xac9/0x2790
[   18.725476]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   18.725701]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   18.725881]  ? __pfx_do_exit+0x10/0x10
[   18.726021]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   18.726216]  ? security_file_ioctl+0x9d/0xd0
[   18.726378]  make_task_dead+0x182/0x3c0
[   18.726522]  rewind_stack_and_make_dead+0x17/0x20
[   18.726702] RIP: 0033:0x7f2126a3ee5d
[   18.726836] Code: Unable to access opcode bytes at 0x7f2126a3ee33.
[   18.727053] RSP: 002b:00007fffdc6bf778 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   18.727320] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f2126a3ee5d
[   18.727571] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   18.727820] RBP: 00007fffdc6bf790 R08: 0000000000000800 R09: 0000000000000800
[   18.728071] R10: 0000000000000000 R11: 0000000000000213 R12: 00007fffdc6bf8a8
[   18.728321] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f2126da1000
[   18.728577]  </TASK>
[   18.728660] irq event stamp: 0
[   18.728773] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   18.728994] hardirqs last disabled at (0): [<ffffffff8122f2d1>] copy_process+0x1c51/0x7140
[   18.729286] softirqs last  enabled at (0): [<ffffffff8122f312>] copy_process+0x1c92/0x7140
[   18.729577] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   18.729799] ---[ end trace 0000000000000000 ]---
[   18.732477] iommufd_mock iommufd_mock130: Adding to iommu group 130
[   18.732727] iommufd_mock iommufd_mock130: Removing from iommu group 130
[   18.732979] general protection fault, probably for non-canonical address 0xdffffc0000000006: 0000 [#131] PREEMPT SMP KASAN NOPTI
[   18.733381] KASAN: null-ptr-deref in range [0x0000000000000030-0x0000000000000037]
[   18.733648] CPU: 0 PID: 850 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   18.733954] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   18.734349] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   18.734557] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   18.735205] RSP: 0018:ffff88801670fba8 EFLAGS: 00010206
[   18.735393] RAX: dffffc0000000000 RBX: ffff88801089e000 RCX: 0000000000000000
[   18.735644] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   18.735895] RBP: ffff88801670fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   18.736146] R10: ffff88800aad88df R11: 5f6466756d6d6f69 R12: 0000000000000000
[   18.736397] R13: ffffffff85cc0180 R14: ffff888024c35020 R15: ffffffff87070ae0
[   18.736649] FS:  00007f27511be600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   18.736937] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   18.737142] CR2: 0000000020000080 CR3: 000000000b6da000 CR4: 0000000000750ef0
[   18.737395] PKRU: 55555554
[   18.737496] Call Trace:
[   18.737587]  <TASK>
[   18.737668]  ? show_regs+0x6e/0x80
[   18.737800]  ? die_addr+0x45/0xb0
[   18.737930]  ? exc_general_protection+0x159/0x250
[   18.738108]  ? asm_exc_general_protection+0x2b/0x30
[   18.738290]  ? sysfs_remove_link_from_group+0x21/0x90
[   18.738476]  ? sysfs_remove_link_from_group+0x37/0x90
[   18.738662]  ? sysfs_remove_link_from_group+0x21/0x90
[   18.738874]  iommu_device_unlink+0x85/0xd0
[   18.739029]  iommu_deinit_device+0x11f/0x4c0
[   18.739191]  __iommu_group_remove_device+0x26b/0x300
[   18.739376]  iommu_group_remove_device+0x8a/0xb0
[   18.739549]  iommufd_test+0x1f1a/0x2d10
[   18.739691]  ? __pfx_lock_release+0x10/0x10
[   18.739847]  ? __pfx_lock_acquire+0x10/0x10
[   18.740005]  ? __pfx_iommufd_test+0x10/0x10
[   18.740161]  ? __sanitizer_cov_trace_const_cmp8+0x1c/0x30
[   18.740360]  iommufd_fops_ioctl+0x377/0x510
[   18.740518]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   18.740692]  ? trace_hardirqs_on+0x26/0x120
[   18.740853]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   18.741082]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   18.741264]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   18.741462]  ? security_file_ioctl+0x9d/0xd0
[   18.741624]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   18.741799]  __x64_sys_ioctl+0x1b9/0x230
[   18.741945]  do_syscall_64+0x3c/0x90
[   18.742079]  entry_SYSCALL_64_after_hwframe+0x6e/0xd8
[   18.742264] RIP: 0033:0x7f2750e3ee5d
[   18.742399] Code: ff c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d 93 af 1b 00 f7 d8 64 89 01 48
[   18.743047] RSP: 002b:00007ffc0176f538 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   18.743314] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f2750e3ee5d
[   18.743566] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   18.743817] RBP: 00007ffc0176f550 R08: 0000000000000800 R09: 0000000000000800
[   18.744068] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffc0176f668
[   18.744320] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f27511ff000
[   18.744577]  </TASK>
[   18.744660] Modules linked in:
[   18.744796] ---[ end trace 0000000000000000 ]---
[   18.744966] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   18.745173] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   18.745815] RSP: 0018:ffff88802457fba8 EFLAGS: 00010206
[   18.746004] RAX: dffffc0000000000 RBX: ffff888014f9b000 RCX: 0000000000000000
[   18.746256] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   18.746508] RBP: ffff88802457fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   18.746772] R10: ffff88800aad88df R11: 0000000000000001 R12: 0000000000000000
[   18.747024] R13: ffffffff85cc0180 R14: ffff8880109b6ac0 R15: ffffffff87070ae0
[   18.747276] FS:  00007f27511be600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   18.747560] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   18.747766] CR2: 0000000020000080 CR3: 000000000b6da000 CR4: 0000000000750ef0
[   18.748018] PKRU: 55555554
[   18.748367] ------------[ cut here ]------------
[   18.748534] WARNING: CPU: 0 PID: 850 at drivers/iommu/iommufd/main.c:258 iommufd_fops_release+0x2a3/0x300
[   18.748873] Modules linked in:
[   18.748988] CPU: 0 PID: 850 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   18.749295] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   18.749691] RIP: 0010:iommufd_fops_release+0x2a3/0x300
[   18.749878] Code: 45 d0 65 48 2b 04 25 28 00 00 00 75 54 48 81 c4 88 00 00 00 31 c0 5b 41 5c 41 5d 41 5e 41 5f 5d c3 cc cc cc cc e8 ad 4f 0a fe <0f> 0b eb a6 e8 74 23 67 fe e9 f6 fe ff ff 48 89 85 50 ff ff ff e8
[   18.750525] RSP: 0018:ffff88801670fc00 EFLAGS: 00010293
[   18.750721] RAX: 0000000000000000 RBX: ffff88800fe06e08 RCX: 0000000000000000
[   18.750975] RDX: ffff888010564a00 RSI: ffffffff835563e3 RDI: ffffffff86702b40
[   18.751227] RBP: ffff88801670fcb0 R08: 0000000000000000 R09: fffffbfff0eb2644
[   18.751479] R10: ffffffff87593227 R11: ffff888018ba4600 R12: 0000000000000000
[   18.751731] R13: ffff888012734b98 R14: ffff88801670fc48 R15: ffffffff83556140
[   18.751982] FS:  0000000000000000(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   18.752266] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   18.752471] CR2: 0000000020000080 CR3: 000000000687e000 CR4: 0000000000750ef0
[   18.752723] PKRU: 55555554
[   18.752824] Call Trace:
[   18.752915]  <TASK>
[   18.752996]  ? show_regs+0x6e/0x80
[   18.753126]  ? __warn+0xef/0x340
[   18.753249]  ? report_bug+0x25e/0x4b0
[   18.753388]  ? iommufd_fops_release+0x2a3/0x300
[   18.753556]  ? report_bug+0x2cb/0x4b0
[   18.753697]  ? handle_bug+0x46/0x90
[   18.753828]  ? exc_invalid_op+0x1d/0x50
[   18.753972]  ? asm_exc_invalid_op+0x1f/0x30
[   18.754126]  ? __pfx_iommufd_fops_release+0x10/0x10
[   18.754307]  ? iommufd_fops_release+0x2a3/0x300
[   18.754475]  ? iommufd_fops_release+0x2a3/0x300
[   18.754659]  ? __pfx_iommufd_fops_release+0x10/0x10
[   18.754840]  ? rcu_is_watching+0x19/0xc0
[   18.754988]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   18.755185]  ? __pfx_iommufd_fops_release+0x10/0x10
[   18.755364]  __fput+0x424/0xaf0
[   18.755489]  ____fput+0x1f/0x30
[   18.755610]  task_work_run+0x19d/0x2b0
[   18.755751]  ? __pfx_task_work_run+0x10/0x10
[   18.755910]  ? __sanitizer_cov_trace_const_cmp1+0x1e/0x30
[   18.756106]  ? switch_task_namespaces+0xa9/0xe0
[   18.756276]  do_exit+0xac9/0x2790
[   18.756403]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   18.756633]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   18.756813]  ? __pfx_do_exit+0x10/0x10
[   18.756953]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   18.757149]  ? security_file_ioctl+0x9d/0xd0
[   18.757310]  make_task_dead+0x182/0x3c0
[   18.757454]  rewind_stack_and_make_dead+0x17/0x20
[   18.757628] RIP: 0033:0x7f2750e3ee5d
[   18.757760] Code: Unable to access opcode bytes at 0x7f2750e3ee33.
[   18.757978] RSP: 002b:00007ffc0176f538 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   18.758245] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f2750e3ee5d
[   18.758496] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   18.758755] RBP: 00007ffc0176f550 R08: 0000000000000800 R09: 0000000000000800
[   18.759007] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffc0176f668
[   18.759258] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f27511ff000
[   18.759515]  </TASK>
[   18.759599] irq event stamp: 0
[   18.759711] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   18.759934] hardirqs last disabled at (0): [<ffffffff8122f2d1>] copy_process+0x1c51/0x7140
[   18.760226] softirqs last  enabled at (0): [<ffffffff8122f312>] copy_process+0x1c92/0x7140
[   18.760517] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   18.760740] ---[ end trace 0000000000000000 ]---
[   18.763343] iommufd_mock iommufd_mock131: Adding to iommu group 131
[   18.763596] iommufd_mock iommufd_mock131: Removing from iommu group 131
[   18.763849] general protection fault, probably for non-canonical address 0xdffffc0000000006: 0000 [#132] PREEMPT SMP KASAN NOPTI
[   18.764252] KASAN: null-ptr-deref in range [0x0000000000000030-0x0000000000000037]
[   18.764519] CPU: 0 PID: 851 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   18.764825] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   18.765221] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   18.765430] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   18.766072] RSP: 0018:ffff888014627ba8 EFLAGS: 00010206
[   18.766260] RAX: dffffc0000000000 RBX: ffff88801269a000 RCX: 0000000000000000
[   18.766513] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   18.766772] RBP: ffff888014627bc0 R08: 0000000000000001 R09: ffffed100155b11b
[   18.767024] R10: ffff88800aad88df R11: 5f6466756d6d6f69 R12: 0000000000000000
[   18.767276] R13: ffffffff85cc0180 R14: ffff888024c35da0 R15: ffffffff87070ae0
[   18.767528] FS:  00007fcdbed37600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   18.767812] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   18.768017] CR2: 0000000020000080 CR3: 000000000b6da000 CR4: 0000000000750ef0
[   18.768269] PKRU: 55555554
[   18.768371] Call Trace:
[   18.768462]  <TASK>
[   18.768543]  ? show_regs+0x6e/0x80
[   18.768676]  ? die_addr+0x45/0xb0
[   18.768806]  ? exc_general_protection+0x159/0x250
[   18.768986]  ? asm_exc_general_protection+0x2b/0x30
[   18.769168]  ? sysfs_remove_link_from_group+0x21/0x90
[   18.769355]  ? sysfs_remove_link_from_group+0x37/0x90
[   18.769541]  ? sysfs_remove_link_from_group+0x21/0x90
[   18.769727]  iommu_device_unlink+0x85/0xd0
[   18.769881]  iommu_deinit_device+0x11f/0x4c0
[   18.770042]  __iommu_group_remove_device+0x26b/0x300
[   18.770228]  iommu_group_remove_device+0x8a/0xb0
[   18.770401]  iommufd_test+0x1f1a/0x2d10
[   18.770544]  ? __pfx_lock_release+0x10/0x10
[   18.770701]  ? __pfx_lock_acquire+0x10/0x10
[   18.770861]  ? __pfx_iommufd_test+0x10/0x10
[   18.771017]  ? __sanitizer_cov_trace_const_cmp8+0x1c/0x30
[   18.771217]  iommufd_fops_ioctl+0x377/0x510
[   18.771374]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   18.771549]  ? trace_hardirqs_on+0x26/0x120
[   18.771708]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   18.771935]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   18.772118]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   18.772315]  ? security_file_ioctl+0x9d/0xd0
[   18.772477]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   18.772652]  __x64_sys_ioctl+0x1b9/0x230
[   18.772798]  do_syscall_64+0x3c/0x90
[   18.772933]  entry_SYSCALL_64_after_hwframe+0x6e/0xd8
[   18.773117] RIP: 0033:0x7fcdbea3ee5d
[   18.773251] Code: ff c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d 93 af 1b 00 f7 d8 64 89 01 48
[   18.773895] RSP: 002b:00007ffce5669678 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   18.774163] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007fcdbea3ee5d
[   18.774416] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   18.774668] RBP: 00007ffce5669690 R08: 0000000000000800 R09: 0000000000000800
[   18.774923] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffce56697a8
[   18.775175] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007fcdbed78000
[   18.775432]  </TASK>
[   18.775515] Modules linked in:
[   18.775667] ---[ end trace 0000000000000000 ]---
[   18.775836] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   18.776043] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   18.776685] RSP: 0018:ffff88802457fba8 EFLAGS: 00010206
[   18.776874] RAX: dffffc0000000000 RBX: ffff888014f9b000 RCX: 0000000000000000
[   18.777126] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   18.777378] RBP: ffff88802457fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   18.777629] R10: ffff88800aad88df R11: 0000000000000001 R12: 0000000000000000
[   18.777880] R13: ffffffff85cc0180 R14: ffff8880109b6ac0 R15: ffffffff87070ae0
[   18.778132] FS:  00007fcdbed37600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   18.778415] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   18.778628] CR2: 0000000020000080 CR3: 000000000b6da000 CR4: 0000000000750ef0
[   18.778885] PKRU: 55555554
[   18.779236] ------------[ cut here ]------------
[   18.779404] WARNING: CPU: 0 PID: 851 at drivers/iommu/iommufd/main.c:258 iommufd_fops_release+0x2a3/0x300
[   18.779743] Modules linked in:
[   18.779857] CPU: 0 PID: 851 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   18.780164] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   18.780560] RIP: 0010:iommufd_fops_release+0x2a3/0x300
[   18.780748] Code: 45 d0 65 48 2b 04 25 28 00 00 00 75 54 48 81 c4 88 00 00 00 31 c0 5b 41 5c 41 5d 41 5e 41 5f 5d c3 cc cc cc cc e8 ad 4f 0a fe <0f> 0b eb a6 e8 74 23 67 fe e9 f6 fe ff ff 48 89 85 50 ff ff ff e8
[   18.781390] RSP: 0018:ffff888014627c00 EFLAGS: 00010293
[   18.781578] RAX: 0000000000000000 RBX: ffff88800fe06f08 RCX: 0000000000000000
[   18.781830] RDX: ffff888010562500 RSI: ffffffff835563e3 RDI: ffffffff86702b40
[   18.782082] RBP: ffff888014627cb0 R08: 0000000000000000 R09: fffffbfff0eb2644
[   18.782334] R10: ffffffff87593227 R11: ffff8880111ea400 R12: 0000000000000000
[   18.782594] R13: ffff888013607318 R14: ffff888014627c48 R15: ffffffff83556140
[   18.782851] FS:  0000000000000000(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   18.783136] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   18.783341] CR2: 0000000020000080 CR3: 000000000687e000 CR4: 0000000000750ef0
[   18.783594] PKRU: 55555554
[   18.783695] Call Trace:
[   18.783787]  <TASK>
[   18.783868]  ? show_regs+0x6e/0x80
[   18.783999]  ? __warn+0xef/0x340
[   18.784123]  ? report_bug+0x25e/0x4b0
[   18.784262]  ? iommufd_fops_release+0x2a3/0x300
[   18.784430]  ? report_bug+0x2cb/0x4b0
[   18.784572]  ? handle_bug+0x46/0x90
[   18.784705]  ? exc_invalid_op+0x1d/0x50
[   18.784848]  ? asm_exc_invalid_op+0x1f/0x30
[   18.785003]  ? __pfx_iommufd_fops_release+0x10/0x10
[   18.785184]  ? iommufd_fops_release+0x2a3/0x300
[   18.785352]  ? iommufd_fops_release+0x2a3/0x300
[   18.785522]  ? __pfx_iommufd_fops_release+0x10/0x10
[   18.785700]  ? rcu_is_watching+0x19/0xc0
[   18.785848]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   18.786045]  ? __pfx_iommufd_fops_release+0x10/0x10
[   18.786225]  __fput+0x424/0xaf0
[   18.786349]  ____fput+0x1f/0x30
[   18.786471]  task_work_run+0x19d/0x2b0
[   18.786623]  ? __pfx_task_work_run+0x10/0x10
[   18.786787]  ? __sanitizer_cov_trace_const_cmp1+0x1e/0x30
[   18.786988]  ? switch_task_namespaces+0xa9/0xe0
[   18.787161]  do_exit+0xac9/0x2790
[   18.787290]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   18.787516]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   18.787696]  ? __pfx_do_exit+0x10/0x10
[   18.787837]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   18.788033]  ? security_file_ioctl+0x9d/0xd0
[   18.788194]  make_task_dead+0x182/0x3c0
[   18.788339]  rewind_stack_and_make_dead+0x17/0x20
[   18.788513] RIP: 0033:0x7fcdbea3ee5d
[   18.788646] Code: Unable to access opcode bytes at 0x7fcdbea3ee33.
[   18.788863] RSP: 002b:00007ffce5669678 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   18.789132] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007fcdbea3ee5d
[   18.789384] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   18.789635] RBP: 00007ffce5669690 R08: 0000000000000800 R09: 0000000000000800
[   18.789887] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffce56697a8
[   18.790139] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007fcdbed78000
[   18.790396]  </TASK>
[   18.790481] irq event stamp: 0
[   18.790600] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   18.790837] hardirqs last disabled at (0): [<ffffffff8122f2d1>] copy_process+0x1c51/0x7140
[   18.791138] softirqs last  enabled at (0): [<ffffffff8122f312>] copy_process+0x1c92/0x7140
[   18.791430] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   18.791653] ---[ end trace 0000000000000000 ]---
[   18.794187] iommufd_mock iommufd_mock132: Adding to iommu group 132
[   18.794442] iommufd_mock iommufd_mock132: Removing from iommu group 132
[   18.794723] general protection fault, probably for non-canonical address 0xdffffc0000000006: 0000 [#133] PREEMPT SMP KASAN NOPTI
[   18.795166] KASAN: null-ptr-deref in range [0x0000000000000030-0x0000000000000037]
[   18.795435] CPU: 0 PID: 852 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   18.795743] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   18.796141] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   18.796350] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   18.796994] RSP: 0018:ffff888017587ba8 EFLAGS: 00010206
[   18.797183] RAX: dffffc0000000000 RBX: ffff88802308b000 RCX: 0000000000000000
[   18.797435] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   18.797687] RBP: ffff888017587bc0 R08: 0000000000000001 R09: ffffed100155b11b
[   18.797939] R10: ffff88800aad88df R11: 5f6466756d6d6f69 R12: 0000000000000000
[   18.798208] R13: ffffffff85cc0180 R14: ffff888024c35c40 R15: ffffffff87070ae0
[   18.798461] FS:  00007f9b9bb3d600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   18.798750] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   18.798957] CR2: 0000000020000080 CR3: 000000000b6da000 CR4: 0000000000750ef0
[   18.799211] PKRU: 55555554
[   18.799312] Call Trace:
[   18.799404]  <TASK>
[   18.799485]  ? show_regs+0x6e/0x80
[   18.799618]  ? die_addr+0x45/0xb0
[   18.799750]  ? exc_general_protection+0x159/0x250
[   18.799933]  ? asm_exc_general_protection+0x2b/0x30
[   18.800115]  ? sysfs_remove_link_from_group+0x21/0x90
[   18.800302]  ? sysfs_remove_link_from_group+0x37/0x90
[   18.800489]  ? sysfs_remove_link_from_group+0x21/0x90
[   18.800676]  iommu_device_unlink+0x85/0xd0
[   18.800829]  iommu_deinit_device+0x11f/0x4c0
[   18.800991]  __iommu_group_remove_device+0x26b/0x300
[   18.801178]  iommu_group_remove_device+0x8a/0xb0
[   18.801351]  iommufd_test+0x1f1a/0x2d10
[   18.801494]  ? __pfx_lock_release+0x10/0x10
[   18.801650]  ? __pfx_lock_acquire+0x10/0x10
[   18.801808]  ? __pfx_iommufd_test+0x10/0x10
[   18.801965]  ? __sanitizer_cov_trace_const_cmp8+0x1c/0x30
[   18.802165]  iommufd_fops_ioctl+0x377/0x510
[   18.802322]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   18.802497]  ? trace_hardirqs_on+0x26/0x120
[   18.802656]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   18.802886]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   18.803069]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   18.803267]  ? security_file_ioctl+0x9d/0xd0
[   18.803429]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   18.803604]  __x64_sys_ioctl+0x1b9/0x230
[   18.803751]  do_syscall_64+0x3c/0x90
[   18.803886]  entry_SYSCALL_64_after_hwframe+0x6e/0xd8
[   18.804071] RIP: 0033:0x7f9b9b83ee5d
[   18.804204] Code: ff c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d 93 af 1b 00 f7 d8 64 89 01 48
[   18.804849] RSP: 002b:00007ffc5d2acd48 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   18.805118] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f9b9b83ee5d
[   18.805371] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   18.805623] RBP: 00007ffc5d2acd60 R08: 0000000000000800 R09: 0000000000000800
[   18.805876] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffc5d2ace78
[   18.806129] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f9b9bb7e000
[   18.806386]  </TASK>
[   18.806470] Modules linked in:
[   18.806721] ---[ end trace 0000000000000000 ]---
[   18.806892] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   18.807099] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   18.807743] RSP: 0018:ffff88802457fba8 EFLAGS: 00010206
[   18.807932] RAX: dffffc0000000000 RBX: ffff888014f9b000 RCX: 0000000000000000
[   18.808185] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   18.808437] RBP: ffff88802457fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   18.808690] R10: ffff88800aad88df R11: 0000000000000001 R12: 0000000000000000
[   18.808941] R13: ffffffff85cc0180 R14: ffff8880109b6ac0 R15: ffffffff87070ae0
[   18.809194] FS:  00007f9b9bb3d600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   18.809478] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   18.809685] CR2: 0000000020000080 CR3: 000000000b6da000 CR4: 0000000000750ef0
[   18.809938] PKRU: 55555554
[   18.810293] ------------[ cut here ]------------
[   18.810462] WARNING: CPU: 0 PID: 852 at drivers/iommu/iommufd/main.c:258 iommufd_fops_release+0x2a3/0x300
[   18.810814] Modules linked in:
[   18.810930] CPU: 0 PID: 852 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   18.811238] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   18.811638] RIP: 0010:iommufd_fops_release+0x2a3/0x300
[   18.811825] Code: 45 d0 65 48 2b 04 25 28 00 00 00 75 54 48 81 c4 88 00 00 00 31 c0 5b 41 5c 41 5d 41 5e 41 5f 5d c3 cc cc cc cc e8 ad 4f 0a fe <0f> 0b eb a6 e8 74 23 67 fe e9 f6 fe ff ff 48 89 85 50 ff ff ff e8
[   18.812469] RSP: 0018:ffff888017587c00 EFLAGS: 00010293
[   18.812658] RAX: 0000000000000000 RBX: ffff88800fe06308 RCX: 0000000000000000
[   18.812910] RDX: ffff888014cd8000 RSI: ffffffff835563e3 RDI: ffffffff86702b40
[   18.813162] RBP: ffff888017587cb0 R08: 0000000000000000 R09: fffffbfff0eb2644
[   18.813414] R10: ffffffff87593227 R11: ffff888018be4c00 R12: 0000000000000000
[   18.813667] R13: ffff888013606e18 R14: ffff888017587c48 R15: ffffffff83556140
[   18.813919] FS:  0000000000000000(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   18.814203] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   18.814409] CR2: 0000000020000080 CR3: 000000000687e000 CR4: 0000000000750ef0
[   18.814681] PKRU: 55555554
[   18.814784] Call Trace:
[   18.814876]  <TASK>
[   18.814957]  ? show_regs+0x6e/0x80
[   18.815088]  ? __warn+0xef/0x340
[   18.815213]  ? report_bug+0x25e/0x4b0
[   18.815352]  ? iommufd_fops_release+0x2a3/0x300
[   18.815520]  ? report_bug+0x2cb/0x4b0
[   18.815662]  ? handle_bug+0x46/0x90
[   18.815794]  ? exc_invalid_op+0x1d/0x50
[   18.815938]  ? asm_exc_invalid_op+0x1f/0x30
[   18.816092]  ? __pfx_iommufd_fops_release+0x10/0x10
[   18.816274]  ? iommufd_fops_release+0x2a3/0x300
[   18.816443]  ? iommufd_fops_release+0x2a3/0x300
[   18.816613]  ? __pfx_iommufd_fops_release+0x10/0x10
[   18.816792]  ? rcu_is_watching+0x19/0xc0
[   18.816941]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   18.817138]  ? __pfx_iommufd_fops_release+0x10/0x10
[   18.817318]  __fput+0x424/0xaf0
[   18.817443]  ____fput+0x1f/0x30
[   18.817565]  task_work_run+0x19d/0x2b0
[   18.817707]  ? __pfx_task_work_run+0x10/0x10
[   18.817866]  ? __sanitizer_cov_trace_const_cmp1+0x1e/0x30
[   18.818063]  ? switch_task_namespaces+0xa9/0xe0
[   18.818232]  do_exit+0xac9/0x2790
[   18.818359]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   18.818592]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   18.818776]  ? __pfx_do_exit+0x10/0x10
[   18.818917]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   18.819113]  ? security_file_ioctl+0x9d/0xd0
[   18.819275]  make_task_dead+0x182/0x3c0
[   18.819420]  rewind_stack_and_make_dead+0x17/0x20
[   18.819595] RIP: 0033:0x7f9b9b83ee5d
[   18.819728] Code: Unable to access opcode bytes at 0x7f9b9b83ee33.
[   18.819946] RSP: 002b:00007ffc5d2acd48 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   18.820214] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f9b9b83ee5d
[   18.820467] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   18.820719] RBP: 00007ffc5d2acd60 R08: 0000000000000800 R09: 0000000000000800
[   18.820972] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffc5d2ace78
[   18.821224] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f9b9bb7e000
[   18.821481]  </TASK>
[   18.821565] irq event stamp: 0
[   18.821678] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   18.821902] hardirqs last disabled at (0): [<ffffffff8122f2d1>] copy_process+0x1c51/0x7140
[   18.822195] softirqs last  enabled at (0): [<ffffffff8122f312>] copy_process+0x1c92/0x7140
[   18.822488] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   18.822719] ---[ end trace 0000000000000000 ]---
[   18.825271] iommufd_mock iommufd_mock133: Adding to iommu group 133
[   18.825526] iommufd_mock iommufd_mock133: Removing from iommu group 133
[   18.825784] general protection fault, probably for non-canonical address 0xdffffc0000000006: 0000 [#134] PREEMPT SMP KASAN NOPTI
[   18.826196] KASAN: null-ptr-deref in range [0x0000000000000030-0x0000000000000037]
[   18.826468] CPU: 1 PID: 853 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   18.826793] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   18.827197] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   18.827410] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   18.828063] RSP: 0018:ffff88801670fba8 EFLAGS: 00010206
[   18.828256] RAX: dffffc0000000000 RBX: ffff888024539000 RCX: 0000000000000000
[   18.828511] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   18.828767] RBP: ffff88801670fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   18.829022] R10: ffff88800aad88df R11: 5f6466756d6d6f69 R12: 0000000000000000
[   18.829277] R13: ffffffff85cc0180 R14: ffff88801679ab40 R15: ffffffff87070ae0
[   18.829533] FS:  00007f5a76d2c600(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
[   18.829824] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   18.830037] CR2: 0000000020000080 CR3: 0000000018a06000 CR4: 0000000000750ee0
[   18.830317] PKRU: 55555554
[   18.830420] Call Trace:
[   18.830515]  <TASK>
[   18.830597]  ? show_regs+0x6e/0x80
[   18.830732]  ? die_addr+0x45/0xb0
[   18.830867]  ? exc_general_protection+0x159/0x250
[   18.831047]  ? asm_exc_general_protection+0x2b/0x30
[   18.831234]  ? sysfs_remove_link_from_group+0x21/0x90
[   18.831423]  ? sysfs_remove_link_from_group+0x37/0x90
[   18.831613]  ? sysfs_remove_link_from_group+0x21/0x90
[   18.831802]  iommu_device_unlink+0x85/0xd0
[   18.831958]  iommu_deinit_device+0x11f/0x4c0
[   18.832123]  __iommu_group_remove_device+0x26b/0x300
[   18.832312]  iommu_group_remove_device+0x8a/0xb0
[   18.832488]  iommufd_test+0x1f1a/0x2d10
[   18.832634]  ? __pfx_lock_release+0x10/0x10
[   18.832792]  ? __pfx_lock_acquire+0x10/0x10
[   18.832953]  ? __pfx_iommufd_test+0x10/0x10
[   18.833112]  ? __sanitizer_cov_trace_const_cmp8+0x1c/0x30
[   18.833316]  iommufd_fops_ioctl+0x377/0x510
[   18.833476]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   18.833654]  ? trace_hardirqs_on+0x26/0x120
[   18.833815]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   18.834048]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   18.834234]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   18.834435]  ? security_file_ioctl+0x9d/0xd0
[   18.834600]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   18.834803]  __x64_sys_ioctl+0x1b9/0x230
[   18.834953]  do_syscall_64+0x3c/0x90
[   18.835089]  entry_SYSCALL_64_after_hwframe+0x6e/0xd8
[   18.835277] RIP: 0033:0x7f5a76a3ee5d
[   18.835413] Code: ff c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d 93 af 1b 00 f7 d8 64 89 01 48
[   18.836066] RSP: 002b:00007ffe7c2a7ec8 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   18.836339] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f5a76a3ee5d
[   18.836595] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   18.836850] RBP: 00007ffe7c2a7ee0 R08: 0000000000000800 R09: 0000000000000800
[   18.837111] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffe7c2a7ff8
[   18.837367] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f5a76d6d000
[   18.837628]  </TASK>
[   18.837713] Modules linked in:
[   18.837881] ---[ end trace 0000000000000000 ]---
[   18.838055] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   18.838268] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   18.838961] RSP: 0018:ffff88802457fba8 EFLAGS: 00010206
[   18.839171] RAX: dffffc0000000000 RBX: ffff888014f9b000 RCX: 0000000000000000
[   18.839428] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   18.839683] RBP: ffff88802457fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   18.839939] R10: ffff88800aad88df R11: 0000000000000001 R12: 0000000000000000
[   18.840193] R13: ffffffff85cc0180 R14: ffff8880109b6ac0 R15: ffffffff87070ae0
[   18.840449] FS:  00007f5a76d2c600(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
[   18.840737] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   18.840965] CR2: 0000000020000080 CR3: 0000000018a06000 CR4: 0000000000750ee0
[   18.841224] PKRU: 55555554
[   18.841723] ------------[ cut here ]------------
[   18.841908] WARNING: CPU: 0 PID: 853 at drivers/iommu/iommufd/main.c:258 iommufd_fops_release+0x2a3/0x300
[   18.842258] Modules linked in:
[   18.842376] CPU: 0 PID: 853 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   18.842733] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   18.843144] RIP: 0010:iommufd_fops_release+0x2a3/0x300
[   18.843334] Code: 45 d0 65 48 2b 04 25 28 00 00 00 75 54 48 81 c4 88 00 00 00 31 c0 5b 41 5c 41 5d 41 5e 41 5f 5d c3 cc cc cc cc e8 ad 4f 0a fe <0f> 0b eb a6 e8 74 23 67 fe e9 f6 fe ff ff 48 89 85 50 ff ff ff e8
[   18.843979] RSP: 0018:ffff88801670fc00 EFLAGS: 00010293
[   18.844169] RAX: 0000000000000000 RBX: ffff88801248a208 RCX: 0000000000000000
[   18.844422] RDX: ffff888013a02500 RSI: ffffffff835563e3 RDI: ffffffff86702b40
[   18.844675] RBP: ffff88801670fcb0 R08: 0000000000000000 R09: fffffbfff0eb2644
[   18.844928] R10: ffffffff87593227 R11: ffff88801125f000 R12: 0000000000000000
[   18.845181] R13: ffff888012485a98 R14: ffff88801670fc48 R15: ffffffff83556140
[   18.845434] FS:  0000000000000000(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   18.845719] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   18.845926] CR2: 00007fa281df3008 CR3: 000000000687e000 CR4: 0000000000750ef0
[   18.846180] PKRU: 55555554
[   18.846282] Call Trace:
[   18.846374]  <TASK>
[   18.846455]  ? show_regs+0x6e/0x80
[   18.846630]  ? __warn+0xef/0x340
[   18.846760]  ? report_bug+0x25e/0x4b0
[   18.846904]  ? iommufd_fops_release+0x2a3/0x300
[   18.847077]  ? report_bug+0x2cb/0x4b0
[   18.847226]  ? handle_bug+0x46/0x90
[   18.847358]  ? exc_invalid_op+0x1d/0x50
[   18.847503]  ? asm_exc_invalid_op+0x1f/0x30
[   18.847658]  ? __pfx_iommufd_fops_release+0x10/0x10
[   18.847841]  ? iommufd_fops_release+0x2a3/0x300
[   18.848011]  ? iommufd_fops_release+0x2a3/0x300
[   18.848182]  ? __pfx_iommufd_fops_release+0x10/0x10
[   18.848362]  ? rcu_is_watching+0x19/0xc0
[   18.848511]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   18.848710]  ? __pfx_iommufd_fops_release+0x10/0x10
[   18.848891]  __fput+0x424/0xaf0
[   18.849016]  ____fput+0x1f/0x30
[   18.849138]  task_work_run+0x19d/0x2b0
[   18.849281]  ? __pfx_task_work_run+0x10/0x10
[   18.849442]  ? __sanitizer_cov_trace_const_cmp1+0x1e/0x30
[   18.849639]  ? switch_task_namespaces+0xa9/0xe0
[   18.849811]  do_exit+0xac9/0x2790
[   18.849938]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   18.850168]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   18.850350]  ? __pfx_do_exit+0x10/0x10
[   18.850514]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   18.850743]  ? security_file_ioctl+0x9d/0xd0
[   18.850912]  make_task_dead+0x182/0x3c0
[   18.851061]  rewind_stack_and_make_dead+0x17/0x20
[   18.851242] RIP: 0033:0x7f5a76a3ee5d
[   18.851376] Code: Unable to access opcode bytes at 0x7f5a76a3ee33.
[   18.851595] RSP: 002b:00007ffe7c2a7ec8 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   18.851865] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f5a76a3ee5d
[   18.852118] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   18.852392] RBP: 00007ffe7c2a7ee0 R08: 0000000000000800 R09: 0000000000000800
[   18.852716] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffe7c2a7ff8
[   18.852991] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f5a76d6d000
[   18.853248]  </TASK>
[   18.853332] irq event stamp: 0
[   18.853446] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   18.853671] hardirqs last disabled at (0): [<ffffffff8122f2d1>] copy_process+0x1c51/0x7140
[   18.853965] softirqs last  enabled at (0): [<ffffffff8122f312>] copy_process+0x1c92/0x7140
[   18.854259] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   18.854482] ---[ end trace 0000000000000000 ]---
[   18.857056] iommufd_mock iommufd_mock134: Adding to iommu group 134
[   18.857320] iommufd_mock iommufd_mock134: Removing from iommu group 134
[   18.857584] general protection fault, probably for non-canonical address 0xdffffc0000000006: 0000 [#135] PREEMPT SMP KASAN NOPTI
[   18.858005] KASAN: null-ptr-deref in range [0x0000000000000030-0x0000000000000037]
[   18.858285] CPU: 1 PID: 854 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   18.858608] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   18.859031] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   18.859249] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   18.859908] RSP: 0018:ffff888017587ba8 EFLAGS: 00010206
[   18.860100] RAX: dffffc0000000000 RBX: ffff88802453b000 RCX: 0000000000000000
[   18.860356] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   18.860612] RBP: ffff888017587bc0 R08: 0000000000000001 R09: ffffed100155b11b
[   18.860869] R10: ffff88800aad88df R11: 5f6466756d6d6f69 R12: 0000000000000000
[   18.861125] R13: ffffffff85cc0180 R14: ffff88801679a5c0 R15: ffffffff87070ae0
[   18.861381] FS:  00007f32119f6600(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
[   18.861670] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   18.861879] CR2: 0000000020000080 CR3: 000000000b6da000 CR4: 0000000000750ee0
[   18.862137] PKRU: 55555554
[   18.862240] Call Trace:
[   18.862333]  <TASK>
[   18.862415]  ? show_regs+0x6e/0x80
[   18.862550]  ? die_addr+0x45/0xb0
[   18.862687]  ? exc_general_protection+0x159/0x250
[   18.862876]  ? asm_exc_general_protection+0x2b/0x30
[   18.863062]  ? sysfs_remove_link_from_group+0x21/0x90
[   18.863252]  ? sysfs_remove_link_from_group+0x37/0x90
[   18.863442]  ? sysfs_remove_link_from_group+0x21/0x90
[   18.863632]  iommu_device_unlink+0x85/0xd0
[   18.863787]  iommu_deinit_device+0x11f/0x4c0
[   18.863952]  __iommu_group_remove_device+0x26b/0x300
[   18.864141]  iommu_group_remove_device+0x8a/0xb0
[   18.864316]  iommufd_test+0x1f1a/0x2d10
[   18.864461]  ? __pfx_lock_release+0x10/0x10
[   18.864621]  ? __pfx_lock_acquire+0x10/0x10
[   18.864782]  ? __pfx_iommufd_test+0x10/0x10
[   18.864941]  ? __sanitizer_cov_trace_const_cmp8+0x1c/0x30
[   18.865144]  iommufd_fops_ioctl+0x377/0x510
[   18.865305]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   18.865482]  ? trace_hardirqs_on+0x26/0x120
[   18.865643]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   18.865875]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   18.866061]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   18.866262]  ? security_file_ioctl+0x9d/0xd0
[   18.866427]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   18.866607]  __x64_sys_ioctl+0x1b9/0x230
[   18.866784]  do_syscall_64+0x3c/0x90
[   18.866924]  entry_SYSCALL_64_after_hwframe+0x6e/0xd8
[   18.867111] RIP: 0033:0x7f321163ee5d
[   18.867246] Code: ff c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d 93 af 1b 00 f7 d8 64 89 01 48
[   18.867899] RSP: 002b:00007ffde02a1318 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   18.868171] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f321163ee5d
[   18.868427] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   18.868682] RBP: 00007ffde02a1330 R08: 0000000000000800 R09: 0000000000000800
[   18.868937] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffde02a1448
[   18.869192] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f3211a37000
[   18.869454]  </TASK>
[   18.869539] Modules linked in:
[   18.869710] ---[ end trace 0000000000000000 ]---
[   18.869884] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   18.870098] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   18.870795] RSP: 0018:ffff88802457fba8 EFLAGS: 00010206
[   18.871001] RAX: dffffc0000000000 RBX: ffff888014f9b000 RCX: 0000000000000000
[   18.871257] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   18.871513] RBP: ffff88802457fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   18.871770] R10: ffff88800aad88df R11: 0000000000000001 R12: 0000000000000000
[   18.872026] R13: ffffffff85cc0180 R14: ffff8880109b6ac0 R15: ffffffff87070ae0
[   18.872283] FS:  00007f32119f6600(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
[   18.872572] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   18.872782] CR2: 0000000020000080 CR3: 000000000b6da000 CR4: 0000000000750ee0
[   18.873038] PKRU: 55555554
[   18.873439] ------------[ cut here ]------------
[   18.873610] WARNING: CPU: 1 PID: 854 at drivers/iommu/iommufd/main.c:258 iommufd_fops_release+0x2a3/0x300
[   18.873952] Modules linked in:
[   18.874070] CPU: 1 PID: 854 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   18.874381] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   18.874908] RIP: 0010:iommufd_fops_release+0x2a3/0x300
[   18.875105] Code: 45 d0 65 48 2b 04 25 28 00 00 00 75 54 48 81 c4 88 00 00 00 31 c0 5b 41 5c 41 5d 41 5e 41 5f 5d c3 cc cc cc cc e8 ad 4f 0a fe <0f> 0b eb a6 e8 74 23 67 fe e9 f6 fe ff ff 48 89 85 50 ff ff ff e8
[   18.875810] RSP: 0018:ffff888017587c00 EFLAGS: 00010293
[   18.876031] RAX: 0000000000000000 RBX: ffff88801248a908 RCX: 0000000000000000
[   18.876307] RDX: ffff888013a04a00 RSI: ffffffff835563e3 RDI: ffffffff86702b48
[   18.876569] RBP: ffff888017587cb0 R08: 0000000000000000 R09: fffffbfff0eb2644
[   18.876830] R10: ffffffff87593227 R11: ffff888018942c00 R12: 0000000000000000
[   18.877092] R13: ffff888012e14918 R14: ffff888017587c48 R15: ffffffff83556140
[   18.877354] FS:  0000000000000000(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
[   18.877648] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   18.877862] CR2: 0000000020000080 CR3: 000000000687e000 CR4: 0000000000750ee0
[   18.878124] PKRU: 55555554
[   18.878229] Call Trace:
[   18.878324]  <TASK>
[   18.878408]  ? show_regs+0x6e/0x80
[   18.878544]  ? __warn+0xef/0x340
[   18.878680]  ? report_bug+0x25e/0x4b0
[   18.878829]  ? iommufd_fops_release+0x2a3/0x300
[   18.879003]  ? report_bug+0x2cb/0x4b0
[   18.879149]  ? handle_bug+0x46/0x90
[   18.879286]  ? exc_invalid_op+0x1d/0x50
[   18.879435]  ? asm_exc_invalid_op+0x1f/0x30
[   18.879595]  ? __pfx_iommufd_fops_release+0x10/0x10
[   18.879783]  ? iommufd_fops_release+0x2a3/0x300
[   18.879958]  ? iommufd_fops_release+0x2a3/0x300
[   18.880134]  ? __pfx_iommufd_fops_release+0x10/0x10
[   18.880319]  ? rcu_is_watching+0x19/0xc0
[   18.880472]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   18.880677]  ? __pfx_iommufd_fops_release+0x10/0x10
[   18.880863]  __fput+0x424/0xaf0
[   18.880992]  ____fput+0x1f/0x30
[   18.881118]  task_work_run+0x19d/0x2b0
[   18.881265]  ? __pfx_task_work_run+0x10/0x10
[   18.881429]  ? __sanitizer_cov_trace_const_cmp1+0x1e/0x30
[   18.881633]  ? switch_task_namespaces+0xa9/0xe0
[   18.881809]  do_exit+0xac9/0x2790
[   18.881940]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   18.882174]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   18.882362]  ? __pfx_do_exit+0x10/0x10
[   18.882507]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   18.882716]  ? security_file_ioctl+0x9d/0xd0
[   18.882885]  make_task_dead+0x182/0x3c0
[   18.883035]  rewind_stack_and_make_dead+0x17/0x20
[   18.883216] RIP: 0033:0x7f321163ee5d
[   18.883354] Code: Unable to access opcode bytes at 0x7f321163ee33.
[   18.883580] RSP: 002b:00007ffde02a1318 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   18.883859] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f321163ee5d
[   18.884120] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   18.884382] RBP: 00007ffde02a1330 R08: 0000000000000800 R09: 0000000000000800
[   18.884643] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffde02a1448
[   18.884904] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f3211a37000
[   18.885172]  </TASK>
[   18.885259] irq event stamp: 0
[   18.885377] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   18.885609] hardirqs last disabled at (0): [<ffffffff8122f2d1>] copy_process+0x1c51/0x7140
[   18.885912] softirqs last  enabled at (0): [<ffffffff8122f312>] copy_process+0x1c92/0x7140
[   18.886215] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   18.886446] ---[ end trace 0000000000000000 ]---
[   18.889164] iommufd_mock iommufd_mock135: Adding to iommu group 135
[   18.889423] iommufd_mock iommufd_mock135: Removing from iommu group 135
[   18.889682] general protection fault, probably for non-canonical address 0xdffffc0000000006: 0000 [#136] PREEMPT SMP KASAN NOPTI
[   18.890113] KASAN: null-ptr-deref in range [0x0000000000000030-0x0000000000000037]
[   18.890385] CPU: 0 PID: 855 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   18.890700] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   18.891109] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   18.891324] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   18.891981] RSP: 0018:ffff88801096fba8 EFLAGS: 00010206
[   18.892174] RAX: dffffc0000000000 RBX: ffff88802308a000 RCX: 0000000000000000
[   18.892431] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   18.892688] RBP: ffff88801096fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   18.892945] R10: ffff88800aad88df R11: 5f6466756d6d6f69 R12: 0000000000000000
[   18.893202] R13: ffffffff85cc0180 R14: ffff888024c35180 R15: ffffffff87070ae0
[   18.893460] FS:  00007f97bd800600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   18.893750] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   18.893960] CR2: 0000000020000080 CR3: 0000000018bcc000 CR4: 0000000000750ef0
[   18.894218] PKRU: 55555554
[   18.894321] Call Trace:
[   18.894415]  <TASK>
[   18.894498]  ? show_regs+0x6e/0x80
[   18.894633]  ? die_addr+0x45/0xb0
[   18.894770]  ? exc_general_protection+0x159/0x250
[   18.894952]  ? asm_exc_general_protection+0x2b/0x30
[   18.895135]  ? sysfs_remove_link_from_group+0x21/0x90
[   18.895322]  ? sysfs_remove_link_from_group+0x37/0x90
[   18.895508]  ? sysfs_remove_link_from_group+0x21/0x90
[   18.895694]  iommu_device_unlink+0x85/0xd0
[   18.895847]  iommu_deinit_device+0x11f/0x4c0
[   18.896009]  __iommu_group_remove_device+0x26b/0x300
[   18.896195]  iommu_group_remove_device+0x8a/0xb0
[   18.896368]  iommufd_test+0x1f1a/0x2d10
[   18.896511]  ? __pfx_lock_release+0x10/0x10
[   18.896668]  ? __pfx_lock_acquire+0x10/0x10
[   18.896826]  ? __pfx_iommufd_test+0x10/0x10
[   18.896982]  ? __sanitizer_cov_trace_const_cmp8+0x1c/0x30
[   18.897182]  iommufd_fops_ioctl+0x377/0x510
[   18.897340]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   18.897514]  ? trace_hardirqs_on+0x26/0x120
[   18.897673]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   18.897901]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   18.898083]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   18.898288]  ? security_file_ioctl+0x9d/0xd0
[   18.898451]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   18.898629]  __x64_sys_ioctl+0x1b9/0x230
[   18.898805]  do_syscall_64+0x3c/0x90
[   18.898943]  entry_SYSCALL_64_after_hwframe+0x6e/0xd8
[   18.899128] RIP: 0033:0x7f97bd43ee5d
[   18.899261] Code: ff c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d 93 af 1b 00 f7 d8 64 89 01 48
[   18.899903] RSP: 002b:00007ffc77d46a28 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   18.900178] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f97bd43ee5d
[   18.900430] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   18.900682] RBP: 00007ffc77d46a40 R08: 0000000000000800 R09: 0000000000000800
[   18.900934] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffc77d46b58
[   18.901195] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f97bd841000
[   18.901459]  </TASK>
[   18.901544] Modules linked in:
[   18.901706] ---[ end trace 0000000000000000 ]---
[   18.901878] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   18.902089] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   18.902800] RSP: 0018:ffff88802457fba8 EFLAGS: 00010206
[   18.903015] RAX: dffffc0000000000 RBX: ffff888014f9b000 RCX: 0000000000000000
[   18.903329] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   18.903588] RBP: ffff88802457fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   18.903902] R10: ffff88800aad88df R11: 0000000000000001 R12: 0000000000000000
[   18.904160] R13: ffffffff85cc0180 R14: ffff8880109b6ac0 R15: ffffffff87070ae0
[   18.904472] FS:  00007f97bd800600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   18.904763] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   18.905025] CR2: 0000000020000080 CR3: 0000000018bcc000 CR4: 0000000000750ef0
[   18.905285] PKRU: 55555554
[   18.905932] ------------[ cut here ]------------
[   18.906168] WARNING: CPU: 0 PID: 855 at drivers/iommu/iommufd/main.c:258 iommufd_fops_release+0x2a3/0x300
[   18.906519] Modules linked in:
[   18.906697] CPU: 0 PID: 855 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   18.907017] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   18.907421] RIP: 0010:iommufd_fops_release+0x2a3/0x300
[   18.907613] Code: 45 d0 65 48 2b 04 25 28 00 00 00 75 54 48 81 c4 88 00 00 00 31 c0 5b 41 5c 41 5d 41 5e 41 5f 5d c3 cc cc cc cc e8 ad 4f 0a fe <0f> 0b eb a6 e8 74 23 67 fe e9 f6 fe ff ff 48 89 85 50 ff ff ff e8
[   18.908268] RSP: 0018:ffff88801096fc00 EFLAGS: 00010293
[   18.908460] RAX: 0000000000000000 RBX: ffff88800fe06208 RCX: 0000000000000000
[   18.908717] RDX: ffff888014cdca00 RSI: ffffffff835563e3 RDI: ffffffff86702b40
[   18.908974] RBP: ffff88801096fcb0 R08: 0000000000000000 R09: fffffbfff0eb2644
[   18.909230] R10: ffffffff87593227 R11: ffff88800f519e00 R12: 0000000000000000
[   18.909489] R13: ffff8880114e2418 R14: ffff88801096fc48 R15: ffffffff83556140
[   18.909746] FS:  0000000000000000(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   18.910036] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   18.910246] CR2: 0000000020000080 CR3: 00000000133d2000 CR4: 0000000000750ef0
[   18.910504] PKRU: 55555554
[   18.910642] Call Trace:
[   18.910736]  <TASK>
[   18.910827]  ? show_regs+0x6e/0x80
[   18.911022]  ? __warn+0xef/0x340
[   18.911151]  ? report_bug+0x25e/0x4b0
[   18.911294]  ? iommufd_fops_release+0x2a3/0x300
[   18.911466]  ? report_bug+0x2cb/0x4b0
[   18.911619]  ? handle_bug+0x46/0x90
[   18.911804]  ? exc_invalid_op+0x1d/0x50
[   18.911951]  ? asm_exc_invalid_op+0x1f/0x30
[   18.912109]  ? __pfx_iommufd_fops_release+0x10/0x10
[   18.912294]  ? iommufd_fops_release+0x2a3/0x300
[   18.912465]  ? iommufd_fops_release+0x2a3/0x300
[   18.912639]  ? __pfx_iommufd_fops_release+0x10/0x10
[   18.912836]  ? rcu_is_watching+0x19/0xc0
[   18.913025]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   18.913227]  ? __pfx_iommufd_fops_release+0x10/0x10
[   18.913410]  __fput+0x424/0xaf0
[   18.913551]  ____fput+0x1f/0x30
[   18.913714]  task_work_run+0x19d/0x2b0
[   18.913860]  ? __pfx_task_work_run+0x10/0x10
[   18.914022]  ? __sanitizer_cov_trace_const_cmp1+0x1e/0x30
[   18.914232]  ? switch_task_namespaces+0xa9/0xe0
[   18.914444]  do_exit+0xac9/0x2790
[   18.914587]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   18.914820]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   18.915005]  ? __pfx_do_exit+0x10/0x10
[   18.915148]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   18.915406]  ? security_file_ioctl+0x9d/0xd0
[   18.915571]  make_task_dead+0x182/0x3c0
[   18.915719]  rewind_stack_and_make_dead+0x17/0x20
[   18.915897] RIP: 0033:0x7f97bd43ee5d
[   18.916045] Code: Unable to access opcode bytes at 0x7f97bd43ee33.
[   18.916310] RSP: 002b:00007ffc77d46a28 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   18.916584] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f97bd43ee5d
[   18.916899] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   18.917156] RBP: 00007ffc77d46a40 R08: 0000000000000800 R09: 0000000000000800
[   18.917421] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffc77d46b58
[   18.917731] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f97bd841000
[   18.917994]  </TASK>
[   18.918079] irq event stamp: 0
[   18.918216] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   18.918481] hardirqs last disabled at (0): [<ffffffff8122f2d1>] copy_process+0x1c51/0x7140
[   18.918790] softirqs last  enabled at (0): [<ffffffff8122f312>] copy_process+0x1c92/0x7140
[   18.919160] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   18.919388] ---[ end trace 0000000000000000 ]---
[   18.922209] iommufd_mock iommufd_mock136: Adding to iommu group 136
[   18.922458] iommufd_mock iommufd_mock136: Removing from iommu group 136
[   18.922738] general protection fault, probably for non-canonical address 0xdffffc0000000006: 0000 [#137] PREEMPT SMP KASAN NOPTI
[   18.923157] KASAN: null-ptr-deref in range [0x0000000000000030-0x0000000000000037]
[   18.923428] CPU: 0 PID: 856 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   18.923742] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   18.924184] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   18.924399] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   18.925055] RSP: 0018:ffff88801670fba8 EFLAGS: 00010206
[   18.925248] RAX: dffffc0000000000 RBX: ffff888023088000 RCX: 0000000000000000
[   18.925506] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   18.925762] RBP: ffff88801670fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   18.926020] R10: ffff88800aad88df R11: 5f6466756d6d6f69 R12: 0000000000000000
[   18.926277] R13: ffffffff85cc0180 R14: ffff888024c35ee0 R15: ffffffff87070ae0
[   18.926534] FS:  00007f6c6cd34600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   18.926828] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   18.927038] CR2: 0000000020000080 CR3: 000000000b6da000 CR4: 0000000000750ef0
[   18.927296] PKRU: 55555554
[   18.927399] Call Trace:
[   18.927493]  <TASK>
[   18.927576]  ? show_regs+0x6e/0x80
[   18.927712]  ? die_addr+0x45/0xb0
[   18.927845]  ? exc_general_protection+0x159/0x250
[   18.928028]  ? asm_exc_general_protection+0x2b/0x30
[   18.928214]  ? sysfs_remove_link_from_group+0x21/0x90
[   18.928403]  ? sysfs_remove_link_from_group+0x37/0x90
[   18.928594]  ? sysfs_remove_link_from_group+0x21/0x90
[   18.928784]  iommu_device_unlink+0x85/0xd0
[   18.928940]  iommu_deinit_device+0x11f/0x4c0
[   18.929106]  __iommu_group_remove_device+0x26b/0x300
[   18.929295]  iommu_group_remove_device+0x8a/0xb0
[   18.929472]  iommufd_test+0x1f1a/0x2d10
[   18.929618]  ? __pfx_lock_release+0x10/0x10
[   18.929778]  ? __pfx_lock_acquire+0x10/0x10
[   18.929939]  ? __pfx_iommufd_test+0x10/0x10
[   18.930098]  ? __sanitizer_cov_trace_const_cmp8+0x1c/0x30
[   18.930302]  iommufd_fops_ioctl+0x377/0x510
[   18.930467]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   18.930646]  ? trace_hardirqs_on+0x26/0x120
[   18.930814]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   18.931048]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   18.931230]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   18.931428]  ? security_file_ioctl+0x9d/0xd0
[   18.931590]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   18.931766]  __x64_sys_ioctl+0x1b9/0x230
[   18.931913]  do_syscall_64+0x3c/0x90
[   18.932047]  entry_SYSCALL_64_after_hwframe+0x6e/0xd8
[   18.932231] RIP: 0033:0x7f6c6ca3ee5d
[   18.932365] Code: ff c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d 93 af 1b 00 f7 d8 64 89 01 48
[   18.933007] RSP: 002b:00007ffd9331f9d8 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   18.933275] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f6c6ca3ee5d
[   18.933527] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   18.933779] RBP: 00007ffd9331f9f0 R08: 0000000000000800 R09: 0000000000000800
[   18.934032] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffd9331fb08
[   18.934284] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f6c6cd75000
[   18.934541]  </TASK>
[   18.934627] Modules linked in:
[   18.934809] ---[ end trace 0000000000000000 ]---
[   18.934994] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   18.935205] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   18.935865] RSP: 0018:ffff88802457fba8 EFLAGS: 00010206
[   18.936053] RAX: dffffc0000000000 RBX: ffff888014f9b000 RCX: 0000000000000000
[   18.936305] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   18.936556] RBP: ffff88802457fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   18.936808] R10: ffff88800aad88df R11: 0000000000000001 R12: 0000000000000000
[   18.937082] R13: ffffffff85cc0180 R14: ffff8880109b6ac0 R15: ffffffff87070ae0
[   18.937336] FS:  00007f6c6cd34600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   18.937621] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   18.937826] CR2: 0000000020000080 CR3: 000000000b6da000 CR4: 0000000000750ef0
[   18.938078] PKRU: 55555554
[   18.938815] ------------[ cut here ]------------
[   18.939070] WARNING: CPU: 0 PID: 856 at drivers/iommu/iommufd/main.c:258 iommufd_fops_release+0x2a3/0x300
[   18.939412] Modules linked in:
[   18.939526] CPU: 0 PID: 856 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   18.939900] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   18.940303] RIP: 0010:iommufd_fops_release+0x2a3/0x300
[   18.940531] Code: 45 d0 65 48 2b 04 25 28 00 00 00 75 54 48 81 c4 88 00 00 00 31 c0 5b 41 5c 41 5d 41 5e 41 5f 5d c3 cc cc cc cc e8 ad 4f 0a fe <0f> 0b eb a6 e8 74 23 67 fe e9 f6 fe ff ff 48 89 85 50 ff ff ff e8
[   18.941248] RSP: 0018:ffff88801670fc00 EFLAGS: 00010293
[   18.941439] RAX: 0000000000000000 RBX: ffff88800fe06808 RCX: 0000000000000000
[   18.941690] RDX: ffff888014580000 RSI: ffffffff835563e3 RDI: ffffffff86702b40
[   18.942011] RBP: ffff88801670fcb0 R08: 0000000000000000 R09: fffffbfff0eb2644
[   18.942269] R10: ffffffff87593227 R11: ffff8880127ae200 R12: 0000000000000000
[   18.942541] R13: ffff888011185818 R14: ffff88801670fc48 R15: ffffffff83556140
[   18.942948] FS:  0000000000000000(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   18.943233] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   18.943440] CR2: 0000000020000080 CR3: 000000000687e000 CR4: 0000000000750ef0
[   18.943716] PKRU: 55555554
[   18.943849] Call Trace:
[   18.943942]  <TASK>
[   18.944022]  ? show_regs+0x6e/0x80
[   18.944154]  ? __warn+0xef/0x340
[   18.944278]  ? report_bug+0x25e/0x4b0
[   18.944464]  ? iommufd_fops_release+0x2a3/0x300
[   18.944633]  ? report_bug+0x2cb/0x4b0
[   18.944774]  ? handle_bug+0x46/0x90
[   18.944906]  ? exc_invalid_op+0x1d/0x50
[   18.945050]  ? asm_exc_invalid_op+0x1f/0x30
[   18.945257]  ? __pfx_iommufd_fops_release+0x10/0x10
[   18.945440]  ? iommufd_fops_release+0x2a3/0x300
[   18.945609]  ? iommufd_fops_release+0x2a3/0x300
[   18.945788]  ? __pfx_iommufd_fops_release+0x10/0x10
[   18.946007]  ? rcu_is_watching+0x19/0xc0
[   18.946156]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   18.946353]  ? __pfx_iommufd_fops_release+0x10/0x10
[   18.946586]  __fput+0x424/0xaf0
[   18.946712]  ____fput+0x1f/0x30
[   18.946840]  task_work_run+0x19d/0x2b0
[   18.946986]  ? __pfx_task_work_run+0x10/0x10
[   18.947146]  ? __sanitizer_cov_trace_const_cmp1+0x1e/0x30
[   18.947342]  ? switch_task_namespaces+0xa9/0xe0
[   18.947511]  do_exit+0xac9/0x2790
[   18.947687]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   18.947914]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   18.948094]  ? __pfx_do_exit+0x10/0x10
[   18.948235]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   18.948491]  ? security_file_ioctl+0x9d/0xd0
[   18.948653]  make_task_dead+0x182/0x3c0
[   18.948798]  rewind_stack_and_make_dead+0x17/0x20
[   18.948972] RIP: 0033:0x7f6c6ca3ee5d
[   18.949167] Code: Unable to access opcode bytes at 0x7f6c6ca3ee33.
[   18.949385] RSP: 002b:00007ffd9331f9d8 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   18.949657] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f6c6ca3ee5d
[   18.949970] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   18.950229] RBP: 00007ffd9331f9f0 R08: 0000000000000800 R09: 0000000000000800
[   18.950552] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffd9331fb08
[   18.950824] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f6c6cd75000
[   18.951087]  </TASK>
[   18.951171] irq event stamp: 0
[   18.951284] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   18.951508] hardirqs last disabled at (0): [<ffffffff8122f2d1>] copy_process+0x1c51/0x7140
[   18.951880] softirqs last  enabled at (0): [<ffffffff8122f312>] copy_process+0x1c92/0x7140
[   18.952173] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   18.952458] ---[ end trace 0000000000000000 ]---
[   18.955259] iommufd_mock iommufd_mock137: Adding to iommu group 137
[   18.955505] iommufd_mock iommufd_mock137: Removing from iommu group 137
[   18.955760] general protection fault, probably for non-canonical address 0xdffffc0000000006: 0000 [#138] PREEMPT SMP KASAN NOPTI
[   18.956228] KASAN: null-ptr-deref in range [0x0000000000000030-0x0000000000000037]
[   18.956496] CPU: 0 PID: 857 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   18.956804] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   18.957219] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   18.957434] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   18.958076] RSP: 0018:ffff88801096fba8 EFLAGS: 00010206
[   18.958267] RAX: dffffc0000000000 RBX: ffff88802308e000 RCX: 0000000000000000
[   18.958524] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   18.958791] RBP: ffff88801096fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   18.959043] R10: ffff88800aad88df R11: 5f6466756d6d6f69 R12: 0000000000000000
[   18.959295] R13: ffffffff85cc0180 R14: ffff888024c35b00 R15: ffffffff87070ae0
[   18.959548] FS:  00007f08ea0ea600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   18.959832] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   18.960039] CR2: 0000000020000080 CR3: 0000000018bcc000 CR4: 0000000000750ef0
[   18.960292] PKRU: 55555554
[   18.960393] Call Trace:
[   18.960485]  <TASK>
[   18.960566]  ? show_regs+0x6e/0x80
[   18.960699]  ? die_addr+0x45/0xb0
[   18.960829]  ? exc_general_protection+0x159/0x250
[   18.961008]  ? asm_exc_general_protection+0x2b/0x30
[   18.961190]  ? sysfs_remove_link_from_group+0x21/0x90
[   18.961377]  ? sysfs_remove_link_from_group+0x37/0x90
[   18.961564]  ? sysfs_remove_link_from_group+0x21/0x90
[   18.961750]  iommu_device_unlink+0x85/0xd0
[   18.961904]  iommu_deinit_device+0x11f/0x4c0
[   18.962067]  __iommu_group_remove_device+0x26b/0x300
[   18.962252]  iommu_group_remove_device+0x8a/0xb0
[   18.962425]  iommufd_test+0x1f1a/0x2d10
[   18.962568]  ? __pfx_lock_release+0x10/0x10
[   18.962728]  ? __pfx_lock_acquire+0x10/0x10
[   18.962892]  ? __pfx_iommufd_test+0x10/0x10
[   18.963048]  ? __sanitizer_cov_trace_const_cmp8+0x1c/0x30
[   18.963248]  iommufd_fops_ioctl+0x377/0x510
[   18.963405]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   18.963580]  ? trace_hardirqs_on+0x26/0x120
[   18.963738]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   18.963966]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   18.964148]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   18.964346]  ? security_file_ioctl+0x9d/0xd0
[   18.964508]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   18.964683]  __x64_sys_ioctl+0x1b9/0x230
[   18.964829]  do_syscall_64+0x3c/0x90
[   18.964963]  entry_SYSCALL_64_after_hwframe+0x6e/0xd8
[   18.965148] RIP: 0033:0x7f08e9e3ee5d
[   18.965282] Code: ff c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d 93 af 1b 00 f7 d8 64 89 01 48
[   18.965925] RSP: 002b:00007ffd66cf2398 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   18.966193] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f08e9e3ee5d
[   18.966445] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   18.966701] RBP: 00007ffd66cf23b0 R08: 0000000000000800 R09: 0000000000000800
[   18.966958] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffd66cf24c8
[   18.967210] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f08ea12b000
[   18.967467]  </TASK>
[   18.967550] Modules linked in:
[   18.967730] ---[ end trace 0000000000000000 ]---
[   18.967901] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   18.968112] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   18.968770] RSP: 0018:ffff88802457fba8 EFLAGS: 00010206
[   18.968962] RAX: dffffc0000000000 RBX: ffff888014f9b000 RCX: 0000000000000000
[   18.969219] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   18.969556] RBP: ffff88802457fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   18.969812] R10: ffff88800aad88df R11: 0000000000000001 R12: 0000000000000000
[   18.970063] R13: ffffffff85cc0180 R14: ffff8880109b6ac0 R15: ffffffff87070ae0
[   18.970387] FS:  00007f08ea0ea600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   18.970682] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   18.970898] CR2: 0000000020000080 CR3: 0000000018bcc000 CR4: 0000000000750ef0
[   18.971179] PKRU: 55555554
[   18.971581] ------------[ cut here ]------------
[   18.971748] WARNING: CPU: 0 PID: 857 at drivers/iommu/iommufd/main.c:258 iommufd_fops_release+0x2a3/0x300
[   18.972155] Modules linked in:
[   18.972273] CPU: 0 PID: 857 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   18.972595] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   18.973060] RIP: 0010:iommufd_fops_release+0x2a3/0x300
[   18.973259] Code: 45 d0 65 48 2b 04 25 28 00 00 00 75 54 48 81 c4 88 00 00 00 31 c0 5b 41 5c 41 5d 41 5e 41 5f 5d c3 cc cc cc cc e8 ad 4f 0a fe <0f> 0b eb a6 e8 74 23 67 fe e9 f6 fe ff ff 48 89 85 50 ff ff ff e8
[   18.973975] RSP: 0018:ffff88801096fc00 EFLAGS: 00010293
[   18.974230] RAX: 0000000000000000 RBX: ffff88800fe06a08 RCX: 0000000000000000
[   18.974488] RDX: ffff88801475a500 RSI: ffffffff835563e3 RDI: ffffffff86702b40
[   18.974767] RBP: ffff88801096fcb0 R08: 0000000000000000 R09: fffffbfff0eb2644
[   18.975067] R10: ffffffff87593227 R11: ffff88801940e000 R12: 0000000000000000
[   18.975325] R13: ffff88801376d598 R14: ffff88801096fc48 R15: ffffffff83556140
[   18.975583] FS:  0000000000000000(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   18.975877] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   18.976144] CR2: 0000000020000080 CR3: 000000000687e000 CR4: 0000000000750ef0
[   18.976404] PKRU: 55555554
[   18.976507] Call Trace:
[   18.976601]  <TASK>
[   18.976699]  ? show_regs+0x6e/0x80
[   18.976874]  ? __warn+0xef/0x340
[   18.977001]  ? report_bug+0x25e/0x4b0
[   18.977144]  ? iommufd_fops_release+0x2a3/0x300
[   18.977321]  ? report_bug+0x2cb/0x4b0
[   18.977521]  ? handle_bug+0x46/0x90
[   18.977656]  ? exc_invalid_op+0x1d/0x50
[   18.977803]  ? asm_exc_invalid_op+0x1f/0x30
[   18.977960]  ? __pfx_iommufd_fops_release+0x10/0x10
[   18.978209]  ? iommufd_fops_release+0x2a3/0x300
[   18.978382]  ? iommufd_fops_release+0x2a3/0x300
[   18.978556]  ? __pfx_iommufd_fops_release+0x10/0x10
[   18.978750]  ? rcu_is_watching+0x19/0xc0
[   18.978903]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   18.979105]  ? __pfx_iommufd_fops_release+0x10/0x10
[   18.979351]  __fput+0x424/0xaf0
[   18.979479]  ____fput+0x1f/0x30
[   18.979603]  task_work_run+0x19d/0x2b0
[   18.979748]  ? __pfx_task_work_run+0x10/0x10
[   18.979925]  ? __sanitizer_cov_trace_const_cmp1+0x1e/0x30
[   18.980171]  ? switch_task_namespaces+0xa9/0xe0
[   18.980345]  do_exit+0xac9/0x2790
[   18.980474]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   18.980770]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   18.980956]  ? __pfx_do_exit+0x10/0x10
[   18.981100]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   18.981305]  ? security_file_ioctl+0x9d/0xd0
[   18.981527]  make_task_dead+0x182/0x3c0
[   18.981676]  rewind_stack_and_make_dead+0x17/0x20
[   18.981854] RIP: 0033:0x7f08e9e3ee5d
[   18.981990] Code: Unable to access opcode bytes at 0x7f08e9e3ee33.
[   18.982268] RSP: 002b:00007ffd66cf2398 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   18.982543] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f08e9e3ee5d
[   18.982826] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   18.983122] RBP: 00007ffd66cf23b0 R08: 0000000000000800 R09: 0000000000000800
[   18.983379] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffd66cf24c8
[   18.983637] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f08ea12b000
[   18.983910]  </TASK>
[   18.984044] irq event stamp: 0
[   18.984160] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   18.984389] hardirqs last disabled at (0): [<ffffffff8122f2d1>] copy_process+0x1c51/0x7140
[   18.984755] softirqs last  enabled at (0): [<ffffffff8122f312>] copy_process+0x1c92/0x7140
[   18.985054] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   18.985282] ---[ end trace 0000000000000000 ]---
[   18.988093] iommufd_mock iommufd_mock138: Adding to iommu group 138
[   18.988341] iommufd_mock iommufd_mock138: Removing from iommu group 138
[   18.988600] general protection fault, probably for non-canonical address 0xdffffc0000000006: 0000 [#139] PREEMPT SMP KASAN NOPTI
[   18.989012] KASAN: null-ptr-deref in range [0x0000000000000030-0x0000000000000037]
[   18.989296] CPU: 0 PID: 858 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   18.989638] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   18.990044] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   18.990259] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   18.990923] RSP: 0018:ffff888013737ba8 EFLAGS: 00010206
[   18.991116] RAX: dffffc0000000000 RBX: ffff88802308d000 RCX: 0000000000000000
[   18.991373] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   18.991630] RBP: ffff888013737bc0 R08: 0000000000000001 R09: ffffed100155b11b
[   18.991887] R10: ffff88800aad88df R11: 5f6466756d6d6f69 R12: 0000000000000000
[   18.992144] R13: ffffffff85cc0180 R14: ffff888024c35c00 R15: ffffffff87070ae0
[   18.992401] FS:  00007fc42773d600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   18.992692] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   18.992902] CR2: 0000000020000080 CR3: 000000000b6da000 CR4: 0000000000750ef0
[   18.993161] PKRU: 55555554
[   18.993264] Call Trace:
[   18.993358]  <TASK>
[   18.993441]  ? show_regs+0x6e/0x80
[   18.993576]  ? die_addr+0x45/0xb0
[   18.993709]  ? exc_general_protection+0x159/0x250
[   18.993893]  ? asm_exc_general_protection+0x2b/0x30
[   18.994079]  ? sysfs_remove_link_from_group+0x21/0x90
[   18.994270]  ? sysfs_remove_link_from_group+0x37/0x90
[   18.994460]  ? sysfs_remove_link_from_group+0x21/0x90
[   18.994651]  iommu_device_unlink+0x85/0xd0
[   18.994813]  iommu_deinit_device+0x11f/0x4c0
[   18.994975]  __iommu_group_remove_device+0x26b/0x300
[   18.995162]  iommu_group_remove_device+0x8a/0xb0
[   18.995335]  iommufd_test+0x1f1a/0x2d10
[   18.995478]  ? __pfx_lock_release+0x10/0x10
[   18.995634]  ? __pfx_lock_acquire+0x10/0x10
[   18.995792]  ? __pfx_iommufd_test+0x10/0x10
[   18.995948]  ? __sanitizer_cov_trace_const_cmp8+0x1c/0x30
[   18.996148]  iommufd_fops_ioctl+0x377/0x510
[   18.996306]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   18.996481]  ? trace_hardirqs_on+0x26/0x120
[   18.996640]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   18.996867]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   18.997050]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   18.997248]  ? security_file_ioctl+0x9d/0xd0
[   18.997411]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   18.997587]  __x64_sys_ioctl+0x1b9/0x230
[   18.997734]  do_syscall_64+0x3c/0x90
[   18.997869]  entry_SYSCALL_64_after_hwframe+0x6e/0xd8
[   18.998054] RIP: 0033:0x7fc42743ee5d
[   18.998187] Code: ff c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d 93 af 1b 00 f7 d8 64 89 01 48
[   18.998842] RSP: 002b:00007ffc5e0ff0f8 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   18.999111] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007fc42743ee5d
[   18.999363] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   18.999615] RBP: 00007ffc5e0ff110 R08: 0000000000000800 R09: 0000000000000800
[   18.999867] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffc5e0ff228
[   19.000119] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007fc42777e000
[   19.000376]  </TASK>
[   19.000460] Modules linked in:
[   19.000705] ---[ end trace 0000000000000000 ]---
[   19.000877] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   19.001088] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   19.001746] RSP: 0018:ffff88802457fba8 EFLAGS: 00010206
[   19.001938] RAX: dffffc0000000000 RBX: ffff888014f9b000 RCX: 0000000000000000
[   19.002196] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   19.002530] RBP: ffff88802457fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   19.002827] R10: ffff88800aad88df R11: 0000000000000001 R12: 0000000000000000
[   19.003082] R13: ffffffff85cc0180 R14: ffff8880109b6ac0 R15: ffffffff87070ae0
[   19.003402] FS:  00007fc42773d600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   19.003693] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   19.003910] CR2: 0000000020000080 CR3: 000000000b6da000 CR4: 0000000000750ef0
[   19.004231] PKRU: 55555554
[   19.004600] ------------[ cut here ]------------
[   19.004824] WARNING: CPU: 0 PID: 858 at drivers/iommu/iommufd/main.c:258 iommufd_fops_release+0x2a3/0x300
[   19.005171] Modules linked in:
[   19.005288] CPU: 0 PID: 858 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   19.005668] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   19.006078] RIP: 0010:iommufd_fops_release+0x2a3/0x300
[   19.006331] Code: 45 d0 65 48 2b 04 25 28 00 00 00 75 54 48 81 c4 88 00 00 00 31 c0 5b 41 5c 41 5d 41 5e 41 5f 5d c3 cc cc cc cc e8 ad 4f 0a fe <0f> 0b eb a6 e8 74 23 67 fe e9 f6 fe ff ff 48 89 85 50 ff ff ff e8
[   19.007053] RSP: 0018:ffff888013737c00 EFLAGS: 00010293
[   19.007247] RAX: 0000000000000000 RBX: ffff88800fe06408 RCX: 0000000000000000
[   19.007504] RDX: ffff888014758000 RSI: ffffffff835563e3 RDI: ffffffff86702b40
[   19.007762] RBP: ffff888013737cb0 R08: 0000000000000000 R09: fffffbfff0eb2644
[   19.008076] R10: ffffffff87593227 R11: ffff888018955c00 R12: 0000000000000000
[   19.008334] R13: ffff8880135d4418 R14: ffff888013737c48 R15: ffffffff83556140
[   19.008659] FS:  0000000000000000(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   19.008950] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   19.009160] CR2: 0000000020000080 CR3: 000000000687e000 CR4: 0000000000750ef0
[   19.009482] PKRU: 55555554
[   19.009586] Call Trace:
[   19.009679]  <TASK>
[   19.009762]  ? show_regs+0x6e/0x80
[   19.009896]  ? __warn+0xef/0x340
[   19.010042]  ? report_bug+0x25e/0x4b0
[   19.010223]  ? iommufd_fops_release+0x2a3/0x300
[   19.010396]  ? report_bug+0x2cb/0x4b0
[   19.010540]  ? handle_bug+0x46/0x90
[   19.010688]  ? exc_invalid_op+0x1d/0x50
[   19.010918]  ? asm_exc_invalid_op+0x1f/0x30
[   19.011092]  ? __pfx_iommufd_fops_release+0x10/0x10
[   19.011278]  ? iommufd_fops_release+0x2a3/0x300
[   19.011450]  ? iommufd_fops_release+0x2a3/0x300
[   19.011624]  ? __pfx_iommufd_fops_release+0x10/0x10
[   19.011870]  ? rcu_is_watching+0x19/0xc0
[   19.012022]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   19.012224]  ? __pfx_iommufd_fops_release+0x10/0x10
[   19.012407]  __fput+0x424/0xaf0
[   19.012597]  ____fput+0x1f/0x30
[   19.012722]  task_work_run+0x19d/0x2b0
[   19.012867]  ? __pfx_task_work_run+0x10/0x10
[   19.013030]  ? __sanitizer_cov_trace_const_cmp1+0x1e/0x30
[   19.013250]  ? switch_task_namespaces+0xa9/0xe0
[   19.013463]  do_exit+0xac9/0x2790
[   19.013593]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   19.013824]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   19.014060]  ? __pfx_do_exit+0x10/0x10
[   19.014205]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   19.014405]  ? security_file_ioctl+0x9d/0xd0
[   19.014571]  make_task_dead+0x182/0x3c0
[   19.014785]  rewind_stack_and_make_dead+0x17/0x20
[   19.014964] RIP: 0033:0x7fc42743ee5d
[   19.015100] Code: Unable to access opcode bytes at 0x7fc42743ee33.
[   19.015323] RSP: 002b:00007ffc5e0ff0f8 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   19.015598] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007fc42743ee5d
[   19.015916] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   19.016174] RBP: 00007ffc5e0ff110 R08: 0000000000000800 R09: 0000000000000800
[   19.016431] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffc5e0ff228
[   19.016740] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007fc42777e000
[   19.017004]  </TASK>
[   19.017089] irq event stamp: 0
[   19.017215] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   19.017512] hardirqs last disabled at (0): [<ffffffff8122f2d1>] copy_process+0x1c51/0x7140
[   19.017816] softirqs last  enabled at (0): [<ffffffff8122f312>] copy_process+0x1c92/0x7140
[   19.018179] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   19.018410] ---[ end trace 0000000000000000 ]---
[   19.021227] iommufd_mock iommufd_mock139: Adding to iommu group 139
[   19.021530] iommufd_mock iommufd_mock139: Removing from iommu group 139
[   19.021791] general protection fault, probably for non-canonical address 0xdffffc0000000006: 0000 [#140] PREEMPT SMP KASAN NOPTI
[   19.022206] KASAN: null-ptr-deref in range [0x0000000000000030-0x0000000000000037]
[   19.022481] CPU: 0 PID: 859 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   19.022851] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   19.023260] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   19.023476] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   19.024134] RSP: 0018:ffff88801670fba8 EFLAGS: 00010206
[   19.024327] RAX: dffffc0000000000 RBX: ffff88802308f000 RCX: 0000000000000000
[   19.024585] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   19.024843] RBP: ffff88801670fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   19.025100] R10: ffff88800aad88df R11: 5f6466756d6d6f69 R12: 0000000000000000
[   19.025360] R13: ffffffff85cc0180 R14: ffff888024c35a80 R15: ffffffff87070ae0
[   19.025621] FS:  00007f32a925f600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   19.025914] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   19.026125] CR2: 0000000020000080 CR3: 000000002031e000 CR4: 0000000000750ef0
[   19.026387] PKRU: 55555554
[   19.026492] Call Trace:
[   19.026586]  <TASK>
[   19.026669]  ? show_regs+0x6e/0x80
[   19.026822]  ? die_addr+0x45/0xb0
[   19.026958]  ? exc_general_protection+0x159/0x250
[   19.027142]  ? asm_exc_general_protection+0x2b/0x30
[   19.027329]  ? sysfs_remove_link_from_group+0x21/0x90
[   19.027520]  ? sysfs_remove_link_from_group+0x37/0x90
[   19.027711]  ? sysfs_remove_link_from_group+0x21/0x90
[   19.027902]  iommu_device_unlink+0x85/0xd0
[   19.028059]  iommu_deinit_device+0x11f/0x4c0
[   19.028226]  __iommu_group_remove_device+0x26b/0x300
[   19.028416]  iommu_group_remove_device+0x8a/0xb0
[   19.028593]  iommufd_test+0x1f1a/0x2d10
[   19.028740]  ? __pfx_lock_release+0x10/0x10
[   19.028901]  ? __pfx_lock_acquire+0x10/0x10
[   19.029062]  ? __pfx_iommufd_test+0x10/0x10
[   19.029222]  ? __sanitizer_cov_trace_const_cmp8+0x1c/0x30
[   19.029426]  iommufd_fops_ioctl+0x377/0x510
[   19.029588]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   19.029767]  ? trace_hardirqs_on+0x26/0x120
[   19.029929]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   19.030162]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   19.030350]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   19.030553]  ? security_file_ioctl+0x9d/0xd0
[   19.030721]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   19.030905]  __x64_sys_ioctl+0x1b9/0x230
[   19.031055]  do_syscall_64+0x3c/0x90
[   19.031193]  entry_SYSCALL_64_after_hwframe+0x6e/0xd8
[   19.031381] RIP: 0033:0x7f32a903ee5d
[   19.031518] Code: ff c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d 93 af 1b 00 f7 d8 64 89 01 48
[   19.032175] RSP: 002b:00007ffd4d037fe8 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   19.032451] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f32a903ee5d
[   19.032709] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   19.032967] RBP: 00007ffd4d038000 R08: 0000000000000800 R09: 0000000000000800
[   19.033224] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffd4d038118
[   19.033480] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f32a92a0000
[   19.033743]  </TASK>
[   19.033828] Modules linked in:
[   19.034021] ---[ end trace 0000000000000000 ]---
[   19.034193] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   19.034405] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   19.035162] RSP: 0018:ffff88802457fba8 EFLAGS: 00010206
[   19.035356] RAX: dffffc0000000000 RBX: ffff888014f9b000 RCX: 0000000000000000
[   19.035614] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   19.035871] RBP: ffff88802457fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   19.036129] R10: ffff88800aad88df R11: 0000000000000001 R12: 0000000000000000
[   19.036472] R13: ffffffff85cc0180 R14: ffff8880109b6ac0 R15: ffffffff87070ae0
[   19.036731] FS:  00007f32a925f600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   19.037026] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   19.037297] CR2: 0000000020000080 CR3: 000000002031e000 CR4: 0000000000750ef0
[   19.037558] PKRU: 55555554
[   19.037970] ------------[ cut here ]------------
[   19.038141] WARNING: CPU: 0 PID: 859 at drivers/iommu/iommufd/main.c:258 iommufd_fops_release+0x2a3/0x300
[   19.038496] Modules linked in:
[   19.038679] CPU: 0 PID: 859 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   19.039029] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   19.039435] RIP: 0010:iommufd_fops_release+0x2a3/0x300
[   19.039698] Code: 45 d0 65 48 2b 04 25 28 00 00 00 75 54 48 81 c4 88 00 00 00 31 c0 5b 41 5c 41 5d 41 5e 41 5f 5d c3 cc cc cc cc e8 ad 4f 0a fe <0f> 0b eb a6 e8 74 23 67 fe e9 f6 fe ff ff 48 89 85 50 ff ff ff e8
[   19.040414] RSP: 0018:ffff88801670fc00 EFLAGS: 00010293
[   19.040607] RAX: 0000000000000000 RBX: ffff88800fe06708 RCX: 0000000000000000
[   19.040864] RDX: ffff88800fc10000 RSI: ffffffff835563e3 RDI: ffffffff86702b40
[   19.041167] RBP: ffff88801670fcb0 R08: 0000000000000000 R09: fffffbfff0eb2644
[   19.041445] R10: ffffffff87593227 R11: ffff888019415a00 R12: 0000000000000000
[   19.041723] R13: ffff8880135d4198 R14: ffff88801670fc48 R15: ffffffff83556140
[   19.042021] FS:  0000000000000000(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   19.042311] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   19.042522] CR2: 0000000020000080 CR3: 000000000687e000 CR4: 0000000000750ef0
[   19.042882] PKRU: 55555554
[   19.042989] Call Trace:
[   19.043082]  <TASK>
[   19.043165]  ? show_regs+0x6e/0x80
[   19.043299]  ? __warn+0xef/0x340
[   19.043426]  ? report_bug+0x25e/0x4b0
[   19.043569]  ? iommufd_fops_release+0x2a3/0x300
[   19.043807]  ? report_bug+0x2cb/0x4b0
[   19.043952]  ? handle_bug+0x46/0x90
[   19.044087]  ? exc_invalid_op+0x1d/0x50
[   19.044234]  ? asm_exc_invalid_op+0x1f/0x30
[   19.044402]  ? __pfx_iommufd_fops_release+0x10/0x10
[   19.044635]  ? iommufd_fops_release+0x2a3/0x300
[   19.044808]  ? iommufd_fops_release+0x2a3/0x300
[   19.044981]  ? __pfx_iommufd_fops_release+0x10/0x10
[   19.045212]  ? rcu_is_watching+0x19/0xc0
[   19.045364]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   19.045566]  ? __pfx_iommufd_fops_release+0x10/0x10
[   19.045750]  __fput+0x424/0xaf0
[   19.045890]  ____fput+0x1f/0x30
[   19.046058]  task_work_run+0x19d/0x2b0
[   19.046203]  ? __pfx_task_work_run+0x10/0x10
[   19.046366]  ? __sanitizer_cov_trace_const_cmp1+0x1e/0x30
[   19.046585]  ? switch_task_namespaces+0xa9/0xe0
[   19.046829]  do_exit+0xac9/0x2790
[   19.046961]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   19.047191]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   19.047376]  ? __pfx_do_exit+0x10/0x10
[   19.047519]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   19.047731]  ? security_file_ioctl+0x9d/0xd0
[   19.047946]  make_task_dead+0x182/0x3c0
[   19.048095]  rewind_stack_and_make_dead+0x17/0x20
[   19.048273] RIP: 0033:0x7f32a903ee5d
[   19.048413] Code: Unable to access opcode bytes at 0x7f32a903ee33.
[   19.048693] RSP: 002b:00007ffd4d037fe8 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   19.048967] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f32a903ee5d
[   19.049248] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   19.049548] RBP: 00007ffd4d038000 R08: 0000000000000800 R09: 0000000000000800
[   19.049806] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffd4d038118
[   19.050125] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f32a92a0000
[   19.050388]  </TASK>
[   19.050474] irq event stamp: 0
[   19.050607] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   19.050910] hardirqs last disabled at (0): [<ffffffff8122f2d1>] copy_process+0x1c51/0x7140
[   19.051211] softirqs last  enabled at (0): [<ffffffff8122f312>] copy_process+0x1c92/0x7140
[   19.051509] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   19.051794] ---[ end trace 0000000000000000 ]---
[   19.054526] iommufd_mock iommufd_mock140: Adding to iommu group 140
[   19.054827] iommufd_mock iommufd_mock140: Removing from iommu group 140
[   19.055089] general protection fault, probably for non-canonical address 0xdffffc0000000006: 0000 [#141] PREEMPT SMP KASAN NOPTI
[   19.055500] KASAN: null-ptr-deref in range [0x0000000000000030-0x0000000000000037]
[   19.055773] CPU: 0 PID: 860 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   19.056138] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   19.056544] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   19.056759] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   19.057420] RSP: 0018:ffff88801096fba8 EFLAGS: 00010206
[   19.057614] RAX: dffffc0000000000 RBX: ffff88802308c000 RCX: 0000000000000000
[   19.057871] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   19.058128] RBP: ffff88801096fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   19.058385] R10: ffff88800aad88df R11: 5f6466756d6d6f69 R12: 0000000000000000
[   19.058643] R13: ffffffff85cc0180 R14: ffff888024c35e80 R15: ffffffff87070ae0
[   19.058928] FS:  00007fa03c37f600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   19.059220] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   19.059430] CR2: 0000000020000080 CR3: 000000000b6da000 CR4: 0000000000750ef0
[   19.059688] PKRU: 55555554
[   19.059791] Call Trace:
[   19.059884]  <TASK>
[   19.059967]  ? show_regs+0x6e/0x80
[   19.060103]  ? die_addr+0x45/0xb0
[   19.060236]  ? exc_general_protection+0x159/0x250
[   19.060419]  ? asm_exc_general_protection+0x2b/0x30
[   19.060606]  ? sysfs_remove_link_from_group+0x21/0x90
[   19.060796]  ? sysfs_remove_link_from_group+0x37/0x90
[   19.060986]  ? sysfs_remove_link_from_group+0x21/0x90
[   19.061176]  iommu_device_unlink+0x85/0xd0
[   19.061332]  iommu_deinit_device+0x11f/0x4c0
[   19.061498]  __iommu_group_remove_device+0x26b/0x300
[   19.061687]  iommu_group_remove_device+0x8a/0xb0
[   19.061864]  iommufd_test+0x1f1a/0x2d10
[   19.062009]  ? __pfx_lock_release+0x10/0x10
[   19.062169]  ? __pfx_lock_acquire+0x10/0x10
[   19.062330]  ? __pfx_iommufd_test+0x10/0x10
[   19.062489]  ? __sanitizer_cov_trace_const_cmp8+0x1c/0x30
[   19.062692]  iommufd_fops_ioctl+0x377/0x510
[   19.062858]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   19.063038]  ? trace_hardirqs_on+0x26/0x120
[   19.063196]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   19.063424]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   19.063606]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   19.063803]  ? security_file_ioctl+0x9d/0xd0
[   19.063965]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   19.064140]  __x64_sys_ioctl+0x1b9/0x230
[   19.064287]  do_syscall_64+0x3c/0x90
[   19.064421]  entry_SYSCALL_64_after_hwframe+0x6e/0xd8
[   19.064605] RIP: 0033:0x7fa03c03ee5d
[   19.064739] Code: ff c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d 93 af 1b 00 f7 d8 64 89 01 48
[   19.065381] RSP: 002b:00007fff13474448 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   19.065661] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007fa03c03ee5d
[   19.065984] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   19.066241] RBP: 00007fff13474460 R08: 0000000000000800 R09: 0000000000000800
[   19.066498] R10: 0000000000000000 R11: 0000000000000213 R12: 00007fff13474578
[   19.066757] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007fa03c3c0000
[   19.067041]  </TASK>
[   19.067124] Modules linked in:
[   19.067459] ---[ end trace 0000000000000000 ]---
[   19.067631] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   19.067842] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   19.068574] RSP: 0018:ffff88802457fba8 EFLAGS: 00010206
[   19.068768] RAX: dffffc0000000000 RBX: ffff888014f9b000 RCX: 0000000000000000
[   19.069025] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   19.069352] RBP: ffff88802457fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   19.069610] R10: ffff88800aad88df R11: 0000000000000001 R12: 0000000000000000
[   19.069873] R13: ffffffff85cc0180 R14: ffff8880109b6ac0 R15: ffffffff87070ae0
[   19.070173] FS:  00007fa03c37f600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   19.070464] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   19.070742] CR2: 0000000020000080 CR3: 000000000b6da000 CR4: 0000000000750ef0
[   19.071028] PKRU: 55555554
[   19.071391] ------------[ cut here ]------------
[   19.071573] WARNING: CPU: 0 PID: 860 at drivers/iommu/iommufd/main.c:258 iommufd_fops_release+0x2a3/0x300
[   19.071969] Modules linked in:
[   19.072088] CPU: 0 PID: 860 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   19.072469] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   19.072873] RIP: 0010:iommufd_fops_release+0x2a3/0x300
[   19.073111] Code: 45 d0 65 48 2b 04 25 28 00 00 00 75 54 48 81 c4 88 00 00 00 31 c0 5b 41 5c 41 5d 41 5e 41 5f 5d c3 cc cc cc cc e8 ad 4f 0a fe <0f> 0b eb a6 e8 74 23 67 fe e9 f6 fe ff ff 48 89 85 50 ff ff ff e8
[   19.073825] RSP: 0018:ffff88801096fc00 EFLAGS: 00010293
[   19.074018] RAX: 0000000000000000 RBX: ffff88800fe06508 RCX: 0000000000000000
[   19.074275] RDX: ffff88800fc12500 RSI: ffffffff835563e3 RDI: ffffffff86702b40
[   19.074595] RBP: ffff88801096fcb0 R08: 0000000000000000 R09: fffffbfff0eb2644
[   19.074881] R10: ffffffff87593227 R11: ffff88801399d400 R12: 0000000000000000
[   19.075137] R13: ffff888013253098 R14: ffff88801096fc48 R15: ffffffff83556140
[   19.075393] FS:  0000000000000000(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   19.075742] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   19.075949] CR2: 0000000020000080 CR3: 000000000687e000 CR4: 0000000000750ef0
[   19.076256] PKRU: 55555554
[   19.076358] Call Trace:
[   19.076449]  <TASK>
[   19.076529]  ? show_regs+0x6e/0x80
[   19.076660]  ? __warn+0xef/0x340
[   19.076788]  ? report_bug+0x25e/0x4b0
[   19.076948]  ? iommufd_fops_release+0x2a3/0x300
[   19.077159]  ? report_bug+0x2cb/0x4b0
[   19.077301]  ? handle_bug+0x46/0x90
[   19.077432]  ? exc_invalid_op+0x1d/0x50
[   19.077595]  ? asm_exc_invalid_op+0x1f/0x30
[   19.077792]  ? __pfx_iommufd_fops_release+0x10/0x10
[   19.077975]  ? iommufd_fops_release+0x2a3/0x300
[   19.078143]  ? iommufd_fops_release+0x2a3/0x300
[   19.078346]  ? __pfx_iommufd_fops_release+0x10/0x10
[   19.078563]  ? rcu_is_watching+0x19/0xc0
[   19.078723]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   19.078950]  ? __pfx_iommufd_fops_release+0x10/0x10
[   19.079132]  __fput+0x424/0xaf0
[   19.079257]  ____fput+0x1f/0x30
[   19.079379]  task_work_run+0x19d/0x2b0
[   19.079549]  ? __pfx_task_work_run+0x10/0x10
[   19.079749]  ? __sanitizer_cov_trace_const_cmp1+0x1e/0x30
[   19.079945]  ? switch_task_namespaces+0xa9/0xe0
[   19.080121]  do_exit+0xac9/0x2790
[   19.080262]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   19.080527]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   19.080708]  ? __pfx_do_exit+0x10/0x10
[   19.080858]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   19.081109]  ? security_file_ioctl+0x9d/0xd0
[   19.081271]  make_task_dead+0x182/0x3c0
[   19.081416]  rewind_stack_and_make_dead+0x17/0x20
[   19.081611] RIP: 0033:0x7fa03c03ee5d
[   19.081807] Code: Unable to access opcode bytes at 0x7fa03c03ee33.
[   19.082032] RSP: 002b:00007fff13474448 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   19.082312] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007fa03c03ee5d
[   19.082650] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   19.082933] RBP: 00007fff13474460 R08: 0000000000000800 R09: 0000000000000800
[   19.083193] R10: 0000000000000000 R11: 0000000000000213 R12: 00007fff13474578
[   19.083450] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007fa03c3c0000
[   19.083781]  </TASK>
[   19.083867] irq event stamp: 0
[   19.083983] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   19.084215] hardirqs last disabled at (0): [<ffffffff8122f2d1>] copy_process+0x1c51/0x7140
[   19.084557] softirqs last  enabled at (0): [<ffffffff8122f312>] copy_process+0x1c92/0x7140
[   19.084860] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   19.085158] ---[ end trace 0000000000000000 ]---
[   19.088059] iommufd_mock iommufd_mock141: Adding to iommu group 141
[   19.088343] iommufd_mock iommufd_mock141: Removing from iommu group 141
[   19.088604] general protection fault, probably for non-canonical address 0xdffffc0000000006: 0000 [#142] PREEMPT SMP KASAN NOPTI
[   19.089075] KASAN: null-ptr-deref in range [0x0000000000000030-0x0000000000000037]
[   19.089350] CPU: 0 PID: 861 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   19.089666] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   19.090074] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   19.090290] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   19.090957] RSP: 0018:ffff888013737ba8 EFLAGS: 00010206
[   19.091152] RAX: dffffc0000000000 RBX: ffff888023089000 RCX: 0000000000000000
[   19.091411] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   19.091670] RBP: ffff888013737bc0 R08: 0000000000000001 R09: ffffed100155b11b
[   19.091929] R10: ffff88800aad88df R11: 5f6466756d6d6f69 R12: 0000000000000000
[   19.092188] R13: ffffffff85cc0180 R14: ffff888024c35820 R15: ffffffff87070ae0
[   19.092447] FS:  00007f645c86a600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   19.092739] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   19.092950] CR2: 0000000020000080 CR3: 000000002031e000 CR4: 0000000000750ef0
[   19.093210] PKRU: 55555554
[   19.093314] Call Trace:
[   19.093408]  <TASK>
[   19.093492]  ? show_regs+0x6e/0x80
[   19.093628]  ? die_addr+0x45/0xb0
[   19.093762]  ? exc_general_protection+0x159/0x250
[   19.093947]  ? asm_exc_general_protection+0x2b/0x30
[   19.094135]  ? sysfs_remove_link_from_group+0x21/0x90
[   19.094327]  ? sysfs_remove_link_from_group+0x37/0x90
[   19.094519]  ? sysfs_remove_link_from_group+0x21/0x90
[   19.094710]  iommu_device_unlink+0x85/0xd0
[   19.094871]  iommu_deinit_device+0x11f/0x4c0
[   19.095037]  __iommu_group_remove_device+0x26b/0x300
[   19.095228]  iommu_group_remove_device+0x8a/0xb0
[   19.095405]  iommufd_test+0x1f1a/0x2d10
[   19.095552]  ? __pfx_lock_release+0x10/0x10
[   19.095713]  ? __pfx_lock_acquire+0x10/0x10
[   19.095876]  ? __pfx_iommufd_test+0x10/0x10
[   19.096037]  ? __sanitizer_cov_trace_const_cmp8+0x1c/0x30
[   19.096242]  iommufd_fops_ioctl+0x377/0x510
[   19.096404]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   19.096583]  ? trace_hardirqs_on+0x26/0x120
[   19.096747]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   19.096981]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   19.097168]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   19.097372]  ? security_file_ioctl+0x9d/0xd0
[   19.097539]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   19.097719]  __x64_sys_ioctl+0x1b9/0x230
[   19.097871]  do_syscall_64+0x3c/0x90
[   19.098010]  entry_SYSCALL_64_after_hwframe+0x6e/0xd8
[   19.098200] RIP: 0033:0x7f645c63ee5d
[   19.098337] Code: ff c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d 93 af 1b 00 f7 d8 64 89 01 48
[   19.099002] RSP: 002b:00007ffeec2a7db8 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   19.099273] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f645c63ee5d
[   19.099526] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   19.099780] RBP: 00007ffeec2a7dd0 R08: 0000000000000800 R09: 0000000000000800
[   19.100035] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffeec2a7ee8
[   19.100288] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f645c8ab000
[   19.100548]  </TASK>
[   19.100632] Modules linked in:
[   19.100899] ---[ end trace 0000000000000000 ]---
[   19.101073] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   19.101286] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   19.101945] RSP: 0018:ffff88802457fba8 EFLAGS: 00010206
[   19.102138] RAX: dffffc0000000000 RBX: ffff888014f9b000 RCX: 0000000000000000
[   19.102404] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   19.102753] RBP: ffff88802457fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   19.103017] R10: ffff88800aad88df R11: 0000000000000001 R12: 0000000000000000
[   19.103273] R13: ffffffff85cc0180 R14: ffff8880109b6ac0 R15: ffffffff87070ae0
[   19.103607] FS:  00007f645c86a600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   19.103898] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   19.104126] CR2: 0000000020000080 CR3: 000000002031e000 CR4: 0000000000750ef0
[   19.104415] PKRU: 55555554
[   19.104785] ------------[ cut here ]------------
[   19.105014] WARNING: CPU: 0 PID: 861 at drivers/iommu/iommufd/main.c:258 iommufd_fops_release+0x2a3/0x300
[   19.105363] Modules linked in:
[   19.105488] CPU: 0 PID: 861 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   19.105857] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   19.106270] RIP: 0010:iommufd_fops_release+0x2a3/0x300
[   19.106518] Code: 45 d0 65 48 2b 04 25 28 00 00 00 75 54 48 81 c4 88 00 00 00 31 c0 5b 41 5c 41 5d 41 5e 41 5f 5d c3 cc cc cc cc e8 ad 4f 0a fe <0f> 0b eb a6 e8 74 23 67 fe e9 f6 fe ff ff 48 89 85 50 ff ff ff e8
[   19.107278] RSP: 0018:ffff888013737c00 EFLAGS: 00010293
[   19.107471] RAX: 0000000000000000 RBX: ffff88800fe06c08 RCX: 0000000000000000
[   19.107729] RDX: ffff88800f780000 RSI: ffffffff835563e3 RDI: ffffffff86702b40
[   19.107992] RBP: ffff888013737cb0 R08: 0000000000000000 R09: fffffbfff0eb2644
[   19.108310] R10: ffffffff87593227 R11: ffff88801962ae00 R12: 0000000000000000
[   19.108568] R13: ffff888013271a98 R14: ffff888013737c48 R15: ffffffff83556140
[   19.108882] FS:  0000000000000000(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   19.109173] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   19.109384] CR2: 0000000020000080 CR3: 000000000687e000 CR4: 0000000000750ef0
[   19.109666] PKRU: 55555554
[   19.109812] Call Trace:
[   19.109906]  <TASK>
[   19.109989]  ? show_regs+0x6e/0x80
[   19.110123]  ? __warn+0xef/0x340
[   19.110250]  ? report_bug+0x25e/0x4b0
[   19.110455]  ? iommufd_fops_release+0x2a3/0x300
[   19.110635]  ? report_bug+0x2cb/0x4b0
[   19.110785]  ? handle_bug+0x46/0x90
[   19.110920]  ? exc_invalid_op+0x1d/0x50
[   19.111067]  ? asm_exc_invalid_op+0x1f/0x30
[   19.111224]  ? __pfx_iommufd_fops_release+0x10/0x10
[   19.111430]  ? iommufd_fops_release+0x2a3/0x300
[   19.111646]  ? iommufd_fops_release+0x2a3/0x300
[   19.111821]  ? __pfx_iommufd_fops_release+0x10/0x10
[   19.112003]  ? rcu_is_watching+0x19/0xc0
[   19.112220]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   19.112422]  ? __pfx_iommufd_fops_release+0x10/0x10
[   19.112605]  __fput+0x424/0xaf0
[   19.112732]  ____fput+0x1f/0x30
[   19.112857]  task_work_run+0x19d/0x2b0
[   19.113060]  ? __pfx_task_work_run+0x10/0x10
[   19.113223]  ? __sanitizer_cov_trace_const_cmp1+0x1e/0x30
[   19.113423]  ? switch_task_namespaces+0xa9/0xe0
[   19.113600]  do_exit+0xac9/0x2790
[   19.113785]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   19.114017]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   19.114202]  ? __pfx_do_exit+0x10/0x10
[   19.114351]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   19.114610]  ? security_file_ioctl+0x9d/0xd0
[   19.114780]  make_task_dead+0x182/0x3c0
[   19.114928]  rewind_stack_and_make_dead+0x17/0x20
[   19.115106] RIP: 0033:0x7f645c63ee5d
[   19.115242] Code: Unable to access opcode bytes at 0x7f645c63ee33.
[   19.115472] RSP: 002b:00007ffeec2a7db8 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   19.115801] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f645c63ee5d
[   19.116059] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   19.116322] RBP: 00007ffeec2a7dd0 R08: 0000000000000800 R09: 0000000000000800
[   19.116632] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffeec2a7ee8
[   19.116891] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f645c8ab000
[   19.117218]  </TASK>
[   19.117304] irq event stamp: 0
[   19.117420] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   19.117648] hardirqs last disabled at (0): [<ffffffff8122f2d1>] copy_process+0x1c51/0x7140
[   19.118004] softirqs last  enabled at (0): [<ffffffff8122f312>] copy_process+0x1c92/0x7140
[   19.118303] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   19.118542] ---[ end trace 0000000000000000 ]---
[   19.121362] iommufd_mock iommufd_mock142: Adding to iommu group 142
[   19.121612] iommufd_mock iommufd_mock142: Removing from iommu group 142
[   19.121871] general protection fault, probably for non-canonical address 0xdffffc0000000006: 0000 [#143] PREEMPT SMP KASAN NOPTI
[   19.122282] KASAN: null-ptr-deref in range [0x0000000000000030-0x0000000000000037]
[   19.122602] CPU: 0 PID: 862 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   19.122922] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   19.123328] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   19.123543] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   19.124200] RSP: 0018:ffff88801670fba8 EFLAGS: 00010206
[   19.124393] RAX: dffffc0000000000 RBX: ffff888013874000 RCX: 0000000000000000
[   19.124651] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   19.124908] RBP: ffff88801670fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   19.125165] R10: ffff88800aad88df R11: 5f6466756d6d6f69 R12: 0000000000000000
[   19.125426] R13: ffffffff85cc0180 R14: ffff888024c35720 R15: ffffffff87070ae0
[   19.125679] FS:  00007fc72f10c600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   19.125963] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   19.126169] CR2: 0000000020000080 CR3: 0000000012372000 CR4: 0000000000750ef0
[   19.126423] PKRU: 55555554
[   19.126524] Call Trace:
[   19.126618]  <TASK>
[   19.126702]  ? show_regs+0x6e/0x80
[   19.126842]  ? die_addr+0x45/0xb0
[   19.126973]  ? exc_general_protection+0x159/0x250
[   19.127153]  ? asm_exc_general_protection+0x2b/0x30
[   19.127336]  ? sysfs_remove_link_from_group+0x21/0x90
[   19.127522]  ? sysfs_remove_link_from_group+0x37/0x90
[   19.127705]  ? sysfs_remove_link_from_group+0x21/0x90
[   19.127897]  iommu_device_unlink+0x85/0xd0
[   19.128055]  iommu_deinit_device+0x11f/0x4c0
[   19.128223]  __iommu_group_remove_device+0x26b/0x300
[   19.128416]  iommu_group_remove_device+0x8a/0xb0
[   19.128593]  iommufd_test+0x1f1a/0x2d10
[   19.128739]  ? __pfx_lock_release+0x10/0x10
[   19.128900]  ? __pfx_lock_acquire+0x10/0x10
[   19.129062]  ? __pfx_iommufd_test+0x10/0x10
[   19.129222]  ? __sanitizer_cov_trace_const_cmp8+0x1c/0x30
[   19.129426]  iommufd_fops_ioctl+0x377/0x510
[   19.129587]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   19.129766]  ? trace_hardirqs_on+0x26/0x120
[   19.129928]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   19.130162]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   19.130349]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   19.130553]  ? security_file_ioctl+0x9d/0xd0
[   19.130721]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   19.130906]  __x64_sys_ioctl+0x1b9/0x230
[   19.131057]  do_syscall_64+0x3c/0x90
[   19.131195]  entry_SYSCALL_64_after_hwframe+0x6e/0xd8
[   19.131384] RIP: 0033:0x7fc72ee3ee5d
[   19.131521] Code: ff c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d 93 af 1b 00 f7 d8 64 89 01 48
[   19.132179] RSP: 002b:00007ffe30785c38 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   19.132453] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007fc72ee3ee5d
[   19.132712] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   19.132969] RBP: 00007ffe30785c50 R08: 0000000000000800 R09: 0000000000000800
[   19.133227] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffe30785d68
[   19.133486] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007fc72f14d000
[   19.133749]  </TASK>
[   19.133835] Modules linked in:
[   19.134008] ---[ end trace 0000000000000000 ]---
[   19.134180] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   19.134392] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   19.135113] RSP: 0018:ffff88802457fba8 EFLAGS: 00010206
[   19.135306] RAX: dffffc0000000000 RBX: ffff888014f9b000 RCX: 0000000000000000
[   19.135564] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   19.135822] RBP: ffff88802457fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   19.136164] R10: ffff88800aad88df R11: 0000000000000001 R12: 0000000000000000
[   19.136422] R13: ffffffff85cc0180 R14: ffff8880109b6ac0 R15: ffffffff87070ae0
[   19.136680] FS:  00007fc72f10c600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   19.137030] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   19.137241] CR2: 0000000020000080 CR3: 0000000012372000 CR4: 0000000000750ef0
[   19.137505] PKRU: 55555554
[   19.137925] ------------[ cut here ]------------
[   19.138097] WARNING: CPU: 0 PID: 862 at drivers/iommu/iommufd/main.c:258 iommufd_fops_release+0x2a3/0x300
[   19.138507] Modules linked in:
[   19.138638] CPU: 0 PID: 862 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   19.138982] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   19.139445] RIP: 0010:iommufd_fops_release+0x2a3/0x300
[   19.139638] Code: 45 d0 65 48 2b 04 25 28 00 00 00 75 54 48 81 c4 88 00 00 00 31 c0 5b 41 5c 41 5d 41 5e 41 5f 5d c3 cc cc cc cc e8 ad 4f 0a fe <0f> 0b eb a6 e8 74 23 67 fe e9 f6 fe ff ff 48 89 85 50 ff ff ff e8
[   19.140352] RSP: 0018:ffff88801670fc00 EFLAGS: 00010293
[   19.140545] RAX: 0000000000000000 RBX: ffff88800fe06308 RCX: 0000000000000000
[   19.140824] RDX: ffff88800f782500 RSI: ffffffff835563e3 RDI: ffffffff86702b40
[   19.141117] RBP: ffff88801670fcb0 R08: 0000000000000000 R09: fffffbfff0eb2644
[   19.141375] R10: ffffffff87593227 R11: ffff888010ff0c00 R12: 0000000000000000
[   19.141701] R13: ffff888013270918 R14: ffff88801670fc48 R15: ffffffff83556140
[   19.141961] FS:  0000000000000000(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   19.142310] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   19.142521] CR2: 0000000020000080 CR3: 000000000687e000 CR4: 0000000000750ef0
[   19.142801] PKRU: 55555554
[   19.142905] Call Trace:
[   19.143001]  <TASK>
[   19.143084]  ? show_regs+0x6e/0x80
[   19.143236]  ? __warn+0xef/0x340
[   19.143410]  ? report_bug+0x25e/0x4b0
[   19.143553]  ? iommufd_fops_release+0x2a3/0x300
[   19.143725]  ? report_bug+0x2cb/0x4b0
[   19.143869]  ? handle_bug+0x46/0x90
[   19.144029]  ? exc_invalid_op+0x1d/0x50
[   19.144217]  ? asm_exc_invalid_op+0x1f/0x30
[   19.144375]  ? __pfx_iommufd_fops_release+0x10/0x10
[   19.144561]  ? iommufd_fops_release+0x2a3/0x300
[   19.144755]  ? iommufd_fops_release+0x2a3/0x300
[   19.144971]  ? __pfx_iommufd_fops_release+0x10/0x10
[   19.145154]  ? rcu_is_watching+0x19/0xc0
[   19.145306]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   19.145568]  ? __pfx_iommufd_fops_release+0x10/0x10
[   19.145751]  __fput+0x424/0xaf0
[   19.145879]  ____fput+0x1f/0x30
[   19.146003]  task_work_run+0x19d/0x2b0
[   19.146211]  ? __pfx_task_work_run+0x10/0x10
[   19.146374]  ? __sanitizer_cov_trace_const_cmp1+0x1e/0x30
[   19.146583]  ? switch_task_namespaces+0xa9/0xe0
[   19.146761]  do_exit+0xac9/0x2790
[   19.146912]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   19.147145]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   19.147338]  ? __pfx_do_exit+0x10/0x10
[   19.147539]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   19.147740]  ? security_file_ioctl+0x9d/0xd0
[   19.147905]  make_task_dead+0x182/0x3c0
[   19.148060]  rewind_stack_and_make_dead+0x17/0x20
[   19.148293] RIP: 0033:0x7fc72ee3ee5d
[   19.148429] Code: Unable to access opcode bytes at 0x7fc72ee3ee33.
[   19.148651] RSP: 002b:00007ffe30785c38 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   19.148983] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007fc72ee3ee5d
[   19.149242] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   19.149504] RBP: 00007ffe30785c50 R08: 0000000000000800 R09: 0000000000000800
[   19.149817] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffe30785d68
[   19.150075] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007fc72f14d000
[   19.150360]  </TASK>
[   19.150489] irq event stamp: 0
[   19.150613] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   19.150849] hardirqs last disabled at (0): [<ffffffff8122f2d1>] copy_process+0x1c51/0x7140
[   19.151151] softirqs last  enabled at (0): [<ffffffff8122f312>] copy_process+0x1c92/0x7140
[   19.151515] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   19.151744] ---[ end trace 0000000000000000 ]---
[   19.154561] iommufd_mock iommufd_mock143: Adding to iommu group 143
[   19.154869] iommufd_mock iommufd_mock143: Removing from iommu group 143
[   19.155695] general protection fault, probably for non-canonical address 0xdffffc0000000006: 0000 [#144] PREEMPT SMP KASAN NOPTI
[   19.156151] KASAN: null-ptr-deref in range [0x0000000000000030-0x0000000000000037]
[   19.156458] CPU: 1 PID: 863 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   19.156797] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   19.157238] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   19.157465] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   19.158183] RSP: 0018:ffff88801096fba8 EFLAGS: 00010206
[   19.158381] RAX: dffffc0000000000 RBX: ffff888013871000 RCX: 0000000000000000
[   19.158646] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   19.158927] RBP: ffff88801096fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   19.159215] R10: ffff88800aad88df R11: 0000000000000000 R12: 0000000000000000
[   19.159479] R13: ffffffff85cc0180 R14: ffff888024c352c0 R15: ffffffff87070ae0
[   19.159787] FS:  00007fed1f71d600(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
[   19.160085] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   19.160301] CR2: 00007fa281e78000 CR3: 000000002031e000 CR4: 0000000000750ee0
[   19.160607] PKRU: 55555554
[   19.160713] Call Trace:
[   19.160809]  <TASK>
[   19.160893]  ? show_regs+0x6e/0x80
[   19.161033]  ? die_addr+0x45/0xb0
[   19.161168]  ? exc_general_protection+0x159/0x250
[   19.161394]  ? asm_exc_general_protection+0x2b/0x30
[   19.161585]  ? sysfs_remove_link_from_group+0x21/0x90
[   19.161780]  ? sysfs_remove_link_from_group+0x37/0x90
[   19.161981]  ? sysfs_remove_link_from_group+0x21/0x90
[   19.162208]  iommu_device_unlink+0x85/0xd0
[   19.162369]  iommu_deinit_device+0x11f/0x4c0
[   19.162539]  __iommu_group_remove_device+0x26b/0x300
[   19.162738]  iommu_group_remove_device+0x8a/0xb0
[   19.162945]  iommufd_test+0x1f1a/0x2d10
[   19.163094]  ? __pfx_lock_release+0x10/0x10
[   19.163257]  ? __pfx_lock_acquire+0x10/0x10
[   19.163422]  ? __pfx_iommufd_test+0x10/0x10
[   19.163594]  ? __sanitizer_cov_trace_const_cmp8+0x1c/0x30
[   19.163836]  iommufd_fops_ioctl+0x377/0x510
[   19.164000]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   19.164183]  ? trace_hardirqs_on+0x26/0x120
[   19.164356]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   19.164619]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   19.164810]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   19.165016]  ? security_file_ioctl+0x9d/0xd0
[   19.165233]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   19.165416]  __x64_sys_ioctl+0x1b9/0x230
[   19.165569]  do_syscall_64+0x3c/0x90
[   19.165709]  entry_SYSCALL_64_after_hwframe+0x6e/0xd8
[   19.165922] RIP: 0033:0x7fed1f43ee5d
[   19.166080] Code: ff c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d 93 af 1b 00 f7 d8 64 89 01 48
[   19.166788] RSP: 002b:00007ffe19d5c228 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   19.167069] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007fed1f43ee5d
[   19.167332] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   19.167638] RBP: 00007ffe19d5c240 R08: 0000000000000800 R09: 0000000000000800
[   19.167901] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffe19d5c358
[   19.168172] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007fed1f75e000
[   19.168477]  </TASK>
[   19.168565] Modules linked in:
[   19.168721] ---[ end trace 0000000000000000 ]---
[   19.168896] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   19.169153] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   19.169824] RSP: 0018:ffff88802457fba8 EFLAGS: 00010206
[   19.170021] RAX: dffffc0000000000 RBX: ffff888014f9b000 RCX: 0000000000000000
[   19.170284] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   19.170548] RBP: ffff88802457fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   19.170844] R10: ffff88800aad88df R11: 0000000000000001 R12: 0000000000000000
[   19.171103] R13: ffffffff85cc0180 R14: ffff8880109b6ac0 R15: ffffffff87070ae0
[   19.171361] FS:  00007fed1f71d600(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
[   19.171653] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   19.171864] CR2: 00007fa281e78000 CR3: 000000002031e000 CR4: 0000000000750ee0
[   19.172123] PKRU: 55555554
[   19.172548] ------------[ cut here ]------------
[   19.172731] WARNING: CPU: 0 PID: 863 at drivers/iommu/iommufd/main.c:258 iommufd_fops_release+0x2a3/0x300
[   19.173079] Modules linked in:
[   19.173197] CPU: 0 PID: 863 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   19.173510] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   19.173915] RIP: 0010:iommufd_fops_release+0x2a3/0x300
[   19.174107] Code: 45 d0 65 48 2b 04 25 28 00 00 00 75 54 48 81 c4 88 00 00 00 31 c0 5b 41 5c 41 5d 41 5e 41 5f 5d c3 cc cc cc cc e8 ad 4f 0a fe <0f> 0b eb a6 e8 74 23 67 fe e9 f6 fe ff ff 48 89 85 50 ff ff ff e8
[   19.174804] RSP: 0018:ffff88801096fc00 EFLAGS: 00010293
[   19.174998] RAX: 0000000000000000 RBX: ffff88800fe06f08 RCX: 0000000000000000
[   19.175256] RDX: ffff88800f784a00 RSI: ffffffff835563e3 RDI: ffffffff86702b40
[   19.175513] RBP: ffff88801096fcb0 R08: 0000000000000000 R09: fffffbfff0eb2644
[   19.175770] R10: ffffffff87593227 R11: ffff888018980600 R12: 0000000000000000
[   19.176028] R13: ffff8880127be918 R14: ffff88801096fc48 R15: ffffffff83556140
[   19.176285] FS:  0000000000000000(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   19.176575] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   19.176785] CR2: 00007fa281e7c000 CR3: 000000000687e000 CR4: 0000000000750ef0
[   19.177043] PKRU: 55555554
[   19.177146] Call Trace:
[   19.177240]  <TASK>
[   19.177322]  ? show_regs+0x6e/0x80
[   19.177456]  ? __warn+0xef/0x340
[   19.177583]  ? report_bug+0x25e/0x4b0
[   19.177725]  ? iommufd_fops_release+0x2a3/0x300
[   19.177897]  ? report_bug+0x2cb/0x4b0
[   19.178041]  ? handle_bug+0x46/0x90
[   19.178175]  ? exc_invalid_op+0x1d/0x50
[   19.178322]  ? asm_exc_invalid_op+0x1f/0x30
[   19.178480]  ? __pfx_iommufd_fops_release+0x10/0x10
[   19.178710]  ? iommufd_fops_release+0x2a3/0x300
[   19.178888]  ? iommufd_fops_release+0x2a3/0x300
[   19.179062]  ? __pfx_iommufd_fops_release+0x10/0x10
[   19.179245]  ? rcu_is_watching+0x19/0xc0
[   19.179396]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   19.179598]  ? __pfx_iommufd_fops_release+0x10/0x10
[   19.179781]  __fput+0x424/0xaf0
[   19.179908]  ____fput+0x1f/0x30
[   19.180032]  task_work_run+0x19d/0x2b0
[   19.180177]  ? __pfx_task_work_run+0x10/0x10
[   19.180342]  ? __sanitizer_cov_trace_const_cmp1+0x1e/0x30
[   19.180542]  ? switch_task_namespaces+0xa9/0xe0
[   19.180716]  do_exit+0xac9/0x2790
[   19.180846]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   19.181077]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   19.181262]  ? __pfx_do_exit+0x10/0x10
[   19.181405]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   19.181606]  ? security_file_ioctl+0x9d/0xd0
[   19.181771]  make_task_dead+0x182/0x3c0
[   19.181918]  rewind_stack_and_make_dead+0x17/0x20
[   19.182096] RIP: 0033:0x7fed1f43ee5d
[   19.182232] Code: Unable to access opcode bytes at 0x7fed1f43ee33.
[   19.182455] RSP: 002b:00007ffe19d5c228 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   19.182754] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007fed1f43ee5d
[   19.183012] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   19.183269] RBP: 00007ffe19d5c240 R08: 0000000000000800 R09: 0000000000000800
[   19.183526] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffe19d5c358
[   19.183783] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007fed1f75e000
[   19.184045]  </TASK>
[   19.184130] irq event stamp: 0
[   19.184245] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   19.184474] hardirqs last disabled at (0): [<ffffffff8122f2d1>] copy_process+0x1c51/0x7140
[   19.184772] softirqs last  enabled at (0): [<ffffffff8122f312>] copy_process+0x1c92/0x7140
[   19.185069] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   19.185298] ---[ end trace 0000000000000000 ]---
[   19.188064] iommufd_mock iommufd_mock144: Adding to iommu group 144
[   19.188322] iommufd_mock iommufd_mock144: Removing from iommu group 144
[   19.188581] general protection fault, probably for non-canonical address 0xdffffc0000000006: 0000 [#145] PREEMPT SMP KASAN NOPTI
[   19.188991] KASAN: null-ptr-deref in range [0x0000000000000030-0x0000000000000037]
[   19.189268] CPU: 0 PID: 864 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   19.189581] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   19.189985] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   19.190198] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   19.190861] RSP: 0018:ffff888014737ba8 EFLAGS: 00010206
[   19.191054] RAX: dffffc0000000000 RBX: ffff888013873000 RCX: 0000000000000000
[   19.191311] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   19.191568] RBP: ffff888014737bc0 R08: 0000000000000001 R09: ffffed100155b11b
[   19.191825] R10: ffff88800aad88df R11: 5f6466756d6d6f69 R12: 0000000000000000
[   19.192082] R13: ffffffff85cc0180 R14: ffff888024c35300 R15: ffffffff87070ae0
[   19.192339] FS:  00007ff73eefc600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   19.192629] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   19.192839] CR2: 0000000020000080 CR3: 000000002031e000 CR4: 0000000000750ef0
[   19.193097] PKRU: 55555554
[   19.193200] Call Trace:
[   19.193294]  <TASK>
[   19.193377]  ? show_regs+0x6e/0x80
[   19.193512]  ? die_addr+0x45/0xb0
[   19.193645]  ? exc_general_protection+0x159/0x250
[   19.193828]  ? asm_exc_general_protection+0x2b/0x30
[   19.194014]  ? sysfs_remove_link_from_group+0x21/0x90
[   19.194205]  ? sysfs_remove_link_from_group+0x37/0x90
[   19.194396]  ? sysfs_remove_link_from_group+0x21/0x90
[   19.194586]  iommu_device_unlink+0x85/0xd0
[   19.194742]  iommu_deinit_device+0x11f/0x4c0
[   19.194911]  __iommu_group_remove_device+0x26b/0x300
[   19.195101]  iommu_group_remove_device+0x8a/0xb0
[   19.195277]  iommufd_test+0x1f1a/0x2d10
[   19.195423]  ? __pfx_lock_release+0x10/0x10
[   19.195583]  ? __pfx_lock_acquire+0x10/0x10
[   19.195744]  ? __pfx_iommufd_test+0x10/0x10
[   19.195902]  ? __sanitizer_cov_trace_const_cmp8+0x1c/0x30
[   19.196106]  iommufd_fops_ioctl+0x377/0x510
[   19.196267]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   19.196445]  ? trace_hardirqs_on+0x26/0x120
[   19.196606]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   19.196838]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   19.197024]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   19.197226]  ? security_file_ioctl+0x9d/0xd0
[   19.197391]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   19.197569]  __x64_sys_ioctl+0x1b9/0x230
[   19.197719]  do_syscall_64+0x3c/0x90
[   19.197857]  entry_SYSCALL_64_after_hwframe+0x6e/0xd8
[   19.198045] RIP: 0033:0x7ff73ec3ee5d
[   19.198182] Code: ff c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d 93 af 1b 00 f7 d8 64 89 01 48
[   19.198840] RSP: 002b:00007ffc98bd5fc8 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   19.199114] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007ff73ec3ee5d
[   19.199372] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   19.199629] RBP: 00007ffc98bd5fe0 R08: 0000000000000800 R09: 0000000000000800
[   19.199886] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffc98bd60f8
[   19.200143] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007ff73ef3d000
[   19.200406]  </TASK>
[   19.200491] Modules linked in:
[   19.200632] ---[ end trace 0000000000000000 ]---
[   19.200804] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   19.201016] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   19.201671] RSP: 0018:ffff88802457fba8 EFLAGS: 00010206
[   19.201864] RAX: dffffc0000000000 RBX: ffff888014f9b000 RCX: 0000000000000000
[   19.202121] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   19.202378] RBP: ffff88802457fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   19.202643] R10: ffff88800aad88df R11: 0000000000000001 R12: 0000000000000000
[   19.202903] R13: ffffffff85cc0180 R14: ffff8880109b6ac0 R15: ffffffff87070ae0
[   19.203160] FS:  00007ff73eefc600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   19.203451] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   19.203660] CR2: 0000000020000080 CR3: 000000002031e000 CR4: 0000000000750ef0
[   19.203921] PKRU: 55555554
[   19.204280] ------------[ cut here ]------------
[   19.204449] WARNING: CPU: 0 PID: 864 at drivers/iommu/iommufd/main.c:258 iommufd_fops_release+0x2a3/0x300
[   19.204788] Modules linked in:
[   19.204902] CPU: 0 PID: 864 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   19.205209] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   19.205605] RIP: 0010:iommufd_fops_release+0x2a3/0x300
[   19.205793] Code: 45 d0 65 48 2b 04 25 28 00 00 00 75 54 48 81 c4 88 00 00 00 31 c0 5b 41 5c 41 5d 41 5e 41 5f 5d c3 cc cc cc cc e8 ad 4f 0a fe <0f> 0b eb a6 e8 74 23 67 fe e9 f6 fe ff ff 48 89 85 50 ff ff ff e8
[   19.206441] RSP: 0018:ffff888014737c00 EFLAGS: 00010293
[   19.206644] RAX: 0000000000000000 RBX: ffff88800fe06e08 RCX: 0000000000000000
[   19.206907] RDX: ffff888014cd8000 RSI: ffffffff835563e3 RDI: ffffffff86702b40
[   19.207165] RBP: ffff888014737cb0 R08: 0000000000000000 R09: fffffbfff0eb2644
[   19.207422] R10: ffffffff87593227 R11: ffff888013827000 R12: 0000000000000000
[   19.207680] R13: ffff88800ff77598 R14: ffff888014737c48 R15: ffffffff83556140
[   19.207936] FS:  0000000000000000(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   19.208226] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   19.208436] CR2: 0000000020000080 CR3: 000000000687e000 CR4: 0000000000750ef0
[   19.208693] PKRU: 55555554
[   19.208796] Call Trace:
[   19.208890]  <TASK>
[   19.208972]  ? show_regs+0x6e/0x80
[   19.209105]  ? __warn+0xef/0x340
[   19.209232]  ? report_bug+0x25e/0x4b0
[   19.209374]  ? iommufd_fops_release+0x2a3/0x300
[   19.209546]  ? report_bug+0x2cb/0x4b0
[   19.209690]  ? handle_bug+0x46/0x90
[   19.209825]  ? exc_invalid_op+0x1d/0x50
[   19.209971]  ? asm_exc_invalid_op+0x1f/0x30
[   19.210131]  ? __pfx_iommufd_fops_release+0x10/0x10
[   19.210312]  ? iommufd_fops_release+0x2a3/0x300
[   19.210481]  ? iommufd_fops_release+0x2a3/0x300
[   19.210657]  ? __pfx_iommufd_fops_release+0x10/0x10
[   19.210842]  ? rcu_is_watching+0x19/0xc0
[   19.210993]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   19.211191]  ? __pfx_iommufd_fops_release+0x10/0x10
[   19.211370]  __fput+0x424/0xaf0
[   19.211495]  ____fput+0x1f/0x30
[   19.211617]  task_work_run+0x19d/0x2b0
[   19.211758]  ? __pfx_task_work_run+0x10/0x10
[   19.211917]  ? __sanitizer_cov_trace_const_cmp1+0x1e/0x30
[   19.212113]  ? switch_task_namespaces+0xa9/0xe0
[   19.212283]  do_exit+0xac9/0x2790
[   19.212410]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   19.212636]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   19.212816]  ? __pfx_do_exit+0x10/0x10
[   19.212956]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   19.213153]  ? security_file_ioctl+0x9d/0xd0
[   19.213314]  make_task_dead+0x182/0x3c0
[   19.213459]  rewind_stack_and_make_dead+0x17/0x20
[   19.213633] RIP: 0033:0x7ff73ec3ee5d
[   19.213766] Code: Unable to access opcode bytes at 0x7ff73ec3ee33.
[   19.213983] RSP: 002b:00007ffc98bd5fc8 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   19.214252] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007ff73ec3ee5d
[   19.214503] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   19.214766] RBP: 00007ffc98bd5fe0 R08: 0000000000000800 R09: 0000000000000800
[   19.215020] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffc98bd60f8
[   19.215271] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007ff73ef3d000
[   19.215539]  </TASK>
[   19.215623] irq event stamp: 0
[   19.215736] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   19.215960] hardirqs last disabled at (0): [<ffffffff8122f2d1>] copy_process+0x1c51/0x7140
[   19.216251] softirqs last  enabled at (0): [<ffffffff8122f312>] copy_process+0x1c92/0x7140
[   19.216542] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   19.216764] ---[ end trace 0000000000000000 ]---
[   19.219454] iommufd_mock iommufd_mock145: Adding to iommu group 145
[   19.219703] iommufd_mock iommufd_mock145: Removing from iommu group 145
[   19.219963] general protection fault, probably for non-canonical address 0xdffffc0000000006: 0000 [#146] PREEMPT SMP KASAN NOPTI
[   19.220365] KASAN: null-ptr-deref in range [0x0000000000000030-0x0000000000000037]
[   19.220632] CPU: 0 PID: 865 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   19.220939] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   19.221334] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   19.221543] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   19.222185] RSP: 0018:ffff888012d87ba8 EFLAGS: 00010206
[   19.222373] RAX: dffffc0000000000 RBX: ffff888013872000 RCX: 0000000000000000
[   19.222625] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   19.222882] RBP: ffff888012d87bc0 R08: 0000000000000001 R09: ffffed100155b11b
[   19.223133] R10: ffff88800aad88df R11: 5f6466756d6d6f69 R12: 0000000000000000
[   19.223385] R13: ffffffff85cc0180 R14: ffff888024c35f00 R15: ffffffff87070ae0
[   19.223636] FS:  00007fc30de28600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   19.223919] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   19.224125] CR2: 0000000020000080 CR3: 000000002031e000 CR4: 0000000000750ef0
[   19.224378] PKRU: 55555554
[   19.224479] Call Trace:
[   19.224570]  <TASK>
[   19.224651]  ? show_regs+0x6e/0x80
[   19.224784]  ? die_addr+0x45/0xb0
[   19.224914]  ? exc_general_protection+0x159/0x250
[   19.225093]  ? asm_exc_general_protection+0x2b/0x30
[   19.225275]  ? sysfs_remove_link_from_group+0x21/0x90
[   19.225462]  ? sysfs_remove_link_from_group+0x37/0x90
[   19.225648]  ? sysfs_remove_link_from_group+0x21/0x90
[   19.225834]  iommu_device_unlink+0x85/0xd0
[   19.225988]  iommu_deinit_device+0x11f/0x4c0
[   19.226151]  __iommu_group_remove_device+0x26b/0x300
[   19.226337]  iommu_group_remove_device+0x8a/0xb0
[   19.226509]  iommufd_test+0x1f1a/0x2d10
[   19.226652]  ? __pfx_lock_release+0x10/0x10
[   19.226812]  ? __pfx_lock_acquire+0x10/0x10
[   19.226969]  ? __pfx_iommufd_test+0x10/0x10
[   19.227126]  ? __sanitizer_cov_trace_const_cmp8+0x1c/0x30
[   19.227325]  iommufd_fops_ioctl+0x377/0x510
[   19.227482]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   19.227657]  ? trace_hardirqs_on+0x26/0x120
[   19.227815]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   19.228043]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   19.228225]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   19.228423]  ? security_file_ioctl+0x9d/0xd0
[   19.228585]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   19.228760]  __x64_sys_ioctl+0x1b9/0x230
[   19.228907]  do_syscall_64+0x3c/0x90
[   19.229041]  entry_SYSCALL_64_after_hwframe+0x6e/0xd8
[   19.229225] RIP: 0033:0x7fc30dc3ee5d
[   19.229358] Code: ff c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d 93 af 1b 00 f7 d8 64 89 01 48
[   19.230000] RSP: 002b:00007fff6fa08cc8 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   19.230269] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007fc30dc3ee5d
[   19.230521] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   19.230784] RBP: 00007fff6fa08ce0 R08: 0000000000000800 R09: 0000000000000800
[   19.231038] R10: 0000000000000000 R11: 0000000000000213 R12: 00007fff6fa08df8
[   19.231292] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007fc30de69000
[   19.231548]  </TASK>
[   19.231632] Modules linked in:
[   19.231761] ---[ end trace 0000000000000000 ]---
[   19.231928] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   19.232135] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   19.232778] RSP: 0018:ffff88802457fba8 EFLAGS: 00010206
[   19.232966] RAX: dffffc0000000000 RBX: ffff888014f9b000 RCX: 0000000000000000
[   19.233218] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   19.233469] RBP: ffff88802457fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   19.233721] R10: ffff88800aad88df R11: 0000000000000001 R12: 0000000000000000
[   19.233972] R13: ffffffff85cc0180 R14: ffff8880109b6ac0 R15: ffffffff87070ae0
[   19.234224] FS:  00007fc30de28600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   19.234508] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   19.234720] CR2: 0000000020000080 CR3: 000000002031e000 CR4: 0000000000750ef0
[   19.234977] PKRU: 55555554
[   19.235325] ------------[ cut here ]------------
[   19.235492] WARNING: CPU: 0 PID: 865 at drivers/iommu/iommufd/main.c:258 iommufd_fops_release+0x2a3/0x300
[   19.235832] Modules linked in:
[   19.235945] CPU: 0 PID: 865 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   19.236252] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   19.236649] RIP: 0010:iommufd_fops_release+0x2a3/0x300
[   19.236837] Code: 45 d0 65 48 2b 04 25 28 00 00 00 75 54 48 81 c4 88 00 00 00 31 c0 5b 41 5c 41 5d 41 5e 41 5f 5d c3 cc cc cc cc e8 ad 4f 0a fe <0f> 0b eb a6 e8 74 23 67 fe e9 f6 fe ff ff 48 89 85 50 ff ff ff e8
[   19.237480] RSP: 0018:ffff888012d87c00 EFLAGS: 00010293
[   19.237670] RAX: 0000000000000000 RBX: ffff88800fe06608 RCX: 0000000000000000
[   19.237923] RDX: ffff888013a02500 RSI: ffffffff835563e3 RDI: ffffffff86702b40
[   19.238174] RBP: ffff888012d87cb0 R08: 0000000000000000 R09: fffffbfff0eb2644
[   19.238426] R10: ffffffff87593227 R11: ffff888023172c00 R12: 0000000000000000
[   19.238685] R13: ffff888018bef318 R14: ffff888012d87c48 R15: ffffffff83556140
[   19.238964] FS:  0000000000000000(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   19.239247] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   19.239453] CR2: 0000000020000080 CR3: 000000000687e000 CR4: 0000000000750ef0
[   19.239705] PKRU: 55555554
[   19.239806] Call Trace:
[   19.239897]  <TASK>
[   19.239977]  ? show_regs+0x6e/0x80
[   19.240107]  ? __warn+0xef/0x340
[   19.240231]  ? report_bug+0x25e/0x4b0
[   19.240369]  ? iommufd_fops_release+0x2a3/0x300
[   19.240537]  ? report_bug+0x2cb/0x4b0
[   19.240678]  ? handle_bug+0x46/0x90
[   19.240810]  ? exc_invalid_op+0x1d/0x50
[   19.240953]  ? asm_exc_invalid_op+0x1f/0x30
[   19.241107]  ? __pfx_iommufd_fops_release+0x10/0x10
[   19.241289]  ? iommufd_fops_release+0x2a3/0x300
[   19.241456]  ? iommufd_fops_release+0x2a3/0x300
[   19.241629]  ? __pfx_iommufd_fops_release+0x10/0x10
[   19.241833]  ? rcu_is_watching+0x19/0xc0
[   19.241983]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   19.242179]  ? __pfx_iommufd_fops_release+0x10/0x10
[   19.242358]  __fput+0x424/0xaf0
[   19.242483]  ____fput+0x1f/0x30
[   19.242622]  task_work_run+0x19d/0x2b0
[   19.242769]  ? __pfx_task_work_run+0x10/0x10
[   19.242929]  ? __sanitizer_cov_trace_const_cmp1+0x1e/0x30
[   19.243126]  ? switch_task_namespaces+0xa9/0xe0
[   19.243296]  do_exit+0xac9/0x2790
[   19.243423]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   19.243649]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   19.243830]  ? __pfx_do_exit+0x10/0x10
[   19.243971]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   19.244167]  ? security_file_ioctl+0x9d/0xd0
[   19.244329]  make_task_dead+0x182/0x3c0
[   19.244474]  rewind_stack_and_make_dead+0x17/0x20
[   19.244649] RIP: 0033:0x7fc30dc3ee5d
[   19.244781] Code: Unable to access opcode bytes at 0x7fc30dc3ee33.
[   19.244998] RSP: 002b:00007fff6fa08cc8 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   19.245267] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007fc30dc3ee5d
[   19.245518] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   19.245770] RBP: 00007fff6fa08ce0 R08: 0000000000000800 R09: 0000000000000800
[   19.246022] R10: 0000000000000000 R11: 0000000000000213 R12: 00007fff6fa08df8
[   19.246273] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007fc30de69000
[   19.246530]  </TASK>
[   19.246620] irq event stamp: 0
[   19.246734] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   19.246958] hardirqs last disabled at (0): [<ffffffff8122f2d1>] copy_process+0x1c51/0x7140
[   19.247251] softirqs last  enabled at (0): [<ffffffff8122f312>] copy_process+0x1c92/0x7140
[   19.247542] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   19.247765] ---[ end trace 0000000000000000 ]---
[   19.250423] iommufd_mock iommufd_mock146: Adding to iommu group 146
[   19.250696] iommufd_mock iommufd_mock146: Removing from iommu group 146
[   19.250956] general protection fault, probably for non-canonical address 0xdffffc0000000006: 0000 [#147] PREEMPT SMP KASAN NOPTI
[   19.251379] KASAN: null-ptr-deref in range [0x0000000000000030-0x0000000000000037]
[   19.251646] CPU: 0 PID: 866 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   19.251952] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   19.252348] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   19.252556] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   19.253196] RSP: 0018:ffff888010767ba8 EFLAGS: 00010206
[   19.253384] RAX: dffffc0000000000 RBX: ffff888013870000 RCX: 0000000000000000
[   19.253635] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   19.253886] RBP: ffff888010767bc0 R08: 0000000000000001 R09: ffffed100155b11b
[   19.254136] R10: ffff88800aad88df R11: 5f6466756d6d6f69 R12: 0000000000000000
[   19.254387] R13: ffffffff85cc0180 R14: ffff888024c358e0 R15: ffffffff87070ae0
[   19.254639] FS:  00007f7670ed7600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   19.254926] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   19.255131] CR2: 0000000020000080 CR3: 000000002031e000 CR4: 0000000000750ef0
[   19.255383] PKRU: 55555554
[   19.255484] Call Trace:
[   19.255575]  <TASK>
[   19.255656]  ? show_regs+0x6e/0x80
[   19.255789]  ? die_addr+0x45/0xb0
[   19.255919]  ? exc_general_protection+0x159/0x250
[   19.256098]  ? asm_exc_general_protection+0x2b/0x30
[   19.256281]  ? sysfs_remove_link_from_group+0x21/0x90
[   19.256467]  ? sysfs_remove_link_from_group+0x37/0x90
[   19.256654]  ? sysfs_remove_link_from_group+0x21/0x90
[   19.256840]  iommu_device_unlink+0x85/0xd0
[   19.256994]  iommu_deinit_device+0x11f/0x4c0
[   19.257156]  __iommu_group_remove_device+0x26b/0x300
[   19.257342]  iommu_group_remove_device+0x8a/0xb0
[   19.257515]  iommufd_test+0x1f1a/0x2d10
[   19.257677]  ? __pfx_lock_release+0x10/0x10
[   19.257834]  ? __pfx_lock_acquire+0x10/0x10
[   19.257992]  ? __pfx_iommufd_test+0x10/0x10
[   19.258148]  ? __sanitizer_cov_trace_const_cmp8+0x1c/0x30
[   19.258347]  iommufd_fops_ioctl+0x377/0x510
[   19.258505]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   19.258681]  ? trace_hardirqs_on+0x26/0x120
[   19.258841]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   19.259069]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   19.259251]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   19.259471]  ? security_file_ioctl+0x9d/0xd0
[   19.259636]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   19.259814]  __x64_sys_ioctl+0x1b9/0x230
[   19.259961]  do_syscall_64+0x3c/0x90
[   19.260095]  entry_SYSCALL_64_after_hwframe+0x6e/0xd8
[   19.260280] RIP: 0033:0x7f7670c3ee5d
[   19.260412] Code: ff c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d 93 af 1b 00 f7 d8 64 89 01 48
[   19.261055] RSP: 002b:00007ffe94710528 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   19.261322] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f7670c3ee5d
[   19.261575] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   19.261826] RBP: 00007ffe94710540 R08: 0000000000000800 R09: 0000000000000800
[   19.262078] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffe94710658
[   19.262329] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f7670f18000
[   19.262586]  </TASK>
[   19.262670] Modules linked in:
[   19.262909] ---[ end trace 0000000000000000 ]---
[   19.263077] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   19.263284] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   19.263927] RSP: 0018:ffff88802457fba8 EFLAGS: 00010206
[   19.264114] RAX: dffffc0000000000 RBX: ffff888014f9b000 RCX: 0000000000000000
[   19.264366] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   19.264616] RBP: ffff88802457fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   19.264867] R10: ffff88800aad88df R11: 0000000000000001 R12: 0000000000000000
[   19.265118] R13: ffffffff85cc0180 R14: ffff8880109b6ac0 R15: ffffffff87070ae0
[   19.265370] FS:  00007f7670ed7600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   19.265653] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   19.265858] CR2: 0000000020000080 CR3: 000000002031e000 CR4: 0000000000750ef0
[   19.266110] PKRU: 55555554
[   19.266459] ------------[ cut here ]------------
[   19.266637] WARNING: CPU: 0 PID: 866 at drivers/iommu/iommufd/main.c:258 iommufd_fops_release+0x2a3/0x300
[   19.266981] Modules linked in:
[   19.267096] CPU: 0 PID: 866 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   19.267401] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   19.267796] RIP: 0010:iommufd_fops_release+0x2a3/0x300
[   19.267984] Code: 45 d0 65 48 2b 04 25 28 00 00 00 75 54 48 81 c4 88 00 00 00 31 c0 5b 41 5c 41 5d 41 5e 41 5f 5d c3 cc cc cc cc e8 ad 4f 0a fe <0f> 0b eb a6 e8 74 23 67 fe e9 f6 fe ff ff 48 89 85 50 ff ff ff e8
[   19.268624] RSP: 0018:ffff888010767c00 EFLAGS: 00010293
[   19.268811] RAX: 0000000000000000 RBX: ffff88800fe06008 RCX: 0000000000000000
[   19.269063] RDX: ffff888013a04a00 RSI: ffffffff835563e3 RDI: ffffffff86702b40
[   19.269314] RBP: ffff888010767cb0 R08: 0000000000000000 R09: fffffbfff0eb2644
[   19.269566] R10: ffffffff87593227 R11: ffff888013a20000 R12: 0000000000000000
[   19.269818] R13: ffff8880131ac698 R14: ffff888010767c48 R15: ffffffff83556140
[   19.270070] FS:  0000000000000000(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   19.270353] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   19.270558] CR2: 0000000020000080 CR3: 000000000687e000 CR4: 0000000000750ef0
[   19.270819] PKRU: 55555554
[   19.270921] Call Trace:
[   19.271013]  <TASK>
[   19.271094]  ? show_regs+0x6e/0x80
[   19.271224]  ? __warn+0xef/0x340
[   19.271348]  ? report_bug+0x25e/0x4b0
[   19.271487]  ? iommufd_fops_release+0x2a3/0x300
[   19.271655]  ? report_bug+0x2cb/0x4b0
[   19.271795]  ? handle_bug+0x46/0x90
[   19.271927]  ? exc_invalid_op+0x1d/0x50
[   19.272070]  ? asm_exc_invalid_op+0x1f/0x30
[   19.272224]  ? __pfx_iommufd_fops_release+0x10/0x10
[   19.272406]  ? iommufd_fops_release+0x2a3/0x300
[   19.272574]  ? iommufd_fops_release+0x2a3/0x300
[   19.272743]  ? __pfx_iommufd_fops_release+0x10/0x10
[   19.272921]  ? rcu_is_watching+0x19/0xc0
[   19.273069]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   19.273266]  ? __pfx_iommufd_fops_release+0x10/0x10
[   19.273444]  __fput+0x424/0xaf0
[   19.273569]  ____fput+0x1f/0x30
[   19.273690]  task_work_run+0x19d/0x2b0
[   19.273832]  ? __pfx_task_work_run+0x10/0x10
[   19.273991]  ? __sanitizer_cov_trace_const_cmp1+0x1e/0x30
[   19.274187]  ? switch_task_namespaces+0xa9/0xe0
[   19.274356]  do_exit+0xac9/0x2790
[   19.274482]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   19.274715]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   19.274898]  ? __pfx_do_exit+0x10/0x10
[   19.275038]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   19.275234]  ? security_file_ioctl+0x9d/0xd0
[   19.275396]  make_task_dead+0x182/0x3c0
[   19.275540]  rewind_stack_and_make_dead+0x17/0x20
[   19.275714] RIP: 0033:0x7f7670c3ee5d
[   19.275845] Code: Unable to access opcode bytes at 0x7f7670c3ee33.
[   19.276062] RSP: 002b:00007ffe94710528 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   19.276330] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f7670c3ee5d
[   19.276580] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   19.276831] RBP: 00007ffe94710540 R08: 0000000000000800 R09: 0000000000000800
[   19.277081] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffe94710658
[   19.277332] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f7670f18000
[   19.277588]  </TASK>
[   19.277671] irq event stamp: 0
[   19.277784] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   19.278006] hardirqs last disabled at (0): [<ffffffff8122f2d1>] copy_process+0x1c51/0x7140
[   19.278298] softirqs last  enabled at (0): [<ffffffff8122f312>] copy_process+0x1c92/0x7140
[   19.278598] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   19.278822] ---[ end trace 0000000000000000 ]---
[   19.281285] iommufd_mock iommufd_mock147: Adding to iommu group 147
[   19.281533] iommufd_mock iommufd_mock147: Removing from iommu group 147
[   19.281786] general protection fault, probably for non-canonical address 0xdffffc0000000006: 0000 [#148] PREEMPT SMP KASAN NOPTI
[   19.282188] KASAN: null-ptr-deref in range [0x0000000000000030-0x0000000000000037]
[   19.282455] CPU: 0 PID: 867 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   19.282770] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   19.283167] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   19.283376] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   19.284018] RSP: 0018:ffff888020377ba8 EFLAGS: 00010206
[   19.284206] RAX: dffffc0000000000 RBX: ffff888013876000 RCX: 0000000000000000
[   19.284458] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   19.284710] RBP: ffff888020377bc0 R08: 0000000000000001 R09: ffffed100155b11b
[   19.284962] R10: ffff88800aad88df R11: 5f6466756d6d6f69 R12: 0000000000000000
[   19.285214] R13: ffffffff85cc0180 R14: ffff888024c350e0 R15: ffffffff87070ae0
[   19.285466] FS:  00007f1919258600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   19.285750] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   19.285956] CR2: 0000000020000080 CR3: 00000000202d4000 CR4: 0000000000750ef0
[   19.286210] PKRU: 55555554
[   19.286311] Call Trace:
[   19.286403]  <TASK>
[   19.286484]  ? show_regs+0x6e/0x80
[   19.286617]  ? die_addr+0x45/0xb0
[   19.286751]  ? exc_general_protection+0x159/0x250
[   19.286931]  ? asm_exc_general_protection+0x2b/0x30
[   19.287114]  ? sysfs_remove_link_from_group+0x21/0x90
[   19.287301]  ? sysfs_remove_link_from_group+0x37/0x90
[   19.287487]  ? sysfs_remove_link_from_group+0x21/0x90
[   19.287674]  iommu_device_unlink+0x85/0xd0
[   19.287827]  iommu_deinit_device+0x11f/0x4c0
[   19.287989]  __iommu_group_remove_device+0x26b/0x300
[   19.288174]  iommu_group_remove_device+0x8a/0xb0
[   19.288347]  iommufd_test+0x1f1a/0x2d10
[   19.288490]  ? __pfx_lock_release+0x10/0x10
[   19.288646]  ? __pfx_lock_acquire+0x10/0x10
[   19.288804]  ? __pfx_iommufd_test+0x10/0x10
[   19.288960]  ? __sanitizer_cov_trace_const_cmp8+0x1c/0x30
[   19.289159]  iommufd_fops_ioctl+0x377/0x510
[   19.289317]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   19.289492]  ? trace_hardirqs_on+0x26/0x120
[   19.289651]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   19.289878]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   19.290061]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   19.290258]  ? security_file_ioctl+0x9d/0xd0
[   19.290420]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   19.290595]  __x64_sys_ioctl+0x1b9/0x230
[   19.290743]  do_syscall_64+0x3c/0x90
[   19.290880]  entry_SYSCALL_64_after_hwframe+0x6e/0xd8
[   19.291065] RIP: 0033:0x7f191903ee5d
[   19.291198] Code: ff c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d 93 af 1b 00 f7 d8 64 89 01 48
[   19.291841] RSP: 002b:00007ffd3a28b3f8 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   19.292109] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f191903ee5d
[   19.292361] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   19.292613] RBP: 00007ffd3a28b410 R08: 0000000000000800 R09: 0000000000000800
[   19.292865] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffd3a28b528
[   19.293116] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f1919299000
[   19.293373]  </TASK>
[   19.293457] Modules linked in:
[   19.293594] ---[ end trace 0000000000000000 ]---
[   19.293762] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   19.294056] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   19.294855] RSP: 0018:ffff88802457fba8 EFLAGS: 00010206
[   19.295049] RAX: dffffc0000000000 RBX: ffff888014f9b000 RCX: 0000000000000000
[   19.295301] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   19.295552] RBP: ffff88802457fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   19.295804] R10: ffff88800aad88df R11: 0000000000000001 R12: 0000000000000000
[   19.296055] R13: ffffffff85cc0180 R14: ffff8880109b6ac0 R15: ffffffff87070ae0
[   19.296307] FS:  00007f1919258600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   19.296591] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   19.296797] CR2: 0000000020000080 CR3: 00000000202d4000 CR4: 0000000000750ef0
[   19.297050] PKRU: 55555554
[   19.297402] ------------[ cut here ]------------
[   19.297570] WARNING: CPU: 0 PID: 867 at drivers/iommu/iommufd/main.c:258 iommufd_fops_release+0x2a3/0x300
[   19.297909] Modules linked in:
[   19.298024] CPU: 0 PID: 867 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   19.298330] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   19.298752] RIP: 0010:iommufd_fops_release+0x2a3/0x300
[   19.298946] Code: 45 d0 65 48 2b 04 25 28 00 00 00 75 54 48 81 c4 88 00 00 00 31 c0 5b 41 5c 41 5d 41 5e 41 5f 5d c3 cc cc cc cc e8 ad 4f 0a fe <0f> 0b eb a6 e8 74 23 67 fe e9 f6 fe ff ff 48 89 85 50 ff ff ff e8
[   19.299588] RSP: 0018:ffff888020377c00 EFLAGS: 00010293
[   19.299775] RAX: 0000000000000000 RBX: ffff88800fe06b08 RCX: 0000000000000000
[   19.300027] RDX: ffff888010562500 RSI: ffffffff835563e3 RDI: ffffffff86702b40
[   19.300278] RBP: ffff888020377cb0 R08: 0000000000000000 R09: fffffbfff0eb2644
[   19.300529] R10: ffffffff87593227 R11: ffff888012eae400 R12: 0000000000000000
[   19.300780] R13: ffff8880131add18 R14: ffff888020377c48 R15: ffffffff83556140
[   19.301032] FS:  0000000000000000(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   19.301315] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   19.301520] CR2: 0000000020000080 CR3: 000000000687e000 CR4: 0000000000750ef0
[   19.301772] PKRU: 55555554
[   19.301872] Call Trace:
[   19.301964]  <TASK>
[   19.302044]  ? show_regs+0x6e/0x80
[   19.302175]  ? __warn+0xef/0x340
[   19.302300]  ? report_bug+0x25e/0x4b0
[   19.302439]  ? iommufd_fops_release+0x2a3/0x300
[   19.302613]  ? report_bug+0x2cb/0x4b0
[   19.302757]  ? handle_bug+0x46/0x90
[   19.302888]  ? exc_invalid_op+0x1d/0x50
[   19.303031]  ? asm_exc_invalid_op+0x1f/0x30
[   19.303186]  ? __pfx_iommufd_fops_release+0x10/0x10
[   19.303365]  ? iommufd_fops_release+0x2a3/0x300
[   19.303533]  ? iommufd_fops_release+0x2a3/0x300
[   19.303702]  ? __pfx_iommufd_fops_release+0x10/0x10
[   19.303880]  ? rcu_is_watching+0x19/0xc0
[   19.304028]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   19.304225]  ? __pfx_iommufd_fops_release+0x10/0x10
[   19.304403]  __fput+0x424/0xaf0
[   19.304527]  ____fput+0x1f/0x30
[   19.304648]  task_work_run+0x19d/0x2b0
[   19.304790]  ? __pfx_task_work_run+0x10/0x10
[   19.304948]  ? __sanitizer_cov_trace_const_cmp1+0x1e/0x30
[   19.305144]  ? switch_task_namespaces+0xa9/0xe0
[   19.305313]  do_exit+0xac9/0x2790
[   19.305440]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   19.305665]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   19.305846]  ? __pfx_do_exit+0x10/0x10
[   19.305986]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   19.306182]  ? security_file_ioctl+0x9d/0xd0
[   19.306343]  make_task_dead+0x182/0x3c0
[   19.306488]  rewind_stack_and_make_dead+0x17/0x20
[   19.306669] RIP: 0033:0x7f191903ee5d
[   19.306803] Code: Unable to access opcode bytes at 0x7f191903ee33.
[   19.307021] RSP: 002b:00007ffd3a28b3f8 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   19.307289] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f191903ee5d
[   19.307540] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   19.307791] RBP: 00007ffd3a28b410 R08: 0000000000000800 R09: 0000000000000800
[   19.308042] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffd3a28b528
[   19.308294] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f1919299000
[   19.308551]  </TASK>
[   19.308634] irq event stamp: 0
[   19.308747] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   19.308970] hardirqs last disabled at (0): [<ffffffff8122f2d1>] copy_process+0x1c51/0x7140
[   19.309263] softirqs last  enabled at (0): [<ffffffff8122f312>] copy_process+0x1c92/0x7140
[   19.309554] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   19.309777] ---[ end trace 0000000000000000 ]---
[   19.312464] iommufd_mock iommufd_mock148: Adding to iommu group 148
[   19.312720] iommufd_mock iommufd_mock148: Removing from iommu group 148
[   19.312978] general protection fault, probably for non-canonical address 0xdffffc0000000006: 0000 [#149] PREEMPT SMP KASAN NOPTI
[   19.313391] KASAN: null-ptr-deref in range [0x0000000000000030-0x0000000000000037]
[   19.313663] CPU: 1 PID: 868 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   19.313976] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   19.314382] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   19.314595] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   19.315282] RSP: 0018:ffff888023307ba8 EFLAGS: 00010206
[   19.315475] RAX: dffffc0000000000 RBX: ffff88802453a000 RCX: 0000000000000000
[   19.315733] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   19.315990] RBP: ffff888023307bc0 R08: 0000000000000001 R09: ffffed100155b11b
[   19.316248] R10: ffff88800aad88df R11: 5f6466756d6d6f69 R12: 0000000000000000
[   19.316505] R13: ffffffff85cc0180 R14: ffff88801679a940 R15: ffffffff87070ae0
[   19.316763] FS:  00007fe3a8ebb600(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
[   19.317054] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   19.317265] CR2: 0000000020000080 CR3: 000000001def4000 CR4: 0000000000750ee0
[   19.317524] PKRU: 55555554
[   19.317627] Call Trace:
[   19.317738]  <TASK>
[   19.317822]  ? show_regs+0x6e/0x80
[   19.317961]  ? die_addr+0x45/0xb0
[   19.318094]  ? exc_general_protection+0x159/0x250
[   19.318277]  ? asm_exc_general_protection+0x2b/0x30
[   19.318464]  ? sysfs_remove_link_from_group+0x21/0x90
[   19.318655]  ? sysfs_remove_link_from_group+0x37/0x90
[   19.318848]  ? sysfs_remove_link_from_group+0x21/0x90
[   19.319039]  iommu_device_unlink+0x85/0xd0
[   19.319196]  iommu_deinit_device+0x11f/0x4c0
[   19.319361]  __iommu_group_remove_device+0x26b/0x300
[   19.319551]  iommu_group_remove_device+0x8a/0xb0
[   19.319728]  iommufd_test+0x1f1a/0x2d10
[   19.319874]  ? __pfx_lock_release+0x10/0x10
[   19.320034]  ? __pfx_lock_acquire+0x10/0x10
[   19.320196]  ? __pfx_iommufd_test+0x10/0x10
[   19.320355]  ? __sanitizer_cov_trace_const_cmp8+0x1c/0x30
[   19.320559]  iommufd_fops_ioctl+0x377/0x510
[   19.320720]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   19.320898]  ? trace_hardirqs_on+0x26/0x120
[   19.321060]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   19.321292]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   19.321479]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   19.321681]  ? security_file_ioctl+0x9d/0xd0
[   19.321847]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   19.322026]  __x64_sys_ioctl+0x1b9/0x230
[   19.322176]  do_syscall_64+0x3c/0x90
[   19.322313]  entry_SYSCALL_64_after_hwframe+0x6e/0xd8
[   19.322502] RIP: 0033:0x7fe3a8c3ee5d
[   19.322638] Code: ff c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d 93 af 1b 00 f7 d8 64 89 01 48
[   19.323299] RSP: 002b:00007fff8c658fa8 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   19.323574] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007fe3a8c3ee5d
[   19.323831] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   19.324089] RBP: 00007fff8c658fc0 R08: 0000000000000800 R09: 0000000000000800
[   19.324347] R10: 0000000000000000 R11: 0000000000000213 R12: 00007fff8c6590d8
[   19.324604] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007fe3a8efc000
[   19.324868]  </TASK>
[   19.324953] Modules linked in:
[   19.325115] ---[ end trace 0000000000000000 ]---
[   19.325287] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   19.325499] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   19.326157] RSP: 0018:ffff88802457fba8 EFLAGS: 00010206
[   19.326350] RAX: dffffc0000000000 RBX: ffff888014f9b000 RCX: 0000000000000000
[   19.326633] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   19.326893] RBP: ffff88802457fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   19.327151] R10: ffff88800aad88df R11: 0000000000000001 R12: 0000000000000000
[   19.327408] R13: ffffffff85cc0180 R14: ffff8880109b6ac0 R15: ffffffff87070ae0
[   19.327666] FS:  00007fe3a8ebb600(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
[   19.327957] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   19.328167] CR2: 0000000020000080 CR3: 000000001def4000 CR4: 0000000000750ee0
[   19.328426] PKRU: 55555554
[   19.329049] ------------[ cut here ]------------
[   19.329223] WARNING: CPU: 1 PID: 868 at drivers/iommu/iommufd/main.c:258 iommufd_fops_release+0x2a3/0x300
[   19.329571] Modules linked in:
[   19.329688] CPU: 1 PID: 868 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   19.330002] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   19.330409] RIP: 0010:iommufd_fops_release+0x2a3/0x300
[   19.330611] Code: 45 d0 65 48 2b 04 25 28 00 00 00 75 54 48 81 c4 88 00 00 00 31 c0 5b 41 5c 41 5d 41 5e 41 5f 5d c3 cc cc cc cc e8 ad 4f 0a fe <0f> 0b eb a6 e8 74 23 67 fe e9 f6 fe ff ff 48 89 85 50 ff ff ff e8
[   19.331285] RSP: 0018:ffff888023307c00 EFLAGS: 00010293
[   19.331478] RAX: 0000000000000000 RBX: ffff88801248a908 RCX: 0000000000000000
[   19.331735] RDX: ffff888010564a00 RSI: ffffffff835563e3 RDI: ffffffff86702b48
[   19.331993] RBP: ffff888023307cb0 R08: 0000000000000000 R09: fffffbfff0eb2644
[   19.332251] R10: ffffffff87593227 R11: ffff8880111efe00 R12: 0000000000000000
[   19.332509] R13: ffff888013163818 R14: ffff888023307c48 R15: ffffffff83556140
[   19.332767] FS:  0000000000000000(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
[   19.333058] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   19.333269] CR2: 0000000020000080 CR3: 000000000687e000 CR4: 0000000000750ee0
[   19.333527] PKRU: 55555554
[   19.333631] Call Trace:
[   19.333724]  <TASK>
[   19.333807]  ? show_regs+0x6e/0x80
[   19.333941]  ? __warn+0xef/0x340
[   19.334068]  ? report_bug+0x25e/0x4b0
[   19.334210]  ? iommufd_fops_release+0x2a3/0x300
[   19.334383]  ? report_bug+0x2cb/0x4b0
[   19.334527]  ? handle_bug+0x46/0x90
[   19.334690]  ? exc_invalid_op+0x1d/0x50
[   19.334838]  ? asm_exc_invalid_op+0x1f/0x30
[   19.334993]  ? __pfx_iommufd_fops_release+0x10/0x10
[   19.335176]  ? iommufd_fops_release+0x2a3/0x300
[   19.335345]  ? iommufd_fops_release+0x2a3/0x300
[   19.335516]  ? __pfx_iommufd_fops_release+0x10/0x10
[   19.335695]  ? rcu_is_watching+0x19/0xc0
[   19.335844]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   19.336042]  ? __pfx_iommufd_fops_release+0x10/0x10
[   19.336222]  __fput+0x424/0xaf0
[   19.336348]  ____fput+0x1f/0x30
[   19.336470]  task_work_run+0x19d/0x2b0
[   19.336612]  ? __pfx_task_work_run+0x10/0x10
[   19.336772]  ? __sanitizer_cov_trace_const_cmp1+0x1e/0x30
[   19.336969]  ? switch_task_namespaces+0xa9/0xe0
[   19.337139]  do_exit+0xac9/0x2790
[   19.337267]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   19.337494]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   19.337676]  ? __pfx_do_exit+0x10/0x10
[   19.337837]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   19.338035]  ? security_file_ioctl+0x9d/0xd0
[   19.338198]  make_task_dead+0x182/0x3c0
[   19.338343]  rewind_stack_and_make_dead+0x17/0x20
[   19.338518] RIP: 0033:0x7fe3a8c3ee5d
[   19.338671] Code: Unable to access opcode bytes at 0x7fe3a8c3ee33.
[   19.338891] RSP: 002b:00007fff8c658fa8 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   19.339162] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007fe3a8c3ee5d
[   19.339415] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   19.339668] RBP: 00007fff8c658fc0 R08: 0000000000000800 R09: 0000000000000800
[   19.339921] R10: 0000000000000000 R11: 0000000000000213 R12: 00007fff8c6590d8
[   19.340174] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007fe3a8efc000
[   19.340431]  </TASK>
[   19.340515] irq event stamp: 0
[   19.340629] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   19.340853] hardirqs last disabled at (0): [<ffffffff8122f2d1>] copy_process+0x1c51/0x7140
[   19.341147] softirqs last  enabled at (0): [<ffffffff8122f312>] copy_process+0x1c92/0x7140
[   19.341441] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   19.341665] ---[ end trace 0000000000000000 ]---
[   19.344628] iommufd_mock iommufd_mock149: Adding to iommu group 149
[   19.344883] iommufd_mock iommufd_mock149: Removing from iommu group 149
[   19.345137] general protection fault, probably for non-canonical address 0xdffffc0000000006: 0000 [#150] PREEMPT SMP KASAN NOPTI
[   19.345540] KASAN: null-ptr-deref in range [0x0000000000000030-0x0000000000000037]
[   19.345808] CPU: 0 PID: 869 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   19.346116] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   19.346514] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   19.346724] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   19.347374] RSP: 0018:ffff888017597ba8 EFLAGS: 00010206
[   19.347565] RAX: dffffc0000000000 RBX: ffff888013875000 RCX: 0000000000000000
[   19.347818] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   19.348070] RBP: ffff888017597bc0 R08: 0000000000000001 R09: ffffed100155b11b
[   19.348323] R10: ffff88800aad88df R11: 5f6466756d6d6f69 R12: 0000000000000000
[   19.348576] R13: ffffffff85cc0180 R14: ffff888024c35160 R15: ffffffff87070ae0
[   19.348829] FS:  00007fd641e07600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   19.349114] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   19.349320] CR2: 0000000020000080 CR3: 00000000202d4000 CR4: 0000000000750ef0
[   19.349574] PKRU: 55555554
[   19.349676] Call Trace:
[   19.349767]  <TASK>
[   19.349849]  ? show_regs+0x6e/0x80
[   19.349982]  ? die_addr+0x45/0xb0
[   19.350112]  ? exc_general_protection+0x159/0x250
[   19.350292]  ? asm_exc_general_protection+0x2b/0x30
[   19.350475]  ? sysfs_remove_link_from_group+0x21/0x90
[   19.350663]  ? sysfs_remove_link_from_group+0x37/0x90
[   19.350853]  ? sysfs_remove_link_from_group+0x21/0x90
[   19.351040]  iommu_device_unlink+0x85/0xd0
[   19.351196]  iommu_deinit_device+0x11f/0x4c0
[   19.351360]  __iommu_group_remove_device+0x26b/0x300
[   19.351546]  iommu_group_remove_device+0x8a/0xb0
[   19.351719]  iommufd_test+0x1f1a/0x2d10
[   19.351863]  ? __pfx_lock_release+0x10/0x10
[   19.352020]  ? __pfx_lock_acquire+0x10/0x10
[   19.352179]  ? __pfx_iommufd_test+0x10/0x10
[   19.352336]  ? __sanitizer_cov_trace_const_cmp8+0x1c/0x30
[   19.352536]  iommufd_fops_ioctl+0x377/0x510
[   19.352695]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   19.352870]  ? trace_hardirqs_on+0x26/0x120
[   19.353029]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   19.353257]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   19.353441]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   19.353639]  ? security_file_ioctl+0x9d/0xd0
[   19.353801]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   19.353977]  __x64_sys_ioctl+0x1b9/0x230
[   19.354124]  do_syscall_64+0x3c/0x90
[   19.354259]  entry_SYSCALL_64_after_hwframe+0x6e/0xd8
[   19.354445] RIP: 0033:0x7fd641a3ee5d
[   19.354580] Code: ff c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d 93 af 1b 00 f7 d8 64 89 01 48
[   19.355228] RSP: 002b:00007ffd751425f8 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   19.355497] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007fd641a3ee5d
[   19.355750] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   19.356003] RBP: 00007ffd75142610 R08: 0000000000000800 R09: 0000000000000800
[   19.356255] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffd75142728
[   19.356508] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007fd641e48000
[   19.356766]  </TASK>
[   19.356849] Modules linked in:
[   19.357060] ---[ end trace 0000000000000000 ]---
[   19.357230] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   19.357437] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   19.358087] RSP: 0018:ffff88802457fba8 EFLAGS: 00010206
[   19.358281] RAX: dffffc0000000000 RBX: ffff888014f9b000 RCX: 0000000000000000
[   19.358540] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   19.358829] RBP: ffff88802457fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   19.359091] R10: ffff88800aad88df R11: 0000000000000001 R12: 0000000000000000
[   19.359346] R13: ffffffff85cc0180 R14: ffff8880109b6ac0 R15: ffffffff87070ae0
[   19.359601] FS:  00007fd641e07600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   19.359888] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   19.360096] CR2: 0000000020000080 CR3: 00000000202d4000 CR4: 0000000000750ef0
[   19.360352] PKRU: 55555554
[   19.360713] ------------[ cut here ]------------
[   19.360883] WARNING: CPU: 0 PID: 869 at drivers/iommu/iommufd/main.c:258 iommufd_fops_release+0x2a3/0x300
[   19.361226] Modules linked in:
[   19.361342] CPU: 0 PID: 869 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   19.361652] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   19.362052] RIP: 0010:iommufd_fops_release+0x2a3/0x300
[   19.362242] Code: 45 d0 65 48 2b 04 25 28 00 00 00 75 54 48 81 c4 88 00 00 00 31 c0 5b 41 5c 41 5d 41 5e 41 5f 5d c3 cc cc cc cc e8 ad 4f 0a fe <0f> 0b eb a6 e8 74 23 67 fe e9 f6 fe ff ff 48 89 85 50 ff ff ff e8
[   19.362904] RSP: 0018:ffff888017597c00 EFLAGS: 00010293
[   19.363095] RAX: 0000000000000000 RBX: ffff88800fe06108 RCX: 0000000000000000
[   19.363350] RDX: ffff888014428000 RSI: ffffffff835563e3 RDI: ffffffff86702b40
[   19.363605] RBP: ffff888017597cb0 R08: 0000000000000000 R09: fffffbfff0eb2644
[   19.363860] R10: ffffffff87593227 R11: ffff88800fe05000 R12: 0000000000000000
[   19.364115] R13: ffff888013a12418 R14: ffff888017597c48 R15: ffffffff83556140
[   19.364370] FS:  0000000000000000(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   19.364657] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   19.364866] CR2: 0000000020000080 CR3: 000000000687e000 CR4: 0000000000750ef0
[   19.365121] PKRU: 55555554
[   19.365223] Call Trace:
[   19.365316]  <TASK>
[   19.365398]  ? show_regs+0x6e/0x80
[   19.365530]  ? __warn+0xef/0x340
[   19.365655]  ? report_bug+0x25e/0x4b0
[   19.365796]  ? iommufd_fops_release+0x2a3/0x300
[   19.365966]  ? report_bug+0x2cb/0x4b0
[   19.366108]  ? handle_bug+0x46/0x90
[   19.366242]  ? exc_invalid_op+0x1d/0x50
[   19.366387]  ? asm_exc_invalid_op+0x1f/0x30
[   19.366543]  ? __pfx_iommufd_fops_release+0x10/0x10
[   19.366735]  ? iommufd_fops_release+0x2a3/0x300
[   19.366908]  ? iommufd_fops_release+0x2a3/0x300
[   19.367080]  ? __pfx_iommufd_fops_release+0x10/0x10
[   19.367261]  ? rcu_is_watching+0x19/0xc0
[   19.367411]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   19.367610]  ? __pfx_iommufd_fops_release+0x10/0x10
[   19.367791]  __fput+0x424/0xaf0
[   19.367917]  ____fput+0x1f/0x30
[   19.368040]  task_work_run+0x19d/0x2b0
[   19.368184]  ? __pfx_task_work_run+0x10/0x10
[   19.368345]  ? __sanitizer_cov_trace_const_cmp1+0x1e/0x30
[   19.368543]  ? switch_task_namespaces+0xa9/0xe0
[   19.368715]  do_exit+0xac9/0x2790
[   19.368843]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   19.369072]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   19.369255]  ? __pfx_do_exit+0x10/0x10
[   19.369397]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   19.369595]  ? security_file_ioctl+0x9d/0xd0
[   19.369758]  make_task_dead+0x182/0x3c0
[   19.369905]  rewind_stack_and_make_dead+0x17/0x20
[   19.370080] RIP: 0033:0x7fd641a3ee5d
[   19.370215] Code: Unable to access opcode bytes at 0x7fd641a3ee33.
[   19.370435] RSP: 002b:00007ffd751425f8 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   19.370714] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007fd641a3ee5d
[   19.370971] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   19.371226] RBP: 00007ffd75142610 R08: 0000000000000800 R09: 0000000000000800
[   19.371481] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffd75142728
[   19.371736] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007fd641e48000
[   19.371996]  </TASK>
[   19.372081] irq event stamp: 0
[   19.372195] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   19.372421] hardirqs last disabled at (0): [<ffffffff8122f2d1>] copy_process+0x1c51/0x7140
[   19.372717] softirqs last  enabled at (0): [<ffffffff8122f312>] copy_process+0x1c92/0x7140
[   19.373012] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   19.373238] ---[ end trace 0000000000000000 ]---
[   19.375722] iommufd_mock iommufd_mock150: Adding to iommu group 150
[   19.375978] iommufd_mock iommufd_mock150: Removing from iommu group 150
[   19.376234] general protection fault, probably for non-canonical address 0xdffffc0000000006: 0000 [#151] PREEMPT SMP KASAN NOPTI
[   19.376642] KASAN: null-ptr-deref in range [0x0000000000000030-0x0000000000000037]
[   19.376911] CPU: 0 PID: 870 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   19.377222] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   19.377624] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   19.377835] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   19.378486] RSP: 0018:ffff888011eb7ba8 EFLAGS: 00010206
[   19.378679] RAX: dffffc0000000000 RBX: ffff888013877000 RCX: 0000000000000000
[   19.378940] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   19.379195] RBP: ffff888011eb7bc0 R08: 0000000000000001 R09: ffffed100155b11b
[   19.379450] R10: ffff88800aad88df R11: 5f6466756d6d6f69 R12: 0000000000000000
[   19.379704] R13: ffffffff85cc0180 R14: ffff888024c356c0 R15: ffffffff87070ae0
[   19.379960] FS:  00007fc45a3d0600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   19.380248] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   19.380457] CR2: 0000000020000080 CR3: 00000000202d4000 CR4: 0000000000750ef0
[   19.380713] PKRU: 55555554
[   19.380815] Call Trace:
[   19.380908]  <TASK>
[   19.380990]  ? show_regs+0x6e/0x80
[   19.381124]  ? die_addr+0x45/0xb0
[   19.381256]  ? exc_general_protection+0x159/0x250
[   19.381437]  ? asm_exc_general_protection+0x2b/0x30
[   19.381622]  ? sysfs_remove_link_from_group+0x21/0x90
[   19.381810]  ? sysfs_remove_link_from_group+0x37/0x90
[   19.381999]  ? sysfs_remove_link_from_group+0x21/0x90
[   19.382188]  iommu_device_unlink+0x85/0xd0
[   19.382343]  iommu_deinit_device+0x11f/0x4c0
[   19.382507]  __iommu_group_remove_device+0x26b/0x300
[   19.382694]  iommu_group_remove_device+0x8a/0xb0
[   19.382871]  iommufd_test+0x1f1a/0x2d10
[   19.383016]  ? __pfx_lock_release+0x10/0x10
[   19.383175]  ? __pfx_lock_acquire+0x10/0x10
[   19.383334]  ? __pfx_iommufd_test+0x10/0x10
[   19.383492]  ? __sanitizer_cov_trace_const_cmp8+0x1c/0x30
[   19.383694]  iommufd_fops_ioctl+0x377/0x510
[   19.383854]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   19.384030]  ? trace_hardirqs_on+0x26/0x120
[   19.384190]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   19.384421]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   19.384606]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   19.384806]  ? security_file_ioctl+0x9d/0xd0
[   19.384970]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   19.385147]  __x64_sys_ioctl+0x1b9/0x230
[   19.385297]  do_syscall_64+0x3c/0x90
[   19.385432]  entry_SYSCALL_64_after_hwframe+0x6e/0xd8
[   19.385620] RIP: 0033:0x7fc45a03ee5d
[   19.385755] Code: ff c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d 93 af 1b 00 f7 d8 64 89 01 48
[   19.386406] RSP: 002b:00007ffe7d9ce1d8 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   19.386678] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007fc45a03ee5d
[   19.386938] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   19.387193] RBP: 00007ffe7d9ce1f0 R08: 0000000000000800 R09: 0000000000000800
[   19.387449] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffe7d9ce308
[   19.387704] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007fc45a411000
[   19.387964]  </TASK>
[   19.388048] Modules linked in:
[   19.388184] ---[ end trace 0000000000000000 ]---
[   19.388354] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   19.388563] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   19.389214] RSP: 0018:ffff88802457fba8 EFLAGS: 00010206
[   19.389404] RAX: dffffc0000000000 RBX: ffff888014f9b000 RCX: 0000000000000000
[   19.389659] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   19.389915] RBP: ffff88802457fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   19.390171] R10: ffff88800aad88df R11: 0000000000000001 R12: 0000000000000000
[   19.390480] R13: ffffffff85cc0180 R14: ffff8880109b6ac0 R15: ffffffff87070ae0
[   19.390812] FS:  00007fc45a3d0600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   19.391171] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   19.391377] CR2: 0000000020000080 CR3: 00000000202d4000 CR4: 0000000000750ef0
[   19.391631] PKRU: 55555554
[   19.392007] ------------[ cut here ]------------
[   19.392222] WARNING: CPU: 0 PID: 870 at drivers/iommu/iommufd/main.c:258 iommufd_fops_release+0x2a3/0x300
[   19.392587] Modules linked in:
[   19.392751] CPU: 0 PID: 870 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   19.393063] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   19.393518] RIP: 0010:iommufd_fops_release+0x2a3/0x300
[   19.393719] Code: 45 d0 65 48 2b 04 25 28 00 00 00 75 54 48 81 c4 88 00 00 00 31 c0 5b 41 5c 41 5d 41 5e 41 5f 5d c3 cc cc cc cc e8 ad 4f 0a fe <0f> 0b eb a6 e8 74 23 67 fe e9 f6 fe ff ff 48 89 85 50 ff ff ff e8
[   19.394409] RSP: 0018:ffff888011eb7c00 EFLAGS: 00010293
[   19.394635] RAX: 0000000000000000 RBX: ffff88800fe06d08 RCX: 0000000000000000
[   19.394926] RDX: ffff888011e40000 RSI: ffffffff835563e3 RDI: ffffffff86702b40
[   19.395178] RBP: ffff888011eb7cb0 R08: 0000000000000000 R09: fffffbfff0eb2644
[   19.395453] R10: ffffffff87593227 R11: ffff888018afdc00 R12: 0000000000000000
[   19.395747] R13: ffff8880134a5818 R14: ffff888011eb7c48 R15: ffffffff83556140
[   19.396022] FS:  0000000000000000(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   19.396348] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   19.396619] CR2: 0000000020000080 CR3: 000000000687e000 CR4: 0000000000750ef0
[   19.396877] PKRU: 55555554
[   19.396985] Call Trace:
[   19.397088]  <TASK>
[   19.397205]  ? show_regs+0x6e/0x80
[   19.397340]  ? __warn+0xef/0x340
[   19.397467]  ? report_bug+0x25e/0x4b0
[   19.397672]  ? iommufd_fops_release+0x2a3/0x300
[   19.397845]  ? report_bug+0x2cb/0x4b0
[   19.397989]  ? handle_bug+0x46/0x90
[   19.398184]  ? exc_invalid_op+0x1d/0x50
[   19.398332]  ? asm_exc_invalid_op+0x1f/0x30
[   19.398489]  ? __pfx_iommufd_fops_release+0x10/0x10
[   19.398804]  ? iommufd_fops_release+0x2a3/0x300
[   19.398978]  ? iommufd_fops_release+0x2a3/0x300
[   19.399152]  ? __pfx_iommufd_fops_release+0x10/0x10
[   19.399397]  ? rcu_is_watching+0x19/0xc0
[   19.399549]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   19.399754]  ? __pfx_iommufd_fops_release+0x10/0x10
[   19.399983]  __fput+0x424/0xaf0
[   19.400111]  ____fput+0x1f/0x30
[   19.400235]  task_work_run+0x19d/0x2b0
[   19.400387]  ? __pfx_task_work_run+0x10/0x10
[   19.400599]  ? __sanitizer_cov_trace_const_cmp1+0x1e/0x30
[   19.400800]  ? switch_task_namespaces+0xa9/0xe0
[   19.401036]  do_exit+0xac9/0x2790
[   19.401167]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   19.401403]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   19.401644]  ? __pfx_do_exit+0x10/0x10
[   19.401788]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   19.402051]  ? security_file_ioctl+0x9d/0xd0
[   19.402216]  make_task_dead+0x182/0x3c0
[   19.402364]  rewind_stack_and_make_dead+0x17/0x20
[   19.402563] RIP: 0033:0x7fc45a03ee5d
[   19.402755] Code: Unable to access opcode bytes at 0x7fc45a03ee33.
[   19.402979] RSP: 002b:00007ffe7d9ce1d8 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   19.403253] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007fc45a03ee5d
[   19.403575] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   19.403832] RBP: 00007ffe7d9ce1f0 R08: 0000000000000800 R09: 0000000000000800
[   19.404143] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffe7d9ce308
[   19.404400] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007fc45a411000
[   19.404717]  </TASK>
[   19.404803] irq event stamp: 0
[   19.404918] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   19.405164] hardirqs last disabled at (0): [<ffffffff8122f2d1>] copy_process+0x1c51/0x7140
[   19.405504] softirqs last  enabled at (0): [<ffffffff8122f312>] copy_process+0x1c92/0x7140
[   19.405866] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   19.406094] ---[ end trace 0000000000000000 ]---
[   19.409325] iommufd_mock iommufd_mock151: Adding to iommu group 151
[   19.409627] iommufd_mock iommufd_mock151: Removing from iommu group 151
[   19.409888] general protection fault, probably for non-canonical address 0xdffffc0000000006: 0000 [#152] PREEMPT SMP KASAN NOPTI
[   19.410300] KASAN: null-ptr-deref in range [0x0000000000000030-0x0000000000000037]
[   19.410615] CPU: 0 PID: 871 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   19.410935] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   19.411340] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   19.411554] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   19.412211] RSP: 0018:ffff888017597ba8 EFLAGS: 00010206
[   19.412404] RAX: dffffc0000000000 RBX: ffff88800bec5000 RCX: 0000000000000000
[   19.412662] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   19.412918] RBP: ffff888017597bc0 R08: 0000000000000001 R09: ffffed100155b11b
[   19.413179] R10: ffff88800aad88df R11: 5f6466756d6d6f69 R12: 0000000000000000
[   19.413431] R13: ffffffff85cc0180 R14: ffff888024c35ba0 R15: ffffffff87070ae0
[   19.413683] FS:  00007f385c32e600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   19.413967] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   19.414173] CR2: 0000000020000080 CR3: 000000001def4000 CR4: 0000000000750ef0
[   19.414426] PKRU: 55555554
[   19.414527] Call Trace:
[   19.414622]  <TASK>
[   19.414705]  ? show_regs+0x6e/0x80
[   19.414846]  ? die_addr+0x45/0xb0
[   19.414977]  ? exc_general_protection+0x159/0x250
[   19.415156]  ? asm_exc_general_protection+0x2b/0x30
[   19.415338]  ? sysfs_remove_link_from_group+0x21/0x90
[   19.415525]  ? sysfs_remove_link_from_group+0x37/0x90
[   19.415712]  ? sysfs_remove_link_from_group+0x21/0x90
[   19.415899]  iommu_device_unlink+0x85/0xd0
[   19.416053]  iommu_deinit_device+0x11f/0x4c0
[   19.416215]  __iommu_group_remove_device+0x26b/0x300
[   19.416401]  iommu_group_remove_device+0x8a/0xb0
[   19.416573]  iommufd_test+0x1f1a/0x2d10
[   19.416715]  ? __pfx_lock_release+0x10/0x10
[   19.416872]  ? __pfx_lock_acquire+0x10/0x10
[   19.417030]  ? __pfx_iommufd_test+0x10/0x10
[   19.417186]  ? __sanitizer_cov_trace_const_cmp8+0x1c/0x30
[   19.417386]  iommufd_fops_ioctl+0x377/0x510
[   19.417543]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   19.417717]  ? trace_hardirqs_on+0x26/0x120
[   19.417876]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   19.418106]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   19.418291]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   19.418489]  ? security_file_ioctl+0x9d/0xd0
[   19.418654]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   19.418838]  __x64_sys_ioctl+0x1b9/0x230
[   19.418988]  do_syscall_64+0x3c/0x90
[   19.419122]  entry_SYSCALL_64_after_hwframe+0x6e/0xd8
[   19.419306] RIP: 0033:0x7f385c03ee5d
[   19.419440] Code: ff c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d 93 af 1b 00 f7 d8 64 89 01 48
[   19.420082] RSP: 002b:00007ffe6ee32288 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   19.420350] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f385c03ee5d
[   19.420602] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   19.420853] RBP: 00007ffe6ee322a0 R08: 0000000000000800 R09: 0000000000000800
[   19.421105] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffe6ee323b8
[   19.421356] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f385c36f000
[   19.421613]  </TASK>
[   19.421697] Modules linked in:
[   19.421940] ---[ end trace 0000000000000000 ]---
[   19.422111] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   19.422322] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   19.422986] RSP: 0018:ffff88802457fba8 EFLAGS: 00010206
[   19.423178] RAX: dffffc0000000000 RBX: ffff888014f9b000 RCX: 0000000000000000
[   19.423436] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   19.423760] RBP: ffff88802457fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   19.424018] R10: ffff88800aad88df R11: 0000000000000001 R12: 0000000000000000
[   19.424343] R13: ffffffff85cc0180 R14: ffff8880109b6ac0 R15: ffffffff87070ae0
[   19.424600] FS:  00007f385c32e600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   19.424953] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   19.425164] CR2: 0000000020000080 CR3: 000000001def4000 CR4: 0000000000750ef0
[   19.425482] PKRU: 55555554
[   19.425850] ------------[ cut here ]------------
[   19.426083] WARNING: CPU: 0 PID: 871 at drivers/iommu/iommufd/main.c:258 iommufd_fops_release+0x2a3/0x300
[   19.426452] Modules linked in:
[   19.426623] CPU: 0 PID: 871 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   19.426939] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   19.427410] RIP: 0010:iommufd_fops_release+0x2a3/0x300
[   19.427602] Code: 45 d0 65 48 2b 04 25 28 00 00 00 75 54 48 81 c4 88 00 00 00 31 c0 5b 41 5c 41 5d 41 5e 41 5f 5d c3 cc cc cc cc e8 ad 4f 0a fe <0f> 0b eb a6 e8 74 23 67 fe e9 f6 fe ff ff 48 89 85 50 ff ff ff e8
[   19.428322] RSP: 0018:ffff888017597c00 EFLAGS: 00010293
[   19.428575] RAX: 0000000000000000 RBX: ffff88800fe06908 RCX: 0000000000000000
[   19.428833] RDX: ffff88800ececa00 RSI: ffffffff835563e3 RDI: ffffffff86702b40
[   19.429151] RBP: ffff888017597cb0 R08: 0000000000000000 R09: fffffbfff0eb2644
[   19.429409] R10: ffffffff87593227 R11: ffff8880139afc00 R12: 0000000000000000
[   19.429721] R13: ffff8880134a5098 R14: ffff888017597c48 R15: ffffffff83556140
[   19.429983] FS:  0000000000000000(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   19.430327] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   19.430550] CR2: 0000000020000080 CR3: 000000000687e000 CR4: 0000000000750ef0
[   19.430871] PKRU: 55555554
[   19.430975] Call Trace:
[   19.431069]  <TASK>
[   19.431152]  ? show_regs+0x6e/0x80
[   19.431288]  ? __warn+0xef/0x340
[   19.431424]  ? report_bug+0x25e/0x4b0
[   19.431622]  ? iommufd_fops_release+0x2a3/0x300
[   19.431795]  ? report_bug+0x2cb/0x4b0
[   19.431940]  ? handle_bug+0x46/0x90
[   19.432134]  ? exc_invalid_op+0x1d/0x50
[   19.432281]  ? asm_exc_invalid_op+0x1f/0x30
[   19.432438]  ? __pfx_iommufd_fops_release+0x10/0x10
[   19.432687]  ? iommufd_fops_release+0x2a3/0x300
[   19.432859]  ? iommufd_fops_release+0x2a3/0x300
[   19.433037]  ? __pfx_iommufd_fops_release+0x10/0x10
[   19.433270]  ? rcu_is_watching+0x19/0xc0
[   19.433423]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   19.433632]  ? __pfx_iommufd_fops_release+0x10/0x10
[   19.433863]  __fput+0x424/0xaf0
[   19.433992]  ____fput+0x1f/0x30
[   19.434120]  task_work_run+0x19d/0x2b0
[   19.434324]  ? __pfx_task_work_run+0x10/0x10
[   19.434487]  ? __sanitizer_cov_trace_const_cmp1+0x1e/0x30
[   19.434705]  ? switch_task_namespaces+0xa9/0xe0
[   19.434933]  do_exit+0xac9/0x2790
[   19.435063]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   19.435294]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   19.435479]  ? __pfx_do_exit+0x10/0x10
[   19.435629]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   19.435883]  ? security_file_ioctl+0x9d/0xd0
[   19.436048]  make_task_dead+0x182/0x3c0
[   19.436201]  rewind_stack_and_make_dead+0x17/0x20
[   19.436433] RIP: 0033:0x7f385c03ee5d
[   19.436570] Code: Unable to access opcode bytes at 0x7f385c03ee33.
[   19.436854] RSP: 002b:00007ffe6ee32288 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   19.437128] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f385c03ee5d
[   19.437449] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   19.437707] RBP: 00007ffe6ee322a0 R08: 0000000000000800 R09: 0000000000000800
[   19.438032] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffe6ee323b8
[   19.438292] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f385c36f000
[   19.438622]  </TASK>
[   19.438709] irq event stamp: 0
[   19.438829] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   19.439056] hardirqs last disabled at (0): [<ffffffff8122f2d1>] copy_process+0x1c51/0x7140
[   19.439413] softirqs last  enabled at (0): [<ffffffff8122f312>] copy_process+0x1c92/0x7140
[   19.439712] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   19.439996] ---[ end trace 0000000000000000 ]---
[   19.442881] iommufd_mock iommufd_mock152: Adding to iommu group 152
[   19.443134] iommufd_mock iommufd_mock152: Removing from iommu group 152
[   19.443395] general protection fault, probably for non-canonical address 0xdffffc0000000006: 0000 [#153] PREEMPT SMP KASAN NOPTI
[   19.443823] KASAN: null-ptr-deref in range [0x0000000000000030-0x0000000000000037]
[   19.444119] CPU: 0 PID: 872 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   19.444434] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   19.444841] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   19.445055] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   19.445714] RSP: 0018:ffff888017437ba8 EFLAGS: 00010206
[   19.445907] RAX: dffffc0000000000 RBX: ffff88800bec7000 RCX: 0000000000000000
[   19.446166] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   19.446424] RBP: ffff888017437bc0 R08: 0000000000000001 R09: ffffed100155b11b
[   19.446683] R10: ffff88800aad88df R11: 5f6466756d6d6f69 R12: 0000000000000000
[   19.446947] R13: ffffffff85cc0180 R14: ffff888024c353e0 R15: ffffffff87070ae0
[   19.447205] FS:  00007fef76181600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   19.447493] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   19.447699] CR2: 0000000020000080 CR3: 00000000202d4000 CR4: 0000000000750ef0
[   19.447952] PKRU: 55555554
[   19.448054] Call Trace:
[   19.448145]  <TASK>
[   19.448227]  ? show_regs+0x6e/0x80
[   19.448360]  ? die_addr+0x45/0xb0
[   19.448490]  ? exc_general_protection+0x159/0x250
[   19.448671]  ? asm_exc_general_protection+0x2b/0x30
[   19.448853]  ? sysfs_remove_link_from_group+0x21/0x90
[   19.449040]  ? sysfs_remove_link_from_group+0x37/0x90
[   19.449226]  ? sysfs_remove_link_from_group+0x21/0x90
[   19.449413]  iommu_device_unlink+0x85/0xd0
[   19.449566]  iommu_deinit_device+0x11f/0x4c0
[   19.449729]  __iommu_group_remove_device+0x26b/0x300
[   19.449915]  iommu_group_remove_device+0x8a/0xb0
[   19.450088]  iommufd_test+0x1f1a/0x2d10
[   19.450231]  ? __pfx_lock_release+0x10/0x10
[   19.450389]  ? __pfx_lock_acquire+0x10/0x10
[   19.450547]  ? __pfx_iommufd_test+0x10/0x10
[   19.450707]  ? __sanitizer_cov_trace_const_cmp8+0x1c/0x30
[   19.450913]  iommufd_fops_ioctl+0x377/0x510
[   19.451071]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   19.451245]  ? trace_hardirqs_on+0x26/0x120
[   19.451413]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   19.451643]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   19.451826]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   19.452023]  ? security_file_ioctl+0x9d/0xd0
[   19.452184]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   19.452359]  __x64_sys_ioctl+0x1b9/0x230
[   19.452505]  do_syscall_64+0x3c/0x90
[   19.452639]  entry_SYSCALL_64_after_hwframe+0x6e/0xd8
[   19.452825] RIP: 0033:0x7fef75e3ee5d
[   19.452958] Code: ff c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d 93 af 1b 00 f7 d8 64 89 01 48
[   19.453600] RSP: 002b:00007ffffbf28e48 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   19.453868] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007fef75e3ee5d
[   19.454121] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   19.454372] RBP: 00007ffffbf28e60 R08: 0000000000000800 R09: 0000000000000800
[   19.454632] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffffbf28f78
[   19.454892] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007fef761c2000
[   19.455149]  </TASK>
[   19.455232] Modules linked in:
[   19.455450] ---[ end trace 0000000000000000 ]---
[   19.455621] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   19.455834] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   19.456489] RSP: 0018:ffff88802457fba8 EFLAGS: 00010206
[   19.456682] RAX: dffffc0000000000 RBX: ffff888014f9b000 RCX: 0000000000000000
[   19.456940] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   19.457277] RBP: ffff88802457fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   19.457534] R10: ffff88800aad88df R11: 0000000000000001 R12: 0000000000000000
[   19.457810] R13: ffffffff85cc0180 R14: ffff8880109b6ac0 R15: ffffffff87070ae0
[   19.458129] FS:  00007fef76181600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   19.458473] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   19.458694] CR2: 0000000020000080 CR3: 00000000202d4000 CR4: 0000000000750ef0
[   19.458956] PKRU: 55555554
[   19.459381] ------------[ cut here ]------------
[   19.459556] WARNING: CPU: 0 PID: 872 at drivers/iommu/iommufd/main.c:258 iommufd_fops_release+0x2a3/0x300
[   19.459949] Modules linked in:
[   19.460065] CPU: 0 PID: 872 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   19.460404] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   19.460841] RIP: 0010:iommufd_fops_release+0x2a3/0x300
[   19.461057] Code: 45 d0 65 48 2b 04 25 28 00 00 00 75 54 48 81 c4 88 00 00 00 31 c0 5b 41 5c 41 5d 41 5e 41 5f 5d c3 cc cc cc cc e8 ad 4f 0a fe <0f> 0b eb a6 e8 74 23 67 fe e9 f6 fe ff ff 48 89 85 50 ff ff ff e8
[   19.461736] RSP: 0018:ffff888017437c00 EFLAGS: 00010293
[   19.461949] RAX: 0000000000000000 RBX: ffff88800fe06208 RCX: 0000000000000000
[   19.462241] RDX: ffff88800bb28000 RSI: ffffffff835563e3 RDI: ffffffff86702b40
[   19.462561] RBP: ffff888017437cb0 R08: 0000000000000000 R09: fffffbfff0eb2644
[   19.462836] R10: ffffffff87593227 R11: ffff888018b3ee00 R12: 0000000000000000
[   19.463094] R13: ffff888012ff0418 R14: ffff888017437c48 R15: ffffffff83556140
[   19.463414] FS:  0000000000000000(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   19.463704] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   19.463979] CR2: 0000000020000080 CR3: 000000000687e000 CR4: 0000000000750ef0
[   19.464238] PKRU: 55555554
[   19.464352] Call Trace:
[   19.464491]  <TASK>
[   19.464574]  ? show_regs+0x6e/0x80
[   19.464708]  ? __warn+0xef/0x340
[   19.464840]  ? report_bug+0x25e/0x4b0
[   19.465037]  ? iommufd_fops_release+0x2a3/0x300
[   19.465209]  ? report_bug+0x2cb/0x4b0
[   19.465353]  ? handle_bug+0x46/0x90
[   19.465553]  ? exc_invalid_op+0x1d/0x50
[   19.465700]  ? asm_exc_invalid_op+0x1f/0x30
[   19.465857]  ? __pfx_iommufd_fops_release+0x10/0x10
[   19.466105]  ? iommufd_fops_release+0x2a3/0x300
[   19.466278]  ? iommufd_fops_release+0x2a3/0x300
[   19.466451]  ? __pfx_iommufd_fops_release+0x10/0x10
[   19.466700]  ? rcu_is_watching+0x19/0xc0
[   19.466812] systemd-journald[136]: Data hash table of /run/log/journal/938775788448454bb5b34822d5730c41/system.journal has a fill level at 75.0 (5446 of 7260 items, 4182016 file size, 767 bytes per hash table item), suggesting rotation.
[   19.466856]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   19.467615] systemd-journald[136]: /run/log/journal/938775788448454bb5b34822d5730c41/system.journal: Journal header limits reached or header out-of-date, rotating.
[   19.467803]  ? __pfx_iommufd_fops_release+0x10/0x10
[   19.468499]  __fput+0x424/0xaf0
[   19.468627]  ____fput+0x1f/0x30
[   19.468751]  task_work_run+0x19d/0x2b0
[   19.468896]  ? __pfx_task_work_run+0x10/0x10
[   19.469058]  ? __sanitizer_cov_trace_const_cmp1+0x1e/0x30
[   19.469258]  ? switch_task_namespaces+0xa9/0xe0
[   19.469431]  do_exit+0xac9/0x2790
[   19.469561]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   19.469792]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   19.469977]  ? __pfx_do_exit+0x10/0x10
[   19.470120]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   19.470320]  ? security_file_ioctl+0x9d/0xd0
[   19.470485]  make_task_dead+0x182/0x3c0
[   19.470639]  rewind_stack_and_make_dead+0x17/0x20
[   19.470819] RIP: 0033:0x7fef75e3ee5d
[   19.470954] Code: Unable to access opcode bytes at 0x7fef75e3ee33.
[   19.471177] RSP: 002b:00007ffffbf28e48 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   19.471452] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007fef75e3ee5d
[   19.471710] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   19.471968] RBP: 00007ffffbf28e60 R08: 0000000000000800 R09: 0000000000000800
[   19.472225] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffffbf28f78
[   19.472482] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007fef761c2000
[   19.472744]  </TASK>
[   19.472829] irq event stamp: 0
[   19.472946] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   19.473252] hardirqs last disabled at (0): [<ffffffff8122f2d1>] copy_process+0x1c51/0x7140
[   19.473555] softirqs last  enabled at (0): [<ffffffff8122f312>] copy_process+0x1c92/0x7140
[   19.473910] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   19.474147] ---[ end trace 0000000000000000 ]---
[   19.477389] iommufd_mock iommufd_mock153: Adding to iommu group 153
[   19.477640] iommufd_mock iommufd_mock153: Removing from iommu group 153
[   19.477900] general protection fault, probably for non-canonical address 0xdffffc0000000006: 0000 [#154] PREEMPT SMP KASAN NOPTI
[   19.478310] KASAN: null-ptr-deref in range [0x0000000000000030-0x0000000000000037]
[   19.478586] CPU: 0 PID: 874 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   19.478907] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   19.479312] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   19.479573] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   19.480229] RSP: 0018:ffff888011eb7ba8 EFLAGS: 00010206
[   19.480422] RAX: dffffc0000000000 RBX: ffff88800bec4000 RCX: 0000000000000000
[   19.480680] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   19.480937] RBP: ffff888011eb7bc0 R08: 0000000000000001 R09: ffffed100155b11b
[   19.481194] R10: ffff88800aad88df R11: 5f6466756d6d6f69 R12: 0000000000000000
[   19.481450] R13: ffffffff85cc0180 R14: ffff888024c352e0 R15: ffffffff87070ae0
[   19.481707] FS:  00007f3ffe3da600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   19.481997] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   19.482207] CR2: 0000000020000080 CR3: 000000001def4000 CR4: 0000000000750ef0
[   19.482465] PKRU: 55555554
[   19.482568] Call Trace:
[   19.482662]  <TASK>
[   19.482745]  ? show_regs+0x6e/0x80
[   19.482886]  ? die_addr+0x45/0xb0
[   19.483019]  ? exc_general_protection+0x159/0x250
[   19.483203]  ? asm_exc_general_protection+0x2b/0x30
[   19.483390]  ? sysfs_remove_link_from_group+0x21/0x90
[   19.483580]  ? sysfs_remove_link_from_group+0x37/0x90
[   19.483771]  ? sysfs_remove_link_from_group+0x21/0x90
[   19.483962]  iommu_device_unlink+0x85/0xd0
[   19.484119]  iommu_deinit_device+0x11f/0x4c0
[   19.484285]  __iommu_group_remove_device+0x26b/0x300
[   19.484475]  iommu_group_remove_device+0x8a/0xb0
[   19.484652]  iommufd_test+0x1f1a/0x2d10
[   19.484798]  ? __pfx_lock_release+0x10/0x10
[   19.484958]  ? __pfx_lock_acquire+0x10/0x10
[   19.485120]  ? __pfx_iommufd_test+0x10/0x10
[   19.485279]  ? __sanitizer_cov_trace_const_cmp8+0x1c/0x30
[   19.485483]  iommufd_fops_ioctl+0x377/0x510
[   19.485645]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   19.485824]  ? trace_hardirqs_on+0x26/0x120
[   19.485986]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   19.486219]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   19.486405]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   19.486607]  ? security_file_ioctl+0x9d/0xd0
[   19.486775]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   19.486954]  __x64_sys_ioctl+0x1b9/0x230
[   19.487104]  do_syscall_64+0x3c/0x90
[   19.487242]  entry_SYSCALL_64_after_hwframe+0x6e/0xd8
[   19.487431] RIP: 0033:0x7f3ffe03ee5d
[   19.487568] Code: ff c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d 93 af 1b 00 f7 d8 64 89 01 48
[   19.488224] RSP: 002b:00007ffeb750bb38 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   19.488499] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f3ffe03ee5d
[   19.488756] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   19.489014] RBP: 00007ffeb750bb50 R08: 0000000000000800 R09: 0000000000000800
[   19.489271] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffeb750bc68
[   19.489529] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f3ffe41b000
[   19.489791]  </TASK>
[   19.489876] Modules linked in:
[   19.490051] ---[ end trace 0000000000000000 ]---
[   19.490222] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   19.490434] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   19.491147] RSP: 0018:ffff88802457fba8 EFLAGS: 00010206
[   19.491427] RAX: dffffc0000000000 RBX: ffff888014f9b000 RCX: 0000000000000000
[   19.491682] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   19.491965] RBP: ffff88802457fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   19.492269] R10: ffff88800aad88df R11: 0000000000000001 R12: 0000000000000000
[   19.492548] R13: ffffffff85cc0180 R14: ffff8880109b6ac0 R15: ffffffff87070ae0
[   19.492861] FS:  00007f3ffe3da600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   19.493244] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   19.493460] CR2: 0000000020000080 CR3: 000000001def4000 CR4: 0000000000750ef0
[   19.493805] PKRU: 55555554
[   19.494881] ------------[ cut here ]------------
[   19.495060] WARNING: CPU: 0 PID: 874 at drivers/iommu/iommufd/main.c:258 iommufd_fops_release+0x2a3/0x300
[   19.495483] Modules linked in:
[   19.495610] CPU: 0 PID: 874 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   19.495967] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   19.496439] RIP: 0010:iommufd_fops_release+0x2a3/0x300
[   19.496633] Code: 45 d0 65 48 2b 04 25 28 00 00 00 75 54 48 81 c4 88 00 00 00 31 c0 5b 41 5c 41 5d 41 5e 41 5f 5d c3 cc cc cc cc e8 ad 4f 0a fe <0f> 0b eb a6 e8 74 23 67 fe e9 f6 fe ff ff 48 89 85 50 ff ff ff e8
[   19.497350] RSP: 0018:ffff888011eb7c00 EFLAGS: 00010293
[   19.497601] RAX: 0000000000000000 RBX: ffff88800fe06508 RCX: 0000000000000000
[   19.497859] RDX: ffff88800bb2a500 RSI: ffffffff835563e3 RDI: ffffffff86702b40
[   19.498177] RBP: ffff888011eb7cb0 R08: 0000000000000000 R09: fffffbfff0eb2644
[   19.498436] R10: ffffffff87593227 R11: ffff88801300a800 R12: 0000000000000000
[   19.498705] R13: ffff888013605098 R14: ffff888011eb7c48 R15: ffffffff83556140
[   19.498968] FS:  0000000000000000(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   19.499312] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   19.499523] CR2: 00007fa281961000 CR3: 000000000687e000 CR4: 0000000000750ef0
[   19.499781] PKRU: 55555554
[   19.499885] Call Trace:
[   19.499978]  <TASK>
[   19.500061]  ? show_regs+0x6e/0x80
[   19.500195]  ? __warn+0xef/0x340
[   19.500323]  ? report_bug+0x25e/0x4b0
[   19.500485]  ? iommufd_fops_release+0x2a3/0x300
[   19.500693]  ? report_bug+0x2cb/0x4b0
[   19.500838]  ? handle_bug+0x46/0x90
[   19.500982]  ? exc_invalid_op+0x1d/0x50
[   19.501179]  ? asm_exc_invalid_op+0x1f/0x30
[   19.501337]  ? __pfx_iommufd_fops_release+0x10/0x10
[   19.501530]  ? iommufd_fops_release+0x2a3/0x300
[   19.501751]  ? iommufd_fops_release+0x2a3/0x300
[   19.501925]  ? __pfx_iommufd_fops_release+0x10/0x10
[   19.502171]  ? rcu_is_watching+0x19/0xc0
[   19.502324]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   19.502526]  ? __pfx_iommufd_fops_release+0x10/0x10
[   19.502869]  __fput+0x424/0xaf0
[   19.502999]  ____fput+0x1f/0x30
[   19.503124]  task_work_run+0x19d/0x2b0
[   19.503293]  ? __pfx_task_work_run+0x10/0x10
[   19.503493]  ? __sanitizer_cov_trace_const_cmp1+0x1e/0x30
[   19.503696]  ? switch_task_namespaces+0xa9/0xe0
[   19.503971]  do_exit+0xac9/0x2790
[   19.504097]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   19.504326]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   19.504579]  ? __pfx_do_exit+0x10/0x10
[   19.504728]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   19.504949]  ? security_file_ioctl+0x9d/0xd0
[   19.505171]  make_task_dead+0x182/0x3c0
[   19.505325]  rewind_stack_and_make_dead+0x17/0x20
[   19.505569] RIP: 0033:0x7f3ffe03ee5d
[   19.505709] Code: Unable to access opcode bytes at 0x7f3ffe03ee33.
[   19.505938] RSP: 002b:00007ffeb750bb38 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   19.506286] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f3ffe03ee5d
[   19.506560] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   19.506888] RBP: 00007ffeb750bb50 R08: 0000000000000800 R09: 0000000000000800
[   19.507172] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffeb750bc68
[   19.507479] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f3ffe41b000
[   19.507807]  </TASK>
[   19.507896] irq event stamp: 0
[   19.508015] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   19.508256] hardirqs last disabled at (0): [<ffffffff8122f2d1>] copy_process+0x1c51/0x7140
[   19.508618] softirqs last  enabled at (0): [<ffffffff8122f312>] copy_process+0x1c92/0x7140
[   19.508988] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   19.509224] ---[ end trace 0000000000000000 ]---
[   19.514399] iommufd_mock iommufd_mock154: Adding to iommu group 154
[   19.514720] iommufd_mock iommufd_mock154: Removing from iommu group 154
[   19.514992] general protection fault, probably for non-canonical address 0xdffffc0000000006: 0000 [#155] PREEMPT SMP KASAN NOPTI
[   19.515412] KASAN: null-ptr-deref in range [0x0000000000000030-0x0000000000000037]
[   19.515689] CPU: 0 PID: 875 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   19.516009] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   19.516424] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   19.516641] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   19.517315] RSP: 0018:ffff8880109dfba8 EFLAGS: 00010206
[   19.517512] RAX: dffffc0000000000 RBX: ffff88800bec1000 RCX: 0000000000000000
[   19.517776] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   19.518039] RBP: ffff8880109dfbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   19.518303] R10: ffff88800aad88df R11: 5f6466756d6d6f69 R12: 0000000000000000
[   19.518563] R13: ffffffff85cc0180 R14: ffff888024c35fa0 R15: ffffffff87070ae0
[   19.518834] FS:  00007f28a9d4b600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   19.519131] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   19.519346] CR2: 0000000020000080 CR3: 00000000202d4000 CR4: 0000000000750ef0
[   19.519610] PKRU: 55555554
[   19.519715] Call Trace:
[   19.519811]  <TASK>
[   19.519896]  ? show_regs+0x6e/0x80
[   19.520036]  ? die_addr+0x45/0xb0
[   19.520173]  ? exc_general_protection+0x159/0x250
[   19.520361]  ? asm_exc_general_protection+0x2b/0x30
[   19.520552]  ? sysfs_remove_link_from_group+0x21/0x90
[   19.520748]  ? sysfs_remove_link_from_group+0x37/0x90
[   19.520944]  ? sysfs_remove_link_from_group+0x21/0x90
[   19.521139]  iommu_device_unlink+0x85/0xd0
[   19.521299]  iommu_deinit_device+0x11f/0x4c0
[   19.521468]  __iommu_group_remove_device+0x26b/0x300
[   19.521663]  iommu_group_remove_device+0x8a/0xb0
[   19.521845]  iommufd_test+0x1f1a/0x2d10
[   19.521995]  ? __pfx_lock_release+0x10/0x10
[   19.522160]  ? __pfx_lock_acquire+0x10/0x10
[   19.522326]  ? __pfx_iommufd_test+0x10/0x10
[   19.522490]  ? __sanitizer_cov_trace_const_cmp8+0x1c/0x30
[   19.522700]  iommufd_fops_ioctl+0x377/0x510
[   19.522868]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   19.523047]  ? trace_hardirqs_on+0x26/0x120
[   19.523210]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   19.523443]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   19.523630]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   19.523833]  ? security_file_ioctl+0x9d/0xd0
[   19.524000]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   19.524179]  __x64_sys_ioctl+0x1b9/0x230
[   19.524331]  do_syscall_64+0x3c/0x90
[   19.524469]  entry_SYSCALL_64_after_hwframe+0x6e/0xd8
[   19.524658] RIP: 0033:0x7f28a9a3ee5d
[   19.524795] Code: ff c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d 93 af 1b 00 f7 d8 64 89 01 48
[   19.525455] RSP: 002b:00007ffe5bbe8f58 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   19.525730] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f28a9a3ee5d
[   19.525988] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   19.526245] RBP: 00007ffe5bbe8f70 R08: 0000000000000800 R09: 0000000000000800
[   19.526504] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffe5bbe9088
[   19.526765] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f28a9d8c000
[   19.527026]  </TASK>
[   19.527110] Modules linked in:
[   19.527243] ---[ end trace 0000000000000000 ]---
[   19.527416] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   19.527628] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   19.528288] RSP: 0018:ffff88802457fba8 EFLAGS: 00010206
[   19.528482] RAX: dffffc0000000000 RBX: ffff888014f9b000 RCX: 0000000000000000
[   19.528740] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   19.528999] RBP: ffff88802457fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   19.529257] R10: ffff88800aad88df R11: 0000000000000001 R12: 0000000000000000
[   19.529515] R13: ffffffff85cc0180 R14: ffff8880109b6ac0 R15: ffffffff87070ae0
[   19.529774] FS:  00007f28a9d4b600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   19.530065] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   19.530277] CR2: 0000000020000080 CR3: 00000000202d4000 CR4: 0000000000750ef0
[   19.530536] PKRU: 55555554
[   19.530994] ------------[ cut here ]------------
[   19.531164] WARNING: CPU: 0 PID: 875 at drivers/iommu/iommufd/main.c:258 iommufd_fops_release+0x2a3/0x300
[   19.531506] Modules linked in:
[   19.531621] CPU: 0 PID: 875 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   19.531930] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   19.532332] RIP: 0010:iommufd_fops_release+0x2a3/0x300
[   19.532520] Code: 45 d0 65 48 2b 04 25 28 00 00 00 75 54 48 81 c4 88 00 00 00 31 c0 5b 41 5c 41 5d 41 5e 41 5f 5d c3 cc cc cc cc e8 ad 4f 0a fe <0f> 0b eb a6 e8 74 23 67 fe e9 f6 fe ff ff 48 89 85 50 ff ff ff e8
[   19.533167] RSP: 0018:ffff8880109dfc00 EFLAGS: 00010293
[   19.533355] RAX: 0000000000000000 RBX: ffff88800fe06708 RCX: 0000000000000000
[   19.533608] RDX: ffff88801392ca00 RSI: ffffffff835563e3 RDI: ffffffff86702b40
[   19.533860] RBP: ffff8880109dfcb0 R08: 0000000000000000 R09: fffffbfff0eb2644
[   19.534113] R10: ffffffff87593227 R11: ffff888013571200 R12: 0000000000000000
[   19.534366] R13: ffff888012e6c698 R14: ffff8880109dfc48 R15: ffffffff83556140
[   19.534629] FS:  0000000000000000(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   19.534921] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   19.535133] CR2: 0000000020000080 CR3: 000000000687e000 CR4: 0000000000750ef0
[   19.535387] PKRU: 55555554
[   19.535488] Call Trace:
[   19.535580]  <TASK>
[   19.535661]  ? show_regs+0x6e/0x80
[   19.535792]  ? __warn+0xef/0x340
[   19.535917]  ? report_bug+0x25e/0x4b0
[   19.536057]  ? iommufd_fops_release+0x2a3/0x300
[   19.536226]  ? report_bug+0x2cb/0x4b0
[   19.536367]  ? handle_bug+0x46/0x90
[   19.536500]  ? exc_invalid_op+0x1d/0x50
[   19.536643]  ? asm_exc_invalid_op+0x1f/0x30
[   19.536798]  ? __pfx_iommufd_fops_release+0x10/0x10
[   19.536980]  ? iommufd_fops_release+0x2a3/0x300
[   19.537149]  ? iommufd_fops_release+0x2a3/0x300
[   19.537319]  ? __pfx_iommufd_fops_release+0x10/0x10
[   19.537499]  ? rcu_is_watching+0x19/0xc0
[   19.537647]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   19.537845]  ? __pfx_iommufd_fops_release+0x10/0x10
[   19.538025]  __fput+0x424/0xaf0
[   19.538151]  ____fput+0x1f/0x30
[   19.538272]  task_work_run+0x19d/0x2b0
[   19.538414]  ? __pfx_task_work_run+0x10/0x10
[   19.538582]  ? __sanitizer_cov_trace_const_cmp1+0x1e/0x30
[   19.538784]  ? switch_task_namespaces+0xa9/0xe0
[   19.538956]  do_exit+0xac9/0x2790
[   19.539084]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   19.539311]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   19.539492]  ? __pfx_do_exit+0x10/0x10
[   19.539632]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   19.539829]  ? security_file_ioctl+0x9d/0xd0
[   19.539992]  make_task_dead+0x182/0x3c0
[   19.540137]  rewind_stack_and_make_dead+0x17/0x20
[   19.540312] RIP: 0033:0x7f28a9a3ee5d
[   19.540446] Code: Unable to access opcode bytes at 0x7f28a9a3ee33.
[   19.540664] RSP: 002b:00007ffe5bbe8f58 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   19.540933] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f28a9a3ee5d
[   19.541185] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   19.541437] RBP: 00007ffe5bbe8f70 R08: 0000000000000800 R09: 0000000000000800
[   19.541689] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffe5bbe9088
[   19.541941] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f28a9d8c000
[   19.542198]  </TASK>
[   19.542282] irq event stamp: 0
[   19.542396] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   19.542626] hardirqs last disabled at (0): [<ffffffff8122f2d1>] copy_process+0x1c51/0x7140
[   19.542928] softirqs last  enabled at (0): [<ffffffff8122f312>] copy_process+0x1c92/0x7140
[   19.543221] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   19.543445] ---[ end trace 0000000000000000 ]---
[   19.546144] iommufd_mock iommufd_mock155: Adding to iommu group 155
[   19.546456] iommufd_mock iommufd_mock155: Removing from iommu group 155
[   19.546728] general protection fault, probably for non-canonical address 0xdffffc0000000006: 0000 [#156] PREEMPT SMP KASAN NOPTI
[   19.547155] KASAN: null-ptr-deref in range [0x0000000000000030-0x0000000000000037]
[   19.547460] CPU: 0 PID: 876 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   19.547785] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   19.548182] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   19.548392] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   19.549033] RSP: 0018:ffff888014777ba8 EFLAGS: 00010206
[   19.549222] RAX: dffffc0000000000 RBX: ffff88800bec3000 RCX: 0000000000000000
[   19.549473] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   19.549724] RBP: ffff888014777bc0 R08: 0000000000000001 R09: ffffed100155b11b
[   19.549974] R10: ffff88800aad88df R11: 5f6466756d6d6f69 R12: 0000000000000000
[   19.550226] R13: ffffffff85cc0180 R14: ffff888024c35500 R15: ffffffff87070ae0
[   19.550478] FS:  00007f6a25c3a600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   19.550765] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   19.550986] CR2: 0000000020000080 CR3: 000000001def4000 CR4: 0000000000750ef0
[   19.551239] PKRU: 55555554
[   19.551339] Call Trace:
[   19.551431]  <TASK>
[   19.551535]  ? show_regs+0x6e/0x80
[   19.551670]  ? die_addr+0x45/0xb0
[   19.551799]  ? exc_general_protection+0x159/0x250
[   19.551978]  ? asm_exc_general_protection+0x2b/0x30
[   19.552160]  ? sysfs_remove_link_from_group+0x21/0x90
[   19.552346]  ? sysfs_remove_link_from_group+0x37/0x90
[   19.552532]  ? sysfs_remove_link_from_group+0x21/0x90
[   19.552718]  iommu_device_unlink+0x85/0xd0
[   19.552871]  iommu_deinit_device+0x11f/0x4c0
[   19.553032]  __iommu_group_remove_device+0x26b/0x300
[   19.553218]  iommu_group_remove_device+0x8a/0xb0
[   19.553390]  iommufd_test+0x1f1a/0x2d10
[   19.553532]  ? __pfx_lock_release+0x10/0x10
[   19.553688]  ? __pfx_lock_acquire+0x10/0x10
[   19.553845]  ? __pfx_iommufd_test+0x10/0x10
[   19.554000]  ? __sanitizer_cov_trace_const_cmp8+0x1c/0x30
[   19.554199]  iommufd_fops_ioctl+0x377/0x510
[   19.554356]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   19.554530]  ? trace_hardirqs_on+0x26/0x120
[   19.554689]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   19.554925]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   19.555107]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   19.555304]  ? security_file_ioctl+0x9d/0xd0
[   19.555467]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   19.555641]  __x64_sys_ioctl+0x1b9/0x230
[   19.555788]  do_syscall_64+0x3c/0x90
[   19.555922]  entry_SYSCALL_64_after_hwframe+0x6e/0xd8
[   19.556106] RIP: 0033:0x7f6a25a3ee5d
[   19.556239] Code: ff c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d 93 af 1b 00 f7 d8 64 89 01 48
[   19.556880] RSP: 002b:00007ffe71b38248 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   19.557148] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f6a25a3ee5d
[   19.557399] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   19.557650] RBP: 00007ffe71b38260 R08: 0000000000000800 R09: 0000000000000800
[   19.557902] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffe71b38378
[   19.558153] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f6a25c7b000
[   19.558434]  </TASK>
[   19.558517] Modules linked in:
[   19.558838] ---[ end trace 0000000000000000 ]---
[   19.559101] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   19.559310] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   19.559952] RSP: 0018:ffff88802457fba8 EFLAGS: 00010206
[   19.560140] RAX: dffffc0000000000 RBX: ffff888014f9b000 RCX: 0000000000000000
[   19.560398] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   19.560724] RBP: ffff88802457fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   19.560979] R10: ffff88800aad88df R11: 0000000000000001 R12: 0000000000000000
[   19.561300] R13: ffffffff85cc0180 R14: ffff8880109b6ac0 R15: ffffffff87070ae0
[   19.561552] FS:  00007f6a25c3a600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   19.561901] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   19.562107] CR2: 0000000020000080 CR3: 000000001def4000 CR4: 0000000000750ef0
[   19.562416] PKRU: 55555554
[   19.562810] ------------[ cut here ]------------
[   19.562990] WARNING: CPU: 0 PID: 876 at drivers/iommu/iommufd/main.c:258 iommufd_fops_release+0x2a3/0x300
[   19.563408] Modules linked in:
[   19.563529] CPU: 0 PID: 876 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   19.563890] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   19.564319] RIP: 0010:iommufd_fops_release+0x2a3/0x300
[   19.564541] Code: 45 d0 65 48 2b 04 25 28 00 00 00 75 54 48 81 c4 88 00 00 00 31 c0 5b 41 5c 41 5d 41 5e 41 5f 5d c3 cc cc cc cc e8 ad 4f 0a fe <0f> 0b eb a6 e8 74 23 67 fe e9 f6 fe ff ff 48 89 85 50 ff ff ff e8
[   19.565249] RSP: 0018:ffff888014777c00 EFLAGS: 00010293
[   19.565470] RAX: 0000000000000000 RBX: ffff88800fe06408 RCX: 0000000000000000
[   19.565756] RDX: ffff88801392a500 RSI: ffffffff835563e3 RDI: ffffffff86702b40
[   19.566071] RBP: ffff888014777cb0 R08: 0000000000000000 R09: fffffbfff0eb2644
[   19.566329] R10: ffffffff87593227 R11: ffff888019403a00 R12: 0000000000000000
[   19.566760] R13: ffff888012e6ce18 R14: ffff888014777c48 R15: ffffffff83556140
[   19.567019] FS:  0000000000000000(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   19.567303] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   19.567517] CR2: 0000000020000080 CR3: 000000000687e000 CR4: 0000000000750ef0
[   19.567825] PKRU: 55555554
[   19.567926] Call Trace:
[   19.568018]  <TASK>
[   19.568112]  ? show_regs+0x6e/0x80
[   19.568289]  ? __warn+0xef/0x340
[   19.568417]  ? report_bug+0x25e/0x4b0
[   19.568559]  ? iommufd_fops_release+0x2a3/0x300
[   19.568752]  ? report_bug+0x2cb/0x4b0
[   19.568938]  ? handle_bug+0x46/0x90
[   19.569073]  ? exc_invalid_op+0x1d/0x50
[   19.569223]  ? asm_exc_invalid_op+0x1f/0x30
[   19.569439]  ? __pfx_iommufd_fops_release+0x10/0x10
[   19.569626]  ? iommufd_fops_release+0x2a3/0x300
[   19.569803]  ? iommufd_fops_release+0x2a3/0x300
[   19.570030]  ? __pfx_iommufd_fops_release+0x10/0x10
[   19.570213]  ? rcu_is_watching+0x19/0xc0
[   19.570365]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   19.570640]  ? __pfx_iommufd_fops_release+0x10/0x10
[   19.570827]  __fput+0x424/0xaf0
[   19.570954]  ____fput+0x1f/0x30
[   19.571078]  task_work_run+0x19d/0x2b0
[   19.571223]  ? __pfx_task_work_run+0x10/0x10
[   19.571394]  ? __sanitizer_cov_trace_const_cmp1+0x1e/0x30
[   19.571647]  ? switch_task_namespaces+0xa9/0xe0
[   19.571820]  do_exit+0xac9/0x2790
[   19.571961]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   19.572238]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   19.572423]  ? __pfx_do_exit+0x10/0x10
[   19.572624]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   19.572824]  ? security_file_ioctl+0x9d/0xd0
[   19.572990]  make_task_dead+0x182/0x3c0
[   19.573137]  rewind_stack_and_make_dead+0x17/0x20
[   19.573380] RIP: 0033:0x7f6a25a3ee5d
[   19.573517] Code: Unable to access opcode bytes at 0x7f6a25a3ee33.
[   19.573739] RSP: 002b:00007ffe71b38248 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   19.574074] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f6a25a3ee5d
[   19.574335] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   19.574653] RBP: 00007ffe71b38260 R08: 0000000000000800 R09: 0000000000000800
[   19.574915] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffe71b38378
[   19.575171] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f6a25c7b000
[   19.575511]  </TASK>
[   19.575598] irq event stamp: 0
[   19.575713] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   19.575962] hardirqs last disabled at (0): [<ffffffff8122f2d1>] copy_process+0x1c51/0x7140
[   19.576302] softirqs last  enabled at (0): [<ffffffff8122f312>] copy_process+0x1c92/0x7140
[   19.576659] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   19.576886] ---[ end trace 0000000000000000 ]---
[   19.579735] iommufd_mock iommufd_mock156: Adding to iommu group 156
[   19.579988] iommufd_mock iommufd_mock156: Removing from iommu group 156
[   19.580247] general protection fault, probably for non-canonical address 0xdffffc0000000006: 0000 [#157] PREEMPT SMP KASAN NOPTI
[   19.580692] KASAN: null-ptr-deref in range [0x0000000000000030-0x0000000000000037]
[   19.580965] CPU: 0 PID: 877 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   19.581281] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   19.581689] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   19.581903] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   19.582560] RSP: 0018:ffff8880109dfba8 EFLAGS: 00010206
[   19.582760] RAX: dffffc0000000000 RBX: ffff88800bec2000 RCX: 0000000000000000
[   19.583017] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   19.583274] RBP: ffff8880109dfbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   19.583532] R10: ffff88800aad88df R11: 5f6466756d6d6f69 R12: 0000000000000000
[   19.583788] R13: ffffffff85cc0180 R14: ffff888024c35d00 R15: ffffffff87070ae0
[   19.584046] FS:  00007fba18bcf600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   19.584335] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   19.584546] CR2: 0000000020000080 CR3: 00000000202d4000 CR4: 0000000000750ef0
[   19.584804] PKRU: 55555554
[   19.584907] Call Trace:
[   19.585001]  <TASK>
[   19.585084]  ? show_regs+0x6e/0x80
[   19.585220]  ? die_addr+0x45/0xb0
[   19.585353]  ? exc_general_protection+0x159/0x250
[   19.585535]  ? asm_exc_general_protection+0x2b/0x30
[   19.585722]  ? sysfs_remove_link_from_group+0x21/0x90
[   19.585913]  ? sysfs_remove_link_from_group+0x37/0x90
[   19.586103]  ? sysfs_remove_link_from_group+0x21/0x90
[   19.586294]  iommu_device_unlink+0x85/0xd0
[   19.586450]  iommu_deinit_device+0x11f/0x4c0
[   19.586616]  __iommu_group_remove_device+0x26b/0x300
[   19.586808]  iommu_group_remove_device+0x8a/0xb0
[   19.586986]  iommufd_test+0x1f1a/0x2d10
[   19.587129]  ? __pfx_lock_release+0x10/0x10
[   19.587286]  ? __pfx_lock_acquire+0x10/0x10
[   19.587444]  ? __pfx_iommufd_test+0x10/0x10
[   19.587600]  ? __sanitizer_cov_trace_const_cmp8+0x1c/0x30
[   19.587800]  iommufd_fops_ioctl+0x377/0x510
[   19.587958]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   19.588133]  ? trace_hardirqs_on+0x26/0x120
[   19.588292]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   19.588520]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   19.588702]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   19.588900]  ? security_file_ioctl+0x9d/0xd0
[   19.589062]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   19.589237]  __x64_sys_ioctl+0x1b9/0x230
[   19.589384]  do_syscall_64+0x3c/0x90
[   19.589518]  entry_SYSCALL_64_after_hwframe+0x6e/0xd8
[   19.589703] RIP: 0033:0x7fba1883ee5d
[   19.589837] Code: ff c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d 93 af 1b 00 f7 d8 64 89 01 48
[   19.590480] RSP: 002b:00007ffdd1517748 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   19.590756] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007fba1883ee5d
[   19.591014] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   19.591265] RBP: 00007ffdd1517760 R08: 0000000000000800 R09: 0000000000000800
[   19.591517] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffdd1517878
[   19.591768] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007fba18c10000
[   19.592025]  </TASK>
[   19.592108] Modules linked in:
[   19.592294] ---[ end trace 0000000000000000 ]---
[   19.592466] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   19.592677] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   19.593333] RSP: 0018:ffff88802457fba8 EFLAGS: 00010206
[   19.593526] RAX: dffffc0000000000 RBX: ffff888014f9b000 RCX: 0000000000000000
[   19.593783] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   19.594112] RBP: ffff88802457fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   19.594370] R10: ffff88800aad88df R11: 0000000000000001 R12: 0000000000000000
[   19.594702] R13: ffffffff85cc0180 R14: ffff8880109b6ac0 R15: ffffffff87070ae0
[   19.594972] FS:  00007fba18bcf600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   19.595269] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   19.595540] CR2: 0000000020000080 CR3: 00000000202d4000 CR4: 0000000000750ef0
[   19.595799] PKRU: 55555554
[   19.596212] ------------[ cut here ]------------
[   19.596381] WARNING: CPU: 0 PID: 877 at drivers/iommu/iommufd/main.c:258 iommufd_fops_release+0x2a3/0x300
[   19.596791] Modules linked in:
[   19.596907] CPU: 0 PID: 877 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   19.597284] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   19.597705] RIP: 0010:iommufd_fops_release+0x2a3/0x300
[   19.597932] Code: 45 d0 65 48 2b 04 25 28 00 00 00 75 54 48 81 c4 88 00 00 00 31 c0 5b 41 5c 41 5d 41 5e 41 5f 5d c3 cc cc cc cc e8 ad 4f 0a fe <0f> 0b eb a6 e8 74 23 67 fe e9 f6 fe ff ff 48 89 85 50 ff ff ff e8
[   19.598656] RSP: 0018:ffff8880109dfc00 EFLAGS: 00010293
[   19.598854] RAX: 0000000000000000 RBX: ffff88800fe06a08 RCX: 0000000000000000
[   19.599133] RDX: ffff8880122b4a00 RSI: ffffffff835563e3 RDI: ffffffff86702b40
[   19.599426] RBP: ffff8880109dfcb0 R08: 0000000000000000 R09: fffffbfff0eb2644
[   19.599704] R10: ffffffff87593227 R11: ffff88801894f400 R12: 0000000000000000
[   19.599997] R13: ffff888012211818 R14: ffff8880109dfc48 R15: ffffffff83556140
[   19.600273] FS:  0000000000000000(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   19.600597] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   19.600813] CR2: 0000000020000080 CR3: 000000000687e000 CR4: 0000000000750ef0
[   19.601121] PKRU: 55555554
[   19.601224] Call Trace:
[   19.601318]  <TASK>
[   19.601421]  ? show_regs+0x6e/0x80
[   19.601597]  ? __warn+0xef/0x340
[   19.601724]  ? report_bug+0x25e/0x4b0
[   19.601867]  ? iommufd_fops_release+0x2a3/0x300
[   19.602099]  ? report_bug+0x2cb/0x4b0
[   19.602243]  ? handle_bug+0x46/0x90
[   19.602379]  ? exc_invalid_op+0x1d/0x50
[   19.602548]  ? asm_exc_invalid_op+0x1f/0x30
[   19.602759]  ? __pfx_iommufd_fops_release+0x10/0x10
[   19.602945]  ? iommufd_fops_release+0x2a3/0x300
[   19.603118]  ? iommufd_fops_release+0x2a3/0x300
[   19.603291]  ? __pfx_iommufd_fops_release+0x10/0x10
[   19.603480]  ? rcu_is_watching+0x19/0xc0
[   19.603691]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   19.603894]  ? __pfx_iommufd_fops_release+0x10/0x10
[   19.604085]  __fput+0x424/0xaf0
[   19.604265]  ____fput+0x1f/0x30
[   19.604390]  task_work_run+0x19d/0x2b0
[   19.604535]  ? __pfx_task_work_run+0x10/0x10
[   19.604761]  ? __sanitizer_cov_trace_const_cmp1+0x1e/0x30
[   19.604962]  ? switch_task_namespaces+0xa9/0xe0
[   19.605135]  do_exit+0xac9/0x2790
[   19.605275]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   19.605551]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   19.605736]  ? __pfx_do_exit+0x10/0x10
[   19.605879]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   19.606080]  ? security_file_ioctl+0x9d/0xd0
[   19.606246]  make_task_dead+0x182/0x3c0
[   19.606393]  rewind_stack_and_make_dead+0x17/0x20
[   19.606572] RIP: 0033:0x7fba1883ee5d
[   19.606719] Code: Unable to access opcode bytes at 0x7fba1883ee33.
[   19.606944] RSP: 002b:00007ffdd1517748 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   19.607219] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007fba1883ee5d
[   19.607477] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   19.607729] RBP: 00007ffdd1517760 R08: 0000000000000800 R09: 0000000000000800
[   19.607981] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffdd1517878
[   19.608232] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007fba18c10000
[   19.608490]  </TASK>
[   19.608574] irq event stamp: 0
[   19.608687] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   19.608911] hardirqs last disabled at (0): [<ffffffff8122f2d1>] copy_process+0x1c51/0x7140
[   19.609204] softirqs last  enabled at (0): [<ffffffff8122f312>] copy_process+0x1c92/0x7140
[   19.609496] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   19.609719] ---[ end trace 0000000000000000 ]---
[   19.612239] iommufd_mock iommufd_mock157: Adding to iommu group 157
[   19.612499] iommufd_mock iommufd_mock157: Removing from iommu group 157
[   19.612764] general protection fault, probably for non-canonical address 0xdffffc0000000006: 0000 [#158] PREEMPT SMP KASAN NOPTI
[   19.613186] KASAN: null-ptr-deref in range [0x0000000000000030-0x0000000000000037]
[   19.613465] CPU: 1 PID: 878 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   19.613786] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   19.614201] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   19.614419] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   19.615097] RSP: 0018:ffff888012c7fba8 EFLAGS: 00010206
[   19.615295] RAX: dffffc0000000000 RBX: ffff888024538000 RCX: 0000000000000000
[   19.615559] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   19.615823] RBP: ffff888012c7fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   19.616087] R10: ffff88800aad88df R11: 5f6466756d6d6f69 R12: 0000000000000000
[   19.616350] R13: ffffffff85cc0180 R14: ffff88801679aae0 R15: ffffffff87070ae0
[   19.616615] FS:  00007f6a62f2b600(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
[   19.616912] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   19.617128] CR2: 0000000020000080 CR3: 0000000013544000 CR4: 0000000000750ee0
[   19.617393] PKRU: 55555554
[   19.617498] Call Trace:
[   19.617594]  <TASK>
[   19.617679]  ? show_regs+0x6e/0x80
[   19.617818]  ? die_addr+0x45/0xb0
[   19.617954]  ? exc_general_protection+0x159/0x250
[   19.618141]  ? asm_exc_general_protection+0x2b/0x30
[   19.618332]  ? sysfs_remove_link_from_group+0x21/0x90
[   19.618528]  ? sysfs_remove_link_from_group+0x37/0x90
[   19.618723]  ? sysfs_remove_link_from_group+0x21/0x90
[   19.618921]  iommu_device_unlink+0x85/0xd0
[   19.619082]  iommu_deinit_device+0x11f/0x4c0
[   19.619252]  __iommu_group_remove_device+0x26b/0x300
[   19.619447]  iommu_group_remove_device+0x8a/0xb0
[   19.619628]  iommufd_test+0x1f1a/0x2d10
[   19.619777]  ? __pfx_lock_release+0x10/0x10
[   19.619941]  ? __pfx_lock_acquire+0x10/0x10
[   19.620107]  ? __pfx_iommufd_test+0x10/0x10
[   19.620270]  ? __sanitizer_cov_trace_const_cmp8+0x1c/0x30
[   19.620479]  iommufd_fops_ioctl+0x377/0x510
[   19.620644]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   19.620827]  ? trace_hardirqs_on+0x26/0x120
[   19.620993]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   19.621231]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   19.621422]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   19.621628]  ? security_file_ioctl+0x9d/0xd0
[   19.621798]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   19.621981]  __x64_sys_ioctl+0x1b9/0x230
[   19.622134]  do_syscall_64+0x3c/0x90
[   19.622275]  entry_SYSCALL_64_after_hwframe+0x6e/0xd8
[   19.622468] RIP: 0033:0x7f6a62c3ee5d
[   19.622607] Code: ff c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d 93 af 1b 00 f7 d8 64 89 01 48
[   19.623284] RSP: 002b:00007ffe8bdd8418 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   19.623564] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f6a62c3ee5d
[   19.623829] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   19.624092] RBP: 00007ffe8bdd8430 R08: 0000000000000800 R09: 0000000000000800
[   19.624356] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffe8bdd8548
[   19.624620] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f6a62f6c000
[   19.624889]  </TASK>
[   19.624976] Modules linked in:
[   19.625259] ---[ end trace 0000000000000000 ]---
[   19.625435] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   19.625654] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   19.626314] RSP: 0018:ffff88802457fba8 EFLAGS: 00010206
[   19.626510] RAX: dffffc0000000000 RBX: ffff888014f9b000 RCX: 0000000000000000
[   19.626826] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   19.627087] RBP: ffff88802457fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   19.627345] R10: ffff88800aad88df R11: 0000000000000001 R12: 0000000000000000
[   19.627603] R13: ffffffff85cc0180 R14: ffff8880109b6ac0 R15: ffffffff87070ae0
[   19.627867] FS:  00007f6a62f2b600(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
[   19.628157] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   19.628369] CR2: 0000000020000080 CR3: 0000000013544000 CR4: 0000000000750ee0
[   19.628628] PKRU: 55555554
[   19.629026] ------------[ cut here ]------------
[   19.629200] WARNING: CPU: 1 PID: 878 at drivers/iommu/iommufd/main.c:258 iommufd_fops_release+0x2a3/0x300
[   19.629547] Modules linked in:
[   19.629665] CPU: 1 PID: 878 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   19.629980] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   19.630392] RIP: 0010:iommufd_fops_release+0x2a3/0x300
[   19.630612] Code: 45 d0 65 48 2b 04 25 28 00 00 00 75 54 48 81 c4 88 00 00 00 31 c0 5b 41 5c 41 5d 41 5e 41 5f 5d c3 cc cc cc cc e8 ad 4f 0a fe <0f> 0b eb a6 e8 74 23 67 fe e9 f6 fe ff ff 48 89 85 50 ff ff ff e8
[   19.631290] RSP: 0018:ffff888012c7fc00 EFLAGS: 00010293
[   19.631484] RAX: 0000000000000000 RBX: ffff88801248a908 RCX: 0000000000000000
[   19.631743] RDX: ffff88801388a500 RSI: ffffffff835563e3 RDI: ffffffff86702b48
[   19.631999] RBP: ffff888012c7fcb0 R08: 0000000000000000 R09: fffffbfff0eb2644
[   19.632254] R10: ffffffff87593227 R11: ffff88802460e000 R12: 0000000000000000
[   19.632510] R13: ffff8880133f6e18 R14: ffff888012c7fc48 R15: ffffffff83556140
[   19.632767] FS:  0000000000000000(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
[   19.633055] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   19.633264] CR2: 0000000020000080 CR3: 000000000687e000 CR4: 0000000000750ee0
[   19.633522] PKRU: 55555554
[   19.633625] Call Trace:
[   19.633718]  <TASK>
[   19.633801]  ? show_regs+0x6e/0x80
[   19.633934]  ? __warn+0xef/0x340
[   19.634061]  ? report_bug+0x25e/0x4b0
[   19.634203]  ? iommufd_fops_release+0x2a3/0x300
[   19.634374]  ? report_bug+0x2cb/0x4b0
[   19.634518]  ? handle_bug+0x46/0x90
[   19.634677]  ? exc_invalid_op+0x1d/0x50
[   19.634828]  ? asm_exc_invalid_op+0x1f/0x30
[   19.634989]  ? __pfx_iommufd_fops_release+0x10/0x10
[   19.635173]  ? iommufd_fops_release+0x2a3/0x300
[   19.635345]  ? iommufd_fops_release+0x2a3/0x300
[   19.635518]  ? __pfx_iommufd_fops_release+0x10/0x10
[   19.635700]  ? rcu_is_watching+0x19/0xc0
[   19.635851]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   19.636052]  ? __pfx_iommufd_fops_release+0x10/0x10
[   19.636235]  __fput+0x424/0xaf0
[   19.636361]  ____fput+0x1f/0x30
[   19.636485]  task_work_run+0x19d/0x2b0
[   19.636630]  ? __pfx_task_work_run+0x10/0x10
[   19.636792]  ? __sanitizer_cov_trace_const_cmp1+0x1e/0x30
[   19.636992]  ? switch_task_namespaces+0xa9/0xe0
[   19.637164]  do_exit+0xac9/0x2790
[   19.637293]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   19.637523]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   19.637707]  ? __pfx_do_exit+0x10/0x10
[   19.637850]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   19.638050]  ? security_file_ioctl+0x9d/0xd0
[   19.638216]  make_task_dead+0x182/0x3c0
[   19.638366]  rewind_stack_and_make_dead+0x17/0x20
[   19.638543] RIP: 0033:0x7f6a62c3ee5d
[   19.638698] Code: Unable to access opcode bytes at 0x7f6a62c3ee33.
[   19.638929] RSP: 002b:00007ffe8bdd8418 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   19.639203] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f6a62c3ee5d
[   19.639459] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   19.639716] RBP: 00007ffe8bdd8430 R08: 0000000000000800 R09: 0000000000000800
[   19.639972] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffe8bdd8548
[   19.640229] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f6a62f6c000
[   19.640490]  </TASK>
[   19.640575] irq event stamp: 0
[   19.640689] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   19.640917] hardirqs last disabled at (0): [<ffffffff8122f2d1>] copy_process+0x1c51/0x7140
[   19.641215] softirqs last  enabled at (0): [<ffffffff8122f312>] copy_process+0x1c92/0x7140
[   19.641513] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   19.641740] ---[ end trace 0000000000000000 ]---
[   19.645848] iommufd_mock iommufd_mock158: Adding to iommu group 158
[   19.646195] iommufd_mock iommufd_mock158: Removing from iommu group 158
[   19.646452] general protection fault, probably for non-canonical address 0xdffffc0000000006: 0000 [#159] PREEMPT SMP KASAN NOPTI
[   19.646912] KASAN: null-ptr-deref in range [0x0000000000000030-0x0000000000000037]
[   19.647179] CPU: 0 PID: 879 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   19.647486] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   19.647882] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   19.648092] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   19.648733] RSP: 0018:ffff8880109dfba8 EFLAGS: 00010206
[   19.648922] RAX: dffffc0000000000 RBX: ffff88800bec0000 RCX: 0000000000000000
[   19.649174] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   19.649425] RBP: ffff8880109dfbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   19.649678] R10: ffff88800aad88df R11: 5f6466756d6d6f69 R12: 0000000000000000
[   19.649929] R13: ffffffff85cc0180 R14: ffff888024c35fc0 R15: ffffffff87070ae0
[   19.650181] FS:  00007ff6c1643600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   19.650464] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   19.650670] CR2: 0000000020000080 CR3: 0000000013544000 CR4: 0000000000750ef0
[   19.650934] PKRU: 55555554
[   19.651035] Call Trace:
[   19.651126]  <TASK>
[   19.651207]  ? show_regs+0x6e/0x80
[   19.651340]  ? die_addr+0x45/0xb0
[   19.651470]  ? exc_general_protection+0x159/0x250
[   19.651650]  ? asm_exc_general_protection+0x2b/0x30
[   19.651856]  ? sysfs_remove_link_from_group+0x21/0x90
[   19.652042]  ? sysfs_remove_link_from_group+0x37/0x90
[   19.652229]  ? sysfs_remove_link_from_group+0x21/0x90
[   19.652415]  iommu_device_unlink+0x85/0xd0
[   19.652568]  iommu_deinit_device+0x11f/0x4c0
[   19.652730]  __iommu_group_remove_device+0x26b/0x300
[   19.652916]  iommu_group_remove_device+0x8a/0xb0
[   19.653089]  iommufd_test+0x1f1a/0x2d10
[   19.653232]  ? __pfx_lock_release+0x10/0x10
[   19.653388]  ? __pfx_lock_acquire+0x10/0x10
[   19.653545]  ? __pfx_iommufd_test+0x10/0x10
[   19.653701]  ? __sanitizer_cov_trace_const_cmp8+0x1c/0x30
[   19.653901]  iommufd_fops_ioctl+0x377/0x510
[   19.654058]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   19.654232]  ? trace_hardirqs_on+0x26/0x120
[   19.654391]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   19.654619]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   19.654816]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   19.655014]  ? security_file_ioctl+0x9d/0xd0
[   19.655177]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   19.655352]  __x64_sys_ioctl+0x1b9/0x230
[   19.655499]  do_syscall_64+0x3c/0x90
[   19.655634]  entry_SYSCALL_64_after_hwframe+0x6e/0xd8
[   19.655818] RIP: 0033:0x7ff6c143ee5d
[   19.655952] Code: ff c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d 93 af 1b 00 f7 d8 64 89 01 48
[   19.656594] RSP: 002b:00007ffe72506c18 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   19.656863] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007ff6c143ee5d
[   19.657114] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   19.657366] RBP: 00007ffe72506c30 R08: 0000000000000800 R09: 0000000000000800
[   19.657617] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffe72506d48
[   19.657869] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007ff6c1684000
[   19.658126]  </TASK>
[   19.658210] Modules linked in:
[   19.658411] ---[ end trace 0000000000000000 ]---
[   19.658620] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   19.658846] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   19.659493] RSP: 0018:ffff88802457fba8 EFLAGS: 00010206
[   19.659681] RAX: dffffc0000000000 RBX: ffff888014f9b000 RCX: 0000000000000000
[   19.659933] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   19.660291] RBP: ffff88802457fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   19.660548] R10: ffff88800aad88df R11: 0000000000000001 R12: 0000000000000000
[   19.660879] R13: ffffffff85cc0180 R14: ffff8880109b6ac0 R15: ffffffff87070ae0
[   19.661132] FS:  00007ff6c1643600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   19.661512] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   19.661719] CR2: 0000000020000080 CR3: 0000000013544000 CR4: 0000000000750ef0
[   19.662046] PKRU: 55555554
[   19.662523] ------------[ cut here ]------------
[   19.662860] WARNING: CPU: 0 PID: 879 at drivers/iommu/iommufd/main.c:258 iommufd_fops_release+0x2a3/0x300
[   19.663213] Modules linked in:
[   19.663398] CPU: 0 PID: 879 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   19.663711] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   19.664169] RIP: 0010:iommufd_fops_release+0x2a3/0x300
[   19.664358] Code: 45 d0 65 48 2b 04 25 28 00 00 00 75 54 48 81 c4 88 00 00 00 31 c0 5b 41 5c 41 5d 41 5e 41 5f 5d c3 cc cc cc cc e8 ad 4f 0a fe <0f> 0b eb a6 e8 74 23 67 fe e9 f6 fe ff ff 48 89 85 50 ff ff ff e8
[   19.665080] RSP: 0018:ffff8880109dfc00 EFLAGS: 00010293
[   19.665327] RAX: 0000000000000000 RBX: ffff88800fe06b08 RCX: 0000000000000000
[   19.665581] RDX: ffff88801388ca00 RSI: ffffffff835563e3 RDI: ffffffff86702b40
[   19.665901] RBP: ffff8880109dfcb0 R08: 0000000000000000 R09: fffffbfff0eb2644
[   19.666154] R10: ffffffff87593227 R11: ffff888013045800 R12: 0000000000000000
[   19.666467] R13: ffff888010fd9d18 R14: ffff8880109dfc48 R15: ffffffff83556140
[   19.666743] FS:  0000000000000000(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   19.667048] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   19.667271] CR2: 0000000020000080 CR3: 000000000687e000 CR4: 0000000000750ef0
[   19.667582] PKRU: 55555554
[   19.667684] Call Trace:
[   19.667776]  <TASK>
[   19.667857]  ? show_regs+0x6e/0x80
[   19.668067]  ? __warn+0xef/0x340
[   19.668191]  ? report_bug+0x25e/0x4b0
[   19.668331]  ? iommufd_fops_release+0x2a3/0x300
[   19.668503]  ? report_bug+0x2cb/0x4b0
[   19.668702]  ? handle_bug+0x46/0x90
[   19.668835]  ? exc_invalid_op+0x1d/0x50
[   19.668979]  ? asm_exc_invalid_op+0x1f/0x30
[   19.669164]  ? __pfx_iommufd_fops_release+0x10/0x10
[   19.669384]  ? iommufd_fops_release+0x2a3/0x300
[   19.669553]  ? iommufd_fops_release+0x2a3/0x300
[   19.669777]  ? __pfx_iommufd_fops_release+0x10/0x10
[   19.669956]  ? rcu_is_watching+0x19/0xc0
[   19.670104]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   19.670377]  ? __pfx_iommufd_fops_release+0x10/0x10
[   19.670561]  __fput+0x424/0xaf0
[   19.670698]  ____fput+0x1f/0x30
[   19.670826]  task_work_run+0x19d/0x2b0
[   19.670972]  ? __pfx_task_work_run+0x10/0x10
[   19.671134]  ? __sanitizer_cov_trace_const_cmp1+0x1e/0x30
[   19.671402]  ? switch_task_namespaces+0xa9/0xe0
[   19.671572]  do_exit+0xac9/0x2790
[   19.671699]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   19.671984]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   19.672165]  ? __pfx_do_exit+0x10/0x10
[   19.672308]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   19.672559]  ? security_file_ioctl+0x9d/0xd0
[   19.672721]  make_task_dead+0x182/0x3c0
[   19.672866]  rewind_stack_and_make_dead+0x17/0x20
[   19.673040] RIP: 0033:0x7ff6c143ee5d
[   19.673173] Code: Unable to access opcode bytes at 0x7ff6c143ee33.
[   19.673393] RSP: 002b:00007ffe72506c18 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   19.673666] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007ff6c143ee5d
[   19.673917] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   19.674169] RBP: 00007ffe72506c30 R08: 0000000000000800 R09: 0000000000000800
[   19.674420] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffe72506d48
[   19.674685] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007ff6c1684000
[   19.674951]  </TASK>
[   19.675036] irq event stamp: 0
[   19.675154] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   19.675377] hardirqs last disabled at (0): [<ffffffff8122f2d1>] copy_process+0x1c51/0x7140
[   19.675689] softirqs last  enabled at (0): [<ffffffff8122f312>] copy_process+0x1c92/0x7140
[   19.675982] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   19.676205] ---[ end trace 0000000000000000 ]---
[   19.678658] iommufd_mock iommufd_mock159: Adding to iommu group 159
[   19.678949] iommufd_mock iommufd_mock159: Removing from iommu group 159
[   19.679211] general protection fault, probably for non-canonical address 0xdffffc0000000006: 0000 [#160] PREEMPT SMP KASAN NOPTI
[   19.679622] KASAN: null-ptr-deref in range [0x0000000000000030-0x0000000000000037]
[   19.679895] CPU: 1 PID: 880 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   19.680208] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   19.680614] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   19.680827] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   19.681484] RSP: 0018:ffff888012dcfba8 EFLAGS: 00010206
[   19.681677] RAX: dffffc0000000000 RBX: ffff88802453e000 RCX: 0000000000000000
[   19.681934] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   19.682192] RBP: ffff888012dcfbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   19.682449] R10: ffff88800aad88df R11: 5f6466756d6d6f69 R12: 0000000000000000
[   19.682708] R13: ffffffff85cc0180 R14: ffff88801679a480 R15: ffffffff87070ae0
[   19.682987] FS:  00007f199a8a7600(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
[   19.683278] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   19.683489] CR2: 0000000020000080 CR3: 00000000202d4000 CR4: 0000000000750ee0
[   19.683747] PKRU: 55555554
[   19.683851] Call Trace:
[   19.683944]  <TASK>
[   19.684028]  ? show_regs+0x6e/0x80
[   19.684163]  ? die_addr+0x45/0xb0
[   19.684297]  ? exc_general_protection+0x159/0x250
[   19.684481]  ? asm_exc_general_protection+0x2b/0x30
[   19.684667]  ? sysfs_remove_link_from_group+0x21/0x90
[   19.684858]  ? sysfs_remove_link_from_group+0x37/0x90
[   19.685049]  ? sysfs_remove_link_from_group+0x21/0x90
[   19.685240]  iommu_device_unlink+0x85/0xd0
[   19.685397]  iommu_deinit_device+0x11f/0x4c0
[   19.685563]  __iommu_group_remove_device+0x26b/0x300
[   19.685753]  iommu_group_remove_device+0x8a/0xb0
[   19.685930]  iommufd_test+0x1f1a/0x2d10
[   19.686077]  ? __pfx_lock_release+0x10/0x10
[   19.686237]  ? __pfx_lock_acquire+0x10/0x10
[   19.686398]  ? __pfx_iommufd_test+0x10/0x10
[   19.686558]  ? __sanitizer_cov_trace_const_cmp8+0x1c/0x30
[   19.686764]  iommufd_fops_ioctl+0x377/0x510
[   19.686935]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   19.687113]  ? trace_hardirqs_on+0x26/0x120
[   19.687275]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   19.687508]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   19.687694]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   19.687896]  ? security_file_ioctl+0x9d/0xd0
[   19.688062]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   19.688241]  __x64_sys_ioctl+0x1b9/0x230
[   19.688391]  do_syscall_64+0x3c/0x90
[   19.688528]  entry_SYSCALL_64_after_hwframe+0x6e/0xd8
[   19.688717] RIP: 0033:0x7f199a63ee5d
[   19.688854] Code: ff c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d 93 af 1b 00 f7 d8 64 89 01 48
[   19.689512] RSP: 002b:00007ffc0d447f88 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   19.689786] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f199a63ee5d
[   19.690045] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   19.690302] RBP: 00007ffc0d447fa0 R08: 0000000000000800 R09: 0000000000000800
[   19.690564] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffc0d4480b8
[   19.690832] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f199a8e8000
[   19.691095]  </TASK>
[   19.691175] Modules linked in:
[   19.691332] ---[ end trace 0000000000000000 ]---
[   19.691510] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   19.691728] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   19.692401] RSP: 0018:ffff88802457fba8 EFLAGS: 00010206
[   19.692599] RAX: dffffc0000000000 RBX: ffff888014f9b000 RCX: 0000000000000000
[   19.692865] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   19.693134] RBP: ffff88802457fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   19.693401] R10: ffff88800aad88df R11: 0000000000000001 R12: 0000000000000000
[   19.693673] R13: ffffffff85cc0180 R14: ffff8880109b6ac0 R15: ffffffff87070ae0
[   19.693946] FS:  00007f199a8a7600(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
[   19.694252] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   19.694474] CR2: 0000000020000080 CR3: 00000000202d4000 CR4: 0000000000750ee0
[   19.694776] PKRU: 55555554
[   19.695277] ------------[ cut here ]------------
[   19.695455] WARNING: CPU: 1 PID: 880 at drivers/iommu/iommufd/main.c:258 iommufd_fops_release+0x2a3/0x300
[   19.695814] Modules linked in:
[   19.695936] CPU: 1 PID: 880 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   19.696259] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   19.696679] RIP: 0010:iommufd_fops_release+0x2a3/0x300
[   19.696877] Code: 45 d0 65 48 2b 04 25 28 00 00 00 75 54 48 81 c4 88 00 00 00 31 c0 5b 41 5c 41 5d 41 5e 41 5f 5d c3 cc cc cc cc e8 ad 4f 0a fe <0f> 0b eb a6 e8 74 23 67 fe e9 f6 fe ff ff 48 89 85 50 ff ff ff e8
[   19.697561] RSP: 0018:ffff888012dcfc00 EFLAGS: 00010293
[   19.697900] RAX: 0000000000000000 RBX: ffff88801248a508 RCX: 0000000000000000
[   19.698165] RDX: ffff888016492500 RSI: ffffffff835563e3 RDI: ffffffff86702b48
[   19.698425] RBP: ffff888012dcfcb0 R08: 0000000000000000 R09: fffffbfff0eb2644
[   19.698702] R10: ffffffff87593227 R11: ffff888013460200 R12: 0000000000000000
[   19.698970] R13: ffff888018b59d18 R14: ffff888012dcfc48 R15: ffffffff83556140
[   19.699229] FS:  0000000000000000(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
[   19.699523] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   19.699736] CR2: 0000000020000080 CR3: 000000000687e000 CR4: 0000000000750ee0
[   19.699996] PKRU: 55555554
[   19.700099] Call Trace:
[   19.700195]  <TASK>
[   19.700279]  ? show_regs+0x6e/0x80
[   19.700416]  ? __warn+0xef/0x340
[   19.700544]  ? report_bug+0x25e/0x4b0
[   19.700688]  ? iommufd_fops_release+0x2a3/0x300
[   19.700865]  ? report_bug+0x2cb/0x4b0
[   19.701011]  ? handle_bug+0x46/0x90
[   19.701147]  ? exc_invalid_op+0x1d/0x50
[   19.701295]  ? asm_exc_invalid_op+0x1f/0x30
[   19.701455]  ? __pfx_iommufd_fops_release+0x10/0x10
[   19.701643]  ? iommufd_fops_release+0x2a3/0x300
[   19.701817]  ? iommufd_fops_release+0x2a3/0x300
[   19.701993]  ? __pfx_iommufd_fops_release+0x10/0x10
[   19.702180]  ? rcu_is_watching+0x19/0xc0
[   19.702336]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   19.702539]  ? __pfx_iommufd_fops_release+0x10/0x10
[   19.702737]  __fput+0x424/0xaf0
[   19.702872]  ____fput+0x1f/0x30
[   19.702999]  task_work_run+0x19d/0x2b0
[   19.703146]  ? __pfx_task_work_run+0x10/0x10
[   19.703312]  ? __sanitizer_cov_trace_const_cmp1+0x1e/0x30
[   19.703514]  ? switch_task_namespaces+0xa9/0xe0
[   19.703691]  do_exit+0xac9/0x2790
[   19.703823]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   19.704057]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   19.704245]  ? __pfx_do_exit+0x10/0x10
[   19.704390]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   19.704591]  ? security_file_ioctl+0x9d/0xd0
[   19.704759]  make_task_dead+0x182/0x3c0
[   19.704910]  rewind_stack_and_make_dead+0x17/0x20
[   19.705090] RIP: 0033:0x7f199a63ee5d
[   19.705226] Code: Unable to access opcode bytes at 0x7f199a63ee33.
[   19.705450] RSP: 002b:00007ffc0d447f88 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   19.705730] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f199a63ee5d
[   19.705993] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   19.706251] RBP: 00007ffc0d447fa0 R08: 0000000000000800 R09: 0000000000000800
[   19.706508] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffc0d4480b8
[   19.706776] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f199a8e8000
[   19.707045]  </TASK>
[   19.707131] irq event stamp: 0
[   19.707250] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   19.707480] hardirqs last disabled at (0): [<ffffffff8122f2d1>] copy_process+0x1c51/0x7140
[   19.707785] softirqs last  enabled at (0): [<ffffffff8122f312>] copy_process+0x1c92/0x7140
[   19.708087] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   19.708317] ---[ end trace 0000000000000000 ]---
[   19.710735] iommufd_mock iommufd_mock160: Adding to iommu group 160
[   19.711019] iommufd_mock iommufd_mock160: Removing from iommu group 160
[   19.711291] general protection fault, probably for non-canonical address 0xdffffc0000000006: 0000 [#161] PREEMPT SMP KASAN NOPTI
[   19.711718] KASAN: null-ptr-deref in range [0x0000000000000030-0x0000000000000037]
[   19.711998] CPU: 1 PID: 881 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   19.712319] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   19.712734] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   19.712954] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   19.713632] RSP: 0018:ffff8880115ffba8 EFLAGS: 00010206
[   19.713830] RAX: dffffc0000000000 RBX: ffff88802453d000 RCX: 0000000000000000
[   19.714098] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   19.714361] RBP: ffff8880115ffbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   19.714625] R10: ffff88800aad88df R11: 5f6466756d6d6f69 R12: 0000000000000000
[   19.714897] R13: ffffffff85cc0180 R14: ffff88801679aac0 R15: ffffffff87070ae0
[   19.715162] FS:  00007f4c3d934600(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
[   19.715462] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   19.715679] CR2: 0000000020000080 CR3: 00000000202d4000 CR4: 0000000000750ee0
[   19.715944] PKRU: 55555554
[   19.716050] Call Trace:
[   19.716145]  <TASK>
[   19.716229]  ? show_regs+0x6e/0x80
[   19.716369]  ? die_addr+0x45/0xb0
[   19.716506]  ? exc_general_protection+0x159/0x250
[   19.716695]  ? asm_exc_general_protection+0x2b/0x30
[   19.716887]  ? sysfs_remove_link_from_group+0x21/0x90
[   19.717082]  ? sysfs_remove_link_from_group+0x37/0x90
[   19.717277]  ? sysfs_remove_link_from_group+0x21/0x90
[   19.717473]  iommu_device_unlink+0x85/0xd0
[   19.717634]  iommu_deinit_device+0x11f/0x4c0
[   19.717805]  __iommu_group_remove_device+0x26b/0x300
[   19.718001]  iommu_group_remove_device+0x8a/0xb0
[   19.718181]  iommufd_test+0x1f1a/0x2d10
[   19.718331]  ? __pfx_lock_release+0x10/0x10
[   19.718496]  ? __pfx_lock_acquire+0x10/0x10
[   19.718661]  ? __pfx_iommufd_test+0x10/0x10
[   19.718827]  ? __sanitizer_cov_trace_const_cmp8+0x1c/0x30
[   19.719037]  iommufd_fops_ioctl+0x377/0x510
[   19.719202]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   19.719384]  ? trace_hardirqs_on+0x26/0x120
[   19.719550]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   19.719791]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   19.719982]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   19.720190]  ? security_file_ioctl+0x9d/0xd0
[   19.720359]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   19.720543]  __x64_sys_ioctl+0x1b9/0x230
[   19.720697]  do_syscall_64+0x3c/0x90
[   19.720838]  entry_SYSCALL_64_after_hwframe+0x6e/0xd8
[   19.721032] RIP: 0033:0x7f4c3d63ee5d
[   19.721173] Code: ff c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d 93 af 1b 00 f7 d8 64 89 01 48
[   19.721846] RSP: 002b:00007fff2a6d2d48 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   19.722129] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f4c3d63ee5d
[   19.722393] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   19.722658] RBP: 00007fff2a6d2d60 R08: 0000000000000800 R09: 0000000000000800
[   19.722927] R10: 0000000000000000 R11: 0000000000000213 R12: 00007fff2a6d2e78
[   19.723190] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f4c3d975000
[   19.723460]  </TASK>
[   19.723547] Modules linked in:
[   19.723683] ---[ end trace 0000000000000000 ]---
[   19.723862] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   19.724081] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   19.724768] RSP: 0018:ffff88802457fba8 EFLAGS: 00010206
[   19.724967] RAX: dffffc0000000000 RBX: ffff888014f9b000 RCX: 0000000000000000
[   19.725309] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   19.725575] RBP: ffff88802457fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   19.725862] R10: ffff88800aad88df R11: 0000000000000001 R12: 0000000000000000
[   19.726139] R13: ffffffff85cc0180 R14: ffff8880109b6ac0 R15: ffffffff87070ae0
[   19.726409] FS:  00007f4c3d934600(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
[   19.726764] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   19.726981] CR2: 0000000020000080 CR3: 00000000202d4000 CR4: 0000000000750ee0
[   19.727248] PKRU: 55555554
[   19.727635] ------------[ cut here ]------------
[   19.727813] WARNING: CPU: 1 PID: 881 at drivers/iommu/iommufd/main.c:258 iommufd_fops_release+0x2a3/0x300
[   19.728221] Modules linked in:
[   19.728342] CPU: 1 PID: 881 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   19.728709] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   19.729129] RIP: 0010:iommufd_fops_release+0x2a3/0x300
[   19.729374] Code: 45 d0 65 48 2b 04 25 28 00 00 00 75 54 48 81 c4 88 00 00 00 31 c0 5b 41 5c 41 5d 41 5e 41 5f 5d c3 cc cc cc cc e8 ad 4f 0a fe <0f> 0b eb a6 e8 74 23 67 fe e9 f6 fe ff ff 48 89 85 50 ff ff ff e8
[   19.730091] RSP: 0018:ffff8880115ffc00 EFLAGS: 00010293
[   19.730290] RAX: 0000000000000000 RBX: ffff88801248ac08 RCX: 0000000000000000
[   19.730571] RDX: ffff8880121dca00 RSI: ffffffff835563e3 RDI: ffffffff86702b48
[   19.730868] RBP: ffff8880115ffcb0 R08: 0000000000000000 R09: fffffbfff0eb2644
[   19.731133] R10: ffffffff87593227 R11: ffff888013411600 R12: 0000000000000000
[   19.731401] R13: ffff888018b58418 R14: ffff8880115ffc48 R15: ffffffff83556140
[   19.731712] FS:  0000000000000000(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
[   19.732013] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   19.732276] CR2: 0000000020000080 CR3: 000000000687e000 CR4: 0000000000750ee0
[   19.732543] PKRU: 55555554
[   19.732649] Call Trace:
[   19.732745]  <TASK>
[   19.732844]  ? show_regs+0x6e/0x80
[   19.733005]  ? __warn+0xef/0x340
[   19.733134]  ? report_bug+0x25e/0x4b0
[   19.733279]  ? iommufd_fops_release+0x2a3/0x300
[   19.733474]  ? report_bug+0x2cb/0x4b0
[   19.733649]  ? handle_bug+0x46/0x90
[   19.733787]  ? exc_invalid_op+0x1d/0x50
[   19.733938]  ? asm_exc_invalid_op+0x1f/0x30
[   19.734145]  ? __pfx_iommufd_fops_release+0x10/0x10
[   19.734335]  ? iommufd_fops_release+0x2a3/0x300
[   19.734511]  ? iommufd_fops_release+0x2a3/0x300
[   19.734784]  ? __pfx_iommufd_fops_release+0x10/0x10
[   19.734988]  ? rcu_is_watching+0x19/0xc0
[   19.735145]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   19.735353]  ? __pfx_iommufd_fops_release+0x10/0x10
[   19.735541]  __fput+0x424/0xaf0
[   19.735672]  ____fput+0x1f/0x30
[   19.735814]  task_work_run+0x19d/0x2b0
[   19.735992]  ? __pfx_task_work_run+0x10/0x10
[   19.736160]  ? __sanitizer_cov_trace_const_cmp1+0x1e/0x30
[   19.736371]  ? switch_task_namespaces+0xa9/0xe0
[   19.736593]  do_exit+0xac9/0x2790
[   19.736727]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   19.736964]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   19.737194]  ? __pfx_do_exit+0x10/0x10
[   19.737342]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   19.737546]  ? security_file_ioctl+0x9d/0xd0
[   19.737716]  make_task_dead+0x182/0x3c0
[   19.737909]  rewind_stack_and_make_dead+0x17/0x20
[   19.738091] RIP: 0033:0x7f4c3d63ee5d
[   19.738229] Code: Unable to access opcode bytes at 0x7f4c3d63ee33.
[   19.738500] RSP: 002b:00007fff2a6d2d48 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   19.738793] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f4c3d63ee5d
[   19.739059] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   19.739323] RBP: 00007fff2a6d2d60 R08: 0000000000000800 R09: 0000000000000800
[   19.739634] R10: 0000000000000000 R11: 0000000000000213 R12: 00007fff2a6d2e78
[   19.739899] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f4c3d975000
[   19.740212]  </TASK>
[   19.740300] irq event stamp: 0
[   19.740418] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   19.740651] hardirqs last disabled at (0): [<ffffffff8122f2d1>] copy_process+0x1c51/0x7140
[   19.741001] softirqs last  enabled at (0): [<ffffffff8122f312>] copy_process+0x1c92/0x7140
[   19.741316] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   19.741584] ---[ end trace 0000000000000000 ]---
[   19.744220] iommufd_mock iommufd_mock161: Adding to iommu group 161
[   19.744479] iommufd_mock iommufd_mock161: Removing from iommu group 161
[   19.744747] general protection fault, probably for non-canonical address 0xdffffc0000000006: 0000 [#162] PREEMPT SMP KASAN NOPTI
[   19.745184] KASAN: null-ptr-deref in range [0x0000000000000030-0x0000000000000037]
[   19.745508] CPU: 1 PID: 882 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   19.745834] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   19.746253] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   19.746476] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   19.747176] RSP: 0018:ffff888012dcfba8 EFLAGS: 00010206
[   19.747381] RAX: dffffc0000000000 RBX: ffff88802453f000 RCX: 0000000000000000
[   19.747653] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   19.747923] RBP: ffff888012dcfbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   19.748197] R10: ffff88800aad88df R11: 5f6466756d6d6f69 R12: 0000000000000000
[   19.748469] R13: ffffffff85cc0180 R14: ffff88801679a1a0 R15: ffffffff87070ae0
[   19.748741] FS:  00007f7edf5df600(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
[   19.749046] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   19.749266] CR2: 0000000020000080 CR3: 000000001def4000 CR4: 0000000000750ee0
[   19.749537] PKRU: 55555554
[   19.749645] Call Trace:
[   19.749745]  <TASK>
[   19.749831]  ? show_regs+0x6e/0x80
[   19.749973]  ? die_addr+0x45/0xb0
[   19.750111]  ? exc_general_protection+0x159/0x250
[   19.750304]  ? asm_exc_general_protection+0x2b/0x30
[   19.750499]  ? sysfs_remove_link_from_group+0x21/0x90
[   19.750699]  ? sysfs_remove_link_from_group+0x37/0x90
[   19.750899]  ? sysfs_remove_link_from_group+0x21/0x90
[   19.751094]  iommu_device_unlink+0x85/0xd0
[   19.751254]  iommu_deinit_device+0x11f/0x4c0
[   19.751423]  __iommu_group_remove_device+0x26b/0x300
[   19.751609]  iommu_group_remove_device+0x8a/0xb0
[   19.751790]  iommufd_test+0x1f1a/0x2d10
[   19.751941]  ? __pfx_lock_release+0x10/0x10
[   19.752105]  ? __pfx_lock_acquire+0x10/0x10
[   19.752271]  ? __pfx_iommufd_test+0x10/0x10
[   19.752435]  ? __sanitizer_cov_trace_const_cmp8+0x1c/0x30
[   19.752645]  iommufd_fops_ioctl+0x377/0x510
[   19.752810]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   19.752994]  ? trace_hardirqs_on+0x26/0x120
[   19.753161]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   19.753400]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   19.753592]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   19.753800]  ? security_file_ioctl+0x9d/0xd0
[   19.753971]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   19.754155]  __x64_sys_ioctl+0x1b9/0x230
[   19.754310]  do_syscall_64+0x3c/0x90
[   19.754451]  entry_SYSCALL_64_after_hwframe+0x6e/0xd8
[   19.754646] RIP: 0033:0x7f7edf23ee5d
[   19.754788] Code: ff c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d 93 af 1b 00 f7 d8 64 89 01 48
[   19.755464] RSP: 002b:00007ffe738c4d18 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   19.755746] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f7edf23ee5d
[   19.756012] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   19.756277] RBP: 00007ffe738c4d30 R08: 0000000000000800 R09: 0000000000000800
[   19.756542] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffe738c4e48
[   19.756807] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f7edf620000
[   19.757078]  </TASK>
[   19.757166] Modules linked in:
[   19.757318] ---[ end trace 0000000000000000 ]---
[   19.757496] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   19.757714] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   19.758390] RSP: 0018:ffff88802457fba8 EFLAGS: 00010206
[   19.758597] RAX: dffffc0000000000 RBX: ffff888014f9b000 RCX: 0000000000000000
[   19.758866] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   19.759131] RBP: ffff88802457fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   19.759397] R10: ffff88800aad88df R11: 0000000000000001 R12: 0000000000000000
[   19.759663] R13: ffffffff85cc0180 R14: ffff8880109b6ac0 R15: ffffffff87070ae0
[   19.759928] FS:  00007f7edf5df600(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
[   19.760226] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   19.760443] CR2: 0000000020000080 CR3: 000000001def4000 CR4: 0000000000750ee0
[   19.760709] PKRU: 55555554
[   19.761093] ------------[ cut here ]------------
[   19.761269] WARNING: CPU: 1 PID: 882 at drivers/iommu/iommufd/main.c:258 iommufd_fops_release+0x2a3/0x300
[   19.761625] Modules linked in:
[   19.761745] CPU: 1 PID: 882 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   19.762067] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   19.762484] RIP: 0010:iommufd_fops_release+0x2a3/0x300
[   19.762690] Code: 45 d0 65 48 2b 04 25 28 00 00 00 75 54 48 81 c4 88 00 00 00 31 c0 5b 41 5c 41 5d 41 5e 41 5f 5d c3 cc cc cc cc e8 ad 4f 0a fe <0f> 0b eb a6 e8 74 23 67 fe e9 f6 fe ff ff 48 89 85 50 ff ff ff e8
[   19.763369] RSP: 0018:ffff888012dcfc00 EFLAGS: 00010293
[   19.763568] RAX: 0000000000000000 RBX: ffff88801248a808 RCX: 0000000000000000
[   19.763832] RDX: ffff888011e40000 RSI: ffffffff835563e3 RDI: ffffffff86702b48
[   19.764097] RBP: ffff888012dcfcb0 R08: 0000000000000000 R09: fffffbfff0eb2644
[   19.764361] R10: ffffffff87593227 R11: ffff88801940ce00 R12: 0000000000000000
[   19.764626] R13: ffff888012638198 R14: ffff888012dcfc48 R15: ffffffff83556140
[   19.764891] FS:  0000000000000000(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
[   19.765190] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   19.765407] CR2: 0000000020000080 CR3: 000000000687e000 CR4: 0000000000750ee0
[   19.765670] PKRU: 55555554
[   19.765773] Call Trace:
[   19.765867]  <TASK>
[   19.765950]  ? show_regs+0x6e/0x80
[   19.766083]  ? __warn+0xef/0x340
[   19.766209]  ? report_bug+0x25e/0x4b0
[   19.766351]  ? iommufd_fops_release+0x2a3/0x300
[   19.766523]  ? report_bug+0x2cb/0x4b0
[   19.766674]  ? handle_bug+0x46/0x90
[   19.766810]  ? exc_invalid_op+0x1d/0x50
[   19.766954]  ? asm_exc_invalid_op+0x1f/0x30
[   19.767109]  ? __pfx_iommufd_fops_release+0x10/0x10
[   19.767292]  ? iommufd_fops_release+0x2a3/0x300
[   19.767461]  ? iommufd_fops_release+0x2a3/0x300
[   19.767631]  ? __pfx_iommufd_fops_release+0x10/0x10
[   19.767810]  ? rcu_is_watching+0x19/0xc0
[   19.767959]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   19.768157]  ? __pfx_iommufd_fops_release+0x10/0x10
[   19.768338]  __fput+0x424/0xaf0
[   19.768463]  ____fput+0x1f/0x30
[   19.768585]  task_work_run+0x19d/0x2b0
[   19.768728]  ? __pfx_task_work_run+0x10/0x10
[   19.768887]  ? __sanitizer_cov_trace_const_cmp1+0x1e/0x30
[   19.769085]  ? switch_task_namespaces+0xa9/0xe0
[   19.769255]  do_exit+0xac9/0x2790
[   19.769383]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   19.769609]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   19.769791]  ? __pfx_do_exit+0x10/0x10
[   19.769932]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   19.770129]  ? security_file_ioctl+0x9d/0xd0
[   19.770291]  make_task_dead+0x182/0x3c0
[   19.770436]  rewind_stack_and_make_dead+0x17/0x20
[   19.770619] RIP: 0033:0x7f7edf23ee5d
[   19.770756] Code: Unable to access opcode bytes at 0x7f7edf23ee33.
[   19.770975] RSP: 002b:00007ffe738c4d18 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   19.771245] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f7edf23ee5d
[   19.771497] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   19.771750] RBP: 00007ffe738c4d30 R08: 0000000000000800 R09: 0000000000000800
[   19.772002] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffe738c4e48
[   19.772255] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f7edf620000
[   19.772514]  </TASK>
[   19.772598] irq event stamp: 0
[   19.772711] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   19.772935] hardirqs last disabled at (0): [<ffffffff8122f2d1>] copy_process+0x1c51/0x7140
[   19.773227] softirqs last  enabled at (0): [<ffffffff8122f312>] copy_process+0x1c92/0x7140
[   19.773520] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   19.773744] ---[ end trace 0000000000000000 ]---
[   19.776113] iommufd_mock iommufd_mock162: Adding to iommu group 162
[   19.776370] iommufd_mock iommufd_mock162: Removing from iommu group 162
[   19.776629] general protection fault, probably for non-canonical address 0xdffffc0000000006: 0000 [#163] PREEMPT SMP KASAN NOPTI
[   19.777042] KASAN: null-ptr-deref in range [0x0000000000000030-0x0000000000000037]
[   19.777316] CPU: 1 PID: 883 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   19.777631] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   19.778034] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   19.778246] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   19.778916] RSP: 0018:ffff888013f2fba8 EFLAGS: 00010206
[   19.779108] RAX: dffffc0000000000 RBX: ffff88802453c000 RCX: 0000000000000000
[   19.779365] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   19.779622] RBP: ffff888013f2fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   19.779879] R10: ffff88800aad88df R11: 5f6466756d6d6f69 R12: 0000000000000000
[   19.780135] R13: ffffffff85cc0180 R14: ffff88801679a420 R15: ffffffff87070ae0
[   19.780391] FS:  00007f674f6c9600(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
[   19.780680] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   19.780890] CR2: 0000000020000080 CR3: 000000001def4000 CR4: 0000000000750ee0
[   19.781148] PKRU: 55555554
[   19.781250] Call Trace:
[   19.781344]  <TASK>
[   19.781427]  ? show_regs+0x6e/0x80
[   19.781562]  ? die_addr+0x45/0xb0
[   19.781695]  ? exc_general_protection+0x159/0x250
[   19.781877]  ? asm_exc_general_protection+0x2b/0x30
[   19.782064]  ? sysfs_remove_link_from_group+0x21/0x90
[   19.782255]  ? sysfs_remove_link_from_group+0x37/0x90
[   19.782444]  ? sysfs_remove_link_from_group+0x21/0x90
[   19.782634]  iommu_device_unlink+0x85/0xd0
[   19.782792]  iommu_deinit_device+0x11f/0x4c0
[   19.782957]  __iommu_group_remove_device+0x26b/0x300
[   19.783146]  iommu_group_remove_device+0x8a/0xb0
[   19.783322]  iommufd_test+0x1f1a/0x2d10
[   19.783467]  ? __pfx_lock_release+0x10/0x10
[   19.783627]  ? __pfx_lock_acquire+0x10/0x10
[   19.783788]  ? __pfx_iommufd_test+0x10/0x10
[   19.783947]  ? __sanitizer_cov_trace_const_cmp8+0x1c/0x30
[   19.784150]  iommufd_fops_ioctl+0x377/0x510
[   19.784311]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   19.784488]  ? trace_hardirqs_on+0x26/0x120
[   19.784650]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   19.784882]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   19.785068]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   19.785269]  ? security_file_ioctl+0x9d/0xd0
[   19.785434]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   19.785612]  __x64_sys_ioctl+0x1b9/0x230
[   19.785761]  do_syscall_64+0x3c/0x90
[   19.785898]  entry_SYSCALL_64_after_hwframe+0x6e/0xd8
[   19.786086] RIP: 0033:0x7f674f43ee5d
[   19.786222] Code: ff c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d 93 af 1b 00 f7 d8 64 89 01 48
[   19.786881] RSP: 002b:00007ffd38e9f2b8 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   19.787154] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f674f43ee5d
[   19.787410] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   19.787666] RBP: 00007ffd38e9f2d0 R08: 0000000000000800 R09: 0000000000000800
[   19.787922] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffd38e9f3e8
[   19.788178] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f674f70a000
[   19.788439]  </TASK>
[   19.788524] Modules linked in:
[   19.788684] ---[ end trace 0000000000000000 ]---
[   19.788855] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   19.789065] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   19.789719] RSP: 0018:ffff88802457fba8 EFLAGS: 00010206
[   19.789911] RAX: dffffc0000000000 RBX: ffff888014f9b000 RCX: 0000000000000000
[   19.790168] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   19.790424] RBP: ffff88802457fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   19.790688] R10: ffff88800aad88df R11: 0000000000000001 R12: 0000000000000000
[   19.790943] R13: ffffffff85cc0180 R14: ffff8880109b6ac0 R15: ffffffff87070ae0
[   19.791195] FS:  00007f674f6c9600(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
[   19.791480] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   19.791685] CR2: 0000000020000080 CR3: 000000001def4000 CR4: 0000000000750ee0
[   19.791939] PKRU: 55555554
[   19.792290] ------------[ cut here ]------------
[   19.792461] WARNING: CPU: 1 PID: 883 at drivers/iommu/iommufd/main.c:258 iommufd_fops_release+0x2a3/0x300
[   19.792804] Modules linked in:
[   19.792921] CPU: 1 PID: 883 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   19.793232] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   19.793636] RIP: 0010:iommufd_fops_release+0x2a3/0x300
[   19.793828] Code: 45 d0 65 48 2b 04 25 28 00 00 00 75 54 48 81 c4 88 00 00 00 31 c0 5b 41 5c 41 5d 41 5e 41 5f 5d c3 cc cc cc cc e8 ad 4f 0a fe <0f> 0b eb a6 e8 74 23 67 fe e9 f6 fe ff ff 48 89 85 50 ff ff ff e8
[   19.794498] RSP: 0018:ffff888013f2fc00 EFLAGS: 00010293
[   19.794699] RAX: 0000000000000000 RBX: ffff88801248ab08 RCX: 0000000000000000
[   19.794958] RDX: ffff8880121d8000 RSI: ffffffff835563e3 RDI: ffffffff86702b48
[   19.795215] RBP: ffff888013f2fcb0 R08: 0000000000000000 R09: fffffbfff0eb2644
[   19.795472] R10: ffffffff87593227 R11: ffff888013506c00 R12: 0000000000000000
[   19.795729] R13: ffff888012638b98 R14: ffff888013f2fc48 R15: ffffffff83556140
[   19.795986] FS:  0000000000000000(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
[   19.796277] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   19.796487] CR2: 0000000020000080 CR3: 000000000687e000 CR4: 0000000000750ee0
[   19.796745] PKRU: 55555554
[   19.796848] Call Trace:
[   19.796941]  <TASK>
[   19.797024]  ? show_regs+0x6e/0x80
[   19.797157]  ? __warn+0xef/0x340
[   19.797283]  ? report_bug+0x25e/0x4b0
[   19.797425]  ? iommufd_fops_release+0x2a3/0x300
[   19.797597]  ? report_bug+0x2cb/0x4b0
[   19.797741]  ? handle_bug+0x46/0x90
[   19.797875]  ? exc_invalid_op+0x1d/0x50
[   19.798022]  ? asm_exc_invalid_op+0x1f/0x30
[   19.798179]  ? __pfx_iommufd_fops_release+0x10/0x10
[   19.798364]  ? iommufd_fops_release+0x2a3/0x300
[   19.798536]  ? iommufd_fops_release+0x2a3/0x300
[   19.798715]  ? __pfx_iommufd_fops_release+0x10/0x10
[   19.798896]  ? rcu_is_watching+0x19/0xc0
[   19.799045]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   19.799242]  ? __pfx_iommufd_fops_release+0x10/0x10
[   19.799422]  __fput+0x424/0xaf0
[   19.799547]  ____fput+0x1f/0x30
[   19.799670]  task_work_run+0x19d/0x2b0
[   19.799812]  ? __pfx_task_work_run+0x10/0x10
[   19.799971]  ? __sanitizer_cov_trace_const_cmp1+0x1e/0x30
[   19.800167]  ? switch_task_namespaces+0xa9/0xe0
[   19.800337]  do_exit+0xac9/0x2790
[   19.800464]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   19.800689]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   19.800869]  ? __pfx_do_exit+0x10/0x10
[   19.801010]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   19.801206]  ? security_file_ioctl+0x9d/0xd0
[   19.801367]  make_task_dead+0x182/0x3c0
[   19.801512]  rewind_stack_and_make_dead+0x17/0x20
[   19.801686] RIP: 0033:0x7f674f43ee5d
[   19.801819] Code: Unable to access opcode bytes at 0x7f674f43ee33.
[   19.802036] RSP: 002b:00007ffd38e9f2b8 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   19.802304] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f674f43ee5d
[   19.802555] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   19.802821] RBP: 00007ffd38e9f2d0 R08: 0000000000000800 R09: 0000000000000800
[   19.803073] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffd38e9f3e8
[   19.803325] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f674f70a000
[   19.803581]  </TASK>
[   19.803665] irq event stamp: 0
[   19.803778] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   19.804001] hardirqs last disabled at (0): [<ffffffff8122f2d1>] copy_process+0x1c51/0x7140
[   19.804294] softirqs last  enabled at (0): [<ffffffff8122f312>] copy_process+0x1c92/0x7140
[   19.804586] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   19.804808] ---[ end trace 0000000000000000 ]---
[   19.807280] iommufd_mock iommufd_mock163: Adding to iommu group 163
[   19.807534] iommufd_mock iommufd_mock163: Removing from iommu group 163
[   19.807790] general protection fault, probably for non-canonical address 0xdffffc0000000006: 0000 [#164] PREEMPT SMP KASAN NOPTI
[   19.808201] KASAN: null-ptr-deref in range [0x0000000000000030-0x0000000000000037]
[   19.808472] CPU: 1 PID: 884 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   19.808784] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   19.809188] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   19.809400] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   19.810054] RSP: 0018:ffff888017547ba8 EFLAGS: 00010206
[   19.810246] RAX: dffffc0000000000 RBX: ffff88800eef2000 RCX: 0000000000000000
[   19.810502] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   19.810764] RBP: ffff888017547bc0 R08: 0000000000000001 R09: ffffed100155b11b
[   19.811021] R10: ffff88800aad88df R11: 5f6466756d6d6f69 R12: 0000000000000000
[   19.811277] R13: ffffffff85cc0180 R14: ffff88801679a0a0 R15: ffffffff87070ae0
[   19.811534] FS:  00007fb83cfb2600(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
[   19.811823] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   19.812032] CR2: 0000000020000080 CR3: 000000001def4000 CR4: 0000000000750ee0
[   19.812290] PKRU: 55555554
[   19.812393] Call Trace:
[   19.812486]  <TASK>
[   19.812569]  ? show_regs+0x6e/0x80
[   19.812704]  ? die_addr+0x45/0xb0
[   19.812837]  ? exc_general_protection+0x159/0x250
[   19.813020]  ? asm_exc_general_protection+0x2b/0x30
[   19.813205]  ? sysfs_remove_link_from_group+0x21/0x90
[   19.813395]  ? sysfs_remove_link_from_group+0x37/0x90
[   19.813585]  ? sysfs_remove_link_from_group+0x21/0x90
[   19.813775]  iommu_device_unlink+0x85/0xd0
[   19.813932]  iommu_deinit_device+0x11f/0x4c0
[   19.814097]  __iommu_group_remove_device+0x26b/0x300
[   19.814286]  iommu_group_remove_device+0x8a/0xb0
[   19.814462]  iommufd_test+0x1f1a/0x2d10
[   19.814607]  ? __pfx_lock_release+0x10/0x10
[   19.814768]  ? __pfx_lock_acquire+0x10/0x10
[   19.814929]  ? __pfx_iommufd_test+0x10/0x10
[   19.815088]  ? __sanitizer_cov_trace_const_cmp8+0x1c/0x30
[   19.815290]  iommufd_fops_ioctl+0x377/0x510
[   19.815450]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   19.815628]  ? trace_hardirqs_on+0x26/0x120
[   19.815789]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   19.816021]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   19.816206]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   19.816407]  ? security_file_ioctl+0x9d/0xd0
[   19.816572]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   19.816750]  __x64_sys_ioctl+0x1b9/0x230
[   19.816899]  do_syscall_64+0x3c/0x90
[   19.817036]  entry_SYSCALL_64_after_hwframe+0x6e/0xd8
[   19.817223] RIP: 0033:0x7fb83cc3ee5d
[   19.817359] Code: ff c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d 93 af 1b 00 f7 d8 64 89 01 48
[   19.818014] RSP: 002b:00007fffe1fe90d8 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   19.818286] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007fb83cc3ee5d
[   19.818546] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   19.818814] RBP: 00007fffe1fe90f0 R08: 0000000000000800 R09: 0000000000000800
[   19.819096] R10: 0000000000000000 R11: 0000000000000213 R12: 00007fffe1fe9208
[   19.819352] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007fb83cff3000
[   19.819613]  </TASK>
[   19.819698] Modules linked in:
[   19.819916] ---[ end trace 0000000000000000 ]---
[   19.820088] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   19.820299] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   19.820952] RSP: 0018:ffff88802457fba8 EFLAGS: 00010206
[   19.821144] RAX: dffffc0000000000 RBX: ffff888014f9b000 RCX: 0000000000000000
[   19.821401] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   19.821657] RBP: ffff88802457fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   19.821914] R10: ffff88800aad88df R11: 0000000000000001 R12: 0000000000000000
[   19.822170] R13: ffffffff85cc0180 R14: ffff8880109b6ac0 R15: ffffffff87070ae0
[   19.822428] FS:  00007fb83cfb2600(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
[   19.822725] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   19.822972] CR2: 0000000020000080 CR3: 000000001def4000 CR4: 0000000000750ee0
[   19.823231] PKRU: 55555554
[   19.823586] ------------[ cut here ]------------
[   19.823754] WARNING: CPU: 1 PID: 884 at drivers/iommu/iommufd/main.c:258 iommufd_fops_release+0x2a3/0x300
[   19.824098] Modules linked in:
[   19.824214] CPU: 1 PID: 884 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   19.824526] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   19.824929] RIP: 0010:iommufd_fops_release+0x2a3/0x300
[   19.825120] Code: 45 d0 65 48 2b 04 25 28 00 00 00 75 54 48 81 c4 88 00 00 00 31 c0 5b 41 5c 41 5d 41 5e 41 5f 5d c3 cc cc cc cc e8 ad 4f 0a fe <0f> 0b eb a6 e8 74 23 67 fe e9 f6 fe ff ff 48 89 85 50 ff ff ff e8
[   19.825773] RSP: 0018:ffff888017547c00 EFLAGS: 00010293
[   19.825964] RAX: 0000000000000000 RBX: ffff88801248a308 RCX: 0000000000000000
[   19.826220] RDX: ffff8880138b4a00 RSI: ffffffff835563e3 RDI: ffffffff86702b48
[   19.826476] RBP: ffff888017547cb0 R08: 0000000000000000 R09: fffffbfff0eb2644
[   19.826740] R10: ffffffff87593227 R11: ffff888018aa9c00 R12: 0000000000000000
[   19.827011] R13: ffff88801941c698 R14: ffff888017547c48 R15: ffffffff83556140
[   19.827263] FS:  0000000000000000(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
[   19.827547] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   19.827752] CR2: 0000000020000080 CR3: 000000000687e000 CR4: 0000000000750ee0
[   19.828004] PKRU: 55555554
[   19.828105] Call Trace:
[   19.828197]  <TASK>
[   19.828278]  ? show_regs+0x6e/0x80
[   19.828409]  ? __warn+0xef/0x340
[   19.828533]  ? report_bug+0x25e/0x4b0
[   19.828672]  ? iommufd_fops_release+0x2a3/0x300
[   19.828840]  ? report_bug+0x2cb/0x4b0
[   19.828981]  ? handle_bug+0x46/0x90
[   19.829113]  ? exc_invalid_op+0x1d/0x50
[   19.829256]  ? asm_exc_invalid_op+0x1f/0x30
[   19.829410]  ? __pfx_iommufd_fops_release+0x10/0x10
[   19.829592]  ? iommufd_fops_release+0x2a3/0x300
[   19.829760]  ? iommufd_fops_release+0x2a3/0x300
[   19.829930]  ? __pfx_iommufd_fops_release+0x10/0x10
[   19.830109]  ? rcu_is_watching+0x19/0xc0
[   19.830257]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   19.830462]  ? __pfx_iommufd_fops_release+0x10/0x10
[   19.830649]  __fput+0x424/0xaf0
[   19.830775]  ____fput+0x1f/0x30
[   19.830897]  task_work_run+0x19d/0x2b0
[   19.831039]  ? __pfx_task_work_run+0x10/0x10
[   19.831198]  ? __sanitizer_cov_trace_const_cmp1+0x1e/0x30
[   19.831394]  ? switch_task_namespaces+0xa9/0xe0
[   19.831563]  do_exit+0xac9/0x2790
[   19.831689]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   19.831938]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   19.832118]  ? __pfx_do_exit+0x10/0x10
[   19.832258]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   19.832454]  ? security_file_ioctl+0x9d/0xd0
[   19.832616]  make_task_dead+0x182/0x3c0
[   19.832761]  rewind_stack_and_make_dead+0x17/0x20
[   19.832935] RIP: 0033:0x7fb83cc3ee5d
[   19.833068] Code: Unable to access opcode bytes at 0x7fb83cc3ee33.
[   19.833286] RSP: 002b:00007fffe1fe90d8 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   19.833554] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007fb83cc3ee5d
[   19.833805] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   19.834057] RBP: 00007fffe1fe90f0 R08: 0000000000000800 R09: 0000000000000800
[   19.834309] R10: 0000000000000000 R11: 0000000000000213 R12: 00007fffe1fe9208
[   19.834561] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007fb83cff3000
[   19.834830]  </TASK>
[   19.834914] irq event stamp: 0
[   19.835030] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   19.835254] hardirqs last disabled at (0): [<ffffffff8122f2d1>] copy_process+0x1c51/0x7140
[   19.835547] softirqs last  enabled at (0): [<ffffffff8122f312>] copy_process+0x1c92/0x7140
[   19.835838] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   19.836061] ---[ end trace 0000000000000000 ]---
[   19.838458] iommufd_mock iommufd_mock164: Adding to iommu group 164
[   19.838849] iommufd_mock iommufd_mock164: Removing from iommu group 164
[   19.839104] general protection fault, probably for non-canonical address 0xdffffc0000000006: 0000 [#165] PREEMPT SMP KASAN NOPTI
[   19.839506] KASAN: null-ptr-deref in range [0x0000000000000030-0x0000000000000037]
[   19.839773] CPU: 1 PID: 885 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   19.840080] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   19.840476] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   19.840684] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   19.841326] RSP: 0018:ffff88801724fba8 EFLAGS: 00010206
[   19.841515] RAX: dffffc0000000000 RBX: ffff88800eef0000 RCX: 0000000000000000
[   19.841766] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   19.842018] RBP: ffff88801724fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   19.842269] R10: ffff88800aad88df R11: 5f6466756d6d6f69 R12: 0000000000000000
[   19.842521] R13: ffffffff85cc0180 R14: ffff88801679a9e0 R15: ffffffff87070ae0
[   19.842801] FS:  00007efdbbdca600(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
[   19.843087] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   19.843294] CR2: 0000000020000080 CR3: 000000001def4000 CR4: 0000000000750ee0
[   19.843547] PKRU: 55555554
[   19.843648] Call Trace:
[   19.843740]  <TASK>
[   19.843821]  ? show_regs+0x6e/0x80
[   19.843953]  ? die_addr+0x45/0xb0
[   19.844084]  ? exc_general_protection+0x159/0x250
[   19.844263]  ? asm_exc_general_protection+0x2b/0x30
[   19.844445]  ? sysfs_remove_link_from_group+0x21/0x90
[   19.844632]  ? sysfs_remove_link_from_group+0x37/0x90
[   19.844818]  ? sysfs_remove_link_from_group+0x21/0x90
[   19.845004]  iommu_device_unlink+0x85/0xd0
[   19.845157]  iommu_deinit_device+0x11f/0x4c0
[   19.845319]  __iommu_group_remove_device+0x26b/0x300
[   19.845505]  iommu_group_remove_device+0x8a/0xb0
[   19.845677]  iommufd_test+0x1f1a/0x2d10
[   19.845820]  ? __pfx_lock_release+0x10/0x10
[   19.845977]  ? __pfx_lock_acquire+0x10/0x10
[   19.846135]  ? __pfx_iommufd_test+0x10/0x10
[   19.846291]  ? __sanitizer_cov_trace_const_cmp8+0x1c/0x30
[   19.846490]  iommufd_fops_ioctl+0x377/0x510
[   19.846648]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   19.846824]  ? trace_hardirqs_on+0x26/0x120
[   19.846982]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   19.847210]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   19.847393]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   19.847590]  ? security_file_ioctl+0x9d/0xd0
[   19.847752]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   19.847927]  __x64_sys_ioctl+0x1b9/0x230
[   19.848074]  do_syscall_64+0x3c/0x90
[   19.848209]  entry_SYSCALL_64_after_hwframe+0x6e/0xd8
[   19.848393] RIP: 0033:0x7efdbba3ee5d
[   19.848527] Code: ff c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d 93 af 1b 00 f7 d8 64 89 01 48
[   19.849170] RSP: 002b:00007ffd98f6abb8 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   19.849438] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007efdbba3ee5d
[   19.849690] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   19.849942] RBP: 00007ffd98f6abd0 R08: 0000000000000800 R09: 0000000000000800
[   19.850194] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffd98f6ace8
[   19.850445] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007efdbbe0b000
[   19.850703]  </TASK>
[   19.850790] Modules linked in:
[   19.850918] ---[ end trace 0000000000000000 ]---
[   19.851093] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   19.851299] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   19.851941] RSP: 0018:ffff88802457fba8 EFLAGS: 00010206
[   19.852133] RAX: dffffc0000000000 RBX: ffff888014f9b000 RCX: 0000000000000000
[   19.852384] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   19.852635] RBP: ffff88802457fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   19.852886] R10: ffff88800aad88df R11: 0000000000000001 R12: 0000000000000000
[   19.853137] R13: ffffffff85cc0180 R14: ffff8880109b6ac0 R15: ffffffff87070ae0
[   19.853388] FS:  00007efdbbdca600(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
[   19.853672] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   19.853877] CR2: 0000000020000080 CR3: 000000001def4000 CR4: 0000000000750ee0
[   19.854129] PKRU: 55555554
[   19.854487] ------------[ cut here ]------------
[   19.854701] WARNING: CPU: 1 PID: 885 at drivers/iommu/iommufd/main.c:258 iommufd_fops_release+0x2a3/0x300
[   19.855044] Modules linked in:
[   19.855159] CPU: 1 PID: 885 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   19.855466] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   19.855861] RIP: 0010:iommufd_fops_release+0x2a3/0x300
[   19.856049] Code: 45 d0 65 48 2b 04 25 28 00 00 00 75 54 48 81 c4 88 00 00 00 31 c0 5b 41 5c 41 5d 41 5e 41 5f 5d c3 cc cc cc cc e8 ad 4f 0a fe <0f> 0b eb a6 e8 74 23 67 fe e9 f6 fe ff ff 48 89 85 50 ff ff ff e8
[   19.856691] RSP: 0018:ffff88801724fc00 EFLAGS: 00010293
[   19.856879] RAX: 0000000000000000 RBX: ffff88801248ae08 RCX: 0000000000000000
[   19.857131] RDX: ffff888011e82500 RSI: ffffffff835563e3 RDI: ffffffff86702b48
[   19.857383] RBP: ffff88801724fcb0 R08: 0000000000000000 R09: fffffbfff0eb2644
[   19.857634] R10: ffffffff87593227 R11: ffff88800fe12600 R12: 0000000000000000
[   19.857886] R13: ffff888013549318 R14: ffff88801724fc48 R15: ffffffff83556140
[   19.858138] FS:  0000000000000000(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
[   19.858422] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   19.858642] CR2: 0000000020000080 CR3: 000000000687e000 CR4: 0000000000750ee0
[   19.858898] PKRU: 55555554
[   19.859001] Call Trace:
[   19.859092]  <TASK>
[   19.859173]  ? show_regs+0x6e/0x80
[   19.859303]  ? __warn+0xef/0x340
[   19.859428]  ? report_bug+0x25e/0x4b0
[   19.859567]  ? iommufd_fops_release+0x2a3/0x300
[   19.859735]  ? report_bug+0x2cb/0x4b0
[   19.859875]  ? handle_bug+0x46/0x90
[   19.860007]  ? exc_invalid_op+0x1d/0x50
[   19.860151]  ? asm_exc_invalid_op+0x1f/0x30
[   19.860305]  ? __pfx_iommufd_fops_release+0x10/0x10
[   19.860486]  ? iommufd_fops_release+0x2a3/0x300
[   19.860654]  ? iommufd_fops_release+0x2a3/0x300
[   19.860824]  ? __pfx_iommufd_fops_release+0x10/0x10
[   19.861002]  ? rcu_is_watching+0x19/0xc0
[   19.861150]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   19.861348]  ? __pfx_iommufd_fops_release+0x10/0x10
[   19.861527]  __fput+0x424/0xaf0
[   19.861652]  ____fput+0x1f/0x30
[   19.861773]  task_work_run+0x19d/0x2b0
[   19.861915]  ? __pfx_task_work_run+0x10/0x10
[   19.862074]  ? __sanitizer_cov_trace_const_cmp1+0x1e/0x30
[   19.862271]  ? switch_task_namespaces+0xa9/0xe0
[   19.862440]  do_exit+0xac9/0x2790
[   19.862566]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   19.862802]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   19.862983]  ? __pfx_do_exit+0x10/0x10
[   19.863123]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   19.863319]  ? security_file_ioctl+0x9d/0xd0
[   19.863481]  make_task_dead+0x182/0x3c0
[   19.863626]  rewind_stack_and_make_dead+0x17/0x20
[   19.863800] RIP: 0033:0x7efdbba3ee5d
[   19.863932] Code: Unable to access opcode bytes at 0x7efdbba3ee33.
[   19.864150] RSP: 002b:00007ffd98f6abb8 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   19.864418] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007efdbba3ee5d
[   19.864669] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   19.864921] RBP: 00007ffd98f6abd0 R08: 0000000000000800 R09: 0000000000000800
[   19.865172] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffd98f6ace8
[   19.865424] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007efdbbe0b000
[   19.865680]  </TASK>
[   19.865763] irq event stamp: 0
[   19.865876] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   19.866099] hardirqs last disabled at (0): [<ffffffff8122f2d1>] copy_process+0x1c51/0x7140
[   19.866392] softirqs last  enabled at (0): [<ffffffff8122f312>] copy_process+0x1c92/0x7140
[   19.866691] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   19.866917] ---[ end trace 0000000000000000 ]---
[   19.869245] iommufd_mock iommufd_mock165: Adding to iommu group 165
[   19.869497] iommufd_mock iommufd_mock165: Removing from iommu group 165
[   19.869754] general protection fault, probably for non-canonical address 0xdffffc0000000006: 0000 [#166] PREEMPT SMP KASAN NOPTI
[   19.870164] KASAN: null-ptr-deref in range [0x0000000000000030-0x0000000000000037]
[   19.870435] CPU: 1 PID: 886 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   19.870752] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   19.871158] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   19.871371] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   19.872025] RSP: 0018:ffff8880166afba8 EFLAGS: 00010206
[   19.872217] RAX: dffffc0000000000 RBX: ffff88800eef6000 RCX: 0000000000000000
[   19.872474] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   19.872730] RBP: ffff8880166afbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   19.872987] R10: ffff88800aad88df R11: 5f6466756d6d6f69 R12: 0000000000000000
[   19.873244] R13: ffffffff85cc0180 R14: ffff88801679a780 R15: ffffffff87070ae0
[   19.873501] FS:  00007f8db3532600(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
[   19.873790] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   19.874000] CR2: 0000000020000080 CR3: 000000001def4000 CR4: 0000000000750ee0
[   19.874257] PKRU: 55555554
[   19.874360] Call Trace:
[   19.874453]  <TASK>
[   19.874536]  ? show_regs+0x6e/0x80
[   19.874671]  ? die_addr+0x45/0xb0
[   19.874807]  ? exc_general_protection+0x159/0x250
[   19.874989]  ? asm_exc_general_protection+0x2b/0x30
[   19.875175]  ? sysfs_remove_link_from_group+0x21/0x90
[   19.875365]  ? sysfs_remove_link_from_group+0x37/0x90
[   19.875554]  ? sysfs_remove_link_from_group+0x21/0x90
[   19.875744]  iommu_device_unlink+0x85/0xd0
[   19.875900]  iommu_deinit_device+0x11f/0x4c0
[   19.876065]  __iommu_group_remove_device+0x26b/0x300
[   19.876254]  iommu_group_remove_device+0x8a/0xb0
[   19.876429]  iommufd_test+0x1f1a/0x2d10
[   19.876575]  ? __pfx_lock_release+0x10/0x10
[   19.876734]  ? __pfx_lock_acquire+0x10/0x10
[   19.876894]  ? __pfx_iommufd_test+0x10/0x10
[   19.877053]  ? __sanitizer_cov_trace_const_cmp8+0x1c/0x30
[   19.877256]  iommufd_fops_ioctl+0x377/0x510
[   19.877417]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   19.877595]  ? trace_hardirqs_on+0x26/0x120
[   19.877756]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   19.877988]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   19.878174]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   19.878375]  ? security_file_ioctl+0x9d/0xd0
[   19.878540]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   19.878719]  __x64_sys_ioctl+0x1b9/0x230
[   19.878872]  do_syscall_64+0x3c/0x90
[   19.879008]  entry_SYSCALL_64_after_hwframe+0x6e/0xd8
[   19.879196] RIP: 0033:0x7f8db323ee5d
[   19.879332] Code: ff c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d 93 af 1b 00 f7 d8 64 89 01 48
[   19.879986] RSP: 002b:00007ffe5d496da8 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   19.880259] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f8db323ee5d
[   19.880516] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   19.880773] RBP: 00007ffe5d496dc0 R08: 0000000000000800 R09: 0000000000000800
[   19.881029] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffe5d496ed8
[   19.881285] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f8db3573000
[   19.881547]  </TASK>
[   19.881632] Modules linked in:
[   19.881849] ---[ end trace 0000000000000000 ]---
[   19.882021] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   19.882231] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   19.882894] RSP: 0018:ffff88802457fba8 EFLAGS: 00010206
[   19.883086] RAX: dffffc0000000000 RBX: ffff888014f9b000 RCX: 0000000000000000
[   19.883344] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   19.883600] RBP: ffff88802457fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   19.883856] R10: ffff88800aad88df R11: 0000000000000001 R12: 0000000000000000
[   19.884113] R13: ffffffff85cc0180 R14: ffff8880109b6ac0 R15: ffffffff87070ae0
[   19.884369] FS:  00007f8db3532600(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
[   19.884659] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   19.884868] CR2: 0000000020000080 CR3: 000000001def4000 CR4: 0000000000750ee0
[   19.885126] PKRU: 55555554
[   19.885476] ------------[ cut here ]------------
[   19.885646] WARNING: CPU: 1 PID: 886 at drivers/iommu/iommufd/main.c:258 iommufd_fops_release+0x2a3/0x300
[   19.885990] Modules linked in:
[   19.886106] CPU: 1 PID: 886 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   19.886417] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   19.886848] RIP: 0010:iommufd_fops_release+0x2a3/0x300
[   19.887052] Code: 45 d0 65 48 2b 04 25 28 00 00 00 75 54 48 81 c4 88 00 00 00 31 c0 5b 41 5c 41 5d 41 5e 41 5f 5d c3 cc cc cc cc e8 ad 4f 0a fe <0f> 0b eb a6 e8 74 23 67 fe e9 f6 fe ff ff 48 89 85 50 ff ff ff e8
[   19.887706] RSP: 0018:ffff8880166afc00 EFLAGS: 00010293
[   19.887898] RAX: 0000000000000000 RBX: ffff88801248af08 RCX: 0000000000000000
[   19.888154] RDX: ffff888011e84a00 RSI: ffffffff835563e3 RDI: ffffffff86702b48
[   19.888409] RBP: ffff8880166afcb0 R08: 0000000000000000 R09: fffffbfff0eb2644
[   19.888666] R10: ffffffff87593227 R11: ffff888013419e00 R12: 0000000000000000
[   19.888922] R13: ffff888010ff3d18 R14: ffff8880166afc48 R15: ffffffff83556140
[   19.889178] FS:  0000000000000000(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
[   19.889467] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   19.889676] CR2: 0000000020000080 CR3: 000000000687e000 CR4: 0000000000750ee0
[   19.889933] PKRU: 55555554
[   19.890035] Call Trace:
[   19.890128]  <TASK>
[   19.890211]  ? show_regs+0x6e/0x80
[   19.890344]  ? __warn+0xef/0x340
[   19.890470]  ? report_bug+0x25e/0x4b0
[   19.890618]  ? iommufd_fops_release+0x2a3/0x300
[   19.890797]  ? report_bug+0x2cb/0x4b0
[   19.890942]  ? handle_bug+0x46/0x90
[   19.891076]  ? exc_invalid_op+0x1d/0x50
[   19.891222]  ? asm_exc_invalid_op+0x1f/0x30
[   19.891379]  ? __pfx_iommufd_fops_release+0x10/0x10
[   19.891563]  ? iommufd_fops_release+0x2a3/0x300
[   19.891735]  ? iommufd_fops_release+0x2a3/0x300
[   19.891908]  ? __pfx_iommufd_fops_release+0x10/0x10
[   19.892089]  ? rcu_is_watching+0x19/0xc0
[   19.892240]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   19.892440]  ? __pfx_iommufd_fops_release+0x10/0x10
[   19.892622]  __fput+0x424/0xaf0
[   19.892749]  ____fput+0x1f/0x30
[   19.892873]  task_work_run+0x19d/0x2b0
[   19.893017]  ? __pfx_task_work_run+0x10/0x10
[   19.893179]  ? __sanitizer_cov_trace_const_cmp1+0x1e/0x30
[   19.893378]  ? switch_task_namespaces+0xa9/0xe0
[   19.893551]  do_exit+0xac9/0x2790
[   19.893680]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   19.893909]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   19.894093]  ? __pfx_do_exit+0x10/0x10
[   19.894235]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   19.894435]  ? security_file_ioctl+0x9d/0xd0
[   19.894605]  make_task_dead+0x182/0x3c0
[   19.894755]  rewind_stack_and_make_dead+0x17/0x20
[   19.894933] RIP: 0033:0x7f8db323ee5d
[   19.895068] Code: Unable to access opcode bytes at 0x7f8db323ee33.
[   19.895290] RSP: 002b:00007ffe5d496da8 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   19.895563] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f8db323ee5d
[   19.895818] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   19.896074] RBP: 00007ffe5d496dc0 R08: 0000000000000800 R09: 0000000000000800
[   19.896330] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffe5d496ed8
[   19.896585] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f8db3573000
[   19.896847]  </TASK>
[   19.896932] irq event stamp: 0
[   19.897047] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   19.897274] hardirqs last disabled at (0): [<ffffffff8122f2d1>] copy_process+0x1c51/0x7140
[   19.897571] softirqs last  enabled at (0): [<ffffffff8122f312>] copy_process+0x1c92/0x7140
[   19.897868] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   19.898094] ---[ end trace 0000000000000000 ]---
[   19.900611] iommufd_mock iommufd_mock166: Adding to iommu group 166
[   19.900866] iommufd_mock iommufd_mock166: Removing from iommu group 166
[   19.901120] general protection fault, probably for non-canonical address 0xdffffc0000000006: 0000 [#167] PREEMPT SMP KASAN NOPTI
[   19.901525] KASAN: null-ptr-deref in range [0x0000000000000030-0x0000000000000037]
[   19.901793] CPU: 0 PID: 887 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   19.902101] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   19.902499] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   19.902709] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   19.903361] RSP: 0018:ffff888010377ba8 EFLAGS: 00010206
[   19.903551] RAX: dffffc0000000000 RBX: ffff88800bec6000 RCX: 0000000000000000
[   19.903804] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   19.904057] RBP: ffff888010377bc0 R08: 0000000000000001 R09: ffffed100155b11b
[   19.904311] R10: ffff88800aad88df R11: 5f6466756d6d6f69 R12: 0000000000000000
[   19.904564] R13: ffffffff85cc0180 R14: ffff888024c35780 R15: ffffffff87070ae0
[   19.904817] FS:  00007f0218bbd600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   19.905103] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   19.905310] CR2: 0000000020000080 CR3: 00000000132ea000 CR4: 0000000000750ef0
[   19.905564] PKRU: 55555554
[   19.905665] Call Trace:
[   19.905757]  <TASK>
[   19.905839]  ? show_regs+0x6e/0x80
[   19.905973]  ? die_addr+0x45/0xb0
[   19.906103]  ? exc_general_protection+0x159/0x250
[   19.906284]  ? asm_exc_general_protection+0x2b/0x30
[   19.906467]  ? sysfs_remove_link_from_group+0x21/0x90
[   19.906654]  ? sysfs_remove_link_from_group+0x37/0x90
[   19.906844]  ? sysfs_remove_link_from_group+0x21/0x90
[   19.907032]  iommu_device_unlink+0x85/0xd0
[   19.907186]  iommu_deinit_device+0x11f/0x4c0
[   19.907349]  __iommu_group_remove_device+0x26b/0x300
[   19.907535]  iommu_group_remove_device+0x8a/0xb0
[   19.907709]  iommufd_test+0x1f1a/0x2d10
[   19.907853]  ? __pfx_lock_release+0x10/0x10
[   19.908011]  ? __pfx_lock_acquire+0x10/0x10
[   19.908169]  ? __pfx_iommufd_test+0x10/0x10
[   19.908327]  ? __sanitizer_cov_trace_const_cmp8+0x1c/0x30
[   19.908527]  iommufd_fops_ioctl+0x377/0x510
[   19.908685]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   19.908861]  ? trace_hardirqs_on+0x26/0x120
[   19.909020]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   19.909248]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   19.909431]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   19.909630]  ? security_file_ioctl+0x9d/0xd0
[   19.909793]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   19.909969]  __x64_sys_ioctl+0x1b9/0x230
[   19.910116]  do_syscall_64+0x3c/0x90
[   19.910251]  entry_SYSCALL_64_after_hwframe+0x6e/0xd8
[   19.910437] RIP: 0033:0x7f021883ee5d
[   19.910572] Code: ff c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d 93 af 1b 00 f7 d8 64 89 01 48
[   19.911220] RSP: 002b:00007ffc2f71aec8 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   19.911490] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f021883ee5d
[   19.911742] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   19.911995] RBP: 00007ffc2f71aee0 R08: 0000000000000800 R09: 0000000000000800
[   19.912247] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffc2f71aff8
[   19.912500] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f0218bfe000
[   19.912758]  </TASK>
[   19.912841] Modules linked in:
[   19.913108] ---[ end trace 0000000000000000 ]---
[   19.913278] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   19.913487] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   19.914132] RSP: 0018:ffff88802457fba8 EFLAGS: 00010206
[   19.914321] RAX: dffffc0000000000 RBX: ffff888014f9b000 RCX: 0000000000000000
[   19.914596] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   19.914854] RBP: ffff88802457fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   19.915106] R10: ffff88800aad88df R11: 0000000000000001 R12: 0000000000000000
[   19.915359] R13: ffffffff85cc0180 R14: ffff8880109b6ac0 R15: ffffffff87070ae0
[   19.915611] FS:  00007f0218bbd600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   19.915896] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   19.916103] CR2: 0000000020000080 CR3: 00000000132ea000 CR4: 0000000000750ef0
[   19.916356] PKRU: 55555554
[   19.916775] ------------[ cut here ]------------
[   19.916945] WARNING: CPU: 0 PID: 887 at drivers/iommu/iommufd/main.c:258 iommufd_fops_release+0x2a3/0x300
[   19.917286] Modules linked in:
[   19.917402] CPU: 0 PID: 887 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   19.917710] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   19.918108] RIP: 0010:iommufd_fops_release+0x2a3/0x300
[   19.918296] Code: 45 d0 65 48 2b 04 25 28 00 00 00 75 54 48 81 c4 88 00 00 00 31 c0 5b 41 5c 41 5d 41 5e 41 5f 5d c3 cc cc cc cc e8 ad 4f 0a fe <0f> 0b eb a6 e8 74 23 67 fe e9 f6 fe ff ff 48 89 85 50 ff ff ff e8
[   19.918979] RSP: 0018:ffff888010377c00 EFLAGS: 00010293
[   19.919171] RAX: 0000000000000000 RBX: ffff88800fe06208 RCX: 0000000000000000
[   19.919424] RDX: ffff888012c30000 RSI: ffffffff835563e3 RDI: ffffffff86702b40
[   19.919676] RBP: ffff888010377cb0 R08: 0000000000000000 R09: fffffbfff0eb2644
[   19.919929] R10: ffffffff87593227 R11: ffff8880134e7c00 R12: 0000000000000000
[   19.920182] R13: ffff88801123b318 R14: ffff888010377c48 R15: ffffffff83556140
[   19.920434] FS:  0000000000000000(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   19.920719] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   19.920926] CR2: 0000000020000080 CR3: 000000000687e000 CR4: 0000000000750ef0
[   19.921179] PKRU: 55555554
[   19.921281] Call Trace:
[   19.921373]  <TASK>
[   19.921454]  ? show_regs+0x6e/0x80
[   19.921585]  ? __warn+0xef/0x340
[   19.921709]  ? report_bug+0x25e/0x4b0
[   19.921849]  ? iommufd_fops_release+0x2a3/0x300
[   19.922017]  ? report_bug+0x2cb/0x4b0
[   19.922159]  ? handle_bug+0x46/0x90
[   19.922291]  ? exc_invalid_op+0x1d/0x50
[   19.922435]  ? asm_exc_invalid_op+0x1f/0x30
[   19.922595]  ? __pfx_iommufd_fops_release+0x10/0x10
[   19.922784]  ? iommufd_fops_release+0x2a3/0x300
[   19.922970]  ? iommufd_fops_release+0x2a3/0x300
[   19.923140]  ? __pfx_iommufd_fops_release+0x10/0x10
[   19.923319]  ? rcu_is_watching+0x19/0xc0
[   19.923467]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   19.923665]  ? __pfx_iommufd_fops_release+0x10/0x10
[   19.923844]  __fput+0x424/0xaf0
[   19.923969]  ____fput+0x1f/0x30
[   19.924091]  task_work_run+0x19d/0x2b0
[   19.924233]  ? __pfx_task_work_run+0x10/0x10
[   19.924393]  ? __sanitizer_cov_trace_const_cmp1+0x1e/0x30
[   19.924589]  ? switch_task_namespaces+0xa9/0xe0
[   19.924759]  do_exit+0xac9/0x2790
[   19.924886]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   19.925113]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   19.925295]  ? __pfx_do_exit+0x10/0x10
[   19.925435]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   19.925632]  ? security_file_ioctl+0x9d/0xd0
[   19.925794]  make_task_dead+0x182/0x3c0
[   19.925939]  rewind_stack_and_make_dead+0x17/0x20
[   19.926113] RIP: 0033:0x7f021883ee5d
[   19.926247] Code: Unable to access opcode bytes at 0x7f021883ee33.
[   19.926465] RSP: 002b:00007ffc2f71aec8 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   19.926741] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f021883ee5d
[   19.926998] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   19.927250] RBP: 00007ffc2f71aee0 R08: 0000000000000800 R09: 0000000000000800
[   19.927503] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffc2f71aff8
[   19.927754] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f0218bfe000
[   19.928011]  </TASK>
[   19.928095] irq event stamp: 0
[   19.928208] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   19.928432] hardirqs last disabled at (0): [<ffffffff8122f2d1>] copy_process+0x1c51/0x7140
[   19.928724] softirqs last  enabled at (0): [<ffffffff8122f312>] copy_process+0x1c92/0x7140
[   19.929017] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   19.929239] ---[ end trace 0000000000000000 ]---
[   19.931762] iommufd_mock iommufd_mock167: Adding to iommu group 167
[   19.932018] iommufd_mock iommufd_mock167: Removing from iommu group 167
[   19.932274] general protection fault, probably for non-canonical address 0xdffffc0000000006: 0000 [#168] PREEMPT SMP KASAN NOPTI
[   19.932679] KASAN: null-ptr-deref in range [0x0000000000000030-0x0000000000000037]
[   19.932947] CPU: 0 PID: 888 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   19.933255] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   19.933654] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   19.933863] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   19.934510] RSP: 0018:ffff888011c6fba8 EFLAGS: 00010206
[   19.934701] RAX: dffffc0000000000 RBX: ffff8880158e4000 RCX: 0000000000000000
[   19.934961] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   19.935214] RBP: ffff888011c6fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   19.935467] R10: ffff88800aad88df R11: 5f6466756d6d6f69 R12: 0000000000000000
[   19.935721] R13: ffffffff85cc0180 R14: ffff888024c35ae0 R15: ffffffff87070ae0
[   19.935975] FS:  00007f2ac16c1600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   19.936261] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   19.936468] CR2: 0000000020000080 CR3: 00000000132ea000 CR4: 0000000000750ef0
[   19.936723] PKRU: 55555554
[   19.936824] Call Trace:
[   19.936917]  <TASK>
[   19.936998]  ? show_regs+0x6e/0x80
[   19.937131]  ? die_addr+0x45/0xb0
[   19.937262]  ? exc_general_protection+0x159/0x250
[   19.937443]  ? asm_exc_general_protection+0x2b/0x30
[   19.937626]  ? sysfs_remove_link_from_group+0x21/0x90
[   19.937814]  ? sysfs_remove_link_from_group+0x37/0x90
[   19.938001]  ? sysfs_remove_link_from_group+0x21/0x90
[   19.938189]  iommu_device_unlink+0x85/0xd0
[   19.938343]  iommu_deinit_device+0x11f/0x4c0
[   19.938505]  __iommu_group_remove_device+0x26b/0x300
[   19.938695]  iommu_group_remove_device+0x8a/0xb0
[   19.938875]  iommufd_test+0x1f1a/0x2d10
[   19.939018]  ? __pfx_lock_release+0x10/0x10
[   19.939175]  ? __pfx_lock_acquire+0x10/0x10
[   19.939333]  ? __pfx_iommufd_test+0x10/0x10
[   19.939490]  ? __sanitizer_cov_trace_const_cmp8+0x1c/0x30
[   19.939691]  iommufd_fops_ioctl+0x377/0x510
[   19.939849]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   19.940024]  ? trace_hardirqs_on+0x26/0x120
[   19.940183]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   19.940411]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   19.940594]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   19.940793]  ? security_file_ioctl+0x9d/0xd0
[   19.940955]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   19.941131]  __x64_sys_ioctl+0x1b9/0x230
[   19.941278]  do_syscall_64+0x3c/0x90
[   19.941414]  entry_SYSCALL_64_after_hwframe+0x6e/0xd8
[   19.941599] RIP: 0033:0x7f2ac143ee5d
[   19.941733] Code: ff c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d 93 af 1b 00 f7 d8 64 89 01 48
[   19.942378] RSP: 002b:00007ffe243a08a8 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   19.942649] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f2ac143ee5d
[   19.942908] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   19.943163] RBP: 00007ffe243a08c0 R08: 0000000000000800 R09: 0000000000000800
[   19.943418] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffe243a09d8
[   19.943671] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f2ac1702000
[   19.943929]  </TASK>
[   19.944012] Modules linked in:
[   19.944274] ---[ end trace 0000000000000000 ]---
[   19.944443] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   19.944651] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   19.945298] RSP: 0018:ffff88802457fba8 EFLAGS: 00010206
[   19.945488] RAX: dffffc0000000000 RBX: ffff888014f9b000 RCX: 0000000000000000
[   19.945742] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   19.945995] RBP: ffff88802457fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   19.946248] R10: ffff88800aad88df R11: 0000000000000001 R12: 0000000000000000
[   19.946501] R13: ffffffff85cc0180 R14: ffff8880109b6ac0 R15: ffffffff87070ae0
[   19.946808] FS:  00007f2ac16c1600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   19.947097] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   19.947304] CR2: 0000000020000080 CR3: 00000000132ea000 CR4: 0000000000750ef0
[   19.947559] PKRU: 55555554
[   19.948004] ------------[ cut here ]------------
[   19.948173] WARNING: CPU: 0 PID: 888 at drivers/iommu/iommufd/main.c:258 iommufd_fops_release+0x2a3/0x300
[   19.948514] Modules linked in:
[   19.948629] CPU: 0 PID: 888 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   19.948936] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   19.949335] RIP: 0010:iommufd_fops_release+0x2a3/0x300
[   19.949523] Code: 45 d0 65 48 2b 04 25 28 00 00 00 75 54 48 81 c4 88 00 00 00 31 c0 5b 41 5c 41 5d 41 5e 41 5f 5d c3 cc cc cc cc e8 ad 4f 0a fe <0f> 0b eb a6 e8 74 23 67 fe e9 f6 fe ff ff 48 89 85 50 ff ff ff e8
[   19.950169] RSP: 0018:ffff888011c6fc00 EFLAGS: 00010293
[   19.950358] RAX: 0000000000000000 RBX: ffff88800fe06908 RCX: 0000000000000000
[   19.950641] RDX: ffff88800bb28000 RSI: ffffffff835563e3 RDI: ffffffff86702b40
[   19.950900] RBP: ffff888011c6fcb0 R08: 0000000000000000 R09: fffffbfff0eb2644
[   19.951154] R10: ffffffff87593227 R11: ffff8880111f5200 R12: 0000000000000000
[   19.951407] R13: ffff8880196bdd18 R14: ffff888011c6fc48 R15: ffffffff83556140
[   19.951660] FS:  0000000000000000(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   19.951945] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   19.952169] CR2: 0000000020000080 CR3: 000000000687e000 CR4: 0000000000750ef0
[   19.952424] PKRU: 55555554
[   19.952526] Call Trace:
[   19.952617]  <TASK>
[   19.952699]  ? show_regs+0x6e/0x80
[   19.952830]  ? __warn+0xef/0x340
[   19.952954]  ? report_bug+0x25e/0x4b0
[   19.953094]  ? iommufd_fops_release+0x2a3/0x300
[   19.953263]  ? report_bug+0x2cb/0x4b0
[   19.953404]  ? handle_bug+0x46/0x90
[   19.953537]  ? exc_invalid_op+0x1d/0x50
[   19.953681]  ? asm_exc_invalid_op+0x1f/0x30
[   19.953835]  ? __pfx_iommufd_fops_release+0x10/0x10
[   19.954018]  ? iommufd_fops_release+0x2a3/0x300
[   19.954186]  ? iommufd_fops_release+0x2a3/0x300
[   19.954357]  ? __pfx_iommufd_fops_release+0x10/0x10
[   19.954537]  ? rcu_is_watching+0x19/0xc0
[   19.954692]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   19.954892]  ? __pfx_iommufd_fops_release+0x10/0x10
[   19.955074]  __fput+0x424/0xaf0
[   19.955199]  ____fput+0x1f/0x30
[   19.955320]  task_work_run+0x19d/0x2b0
[   19.955462]  ? __pfx_task_work_run+0x10/0x10
[   19.955622]  ? __sanitizer_cov_trace_const_cmp1+0x1e/0x30
[   19.955819]  ? switch_task_namespaces+0xa9/0xe0
[   19.955989]  do_exit+0xac9/0x2790
[   19.956116]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   19.956343]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   19.956525]  ? __pfx_do_exit+0x10/0x10
[   19.956666]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   19.956863]  ? security_file_ioctl+0x9d/0xd0
[   19.957025]  make_task_dead+0x182/0x3c0
[   19.957170]  rewind_stack_and_make_dead+0x17/0x20
[   19.957345] RIP: 0033:0x7f2ac143ee5d
[   19.957479] Code: Unable to access opcode bytes at 0x7f2ac143ee33.
[   19.957698] RSP: 002b:00007ffe243a08a8 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   19.957967] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f2ac143ee5d
[   19.958220] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   19.958472] RBP: 00007ffe243a08c0 R08: 0000000000000800 R09: 0000000000000800
[   19.958731] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffe243a09d8
[   19.958987] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f2ac1702000
[   19.959262]  </TASK>
[   19.959347] irq event stamp: 0
[   19.959461] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   19.959685] hardirqs last disabled at (0): [<ffffffff8122f2d1>] copy_process+0x1c51/0x7140
[   19.959978] softirqs last  enabled at (0): [<ffffffff8122f312>] copy_process+0x1c92/0x7140
[   19.960271] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   19.960495] ---[ end trace 0000000000000000 ]---
[   19.963064] iommufd_mock iommufd_mock168: Adding to iommu group 168
[   19.963316] iommufd_mock iommufd_mock168: Removing from iommu group 168
[   19.963569] general protection fault, probably for non-canonical address 0xdffffc0000000006: 0000 [#169] PREEMPT SMP KASAN NOPTI
[   19.963973] KASAN: null-ptr-deref in range [0x0000000000000030-0x0000000000000037]
[   19.964241] CPU: 0 PID: 889 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   19.964549] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   19.964947] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   19.965155] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   19.965800] RSP: 0018:ffff888014a47ba8 EFLAGS: 00010206
[   19.965990] RAX: dffffc0000000000 RBX: ffff8880158e1000 RCX: 0000000000000000
[   19.966243] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   19.966496] RBP: ffff888014a47bc0 R08: 0000000000000001 R09: ffffed100155b11b
[   19.966759] R10: ffff88800aad88df R11: 5f6466756d6d6f69 R12: 0000000000000000
[   19.967012] R13: ffffffff85cc0180 R14: ffff88800b9445c0 R15: ffffffff87070ae0
[   19.967264] FS:  00007ff7902e0600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   19.967549] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   19.967756] CR2: 0000000020000080 CR3: 00000000132ea000 CR4: 0000000000750ef0
[   19.968009] PKRU: 55555554
[   19.968111] Call Trace:
[   19.968203]  <TASK>
[   19.968284]  ? show_regs+0x6e/0x80
[   19.968417]  ? die_addr+0x45/0xb0
[   19.968548]  ? exc_general_protection+0x159/0x250
[   19.968727]  ? asm_exc_general_protection+0x2b/0x30
[   19.968910]  ? sysfs_remove_link_from_group+0x21/0x90
[   19.969097]  ? sysfs_remove_link_from_group+0x37/0x90
[   19.969284]  ? sysfs_remove_link_from_group+0x21/0x90
[   19.969471]  iommu_device_unlink+0x85/0xd0
[   19.969624]  iommu_deinit_device+0x11f/0x4c0
[   19.969786]  __iommu_group_remove_device+0x26b/0x300
[   19.969973]  iommu_group_remove_device+0x8a/0xb0
[   19.970146]  iommufd_test+0x1f1a/0x2d10
[   19.970289]  ? __pfx_lock_release+0x10/0x10
[   19.970446]  ? __pfx_lock_acquire+0x10/0x10
[   19.970604]  ? __pfx_iommufd_test+0x10/0x10
[   19.970762]  ? __sanitizer_cov_trace_const_cmp8+0x1c/0x30
[   19.970962]  iommufd_fops_ioctl+0x377/0x510
[   19.971120]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   19.971295]  ? trace_hardirqs_on+0x26/0x120
[   19.971454]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   19.971682]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   19.971865]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   19.972063]  ? security_file_ioctl+0x9d/0xd0
[   19.972225]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   19.972400]  __x64_sys_ioctl+0x1b9/0x230
[   19.972548]  do_syscall_64+0x3c/0x90
[   19.972682]  entry_SYSCALL_64_after_hwframe+0x6e/0xd8
[   19.972868] RIP: 0033:0x7ff79003ee5d
[   19.973002] Code: ff c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d 93 af 1b 00 f7 d8 64 89 01 48
[   19.973646] RSP: 002b:00007ffdfcff5a78 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   19.973915] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007ff79003ee5d
[   19.974168] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   19.974420] RBP: 00007ffdfcff5a90 R08: 0000000000000800 R09: 0000000000000800
[   19.974674] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffdfcff5ba8
[   19.974929] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007ff790321000
[   19.975186]  </TASK>
[   19.975270] Modules linked in:
[   19.975460] ---[ end trace 0000000000000000 ]---
[   19.975628] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   19.975836] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   19.976480] RSP: 0018:ffff88802457fba8 EFLAGS: 00010206
[   19.976669] RAX: dffffc0000000000 RBX: ffff888014f9b000 RCX: 0000000000000000
[   19.976921] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   19.977175] RBP: ffff88802457fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   19.977468] R10: ffff88800aad88df R11: 0000000000000001 R12: 0000000000000000
[   19.977802] R13: ffffffff85cc0180 R14: ffff8880109b6ac0 R15: ffffffff87070ae0
[   19.978080] FS:  00007ff7902e0600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   19.978415] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   19.978633] CR2: 0000000020000080 CR3: 00000000132ea000 CR4: 0000000000750ef0
[   19.978953] PKRU: 55555554
[   19.979317] ------------[ cut here ]------------
[   19.979540] WARNING: CPU: 0 PID: 889 at drivers/iommu/iommufd/main.c:258 iommufd_fops_release+0x2a3/0x300
[   19.979902] Modules linked in:
[   19.980059] CPU: 0 PID: 889 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   19.980373] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   19.980832] RIP: 0010:iommufd_fops_release+0x2a3/0x300
[   19.981034] Code: 45 d0 65 48 2b 04 25 28 00 00 00 75 54 48 81 c4 88 00 00 00 31 c0 5b 41 5c 41 5d 41 5e 41 5f 5d c3 cc cc cc cc e8 ad 4f 0a fe <0f> 0b eb a6 e8 74 23 67 fe e9 f6 fe ff ff 48 89 85 50 ff ff ff e8
[   19.981738] RSP: 0018:ffff888014a47c00 EFLAGS: 00010293
[   19.981984] RAX: 0000000000000000 RBX: ffff88800fe06d08 RCX: 0000000000000000
[   19.982242] RDX: ffff88800ececa00 RSI: ffffffff835563e3 RDI: ffffffff86702b40
[   19.982551] RBP: ffff888014a47cb0 R08: 0000000000000000 R09: fffffbfff0eb2644
[   19.982829] R10: ffffffff87593227 R11: ffff8880122a4600 R12: 0000000000000000
[   19.983141] R13: ffff8880196bc418 R14: ffff888014a47c48 R15: ffffffff83556140
[   19.983398] FS:  0000000000000000(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   19.983738] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   19.983949] CR2: 0000000020000080 CR3: 000000000687e000 CR4: 0000000000750ef0
[   19.984207] PKRU: 55555554
[   19.984310] Call Trace:
[   19.984414]  <TASK>
[   19.984539]  ? show_regs+0x6e/0x80
[   19.984673]  ? __warn+0xef/0x340
[   19.984800]  ? report_bug+0x25e/0x4b0
[   19.984947]  ? iommufd_fops_release+0x2a3/0x300
[   19.985160]  ? report_bug+0x2cb/0x4b0
[   19.985304]  ? handle_bug+0x46/0x90
[   19.985439]  ? exc_invalid_op+0x1d/0x50
[   19.985586]  ? asm_exc_invalid_op+0x1f/0x30
[   19.985787]  ? __pfx_iommufd_fops_release+0x10/0x10
[   19.985972]  ? iommufd_fops_release+0x2a3/0x300
[   19.986145]  ? iommufd_fops_release+0x2a3/0x300
[   19.986370]  ? __pfx_iommufd_fops_release+0x10/0x10
[   19.986553]  ? rcu_is_watching+0x19/0xc0
[   19.986772]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   19.986975]  ? __pfx_iommufd_fops_release+0x10/0x10
[   19.987159]  __fput+0x424/0xaf0
[   19.987357]  ____fput+0x1f/0x30
[   19.987482]  task_work_run+0x19d/0x2b0
[   19.987627]  ? __pfx_task_work_run+0x10/0x10
[   19.987796]  ? __sanitizer_cov_trace_const_cmp1+0x1e/0x30
[   19.988050]  ? switch_task_namespaces+0xa9/0xe0
[   19.988225]  do_exit+0xac9/0x2790
[   19.988355]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   19.988648]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   19.988833]  ? __pfx_do_exit+0x10/0x10
[   19.988990]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   19.989220]  ? security_file_ioctl+0x9d/0xd0
[   19.989386]  make_task_dead+0x182/0x3c0
[   19.989545]  rewind_stack_and_make_dead+0x17/0x20
[   19.989754] RIP: 0033:0x7ff79003ee5d
[   19.989890] Code: Unable to access opcode bytes at 0x7ff79003ee33.
[   19.990118] RSP: 002b:00007ffdfcff5a78 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   19.990428] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007ff79003ee5d
[   19.990703] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   19.991011] RBP: 00007ffdfcff5a90 R08: 0000000000000800 R09: 0000000000000800
[   19.991265] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffdfcff5ba8
[   19.991517] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007ff790321000
[   19.991836]  </TASK>
[   19.991921] irq event stamp: 0
[   19.992034] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   19.992280] hardirqs last disabled at (0): [<ffffffff8122f2d1>] copy_process+0x1c51/0x7140
[   19.992613] softirqs last  enabled at (0): [<ffffffff8122f312>] copy_process+0x1c92/0x7140
[   19.992968] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   19.993192] ---[ end trace 0000000000000000 ]---
[   19.996161] iommufd_mock iommufd_mock169: Adding to iommu group 169
[   19.996409] iommufd_mock iommufd_mock169: Removing from iommu group 169
[   19.996668] general protection fault, probably for non-canonical address 0xdffffc0000000006: 0000 [#170] PREEMPT SMP KASAN NOPTI
[   19.997079] KASAN: null-ptr-deref in range [0x0000000000000030-0x0000000000000037]
[   19.997402] CPU: 0 PID: 890 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   19.997715] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   19.998123] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   19.998337] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   19.999000] RSP: 0018:ffff888011c6fba8 EFLAGS: 00010206
[   19.999191] RAX: dffffc0000000000 RBX: ffff8880158e3000 RCX: 0000000000000000
[   19.999443] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   19.999695] RBP: ffff888011c6fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   19.999947] R10: ffff88800aad88df R11: 5f6466756d6d6f69 R12: 0000000000000000
[   20.000200] R13: ffffffff85cc0180 R14: ffff88801032eb60 R15: ffffffff87070ae0
[   20.000453] FS:  00007f67263fa600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   20.000737] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   20.000943] CR2: 0000000020000080 CR3: 000000000ef30000 CR4: 0000000000750ef0
[   20.001196] PKRU: 55555554
[   20.001298] Call Trace:
[   20.001389]  <TASK>
[   20.001471]  ? show_regs+0x6e/0x80
[   20.001604]  ? die_addr+0x45/0xb0
[   20.001734]  ? exc_general_protection+0x159/0x250
[   20.001914]  ? asm_exc_general_protection+0x2b/0x30
[   20.002097]  ? sysfs_remove_link_from_group+0x21/0x90
[   20.002284]  ? sysfs_remove_link_from_group+0x37/0x90
[   20.002471]  ? sysfs_remove_link_from_group+0x21/0x90
[   20.002662]  iommu_device_unlink+0x85/0xd0
[   20.002824]  iommu_deinit_device+0x11f/0x4c0
[   20.002987]  __iommu_group_remove_device+0x26b/0x300
[   20.003173]  iommu_group_remove_device+0x8a/0xb0
[   20.003346]  iommufd_test+0x1f1a/0x2d10
[   20.003489]  ? __pfx_lock_release+0x10/0x10
[   20.003645]  ? __pfx_lock_acquire+0x10/0x10
[   20.003803]  ? __pfx_iommufd_test+0x10/0x10
[   20.003959]  ? __sanitizer_cov_trace_const_cmp8+0x1c/0x30
[   20.004159]  iommufd_fops_ioctl+0x377/0x510
[   20.004317]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   20.004498]  ? trace_hardirqs_on+0x26/0x120
[   20.004656]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   20.004884]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   20.005067]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   20.005265]  ? security_file_ioctl+0x9d/0xd0
[   20.005428]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   20.005603]  __x64_sys_ioctl+0x1b9/0x230
[   20.005750]  do_syscall_64+0x3c/0x90
[   20.005885]  entry_SYSCALL_64_after_hwframe+0x6e/0xd8
[   20.006069] RIP: 0033:0x7f672603ee5d
[   20.006203] Code: ff c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d 93 af 1b 00 f7 d8 64 89 01 48
[   20.006869] RSP: 002b:00007ffd0bfaece8 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   20.007137] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f672603ee5d
[   20.007389] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   20.007641] RBP: 00007ffd0bfaed00 R08: 0000000000000800 R09: 0000000000000800
[   20.007893] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffd0bfaee18
[   20.008145] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f672643b000
[   20.008402]  </TASK>
[   20.008486] Modules linked in:
[   20.008689] ---[ end trace 0000000000000000 ]---
[   20.008862] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   20.009074] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   20.009730] RSP: 0018:ffff88802457fba8 EFLAGS: 00010206
[   20.009922] RAX: dffffc0000000000 RBX: ffff888014f9b000 RCX: 0000000000000000
[   20.010179] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   20.010513] RBP: ffff88802457fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   20.010787] R10: ffff88800aad88df R11: 0000000000000001 R12: 0000000000000000
[   20.011045] R13: ffffffff85cc0180 R14: ffff8880109b6ac0 R15: ffffffff87070ae0
[   20.011357] FS:  00007f67263fa600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   20.011646] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   20.011910] CR2: 0000000020000080 CR3: 000000000ef30000 CR4: 0000000000750ef0
[   20.012164] PKRU: 55555554
[   20.012597] ------------[ cut here ]------------
[   20.012765] WARNING: CPU: 0 PID: 890 at drivers/iommu/iommufd/main.c:258 iommufd_fops_release+0x2a3/0x300
[   20.013178] Modules linked in:
[   20.013294] CPU: 0 PID: 890 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   20.013671] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   20.014086] RIP: 0010:iommufd_fops_release+0x2a3/0x300
[   20.014322] Code: 45 d0 65 48 2b 04 25 28 00 00 00 75 54 48 81 c4 88 00 00 00 31 c0 5b 41 5c 41 5d 41 5e 41 5f 5d c3 cc cc cc cc e8 ad 4f 0a fe <0f> 0b eb a6 e8 74 23 67 fe e9 f6 fe ff ff 48 89 85 50 ff ff ff e8
[   20.015058] RSP: 0018:ffff888011c6fc00 EFLAGS: 00010293
[   20.015252] RAX: 0000000000000000 RBX: ffff88800fe06108 RCX: 0000000000000000
[   20.015573] RDX: ffff888012c34a00 RSI: ffffffff835563e3 RDI: ffffffff86702b40
[   20.015826] RBP: ffff888011c6fcb0 R08: 0000000000000000 R09: fffffbfff0eb2644
[   20.016099] R10: ffffffff87593227 R11: ffff888013168400 R12: 0000000000000000
[   20.016388] R13: ffff888011a90698 R14: ffff888011c6fc48 R15: ffffffff83556140
[   20.016670] FS:  0000000000000000(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   20.016995] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   20.017269] CR2: 0000000020000080 CR3: 000000000687e000 CR4: 0000000000750ef0
[   20.017528] PKRU: 55555554
[   20.017631] Call Trace:
[   20.017732]  <TASK>
[   20.017872]  ? show_regs+0x6e/0x80
[   20.018006]  ? __warn+0xef/0x340
[   20.018133]  ? report_bug+0x25e/0x4b0
[   20.018283]  ? iommufd_fops_release+0x2a3/0x300
[   20.018508]  ? report_bug+0x2cb/0x4b0
[   20.018661]  ? handle_bug+0x46/0x90
[   20.018801]  ? exc_invalid_op+0x1d/0x50
[   20.018947]  ? asm_exc_invalid_op+0x1f/0x30
[   20.019104]  ? __pfx_iommufd_fops_release+0x10/0x10
[   20.019354]  ? iommufd_fops_release+0x2a3/0x300
[   20.019526]  ? iommufd_fops_release+0x2a3/0x300
[   20.019699]  ? __pfx_iommufd_fops_release+0x10/0x10
[   20.019939]  ? rcu_is_watching+0x19/0xc0
[   20.020091]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   20.020292]  ? __pfx_iommufd_fops_release+0x10/0x10
[   20.020533]  __fput+0x424/0xaf0
[   20.020662]  ____fput+0x1f/0x30
[   20.020785]  task_work_run+0x19d/0x2b0
[   20.020937]  ? __pfx_task_work_run+0x10/0x10
[   20.021147]  ? __sanitizer_cov_trace_const_cmp1+0x1e/0x30
[   20.021348]  ? switch_task_namespaces+0xa9/0xe0
[   20.021585]  do_exit+0xac9/0x2790
[   20.021715]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   20.021945]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   20.022191]  ? __pfx_do_exit+0x10/0x10
[   20.022334]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   20.022534]  ? security_file_ioctl+0x9d/0xd0
[   20.022771]  make_task_dead+0x182/0x3c0
[   20.022920]  rewind_stack_and_make_dead+0x17/0x20
[   20.023098] RIP: 0033:0x7f672603ee5d
[   20.023234] Code: Unable to access opcode bytes at 0x7f672603ee33.
[   20.023456] RSP: 002b:00007ffd0bfaece8 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   20.023797] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f672603ee5d
[   20.024054] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   20.024376] RBP: 00007ffd0bfaed00 R08: 0000000000000800 R09: 0000000000000800
[   20.024633] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffd0bfaee18
[   20.024948] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f672643b000
[   20.025211]  </TASK>
[   20.025302] irq event stamp: 0
[   20.025472] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   20.025700] hardirqs last disabled at (0): [<ffffffff8122f2d1>] copy_process+0x1c51/0x7140
[   20.026062] softirqs last  enabled at (0): [<ffffffff8122f312>] copy_process+0x1c92/0x7140
[   20.026361] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   20.026613] ---[ end trace 0000000000000000 ]---
[   20.029513] iommufd_mock iommufd_mock170: Adding to iommu group 170
[   20.029762] iommufd_mock iommufd_mock170: Removing from iommu group 170
[   20.030022] general protection fault, probably for non-canonical address 0xdffffc0000000006: 0000 [#171] PREEMPT SMP KASAN NOPTI
[   20.030483] KASAN: null-ptr-deref in range [0x0000000000000030-0x0000000000000037]
[   20.030762] CPU: 0 PID: 891 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   20.031078] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   20.031487] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   20.031702] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   20.032373] RSP: 0018:ffff888010377ba8 EFLAGS: 00010206
[   20.032568] RAX: dffffc0000000000 RBX: ffff8880158e2000 RCX: 0000000000000000
[   20.032828] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   20.033087] RBP: ffff888010377bc0 R08: 0000000000000001 R09: ffffed100155b11b
[   20.033342] R10: ffff88800aad88df R11: 5f6466756d6d6f69 R12: 0000000000000000
[   20.033596] R13: ffffffff85cc0180 R14: ffff888013971fc0 R15: ffffffff87070ae0
[   20.033851] FS:  00007feb4d6f7600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   20.034138] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   20.034346] CR2: 0000000020000080 CR3: 00000000132ea000 CR4: 0000000000750ef0
[   20.034610] PKRU: 55555554
[   20.034714] Call Trace:
[   20.034814]  <TASK>
[   20.034896]  ? show_regs+0x6e/0x80
[   20.035030]  ? die_addr+0x45/0xb0
[   20.035161]  ? exc_general_protection+0x159/0x250
[   20.035342]  ? asm_exc_general_protection+0x2b/0x30
[   20.035526]  ? sysfs_remove_link_from_group+0x21/0x90
[   20.035714]  ? sysfs_remove_link_from_group+0x37/0x90
[   20.035902]  ? sysfs_remove_link_from_group+0x21/0x90
[   20.036090]  iommu_device_unlink+0x85/0xd0
[   20.036244]  iommu_deinit_device+0x11f/0x4c0
[   20.036407]  __iommu_group_remove_device+0x26b/0x300
[   20.036594]  iommu_group_remove_device+0x8a/0xb0
[   20.036768]  iommufd_test+0x1f1a/0x2d10
[   20.036912]  ? __pfx_lock_release+0x10/0x10
[   20.037070]  ? __pfx_lock_acquire+0x10/0x10
[   20.037229]  ? __pfx_iommufd_test+0x10/0x10
[   20.037386]  ? __sanitizer_cov_trace_const_cmp8+0x1c/0x30
[   20.037587]  iommufd_fops_ioctl+0x377/0x510
[   20.037746]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   20.037922]  ? trace_hardirqs_on+0x26/0x120
[   20.038081]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   20.038311]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   20.038494]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   20.038696]  ? security_file_ioctl+0x9d/0xd0
[   20.038891]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   20.039067]  __x64_sys_ioctl+0x1b9/0x230
[   20.039215]  do_syscall_64+0x3c/0x90
[   20.039351]  entry_SYSCALL_64_after_hwframe+0x6e/0xd8
[   20.039536] RIP: 0033:0x7feb4d43ee5d
[   20.039670] Code: ff c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d 93 af 1b 00 f7 d8 64 89 01 48
[   20.040317] RSP: 002b:00007ffc1444def8 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   20.040588] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007feb4d43ee5d
[   20.040842] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   20.041096] RBP: 00007ffc1444df10 R08: 0000000000000800 R09: 0000000000000800
[   20.041350] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffc1444e028
[   20.041604] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007feb4d738000
[   20.041863]  </TASK>
[   20.041947] Modules linked in:
[   20.042127] ---[ end trace 0000000000000000 ]---
[   20.042300] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   20.042513] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   20.043242] RSP: 0018:ffff88802457fba8 EFLAGS: 00010206
[   20.043440] RAX: dffffc0000000000 RBX: ffff888014f9b000 RCX: 0000000000000000
[   20.043700] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   20.043960] RBP: ffff88802457fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   20.044294] R10: ffff88800aad88df R11: 0000000000000001 R12: 0000000000000000
[   20.044550] R13: ffffffff85cc0180 R14: ffff8880109b6ac0 R15: ffffffff87070ae0
[   20.044834] FS:  00007feb4d6f7600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   20.045162] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   20.045390] CR2: 0000000020000080 CR3: 00000000132ea000 CR4: 0000000000750ef0
[   20.045688] PKRU: 55555554
[   20.046103] ------------[ cut here ]------------
[   20.046272] WARNING: CPU: 0 PID: 891 at drivers/iommu/iommufd/main.c:258 iommufd_fops_release+0x2a3/0x300
[   20.046684] Modules linked in:
[   20.046809] CPU: 0 PID: 891 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   20.047125] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   20.047600] RIP: 0010:iommufd_fops_release+0x2a3/0x300
[   20.047794] Code: 45 d0 65 48 2b 04 25 28 00 00 00 75 54 48 81 c4 88 00 00 00 31 c0 5b 41 5c 41 5d 41 5e 41 5f 5d c3 cc cc cc cc e8 ad 4f 0a fe <0f> 0b eb a6 e8 74 23 67 fe e9 f6 fe ff ff 48 89 85 50 ff ff ff e8
[   20.048520] RSP: 0018:ffff888010377c00 EFLAGS: 00010293
[   20.048775] RAX: 0000000000000000 RBX: ffff88800fe06808 RCX: 0000000000000000
[   20.049035] RDX: ffff888010b50000 RSI: ffffffff835563e3 RDI: ffffffff86702b40
[   20.049351] RBP: ffff888010377cb0 R08: 0000000000000000 R09: fffffbfff0eb2644
[   20.049611] R10: ffffffff87593227 R11: ffff88800b6d8000 R12: 0000000000000000
[   20.049930] R13: ffff888013163318 R14: ffff888010377c48 R15: ffffffff83556140
[   20.050190] FS:  0000000000000000(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   20.050544] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   20.050772] CR2: 0000000020000080 CR3: 000000000687e000 CR4: 0000000000750ef0
[   20.051032] PKRU: 55555554
[   20.051142] Call Trace:
[   20.051293]  <TASK>
[   20.051377]  ? show_regs+0x6e/0x80
[   20.051512]  ? __warn+0xef/0x340
[   20.051639]  ? report_bug+0x25e/0x4b0
[   20.051807]  ? iommufd_fops_release+0x2a3/0x300
[   20.052023]  ? report_bug+0x2cb/0x4b0
[   20.052168]  ? handle_bug+0x46/0x90
[   20.052306]  ? exc_invalid_op+0x1d/0x50
[   20.052520]  ? asm_exc_invalid_op+0x1f/0x30
[   20.052679]  ? __pfx_iommufd_fops_release+0x10/0x10
[   20.052866]  ? iommufd_fops_release+0x2a3/0x300
[   20.053104]  ? iommufd_fops_release+0x2a3/0x300
[   20.053279]  ? __pfx_iommufd_fops_release+0x10/0x10
[   20.053467]  ? rcu_is_watching+0x19/0xc0
[   20.053671]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   20.053875]  ? __pfx_iommufd_fops_release+0x10/0x10
[   20.054066]  __fput+0x424/0xaf0
[   20.054248]  ____fput+0x1f/0x30
[   20.054374]  task_work_run+0x19d/0x2b0
[   20.054520]  ? __pfx_task_work_run+0x10/0x10
[   20.054716]  ? __sanitizer_cov_trace_const_cmp1+0x1e/0x30
[   20.054957]  ? switch_task_namespaces+0xa9/0xe0
[   20.055133]  do_exit+0xac9/0x2790
[   20.055263]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   20.055496]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   20.055704]  ? __pfx_do_exit+0x10/0x10
[   20.055884]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   20.056087]  ? security_file_ioctl+0x9d/0xd0
[   20.056318]  make_task_dead+0x182/0x3c0
[   20.056468]  rewind_stack_and_make_dead+0x17/0x20
[   20.056647] RIP: 0033:0x7feb4d43ee5d
[   20.056790] Code: Unable to access opcode bytes at 0x7feb4d43ee33.
[   20.057069] RSP: 002b:00007ffc1444def8 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   20.057350] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007feb4d43ee5d
[   20.057662] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   20.057928] RBP: 00007ffc1444df10 R08: 0000000000000800 R09: 0000000000000800
[   20.058242] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffc1444e028
[   20.058508] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007feb4d738000
[   20.058834]  </TASK>
[   20.058919] irq event stamp: 0
[   20.059034] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   20.059260] hardirqs last disabled at (0): [<ffffffff8122f2d1>] copy_process+0x1c51/0x7140
[   20.059622] softirqs last  enabled at (0): [<ffffffff8122f312>] copy_process+0x1c92/0x7140
[   20.059924] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   20.060214] ---[ end trace 0000000000000000 ]---
[   20.062982] iommufd_mock iommufd_mock171: Adding to iommu group 171
[   20.063231] iommufd_mock iommufd_mock171: Removing from iommu group 171
[   20.063487] general protection fault, probably for non-canonical address 0xdffffc0000000006: 0000 [#172] PREEMPT SMP KASAN NOPTI
[   20.063942] KASAN: null-ptr-deref in range [0x0000000000000030-0x0000000000000037]
[   20.064214] CPU: 0 PID: 892 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   20.064523] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   20.064925] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   20.065136] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   20.065785] RSP: 0018:ffff888014a47ba8 EFLAGS: 00010206
[   20.065975] RAX: dffffc0000000000 RBX: ffff8880158e0000 RCX: 0000000000000000
[   20.066230] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   20.066484] RBP: ffff888014a47bc0 R08: 0000000000000001 R09: ffffed100155b11b
[   20.066740] R10: ffff88800aad88df R11: 5f6466756d6d6f69 R12: 0000000000000000
[   20.067001] R13: ffffffff85cc0180 R14: ffff88800f8d21a0 R15: ffffffff87070ae0
[   20.067257] FS:  00007f70cc242600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   20.067544] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   20.067752] CR2: 0000000020000080 CR3: 000000000ef30000 CR4: 0000000000750ef0
[   20.068008] PKRU: 55555554
[   20.068110] Call Trace:
[   20.068203]  <TASK>
[   20.068285]  ? show_regs+0x6e/0x80
[   20.068419]  ? die_addr+0x45/0xb0
[   20.068551]  ? exc_general_protection+0x159/0x250
[   20.068732]  ? asm_exc_general_protection+0x2b/0x30
[   20.068916]  ? sysfs_remove_link_from_group+0x21/0x90
[   20.069104]  ? sysfs_remove_link_from_group+0x37/0x90
[   20.069292]  ? sysfs_remove_link_from_group+0x21/0x90
[   20.069481]  iommu_device_unlink+0x85/0xd0
[   20.069635]  iommu_deinit_device+0x11f/0x4c0
[   20.069799]  __iommu_group_remove_device+0x26b/0x300
[   20.069987]  iommu_group_remove_device+0x8a/0xb0
[   20.070161]  iommufd_test+0x1f1a/0x2d10
[   20.070306]  ? __pfx_lock_release+0x10/0x10
[   20.070463]  ? __pfx_lock_acquire+0x10/0x10
[   20.070623]  ? __pfx_iommufd_test+0x10/0x10
[   20.070793]  ? __sanitizer_cov_trace_const_cmp8+0x1c/0x30
[   20.070996]  iommufd_fops_ioctl+0x377/0x510
[   20.071155]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   20.071331]  ? trace_hardirqs_on+0x26/0x120
[   20.071491]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   20.071720]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   20.071905]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   20.072104]  ? security_file_ioctl+0x9d/0xd0
[   20.072268]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   20.072444]  __x64_sys_ioctl+0x1b9/0x230
[   20.072592]  do_syscall_64+0x3c/0x90
[   20.072728]  entry_SYSCALL_64_after_hwframe+0x6e/0xd8
[   20.072914] RIP: 0033:0x7f70cc03ee5d
[   20.073049] Code: ff c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d 93 af 1b 00 f7 d8 64 89 01 48
[   20.073697] RSP: 002b:00007ffff15ba438 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   20.073968] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f70cc03ee5d
[   20.074223] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   20.074477] RBP: 00007ffff15ba450 R08: 0000000000000800 R09: 0000000000000800
[   20.074731] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffff15ba568
[   20.075004] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f70cc283000
[   20.075264]  </TASK>
[   20.075348] Modules linked in:
[   20.075662] ---[ end trace 0000000000000000 ]---
[   20.075834] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   20.076044] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   20.076698] RSP: 0018:ffff88802457fba8 EFLAGS: 00010206
[   20.076888] RAX: dffffc0000000000 RBX: ffff888014f9b000 RCX: 0000000000000000
[   20.077154] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   20.077472] RBP: ffff88802457fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   20.077734] R10: ffff88800aad88df R11: 0000000000000001 R12: 0000000000000000
[   20.078039] R13: ffffffff85cc0180 R14: ffff8880109b6ac0 R15: ffffffff87070ae0
[   20.078300] FS:  00007f70cc242600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   20.078650] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   20.078874] CR2: 0000000020000080 CR3: 000000000ef30000 CR4: 0000000000750ef0
[   20.079198] PKRU: 55555554
[   20.079560] ------------[ cut here ]------------
[   20.079796] WARNING: CPU: 0 PID: 892 at drivers/iommu/iommufd/main.c:258 iommufd_fops_release+0x2a3/0x300
[   20.080143] Modules linked in:
[   20.080284] CPU: 0 PID: 892 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   20.080640] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   20.081119] RIP: 0010:iommufd_fops_release+0x2a3/0x300
[   20.081315] Code: 45 d0 65 48 2b 04 25 28 00 00 00 75 54 48 81 c4 88 00 00 00 31 c0 5b 41 5c 41 5d 41 5e 41 5f 5d c3 cc cc cc cc e8 ad 4f 0a fe <0f> 0b eb a6 e8 74 23 67 fe e9 f6 fe ff ff 48 89 85 50 ff ff ff e8
[   20.082043] RSP: 0018:ffff888014a47c00 EFLAGS: 00010293
[   20.082299] RAX: 0000000000000000 RBX: ffff88800fe06008 RCX: 0000000000000000
[   20.082561] RDX: ffff88801734a500 RSI: ffffffff835563e3 RDI: ffffffff86702b40
[   20.082910] RBP: ffff888014a47cb0 R08: 0000000000000000 R09: fffffbfff0eb2644
[   20.083168] R10: ffffffff87593227 R11: ffff88801351fe00 R12: 0000000000000000
[   20.083425] R13: ffff888013163818 R14: ffff888014a47c48 R15: ffffffff83556140
[   20.083744] FS:  0000000000000000(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   20.084034] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   20.084303] CR2: 0000000020000080 CR3: 000000000687e000 CR4: 0000000000750ef0
[   20.084564] PKRU: 55555554
[   20.084666] Call Trace:
[   20.084778]  <TASK>
[   20.084901]  ? show_regs+0x6e/0x80
[   20.085034]  ? __warn+0xef/0x340
[   20.085160]  ? report_bug+0x25e/0x4b0
[   20.085321]  ? iommufd_fops_release+0x2a3/0x300
[   20.085521]  ? report_bug+0x2cb/0x4b0
[   20.085663]  ? handle_bug+0x46/0x90
[   20.085797]  ? exc_invalid_op+0x1d/0x50
[   20.086001]  ? asm_exc_invalid_op+0x1f/0x30
[   20.086157]  ? __pfx_iommufd_fops_release+0x10/0x10
[   20.086341]  ? iommufd_fops_release+0x2a3/0x300
[   20.086562]  ? iommufd_fops_release+0x2a3/0x300
[   20.086743]  ? __pfx_iommufd_fops_release+0x10/0x10
[   20.086928]  ? rcu_is_watching+0x19/0xc0
[   20.087078]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   20.087277]  ? __pfx_iommufd_fops_release+0x10/0x10
[   20.087523]  __fput+0x424/0xaf0
[   20.087649]  ____fput+0x1f/0x30
[   20.087772]  task_work_run+0x19d/0x2b0
[   20.087924]  ? __pfx_task_work_run+0x10/0x10
[   20.088130]  ? __sanitizer_cov_trace_const_cmp1+0x1e/0x30
[   20.088334]  ? switch_task_namespaces+0xa9/0xe0
[   20.088525]  do_exit+0xac9/0x2790
[   20.088689]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   20.088918]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   20.089112]  ? __pfx_do_exit+0x10/0x10
[   20.089294]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   20.089493]  ? security_file_ioctl+0x9d/0xd0
[   20.089678]  make_task_dead+0x182/0x3c0
[   20.089863]  rewind_stack_and_make_dead+0x17/0x20
[   20.090040] RIP: 0033:0x7f70cc03ee5d
[   20.090178] Code: Unable to access opcode bytes at 0x7f70cc03ee33.
[   20.090456] RSP: 002b:00007ffff15ba438 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   20.090754] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f70cc03ee5d
[   20.091044] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   20.091299] RBP: 00007ffff15ba450 R08: 0000000000000800 R09: 0000000000000800
[   20.091556] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffff15ba568
[   20.091886] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f70cc283000
[   20.092147]  </TASK>
[   20.092231] irq event stamp: 0
[   20.092369] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   20.092629] hardirqs last disabled at (0): [<ffffffff8122f2d1>] copy_process+0x1c51/0x7140
[   20.092947] softirqs last  enabled at (0): [<ffffffff8122f312>] copy_process+0x1c92/0x7140
[   20.093277] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   20.093564] ---[ end trace 0000000000000000 ]---
[   20.096406] iommufd_mock iommufd_mock172: Adding to iommu group 172
[   20.096652] iommufd_mock iommufd_mock172: Removing from iommu group 172
[   20.096908] general protection fault, probably for non-canonical address 0xdffffc0000000006: 0000 [#173] PREEMPT SMP KASAN NOPTI
[   20.097363] KASAN: null-ptr-deref in range [0x0000000000000030-0x0000000000000037]
[   20.097634] CPU: 0 PID: 893 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   20.097944] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   20.098344] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   20.098556] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   20.099220] RSP: 0018:ffff888011c6fba8 EFLAGS: 00010206
[   20.099411] RAX: dffffc0000000000 RBX: ffff8880158e6000 RCX: 0000000000000000
[   20.099665] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   20.099920] RBP: ffff888011c6fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   20.100175] R10: ffff88800aad88df R11: 5f6466756d6d6f69 R12: 0000000000000000
[   20.100429] R13: ffffffff85cc0180 R14: ffff88800fd72260 R15: ffffffff87070ae0
[   20.100684] FS:  00007f298cb5d600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   20.100970] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   20.101178] CR2: 0000000020000080 CR3: 00000000132ea000 CR4: 0000000000750ef0
[   20.101434] PKRU: 55555554
[   20.101536] Call Trace:
[   20.101629]  <TASK>
[   20.101711]  ? show_regs+0x6e/0x80
[   20.101845]  ? die_addr+0x45/0xb0
[   20.101977]  ? exc_general_protection+0x159/0x250
[   20.102158]  ? asm_exc_general_protection+0x2b/0x30
[   20.102342]  ? sysfs_remove_link_from_group+0x21/0x90
[   20.102530]  ? sysfs_remove_link_from_group+0x37/0x90
[   20.102719]  ? sysfs_remove_link_from_group+0x21/0x90
[   20.102917]  iommu_device_unlink+0x85/0xd0
[   20.103071]  iommu_deinit_device+0x11f/0x4c0
[   20.103235]  __iommu_group_remove_device+0x26b/0x300
[   20.103422]  iommu_group_remove_device+0x8a/0xb0
[   20.103597]  iommufd_test+0x1f1a/0x2d10
[   20.103741]  ? __pfx_lock_release+0x10/0x10
[   20.103899]  ? __pfx_lock_acquire+0x10/0x10
[   20.104058]  ? __pfx_iommufd_test+0x10/0x10
[   20.104216]  ? __sanitizer_cov_trace_const_cmp8+0x1c/0x30
[   20.104418]  iommufd_fops_ioctl+0x377/0x510
[   20.104577]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   20.104753]  ? trace_hardirqs_on+0x26/0x120
[   20.104913]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   20.105143]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   20.105327]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   20.105526]  ? security_file_ioctl+0x9d/0xd0
[   20.105691]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   20.105867]  __x64_sys_ioctl+0x1b9/0x230
[   20.106015]  do_syscall_64+0x3c/0x90
[   20.106151]  entry_SYSCALL_64_after_hwframe+0x6e/0xd8
[   20.106337] RIP: 0033:0x7f298c83ee5d
[   20.106471] Code: ff c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d 93 af 1b 00 f7 d8 64 89 01 48
[   20.107142] RSP: 002b:00007ffdaa9067e8 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   20.107413] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f298c83ee5d
[   20.107668] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   20.107922] RBP: 00007ffdaa906800 R08: 0000000000000800 R09: 0000000000000800
[   20.108176] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffdaa906918
[   20.108429] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f298cb9e000
[   20.108689]  </TASK>
[   20.108773] Modules linked in:
[   20.109024] ---[ end trace 0000000000000000 ]---
[   20.109195] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   20.109404] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   20.110054] RSP: 0018:ffff88802457fba8 EFLAGS: 00010206
[   20.110244] RAX: dffffc0000000000 RBX: ffff888014f9b000 RCX: 0000000000000000
[   20.110499] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   20.110849] RBP: ffff88802457fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   20.111113] R10: ffff88800aad88df R11: 0000000000000001 R12: 0000000000000000
[   20.111381] R13: ffffffff85cc0180 R14: ffff8880109b6ac0 R15: ffffffff87070ae0
[   20.111696] FS:  00007f298cb5d600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   20.112009] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   20.112263] CR2: 0000000020000080 CR3: 00000000132ea000 CR4: 0000000000750ef0
[   20.112579] PKRU: 55555554
[   20.112996] ------------[ cut here ]------------
[   20.113168] WARNING: CPU: 0 PID: 893 at drivers/iommu/iommufd/main.c:258 iommufd_fops_release+0x2a3/0x300
[   20.113582] Modules linked in:
[   20.113700] CPU: 0 PID: 893 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   20.114099] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   20.114531] RIP: 0010:iommufd_fops_release+0x2a3/0x300
[   20.114782] Code: 45 d0 65 48 2b 04 25 28 00 00 00 75 54 48 81 c4 88 00 00 00 31 c0 5b 41 5c 41 5d 41 5e 41 5f 5d c3 cc cc cc cc e8 ad 4f 0a fe <0f> 0b eb a6 e8 74 23 67 fe e9 f6 fe ff ff 48 89 85 50 ff ff ff e8
[   20.115503] RSP: 0018:ffff888011c6fc00 EFLAGS: 00010293
[   20.115696] RAX: 0000000000000000 RBX: ffff88800fe06608 RCX: 0000000000000000
[   20.115954] RDX: ffff88801734ca00 RSI: ffffffff835563e3 RDI: ffffffff86702b40
[   20.116214] RBP: ffff888011c6fcb0 R08: 0000000000000000 R09: fffffbfff0eb2644
[   20.116531] R10: ffffffff87593227 R11: ffff888018bc9000 R12: 0000000000000000
[   20.116792] R13: ffff8880135eb818 R14: ffff888011c6fc48 R15: ffffffff83556140
[   20.117100] FS:  0000000000000000(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   20.117401] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   20.117653] CR2: 0000000020000080 CR3: 000000000687e000 CR4: 0000000000750ef0
[   20.117911] PKRU: 55555554
[   20.118019] Call Trace:
[   20.118167]  <TASK>
[   20.118250]  ? show_regs+0x6e/0x80
[   20.118383]  ? __warn+0xef/0x340
[   20.118510]  ? report_bug+0x25e/0x4b0
[   20.118663]  ? iommufd_fops_release+0x2a3/0x300
[   20.118928]  ? report_bug+0x2cb/0x4b0
[   20.119079]  ? handle_bug+0x46/0x90
[   20.119216]  ? exc_invalid_op+0x1d/0x50
[   20.119365]  ? asm_exc_invalid_op+0x1f/0x30
[   20.119525]  ? __pfx_iommufd_fops_release+0x10/0x10
[   20.119876]  ? iommufd_fops_release+0x2a3/0x300
[   20.120059]  ? iommufd_fops_release+0x2a3/0x300
[   20.120243]  ? __pfx_iommufd_fops_release+0x10/0x10
[   20.120579]  ? rcu_is_watching+0x19/0xc0
[   20.120739]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   20.120964]  ? __pfx_iommufd_fops_release+0x10/0x10
[   20.121283]  __fput+0x424/0xaf0
[   20.121418]  ____fput+0x1f/0x30
[   20.121616]  task_work_run+0x19d/0x2b0
[   20.121765]  ? __pfx_task_work_run+0x10/0x10
[   20.121930]  ? __sanitizer_cov_trace_const_cmp1+0x1e/0x30
[   20.122195]  ? switch_task_namespaces+0xa9/0xe0
[   20.122371]  do_exit+0xac9/0x2790
[   20.122503]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   20.122817]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   20.123005]  ? __pfx_do_exit+0x10/0x10
[   20.123151]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   20.123355]  ? security_file_ioctl+0x9d/0xd0
[   20.123523]  make_task_dead+0x182/0x3c0
[   20.123673]  rewind_stack_and_make_dead+0x17/0x20
[   20.123879] RIP: 0033:0x7f298c83ee5d
[   20.124054] Code: Unable to access opcode bytes at 0x7f298c83ee33.
[   20.124282] RSP: 002b:00007ffdaa9067e8 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   20.124624] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f298c83ee5d
[   20.124889] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   20.125157] RBP: 00007ffdaa906800 R08: 0000000000000800 R09: 0000000000000800
[   20.125474] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffdaa906918
[   20.125737] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f298cb9e000
[   20.126067]  </TASK>
[   20.126155] irq event stamp: 0
[   20.126272] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   20.126566] hardirqs last disabled at (0): [<ffffffff8122f2d1>] copy_process+0x1c51/0x7140
[   20.126885] softirqs last  enabled at (0): [<ffffffff8122f312>] copy_process+0x1c92/0x7140
[   20.127190] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   20.127470] ---[ end trace 0000000000000000 ]---
[   20.130271] iommufd_mock iommufd_mock173: Adding to iommu group 173
[   20.130523] iommufd_mock iommufd_mock173: Removing from iommu group 173
[   20.130809] general protection fault, probably for non-canonical address 0xdffffc0000000006: 0000 [#174] PREEMPT SMP KASAN NOPTI
[   20.131223] KASAN: null-ptr-deref in range [0x0000000000000030-0x0000000000000037]
[   20.131498] CPU: 0 PID: 894 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   20.131860] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   20.132268] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   20.132485] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   20.133145] RSP: 0018:ffff888010377ba8 EFLAGS: 00010206
[   20.133339] RAX: dffffc0000000000 RBX: ffff8880158e5000 RCX: 0000000000000000
[   20.133598] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   20.133856] RBP: ffff888010377bc0 R08: 0000000000000001 R09: ffffed100155b11b
[   20.134115] R10: ffff88800aad88df R11: 5f6466756d6d6f69 R12: 0000000000000000
[   20.134374] R13: ffffffff85cc0180 R14: ffff88800fd72940 R15: ffffffff87070ae0
[   20.134634] FS:  00007fb2ef5c8600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   20.134957] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   20.135167] CR2: 0000000020000080 CR3: 000000000ef30000 CR4: 0000000000750ef0
[   20.135427] PKRU: 55555554
[   20.135531] Call Trace:
[   20.135625]  <TASK>
[   20.135708]  ? show_regs+0x6e/0x80
[   20.135845]  ? die_addr+0x45/0xb0
[   20.135978]  ? exc_general_protection+0x159/0x250
[   20.136163]  ? asm_exc_general_protection+0x2b/0x30
[   20.136350]  ? sysfs_remove_link_from_group+0x21/0x90
[   20.136542]  ? sysfs_remove_link_from_group+0x37/0x90
[   20.136733]  ? sysfs_remove_link_from_group+0x21/0x90
[   20.136924]  iommu_device_unlink+0x85/0xd0
[   20.137082]  iommu_deinit_device+0x11f/0x4c0
[   20.137248]  __iommu_group_remove_device+0x26b/0x300
[   20.137439]  iommu_group_remove_device+0x8a/0xb0
[   20.137616]  iommufd_test+0x1f1a/0x2d10
[   20.137762]  ? __pfx_lock_release+0x10/0x10
[   20.137923]  ? __pfx_lock_acquire+0x10/0x10
[   20.138085]  ? __pfx_iommufd_test+0x10/0x10
[   20.138245]  ? __sanitizer_cov_trace_const_cmp8+0x1c/0x30
[   20.138450]  iommufd_fops_ioctl+0x377/0x510
[   20.138611]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   20.138796]  ? trace_hardirqs_on+0x26/0x120
[   20.138960]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   20.139195]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   20.139382]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   20.139585]  ? security_file_ioctl+0x9d/0xd0
[   20.139751]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   20.139930]  __x64_sys_ioctl+0x1b9/0x230
[   20.140081]  do_syscall_64+0x3c/0x90
[   20.140218]  entry_SYSCALL_64_after_hwframe+0x6e/0xd8
[   20.140407] RIP: 0033:0x7fb2ef23ee5d
[   20.140544] Code: ff c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d 93 af 1b 00 f7 d8 64 89 01 48
[   20.141203] RSP: 002b:00007ffdda89fed8 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   20.141478] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007fb2ef23ee5d
[   20.141736] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   20.141994] RBP: 00007ffdda89fef0 R08: 0000000000000800 R09: 0000000000000800
[   20.142252] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffdda8a0008
[   20.142510] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007fb2ef609000
[   20.142800]  </TASK>
[   20.142886] Modules linked in:
[   20.143100] ---[ end trace 0000000000000000 ]---
[   20.143274] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   20.143488] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   20.144163] RSP: 0018:ffff88802457fba8 EFLAGS: 00010206
[   20.144417] RAX: dffffc0000000000 RBX: ffff888014f9b000 RCX: 0000000000000000
[   20.144676] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   20.144998] RBP: ffff88802457fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   20.145258] R10: ffff88800aad88df R11: 0000000000000001 R12: 0000000000000000
[   20.145579] R13: ffffffff85cc0180 R14: ffff8880109b6ac0 R15: ffffffff87070ae0
[   20.145838] FS:  00007fb2ef5c8600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   20.146191] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   20.146403] CR2: 0000000020000080 CR3: 000000000ef30000 CR4: 0000000000750ef0
[   20.146728] PKRU: 55555554
[   20.147142] ------------[ cut here ]------------
[   20.147316] WARNING: CPU: 0 PID: 894 at drivers/iommu/iommufd/main.c:258 iommufd_fops_release+0x2a3/0x300
[   20.147736] Modules linked in:
[   20.147855] CPU: 0 PID: 894 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   20.148230] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   20.148696] RIP: 0010:iommufd_fops_release+0x2a3/0x300
[   20.148891] Code: 45 d0 65 48 2b 04 25 28 00 00 00 75 54 48 81 c4 88 00 00 00 31 c0 5b 41 5c 41 5d 41 5e 41 5f 5d c3 cc cc cc cc e8 ad 4f 0a fe <0f> 0b eb a6 e8 74 23 67 fe e9 f6 fe ff ff 48 89 85 50 ff ff ff e8
[   20.149607] RSP: 0018:ffff888010377c00 EFLAGS: 00010293
[   20.149859] RAX: 0000000000000000 RBX: ffff88800fe06e08 RCX: 0000000000000000
[   20.150118] RDX: ffff888014cd8000 RSI: ffffffff835563e3 RDI: ffffffff86702b40
[   20.150436] RBP: ffff888010377cb0 R08: 0000000000000000 R09: fffffbfff0eb2644
[   20.150708] R10: ffffffff87593227 R11: ffff888018bba600 R12: 0000000000000000
[   20.150978] R13: ffff8880135eb098 R14: ffff888010377c48 R15: ffffffff83556140
[   20.151238] FS:  0000000000000000(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   20.151530] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   20.151742] CR2: 0000000020000080 CR3: 000000000687e000 CR4: 0000000000750ef0
[   20.152002] PKRU: 55555554
[   20.152106] Call Trace:
[   20.152200]  <TASK>
[   20.152283]  ? show_regs+0x6e/0x80
[   20.152417]  ? __warn+0xef/0x340
[   20.152568]  ? report_bug+0x25e/0x4b0
[   20.152713]  ? iommufd_fops_release+0x2a3/0x300
[   20.152886]  ? report_bug+0x2cb/0x4b0
[   20.153031]  ? handle_bug+0x46/0x90
[   20.153167]  ? exc_invalid_op+0x1d/0x50
[   20.153314]  ? asm_exc_invalid_op+0x1f/0x30
[   20.153472]  ? __pfx_iommufd_fops_release+0x10/0x10
[   20.153659]  ? iommufd_fops_release+0x2a3/0x300
[   20.153832]  ? iommufd_fops_release+0x2a3/0x300
[   20.154007]  ? __pfx_iommufd_fops_release+0x10/0x10
[   20.154191]  ? rcu_is_watching+0x19/0xc0
[   20.154343]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   20.154546]  ? __pfx_iommufd_fops_release+0x10/0x10
[   20.154929]  __fput+0x424/0xaf0
[   20.155064]  ____fput+0x1f/0x30
[   20.155190]  task_work_run+0x19d/0x2b0
[   20.155336]  ? __pfx_task_work_run+0x10/0x10
[   20.155500]  ? __sanitizer_cov_trace_const_cmp1+0x1e/0x30
[   20.155702]  ? switch_task_namespaces+0xa9/0xe0
[   20.155876]  do_exit+0xac9/0x2790
[   20.156006]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   20.156239]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   20.156425]  ? __pfx_do_exit+0x10/0x10
[   20.156569]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   20.156771]  ? security_file_ioctl+0x9d/0xd0
[   20.156937]  make_task_dead+0x182/0x3c0
[   20.157086]  rewind_stack_and_make_dead+0x17/0x20
[   20.157265] RIP: 0033:0x7fb2ef23ee5d
[   20.157402] Code: Unable to access opcode bytes at 0x7fb2ef23ee33.
[   20.157626] RSP: 002b:00007ffdda89fed8 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   20.157902] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007fb2ef23ee5d
[   20.158161] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   20.158420] RBP: 00007ffdda89fef0 R08: 0000000000000800 R09: 0000000000000800
[   20.158688] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffdda8a0008
[   20.158951] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007fb2ef609000
[   20.159215]  </TASK>
[   20.159302] irq event stamp: 0
[   20.159417] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   20.159667] hardirqs last disabled at (0): [<ffffffff8122f2d1>] copy_process+0x1c51/0x7140
[   20.159967] softirqs last  enabled at (0): [<ffffffff8122f312>] copy_process+0x1c92/0x7140
[   20.160267] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   20.160495] ---[ end trace 0000000000000000 ]---
[   20.163033] iommufd_mock iommufd_mock174: Adding to iommu group 174
[   20.163293] iommufd_mock iommufd_mock174: Removing from iommu group 174
[   20.163557] general protection fault, probably for non-canonical address 0xdffffc0000000006: 0000 [#175] PREEMPT SMP KASAN NOPTI
[   20.163979] KASAN: null-ptr-deref in range [0x0000000000000030-0x0000000000000037]
[   20.164258] CPU: 1 PID: 895 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   20.164579] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   20.164994] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   20.165212] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   20.165885] RSP: 0018:ffff888011c6fba8 EFLAGS: 00010206
[   20.166082] RAX: dffffc0000000000 RBX: ffff88800eef5000 RCX: 0000000000000000
[   20.166347] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   20.166612] RBP: ffff888011c6fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   20.166881] R10: ffff88800aad88df R11: 5f6466756d6d6f69 R12: 0000000000000000
[   20.167145] R13: ffffffff85cc0180 R14: ffff88801679ac80 R15: ffffffff87070ae0
[   20.167410] FS:  00007f5dd7216600(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
[   20.167708] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   20.167923] CR2: 0000000020000080 CR3: 00000000203d6000 CR4: 0000000000750ee0
[   20.168188] PKRU: 55555554
[   20.168295] Call Trace:
[   20.168391]  <TASK>
[   20.168476]  ? show_regs+0x6e/0x80
[   20.168615]  ? die_addr+0x45/0xb0
[   20.168751]  ? exc_general_protection+0x159/0x250
[   20.168939]  ? asm_exc_general_protection+0x2b/0x30
[   20.169133]  ? sysfs_remove_link_from_group+0x21/0x90
[   20.169324]  ? sysfs_remove_link_from_group+0x37/0x90
[   20.169515]  ? sysfs_remove_link_from_group+0x21/0x90
[   20.169706]  iommu_device_unlink+0x85/0xd0
[   20.169864]  iommu_deinit_device+0x11f/0x4c0
[   20.170030]  __iommu_group_remove_device+0x26b/0x300
[   20.170220]  iommu_group_remove_device+0x8a/0xb0
[   20.170398]  iommufd_test+0x1f1a/0x2d10
[   20.170544]  ? __pfx_lock_release+0x10/0x10
[   20.170709]  ? __pfx_lock_acquire+0x10/0x10
[   20.170879]  ? __pfx_iommufd_test+0x10/0x10
[   20.171040]  ? __sanitizer_cov_trace_const_cmp8+0x1c/0x30
[   20.171244]  iommufd_fops_ioctl+0x377/0x510
[   20.171406]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   20.171585]  ? trace_hardirqs_on+0x26/0x120
[   20.171747]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   20.171981]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   20.172168]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   20.172372]  ? security_file_ioctl+0x9d/0xd0
[   20.172538]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   20.172717]  __x64_sys_ioctl+0x1b9/0x230
[   20.172868]  do_syscall_64+0x3c/0x90
[   20.173005]  entry_SYSCALL_64_after_hwframe+0x6e/0xd8
[   20.173195] RIP: 0033:0x7f5dd703ee5d
[   20.173332] Code: ff c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d 93 af 1b 00 f7 d8 64 89 01 48
[   20.173992] RSP: 002b:00007ffc6f9028c8 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   20.174267] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f5dd703ee5d
[   20.174526] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   20.174788] RBP: 00007ffc6f9028e0 R08: 0000000000000800 R09: 0000000000000800
[   20.175050] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffc6f9029f8
[   20.175309] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f5dd7257000
[   20.175572]  </TASK>
[   20.175658] Modules linked in:
[   20.175921] ---[ end trace 0000000000000000 ]---
[   20.176094] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   20.176307] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   20.176969] RSP: 0018:ffff88802457fba8 EFLAGS: 00010206
[   20.177162] RAX: dffffc0000000000 RBX: ffff888014f9b000 RCX: 0000000000000000
[   20.177421] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   20.177679] RBP: ffff88802457fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   20.177938] R10: ffff88800aad88df R11: 0000000000000001 R12: 0000000000000000
[   20.178195] R13: ffffffff85cc0180 R14: ffff8880109b6ac0 R15: ffffffff87070ae0
[   20.178455] FS:  00007f5dd7216600(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
[   20.178791] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   20.179009] CR2: 0000000020000080 CR3: 00000000203d6000 CR4: 0000000000750ee0
[   20.179269] PKRU: 55555554
[   20.179665] ------------[ cut here ]------------
[   20.179838] WARNING: CPU: 1 PID: 895 at drivers/iommu/iommufd/main.c:258 iommufd_fops_release+0x2a3/0x300
[   20.180186] Modules linked in:
[   20.180304] CPU: 1 PID: 895 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   20.180618] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   20.181024] RIP: 0010:iommufd_fops_release+0x2a3/0x300
[   20.181218] Code: 45 d0 65 48 2b 04 25 28 00 00 00 75 54 48 81 c4 88 00 00 00 31 c0 5b 41 5c 41 5d 41 5e 41 5f 5d c3 cc cc cc cc e8 ad 4f 0a fe <0f> 0b eb a6 e8 74 23 67 fe e9 f6 fe ff ff 48 89 85 50 ff ff ff e8
[   20.181877] RSP: 0018:ffff888011c6fc00 EFLAGS: 00010293
[   20.182070] RAX: 0000000000000000 RBX: ffff88801248af08 RCX: 0000000000000000
[   20.182329] RDX: ffff888014cdca00 RSI: ffffffff835563e3 RDI: ffffffff86702b48
[   20.182616] RBP: ffff888011c6fcb0 R08: 0000000000000000 R09: fffffbfff0eb2644
[   20.182893] R10: ffffffff87593227 R11: ffff888018bd8200 R12: 0000000000000000
[   20.183152] R13: ffff888013770b98 R14: ffff888011c6fc48 R15: ffffffff83556140
[   20.183411] FS:  0000000000000000(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
[   20.183702] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   20.183913] CR2: 0000000020000080 CR3: 000000000687e000 CR4: 0000000000750ee0
[   20.184173] PKRU: 55555554
[   20.184276] Call Trace:
[   20.184370]  <TASK>
[   20.184453]  ? show_regs+0x6e/0x80
[   20.184587]  ? __warn+0xef/0x340
[   20.184714]  ? report_bug+0x25e/0x4b0
[   20.184857]  ? iommufd_fops_release+0x2a3/0x300
[   20.185030]  ? report_bug+0x2cb/0x4b0
[   20.185175]  ? handle_bug+0x46/0x90
[   20.185310]  ? exc_invalid_op+0x1d/0x50
[   20.185458]  ? asm_exc_invalid_op+0x1f/0x30
[   20.185616]  ? __pfx_iommufd_fops_release+0x10/0x10
[   20.185802]  ? iommufd_fops_release+0x2a3/0x300
[   20.185974]  ? iommufd_fops_release+0x2a3/0x300
[   20.186147]  ? __pfx_iommufd_fops_release+0x10/0x10
[   20.186331]  ? rcu_is_watching+0x19/0xc0
[   20.186484]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   20.186697]  ? __pfx_iommufd_fops_release+0x10/0x10
[   20.186886]  __fput+0x424/0xaf0
[   20.187013]  ____fput+0x1f/0x30
[   20.187137]  task_work_run+0x19d/0x2b0
[   20.187280]  ? __pfx_task_work_run+0x10/0x10
[   20.187440]  ? __sanitizer_cov_trace_const_cmp1+0x1e/0x30
[   20.187637]  ? switch_task_namespaces+0xa9/0xe0
[   20.187808]  do_exit+0xac9/0x2790
[   20.187935]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   20.188162]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   20.188344]  ? __pfx_do_exit+0x10/0x10
[   20.188485]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   20.188682]  ? security_file_ioctl+0x9d/0xd0
[   20.188844]  make_task_dead+0x182/0x3c0
[   20.188990]  rewind_stack_and_make_dead+0x17/0x20
[   20.189165] RIP: 0033:0x7f5dd703ee5d
[   20.189298] Code: Unable to access opcode bytes at 0x7f5dd703ee33.
[   20.189517] RSP: 002b:00007ffc6f9028c8 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   20.189788] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f5dd703ee5d
[   20.190041] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   20.190294] RBP: 00007ffc6f9028e0 R08: 0000000000000800 R09: 0000000000000800
[   20.190547] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffc6f9029f8
[   20.190809] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f5dd7257000
[   20.191075]  </TASK>
[   20.191159] irq event stamp: 0
[   20.191273] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   20.191497] hardirqs last disabled at (0): [<ffffffff8122f2d1>] copy_process+0x1c51/0x7140
[   20.191791] softirqs last  enabled at (0): [<ffffffff8122f312>] copy_process+0x1c92/0x7140
[   20.192085] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   20.192309] ---[ end trace 0000000000000000 ]---
[   20.194842] iommufd_mock iommufd_mock175: Adding to iommu group 175
[   20.195126] iommufd_mock iommufd_mock175: Removing from iommu group 175
[   20.195392] general protection fault, probably for non-canonical address 0xdffffc0000000006: 0000 [#176] PREEMPT SMP KASAN NOPTI
[   20.195804] KASAN: null-ptr-deref in range [0x0000000000000030-0x0000000000000037]
[   20.196077] CPU: 1 PID: 896 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   20.196391] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   20.196798] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   20.197010] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   20.197668] RSP: 0018:ffff888010377ba8 EFLAGS: 00010206
[   20.197861] RAX: dffffc0000000000 RBX: ffff88800eef7000 RCX: 0000000000000000
[   20.198119] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   20.198376] RBP: ffff888010377bc0 R08: 0000000000000001 R09: ffffed100155b11b
[   20.198635] R10: ffff88800aad88df R11: 0000000000045a00 R12: 0000000000000000
[   20.198912] R13: ffffffff85cc0180 R14: ffff88801679af80 R15: ffffffff87070ae0
[   20.199174] FS:  00007f6cbf73a600(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
[   20.199465] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   20.199676] CR2: 0000000020000080 CR3: 00000000203d6000 CR4: 0000000000750ee0
[   20.199935] PKRU: 55555554
[   20.200039] Call Trace:
[   20.200132]  <TASK>
[   20.200215]  ? show_regs+0x6e/0x80
[   20.200351]  ? die_addr+0x45/0xb0
[   20.200484]  ? exc_general_protection+0x159/0x250
[   20.200668]  ? asm_exc_general_protection+0x2b/0x30
[   20.200855]  ? sysfs_remove_link_from_group+0x21/0x90
[   20.201045]  ? sysfs_remove_link_from_group+0x37/0x90
[   20.201236]  ? sysfs_remove_link_from_group+0x21/0x90
[   20.201427]  iommu_device_unlink+0x85/0xd0
[   20.201584]  iommu_deinit_device+0x11f/0x4c0
[   20.201749]  __iommu_group_remove_device+0x26b/0x300
[   20.201939]  iommu_group_remove_device+0x8a/0xb0
[   20.202116]  iommufd_test+0x1f1a/0x2d10
[   20.202262]  ? __pfx_lock_release+0x10/0x10
[   20.202422]  ? __pfx_lock_acquire+0x10/0x10
[   20.202583]  ? __pfx_iommufd_test+0x10/0x10
[   20.202743]  ? __sanitizer_cov_trace_const_cmp8+0x1c/0x30
[   20.202949]  iommufd_fops_ioctl+0x377/0x510
[   20.203110]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   20.203289]  ? trace_hardirqs_on+0x26/0x120
[   20.203451]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   20.203684]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   20.203871]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   20.204073]  ? security_file_ioctl+0x9d/0xd0
[   20.204238]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   20.204417]  __x64_sys_ioctl+0x1b9/0x230
[   20.204567]  do_syscall_64+0x3c/0x90
[   20.204704]  entry_SYSCALL_64_after_hwframe+0x6e/0xd8
[   20.204892] RIP: 0033:0x7f6cbf43ee5d
[   20.205029] Code: ff c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d 93 af 1b 00 f7 d8 64 89 01 48
[   20.205688] RSP: 002b:00007ffcec33b8d8 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   20.205967] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f6cbf43ee5d
[   20.206225] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   20.206484] RBP: 00007ffcec33b8f0 R08: 0000000000000800 R09: 0000000000000800
[   20.206742] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffcec33ba08
[   20.207017] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f6cbf77b000
[   20.207280]  </TASK>
[   20.207365] Modules linked in:
[   20.207614] ---[ end trace 0000000000000000 ]---
[   20.207785] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   20.207997] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   20.208654] RSP: 0018:ffff88802457fba8 EFLAGS: 00010206
[   20.208847] RAX: dffffc0000000000 RBX: ffff888014f9b000 RCX: 0000000000000000
[   20.209105] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   20.209362] RBP: ffff88802457fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   20.209620] R10: ffff88800aad88df R11: 0000000000000001 R12: 0000000000000000
[   20.209877] R13: ffffffff85cc0180 R14: ffff8880109b6ac0 R15: ffffffff87070ae0
[   20.210135] FS:  00007f6cbf73a600(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
[   20.210426] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   20.210667] CR2: 0000000020000080 CR3: 00000000203d6000 CR4: 0000000000750ee0
[   20.210939] PKRU: 55555554
[   20.211295] ------------[ cut here ]------------
[   20.211466] WARNING: CPU: 1 PID: 896 at drivers/iommu/iommufd/main.c:258 iommufd_fops_release+0x2a3/0x300
[   20.211812] Modules linked in:
[   20.211929] CPU: 1 PID: 896 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   20.212242] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   20.212647] RIP: 0010:iommufd_fops_release+0x2a3/0x300
[   20.212839] Code: 45 d0 65 48 2b 04 25 28 00 00 00 75 54 48 81 c4 88 00 00 00 31 c0 5b 41 5c 41 5d 41 5e 41 5f 5d c3 cc cc cc cc e8 ad 4f 0a fe <0f> 0b eb a6 e8 74 23 67 fe e9 f6 fe ff ff 48 89 85 50 ff ff ff e8
[   20.213495] RSP: 0018:ffff888010377c00 EFLAGS: 00010293
[   20.213688] RAX: 0000000000000000 RBX: ffff88801248ae08 RCX: 0000000000000000
[   20.213945] RDX: ffff888014580000 RSI: ffffffff835563e3 RDI: ffffffff86702b48
[   20.214202] RBP: ffff888010377cb0 R08: 0000000000000000 R09: fffffbfff0eb2644
[   20.214459] R10: ffffffff87593227 R11: ffff888013310000 R12: 0000000000000000
[   20.214728] R13: ffff8880111ff318 R14: ffff888010377c48 R15: ffffffff83556140
[   20.214991] FS:  0000000000000000(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
[   20.215276] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   20.215483] CR2: 0000000020000080 CR3: 000000000687e000 CR4: 0000000000750ee0
[   20.215736] PKRU: 55555554
[   20.215837] Call Trace:
[   20.215929]  <TASK>
[   20.216010]  ? show_regs+0x6e/0x80
[   20.216140]  ? __warn+0xef/0x340
[   20.216264]  ? report_bug+0x25e/0x4b0
[   20.216403]  ? iommufd_fops_release+0x2a3/0x300
[   20.216572]  ? report_bug+0x2cb/0x4b0
[   20.216714]  ? handle_bug+0x46/0x90
[   20.216847]  ? exc_invalid_op+0x1d/0x50
[   20.216991]  ? asm_exc_invalid_op+0x1f/0x30
[   20.217145]  ? __pfx_iommufd_fops_release+0x10/0x10
[   20.217327]  ? iommufd_fops_release+0x2a3/0x300
[   20.217496]  ? iommufd_fops_release+0x2a3/0x300
[   20.217666]  ? __pfx_iommufd_fops_release+0x10/0x10
[   20.217845]  ? rcu_is_watching+0x19/0xc0
[   20.217994]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   20.218191]  ? __pfx_iommufd_fops_release+0x10/0x10
[   20.218371]  __fput+0x424/0xaf0
[   20.218496]  ____fput+0x1f/0x30
[   20.218624]  task_work_run+0x19d/0x2b0
[   20.218768]  ? __pfx_task_work_run+0x10/0x10
[   20.218937]  ? __sanitizer_cov_trace_const_cmp1+0x1e/0x30
[   20.219134]  ? switch_task_namespaces+0xa9/0xe0
[   20.219304]  do_exit+0xac9/0x2790
[   20.219431]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   20.219657]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   20.219839]  ? __pfx_do_exit+0x10/0x10
[   20.219979]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   20.220176]  ? security_file_ioctl+0x9d/0xd0
[   20.220339]  make_task_dead+0x182/0x3c0
[   20.220484]  rewind_stack_and_make_dead+0x17/0x20
[   20.220659] RIP: 0033:0x7f6cbf43ee5d
[   20.220792] Code: Unable to access opcode bytes at 0x7f6cbf43ee33.
[   20.221010] RSP: 002b:00007ffcec33b8d8 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   20.221279] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f6cbf43ee5d
[   20.221532] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   20.221784] RBP: 00007ffcec33b8f0 R08: 0000000000000800 R09: 0000000000000800
[   20.222037] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffcec33ba08
[   20.222289] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f6cbf77b000
[   20.222547]  </TASK>
[   20.222640] irq event stamp: 0
[   20.222755] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   20.222985] hardirqs last disabled at (0): [<ffffffff8122f2d1>] copy_process+0x1c51/0x7140
[   20.223278] softirqs last  enabled at (0): [<ffffffff8122f312>] copy_process+0x1c92/0x7140
[   20.223571] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   20.223794] ---[ end trace 0000000000000000 ]---
[   20.226244] iommufd_mock iommufd_mock176: Adding to iommu group 176
[   20.226499] iommufd_mock iommufd_mock176: Removing from iommu group 176
[   20.226867] general protection fault, probably for non-canonical address 0xdffffc0000000006: 0000 [#177] PREEMPT SMP KASAN NOPTI
[   20.227277] KASAN: null-ptr-deref in range [0x0000000000000030-0x0000000000000037]
[   20.227545] CPU: 1 PID: 897 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   20.227854] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   20.228253] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   20.228461] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   20.229107] RSP: 0018:ffff888014a47ba8 EFLAGS: 00010206
[   20.229297] RAX: dffffc0000000000 RBX: ffff88800eef4000 RCX: 0000000000000000
[   20.229551] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   20.229803] RBP: ffff888014a47bc0 R08: 0000000000000001 R09: ffffed100155b11b
[   20.230056] R10: ffff88800aad88df R11: 5f6466756d6d6f69 R12: 0000000000000000
[   20.230309] R13: ffffffff85cc0180 R14: ffff88801679a620 R15: ffffffff87070ae0
[   20.230571] FS:  00007fbac4a3f600(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
[   20.230876] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   20.231082] CR2: 0000000020000080 CR3: 00000000203d6000 CR4: 0000000000750ee0
[   20.231336] PKRU: 55555554
[   20.231437] Call Trace:
[   20.231528]  <TASK>
[   20.231609]  ? show_regs+0x6e/0x80
[   20.231742]  ? die_addr+0x45/0xb0
[   20.231872]  ? exc_general_protection+0x159/0x250
[   20.232052]  ? asm_exc_general_protection+0x2b/0x30
[   20.232234]  ? sysfs_remove_link_from_group+0x21/0x90
[   20.232443]  ? sysfs_remove_link_from_group+0x37/0x90
[   20.232633]  ? sysfs_remove_link_from_group+0x21/0x90
[   20.232819]  iommu_device_unlink+0x85/0xd0
[   20.232973]  iommu_deinit_device+0x11f/0x4c0
[   20.233135]  __iommu_group_remove_device+0x26b/0x300
[   20.233321]  iommu_group_remove_device+0x8a/0xb0
[   20.233493]  iommufd_test+0x1f1a/0x2d10
[   20.233636]  ? __pfx_lock_release+0x10/0x10
[   20.233792]  ? __pfx_lock_acquire+0x10/0x10
[   20.233949]  ? __pfx_iommufd_test+0x10/0x10
[   20.234106]  ? __sanitizer_cov_trace_const_cmp8+0x1c/0x30
[   20.234305]  iommufd_fops_ioctl+0x377/0x510
[   20.234463]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   20.234637]  ? trace_hardirqs_on+0x26/0x120
[   20.234801]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   20.235033]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   20.235215]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   20.235412]  ? security_file_ioctl+0x9d/0xd0
[   20.235574]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   20.235748]  __x64_sys_ioctl+0x1b9/0x230
[   20.235895]  do_syscall_64+0x3c/0x90
[   20.236029]  entry_SYSCALL_64_after_hwframe+0x6e/0xd8
[   20.236213] RIP: 0033:0x7fbac483ee5d
[   20.236346] Code: ff c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d 93 af 1b 00 f7 d8 64 89 01 48
[   20.236988] RSP: 002b:00007ffeb14568d8 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   20.237256] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007fbac483ee5d
[   20.237508] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   20.237759] RBP: 00007ffeb14568f0 R08: 0000000000000800 R09: 0000000000000800
[   20.238011] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffeb1456a08
[   20.238263] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007fbac4a80000
[   20.238520]  </TASK>
[   20.238603] Modules linked in:
[   20.238731] ---[ end trace 0000000000000000 ]---
[   20.238912] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   20.239122] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   20.239768] RSP: 0018:ffff88802457fba8 EFLAGS: 00010206
[   20.239957] RAX: dffffc0000000000 RBX: ffff888014f9b000 RCX: 0000000000000000
[   20.240241] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   20.240534] RBP: ffff88802457fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   20.240786] R10: ffff88800aad88df R11: 0000000000000001 R12: 0000000000000000
[   20.241060] R13: ffffffff85cc0180 R14: ffff8880109b6ac0 R15: ffffffff87070ae0
[   20.241335] FS:  00007fbac4a3f600(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
[   20.241639] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   20.241868] CR2: 0000000020000080 CR3: 00000000203d6000 CR4: 0000000000750ee0
[   20.242121] PKRU: 55555554
[   20.242501] ------------[ cut here ]------------
[   20.242709] WARNING: CPU: 1 PID: 897 at drivers/iommu/iommufd/main.c:258 iommufd_fops_release+0x2a3/0x300
[   20.243063] Modules linked in:
[   20.243177] CPU: 1 PID: 897 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   20.243510] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   20.243943] RIP: 0010:iommufd_fops_release+0x2a3/0x300
[   20.244154] Code: 45 d0 65 48 2b 04 25 28 00 00 00 75 54 48 81 c4 88 00 00 00 31 c0 5b 41 5c 41 5d 41 5e 41 5f 5d c3 cc cc cc cc e8 ad 4f 0a fe <0f> 0b eb a6 e8 74 23 67 fe e9 f6 fe ff ff 48 89 85 50 ff ff ff e8
[   20.244860] RSP: 0018:ffff888014a47c00 EFLAGS: 00010293
[   20.245049] RAX: 0000000000000000 RBX: ffff88801248a308 RCX: 0000000000000000
[   20.245318] RDX: ffff888010e3ca00 RSI: ffffffff835563e3 RDI: ffffffff86702b48
[   20.245598] RBP: ffff888014a47cb0 R08: 0000000000000000 R09: fffffbfff0eb2644
[   20.245855] R10: ffffffff87593227 R11: ffff88800fe03800 R12: 0000000000000000
[   20.246138] R13: ffff888013606b98 R14: ffff888014a47c48 R15: ffffffff83556140
[   20.246395] FS:  0000000000000000(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
[   20.246721] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   20.246936] CR2: 0000000020000080 CR3: 000000000687e000 CR4: 0000000000750ee0
[   20.247189] PKRU: 55555554
[   20.247290] Call Trace:
[   20.247382]  <TASK>
[   20.247480]  ? show_regs+0x6e/0x80
[   20.247647]  ? __warn+0xef/0x340
[   20.247771]  ? report_bug+0x25e/0x4b0
[   20.247910]  ? iommufd_fops_release+0x2a3/0x300
[   20.248085]  ? report_bug+0x2cb/0x4b0
[   20.248257]  ? handle_bug+0x46/0x90
[   20.248393]  ? exc_invalid_op+0x1d/0x50
[   20.248537]  ? asm_exc_invalid_op+0x1f/0x30
[   20.248697]  ? __pfx_iommufd_fops_release+0x10/0x10
[   20.248919]  ? iommufd_fops_release+0x2a3/0x300
[   20.249087]  ? iommufd_fops_release+0x2a3/0x300
[   20.249257]  ? __pfx_iommufd_fops_release+0x10/0x10
[   20.249467]  ? rcu_is_watching+0x19/0xc0
[   20.249619]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   20.249817]  ? __pfx_iommufd_fops_release+0x10/0x10
[   20.250014]  __fput+0x424/0xaf0
[   20.250162]  ____fput+0x1f/0x30
[   20.250283]  task_work_run+0x19d/0x2b0
[   20.250425]  ? __pfx_task_work_run+0x10/0x10
[   20.250602]  ? __sanitizer_cov_trace_const_cmp1+0x1e/0x30
[   20.250832]  ? switch_task_namespaces+0xa9/0xe0
[   20.251006]  do_exit+0xac9/0x2790
[   20.251133]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   20.251359]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   20.251539]  ? __pfx_do_exit+0x10/0x10
[   20.251699]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   20.251936]  ? security_file_ioctl+0x9d/0xd0
[   20.252103]  make_task_dead+0x182/0x3c0
[   20.252262]  rewind_stack_and_make_dead+0x17/0x20
[   20.252464] RIP: 0033:0x7fbac483ee5d
[   20.252620] Code: Unable to access opcode bytes at 0x7fbac483ee33.
[   20.252850] RSP: 002b:00007ffeb14568d8 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   20.253165] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007fbac483ee5d
[   20.253427] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   20.253719] RBP: 00007ffeb14568f0 R08: 0000000000000800 R09: 0000000000000800
[   20.253980] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffeb1456a08
[   20.254278] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007fbac4a80000
[   20.254545]  </TASK>
[   20.254640] irq event stamp: 0
[   20.254758] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   20.254986] hardirqs last disabled at (0): [<ffffffff8122f2d1>] copy_process+0x1c51/0x7140
[   20.255322] softirqs last  enabled at (0): [<ffffffff8122f312>] copy_process+0x1c92/0x7140
[   20.255626] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   20.255874] ---[ end trace 0000000000000000 ]---
[   20.258549] iommufd_mock iommufd_mock177: Adding to iommu group 177
[   20.258837] iommufd_mock iommufd_mock177: Removing from iommu group 177
[   20.260065] general protection fault, probably for non-canonical address 0xdffffc0000000006: 0000 [#178] PREEMPT SMP KASAN NOPTI
[   20.260513] KASAN: null-ptr-deref in range [0x0000000000000030-0x0000000000000037]
[   20.260802] CPU: 0 PID: 898 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   20.261120] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   20.261531] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   20.261749] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   20.262415] RSP: 0018:ffff888011c6fba8 EFLAGS: 00010206
[   20.262612] RAX: dffffc0000000000 RBX: ffff88800eef1000 RCX: 0000000000000000
[   20.262879] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   20.263140] RBP: ffff888011c6fbc0 R08: 0000000000000001 R09: ffffed10023d0005
[   20.263401] R10: ffff888011e8002b R11: ffff88806ca45a00 R12: 0000000000000000
[   20.263662] R13: ffffffff85cc0180 R14: ffff88801679afe0 R15: ffffffff87070ae0
[   20.263923] FS:  00007f97de1e4600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   20.264218] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   20.264431] CR2: 00007fa281a7b008 CR3: 000000001def4000 CR4: 0000000000750ef0
[   20.264693] PKRU: 55555554
[   20.264797] Call Trace:
[   20.264892]  <TASK>
[   20.264977]  ? show_regs+0x6e/0x80
[   20.265114]  ? die_addr+0x45/0xb0
[   20.265249]  ? exc_general_protection+0x159/0x250
[   20.265435]  ? asm_exc_general_protection+0x2b/0x30
[   20.265623]  ? sysfs_remove_link_from_group+0x21/0x90
[   20.265816]  ? sysfs_remove_link_from_group+0x37/0x90
[   20.266009]  ? sysfs_remove_link_from_group+0x21/0x90
[   20.266201]  iommu_device_unlink+0x85/0xd0
[   20.266360]  iommu_deinit_device+0x11f/0x4c0
[   20.266527]  __iommu_group_remove_device+0x26b/0x300
[   20.266720]  iommu_group_remove_device+0x8a/0xb0
[   20.266906]  iommufd_test+0x1f1a/0x2d10
[   20.267050]  ? __pfx_lock_release+0x10/0x10
[   20.267207]  ? __pfx_lock_acquire+0x10/0x10
[   20.267366]  ? __pfx_iommufd_test+0x10/0x10
[   20.267523]  ? __sanitizer_cov_trace_const_cmp8+0x1c/0x30
[   20.267724]  iommufd_fops_ioctl+0x377/0x510
[   20.267883]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   20.268059]  ? trace_hardirqs_on+0x26/0x120
[   20.268218]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   20.268448]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   20.268632]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   20.268831]  ? security_file_ioctl+0x9d/0xd0
[   20.268995]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   20.269171]  __x64_sys_ioctl+0x1b9/0x230
[   20.269320]  do_syscall_64+0x3c/0x90
[   20.269455]  entry_SYSCALL_64_after_hwframe+0x6e/0xd8
[   20.269641] RIP: 0033:0x7f97dde3ee5d
[   20.269775] Code: ff c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d 93 af 1b 00 f7 d8 64 89 01 48
[   20.270423] RSP: 002b:00007ffd542c8718 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   20.270697] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f97dde3ee5d
[   20.270961] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   20.271215] RBP: 00007ffd542c8730 R08: 0000000000000800 R09: 0000000000000800
[   20.271484] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffd542c8848
[   20.271744] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f97de225000
[   20.272003]  </TASK>
[   20.272087] Modules linked in:
[   20.272274] ---[ end trace 0000000000000000 ]---
[   20.272447] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   20.272660] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   20.273321] RSP: 0018:ffff88802457fba8 EFLAGS: 00010206
[   20.273511] RAX: dffffc0000000000 RBX: ffff888014f9b000 RCX: 0000000000000000
[   20.273765] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   20.274019] RBP: ffff88802457fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   20.274273] R10: ffff88800aad88df R11: 0000000000000001 R12: 0000000000000000
[   20.274526] R13: ffffffff85cc0180 R14: ffff8880109b6ac0 R15: ffffffff87070ae0
[   20.274826] FS:  00007f97de1e4600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   20.275134] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   20.275408] CR2: 00007fa281a7b008 CR3: 000000001def4000 CR4: 0000000000750ef0
[   20.275668] PKRU: 55555554
[   20.276296] ------------[ cut here ]------------
[   20.276481] WARNING: CPU: 0 PID: 898 at drivers/iommu/iommufd/main.c:258 iommufd_fops_release+0x2a3/0x300
[   20.276873] Modules linked in:
[   20.276996] CPU: 0 PID: 898 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   20.277355] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   20.277808] RIP: 0010:iommufd_fops_release+0x2a3/0x300
[   20.278002] Code: 45 d0 65 48 2b 04 25 28 00 00 00 75 54 48 81 c4 88 00 00 00 31 c0 5b 41 5c 41 5d 41 5e 41 5f 5d c3 cc cc cc cc e8 ad 4f 0a fe <0f> 0b eb a6 e8 74 23 67 fe e9 f6 fe ff ff 48 89 85 50 ff ff ff e8
[   20.278734] RSP: 0018:ffff888011c6fc00 EFLAGS: 00010293
[   20.278933] RAX: 0000000000000000 RBX: ffff88801248ab08 RCX: 0000000000000000
[   20.279242] RDX: ffff888012c30000 RSI: ffffffff835563e3 RDI: ffffffff86702b40
[   20.279502] RBP: ffff888011c6fcb0 R08: 0000000000000000 R09: fffffbfff0eb2644
[   20.279807] R10: ffffffff87593227 R11: ffff88801311ae00 R12: 0000000000000000
[   20.280067] R13: ffff88801355a698 R14: ffff888011c6fc48 R15: ffffffff83556140
[   20.280380] FS:  0000000000000000(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   20.280673] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   20.280898] CR2: 00007fa281a7b008 CR3: 000000000687e000 CR4: 0000000000750ef0
[   20.281187] PKRU: 55555554
[   20.281291] Call Trace:
[   20.281390]  <TASK>
[   20.281486]  ? show_regs+0x6e/0x80
[   20.281650]  ? __warn+0xef/0x340
[   20.281778]  ? report_bug+0x25e/0x4b0
[   20.281921]  ? iommufd_fops_release+0x2a3/0x300
[   20.282142]  ? report_bug+0x2cb/0x4b0
[   20.282288]  ? handle_bug+0x46/0x90
[   20.282424]  ? exc_invalid_op+0x1d/0x50
[   20.282597]  ? asm_exc_invalid_op+0x1f/0x30
[   20.282781]  ? __pfx_iommufd_fops_release+0x10/0x10
[   20.282967]  ? iommufd_fops_release+0x2a3/0x300
[   20.283140]  ? iommufd_fops_release+0x2a3/0x300
[   20.283314]  ? __pfx_iommufd_fops_release+0x10/0x10
[   20.283504]  ? rcu_is_watching+0x19/0xc0
[   20.283698]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   20.283901]  ? __pfx_iommufd_fops_release+0x10/0x10
[   20.284096]  __fput+0x424/0xaf0
[   20.284251]  ____fput+0x1f/0x30
[   20.284376]  task_work_run+0x19d/0x2b0
[   20.284522]  ? __pfx_task_work_run+0x10/0x10
[   20.284737]  ? __sanitizer_cov_trace_const_cmp1+0x1e/0x30
[   20.284939]  ? switch_task_namespaces+0xa9/0xe0
[   20.285113]  do_exit+0xac9/0x2790
[   20.285255]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   20.285526]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   20.285712]  ? __pfx_do_exit+0x10/0x10
[   20.285907]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   20.286109]  ? security_file_ioctl+0x9d/0xd0
[   20.286275]  make_task_dead+0x182/0x3c0
[   20.286468]  rewind_stack_and_make_dead+0x17/0x20
[   20.286656] RIP: 0033:0x7f97dde3ee5d
[   20.286796] Code: Unable to access opcode bytes at 0x7f97dde3ee33.
[   20.287021] RSP: 002b:00007ffd542c8718 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   20.287304] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f97dde3ee5d
[   20.287604] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   20.287866] RBP: 00007ffd542c8730 R08: 0000000000000800 R09: 0000000000000800
[   20.288170] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffd542c8848
[   20.288434] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f97de225000
[   20.288742]  </TASK>
[   20.288829] irq event stamp: 0
[   20.288945] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   20.289225] hardirqs last disabled at (0): [<ffffffff8122f2d1>] copy_process+0x1c51/0x7140
[   20.289526] softirqs last  enabled at (0): [<ffffffff8122f312>] copy_process+0x1c92/0x7140
[   20.289876] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   20.290105] ---[ end trace 0000000000000000 ]---
[   20.292786] iommufd_mock iommufd_mock178: Adding to iommu group 178
[   20.293041] iommufd_mock iommufd_mock178: Removing from iommu group 178
[   20.293303] general protection fault, probably for non-canonical address 0xdffffc0000000006: 0000 [#179] PREEMPT SMP KASAN NOPTI
[   20.293749] KASAN: null-ptr-deref in range [0x0000000000000030-0x0000000000000037]
[   20.294023] CPU: 0 PID: 899 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   20.294339] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   20.294754] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   20.294971] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   20.295632] RSP: 0018:ffff88800cf97ba8 EFLAGS: 00010206
[   20.295827] RAX: dffffc0000000000 RBX: ffff8880158e7000 RCX: 0000000000000000
[   20.296087] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   20.296346] RBP: ffff88800cf97bc0 R08: 0000000000000001 R09: ffffed100155b11b
[   20.296605] R10: ffff88800aad88df R11: 5f6466756d6d6f69 R12: 0000000000000000
[   20.296864] R13: ffffffff85cc0180 R14: ffff88801032e6c0 R15: ffffffff87070ae0
[   20.297124] FS:  00007fbe75fa8600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   20.297416] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   20.297628] CR2: 0000000020000080 CR3: 000000000efe6000 CR4: 0000000000750ef0
[   20.297889] PKRU: 55555554
[   20.297993] Call Trace:
[   20.298087]  <TASK>
[   20.298171]  ? show_regs+0x6e/0x80
[   20.298308]  ? die_addr+0x45/0xb0
[   20.298442]  ? exc_general_protection+0x159/0x250
[   20.298628]  ? asm_exc_general_protection+0x2b/0x30
[   20.298817]  ? sysfs_remove_link_from_group+0x21/0x90
[   20.299009]  ? sysfs_remove_link_from_group+0x37/0x90
[   20.299201]  ? sysfs_remove_link_from_group+0x21/0x90
[   20.299394]  iommu_device_unlink+0x85/0xd0
[   20.299552]  iommu_deinit_device+0x11f/0x4c0
[   20.299719]  __iommu_group_remove_device+0x26b/0x300
[   20.299910]  iommu_group_remove_device+0x8a/0xb0
[   20.300088]  iommufd_test+0x1f1a/0x2d10
[   20.300235]  ? __pfx_lock_release+0x10/0x10
[   20.300396]  ? __pfx_lock_acquire+0x10/0x10
[   20.300558]  ? __pfx_iommufd_test+0x10/0x10
[   20.300719]  ? __sanitizer_cov_trace_const_cmp8+0x1c/0x30
[   20.300925]  iommufd_fops_ioctl+0x377/0x510
[   20.301087]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   20.301267]  ? trace_hardirqs_on+0x26/0x120
[   20.301431]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   20.301665]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   20.301853]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   20.302056]  ? security_file_ioctl+0x9d/0xd0
[   20.302223]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   20.302403]  __x64_sys_ioctl+0x1b9/0x230
[   20.302554]  do_syscall_64+0x3c/0x90
[   20.302692]  entry_SYSCALL_64_after_hwframe+0x6e/0xd8
[   20.302887] RIP: 0033:0x7fbe75c3ee5d
[   20.303023] Code: ff c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d 93 af 1b 00 f7 d8 64 89 01 48
[   20.303670] RSP: 002b:00007ffc499578c8 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   20.303941] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007fbe75c3ee5d
[   20.304194] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   20.304448] RBP: 00007ffc499578e0 R08: 0000000000000800 R09: 0000000000000800
[   20.304701] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffc499579f8
[   20.304955] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007fbe75fe9000
[   20.305213]  </TASK>
[   20.305297] Modules linked in:
[   20.305488] ---[ end trace 0000000000000000 ]---
[   20.305661] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   20.305873] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   20.306535] RSP: 0018:ffff88802457fba8 EFLAGS: 00010206
[   20.306735] RAX: dffffc0000000000 RBX: ffff888014f9b000 RCX: 0000000000000000
[   20.306999] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   20.307282] RBP: ffff88802457fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   20.307570] R10: ffff88800aad88df R11: 0000000000000001 R12: 0000000000000000
[   20.307831] R13: ffffffff85cc0180 R14: ffff8880109b6ac0 R15: ffffffff87070ae0
[   20.308145] FS:  00007fbe75fa8600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   20.308437] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   20.308703] CR2: 0000000020000080 CR3: 000000000efe6000 CR4: 0000000000750ef0
[   20.308958] PKRU: 55555554
[   20.309371] ------------[ cut here ]------------
[   20.309543] WARNING: CPU: 0 PID: 899 at drivers/iommu/iommufd/main.c:258 iommufd_fops_release+0x2a3/0x300
[   20.309940] Modules linked in:
[   20.310059] CPU: 0 PID: 899 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   20.310421] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   20.310853] RIP: 0010:iommufd_fops_release+0x2a3/0x300
[   20.311073] Code: 45 d0 65 48 2b 04 25 28 00 00 00 75 54 48 81 c4 88 00 00 00 31 c0 5b 41 5c 41 5d 41 5e 41 5f 5d c3 cc cc cc cc e8 ad 4f 0a fe <0f> 0b eb a6 e8 74 23 67 fe e9 f6 fe ff ff 48 89 85 50 ff ff ff e8
[   20.311782] RSP: 0018:ffff88800cf97c00 EFLAGS: 00010293
[   20.311976] RAX: 0000000000000000 RBX: ffff88800fe06d08 RCX: 0000000000000000
[   20.312236] RDX: ffff888011e84a00 RSI: ffffffff835563e3 RDI: ffffffff86702b40
[   20.312495] RBP: ffff88800cf97cb0 R08: 0000000000000000 R09: fffffbfff0eb2644
[   20.312754] R10: ffffffff87593227 R11: ffff888018bf8000 R12: 0000000000000000
[   20.313014] R13: ffff888012f30698 R14: ffff88800cf97c48 R15: ffffffff83556140
[   20.313274] FS:  0000000000000000(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   20.313566] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   20.313778] CR2: 0000000020000080 CR3: 000000000687e000 CR4: 0000000000750ef0
[   20.314038] PKRU: 55555554
[   20.314144] Call Trace:
[   20.314236]  <TASK>
[   20.314318]  ? show_regs+0x6e/0x80
[   20.314450]  ? __warn+0xef/0x340
[   20.314586]  ? report_bug+0x25e/0x4b0
[   20.314733]  ? iommufd_fops_release+0x2a3/0x300
[   20.314909]  ? report_bug+0x2cb/0x4b0
[   20.315055]  ? handle_bug+0x46/0x90
[   20.315190]  ? exc_invalid_op+0x1d/0x50
[   20.315338]  ? asm_exc_invalid_op+0x1f/0x30
[   20.315496]  ? __pfx_iommufd_fops_release+0x10/0x10
[   20.315683]  ? iommufd_fops_release+0x2a3/0x300
[   20.315855]  ? iommufd_fops_release+0x2a3/0x300
[   20.316030]  ? __pfx_iommufd_fops_release+0x10/0x10
[   20.316214]  ? rcu_is_watching+0x19/0xc0
[   20.316366]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   20.316569]  ? __pfx_iommufd_fops_release+0x10/0x10
[   20.316753]  __fput+0x424/0xaf0
[   20.316881]  ____fput+0x1f/0x30
[   20.317006]  task_work_run+0x19d/0x2b0
[   20.317152]  ? __pfx_task_work_run+0x10/0x10
[   20.317315]  ? __sanitizer_cov_trace_const_cmp1+0x1e/0x30
[   20.317517]  ? switch_task_namespaces+0xa9/0xe0
[   20.317691]  do_exit+0xac9/0x2790
[   20.317821]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   20.318053]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   20.318239]  ? __pfx_do_exit+0x10/0x10
[   20.318383]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   20.318592]  ? security_file_ioctl+0x9d/0xd0
[   20.318761]  make_task_dead+0x182/0x3c0
[   20.318910]  rewind_stack_and_make_dead+0x17/0x20
[   20.319090] RIP: 0033:0x7fbe75c3ee5d
[   20.319227] Code: Unable to access opcode bytes at 0x7fbe75c3ee33.
[   20.319451] RSP: 002b:00007ffc499578c8 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   20.319727] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007fbe75c3ee5d
[   20.319986] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   20.320244] RBP: 00007ffc499578e0 R08: 0000000000000800 R09: 0000000000000800
[   20.320503] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffc499579f8
[   20.320762] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007fbe75fe9000
[   20.321027]  </TASK>
[   20.321113] irq event stamp: 0
[   20.321229] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   20.321458] hardirqs last disabled at (0): [<ffffffff8122f2d1>] copy_process+0x1c51/0x7140
[   20.321759] softirqs last  enabled at (0): [<ffffffff8122f312>] copy_process+0x1c92/0x7140
[   20.322060] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   20.322290] ---[ end trace 0000000000000000 ]---
[   20.324813] iommufd_mock iommufd_mock179: Adding to iommu group 179
[   20.325067] iommufd_mock iommufd_mock179: Removing from iommu group 179
[   20.325327] general protection fault, probably for non-canonical address 0xdffffc0000000006: 0000 [#180] PREEMPT SMP KASAN NOPTI
[   20.325739] KASAN: null-ptr-deref in range [0x0000000000000030-0x0000000000000037]
[   20.326007] CPU: 0 PID: 900 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   20.326315] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   20.326721] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   20.326943] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   20.327589] RSP: 0018:ffff888013e0fba8 EFLAGS: 00010206
[   20.327780] RAX: dffffc0000000000 RBX: ffff88801659a000 RCX: 0000000000000000
[   20.328033] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   20.328286] RBP: ffff888013e0fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   20.328540] R10: ffff88800aad88df R11: 5f6466756d6d6f69 R12: 0000000000000000
[   20.328793] R13: ffffffff85cc0180 R14: ffff88800bc88980 R15: ffffffff87070ae0
[   20.329047] FS:  00007f1180530600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   20.329332] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   20.329539] CR2: 0000000020000080 CR3: 000000000efe6000 CR4: 0000000000750ef0
[   20.329793] PKRU: 55555554
[   20.329895] Call Trace:
[   20.329987]  <TASK>
[   20.330068]  ? show_regs+0x6e/0x80
[   20.330201]  ? die_addr+0x45/0xb0
[   20.330332]  ? exc_general_protection+0x159/0x250
[   20.330513]  ? asm_exc_general_protection+0x2b/0x30
[   20.330701]  ? sysfs_remove_link_from_group+0x21/0x90
[   20.330898]  ? sysfs_remove_link_from_group+0x37/0x90
[   20.331085]  ? sysfs_remove_link_from_group+0x21/0x90
[   20.331273]  iommu_device_unlink+0x85/0xd0
[   20.331427]  iommu_deinit_device+0x11f/0x4c0
[   20.331589]  __iommu_group_remove_device+0x26b/0x300
[   20.331776]  iommu_group_remove_device+0x8a/0xb0
[   20.331950]  iommufd_test+0x1f1a/0x2d10
[   20.332094]  ? __pfx_lock_release+0x10/0x10
[   20.332251]  ? __pfx_lock_acquire+0x10/0x10
[   20.332410]  ? __pfx_iommufd_test+0x10/0x10
[   20.332569]  ? __sanitizer_cov_trace_const_cmp8+0x1c/0x30
[   20.332772]  iommufd_fops_ioctl+0x377/0x510
[   20.332931]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   20.333106]  ? trace_hardirqs_on+0x26/0x120
[   20.333266]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   20.333495]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   20.333678]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   20.333877]  ? security_file_ioctl+0x9d/0xd0
[   20.334040]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   20.334216]  __x64_sys_ioctl+0x1b9/0x230
[   20.334363]  do_syscall_64+0x3c/0x90
[   20.334498]  entry_SYSCALL_64_after_hwframe+0x6e/0xd8
[   20.334688] RIP: 0033:0x7f118023ee5d
[   20.334827] Code: ff c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d 93 af 1b 00 f7 d8 64 89 01 48
[   20.335480] RSP: 002b:00007fff1e630678 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   20.335750] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f118023ee5d
[   20.336004] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   20.336257] RBP: 00007fff1e630690 R08: 0000000000000800 R09: 0000000000000800
[   20.336511] R10: 0000000000000000 R11: 0000000000000213 R12: 00007fff1e6307a8
[   20.336764] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f1180571000
[   20.337024]  </TASK>
[   20.337108] Modules linked in:
[   20.337293] ---[ end trace 0000000000000000 ]---
[   20.337465] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   20.337680] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   20.338327] RSP: 0018:ffff88802457fba8 EFLAGS: 00010206
[   20.338516] RAX: dffffc0000000000 RBX: ffff888014f9b000 RCX: 0000000000000000
[   20.338788] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   20.339046] RBP: ffff88802457fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   20.339303] R10: ffff88800aad88df R11: 0000000000000001 R12: 0000000000000000
[   20.339557] R13: ffffffff85cc0180 R14: ffff8880109b6ac0 R15: ffffffff87070ae0
[   20.339810] FS:  00007f1180530600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   20.340095] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   20.340302] CR2: 0000000020000080 CR3: 000000000efe6000 CR4: 0000000000750ef0
[   20.340556] PKRU: 55555554
[   20.340916] ------------[ cut here ]------------
[   20.341085] WARNING: CPU: 0 PID: 900 at drivers/iommu/iommufd/main.c:258 iommufd_fops_release+0x2a3/0x300
[   20.341426] Modules linked in:
[   20.341541] CPU: 0 PID: 900 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   20.341849] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   20.342247] RIP: 0010:iommufd_fops_release+0x2a3/0x300
[   20.342436] Code: 45 d0 65 48 2b 04 25 28 00 00 00 75 54 48 81 c4 88 00 00 00 31 c0 5b 41 5c 41 5d 41 5e 41 5f 5d c3 cc cc cc cc e8 ad 4f 0a fe <0f> 0b eb a6 e8 74 23 67 fe e9 f6 fe ff ff 48 89 85 50 ff ff ff e8
[   20.343214] RSP: 0018:ffff888013e0fc00 EFLAGS: 00010293
[   20.343405] RAX: 0000000000000000 RBX: ffff88800fe06908 RCX: 0000000000000000
[   20.343658] RDX: ffff8880138b4a00 RSI: ffffffff835563e3 RDI: ffffffff86702b40
[   20.343914] RBP: ffff888013e0fcb0 R08: 0000000000000000 R09: fffffbfff0eb2644
[   20.344169] R10: ffffffff87593227 R11: ffff888019410200 R12: 0000000000000000
[   20.344422] R13: ffff88800fe55598 R14: ffff888013e0fc48 R15: ffffffff83556140
[   20.344675] FS:  0000000000000000(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   20.344961] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   20.345168] CR2: 0000000020000080 CR3: 000000000687e000 CR4: 0000000000750ef0
[   20.345422] PKRU: 55555554
[   20.345523] Call Trace:
[   20.345615]  <TASK>
[   20.345697]  ? show_regs+0x6e/0x80
[   20.345828]  ? __warn+0xef/0x340
[   20.345953]  ? report_bug+0x25e/0x4b0
[   20.346093]  ? iommufd_fops_release+0x2a3/0x300
[   20.346262]  ? report_bug+0x2cb/0x4b0
[   20.346404]  ? handle_bug+0x46/0x90
[   20.346536]  ? exc_invalid_op+0x1d/0x50
[   20.346689]  ? asm_exc_invalid_op+0x1f/0x30
[   20.346866]  ? __pfx_iommufd_fops_release+0x10/0x10
[   20.347054]  ? iommufd_fops_release+0x2a3/0x300
[   20.347227]  ? iommufd_fops_release+0x2a3/0x300
[   20.347399]  ? __pfx_iommufd_fops_release+0x10/0x10
[   20.347579]  ? rcu_is_watching+0x19/0xc0
[   20.347745]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   20.347943]  ? __pfx_iommufd_fops_release+0x10/0x10
[   20.348123]  __fput+0x424/0xaf0
[   20.348249]  ____fput+0x1f/0x30
[   20.348371]  task_work_run+0x19d/0x2b0
[   20.348514]  ? __pfx_task_work_run+0x10/0x10
[   20.348674]  ? __sanitizer_cov_trace_const_cmp1+0x1e/0x30
[   20.348871]  ? switch_task_namespaces+0xa9/0xe0
[   20.349041]  do_exit+0xac9/0x2790
[   20.349169]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   20.349396]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   20.349578]  ? __pfx_do_exit+0x10/0x10
[   20.349719]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   20.349916]  ? security_file_ioctl+0x9d/0xd0
[   20.350078]  make_task_dead+0x182/0x3c0
[   20.350224]  rewind_stack_and_make_dead+0x17/0x20
[   20.350399] RIP: 0033:0x7f118023ee5d
[   20.350535] Code: Unable to access opcode bytes at 0x7f118023ee33.
[   20.350769] RSP: 002b:00007fff1e630678 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   20.351047] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f118023ee5d
[   20.351301] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   20.351555] RBP: 00007fff1e630690 R08: 0000000000000800 R09: 0000000000000800
[   20.351809] R10: 0000000000000000 R11: 0000000000000213 R12: 00007fff1e6307a8
[   20.352062] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f1180571000
[   20.352321]  </TASK>
[   20.352405] irq event stamp: 0
[   20.352519] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   20.352744] hardirqs last disabled at (0): [<ffffffff8122f2d1>] copy_process+0x1c51/0x7140
[   20.353066] softirqs last  enabled at (0): [<ffffffff8122f312>] copy_process+0x1c92/0x7140
[   20.353360] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   20.353584] ---[ end trace 0000000000000000 ]---
[   20.356240] iommufd_mock iommufd_mock180: Adding to iommu group 180
[   20.356489] iommufd_mock iommufd_mock180: Removing from iommu group 180
[   20.356743] general protection fault, probably for non-canonical address 0xdffffc0000000006: 0000 [#181] PREEMPT SMP KASAN NOPTI
[   20.357148] KASAN: null-ptr-deref in range [0x0000000000000030-0x0000000000000037]
[   20.357419] CPU: 0 PID: 901 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   20.357729] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   20.358128] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   20.358337] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   20.358994] RSP: 0018:ffff8880170d7ba8 EFLAGS: 00010206
[   20.359189] RAX: dffffc0000000000 RBX: ffff888016598000 RCX: 0000000000000000
[   20.359444] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   20.359698] RBP: ffff8880170d7bc0 R08: 0000000000000001 R09: ffffed100155b11b
[   20.359957] R10: ffff88800aad88df R11: 5f6466756d6d6f69 R12: 0000000000000000
[   20.360214] R13: ffffffff85cc0180 R14: ffff888024c35420 R15: ffffffff87070ae0
[   20.360469] FS:  00007ff2d5719600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   20.360756] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   20.360965] CR2: 0000000020000080 CR3: 000000000efe6000 CR4: 0000000000750ef0
[   20.361221] PKRU: 55555554
[   20.361323] Call Trace:
[   20.361416]  <TASK>
[   20.361498]  ? show_regs+0x6e/0x80
[   20.361632]  ? die_addr+0x45/0xb0
[   20.361764]  ? exc_general_protection+0x159/0x250
[   20.361945]  ? asm_exc_general_protection+0x2b/0x30
[   20.362130]  ? sysfs_remove_link_from_group+0x21/0x90
[   20.362319]  ? sysfs_remove_link_from_group+0x37/0x90
[   20.362508]  ? sysfs_remove_link_from_group+0x21/0x90
[   20.362700]  iommu_device_unlink+0x85/0xd0
[   20.362872]  iommu_deinit_device+0x11f/0x4c0
[   20.363035]  __iommu_group_remove_device+0x26b/0x300
[   20.363224]  iommu_group_remove_device+0x8a/0xb0
[   20.363399]  iommufd_test+0x1f1a/0x2d10
[   20.363544]  ? __pfx_lock_release+0x10/0x10
[   20.363702]  ? __pfx_lock_acquire+0x10/0x10
[   20.363862]  ? __pfx_iommufd_test+0x10/0x10
[   20.364020]  ? __sanitizer_cov_trace_const_cmp8+0x1c/0x30
[   20.364223]  iommufd_fops_ioctl+0x377/0x510
[   20.364383]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   20.364560]  ? trace_hardirqs_on+0x26/0x120
[   20.364720]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   20.364951]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   20.365136]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   20.365337]  ? security_file_ioctl+0x9d/0xd0
[   20.365501]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   20.365678]  __x64_sys_ioctl+0x1b9/0x230
[   20.365827]  do_syscall_64+0x3c/0x90
[   20.365963]  entry_SYSCALL_64_after_hwframe+0x6e/0xd8
[   20.366150] RIP: 0033:0x7ff2d543ee5d
[   20.366285] Code: ff c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d 93 af 1b 00 f7 d8 64 89 01 48
[   20.366948] RSP: 002b:00007ffea6b8ad58 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   20.367220] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007ff2d543ee5d
[   20.367475] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   20.367731] RBP: 00007ffea6b8ad70 R08: 0000000000000800 R09: 0000000000000800
[   20.367986] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffea6b8ae88
[   20.368241] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007ff2d575a000
[   20.368502]  </TASK>
[   20.368587] Modules linked in:
[   20.368799] ---[ end trace 0000000000000000 ]---
[   20.368973] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   20.369187] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   20.369853] RSP: 0018:ffff88802457fba8 EFLAGS: 00010206
[   20.370048] RAX: dffffc0000000000 RBX: ffff888014f9b000 RCX: 0000000000000000
[   20.370309] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   20.370568] RBP: ffff88802457fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   20.370842] R10: ffff88800aad88df R11: 0000000000000001 R12: 0000000000000000
[   20.371096] R13: ffffffff85cc0180 R14: ffff8880109b6ac0 R15: ffffffff87070ae0
[   20.371351] FS:  00007ff2d5719600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   20.371639] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   20.371847] CR2: 0000000020000080 CR3: 000000000efe6000 CR4: 0000000000750ef0
[   20.372103] PKRU: 55555554
[   20.372467] ------------[ cut here ]------------
[   20.372637] WARNING: CPU: 0 PID: 901 at drivers/iommu/iommufd/main.c:258 iommufd_fops_release+0x2a3/0x300
[   20.372980] Modules linked in:
[   20.373096] CPU: 0 PID: 901 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   20.373406] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   20.373808] RIP: 0010:iommufd_fops_release+0x2a3/0x300
[   20.373998] Code: 45 d0 65 48 2b 04 25 28 00 00 00 75 54 48 81 c4 88 00 00 00 31 c0 5b 41 5c 41 5d 41 5e 41 5f 5d c3 cc cc cc cc e8 ad 4f 0a fe <0f> 0b eb a6 e8 74 23 67 fe e9 f6 fe ff ff 48 89 85 50 ff ff ff e8
[   20.374669] RSP: 0018:ffff8880170d7c00 EFLAGS: 00010293
[   20.374866] RAX: 0000000000000000 RBX: ffff88800fe06208 RCX: 0000000000000000
[   20.375126] RDX: ffff8880121d8000 RSI: ffffffff835563e3 RDI: ffffffff86702b40
[   20.375381] RBP: ffff8880170d7cb0 R08: 0000000000000000 R09: fffffbfff0eb2644
[   20.375637] R10: ffffffff87593227 R11: ffff888013042800 R12: 0000000000000000
[   20.375892] R13: ffff88800fe55318 R14: ffff8880170d7c48 R15: ffffffff83556140
[   20.376147] FS:  0000000000000000(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   20.376434] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   20.376643] CR2: 0000000020000080 CR3: 000000000687e000 CR4: 0000000000750ef0
[   20.376899] PKRU: 55555554
[   20.377001] Call Trace:
[   20.377094]  <TASK>
[   20.377176]  ? show_regs+0x6e/0x80
[   20.377308]  ? __warn+0xef/0x340
[   20.377433]  ? report_bug+0x25e/0x4b0
[   20.377574]  ? iommufd_fops_release+0x2a3/0x300
[   20.377744]  ? report_bug+0x2cb/0x4b0
[   20.377887]  ? handle_bug+0x46/0x90
[   20.378021]  ? exc_invalid_op+0x1d/0x50
[   20.378166]  ? asm_exc_invalid_op+0x1f/0x30
[   20.378323]  ? __pfx_iommufd_fops_release+0x10/0x10
[   20.378506]  ? iommufd_fops_release+0x2a3/0x300
[   20.378686]  ? iommufd_fops_release+0x2a3/0x300
[   20.378864]  ? __pfx_iommufd_fops_release+0x10/0x10
[   20.379049]  ? rcu_is_watching+0x19/0xc0
[   20.379203]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   20.379403]  ? __pfx_iommufd_fops_release+0x10/0x10
[   20.379584]  __fput+0x424/0xaf0
[   20.379711]  ____fput+0x1f/0x30
[   20.379834]  task_work_run+0x19d/0x2b0
[   20.379978]  ? __pfx_task_work_run+0x10/0x10
[   20.380139]  ? __sanitizer_cov_trace_const_cmp1+0x1e/0x30
[   20.380338]  ? switch_task_namespaces+0xa9/0xe0
[   20.380509]  do_exit+0xac9/0x2790
[   20.380637]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   20.380867]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   20.381050]  ? __pfx_do_exit+0x10/0x10
[   20.381192]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   20.381390]  ? security_file_ioctl+0x9d/0xd0
[   20.381554]  make_task_dead+0x182/0x3c0
[   20.381700]  rewind_stack_and_make_dead+0x17/0x20
[   20.381877] RIP: 0033:0x7ff2d543ee5d
[   20.382011] Code: Unable to access opcode bytes at 0x7ff2d543ee33.
[   20.382232] RSP: 002b:00007ffea6b8ad58 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   20.382503] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007ff2d543ee5d
[   20.382773] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   20.383037] RBP: 00007ffea6b8ad70 R08: 0000000000000800 R09: 0000000000000800
[   20.383299] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffea6b8ae88
[   20.383555] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007ff2d575a000
[   20.383815]  </TASK>
[   20.383899] irq event stamp: 0
[   20.384013] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   20.384240] hardirqs last disabled at (0): [<ffffffff8122f2d1>] copy_process+0x1c51/0x7140
[   20.384536] softirqs last  enabled at (0): [<ffffffff8122f312>] copy_process+0x1c92/0x7140
[   20.384832] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   20.385058] ---[ end trace 0000000000000000 ]---
[   20.387795] iommufd_mock iommufd_mock181: Adding to iommu group 181
[   20.388043] iommufd_mock iommufd_mock181: Removing from iommu group 181
[   20.388299] general protection fault, probably for non-canonical address 0xdffffc0000000006: 0000 [#182] PREEMPT SMP KASAN NOPTI
[   20.388707] KASAN: null-ptr-deref in range [0x0000000000000030-0x0000000000000037]
[   20.388977] CPU: 0 PID: 902 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   20.389287] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   20.389689] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   20.389899] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   20.390551] RSP: 0018:ffff888014ccfba8 EFLAGS: 00010206
[   20.390743] RAX: dffffc0000000000 RBX: ffff88801659e000 RCX: 0000000000000000
[   20.391004] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   20.391259] RBP: ffff888014ccfbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   20.391514] R10: ffff88800aad88df R11: 5f6466756d6d6f69 R12: 0000000000000000
[   20.391770] R13: ffffffff85cc0180 R14: ffff888024c35700 R15: ffffffff87070ae0
[   20.392025] FS:  00007efcde091600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   20.392313] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   20.392521] CR2: 0000000020000080 CR3: 000000000efe6000 CR4: 0000000000750ef0
[   20.392777] PKRU: 55555554
[   20.392880] Call Trace:
[   20.392973]  <TASK>
[   20.393054]  ? show_regs+0x6e/0x80
[   20.393189]  ? die_addr+0x45/0xb0
[   20.393321]  ? exc_general_protection+0x159/0x250
[   20.393503]  ? asm_exc_general_protection+0x2b/0x30
[   20.393688]  ? sysfs_remove_link_from_group+0x21/0x90
[   20.393877]  ? sysfs_remove_link_from_group+0x37/0x90
[   20.394066]  ? sysfs_remove_link_from_group+0x21/0x90
[   20.394254]  iommu_device_unlink+0x85/0xd0
[   20.394409]  iommu_deinit_device+0x11f/0x4c0
[   20.394573]  __iommu_group_remove_device+0x26b/0x300
[   20.394764]  iommu_group_remove_device+0x8a/0xb0
[   20.394938]  iommufd_test+0x1f1a/0x2d10
[   20.395083]  ? __pfx_lock_release+0x10/0x10
[   20.395241]  ? __pfx_lock_acquire+0x10/0x10
[   20.395401]  ? __pfx_iommufd_test+0x10/0x10
[   20.395559]  ? __sanitizer_cov_trace_const_cmp8+0x1c/0x30
[   20.395761]  iommufd_fops_ioctl+0x377/0x510
[   20.395921]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   20.396097]  ? trace_hardirqs_on+0x26/0x120
[   20.396258]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   20.396488]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   20.396673]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   20.396873]  ? security_file_ioctl+0x9d/0xd0
[   20.397037]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   20.397214]  __x64_sys_ioctl+0x1b9/0x230
[   20.397363]  do_syscall_64+0x3c/0x90
[   20.397499]  entry_SYSCALL_64_after_hwframe+0x6e/0xd8
[   20.397686] RIP: 0033:0x7efcdde3ee5d
[   20.397821] Code: ff c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d 93 af 1b 00 f7 d8 64 89 01 48
[   20.398472] RSP: 002b:00007ffc9b0c1dd8 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   20.398744] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007efcdde3ee5d
[   20.399004] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   20.399259] RBP: 00007ffc9b0c1df0 R08: 0000000000000800 R09: 0000000000000800
[   20.399515] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffc9b0c1f08
[   20.399770] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007efcde0d2000
[   20.400030]  </TASK>
[   20.400114] Modules linked in:
[   20.400271] ---[ end trace 0000000000000000 ]---
[   20.400441] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   20.400651] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   20.401302] RSP: 0018:ffff88802457fba8 EFLAGS: 00010206
[   20.401492] RAX: dffffc0000000000 RBX: ffff888014f9b000 RCX: 0000000000000000
[   20.401748] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   20.402003] RBP: ffff88802457fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   20.402258] R10: ffff88800aad88df R11: 0000000000000001 R12: 0000000000000000
[   20.402512] R13: ffffffff85cc0180 R14: ffff8880109b6ac0 R15: ffffffff87070ae0
[   20.402778] FS:  00007efcde091600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   20.403067] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   20.403275] CR2: 0000000020000080 CR3: 000000000efe6000 CR4: 0000000000750ef0
[   20.403531] PKRU: 55555554
[   20.403889] ------------[ cut here ]------------
[   20.404059] WARNING: CPU: 0 PID: 902 at drivers/iommu/iommufd/main.c:258 iommufd_fops_release+0x2a3/0x300
[   20.404402] Modules linked in:
[   20.404518] CPU: 0 PID: 902 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   20.404828] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   20.405229] RIP: 0010:iommufd_fops_release+0x2a3/0x300
[   20.405420] Code: 45 d0 65 48 2b 04 25 28 00 00 00 75 54 48 81 c4 88 00 00 00 31 c0 5b 41 5c 41 5d 41 5e 41 5f 5d c3 cc cc cc cc e8 ad 4f 0a fe <0f> 0b eb a6 e8 74 23 67 fe e9 f6 fe ff ff 48 89 85 50 ff ff ff e8
[   20.406071] RSP: 0018:ffff888014ccfc00 EFLAGS: 00010293
[   20.406261] RAX: 0000000000000000 RBX: ffff88800fe06f08 RCX: 0000000000000000
[   20.406516] RDX: ffff8880121dca00 RSI: ffffffff835563e3 RDI: ffffffff86702b40
[   20.406783] RBP: ffff888014ccfcb0 R08: 0000000000000000 R09: fffffbfff0eb2644
[   20.407039] R10: ffffffff87593227 R11: ffff88801394e400 R12: 0000000000000000
[   20.407295] R13: ffff888012c00198 R14: ffff888014ccfc48 R15: ffffffff83556140
[   20.407550] FS:  0000000000000000(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   20.407837] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   20.408046] CR2: 0000000020000080 CR3: 000000000687e000 CR4: 0000000000750ef0
[   20.408302] PKRU: 55555554
[   20.408404] Call Trace:
[   20.408496]  <TASK>
[   20.408578]  ? show_regs+0x6e/0x80
[   20.408710]  ? __warn+0xef/0x340
[   20.408836]  ? report_bug+0x25e/0x4b0
[   20.408976]  ? iommufd_fops_release+0x2a3/0x300
[   20.409147]  ? report_bug+0x2cb/0x4b0
[   20.409289]  ? handle_bug+0x46/0x90
[   20.409423]  ? exc_invalid_op+0x1d/0x50
[   20.409568]  ? asm_exc_invalid_op+0x1f/0x30
[   20.409725]  ? __pfx_iommufd_fops_release+0x10/0x10
[   20.409909]  ? iommufd_fops_release+0x2a3/0x300
[   20.410079]  ? iommufd_fops_release+0x2a3/0x300
[   20.410250]  ? __pfx_iommufd_fops_release+0x10/0x10
[   20.410431]  ? rcu_is_watching+0x19/0xc0
[   20.410592]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   20.410794]  ? __pfx_iommufd_fops_release+0x10/0x10
[   20.410975]  __fput+0x424/0xaf0
[   20.411103]  ____fput+0x1f/0x30
[   20.411226]  task_work_run+0x19d/0x2b0
[   20.411370]  ? __pfx_task_work_run+0x10/0x10
[   20.411531]  ? __sanitizer_cov_trace_const_cmp1+0x1e/0x30
[   20.411742]  ? switch_task_namespaces+0xa9/0xe0
[   20.411917]  do_exit+0xac9/0x2790
[   20.412045]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   20.412274]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   20.412458]  ? __pfx_do_exit+0x10/0x10
[   20.412600]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   20.412798]  ? security_file_ioctl+0x9d/0xd0
[   20.412962]  make_task_dead+0x182/0x3c0
[   20.413108]  rewind_stack_and_make_dead+0x17/0x20
[   20.413285] RIP: 0033:0x7efcdde3ee5d
[   20.413419] Code: Unable to access opcode bytes at 0x7efcdde3ee33.
[   20.413640] RSP: 002b:00007ffc9b0c1dd8 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   20.413911] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007efcdde3ee5d
[   20.414167] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   20.414421] RBP: 00007ffc9b0c1df0 R08: 0000000000000800 R09: 0000000000000800
[   20.414683] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffc9b0c1f08
[   20.414941] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007efcde0d2000
[   20.415203]  </TASK>
[   20.415288] irq event stamp: 0
[   20.415403] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   20.415628] hardirqs last disabled at (0): [<ffffffff8122f2d1>] copy_process+0x1c51/0x7140
[   20.415924] softirqs last  enabled at (0): [<ffffffff8122f312>] copy_process+0x1c92/0x7140
[   20.416220] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   20.416445] ---[ end trace 0000000000000000 ]---
[   20.418985] iommufd_mock iommufd_mock182: Adding to iommu group 182
[   20.419237] iommufd_mock iommufd_mock182: Removing from iommu group 182
[   20.419492] general protection fault, probably for non-canonical address 0xdffffc0000000006: 0000 [#183] PREEMPT SMP KASAN NOPTI
[   20.419899] KASAN: null-ptr-deref in range [0x0000000000000030-0x0000000000000037]
[   20.420169] CPU: 0 PID: 903 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   20.420480] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   20.420881] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   20.421092] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   20.421743] RSP: 0018:ffff8880245c7ba8 EFLAGS: 00010206
[   20.421935] RAX: dffffc0000000000 RBX: ffff88801659d000 RCX: 0000000000000000
[   20.422190] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   20.422444] RBP: ffff8880245c7bc0 R08: 0000000000000001 R09: ffffed100155b11b
[   20.422701] R10: ffff88800aad88df R11: 5f6466756d6d6f69 R12: 0000000000000000
[   20.422962] R13: ffffffff85cc0180 R14: ffff888024c35e40 R15: ffffffff87070ae0
[   20.423218] FS:  00007f0e7a994600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   20.423506] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   20.423714] CR2: 0000000020000080 CR3: 000000000efe6000 CR4: 0000000000750ef0
[   20.423970] PKRU: 55555554
[   20.424073] Call Trace:
[   20.424166]  <TASK>
[   20.424247]  ? show_regs+0x6e/0x80
[   20.424382]  ? die_addr+0x45/0xb0
[   20.424513]  ? exc_general_protection+0x159/0x250
[   20.424695]  ? asm_exc_general_protection+0x2b/0x30
[   20.424880]  ? sysfs_remove_link_from_group+0x21/0x90
[   20.425069]  ? sysfs_remove_link_from_group+0x37/0x90
[   20.425257]  ? sysfs_remove_link_from_group+0x21/0x90
[   20.425446]  iommu_device_unlink+0x85/0xd0
[   20.425600]  iommu_deinit_device+0x11f/0x4c0
[   20.425764]  __iommu_group_remove_device+0x26b/0x300
[   20.425952]  iommu_group_remove_device+0x8a/0xb0
[   20.426127]  iommufd_test+0x1f1a/0x2d10
[   20.426271]  ? __pfx_lock_release+0x10/0x10
[   20.426429]  ? __pfx_lock_acquire+0x10/0x10
[   20.426589]  ? __pfx_iommufd_test+0x10/0x10
[   20.426750]  ? __sanitizer_cov_trace_const_cmp8+0x1c/0x30
[   20.426952]  iommufd_fops_ioctl+0x377/0x510
[   20.427111]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   20.427287]  ? trace_hardirqs_on+0x26/0x120
[   20.427447]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   20.427678]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   20.427862]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   20.428062]  ? security_file_ioctl+0x9d/0xd0
[   20.428226]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   20.428403]  __x64_sys_ioctl+0x1b9/0x230
[   20.428551]  do_syscall_64+0x3c/0x90
[   20.428687]  entry_SYSCALL_64_after_hwframe+0x6e/0xd8
[   20.428873] RIP: 0033:0x7f0e7a63ee5d
[   20.429008] Code: ff c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d 93 af 1b 00 f7 d8 64 89 01 48
[   20.429658] RSP: 002b:00007ffe2e99a7c8 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   20.429929] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f0e7a63ee5d
[   20.430184] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   20.430439] RBP: 00007ffe2e99a7e0 R08: 0000000000000800 R09: 0000000000000800
[   20.430694] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffe2e99a8f8
[   20.430951] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f0e7a9d5000
[   20.431211]  </TASK>
[   20.431295] Modules linked in:
[   20.431511] ---[ end trace 0000000000000000 ]---
[   20.431681] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   20.431890] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   20.432540] RSP: 0018:ffff88802457fba8 EFLAGS: 00010206
[   20.432733] RAX: dffffc0000000000 RBX: ffff888014f9b000 RCX: 0000000000000000
[   20.432991] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   20.433247] RBP: ffff88802457fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   20.433502] R10: ffff88800aad88df R11: 0000000000000001 R12: 0000000000000000
[   20.433757] R13: ffffffff85cc0180 R14: ffff8880109b6ac0 R15: ffffffff87070ae0
[   20.434012] FS:  00007f0e7a994600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   20.434298] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   20.434506] CR2: 0000000020000080 CR3: 000000000efe6000 CR4: 0000000000750ef0
[   20.434771] PKRU: 55555554
[   20.435124] ------------[ cut here ]------------
[   20.435294] WARNING: CPU: 0 PID: 903 at drivers/iommu/iommufd/main.c:258 iommufd_fops_release+0x2a3/0x300
[   20.435636] Modules linked in:
[   20.435751] CPU: 0 PID: 903 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   20.436060] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   20.436461] RIP: 0010:iommufd_fops_release+0x2a3/0x300
[   20.436651] Code: 45 d0 65 48 2b 04 25 28 00 00 00 75 54 48 81 c4 88 00 00 00 31 c0 5b 41 5c 41 5d 41 5e 41 5f 5d c3 cc cc cc cc e8 ad 4f 0a fe <0f> 0b eb a6 e8 74 23 67 fe e9 f6 fe ff ff 48 89 85 50 ff ff ff e8
[   20.437300] RSP: 0018:ffff8880245c7c00 EFLAGS: 00010293
[   20.437491] RAX: 0000000000000000 RBX: ffff88800fe06308 RCX: 0000000000000000
[   20.437745] RDX: ffff88800bb28000 RSI: ffffffff835563e3 RDI: ffffffff86702b40
[   20.438000] RBP: ffff8880245c7cb0 R08: 0000000000000000 R09: fffffbfff0eb2644
[   20.438254] R10: ffffffff87593227 R11: ffff888018abfc00 R12: 0000000000000000
[   20.438508] R13: ffff888012c01098 R14: ffff8880245c7c48 R15: ffffffff83556140
[   20.438777] FS:  0000000000000000(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   20.439064] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   20.439272] CR2: 0000000020000080 CR3: 000000000687e000 CR4: 0000000000750ef0
[   20.439532] PKRU: 55555554
[   20.439633] Call Trace:
[   20.439726]  <TASK>
[   20.439807]  ? show_regs+0x6e/0x80
[   20.439939]  ? __warn+0xef/0x340
[   20.440064]  ? report_bug+0x25e/0x4b0
[   20.440205]  ? iommufd_fops_release+0x2a3/0x300
[   20.440375]  ? report_bug+0x2cb/0x4b0
[   20.440517]  ? handle_bug+0x46/0x90
[   20.440651]  ? exc_invalid_op+0x1d/0x50
[   20.440903]  ? asm_exc_invalid_op+0x1f/0x30
[   20.441059]  ? __pfx_iommufd_fops_release+0x10/0x10
[   20.441242]  ? iommufd_fops_release+0x2a3/0x300
[   20.441412]  ? iommufd_fops_release+0x2a3/0x300
[   20.441583]  ? __pfx_iommufd_fops_release+0x10/0x10
[   20.441763]  ? rcu_is_watching+0x19/0xc0
[   20.441912]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   20.442111]  ? __pfx_iommufd_fops_release+0x10/0x10
[   20.442292]  __fput+0x424/0xaf0
[   20.442417]  ____fput+0x1f/0x30
[   20.442540]  task_work_run+0x19d/0x2b0
[   20.442700]  ? __pfx_task_work_run+0x10/0x10
[   20.442865]  ? __sanitizer_cov_trace_const_cmp1+0x1e/0x30
[   20.443064]  ? switch_task_namespaces+0xa9/0xe0
[   20.443235]  do_exit+0xac9/0x2790
[   20.443363]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   20.443592]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   20.443775]  ? __pfx_do_exit+0x10/0x10
[   20.443916]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   20.444134]  ? security_file_ioctl+0x9d/0xd0
[   20.444299]  make_task_dead+0x182/0x3c0
[   20.444446]  rewind_stack_and_make_dead+0x17/0x20
[   20.444621] RIP: 0033:0x7f0e7a63ee5d
[   20.444756] Code: Unable to access opcode bytes at 0x7f0e7a63ee33.
[   20.444976] RSP: 002b:00007ffe2e99a7c8 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   20.445248] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f0e7a63ee5d
[   20.445502] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   20.445757] RBP: 00007ffe2e99a7e0 R08: 0000000000000800 R09: 0000000000000800
[   20.446011] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffe2e99a8f8
[   20.446266] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f0e7a9d5000
[   20.446525]  </TASK>
[   20.446617] irq event stamp: 0
[   20.446732] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   20.446961] hardirqs last disabled at (0): [<ffffffff8122f2d1>] copy_process+0x1c51/0x7140
[   20.447257] softirqs last  enabled at (0): [<ffffffff8122f312>] copy_process+0x1c92/0x7140
[   20.447553] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   20.447778] ---[ end trace 0000000000000000 ]---
[   20.450221] iommufd_mock iommufd_mock183: Adding to iommu group 183
[   20.450469] iommufd_mock iommufd_mock183: Removing from iommu group 183
[   20.450754] general protection fault, probably for non-canonical address 0xdffffc0000000006: 0000 [#184] PREEMPT SMP KASAN NOPTI
[   20.451163] KASAN: null-ptr-deref in range [0x0000000000000030-0x0000000000000037]
[   20.451433] CPU: 0 PID: 904 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   20.451744] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   20.452146] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   20.452357] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   20.453030] RSP: 0018:ffff88800bc17ba8 EFLAGS: 00010206
[   20.453223] RAX: dffffc0000000000 RBX: ffff88801659f000 RCX: 0000000000000000
[   20.453479] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   20.453734] RBP: ffff88800bc17bc0 R08: 0000000000000001 R09: ffffed100155b11b
[   20.453989] R10: ffff88800aad88df R11: 5f6466756d6d6f69 R12: 0000000000000000
[   20.454243] R13: ffffffff85cc0180 R14: ffff888024c35660 R15: ffffffff87070ae0
[   20.454498] FS:  00007f1a34cfb600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   20.454798] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   20.455006] CR2: 0000000020000080 CR3: 000000000efe6000 CR4: 0000000000750ef0
[   20.455263] PKRU: 55555554
[   20.455365] Call Trace:
[   20.455458]  <TASK>
[   20.455539]  ? show_regs+0x6e/0x80
[   20.455674]  ? die_addr+0x45/0xb0
[   20.455805]  ? exc_general_protection+0x159/0x250
[   20.455987]  ? asm_exc_general_protection+0x2b/0x30
[   20.456172]  ? sysfs_remove_link_from_group+0x21/0x90
[   20.456361]  ? sysfs_remove_link_from_group+0x37/0x90
[   20.456550]  ? sysfs_remove_link_from_group+0x21/0x90
[   20.456738]  iommu_device_unlink+0x85/0xd0
[   20.456893]  iommu_deinit_device+0x11f/0x4c0
[   20.457057]  __iommu_group_remove_device+0x26b/0x300
[   20.457244]  iommu_group_remove_device+0x8a/0xb0
[   20.457419]  iommufd_test+0x1f1a/0x2d10
[   20.457565]  ? __pfx_lock_release+0x10/0x10
[   20.457726]  ? __pfx_lock_acquire+0x10/0x10
[   20.457886]  ? __pfx_iommufd_test+0x10/0x10
[   20.458044]  ? __sanitizer_cov_trace_const_cmp8+0x1c/0x30
[   20.458245]  iommufd_fops_ioctl+0x377/0x510
[   20.458405]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   20.458581]  ? trace_hardirqs_on+0x26/0x120
[   20.458741]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   20.458979]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   20.459164]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   20.459365]  ? security_file_ioctl+0x9d/0xd0
[   20.459528]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   20.459705]  __x64_sys_ioctl+0x1b9/0x230
[   20.459853]  do_syscall_64+0x3c/0x90
[   20.459989]  entry_SYSCALL_64_after_hwframe+0x6e/0xd8
[   20.460179] RIP: 0033:0x7f1a34a3ee5d
[   20.460316] Code: ff c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d 93 af 1b 00 f7 d8 64 89 01 48
[   20.460968] RSP: 002b:00007fff5d48f3a8 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   20.461239] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f1a34a3ee5d
[   20.461495] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   20.461750] RBP: 00007fff5d48f3c0 R08: 0000000000000800 R09: 0000000000000800
[   20.462005] R10: 0000000000000000 R11: 0000000000000213 R12: 00007fff5d48f4d8
[   20.462260] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f1a34d3c000
[   20.462520]  </TASK>
[   20.462605] Modules linked in:
[   20.462857] ---[ end trace 0000000000000000 ]---
[   20.463028] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   20.463237] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   20.463889] RSP: 0018:ffff88802457fba8 EFLAGS: 00010206
[   20.464080] RAX: dffffc0000000000 RBX: ffff888014f9b000 RCX: 0000000000000000
[   20.464335] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   20.464591] RBP: ffff88802457fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   20.464846] R10: ffff88800aad88df R11: 0000000000000001 R12: 0000000000000000
[   20.465100] R13: ffffffff85cc0180 R14: ffff8880109b6ac0 R15: ffffffff87070ae0
[   20.465356] FS:  00007f1a34cfb600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   20.465643] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   20.465851] CR2: 0000000020000080 CR3: 000000000efe6000 CR4: 0000000000750ef0
[   20.466107] PKRU: 55555554
[   20.466469] ------------[ cut here ]------------
[   20.466648] WARNING: CPU: 0 PID: 904 at drivers/iommu/iommufd/main.c:258 iommufd_fops_release+0x2a3/0x300
[   20.466996] Modules linked in:
[   20.467112] CPU: 0 PID: 904 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   20.467423] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   20.467824] RIP: 0010:iommufd_fops_release+0x2a3/0x300
[   20.468015] Code: 45 d0 65 48 2b 04 25 28 00 00 00 75 54 48 81 c4 88 00 00 00 31 c0 5b 41 5c 41 5d 41 5e 41 5f 5d c3 cc cc cc cc e8 ad 4f 0a fe <0f> 0b eb a6 e8 74 23 67 fe e9 f6 fe ff ff 48 89 85 50 ff ff ff e8
[   20.468665] RSP: 0018:ffff88800bc17c00 EFLAGS: 00010293
[   20.468856] RAX: 0000000000000000 RBX: ffff88800fe06c08 RCX: 0000000000000000
[   20.469111] RDX: ffff88800bb2a500 RSI: ffffffff835563e3 RDI: ffffffff86702b40
[   20.469366] RBP: ffff88800bc17cb0 R08: 0000000000000000 R09: fffffbfff0eb2644
[   20.469621] R10: ffffffff87593227 R11: ffff888013525e00 R12: 0000000000000000
[   20.469876] R13: ffff888011ce6418 R14: ffff88800bc17c48 R15: ffffffff83556140
[   20.470131] FS:  0000000000000000(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   20.470418] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   20.470640] CR2: 0000000020000080 CR3: 000000000687e000 CR4: 0000000000750ef0
[   20.470899] PKRU: 55555554
[   20.471002] Call Trace:
[   20.471095]  <TASK>
[   20.471177]  ? show_regs+0x6e/0x80
[   20.471309]  ? __warn+0xef/0x340
[   20.471434]  ? report_bug+0x25e/0x4b0
[   20.471576]  ? iommufd_fops_release+0x2a3/0x300
[   20.471747]  ? report_bug+0x2cb/0x4b0
[   20.471889]  ? handle_bug+0x46/0x90
[   20.472023]  ? exc_invalid_op+0x1d/0x50
[   20.472169]  ? asm_exc_invalid_op+0x1f/0x30
[   20.472324]  ? __pfx_iommufd_fops_release+0x10/0x10
[   20.472508]  ? iommufd_fops_release+0x2a3/0x300
[   20.472678]  ? iommufd_fops_release+0x2a3/0x300
[   20.472850]  ? __pfx_iommufd_fops_release+0x10/0x10
[   20.473031]  ? rcu_is_watching+0x19/0xc0
[   20.473181]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   20.473381]  ? __pfx_iommufd_fops_release+0x10/0x10
[   20.473562]  __fput+0x424/0xaf0
[   20.473689]  ____fput+0x1f/0x30
[   20.473812]  task_work_run+0x19d/0x2b0
[   20.473955]  ? __pfx_task_work_run+0x10/0x10
[   20.474116]  ? __sanitizer_cov_trace_const_cmp1+0x1e/0x30
[   20.474314]  ? switch_task_namespaces+0xa9/0xe0
[   20.474485]  do_exit+0xac9/0x2790
[   20.474620]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   20.474854]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   20.475037]  ? __pfx_do_exit+0x10/0x10
[   20.475180]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   20.475378]  ? security_file_ioctl+0x9d/0xd0
[   20.475542]  make_task_dead+0x182/0x3c0
[   20.475689]  rewind_stack_and_make_dead+0x17/0x20
[   20.475880] RIP: 0033:0x7f1a34a3ee5d
[   20.476014] Code: Unable to access opcode bytes at 0x7f1a34a3ee33.
[   20.476235] RSP: 002b:00007fff5d48f3a8 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   20.476507] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f1a34a3ee5d
[   20.476762] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   20.477017] RBP: 00007fff5d48f3c0 R08: 0000000000000800 R09: 0000000000000800
[   20.477273] R10: 0000000000000000 R11: 0000000000000213 R12: 00007fff5d48f4d8
[   20.477530] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f1a34d3c000
[   20.477791]  </TASK>
[   20.477875] irq event stamp: 0
[   20.477990] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   20.478216] hardirqs last disabled at (0): [<ffffffff8122f2d1>] copy_process+0x1c51/0x7140
[   20.478511] softirqs last  enabled at (0): [<ffffffff8122f312>] copy_process+0x1c92/0x7140
[   20.478825] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   20.479052] ---[ end trace 0000000000000000 ]---
[   20.481604] iommufd_mock iommufd_mock184: Adding to iommu group 184
[   20.481853] iommufd_mock iommufd_mock184: Removing from iommu group 184
[   20.482109] general protection fault, probably for non-canonical address 0xdffffc0000000006: 0000 [#185] PREEMPT SMP KASAN NOPTI
[   20.482516] KASAN: null-ptr-deref in range [0x0000000000000030-0x0000000000000037]
[   20.482809] CPU: 0 PID: 905 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   20.483119] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   20.483520] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   20.483731] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   20.484379] RSP: 0018:ffff8880109efba8 EFLAGS: 00010206
[   20.484570] RAX: dffffc0000000000 RBX: ffff88801659c000 RCX: 0000000000000000
[   20.484825] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   20.485079] RBP: ffff8880109efbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   20.485333] R10: ffff88800aad88df R11: 5f6466756d6d6f69 R12: 0000000000000000
[   20.485588] R13: ffffffff85cc0180 R14: ffff8880247bda00 R15: ffffffff87070ae0
[   20.485842] FS:  00007fec22ef0600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   20.486129] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   20.486337] CR2: 0000000020000080 CR3: 000000000efe6000 CR4: 0000000000750ef0
[   20.486593] PKRU: 55555554
[   20.486695] Call Trace:
[   20.486792]  <TASK>
[   20.486876]  ? show_regs+0x6e/0x80
[   20.487010]  ? die_addr+0x45/0xb0
[   20.487141]  ? exc_general_protection+0x159/0x250
[   20.487322]  ? asm_exc_general_protection+0x2b/0x30
[   20.487506]  ? sysfs_remove_link_from_group+0x21/0x90
[   20.487694]  ? sysfs_remove_link_from_group+0x37/0x90
[   20.487882]  ? sysfs_remove_link_from_group+0x21/0x90
[   20.488070]  iommu_device_unlink+0x85/0xd0
[   20.488225]  iommu_deinit_device+0x11f/0x4c0
[   20.488388]  __iommu_group_remove_device+0x26b/0x300
[   20.488576]  iommu_group_remove_device+0x8a/0xb0
[   20.488750]  iommufd_test+0x1f1a/0x2d10
[   20.488894]  ? __pfx_lock_release+0x10/0x10
[   20.489052]  ? __pfx_lock_acquire+0x10/0x10
[   20.489211]  ? __pfx_iommufd_test+0x10/0x10
[   20.489369]  ? __sanitizer_cov_trace_const_cmp8+0x1c/0x30
[   20.489570]  iommufd_fops_ioctl+0x377/0x510
[   20.489729]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   20.489905]  ? trace_hardirqs_on+0x26/0x120
[   20.490065]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   20.490295]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   20.490479]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   20.490678]  ? security_file_ioctl+0x9d/0xd0
[   20.490851]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   20.491028]  __x64_sys_ioctl+0x1b9/0x230
[   20.491176]  do_syscall_64+0x3c/0x90
[   20.491312]  entry_SYSCALL_64_after_hwframe+0x6e/0xd8
[   20.491498] RIP: 0033:0x7fec22c3ee5d
[   20.491633] Code: ff c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d 93 af 1b 00 f7 d8 64 89 01 48
[   20.492282] RSP: 002b:00007ffe20292958 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   20.492553] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007fec22c3ee5d
[   20.492808] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   20.493062] RBP: 00007ffe20292970 R08: 0000000000000800 R09: 0000000000000800
[   20.493317] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffe20292a88
[   20.493572] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007fec22f31000
[   20.493831]  </TASK>
[   20.493916] Modules linked in:
[   20.494057] ---[ end trace 0000000000000000 ]---
[   20.494226] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   20.494435] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   20.495111] RSP: 0018:ffff88802457fba8 EFLAGS: 00010206
[   20.495302] RAX: dffffc0000000000 RBX: ffff888014f9b000 RCX: 0000000000000000
[   20.495557] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   20.495811] RBP: ffff88802457fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   20.496066] R10: ffff88800aad88df R11: 0000000000000001 R12: 0000000000000000
[   20.496340] R13: ffffffff85cc0180 R14: ffff8880109b6ac0 R15: ffffffff87070ae0
[   20.496699] FS:  00007fec22ef0600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   20.496997] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   20.497279] CR2: 0000000020000080 CR3: 000000000efe6000 CR4: 0000000000750ef0
[   20.497536] PKRU: 55555554
[   20.498054] ------------[ cut here ]------------
[   20.498242] WARNING: CPU: 0 PID: 905 at drivers/iommu/iommufd/main.c:258 iommufd_fops_release+0x2a3/0x300
[   20.498658] Modules linked in:
[   20.498780] CPU: 0 PID: 905 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   20.499116] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   20.499563] RIP: 0010:iommufd_fops_release+0x2a3/0x300
[   20.499776] Code: 45 d0 65 48 2b 04 25 28 00 00 00 75 54 48 81 c4 88 00 00 00 31 c0 5b 41 5c 41 5d 41 5e 41 5f 5d c3 cc cc cc cc e8 ad 4f 0a fe <0f> 0b eb a6 e8 74 23 67 fe e9 f6 fe ff ff 48 89 85 50 ff ff ff e8
[   20.500468] RSP: 0018:ffff8880109efc00 EFLAGS: 00010293
[   20.500682] RAX: 0000000000000000 RBX: ffff88800fe06b08 RCX: 0000000000000000
[   20.500975] RDX: ffff888010564a00 RSI: ffffffff835563e3 RDI: ffffffff86702b40
[   20.501251] RBP: ffff8880109efcb0 R08: 0000000000000000 R09: fffffbfff0eb2644
[   20.501546] R10: ffffffff87593227 R11: ffff888013760c00 R12: 0000000000000000
[   20.501829] R13: ffff8880111c1d18 R14: ffff8880109efc48 R15: ffffffff83556140
[   20.502118] FS:  0000000000000000(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   20.502458] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   20.502680] CR2: 0000000020000080 CR3: 000000000687e000 CR4: 0000000000750ef0
[   20.502959] PKRU: 55555554
[   20.503089] Call Trace:
[   20.503185]  <TASK>
[   20.503268]  ? show_regs+0x6e/0x80
[   20.503403]  ? __warn+0xef/0x340
[   20.503531]  ? report_bug+0x25e/0x4b0
[   20.503675]  ? iommufd_fops_release+0x2a3/0x300
[   20.503893]  ? report_bug+0x2cb/0x4b0
[   20.504039]  ? handle_bug+0x46/0x90
[   20.504175]  ? exc_invalid_op+0x1d/0x50
[   20.504328]  ? asm_exc_invalid_op+0x1f/0x30
[   20.504526]  ? __pfx_iommufd_fops_release+0x10/0x10
[   20.504714]  ? iommufd_fops_release+0x2a3/0x300
[   20.504895]  ? iommufd_fops_release+0x2a3/0x300
[   20.505104]  ? __pfx_iommufd_fops_release+0x10/0x10
[   20.505289]  ? rcu_is_watching+0x19/0xc0
[   20.505450]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   20.505693]  ? __pfx_iommufd_fops_release+0x10/0x10
[   20.505878]  __fput+0x424/0xaf0
[   20.506007]  ____fput+0x1f/0x30
[   20.506175]  task_work_run+0x19d/0x2b0
[   20.506322]  ? __pfx_task_work_run+0x10/0x10
[   20.506487]  ? __sanitizer_cov_trace_const_cmp1+0x1e/0x30
[   20.506745]  ? switch_task_namespaces+0xa9/0xe0
[   20.506926]  do_exit+0xac9/0x2790
[   20.507057]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   20.507291]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   20.507478]  ? __pfx_do_exit+0x10/0x10
[   20.507647]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   20.507875]  ? security_file_ioctl+0x9d/0xd0
[   20.508043]  make_task_dead+0x182/0x3c0
[   20.508212]  rewind_stack_and_make_dead+0x17/0x20
[   20.508419] RIP: 0033:0x7fec22c3ee5d
[   20.508557] Code: Unable to access opcode bytes at 0x7fec22c3ee33.
[   20.508792] RSP: 002b:00007ffe20292958 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   20.509101] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007fec22c3ee5d
[   20.509381] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   20.509674] RBP: 00007ffe20292970 R08: 0000000000000800 R09: 0000000000000800
[   20.509953] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffe20292a88
[   20.510244] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007fec22f31000
[   20.510522]  </TASK>
[   20.510651] irq event stamp: 0
[   20.510771] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   20.511003] hardirqs last disabled at (0): [<ffffffff8122f2d1>] copy_process+0x1c51/0x7140
[   20.511306] softirqs last  enabled at (0): [<ffffffff8122f312>] copy_process+0x1c92/0x7140
[   20.511658] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   20.511889] ---[ end trace 0000000000000000 ]---
[   20.514819] iommufd_mock iommufd_mock185: Adding to iommu group 185
[   20.515074] iommufd_mock iommufd_mock185: Removing from iommu group 185
[   20.515342] general protection fault, probably for non-canonical address 0xdffffc0000000006: 0000 [#186] PREEMPT SMP KASAN NOPTI
[   20.515768] KASAN: null-ptr-deref in range [0x0000000000000030-0x0000000000000037]
[   20.516081] CPU: 0 PID: 906 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   20.516399] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   20.516811] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   20.517028] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   20.517694] RSP: 0018:ffff88800bc17ba8 EFLAGS: 00010206
[   20.517890] RAX: dffffc0000000000 RBX: ffff888016599000 RCX: 0000000000000000
[   20.518152] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   20.518416] RBP: ffff88800bc17bc0 R08: 0000000000000001 R09: ffffed100155b11b
[   20.518678] R10: ffff88800aad88df R11: ffff88806cb45a00 R12: 0000000000000000
[   20.518944] R13: ffffffff85cc0180 R14: ffff8880247bd360 R15: ffffffff87070ae0
[   20.519201] FS:  00007f37125f3600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   20.519489] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   20.519698] CR2: 0000000020000080 CR3: 0000000018a9e000 CR4: 0000000000750ef0
[   20.519954] PKRU: 55555554
[   20.520057] Call Trace:
[   20.520150]  <TASK>
[   20.520232]  ? show_regs+0x6e/0x80
[   20.520367]  ? die_addr+0x45/0xb0
[   20.520499]  ? exc_general_protection+0x159/0x250
[   20.520681]  ? asm_exc_general_protection+0x2b/0x30
[   20.520866]  ? sysfs_remove_link_from_group+0x21/0x90
[   20.521056]  ? sysfs_remove_link_from_group+0x37/0x90
[   20.521244]  ? sysfs_remove_link_from_group+0x21/0x90
[   20.521433]  iommu_device_unlink+0x85/0xd0
[   20.521589]  iommu_deinit_device+0x11f/0x4c0
[   20.521754]  __iommu_group_remove_device+0x26b/0x300
[   20.521942]  iommu_group_remove_device+0x8a/0xb0
[   20.522117]  iommufd_test+0x1f1a/0x2d10
[   20.522262]  ? __pfx_lock_release+0x10/0x10
[   20.522421]  ? __pfx_lock_acquire+0x10/0x10
[   20.522581]  ? __pfx_iommufd_test+0x10/0x10
[   20.522740]  ? __sanitizer_cov_trace_const_cmp8+0x1c/0x30
[   20.522945]  iommufd_fops_ioctl+0x377/0x510
[   20.523105]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   20.523283]  ? trace_hardirqs_on+0x26/0x120
[   20.523443]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   20.523674]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   20.523859]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   20.524059]  ? security_file_ioctl+0x9d/0xd0
[   20.524223]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   20.524400]  __x64_sys_ioctl+0x1b9/0x230
[   20.524549]  do_syscall_64+0x3c/0x90
[   20.524686]  entry_SYSCALL_64_after_hwframe+0x6e/0xd8
[   20.524873] RIP: 0033:0x7f371223ee5d
[   20.525008] Code: ff c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d 93 af 1b 00 f7 d8 64 89 01 48
[   20.525659] RSP: 002b:00007ffebcbaf0b8 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   20.525933] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f371223ee5d
[   20.526189] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   20.526445] RBP: 00007ffebcbaf0d0 R08: 0000000000000800 R09: 0000000000000800
[   20.526701] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffebcbaf1e8
[   20.526959] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f3712634000
[   20.527220]  </TASK>
[   20.527307] Modules linked in:
[   20.527531] ---[ end trace 0000000000000000 ]---
[   20.527713] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   20.527928] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   20.528580] RSP: 0018:ffff88802457fba8 EFLAGS: 00010206
[   20.528771] RAX: dffffc0000000000 RBX: ffff888014f9b000 RCX: 0000000000000000
[   20.529026] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   20.529342] RBP: ffff88802457fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   20.529600] R10: ffff88800aad88df R11: 0000000000000001 R12: 0000000000000000
[   20.529865] R13: ffffffff85cc0180 R14: ffff8880109b6ac0 R15: ffffffff87070ae0
[   20.530168] FS:  00007f37125f3600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   20.530477] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   20.530730] CR2: 0000000020000080 CR3: 0000000018a9e000 CR4: 0000000000750ef0
[   20.530999] PKRU: 55555554
[   20.531405] ------------[ cut here ]------------
[   20.531576] WARNING: CPU: 0 PID: 906 at drivers/iommu/iommufd/main.c:258 iommufd_fops_release+0x2a3/0x300
[   20.531977] Modules linked in:
[   20.532094] CPU: 0 PID: 906 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   20.532425] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   20.532888] RIP: 0010:iommufd_fops_release+0x2a3/0x300
[   20.533103] Code: 45 d0 65 48 2b 04 25 28 00 00 00 75 54 48 81 c4 88 00 00 00 31 c0 5b 41 5c 41 5d 41 5e 41 5f 5d c3 cc cc cc cc e8 ad 4f 0a fe <0f> 0b eb a6 e8 74 23 67 fe e9 f6 fe ff ff 48 89 85 50 ff ff ff e8
[   20.533791] RSP: 0018:ffff88800bc17c00 EFLAGS: 00010293
[   20.534030] RAX: 0000000000000000 RBX: ffff88800fe06a08 RCX: 0000000000000000
[   20.534285] RDX: ffff888011e82500 RSI: ffffffff835563e3 RDI: ffffffff86702b40
[   20.534559] RBP: ffff88800bc17cb0 R08: 0000000000000000 R09: fffffbfff0eb2644
[   20.534863] R10: ffffffff87593227 R11: ffff888013099a00 R12: 0000000000000000
[   20.535119] R13: ffff8880111c1818 R14: ffff88800bc17c48 R15: ffffffff83556140
[   20.535394] FS:  0000000000000000(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   20.535709] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   20.535936] CR2: 0000000020000080 CR3: 000000000687e000 CR4: 0000000000750ef0
[   20.536220] PKRU: 55555554
[   20.536323] Call Trace:
[   20.536416]  <TASK>
[   20.536510]  ? show_regs+0x6e/0x80
[   20.536670]  ? __warn+0xef/0x340
[   20.536796]  ? report_bug+0x25e/0x4b0
[   20.536937]  ? iommufd_fops_release+0x2a3/0x300
[   20.537150]  ? report_bug+0x2cb/0x4b0
[   20.537294]  ? handle_bug+0x46/0x90
[   20.537427]  ? exc_invalid_op+0x1d/0x50
[   20.537580]  ? asm_exc_invalid_op+0x1f/0x30
[   20.537772]  ? __pfx_iommufd_fops_release+0x10/0x10
[   20.537957]  ? iommufd_fops_release+0x2a3/0x300
[   20.538136]  ? iommufd_fops_release+0x2a3/0x300
[   20.538335]  ? __pfx_iommufd_fops_release+0x10/0x10
[   20.538517]  ? rcu_is_watching+0x19/0xc0
[   20.538675]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   20.538926]  ? __pfx_iommufd_fops_release+0x10/0x10
[   20.539109]  __fput+0x424/0xaf0
[   20.539236]  ____fput+0x1f/0x30
[   20.539360]  task_work_run+0x19d/0x2b0
[   20.539507]  ? __pfx_task_work_run+0x10/0x10
[   20.539671]  ? __sanitizer_cov_trace_const_cmp1+0x1e/0x30
[   20.539911]  ? switch_task_namespaces+0xa9/0xe0
[   20.540084]  do_exit+0xac9/0x2790
[   20.540212]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   20.540484]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   20.540668]  ? __pfx_do_exit+0x10/0x10
[   20.540810]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   20.541052]  ? security_file_ioctl+0x9d/0xd0
[   20.541217]  make_task_dead+0x182/0x3c0
[   20.541364]  rewind_stack_and_make_dead+0x17/0x20
[   20.541583] RIP: 0033:0x7f371223ee5d
[   20.541718] Code: Unable to access opcode bytes at 0x7f371223ee33.
[   20.541944] RSP: 002b:00007ffebcbaf0b8 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   20.542260] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f371223ee5d
[   20.542525] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   20.542832] RBP: 00007ffebcbaf0d0 R08: 0000000000000800 R09: 0000000000000800
[   20.543089] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffebcbaf1e8
[   20.543345] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f3712634000
[   20.543626]  </TASK>
[   20.543740] irq event stamp: 0
[   20.543855] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   20.544082] hardirqs last disabled at (0): [<ffffffff8122f2d1>] copy_process+0x1c51/0x7140
[   20.544432] softirqs last  enabled at (0): [<ffffffff8122f312>] copy_process+0x1c92/0x7140
[   20.544748] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   20.545000] ---[ end trace 0000000000000000 ]---
[   20.547698] iommufd_mock iommufd_mock186: Adding to iommu group 186
[   20.547946] iommufd_mock iommufd_mock186: Removing from iommu group 186
[   20.548203] general protection fault, probably for non-canonical address 0xdffffc0000000006: 0000 [#187] PREEMPT SMP KASAN NOPTI
[   20.548611] KASAN: null-ptr-deref in range [0x0000000000000030-0x0000000000000037]
[   20.548882] CPU: 0 PID: 907 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   20.549193] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   20.549596] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   20.549807] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   20.550471] RSP: 0018:ffff8880245c7ba8 EFLAGS: 00010206
[   20.550682] RAX: dffffc0000000000 RBX: ffff88801659b000 RCX: 0000000000000000
[   20.550943] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   20.551199] RBP: ffff8880245c7bc0 R08: 0000000000000001 R09: ffffed100155b11b
[   20.551454] R10: ffff88800aad88df R11: 5f6466756d6d6f69 R12: 0000000000000000
[   20.551710] R13: ffffffff85cc0180 R14: ffff8880247bd860 R15: ffffffff87070ae0
[   20.551965] FS:  00007f8a1cc5c600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   20.552253] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   20.552462] CR2: 0000000020000080 CR3: 000000000efe6000 CR4: 0000000000750ef0
[   20.552719] PKRU: 55555554
[   20.552821] Call Trace:
[   20.552914]  <TASK>
[   20.552997]  ? show_regs+0x6e/0x80
[   20.553133]  ? die_addr+0x45/0xb0
[   20.553268]  ? exc_general_protection+0x159/0x250
[   20.553450]  ? asm_exc_general_protection+0x2b/0x30
[   20.553636]  ? sysfs_remove_link_from_group+0x21/0x90
[   20.553825]  ? sysfs_remove_link_from_group+0x37/0x90
[   20.554014]  ? sysfs_remove_link_from_group+0x21/0x90
[   20.554203]  iommu_device_unlink+0x85/0xd0
[   20.554358]  iommu_deinit_device+0x11f/0x4c0
[   20.554523]  __iommu_group_remove_device+0x26b/0x300
[   20.554712]  iommu_group_remove_device+0x8a/0xb0
[   20.554891]  iommufd_test+0x1f1a/0x2d10
[   20.555036]  ? __pfx_lock_release+0x10/0x10
[   20.555195]  ? __pfx_lock_acquire+0x10/0x10
[   20.555355]  ? __pfx_iommufd_test+0x10/0x10
[   20.555514]  ? __sanitizer_cov_trace_const_cmp8+0x1c/0x30
[   20.555716]  iommufd_fops_ioctl+0x377/0x510
[   20.555876]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   20.556052]  ? trace_hardirqs_on+0x26/0x120
[   20.556213]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   20.556443]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   20.556628]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   20.556828]  ? security_file_ioctl+0x9d/0xd0
[   20.556992]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   20.557169]  __x64_sys_ioctl+0x1b9/0x230
[   20.557318]  do_syscall_64+0x3c/0x90
[   20.557453]  entry_SYSCALL_64_after_hwframe+0x6e/0xd8
[   20.557641] RIP: 0033:0x7f8a1ca3ee5d
[   20.557776] Code: ff c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d 93 af 1b 00 f7 d8 64 89 01 48
[   20.558426] RSP: 002b:00007ffd8ec38c58 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   20.558698] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f8a1ca3ee5d
[   20.558956] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   20.559211] RBP: 00007ffd8ec38c70 R08: 0000000000000800 R09: 0000000000000800
[   20.559470] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffd8ec38d88
[   20.559727] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f8a1cc9d000
[   20.559987]  </TASK>
[   20.560072] Modules linked in:
[   20.560352] ---[ end trace 0000000000000000 ]---
[   20.560526] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   20.560736] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   20.561388] RSP: 0018:ffff88802457fba8 EFLAGS: 00010206
[   20.561578] RAX: dffffc0000000000 RBX: ffff888014f9b000 RCX: 0000000000000000
[   20.561841] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   20.562146] RBP: ffff88802457fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   20.562403] R10: ffff88800aad88df R11: 0000000000000001 R12: 0000000000000000
[   20.562729] R13: ffffffff85cc0180 R14: ffff8880109b6ac0 R15: ffffffff87070ae0
[   20.563012] FS:  00007f8a1cc5c600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   20.563318] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   20.563563] CR2: 0000000020000080 CR3: 000000000efe6000 CR4: 0000000000750ef0
[   20.563820] PKRU: 55555554
[   20.564234] ------------[ cut here ]------------
[   20.564404] WARNING: CPU: 0 PID: 907 at drivers/iommu/iommufd/main.c:258 iommufd_fops_release+0x2a3/0x300
[   20.564801] Modules linked in:
[   20.564918] CPU: 0 PID: 907 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   20.565275] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   20.565723] RIP: 0010:iommufd_fops_release+0x2a3/0x300
[   20.565914] Code: 45 d0 65 48 2b 04 25 28 00 00 00 75 54 48 81 c4 88 00 00 00 31 c0 5b 41 5c 41 5d 41 5e 41 5f 5d c3 cc cc cc cc e8 ad 4f 0a fe <0f> 0b eb a6 e8 74 23 67 fe e9 f6 fe ff ff 48 89 85 50 ff ff ff e8
[   20.566617] RSP: 0018:ffff8880245c7c00 EFLAGS: 00010293
[   20.566813] RAX: 0000000000000000 RBX: ffff88800fe06408 RCX: 0000000000000000
[   20.567111] RDX: ffff888014758000 RSI: ffffffff835563e3 RDI: ffffffff86702b40
[   20.567367] RBP: ffff8880245c7cb0 R08: 0000000000000000 R09: fffffbfff0eb2644
[   20.567668] R10: ffffffff87593227 R11: ffff888018b37e00 R12: 0000000000000000
[   20.567924] R13: ffff888013a2c918 R14: ffff8880245c7c48 R15: ffffffff83556140
[   20.568230] FS:  0000000000000000(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   20.568518] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   20.568777] CR2: 0000000020000080 CR3: 000000000687e000 CR4: 0000000000750ef0
[   20.569033] PKRU: 55555554
[   20.569136] Call Trace:
[   20.569247]  <TASK>
[   20.569354]  ? show_regs+0x6e/0x80
[   20.569487]  ? __warn+0xef/0x340
[   20.569613]  ? report_bug+0x25e/0x4b0
[   20.569764]  ? iommufd_fops_release+0x2a3/0x300
[   20.569965]  ? report_bug+0x2cb/0x4b0
[   20.570108]  ? handle_bug+0x46/0x90
[   20.570241]  ? exc_invalid_op+0x1d/0x50
[   20.570406]  ? asm_exc_invalid_op+0x1f/0x30
[   20.570591]  ? __pfx_iommufd_fops_release+0x10/0x10
[   20.570769] systemd-journald[136]: Data hash table of /run/log/journal/938775788448454bb5b34822d5730c41/system.journal has a fill level at 75.0 (5446 of 7260 items, 4182016 file size, 767 bytes per hash table item), suggesting rotation.
[   20.570779]  ? iommufd_fops_release+0x2a3/0x300
[   20.571531] systemd-journald[136]: /run/log/journal/938775788448454bb5b34822d5730c41/system.journal: Journal header limits reached or header out-of-date, rotating.
[   20.571689]  ? iommufd_fops_release+0x2a3/0x300
[   20.572371]  ? __pfx_iommufd_fops_release+0x10/0x10
[   20.572552]  ? rcu_is_watching+0x19/0xc0
[   20.572702]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   20.572903]  ? __pfx_iommufd_fops_release+0x10/0x10
[   20.573084]  __fput+0x424/0xaf0
[   20.573210]  ____fput+0x1f/0x30
[   20.573333]  task_work_run+0x19d/0x2b0
[   20.573477]  ? __pfx_task_work_run+0x10/0x10
[   20.573639]  ? __sanitizer_cov_trace_const_cmp1+0x1e/0x30
[   20.573839]  ? switch_task_namespaces+0xa9/0xe0
[   20.574010]  do_exit+0xac9/0x2790
[   20.574139]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   20.574367]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   20.574551]  ? __pfx_do_exit+0x10/0x10
[   20.574703]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   20.574904]  ? security_file_ioctl+0x9d/0xd0
[   20.575069]  make_task_dead+0x182/0x3c0
[   20.575215]  rewind_stack_and_make_dead+0x17/0x20
[   20.575392] RIP: 0033:0x7f8a1ca3ee5d
[   20.575527] Code: Unable to access opcode bytes at 0x7f8a1ca3ee33.
[   20.575748] RSP: 002b:00007ffd8ec38c58 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   20.576020] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f8a1ca3ee5d
[   20.576276] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   20.576532] RBP: 00007ffd8ec38c70 R08: 0000000000000800 R09: 0000000000000800
[   20.576835] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffd8ec38d88
[   20.577091] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f8a1cc9d000
[   20.577394]  </TASK>
[   20.577480] irq event stamp: 0
[   20.577595] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   20.577827] hardirqs last disabled at (0): [<ffffffff8122f2d1>] copy_process+0x1c51/0x7140
[   20.578161] softirqs last  enabled at (0): [<ffffffff8122f312>] copy_process+0x1c92/0x7140
[   20.578505] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   20.578739] ---[ end trace 0000000000000000 ]---
[   20.581369] iommufd_mock iommufd_mock187: Adding to iommu group 187
[   20.581631] iommufd_mock iommufd_mock187: Removing from iommu group 187
[   20.581894] general protection fault, probably for non-canonical address 0xdffffc0000000006: 0000 [#188] PREEMPT SMP KASAN NOPTI
[   20.582302] KASAN: null-ptr-deref in range [0x0000000000000030-0x0000000000000037]
[   20.582572] CPU: 0 PID: 909 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   20.582890] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   20.583327] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   20.583539] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   20.584193] RSP: 0018:ffff8880109efba8 EFLAGS: 00010206
[   20.584385] RAX: dffffc0000000000 RBX: ffff888014cca000 RCX: 0000000000000000
[   20.584640] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   20.584896] RBP: ffff8880109efbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   20.585151] R10: ffff88800aad88df R11: 5f6466756d6d6f69 R12: 0000000000000000
[   20.585406] R13: ffffffff85cc0180 R14: ffff8880247bdee0 R15: ffffffff87070ae0
[   20.585662] FS:  00007f7d5519a600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   20.585950] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   20.586159] CR2: 0000000020000080 CR3: 0000000018a9e000 CR4: 0000000000750ef0
[   20.586416] PKRU: 55555554
[   20.586519] Call Trace:
[   20.586612]  <TASK>
[   20.586694]  ? show_regs+0x6e/0x80
[   20.586832]  ? die_addr+0x45/0xb0
[   20.586964]  ? exc_general_protection+0x159/0x250
[   20.587146]  ? asm_exc_general_protection+0x2b/0x30
[   20.587332]  ? sysfs_remove_link_from_group+0x21/0x90
[   20.587521]  ? sysfs_remove_link_from_group+0x37/0x90
[   20.587710]  ? sysfs_remove_link_from_group+0x21/0x90
[   20.587898]  iommu_device_unlink+0x85/0xd0
[   20.588053]  iommu_deinit_device+0x11f/0x4c0
[   20.588217]  __iommu_group_remove_device+0x26b/0x300
[   20.588406]  iommu_group_remove_device+0x8a/0xb0
[   20.588581]  iommufd_test+0x1f1a/0x2d10
[   20.588725]  ? __pfx_lock_release+0x10/0x10
[   20.588883]  ? __pfx_lock_acquire+0x10/0x10
[   20.589043]  ? __pfx_iommufd_test+0x10/0x10
[   20.589202]  ? __sanitizer_cov_trace_const_cmp8+0x1c/0x30
[   20.589404]  iommufd_fops_ioctl+0x377/0x510
[   20.589564]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   20.589741]  ? trace_hardirqs_on+0x26/0x120
[   20.589902]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   20.590133]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   20.590318]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   20.590518]  ? security_file_ioctl+0x9d/0xd0
[   20.590682]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   20.590869]  __x64_sys_ioctl+0x1b9/0x230
[   20.591026]  do_syscall_64+0x3c/0x90
[   20.591174]  entry_SYSCALL_64_after_hwframe+0x6e/0xd8
[   20.591365] RIP: 0033:0x7f7d54e3ee5d
[   20.591505] Code: ff c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d 93 af 1b 00 f7 d8 64 89 01 48
[   20.592190] RSP: 002b:00007fff07777b98 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   20.592475] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f7d54e3ee5d
[   20.592735] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   20.592991] RBP: 00007fff07777bb0 R08: 0000000000000800 R09: 0000000000000800
[   20.593248] R10: 0000000000000000 R11: 0000000000000213 R12: 00007fff07777cc8
[   20.593504] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f7d551db000
[   20.593768]  </TASK>
[   20.593854] Modules linked in:
[   20.594060] ---[ end trace 0000000000000000 ]---
[   20.594265] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   20.594549] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   20.595518] RSP: 0018:ffff88802457fba8 EFLAGS: 00010206
[   20.595712] RAX: dffffc0000000000 RBX: ffff888014f9b000 RCX: 0000000000000000
[   20.595967] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   20.596222] RBP: ffff88802457fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   20.596477] R10: ffff88800aad88df R11: 0000000000000001 R12: 0000000000000000
[   20.596732] R13: ffffffff85cc0180 R14: ffff8880109b6ac0 R15: ffffffff87070ae0
[   20.596987] FS:  00007f7d5519a600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   20.597341] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   20.597551] CR2: 0000000020000080 CR3: 0000000018a9e000 CR4: 0000000000750ef0
[   20.597825] PKRU: 55555554
[   20.598232] ------------[ cut here ]------------
[   20.598421] WARNING: CPU: 0 PID: 909 at drivers/iommu/iommufd/main.c:258 iommufd_fops_release+0x2a3/0x300
[   20.598822] Modules linked in:
[   20.598939] CPU: 0 PID: 909 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   20.599269] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   20.599720] RIP: 0010:iommufd_fops_release+0x2a3/0x300
[   20.599978] Code: 45 d0 65 48 2b 04 25 28 00 00 00 75 54 48 81 c4 88 00 00 00 31 c0 5b 41 5c 41 5d 41 5e 41 5f 5d c3 cc cc cc cc e8 ad 4f 0a fe <0f> 0b eb a6 e8 74 23 67 fe e9 f6 fe ff ff 48 89 85 50 ff ff ff e8
[   20.600702] RSP: 0018:ffff8880109efc00 EFLAGS: 00010293
[   20.600893] RAX: 0000000000000000 RBX: ffff88800fe06708 RCX: 0000000000000000
[   20.601214] RDX: ffff88801475a500 RSI: ffffffff835563e3 RDI: ffffffff86702b40
[   20.601470] RBP: ffff8880109efcb0 R08: 0000000000000000 R09: fffffbfff0eb2644
[   20.601786] R10: ffffffff87593227 R11: ffff8880131a6c00 R12: 0000000000000000
[   20.602041] R13: ffff888013a2d098 R14: ffff8880109efc48 R15: ffffffff83556140
[   20.602360] FS:  0000000000000000(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   20.602656] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   20.602926] CR2: 0000000020000080 CR3: 000000000687e000 CR4: 0000000000750ef0
[   20.603188] PKRU: 55555554
[   20.603292] Call Trace:
[   20.603387]  <TASK>
[   20.603471]  ? show_regs+0x6e/0x80
[   20.603623]  ? __warn+0xef/0x340
[   20.603822]  ? report_bug+0x25e/0x4b0
[   20.603964]  ? iommufd_fops_release+0x2a3/0x300
[   20.604134]  ? report_bug+0x2cb/0x4b0
[   20.604277]  ? handle_bug+0x46/0x90
[   20.604411]  ? exc_invalid_op+0x1d/0x50
[   20.604556]  ? asm_exc_invalid_op+0x1f/0x30
[   20.604712]  ? __pfx_iommufd_fops_release+0x10/0x10
[   20.604895]  ? iommufd_fops_release+0x2a3/0x300
[   20.605066]  ? iommufd_fops_release+0x2a3/0x300
[   20.605238]  ? __pfx_iommufd_fops_release+0x10/0x10
[   20.605419]  ? rcu_is_watching+0x19/0xc0
[   20.605569]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   20.605768]  ? __pfx_iommufd_fops_release+0x10/0x10
[   20.605955]  __fput+0x424/0xaf0
[   20.606101]  ____fput+0x1f/0x30
[   20.606266]  task_work_run+0x19d/0x2b0
[   20.606410]  ? __pfx_task_work_run+0x10/0x10
[   20.606600]  ? __sanitizer_cov_trace_const_cmp1+0x1e/0x30
[   20.606844]  ? switch_task_namespaces+0xa9/0xe0
[   20.607016]  do_exit+0xac9/0x2790
[   20.607145]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   20.607374]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   20.607562]  ? __pfx_do_exit+0x10/0x10
[   20.607721]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   20.607961]  ? security_file_ioctl+0x9d/0xd0
[   20.608134]  make_task_dead+0x182/0x3c0
[   20.608341]  rewind_stack_and_make_dead+0x17/0x20
[   20.608521] RIP: 0033:0x7f7d54e3ee5d
[   20.608659] Code: Unable to access opcode bytes at 0x7f7d54e3ee33.
[   20.608943] RSP: 002b:00007fff07777b98 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   20.609221] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f7d54e3ee5d
[   20.609547] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   20.609808] RBP: 00007fff07777bb0 R08: 0000000000000800 R09: 0000000000000800
[   20.610129] R10: 0000000000000000 R11: 0000000000000213 R12: 00007fff07777cc8
[   20.610396] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f7d551db000
[   20.610722]  </TASK>
[   20.610812] irq event stamp: 0
[   20.610929] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   20.611160] hardirqs last disabled at (0): [<ffffffff8122f2d1>] copy_process+0x1c51/0x7140
[   20.611529] softirqs last  enabled at (0): [<ffffffff8122f312>] copy_process+0x1c92/0x7140
[   20.611832] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   20.612117] ---[ end trace 0000000000000000 ]---
[   20.614820] iommufd_mock iommufd_mock188: Adding to iommu group 188
[   20.615120] iommufd_mock iommufd_mock188: Removing from iommu group 188
[   20.615383] general protection fault, probably for non-canonical address 0xdffffc0000000006: 0000 [#189] PREEMPT SMP KASAN NOPTI
[   20.615801] KASAN: null-ptr-deref in range [0x0000000000000030-0x0000000000000037]
[   20.616077] CPU: 0 PID: 910 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   20.616395] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   20.616808] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   20.617023] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   20.617690] RSP: 0018:ffff88800bc17ba8 EFLAGS: 00010206
[   20.617886] RAX: dffffc0000000000 RBX: ffff888014cc8000 RCX: 0000000000000000
[   20.618146] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   20.618407] RBP: ffff88800bc17bc0 R08: 0000000000000001 R09: ffffed100155b11b
[   20.618671] R10: ffff88800aad88df R11: 5f6466756d6d6f69 R12: 0000000000000000
[   20.618944] R13: ffffffff85cc0180 R14: ffff8880247bdb00 R15: ffffffff87070ae0
[   20.619204] FS:  00007fdb709b4600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   20.619498] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   20.619711] CR2: 0000000020000080 CR3: 000000000efe6000 CR4: 0000000000750ef0
[   20.619973] PKRU: 55555554
[   20.620077] Call Trace:
[   20.620172]  <TASK>
[   20.620256]  ? show_regs+0x6e/0x80
[   20.620393]  ? die_addr+0x45/0xb0
[   20.620528]  ? exc_general_protection+0x159/0x250
[   20.620713]  ? asm_exc_general_protection+0x2b/0x30
[   20.620902]  ? sysfs_remove_link_from_group+0x21/0x90
[   20.621094]  ? sysfs_remove_link_from_group+0x37/0x90
[   20.621287]  ? sysfs_remove_link_from_group+0x21/0x90
[   20.621480]  iommu_device_unlink+0x85/0xd0
[   20.621638]  iommu_deinit_device+0x11f/0x4c0
[   20.621806]  __iommu_group_remove_device+0x26b/0x300
[   20.621998]  iommu_group_remove_device+0x8a/0xb0
[   20.622177]  iommufd_test+0x1f1a/0x2d10
[   20.622324]  ? __pfx_lock_release+0x10/0x10
[   20.622486]  ? __pfx_lock_acquire+0x10/0x10
[   20.622650]  ? __pfx_iommufd_test+0x10/0x10
[   20.622818]  ? __sanitizer_cov_trace_const_cmp8+0x1c/0x30
[   20.623020]  iommufd_fops_ioctl+0x377/0x510
[   20.623180]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   20.623360]  ? trace_hardirqs_on+0x26/0x120
[   20.623524]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   20.623782]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   20.623972]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   20.624172]  ? security_file_ioctl+0x9d/0xd0
[   20.624336]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   20.624512]  __x64_sys_ioctl+0x1b9/0x230
[   20.624661]  do_syscall_64+0x3c/0x90
[   20.624797]  entry_SYSCALL_64_after_hwframe+0x6e/0xd8
[   20.624984] RIP: 0033:0x7fdb7063ee5d
[   20.625120] Code: ff c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d 93 af 1b 00 f7 d8 64 89 01 48
[   20.625770] RSP: 002b:00007ffea9d790e8 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   20.626042] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007fdb7063ee5d
[   20.626297] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   20.626552] RBP: 00007ffea9d79100 R08: 0000000000000800 R09: 0000000000000800
[   20.626820] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffea9d79218
[   20.627081] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007fdb709f5000
[   20.627344]  </TASK>
[   20.627431] Modules linked in:
[   20.627721] ---[ end trace 0000000000000000 ]---
[   20.627895] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   20.628110] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   20.628776] RSP: 0018:ffff88802457fba8 EFLAGS: 00010206
[   20.628971] RAX: dffffc0000000000 RBX: ffff888014f9b000 RCX: 0000000000000000
[   20.629234] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   20.629489] RBP: ffff88802457fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   20.629744] R10: ffff88800aad88df R11: 0000000000000001 R12: 0000000000000000
[   20.629999] R13: ffffffff85cc0180 R14: ffff8880109b6ac0 R15: ffffffff87070ae0
[   20.630255] FS:  00007fdb709b4600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   20.630543] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   20.630794] CR2: 0000000020000080 CR3: 000000000efe6000 CR4: 0000000000750ef0
[   20.631061] PKRU: 55555554
[   20.631421] ------------[ cut here ]------------
[   20.631591] WARNING: CPU: 0 PID: 910 at drivers/iommu/iommufd/main.c:258 iommufd_fops_release+0x2a3/0x300
[   20.631933] Modules linked in:
[   20.632049] CPU: 0 PID: 910 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   20.632360] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   20.632764] RIP: 0010:iommufd_fops_release+0x2a3/0x300
[   20.632954] Code: 45 d0 65 48 2b 04 25 28 00 00 00 75 54 48 81 c4 88 00 00 00 31 c0 5b 41 5c 41 5d 41 5e 41 5f 5d c3 cc cc cc cc e8 ad 4f 0a fe <0f> 0b eb a6 e8 74 23 67 fe e9 f6 fe ff ff 48 89 85 50 ff ff ff e8
[   20.633609] RSP: 0018:ffff88800bc17c00 EFLAGS: 00010293
[   20.633799] RAX: 0000000000000000 RBX: ffff88800fe06508 RCX: 0000000000000000
[   20.634053] RDX: ffff88800fc12500 RSI: ffffffff835563e3 RDI: ffffffff86702b40
[   20.634307] RBP: ffff88800bc17cb0 R08: 0000000000000000 R09: fffffbfff0eb2644
[   20.634561] R10: ffffffff87593227 R11: ffff88801212e400 R12: 0000000000000000
[   20.634830] R13: ffff88801316ce18 R14: ffff88800bc17c48 R15: ffffffff83556140
[   20.635085] FS:  0000000000000000(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   20.635371] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   20.635579] CR2: 0000000020000080 CR3: 000000000687e000 CR4: 0000000000750ef0
[   20.635833] PKRU: 55555554
[   20.635935] Call Trace:
[   20.636027]  <TASK>
[   20.636108]  ? show_regs+0x6e/0x80
[   20.636240]  ? __warn+0xef/0x340
[   20.636365]  ? report_bug+0x25e/0x4b0
[   20.636505]  ? iommufd_fops_release+0x2a3/0x300
[   20.636675]  ? report_bug+0x2cb/0x4b0
[   20.636817]  ? handle_bug+0x46/0x90
[   20.636950]  ? exc_invalid_op+0x1d/0x50
[   20.637094]  ? asm_exc_invalid_op+0x1f/0x30
[   20.637249]  ? __pfx_iommufd_fops_release+0x10/0x10
[   20.637432]  ? iommufd_fops_release+0x2a3/0x300
[   20.637601]  ? iommufd_fops_release+0x2a3/0x300
[   20.637772]  ? __pfx_iommufd_fops_release+0x10/0x10
[   20.637953]  ? rcu_is_watching+0x19/0xc0
[   20.638102]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   20.638301]  ? __pfx_iommufd_fops_release+0x10/0x10
[   20.638481]  __fput+0x424/0xaf0
[   20.638613]  ____fput+0x1f/0x30
[   20.638738]  task_work_run+0x19d/0x2b0
[   20.638883]  ? __pfx_task_work_run+0x10/0x10
[   20.639044]  ? __sanitizer_cov_trace_const_cmp1+0x1e/0x30
[   20.639242]  ? switch_task_namespaces+0xa9/0xe0
[   20.639413]  do_exit+0xac9/0x2790
[   20.639540]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   20.639770]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   20.639955]  ? __pfx_do_exit+0x10/0x10
[   20.640096]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   20.640294]  ? security_file_ioctl+0x9d/0xd0
[   20.640456]  make_task_dead+0x182/0x3c0
[   20.640602]  rewind_stack_and_make_dead+0x17/0x20
[   20.640778] RIP: 0033:0x7fdb7063ee5d
[   20.640911] Code: Unable to access opcode bytes at 0x7fdb7063ee33.
[   20.641131] RSP: 002b:00007ffea9d790e8 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   20.641401] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007fdb7063ee5d
[   20.641656] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   20.641909] RBP: 00007ffea9d79100 R08: 0000000000000800 R09: 0000000000000800
[   20.642163] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffea9d79218
[   20.642416] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007fdb709f5000
[   20.642683]  </TASK>
[   20.642769] irq event stamp: 0
[   20.642884] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   20.643109] hardirqs last disabled at (0): [<ffffffff8122f2d1>] copy_process+0x1c51/0x7140
[   20.643403] softirqs last  enabled at (0): [<ffffffff8122f312>] copy_process+0x1c92/0x7140
[   20.643698] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   20.643922] ---[ end trace 0000000000000000 ]---
[   20.646610] iommufd_mock iommufd_mock189: Adding to iommu group 189
[   20.646870] iommufd_mock iommufd_mock189: Removing from iommu group 189
[   20.647125] general protection fault, probably for non-canonical address 0xdffffc0000000006: 0000 [#190] PREEMPT SMP KASAN NOPTI
[   20.647531] KASAN: null-ptr-deref in range [0x0000000000000030-0x0000000000000037]
[   20.647800] CPU: 0 PID: 911 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   20.648119] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   20.648563] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   20.648774] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   20.649423] RSP: 0018:ffff8880245c7ba8 EFLAGS: 00010206
[   20.649613] RAX: dffffc0000000000 RBX: ffff888014cce000 RCX: 0000000000000000
[   20.649867] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   20.650121] RBP: ffff8880245c7bc0 R08: 0000000000000001 R09: ffffed100155b11b
[   20.650376] R10: ffff88800aad88df R11: 5f6466756d6d6f69 R12: 0000000000000000
[   20.650634] R13: ffffffff85cc0180 R14: ffff8880247bdc00 R15: ffffffff87070ae0
[   20.650895] FS:  00007f1e11189600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   20.651181] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   20.651388] CR2: 0000000020000080 CR3: 0000000018a9e000 CR4: 0000000000750ef0
[   20.651643] PKRU: 55555554
[   20.651745] Call Trace:
[   20.651838]  <TASK>
[   20.651919]  ? show_regs+0x6e/0x80
[   20.652053]  ? die_addr+0x45/0xb0
[   20.652184]  ? exc_general_protection+0x159/0x250
[   20.652365]  ? asm_exc_general_protection+0x2b/0x30
[   20.652549]  ? sysfs_remove_link_from_group+0x21/0x90
[   20.652737]  ? sysfs_remove_link_from_group+0x37/0x90
[   20.652925]  ? sysfs_remove_link_from_group+0x21/0x90
[   20.653113]  iommu_device_unlink+0x85/0xd0
[   20.653269]  iommu_deinit_device+0x11f/0x4c0
[   20.653436]  __iommu_group_remove_device+0x26b/0x300
[   20.653623]  iommu_group_remove_device+0x8a/0xb0
[   20.653797]  iommufd_test+0x1f1a/0x2d10
[   20.653941]  ? __pfx_lock_release+0x10/0x10
[   20.654099]  ? __pfx_lock_acquire+0x10/0x10
[   20.654259]  ? __pfx_iommufd_test+0x10/0x10
[   20.654416]  ? __sanitizer_cov_trace_const_cmp8+0x1c/0x30
[   20.654618]  iommufd_fops_ioctl+0x377/0x510
[   20.654782]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   20.654959]  ? trace_hardirqs_on+0x26/0x120
[   20.655118]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   20.655351]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   20.655539]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   20.655746]  ? security_file_ioctl+0x9d/0xd0
[   20.655914]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   20.656093]  __x64_sys_ioctl+0x1b9/0x230
[   20.656242]  do_syscall_64+0x3c/0x90
[   20.656377]  entry_SYSCALL_64_after_hwframe+0x6e/0xd8
[   20.656563] RIP: 0033:0x7f1e10e3ee5d
[   20.656698] Code: ff c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d 93 af 1b 00 f7 d8 64 89 01 48
[   20.657347] RSP: 002b:00007ffdaa1ebe28 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   20.657619] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f1e10e3ee5d
[   20.657872] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   20.658127] RBP: 00007ffdaa1ebe40 R08: 0000000000000800 R09: 0000000000000800
[   20.658381] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffdaa1ebf58
[   20.658635] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f1e111ca000
[   20.658898]  </TASK>
[   20.658983] Modules linked in:
[   20.659234] ---[ end trace 0000000000000000 ]---
[   20.659405] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   20.659614] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   20.660272] RSP: 0018:ffff88802457fba8 EFLAGS: 00010206
[   20.660550] RAX: dffffc0000000000 RBX: ffff888014f9b000 RCX: 0000000000000000
[   20.660809] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   20.661085] RBP: ffff88802457fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   20.661378] R10: ffff88800aad88df R11: 0000000000000001 R12: 0000000000000000
[   20.661644] R13: ffffffff85cc0180 R14: ffff8880109b6ac0 R15: ffffffff87070ae0
[   20.661948] FS:  00007f1e11189600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   20.662241] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   20.662495] CR2: 0000000020000080 CR3: 0000000018a9e000 CR4: 0000000000750ef0
[   20.662769] PKRU: 55555554
[   20.663146] ------------[ cut here ]------------
[   20.663359] WARNING: CPU: 0 PID: 911 at drivers/iommu/iommufd/main.c:258 iommufd_fops_release+0x2a3/0x300
[   20.663724] Modules linked in:
[   20.663882] CPU: 0 PID: 911 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   20.664191] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   20.664651] RIP: 0010:iommufd_fops_release+0x2a3/0x300
[   20.664847] Code: 45 d0 65 48 2b 04 25 28 00 00 00 75 54 48 81 c4 88 00 00 00 31 c0 5b 41 5c 41 5d 41 5e 41 5f 5d c3 cc cc cc cc e8 ad 4f 0a fe <0f> 0b eb a6 e8 74 23 67 fe e9 f6 fe ff ff 48 89 85 50 ff ff ff e8
[   20.665557] RSP: 0018:ffff8880245c7c00 EFLAGS: 00010293
[   20.665770] RAX: 0000000000000000 RBX: ffff88800fe06e08 RCX: 0000000000000000
[   20.666065] RDX: ffff88800fc10000 RSI: ffffffff835563e3 RDI: ffffffff86702b40
[   20.666329] RBP: ffff8880245c7cb0 R08: 0000000000000000 R09: fffffbfff0eb2644
[   20.666645] R10: ffffffff87593227 R11: ffff888013157200 R12: 0000000000000000
[   20.666933] R13: ffff8880131eb818 R14: ffff8880245c7c48 R15: ffffffff83556140
[   20.667279] FS:  0000000000000000(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   20.667585] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   20.667834] CR2: 0000000020000080 CR3: 000000000687e000 CR4: 0000000000750ef0
[   20.668096] PKRU: 55555554
[   20.668216] Call Trace:
[   20.668347]  <TASK>
[   20.668431]  ? show_regs+0x6e/0x80
[   20.668565]  ? __warn+0xef/0x340
[   20.668693]  ? report_bug+0x25e/0x4b0
[   20.668902]  ? iommufd_fops_release+0x2a3/0x300
[   20.669075]  ? report_bug+0x2cb/0x4b0
[   20.669220]  ? handle_bug+0x46/0x90
[   20.669364]  ? exc_invalid_op+0x1d/0x50
[   20.669562]  ? asm_exc_invalid_op+0x1f/0x30
[   20.669721]  ? __pfx_iommufd_fops_release+0x10/0x10
[   20.669907]  ? iommufd_fops_release+0x2a3/0x300
[   20.670147]  ? iommufd_fops_release+0x2a3/0x300
[   20.670322]  ? __pfx_iommufd_fops_release+0x10/0x10
[   20.670507]  ? rcu_is_watching+0x19/0xc0
[   20.670669]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   20.670877]  ? __pfx_iommufd_fops_release+0x10/0x10
[   20.671062]  __fput+0x424/0xaf0
[   20.671245]  ____fput+0x1f/0x30
[   20.671371]  task_work_run+0x19d/0x2b0
[   20.671517]  ? __pfx_task_work_run+0x10/0x10
[   20.671681]  ? __sanitizer_cov_trace_const_cmp1+0x1e/0x30
[   20.671942]  ? switch_task_namespaces+0xa9/0xe0
[   20.672117]  do_exit+0xac9/0x2790
[   20.672247]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   20.672537]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   20.672723]  ? __pfx_do_exit+0x10/0x10
[   20.672868]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   20.673132]  ? security_file_ioctl+0x9d/0xd0
[   20.673299]  make_task_dead+0x182/0x3c0
[   20.673448]  rewind_stack_and_make_dead+0x17/0x20
[   20.673647] RIP: 0033:0x7f1e10e3ee5d
[   20.673817] Code: Unable to access opcode bytes at 0x7f1e10e3ee33.
[   20.674041] RSP: 002b:00007ffdaa1ebe28 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   20.674375] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f1e10e3ee5d
[   20.674644] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   20.674906] RBP: 00007ffdaa1ebe40 R08: 0000000000000800 R09: 0000000000000800
[   20.675175] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffdaa1ebf58
[   20.675490] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f1e111ca000
[   20.675758]  </TASK>
[   20.675886] irq event stamp: 0
[   20.676002] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   20.676232] hardirqs last disabled at (0): [<ffffffff8122f2d1>] copy_process+0x1c51/0x7140
[   20.676596] softirqs last  enabled at (0): [<ffffffff8122f312>] copy_process+0x1c92/0x7140
[   20.676897] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   20.677190] ---[ end trace 0000000000000000 ]---
[   20.679913] iommufd_mock iommufd_mock190: Adding to iommu group 190
[   20.680162] iommufd_mock iommufd_mock190: Removing from iommu group 190
[   20.680424] general protection fault, probably for non-canonical address 0xdffffc0000000006: 0000 [#191] PREEMPT SMP KASAN NOPTI
[   20.680848] KASAN: null-ptr-deref in range [0x0000000000000030-0x0000000000000037]
[   20.681158] CPU: 0 PID: 912 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   20.681474] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   20.681885] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   20.682100] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   20.682777] RSP: 0018:ffff8880109efba8 EFLAGS: 00010206
[   20.682972] RAX: dffffc0000000000 RBX: ffff888014ccd000 RCX: 0000000000000000
[   20.683226] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   20.683479] RBP: ffff8880109efbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   20.683734] R10: ffff88800aad88df R11: 5f6466756d6d6f69 R12: 0000000000000000
[   20.683988] R13: ffffffff85cc0180 R14: ffff8880247bda80 R15: ffffffff87070ae0
[   20.684242] FS:  00007fd79348c600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   20.684529] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   20.684736] CR2: 0000000020000080 CR3: 000000000efe6000 CR4: 0000000000750ef0
[   20.684991] PKRU: 55555554
[   20.685093] Call Trace:
[   20.685186]  <TASK>
[   20.685267]  ? show_regs+0x6e/0x80
[   20.685401]  ? die_addr+0x45/0xb0
[   20.685533]  ? exc_general_protection+0x159/0x250
[   20.685714]  ? asm_exc_general_protection+0x2b/0x30
[   20.685898]  ? sysfs_remove_link_from_group+0x21/0x90
[   20.686086]  ? sysfs_remove_link_from_group+0x37/0x90
[   20.686273]  ? sysfs_remove_link_from_group+0x21/0x90
[   20.686461]  iommu_device_unlink+0x85/0xd0
[   20.686618]  iommu_deinit_device+0x11f/0x4c0
[   20.686791]  __iommu_group_remove_device+0x26b/0x300
[   20.686978]  iommu_group_remove_device+0x8a/0xb0
[   20.687153]  iommufd_test+0x1f1a/0x2d10
[   20.687297]  ? __pfx_lock_release+0x10/0x10
[   20.687454]  ? __pfx_lock_acquire+0x10/0x10
[   20.687613]  ? __pfx_iommufd_test+0x10/0x10
[   20.687771]  ? __sanitizer_cov_trace_const_cmp8+0x1c/0x30
[   20.687971]  iommufd_fops_ioctl+0x377/0x510
[   20.688130]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   20.688306]  ? trace_hardirqs_on+0x26/0x120
[   20.688465]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   20.688695]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   20.688878]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   20.689077]  ? security_file_ioctl+0x9d/0xd0
[   20.689240]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   20.689416]  __x64_sys_ioctl+0x1b9/0x230
[   20.689565]  do_syscall_64+0x3c/0x90
[   20.689699]  entry_SYSCALL_64_after_hwframe+0x6e/0xd8
[   20.689885] RIP: 0033:0x7fd79323ee5d
[   20.690019] Code: ff c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d 93 af 1b 00 f7 d8 64 89 01 48
[   20.690672] RSP: 002b:00007ffe4ac9d168 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   20.690951] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007fd79323ee5d
[   20.691204] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   20.691458] RBP: 00007ffe4ac9d180 R08: 0000000000000800 R09: 0000000000000800
[   20.691711] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffe4ac9d298
[   20.691965] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007fd7934cd000
[   20.692223]  </TASK>
[   20.692307] Modules linked in:
[   20.692585] ---[ end trace 0000000000000000 ]---
[   20.692759] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   20.692972] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   20.693635] RSP: 0018:ffff88802457fba8 EFLAGS: 00010206
[   20.693829] RAX: dffffc0000000000 RBX: ffff888014f9b000 RCX: 0000000000000000
[   20.694103] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   20.694415] RBP: ffff88802457fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   20.694690] R10: ffff88800aad88df R11: 0000000000000001 R12: 0000000000000000
[   20.694977] R13: ffffffff85cc0180 R14: ffff8880109b6ac0 R15: ffffffff87070ae0
[   20.695272] FS:  00007fd79348c600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   20.695574] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   20.695822] CR2: 0000000020000080 CR3: 000000000efe6000 CR4: 0000000000750ef0
[   20.696083] PKRU: 55555554
[   20.696503] ------------[ cut here ]------------
[   20.696676] WARNING: CPU: 0 PID: 912 at drivers/iommu/iommufd/main.c:258 iommufd_fops_release+0x2a3/0x300
[   20.697090] Modules linked in:
[   20.697210] CPU: 0 PID: 912 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   20.697586] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   20.698007] RIP: 0010:iommufd_fops_release+0x2a3/0x300
[   20.698242] Code: 45 d0 65 48 2b 04 25 28 00 00 00 75 54 48 81 c4 88 00 00 00 31 c0 5b 41 5c 41 5d 41 5e 41 5f 5d c3 cc cc cc cc e8 ad 4f 0a fe <0f> 0b eb a6 e8 74 23 67 fe e9 f6 fe ff ff 48 89 85 50 ff ff ff e8
[   20.698977] RSP: 0018:ffff8880109efc00 EFLAGS: 00010293
[   20.699172] RAX: 0000000000000000 RBX: ffff88800fe06608 RCX: 0000000000000000
[   20.699432] RDX: ffff888013a04a00 RSI: ffffffff835563e3 RDI: ffffffff86702b40
[   20.699752] RBP: ffff8880109efcb0 R08: 0000000000000000 R09: fffffbfff0eb2644
[   20.700011] R10: ffffffff87593227 R11: ffff888018b46400 R12: 0000000000000000
[   20.700327] R13: ffff888013551a98 R14: ffff8880109efc48 R15: ffffffff83556140
[   20.700587] FS:  0000000000000000(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   20.700925] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   20.701137] CR2: 0000000020000080 CR3: 000000000687e000 CR4: 0000000000750ef0
[   20.701453] PKRU: 55555554
[   20.701558] Call Trace:
[   20.701652]  <TASK>
[   20.701735]  ? show_regs+0x6e/0x80
[   20.701875]  ? __warn+0xef/0x340
[   20.702053]  ? report_bug+0x25e/0x4b0
[   20.702197]  ? iommufd_fops_release+0x2a3/0x300
[   20.702370]  ? report_bug+0x2cb/0x4b0
[   20.702534]  ? handle_bug+0x46/0x90
[   20.702715]  ? exc_invalid_op+0x1d/0x50
[   20.702865]  ? asm_exc_invalid_op+0x1f/0x30
[   20.703024]  ? __pfx_iommufd_fops_release+0x10/0x10
[   20.703211]  ? iommufd_fops_release+0x2a3/0x300
[   20.703384]  ? iommufd_fops_release+0x2a3/0x300
[   20.703623]  ? __pfx_iommufd_fops_release+0x10/0x10
[   20.703808]  ? rcu_is_watching+0x19/0xc0
[   20.703961]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   20.704223]  ? __pfx_iommufd_fops_release+0x10/0x10
[   20.704407]  __fput+0x424/0xaf0
[   20.704535]  ____fput+0x1f/0x30
[   20.704674]  task_work_run+0x19d/0x2b0
[   20.704861]  ? __pfx_task_work_run+0x10/0x10
[   20.705025]  ? __sanitizer_cov_trace_const_cmp1+0x1e/0x30
[   20.705227]  ? switch_task_namespaces+0xa9/0xe0
[   20.705462]  do_exit+0xac9/0x2790
[   20.705596]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   20.705829]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   20.706076]  ? __pfx_do_exit+0x10/0x10
[   20.706221]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   20.706423]  ? security_file_ioctl+0x9d/0xd0
[   20.706653]  make_task_dead+0x182/0x3c0
[   20.706805]  rewind_stack_and_make_dead+0x17/0x20
[   20.706984] RIP: 0033:0x7fd79323ee5d
[   20.707121] Code: Unable to access opcode bytes at 0x7fd79323ee33.
[   20.707346] RSP: 002b:00007ffe4ac9d168 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   20.707688] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007fd79323ee5d
[   20.707948] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   20.708269] RBP: 00007ffe4ac9d180 R08: 0000000000000800 R09: 0000000000000800
[   20.708528] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffe4ac9d298
[   20.708848] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007fd7934cd000
[   20.709113]  </TASK>
[   20.709199] irq event stamp: 0
[   20.709315] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   20.709546] hardirqs last disabled at (0): [<ffffffff8122f2d1>] copy_process+0x1c51/0x7140
[   20.709847] softirqs last  enabled at (0): [<ffffffff8122f312>] copy_process+0x1c92/0x7140
[   20.710147] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   20.710376] ---[ end trace 0000000000000000 ]---
[   20.712797] iommufd_mock iommufd_mock191: Adding to iommu group 191
[   20.713058] iommufd_mock iommufd_mock191: Removing from iommu group 191
[   20.713347] general protection fault, probably for non-canonical address 0xdffffc0000000006: 0000 [#192] PREEMPT SMP KASAN NOPTI
[   20.713769] KASAN: null-ptr-deref in range [0x0000000000000030-0x0000000000000037]
[   20.714048] CPU: 1 PID: 913 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   20.714368] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   20.714803] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   20.715025] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   20.715701] RSP: 0018:ffff88800bc17ba8 EFLAGS: 00010206
[   20.715899] RAX: dffffc0000000000 RBX: ffff88800eef3000 RCX: 0000000000000000
[   20.716163] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   20.716429] RBP: ffff88800bc17bc0 R08: 0000000000000001 R09: ffffed100155b11b
[   20.716697] R10: ffff88800aad88df R11: 5f6466756d6d6f69 R12: 0000000000000000
[   20.716961] R13: ffffffff85cc0180 R14: ffff88800bd79a40 R15: ffffffff87070ae0
[   20.717226] FS:  00007f23ef338600(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
[   20.717523] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   20.717739] CR2: 0000000020000080 CR3: 000000000b6d8000 CR4: 0000000000750ee0
[   20.718004] PKRU: 55555554
[   20.718110] Call Trace:
[   20.718206]  <TASK>
[   20.718291]  ? show_regs+0x6e/0x80
[   20.718431]  ? die_addr+0x45/0xb0
[   20.718567]  ? exc_general_protection+0x159/0x250
[   20.718759]  ? asm_exc_general_protection+0x2b/0x30
[   20.718950]  ? sysfs_remove_link_from_group+0x21/0x90
[   20.719146]  ? sysfs_remove_link_from_group+0x37/0x90
[   20.719340]  ? sysfs_remove_link_from_group+0x21/0x90
[   20.719535]  iommu_device_unlink+0x85/0xd0
[   20.719696]  iommu_deinit_device+0x11f/0x4c0
[   20.719866]  __iommu_group_remove_device+0x26b/0x300
[   20.720060]  iommu_group_remove_device+0x8a/0xb0
[   20.720240]  iommufd_test+0x1f1a/0x2d10
[   20.720389]  ? __pfx_lock_release+0x10/0x10
[   20.720554]  ? __pfx_lock_acquire+0x10/0x10
[   20.720719]  ? __pfx_iommufd_test+0x10/0x10
[   20.720882]  ? __sanitizer_cov_trace_const_cmp8+0x1c/0x30
[   20.721092]  iommufd_fops_ioctl+0x377/0x510
[   20.721257]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   20.721440]  ? trace_hardirqs_on+0x26/0x120
[   20.721606]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   20.721845]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   20.722036]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   20.722243]  ? security_file_ioctl+0x9d/0xd0
[   20.722413]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   20.722596]  __x64_sys_ioctl+0x1b9/0x230
[   20.722753]  do_syscall_64+0x3c/0x90
[   20.722894]  entry_SYSCALL_64_after_hwframe+0x6e/0xd8
[   20.723087] RIP: 0033:0x7f23ef03ee5d
[   20.723227] Code: ff c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d 93 af 1b 00 f7 d8 64 89 01 48
[   20.723901] RSP: 002b:00007ffc2fb45138 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   20.724183] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f23ef03ee5d
[   20.724447] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   20.724711] RBP: 00007ffc2fb45150 R08: 0000000000000800 R09: 0000000000000800
[   20.724974] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffc2fb45268
[   20.725237] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f23ef379000
[   20.725506]  </TASK>
[   20.725592] Modules linked in:
[   20.725762] ---[ end trace 0000000000000000 ]---
[   20.725938] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   20.726154] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   20.726854] RSP: 0018:ffff88802457fba8 EFLAGS: 00010206
[   20.727054] RAX: dffffc0000000000 RBX: ffff888014f9b000 RCX: 0000000000000000
[   20.727317] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   20.727581] RBP: ffff88802457fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   20.727843] R10: ffff88800aad88df R11: 0000000000000001 R12: 0000000000000000
[   20.728101] R13: ffffffff85cc0180 R14: ffff8880109b6ac0 R15: ffffffff87070ae0
[   20.728360] FS:  00007f23ef338600(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
[   20.728653] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   20.728864] CR2: 0000000020000080 CR3: 000000000b6d8000 CR4: 0000000000750ee0
[   20.729124] PKRU: 55555554
[   20.729882] ------------[ cut here ]------------
[   20.730057] WARNING: CPU: 1 PID: 913 at drivers/iommu/iommufd/main.c:258 iommufd_fops_release+0x2a3/0x300
[   20.730405] Modules linked in:
[   20.730522] CPU: 1 PID: 913 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   20.730945] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   20.731360] RIP: 0010:iommufd_fops_release+0x2a3/0x300
[   20.731553] Code: 45 d0 65 48 2b 04 25 28 00 00 00 75 54 48 81 c4 88 00 00 00 31 c0 5b 41 5c 41 5d 41 5e 41 5f 5d c3 cc cc cc cc e8 ad 4f 0a fe <0f> 0b eb a6 e8 74 23 67 fe e9 f6 fe ff ff 48 89 85 50 ff ff ff e8
[   20.732212] RSP: 0018:ffff88800bc17c00 EFLAGS: 00010293
[   20.732405] RAX: 0000000000000000 RBX: ffff88801248ab08 RCX: 0000000000000000
[   20.732663] RDX: ffff888013a02500 RSI: ffffffff835563e3 RDI: ffffffff86702b48
[   20.732922] RBP: ffff88800bc17cb0 R08: 0000000000000000 R09: fffffbfff0eb2644
[   20.733183] R10: ffffffff87593227 R11: ffff888018b3f600 R12: 0000000000000000
[   20.733458] R13: ffff88800b1f7598 R14: ffff88800bc17c48 R15: ffffffff83556140
[   20.733717] FS:  0000000000000000(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
[   20.734008] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   20.734219] CR2: 0000000020000080 CR3: 000000000687e000 CR4: 0000000000750ee0
[   20.734479] PKRU: 55555554
[   20.734589] Call Trace:
[   20.734682]  <TASK>
[   20.734766]  ? show_regs+0x6e/0x80
[   20.734898]  ? __warn+0xef/0x340
[   20.735024]  ? report_bug+0x25e/0x4b0
[   20.735164]  ? iommufd_fops_release+0x2a3/0x300
[   20.735334]  ? report_bug+0x2cb/0x4b0
[   20.735475]  ? handle_bug+0x46/0x90
[   20.735608]  ? exc_invalid_op+0x1d/0x50
[   20.735753]  ? asm_exc_invalid_op+0x1f/0x30
[   20.735908]  ? __pfx_iommufd_fops_release+0x10/0x10
[   20.736091]  ? iommufd_fops_release+0x2a3/0x300
[   20.736261]  ? iommufd_fops_release+0x2a3/0x300
[   20.736431]  ? __pfx_iommufd_fops_release+0x10/0x10
[   20.736612]  ? rcu_is_watching+0x19/0xc0
[   20.736761]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   20.736960]  ? __pfx_iommufd_fops_release+0x10/0x10
[   20.737140]  __fput+0x424/0xaf0
[   20.737266]  ____fput+0x1f/0x30
[   20.737388]  task_work_run+0x19d/0x2b0
[   20.737531]  ? __pfx_task_work_run+0x10/0x10
[   20.737691]  ? __sanitizer_cov_trace_const_cmp1+0x1e/0x30
[   20.737888]  ? switch_task_namespaces+0xa9/0xe0
[   20.738059]  do_exit+0xac9/0x2790
[   20.738186]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   20.738414]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   20.738601]  ? __pfx_do_exit+0x10/0x10
[   20.738743]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   20.738945]  ? security_file_ioctl+0x9d/0xd0
[   20.739108]  make_task_dead+0x182/0x3c0
[   20.739255]  rewind_stack_and_make_dead+0x17/0x20
[   20.739431] RIP: 0033:0x7f23ef03ee5d
[   20.739565] Code: Unable to access opcode bytes at 0x7f23ef03ee33.
[   20.739784] RSP: 002b:00007ffc2fb45138 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   20.740082] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f23ef03ee5d
[   20.740336] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   20.740589] RBP: 00007ffc2fb45150 R08: 0000000000000800 R09: 0000000000000800
[   20.740843] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffc2fb45268
[   20.741097] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f23ef379000
[   20.741356]  </TASK>
[   20.741440] irq event stamp: 0
[   20.741555] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   20.741780] hardirqs last disabled at (0): [<ffffffff8122f2d1>] copy_process+0x1c51/0x7140
[   20.742074] softirqs last  enabled at (0): [<ffffffff8122f312>] copy_process+0x1c92/0x7140
[   20.742369] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   20.742599] ---[ end trace 0000000000000000 ]---
[   20.745054] iommufd_mock iommufd_mock192: Adding to iommu group 192
[   20.745308] iommufd_mock iommufd_mock192: Removing from iommu group 192
[   20.745565] general protection fault, probably for non-canonical address 0xdffffc0000000006: 0000 [#193] PREEMPT SMP KASAN NOPTI
[   20.745973] KASAN: null-ptr-deref in range [0x0000000000000030-0x0000000000000037]
[   20.746243] CPU: 0 PID: 914 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   20.746553] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   20.746964] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   20.747176] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   20.747829] RSP: 0018:ffff88802b8dfba8 EFLAGS: 00010206
[   20.748020] RAX: dffffc0000000000 RBX: ffff888014ccf000 RCX: 0000000000000000
[   20.748275] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   20.748530] RBP: ffff88802b8dfbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   20.748785] R10: ffff88800aad88df R11: 5f6466756d6d6f69 R12: 0000000000000000
[   20.749040] R13: ffffffff85cc0180 R14: ffff8880247bde20 R15: ffffffff87070ae0
[   20.749295] FS:  00007f148b131600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   20.749583] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   20.749791] CR2: 0000000020000080 CR3: 0000000018a9e000 CR4: 0000000000750ef0
[   20.750047] PKRU: 55555554
[   20.750149] Call Trace:
[   20.750241]  <TASK>
[   20.750323]  ? show_regs+0x6e/0x80
[   20.750458]  ? die_addr+0x45/0xb0
[   20.750590]  ? exc_general_protection+0x159/0x250
[   20.750775]  ? asm_exc_general_protection+0x2b/0x30
[   20.750960]  ? sysfs_remove_link_from_group+0x21/0x90
[   20.751149]  ? sysfs_remove_link_from_group+0x37/0x90
[   20.751338]  ? sysfs_remove_link_from_group+0x21/0x90
[   20.751527]  iommu_device_unlink+0x85/0xd0
[   20.751683]  iommu_deinit_device+0x11f/0x4c0
[   20.751846]  __iommu_group_remove_device+0x26b/0x300
[   20.752034]  iommu_group_remove_device+0x8a/0xb0
[   20.752209]  iommufd_test+0x1f1a/0x2d10
[   20.752353]  ? __pfx_lock_release+0x10/0x10
[   20.752512]  ? __pfx_lock_acquire+0x10/0x10
[   20.752672]  ? __pfx_iommufd_test+0x10/0x10
[   20.752829]  ? __sanitizer_cov_trace_const_cmp8+0x1c/0x30
[   20.753031]  iommufd_fops_ioctl+0x377/0x510
[   20.753191]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   20.753367]  ? trace_hardirqs_on+0x26/0x120
[   20.753530]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   20.753763]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   20.753947]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   20.754147]  ? security_file_ioctl+0x9d/0xd0
[   20.754311]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   20.754488]  __x64_sys_ioctl+0x1b9/0x230
[   20.754637]  do_syscall_64+0x3c/0x90
[   20.754775]  entry_SYSCALL_64_after_hwframe+0x6e/0xd8
[   20.754989] RIP: 0033:0x7f148ae3ee5d
[   20.755124] Code: ff c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d 93 af 1b 00 f7 d8 64 89 01 48
[   20.755774] RSP: 002b:00007fff44c94698 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   20.756047] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f148ae3ee5d
[   20.756302] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   20.756557] RBP: 00007fff44c946b0 R08: 0000000000000800 R09: 0000000000000800
[   20.756813] R10: 0000000000000000 R11: 0000000000000213 R12: 00007fff44c947c8
[   20.757068] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f148b172000
[   20.757329]  </TASK>
[   20.757414] Modules linked in:
[   20.757564] ---[ end trace 0000000000000000 ]---
[   20.757734] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   20.757945] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   20.758628] RSP: 0018:ffff88802457fba8 EFLAGS: 00010206
[   20.758822] RAX: dffffc0000000000 RBX: ffff888014f9b000 RCX: 0000000000000000
[   20.759118] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   20.759441] RBP: ffff88802457fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   20.759698] R10: ffff88800aad88df R11: 0000000000000001 R12: 0000000000000000
[   20.760020] R13: ffffffff85cc0180 R14: ffff8880109b6ac0 R15: ffffffff87070ae0
[   20.760276] FS:  00007f148b131600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   20.760584] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   20.760834] CR2: 0000000020000080 CR3: 0000000018a9e000 CR4: 0000000000750ef0
[   20.761105] PKRU: 55555554
[   20.761518] ------------[ cut here ]------------
[   20.761693] WARNING: CPU: 0 PID: 914 at drivers/iommu/iommufd/main.c:258 iommufd_fops_release+0x2a3/0x300
[   20.762097] Modules linked in:
[   20.762214] CPU: 0 PID: 914 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   20.762596] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   20.763011] RIP: 0010:iommufd_fops_release+0x2a3/0x300
[   20.763215] Code: 45 d0 65 48 2b 04 25 28 00 00 00 75 54 48 81 c4 88 00 00 00 31 c0 5b 41 5c 41 5d 41 5e 41 5f 5d c3 cc cc cc cc e8 ad 4f 0a fe <0f> 0b eb a6 e8 74 23 67 fe e9 f6 fe ff ff 48 89 85 50 ff ff ff e8
[   20.763915] RSP: 0018:ffff88802b8dfc00 EFLAGS: 00010293
[   20.764128] RAX: 0000000000000000 RBX: ffff88800fe06008 RCX: 0000000000000000
[   20.764426] RDX: ffff88800bb2a500 RSI: ffffffff835563e3 RDI: ffffffff86702b40
[   20.764699] RBP: ffff88802b8dfcb0 R08: 0000000000000000 R09: fffffbfff0eb2644
[   20.764998] R10: ffffffff87593227 R11: ffff88800f500400 R12: 0000000000000000
[   20.765261] R13: ffff8880133eab98 R14: ffff88802b8dfc48 R15: ffffffff83556140
[   20.765571] FS:  0000000000000000(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   20.765874] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   20.766147] CR2: 0000000020000080 CR3: 000000000687e000 CR4: 0000000000750ef0
[   20.766409] PKRU: 55555554
[   20.766523] Call Trace:
[   20.766690]  <TASK>
[   20.766778]  ? show_regs+0x6e/0x80
[   20.766913]  ? __warn+0xef/0x340
[   20.767042]  ? report_bug+0x25e/0x4b0
[   20.767186]  ? iommufd_fops_release+0x2a3/0x300
[   20.767360]  ? report_bug+0x2cb/0x4b0
[   20.767506]  ? handle_bug+0x46/0x90
[   20.767643]  ? exc_invalid_op+0x1d/0x50
[   20.767792]  ? asm_exc_invalid_op+0x1f/0x30
[   20.767951]  ? __pfx_iommufd_fops_release+0x10/0x10
[   20.768139]  ? iommufd_fops_release+0x2a3/0x300
[   20.768314]  ? iommufd_fops_release+0x2a3/0x300
[   20.768489]  ? __pfx_iommufd_fops_release+0x10/0x10
[   20.768675]  ? rcu_is_watching+0x19/0xc0
[   20.768828]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   20.769031]  ? __pfx_iommufd_fops_release+0x10/0x10
[   20.769217]  __fput+0x424/0xaf0
[   20.769347]  ____fput+0x1f/0x30
[   20.769473]  task_work_run+0x19d/0x2b0
[   20.769622]  ? __pfx_task_work_run+0x10/0x10
[   20.769783]  ? __sanitizer_cov_trace_const_cmp1+0x1e/0x30
[   20.769983]  ? switch_task_namespaces+0xa9/0xe0
[   20.770154]  do_exit+0xac9/0x2790
[   20.770283]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   20.770512]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   20.770721]  ? __pfx_do_exit+0x10/0x10
[   20.770883]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   20.771088]  ? security_file_ioctl+0x9d/0xd0
[   20.771265]  make_task_dead+0x182/0x3c0
[   20.771473]  rewind_stack_and_make_dead+0x17/0x20
[   20.771653] RIP: 0033:0x7f148ae3ee5d
[   20.771791] Code: Unable to access opcode bytes at 0x7f148ae3ee33.
[   20.772080] RSP: 002b:00007fff44c94698 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   20.772358] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f148ae3ee5d
[   20.772680] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   20.772940] RBP: 00007fff44c946b0 R08: 0000000000000800 R09: 0000000000000800
[   20.773222] R10: 0000000000000000 R11: 0000000000000213 R12: 00007fff44c947c8
[   20.773525] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f148b172000
[   20.773803]  </TASK>
[   20.773935] irq event stamp: 0
[   20.774052] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   20.774283] hardirqs last disabled at (0): [<ffffffff8122f2d1>] copy_process+0x1c51/0x7140
[   20.774655] softirqs last  enabled at (0): [<ffffffff8122f312>] copy_process+0x1c92/0x7140
[   20.774961] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   20.775192] ---[ end trace 0000000000000000 ]---
[   20.777997] iommufd_mock iommufd_mock193: Adding to iommu group 193
[   20.778249] iommufd_mock iommufd_mock193: Removing from iommu group 193
[   20.778511] general protection fault, probably for non-canonical address 0xdffffc0000000006: 0000 [#194] PREEMPT SMP KASAN NOPTI
[   20.778936] KASAN: null-ptr-deref in range [0x0000000000000030-0x0000000000000037]
[   20.779245] CPU: 0 PID: 915 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   20.779563] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   20.779975] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   20.780192] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   20.780858] RSP: 0018:ffff888014987ba8 EFLAGS: 00010206
[   20.781053] RAX: dffffc0000000000 RBX: ffff888014ccc000 RCX: 0000000000000000
[   20.781314] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   20.781575] RBP: ffff888014987bc0 R08: 0000000000000001 R09: ffffed100155b11b
[   20.781837] R10: ffff88800aad88df R11: 5f6466756d6d6f69 R12: 0000000000000000
[   20.782092] R13: ffffffff85cc0180 R14: ffff8880247bd280 R15: ffffffff87070ae0
[   20.782348] FS:  00007fadc2b15600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   20.782639] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   20.782859] CR2: 0000000020000080 CR3: 000000000b6d8000 CR4: 0000000000750ef0
[   20.783115] PKRU: 55555554
[   20.783218] Call Trace:
[   20.783311]  <TASK>
[   20.783393]  ? show_regs+0x6e/0x80
[   20.783528]  ? die_addr+0x45/0xb0
[   20.783660]  ? exc_general_protection+0x159/0x250
[   20.783842]  ? asm_exc_general_protection+0x2b/0x30
[   20.784027]  ? sysfs_remove_link_from_group+0x21/0x90
[   20.784216]  ? sysfs_remove_link_from_group+0x37/0x90
[   20.784405]  ? sysfs_remove_link_from_group+0x21/0x90
[   20.784594]  iommu_device_unlink+0x85/0xd0
[   20.784749]  iommu_deinit_device+0x11f/0x4c0
[   20.784913]  __iommu_group_remove_device+0x26b/0x300
[   20.785101]  iommu_group_remove_device+0x8a/0xb0
[   20.785277]  iommufd_test+0x1f1a/0x2d10
[   20.785421]  ? __pfx_lock_release+0x10/0x10
[   20.785579]  ? __pfx_lock_acquire+0x10/0x10
[   20.785739]  ? __pfx_iommufd_test+0x10/0x10
[   20.785897]  ? __sanitizer_cov_trace_const_cmp8+0x1c/0x30
[   20.786099]  iommufd_fops_ioctl+0x377/0x510
[   20.786259]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   20.786436]  ? trace_hardirqs_on+0x26/0x120
[   20.786596]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   20.786849]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   20.787034]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   20.787234]  ? security_file_ioctl+0x9d/0xd0
[   20.787399]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   20.787575]  __x64_sys_ioctl+0x1b9/0x230
[   20.787724]  do_syscall_64+0x3c/0x90
[   20.787860]  entry_SYSCALL_64_after_hwframe+0x6e/0xd8
[   20.788047] RIP: 0033:0x7fadc283ee5d
[   20.788182] Code: ff c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d 93 af 1b 00 f7 d8 64 89 01 48
[   20.788833] RSP: 002b:00007ffc53557448 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   20.789104] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007fadc283ee5d
[   20.789359] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   20.789614] RBP: 00007ffc53557460 R08: 0000000000000800 R09: 0000000000000800
[   20.789869] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffc53557578
[   20.790131] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007fadc2b56000
[   20.790392]  </TASK>
[   20.790476] Modules linked in:
[   20.790659] ---[ end trace 0000000000000000 ]---
[   20.790837] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   20.791051] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   20.791719] RSP: 0018:ffff88802457fba8 EFLAGS: 00010206
[   20.791914] RAX: dffffc0000000000 RBX: ffff888014f9b000 RCX: 0000000000000000
[   20.792175] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   20.792467] RBP: ffff88802457fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   20.792763] R10: ffff88800aad88df R11: 0000000000000001 R12: 0000000000000000
[   20.793030] R13: ffffffff85cc0180 R14: ffff8880109b6ac0 R15: ffffffff87070ae0
[   20.793349] FS:  00007fadc2b15600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   20.793652] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   20.793916] CR2: 0000000020000080 CR3: 000000000b6d8000 CR4: 0000000000750ef0
[   20.794178] PKRU: 55555554
[   20.794738] ------------[ cut here ]------------
[   20.794918] WARNING: CPU: 0 PID: 915 at drivers/iommu/iommufd/main.c:258 iommufd_fops_release+0x2a3/0x300
[   20.795346] Modules linked in:
[   20.795467] CPU: 0 PID: 915 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   20.795794] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   20.796262] RIP: 0010:iommufd_fops_release+0x2a3/0x300
[   20.796463] Code: 45 d0 65 48 2b 04 25 28 00 00 00 75 54 48 81 c4 88 00 00 00 31 c0 5b 41 5c 41 5d 41 5e 41 5f 5d c3 cc cc cc cc e8 ad 4f 0a fe <0f> 0b eb a6 e8 74 23 67 fe e9 f6 fe ff ff 48 89 85 50 ff ff ff e8
[   20.797185] RSP: 0018:ffff888014987c00 EFLAGS: 00010293
[   20.797438] RAX: 0000000000000000 RBX: ffff88800fe06808 RCX: 0000000000000000
[   20.797699] RDX: ffff888016492500 RSI: ffffffff835563e3 RDI: ffffffff86702b40
[   20.798017] RBP: ffff888014987cb0 R08: 0000000000000000 R09: fffffbfff0eb2644
[   20.798278] R10: ffffffff87593227 R11: ffff88801351d800 R12: 0000000000000000
[   20.798605] R13: ffff8880133e6198 R14: ffff888014987c48 R15: ffffffff83556140
[   20.798870] FS:  0000000000000000(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   20.799164] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   20.799386] CR2: 0000000020000080 CR3: 000000000687e000 CR4: 0000000000750ef0
[   20.799702] PKRU: 55555554
[   20.799807] Call Trace:
[   20.799902]  <TASK>
[   20.799994]  ? show_regs+0x6e/0x80
[   20.800178]  ? __warn+0xef/0x340
[   20.800307]  ? report_bug+0x25e/0x4b0
[   20.800451]  ? iommufd_fops_release+0x2a3/0x300
[   20.800641]  ? report_bug+0x2cb/0x4b0
[   20.800813]  ? handle_bug+0x46/0x90
[   20.800951]  ? exc_invalid_op+0x1d/0x50
[   20.801099]  ? asm_exc_invalid_op+0x1f/0x30
[   20.801259]  ? __pfx_iommufd_fops_release+0x10/0x10
[   20.801447]  ? iommufd_fops_release+0x2a3/0x300
[   20.801621]  ? iommufd_fops_release+0x2a3/0x300
[   20.801797]  ? __pfx_iommufd_fops_release+0x10/0x10
[   20.801982]  ? rcu_is_watching+0x19/0xc0
[   20.802135]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   20.802339]  ? __pfx_iommufd_fops_release+0x10/0x10
[   20.802524]  __fput+0x424/0xaf0
[   20.802660]  ____fput+0x1f/0x30
[   20.802789]  task_work_run+0x19d/0x2b0
[   20.802937]  ? __pfx_task_work_run+0x10/0x10
[   20.803102]  ? __sanitizer_cov_trace_const_cmp1+0x1e/0x30
[   20.803303]  ? switch_task_namespaces+0xa9/0xe0
[   20.803476]  do_exit+0xac9/0x2790
[   20.803604]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   20.803834]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   20.804017]  ? __pfx_do_exit+0x10/0x10
[   20.804159]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   20.804358]  ? security_file_ioctl+0x9d/0xd0
[   20.804521]  make_task_dead+0x182/0x3c0
[   20.804668]  rewind_stack_and_make_dead+0x17/0x20
[   20.804845] RIP: 0033:0x7fadc283ee5d
[   20.804979] Code: Unable to access opcode bytes at 0x7fadc283ee33.
[   20.805200] RSP: 002b:00007ffc53557448 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   20.805472] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007fadc283ee5d
[   20.805728] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   20.805983] RBP: 00007ffc53557460 R08: 0000000000000800 R09: 0000000000000800
[   20.806239] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffc53557578
[   20.806495] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007fadc2b56000
[   20.806770]  </TASK>
[   20.806862] irq event stamp: 0
[   20.806979] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   20.807210] hardirqs last disabled at (0): [<ffffffff8122f2d1>] copy_process+0x1c51/0x7140
[   20.807510] softirqs last  enabled at (0): [<ffffffff8122f312>] copy_process+0x1c92/0x7140
[   20.807806] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   20.808031] ---[ end trace 0000000000000000 ]---
[   20.810642] iommufd_mock iommufd_mock194: Adding to iommu group 194
[   20.810908] iommufd_mock iommufd_mock194: Removing from iommu group 194
[   20.811170] general protection fault, probably for non-canonical address 0xdffffc0000000006: 0000 [#195] PREEMPT SMP KASAN NOPTI
[   20.811587] KASAN: null-ptr-deref in range [0x0000000000000030-0x0000000000000037]
[   20.811864] CPU: 0 PID: 916 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   20.812180] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   20.812583] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   20.812794] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   20.813447] RSP: 0018:ffff888020377ba8 EFLAGS: 00010206
[   20.813638] RAX: dffffc0000000000 RBX: ffff888014cc9000 RCX: 0000000000000000
[   20.813893] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   20.814148] RBP: ffff888020377bc0 R08: 0000000000000001 R09: ffffed100155b11b
[   20.814403] R10: ffff88800aad88df R11: 5f6466756d6d6f69 R12: 0000000000000000
[   20.814663] R13: ffffffff85cc0180 R14: ffff8880247bd080 R15: ffffffff87070ae0
[   20.814936] FS:  00007f6a2af03600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   20.815224] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   20.815434] CR2: 0000000020000080 CR3: 000000000b6d8000 CR4: 0000000000750ef0
[   20.815691] PKRU: 55555554
[   20.815793] Call Trace:
[   20.815886]  <TASK>
[   20.815969]  ? show_regs+0x6e/0x80
[   20.816103]  ? die_addr+0x45/0xb0
[   20.816235]  ? exc_general_protection+0x159/0x250
[   20.816416]  ? asm_exc_general_protection+0x2b/0x30
[   20.816601]  ? sysfs_remove_link_from_group+0x21/0x90
[   20.816790]  ? sysfs_remove_link_from_group+0x37/0x90
[   20.816979]  ? sysfs_remove_link_from_group+0x21/0x90
[   20.817167]  iommu_device_unlink+0x85/0xd0
[   20.817323]  iommu_deinit_device+0x11f/0x4c0
[   20.817487]  __iommu_group_remove_device+0x26b/0x300
[   20.817675]  iommu_group_remove_device+0x8a/0xb0
[   20.817850]  iommufd_test+0x1f1a/0x2d10
[   20.817994]  ? __pfx_lock_release+0x10/0x10
[   20.818153]  ? __pfx_lock_acquire+0x10/0x10
[   20.818312]  ? __pfx_iommufd_test+0x10/0x10
[   20.818470]  ? __sanitizer_cov_trace_const_cmp8+0x1c/0x30
[   20.818675]  iommufd_fops_ioctl+0x377/0x510
[   20.818843]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   20.819020]  ? trace_hardirqs_on+0x26/0x120
[   20.819180]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   20.819411]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   20.819596]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   20.819796]  ? security_file_ioctl+0x9d/0xd0
[   20.819960]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   20.820137]  __x64_sys_ioctl+0x1b9/0x230
[   20.820285]  do_syscall_64+0x3c/0x90
[   20.820421]  entry_SYSCALL_64_after_hwframe+0x6e/0xd8
[   20.820608] RIP: 0033:0x7f6a2ac3ee5d
[   20.820743] Code: ff c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d 93 af 1b 00 f7 d8 64 89 01 48
[   20.821394] RSP: 002b:00007ffca65d9248 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   20.821665] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f6a2ac3ee5d
[   20.821921] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   20.822175] RBP: 00007ffca65d9260 R08: 0000000000000800 R09: 0000000000000800
[   20.822431] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffca65d9378
[   20.822690] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f6a2af44000
[   20.822957]  </TASK>
[   20.823041] Modules linked in:
[   20.823269] ---[ end trace 0000000000000000 ]---
[   20.823442] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   20.823659] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   20.824321] RSP: 0018:ffff88802457fba8 EFLAGS: 00010206
[   20.824515] RAX: dffffc0000000000 RBX: ffff888014f9b000 RCX: 0000000000000000
[   20.824775] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   20.825129] RBP: ffff88802457fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   20.825389] R10: ffff88800aad88df R11: 0000000000000001 R12: 0000000000000000
[   20.825708] R13: ffffffff85cc0180 R14: ffff8880109b6ac0 R15: ffffffff87070ae0
[   20.825968] FS:  00007f6a2af03600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   20.826320] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   20.826533] CR2: 0000000020000080 CR3: 000000000b6d8000 CR4: 0000000000750ef0
[   20.826807] PKRU: 55555554
[   20.827226] ------------[ cut here ]------------
[   20.827400] WARNING: CPU: 0 PID: 916 at drivers/iommu/iommufd/main.c:258 iommufd_fops_release+0x2a3/0x300
[   20.827817] Modules linked in:
[   20.827935] CPU: 0 PID: 916 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   20.828255] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   20.828721] RIP: 0010:iommufd_fops_release+0x2a3/0x300
[   20.828921] Code: 45 d0 65 48 2b 04 25 28 00 00 00 75 54 48 81 c4 88 00 00 00 31 c0 5b 41 5c 41 5d 41 5e 41 5f 5d c3 cc cc cc cc e8 ad 4f 0a fe <0f> 0b eb a6 e8 74 23 67 fe e9 f6 fe ff ff 48 89 85 50 ff ff ff e8
[   20.829635] RSP: 0018:ffff888020377c00 EFLAGS: 00010293
[   20.829887] RAX: 0000000000000000 RBX: ffff88800fe06108 RCX: 0000000000000000
[   20.830147] RDX: ffff88800bb28000 RSI: ffffffff835563e3 RDI: ffffffff86702b40
[   20.830461] RBP: ffff888020377cb0 R08: 0000000000000000 R09: fffffbfff0eb2644
[   20.830732] R10: ffffffff87593227 R11: ffff888018b66800 R12: 0000000000000000
[   20.830995] R13: ffff888012e2ab98 R14: ffff888020377c48 R15: ffffffff83556140
[   20.831255] FS:  0000000000000000(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   20.831597] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   20.831809] CR2: 0000000020000080 CR3: 000000000687e000 CR4: 0000000000750ef0
[   20.832132] PKRU: 55555554
[   20.832236] Call Trace:
[   20.832331]  <TASK>
[   20.832414]  ? show_regs+0x6e/0x80
[   20.832567]  ? __warn+0xef/0x340
[   20.832734]  ? report_bug+0x25e/0x4b0
[   20.832878]  ? iommufd_fops_release+0x2a3/0x300
[   20.833051]  ? report_bug+0x2cb/0x4b0
[   20.833218]  ? handle_bug+0x46/0x90
[   20.833396]  ? exc_invalid_op+0x1d/0x50
[   20.833547]  ? asm_exc_invalid_op+0x1f/0x30
[   20.833705]  ? __pfx_iommufd_fops_release+0x10/0x10
[   20.833892]  ? iommufd_fops_release+0x2a3/0x300
[   20.834065]  ? iommufd_fops_release+0x2a3/0x300
[   20.834240]  ? __pfx_iommufd_fops_release+0x10/0x10
[   20.834424]  ? rcu_is_watching+0x19/0xc0
[   20.834584]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   20.834790]  ? __pfx_iommufd_fops_release+0x10/0x10
[   20.834974]  __fput+0x424/0xaf0
[   20.835104]  ____fput+0x1f/0x30
[   20.835225]  task_work_run+0x19d/0x2b0
[   20.835368]  ? __pfx_task_work_run+0x10/0x10
[   20.835528]  ? __sanitizer_cov_trace_const_cmp1+0x1e/0x30
[   20.835724]  ? switch_task_namespaces+0xa9/0xe0
[   20.835894]  do_exit+0xac9/0x2790
[   20.836022]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   20.836248]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   20.836430]  ? __pfx_do_exit+0x10/0x10
[   20.836571]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   20.836768]  ? security_file_ioctl+0x9d/0xd0
[   20.836931]  make_task_dead+0x182/0x3c0
[   20.837077]  rewind_stack_and_make_dead+0x17/0x20
[   20.837251] RIP: 0033:0x7f6a2ac3ee5d
[   20.837384] Code: Unable to access opcode bytes at 0x7f6a2ac3ee33.
[   20.837603] RSP: 002b:00007ffca65d9248 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   20.837873] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f6a2ac3ee5d
[   20.838126] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   20.838379] RBP: 00007ffca65d9260 R08: 0000000000000800 R09: 0000000000000800
[   20.838645] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffca65d9378
[   20.838905] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f6a2af44000
[   20.839172]  </TASK>
[   20.839256] irq event stamp: 0
[   20.839370] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   20.839594] hardirqs last disabled at (0): [<ffffffff8122f2d1>] copy_process+0x1c51/0x7140
[   20.839888] softirqs last  enabled at (0): [<ffffffff8122f312>] copy_process+0x1c92/0x7140
[   20.840187] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   20.840411] ---[ end trace 0000000000000000 ]---
[   20.843166] iommufd_mock iommufd_mock195: Adding to iommu group 195
[   20.843419] iommufd_mock iommufd_mock195: Removing from iommu group 195
[   20.843679] general protection fault, probably for non-canonical address 0xdffffc0000000006: 0000 [#196] PREEMPT SMP KASAN NOPTI
[   20.844094] KASAN: null-ptr-deref in range [0x0000000000000030-0x0000000000000037]
[   20.844362] CPU: 0 PID: 917 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   20.844671] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   20.845075] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   20.845285] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   20.845933] RSP: 0018:ffff8880246ffba8 EFLAGS: 00010206
[   20.846123] RAX: dffffc0000000000 RBX: ffff888014ccb000 RCX: 0000000000000000
[   20.846377] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   20.846634] RBP: ffff8880246ffbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   20.846912] R10: ffff88800aad88df R11: 5f6466756d6d6f69 R12: 0000000000000000
[   20.847171] R13: ffffffff85cc0180 R14: ffff8880247bd800 R15: ffffffff87070ae0
[   20.847425] FS:  00007efd54ace600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   20.847712] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   20.847919] CR2: 0000000020000080 CR3: 000000000b6d8000 CR4: 0000000000750ef0
[   20.848174] PKRU: 55555554
[   20.848276] Call Trace:
[   20.848368]  <TASK>
[   20.848450]  ? show_regs+0x6e/0x80
[   20.848584]  ? die_addr+0x45/0xb0
[   20.848715]  ? exc_general_protection+0x159/0x250
[   20.848896]  ? asm_exc_general_protection+0x2b/0x30
[   20.849080]  ? sysfs_remove_link_from_group+0x21/0x90
[   20.849268]  ? sysfs_remove_link_from_group+0x37/0x90
[   20.849456]  ? sysfs_remove_link_from_group+0x21/0x90
[   20.849644]  iommu_device_unlink+0x85/0xd0
[   20.849798]  iommu_deinit_device+0x11f/0x4c0
[   20.849961]  __iommu_group_remove_device+0x26b/0x300
[   20.850151]  iommu_group_remove_device+0x8a/0xb0
[   20.850327]  iommufd_test+0x1f1a/0x2d10
[   20.850472]  ? __pfx_lock_release+0x10/0x10
[   20.850631]  ? __pfx_lock_acquire+0x10/0x10
[   20.850799]  ? __pfx_iommufd_test+0x10/0x10
[   20.850960]  ? __sanitizer_cov_trace_const_cmp8+0x1c/0x30
[   20.851161]  iommufd_fops_ioctl+0x377/0x510
[   20.851320]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   20.851496]  ? trace_hardirqs_on+0x26/0x120
[   20.851656]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   20.851885]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   20.852069]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   20.852268]  ? security_file_ioctl+0x9d/0xd0
[   20.852431]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   20.852608]  __x64_sys_ioctl+0x1b9/0x230
[   20.852755]  do_syscall_64+0x3c/0x90
[   20.852890]  entry_SYSCALL_64_after_hwframe+0x6e/0xd8
[   20.853076] RIP: 0033:0x7efd5483ee5d
[   20.853210] Code: ff c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d 93 af 1b 00 f7 d8 64 89 01 48
[   20.853863] RSP: 002b:00007fffd8a112c8 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   20.854133] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007efd5483ee5d
[   20.854387] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   20.854644] RBP: 00007fffd8a112e0 R08: 0000000000000800 R09: 0000000000000800
[   20.854906] R10: 0000000000000000 R11: 0000000000000213 R12: 00007fffd8a113f8
[   20.855160] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007efd54b0f000
[   20.855419]  </TASK>
[   20.855503] Modules linked in:
[   20.855730] ---[ end trace 0000000000000000 ]---
[   20.855903] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   20.856118] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   20.856779] RSP: 0018:ffff88802457fba8 EFLAGS: 00010206
[   20.856973] RAX: dffffc0000000000 RBX: ffff888014f9b000 RCX: 0000000000000000
[   20.857232] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   20.857491] RBP: ffff88802457fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   20.857745] R10: ffff88800aad88df R11: 0000000000000001 R12: 0000000000000000
[   20.857997] R13: ffffffff85cc0180 R14: ffff8880109b6ac0 R15: ffffffff87070ae0
[   20.858251] FS:  00007efd54ace600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   20.858537] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   20.858763] CR2: 0000000020000080 CR3: 000000000b6d8000 CR4: 0000000000750ef0
[   20.859041] PKRU: 55555554
[   20.859394] ------------[ cut here ]------------
[   20.859563] WARNING: CPU: 0 PID: 917 at drivers/iommu/iommufd/main.c:258 iommufd_fops_release+0x2a3/0x300
[   20.859921] Modules linked in:
[   20.860037] CPU: 0 PID: 917 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   20.860346] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   20.860746] RIP: 0010:iommufd_fops_release+0x2a3/0x300
[   20.860937] Code: 45 d0 65 48 2b 04 25 28 00 00 00 75 54 48 81 c4 88 00 00 00 31 c0 5b 41 5c 41 5d 41 5e 41 5f 5d c3 cc cc cc cc e8 ad 4f 0a fe <0f> 0b eb a6 e8 74 23 67 fe e9 f6 fe ff ff 48 89 85 50 ff ff ff e8
[   20.861587] RSP: 0018:ffff8880246ffc00 EFLAGS: 00010293
[   20.861777] RAX: 0000000000000000 RBX: ffff88800fe06408 RCX: 0000000000000000
[   20.862031] RDX: ffff888010564a00 RSI: ffffffff835563e3 RDI: ffffffff86702b40
[   20.862285] RBP: ffff8880246ffcb0 R08: 0000000000000000 R09: fffffbfff0eb2644
[   20.862539] R10: ffffffff87593227 R11: ffff888019403c00 R12: 0000000000000000
[   20.862804] R13: ffff888012e2a198 R14: ffff8880246ffc48 R15: ffffffff83556140
[   20.863057] FS:  0000000000000000(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   20.863343] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   20.863550] CR2: 0000000020000080 CR3: 000000000687e000 CR4: 0000000000750ef0
[   20.863804] PKRU: 55555554
[   20.863905] Call Trace:
[   20.863997]  <TASK>
[   20.864078]  ? show_regs+0x6e/0x80
[   20.864210]  ? __warn+0xef/0x340
[   20.864335]  ? report_bug+0x25e/0x4b0
[   20.864475]  ? iommufd_fops_release+0x2a3/0x300
[   20.864645]  ? report_bug+0x2cb/0x4b0
[   20.864786]  ? handle_bug+0x46/0x90
[   20.864919]  ? exc_invalid_op+0x1d/0x50
[   20.865064]  ? asm_exc_invalid_op+0x1f/0x30
[   20.865219]  ? __pfx_iommufd_fops_release+0x10/0x10
[   20.865401]  ? iommufd_fops_release+0x2a3/0x300
[   20.865570]  ? iommufd_fops_release+0x2a3/0x300
[   20.865741]  ? __pfx_iommufd_fops_release+0x10/0x10
[   20.865921]  ? rcu_is_watching+0x19/0xc0
[   20.866070]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   20.866268]  ? __pfx_iommufd_fops_release+0x10/0x10
[   20.866449]  __fput+0x424/0xaf0
[   20.866582]  ____fput+0x1f/0x30
[   20.866705]  task_work_run+0x19d/0x2b0
[   20.866852]  ? __pfx_task_work_run+0x10/0x10
[   20.867012]  ? __sanitizer_cov_trace_const_cmp1+0x1e/0x30
[   20.867209]  ? switch_task_namespaces+0xa9/0xe0
[   20.867380]  do_exit+0xac9/0x2790
[   20.867507]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   20.867735]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   20.867917]  ? __pfx_do_exit+0x10/0x10
[   20.868058]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   20.868255]  ? security_file_ioctl+0x9d/0xd0
[   20.868417]  make_task_dead+0x182/0x3c0
[   20.868563]  rewind_stack_and_make_dead+0x17/0x20
[   20.868737] RIP: 0033:0x7efd5483ee5d
[   20.868871] Code: Unable to access opcode bytes at 0x7efd5483ee33.
[   20.869089] RSP: 002b:00007fffd8a112c8 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   20.869359] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007efd5483ee5d
[   20.869612] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   20.869864] RBP: 00007fffd8a112e0 R08: 0000000000000800 R09: 0000000000000800
[   20.870117] R10: 0000000000000000 R11: 0000000000000213 R12: 00007fffd8a113f8
[   20.870370] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007efd54b0f000
[   20.870635]  </TASK>
[   20.870719] irq event stamp: 0
[   20.870837] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   20.871062] hardirqs last disabled at (0): [<ffffffff8122f2d1>] copy_process+0x1c51/0x7140
[   20.871356] softirqs last  enabled at (0): [<ffffffff8122f312>] copy_process+0x1c92/0x7140
[   20.871650] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   20.871873] ---[ end trace 0000000000000000 ]---
[   20.874481] iommufd_mock iommufd_mock196: Adding to iommu group 196
[   20.874791] iommufd_mock iommufd_mock196: Removing from iommu group 196
[   20.875053] general protection fault, probably for non-canonical address 0xdffffc0000000006: 0000 [#197] PREEMPT SMP KASAN NOPTI
[   20.875461] KASAN: null-ptr-deref in range [0x0000000000000030-0x0000000000000037]
[   20.875730] CPU: 0 PID: 918 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   20.876041] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   20.876443] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   20.876660] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   20.877315] RSP: 0018:ffff888016617ba8 EFLAGS: 00010206
[   20.877506] RAX: dffffc0000000000 RBX: ffff888014987000 RCX: 0000000000000000
[   20.877761] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   20.878016] RBP: ffff888016617bc0 R08: 0000000000000001 R09: ffffed100155b11b
[   20.878271] R10: ffff88800aad88df R11: 5f6466756d6d6f69 R12: 0000000000000000
[   20.878527] R13: ffffffff85cc0180 R14: ffff8880247bd4c0 R15: ffffffff87070ae0
[   20.878786] FS:  00007f75f42e9600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   20.879074] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   20.879283] CR2: 0000000020000080 CR3: 000000000b6d8000 CR4: 0000000000750ef0
[   20.879539] PKRU: 55555554
[   20.879642] Call Trace:
[   20.879735]  <TASK>
[   20.879816]  ? show_regs+0x6e/0x80
[   20.879951]  ? die_addr+0x45/0xb0
[   20.880082]  ? exc_general_protection+0x159/0x250
[   20.880264]  ? asm_exc_general_protection+0x2b/0x30
[   20.880449]  ? sysfs_remove_link_from_group+0x21/0x90
[   20.880637]  ? sysfs_remove_link_from_group+0x37/0x90
[   20.880826]  ? sysfs_remove_link_from_group+0x21/0x90
[   20.881015]  iommu_device_unlink+0x85/0xd0
[   20.881171]  iommu_deinit_device+0x11f/0x4c0
[   20.881335]  __iommu_group_remove_device+0x26b/0x300
[   20.881523]  iommu_group_remove_device+0x8a/0xb0
[   20.881698]  iommufd_test+0x1f1a/0x2d10
[   20.881842]  ? __pfx_lock_release+0x10/0x10
[   20.882001]  ? __pfx_lock_acquire+0x10/0x10
[   20.882161]  ? __pfx_iommufd_test+0x10/0x10
[   20.882319]  ? __sanitizer_cov_trace_const_cmp8+0x1c/0x30
[   20.882521]  iommufd_fops_ioctl+0x377/0x510
[   20.882680]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   20.882860]  ? trace_hardirqs_on+0x26/0x120
[   20.883021]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   20.883252]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   20.883436]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   20.883636]  ? security_file_ioctl+0x9d/0xd0
[   20.883800]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   20.883977]  __x64_sys_ioctl+0x1b9/0x230
[   20.884126]  do_syscall_64+0x3c/0x90
[   20.884262]  entry_SYSCALL_64_after_hwframe+0x6e/0xd8
[   20.884449] RIP: 0033:0x7f75f403ee5d
[   20.884584] Code: ff c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d 93 af 1b 00 f7 d8 64 89 01 48
[   20.885234] RSP: 002b:00007ffcde33e808 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   20.885506] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f75f403ee5d
[   20.885762] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   20.886017] RBP: 00007ffcde33e820 R08: 0000000000000800 R09: 0000000000000800
[   20.886365] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffcde33e938
[   20.886625] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f75f432a000
[   20.886896]  </TASK>
[   20.886980] Modules linked in:
[   20.887172] ---[ end trace 0000000000000000 ]---
[   20.887341] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   20.887551] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   20.888200] RSP: 0018:ffff88802457fba8 EFLAGS: 00010206
[   20.888391] RAX: dffffc0000000000 RBX: ffff888014f9b000 RCX: 0000000000000000
[   20.888646] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   20.888900] RBP: ffff88802457fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   20.889154] R10: ffff88800aad88df R11: 0000000000000001 R12: 0000000000000000
[   20.889408] R13: ffffffff85cc0180 R14: ffff8880109b6ac0 R15: ffffffff87070ae0
[   20.889664] FS:  00007f75f42e9600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   20.889951] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   20.890159] CR2: 0000000020000080 CR3: 000000000b6d8000 CR4: 0000000000750ef0
[   20.890414] PKRU: 55555554
[   20.890782] ------------[ cut here ]------------
[   20.890952] WARNING: CPU: 0 PID: 918 at drivers/iommu/iommufd/main.c:258 iommufd_fops_release+0x2a3/0x300
[   20.891295] Modules linked in:
[   20.891418] CPU: 0 PID: 918 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   20.891727] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   20.892128] RIP: 0010:iommufd_fops_release+0x2a3/0x300
[   20.892317] Code: 45 d0 65 48 2b 04 25 28 00 00 00 75 54 48 81 c4 88 00 00 00 31 c0 5b 41 5c 41 5d 41 5e 41 5f 5d c3 cc cc cc cc e8 ad 4f 0a fe <0f> 0b eb a6 e8 74 23 67 fe e9 f6 fe ff ff 48 89 85 50 ff ff ff e8
[   20.892966] RSP: 0018:ffff888016617c00 EFLAGS: 00010293
[   20.893156] RAX: 0000000000000000 RBX: ffff88800fe06a08 RCX: 0000000000000000
[   20.893410] RDX: ffff888012c30000 RSI: ffffffff835563e3 RDI: ffffffff86702b40
[   20.893663] RBP: ffff888016617cb0 R08: 0000000000000000 R09: fffffbfff0eb2644
[   20.893917] R10: ffffffff87593227 R11: ffff888011147e00 R12: 0000000000000000
[   20.894171] R13: ffff88801941c918 R14: ffff888016617c48 R15: ffffffff83556140
[   20.894425] FS:  0000000000000000(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   20.894720] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   20.894930] CR2: 0000000020000080 CR3: 000000000687e000 CR4: 0000000000750ef0
[   20.895186] PKRU: 55555554
[   20.895288] Call Trace:
[   20.895380]  <TASK>
[   20.895462]  ? show_regs+0x6e/0x80
[   20.895594]  ? __warn+0xef/0x340
[   20.895719]  ? report_bug+0x25e/0x4b0
[   20.895859]  ? iommufd_fops_release+0x2a3/0x300
[   20.896028]  ? report_bug+0x2cb/0x4b0
[   20.896170]  ? handle_bug+0x46/0x90
[   20.896304]  ? exc_invalid_op+0x1d/0x50
[   20.896448]  ? asm_exc_invalid_op+0x1f/0x30
[   20.896604]  ? __pfx_iommufd_fops_release+0x10/0x10
[   20.896787]  ? iommufd_fops_release+0x2a3/0x300
[   20.896956]  ? iommufd_fops_release+0x2a3/0x300
[   20.897127]  ? __pfx_iommufd_fops_release+0x10/0x10
[   20.897308]  ? rcu_is_watching+0x19/0xc0
[   20.897457]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   20.897656]  ? __pfx_iommufd_fops_release+0x10/0x10
[   20.897837]  __fput+0x424/0xaf0
[   20.897963]  ____fput+0x1f/0x30
[   20.898085]  task_work_run+0x19d/0x2b0
[   20.898228]  ? __pfx_task_work_run+0x10/0x10
[   20.898389]  ? __sanitizer_cov_trace_const_cmp1+0x1e/0x30
[   20.898593]  ? switch_task_namespaces+0xa9/0xe0
[   20.898772]  do_exit+0xac9/0x2790
[   20.898901]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   20.899129]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   20.899311]  ? __pfx_do_exit+0x10/0x10
[   20.899453]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   20.899651]  ? security_file_ioctl+0x9d/0xd0
[   20.899814]  make_task_dead+0x182/0x3c0
[   20.899960]  rewind_stack_and_make_dead+0x17/0x20
[   20.900136] RIP: 0033:0x7f75f403ee5d
[   20.900270] Code: Unable to access opcode bytes at 0x7f75f403ee33.
[   20.900490] RSP: 002b:00007ffcde33e808 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   20.900760] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f75f403ee5d
[   20.901014] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   20.901268] RBP: 00007ffcde33e820 R08: 0000000000000800 R09: 0000000000000800
[   20.901522] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffcde33e938
[   20.901776] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f75f432a000
[   20.902036]  </TASK>
[   20.902121] irq event stamp: 0
[   20.902235] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   20.902460] hardirqs last disabled at (0): [<ffffffff8122f2d1>] copy_process+0x1c51/0x7140
[   20.902766] softirqs last  enabled at (0): [<ffffffff8122f312>] copy_process+0x1c92/0x7140
[   20.903068] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   20.903293] ---[ end trace 0000000000000000 ]---
[   20.905821] iommufd_mock iommufd_mock197: Adding to iommu group 197
[   20.906075] iommufd_mock iommufd_mock197: Removing from iommu group 197
[   20.906331] general protection fault, probably for non-canonical address 0xdffffc0000000006: 0000 [#198] PREEMPT SMP KASAN NOPTI
[   20.906740] KASAN: null-ptr-deref in range [0x0000000000000030-0x0000000000000037]
[   20.907016] CPU: 0 PID: 919 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   20.907326] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   20.907730] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   20.907942] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   20.908593] RSP: 0018:ffff88800fb2fba8 EFLAGS: 00010206
[   20.908784] RAX: dffffc0000000000 RBX: ffff888014984000 RCX: 0000000000000000
[   20.909039] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   20.909294] RBP: ffff88800fb2fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   20.909549] R10: ffff88800aad88df R11: 5f6466756d6d6f69 R12: 0000000000000000
[   20.909804] R13: ffffffff85cc0180 R14: ffff8880247bdf00 R15: ffffffff87070ae0
[   20.910060] FS:  00007f78d58d0600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   20.910348] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   20.910557] CR2: 0000000020000080 CR3: 000000000b6d8000 CR4: 0000000000750ef0
[   20.910816] PKRU: 55555554
[   20.910919] Call Trace:
[   20.911012]  <TASK>
[   20.911093]  ? show_regs+0x6e/0x80
[   20.911228]  ? die_addr+0x45/0xb0
[   20.911360]  ? exc_general_protection+0x159/0x250
[   20.911542]  ? asm_exc_general_protection+0x2b/0x30
[   20.911727]  ? sysfs_remove_link_from_group+0x21/0x90
[   20.911916]  ? sysfs_remove_link_from_group+0x37/0x90
[   20.912105]  ? sysfs_remove_link_from_group+0x21/0x90
[   20.912294]  iommu_device_unlink+0x85/0xd0
[   20.912449]  iommu_deinit_device+0x11f/0x4c0
[   20.912613]  __iommu_group_remove_device+0x26b/0x300
[   20.912802]  iommu_group_remove_device+0x8a/0xb0
[   20.912977]  iommufd_test+0x1f1a/0x2d10
[   20.913121]  ? __pfx_lock_release+0x10/0x10
[   20.913280]  ? __pfx_lock_acquire+0x10/0x10
[   20.913440]  ? __pfx_iommufd_test+0x10/0x10
[   20.913598]  ? __sanitizer_cov_trace_const_cmp8+0x1c/0x30
[   20.913800]  iommufd_fops_ioctl+0x377/0x510
[   20.913960]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   20.914137]  ? trace_hardirqs_on+0x26/0x120
[   20.914297]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   20.914528]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   20.914712]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   20.914918]  ? security_file_ioctl+0x9d/0xd0
[   20.915084]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   20.915261]  __x64_sys_ioctl+0x1b9/0x230
[   20.915410]  do_syscall_64+0x3c/0x90
[   20.915545]  entry_SYSCALL_64_after_hwframe+0x6e/0xd8
[   20.915732] RIP: 0033:0x7f78d563ee5d
[   20.915867] Code: ff c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d 93 af 1b 00 f7 d8 64 89 01 48
[   20.916519] RSP: 002b:00007ffdc5af0348 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   20.916791] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f78d563ee5d
[   20.917046] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   20.917300] RBP: 00007ffdc5af0360 R08: 0000000000000800 R09: 0000000000000800
[   20.917556] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffdc5af0478
[   20.917811] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f78d5911000
[   20.918072]  </TASK>
[   20.918157] Modules linked in:
[   20.918299] ---[ end trace 0000000000000000 ]---
[   20.918468] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   20.918802] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   20.919457] RSP: 0018:ffff88802457fba8 EFLAGS: 00010206
[   20.919648] RAX: dffffc0000000000 RBX: ffff888014f9b000 RCX: 0000000000000000
[   20.919905] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   20.920160] RBP: ffff88802457fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   20.920416] R10: ffff88800aad88df R11: 0000000000000001 R12: 0000000000000000
[   20.920671] R13: ffffffff85cc0180 R14: ffff8880109b6ac0 R15: ffffffff87070ae0
[   20.920926] FS:  00007f78d58d0600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   20.921214] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   20.921423] CR2: 0000000020000080 CR3: 000000000b6d8000 CR4: 0000000000750ef0
[   20.921679] PKRU: 55555554
[   20.922039] ------------[ cut here ]------------
[   20.922208] WARNING: CPU: 0 PID: 919 at drivers/iommu/iommufd/main.c:258 iommufd_fops_release+0x2a3/0x300
[   20.922551] Modules linked in:
[   20.922676] CPU: 0 PID: 919 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   20.922994] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   20.923396] RIP: 0010:iommufd_fops_release+0x2a3/0x300
[   20.923586] Code: 45 d0 65 48 2b 04 25 28 00 00 00 75 54 48 81 c4 88 00 00 00 31 c0 5b 41 5c 41 5d 41 5e 41 5f 5d c3 cc cc cc cc e8 ad 4f 0a fe <0f> 0b eb a6 e8 74 23 67 fe e9 f6 fe ff ff 48 89 85 50 ff ff ff e8
[   20.924237] RSP: 0018:ffff88800fb2fc00 EFLAGS: 00010293
[   20.924427] RAX: 0000000000000000 RBX: ffff88800fe06b08 RCX: 0000000000000000
[   20.924683] RDX: ffff888012c34a00 RSI: ffffffff835563e3 RDI: ffffffff86702b40
[   20.924938] RBP: ffff88800fb2fcb0 R08: 0000000000000000 R09: fffffbfff0eb2644
[   20.925193] R10: ffffffff87593227 R11: ffff88800f52ae00 R12: 0000000000000000
[   20.925448] R13: ffff888013255818 R14: ffff88800fb2fc48 R15: ffffffff83556140
[   20.925703] FS:  0000000000000000(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   20.925991] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   20.926199] CR2: 0000000020000080 CR3: 000000000687e000 CR4: 0000000000750ef0
[   20.926456] PKRU: 55555554
[   20.926557] Call Trace:
[   20.926657]  <TASK>
[   20.926740]  ? show_regs+0x6e/0x80
[   20.926874]  ? __warn+0xef/0x340
[   20.927000]  ? report_bug+0x25e/0x4b0
[   20.927141]  ? iommufd_fops_release+0x2a3/0x300
[   20.927312]  ? report_bug+0x2cb/0x4b0
[   20.927455]  ? handle_bug+0x46/0x90
[   20.927589]  ? exc_invalid_op+0x1d/0x50
[   20.927734]  ? asm_exc_invalid_op+0x1f/0x30
[   20.927890]  ? __pfx_iommufd_fops_release+0x10/0x10
[   20.928074]  ? iommufd_fops_release+0x2a3/0x300
[   20.928245]  ? iommufd_fops_release+0x2a3/0x300
[   20.928417]  ? __pfx_iommufd_fops_release+0x10/0x10
[   20.928598]  ? rcu_is_watching+0x19/0xc0
[   20.928747]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   20.928947]  ? __pfx_iommufd_fops_release+0x10/0x10
[   20.929128]  __fput+0x424/0xaf0
[   20.929254]  ____fput+0x1f/0x30
[   20.929377]  task_work_run+0x19d/0x2b0
[   20.929521]  ? __pfx_task_work_run+0x10/0x10
[   20.929683]  ? __sanitizer_cov_trace_const_cmp1+0x1e/0x30
[   20.929882]  ? switch_task_namespaces+0xa9/0xe0
[   20.930054]  do_exit+0xac9/0x2790
[   20.930182]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   20.930411]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   20.930601]  ? __pfx_do_exit+0x10/0x10
[   20.930743]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   20.930944]  ? security_file_ioctl+0x9d/0xd0
[   20.931109]  make_task_dead+0x182/0x3c0
[   20.931256]  rewind_stack_and_make_dead+0x17/0x20
[   20.931432] RIP: 0033:0x7f78d563ee5d
[   20.931566] Code: Unable to access opcode bytes at 0x7f78d563ee33.
[   20.931787] RSP: 002b:00007ffdc5af0348 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   20.932059] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f78d563ee5d
[   20.932314] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   20.932568] RBP: 00007ffdc5af0360 R08: 0000000000000800 R09: 0000000000000800
[   20.932823] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffdc5af0478
[   20.933078] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f78d5911000
[   20.933338]  </TASK>
[   20.933423] irq event stamp: 0
[   20.933539] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   20.933767] hardirqs last disabled at (0): [<ffffffff8122f2d1>] copy_process+0x1c51/0x7140
[   20.934064] softirqs last  enabled at (0): [<ffffffff8122f312>] copy_process+0x1c92/0x7140
[   20.934359] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   20.934591] ---[ end trace 0000000000000000 ]---
[   20.937192] iommufd_mock iommufd_mock198: Adding to iommu group 198
[   20.937449] iommufd_mock iommufd_mock198: Removing from iommu group 198
[   20.937709] general protection fault, probably for non-canonical address 0xdffffc0000000006: 0000 [#199] PREEMPT SMP KASAN NOPTI
[   20.938126] KASAN: null-ptr-deref in range [0x0000000000000030-0x0000000000000037]
[   20.938401] CPU: 1 PID: 920 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   20.938721] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   20.939138] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   20.939355] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   20.940021] RSP: 0018:ffff8880246ffba8 EFLAGS: 00010206
[   20.940220] RAX: dffffc0000000000 RBX: ffff888014e78000 RCX: 0000000000000000
[   20.940484] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   20.940745] RBP: ffff8880246ffbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   20.941006] R10: ffff88800aad88df R11: 5f6466756d6d6f69 R12: 0000000000000000
[   20.941267] R13: ffffffff85cc0180 R14: ffff88800bd79500 R15: ffffffff87070ae0
[   20.941528] FS:  00007fd768210600(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
[   20.941822] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   20.942035] CR2: 0000000020000080 CR3: 00000000135e0000 CR4: 0000000000750ee0
[   20.942298] PKRU: 55555554
[   20.942403] Call Trace:
[   20.942519]  <TASK>
[   20.942604]  ? show_regs+0x6e/0x80
[   20.942743]  ? die_addr+0x45/0xb0
[   20.942883]  ? exc_general_protection+0x159/0x250
[   20.943069]  ? asm_exc_general_protection+0x2b/0x30
[   20.943257]  ? sysfs_remove_link_from_group+0x21/0x90
[   20.943449]  ? sysfs_remove_link_from_group+0x37/0x90
[   20.943641]  ? sysfs_remove_link_from_group+0x21/0x90
[   20.943833]  iommu_device_unlink+0x85/0xd0
[   20.943991]  iommu_deinit_device+0x11f/0x4c0
[   20.944157]  __iommu_group_remove_device+0x26b/0x300
[   20.944349]  iommu_group_remove_device+0x8a/0xb0
[   20.944527]  iommufd_test+0x1f1a/0x2d10
[   20.944675]  ? __pfx_lock_release+0x10/0x10
[   20.944836]  ? __pfx_lock_acquire+0x10/0x10
[   20.944998]  ? __pfx_iommufd_test+0x10/0x10
[   20.945161]  ? __sanitizer_cov_trace_const_cmp8+0x1c/0x30
[   20.945370]  iommufd_fops_ioctl+0x377/0x510
[   20.945532]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   20.945712]  ? trace_hardirqs_on+0x26/0x120
[   20.945875]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   20.946110]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   20.946298]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   20.946501]  ? security_file_ioctl+0x9d/0xd0
[   20.946669]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   20.946867]  __x64_sys_ioctl+0x1b9/0x230
[   20.947031]  do_syscall_64+0x3c/0x90
[   20.947278]  entry_SYSCALL_64_after_hwframe+0x6e/0xd8
[   20.947473] RIP: 0033:0x7fd76803ee5d
[   20.947612] Code: ff c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d 93 af 1b 00 f7 d8 64 89 01 48
[   20.948276] RSP: 002b:00007ffdd18ba698 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   20.948554] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007fd76803ee5d
[   20.948814] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   20.949074] RBP: 00007ffdd18ba6b0 R08: 0000000000000800 R09: 0000000000000800
[   20.949334] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffdd18ba7c8
[   20.949594] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007fd768251000
[   20.949860]  </TASK>
[   20.949946] Modules linked in:
[   20.950126] ---[ end trace 0000000000000000 ]---
[   20.950300] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   20.950514] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   20.951214] RSP: 0018:ffff88802457fba8 EFLAGS: 00010206
[   20.951404] RAX: dffffc0000000000 RBX: ffff888014f9b000 RCX: 0000000000000000
[   20.951659] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   20.951913] RBP: ffff88802457fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   20.952167] R10: ffff88800aad88df R11: 0000000000000001 R12: 0000000000000000
[   20.952422] R13: ffffffff85cc0180 R14: ffff8880109b6ac0 R15: ffffffff87070ae0
[   20.952677] FS:  00007fd768210600(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
[   20.952964] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   20.953172] CR2: 0000000020000080 CR3: 00000000135e0000 CR4: 0000000000750ee0
[   20.953429] PKRU: 55555554
[   20.953981] ------------[ cut here ]------------
[   20.954162] WARNING: CPU: 0 PID: 920 at drivers/iommu/iommufd/main.c:258 iommufd_fops_release+0x2a3/0x300
[   20.954508] Modules linked in:
[   20.954669] CPU: 0 PID: 920 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   20.954988] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   20.955391] RIP: 0010:iommufd_fops_release+0x2a3/0x300
[   20.955582] Code: 45 d0 65 48 2b 04 25 28 00 00 00 75 54 48 81 c4 88 00 00 00 31 c0 5b 41 5c 41 5d 41 5e 41 5f 5d c3 cc cc cc cc e8 ad 4f 0a fe <0f> 0b eb a6 e8 74 23 67 fe e9 f6 fe ff ff 48 89 85 50 ff ff ff e8
[   20.956234] RSP: 0018:ffff8880246ffc00 EFLAGS: 00010293
[   20.956426] RAX: 0000000000000000 RBX: ffff88801248a808 RCX: 0000000000000000
[   20.956681] RDX: ffff88801392a500 RSI: ffffffff835563e3 RDI: ffffffff86702b40
[   20.956937] RBP: ffff8880246ffcb0 R08: 0000000000000000 R09: fffffbfff0eb2644
[   20.957192] R10: ffffffff87593227 R11: ffff88800b1d8c00 R12: 0000000000000000
[   20.957448] R13: ffff888013c1c918 R14: ffff8880246ffc48 R15: ffffffff83556140
[   20.957704] FS:  0000000000000000(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   20.957992] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   20.958201] CR2: 00007fa281dd9000 CR3: 000000000687e000 CR4: 0000000000750ef0
[   20.958457] PKRU: 55555554
[   20.958560] Call Trace:
[   20.958678]  <TASK>
[   20.958763]  ? show_regs+0x6e/0x80
[   20.958896]  ? __warn+0xef/0x340
[   20.959021]  ? report_bug+0x25e/0x4b0
[   20.959162]  ? iommufd_fops_release+0x2a3/0x300
[   20.959334]  ? report_bug+0x2cb/0x4b0
[   20.959476]  ? handle_bug+0x46/0x90
[   20.959611]  ? exc_invalid_op+0x1d/0x50
[   20.959756]  ? asm_exc_invalid_op+0x1f/0x30
[   20.959912]  ? __pfx_iommufd_fops_release+0x10/0x10
[   20.960097]  ? iommufd_fops_release+0x2a3/0x300
[   20.960267]  ? iommufd_fops_release+0x2a3/0x300
[   20.960440]  ? __pfx_iommufd_fops_release+0x10/0x10
[   20.960622]  ? rcu_is_watching+0x19/0xc0
[   20.960772]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   20.960973]  ? __pfx_iommufd_fops_release+0x10/0x10
[   20.961168]  __fput+0x424/0xaf0
[   20.961298]  ____fput+0x1f/0x30
[   20.961421]  task_work_run+0x19d/0x2b0
[   20.961565]  ? __pfx_task_work_run+0x10/0x10
[   20.961726]  ? __sanitizer_cov_trace_const_cmp1+0x1e/0x30
[   20.961925]  ? switch_task_namespaces+0xa9/0xe0
[   20.962097]  do_exit+0xac9/0x2790
[   20.962226]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   20.962456]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   20.962665]  ? __pfx_do_exit+0x10/0x10
[   20.962813]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   20.963012]  ? security_file_ioctl+0x9d/0xd0
[   20.963177]  make_task_dead+0x182/0x3c0
[   20.963325]  rewind_stack_and_make_dead+0x17/0x20
[   20.963502] RIP: 0033:0x7fd76803ee5d
[   20.963637] Code: Unable to access opcode bytes at 0x7fd76803ee33.
[   20.963859] RSP: 002b:00007ffdd18ba698 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   20.964132] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007fd76803ee5d
[   20.964388] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   20.964643] RBP: 00007ffdd18ba6b0 R08: 0000000000000800 R09: 0000000000000800
[   20.964899] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffdd18ba7c8
[   20.965154] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007fd768251000
[   20.965415]  </TASK>
[   20.965500] irq event stamp: 0
[   20.965615] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   20.965842] hardirqs last disabled at (0): [<ffffffff8122f2d1>] copy_process+0x1c51/0x7140
[   20.966139] softirqs last  enabled at (0): [<ffffffff8122f312>] copy_process+0x1c92/0x7140
[   20.966436] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   20.966683] ---[ end trace 0000000000000000 ]---
[   20.969113] iommufd_mock iommufd_mock199: Adding to iommu group 199
[   20.969372] iommufd_mock iommufd_mock199: Removing from iommu group 199
[   20.969634] general protection fault, probably for non-canonical address 0xdffffc0000000006: 0000 [#200] PREEMPT SMP KASAN NOPTI
[   20.970051] KASAN: null-ptr-deref in range [0x0000000000000030-0x0000000000000037]
[   20.970328] CPU: 1 PID: 921 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   20.970647] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   20.971064] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   20.971280] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   20.971947] RSP: 0018:ffff88800fb2fba8 EFLAGS: 00010206
[   20.972142] RAX: dffffc0000000000 RBX: ffff888014e7e000 RCX: 0000000000000000
[   20.972404] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   20.972664] RBP: ffff88800fb2fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   20.972925] R10: ffff88800aad88df R11: 5f6466756d6d6f69 R12: 0000000000000000
[   20.973185] R13: ffffffff85cc0180 R14: ffff88800bd794c0 R15: ffffffff87070ae0
[   20.973446] FS:  00007fbfc5927600(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
[   20.973740] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   20.973953] CR2: 0000000020000080 CR3: 00000000124ca000 CR4: 0000000000750ee0
[   20.974214] PKRU: 55555554
[   20.974318] Call Trace:
[   20.974413]  <TASK>
[   20.974497]  ? show_regs+0x6e/0x80
[   20.974634]  ? die_addr+0x45/0xb0
[   20.974772]  ? exc_general_protection+0x159/0x250
[   20.974958]  ? asm_exc_general_protection+0x2b/0x30
[   20.975146]  ? sysfs_remove_link_from_group+0x21/0x90
[   20.975339]  ? sysfs_remove_link_from_group+0x37/0x90
[   20.975531]  ? sysfs_remove_link_from_group+0x21/0x90
[   20.975724]  iommu_device_unlink+0x85/0xd0
[   20.975882]  iommu_deinit_device+0x11f/0x4c0
[   20.976049]  __iommu_group_remove_device+0x26b/0x300
[   20.976240]  iommu_group_remove_device+0x8a/0xb0
[   20.976419]  iommufd_test+0x1f1a/0x2d10
[   20.976567]  ? __pfx_lock_release+0x10/0x10
[   20.976728]  ? __pfx_lock_acquire+0x10/0x10
[   20.976893]  ? __pfx_iommufd_test+0x10/0x10
[   20.977057]  ? __sanitizer_cov_trace_const_cmp8+0x1c/0x30
[   20.977263]  iommufd_fops_ioctl+0x377/0x510
[   20.977425]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   20.977606]  ? trace_hardirqs_on+0x26/0x120
[   20.977769]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   20.978004]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   20.978192]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   20.978396]  ? security_file_ioctl+0x9d/0xd0
[   20.978563]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   20.978743]  __x64_sys_ioctl+0x1b9/0x230
[   20.978909]  do_syscall_64+0x3c/0x90
[   20.979051]  entry_SYSCALL_64_after_hwframe+0x6e/0xd8
[   20.979242] RIP: 0033:0x7fbfc563ee5d
[   20.979380] Code: ff c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d 93 af 1b 00 f7 d8 64 89 01 48
[   20.980044] RSP: 002b:00007ffdef06b208 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   20.980320] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007fbfc563ee5d
[   20.980580] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   20.980840] RBP: 00007ffdef06b220 R08: 0000000000000800 R09: 0000000000000800
[   20.981100] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffdef06b338
[   20.981360] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007fbfc5968000
[   20.981625]  </TASK>
[   20.981711] Modules linked in:
[   20.981871] ---[ end trace 0000000000000000 ]---
[   20.982044] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   20.982257] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   20.982948] RSP: 0018:ffff88802457fba8 EFLAGS: 00010206
[   20.983139] RAX: dffffc0000000000 RBX: ffff888014f9b000 RCX: 0000000000000000
[   20.983392] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   20.983646] RBP: ffff88802457fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   20.983899] R10: ffff88800aad88df R11: 0000000000000001 R12: 0000000000000000
[   20.984152] R13: ffffffff85cc0180 R14: ffff8880109b6ac0 R15: ffffffff87070ae0
[   20.984406] FS:  00007fbfc5927600(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
[   20.984691] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   20.984898] CR2: 0000000020000080 CR3: 00000000124ca000 CR4: 0000000000750ee0
[   20.985152] PKRU: 55555554
[   20.985550] ------------[ cut here ]------------
[   20.985729] WARNING: CPU: 1 PID: 921 at drivers/iommu/iommufd/main.c:258 iommufd_fops_release+0x2a3/0x300
[   20.986071] Modules linked in:
[   20.986187] CPU: 1 PID: 921 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   20.986494] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   20.986980] RIP: 0010:iommufd_fops_release+0x2a3/0x300
[   20.987172] Code: 45 d0 65 48 2b 04 25 28 00 00 00 75 54 48 81 c4 88 00 00 00 31 c0 5b 41 5c 41 5d 41 5e 41 5f 5d c3 cc cc cc cc e8 ad 4f 0a fe <0f> 0b eb a6 e8 74 23 67 fe e9 f6 fe ff ff 48 89 85 50 ff ff ff e8
[   20.987824] RSP: 0018:ffff88800fb2fc00 EFLAGS: 00010293
[   20.988014] RAX: 0000000000000000 RBX: ffff88801248af08 RCX: 0000000000000000
[   20.988267] RDX: ffff88801392ca00 RSI: ffffffff835563e3 RDI: ffffffff86702b48
[   20.988520] RBP: ffff88800fb2fcb0 R08: 0000000000000000 R09: fffffbfff0eb2644
[   20.988773] R10: ffffffff87593227 R11: ffff88800b011600 R12: 0000000000000000
[   20.989026] R13: ffff88801395da98 R14: ffff88800fb2fc48 R15: ffffffff83556140
[   20.989279] FS:  0000000000000000(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
[   20.989565] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   20.989773] CR2: 0000000020000080 CR3: 000000000687e000 CR4: 0000000000750ee0
[   20.990027] PKRU: 55555554
[   20.990128] Call Trace:
[   20.990220]  <TASK>
[   20.990302]  ? show_regs+0x6e/0x80
[   20.990433]  ? __warn+0xef/0x340
[   20.990558]  ? report_bug+0x25e/0x4b0
[   20.990704]  ? iommufd_fops_release+0x2a3/0x300
[   20.990876]  ? report_bug+0x2cb/0x4b0
[   20.991018]  ? handle_bug+0x46/0x90
[   20.991152]  ? exc_invalid_op+0x1d/0x50
[   20.991296]  ? asm_exc_invalid_op+0x1f/0x30
[   20.991451]  ? __pfx_iommufd_fops_release+0x10/0x10
[   20.991634]  ? iommufd_fops_release+0x2a3/0x300
[   20.991803]  ? iommufd_fops_release+0x2a3/0x300
[   20.991974]  ? __pfx_iommufd_fops_release+0x10/0x10
[   20.992155]  ? rcu_is_watching+0x19/0xc0
[   20.992304]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   20.992502]  ? __pfx_iommufd_fops_release+0x10/0x10
[   20.992683]  __fput+0x424/0xaf0
[   20.992808]  ____fput+0x1f/0x30
[   20.992932]  task_work_run+0x19d/0x2b0
[   20.993075]  ? __pfx_task_work_run+0x10/0x10
[   20.993234]  ? __sanitizer_cov_trace_const_cmp1+0x1e/0x30
[   20.993432]  ? switch_task_namespaces+0xa9/0xe0
[   20.993602]  do_exit+0xac9/0x2790
[   20.993730]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   20.993957]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   20.994140]  ? __pfx_do_exit+0x10/0x10
[   20.994281]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   20.994478]  ? security_file_ioctl+0x9d/0xd0
[   20.994647]  make_task_dead+0x182/0x3c0
[   20.994793]  rewind_stack_and_make_dead+0x17/0x20
[   20.994969] RIP: 0033:0x7fbfc563ee5d
[   20.995102] Code: Unable to access opcode bytes at 0x7fbfc563ee33.
[   20.995322] RSP: 002b:00007ffdef06b208 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   20.995592] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007fbfc563ee5d
[   20.995844] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   20.996097] RBP: 00007ffdef06b220 R08: 0000000000000800 R09: 0000000000000800
[   20.996350] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffdef06b338
[   20.996603] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007fbfc5968000
[   20.996861]  </TASK>
[   20.996945] irq event stamp: 0
[   20.997058] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   20.997282] hardirqs last disabled at (0): [<ffffffff8122f2d1>] copy_process+0x1c51/0x7140
[   20.997576] softirqs last  enabled at (0): [<ffffffff8122f312>] copy_process+0x1c92/0x7140
[   20.997870] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   20.998094] ---[ end trace 0000000000000000 ]---
[   21.000746] iommufd_mock iommufd_mock200: Adding to iommu group 200
[   21.001010] iommufd_mock iommufd_mock200: Removing from iommu group 200
[   21.001269] general protection fault, probably for non-canonical address 0xdffffc0000000006: 0000 [#201] PREEMPT SMP KASAN NOPTI
[   21.001676] KASAN: null-ptr-deref in range [0x0000000000000030-0x0000000000000037]
[   21.001946] CPU: 0 PID: 922 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   21.002256] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   21.002659] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   21.002883] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   21.003534] RSP: 0018:ffff8880246ffba8 EFLAGS: 00010206
[   21.003726] RAX: dffffc0000000000 RBX: ffff888014981000 RCX: 0000000000000000
[   21.003981] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   21.004236] RBP: ffff8880246ffbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   21.004492] R10: ffff88800aad88df R11: 5f6466756d6d6f69 R12: 0000000000000000
[   21.004747] R13: ffffffff85cc0180 R14: ffff8880247bdc20 R15: ffffffff87070ae0
[   21.005003] FS:  00007fa1e854e600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   21.005290] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   21.005498] CR2: 0000000020000080 CR3: 000000000efe6000 CR4: 0000000000750ef0
[   21.005754] PKRU: 55555554
[   21.005857] Call Trace:
[   21.005949]  <TASK>
[   21.006031]  ? show_regs+0x6e/0x80
[   21.006166]  ? die_addr+0x45/0xb0
[   21.006297]  ? exc_general_protection+0x159/0x250
[   21.006478]  ? asm_exc_general_protection+0x2b/0x30
[   21.006663]  ? sysfs_remove_link_from_group+0x21/0x90
[   21.006860]  ? sysfs_remove_link_from_group+0x37/0x90
[   21.007050]  ? sysfs_remove_link_from_group+0x21/0x90
[   21.007239]  iommu_device_unlink+0x85/0xd0
[   21.007394]  iommu_deinit_device+0x11f/0x4c0
[   21.007558]  __iommu_group_remove_device+0x26b/0x300
[   21.007746]  iommu_group_remove_device+0x8a/0xb0
[   21.007920]  iommufd_test+0x1f1a/0x2d10
[   21.008065]  ? __pfx_lock_release+0x10/0x10
[   21.008223]  ? __pfx_lock_acquire+0x10/0x10
[   21.008383]  ? __pfx_iommufd_test+0x10/0x10
[   21.008541]  ? __sanitizer_cov_trace_const_cmp8+0x1c/0x30
[   21.008743]  iommufd_fops_ioctl+0x377/0x510
[   21.008903]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   21.009079]  ? trace_hardirqs_on+0x26/0x120
[   21.009240]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   21.009470]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   21.009654]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   21.009855]  ? security_file_ioctl+0x9d/0xd0
[   21.010019]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   21.010195]  __x64_sys_ioctl+0x1b9/0x230
[   21.010344]  do_syscall_64+0x3c/0x90
[   21.010480]  entry_SYSCALL_64_after_hwframe+0x6e/0xd8
[   21.010666] RIP: 0033:0x7fa1e823ee5d
[   21.010804] Code: ff c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d 93 af 1b 00 f7 d8 64 89 01 48
[   21.011455] RSP: 002b:00007ffc64ed7668 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   21.011727] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007fa1e823ee5d
[   21.011981] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   21.012236] RBP: 00007ffc64ed7680 R08: 0000000000000800 R09: 0000000000000800
[   21.012491] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffc64ed7798
[   21.012745] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007fa1e858f000
[   21.013005]  </TASK>
[   21.013090] Modules linked in:
[   21.013231] ---[ end trace 0000000000000000 ]---
[   21.013401] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   21.013611] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   21.014262] RSP: 0018:ffff88802457fba8 EFLAGS: 00010206
[   21.014453] RAX: dffffc0000000000 RBX: ffff888014f9b000 RCX: 0000000000000000
[   21.014713] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   21.014979] RBP: ffff88802457fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   21.015234] R10: ffff88800aad88df R11: 0000000000000001 R12: 0000000000000000
[   21.015489] R13: ffffffff85cc0180 R14: ffff8880109b6ac0 R15: ffffffff87070ae0
[   21.015744] FS:  00007fa1e854e600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   21.016032] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   21.016240] CR2: 0000000020000080 CR3: 000000000efe6000 CR4: 0000000000750ef0
[   21.016496] PKRU: 55555554
[   21.016857] ------------[ cut here ]------------
[   21.017027] WARNING: CPU: 0 PID: 922 at drivers/iommu/iommufd/main.c:258 iommufd_fops_release+0x2a3/0x300
[   21.017370] Modules linked in:
[   21.017486] CPU: 0 PID: 922 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   21.017796] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   21.018195] RIP: 0010:iommufd_fops_release+0x2a3/0x300
[   21.018385] Code: 45 d0 65 48 2b 04 25 28 00 00 00 75 54 48 81 c4 88 00 00 00 31 c0 5b 41 5c 41 5d 41 5e 41 5f 5d c3 cc cc cc cc e8 ad 4f 0a fe <0f> 0b eb a6 e8 74 23 67 fe e9 f6 fe ff ff 48 89 85 50 ff ff ff e8
[   21.019153] RSP: 0018:ffff8880246ffc00 EFLAGS: 00010293
[   21.019346] RAX: 0000000000000000 RBX: ffff88800fe06c08 RCX: 0000000000000000
[   21.019601] RDX: ffff8880122b4a00 RSI: ffffffff835563e3 RDI: ffffffff86702b40
[   21.019856] RBP: ffff8880246ffcb0 R08: 0000000000000000 R09: fffffbfff0eb2644
[   21.020111] R10: ffffffff87593227 R11: ffff888013411400 R12: 0000000000000000
[   21.020366] R13: ffff88801897d098 R14: ffff8880246ffc48 R15: ffffffff83556140
[   21.020622] FS:  0000000000000000(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   21.020909] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   21.021118] CR2: 0000000020000080 CR3: 000000000687e000 CR4: 0000000000750ef0
[   21.021373] PKRU: 55555554
[   21.021476] Call Trace:
[   21.021569]  <TASK>
[   21.021651]  ? show_regs+0x6e/0x80
[   21.021783]  ? __warn+0xef/0x340
[   21.021908]  ? report_bug+0x25e/0x4b0
[   21.022049]  ? iommufd_fops_release+0x2a3/0x300
[   21.022220]  ? report_bug+0x2cb/0x4b0
[   21.022363]  ? handle_bug+0x46/0x90
[   21.022497]  ? exc_invalid_op+0x1d/0x50
[   21.022650]  ? asm_exc_invalid_op+0x1f/0x30
[   21.022810]  ? __pfx_iommufd_fops_release+0x10/0x10
[   21.022998]  ? iommufd_fops_release+0x2a3/0x300
[   21.023169]  ? iommufd_fops_release+0x2a3/0x300
[   21.023341]  ? __pfx_iommufd_fops_release+0x10/0x10
[   21.023523]  ? rcu_is_watching+0x19/0xc0
[   21.023673]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   21.023873]  ? __pfx_iommufd_fops_release+0x10/0x10
[   21.024054]  __fput+0x424/0xaf0
[   21.024180]  ____fput+0x1f/0x30
[   21.024303]  task_work_run+0x19d/0x2b0
[   21.024447]  ? __pfx_task_work_run+0x10/0x10
[   21.024608]  ? __sanitizer_cov_trace_const_cmp1+0x1e/0x30
[   21.024806]  ? switch_task_namespaces+0xa9/0xe0
[   21.024977]  do_exit+0xac9/0x2790
[   21.025106]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   21.025334]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   21.025518]  ? __pfx_do_exit+0x10/0x10
[   21.025659]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   21.025858]  ? security_file_ioctl+0x9d/0xd0
[   21.026022]  make_task_dead+0x182/0x3c0
[   21.026168]  rewind_stack_and_make_dead+0x17/0x20
[   21.026345] RIP: 0033:0x7fa1e823ee5d
[   21.026479] Code: Unable to access opcode bytes at 0x7fa1e823ee33.
[   21.026706] RSP: 002b:00007ffc64ed7668 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   21.026987] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007fa1e823ee5d
[   21.027243] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   21.027498] RBP: 00007ffc64ed7680 R08: 0000000000000800 R09: 0000000000000800
[   21.027754] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffc64ed7798
[   21.028009] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007fa1e858f000
[   21.028269]  </TASK>
[   21.028353] irq event stamp: 0
[   21.028468] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   21.028694] hardirqs last disabled at (0): [<ffffffff8122f2d1>] copy_process+0x1c51/0x7140
[   21.028991] softirqs last  enabled at (0): [<ffffffff8122f312>] copy_process+0x1c92/0x7140
[   21.029287] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   21.029513] ---[ end trace 0000000000000000 ]---
[   21.032264] iommufd_mock iommufd_mock201: Adding to iommu group 201
[   21.032524] iommufd_mock iommufd_mock201: Removing from iommu group 201
[   21.032785] general protection fault, probably for non-canonical address 0xdffffc0000000006: 0000 [#202] PREEMPT SMP KASAN NOPTI
[   21.033200] KASAN: null-ptr-deref in range [0x0000000000000030-0x0000000000000037]
[   21.033476] CPU: 0 PID: 923 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   21.033793] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   21.034202] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   21.034418] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   21.035094] RSP: 0018:ffff88800fb2fba8 EFLAGS: 00010206
[   21.035286] RAX: dffffc0000000000 RBX: ffff888014983000 RCX: 0000000000000000
[   21.035542] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   21.035797] RBP: ffff88800fb2fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   21.036054] R10: ffff88800aad88df R11: 5f6466756d6d6f69 R12: 0000000000000000
[   21.036311] R13: ffffffff85cc0180 R14: ffff8880247bdd20 R15: ffffffff87070ae0
[   21.036567] FS:  00007fec4938d600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   21.036860] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   21.037073] CR2: 0000000020000080 CR3: 000000000efe6000 CR4: 0000000000750ef0
[   21.037335] PKRU: 55555554
[   21.037439] Call Trace:
[   21.037534]  <TASK>
[   21.037618]  ? show_regs+0x6e/0x80
[   21.037756]  ? die_addr+0x45/0xb0
[   21.037891]  ? exc_general_protection+0x159/0x250
[   21.038077]  ? asm_exc_general_protection+0x2b/0x30
[   21.038267]  ? sysfs_remove_link_from_group+0x21/0x90
[   21.038462]  ? sysfs_remove_link_from_group+0x37/0x90
[   21.038657]  ? sysfs_remove_link_from_group+0x21/0x90
[   21.038859]  iommu_device_unlink+0x85/0xd0
[   21.039017]  iommu_deinit_device+0x11f/0x4c0
[   21.039185]  __iommu_group_remove_device+0x26b/0x300
[   21.039379]  iommu_group_remove_device+0x8a/0xb0
[   21.039558]  iommufd_test+0x1f1a/0x2d10
[   21.039706]  ? __pfx_lock_release+0x10/0x10
[   21.039868]  ? __pfx_lock_acquire+0x10/0x10
[   21.040031]  ? __pfx_iommufd_test+0x10/0x10
[   21.040192]  ? __sanitizer_cov_trace_const_cmp8+0x1c/0x30
[   21.040397]  iommufd_fops_ioctl+0x377/0x510
[   21.040560]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   21.040740]  ? trace_hardirqs_on+0x26/0x120
[   21.040903]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   21.041137]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   21.041325]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   21.041530]  ? security_file_ioctl+0x9d/0xd0
[   21.041696]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   21.041877]  __x64_sys_ioctl+0x1b9/0x230
[   21.042028]  do_syscall_64+0x3c/0x90
[   21.042167]  entry_SYSCALL_64_after_hwframe+0x6e/0xd8
[   21.042358] RIP: 0033:0x7fec4903ee5d
[   21.042496] Code: ff c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d 93 af 1b 00 f7 d8 64 89 01 48
[   21.043167] RSP: 002b:00007ffc8ffb13a8 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   21.043445] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007fec4903ee5d
[   21.043705] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   21.043966] RBP: 00007ffc8ffb13c0 R08: 0000000000000800 R09: 0000000000000800
[   21.044225] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffc8ffb14d8
[   21.044485] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007fec493ce000
[   21.044751]  </TASK>
[   21.044838] Modules linked in:
[   21.045048] ---[ end trace 0000000000000000 ]---
[   21.045229] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   21.045450] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   21.046122] RSP: 0018:ffff88802457fba8 EFLAGS: 00010206
[   21.046320] RAX: dffffc0000000000 RBX: ffff888014f9b000 RCX: 0000000000000000
[   21.046589] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   21.046855] RBP: ffff88802457fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   21.047113] R10: ffff88800aad88df R11: 0000000000000001 R12: 0000000000000000
[   21.047366] R13: ffffffff85cc0180 R14: ffff8880109b6ac0 R15: ffffffff87070ae0
[   21.047619] FS:  00007fec4938d600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   21.047904] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   21.048112] CR2: 0000000020000080 CR3: 000000000efe6000 CR4: 0000000000750ef0
[   21.048365] PKRU: 55555554
[   21.048731] ------------[ cut here ]------------
[   21.048904] WARNING: CPU: 0 PID: 923 at drivers/iommu/iommufd/main.c:258 iommufd_fops_release+0x2a3/0x300
[   21.049251] Modules linked in:
[   21.049368] CPU: 0 PID: 923 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   21.049682] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   21.050088] RIP: 0010:iommufd_fops_release+0x2a3/0x300
[   21.050280] Code: 45 d0 65 48 2b 04 25 28 00 00 00 75 54 48 81 c4 88 00 00 00 31 c0 5b 41 5c 41 5d 41 5e 41 5f 5d c3 cc cc cc cc e8 ad 4f 0a fe <0f> 0b eb a6 e8 74 23 67 fe e9 f6 fe ff ff 48 89 85 50 ff ff ff e8
[   21.050959] RSP: 0018:ffff88800fb2fc00 EFLAGS: 00010293
[   21.051152] RAX: 0000000000000000 RBX: ffff88800fe06308 RCX: 0000000000000000
[   21.051410] RDX: ffff888011e40000 RSI: ffffffff835563e3 RDI: ffffffff86702b40
[   21.051666] RBP: ffff88800fb2fcb0 R08: 0000000000000000 R09: fffffbfff0eb2644
[   21.051922] R10: ffffffff87593227 R11: ffff8880131cae00 R12: 0000000000000000
[   21.052177] R13: ffff88801897d818 R14: ffff88800fb2fc48 R15: ffffffff83556140
[   21.052435] FS:  0000000000000000(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   21.052723] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   21.052933] CR2: 0000000020000080 CR3: 000000000687e000 CR4: 0000000000750ef0
[   21.053190] PKRU: 55555554
[   21.053293] Call Trace:
[   21.053386]  <TASK>
[   21.053469]  ? show_regs+0x6e/0x80
[   21.053602]  ? __warn+0xef/0x340
[   21.053728]  ? report_bug+0x25e/0x4b0
[   21.053870]  ? iommufd_fops_release+0x2a3/0x300
[   21.054067]  ? report_bug+0x2cb/0x4b0
[   21.054212]  ? handle_bug+0x46/0x90
[   21.054346]  ? exc_invalid_op+0x1d/0x50
[   21.054492]  ? asm_exc_invalid_op+0x1f/0x30
[   21.054656]  ? __pfx_iommufd_fops_release+0x10/0x10
[   21.054844]  ? iommufd_fops_release+0x2a3/0x300
[   21.055016]  ? iommufd_fops_release+0x2a3/0x300
[   21.055189]  ? __pfx_iommufd_fops_release+0x10/0x10
[   21.055371]  ? rcu_is_watching+0x19/0xc0
[   21.055521]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   21.055722]  ? __pfx_iommufd_fops_release+0x10/0x10
[   21.055905]  __fput+0x424/0xaf0
[   21.056032]  ____fput+0x1f/0x30
[   21.056156]  task_work_run+0x19d/0x2b0
[   21.056301]  ? __pfx_task_work_run+0x10/0x10
[   21.056462]  ? __sanitizer_cov_trace_const_cmp1+0x1e/0x30
[   21.056663]  ? switch_task_namespaces+0xa9/0xe0
[   21.056836]  do_exit+0xac9/0x2790
[   21.056965]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   21.057195]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   21.057379]  ? __pfx_do_exit+0x10/0x10
[   21.057521]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   21.057721]  ? security_file_ioctl+0x9d/0xd0
[   21.057886]  make_task_dead+0x182/0x3c0
[   21.058033]  rewind_stack_and_make_dead+0x17/0x20
[   21.058211] RIP: 0033:0x7fec4903ee5d
[   21.058346] Code: Unable to access opcode bytes at 0x7fec4903ee33.
[   21.058567] RSP: 002b:00007ffc8ffb13a8 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   21.058851] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007fec4903ee5d
[   21.059108] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   21.059363] RBP: 00007ffc8ffb13c0 R08: 0000000000000800 R09: 0000000000000800
[   21.059619] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffc8ffb14d8
[   21.059875] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007fec493ce000
[   21.060137]  </TASK>
[   21.060222] irq event stamp: 0
[   21.060338] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   21.060566] hardirqs last disabled at (0): [<ffffffff8122f2d1>] copy_process+0x1c51/0x7140
[   21.060864] softirqs last  enabled at (0): [<ffffffff8122f312>] copy_process+0x1c92/0x7140
[   21.061161] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   21.061391] ---[ end trace 0000000000000000 ]---
[   21.064147] iommufd_mock iommufd_mock202: Adding to iommu group 202
[   21.064404] iommufd_mock iommufd_mock202: Removing from iommu group 202
[   21.064664] general protection fault, probably for non-canonical address 0xdffffc0000000006: 0000 [#203] PREEMPT SMP KASAN NOPTI
[   21.065080] KASAN: null-ptr-deref in range [0x0000000000000030-0x0000000000000037]
[   21.065355] CPU: 0 PID: 924 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   21.065671] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   21.066081] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   21.066296] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   21.066957] RSP: 0018:ffff88801654fba8 EFLAGS: 00010206
[   21.067151] RAX: dffffc0000000000 RBX: ffff888014982000 RCX: 0000000000000000
[   21.067409] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   21.067667] RBP: ffff88801654fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   21.067925] R10: ffff88800aad88df R11: 5f6466756d6d6f69 R12: 0000000000000000
[   21.068183] R13: ffffffff85cc0180 R14: ffff8880247bd9a0 R15: ffffffff87070ae0
[   21.068442] FS:  00007f55d162c600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   21.068733] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   21.068944] CR2: 0000000020000080 CR3: 000000000efe6000 CR4: 0000000000750ef0
[   21.069202] PKRU: 55555554
[   21.069306] Call Trace:
[   21.069400]  <TASK>
[   21.069482]  ? show_regs+0x6e/0x80
[   21.069618]  ? die_addr+0x45/0xb0
[   21.069751]  ? exc_general_protection+0x159/0x250
[   21.069935]  ? asm_exc_general_protection+0x2b/0x30
[   21.070121]  ? sysfs_remove_link_from_group+0x21/0x90
[   21.070312]  ? sysfs_remove_link_from_group+0x37/0x90
[   21.070502]  ? sysfs_remove_link_from_group+0x21/0x90
[   21.070700]  iommu_device_unlink+0x85/0xd0
[   21.070865]  iommu_deinit_device+0x11f/0x4c0
[   21.071031]  __iommu_group_remove_device+0x26b/0x300
[   21.071220]  iommu_group_remove_device+0x8a/0xb0
[   21.071397]  iommufd_test+0x1f1a/0x2d10
[   21.071543]  ? __pfx_lock_release+0x10/0x10
[   21.071702]  ? __pfx_lock_acquire+0x10/0x10
[   21.071864]  ? __pfx_iommufd_test+0x10/0x10
[   21.072023]  ? __sanitizer_cov_trace_const_cmp8+0x1c/0x30
[   21.072227]  iommufd_fops_ioctl+0x377/0x510
[   21.072388]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   21.072566]  ? trace_hardirqs_on+0x26/0x120
[   21.072728]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   21.072961]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   21.073148]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   21.073350]  ? security_file_ioctl+0x9d/0xd0
[   21.073515]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   21.073694]  __x64_sys_ioctl+0x1b9/0x230
[   21.073844]  do_syscall_64+0x3c/0x90
[   21.073981]  entry_SYSCALL_64_after_hwframe+0x6e/0xd8
[   21.074170] RIP: 0033:0x7f55d143ee5d
[   21.074307] Code: ff c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d 93 af 1b 00 f7 d8 64 89 01 48
[   21.074976] RSP: 002b:00007ffe8c3858b8 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   21.075251] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f55d143ee5d
[   21.075509] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   21.075766] RBP: 00007ffe8c3858d0 R08: 0000000000000800 R09: 0000000000000800
[   21.076024] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffe8c3859e8
[   21.076282] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f55d166d000
[   21.076545]  </TASK>
[   21.076631] Modules linked in:
[   21.076801] ---[ end trace 0000000000000000 ]---
[   21.076976] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   21.077192] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   21.077864] RSP: 0018:ffff88802457fba8 EFLAGS: 00010206
[   21.078061] RAX: dffffc0000000000 RBX: ffff888014f9b000 RCX: 0000000000000000
[   21.078324] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   21.078594] RBP: ffff88802457fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   21.078856] R10: ffff88800aad88df R11: 0000000000000001 R12: 0000000000000000
[   21.079290] R13: ffffffff85cc0180 R14: ffff8880109b6ac0 R15: ffffffff87070ae0
[   21.079548] FS:  00007f55d162c600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   21.079859] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   21.080113] CR2: 0000000020000080 CR3: 000000000efe6000 CR4: 0000000000750ef0
[   21.080388] PKRU: 55555554
[   21.080785] ------------[ cut here ]------------
[   21.080967] WARNING: CPU: 0 PID: 924 at drivers/iommu/iommufd/main.c:258 iommufd_fops_release+0x2a3/0x300
[   21.081354] Modules linked in:
[   21.081470] CPU: 0 PID: 924 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   21.081848] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   21.082269] RIP: 0010:iommufd_fops_release+0x2a3/0x300
[   21.082499] Code: 45 d0 65 48 2b 04 25 28 00 00 00 75 54 48 81 c4 88 00 00 00 31 c0 5b 41 5c 41 5d 41 5e 41 5f 5d c3 cc cc cc cc e8 ad 4f 0a fe <0f> 0b eb a6 e8 74 23 67 fe e9 f6 fe ff ff 48 89 85 50 ff ff ff e8
[   21.083259] RSP: 0018:ffff88801654fc00 EFLAGS: 00010293
[   21.083469] RAX: 0000000000000000 RBX: ffff88800fe06f08 RCX: 0000000000000000
[   21.083766] RDX: ffff888011e42500 RSI: ffffffff835563e3 RDI: ffffffff86702b40
[   21.084028] RBP: ffff88801654fcb0 R08: 0000000000000000 R09: fffffbfff0eb2644
[   21.084331] R10: ffffffff87593227 R11: ffff888011a39400 R12: 0000000000000000
[   21.084589] R13: ffff8880202df598 R14: ffff88801654fc48 R15: ffffffff83556140
[   21.084913] FS:  0000000000000000(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   21.085205] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   21.085416] CR2: 0000000020000080 CR3: 000000000687e000 CR4: 0000000000750ef0
[   21.085686] PKRU: 55555554
[   21.085797] Call Trace:
[   21.085937]  <TASK>
[   21.086021]  ? show_regs+0x6e/0x80
[   21.086155]  ? __warn+0xef/0x340
[   21.086293]  ? report_bug+0x25e/0x4b0
[   21.086479]  ? iommufd_fops_release+0x2a3/0x300
[   21.086659]  ? report_bug+0x2cb/0x4b0
[   21.086808]  ? handle_bug+0x46/0x90
[   21.086955]  ? exc_invalid_op+0x1d/0x50
[   21.087190]  ? asm_exc_invalid_op+0x1f/0x30
[   21.087352]  ? __pfx_iommufd_fops_release+0x10/0x10
[   21.087538]  ? iommufd_fops_release+0x2a3/0x300
[   21.087710]  ? iommufd_fops_release+0x2a3/0x300
[   21.087885]  ? __pfx_iommufd_fops_release+0x10/0x10
[   21.088093]  ? rcu_is_watching+0x19/0xc0
[   21.088283]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   21.088485]  ? __pfx_iommufd_fops_release+0x10/0x10
[   21.088690]  __fput+0x424/0xaf0
[   21.088858]  ____fput+0x1f/0x30
[   21.088983]  task_work_run+0x19d/0x2b0
[   21.089128]  ? __pfx_task_work_run+0x10/0x10
[   21.089311]  ? __sanitizer_cov_trace_const_cmp1+0x1e/0x30
[   21.089557]  ? switch_task_namespaces+0xa9/0xe0
[   21.089731]  do_exit+0xac9/0x2790
[   21.089873]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   21.090152]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   21.090338]  ? __pfx_do_exit+0x10/0x10
[   21.090499]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   21.090746]  ? security_file_ioctl+0x9d/0xd0
[   21.090915]  make_task_dead+0x182/0x3c0
[   21.091064]  rewind_stack_and_make_dead+0x17/0x20
[   21.091243] RIP: 0033:0x7f55d143ee5d
[   21.091379] Code: Unable to access opcode bytes at 0x7f55d143ee33.
[   21.091666] RSP: 002b:00007ffe8c3858b8 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   21.091943] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f55d143ee5d
[   21.092264] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   21.092523] RBP: 00007ffe8c3858d0 R08: 0000000000000800 R09: 0000000000000800
[   21.092841] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffe8c3859e8
[   21.093100] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f55d166d000
[   21.093424]  </TASK>
[   21.093510] irq event stamp: 0
[   21.093626] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   21.093861] hardirqs last disabled at (0): [<ffffffff8122f2d1>] copy_process+0x1c51/0x7140
[   21.094217] softirqs last  enabled at (0): [<ffffffff8122f312>] copy_process+0x1c92/0x7140
[   21.094537] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   21.094818] ---[ end trace 0000000000000000 ]---
[   21.097535] iommufd_mock iommufd_mock203: Adding to iommu group 203
[   21.097784] iommufd_mock iommufd_mock203: Removing from iommu group 203
[   21.098045] general protection fault, probably for non-canonical address 0xdffffc0000000006: 0000 [#204] PREEMPT SMP KASAN NOPTI
[   21.098481] KASAN: null-ptr-deref in range [0x0000000000000030-0x0000000000000037]
[   21.098786] CPU: 0 PID: 925 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   21.099101] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   21.099509] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   21.099724] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   21.100384] RSP: 0018:ffff8880246ffba8 EFLAGS: 00010206
[   21.100578] RAX: dffffc0000000000 RBX: ffff888014980000 RCX: 0000000000000000
[   21.100837] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   21.101096] RBP: ffff8880246ffbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   21.101354] R10: ffff88800aad88df R11: 5f6466756d6d6f69 R12: 0000000000000000
[   21.101613] R13: ffffffff85cc0180 R14: ffff8880247bdb60 R15: ffffffff87070ae0
[   21.101872] FS:  00007f4d3587f600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   21.102163] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   21.102374] CR2: 0000000020000080 CR3: 0000000024d1c000 CR4: 0000000000750ef0
[   21.102633] PKRU: 55555554
[   21.102737] Call Trace:
[   21.102844]  <TASK>
[   21.102927]  ? show_regs+0x6e/0x80
[   21.103064]  ? die_addr+0x45/0xb0
[   21.103198]  ? exc_general_protection+0x159/0x250
[   21.103383]  ? asm_exc_general_protection+0x2b/0x30
[   21.103571]  ? sysfs_remove_link_from_group+0x21/0x90
[   21.103763]  ? sysfs_remove_link_from_group+0x37/0x90
[   21.103955]  ? sysfs_remove_link_from_group+0x21/0x90
[   21.104146]  iommu_device_unlink+0x85/0xd0
[   21.104305]  iommu_deinit_device+0x11f/0x4c0
[   21.104507]  __iommu_group_remove_device+0x26b/0x300
[   21.104743]  iommu_group_remove_device+0x8a/0xb0
[   21.104941]  iommufd_test+0x1f1a/0x2d10
[   21.105109]  ? __pfx_lock_release+0x10/0x10
[   21.105270]  ? __pfx_lock_acquire+0x10/0x10
[   21.105432]  ? __pfx_iommufd_test+0x10/0x10
[   21.105592]  ? __sanitizer_cov_trace_const_cmp8+0x1c/0x30
[   21.105796]  iommufd_fops_ioctl+0x377/0x510
[   21.105958]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   21.106137]  ? trace_hardirqs_on+0x26/0x120
[   21.106299]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   21.106533]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   21.106720]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   21.106925]  ? security_file_ioctl+0x9d/0xd0
[   21.107091]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   21.107270]  __x64_sys_ioctl+0x1b9/0x230
[   21.107421]  do_syscall_64+0x3c/0x90
[   21.107559]  entry_SYSCALL_64_after_hwframe+0x6e/0xd8
[   21.107749] RIP: 0033:0x7f4d3563ee5d
[   21.107886] Code: ff c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d 93 af 1b 00 f7 d8 64 89 01 48
[   21.108545] RSP: 002b:00007ffcdd304828 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   21.108820] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f4d3563ee5d
[   21.109079] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   21.109337] RBP: 00007ffcdd304840 R08: 0000000000000800 R09: 0000000000000800
[   21.109595] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffcdd304958
[   21.109853] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f4d358c0000
[   21.110117]  </TASK>
[   21.110203] Modules linked in:
[   21.110381] ---[ end trace 0000000000000000 ]---
[   21.110553] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   21.110863] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   21.111524] RSP: 0018:ffff88802457fba8 EFLAGS: 00010206
[   21.111717] RAX: dffffc0000000000 RBX: ffff888014f9b000 RCX: 0000000000000000
[   21.111975] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   21.112233] RBP: ffff88802457fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   21.112521] R10: ffff88800aad88df R11: 0000000000000001 R12: 0000000000000000
[   21.112819] R13: ffffffff85cc0180 R14: ffff8880109b6ac0 R15: ffffffff87070ae0
[   21.113082] FS:  00007f4d3587f600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   21.113438] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   21.113650] CR2: 0000000020000080 CR3: 0000000024d1c000 CR4: 0000000000750ef0
[   21.113971] PKRU: 55555554
[   21.114343] ------------[ cut here ]------------
[   21.114561] WARNING: CPU: 0 PID: 925 at drivers/iommu/iommufd/main.c:258 iommufd_fops_release+0x2a3/0x300
[   21.114925] Modules linked in:
[   21.115043] CPU: 0 PID: 925 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   21.115420] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   21.115864] RIP: 0010:iommufd_fops_release+0x2a3/0x300
[   21.116100] Code: 45 d0 65 48 2b 04 25 28 00 00 00 75 54 48 81 c4 88 00 00 00 31 c0 5b 41 5c 41 5d 41 5e 41 5f 5d c3 cc cc cc cc e8 ad 4f 0a fe <0f> 0b eb a6 e8 74 23 67 fe e9 f6 fe ff ff 48 89 85 50 ff ff ff e8
[   21.116821] RSP: 0018:ffff8880246ffc00 EFLAGS: 00010293
[   21.117026] RAX: 0000000000000000 RBX: ffff88800fe06208 RCX: 0000000000000000
[   21.117330] RDX: ffff88801388ca00 RSI: ffffffff835563e3 RDI: ffffffff86702b40
[   21.117598] RBP: ffff8880246ffcb0 R08: 0000000000000000 R09: fffffbfff0eb2644
[   21.117907] R10: ffffffff87593227 R11: ffff888012f4a200 R12: 0000000000000000
[   21.118171] R13: ffff8880132e6418 R14: ffff8880246ffc48 R15: ffffffff83556140
[   21.118489] FS:  0000000000000000(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   21.118798] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   21.119067] CR2: 0000000020000080 CR3: 000000000687e000 CR4: 0000000000750ef0
[   21.119327] PKRU: 55555554
[   21.119431] Call Trace:
[   21.119525]  <TASK>
[   21.119608]  ? show_regs+0x6e/0x80
[   21.119754]  ? __warn+0xef/0x340
[   21.119921]  ? report_bug+0x25e/0x4b0
[   21.120064]  ? iommufd_fops_release+0x2a3/0x300
[   21.120237]  ? report_bug+0x2cb/0x4b0
[   21.120395]  ? handle_bug+0x46/0x90
[   21.120573]  ? exc_invalid_op+0x1d/0x50
[   21.120722]  ? asm_exc_invalid_op+0x1f/0x30
[   21.120880]  ? __pfx_iommufd_fops_release+0x10/0x10
[   21.121127]  ? iommufd_fops_release+0x2a3/0x300
[   21.121300]  ? iommufd_fops_release+0x2a3/0x300
[   21.121474]  ? __pfx_iommufd_fops_release+0x10/0x10
[   21.121718]  ? rcu_is_watching+0x19/0xc0
[   21.121871]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   21.122074]  ? __pfx_iommufd_fops_release+0x10/0x10
[   21.122322]  __fput+0x424/0xaf0
[   21.122450]  ____fput+0x1f/0x30
[   21.122583]  task_work_run+0x19d/0x2b0
[   21.122730]  ? __pfx_task_work_run+0x10/0x10
[   21.122896]  ? __sanitizer_cov_trace_const_cmp1+0x1e/0x30
[   21.123097]  ? switch_task_namespaces+0xa9/0xe0
[   21.123338]  do_exit+0xac9/0x2790
[   21.123469]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   21.123701]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   21.123947]  ? __pfx_do_exit+0x10/0x10
[   21.124091]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   21.124293]  ? security_file_ioctl+0x9d/0xd0
[   21.124477]  make_task_dead+0x182/0x3c0
[   21.124669]  rewind_stack_and_make_dead+0x17/0x20
[   21.124848] RIP: 0033:0x7f4d3563ee5d
[   21.124991] Code: Unable to access opcode bytes at 0x7f4d3563ee33.
[   21.125264] RSP: 002b:00007ffcdd304828 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   21.125540] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f4d3563ee5d
[   21.125857] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   21.126116] RBP: 00007ffcdd304840 R08: 0000000000000800 R09: 0000000000000800
[   21.126385] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffcdd304958
[   21.126696] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f4d358c0000
[   21.126963]  </TASK>
[   21.127049] irq event stamp: 0
[   21.127165] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   21.127460] hardirqs last disabled at (0): [<ffffffff8122f2d1>] copy_process+0x1c51/0x7140
[   21.127761] softirqs last  enabled at (0): [<ffffffff8122f312>] copy_process+0x1c92/0x7140
[   21.128128] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   21.128360] ---[ end trace 0000000000000000 ]---
[   21.131232] iommufd_mock iommufd_mock204: Adding to iommu group 204
[   21.131545] iommufd_mock iommufd_mock204: Removing from iommu group 204
[   21.131809] general protection fault, probably for non-canonical address 0xdffffc0000000006: 0000 [#205] PREEMPT SMP KASAN NOPTI
[   21.132223] KASAN: null-ptr-deref in range [0x0000000000000030-0x0000000000000037]
[   21.132512] CPU: 0 PID: 926 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   21.132857] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   21.133265] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   21.133481] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   21.134145] RSP: 0018:ffff88800fb2fba8 EFLAGS: 00010206
[   21.134341] RAX: dffffc0000000000 RBX: ffff888014986000 RCX: 0000000000000000
[   21.134603] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   21.134879] RBP: ffff88800fb2fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   21.135140] R10: ffff88800aad88df R11: ffff88806cb45a00 R12: 0000000000000000
[   21.135399] R13: ffffffff85cc0180 R14: ffff8880247bd740 R15: ffffffff87070ae0
[   21.135658] FS:  00007f103e2b6600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   21.135952] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   21.136179] CR2: 0000000020000080 CR3: 000000000efe6000 CR4: 0000000000750ef0
[   21.136449] PKRU: 55555554
[   21.136554] Call Trace:
[   21.136649]  <TASK>
[   21.136732]  ? show_regs+0x6e/0x80
[   21.136870]  ? die_addr+0x45/0xb0
[   21.137004]  ? exc_general_protection+0x159/0x250
[   21.137189]  ? asm_exc_general_protection+0x2b/0x30
[   21.137378]  ? sysfs_remove_link_from_group+0x21/0x90
[   21.137571]  ? sysfs_remove_link_from_group+0x37/0x90
[   21.137773]  ? sysfs_remove_link_from_group+0x21/0x90
[   21.137970]  iommu_device_unlink+0x85/0xd0
[   21.138128]  iommu_deinit_device+0x11f/0x4c0
[   21.138295]  __iommu_group_remove_device+0x26b/0x300
[   21.138487]  iommu_group_remove_device+0x8a/0xb0
[   21.138666]  iommufd_test+0x1f1a/0x2d10
[   21.138817]  ? __pfx_lock_release+0x10/0x10
[   21.138980]  ? __pfx_lock_acquire+0x10/0x10
[   21.139142]  ? __pfx_iommufd_test+0x10/0x10
[   21.139304]  ? __sanitizer_cov_trace_const_cmp8+0x1c/0x30
[   21.139510]  iommufd_fops_ioctl+0x377/0x510
[   21.139672]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   21.139853]  ? trace_hardirqs_on+0x26/0x120
[   21.140016]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   21.140251]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   21.140439]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   21.140643]  ? security_file_ioctl+0x9d/0xd0
[   21.140811]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   21.140992]  __x64_sys_ioctl+0x1b9/0x230
[   21.141144]  do_syscall_64+0x3c/0x90
[   21.141283]  entry_SYSCALL_64_after_hwframe+0x6e/0xd8
[   21.141473] RIP: 0033:0x7f103e03ee5d
[   21.141611] Code: ff c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d 93 af 1b 00 f7 d8 64 89 01 48
[   21.142276] RSP: 002b:00007ffd2e9382a8 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   21.142551] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f103e03ee5d
[   21.142825] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   21.143086] RBP: 00007ffd2e9382c0 R08: 0000000000000800 R09: 0000000000000800
[   21.143346] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffd2e9383d8
[   21.143604] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f103e2f7000
[   21.143868]  </TASK>
[   21.143954] Modules linked in:
[   21.144139] ---[ end trace 0000000000000000 ]---
[   21.144312] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   21.144524] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   21.145183] RSP: 0018:ffff88802457fba8 EFLAGS: 00010206
[   21.145376] RAX: dffffc0000000000 RBX: ffff888014f9b000 RCX: 0000000000000000
[   21.145648] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   21.145906] RBP: ffff88802457fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   21.146165] R10: ffff88800aad88df R11: 0000000000000001 R12: 0000000000000000
[   21.146422] R13: ffffffff85cc0180 R14: ffff8880109b6ac0 R15: ffffffff87070ae0
[   21.146715] FS:  00007f103e2b6600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   21.147116] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   21.147328] CR2: 0000000020000080 CR3: 000000000efe6000 CR4: 0000000000750ef0
[   21.147588] PKRU: 55555554
[   21.148146] ------------[ cut here ]------------
[   21.148342] WARNING: CPU: 0 PID: 926 at drivers/iommu/iommufd/main.c:258 iommufd_fops_release+0x2a3/0x300
[   21.148733] Modules linked in:
[   21.148860] CPU: 0 PID: 926 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   21.149233] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   21.149703] RIP: 0010:iommufd_fops_release+0x2a3/0x300
[   21.149897] Code: 45 d0 65 48 2b 04 25 28 00 00 00 75 54 48 81 c4 88 00 00 00 31 c0 5b 41 5c 41 5d 41 5e 41 5f 5d c3 cc cc cc cc e8 ad 4f 0a fe <0f> 0b eb a6 e8 74 23 67 fe e9 f6 fe ff ff 48 89 85 50 ff ff ff e8
[   21.150633] RSP: 0018:ffff88800fb2fc00 EFLAGS: 00010293
[   21.150839] RAX: 0000000000000000 RBX: ffff88800fe06908 RCX: 0000000000000000
[   21.151098] RDX: ffff88801388a500 RSI: ffffffff835563e3 RDI: ffffffff86702b40
[   21.151376] RBP: ffff88800fb2fcb0 R08: 0000000000000000 R09: fffffbfff0eb2644
[   21.151679] R10: ffffffff87593227 R11: ffff88800fe13400 R12: 0000000000000000
[   21.151946] R13: ffff88801123a198 R14: ffff88800fb2fc48 R15: ffffffff83556140
[   21.152256] FS:  0000000000000000(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   21.152555] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   21.152813] CR2: 0000000020000080 CR3: 000000000687e000 CR4: 0000000000750ef0
[   21.153073] PKRU: 55555554
[   21.153187] Call Trace:
[   21.153334]  <TASK>
[   21.153418]  ? show_regs+0x6e/0x80
[   21.153552]  ? __warn+0xef/0x340
[   21.153679]  ? report_bug+0x25e/0x4b0
[   21.153844]  ? iommufd_fops_release+0x2a3/0x300
[   21.154081]  ? report_bug+0x2cb/0x4b0
[   21.154229]  ? handle_bug+0x46/0x90
[   21.154371]  ? exc_invalid_op+0x1d/0x50
[   21.154571]  ? asm_exc_invalid_op+0x1f/0x30
[   21.154767]  ? __pfx_iommufd_fops_release+0x10/0x10
[   21.154953]  ? iommufd_fops_release+0x2a3/0x300
[   21.155125]  ? iommufd_fops_release+0x2a3/0x300
[   21.155300]  ? __pfx_iommufd_fops_release+0x10/0x10
[   21.155541]  ? rcu_is_watching+0x19/0xc0
[   21.155691]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   21.155898]  ? __pfx_iommufd_fops_release+0x10/0x10
[   21.156148]  __fput+0x424/0xaf0
[   21.156280]  ____fput+0x1f/0x30
[   21.156406]  task_work_run+0x19d/0x2b0
[   21.156565]  ? __pfx_task_work_run+0x10/0x10
[   21.156782]  ? __sanitizer_cov_trace_const_cmp1+0x1e/0x30
[   21.156989]  ? switch_task_namespaces+0xa9/0xe0
[   21.157178]  do_exit+0xac9/0x2790
[   21.157357]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   21.157597]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   21.157794]  ? __pfx_do_exit+0x10/0x10
[   21.157988]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   21.158195]  ? security_file_ioctl+0x9d/0xd0
[   21.158376]  make_task_dead+0x182/0x3c0
[   21.158590]  rewind_stack_and_make_dead+0x17/0x20
[   21.158777] RIP: 0033:0x7f103e03ee5d
[   21.158917] Code: Unable to access opcode bytes at 0x7f103e03ee33.
[   21.159146] RSP: 002b:00007ffd2e9382a8 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   21.159441] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f103e03ee5d
[   21.159760] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   21.160035] RBP: 00007ffd2e9382c0 R08: 0000000000000800 R09: 0000000000000800
[   21.160355] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffd2e9383d8
[   21.160629] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f103e2f7000
[   21.160952]  </TASK>
[   21.161040] irq event stamp: 0
[   21.161160] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   21.161456] hardirqs last disabled at (0): [<ffffffff8122f2d1>] copy_process+0x1c51/0x7140
[   21.161764] softirqs last  enabled at (0): [<ffffffff8122f312>] copy_process+0x1c92/0x7140
[   21.162129] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   21.162364] ---[ end trace 0000000000000000 ]---
[   21.165127] iommufd_mock iommufd_mock205: Adding to iommu group 205
[   21.165381] iommufd_mock iommufd_mock205: Removing from iommu group 205
[   21.165648] general protection fault, probably for non-canonical address 0xdffffc0000000006: 0000 [#206] PREEMPT SMP KASAN NOPTI
[   21.166115] KASAN: null-ptr-deref in range [0x0000000000000030-0x0000000000000037]
[   21.166397] CPU: 0 PID: 927 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   21.166721] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   21.167141] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   21.167361] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   21.168037] RSP: 0018:ffff8880246ffba8 EFLAGS: 00010206
[   21.168236] RAX: dffffc0000000000 RBX: ffff888014985000 RCX: 0000000000000000
[   21.168501] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   21.168765] RBP: ffff8880246ffbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   21.169031] R10: ffff88800aad88df R11: 5f6466756d6d6f69 R12: 0000000000000000
[   21.169295] R13: ffffffff85cc0180 R14: ffff8880247bd340 R15: ffffffff87070ae0
[   21.169559] FS:  00007f03294fa600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   21.169857] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   21.170073] CR2: 0000000020000080 CR3: 0000000024d1c000 CR4: 0000000000750ef0
[   21.170340] PKRU: 55555554
[   21.170446] Call Trace:
[   21.170541]  <TASK>
[   21.170627]  ? show_regs+0x6e/0x80
[   21.170770]  ? die_addr+0x45/0xb0
[   21.170907]  ? exc_general_protection+0x159/0x250
[   21.171096]  ? asm_exc_general_protection+0x2b/0x30
[   21.171288]  ? sysfs_remove_link_from_group+0x21/0x90
[   21.171483]  ? sysfs_remove_link_from_group+0x37/0x90
[   21.171679]  ? sysfs_remove_link_from_group+0x21/0x90
[   21.171875]  iommu_device_unlink+0x85/0xd0
[   21.172036]  iommu_deinit_device+0x11f/0x4c0
[   21.172205]  __iommu_group_remove_device+0x26b/0x300
[   21.172401]  iommu_group_remove_device+0x8a/0xb0
[   21.172582]  iommufd_test+0x1f1a/0x2d10
[   21.172732]  ? __pfx_lock_release+0x10/0x10
[   21.172896]  ? __pfx_lock_acquire+0x10/0x10
[   21.173061]  ? __pfx_iommufd_test+0x10/0x10
[   21.173225]  ? __sanitizer_cov_trace_const_cmp8+0x1c/0x30
[   21.173434]  iommufd_fops_ioctl+0x377/0x510
[   21.173599]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   21.173783]  ? trace_hardirqs_on+0x26/0x120
[   21.173949]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   21.174189]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   21.174381]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   21.174589]  ? security_file_ioctl+0x9d/0xd0
[   21.174762]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   21.174946]  __x64_sys_ioctl+0x1b9/0x230
[   21.175100]  do_syscall_64+0x3c/0x90
[   21.175241]  entry_SYSCALL_64_after_hwframe+0x6e/0xd8
[   21.175437] RIP: 0033:0x7f032923ee5d
[   21.175577] Code: ff c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d 93 af 1b 00 f7 d8 64 89 01 48
[   21.176248] RSP: 002b:00007ffd50412e08 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   21.176530] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f032923ee5d
[   21.176795] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   21.177059] RBP: 00007ffd50412e20 R08: 0000000000000800 R09: 0000000000000800
[   21.177324] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffd50412f38
[   21.177587] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f032953b000
[   21.177856]  </TASK>
[   21.177945] Modules linked in:
[   21.178124] ---[ end trace 0000000000000000 ]---
[   21.178300] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   21.178518] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   21.179215] RSP: 0018:ffff88802457fba8 EFLAGS: 00010206
[   21.179414] RAX: dffffc0000000000 RBX: ffff888014f9b000 RCX: 0000000000000000
[   21.179677] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   21.180019] RBP: ffff88802457fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   21.180285] R10: ffff88800aad88df R11: 0000000000000001 R12: 0000000000000000
[   21.180557] R13: ffffffff85cc0180 R14: ffff8880109b6ac0 R15: ffffffff87070ae0
[   21.180876] FS:  00007f03294fa600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   21.181186] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   21.181453] CR2: 0000000020000080 CR3: 0000000024d1c000 CR4: 0000000000750ef0
[   21.181720] PKRU: 55555554
[   21.182139] ------------[ cut here ]------------
[   21.182316] WARNING: CPU: 0 PID: 927 at drivers/iommu/iommufd/main.c:258 iommufd_fops_release+0x2a3/0x300
[   21.182756] Modules linked in:
[   21.182870] CPU: 0 PID: 927 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   21.183187] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   21.183662] RIP: 0010:iommufd_fops_release+0x2a3/0x300
[   21.183865] Code: 45 d0 65 48 2b 04 25 28 00 00 00 75 54 48 81 c4 88 00 00 00 31 c0 5b 41 5c 41 5d 41 5e 41 5f 5d c3 cc cc cc cc e8 ad 4f 0a fe <0f> 0b eb a6 e8 74 23 67 fe e9 f6 fe ff ff 48 89 85 50 ff ff ff e8
[   21.184584] RSP: 0018:ffff8880246ffc00 EFLAGS: 00010293
[   21.184838] RAX: 0000000000000000 RBX: ffff88800fe06d08 RCX: 0000000000000000
[   21.185098] RDX: ffff888014580000 RSI: ffffffff835563e3 RDI: ffffffff86702b40
[   21.185420] RBP: ffff8880246ffcb0 R08: 0000000000000000 R09: fffffbfff0eb2644
[   21.185681] R10: ffffffff87593227 R11: ffff888012ca4400 R12: 0000000000000000
[   21.186003] R13: ffff88801967bd18 R14: ffff8880246ffc48 R15: ffffffff83556140
[   21.186263] FS:  0000000000000000(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   21.186586] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   21.186846] CR2: 0000000020000080 CR3: 000000000687e000 CR4: 0000000000750ef0
[   21.187108] PKRU: 55555554
[   21.187212] Call Trace:
[   21.187306]  <TASK>
[   21.187399]  ? show_regs+0x6e/0x80
[   21.187589]  ? __warn+0xef/0x340
[   21.187717]  ? report_bug+0x25e/0x4b0
[   21.187861]  ? iommufd_fops_release+0x2a3/0x300
[   21.188049]  ? report_bug+0x2cb/0x4b0
[   21.188237]  ? handle_bug+0x46/0x90
[   21.188374]  ? exc_invalid_op+0x1d/0x50
[   21.188522]  ? asm_exc_invalid_op+0x1f/0x30
[   21.188701]  ? __pfx_iommufd_fops_release+0x10/0x10
[   21.188931]  ? iommufd_fops_release+0x2a3/0x300
[   21.189105]  ? iommufd_fops_release+0x2a3/0x300
[   21.189297]  ? __pfx_iommufd_fops_release+0x10/0x10
[   21.189523]  ? rcu_is_watching+0x19/0xc0
[   21.189677]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   21.189901]  ? __pfx_iommufd_fops_release+0x10/0x10
[   21.190119]  __fput+0x424/0xaf0
[   21.190249]  ____fput+0x1f/0x30
[   21.190374]  task_work_run+0x19d/0x2b0
[   21.190590]  ? __pfx_task_work_run+0x10/0x10
[   21.190758]  ? __sanitizer_cov_trace_const_cmp1+0x1e/0x30
[   21.190961]  ? switch_task_namespaces+0xa9/0xe0
[   21.191136]  do_exit+0xac9/0x2790
[   21.191267]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   21.191509]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   21.191748]  ? __pfx_do_exit+0x10/0x10
[   21.191894]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   21.192105]  ? security_file_ioctl+0x9d/0xd0
[   21.192325]  make_task_dead+0x182/0x3c0
[   21.192475]  rewind_stack_and_make_dead+0x17/0x20
[   21.192655] RIP: 0033:0x7f032923ee5d
[   21.192812] Code: Unable to access opcode bytes at 0x7f032923ee33.
[   21.193076] RSP: 002b:00007ffd50412e08 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   21.193365] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f032923ee5d
[   21.193672] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   21.193945] RBP: 00007ffd50412e20 R08: 0000000000000800 R09: 0000000000000800
[   21.194252] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffd50412f38
[   21.194525] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f032953b000
[   21.194848]  </TASK>
[   21.194935] irq event stamp: 0
[   21.195051] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   21.195282] hardirqs last disabled at (0): [<ffffffff8122f2d1>] copy_process+0x1c51/0x7140
[   21.195642] softirqs last  enabled at (0): [<ffffffff8122f312>] copy_process+0x1c92/0x7140
[   21.195945] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   21.196197] ---[ end trace 0000000000000000 ]---
[   21.199067] iommufd_mock iommufd_mock206: Adding to iommu group 206
[   21.199319] iommufd_mock iommufd_mock206: Removing from iommu group 206
[   21.199585] general protection fault, probably for non-canonical address 0xdffffc0000000006: 0000 [#207] PREEMPT SMP KASAN NOPTI
[   21.200002] KASAN: null-ptr-deref in range [0x0000000000000030-0x0000000000000037]
[   21.200332] CPU: 0 PID: 928 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   21.200650] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   21.201061] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   21.201277] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   21.201941] RSP: 0018:ffff88801654fba8 EFLAGS: 00010206
[   21.202137] RAX: dffffc0000000000 RBX: ffff888015a9e000 RCX: 0000000000000000
[   21.202397] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   21.202658] RBP: ffff88801654fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   21.202924] R10: ffff88800aad88df R11: ffff88806cb45a00 R12: 0000000000000000
[   21.203179] R13: ffffffff85cc0180 R14: ffff8880247bdcc0 R15: ffffffff87070ae0
[   21.203435] FS:  00007ff152918600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   21.203723] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   21.203931] CR2: 0000000020000080 CR3: 000000000efe6000 CR4: 0000000000750ef0
[   21.204188] PKRU: 55555554
[   21.204290] Call Trace:
[   21.204383]  <TASK>
[   21.204466]  ? show_regs+0x6e/0x80
[   21.204600]  ? die_addr+0x45/0xb0
[   21.204732]  ? exc_general_protection+0x159/0x250
[   21.204914]  ? asm_exc_general_protection+0x2b/0x30
[   21.205099]  ? sysfs_remove_link_from_group+0x21/0x90
[   21.205288]  ? sysfs_remove_link_from_group+0x37/0x90
[   21.205477]  ? sysfs_remove_link_from_group+0x21/0x90
[   21.205664]  iommu_device_unlink+0x85/0xd0
[   21.205818]  iommu_deinit_device+0x11f/0x4c0
[   21.205981]  __iommu_group_remove_device+0x26b/0x300
[   21.206168]  iommu_group_remove_device+0x8a/0xb0
[   21.206342]  iommufd_test+0x1f1a/0x2d10
[   21.206485]  ? __pfx_lock_release+0x10/0x10
[   21.206645]  ? __pfx_lock_acquire+0x10/0x10
[   21.206814]  ? __pfx_iommufd_test+0x10/0x10
[   21.206971]  ? __sanitizer_cov_trace_const_cmp8+0x1c/0x30
[   21.207172]  iommufd_fops_ioctl+0x377/0x510
[   21.207330]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   21.207506]  ? trace_hardirqs_on+0x26/0x120
[   21.207665]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   21.207894]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   21.208077]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   21.208276]  ? security_file_ioctl+0x9d/0xd0
[   21.208439]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   21.208615]  __x64_sys_ioctl+0x1b9/0x230
[   21.208762]  do_syscall_64+0x3c/0x90
[   21.208897]  entry_SYSCALL_64_after_hwframe+0x6e/0xd8
[   21.209082] RIP: 0033:0x7ff15263ee5d
[   21.209217] Code: ff c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d 93 af 1b 00 f7 d8 64 89 01 48
[   21.209862] RSP: 002b:00007ffd122749c8 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   21.210132] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007ff15263ee5d
[   21.210385] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   21.210650] RBP: 00007ffd122749e0 R08: 0000000000000800 R09: 0000000000000800
[   21.210911] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffd12274af8
[   21.211164] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007ff152959000
[   21.211422]  </TASK>
[   21.211506] Modules linked in:
[   21.211780] ---[ end trace 0000000000000000 ]---
[   21.211953] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   21.212167] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   21.212828] RSP: 0018:ffff88802457fba8 EFLAGS: 00010206
[   21.213021] RAX: dffffc0000000000 RBX: ffff888014f9b000 RCX: 0000000000000000
[   21.213280] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   21.213621] RBP: ffff88802457fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   21.213880] R10: ffff88800aad88df R11: 0000000000000001 R12: 0000000000000000
[   21.214179] R13: ffffffff85cc0180 R14: ffff8880109b6ac0 R15: ffffffff87070ae0
[   21.214465] FS:  00007ff152918600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   21.214777] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   21.215026] CR2: 0000000020000080 CR3: 000000000efe6000 CR4: 0000000000750ef0
[   21.215280] PKRU: 55555554
[   21.215670] ------------[ cut here ]------------
[   21.215837] WARNING: CPU: 0 PID: 928 at drivers/iommu/iommufd/main.c:258 iommufd_fops_release+0x2a3/0x300
[   21.216222] Modules linked in:
[   21.216337] CPU: 0 PID: 928 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   21.216645] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   21.217101] RIP: 0010:iommufd_fops_release+0x2a3/0x300
[   21.217290] Code: 45 d0 65 48 2b 04 25 28 00 00 00 75 54 48 81 c4 88 00 00 00 31 c0 5b 41 5c 41 5d 41 5e 41 5f 5d c3 cc cc cc cc e8 ad 4f 0a fe <0f> 0b eb a6 e8 74 23 67 fe e9 f6 fe ff ff 48 89 85 50 ff ff ff e8
[   21.217997] RSP: 0018:ffff88801654fc00 EFLAGS: 00010293
[   21.218228] RAX: 0000000000000000 RBX: ffff88800fe06a08 RCX: 0000000000000000
[   21.218481] RDX: ffff888010b50000 RSI: ffffffff835563e3 RDI: ffffffff86702b40
[   21.218769] RBP: ffff88801654fcb0 R08: 0000000000000000 R09: fffffbfff0eb2644
[   21.219062] R10: ffffffff87593227 R11: ffff8880137ee400 R12: 0000000000000000
[   21.219316] R13: ffff88801967b098 R14: ffff88801654fc48 R15: ffffffff83556140
[   21.219569] FS:  0000000000000000(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   21.219912] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   21.220119] CR2: 0000000020000080 CR3: 000000000687e000 CR4: 0000000000750ef0
[   21.220418] PKRU: 55555554
[   21.220520] Call Trace:
[   21.220612]  <TASK>
[   21.220693]  ? show_regs+0x6e/0x80
[   21.220835]  ? __warn+0xef/0x340
[   21.221003]  ? report_bug+0x25e/0x4b0
[   21.221144]  ? iommufd_fops_release+0x2a3/0x300
[   21.221313]  ? report_bug+0x2cb/0x4b0
[   21.221462]  ? handle_bug+0x46/0x90
[   21.221639]  ? exc_invalid_op+0x1d/0x50
[   21.221784]  ? asm_exc_invalid_op+0x1f/0x30
[   21.221938]  ? __pfx_iommufd_fops_release+0x10/0x10
[   21.222143]  ? iommufd_fops_release+0x2a3/0x300
[   21.222355]  ? iommufd_fops_release+0x2a3/0x300
[   21.222530]  ? __pfx_iommufd_fops_release+0x10/0x10
[   21.222789]  ? rcu_is_watching+0x19/0xc0
[   21.222942]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   21.223142]  ? __pfx_iommufd_fops_release+0x10/0x10
[   21.223324]  __fput+0x424/0xaf0
[   21.223451]  ____fput+0x1f/0x30
[   21.223574]  task_work_run+0x19d/0x2b0
[   21.223742]  ? __pfx_task_work_run+0x10/0x10
[   21.223942]  ? __sanitizer_cov_trace_const_cmp1+0x1e/0x30
[   21.224141]  ? switch_task_namespaces+0xa9/0xe0
[   21.224333]  do_exit+0xac9/0x2790
[   21.224499]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   21.224729]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   21.224931]  ? __pfx_do_exit+0x10/0x10
[   21.225113]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   21.225311]  ? security_file_ioctl+0x9d/0xd0
[   21.225480]  make_task_dead+0x182/0x3c0
[   21.225675]  rewind_stack_and_make_dead+0x17/0x20
[   21.225856] RIP: 0033:0x7ff15263ee5d
[   21.225994] Code: Unable to access opcode bytes at 0x7ff15263ee33.
[   21.226283] RSP: 002b:00007ffd122749c8 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   21.226559] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007ff15263ee5d
[   21.226888] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   21.227148] RBP: 00007ffd122749e0 R08: 0000000000000800 R09: 0000000000000800
[   21.227406] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffd12274af8
[   21.227664] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007ff152959000
[   21.227983]  </TASK>
[   21.228069] irq event stamp: 0
[   21.228186] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   21.228472] hardirqs last disabled at (0): [<ffffffff8122f2d1>] copy_process+0x1c51/0x7140
[   21.228772] softirqs last  enabled at (0): [<ffffffff8122f312>] copy_process+0x1c92/0x7140
[   21.229132] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   21.229360] ---[ end trace 0000000000000000 ]---
[   21.232180] iommufd_mock iommufd_mock207: Adding to iommu group 207
[   21.232470] iommufd_mock iommufd_mock207: Removing from iommu group 207
[   21.232730] general protection fault, probably for non-canonical address 0xdffffc0000000006: 0000 [#208] PREEMPT SMP KASAN NOPTI
[   21.233143] KASAN: null-ptr-deref in range [0x0000000000000030-0x0000000000000037]
[   21.233458] CPU: 0 PID: 929 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   21.233774] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   21.234187] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   21.234401] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   21.235091] RSP: 0018:ffff88800fb2fba8 EFLAGS: 00010206
[   21.235281] RAX: dffffc0000000000 RBX: ffff888015a9d000 RCX: 0000000000000000
[   21.235535] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   21.235787] RBP: ffff88800fb2fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   21.236041] R10: ffff88800aad88df R11: 5f6466756d6d6f69 R12: 0000000000000000
[   21.236294] R13: ffffffff85cc0180 R14: ffff8880247bd700 R15: ffffffff87070ae0
[   21.236548] FS:  00007f87bdf39600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   21.236834] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   21.237041] CR2: 0000000020000080 CR3: 0000000024d1c000 CR4: 0000000000750ef0
[   21.237295] PKRU: 55555554
[   21.237397] Call Trace:
[   21.237489]  <TASK>
[   21.237570]  ? show_regs+0x6e/0x80
[   21.237704]  ? die_addr+0x45/0xb0
[   21.237835]  ? exc_general_protection+0x159/0x250
[   21.238016]  ? asm_exc_general_protection+0x2b/0x30
[   21.238199]  ? sysfs_remove_link_from_group+0x21/0x90
[   21.238387]  ? sysfs_remove_link_from_group+0x37/0x90
[   21.238574]  ? sysfs_remove_link_from_group+0x21/0x90
[   21.238766]  iommu_device_unlink+0x85/0xd0
[   21.238935]  iommu_deinit_device+0x11f/0x4c0
[   21.239098]  __iommu_group_remove_device+0x26b/0x300
[   21.239285]  iommu_group_remove_device+0x8a/0xb0
[   21.239459]  iommufd_test+0x1f1a/0x2d10
[   21.239602]  ? __pfx_lock_release+0x10/0x10
[   21.239759]  ? __pfx_lock_acquire+0x10/0x10
[   21.239918]  ? __pfx_iommufd_test+0x10/0x10
[   21.240075]  ? __sanitizer_cov_trace_const_cmp8+0x1c/0x30
[   21.240276]  iommufd_fops_ioctl+0x377/0x510
[   21.240434]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   21.240615]  ? trace_hardirqs_on+0x26/0x120
[   21.240777]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   21.241006]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   21.241189]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   21.241388]  ? security_file_ioctl+0x9d/0xd0
[   21.241551]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   21.241727]  __x64_sys_ioctl+0x1b9/0x230
[   21.241874]  do_syscall_64+0x3c/0x90
[   21.242009]  entry_SYSCALL_64_after_hwframe+0x6e/0xd8
[   21.242195] RIP: 0033:0x7f87bdc3ee5d
[   21.242329] Code: ff c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d 93 af 1b 00 f7 d8 64 89 01 48
[   21.242985] RSP: 002b:00007fff799b3c88 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   21.243255] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f87bdc3ee5d
[   21.243508] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   21.243790] RBP: 00007fff799b3ca0 R08: 0000000000000800 R09: 0000000000000800
[   21.244044] R10: 0000000000000000 R11: 0000000000000213 R12: 00007fff799b3db8
[   21.244298] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f87bdf7a000
[   21.244556]  </TASK>
[   21.244640] Modules linked in:
[   21.244882] ---[ end trace 0000000000000000 ]---
[   21.245052] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   21.245261] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   21.245934] RSP: 0018:ffff88802457fba8 EFLAGS: 00010206
[   21.246123] RAX: dffffc0000000000 RBX: ffff888014f9b000 RCX: 0000000000000000
[   21.246381] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   21.246696] RBP: ffff88802457fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   21.246961] R10: ffff88800aad88df R11: 0000000000000001 R12: 0000000000000000
[   21.247224] R13: ffffffff85cc0180 R14: ffff8880109b6ac0 R15: ffffffff87070ae0
[   21.247522] FS:  00007f87bdf39600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   21.247818] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   21.248077] CR2: 0000000020000080 CR3: 0000000024d1c000 CR4: 0000000000750ef0
[   21.248332] PKRU: 55555554
[   21.248757] ------------[ cut here ]------------
[   21.248925] WARNING: CPU: 0 PID: 929 at drivers/iommu/iommufd/main.c:258 iommufd_fops_release+0x2a3/0x300
[   21.249329] Modules linked in:
[   21.249445] CPU: 0 PID: 929 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   21.249775] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   21.250214] RIP: 0010:iommufd_fops_release+0x2a3/0x300
[   21.250428] Code: 45 d0 65 48 2b 04 25 28 00 00 00 75 54 48 81 c4 88 00 00 00 31 c0 5b 41 5c 41 5d 41 5e 41 5f 5d c3 cc cc cc cc e8 ad 4f 0a fe <0f> 0b eb a6 e8 74 23 67 fe e9 f6 fe ff ff 48 89 85 50 ff ff ff e8
[   21.251138] RSP: 0018:ffff88800fb2fc00 EFLAGS: 00010293
[   21.251329] RAX: 0000000000000000 RBX: ffff88800fe06408 RCX: 0000000000000000
[   21.251612] RDX: ffff88801734ca00 RSI: ffffffff835563e3 RDI: ffffffff86702b40
[   21.251907] RBP: ffff88800fb2fcb0 R08: 0000000000000000 R09: fffffbfff0eb2644
[   21.252168] R10: ffffffff87593227 R11: ffff88801313d400 R12: 0000000000000000
[   21.252468] R13: ffff8880111ed818 R14: ffff88800fb2fc48 R15: ffffffff83556140
[   21.252732] FS:  0000000000000000(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   21.253074] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   21.253285] CR2: 0000000020000080 CR3: 000000000687e000 CR4: 0000000000750ef0
[   21.253596] PKRU: 55555554
[   21.253699] Call Trace:
[   21.253791]  <TASK>
[   21.253872]  ? show_regs+0x6e/0x80
[   21.254023]  ? __warn+0xef/0x340
[   21.254191]  ? report_bug+0x25e/0x4b0
[   21.254356]  ? iommufd_fops_release+0x2a3/0x300
[   21.254527]  ? report_bug+0x2cb/0x4b0
[   21.254698]  ? handle_bug+0x46/0x90
[   21.254874]  ? exc_invalid_op+0x1d/0x50
[   21.255022]  ? asm_exc_invalid_op+0x1f/0x30
[   21.255177]  ? __pfx_iommufd_fops_release+0x10/0x10
[   21.255360]  ? iommufd_fops_release+0x2a3/0x300
[   21.255546]  ? iommufd_fops_release+0x2a3/0x300
[   21.255763]  ? __pfx_iommufd_fops_release+0x10/0x10
[   21.255943]  ? rcu_is_watching+0x19/0xc0
[   21.256092]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   21.256350]  ? __pfx_iommufd_fops_release+0x10/0x10
[   21.256535]  __fput+0x424/0xaf0
[   21.256663]  ____fput+0x1f/0x30
[   21.256806]  task_work_run+0x19d/0x2b0
[   21.256995]  ? __pfx_task_work_run+0x10/0x10
[   21.257159]  ? __sanitizer_cov_trace_const_cmp1+0x1e/0x30
[   21.257371]  ? switch_task_namespaces+0xa9/0xe0
[   21.257588]  do_exit+0xac9/0x2790
[   21.257719]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   21.257972]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   21.258215]  ? __pfx_do_exit+0x10/0x10
[   21.258360]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   21.258567]  ? security_file_ioctl+0x9d/0xd0
[   21.258805]  make_task_dead+0x182/0x3c0
[   21.258954]  rewind_stack_and_make_dead+0x17/0x20
[   21.259133] RIP: 0033:0x7f87bdc3ee5d
[   21.259270] Code: Unable to access opcode bytes at 0x7f87bdc3ee33.
[   21.259494] RSP: 002b:00007fff799b3c88 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   21.259826] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f87bdc3ee5d
[   21.260085] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   21.260398] RBP: 00007fff799b3ca0 R08: 0000000000000800 R09: 0000000000000800
[   21.260657] R10: 0000000000000000 R11: 0000000000000213 R12: 00007fff799b3db8
[   21.260974] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f87bdf7a000
[   21.261238]  </TASK>
[   21.261324] irq event stamp: 0
[   21.261456] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   21.261749] hardirqs last disabled at (0): [<ffffffff8122f2d1>] copy_process+0x1c51/0x7140
[   21.262061] softirqs last  enabled at (0): [<ffffffff8122f312>] copy_process+0x1c92/0x7140
[   21.262409] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   21.262655] ---[ end trace 0000000000000000 ]---
[   21.265372] iommufd_mock iommufd_mock208: Adding to iommu group 208
[   21.265692] iommufd_mock iommufd_mock208: Removing from iommu group 208
[   21.265953] general protection fault, probably for non-canonical address 0xdffffc0000000006: 0000 [#209] PREEMPT SMP KASAN NOPTI
[   21.266367] KASAN: null-ptr-deref in range [0x0000000000000030-0x0000000000000037]
[   21.266642] CPU: 0 PID: 930 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   21.266994] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   21.267401] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   21.267616] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   21.268275] RSP: 0018:ffff8880246ffba8 EFLAGS: 00010206
[   21.268468] RAX: dffffc0000000000 RBX: ffff888015a9f000 RCX: 0000000000000000
[   21.268726] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   21.268983] RBP: ffff8880246ffbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   21.269242] R10: ffff88800aad88df R11: 5f6466756d6d6f69 R12: 0000000000000000
[   21.269500] R13: ffffffff85cc0180 R14: ffff8880247bd3e0 R15: ffffffff87070ae0
[   21.269753] FS:  00007f1bad725600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   21.270038] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   21.270244] CR2: 0000000020000080 CR3: 000000000efe6000 CR4: 0000000000750ef0
[   21.270498] PKRU: 55555554
[   21.270599] Call Trace:
[   21.270696]  <TASK>
[   21.270781]  ? show_regs+0x6e/0x80
[   21.270919]  ? die_addr+0x45/0xb0
[   21.271049]  ? exc_general_protection+0x159/0x250
[   21.271230]  ? asm_exc_general_protection+0x2b/0x30
[   21.271412]  ? sysfs_remove_link_from_group+0x21/0x90
[   21.271599]  ? sysfs_remove_link_from_group+0x37/0x90
[   21.271786]  ? sysfs_remove_link_from_group+0x21/0x90
[   21.271973]  iommu_device_unlink+0x85/0xd0
[   21.272127]  iommu_deinit_device+0x11f/0x4c0
[   21.272289]  __iommu_group_remove_device+0x26b/0x300
[   21.272476]  iommu_group_remove_device+0x8a/0xb0
[   21.272649]  iommufd_test+0x1f1a/0x2d10
[   21.272792]  ? __pfx_lock_release+0x10/0x10
[   21.272949]  ? __pfx_lock_acquire+0x10/0x10
[   21.273107]  ? __pfx_iommufd_test+0x10/0x10
[   21.273264]  ? __sanitizer_cov_trace_const_cmp8+0x1c/0x30
[   21.273463]  iommufd_fops_ioctl+0x377/0x510
[   21.273621]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   21.273796]  ? trace_hardirqs_on+0x26/0x120
[   21.273954]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   21.274183]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   21.274365]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   21.274563]  ? security_file_ioctl+0x9d/0xd0
[   21.274731]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   21.274913]  __x64_sys_ioctl+0x1b9/0x230
[   21.275061]  do_syscall_64+0x3c/0x90
[   21.275197]  entry_SYSCALL_64_after_hwframe+0x6e/0xd8
[   21.275386] RIP: 0033:0x7f1bad43ee5d
[   21.275542] Code: ff c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d 93 af 1b 00 f7 d8 64 89 01 48
[   21.276190] RSP: 002b:00007ffccc3166b8 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   21.276460] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f1bad43ee5d
[   21.276712] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   21.276965] RBP: 00007ffccc3166d0 R08: 0000000000000800 R09: 0000000000000800
[   21.277217] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffccc3167e8
[   21.277469] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f1bad766000
[   21.277727]  </TASK>
[   21.277811] Modules linked in:
[   21.277999] ---[ end trace 0000000000000000 ]---
[   21.278181] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   21.278454] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   21.279175] RSP: 0018:ffff88802457fba8 EFLAGS: 00010206
[   21.279369] RAX: dffffc0000000000 RBX: ffff888014f9b000 RCX: 0000000000000000
[   21.279628] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   21.279885] RBP: ffff88802457fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   21.280159] R10: ffff88800aad88df R11: 0000000000000001 R12: 0000000000000000
[   21.280477] R13: ffffffff85cc0180 R14: ffff8880109b6ac0 R15: ffffffff87070ae0
[   21.280735] FS:  00007f1bad725600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   21.281075] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   21.281286] CR2: 0000000020000080 CR3: 000000000efe6000 CR4: 0000000000750ef0
[   21.281603] PKRU: 55555554
[   21.281978] ------------[ cut here ]------------
[   21.282211] WARNING: CPU: 0 PID: 930 at drivers/iommu/iommufd/main.c:258 iommufd_fops_release+0x2a3/0x300
[   21.282559] Modules linked in:
[   21.282706] CPU: 0 PID: 930 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   21.283065] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   21.283491] RIP: 0010:iommufd_fops_release+0x2a3/0x300
[   21.283726] Code: 45 d0 65 48 2b 04 25 28 00 00 00 75 54 48 81 c4 88 00 00 00 31 c0 5b 41 5c 41 5d 41 5e 41 5f 5d c3 cc cc cc cc e8 ad 4f 0a fe <0f> 0b eb a6 e8 74 23 67 fe e9 f6 fe ff ff 48 89 85 50 ff ff ff e8
[   21.284429] RSP: 0018:ffff8880246ffc00 EFLAGS: 00010293
[   21.284618] RAX: 0000000000000000 RBX: ffff88800fe06108 RCX: 0000000000000000
[   21.284924] RDX: ffff88801734a500 RSI: ffffffff835563e3 RDI: ffffffff86702b40
[   21.285186] RBP: ffff8880246ffcb0 R08: 0000000000000000 R09: fffffbfff0eb2644
[   21.285438] R10: ffffffff87593227 R11: ffff888018b37400 R12: 0000000000000000
[   21.285691] R13: ffff8880111ec698 R14: ffff8880246ffc48 R15: ffffffff83556140
[   21.285944] FS:  0000000000000000(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   21.286233] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   21.286444] CR2: 0000000020000080 CR3: 000000000687e000 CR4: 0000000000750ef0
[   21.286711] PKRU: 55555554
[   21.286817] Call Trace:
[   21.286911]  <TASK>
[   21.286994]  ? show_regs+0x6e/0x80
[   21.287129]  ? __warn+0xef/0x340
[   21.287254]  ? report_bug+0x25e/0x4b0
[   21.287394]  ? iommufd_fops_release+0x2a3/0x300
[   21.287563]  ? report_bug+0x2cb/0x4b0
[   21.287704]  ? handle_bug+0x46/0x90
[   21.287837]  ? exc_invalid_op+0x1d/0x50
[   21.287981]  ? asm_exc_invalid_op+0x1f/0x30
[   21.288136]  ? __pfx_iommufd_fops_release+0x10/0x10
[   21.288318]  ? iommufd_fops_release+0x2a3/0x300
[   21.288486]  ? iommufd_fops_release+0x2a3/0x300
[   21.288656]  ? __pfx_iommufd_fops_release+0x10/0x10
[   21.288836]  ? rcu_is_watching+0x19/0xc0
[   21.288984]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   21.289182]  ? __pfx_iommufd_fops_release+0x10/0x10
[   21.289361]  __fput+0x424/0xaf0
[   21.289487]  ____fput+0x1f/0x30
[   21.289609]  task_work_run+0x19d/0x2b0
[   21.289751]  ? __pfx_task_work_run+0x10/0x10
[   21.289911]  ? __sanitizer_cov_trace_const_cmp1+0x1e/0x30
[   21.290107]  ? switch_task_namespaces+0xa9/0xe0
[   21.290277]  do_exit+0xac9/0x2790
[   21.290405]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   21.290640]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   21.290830]  ? __pfx_do_exit+0x10/0x10
[   21.290977]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   21.291178]  ? security_file_ioctl+0x9d/0xd0
[   21.291343]  make_task_dead+0x182/0x3c0
[   21.291489]  rewind_stack_and_make_dead+0x17/0x20
[   21.291664] RIP: 0033:0x7f1bad43ee5d
[   21.291797] Code: Unable to access opcode bytes at 0x7f1bad43ee33.
[   21.292015] RSP: 002b:00007ffccc3166b8 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   21.292284] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f1bad43ee5d
[   21.292536] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   21.292788] RBP: 00007ffccc3166d0 R08: 0000000000000800 R09: 0000000000000800
[   21.293040] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffccc3167e8
[   21.293292] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f1bad766000
[   21.293550]  </TASK>
[   21.293634] irq event stamp: 0
[   21.293747] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   21.293971] hardirqs last disabled at (0): [<ffffffff8122f2d1>] copy_process+0x1c51/0x7140
[   21.294264] softirqs last  enabled at (0): [<ffffffff8122f312>] copy_process+0x1c92/0x7140
[   21.294556] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   21.294792] ---[ end trace 0000000000000000 ]---
[   21.297319] iommufd_mock iommufd_mock209: Adding to iommu group 209
[   21.297576] iommufd_mock iommufd_mock209: Removing from iommu group 209
[   21.297834] general protection fault, probably for non-canonical address 0xdffffc0000000006: 0000 [#210] PREEMPT SMP KASAN NOPTI
[   21.298251] KASAN: null-ptr-deref in range [0x0000000000000030-0x0000000000000037]
[   21.298530] CPU: 1 PID: 931 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   21.298857] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   21.299276] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   21.299569] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   21.300240] RSP: 0018:ffff88801654fba8 EFLAGS: 00010206
[   21.300439] RAX: dffffc0000000000 RBX: ffff888014e7d000 RCX: 0000000000000000
[   21.300696] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   21.300954] RBP: ffff88801654fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   21.301212] R10: ffff88800aad88df R11: 5f6466756d6d6f69 R12: 0000000000000000
[   21.301478] R13: ffffffff85cc0180 R14: ffff88800bd79a20 R15: ffffffff87070ae0
[   21.301736] FS:  00007f51e016f600(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
[   21.302027] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   21.302238] CR2: 0000000020000080 CR3: 00000000203dc000 CR4: 0000000000750ee0
[   21.302499] PKRU: 55555554
[   21.302605] Call Trace:
[   21.302700]  <TASK>
[   21.302789]  ? show_regs+0x6e/0x80
[   21.302928]  ? die_addr+0x45/0xb0
[   21.303064]  ? exc_general_protection+0x159/0x250
[   21.303252]  ? asm_exc_general_protection+0x2b/0x30
[   21.303442]  ? sysfs_remove_link_from_group+0x21/0x90
[   21.303669]  ? sysfs_remove_link_from_group+0x37/0x90
[   21.303866]  ? sysfs_remove_link_from_group+0x21/0x90
[   21.304061]  iommu_device_unlink+0x85/0xd0
[   21.304222]  iommu_deinit_device+0x11f/0x4c0
[   21.304391]  __iommu_group_remove_device+0x26b/0x300
[   21.304585]  iommu_group_remove_device+0x8a/0xb0
[   21.304766]  iommufd_test+0x1f1a/0x2d10
[   21.304915]  ? __pfx_lock_release+0x10/0x10
[   21.305078]  ? __pfx_lock_acquire+0x10/0x10
[   21.305243]  ? __pfx_iommufd_test+0x10/0x10
[   21.305406]  ? __sanitizer_cov_trace_const_cmp8+0x1c/0x30
[   21.305615]  iommufd_fops_ioctl+0x377/0x510
[   21.305779]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   21.305962]  ? trace_hardirqs_on+0x26/0x120
[   21.306127]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   21.306365]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   21.306556]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   21.306766]  ? security_file_ioctl+0x9d/0xd0
[   21.306937]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   21.307116]  __x64_sys_ioctl+0x1b9/0x230
[   21.307266]  do_syscall_64+0x3c/0x90
[   21.307403]  entry_SYSCALL_64_after_hwframe+0x6e/0xd8
[   21.307592] RIP: 0033:0x7f51dfe3ee5d
[   21.307728] Code: ff c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d 93 af 1b 00 f7 d8 64 89 01 48
[   21.308387] RSP: 002b:00007ffe390f12c8 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   21.308662] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f51dfe3ee5d
[   21.308920] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   21.309178] RBP: 00007ffe390f12e0 R08: 0000000000000800 R09: 0000000000000800
[   21.309437] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffe390f13f8
[   21.309695] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f51e01b0000
[   21.309958]  </TASK>
[   21.310043] Modules linked in:
[   21.310234] ---[ end trace 0000000000000000 ]---
[   21.310407] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   21.310655] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   21.311322] RSP: 0018:ffff88802457fba8 EFLAGS: 00010206
[   21.311512] RAX: dffffc0000000000 RBX: ffff888014f9b000 RCX: 0000000000000000
[   21.311765] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   21.312018] RBP: ffff88802457fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   21.312272] R10: ffff88800aad88df R11: 0000000000000001 R12: 0000000000000000
[   21.312526] R13: ffffffff85cc0180 R14: ffff8880109b6ac0 R15: ffffffff87070ae0
[   21.312779] FS:  00007f51e016f600(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
[   21.313065] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   21.313271] CR2: 0000000020000080 CR3: 00000000203dc000 CR4: 0000000000750ee0
[   21.313525] PKRU: 55555554
[   21.314023] ------------[ cut here ]------------
[   21.314209] WARNING: CPU: 0 PID: 931 at drivers/iommu/iommufd/main.c:258 iommufd_fops_release+0x2a3/0x300
[   21.314559] Modules linked in:
[   21.314718] CPU: 0 PID: 931 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   21.315045] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   21.315443] RIP: 0010:iommufd_fops_release+0x2a3/0x300
[   21.315632] Code: 45 d0 65 48 2b 04 25 28 00 00 00 75 54 48 81 c4 88 00 00 00 31 c0 5b 41 5c 41 5d 41 5e 41 5f 5d c3 cc cc cc cc e8 ad 4f 0a fe <0f> 0b eb a6 e8 74 23 67 fe e9 f6 fe ff ff 48 89 85 50 ff ff ff e8
[   21.316276] RSP: 0018:ffff88801654fc00 EFLAGS: 00010293
[   21.316465] RAX: 0000000000000000 RBX: ffff88801248af08 RCX: 0000000000000000
[   21.316718] RDX: ffff888014cdca00 RSI: ffffffff835563e3 RDI: ffffffff86702b40
[   21.316970] RBP: ffff88801654fcb0 R08: 0000000000000000 R09: fffffbfff0eb2644
[   21.317223] R10: ffffffff87593227 R11: ffff8880114d1000 R12: 0000000000000000
[   21.317476] R13: ffff888012663318 R14: ffff88801654fc48 R15: ffffffff83556140
[   21.317729] FS:  0000000000000000(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   21.318014] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   21.318220] CR2: 00007fa281e34018 CR3: 000000000687e000 CR4: 0000000000750ef0
[   21.318474] PKRU: 55555554
[   21.318618] Call Trace:
[   21.318713]  <TASK>
[   21.318800]  ? show_regs+0x6e/0x80
[   21.318934]  ? __warn+0xef/0x340
[   21.319062]  ? report_bug+0x25e/0x4b0
[   21.319205]  ? iommufd_fops_release+0x2a3/0x300
[   21.319377]  ? report_bug+0x2cb/0x4b0
[   21.319519]  ? handle_bug+0x46/0x90
[   21.319652]  ? exc_invalid_op+0x1d/0x50
[   21.319796]  ? asm_exc_invalid_op+0x1f/0x30
[   21.319950]  ? __pfx_iommufd_fops_release+0x10/0x10
[   21.320132]  ? iommufd_fops_release+0x2a3/0x300
[   21.320301]  ? iommufd_fops_release+0x2a3/0x300
[   21.320472]  ? __pfx_iommufd_fops_release+0x10/0x10
[   21.320651]  ? rcu_is_watching+0x19/0xc0
[   21.320800]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   21.320998]  ? __pfx_iommufd_fops_release+0x10/0x10
[   21.321178]  __fput+0x424/0xaf0
[   21.321303]  ____fput+0x1f/0x30
[   21.321425]  task_work_run+0x19d/0x2b0
[   21.321567]  ? __pfx_task_work_run+0x10/0x10
[   21.321727]  ? __sanitizer_cov_trace_const_cmp1+0x1e/0x30
[   21.321924]  ? switch_task_namespaces+0xa9/0xe0
[   21.322094]  do_exit+0xac9/0x2790
[   21.322221]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   21.322448]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   21.322679]  ? __pfx_do_exit+0x10/0x10
[   21.322830]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   21.323032]  ? security_file_ioctl+0x9d/0xd0
[   21.323200]  make_task_dead+0x182/0x3c0
[   21.323345]  rewind_stack_and_make_dead+0x17/0x20
[   21.323520] RIP: 0033:0x7f51dfe3ee5d
[   21.323653] Code: Unable to access opcode bytes at 0x7f51dfe3ee33.
[   21.323871] RSP: 002b:00007ffe390f12c8 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   21.324140] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f51dfe3ee5d
[   21.324392] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   21.324644] RBP: 00007ffe390f12e0 R08: 0000000000000800 R09: 0000000000000800
[   21.324896] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffe390f13f8
[   21.325149] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f51e01b0000
[   21.325406]  </TASK>
[   21.325490] irq event stamp: 0
[   21.325604] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   21.325827] hardirqs last disabled at (0): [<ffffffff8122f2d1>] copy_process+0x1c51/0x7140
[   21.326121] softirqs last  enabled at (0): [<ffffffff8122f312>] copy_process+0x1c92/0x7140
[   21.326414] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   21.326662] ---[ end trace 0000000000000000 ]---
[   21.329093] iommufd_mock iommufd_mock210: Adding to iommu group 210
[   21.329354] iommufd_mock iommufd_mock210: Removing from iommu group 210
[   21.329618] general protection fault, probably for non-canonical address 0xdffffc0000000006: 0000 [#211] PREEMPT SMP KASAN NOPTI
[   21.330040] KASAN: null-ptr-deref in range [0x0000000000000030-0x0000000000000037]
[   21.330319] CPU: 1 PID: 932 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   21.330641] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   21.331062] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   21.331284] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   21.331942] RSP: 0018:ffff8880246ffba8 EFLAGS: 00010206
[   21.332135] RAX: dffffc0000000000 RBX: ffff888014e7f000 RCX: 0000000000000000
[   21.332392] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   21.332650] RBP: ffff8880246ffbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   21.332907] R10: ffff88800aad88df R11: 5f6466756d6d6f69 R12: 0000000000000000
[   21.333165] R13: ffffffff85cc0180 R14: ffff88800bd79920 R15: ffffffff87070ae0
[   21.333423] FS:  00007f41a5f15600(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
[   21.333714] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   21.333924] CR2: 0000000020000080 CR3: 000000000efe6000 CR4: 0000000000750ee0
[   21.334185] PKRU: 55555554
[   21.334290] Call Trace:
[   21.334386]  <TASK>
[   21.334469]  ? show_regs+0x6e/0x80
[   21.334604]  ? die_addr+0x45/0xb0
[   21.334751]  ? exc_general_protection+0x159/0x250
[   21.334938]  ? asm_exc_general_protection+0x2b/0x30
[   21.335124]  ? sysfs_remove_link_from_group+0x21/0x90
[   21.335314]  ? sysfs_remove_link_from_group+0x37/0x90
[   21.335505]  ? sysfs_remove_link_from_group+0x21/0x90
[   21.335696]  iommu_device_unlink+0x85/0xd0
[   21.335852]  iommu_deinit_device+0x11f/0x4c0
[   21.336018]  __iommu_group_remove_device+0x26b/0x300
[   21.336208]  iommu_group_remove_device+0x8a/0xb0
[   21.336384]  iommufd_test+0x1f1a/0x2d10
[   21.336530]  ? __pfx_lock_release+0x10/0x10
[   21.336691]  ? __pfx_lock_acquire+0x10/0x10
[   21.336852]  ? __pfx_iommufd_test+0x10/0x10
[   21.337011]  ? __sanitizer_cov_trace_const_cmp8+0x1c/0x30
[   21.337215]  iommufd_fops_ioctl+0x377/0x510
[   21.337375]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   21.337554]  ? trace_hardirqs_on+0x26/0x120
[   21.337715]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   21.337948]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   21.338135]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   21.338336]  ? security_file_ioctl+0x9d/0xd0
[   21.338502]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   21.338681]  __x64_sys_ioctl+0x1b9/0x230
[   21.338839]  do_syscall_64+0x3c/0x90
[   21.338976]  entry_SYSCALL_64_after_hwframe+0x6e/0xd8
[   21.339164] RIP: 0033:0x7f41a5c3ee5d
[   21.339301] Code: ff c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d 93 af 1b 00 f7 d8 64 89 01 48
[   21.339958] RSP: 002b:00007fff23d49da8 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   21.340232] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f41a5c3ee5d
[   21.340490] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   21.340771] RBP: 00007fff23d49dc0 R08: 0000000000000800 R09: 0000000000000800
[   21.341031] R10: 0000000000000000 R11: 0000000000000213 R12: 00007fff23d49ed8
[   21.341290] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f41a5f56000
[   21.341553]  </TASK>
[   21.341639] Modules linked in:
[   21.341798] ---[ end trace 0000000000000000 ]---
[   21.341970] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   21.342183] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   21.342856] RSP: 0018:ffff88802457fba8 EFLAGS: 00010206
[   21.343050] RAX: dffffc0000000000 RBX: ffff888014f9b000 RCX: 0000000000000000
[   21.343322] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   21.343635] RBP: ffff88802457fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   21.343894] R10: ffff88800aad88df R11: 0000000000000001 R12: 0000000000000000
[   21.344175] R13: ffffffff85cc0180 R14: ffff8880109b6ac0 R15: ffffffff87070ae0
[   21.344458] FS:  00007f41a5f15600(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
[   21.344757] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   21.345003] CR2: 0000000020000080 CR3: 000000000efe6000 CR4: 0000000000750ee0
[   21.345262] PKRU: 55555554
[   21.345652] ------------[ cut here ]------------
[   21.345825] WARNING: CPU: 1 PID: 932 at drivers/iommu/iommufd/main.c:258 iommufd_fops_release+0x2a3/0x300
[   21.346203] Modules linked in:
[   21.346348] CPU: 1 PID: 932 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   21.346761] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   21.347216] RIP: 0010:iommufd_fops_release+0x2a3/0x300
[   21.347405] Code: 45 d0 65 48 2b 04 25 28 00 00 00 75 54 48 81 c4 88 00 00 00 31 c0 5b 41 5c 41 5d 41 5e 41 5f 5d c3 cc cc cc cc e8 ad 4f 0a fe <0f> 0b eb a6 e8 74 23 67 fe e9 f6 fe ff ff 48 89 85 50 ff ff ff e8
[   21.348100] RSP: 0018:ffff8880246ffc00 EFLAGS: 00010293
[   21.348290] RAX: 0000000000000000 RBX: ffff88801248a808 RCX: 0000000000000000
[   21.348583] RDX: ffff888014cd8000 RSI: ffffffff835563e3 RDI: ffffffff86702b48
[   21.348842] RBP: ffff8880246ffcb0 R08: 0000000000000000 R09: fffffbfff0eb2644
[   21.349142] R10: ffffffff87593227 R11: ffff888018a20400 R12: 0000000000000000
[   21.349402] R13: ffff888012662918 R14: ffff8880246ffc48 R15: ffffffff83556140
[   21.349660] FS:  0000000000000000(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
[   21.350003] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   21.350210] CR2: 0000000020000080 CR3: 000000000687e000 CR4: 0000000000750ee0
[   21.350482] PKRU: 55555554
[   21.350616] Call Trace:
[   21.350711]  <TASK>
[   21.350810]  ? show_regs+0x6e/0x80
[   21.350943]  ? __warn+0xef/0x340
[   21.351068]  ? report_bug+0x25e/0x4b0
[   21.351208]  ? iommufd_fops_release+0x2a3/0x300
[   21.351392]  ? report_bug+0x2cb/0x4b0
[   21.351561]  ? handle_bug+0x46/0x90
[   21.351694]  ? exc_invalid_op+0x1d/0x50
[   21.351838]  ? asm_exc_invalid_op+0x1f/0x30
[   21.351992]  ? __pfx_iommufd_fops_release+0x10/0x10
[   21.352213]  ? iommufd_fops_release+0x2a3/0x300
[   21.352386]  ? iommufd_fops_release+0x2a3/0x300
[   21.352557]  ? __pfx_iommufd_fops_release+0x10/0x10
[   21.352756]  ? rcu_is_watching+0x19/0xc0
[   21.352940]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   21.353138]  ? __pfx_iommufd_fops_release+0x10/0x10
[   21.353325]  __fput+0x424/0xaf0
[   21.353479]  ____fput+0x1f/0x30
[   21.353603]  task_work_run+0x19d/0x2b0
[   21.353746]  ? __pfx_task_work_run+0x10/0x10
[   21.353906]  ? __sanitizer_cov_trace_const_cmp1+0x1e/0x30
[   21.354141]  ? switch_task_namespaces+0xa9/0xe0
[   21.354314]  do_exit+0xac9/0x2790
[   21.354447]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   21.354703]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   21.354931]  ? __pfx_do_exit+0x10/0x10
[   21.355075]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   21.355276]  ? security_file_ioctl+0x9d/0xd0
[   21.355442]  make_task_dead+0x182/0x3c0
[   21.355591]  rewind_stack_and_make_dead+0x17/0x20
[   21.355779] RIP: 0033:0x7f41a5c3ee5d
[   21.355946] Code: Unable to access opcode bytes at 0x7f41a5c3ee33.
[   21.356169] RSP: 002b:00007fff23d49da8 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   21.356453] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f41a5c3ee5d
[   21.356747] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   21.357005] RBP: 00007fff23d49dc0 R08: 0000000000000800 R09: 0000000000000800
[   21.357305] R10: 0000000000000000 R11: 0000000000000213 R12: 00007fff23d49ed8
[   21.357563] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f41a5f56000
[   21.357869]  </TASK>
[   21.357955] irq event stamp: 0
[   21.358071] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   21.358300] hardirqs last disabled at (0): [<ffffffff8122f2d1>] copy_process+0x1c51/0x7140
[   21.358650] softirqs last  enabled at (0): [<ffffffff8122f312>] copy_process+0x1c92/0x7140
[   21.358960] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   21.359189] ---[ end trace 0000000000000000 ]---
[   21.361781] iommufd_mock iommufd_mock211: Adding to iommu group 211
[   21.362042] iommufd_mock iommufd_mock211: Removing from iommu group 211
[   21.362309] general protection fault, probably for non-canonical address 0xdffffc0000000006: 0000 [#212] PREEMPT SMP KASAN NOPTI
[   21.362731] KASAN: null-ptr-deref in range [0x0000000000000030-0x0000000000000037]
[   21.363048] CPU: 1 PID: 933 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   21.363369] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   21.363833] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   21.364053] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   21.364768] RSP: 0018:ffff8880120bfba8 EFLAGS: 00010206
[   21.365009] RAX: dffffc0000000000 RBX: ffff888014e7c000 RCX: 0000000000000000
[   21.365272] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   21.365552] RBP: ffff8880120bfbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   21.365840] R10: ffff88800aad88df R11: 5f6466756d6d6f69 R12: 0000000000000000
[   21.366104] R13: ffffffff85cc0180 R14: ffff88800bd790a0 R15: ffffffff87070ae0
[   21.366406] FS:  00007f068d021600(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
[   21.366704] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   21.366946] CR2: 0000000020000080 CR3: 00000000203dc000 CR4: 0000000000750ee0
[   21.367212] PKRU: 55555554
[   21.367318] Call Trace:
[   21.367414]  <TASK>
[   21.367499]  ? show_regs+0x6e/0x80
[   21.367638]  ? die_addr+0x45/0xb0
[   21.367774]  ? exc_general_protection+0x159/0x250
[   21.367962]  ? asm_exc_general_protection+0x2b/0x30
[   21.368152]  ? sysfs_remove_link_from_group+0x21/0x90
[   21.368347]  ? sysfs_remove_link_from_group+0x37/0x90
[   21.368542]  ? sysfs_remove_link_from_group+0x21/0x90
[   21.368737]  iommu_device_unlink+0x85/0xd0
[   21.368897]  iommu_deinit_device+0x11f/0x4c0
[   21.369066]  __iommu_group_remove_device+0x26b/0x300
[   21.369262]  iommu_group_remove_device+0x8a/0xb0
[   21.369439]  iommufd_test+0x1f1a/0x2d10
[   21.369584]  ? __pfx_lock_release+0x10/0x10
[   21.369745]  ? __pfx_lock_acquire+0x10/0x10
[   21.369906]  ? __pfx_iommufd_test+0x10/0x10
[   21.370066]  ? __sanitizer_cov_trace_const_cmp8+0x1c/0x30
[   21.370271]  iommufd_fops_ioctl+0x377/0x510
[   21.370432]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   21.370618]  ? trace_hardirqs_on+0x26/0x120
[   21.370787]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   21.371025]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   21.371212]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   21.371414]  ? security_file_ioctl+0x9d/0xd0
[   21.371580]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   21.371761]  __x64_sys_ioctl+0x1b9/0x230
[   21.371916]  do_syscall_64+0x3c/0x90
[   21.372053]  entry_SYSCALL_64_after_hwframe+0x6e/0xd8
[   21.372242] RIP: 0033:0x7f068ce3ee5d
[   21.372379] Code: ff c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d 93 af 1b 00 f7 d8 64 89 01 48
[   21.373038] RSP: 002b:00007ffc14491018 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   21.373313] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f068ce3ee5d
[   21.373572] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   21.373831] RBP: 00007ffc14491030 R08: 0000000000000800 R09: 0000000000000800
[   21.374089] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffc14491148
[   21.374347] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f068d062000
[   21.374625]  </TASK>
[   21.374712] Modules linked in:
[   21.374858] ---[ end trace 0000000000000000 ]---
[   21.375046] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   21.375261] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   21.375935] RSP: 0018:ffff88802457fba8 EFLAGS: 00010206
[   21.376132] RAX: dffffc0000000000 RBX: ffff888014f9b000 RCX: 0000000000000000
[   21.376395] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   21.376659] RBP: ffff88802457fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   21.376917] R10: ffff88800aad88df R11: 0000000000000001 R12: 0000000000000000
[   21.377175] R13: ffffffff85cc0180 R14: ffff8880109b6ac0 R15: ffffffff87070ae0
[   21.377433] FS:  00007f068d021600(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
[   21.377724] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   21.377934] CR2: 0000000020000080 CR3: 00000000203dc000 CR4: 0000000000750ee0
[   21.378193] PKRU: 55555554
[   21.378555] ------------[ cut here ]------------
[   21.378818] WARNING: CPU: 1 PID: 933 at drivers/iommu/iommufd/main.c:258 iommufd_fops_release+0x2a3/0x300
[   21.379168] Modules linked in:
[   21.379283] CPU: 1 PID: 933 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   21.379591] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   21.379989] RIP: 0010:iommufd_fops_release+0x2a3/0x300
[   21.380178] Code: 45 d0 65 48 2b 04 25 28 00 00 00 75 54 48 81 c4 88 00 00 00 31 c0 5b 41 5c 41 5d 41 5e 41 5f 5d c3 cc cc cc cc e8 ad 4f 0a fe <0f> 0b eb a6 e8 74 23 67 fe e9 f6 fe ff ff 48 89 85 50 ff ff ff e8
[   21.380823] RSP: 0018:ffff8880120bfc00 EFLAGS: 00010293
[   21.381012] RAX: 0000000000000000 RBX: ffff88801248a308 RCX: 0000000000000000
[   21.381265] RDX: ffff888011e40000 RSI: ffffffff835563e3 RDI: ffffffff86702b48
[   21.381518] RBP: ffff8880120bfcb0 R08: 0000000000000000 R09: fffffbfff0eb2644
[   21.381771] R10: ffffffff87593227 R11: ffff88801940c000 R12: 0000000000000000
[   21.382024] R13: ffff888013906198 R14: ffff8880120bfc48 R15: ffffffff83556140
[   21.382277] FS:  0000000000000000(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
[   21.382562] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   21.382788] CR2: 0000000020000080 CR3: 000000000687e000 CR4: 0000000000750ee0
[   21.383048] PKRU: 55555554
[   21.383152] Call Trace:
[   21.383247]  <TASK>
[   21.383328]  ? show_regs+0x6e/0x80
[   21.383459]  ? __warn+0xef/0x340
[   21.383584]  ? report_bug+0x25e/0x4b0
[   21.383723]  ? iommufd_fops_release+0x2a3/0x300
[   21.383892]  ? report_bug+0x2cb/0x4b0
[   21.384034]  ? handle_bug+0x46/0x90
[   21.384166]  ? exc_invalid_op+0x1d/0x50
[   21.384310]  ? asm_exc_invalid_op+0x1f/0x30
[   21.384465]  ? __pfx_iommufd_fops_release+0x10/0x10
[   21.384647]  ? iommufd_fops_release+0x2a3/0x300
[   21.384816]  ? iommufd_fops_release+0x2a3/0x300
[   21.384987]  ? __pfx_iommufd_fops_release+0x10/0x10
[   21.385167]  ? rcu_is_watching+0x19/0xc0
[   21.385315]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   21.385513]  ? __pfx_iommufd_fops_release+0x10/0x10
[   21.385693]  __fput+0x424/0xaf0
[   21.385819]  ____fput+0x1f/0x30
[   21.385941]  task_work_run+0x19d/0x2b0
[   21.386083]  ? __pfx_task_work_run+0x10/0x10
[   21.386242]  ? __sanitizer_cov_trace_const_cmp1+0x1e/0x30
[   21.386439]  ? switch_task_namespaces+0xa9/0xe0
[   21.386617]  do_exit+0xac9/0x2790
[   21.386750]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   21.387019]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   21.387208]  ? __pfx_do_exit+0x10/0x10
[   21.387348]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   21.387544]  ? security_file_ioctl+0x9d/0xd0
[   21.387705]  make_task_dead+0x182/0x3c0
[   21.387850]  rewind_stack_and_make_dead+0x17/0x20
[   21.388024] RIP: 0033:0x7f068ce3ee5d
[   21.388156] Code: Unable to access opcode bytes at 0x7f068ce3ee33.
[   21.388373] RSP: 002b:00007ffc14491018 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   21.388641] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f068ce3ee5d
[   21.388891] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   21.389142] RBP: 00007ffc14491030 R08: 0000000000000800 R09: 0000000000000800
[   21.389393] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffc14491148
[   21.389643] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f068d062000
[   21.389899]  </TASK>
[   21.389983] irq event stamp: 0
[   21.390096] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   21.390319] hardirqs last disabled at (0): [<ffffffff8122f2d1>] copy_process+0x1c51/0x7140
[   21.390618] softirqs last  enabled at (0): [<ffffffff8122f312>] copy_process+0x1c92/0x7140
[   21.390926] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   21.391149] ---[ end trace 0000000000000000 ]---
[   21.393535] iommufd_mock iommufd_mock212: Adding to iommu group 212
[   21.393789] iommufd_mock iommufd_mock212: Removing from iommu group 212
[   21.394047] general protection fault, probably for non-canonical address 0xdffffc0000000006: 0000 [#213] PREEMPT SMP KASAN NOPTI
[   21.394457] KASAN: null-ptr-deref in range [0x0000000000000030-0x0000000000000037]
[   21.394729] CPU: 1 PID: 934 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   21.395071] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   21.395474] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   21.395687] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   21.396345] RSP: 0018:ffff88801654fba8 EFLAGS: 00010206
[   21.396538] RAX: dffffc0000000000 RBX: ffff888014e79000 RCX: 0000000000000000
[   21.396795] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   21.397051] RBP: ffff88801654fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   21.397308] R10: ffff88800aad88df R11: 5f6466756d6d6f69 R12: 0000000000000000
[   21.397564] R13: ffffffff85cc0180 R14: ffff88800bd79340 R15: ffffffff87070ae0
[   21.397821] FS:  00007f6a97849600(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
[   21.398110] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   21.398320] CR2: 0000000020000080 CR3: 00000000203dc000 CR4: 0000000000750ee0
[   21.398577] PKRU: 55555554
[   21.398681] Call Trace:
[   21.398784]  <TASK>
[   21.398868]  ? show_regs+0x6e/0x80
[   21.399007]  ? die_addr+0x45/0xb0
[   21.399139]  ? exc_general_protection+0x159/0x250
[   21.399322]  ? asm_exc_general_protection+0x2b/0x30
[   21.399507]  ? sysfs_remove_link_from_group+0x21/0x90
[   21.399697]  ? sysfs_remove_link_from_group+0x37/0x90
[   21.399887]  ? sysfs_remove_link_from_group+0x21/0x90
[   21.400077]  iommu_device_unlink+0x85/0xd0
[   21.400233]  iommu_deinit_device+0x11f/0x4c0
[   21.400398]  __iommu_group_remove_device+0x26b/0x300
[   21.400587]  iommu_group_remove_device+0x8a/0xb0
[   21.400763]  iommufd_test+0x1f1a/0x2d10
[   21.400908]  ? __pfx_lock_release+0x10/0x10
[   21.401067]  ? __pfx_lock_acquire+0x10/0x10
[   21.401227]  ? __pfx_iommufd_test+0x10/0x10
[   21.401386]  ? __sanitizer_cov_trace_const_cmp8+0x1c/0x30
[   21.401588]  iommufd_fops_ioctl+0x377/0x510
[   21.401749]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   21.401926]  ? trace_hardirqs_on+0x26/0x120
[   21.402088]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   21.402320]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   21.402505]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   21.402707]  ? security_file_ioctl+0x9d/0xd0
[   21.402877]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   21.403058]  __x64_sys_ioctl+0x1b9/0x230
[   21.403208]  do_syscall_64+0x3c/0x90
[   21.403344]  entry_SYSCALL_64_after_hwframe+0x6e/0xd8
[   21.403532] RIP: 0033:0x7f6a9763ee5d
[   21.403668] Code: ff c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d 93 af 1b 00 f7 d8 64 89 01 48
[   21.404320] RSP: 002b:00007ffceae1acf8 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   21.404592] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f6a9763ee5d
[   21.404847] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   21.405102] RBP: 00007ffceae1ad10 R08: 0000000000000800 R09: 0000000000000800
[   21.405358] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffceae1ae28
[   21.405613] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f6a9788a000
[   21.405874]  </TASK>
[   21.405959] Modules linked in:
[   21.406135] ---[ end trace 0000000000000000 ]---
[   21.406306] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   21.406516] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   21.407214] RSP: 0018:ffff88802457fba8 EFLAGS: 00010206
[   21.407429] RAX: dffffc0000000000 RBX: ffff888014f9b000 RCX: 0000000000000000
[   21.407685] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   21.407937] RBP: ffff88802457fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   21.408189] R10: ffff88800aad88df R11: 0000000000000001 R12: 0000000000000000
[   21.408440] R13: ffffffff85cc0180 R14: ffff8880109b6ac0 R15: ffffffff87070ae0
[   21.408691] FS:  00007f6a97849600(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
[   21.408975] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   21.409180] CR2: 0000000020000080 CR3: 00000000203dc000 CR4: 0000000000750ee0
[   21.409432] PKRU: 55555554
[   21.409819] ------------[ cut here ]------------
[   21.409990] WARNING: CPU: 1 PID: 934 at drivers/iommu/iommufd/main.c:258 iommufd_fops_release+0x2a3/0x300
[   21.410332] Modules linked in:
[   21.410448] CPU: 1 PID: 934 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   21.410803] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   21.411218] RIP: 0010:iommufd_fops_release+0x2a3/0x300
[   21.411408] Code: 45 d0 65 48 2b 04 25 28 00 00 00 75 54 48 81 c4 88 00 00 00 31 c0 5b 41 5c 41 5d 41 5e 41 5f 5d c3 cc cc cc cc e8 ad 4f 0a fe <0f> 0b eb a6 e8 74 23 67 fe e9 f6 fe ff ff 48 89 85 50 ff ff ff e8
[   21.412059] RSP: 0018:ffff88801654fc00 EFLAGS: 00010293
[   21.412250] RAX: 0000000000000000 RBX: ffff88801248ab08 RCX: 0000000000000000
[   21.412506] RDX: ffff8880121dca00 RSI: ffffffff835563e3 RDI: ffffffff86702b48
[   21.412761] RBP: ffff88801654fcb0 R08: 0000000000000000 R09: fffffbfff0eb2644
[   21.413016] R10: ffffffff87593227 R11: ffff8880132e4a00 R12: 0000000000000000
[   21.413272] R13: ffff888018961318 R14: ffff88801654fc48 R15: ffffffff83556140
[   21.413527] FS:  0000000000000000(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
[   21.413815] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   21.414024] CR2: 0000000020000080 CR3: 000000000687e000 CR4: 0000000000750ee0
[   21.414280] PKRU: 55555554
[   21.414382] Call Trace:
[   21.414476]  <TASK>
[   21.414557]  ? show_regs+0x6e/0x80
[   21.414696]  ? __warn+0xef/0x340
[   21.414825]  ? report_bug+0x25e/0x4b0
[   21.414968]  ? iommufd_fops_release+0x2a3/0x300
[   21.415141]  ? report_bug+0x2cb/0x4b0
[   21.415283]  ? handle_bug+0x46/0x90
[   21.415416]  ? exc_invalid_op+0x1d/0x50
[   21.415562]  ? asm_exc_invalid_op+0x1f/0x30
[   21.415715]  ? __pfx_iommufd_fops_release+0x10/0x10
[   21.415897]  ? iommufd_fops_release+0x2a3/0x300
[   21.416064]  ? iommufd_fops_release+0x2a3/0x300
[   21.416233]  ? __pfx_iommufd_fops_release+0x10/0x10
[   21.416412]  ? rcu_is_watching+0x19/0xc0
[   21.416559]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   21.416756]  ? __pfx_iommufd_fops_release+0x10/0x10
[   21.416935]  __fput+0x424/0xaf0
[   21.417059]  ____fput+0x1f/0x30
[   21.417180]  task_work_run+0x19d/0x2b0
[   21.417322]  ? __pfx_task_work_run+0x10/0x10
[   21.417481]  ? __sanitizer_cov_trace_const_cmp1+0x1e/0x30
[   21.417676]  ? switch_task_namespaces+0xa9/0xe0
[   21.417845]  do_exit+0xac9/0x2790
[   21.417990]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   21.418219]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   21.418400]  ? __pfx_do_exit+0x10/0x10
[   21.418540]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   21.418743]  ? security_file_ioctl+0x9d/0xd0
[   21.418913]  make_task_dead+0x182/0x3c0
[   21.419061]  rewind_stack_and_make_dead+0x17/0x20
[   21.419242] RIP: 0033:0x7f6a9763ee5d
[   21.419374] Code: Unable to access opcode bytes at 0x7f6a9763ee33.
[   21.419591] RSP: 002b:00007ffceae1acf8 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   21.419859] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f6a9763ee5d
[   21.420111] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   21.420361] RBP: 00007ffceae1ad10 R08: 0000000000000800 R09: 0000000000000800
[   21.420612] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffceae1ae28
[   21.420863] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f6a9788a000
[   21.421119]  </TASK>
[   21.421202] irq event stamp: 0
[   21.421316] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   21.421538] hardirqs last disabled at (0): [<ffffffff8122f2d1>] copy_process+0x1c51/0x7140
[   21.421829] softirqs last  enabled at (0): [<ffffffff8122f312>] copy_process+0x1c92/0x7140
[   21.422121] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   21.422344] ---[ end trace 0000000000000000 ]---
[   21.424740] iommufd_mock iommufd_mock213: Adding to iommu group 213
[   21.424993] iommufd_mock iommufd_mock213: Removing from iommu group 213
[   21.425250] general protection fault, probably for non-canonical address 0xdffffc0000000006: 0000 [#214] PREEMPT SMP KASAN NOPTI
[   21.425658] KASAN: null-ptr-deref in range [0x0000000000000030-0x0000000000000037]
[   21.425928] CPU: 1 PID: 935 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   21.426237] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   21.426641] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   21.426862] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   21.427519] RSP: 0018:ffff88800fef7ba8 EFLAGS: 00010206
[   21.427712] RAX: dffffc0000000000 RBX: ffff888014e7b000 RCX: 0000000000000000
[   21.427968] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   21.428223] RBP: ffff88800fef7bc0 R08: 0000000000000001 R09: ffffed100155b11b
[   21.428479] R10: ffff88800aad88df R11: 5f6466756d6d6f69 R12: 0000000000000000
[   21.428734] R13: ffffffff85cc0180 R14: ffff888024c351e0 R15: ffffffff87070ae0
[   21.428990] FS:  00007fbfab704600(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
[   21.429279] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   21.429487] CR2: 0000000020000080 CR3: 00000000203dc000 CR4: 0000000000750ee0
[   21.429744] PKRU: 55555554
[   21.429847] Call Trace:
[   21.429940]  <TASK>
[   21.430022]  ? show_regs+0x6e/0x80
[   21.430158]  ? die_addr+0x45/0xb0
[   21.430290]  ? exc_general_protection+0x159/0x250
[   21.430472]  ? asm_exc_general_protection+0x2b/0x30
[   21.430657]  ? sysfs_remove_link_from_group+0x21/0x90
[   21.430849]  ? sysfs_remove_link_from_group+0x37/0x90
[   21.431047]  ? sysfs_remove_link_from_group+0x21/0x90
[   21.431236]  iommu_device_unlink+0x85/0xd0
[   21.431392]  iommu_deinit_device+0x11f/0x4c0
[   21.431557]  __iommu_group_remove_device+0x26b/0x300
[   21.431746]  iommu_group_remove_device+0x8a/0xb0
[   21.431922]  iommufd_test+0x1f1a/0x2d10
[   21.432067]  ? __pfx_lock_release+0x10/0x10
[   21.432226]  ? __pfx_lock_acquire+0x10/0x10
[   21.432387]  ? __pfx_iommufd_test+0x10/0x10
[   21.432545]  ? __sanitizer_cov_trace_const_cmp8+0x1c/0x30
[   21.432748]  iommufd_fops_ioctl+0x377/0x510
[   21.432908]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   21.433086]  ? trace_hardirqs_on+0x26/0x120
[   21.433247]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   21.433480]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   21.433665]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   21.433866]  ? security_file_ioctl+0x9d/0xd0
[   21.434030]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   21.434208]  __x64_sys_ioctl+0x1b9/0x230
[   21.434360]  do_syscall_64+0x3c/0x90
[   21.434498]  entry_SYSCALL_64_after_hwframe+0x6e/0xd8
[   21.434686] RIP: 0033:0x7fbfab43ee5d
[   21.434824] Code: ff c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d 93 af 1b 00 f7 d8 64 89 01 48
[   21.435477] RSP: 002b:00007ffcd02bdb88 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   21.435750] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007fbfab43ee5d
[   21.436007] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   21.436263] RBP: 00007ffcd02bdba0 R08: 0000000000000800 R09: 0000000000000800
[   21.436519] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffcd02bdcb8
[   21.436775] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007fbfab745000
[   21.437036]  </TASK>
[   21.437121] Modules linked in:
[   21.437288] ---[ end trace 0000000000000000 ]---
[   21.437459] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   21.437670] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   21.438324] RSP: 0018:ffff88802457fba8 EFLAGS: 00010206
[   21.438515] RAX: dffffc0000000000 RBX: ffff888014f9b000 RCX: 0000000000000000
[   21.438795] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   21.439047] RBP: ffff88802457fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   21.439299] R10: ffff88800aad88df R11: 0000000000000001 R12: 0000000000000000
[   21.439551] R13: ffffffff85cc0180 R14: ffff8880109b6ac0 R15: ffffffff87070ae0
[   21.439803] FS:  00007fbfab704600(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
[   21.440088] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   21.440294] CR2: 0000000020000080 CR3: 00000000203dc000 CR4: 0000000000750ee0
[   21.440547] PKRU: 55555554
[   21.440971] ------------[ cut here ]------------
[   21.441143] WARNING: CPU: 1 PID: 935 at drivers/iommu/iommufd/main.c:258 iommufd_fops_release+0x2a3/0x300
[   21.441488] Modules linked in:
[   21.441605] CPU: 1 PID: 935 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   21.441918] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   21.442322] RIP: 0010:iommufd_fops_release+0x2a3/0x300
[   21.442514] Code: 45 d0 65 48 2b 04 25 28 00 00 00 75 54 48 81 c4 88 00 00 00 31 c0 5b 41 5c 41 5d 41 5e 41 5f 5d c3 cc cc cc cc e8 ad 4f 0a fe <0f> 0b eb a6 e8 74 23 67 fe e9 f6 fe ff ff 48 89 85 50 ff ff ff e8
[   21.443247] RSP: 0018:ffff88800fef7c00 EFLAGS: 00010293
[   21.443437] RAX: 0000000000000000 RBX: ffff88801248ae08 RCX: 0000000000000000
[   21.443690] RDX: ffff8880121d8000 RSI: ffffffff835563e3 RDI: ffffffff86702b48
[   21.443942] RBP: ffff88800fef7cb0 R08: 0000000000000000 R09: fffffbfff0eb2644
[   21.444194] R10: ffffffff87593227 R11: ffff888013506200 R12: 0000000000000000
[   21.444446] R13: ffff8880114e0198 R14: ffff88800fef7c48 R15: ffffffff83556140
[   21.444699] FS:  0000000000000000(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
[   21.444983] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   21.445189] CR2: 0000000020000080 CR3: 000000000687e000 CR4: 0000000000750ee0
[   21.445441] PKRU: 55555554
[   21.445542] Call Trace:
[   21.445634]  <TASK>
[   21.445715]  ? show_regs+0x6e/0x80
[   21.445846]  ? __warn+0xef/0x340
[   21.445970]  ? report_bug+0x25e/0x4b0
[   21.446111]  ? iommufd_fops_release+0x2a3/0x300
[   21.446282]  ? report_bug+0x2cb/0x4b0
[   21.446422]  ? handle_bug+0x46/0x90
[   21.446555]  ? exc_invalid_op+0x1d/0x50
[   21.446706]  ? asm_exc_invalid_op+0x1f/0x30
[   21.446862]  ? __pfx_iommufd_fops_release+0x10/0x10
[   21.447045]  ? iommufd_fops_release+0x2a3/0x300
[   21.447214]  ? iommufd_fops_release+0x2a3/0x300
[   21.447383]  ? __pfx_iommufd_fops_release+0x10/0x10
[   21.447562]  ? rcu_is_watching+0x19/0xc0
[   21.447711]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   21.447908]  ? __pfx_iommufd_fops_release+0x10/0x10
[   21.448087]  __fput+0x424/0xaf0
[   21.448211]  ____fput+0x1f/0x30
[   21.448333]  task_work_run+0x19d/0x2b0
[   21.448475]  ? __pfx_task_work_run+0x10/0x10
[   21.448633]  ? __sanitizer_cov_trace_const_cmp1+0x1e/0x30
[   21.448830]  ? switch_task_namespaces+0xa9/0xe0
[   21.449000]  do_exit+0xac9/0x2790
[   21.449127]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   21.449353]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   21.449535]  ? __pfx_do_exit+0x10/0x10
[   21.449675]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   21.449871]  ? security_file_ioctl+0x9d/0xd0
[   21.450033]  make_task_dead+0x182/0x3c0
[   21.450178]  rewind_stack_and_make_dead+0x17/0x20
[   21.450352] RIP: 0033:0x7fbfab43ee5d
[   21.450485] Code: Unable to access opcode bytes at 0x7fbfab43ee33.
[   21.450709] RSP: 002b:00007ffcd02bdb88 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   21.450980] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007fbfab43ee5d
[   21.451232] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   21.451484] RBP: 00007ffcd02bdba0 R08: 0000000000000800 R09: 0000000000000800
[   21.451736] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffcd02bdcb8
[   21.451988] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007fbfab745000
[   21.452246]  </TASK>
[   21.452329] irq event stamp: 0
[   21.452442] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   21.452665] hardirqs last disabled at (0): [<ffffffff8122f2d1>] copy_process+0x1c51/0x7140
[   21.452958] softirqs last  enabled at (0): [<ffffffff8122f312>] copy_process+0x1c92/0x7140
[   21.453251] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   21.453474] ---[ end trace 0000000000000000 ]---
[   21.455911] iommufd_mock iommufd_mock214: Adding to iommu group 214
[   21.456163] iommufd_mock iommufd_mock214: Removing from iommu group 214
[   21.456420] general protection fault, probably for non-canonical address 0xdffffc0000000006: 0000 [#215] PREEMPT SMP KASAN NOPTI
[   21.456830] KASAN: null-ptr-deref in range [0x0000000000000030-0x0000000000000037]
[   21.457101] CPU: 1 PID: 936 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   21.457413] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   21.457817] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   21.458029] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   21.458684] RSP: 0018:ffff888012017ba8 EFLAGS: 00010206
[   21.458881] RAX: dffffc0000000000 RBX: ffff888014e7a000 RCX: 0000000000000000
[   21.459137] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   21.459393] RBP: ffff888012017bc0 R08: 0000000000000001 R09: ffffed100155b11b
[   21.459649] R10: ffff88800aad88df R11: 5f6466756d6d6f69 R12: 0000000000000000
[   21.459906] R13: ffffffff85cc0180 R14: ffff888024c35dc0 R15: ffffffff87070ae0
[   21.460162] FS:  00007f14c5341600(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
[   21.460451] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   21.460660] CR2: 0000000020000080 CR3: 00000000203dc000 CR4: 0000000000750ee0
[   21.460918] PKRU: 55555554
[   21.461021] Call Trace:
[   21.461114]  <TASK>
[   21.461196]  ? show_regs+0x6e/0x80
[   21.461331]  ? die_addr+0x45/0xb0
[   21.461464]  ? exc_general_protection+0x159/0x250
[   21.461647]  ? asm_exc_general_protection+0x2b/0x30
[   21.461832]  ? sysfs_remove_link_from_group+0x21/0x90
[   21.462022]  ? sysfs_remove_link_from_group+0x37/0x90
[   21.462221]  ? sysfs_remove_link_from_group+0x21/0x90
[   21.462412]  iommu_device_unlink+0x85/0xd0
[   21.462568]  iommu_deinit_device+0x11f/0x4c0
[   21.462733]  __iommu_group_remove_device+0x26b/0x300
[   21.462924]  iommu_group_remove_device+0x8a/0xb0
[   21.463100]  iommufd_test+0x1f1a/0x2d10
[   21.463246]  ? __pfx_lock_release+0x10/0x10
[   21.463405]  ? __pfx_lock_acquire+0x10/0x10
[   21.463565]  ? __pfx_iommufd_test+0x10/0x10
[   21.463724]  ? __sanitizer_cov_trace_const_cmp8+0x1c/0x30
[   21.463927]  iommufd_fops_ioctl+0x377/0x510
[   21.464087]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   21.464265]  ? trace_hardirqs_on+0x26/0x120
[   21.464426]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   21.464657]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   21.464843]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   21.465044]  ? security_file_ioctl+0x9d/0xd0
[   21.465208]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   21.465386]  __x64_sys_ioctl+0x1b9/0x230
[   21.465536]  do_syscall_64+0x3c/0x90
[   21.465672]  entry_SYSCALL_64_after_hwframe+0x6e/0xd8
[   21.465860] RIP: 0033:0x7f14c503ee5d
[   21.465996] Code: ff c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d 93 af 1b 00 f7 d8 64 89 01 48
[   21.466649] RSP: 002b:00007ffdeb3edf48 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   21.466925] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f14c503ee5d
[   21.467182] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   21.467439] RBP: 00007ffdeb3edf60 R08: 0000000000000800 R09: 0000000000000800
[   21.467695] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffdeb3ee078
[   21.467951] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f14c5382000
[   21.468212]  </TASK>
[   21.468297] Modules linked in:
[   21.468438] ---[ end trace 0000000000000000 ]---
[   21.468608] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   21.468819] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   21.469472] RSP: 0018:ffff88802457fba8 EFLAGS: 00010206
[   21.469664] RAX: dffffc0000000000 RBX: ffff888014f9b000 RCX: 0000000000000000
[   21.469920] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   21.470176] RBP: ffff88802457fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   21.470432] R10: ffff88800aad88df R11: 0000000000000001 R12: 0000000000000000
[   21.470695] R13: ffffffff85cc0180 R14: ffff8880109b6ac0 R15: ffffffff87070ae0
[   21.470949] FS:  00007f14c5341600(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
[   21.471232] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   21.471437] CR2: 0000000020000080 CR3: 00000000203dc000 CR4: 0000000000750ee0
[   21.471689] PKRU: 55555554
[   21.472041] ------------[ cut here ]------------
[   21.472211] WARNING: CPU: 1 PID: 936 at drivers/iommu/iommufd/main.c:258 iommufd_fops_release+0x2a3/0x300
[   21.472554] Modules linked in:
[   21.472670] CPU: 1 PID: 936 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   21.472981] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   21.473384] RIP: 0010:iommufd_fops_release+0x2a3/0x300
[   21.473574] Code: 45 d0 65 48 2b 04 25 28 00 00 00 75 54 48 81 c4 88 00 00 00 31 c0 5b 41 5c 41 5d 41 5e 41 5f 5d c3 cc cc cc cc e8 ad 4f 0a fe <0f> 0b eb a6 e8 74 23 67 fe e9 f6 fe ff ff 48 89 85 50 ff ff ff e8
[   21.474226] RSP: 0018:ffff888012017c00 EFLAGS: 00010293
[   21.474417] RAX: 0000000000000000 RBX: ffff88801248ac08 RCX: 0000000000000000
[   21.474680] RDX: ffff888010e3ca00 RSI: ffffffff835563e3 RDI: ffffffff86702b48
[   21.474933] RBP: ffff888012017cb0 R08: 0000000000000000 R09: fffffbfff0eb2644
[   21.475184] R10: ffffffff87593227 R11: ffff888018bd8a00 R12: 0000000000000000
[   21.475435] R13: ffff8880114e0918 R14: ffff888012017c48 R15: ffffffff83556140
[   21.475687] FS:  0000000000000000(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
[   21.475970] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   21.476175] CR2: 0000000020000080 CR3: 000000000687e000 CR4: 0000000000750ee0
[   21.476427] PKRU: 55555554
[   21.476528] Call Trace:
[   21.476619]  <TASK>
[   21.476699]  ? show_regs+0x6e/0x80
[   21.476829]  ? __warn+0xef/0x340
[   21.476953]  ? report_bug+0x25e/0x4b0
[   21.477092]  ? iommufd_fops_release+0x2a3/0x300
[   21.477261]  ? report_bug+0x2cb/0x4b0
[   21.477401]  ? handle_bug+0x46/0x90
[   21.477536]  ? exc_invalid_op+0x1d/0x50
[   21.477680]  ? asm_exc_invalid_op+0x1f/0x30
[   21.477835]  ? __pfx_iommufd_fops_release+0x10/0x10
[   21.478016]  ? iommufd_fops_release+0x2a3/0x300
[   21.478184]  ? iommufd_fops_release+0x2a3/0x300
[   21.478354]  ? __pfx_iommufd_fops_release+0x10/0x10
[   21.478532]  ? rcu_is_watching+0x19/0xc0
[   21.478685]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   21.478885]  ? __pfx_iommufd_fops_release+0x10/0x10
[   21.479063]  __fput+0x424/0xaf0
[   21.479188]  ____fput+0x1f/0x30
[   21.479309]  task_work_run+0x19d/0x2b0
[   21.479450]  ? __pfx_task_work_run+0x10/0x10
[   21.479609]  ? __sanitizer_cov_trace_const_cmp1+0x1e/0x30
[   21.479804]  ? switch_task_namespaces+0xa9/0xe0
[   21.479973]  do_exit+0xac9/0x2790
[   21.480099]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   21.480324]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   21.480505]  ? __pfx_do_exit+0x10/0x10
[   21.480645]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   21.480841]  ? security_file_ioctl+0x9d/0xd0
[   21.481003]  make_task_dead+0x182/0x3c0
[   21.481147]  rewind_stack_and_make_dead+0x17/0x20
[   21.481321] RIP: 0033:0x7f14c503ee5d
[   21.481454] Code: Unable to access opcode bytes at 0x7f14c503ee33.
[   21.481671] RSP: 002b:00007ffdeb3edf48 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   21.481939] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f14c503ee5d
[   21.482190] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   21.482441] RBP: 00007ffdeb3edf60 R08: 0000000000000800 R09: 0000000000000800
[   21.482697] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffdeb3ee078
[   21.482953] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f14c5382000
[   21.483209]  </TASK>
[   21.483293] irq event stamp: 0
[   21.483406] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   21.483628] hardirqs last disabled at (0): [<ffffffff8122f2d1>] copy_process+0x1c51/0x7140
[   21.483920] softirqs last  enabled at (0): [<ffffffff8122f312>] copy_process+0x1c92/0x7140
[   21.484211] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   21.484433] ---[ end trace 0000000000000000 ]---
[   21.486838] iommufd_mock iommufd_mock215: Adding to iommu group 215
[   21.487094] iommufd_mock iommufd_mock215: Removing from iommu group 215
[   21.487351] general protection fault, probably for non-canonical address 0xdffffc0000000006: 0000 [#216] PREEMPT SMP KASAN NOPTI
[   21.487764] KASAN: null-ptr-deref in range [0x0000000000000030-0x0000000000000037]
[   21.488037] CPU: 1 PID: 937 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   21.488348] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   21.488752] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   21.488963] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   21.489617] RSP: 0018:ffff88801499fba8 EFLAGS: 00010206
[   21.489810] RAX: dffffc0000000000 RBX: ffff8880120bb000 RCX: 0000000000000000
[   21.490066] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   21.490322] RBP: ffff88801499fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   21.490579] R10: ffff88800aad88df R11: 5f6466756d6d6f69 R12: 0000000000000000
[   21.490840] R13: ffffffff85cc0180 R14: ffff88801679a6e0 R15: ffffffff87070ae0
[   21.491098] FS:  00007ff44a517600(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
[   21.491388] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   21.491597] CR2: 0000000020000080 CR3: 00000000203dc000 CR4: 0000000000750ee0
[   21.491855] PKRU: 55555554
[   21.491959] Call Trace:
[   21.492052]  <TASK>
[   21.492134]  ? show_regs+0x6e/0x80
[   21.492269]  ? die_addr+0x45/0xb0
[   21.492402]  ? exc_general_protection+0x159/0x250
[   21.492584]  ? asm_exc_general_protection+0x2b/0x30
[   21.492770]  ? sysfs_remove_link_from_group+0x21/0x90
[   21.492960]  ? sysfs_remove_link_from_group+0x37/0x90
[   21.493150]  ? sysfs_remove_link_from_group+0x21/0x90
[   21.493339]  iommu_device_unlink+0x85/0xd0
[   21.493495]  iommu_deinit_device+0x11f/0x4c0
[   21.493660]  __iommu_group_remove_device+0x26b/0x300
[   21.493849]  iommu_group_remove_device+0x8a/0xb0
[   21.494025]  iommufd_test+0x1f1a/0x2d10
[   21.494171]  ? __pfx_lock_release+0x10/0x10
[   21.494330]  ? __pfx_lock_acquire+0x10/0x10
[   21.494491]  ? __pfx_iommufd_test+0x10/0x10
[   21.494650]  ? __sanitizer_cov_trace_const_cmp8+0x1c/0x30
[   21.494861]  iommufd_fops_ioctl+0x377/0x510
[   21.495021]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   21.495199]  ? trace_hardirqs_on+0x26/0x120
[   21.495361]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   21.495593]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   21.495779]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   21.495980]  ? security_file_ioctl+0x9d/0xd0
[   21.496147]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   21.496339]  __x64_sys_ioctl+0x1b9/0x230
[   21.496488]  do_syscall_64+0x3c/0x90
[   21.496625]  entry_SYSCALL_64_after_hwframe+0x6e/0xd8
[   21.496814] RIP: 0033:0x7ff44a23ee5d
[   21.496950] Code: ff c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d 93 af 1b 00 f7 d8 64 89 01 48
[   21.497605] RSP: 002b:00007ffe53fbdce8 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   21.497878] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007ff44a23ee5d
[   21.498134] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   21.498391] RBP: 00007ffe53fbdd00 R08: 0000000000000800 R09: 0000000000000800
[   21.498648] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffe53fbde18
[   21.498910] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007ff44a558000
[   21.499174]  </TASK>
[   21.499259] Modules linked in:
[   21.499412] ---[ end trace 0000000000000000 ]---
[   21.499583] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   21.499794] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   21.500450] RSP: 0018:ffff88802457fba8 EFLAGS: 00010206
[   21.500641] RAX: dffffc0000000000 RBX: ffff888014f9b000 RCX: 0000000000000000
[   21.500898] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   21.501153] RBP: ffff88802457fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   21.501410] R10: ffff88800aad88df R11: 0000000000000001 R12: 0000000000000000
[   21.501665] R13: ffffffff85cc0180 R14: ffff8880109b6ac0 R15: ffffffff87070ae0
[   21.501922] FS:  00007ff44a517600(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
[   21.502211] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   21.502421] CR2: 0000000020000080 CR3: 00000000203dc000 CR4: 0000000000750ee0
[   21.502687] PKRU: 55555554
[   21.503045] ------------[ cut here ]------------
[   21.503216] WARNING: CPU: 1 PID: 937 at drivers/iommu/iommufd/main.c:258 iommufd_fops_release+0x2a3/0x300
[   21.503561] Modules linked in:
[   21.503678] CPU: 1 PID: 937 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   21.503990] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   21.504393] RIP: 0010:iommufd_fops_release+0x2a3/0x300
[   21.504585] Code: 45 d0 65 48 2b 04 25 28 00 00 00 75 54 48 81 c4 88 00 00 00 31 c0 5b 41 5c 41 5d 41 5e 41 5f 5d c3 cc cc cc cc e8 ad 4f 0a fe <0f> 0b eb a6 e8 74 23 67 fe e9 f6 fe ff ff 48 89 85 50 ff ff ff e8
[   21.505238] RSP: 0018:ffff88801499fc00 EFLAGS: 00010293
[   21.505429] RAX: 0000000000000000 RBX: ffff88801248a508 RCX: 0000000000000000
[   21.505686] RDX: ffff888011e82500 RSI: ffffffff835563e3 RDI: ffffffff86702b48
[   21.505942] RBP: ffff88801499fcb0 R08: 0000000000000000 R09: fffffbfff0eb2644
[   21.506198] R10: ffffffff87593227 R11: ffff888018bc4200 R12: 0000000000000000
[   21.506454] R13: ffff8880110d2e18 R14: ffff88801499fc48 R15: ffffffff83556140
[   21.506720] FS:  0000000000000000(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
[   21.507035] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   21.507244] CR2: 0000000020000080 CR3: 000000000687e000 CR4: 0000000000750ee0
[   21.507502] PKRU: 55555554
[   21.507604] Call Trace:
[   21.507698]  <TASK>
[   21.507780]  ? show_regs+0x6e/0x80
[   21.507912]  ? __warn+0xef/0x340
[   21.508039]  ? report_bug+0x25e/0x4b0
[   21.508180]  ? iommufd_fops_release+0x2a3/0x300
[   21.508352]  ? report_bug+0x2cb/0x4b0
[   21.508495]  ? handle_bug+0x46/0x90
[   21.508630]  ? exc_invalid_op+0x1d/0x50
[   21.508776]  ? asm_exc_invalid_op+0x1f/0x30
[   21.508933]  ? __pfx_iommufd_fops_release+0x10/0x10
[   21.509118]  ? iommufd_fops_release+0x2a3/0x300
[   21.509290]  ? iommufd_fops_release+0x2a3/0x300
[   21.509463]  ? __pfx_iommufd_fops_release+0x10/0x10
[   21.509645]  ? rcu_is_watching+0x19/0xc0
[   21.509796]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   21.509998]  ? __pfx_iommufd_fops_release+0x10/0x10
[   21.510182]  __fput+0x424/0xaf0
[   21.510313]  ____fput+0x1f/0x30
[   21.510437]  task_work_run+0x19d/0x2b0
[   21.510587]  ? __pfx_task_work_run+0x10/0x10
[   21.510748]  ? __sanitizer_cov_trace_const_cmp1+0x1e/0x30
[   21.510944]  ? switch_task_namespaces+0xa9/0xe0
[   21.511114]  do_exit+0xac9/0x2790
[   21.511241]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   21.511466]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   21.511647]  ? __pfx_do_exit+0x10/0x10
[   21.511787]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   21.511983]  ? security_file_ioctl+0x9d/0xd0
[   21.512145]  make_task_dead+0x182/0x3c0
[   21.512290]  rewind_stack_and_make_dead+0x17/0x20
[   21.512464] RIP: 0033:0x7ff44a23ee5d
[   21.512597] Code: Unable to access opcode bytes at 0x7ff44a23ee33.
[   21.512814] RSP: 002b:00007ffe53fbdce8 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   21.513083] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007ff44a23ee5d
[   21.513335] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   21.513586] RBP: 00007ffe53fbdd00 R08: 0000000000000800 R09: 0000000000000800
[   21.513838] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffe53fbde18
[   21.514089] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007ff44a558000
[   21.514347]  </TASK>
[   21.514430] irq event stamp: 0
[   21.514543] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   21.514774] hardirqs last disabled at (0): [<ffffffff8122f2d1>] copy_process+0x1c51/0x7140
[   21.515067] softirqs last  enabled at (0): [<ffffffff8122f312>] copy_process+0x1c92/0x7140
[   21.515358] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   21.515581] ---[ end trace 0000000000000000 ]---
[   21.517945] iommufd_mock iommufd_mock216: Adding to iommu group 216
[   21.518197] iommufd_mock iommufd_mock216: Removing from iommu group 216
[   21.518559] general protection fault, probably for non-canonical address 0xdffffc0000000006: 0000 [#217] PREEMPT SMP KASAN NOPTI
[   21.518976] KASAN: null-ptr-deref in range [0x0000000000000030-0x0000000000000037]
[   21.519243] CPU: 1 PID: 938 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   21.519550] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   21.519946] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   21.520156] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   21.520799] RSP: 0018:ffff88801700fba8 EFLAGS: 00010206
[   21.520988] RAX: dffffc0000000000 RBX: ffff8880120ba000 RCX: 0000000000000000
[   21.521240] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   21.521491] RBP: ffff88801700fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   21.521743] R10: ffff88800aad88df R11: 5f6466756d6d6f69 R12: 0000000000000000
[   21.521995] R13: ffffffff85cc0180 R14: ffff88801679a1c0 R15: ffffffff87070ae0
[   21.522248] FS:  00007fd39e599600(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
[   21.522532] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   21.522738] CR2: 0000000020000080 CR3: 00000000203dc000 CR4: 0000000000750ee0
[   21.523000] PKRU: 55555554
[   21.523102] Call Trace:
[   21.523193]  <TASK>
[   21.523274]  ? show_regs+0x6e/0x80
[   21.523408]  ? die_addr+0x45/0xb0
[   21.523538]  ? exc_general_protection+0x159/0x250
[   21.523717]  ? asm_exc_general_protection+0x2b/0x30
[   21.523900]  ? sysfs_remove_link_from_group+0x21/0x90
[   21.524087]  ? sysfs_remove_link_from_group+0x37/0x90
[   21.524272]  ? sysfs_remove_link_from_group+0x21/0x90
[   21.524459]  iommu_device_unlink+0x85/0xd0
[   21.524612]  iommu_deinit_device+0x11f/0x4c0
[   21.524774]  __iommu_group_remove_device+0x26b/0x300
[   21.524960]  iommu_group_remove_device+0x8a/0xb0
[   21.525133]  iommufd_test+0x1f1a/0x2d10
[   21.525276]  ? __pfx_lock_release+0x10/0x10
[   21.525432]  ? __pfx_lock_acquire+0x10/0x10
[   21.525590]  ? __pfx_iommufd_test+0x10/0x10
[   21.525746]  ? __sanitizer_cov_trace_const_cmp8+0x1c/0x30
[   21.525945]  iommufd_fops_ioctl+0x377/0x510
[   21.526102]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   21.526277]  ? trace_hardirqs_on+0x26/0x120
[   21.526435]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   21.526663]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   21.526847]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   21.527044]  ? security_file_ioctl+0x9d/0xd0
[   21.527207]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   21.527382]  __x64_sys_ioctl+0x1b9/0x230
[   21.527529]  do_syscall_64+0x3c/0x90
[   21.527663]  entry_SYSCALL_64_after_hwframe+0x6e/0xd8
[   21.527848] RIP: 0033:0x7fd39e23ee5d
[   21.527981] Code: ff c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d 93 af 1b 00 f7 d8 64 89 01 48
[   21.528623] RSP: 002b:00007fff90142a68 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   21.528892] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007fd39e23ee5d
[   21.529144] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   21.529395] RBP: 00007fff90142a80 R08: 0000000000000800 R09: 0000000000000800
[   21.529647] R10: 0000000000000000 R11: 0000000000000213 R12: 00007fff90142b98
[   21.529899] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007fd39e5da000
[   21.530156]  </TASK>
[   21.530239] Modules linked in:
[   21.530407] ---[ end trace 0000000000000000 ]---
[   21.530593] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   21.530814] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   21.531461] RSP: 0018:ffff88802457fba8 EFLAGS: 00010206
[   21.531650] RAX: dffffc0000000000 RBX: ffff888014f9b000 RCX: 0000000000000000
[   21.531901] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   21.532155] RBP: ffff88802457fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   21.532406] R10: ffff88800aad88df R11: 0000000000000001 R12: 0000000000000000
[   21.532658] R13: ffffffff85cc0180 R14: ffff8880109b6ac0 R15: ffffffff87070ae0
[   21.532910] FS:  00007fd39e599600(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
[   21.533194] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   21.533400] CR2: 0000000020000080 CR3: 00000000203dc000 CR4: 0000000000750ee0
[   21.533652] PKRU: 55555554
[   21.534077] ------------[ cut here ]------------
[   21.534250] WARNING: CPU: 1 PID: 938 at drivers/iommu/iommufd/main.c:258 iommufd_fops_release+0x2a3/0x300
[   21.534615] Modules linked in:
[   21.534731] CPU: 1 PID: 938 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   21.535041] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   21.535437] RIP: 0010:iommufd_fops_release+0x2a3/0x300
[   21.535625] Code: 45 d0 65 48 2b 04 25 28 00 00 00 75 54 48 81 c4 88 00 00 00 31 c0 5b 41 5c 41 5d 41 5e 41 5f 5d c3 cc cc cc cc e8 ad 4f 0a fe <0f> 0b eb a6 e8 74 23 67 fe e9 f6 fe ff ff 48 89 85 50 ff ff ff e8
[   21.536267] RSP: 0018:ffff88801700fc00 EFLAGS: 00010293
[   21.536456] RAX: 0000000000000000 RBX: ffff88801248ad08 RCX: 0000000000000000
[   21.536707] RDX: ffff888011e84a00 RSI: ffffffff835563e3 RDI: ffffffff86702b48
[   21.536959] RBP: ffff88801700fcb0 R08: 0000000000000000 R09: fffffbfff0eb2644
[   21.537210] R10: ffffffff87593227 R11: ffff888019757400 R12: 0000000000000000
[   21.537462] R13: ffff888013948418 R14: ffff88801700fc48 R15: ffffffff83556140
[   21.537714] FS:  0000000000000000(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
[   21.537997] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   21.538203] CR2: 0000000020000080 CR3: 000000000687e000 CR4: 0000000000750ee0
[   21.538455] PKRU: 55555554
[   21.538556] Call Trace:
[   21.538654]  <TASK>
[   21.538735]  ? show_regs+0x6e/0x80
[   21.538867]  ? __warn+0xef/0x340
[   21.538991]  ? report_bug+0x25e/0x4b0
[   21.539130]  ? iommufd_fops_release+0x2a3/0x300
[   21.539299]  ? report_bug+0x2cb/0x4b0
[   21.539440]  ? handle_bug+0x46/0x90
[   21.539572]  ? exc_invalid_op+0x1d/0x50
[   21.539716]  ? asm_exc_invalid_op+0x1f/0x30
[   21.539870]  ? __pfx_iommufd_fops_release+0x10/0x10
[   21.540052]  ? iommufd_fops_release+0x2a3/0x300
[   21.540220]  ? iommufd_fops_release+0x2a3/0x300
[   21.540389]  ? __pfx_iommufd_fops_release+0x10/0x10
[   21.540568]  ? rcu_is_watching+0x19/0xc0
[   21.540716]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   21.540912]  ? __pfx_iommufd_fops_release+0x10/0x10
[   21.541111]  __fput+0x424/0xaf0
[   21.541238]  ____fput+0x1f/0x30
[   21.541359]  task_work_run+0x19d/0x2b0
[   21.541501]  ? __pfx_task_work_run+0x10/0x10
[   21.541660]  ? __sanitizer_cov_trace_const_cmp1+0x1e/0x30
[   21.541857]  ? switch_task_namespaces+0xa9/0xe0
[   21.542026]  do_exit+0xac9/0x2790
[   21.542153]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   21.542378]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   21.542559]  ? __pfx_do_exit+0x10/0x10
[   21.542705]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   21.542902]  ? security_file_ioctl+0x9d/0xd0
[   21.543065]  make_task_dead+0x182/0x3c0
[   21.543209]  rewind_stack_and_make_dead+0x17/0x20
[   21.543384] RIP: 0033:0x7fd39e23ee5d
[   21.543516] Code: Unable to access opcode bytes at 0x7fd39e23ee33.
[   21.543734] RSP: 002b:00007fff90142a68 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   21.544001] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007fd39e23ee5d
[   21.544253] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   21.544504] RBP: 00007fff90142a80 R08: 0000000000000800 R09: 0000000000000800
[   21.544756] R10: 0000000000000000 R11: 0000000000000213 R12: 00007fff90142b98
[   21.545007] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007fd39e5da000
[   21.545264]  </TASK>
[   21.545347] irq event stamp: 0
[   21.545460] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   21.545683] hardirqs last disabled at (0): [<ffffffff8122f2d1>] copy_process+0x1c51/0x7140
[   21.545976] softirqs last  enabled at (0): [<ffffffff8122f312>] copy_process+0x1c92/0x7140
[   21.546268] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   21.546511] ---[ end trace 0000000000000000 ]---
[   21.549238] iommufd_mock iommufd_mock217: Adding to iommu group 217
[   21.549495] iommufd_mock iommufd_mock217: Removing from iommu group 217
[   21.549753] general protection fault, probably for non-canonical address 0xdffffc0000000006: 0000 [#218] PREEMPT SMP KASAN NOPTI
[   21.550166] KASAN: null-ptr-deref in range [0x0000000000000030-0x0000000000000037]
[   21.550440] CPU: 0 PID: 939 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   21.550763] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   21.551182] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   21.551419] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   21.552067] RSP: 0018:ffff888012017ba8 EFLAGS: 00010206
[   21.552257] RAX: dffffc0000000000 RBX: ffff888015a9c000 RCX: 0000000000000000
[   21.552511] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   21.552764] RBP: ffff888012017bc0 R08: 0000000000000001 R09: ffffed100155b11b
[   21.553017] R10: ffff88800aad88df R11: 5f6466756d6d6f69 R12: 0000000000000000
[   21.553270] R13: ffffffff85cc0180 R14: ffff8880247bdf80 R15: ffffffff87070ae0
[   21.553524] FS:  00007f6696865600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   21.553809] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   21.554016] CR2: 0000000020000080 CR3: 0000000012d12000 CR4: 0000000000750ef0
[   21.554271] PKRU: 55555554
[   21.554373] Call Trace:
[   21.554465]  <TASK>
[   21.554547]  ? show_regs+0x6e/0x80
[   21.554685]  ? die_addr+0x45/0xb0
[   21.554848]  ? exc_general_protection+0x159/0x250
[   21.555034]  ? asm_exc_general_protection+0x2b/0x30
[   21.555255]  ? sysfs_remove_link_from_group+0x21/0x90
[   21.555446]  ? sysfs_remove_link_from_group+0x37/0x90
[   21.555634]  ? sysfs_remove_link_from_group+0x21/0x90
[   21.555821]  iommu_device_unlink+0x85/0xd0
[   21.555975]  iommu_deinit_device+0x11f/0x4c0
[   21.556138]  __iommu_group_remove_device+0x26b/0x300
[   21.556325]  iommu_group_remove_device+0x8a/0xb0
[   21.556498]  iommufd_test+0x1f1a/0x2d10
[   21.556642]  ? __pfx_lock_release+0x10/0x10
[   21.556798]  ? __pfx_lock_acquire+0x10/0x10
[   21.556956]  ? __pfx_iommufd_test+0x10/0x10
[   21.557113]  ? __sanitizer_cov_trace_const_cmp8+0x1c/0x30
[   21.557314]  iommufd_fops_ioctl+0x377/0x510
[   21.557472]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   21.557647]  ? trace_hardirqs_on+0x26/0x120
[   21.557806]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   21.558034]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   21.558217]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   21.558415]  ? security_file_ioctl+0x9d/0xd0
[   21.558577]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   21.558756]  __x64_sys_ioctl+0x1b9/0x230
[   21.558919]  do_syscall_64+0x3c/0x90
[   21.559055]  entry_SYSCALL_64_after_hwframe+0x6e/0xd8
[   21.559240] RIP: 0033:0x7f669663ee5d
[   21.559375] Code: ff c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d 93 af 1b 00 f7 d8 64 89 01 48
[   21.560020] RSP: 002b:00007ffea02ea5f8 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   21.560289] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f669663ee5d
[   21.560542] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   21.560795] RBP: 00007ffea02ea610 R08: 0000000000000800 R09: 0000000000000800
[   21.561049] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffea02ea728
[   21.561302] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f66968a6000
[   21.561561]  </TASK>
[   21.561645] Modules linked in:
[   21.561804] ---[ end trace 0000000000000000 ]---
[   21.561973] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   21.562180] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   21.562862] RSP: 0018:ffff88802457fba8 EFLAGS: 00010206
[   21.563068] RAX: dffffc0000000000 RBX: ffff888014f9b000 RCX: 0000000000000000
[   21.563321] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   21.563574] RBP: ffff88802457fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   21.563828] R10: ffff88800aad88df R11: 0000000000000001 R12: 0000000000000000
[   21.564081] R13: ffffffff85cc0180 R14: ffff8880109b6ac0 R15: ffffffff87070ae0
[   21.564335] FS:  00007f6696865600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   21.564620] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   21.564827] CR2: 0000000020000080 CR3: 0000000012d12000 CR4: 0000000000750ef0
[   21.565081] PKRU: 55555554
[   21.565510] ------------[ cut here ]------------
[   21.565680] WARNING: CPU: 0 PID: 939 at drivers/iommu/iommufd/main.c:258 iommufd_fops_release+0x2a3/0x300
[   21.566021] Modules linked in:
[   21.566137] CPU: 0 PID: 939 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   21.566446] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   21.566857] RIP: 0010:iommufd_fops_release+0x2a3/0x300
[   21.567061] Code: 45 d0 65 48 2b 04 25 28 00 00 00 75 54 48 81 c4 88 00 00 00 31 c0 5b 41 5c 41 5d 41 5e 41 5f 5d c3 cc cc cc cc e8 ad 4f 0a fe <0f> 0b eb a6 e8 74 23 67 fe e9 f6 fe ff ff 48 89 85 50 ff ff ff e8
[   21.567708] RSP: 0018:ffff888012017c00 EFLAGS: 00010293
[   21.567898] RAX: 0000000000000000 RBX: ffff88800fe06808 RCX: 0000000000000000
[   21.568150] RDX: ffff8880122b4a00 RSI: ffffffff835563e3 RDI: ffffffff86702b40
[   21.568403] RBP: ffff888012017cb0 R08: 0000000000000000 R09: fffffbfff0eb2644
[   21.568656] R10: ffffffff87593227 R11: ffff888013153600 R12: 0000000000000000
[   21.568908] R13: ffff8880135c4b98 R14: ffff888012017c48 R15: ffffffff83556140
[   21.569161] FS:  0000000000000000(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   21.569446] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   21.569653] CR2: 0000000020000080 CR3: 000000000687e000 CR4: 0000000000750ef0
[   21.569907] PKRU: 55555554
[   21.570008] Call Trace:
[   21.570100]  <TASK>
[   21.570182]  ? show_regs+0x6e/0x80
[   21.570313]  ? __warn+0xef/0x340
[   21.570437]  ? report_bug+0x25e/0x4b0
[   21.570584]  ? iommufd_fops_release+0x2a3/0x300
[   21.570756]  ? report_bug+0x2cb/0x4b0
[   21.570914]  ? handle_bug+0x46/0x90
[   21.571047]  ? exc_invalid_op+0x1d/0x50
[   21.571191]  ? asm_exc_invalid_op+0x1f/0x30
[   21.571346]  ? __pfx_iommufd_fops_release+0x10/0x10
[   21.571528]  ? iommufd_fops_release+0x2a3/0x300
[   21.571697]  ? iommufd_fops_release+0x2a3/0x300
[   21.571868]  ? __pfx_iommufd_fops_release+0x10/0x10
[   21.572047]  ? rcu_is_watching+0x19/0xc0
[   21.572196]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   21.572394]  ? __pfx_iommufd_fops_release+0x10/0x10
[   21.572573]  __fput+0x424/0xaf0
[   21.572698]  ____fput+0x1f/0x30
[   21.572820]  task_work_run+0x19d/0x2b0
[   21.572962]  ? __pfx_task_work_run+0x10/0x10
[   21.573122]  ? __sanitizer_cov_trace_const_cmp1+0x1e/0x30
[   21.573319]  ? switch_task_namespaces+0xa9/0xe0
[   21.573489]  do_exit+0xac9/0x2790
[   21.573617]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   21.573843]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   21.574025]  ? __pfx_do_exit+0x10/0x10
[   21.574166]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   21.574363]  ? security_file_ioctl+0x9d/0xd0
[   21.574525]  make_task_dead+0x182/0x3c0
[   21.574687]  rewind_stack_and_make_dead+0x17/0x20
[   21.574867] RIP: 0033:0x7f669663ee5d
[   21.575001] Code: Unable to access opcode bytes at 0x7f669663ee33.
[   21.575219] RSP: 002b:00007ffea02ea5f8 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   21.575489] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f669663ee5d
[   21.575742] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   21.575995] RBP: 00007ffea02ea610 R08: 0000000000000800 R09: 0000000000000800
[   21.576248] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffea02ea728
[   21.576500] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f66968a6000
[   21.576758]  </TASK>
[   21.576842] irq event stamp: 0
[   21.576956] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   21.577180] hardirqs last disabled at (0): [<ffffffff8122f2d1>] copy_process+0x1c51/0x7140
[   21.577475] softirqs last  enabled at (0): [<ffffffff8122f312>] copy_process+0x1c92/0x7140
[   21.577769] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   21.577992] ---[ end trace 0000000000000000 ]---
[   21.580693] iommufd_mock iommufd_mock218: Adding to iommu group 218
[   21.580950] iommufd_mock iommufd_mock218: Removing from iommu group 218
[   21.581210] general protection fault, probably for non-canonical address 0xdffffc0000000006: 0000 [#219] PREEMPT SMP KASAN NOPTI
[   21.581622] KASAN: null-ptr-deref in range [0x0000000000000030-0x0000000000000037]
[   21.581913] CPU: 0 PID: 940 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   21.582224] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   21.582626] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   21.582847] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   21.583493] RSP: 0018:ffff88802b8e7ba8 EFLAGS: 00010206
[   21.583683] RAX: dffffc0000000000 RBX: ffff888015a99000 RCX: 0000000000000000
[   21.583936] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   21.584189] RBP: ffff88802b8e7bc0 R08: 0000000000000001 R09: ffffed100155b11b
[   21.584442] R10: ffff88800aad88df R11: 5f6466756d6d6f69 R12: 0000000000000000
[   21.584695] R13: ffffffff85cc0180 R14: ffff8880247bd940 R15: ffffffff87070ae0
[   21.584950] FS:  00007fe6f7d87600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   21.585236] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   21.585442] CR2: 0000000020000080 CR3: 0000000012d12000 CR4: 0000000000750ef0
[   21.585696] PKRU: 55555554
[   21.585797] Call Trace:
[   21.585889]  <TASK>
[   21.585971]  ? show_regs+0x6e/0x80
[   21.586105]  ? die_addr+0x45/0xb0
[   21.586235]  ? exc_general_protection+0x159/0x250
[   21.586416]  ? asm_exc_general_protection+0x2b/0x30
[   21.586599]  ? sysfs_remove_link_from_group+0x21/0x90
[   21.586810]  ? sysfs_remove_link_from_group+0x37/0x90
[   21.586998]  ? sysfs_remove_link_from_group+0x21/0x90
[   21.587184]  iommu_device_unlink+0x85/0xd0
[   21.587338]  iommu_deinit_device+0x11f/0x4c0
[   21.587501]  __iommu_group_remove_device+0x26b/0x300
[   21.587687]  iommu_group_remove_device+0x8a/0xb0
[   21.587860]  iommufd_test+0x1f1a/0x2d10
[   21.588003]  ? __pfx_lock_release+0x10/0x10
[   21.588161]  ? __pfx_lock_acquire+0x10/0x10
[   21.588320]  ? __pfx_iommufd_test+0x10/0x10
[   21.588476]  ? __sanitizer_cov_trace_const_cmp8+0x1c/0x30
[   21.588677]  iommufd_fops_ioctl+0x377/0x510
[   21.588835]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   21.589010]  ? trace_hardirqs_on+0x26/0x120
[   21.589169]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   21.589397]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   21.589581]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   21.589780]  ? security_file_ioctl+0x9d/0xd0
[   21.589942]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   21.590118]  __x64_sys_ioctl+0x1b9/0x230
[   21.590265]  do_syscall_64+0x3c/0x90
[   21.590400]  entry_SYSCALL_64_after_hwframe+0x6e/0xd8
[   21.590585] RIP: 0033:0x7fe6f7a3ee5d
[   21.590720] Code: ff c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d 93 af 1b 00 f7 d8 64 89 01 48
[   21.591368] RSP: 002b:00007ffec02f1de8 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   21.591637] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007fe6f7a3ee5d
[   21.591890] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   21.592143] RBP: 00007ffec02f1e00 R08: 0000000000000800 R09: 0000000000000800
[   21.592395] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffec02f1f18
[   21.592648] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007fe6f7dc8000
[   21.592906]  </TASK>
[   21.592990] Modules linked in:
[   21.593266] ---[ end trace 0000000000000000 ]---
[   21.593436] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   21.593644] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   21.594289] RSP: 0018:ffff88802457fba8 EFLAGS: 00010206
[   21.594478] RAX: dffffc0000000000 RBX: ffff888014f9b000 RCX: 0000000000000000
[   21.594760] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   21.595030] RBP: ffff88802457fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   21.595283] R10: ffff88800aad88df R11: 0000000000000001 R12: 0000000000000000
[   21.595640] R13: ffffffff85cc0180 R14: ffff8880109b6ac0 R15: ffffffff87070ae0
[   21.595894] FS:  00007fe6f7d87600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   21.596240] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   21.596447] CR2: 0000000020000080 CR3: 0000000012d12000 CR4: 0000000000750ef0
[   21.596702] PKRU: 55555554
[   21.597135] ------------[ cut here ]------------
[   21.597304] WARNING: CPU: 0 PID: 940 at drivers/iommu/iommufd/main.c:258 iommufd_fops_release+0x2a3/0x300
[   21.597710] Modules linked in:
[   21.597826] CPU: 0 PID: 940 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   21.598151] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   21.598609] RIP: 0010:iommufd_fops_release+0x2a3/0x300
[   21.598861] Code: 45 d0 65 48 2b 04 25 28 00 00 00 75 54 48 81 c4 88 00 00 00 31 c0 5b 41 5c 41 5d 41 5e 41 5f 5d c3 cc cc cc cc e8 ad 4f 0a fe <0f> 0b eb a6 e8 74 23 67 fe e9 f6 fe ff ff 48 89 85 50 ff ff ff e8
[   21.599560] RSP: 0018:ffff88802b8e7c00 EFLAGS: 00010293
[   21.599754] RAX: 0000000000000000 RBX: ffff88800fe06008 RCX: 0000000000000000
[   21.600074] RDX: ffff88801388ca00 RSI: ffffffff835563e3 RDI: ffffffff86702b40
[   21.600333] RBP: ffff88802b8e7cb0 R08: 0000000000000000 R09: fffffbfff0eb2644
[   21.600611] R10: ffffffff87593227 R11: ffff888013216800 R12: 0000000000000000
[   21.600909] R13: ffff8880123d8418 R14: ffff88802b8e7c48 R15: ffffffff83556140
[   21.601185] FS:  0000000000000000(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   21.601516] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   21.601727] CR2: 0000000020000080 CR3: 000000000687e000 CR4: 0000000000750ef0
[   21.601987] PKRU: 55555554
[   21.602091] Call Trace:
[   21.602206]  <TASK>
[   21.602330]  ? show_regs+0x6e/0x80
[   21.602465]  ? __warn+0xef/0x340
[   21.602619]  ? report_bug+0x25e/0x4b0
[   21.602765]  ? iommufd_fops_release+0x2a3/0x300
[   21.602963]  ? report_bug+0x2cb/0x4b0
[   21.603152]  ? handle_bug+0x46/0x90
[   21.603288]  ? exc_invalid_op+0x1d/0x50
[   21.603435]  ? asm_exc_invalid_op+0x1f/0x30
[   21.603594]  ? __pfx_iommufd_fops_release+0x10/0x10
[   21.603829]  ? iommufd_fops_release+0x2a3/0x300
[   21.604001]  ? iommufd_fops_release+0x2a3/0x300
[   21.604176]  ? __pfx_iommufd_fops_release+0x10/0x10
[   21.604418]  ? rcu_is_watching+0x19/0xc0
[   21.604570]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   21.604773]  ? __pfx_iommufd_fops_release+0x10/0x10
[   21.605008]  __fput+0x424/0xaf0
[   21.605138]  ____fput+0x1f/0x30
[   21.605263]  task_work_run+0x19d/0x2b0
[   21.605413]  ? __pfx_task_work_run+0x10/0x10
[   21.605622]  ? __sanitizer_cov_trace_const_cmp1+0x1e/0x30
[   21.605823]  ? switch_task_namespaces+0xa9/0xe0
[   21.606018]  do_exit+0xac9/0x2790
[   21.606171]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   21.606439]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   21.606636]  ? __pfx_do_exit+0x10/0x10
[   21.606833]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   21.607036]  ? security_file_ioctl+0x9d/0xd0
[   21.607202]  make_task_dead+0x182/0x3c0
[   21.607350]  rewind_stack_and_make_dead+0x17/0x20
[   21.607529] RIP: 0033:0x7fe6f7a3ee5d
[   21.607665] Code: Unable to access opcode bytes at 0x7fe6f7a3ee33.
[   21.607948] RSP: 002b:00007ffec02f1de8 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   21.608224] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007fe6f7a3ee5d
[   21.608542] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   21.608801] RBP: 00007ffec02f1e00 R08: 0000000000000800 R09: 0000000000000800
[   21.609112] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffec02f1f18
[   21.609370] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007fe6f7dc8000
[   21.609690]  </TASK>
[   21.609777] irq event stamp: 0
[   21.609893] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   21.610130] hardirqs last disabled at (0): [<ffffffff8122f2d1>] copy_process+0x1c51/0x7140
[   21.610483] softirqs last  enabled at (0): [<ffffffff8122f312>] copy_process+0x1c92/0x7140
[   21.610834] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   21.611063] ---[ end trace 0000000000000000 ]---
[   21.613883] iommufd_mock iommufd_mock219: Adding to iommu group 219
[   21.614134] iommufd_mock iommufd_mock219: Removing from iommu group 219
[   21.614395] general protection fault, probably for non-canonical address 0xdffffc0000000006: 0000 [#220] PREEMPT SMP KASAN NOPTI
[   21.614856] KASAN: null-ptr-deref in range [0x0000000000000030-0x0000000000000037]
[   21.615130] CPU: 0 PID: 941 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   21.615445] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   21.615853] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   21.616067] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   21.616728] RSP: 0018:ffff888012017ba8 EFLAGS: 00010206
[   21.616922] RAX: dffffc0000000000 RBX: ffff888015a9b000 RCX: 0000000000000000
[   21.617181] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   21.617442] RBP: ffff888012017bc0 R08: 0000000000000001 R09: ffffed100155b11b
[   21.617695] R10: ffff88800aad88df R11: 5f6466756d6d6f69 R12: 0000000000000000
[   21.617948] R13: ffffffff85cc0180 R14: ffff8880247bd780 R15: ffffffff87070ae0
[   21.618202] FS:  00007fbb41dee600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   21.618487] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   21.618699] CR2: 0000000020000080 CR3: 000000002132e000 CR4: 0000000000750ef0
[   21.618962] PKRU: 55555554
[   21.619064] Call Trace:
[   21.619156]  <TASK>
[   21.619237]  ? show_regs+0x6e/0x80
[   21.619371]  ? die_addr+0x45/0xb0
[   21.619502]  ? exc_general_protection+0x159/0x250
[   21.619683]  ? asm_exc_general_protection+0x2b/0x30
[   21.619867]  ? sysfs_remove_link_from_group+0x21/0x90
[   21.620055]  ? sysfs_remove_link_from_group+0x37/0x90
[   21.620242]  ? sysfs_remove_link_from_group+0x21/0x90
[   21.620430]  iommu_device_unlink+0x85/0xd0
[   21.620585]  iommu_deinit_device+0x11f/0x4c0
[   21.620747]  __iommu_group_remove_device+0x26b/0x300
[   21.620934]  iommu_group_remove_device+0x8a/0xb0
[   21.621108]  iommufd_test+0x1f1a/0x2d10
[   21.621251]  ? __pfx_lock_release+0x10/0x10
[   21.621409]  ? __pfx_lock_acquire+0x10/0x10
[   21.621569]  ? __pfx_iommufd_test+0x10/0x10
[   21.621727]  ? __sanitizer_cov_trace_const_cmp8+0x1c/0x30
[   21.621928]  iommufd_fops_ioctl+0x377/0x510
[   21.622086]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   21.622262]  ? trace_hardirqs_on+0x26/0x120
[   21.622421]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   21.622654]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   21.622846]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   21.623046]  ? security_file_ioctl+0x9d/0xd0
[   21.623209]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   21.623385]  __x64_sys_ioctl+0x1b9/0x230
[   21.623532]  do_syscall_64+0x3c/0x90
[   21.623667]  entry_SYSCALL_64_after_hwframe+0x6e/0xd8
[   21.623853] RIP: 0033:0x7fbb41a3ee5d
[   21.623987] Code: ff c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d 93 af 1b 00 f7 d8 64 89 01 48
[   21.624633] RSP: 002b:00007ffdfebf7648 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   21.624904] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007fbb41a3ee5d
[   21.625158] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   21.625410] RBP: 00007ffdfebf7660 R08: 0000000000000800 R09: 0000000000000800
[   21.625664] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffdfebf7778
[   21.625917] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007fbb41e2f000
[   21.626176]  </TASK>
[   21.626260] Modules linked in:
[   21.626444] ---[ end trace 0000000000000000 ]---
[   21.626722] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   21.626939] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   21.627601] RSP: 0018:ffff88802457fba8 EFLAGS: 00010206
[   21.627812] RAX: dffffc0000000000 RBX: ffff888014f9b000 RCX: 0000000000000000
[   21.628071] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   21.628357] RBP: ffff88802457fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   21.628665] R10: ffff88800aad88df R11: 0000000000000001 R12: 0000000000000000
[   21.628929] R13: ffffffff85cc0180 R14: ffff8880109b6ac0 R15: ffffffff87070ae0
[   21.629241] FS:  00007fbb41dee600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   21.629536] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   21.629798] CR2: 0000000020000080 CR3: 000000002132e000 CR4: 0000000000750ef0
[   21.630058] PKRU: 55555554
[   21.630462] ------------[ cut here ]------------
[   21.630646] WARNING: CPU: 0 PID: 941 at drivers/iommu/iommufd/main.c:258 iommufd_fops_release+0x2a3/0x300
[   21.631009] Modules linked in:
[   21.631182] CPU: 0 PID: 941 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   21.631497] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   21.631965] RIP: 0010:iommufd_fops_release+0x2a3/0x300
[   21.632159] Code: 45 d0 65 48 2b 04 25 28 00 00 00 75 54 48 81 c4 88 00 00 00 31 c0 5b 41 5c 41 5d 41 5e 41 5f 5d c3 cc cc cc cc e8 ad 4f 0a fe <0f> 0b eb a6 e8 74 23 67 fe e9 f6 fe ff ff 48 89 85 50 ff ff ff e8
[   21.632882] RSP: 0018:ffff888012017c00 EFLAGS: 00010293
[   21.633139] RAX: 0000000000000000 RBX: ffff88800fe06608 RCX: 0000000000000000
[   21.633398] RDX: ffff8880138b4a00 RSI: ffffffff835563e3 RDI: ffffffff86702b40
[   21.633718] RBP: ffff888012017cb0 R08: 0000000000000000 R09: fffffbfff0eb2644
[   21.633978] R10: ffffffff87593227 R11: ffff888012c03200 R12: 0000000000000000
[   21.634258] R13: ffff8880123d8698 R14: ffff888012017c48 R15: ffffffff83556140
[   21.634559] FS:  0000000000000000(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   21.634886] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   21.635124] CR2: 0000000020000080 CR3: 000000000687e000 CR4: 0000000000750ef0
[   21.635385] PKRU: 55555554
[   21.635489] Call Trace:
[   21.635583]  <TASK>
[   21.635671]  ? show_regs+0x6e/0x80
[   21.635864]  ? __warn+0xef/0x340
[   21.635992]  ? report_bug+0x25e/0x4b0
[   21.636135]  ? iommufd_fops_release+0x2a3/0x300
[   21.636312]  ? report_bug+0x2cb/0x4b0
[   21.636513]  ? handle_bug+0x46/0x90
[   21.636649]  ? exc_invalid_op+0x1d/0x50
[   21.636796]  ? asm_exc_invalid_op+0x1f/0x30
[   21.636974]  ? __pfx_iommufd_fops_release+0x10/0x10
[   21.637204]  ? iommufd_fops_release+0x2a3/0x300
[   21.637377]  ? iommufd_fops_release+0x2a3/0x300
[   21.637570]  ? __pfx_iommufd_fops_release+0x10/0x10
[   21.637794]  ? rcu_is_watching+0x19/0xc0
[   21.637947]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   21.638161]  ? __pfx_iommufd_fops_release+0x10/0x10
[   21.638388]  __fput+0x424/0xaf0
[   21.638516]  ____fput+0x1f/0x30
[   21.638650]  task_work_run+0x19d/0x2b0
[   21.638799]  ? __pfx_task_work_run+0x10/0x10
[   21.638963]  ? __sanitizer_cov_trace_const_cmp1+0x1e/0x30
[   21.639183]  ? switch_task_namespaces+0xa9/0xe0
[   21.639400]  do_exit+0xac9/0x2790
[   21.639531]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   21.639779]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   21.640007]  ? __pfx_do_exit+0x10/0x10
[   21.640152]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   21.640359]  ? security_file_ioctl+0x9d/0xd0
[   21.640577]  make_task_dead+0x182/0x3c0
[   21.640727]  rewind_stack_and_make_dead+0x17/0x20
[   21.640906] RIP: 0033:0x7fbb41a3ee5d
[   21.641106] Code: Unable to access opcode bytes at 0x7fbb41a3ee33.
[   21.641356] RSP: 002b:00007ffdfebf7648 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   21.641692] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007fbb41a3ee5d
[   21.641951] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   21.642220] RBP: 00007ffdfebf7660 R08: 0000000000000800 R09: 0000000000000800
[   21.642535] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffdfebf7778
[   21.642816] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007fbb41e2f000
[   21.643118]  </TASK>
[   21.643205] irq event stamp: 0
[   21.643321] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   21.643551] hardirqs last disabled at (0): [<ffffffff8122f2d1>] copy_process+0x1c51/0x7140
[   21.643915] softirqs last  enabled at (0): [<ffffffff8122f312>] copy_process+0x1c92/0x7140
[   21.644217] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   21.644460] ---[ end trace 0000000000000000 ]---
[   21.647262] iommufd_mock iommufd_mock220: Adding to iommu group 220
[   21.647527] iommufd_mock iommufd_mock220: Removing from iommu group 220
[   21.647790] general protection fault, probably for non-canonical address 0xdffffc0000000006: 0000 [#221] PREEMPT SMP KASAN NOPTI
[   21.648218] KASAN: null-ptr-deref in range [0x0000000000000030-0x0000000000000037]
[   21.648510] CPU: 0 PID: 942 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   21.648825] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   21.649233] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   21.649448] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   21.650109] RSP: 0018:ffff8880231bfba8 EFLAGS: 00010206
[   21.650304] RAX: dffffc0000000000 RBX: ffff888015a9a000 RCX: 0000000000000000
[   21.650563] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   21.650827] RBP: ffff8880231bfbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   21.651086] R10: ffff88800aad88df R11: 5f6466756d6d6f69 R12: 0000000000000000
[   21.651345] R13: ffffffff85cc0180 R14: ffff8880247bdbc0 R15: ffffffff87070ae0
[   21.651604] FS:  00007f8adda46600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   21.651896] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   21.652108] CR2: 0000000020000080 CR3: 0000000012d12000 CR4: 0000000000750ef0
[   21.652368] PKRU: 55555554
[   21.652472] Call Trace:
[   21.652566]  <TASK>
[   21.652650]  ? show_regs+0x6e/0x80
[   21.652786]  ? die_addr+0x45/0xb0
[   21.652920]  ? exc_general_protection+0x159/0x250
[   21.653104]  ? asm_exc_general_protection+0x2b/0x30
[   21.653292]  ? sysfs_remove_link_from_group+0x21/0x90
[   21.653484]  ? sysfs_remove_link_from_group+0x37/0x90
[   21.653675]  ? sysfs_remove_link_from_group+0x21/0x90
[   21.653867]  iommu_device_unlink+0x85/0xd0
[   21.654024]  iommu_deinit_device+0x11f/0x4c0
[   21.654191]  __iommu_group_remove_device+0x26b/0x300
[   21.654382]  iommu_group_remove_device+0x8a/0xb0
[   21.654559]  iommufd_test+0x1f1a/0x2d10
[   21.654706]  ? __pfx_lock_release+0x10/0x10
[   21.654900]  ? __pfx_lock_acquire+0x10/0x10
[   21.655067]  ? __pfx_iommufd_test+0x10/0x10
[   21.655224]  ? __sanitizer_cov_trace_const_cmp8+0x1c/0x30
[   21.655425]  iommufd_fops_ioctl+0x377/0x510
[   21.655583]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   21.655758]  ? trace_hardirqs_on+0x26/0x120
[   21.655918]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   21.656147]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   21.656330]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   21.656529]  ? security_file_ioctl+0x9d/0xd0
[   21.656692]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   21.656868]  __x64_sys_ioctl+0x1b9/0x230
[   21.657016]  do_syscall_64+0x3c/0x90
[   21.657151]  entry_SYSCALL_64_after_hwframe+0x6e/0xd8
[   21.657337] RIP: 0033:0x7f8add83ee5d
[   21.657471] Code: ff c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d 93 af 1b 00 f7 d8 64 89 01 48
[   21.658117] RSP: 002b:00007ffc8ad89458 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   21.658387] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f8add83ee5d
[   21.658641] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   21.658903] RBP: 00007ffc8ad89470 R08: 0000000000000800 R09: 0000000000000800
[   21.659156] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffc8ad89588
[   21.659409] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f8adda87000
[   21.659668]  </TASK>
[   21.659752] Modules linked in:
[   21.660015] ---[ end trace 0000000000000000 ]---
[   21.660188] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   21.660401] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   21.661061] RSP: 0018:ffff88802457fba8 EFLAGS: 00010206
[   21.661254] RAX: dffffc0000000000 RBX: ffff888014f9b000 RCX: 0000000000000000
[   21.661520] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   21.661852] RBP: ffff88802457fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   21.662111] R10: ffff88800aad88df R11: 0000000000000001 R12: 0000000000000000
[   21.662428] R13: ffffffff85cc0180 R14: ffff8880109b6ac0 R15: ffffffff87070ae0
[   21.662700] FS:  00007f8adda46600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   21.662997] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   21.663273] CR2: 0000000020000080 CR3: 0000000012d12000 CR4: 0000000000750ef0
[   21.663534] PKRU: 55555554
[   21.663940] ------------[ cut here ]------------
[   21.664112] WARNING: CPU: 0 PID: 942 at drivers/iommu/iommufd/main.c:258 iommufd_fops_release+0x2a3/0x300
[   21.664522] Modules linked in:
[   21.664640] CPU: 0 PID: 942 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   21.665017] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   21.665425] RIP: 0010:iommufd_fops_release+0x2a3/0x300
[   21.665676] Code: 45 d0 65 48 2b 04 25 28 00 00 00 75 54 48 81 c4 88 00 00 00 31 c0 5b 41 5c 41 5d 41 5e 41 5f 5d c3 cc cc cc cc e8 ad 4f 0a fe <0f> 0b eb a6 e8 74 23 67 fe e9 f6 fe ff ff 48 89 85 50 ff ff ff e8
[   21.666392] RSP: 0018:ffff8880231bfc00 EFLAGS: 00010293
[   21.666597] RAX: 0000000000000000 RBX: ffff88800fe06e08 RCX: 0000000000000000
[   21.666859] RDX: ffff88801475a500 RSI: ffffffff835563e3 RDI: ffffffff86702b40
[   21.667167] RBP: ffff8880231bfcb0 R08: 0000000000000000 R09: fffffbfff0eb2644
[   21.667428] R10: ffffffff87593227 R11: ffff8880111ef200 R12: 0000000000000000
[   21.667748] R13: ffff888020a59a98 R14: ffff8880231bfc48 R15: ffffffff83556140
[   21.668007] FS:  0000000000000000(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   21.668357] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   21.668569] CR2: 0000000020000080 CR3: 000000000687e000 CR4: 0000000000750ef0
[   21.668847] PKRU: 55555554
[   21.668992] Call Trace:
[   21.669086]  <TASK>
[   21.669169]  ? show_regs+0x6e/0x80
[   21.669304]  ? __warn+0xef/0x340
[   21.669454]  ? report_bug+0x25e/0x4b0
[   21.669620]  ? iommufd_fops_release+0x2a3/0x300
[   21.669793]  ? report_bug+0x2cb/0x4b0
[   21.669943]  ? handle_bug+0x46/0x90
[   21.670132]  ? exc_invalid_op+0x1d/0x50
[   21.670280]  ? asm_exc_invalid_op+0x1f/0x30
[   21.670438]  ? __pfx_iommufd_fops_release+0x10/0x10
[   21.670632]  ? iommufd_fops_release+0x2a3/0x300
[   21.670861]  ? iommufd_fops_release+0x2a3/0x300
[   21.671037]  ? __pfx_iommufd_fops_release+0x10/0x10
[   21.671150] systemd-journald[136]: Data hash table of /run/log/journal/938775788448454bb5b34822d5730c41/system.journal has a fill level at 75.0 (5446 of 7260 items, 4182016 file size, 767 bytes per hash table item), suggesting rotation.
[   21.671220]  ? rcu_is_watching+0x19/0xc0
[   21.671979] systemd-journald[136]: /run/log/journal/938775788448454bb5b34822d5730c41/system.journal: Journal header limits reached or header out-of-date, rotating.
[   21.672118]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   21.672832]  ? __pfx_iommufd_fops_release+0x10/0x10
[   21.673016]  __fput+0x424/0xaf0
[   21.673145]  ____fput+0x1f/0x30
[   21.673270]  task_work_run+0x19d/0x2b0
[   21.673416]  ? __pfx_task_work_run+0x10/0x10
[   21.673579]  ? __sanitizer_cov_trace_const_cmp1+0x1e/0x30
[   21.673781]  ? switch_task_namespaces+0xa9/0xe0
[   21.673955]  do_exit+0xac9/0x2790
[   21.674086]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   21.674317]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   21.674503]  ? __pfx_do_exit+0x10/0x10
[   21.674653]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   21.674857]  ? security_file_ioctl+0x9d/0xd0
[   21.675023]  make_task_dead+0x182/0x3c0
[   21.675172]  rewind_stack_and_make_dead+0x17/0x20
[   21.675351] RIP: 0033:0x7f8add83ee5d
[   21.675488] Code: Unable to access opcode bytes at 0x7f8add83ee33.
[   21.675712] RSP: 002b:00007ffc8ad89458 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   21.675988] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f8add83ee5d
[   21.676247] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   21.676506] RBP: 00007ffc8ad89470 R08: 0000000000000800 R09: 0000000000000800
[   21.676764] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffc8ad89588
[   21.677044] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f8adda87000
[   21.677348]  </TASK>
[   21.677435] irq event stamp: 0
[   21.677551] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   21.677842] hardirqs last disabled at (0): [<ffffffff8122f2d1>] copy_process+0x1c51/0x7140
[   21.678143] softirqs last  enabled at (0): [<ffffffff8122f312>] copy_process+0x1c92/0x7140
[   21.678492] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   21.678729] ---[ end trace 0000000000000000 ]---
[   21.682079] iommufd_mock iommufd_mock221: Adding to iommu group 221
[   21.682397] iommufd_mock iommufd_mock221: Removing from iommu group 221
[   21.682676] general protection fault, probably for non-canonical address 0xdffffc0000000006: 0000 [#222] PREEMPT SMP KASAN NOPTI
[   21.683095] KASAN: null-ptr-deref in range [0x0000000000000030-0x0000000000000037]
[   21.683369] CPU: 0 PID: 944 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   21.683684] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   21.684091] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   21.684305] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   21.684964] RSP: 0018:ffff88802b8e7ba8 EFLAGS: 00010206
[   21.685158] RAX: dffffc0000000000 RBX: ffff888015a98000 RCX: 0000000000000000
[   21.685416] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   21.685674] RBP: ffff88802b8e7bc0 R08: 0000000000000001 R09: ffffed100155b11b
[   21.685932] R10: ffff88800aad88df R11: 5f6466756d6d6f69 R12: 0000000000000000
[   21.686190] R13: ffffffff85cc0180 R14: ffff8880247bdd60 R15: ffffffff87070ae0
[   21.686449] FS:  00007f259b336600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   21.686743] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   21.686959] CR2: 0000000020000080 CR3: 000000002132e000 CR4: 0000000000750ef0
[   21.687245] PKRU: 55555554
[   21.687362] Call Trace:
[   21.687456]  <TASK>
[   21.687539]  ? show_regs+0x6e/0x80
[   21.687676]  ? die_addr+0x45/0xb0
[   21.687809]  ? exc_general_protection+0x159/0x250
[   21.687993]  ? asm_exc_general_protection+0x2b/0x30
[   21.688180]  ? sysfs_remove_link_from_group+0x21/0x90
[   21.688371]  ? sysfs_remove_link_from_group+0x37/0x90
[   21.688562]  ? sysfs_remove_link_from_group+0x21/0x90
[   21.688754]  iommu_device_unlink+0x85/0xd0
[   21.688911]  iommu_deinit_device+0x11f/0x4c0
[   21.689077]  __iommu_group_remove_device+0x26b/0x300
[   21.689267]  iommu_group_remove_device+0x8a/0xb0
[   21.689445]  iommufd_test+0x1f1a/0x2d10
[   21.689591]  ? __pfx_lock_release+0x10/0x10
[   21.689751]  ? __pfx_lock_acquire+0x10/0x10
[   21.689913]  ? __pfx_iommufd_test+0x10/0x10
[   21.690073]  ? __sanitizer_cov_trace_const_cmp8+0x1c/0x30
[   21.690278]  iommufd_fops_ioctl+0x377/0x510
[   21.690439]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   21.690618]  ? trace_hardirqs_on+0x26/0x120
[   21.690785]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   21.691019]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   21.691206]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   21.691409]  ? security_file_ioctl+0x9d/0xd0
[   21.691575]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   21.691754]  __x64_sys_ioctl+0x1b9/0x230
[   21.691905]  do_syscall_64+0x3c/0x90
[   21.692043]  entry_SYSCALL_64_after_hwframe+0x6e/0xd8
[   21.692232] RIP: 0033:0x7f259b03ee5d
[   21.692369] Code: ff c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d 93 af 1b 00 f7 d8 64 89 01 48
[   21.693029] RSP: 002b:00007ffe3433bd18 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   21.693305] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f259b03ee5d
[   21.693563] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   21.693821] RBP: 00007ffe3433bd30 R08: 0000000000000800 R09: 0000000000000800
[   21.694079] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffe3433be48
[   21.694338] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f259b377000
[   21.694602]  </TASK>
[   21.694687] Modules linked in:
[   21.694923] ---[ end trace 0000000000000000 ]---
[   21.695163] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   21.695377] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   21.696035] RSP: 0018:ffff88802457fba8 EFLAGS: 00010206
[   21.696228] RAX: dffffc0000000000 RBX: ffff888014f9b000 RCX: 0000000000000000
[   21.696496] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   21.696805] RBP: ffff88802457fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   21.697064] R10: ffff88800aad88df R11: 0000000000000001 R12: 0000000000000000
[   21.697376] R13: ffffffff85cc0180 R14: ffff8880109b6ac0 R15: ffffffff87070ae0
[   21.697635] FS:  00007f259b336600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   21.697988] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   21.698199] CR2: 0000000020000080 CR3: 000000002132e000 CR4: 0000000000750ef0
[   21.698520] PKRU: 55555554
[   21.698917] ------------[ cut here ]------------
[   21.699155] WARNING: CPU: 0 PID: 944 at drivers/iommu/iommufd/main.c:258 iommufd_fops_release+0x2a3/0x300
[   21.699504] Modules linked in:
[   21.699622] CPU: 0 PID: 944 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   21.699996] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   21.700410] RIP: 0010:iommufd_fops_release+0x2a3/0x300
[   21.700644] Code: 45 d0 65 48 2b 04 25 28 00 00 00 75 54 48 81 c4 88 00 00 00 31 c0 5b 41 5c 41 5d 41 5e 41 5f 5d c3 cc cc cc cc e8 ad 4f 0a fe <0f> 0b eb a6 e8 74 23 67 fe e9 f6 fe ff ff 48 89 85 50 ff ff ff e8
[   21.701364] RSP: 0018:ffff88802b8e7c00 EFLAGS: 00010293
[   21.701558] RAX: 0000000000000000 RBX: ffff88800fe06508 RCX: 0000000000000000
[   21.701874] RDX: ffff888014758000 RSI: ffffffff835563e3 RDI: ffffffff86702b40
[   21.702132] RBP: ffff88802b8e7cb0 R08: 0000000000000000 R09: fffffbfff0eb2644
[   21.702434] R10: ffffffff87593227 R11: ffff8880111eaa00 R12: 0000000000000000
[   21.702702] R13: ffff888020a59318 R14: ffff88802b8e7c48 R15: ffffffff83556140
[   21.702964] FS:  0000000000000000(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   21.703255] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   21.703520] CR2: 0000000020000080 CR3: 000000000687e000 CR4: 0000000000750ef0
[   21.703779] PKRU: 55555554
[   21.703883] Call Trace:
[   21.703977]  <TASK>
[   21.704059]  ? show_regs+0x6e/0x80
[   21.704193]  ? __warn+0xef/0x340
[   21.704321]  ? report_bug+0x25e/0x4b0
[   21.704464]  ? iommufd_fops_release+0x2a3/0x300
[   21.704636]  ? report_bug+0x2cb/0x4b0
[   21.704781]  ? handle_bug+0x46/0x90
[   21.704916]  ? exc_invalid_op+0x1d/0x50
[   21.705063]  ? asm_exc_invalid_op+0x1f/0x30
[   21.705221]  ? __pfx_iommufd_fops_release+0x10/0x10
[   21.705407]  ? iommufd_fops_release+0x2a3/0x300
[   21.705579]  ? iommufd_fops_release+0x2a3/0x300
[   21.705753]  ? __pfx_iommufd_fops_release+0x10/0x10
[   21.705954]  ? rcu_is_watching+0x19/0xc0
[   21.706149]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   21.706353]  ? __pfx_iommufd_fops_release+0x10/0x10
[   21.706553]  __fput+0x424/0xaf0
[   21.706732]  ____fput+0x1f/0x30
[   21.706868]  task_work_run+0x19d/0x2b0
[   21.707016]  ? __pfx_task_work_run+0x10/0x10
[   21.707179]  ? __sanitizer_cov_trace_const_cmp1+0x1e/0x30
[   21.707381]  ? switch_task_namespaces+0xa9/0xe0
[   21.707555]  do_exit+0xac9/0x2790
[   21.707691]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   21.707977]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   21.708162]  ? __pfx_do_exit+0x10/0x10
[   21.708313]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   21.708566]  ? security_file_ioctl+0x9d/0xd0
[   21.708733]  make_task_dead+0x182/0x3c0
[   21.708885]  rewind_stack_and_make_dead+0x17/0x20
[   21.709119] RIP: 0033:0x7f259b03ee5d
[   21.709256] Code: Unable to access opcode bytes at 0x7f259b03ee33.
[   21.709479] RSP: 002b:00007ffe3433bd18 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   21.709814] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f259b03ee5d
[   21.710073] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   21.710393] RBP: 00007ffe3433bd30 R08: 0000000000000800 R09: 0000000000000800
[   21.710661] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffe3433be48
[   21.710981] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f259b377000
[   21.711245]  </TASK>
[   21.711330] irq event stamp: 0
[   21.711447] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   21.711680] hardirqs last disabled at (0): [<ffffffff8122f2d1>] copy_process+0x1c51/0x7140
[   21.712033] softirqs last  enabled at (0): [<ffffffff8122f312>] copy_process+0x1c92/0x7140
[   21.712352] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   21.712615] ---[ end trace 0000000000000000 ]---
[   21.715979] iommufd_mock iommufd_mock222: Adding to iommu group 222
[   21.716256] iommufd_mock iommufd_mock222: Removing from iommu group 222
[   21.716563] general protection fault, probably for non-canonical address 0xdffffc0000000006: 0000 [#223] PREEMPT SMP KASAN NOPTI
[   21.717018] KASAN: null-ptr-deref in range [0x0000000000000030-0x0000000000000037]
[   21.717292] CPU: 0 PID: 945 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   21.717607] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   21.718015] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   21.718230] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   21.718895] RSP: 0018:ffff888012017ba8 EFLAGS: 00010206
[   21.719088] RAX: dffffc0000000000 RBX: ffff88800bb1f000 RCX: 0000000000000000
[   21.719341] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   21.719594] RBP: ffff888012017bc0 R08: 0000000000000001 R09: ffffed100155b11b
[   21.719848] R10: ffff88800aad88df R11: 5f6466756d6d6f69 R12: 0000000000000000
[   21.720101] R13: ffffffff85cc0180 R14: ffff8880247bd000 R15: ffffffff87070ae0
[   21.720355] FS:  00007fdacb0b3600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   21.720642] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   21.720848] CR2: 0000000020000080 CR3: 00000000203dc000 CR4: 0000000000750ef0
[   21.721103] PKRU: 55555554
[   21.721205] Call Trace:
[   21.721297]  <TASK>
[   21.721379]  ? show_regs+0x6e/0x80
[   21.721515]  ? die_addr+0x45/0xb0
[   21.721647]  ? exc_general_protection+0x159/0x250
[   21.721829]  ? asm_exc_general_protection+0x2b/0x30
[   21.722013]  ? sysfs_remove_link_from_group+0x21/0x90
[   21.722201]  ? sysfs_remove_link_from_group+0x37/0x90
[   21.722392]  ? sysfs_remove_link_from_group+0x21/0x90
[   21.722580]  iommu_device_unlink+0x85/0xd0
[   21.722738]  iommu_deinit_device+0x11f/0x4c0
[   21.722910]  __iommu_group_remove_device+0x26b/0x300
[   21.723099]  iommu_group_remove_device+0x8a/0xb0
[   21.723273]  iommufd_test+0x1f1a/0x2d10
[   21.723416]  ? __pfx_lock_release+0x10/0x10
[   21.723573]  ? __pfx_lock_acquire+0x10/0x10
[   21.723732]  ? __pfx_iommufd_test+0x10/0x10
[   21.723890]  ? __sanitizer_cov_trace_const_cmp8+0x1c/0x30
[   21.724091]  iommufd_fops_ioctl+0x377/0x510
[   21.724249]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   21.724425]  ? trace_hardirqs_on+0x26/0x120
[   21.724584]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   21.724813]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   21.724996]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   21.725195]  ? security_file_ioctl+0x9d/0xd0
[   21.725358]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   21.725534]  __x64_sys_ioctl+0x1b9/0x230
[   21.725682]  do_syscall_64+0x3c/0x90
[   21.725817]  entry_SYSCALL_64_after_hwframe+0x6e/0xd8
[   21.726003] RIP: 0033:0x7fdacae3ee5d
[   21.726137] Code: ff c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d 93 af 1b 00 f7 d8 64 89 01 48
[   21.726801] RSP: 002b:00007ffc272dc5c8 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   21.727070] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007fdacae3ee5d
[   21.727323] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   21.727576] RBP: 00007ffc272dc5e0 R08: 0000000000000800 R09: 0000000000000800
[   21.727830] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffc272dc6f8
[   21.728083] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007fdacb0f4000
[   21.728341]  </TASK>
[   21.728425] Modules linked in:
[   21.728739] ---[ end trace 0000000000000000 ]---
[   21.728912] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   21.729125] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   21.729785] RSP: 0018:ffff88802457fba8 EFLAGS: 00010206
[   21.729978] RAX: dffffc0000000000 RBX: ffff888014f9b000 RCX: 0000000000000000
[   21.730248] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   21.730570] RBP: ffff88802457fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   21.730846] R10: ffff88800aad88df R11: 0000000000000001 R12: 0000000000000000
[   21.731162] R13: ffffffff85cc0180 R14: ffff8880109b6ac0 R15: ffffffff87070ae0
[   21.731421] FS:  00007fdacb0b3600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   21.731734] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   21.731985] CR2: 0000000020000080 CR3: 00000000203dc000 CR4: 0000000000750ef0
[   21.732249] PKRU: 55555554
[   21.732668] ------------[ cut here ]------------
[   21.732849] WARNING: CPU: 0 PID: 945 at drivers/iommu/iommufd/main.c:258 iommufd_fops_release+0x2a3/0x300
[   21.733257] Modules linked in:
[   21.733375] CPU: 0 PID: 945 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   21.733750] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   21.734216] RIP: 0010:iommufd_fops_release+0x2a3/0x300
[   21.734410] Code: 45 d0 65 48 2b 04 25 28 00 00 00 75 54 48 81 c4 88 00 00 00 31 c0 5b 41 5c 41 5d 41 5e 41 5f 5d c3 cc cc cc cc e8 ad 4f 0a fe <0f> 0b eb a6 e8 74 23 67 fe e9 f6 fe ff ff 48 89 85 50 ff ff ff e8
[   21.735216] RSP: 0018:ffff888012017c00 EFLAGS: 00010293
[   21.735412] RAX: 0000000000000000 RBX: ffff88800fe06708 RCX: 0000000000000000
[   21.735671] RDX: ffff88800ececa00 RSI: ffffffff835563e3 RDI: ffffffff86702b40
[   21.735933] RBP: ffff888012017cb0 R08: 0000000000000000 R09: fffffbfff0eb2644
[   21.736256] R10: ffffffff87593227 R11: ffff888011a39000 R12: 0000000000000000
[   21.736515] R13: ffff888012da1598 R14: ffff888012017c48 R15: ffffffff83556140
[   21.736836] FS:  0000000000000000(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   21.737128] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   21.737400] CR2: 0000000020000080 CR3: 000000000687e000 CR4: 0000000000750ef0
[   21.737660] PKRU: 55555554
[   21.737764] Call Trace:
[   21.737858]  <TASK>
[   21.737957]  ? show_regs+0x6e/0x80
[   21.738145]  ? __warn+0xef/0x340
[   21.738275]  ? report_bug+0x25e/0x4b0
[   21.738418]  ? iommufd_fops_release+0x2a3/0x300
[   21.738663]  ? report_bug+0x2cb/0x4b0
[   21.738811]  ? handle_bug+0x46/0x90
[   21.738946]  ? exc_invalid_op+0x1d/0x50
[   21.739094]  ? asm_exc_invalid_op+0x1f/0x30
[   21.739252]  ? __pfx_iommufd_fops_release+0x10/0x10
[   21.739447]  ? iommufd_fops_release+0x2a3/0x300
[   21.739669]  ? iommufd_fops_release+0x2a3/0x300
[   21.739844]  ? __pfx_iommufd_fops_release+0x10/0x10
[   21.740028]  ? rcu_is_watching+0x19/0xc0
[   21.740200]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   21.740446]  ? __pfx_iommufd_fops_release+0x10/0x10
[   21.740630]  __fput+0x424/0xaf0
[   21.740767]  ____fput+0x1f/0x30
[   21.740926]  task_work_run+0x19d/0x2b0
[   21.741073]  ? __pfx_task_work_run+0x10/0x10
[   21.741236]  ? __sanitizer_cov_trace_const_cmp1+0x1e/0x30
[   21.741498]  ? switch_task_namespaces+0xa9/0xe0
[   21.741677]  do_exit+0xac9/0x2790
[   21.741807]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   21.742039]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   21.742225]  ? __pfx_do_exit+0x10/0x10
[   21.742369]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   21.742571]  ? security_file_ioctl+0x9d/0xd0
[   21.742751]  make_task_dead+0x182/0x3c0
[   21.742900]  rewind_stack_and_make_dead+0x17/0x20
[   21.743079] RIP: 0033:0x7fdacae3ee5d
[   21.743216] Code: Unable to access opcode bytes at 0x7fdacae3ee33.
[   21.743440] RSP: 002b:00007ffc272dc5c8 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   21.743805] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007fdacae3ee5d
[   21.744065] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   21.744323] RBP: 00007ffc272dc5e0 R08: 0000000000000800 R09: 0000000000000800
[   21.744581] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffc272dc6f8
[   21.744840] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007fdacb0f4000
[   21.745105]  </TASK>
[   21.745191] irq event stamp: 0
[   21.745307] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   21.745536] hardirqs last disabled at (0): [<ffffffff8122f2d1>] copy_process+0x1c51/0x7140
[   21.745836] softirqs last  enabled at (0): [<ffffffff8122f312>] copy_process+0x1c92/0x7140
[   21.746136] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   21.746364] ---[ end trace 0000000000000000 ]---
[   21.749787] iommufd_mock iommufd_mock223: Adding to iommu group 223
[   21.750059] iommufd_mock iommufd_mock223: Removing from iommu group 223
[   21.750392] general protection fault, probably for non-canonical address 0xdffffc0000000006: 0000 [#224] PREEMPT SMP KASAN NOPTI
[   21.750817] KASAN: null-ptr-deref in range [0x0000000000000030-0x0000000000000037]
[   21.751112] CPU: 0 PID: 946 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   21.751427] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   21.751834] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   21.752049] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   21.752708] RSP: 0018:ffff88802b8e7ba8 EFLAGS: 00010206
[   21.752901] RAX: dffffc0000000000 RBX: ffff88800bb1c000 RCX: 0000000000000000
[   21.753160] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   21.753418] RBP: ffff88802b8e7bc0 R08: 0000000000000001 R09: ffffed100155b11b
[   21.753676] R10: ffff88800aad88df R11: 0000000000000000 R12: 0000000000000000
[   21.753929] R13: ffffffff85cc0180 R14: ffff8880247bde80 R15: ffffffff87070ae0
[   21.754182] FS:  00007fe6b6738600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   21.754467] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   21.754677] CR2: 0000000020000080 CR3: 000000002132e000 CR4: 0000000000750ef0
[   21.754938] PKRU: 55555554
[   21.755041] Call Trace:
[   21.755151]  <TASK>
[   21.755234]  ? show_regs+0x6e/0x80
[   21.755367]  ? die_addr+0x45/0xb0
[   21.755498]  ? exc_general_protection+0x159/0x250
[   21.755678]  ? asm_exc_general_protection+0x2b/0x30
[   21.755875]  ? sysfs_remove_link_from_group+0x21/0x90
[   21.756063]  ? sysfs_remove_link_from_group+0x37/0x90
[   21.756250]  ? sysfs_remove_link_from_group+0x21/0x90
[   21.756437]  iommu_device_unlink+0x85/0xd0
[   21.756591]  iommu_deinit_device+0x11f/0x4c0
[   21.756753]  __iommu_group_remove_device+0x26b/0x300
[   21.756940]  iommu_group_remove_device+0x8a/0xb0
[   21.757114]  iommufd_test+0x1f1a/0x2d10
[   21.757257]  ? __pfx_lock_release+0x10/0x10
[   21.757414]  ? __pfx_lock_acquire+0x10/0x10
[   21.757572]  ? __pfx_iommufd_test+0x10/0x10
[   21.757729]  ? __sanitizer_cov_trace_const_cmp8+0x1c/0x30
[   21.757930]  iommufd_fops_ioctl+0x377/0x510
[   21.758088]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   21.758263]  ? trace_hardirqs_on+0x26/0x120
[   21.758422]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   21.758653]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   21.758873]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   21.759073]  ? security_file_ioctl+0x9d/0xd0
[   21.759236]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   21.759412]  __x64_sys_ioctl+0x1b9/0x230
[   21.759559]  do_syscall_64+0x3c/0x90
[   21.759694]  entry_SYSCALL_64_after_hwframe+0x6e/0xd8
[   21.759880] RIP: 0033:0x7fe6b643ee5d
[   21.760014] Code: ff c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d 93 af 1b 00 f7 d8 64 89 01 48
[   21.760659] RSP: 002b:00007ffd31055fd8 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   21.760929] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007fe6b643ee5d
[   21.761182] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   21.761435] RBP: 00007ffd31055ff0 R08: 0000000000000800 R09: 0000000000000800
[   21.761688] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffd31056108
[   21.761940] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007fe6b6779000
[   21.762198]  </TASK>
[   21.762282] Modules linked in:
[   21.762499] ---[ end trace 0000000000000000 ]---
[   21.762693] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   21.762930] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   21.763592] RSP: 0018:ffff88802457fba8 EFLAGS: 00010206
[   21.763785] RAX: dffffc0000000000 RBX: ffff888014f9b000 RCX: 0000000000000000
[   21.764044] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   21.764395] RBP: ffff88802457fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   21.764654] R10: ffff88800aad88df R11: 0000000000000001 R12: 0000000000000000
[   21.764933] R13: ffffffff85cc0180 R14: ffff8880109b6ac0 R15: ffffffff87070ae0
[   21.765236] FS:  00007fe6b6738600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   21.765536] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   21.765792] CR2: 0000000020000080 CR3: 000000002132e000 CR4: 0000000000750ef0
[   21.766051] PKRU: 55555554
[   21.766465] ------------[ cut here ]------------
[   21.766653] WARNING: CPU: 0 PID: 946 at drivers/iommu/iommufd/main.c:258 iommufd_fops_release+0x2a3/0x300
[   21.767018] Modules linked in:
[   21.767171] CPU: 0 PID: 946 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   21.767485] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   21.767950] RIP: 0010:iommufd_fops_release+0x2a3/0x300
[   21.768143] Code: 45 d0 65 48 2b 04 25 28 00 00 00 75 54 48 81 c4 88 00 00 00 31 c0 5b 41 5c 41 5d 41 5e 41 5f 5d c3 cc cc cc cc e8 ad 4f 0a fe <0f> 0b eb a6 e8 74 23 67 fe e9 f6 fe ff ff 48 89 85 50 ff ff ff e8
[   21.768856] RSP: 0018:ffff88802b8e7c00 EFLAGS: 00010293
[   21.769109] RAX: 0000000000000000 RBX: ffff88800fe06808 RCX: 0000000000000000
[   21.769368] RDX: ffff888014428000 RSI: ffffffff835563e3 RDI: ffffffff86702b40
[   21.769649] RBP: ffff88802b8e7cb0 R08: 0000000000000000 R09: fffffbfff0eb2644
[   21.769949] R10: ffffffff87593227 R11: ffff888012f53400 R12: 0000000000000000
[   21.770208] R13: ffff8880134cee18 R14: ffff88802b8e7c48 R15: ffffffff83556140
[   21.770526] FS:  0000000000000000(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   21.770850] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   21.771062] CR2: 0000000020000080 CR3: 000000000687e000 CR4: 0000000000750ef0
[   21.771326] PKRU: 55555554
[   21.771483] Call Trace:
[   21.771577]  <TASK>
[   21.771660]  ? show_regs+0x6e/0x80
[   21.771795]  ? __warn+0xef/0x340
[   21.771922]  ? report_bug+0x25e/0x4b0
[   21.772128]  ? iommufd_fops_release+0x2a3/0x300
[   21.772301]  ? report_bug+0x2cb/0x4b0
[   21.772446]  ? handle_bug+0x46/0x90
[   21.772587]  ? exc_invalid_op+0x1d/0x50
[   21.772784]  ? asm_exc_invalid_op+0x1f/0x30
[   21.772942]  ? __pfx_iommufd_fops_release+0x10/0x10
[   21.773128]  ? iommufd_fops_release+0x2a3/0x300
[   21.773355]  ? iommufd_fops_release+0x2a3/0x300
[   21.773530]  ? __pfx_iommufd_fops_release+0x10/0x10
[   21.773713]  ? rcu_is_watching+0x19/0xc0
[   21.773871]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   21.774127]  ? __pfx_iommufd_fops_release+0x10/0x10
[   21.774311]  __fput+0x424/0xaf0
[   21.774439]  ____fput+0x1f/0x30
[   21.774629]  task_work_run+0x19d/0x2b0
[   21.774778]  ? __pfx_task_work_run+0x10/0x10
[   21.774941]  ? __sanitizer_cov_trace_const_cmp1+0x1e/0x30
[   21.775143]  ? switch_task_namespaces+0xa9/0xe0
[   21.775320]  do_exit+0xac9/0x2790
[   21.775450]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   21.775744]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   21.775929]  ? __pfx_do_exit+0x10/0x10
[   21.776073]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   21.776294]  ? security_file_ioctl+0x9d/0xd0
[   21.776497]  make_task_dead+0x182/0x3c0
[   21.776646]  rewind_stack_and_make_dead+0x17/0x20
[   21.776829] RIP: 0033:0x7fe6b643ee5d
[   21.777019] Code: Unable to access opcode bytes at 0x7fe6b643ee33.
[   21.777243] RSP: 002b:00007ffd31055fd8 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   21.777531] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007fe6b643ee5d
[   21.777831] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   21.778096] RBP: 00007ffd31055ff0 R08: 0000000000000800 R09: 0000000000000800
[   21.778406] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffd31056108
[   21.778696] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007fe6b6779000
[   21.778965]  </TASK>
[   21.779051] irq event stamp: 0
[   21.779167] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   21.779396] hardirqs last disabled at (0): [<ffffffff8122f2d1>] copy_process+0x1c51/0x7140
[   21.779760] softirqs last  enabled at (0): [<ffffffff8122f312>] copy_process+0x1c92/0x7140
[   21.780093] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   21.780376] ---[ end trace 0000000000000000 ]---
[   21.783725] iommufd_mock iommufd_mock224: Adding to iommu group 224
[   21.784076] iommufd_mock iommufd_mock224: Removing from iommu group 224
[   21.784339] general protection fault, probably for non-canonical address 0xdffffc0000000006: 0000 [#225] PREEMPT SMP KASAN NOPTI
[   21.784785] KASAN: null-ptr-deref in range [0x0000000000000030-0x0000000000000037]
[   21.785059] CPU: 0 PID: 947 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   21.785374] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   21.785783] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   21.785999] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   21.786661] RSP: 0018:ffff888017177ba8 EFLAGS: 00010206
[   21.786862] RAX: dffffc0000000000 RBX: ffff88800bb19000 RCX: 0000000000000000
[   21.787116] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   21.787369] RBP: ffff888017177bc0 R08: 0000000000000001 R09: ffffed100155b11b
[   21.787623] R10: ffff88800aad88df R11: 5f6466756d6d6f69 R12: 0000000000000000
[   21.787875] R13: ffffffff85cc0180 R14: ffff8880247bd100 R15: ffffffff87070ae0
[   21.788130] FS:  00007fcab19f6600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   21.788415] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   21.788621] CR2: 0000000020000080 CR3: 00000000203dc000 CR4: 0000000000750ef0
[   21.788875] PKRU: 55555554
[   21.788977] Call Trace:
[   21.789069]  <TASK>
[   21.789150]  ? show_regs+0x6e/0x80
[   21.789284]  ? die_addr+0x45/0xb0
[   21.789415]  ? exc_general_protection+0x159/0x250
[   21.789597]  ? asm_exc_general_protection+0x2b/0x30
[   21.789780]  ? sysfs_remove_link_from_group+0x21/0x90
[   21.789968]  ? sysfs_remove_link_from_group+0x37/0x90
[   21.790155]  ? sysfs_remove_link_from_group+0x21/0x90
[   21.790343]  iommu_device_unlink+0x85/0xd0
[   21.790497]  iommu_deinit_device+0x11f/0x4c0
[   21.790662]  __iommu_group_remove_device+0x26b/0x300
[   21.790857]  iommu_group_remove_device+0x8a/0xb0
[   21.791030]  iommufd_test+0x1f1a/0x2d10
[   21.791174]  ? __pfx_lock_release+0x10/0x10
[   21.791331]  ? __pfx_lock_acquire+0x10/0x10
[   21.791490]  ? __pfx_iommufd_test+0x10/0x10
[   21.791648]  ? __sanitizer_cov_trace_const_cmp8+0x1c/0x30
[   21.791849]  iommufd_fops_ioctl+0x377/0x510
[   21.792009]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   21.792184]  ? trace_hardirqs_on+0x26/0x120
[   21.792343]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   21.792573]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   21.792756]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   21.792955]  ? security_file_ioctl+0x9d/0xd0
[   21.793118]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   21.793294]  __x64_sys_ioctl+0x1b9/0x230
[   21.793442]  do_syscall_64+0x3c/0x90
[   21.793577]  entry_SYSCALL_64_after_hwframe+0x6e/0xd8
[   21.793763] RIP: 0033:0x7fcab163ee5d
[   21.793897] Code: ff c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d 93 af 1b 00 f7 d8 64 89 01 48
[   21.794542] RSP: 002b:00007ffe93b88248 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   21.794821] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007fcab163ee5d
[   21.795075] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   21.795327] RBP: 00007ffe93b88260 R08: 0000000000000800 R09: 0000000000000800
[   21.795580] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffe93b88378
[   21.795836] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007fcab1a37000
[   21.796098]  </TASK>
[   21.796182] Modules linked in:
[   21.796409] ---[ end trace 0000000000000000 ]---
[   21.796582] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   21.796795] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   21.797454] RSP: 0018:ffff88802457fba8 EFLAGS: 00010206
[   21.797648] RAX: dffffc0000000000 RBX: ffff888014f9b000 RCX: 0000000000000000
[   21.797907] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   21.798252] RBP: ffff88802457fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   21.798512] R10: ffff88800aad88df R11: 0000000000000001 R12: 0000000000000000
[   21.798866] R13: ffffffff85cc0180 R14: ffff8880109b6ac0 R15: ffffffff87070ae0
[   21.799127] FS:  00007fcab19f6600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   21.799419] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   21.799631] CR2: 0000000020000080 CR3: 00000000203dc000 CR4: 0000000000750ef0
[   21.799891] PKRU: 55555554
[   21.800332] ------------[ cut here ]------------
[   21.800506] WARNING: CPU: 0 PID: 947 at drivers/iommu/iommufd/main.c:258 iommufd_fops_release+0x2a3/0x300
[   21.800928] Modules linked in:
[   21.801050] CPU: 0 PID: 947 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   21.801372] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   21.801826] RIP: 0010:iommufd_fops_release+0x2a3/0x300
[   21.802028] Code: 45 d0 65 48 2b 04 25 28 00 00 00 75 54 48 81 c4 88 00 00 00 31 c0 5b 41 5c 41 5d 41 5e 41 5f 5d c3 cc cc cc cc e8 ad 4f 0a fe <0f> 0b eb a6 e8 74 23 67 fe e9 f6 fe ff ff 48 89 85 50 ff ff ff e8
[   21.802787] RSP: 0018:ffff888017177c00 EFLAGS: 00010293
[   21.802982] RAX: 0000000000000000 RBX: ffff88800fe06108 RCX: 0000000000000000
[   21.803240] RDX: ffff888010564a00 RSI: ffffffff835563e3 RDI: ffffffff86702b40
[   21.803500] RBP: ffff888017177cb0 R08: 0000000000000000 R09: fffffbfff0eb2644
[   21.803759] R10: ffffffff87593227 R11: ffff8880134c0600 R12: 0000000000000000
[   21.804017] R13: ffff88801895a198 R14: ffff888017177c48 R15: ffffffff83556140
[   21.804277] FS:  0000000000000000(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   21.804568] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   21.804780] CR2: 0000000020000080 CR3: 000000000687e000 CR4: 0000000000750ef0
[   21.805039] PKRU: 55555554
[   21.805143] Call Trace:
[   21.805238]  <TASK>
[   21.805321]  ? show_regs+0x6e/0x80
[   21.805456]  ? __warn+0xef/0x340
[   21.805583]  ? report_bug+0x25e/0x4b0
[   21.805726]  ? iommufd_fops_release+0x2a3/0x300
[   21.805899]  ? report_bug+0x2cb/0x4b0
[   21.806044]  ? handle_bug+0x46/0x90
[   21.806180]  ? exc_invalid_op+0x1d/0x50
[   21.806327]  ? asm_exc_invalid_op+0x1f/0x30
[   21.806486]  ? __pfx_iommufd_fops_release+0x10/0x10
[   21.806712]  ? iommufd_fops_release+0x2a3/0x300
[   21.806897]  ? iommufd_fops_release+0x2a3/0x300
[   21.807072]  ? __pfx_iommufd_fops_release+0x10/0x10
[   21.807284]  ? rcu_is_watching+0x19/0xc0
[   21.807480]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   21.807683]  ? __pfx_iommufd_fops_release+0x10/0x10
[   21.807876]  __fput+0x424/0xaf0
[   21.808071]  ____fput+0x1f/0x30
[   21.808196]  task_work_run+0x19d/0x2b0
[   21.808343]  ? __pfx_task_work_run+0x10/0x10
[   21.808519]  ? __sanitizer_cov_trace_const_cmp1+0x1e/0x30
[   21.808758]  ? switch_task_namespaces+0xa9/0xe0
[   21.808932]  do_exit+0xac9/0x2790
[   21.809063]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   21.809343]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   21.809530]  ? __pfx_do_exit+0x10/0x10
[   21.809674]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   21.809895]  ? security_file_ioctl+0x9d/0xd0
[   21.810093]  make_task_dead+0x182/0x3c0
[   21.810243]  rewind_stack_and_make_dead+0x17/0x20
[   21.810442] RIP: 0033:0x7fcab163ee5d
[   21.810623] Code: Unable to access opcode bytes at 0x7fcab163ee33.
[   21.810873] RSP: 002b:00007ffe93b88248 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   21.811152] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007fcab163ee5d
[   21.811417] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   21.811723] RBP: 00007ffe93b88260 R08: 0000000000000800 R09: 0000000000000800
[   21.811982] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffe93b88378
[   21.812298] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007fcab1a37000
[   21.812563]  </TASK>
[   21.812649] irq event stamp: 0
[   21.812783] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   21.813054] hardirqs last disabled at (0): [<ffffffff8122f2d1>] copy_process+0x1c51/0x7140
[   21.813364] softirqs last  enabled at (0): [<ffffffff8122f312>] copy_process+0x1c92/0x7140
[   21.813708] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   21.813938] ---[ end trace 0000000000000000 ]---
[   21.817302] iommufd_mock iommufd_mock225: Adding to iommu group 225
[   21.817558] iommufd_mock iommufd_mock225: Removing from iommu group 225
[   21.817885] general protection fault, probably for non-canonical address 0xdffffc0000000006: 0000 [#226] PREEMPT SMP KASAN NOPTI
[   21.818299] KASAN: null-ptr-deref in range [0x0000000000000030-0x0000000000000037]
[   21.818614] CPU: 0 PID: 948 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   21.818933] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   21.819342] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   21.819557] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   21.820217] RSP: 0018:ffff88802b8e7ba8 EFLAGS: 00010206
[   21.820411] RAX: dffffc0000000000 RBX: ffff88800bb1b000 RCX: 0000000000000000
[   21.820669] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   21.820927] RBP: ffff88802b8e7bc0 R08: 0000000000000001 R09: ffffed100155b11b
[   21.821187] R10: ffff88800aad88df R11: 5f6466756d6d6f69 R12: 0000000000000000
[   21.821445] R13: ffffffff85cc0180 R14: ffff8880247bd180 R15: ffffffff87070ae0
[   21.821704] FS:  00007fbcd01ef600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   21.821996] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   21.822208] CR2: 0000000020000080 CR3: 000000002132e000 CR4: 0000000000750ef0
[   21.822468] PKRU: 55555554
[   21.822572] Call Trace:
[   21.822666]  <TASK>
[   21.822753]  ? show_regs+0x6e/0x80
[   21.822890]  ? die_addr+0x45/0xb0
[   21.823023]  ? exc_general_protection+0x159/0x250
[   21.823208]  ? asm_exc_general_protection+0x2b/0x30
[   21.823395]  ? sysfs_remove_link_from_group+0x21/0x90
[   21.823587]  ? sysfs_remove_link_from_group+0x37/0x90
[   21.823778]  ? sysfs_remove_link_from_group+0x21/0x90
[   21.823969]  iommu_device_unlink+0x85/0xd0
[   21.824126]  iommu_deinit_device+0x11f/0x4c0
[   21.824293]  __iommu_group_remove_device+0x26b/0x300
[   21.824484]  iommu_group_remove_device+0x8a/0xb0
[   21.824661]  iommufd_test+0x1f1a/0x2d10
[   21.824808]  ? __pfx_lock_release+0x10/0x10
[   21.824968]  ? __pfx_lock_acquire+0x10/0x10
[   21.825130]  ? __pfx_iommufd_test+0x10/0x10
[   21.825290]  ? __sanitizer_cov_trace_const_cmp8+0x1c/0x30
[   21.825495]  iommufd_fops_ioctl+0x377/0x510
[   21.825657]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   21.825837]  ? trace_hardirqs_on+0x26/0x120
[   21.825999]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   21.826233]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   21.826420]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   21.826623]  ? security_file_ioctl+0x9d/0xd0
[   21.826794]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   21.826973]  __x64_sys_ioctl+0x1b9/0x230
[   21.827121]  do_syscall_64+0x3c/0x90
[   21.827256]  entry_SYSCALL_64_after_hwframe+0x6e/0xd8
[   21.827441] RIP: 0033:0x7fbccfe3ee5d
[   21.827576] Code: ff c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d 93 af 1b 00 f7 d8 64 89 01 48
[   21.828222] RSP: 002b:00007fff42f710f8 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   21.828491] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007fbccfe3ee5d
[   21.828745] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   21.828998] RBP: 00007fff42f71110 R08: 0000000000000800 R09: 0000000000000800
[   21.829251] R10: 0000000000000000 R11: 0000000000000213 R12: 00007fff42f71228
[   21.829505] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007fbcd0230000
[   21.829764]  </TASK>
[   21.829847] Modules linked in:
[   21.830048] ---[ end trace 0000000000000000 ]---
[   21.830217] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   21.830426] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   21.831088] RSP: 0018:ffff88802457fba8 EFLAGS: 00010206
[   21.831278] RAX: dffffc0000000000 RBX: ffff888014f9b000 RCX: 0000000000000000
[   21.831532] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   21.831814] RBP: ffff88802457fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   21.832125] R10: ffff88800aad88df R11: 0000000000000001 R12: 0000000000000000
[   21.832379] R13: ffffffff85cc0180 R14: ffff8880109b6ac0 R15: ffffffff87070ae0
[   21.832695] FS:  00007fbcd01ef600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   21.832980] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   21.833207] CR2: 0000000020000080 CR3: 000000002132e000 CR4: 0000000000750ef0
[   21.833501] PKRU: 55555554
[   21.833911] ------------[ cut here ]------------
[   21.834084] WARNING: CPU: 0 PID: 948 at drivers/iommu/iommufd/main.c:258 iommufd_fops_release+0x2a3/0x300
[   21.834498] Modules linked in:
[   21.834628] CPU: 0 PID: 948 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   21.834967] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   21.835382] RIP: 0010:iommufd_fops_release+0x2a3/0x300
[   21.835635] Code: 45 d0 65 48 2b 04 25 28 00 00 00 75 54 48 81 c4 88 00 00 00 31 c0 5b 41 5c 41 5d 41 5e 41 5f 5d c3 cc cc cc cc e8 ad 4f 0a fe <0f> 0b eb a6 e8 74 23 67 fe e9 f6 fe ff ff 48 89 85 50 ff ff ff e8
[   21.836359] RSP: 0018:ffff88802b8e7c00 EFLAGS: 00010293
[   21.836552] RAX: 0000000000000000 RBX: ffff88800fe06408 RCX: 0000000000000000
[   21.836866] RDX: ffff888010562500 RSI: ffffffff835563e3 RDI: ffffffff86702b40
[   21.837125] RBP: ffff88802b8e7cb0 R08: 0000000000000000 R09: fffffbfff0eb2644
[   21.837446] R10: ffffffff87593227 R11: ffff88800f430000 R12: 0000000000000000
[   21.837705] R13: ffff88801376d318 R14: ffff88802b8e7c48 R15: ffffffff83556140
[   21.837976] FS:  0000000000000000(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   21.838307] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   21.838518] CR2: 0000000020000080 CR3: 000000000687e000 CR4: 0000000000750ef0
[   21.838837] PKRU: 55555554
[   21.838941] Call Trace:
[   21.839036]  <TASK>
[   21.839119]  ? show_regs+0x6e/0x80
[   21.839253]  ? __warn+0xef/0x340
[   21.839380]  ? report_bug+0x25e/0x4b0
[   21.839523]  ? iommufd_fops_release+0x2a3/0x300
[   21.839696]  ? report_bug+0x2cb/0x4b0
[   21.839851]  ? handle_bug+0x46/0x90
[   21.840041]  ? exc_invalid_op+0x1d/0x50
[   21.840188]  ? asm_exc_invalid_op+0x1f/0x30
[   21.840347]  ? __pfx_iommufd_fops_release+0x10/0x10
[   21.840533]  ? iommufd_fops_release+0x2a3/0x300
[   21.840706]  ? iommufd_fops_release+0x2a3/0x300
[   21.840880]  ? __pfx_iommufd_fops_release+0x10/0x10
[   21.841064]  ? rcu_is_watching+0x19/0xc0
[   21.841216]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   21.841418]  ? __pfx_iommufd_fops_release+0x10/0x10
[   21.841603]  __fput+0x424/0xaf0
[   21.841733]  ____fput+0x1f/0x30
[   21.841858]  task_work_run+0x19d/0x2b0
[   21.842003]  ? __pfx_task_work_run+0x10/0x10
[   21.842165]  ? __sanitizer_cov_trace_const_cmp1+0x1e/0x30
[   21.842368]  ? switch_task_namespaces+0xa9/0xe0
[   21.842538]  do_exit+0xac9/0x2790
[   21.842681]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   21.842915]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   21.843100]  ? __pfx_do_exit+0x10/0x10
[   21.843244]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   21.843445]  ? security_file_ioctl+0x9d/0xd0
[   21.843611]  make_task_dead+0x182/0x3c0
[   21.843759]  rewind_stack_and_make_dead+0x17/0x20
[   21.843938] RIP: 0033:0x7fbccfe3ee5d
[   21.844074] Code: Unable to access opcode bytes at 0x7fbccfe3ee33.
[   21.844297] RSP: 002b:00007fff42f710f8 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   21.844572] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007fbccfe3ee5d
[   21.844830] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   21.845087] RBP: 00007fff42f71110 R08: 0000000000000800 R09: 0000000000000800
[   21.845345] R10: 0000000000000000 R11: 0000000000000213 R12: 00007fff42f71228
[   21.845603] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007fbcd0230000
[   21.845866]  </TASK>
[   21.845952] irq event stamp: 0
[   21.846068] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   21.846296] hardirqs last disabled at (0): [<ffffffff8122f2d1>] copy_process+0x1c51/0x7140
[   21.846603] softirqs last  enabled at (0): [<ffffffff8122f312>] copy_process+0x1c92/0x7140
[   21.846907] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   21.847139] ---[ end trace 0000000000000000 ]---
[   21.850314] iommufd_mock iommufd_mock226: Adding to iommu group 226
[   21.850594] iommufd_mock iommufd_mock226: Removing from iommu group 226
[   21.850866] general protection fault, probably for non-canonical address 0xdffffc0000000006: 0000 [#227] PREEMPT SMP KASAN NOPTI
[   21.851280] KASAN: null-ptr-deref in range [0x0000000000000030-0x0000000000000037]
[   21.851552] CPU: 0 PID: 949 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   21.851860] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   21.852258] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   21.852467] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   21.853112] RSP: 0018:ffff888012c1fba8 EFLAGS: 00010206
[   21.853302] RAX: dffffc0000000000 RBX: ffff88800bb1a000 RCX: 0000000000000000
[   21.853555] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   21.853807] RBP: ffff888012c1fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   21.854060] R10: ffff88800aad88df R11: 0000000000045a00 R12: 0000000000000000
[   21.854313] R13: ffffffff85cc0180 R14: ffff8880247bdce0 R15: ffffffff87070ae0
[   21.854566] FS:  00007f4aa392e600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   21.854864] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   21.855071] CR2: 0000000020000080 CR3: 00000000203dc000 CR4: 0000000000750ef0
[   21.855327] PKRU: 55555554
[   21.855431] Call Trace:
[   21.855523]  <TASK>
[   21.855605]  ? show_regs+0x6e/0x80
[   21.855738]  ? die_addr+0x45/0xb0
[   21.855869]  ? exc_general_protection+0x159/0x250
[   21.856049]  ? asm_exc_general_protection+0x2b/0x30
[   21.856231]  ? sysfs_remove_link_from_group+0x21/0x90
[   21.856419]  ? sysfs_remove_link_from_group+0x37/0x90
[   21.856606]  ? sysfs_remove_link_from_group+0x21/0x90
[   21.856793]  iommu_device_unlink+0x85/0xd0
[   21.856947]  iommu_deinit_device+0x11f/0x4c0
[   21.857109]  __iommu_group_remove_device+0x26b/0x300
[   21.857296]  iommu_group_remove_device+0x8a/0xb0
[   21.857469]  iommufd_test+0x1f1a/0x2d10
[   21.857612]  ? __pfx_lock_release+0x10/0x10
[   21.857769]  ? __pfx_lock_acquire+0x10/0x10
[   21.857928]  ? __pfx_iommufd_test+0x10/0x10
[   21.858085]  ? __sanitizer_cov_trace_const_cmp8+0x1c/0x30
[   21.858285]  iommufd_fops_ioctl+0x377/0x510
[   21.858444]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   21.858622]  ? trace_hardirqs_on+0x26/0x120
[   21.858787]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   21.859021]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   21.859204]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   21.859403]  ? security_file_ioctl+0x9d/0xd0
[   21.859566]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   21.859742]  __x64_sys_ioctl+0x1b9/0x230
[   21.859890]  do_syscall_64+0x3c/0x90
[   21.860024]  entry_SYSCALL_64_after_hwframe+0x6e/0xd8
[   21.860209] RIP: 0033:0x7f4aa363ee5d
[   21.860343] Code: ff c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d 93 af 1b 00 f7 d8 64 89 01 48
[   21.860989] RSP: 002b:00007ffffa0494a8 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   21.861259] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f4aa363ee5d
[   21.861512] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   21.861764] RBP: 00007ffffa0494c0 R08: 0000000000000800 R09: 0000000000000800
[   21.862018] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffffa0495d8
[   21.862271] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f4aa396f000
[   21.862529]  </TASK>
[   21.862616] Modules linked in:
[   21.862787] ---[ end trace 0000000000000000 ]---
[   21.862959] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   21.863175] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   21.863833] RSP: 0018:ffff88802457fba8 EFLAGS: 00010206
[   21.864022] RAX: dffffc0000000000 RBX: ffff888014f9b000 RCX: 0000000000000000
[   21.864275] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   21.864526] RBP: ffff88802457fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   21.864778] R10: ffff88800aad88df R11: 0000000000000001 R12: 0000000000000000
[   21.865029] R13: ffffffff85cc0180 R14: ffff8880109b6ac0 R15: ffffffff87070ae0
[   21.865281] FS:  00007f4aa392e600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   21.865566] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   21.865772] CR2: 0000000020000080 CR3: 00000000203dc000 CR4: 0000000000750ef0
[   21.866024] PKRU: 55555554
[   21.866379] ------------[ cut here ]------------
[   21.866546] WARNING: CPU: 0 PID: 949 at drivers/iommu/iommufd/main.c:258 iommufd_fops_release+0x2a3/0x300
[   21.866901] Modules linked in:
[   21.867019] CPU: 0 PID: 949 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   21.867332] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   21.867729] RIP: 0010:iommufd_fops_release+0x2a3/0x300
[   21.867917] Code: 45 d0 65 48 2b 04 25 28 00 00 00 75 54 48 81 c4 88 00 00 00 31 c0 5b 41 5c 41 5d 41 5e 41 5f 5d c3 cc cc cc cc e8 ad 4f 0a fe <0f> 0b eb a6 e8 74 23 67 fe e9 f6 fe ff ff 48 89 85 50 ff ff ff e8
[   21.868560] RSP: 0018:ffff888012c1fc00 EFLAGS: 00010293
[   21.868748] RAX: 0000000000000000 RBX: ffff88800fe06a08 RCX: 0000000000000000
[   21.868999] RDX: ffff88800bb28000 RSI: ffffffff835563e3 RDI: ffffffff86702b40
[   21.869251] RBP: ffff888012c1fcb0 R08: 0000000000000000 R09: fffffbfff0eb2644
[   21.869503] R10: ffffffff87593227 R11: ffff8880131a7000 R12: 0000000000000000
[   21.869755] R13: ffff8880117cda98 R14: ffff888012c1fc48 R15: ffffffff83556140
[   21.870007] FS:  0000000000000000(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   21.870290] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   21.870496] CR2: 0000000020000080 CR3: 000000000687e000 CR4: 0000000000750ef0
[   21.870758] PKRU: 55555554
[   21.870875] Call Trace:
[   21.870975]  <TASK>
[   21.871056]  ? show_regs+0x6e/0x80
[   21.871187]  ? __warn+0xef/0x340
[   21.871311]  ? report_bug+0x25e/0x4b0
[   21.871449]  ? iommufd_fops_release+0x2a3/0x300
[   21.871618]  ? report_bug+0x2cb/0x4b0
[   21.871758]  ? handle_bug+0x46/0x90
[   21.871890]  ? exc_invalid_op+0x1d/0x50
[   21.872034]  ? asm_exc_invalid_op+0x1f/0x30
[   21.872188]  ? __pfx_iommufd_fops_release+0x10/0x10
[   21.872369]  ? iommufd_fops_release+0x2a3/0x300
[   21.872538]  ? iommufd_fops_release+0x2a3/0x300
[   21.872707]  ? __pfx_iommufd_fops_release+0x10/0x10
[   21.872886]  ? rcu_is_watching+0x19/0xc0
[   21.873033]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   21.873231]  ? __pfx_iommufd_fops_release+0x10/0x10
[   21.873409]  __fput+0x424/0xaf0
[   21.873534]  ____fput+0x1f/0x30
[   21.873655]  task_work_run+0x19d/0x2b0
[   21.873797]  ? __pfx_task_work_run+0x10/0x10
[   21.873955]  ? __sanitizer_cov_trace_const_cmp1+0x1e/0x30
[   21.874151]  ? switch_task_namespaces+0xa9/0xe0
[   21.874320]  do_exit+0xac9/0x2790
[   21.874447]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   21.874683]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   21.874871]  ? __pfx_do_exit+0x10/0x10
[   21.875012]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   21.875208]  ? security_file_ioctl+0x9d/0xd0
[   21.875371]  make_task_dead+0x182/0x3c0
[   21.875515]  rewind_stack_and_make_dead+0x17/0x20
[   21.875691] RIP: 0033:0x7f4aa363ee5d
[   21.875823] Code: Unable to access opcode bytes at 0x7f4aa363ee33.
[   21.876041] RSP: 002b:00007ffffa0494a8 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   21.876309] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f4aa363ee5d
[   21.876561] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   21.876812] RBP: 00007ffffa0494c0 R08: 0000000000000800 R09: 0000000000000800
[   21.877063] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffffa0495d8
[   21.877315] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f4aa396f000
[   21.877572]  </TASK>
[   21.877656] irq event stamp: 0
[   21.877769] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   21.877992] hardirqs last disabled at (0): [<ffffffff8122f2d1>] copy_process+0x1c51/0x7140
[   21.878284] softirqs last  enabled at (0): [<ffffffff8122f312>] copy_process+0x1c92/0x7140
[   21.878582] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   21.878816] ---[ end trace 0000000000000000 ]---
[   21.881240] iommufd_mock iommufd_mock227: Adding to iommu group 227
[   21.881491] iommufd_mock iommufd_mock227: Removing from iommu group 227
[   21.881749] general protection fault, probably for non-canonical address 0xdffffc0000000006: 0000 [#228] PREEMPT SMP KASAN NOPTI
[   21.882159] KASAN: null-ptr-deref in range [0x0000000000000030-0x0000000000000037]
[   21.882427] CPU: 1 PID: 950 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   21.882739] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   21.883150] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   21.883361] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   21.884007] RSP: 0018:ffff888017177ba8 EFLAGS: 00010206
[   21.884198] RAX: dffffc0000000000 RBX: ffff8880120b8000 RCX: 0000000000000000
[   21.884451] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   21.884704] RBP: ffff888017177bc0 R08: 0000000000000001 R09: ffffed100155b11b
[   21.884957] R10: ffff88800aad88df R11: 5f6466756d6d6f69 R12: 0000000000000000
[   21.885210] R13: ffffffff85cc0180 R14: ffff88800fd72700 R15: ffffffff87070ae0
[   21.885464] FS:  00007fb654e9d600(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
[   21.885750] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   21.885957] CR2: 0000000020000080 CR3: 00000000172c6000 CR4: 0000000000750ee0
[   21.886212] PKRU: 55555554
[   21.886314] Call Trace:
[   21.886406]  <TASK>
[   21.886487]  ? show_regs+0x6e/0x80
[   21.886621]  ? die_addr+0x45/0xb0
[   21.886755]  ? exc_general_protection+0x159/0x250
[   21.886952]  ? asm_exc_general_protection+0x2b/0x30
[   21.887135]  ? sysfs_remove_link_from_group+0x21/0x90
[   21.887323]  ? sysfs_remove_link_from_group+0x37/0x90
[   21.887511]  ? sysfs_remove_link_from_group+0x21/0x90
[   21.887698]  iommu_device_unlink+0x85/0xd0
[   21.887852]  iommu_deinit_device+0x11f/0x4c0
[   21.888015]  __iommu_group_remove_device+0x26b/0x300
[   21.888202]  iommu_group_remove_device+0x8a/0xb0
[   21.888376]  iommufd_test+0x1f1a/0x2d10
[   21.888520]  ? __pfx_lock_release+0x10/0x10
[   21.888678]  ? __pfx_lock_acquire+0x10/0x10
[   21.888836]  ? __pfx_iommufd_test+0x10/0x10
[   21.888994]  ? __sanitizer_cov_trace_const_cmp8+0x1c/0x30
[   21.889194]  iommufd_fops_ioctl+0x377/0x510
[   21.889353]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   21.889529]  ? trace_hardirqs_on+0x26/0x120
[   21.889689]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   21.889917]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   21.890101]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   21.890299]  ? security_file_ioctl+0x9d/0xd0
[   21.890463]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   21.890639]  __x64_sys_ioctl+0x1b9/0x230
[   21.890789]  do_syscall_64+0x3c/0x90
[   21.890924]  entry_SYSCALL_64_after_hwframe+0x6e/0xd8
[   21.891110] RIP: 0033:0x7fb654c3ee5d
[   21.891244] Code: ff c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d 93 af 1b 00 f7 d8 64 89 01 48
[   21.891889] RSP: 002b:00007ffcc03a82f8 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   21.892159] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007fb654c3ee5d
[   21.892413] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   21.892665] RBP: 00007ffcc03a8310 R08: 0000000000000800 R09: 0000000000000800
[   21.892918] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffcc03a8428
[   21.893171] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007fb654ede000
[   21.893429]  </TASK>
[   21.893513] Modules linked in:
[   21.893668] ---[ end trace 0000000000000000 ]---
[   21.893836] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   21.894045] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   21.894716] RSP: 0018:ffff88802457fba8 EFLAGS: 00010206
[   21.894913] RAX: dffffc0000000000 RBX: ffff888014f9b000 RCX: 0000000000000000
[   21.895166] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   21.895418] RBP: ffff88802457fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   21.895671] R10: ffff88800aad88df R11: 0000000000000001 R12: 0000000000000000
[   21.895923] R13: ffffffff85cc0180 R14: ffff8880109b6ac0 R15: ffffffff87070ae0
[   21.896176] FS:  00007fb654e9d600(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
[   21.896461] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   21.896667] CR2: 0000000020000080 CR3: 00000000172c6000 CR4: 0000000000750ee0
[   21.896921] PKRU: 55555554
[   21.897405] ------------[ cut here ]------------
[   21.897588] WARNING: CPU: 0 PID: 950 at drivers/iommu/iommufd/main.c:258 iommufd_fops_release+0x2a3/0x300
[   21.897931] Modules linked in:
[   21.898046] CPU: 0 PID: 950 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   21.898354] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   21.898800] RIP: 0010:iommufd_fops_release+0x2a3/0x300
[   21.898990] Code: 45 d0 65 48 2b 04 25 28 00 00 00 75 54 48 81 c4 88 00 00 00 31 c0 5b 41 5c 41 5d 41 5e 41 5f 5d c3 cc cc cc cc e8 ad 4f 0a fe <0f> 0b eb a6 e8 74 23 67 fe e9 f6 fe ff ff 48 89 85 50 ff ff ff e8
[   21.899635] RSP: 0018:ffff888017177c00 EFLAGS: 00010293
[   21.899824] RAX: 0000000000000000 RBX: ffff88801248a508 RCX: 0000000000000000
[   21.900076] RDX: ffff88800bb2a500 RSI: ffffffff835563e3 RDI: ffffffff86702b40
[   21.900328] RBP: ffff888017177cb0 R08: 0000000000000000 R09: fffffbfff0eb2644
[   21.900581] R10: ffffffff87593227 R11: ffff88801974aa00 R12: 0000000000000000
[   21.900833] R13: ffff88801359f818 R14: ffff888017177c48 R15: ffffffff83556140
[   21.901086] FS:  0000000000000000(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   21.901370] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   21.901576] CR2: 00007fa2819a0000 CR3: 000000000687e000 CR4: 0000000000750ef0
[   21.901830] PKRU: 55555554
[   21.901931] Call Trace:
[   21.902023]  <TASK>
[   21.902104]  ? show_regs+0x6e/0x80
[   21.902236]  ? __warn+0xef/0x340
[   21.902361]  ? report_bug+0x25e/0x4b0
[   21.902501]  ? iommufd_fops_release+0x2a3/0x300
[   21.902700]  ? report_bug+0x2cb/0x4b0
[   21.902847]  ? handle_bug+0x46/0x90
[   21.902983]  ? exc_invalid_op+0x1d/0x50
[   21.903130]  ? asm_exc_invalid_op+0x1f/0x30
[   21.903287]  ? __pfx_iommufd_fops_release+0x10/0x10
[   21.903470]  ? iommufd_fops_release+0x2a3/0x300
[   21.903640]  ? iommufd_fops_release+0x2a3/0x300
[   21.903811]  ? __pfx_iommufd_fops_release+0x10/0x10
[   21.903991]  ? rcu_is_watching+0x19/0xc0
[   21.904139]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   21.904337]  ? __pfx_iommufd_fops_release+0x10/0x10
[   21.904517]  __fput+0x424/0xaf0
[   21.904643]  ____fput+0x1f/0x30
[   21.904765]  task_work_run+0x19d/0x2b0
[   21.904908]  ? __pfx_task_work_run+0x10/0x10
[   21.905068]  ? __sanitizer_cov_trace_const_cmp1+0x1e/0x30
[   21.905266]  ? switch_task_namespaces+0xa9/0xe0
[   21.905437]  do_exit+0xac9/0x2790
[   21.905564]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   21.905791]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   21.905973]  ? __pfx_do_exit+0x10/0x10
[   21.906114]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   21.906311]  ? security_file_ioctl+0x9d/0xd0
[   21.906474]  make_task_dead+0x182/0x3c0
[   21.906646]  rewind_stack_and_make_dead+0x17/0x20
[   21.906828] RIP: 0033:0x7fb654c3ee5d
[   21.906967] Code: Unable to access opcode bytes at 0x7fb654c3ee33.
[   21.907186] RSP: 002b:00007ffcc03a82f8 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   21.907457] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007fb654c3ee5d
[   21.907709] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   21.907962] RBP: 00007ffcc03a8310 R08: 0000000000000800 R09: 0000000000000800
[   21.908214] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffcc03a8428
[   21.908466] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007fb654ede000
[   21.908724]  </TASK>
[   21.908808] irq event stamp: 0
[   21.908922] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   21.909146] hardirqs last disabled at (0): [<ffffffff8122f2d1>] copy_process+0x1c51/0x7140
[   21.909440] softirqs last  enabled at (0): [<ffffffff8122f312>] copy_process+0x1c92/0x7140
[   21.909733] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   21.909958] ---[ end trace 0000000000000000 ]---
[   21.912614] iommufd_mock iommufd_mock228: Adding to iommu group 228
[   21.912869] iommufd_mock iommufd_mock228: Removing from iommu group 228
[   21.913122] general protection fault, probably for non-canonical address 0xdffffc0000000006: 0000 [#229] PREEMPT SMP KASAN NOPTI
[   21.913526] KASAN: null-ptr-deref in range [0x0000000000000030-0x0000000000000037]
[   21.913793] CPU: 0 PID: 951 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   21.914101] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   21.914499] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   21.914709] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   21.915406] RSP: 0018:ffff888012c1fba8 EFLAGS: 00010206
[   21.915597] RAX: dffffc0000000000 RBX: ffff88800bb18000 RCX: 0000000000000000
[   21.915850] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   21.916103] RBP: ffff888012c1fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   21.916356] R10: ffff88800aad88df R11: 5f6466756d6d6f69 R12: 0000000000000000
[   21.916609] R13: ffffffff85cc0180 R14: ffff8880247bddc0 R15: ffffffff87070ae0
[   21.916862] FS:  00007f8b215ff600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   21.917148] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   21.917354] CR2: 0000000020000080 CR3: 000000002132e000 CR4: 0000000000750ef0
[   21.917608] PKRU: 55555554
[   21.917710] Call Trace:
[   21.917802]  <TASK>
[   21.917883]  ? show_regs+0x6e/0x80
[   21.918016]  ? die_addr+0x45/0xb0
[   21.918147]  ? exc_general_protection+0x159/0x250
[   21.918328]  ? asm_exc_general_protection+0x2b/0x30
[   21.918510]  ? sysfs_remove_link_from_group+0x21/0x90
[   21.918698]  ? sysfs_remove_link_from_group+0x37/0x90
[   21.918894]  ? sysfs_remove_link_from_group+0x21/0x90
[   21.919081]  iommu_device_unlink+0x85/0xd0
[   21.919235]  iommu_deinit_device+0x11f/0x4c0
[   21.919398]  __iommu_group_remove_device+0x26b/0x300
[   21.919584]  iommu_group_remove_device+0x8a/0xb0
[   21.919757]  iommufd_test+0x1f1a/0x2d10
[   21.919901]  ? __pfx_lock_release+0x10/0x10
[   21.920058]  ? __pfx_lock_acquire+0x10/0x10
[   21.920216]  ? __pfx_iommufd_test+0x10/0x10
[   21.920373]  ? __sanitizer_cov_trace_const_cmp8+0x1c/0x30
[   21.920573]  iommufd_fops_ioctl+0x377/0x510
[   21.920731]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   21.920906]  ? trace_hardirqs_on+0x26/0x120
[   21.921065]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   21.921293]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   21.921476]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   21.921674]  ? security_file_ioctl+0x9d/0xd0
[   21.921838]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   21.922014]  __x64_sys_ioctl+0x1b9/0x230
[   21.922161]  do_syscall_64+0x3c/0x90
[   21.922296]  entry_SYSCALL_64_after_hwframe+0x6e/0xd8
[   21.922482] RIP: 0033:0x7f8b2123ee5d
[   21.922616] Code: ff c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d 93 af 1b 00 f7 d8 64 89 01 48
[   21.923263] RSP: 002b:00007ffed3cc4e68 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   21.923532] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f8b2123ee5d
[   21.923784] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   21.924037] RBP: 00007ffed3cc4e80 R08: 0000000000000800 R09: 0000000000000800
[   21.924289] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffed3cc4f98
[   21.924541] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f8b21640000
[   21.924799]  </TASK>
[   21.924882] Modules linked in:
[   21.925018] ---[ end trace 0000000000000000 ]---
[   21.925186] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   21.925393] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   21.926060] RSP: 0018:ffff88802457fba8 EFLAGS: 00010206
[   21.926253] RAX: dffffc0000000000 RBX: ffff888014f9b000 RCX: 0000000000000000
[   21.926506] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   21.926787] RBP: ffff88802457fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   21.927059] R10: ffff88800aad88df R11: 0000000000000001 R12: 0000000000000000
[   21.927569] R13: ffffffff85cc0180 R14: ffff8880109b6ac0 R15: ffffffff87070ae0
[   21.927833] FS:  00007f8b215ff600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   21.928268] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   21.928478] CR2: 0000000020000080 CR3: 000000002132e000 CR4: 0000000000750ef0
[   21.928760] PKRU: 55555554
[   21.929175] ------------[ cut here ]------------
[   21.929366] WARNING: CPU: 0 PID: 951 at drivers/iommu/iommufd/main.c:258 iommufd_fops_release+0x2a3/0x300
[   21.929747] Modules linked in:
[   21.929863] CPU: 0 PID: 951 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   21.930228] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   21.930660] RIP: 0010:iommufd_fops_release+0x2a3/0x300
[   21.930896] Code: 45 d0 65 48 2b 04 25 28 00 00 00 75 54 48 81 c4 88 00 00 00 31 c0 5b 41 5c 41 5d 41 5e 41 5f 5d c3 cc cc cc cc e8 ad 4f 0a fe <0f> 0b eb a6 e8 74 23 67 fe e9 f6 fe ff ff 48 89 85 50 ff ff ff e8
[   21.931564] RSP: 0018:ffff888012c1fc00 EFLAGS: 00010293
[   21.931786] RAX: 0000000000000000 RBX: ffff88800fe06d08 RCX: 0000000000000000
[   21.932049] RDX: ffff88800fc10000 RSI: ffffffff835563e3 RDI: ffffffff86702b40
[   21.932360] RBP: ffff888012c1fcb0 R08: 0000000000000000 R09: fffffbfff0eb2644
[   21.932618] R10: ffffffff87593227 R11: ffff888013471600 R12: 0000000000000000
[   21.932934] R13: ffff88801324b818 R14: ffff888012c1fc48 R15: ffffffff83556140
[   21.933192] FS:  0000000000000000(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   21.933545] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   21.933755] CR2: 0000000020000080 CR3: 000000000687e000 CR4: 0000000000750ef0
[   21.934032] PKRU: 55555554
[   21.934175] Call Trace:
[   21.934269]  <TASK>
[   21.934351]  ? show_regs+0x6e/0x80
[   21.934485]  ? __warn+0xef/0x340
[   21.934627]  ? report_bug+0x25e/0x4b0
[   21.934812]  ? iommufd_fops_release+0x2a3/0x300
[   21.934985]  ? report_bug+0x2cb/0x4b0
[   21.935141]  ? handle_bug+0x46/0x90
[   21.935277]  ? exc_invalid_op+0x1d/0x50
[   21.935423]  ? asm_exc_invalid_op+0x1f/0x30
[   21.935581]  ? __pfx_iommufd_fops_release+0x10/0x10
[   21.935826]  ? iommufd_fops_release+0x2a3/0x300
[   21.936064]  ? iommufd_fops_release+0x2a3/0x300
[   21.936241]  ? __pfx_iommufd_fops_release+0x10/0x10
[   21.936423]  ? rcu_is_watching+0x19/0xc0
[   21.936590]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   21.936835]  ? __pfx_iommufd_fops_release+0x10/0x10
[   21.937018]  __fput+0x424/0xaf0
[   21.937150]  ____fput+0x1f/0x30
[   21.937327]  task_work_run+0x19d/0x2b0
[   21.937472]  ? __pfx_task_work_run+0x10/0x10
[   21.937634]  ? __sanitizer_cov_trace_const_cmp1+0x1e/0x30
[   21.937846]  ? switch_task_namespaces+0xa9/0xe0
[   21.938060]  do_exit+0xac9/0x2790
[   21.938191]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   21.938428]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   21.938671]  ? __pfx_do_exit+0x10/0x10
[   21.938818]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   21.939018]  ? security_file_ioctl+0x9d/0xd0
[   21.939183]  make_task_dead+0x182/0x3c0
[   21.939331]  rewind_stack_and_make_dead+0x17/0x20
[   21.939509] RIP: 0033:0x7f8b2123ee5d
[   21.939658] Code: Unable to access opcode bytes at 0x7f8b2123ee33.
[   21.939925] RSP: 002b:00007ffed3cc4e68 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   21.940200] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f8b2123ee5d
[   21.940518] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   21.940776] RBP: 00007ffed3cc4e80 R08: 0000000000000800 R09: 0000000000000800
[   21.941088] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffed3cc4f98
[   21.941346] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f8b21640000
[   21.941679]  </TASK>
[   21.941765] irq event stamp: 0
[   21.941882] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   21.942110] hardirqs last disabled at (0): [<ffffffff8122f2d1>] copy_process+0x1c51/0x7140
[   21.942462] softirqs last  enabled at (0): [<ffffffff8122f312>] copy_process+0x1c92/0x7140
[   21.942777] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   21.943083] ---[ end trace 0000000000000000 ]---
[   21.945642] iommufd_mock iommufd_mock229: Adding to iommu group 229
[   21.945893] iommufd_mock iommufd_mock229: Removing from iommu group 229
[   21.946152] general protection fault, probably for non-canonical address 0xdffffc0000000006: 0000 [#230] PREEMPT SMP KASAN NOPTI
[   21.946616] KASAN: null-ptr-deref in range [0x0000000000000030-0x0000000000000037]
[   21.946904] CPU: 0 PID: 952 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   21.947222] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   21.947629] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   21.947843] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   21.948503] RSP: 0018:ffff88802b8e7ba8 EFLAGS: 00010206
[   21.948696] RAX: dffffc0000000000 RBX: ffff88800bb1e000 RCX: 0000000000000000
[   21.948955] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   21.949214] RBP: ffff88802b8e7bc0 R08: 0000000000000001 R09: ffffed100155b11b
[   21.949468] R10: ffff88800aad88df R11: 5f6466756d6d6f69 R12: 0000000000000000
[   21.949721] R13: ffffffff85cc0180 R14: ffff8880247bdb20 R15: ffffffff87070ae0
[   21.949974] FS:  00007f3889dcc600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   21.950259] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   21.950465] CR2: 0000000020000080 CR3: 00000000172c6000 CR4: 0000000000750ef0
[   21.950722] PKRU: 55555554
[   21.950835] Call Trace:
[   21.950927]  <TASK>
[   21.951008]  ? show_regs+0x6e/0x80
[   21.951142]  ? die_addr+0x45/0xb0
[   21.951272]  ? exc_general_protection+0x159/0x250
[   21.951452]  ? asm_exc_general_protection+0x2b/0x30
[   21.951635]  ? sysfs_remove_link_from_group+0x21/0x90
[   21.951822]  ? sysfs_remove_link_from_group+0x37/0x90
[   21.952009]  ? sysfs_remove_link_from_group+0x21/0x90
[   21.952196]  iommu_device_unlink+0x85/0xd0
[   21.952350]  iommu_deinit_device+0x11f/0x4c0
[   21.952513]  __iommu_group_remove_device+0x26b/0x300
[   21.952700]  iommu_group_remove_device+0x8a/0xb0
[   21.952874]  iommufd_test+0x1f1a/0x2d10
[   21.953018]  ? __pfx_lock_release+0x10/0x10
[   21.953175]  ? __pfx_lock_acquire+0x10/0x10
[   21.953334]  ? __pfx_iommufd_test+0x10/0x10
[   21.953491]  ? __sanitizer_cov_trace_const_cmp8+0x1c/0x30
[   21.953691]  iommufd_fops_ioctl+0x377/0x510
[   21.953850]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   21.954024]  ? trace_hardirqs_on+0x26/0x120
[   21.954184]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   21.954412]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   21.954595]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   21.954811]  ? security_file_ioctl+0x9d/0xd0
[   21.954974]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   21.955150]  __x64_sys_ioctl+0x1b9/0x230
[   21.955297]  do_syscall_64+0x3c/0x90
[   21.955435]  entry_SYSCALL_64_after_hwframe+0x6e/0xd8
[   21.955624] RIP: 0033:0x7f3889a3ee5d
[   21.955757] Code: ff c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d 93 af 1b 00 f7 d8 64 89 01 48
[   21.956402] RSP: 002b:00007ffe09165938 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   21.956671] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f3889a3ee5d
[   21.956924] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   21.957177] RBP: 00007ffe09165950 R08: 0000000000000800 R09: 0000000000000800
[   21.957430] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffe09165a68
[   21.957682] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f3889e0d000
[   21.957940]  </TASK>
[   21.958023] Modules linked in:
[   21.958203] ---[ end trace 0000000000000000 ]---
[   21.958375] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   21.958695] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   21.959353] RSP: 0018:ffff88802457fba8 EFLAGS: 00010206
[   21.959542] RAX: dffffc0000000000 RBX: ffff888014f9b000 RCX: 0000000000000000
[   21.959795] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   21.960071] RBP: ffff88802457fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   21.960371] R10: ffff88800aad88df R11: 0000000000000001 R12: 0000000000000000
[   21.960633] R13: ffffffff85cc0180 R14: ffff8880109b6ac0 R15: ffffffff87070ae0
[   21.960943] FS:  00007f3889dcc600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   21.961234] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   21.961505] CR2: 0000000020000080 CR3: 00000000172c6000 CR4: 0000000000750ef0
[   21.961764] PKRU: 55555554
[   21.962196] ------------[ cut here ]------------
[   21.962368] WARNING: CPU: 0 PID: 952 at drivers/iommu/iommufd/main.c:258 iommufd_fops_release+0x2a3/0x300
[   21.962794] Modules linked in:
[   21.962913] CPU: 0 PID: 952 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   21.963230] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   21.963700] RIP: 0010:iommufd_fops_release+0x2a3/0x300
[   21.963894] Code: 45 d0 65 48 2b 04 25 28 00 00 00 75 54 48 81 c4 88 00 00 00 31 c0 5b 41 5c 41 5d 41 5e 41 5f 5d c3 cc cc cc cc e8 ad 4f 0a fe <0f> 0b eb a6 e8 74 23 67 fe e9 f6 fe ff ff 48 89 85 50 ff ff ff e8
[   21.964612] RSP: 0018:ffff88802b8e7c00 EFLAGS: 00010293
[   21.964823] RAX: 0000000000000000 RBX: ffff88800fe06908 RCX: 0000000000000000
[   21.965118] RDX: ffff88800fc12500 RSI: ffffffff835563e3 RDI: ffffffff86702b40
[   21.965377] RBP: ffff88802b8e7cb0 R08: 0000000000000000 R09: fffffbfff0eb2644
[   21.965695] R10: ffffffff87593227 R11: ffff888018aff000 R12: 0000000000000000
[   21.965954] R13: ffff8880114e2918 R14: ffff88802b8e7c48 R15: ffffffff83556140
[   21.966272] FS:  0000000000000000(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   21.966564] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   21.966849] CR2: 0000000020000080 CR3: 000000000687e000 CR4: 0000000000750ef0
[   21.967109] PKRU: 55555554
[   21.967212] Call Trace:
[   21.967306]  <TASK>
[   21.967389]  ? show_regs+0x6e/0x80
[   21.967523]  ? __warn+0xef/0x340
[   21.967669]  ? report_bug+0x25e/0x4b0
[   21.967847]  ? iommufd_fops_release+0x2a3/0x300
[   21.968020]  ? report_bug+0x2cb/0x4b0
[   21.968165]  ? handle_bug+0x46/0x90
[   21.968357]  ? exc_invalid_op+0x1d/0x50
[   21.968505]  ? asm_exc_invalid_op+0x1f/0x30
[   21.968663]  ? __pfx_iommufd_fops_release+0x10/0x10
[   21.968849]  ? iommufd_fops_release+0x2a3/0x300
[   21.969071]  ? iommufd_fops_release+0x2a3/0x300
[   21.969246]  ? __pfx_iommufd_fops_release+0x10/0x10
[   21.969430]  ? rcu_is_watching+0x19/0xc0
[   21.969642]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   21.969845]  ? __pfx_iommufd_fops_release+0x10/0x10
[   21.970029]  __fput+0x424/0xaf0
[   21.970168]  ____fput+0x1f/0x30
[   21.970330]  task_work_run+0x19d/0x2b0
[   21.970475]  ? __pfx_task_work_run+0x10/0x10
[   21.970645]  ? __sanitizer_cov_trace_const_cmp1+0x1e/0x30
[   21.970850]  ? switch_task_namespaces+0xa9/0xe0
[   21.971025]  do_exit+0xac9/0x2790
[   21.971155]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   21.971443]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   21.971629]  ? __pfx_do_exit+0x10/0x10
[   21.971773]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   21.972032]  ? security_file_ioctl+0x9d/0xd0
[   21.972198]  make_task_dead+0x182/0x3c0
[   21.972346]  rewind_stack_and_make_dead+0x17/0x20
[   21.972581] RIP: 0033:0x7f3889a3ee5d
[   21.972718] Code: Unable to access opcode bytes at 0x7f3889a3ee33.
[   21.972942] RSP: 002b:00007ffe09165938 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   21.973274] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f3889a3ee5d
[   21.973533] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   21.973809] RBP: 00007ffe09165950 R08: 0000000000000800 R09: 0000000000000800
[   21.974105] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffe09165a68
[   21.974368] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f3889e0d000
[   21.974690]  </TASK>
[   21.974780] irq event stamp: 0
[   21.974896] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   21.975125] hardirqs last disabled at (0): [<ffffffff8122f2d1>] copy_process+0x1c51/0x7140
[   21.975446] softirqs last  enabled at (0): [<ffffffff8122f312>] copy_process+0x1c92/0x7140
[   21.975789] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   21.976025] ---[ end trace 0000000000000000 ]---
[   21.978634] iommufd_mock iommufd_mock230: Adding to iommu group 230
[   21.978895] iommufd_mock iommufd_mock230: Removing from iommu group 230
[   21.979154] general protection fault, probably for non-canonical address 0xdffffc0000000006: 0000 [#231] PREEMPT SMP KASAN NOPTI
[   21.979567] KASAN: null-ptr-deref in range [0x0000000000000030-0x0000000000000037]
[   21.979841] CPU: 0 PID: 953 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   21.980153] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   21.980551] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   21.980761] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   21.981407] RSP: 0018:ffff888017177ba8 EFLAGS: 00010206
[   21.981597] RAX: dffffc0000000000 RBX: ffff88800bb1d000 RCX: 0000000000000000
[   21.981850] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   21.982102] RBP: ffff888017177bc0 R08: 0000000000000001 R09: ffffed100155b11b
[   21.982355] R10: ffff88800aad88df R11: 5f6466756d6d6f69 R12: 0000000000000000
[   21.982611] R13: ffffffff85cc0180 R14: ffff8880247bd8e0 R15: ffffffff87070ae0
[   21.982873] FS:  00007f5d55ead600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   21.983164] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   21.983371] CR2: 0000000020000080 CR3: 000000002132e000 CR4: 0000000000750ef0
[   21.983625] PKRU: 55555554
[   21.983727] Call Trace:
[   21.983819]  <TASK>
[   21.983901]  ? show_regs+0x6e/0x80
[   21.984034]  ? die_addr+0x45/0xb0
[   21.984165]  ? exc_general_protection+0x159/0x250
[   21.984347]  ? asm_exc_general_protection+0x2b/0x30
[   21.984530]  ? sysfs_remove_link_from_group+0x21/0x90
[   21.984717]  ? sysfs_remove_link_from_group+0x37/0x90
[   21.984904]  ? sysfs_remove_link_from_group+0x21/0x90
[   21.985092]  iommu_device_unlink+0x85/0xd0
[   21.985246]  iommu_deinit_device+0x11f/0x4c0
[   21.985409]  __iommu_group_remove_device+0x26b/0x300
[   21.985595]  iommu_group_remove_device+0x8a/0xb0
[   21.985769]  iommufd_test+0x1f1a/0x2d10
[   21.985913]  ? __pfx_lock_release+0x10/0x10
[   21.986070]  ? __pfx_lock_acquire+0x10/0x10
[   21.986229]  ? __pfx_iommufd_test+0x10/0x10
[   21.986386]  ? __sanitizer_cov_trace_const_cmp8+0x1c/0x30
[   21.986587]  iommufd_fops_ioctl+0x377/0x510
[   21.986753]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   21.986932]  ? trace_hardirqs_on+0x26/0x120
[   21.987091]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   21.987320]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   21.987504]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   21.987702]  ? security_file_ioctl+0x9d/0xd0
[   21.987865]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   21.988041]  __x64_sys_ioctl+0x1b9/0x230
[   21.988189]  do_syscall_64+0x3c/0x90
[   21.988324]  entry_SYSCALL_64_after_hwframe+0x6e/0xd8
[   21.988509] RIP: 0033:0x7f5d55c3ee5d
[   21.988643] Code: ff c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d 93 af 1b 00 f7 d8 64 89 01 48
[   21.989290] RSP: 002b:00007fff39cacd48 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   21.989560] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f5d55c3ee5d
[   21.989813] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   21.990067] RBP: 00007fff39cacd60 R08: 0000000000000800 R09: 0000000000000800
[   21.990319] R10: 0000000000000000 R11: 0000000000000213 R12: 00007fff39cace78
[   21.990572] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f5d55eee000
[   21.990839]  </TASK>
[   21.990923] Modules linked in:
[   21.991107] ---[ end trace 0000000000000000 ]---
[   21.991280] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   21.991491] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   21.992150] RSP: 0018:ffff88802457fba8 EFLAGS: 00010206
[   21.992343] RAX: dffffc0000000000 RBX: ffff888014f9b000 RCX: 0000000000000000
[   21.992596] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   21.992849] RBP: ffff88802457fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   21.993102] R10: ffff88800aad88df R11: 0000000000000001 R12: 0000000000000000
[   21.993354] R13: ffffffff85cc0180 R14: ffff8880109b6ac0 R15: ffffffff87070ae0
[   21.993606] FS:  00007f5d55ead600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   21.993891] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   21.994097] CR2: 0000000020000080 CR3: 000000002132e000 CR4: 0000000000750ef0
[   21.994351] PKRU: 55555554
[   21.994868] ------------[ cut here ]------------
[   21.995039] WARNING: CPU: 0 PID: 953 at drivers/iommu/iommufd/main.c:258 iommufd_fops_release+0x2a3/0x300
[   21.995381] Modules linked in:
[   21.995497] CPU: 0 PID: 953 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   21.995804] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   21.996202] RIP: 0010:iommufd_fops_release+0x2a3/0x300
[   21.996391] Code: 45 d0 65 48 2b 04 25 28 00 00 00 75 54 48 81 c4 88 00 00 00 31 c0 5b 41 5c 41 5d 41 5e 41 5f 5d c3 cc cc cc cc e8 ad 4f 0a fe <0f> 0b eb a6 e8 74 23 67 fe e9 f6 fe ff ff 48 89 85 50 ff ff ff e8
[   21.997035] RSP: 0018:ffff888017177c00 EFLAGS: 00010293
[   21.997224] RAX: 0000000000000000 RBX: ffff88800fe06208 RCX: 0000000000000000
[   21.997476] RDX: ffff888013a02500 RSI: ffffffff835563e3 RDI: ffffffff86702b40
[   21.997729] RBP: ffff888017177cb0 R08: 0000000000000000 R09: fffffbfff0eb2644
[   21.997984] R10: ffffffff87593227 R11: ffff88801179ec00 R12: 0000000000000000
[   21.998236] R13: ffff8880114e3d18 R14: ffff888017177c48 R15: ffffffff83556140
[   21.998488] FS:  0000000000000000(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   21.998784] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   21.998990] CR2: 0000000020000080 CR3: 000000000687e000 CR4: 0000000000750ef0
[   21.999243] PKRU: 55555554
[   21.999343] Call Trace:
[   21.999435]  <TASK>
[   21.999515]  ? show_regs+0x6e/0x80
[   21.999646]  ? __warn+0xef/0x340
[   21.999770]  ? report_bug+0x25e/0x4b0
[   21.999909]  ? iommufd_fops_release+0x2a3/0x300
[   22.000078]  ? report_bug+0x2cb/0x4b0
[   22.000219]  ? handle_bug+0x46/0x90
[   22.000351]  ? exc_invalid_op+0x1d/0x50
[   22.000494]  ? asm_exc_invalid_op+0x1f/0x30
[   22.000648]  ? __pfx_iommufd_fops_release+0x10/0x10
[   22.000830]  ? iommufd_fops_release+0x2a3/0x300
[   22.000998]  ? iommufd_fops_release+0x2a3/0x300
[   22.001168]  ? __pfx_iommufd_fops_release+0x10/0x10
[   22.001347]  ? rcu_is_watching+0x19/0xc0
[   22.001495]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   22.001692]  ? __pfx_iommufd_fops_release+0x10/0x10
[   22.001871]  __fput+0x424/0xaf0
[   22.001995]  ____fput+0x1f/0x30
[   22.002117]  task_work_run+0x19d/0x2b0
[   22.002258]  ? __pfx_task_work_run+0x10/0x10
[   22.002417]  ? __sanitizer_cov_trace_const_cmp1+0x1e/0x30
[   22.002622]  ? switch_task_namespaces+0xa9/0xe0
[   22.002793]  do_exit+0xac9/0x2790
[   22.002920]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   22.003147]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   22.003327]  ? __pfx_do_exit+0x10/0x10
[   22.003467]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   22.003663]  ? security_file_ioctl+0x9d/0xd0
[   22.003825]  make_task_dead+0x182/0x3c0
[   22.003970]  rewind_stack_and_make_dead+0x17/0x20
[   22.004144] RIP: 0033:0x7f5d55c3ee5d
[   22.004276] Code: Unable to access opcode bytes at 0x7f5d55c3ee33.
[   22.004494] RSP: 002b:00007fff39cacd48 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   22.004762] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f5d55c3ee5d
[   22.005014] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   22.005266] RBP: 00007fff39cacd60 R08: 0000000000000800 R09: 0000000000000800
[   22.005518] R10: 0000000000000000 R11: 0000000000000213 R12: 00007fff39cace78
[   22.005769] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f5d55eee000
[   22.006026]  </TASK>
[   22.006110] irq event stamp: 0
[   22.006223] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   22.006445] hardirqs last disabled at (0): [<ffffffff8122f2d1>] copy_process+0x1c51/0x7140
[   22.006756] softirqs last  enabled at (0): [<ffffffff8122f312>] copy_process+0x1c92/0x7140
[   22.007048] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   22.007271] ---[ end trace 0000000000000000 ]---
[   22.009860] iommufd_mock iommufd_mock231: Adding to iommu group 231
[   22.010107] iommufd_mock iommufd_mock231: Removing from iommu group 231
[   22.010359] general protection fault, probably for non-canonical address 0xdffffc0000000006: 0000 [#232] PREEMPT SMP KASAN NOPTI
[   22.010769] KASAN: null-ptr-deref in range [0x0000000000000030-0x0000000000000037]
[   22.011036] CPU: 0 PID: 954 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   22.011343] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   22.011758] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   22.011968] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   22.012612] RSP: 0018:ffff88801076fba8 EFLAGS: 00010206
[   22.012801] RAX: dffffc0000000000 RBX: ffff88802b8e7000 RCX: 0000000000000000
[   22.013053] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   22.013305] RBP: ffff88801076fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   22.013558] R10: ffff88800aad88df R11: 5f6466756d6d6f69 R12: 0000000000000000
[   22.013810] R13: ffffffff85cc0180 R14: ffff88800bd79080 R15: ffffffff87070ae0
[   22.014062] FS:  00007ff59e908600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   22.014347] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   22.014552] CR2: 0000000020000080 CR3: 000000002132e000 CR4: 0000000000750ef0
[   22.014810] PKRU: 55555554
[   22.014911] Call Trace:
[   22.015002]  <TASK>
[   22.015083]  ? show_regs+0x6e/0x80
[   22.015216]  ? die_addr+0x45/0xb0
[   22.015346]  ? exc_general_protection+0x159/0x250
[   22.015529]  ? asm_exc_general_protection+0x2b/0x30
[   22.015713]  ? sysfs_remove_link_from_group+0x21/0x90
[   22.015900]  ? sysfs_remove_link_from_group+0x37/0x90
[   22.016087]  ? sysfs_remove_link_from_group+0x21/0x90
[   22.016273]  iommu_device_unlink+0x85/0xd0
[   22.016426]  iommu_deinit_device+0x11f/0x4c0
[   22.016588]  __iommu_group_remove_device+0x26b/0x300
[   22.016773]  iommu_group_remove_device+0x8a/0xb0
[   22.016946]  iommufd_test+0x1f1a/0x2d10
[   22.017089]  ? __pfx_lock_release+0x10/0x10
[   22.017246]  ? __pfx_lock_acquire+0x10/0x10
[   22.017403]  ? __pfx_iommufd_test+0x10/0x10
[   22.017560]  ? __sanitizer_cov_trace_const_cmp8+0x1c/0x30
[   22.017759]  iommufd_fops_ioctl+0x377/0x510
[   22.017917]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   22.018092]  ? trace_hardirqs_on+0x26/0x120
[   22.018250]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   22.018478]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   22.018661]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   22.018865]  ? security_file_ioctl+0x9d/0xd0
[   22.019030]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   22.019205]  __x64_sys_ioctl+0x1b9/0x230
[   22.019352]  do_syscall_64+0x3c/0x90
[   22.019486]  entry_SYSCALL_64_after_hwframe+0x6e/0xd8
[   22.019670] RIP: 0033:0x7ff59e63ee5d
[   22.019804] Code: ff c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d 93 af 1b 00 f7 d8 64 89 01 48
[   22.020447] RSP: 002b:00007fff7f7c6028 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   22.020715] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007ff59e63ee5d
[   22.020967] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   22.021219] RBP: 00007fff7f7c6040 R08: 0000000000000800 R09: 0000000000000800
[   22.021470] R10: 0000000000000000 R11: 0000000000000213 R12: 00007fff7f7c6158
[   22.021722] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007ff59e949000
[   22.021981]  </TASK>
[   22.022066] Modules linked in:
[   22.022208] ---[ end trace 0000000000000000 ]---
[   22.022385] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   22.022603] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   22.023252] RSP: 0018:ffff88802457fba8 EFLAGS: 00010206
[   22.023441] RAX: dffffc0000000000 RBX: ffff888014f9b000 RCX: 0000000000000000
[   22.023694] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   22.023947] RBP: ffff88802457fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   22.024200] R10: ffff88800aad88df R11: 0000000000000001 R12: 0000000000000000
[   22.024451] R13: ffffffff85cc0180 R14: ffff8880109b6ac0 R15: ffffffff87070ae0
[   22.024704] FS:  00007ff59e908600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   22.024988] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   22.025194] CR2: 0000000020000080 CR3: 000000002132e000 CR4: 0000000000750ef0
[   22.025447] PKRU: 55555554
[   22.025805] ------------[ cut here ]------------
[   22.025973] WARNING: CPU: 0 PID: 954 at drivers/iommu/iommufd/main.c:258 iommufd_fops_release+0x2a3/0x300
[   22.026312] Modules linked in:
[   22.026427] CPU: 0 PID: 954 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   22.026743] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   22.027157] RIP: 0010:iommufd_fops_release+0x2a3/0x300
[   22.027345] Code: 45 d0 65 48 2b 04 25 28 00 00 00 75 54 48 81 c4 88 00 00 00 31 c0 5b 41 5c 41 5d 41 5e 41 5f 5d c3 cc cc cc cc e8 ad 4f 0a fe <0f> 0b eb a6 e8 74 23 67 fe e9 f6 fe ff ff 48 89 85 50 ff ff ff e8
[   22.027989] RSP: 0018:ffff88801076fc00 EFLAGS: 00010293
[   22.028177] RAX: 0000000000000000 RBX: ffff88800fe06f08 RCX: 0000000000000000
[   22.028430] RDX: ffff88801388a500 RSI: ffffffff835563e3 RDI: ffffffff86702b40
[   22.028682] RBP: ffff88801076fcb0 R08: 0000000000000000 R09: fffffbfff0eb2644
[   22.028934] R10: ffffffff87593227 R11: ffff8880114d2200 R12: 0000000000000000
[   22.029186] R13: ffff8880134d0698 R14: ffff88801076fc48 R15: ffffffff83556140
[   22.029438] FS:  0000000000000000(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   22.029723] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   22.029929] CR2: 0000000020000080 CR3: 000000000687e000 CR4: 0000000000750ef0
[   22.030182] PKRU: 55555554
[   22.030283] Call Trace:
[   22.030375]  <TASK>
[   22.030456]  ? show_regs+0x6e/0x80
[   22.030593]  ? __warn+0xef/0x340
[   22.030718]  ? report_bug+0x25e/0x4b0
[   22.030860]  ? iommufd_fops_release+0x2a3/0x300
[   22.031028]  ? report_bug+0x2cb/0x4b0
[   22.031170]  ? handle_bug+0x46/0x90
[   22.031303]  ? exc_invalid_op+0x1d/0x50
[   22.031447]  ? asm_exc_invalid_op+0x1f/0x30
[   22.031602]  ? __pfx_iommufd_fops_release+0x10/0x10
[   22.031783]  ? iommufd_fops_release+0x2a3/0x300
[   22.031952]  ? iommufd_fops_release+0x2a3/0x300
[   22.032122]  ? __pfx_iommufd_fops_release+0x10/0x10
[   22.032301]  ? rcu_is_watching+0x19/0xc0
[   22.032450]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   22.032647]  ? __pfx_iommufd_fops_release+0x10/0x10
[   22.032827]  __fput+0x424/0xaf0
[   22.032953]  ____fput+0x1f/0x30
[   22.033074]  task_work_run+0x19d/0x2b0
[   22.033217]  ? __pfx_task_work_run+0x10/0x10
[   22.033376]  ? __sanitizer_cov_trace_const_cmp1+0x1e/0x30
[   22.033573]  ? switch_task_namespaces+0xa9/0xe0
[   22.033743]  do_exit+0xac9/0x2790
[   22.033870]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   22.034097]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   22.034278]  ? __pfx_do_exit+0x10/0x10
[   22.034419]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   22.034625]  ? security_file_ioctl+0x9d/0xd0
[   22.034791]  make_task_dead+0x182/0x3c0
[   22.034936]  rewind_stack_and_make_dead+0x17/0x20
[   22.035111] RIP: 0033:0x7ff59e63ee5d
[   22.035264] Code: Unable to access opcode bytes at 0x7ff59e63ee33.
[   22.035486] RSP: 002b:00007fff7f7c6028 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   22.035754] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007ff59e63ee5d
[   22.036006] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   22.036258] RBP: 00007fff7f7c6040 R08: 0000000000000800 R09: 0000000000000800
[   22.036511] R10: 0000000000000000 R11: 0000000000000213 R12: 00007fff7f7c6158
[   22.036763] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007ff59e949000
[   22.037021]  </TASK>
[   22.037104] irq event stamp: 0
[   22.037218] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   22.037441] hardirqs last disabled at (0): [<ffffffff8122f2d1>] copy_process+0x1c51/0x7140
[   22.037734] softirqs last  enabled at (0): [<ffffffff8122f312>] copy_process+0x1c92/0x7140
[   22.038026] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   22.038249] ---[ end trace 0000000000000000 ]---
[   22.040804] iommufd_mock iommufd_mock232: Adding to iommu group 232
[   22.041052] iommufd_mock iommufd_mock232: Removing from iommu group 232
[   22.041304] general protection fault, probably for non-canonical address 0xdffffc0000000006: 0000 [#233] PREEMPT SMP KASAN NOPTI
[   22.041707] KASAN: null-ptr-deref in range [0x0000000000000030-0x0000000000000037]
[   22.041978] CPU: 0 PID: 955 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   22.042284] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   22.042684] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   22.042899] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   22.043542] RSP: 0018:ffff88801456fba8 EFLAGS: 00010206
[   22.043731] RAX: dffffc0000000000 RBX: ffff88802b8e4000 RCX: 0000000000000000
[   22.043983] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   22.044235] RBP: ffff88801456fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   22.044488] R10: ffff88800aad88df R11: 5f6466756d6d6f69 R12: 0000000000000000
[   22.044740] R13: ffffffff85cc0180 R14: ffff88800bd79f60 R15: ffffffff87070ae0
[   22.044992] FS:  00007f6ea191c600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   22.045276] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   22.045483] CR2: 0000000020000080 CR3: 000000002132e000 CR4: 0000000000750ef0
[   22.045736] PKRU: 55555554
[   22.045837] Call Trace:
[   22.045929]  <TASK>
[   22.046010]  ? show_regs+0x6e/0x80
[   22.046143]  ? die_addr+0x45/0xb0
[   22.046273]  ? exc_general_protection+0x159/0x250
[   22.046453]  ? asm_exc_general_protection+0x2b/0x30
[   22.046634]  ? sysfs_remove_link_from_group+0x21/0x90
[   22.046826]  ? sysfs_remove_link_from_group+0x37/0x90
[   22.047012]  ? sysfs_remove_link_from_group+0x21/0x90
[   22.047198]  iommu_device_unlink+0x85/0xd0
[   22.047362]  iommu_deinit_device+0x11f/0x4c0
[   22.047527]  __iommu_group_remove_device+0x26b/0x300
[   22.047713]  iommu_group_remove_device+0x8a/0xb0
[   22.047886]  iommufd_test+0x1f1a/0x2d10
[   22.048029]  ? __pfx_lock_release+0x10/0x10
[   22.048184]  ? __pfx_lock_acquire+0x10/0x10
[   22.048342]  ? __pfx_iommufd_test+0x10/0x10
[   22.048498]  ? __sanitizer_cov_trace_const_cmp8+0x1c/0x30
[   22.048697]  iommufd_fops_ioctl+0x377/0x510
[   22.048855]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   22.049029]  ? trace_hardirqs_on+0x26/0x120
[   22.049187]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   22.049414]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   22.049596]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   22.049793]  ? security_file_ioctl+0x9d/0xd0
[   22.049956]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   22.050130]  __x64_sys_ioctl+0x1b9/0x230
[   22.050277]  do_syscall_64+0x3c/0x90
[   22.050411]  entry_SYSCALL_64_after_hwframe+0x6e/0xd8
[   22.050595] RIP: 0033:0x7f6ea163ee5d
[   22.050729] Code: ff c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d 93 af 1b 00 f7 d8 64 89 01 48
[   22.051374] RSP: 002b:00007ffca0ef9528 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   22.051642] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f6ea163ee5d
[   22.051894] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   22.052145] RBP: 00007ffca0ef9540 R08: 0000000000000800 R09: 0000000000000800
[   22.052397] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffca0ef9658
[   22.052649] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f6ea195d000
[   22.052905]  </TASK>
[   22.052989] Modules linked in:
[   22.053161] ---[ end trace 0000000000000000 ]---
[   22.053329] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   22.053537] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   22.054179] RSP: 0018:ffff88802457fba8 EFLAGS: 00010206
[   22.054368] RAX: dffffc0000000000 RBX: ffff888014f9b000 RCX: 0000000000000000
[   22.054643] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   22.054905] RBP: ffff88802457fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   22.055156] R10: ffff88800aad88df R11: 0000000000000001 R12: 0000000000000000
[   22.055407] R13: ffffffff85cc0180 R14: ffff8880109b6ac0 R15: ffffffff87070ae0
[   22.055661] FS:  00007f6ea191c600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   22.055946] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   22.056152] CR2: 0000000020000080 CR3: 000000002132e000 CR4: 0000000000750ef0
[   22.056404] PKRU: 55555554
[   22.056808] ------------[ cut here ]------------
[   22.056976] WARNING: CPU: 0 PID: 955 at drivers/iommu/iommufd/main.c:258 iommufd_fops_release+0x2a3/0x300
[   22.057315] Modules linked in:
[   22.057429] CPU: 0 PID: 955 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   22.057735] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   22.058131] RIP: 0010:iommufd_fops_release+0x2a3/0x300
[   22.058318] Code: 45 d0 65 48 2b 04 25 28 00 00 00 75 54 48 81 c4 88 00 00 00 31 c0 5b 41 5c 41 5d 41 5e 41 5f 5d c3 cc cc cc cc e8 ad 4f 0a fe <0f> 0b eb a6 e8 74 23 67 fe e9 f6 fe ff ff 48 89 85 50 ff ff ff e8
[   22.059039] RSP: 0018:ffff88801456fc00 EFLAGS: 00010293
[   22.059228] RAX: 0000000000000000 RBX: ffff88800fe06308 RCX: 0000000000000000
[   22.059479] RDX: ffff88801388ca00 RSI: ffffffff835563e3 RDI: ffffffff86702b40
[   22.059730] RBP: ffff88801456fcb0 R08: 0000000000000000 R09: fffffbfff0eb2644
[   22.059982] R10: ffffffff87593227 R11: ffff8880132fe800 R12: 0000000000000000
[   22.060234] R13: ffff888013a14918 R14: ffff88801456fc48 R15: ffffffff83556140
[   22.060486] FS:  0000000000000000(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   22.060769] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   22.060974] CR2: 0000000020000080 CR3: 000000000687e000 CR4: 0000000000750ef0
[   22.061226] PKRU: 55555554
[   22.061326] Call Trace:
[   22.061418]  <TASK>
[   22.061499]  ? show_regs+0x6e/0x80
[   22.061629]  ? __warn+0xef/0x340
[   22.061753]  ? report_bug+0x25e/0x4b0
[   22.061892]  ? iommufd_fops_release+0x2a3/0x300
[   22.062060]  ? report_bug+0x2cb/0x4b0
[   22.062200]  ? handle_bug+0x46/0x90
[   22.062332]  ? exc_invalid_op+0x1d/0x50
[   22.062476]  ? asm_exc_invalid_op+0x1f/0x30
[   22.062640]  ? __pfx_iommufd_fops_release+0x10/0x10
[   22.062824]  ? iommufd_fops_release+0x2a3/0x300
[   22.062992]  ? iommufd_fops_release+0x2a3/0x300
[   22.063161]  ? __pfx_iommufd_fops_release+0x10/0x10
[   22.063363]  ? rcu_is_watching+0x19/0xc0
[   22.063512]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   22.063711]  ? __pfx_iommufd_fops_release+0x10/0x10
[   22.063889]  __fput+0x424/0xaf0
[   22.064014]  ____fput+0x1f/0x30
[   22.064135]  task_work_run+0x19d/0x2b0
[   22.064277]  ? __pfx_task_work_run+0x10/0x10
[   22.064435]  ? __sanitizer_cov_trace_const_cmp1+0x1e/0x30
[   22.064631]  ? switch_task_namespaces+0xa9/0xe0
[   22.064800]  do_exit+0xac9/0x2790
[   22.064926]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   22.065152]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   22.065333]  ? __pfx_do_exit+0x10/0x10
[   22.065473]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   22.065670]  ? security_file_ioctl+0x9d/0xd0
[   22.065831]  make_task_dead+0x182/0x3c0
[   22.065976]  rewind_stack_and_make_dead+0x17/0x20
[   22.066150] RIP: 0033:0x7f6ea163ee5d
[   22.066283] Code: Unable to access opcode bytes at 0x7f6ea163ee33.
[   22.066500] RSP: 002b:00007ffca0ef9528 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   22.066776] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f6ea163ee5d
[   22.067029] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   22.067280] RBP: 00007ffca0ef9540 R08: 0000000000000800 R09: 0000000000000800
[   22.067532] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffca0ef9658
[   22.067782] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f6ea195d000
[   22.068038]  </TASK>
[   22.068122] irq event stamp: 0
[   22.068234] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   22.068457] hardirqs last disabled at (0): [<ffffffff8122f2d1>] copy_process+0x1c51/0x7140
[   22.068748] softirqs last  enabled at (0): [<ffffffff8122f312>] copy_process+0x1c92/0x7140
[   22.069039] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   22.069262] ---[ end trace 0000000000000000 ]---
[   22.072025] iommufd_mock iommufd_mock233: Adding to iommu group 233
[   22.072352] iommufd_mock iommufd_mock233: Removing from iommu group 233
[   22.072688] general protection fault, probably for non-canonical address 0xdffffc0000000006: 0000 [#234] PREEMPT SMP KASAN NOPTI
[   22.073229] KASAN: null-ptr-deref in range [0x0000000000000030-0x0000000000000037]
[   22.073585] CPU: 0 PID: 956 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   22.073994] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   22.074524] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   22.074808] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   22.075656] RSP: 0018:ffff888013c3fba8 EFLAGS: 00010206
[   22.075906] RAX: dffffc0000000000 RBX: ffff88802b8e1000 RCX: 0000000000000000
[   22.076239] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   22.076571] RBP: ffff888013c3fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   22.076905] R10: ffff88800aad88df R11: 5f6466756d6d6f69 R12: 0000000000000000
[   22.077239] R13: ffffffff85cc0180 R14: ffff88800bd793a0 R15: ffffffff87070ae0
[   22.077571] FS:  00007f91fde9c600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   22.077957] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   22.078250] CR2: 0000000020000080 CR3: 000000002132e000 CR4: 0000000000750ef0
[   22.078584] PKRU: 55555554
[   22.078731] Call Trace:
[   22.078879]  <TASK>
[   22.078989]  ? show_regs+0x6e/0x80
[   22.079167]  ? die_addr+0x45/0xb0
[   22.079344]  ? exc_general_protection+0x159/0x250
[   22.079585]  ? asm_exc_general_protection+0x2b/0x30
[   22.079828]  ? sysfs_remove_link_from_group+0x21/0x90
[   22.080077]  ? sysfs_remove_link_from_group+0x37/0x90
[   22.080326]  ? sysfs_remove_link_from_group+0x21/0x90
[   22.080575]  iommu_device_unlink+0x85/0xd0
[   22.080779]  iommu_deinit_device+0x11f/0x4c0
[   22.081000]  __iommu_group_remove_device+0x26b/0x300
[   22.081255]  iommu_group_remove_device+0x8a/0xb0
[   22.081492]  iommufd_test+0x1f1a/0x2d10
[   22.081686]  ? __pfx_lock_release+0x10/0x10
[   22.081900]  ? __pfx_lock_acquire+0x10/0x10
[   22.082116]  ? __pfx_iommufd_test+0x10/0x10
[   22.082329]  ? __sanitizer_cov_trace_const_cmp8+0x1c/0x30
[   22.082601]  iommufd_fops_ioctl+0x377/0x510
[   22.082841]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   22.083090]  ? trace_hardirqs_on+0x26/0x120
[   22.083308]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   22.083619]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   22.083870]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   22.084141]  ? security_file_ioctl+0x9d/0xd0
[   22.084365]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   22.084606]  __x64_sys_ioctl+0x1b9/0x230
[   22.084807]  do_syscall_64+0x3c/0x90
[   22.084991]  entry_SYSCALL_64_after_hwframe+0x6e/0xd8
[   22.085244] RIP: 0033:0x7f91fdc3ee5d
[   22.085425] Code: ff c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d 93 af 1b 00 f7 d8 64 89 01 48
[   22.086294] RSP: 002b:00007ffd58d87fb8 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   22.086661] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f91fdc3ee5d
[   22.087008] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   22.087349] RBP: 00007ffd58d87fd0 R08: 0000000000000800 R09: 0000000000000800
[   22.087689] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffd58d880e8
[   22.088028] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f91fdedd000
[   22.088377]  </TASK>
[   22.088490] Modules linked in:
[   22.088677] ---[ end trace 0000000000000000 ]---
[   22.088918] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   22.089201] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   22.090080] RSP: 0018:ffff88802457fba8 EFLAGS: 00010206
[   22.090338] RAX: dffffc0000000000 RBX: ffff888014f9b000 RCX: 0000000000000000
[   22.090691] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   22.091035] RBP: ffff88802457fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   22.091371] R10: ffff88800aad88df R11: 0000000000000001 R12: 0000000000000000
[   22.091700] R13: ffffffff85cc0180 R14: ffff8880109b6ac0 R15: ffffffff87070ae0
[   22.092031] FS:  00007f91fde9c600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   22.092403] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   22.092671] CR2: 0000000020000080 CR3: 000000002132e000 CR4: 0000000000750ef0
[   22.093001] PKRU: 55555554
[   22.093456] ------------[ cut here ]------------
[   22.093676] WARNING: CPU: 0 PID: 956 at drivers/iommu/iommufd/main.c:258 iommufd_fops_release+0x2a3/0x300
[   22.094122] Modules linked in:
[   22.094272] CPU: 0 PID: 956 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   22.094685] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   22.095229] RIP: 0010:iommufd_fops_release+0x2a3/0x300
[   22.095472] Code: 45 d0 65 48 2b 04 25 28 00 00 00 75 54 48 81 c4 88 00 00 00 31 c0 5b 41 5c 41 5d 41 5e 41 5f 5d c3 cc cc cc cc e8 ad 4f 0a fe <0f> 0b eb a6 e8 74 23 67 fe e9 f6 fe ff ff 48 89 85 50 ff ff ff e8
[   22.096300] RSP: 0018:ffff888013c3fc00 EFLAGS: 00010293
[   22.096542] RAX: 0000000000000000 RBX: ffff88800fe06c08 RCX: 0000000000000000
[   22.096866] RDX: ffff8880138b4a00 RSI: ffffffff835563e3 RDI: ffffffff86702b40
[   22.097190] RBP: ffff888013c3fcb0 R08: 0000000000000000 R09: fffffbfff0eb2644
[   22.097515] R10: ffffffff87593227 R11: ffff888018b10800 R12: 0000000000000000
[   22.097839] R13: ffff88800fe19598 R14: ffff888013c3fc48 R15: ffffffff83556140
[   22.098165] FS:  0000000000000000(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   22.098530] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   22.098819] CR2: 0000000020000080 CR3: 000000000687e000 CR4: 0000000000750ef0
[   22.099152] PKRU: 55555554
[   22.099283] Call Trace:
[   22.099402]  <TASK>
[   22.099506]  ? show_regs+0x6e/0x80
[   22.099676]  ? __warn+0xef/0x340
[   22.099836]  ? report_bug+0x25e/0x4b0
[   22.100016]  ? iommufd_fops_release+0x2a3/0x300
[   22.100232]  ? report_bug+0x2cb/0x4b0
[   22.100414]  ? handle_bug+0x46/0x90
[   22.100584]  ? exc_invalid_op+0x1d/0x50
[   22.100769]  ? asm_exc_invalid_op+0x1f/0x30
[   22.100967]  ? __pfx_iommufd_fops_release+0x10/0x10
[   22.101201]  ? iommufd_fops_release+0x2a3/0x300
[   22.101417]  ? iommufd_fops_release+0x2a3/0x300
[   22.101636]  ? __pfx_iommufd_fops_release+0x10/0x10
[   22.101867]  ? rcu_is_watching+0x19/0xc0
[   22.102059]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   22.102314]  ? __pfx_iommufd_fops_release+0x10/0x10
[   22.102545]  __fput+0x424/0xaf0
[   22.102725]  ____fput+0x1f/0x30
[   22.102890]  task_work_run+0x19d/0x2b0
[   22.103076]  ? __pfx_task_work_run+0x10/0x10
[   22.103284]  ? __sanitizer_cov_trace_const_cmp1+0x1e/0x30
[   22.103537]  ? switch_task_namespaces+0xa9/0xe0
[   22.103755]  do_exit+0xac9/0x2790
[   22.103919]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   22.104211]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   22.104443]  ? __pfx_do_exit+0x10/0x10
[   22.104625]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   22.104878]  ? security_file_ioctl+0x9d/0xd0
[   22.105085]  make_task_dead+0x182/0x3c0
[   22.105273]  rewind_stack_and_make_dead+0x17/0x20
[   22.105498] RIP: 0033:0x7f91fdc3ee5d
[   22.105669] Code: Unable to access opcode bytes at 0x7f91fdc3ee33.
[   22.105950] RSP: 002b:00007ffd58d87fb8 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   22.106296] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f91fdc3ee5d
[   22.106629] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   22.106964] RBP: 00007ffd58d87fd0 R08: 0000000000000800 R09: 0000000000000800
[   22.107295] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffd58d880e8
[   22.107620] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f91fdedd000
[   22.107949]  </TASK>
[   22.108056] irq event stamp: 0
[   22.108202] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   22.108490] hardirqs last disabled at (0): [<ffffffff8122f2d1>] copy_process+0x1c51/0x7140
[   22.108868] softirqs last  enabled at (0): [<ffffffff8122f312>] copy_process+0x1c92/0x7140
[   22.109244] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   22.109531] ---[ end trace 0000000000000000 ]---
[   22.112235] iommufd_mock iommufd_mock234: Adding to iommu group 234
[   22.112567] iommufd_mock iommufd_mock234: Removing from iommu group 234
[   22.112904] general protection fault, probably for non-canonical address 0xdffffc0000000006: 0000 [#235] PREEMPT SMP KASAN NOPTI
[   22.113436] KASAN: null-ptr-deref in range [0x0000000000000030-0x0000000000000037]
[   22.113785] CPU: 0 PID: 957 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   22.114187] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   22.114715] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   22.114939] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   22.115592] RSP: 0018:ffff88800b997ba8 EFLAGS: 00010206
[   22.115785] RAX: dffffc0000000000 RBX: ffff88802b8e3000 RCX: 0000000000000000
[   22.116041] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   22.116297] RBP: ffff88800b997bc0 R08: 0000000000000001 R09: ffffed100155b11b
[   22.116554] R10: ffff88800aad88df R11: 5f6466756d6d6f69 R12: 0000000000000000
[   22.116810] R13: ffffffff85cc0180 R14: ffff888010165c80 R15: ffffffff87070ae0
[   22.117066] FS:  00007ff035dec600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   22.117355] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   22.117564] CR2: 0000000020000080 CR3: 000000002132e000 CR4: 0000000000750ef0
[   22.117821] PKRU: 55555554
[   22.117924] Call Trace:
[   22.118017]  <TASK>
[   22.118113]  ? show_regs+0x6e/0x80
[   22.118249]  ? die_addr+0x45/0xb0
[   22.118381]  ? exc_general_protection+0x159/0x250
[   22.118563]  ? asm_exc_general_protection+0x2b/0x30
[   22.118753]  ? sysfs_remove_link_from_group+0x21/0x90
[   22.118960]  ? sysfs_remove_link_from_group+0x37/0x90
[   22.119149]  ? sysfs_remove_link_from_group+0x21/0x90
[   22.119338]  iommu_device_unlink+0x85/0xd0
[   22.119494]  iommu_deinit_device+0x11f/0x4c0
[   22.119659]  __iommu_group_remove_device+0x26b/0x300
[   22.119848]  iommu_group_remove_device+0x8a/0xb0
[   22.120024]  iommufd_test+0x1f1a/0x2d10
[   22.120169]  ? __pfx_lock_release+0x10/0x10
[   22.120328]  ? __pfx_lock_acquire+0x10/0x10
[   22.120488]  ? __pfx_iommufd_test+0x10/0x10
[   22.120647]  ? __sanitizer_cov_trace_const_cmp8+0x1c/0x30
[   22.120850]  iommufd_fops_ioctl+0x377/0x510
[   22.121010]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   22.121188]  ? trace_hardirqs_on+0x26/0x120
[   22.121349]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   22.121580]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   22.121766]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   22.121967]  ? security_file_ioctl+0x9d/0xd0
[   22.122132]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   22.122310]  __x64_sys_ioctl+0x1b9/0x230
[   22.122459]  do_syscall_64+0x3c/0x90
[   22.122595]  entry_SYSCALL_64_after_hwframe+0x6e/0xd8
[   22.122806] RIP: 0033:0x7ff035a3ee5d
[   22.122944] Code: ff c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d 93 af 1b 00 f7 d8 64 89 01 48
[   22.123599] RSP: 002b:00007ffd7b5d1118 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   22.123872] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007ff035a3ee5d
[   22.124128] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   22.124384] RBP: 00007ffd7b5d1130 R08: 0000000000000800 R09: 0000000000000800
[   22.124640] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffd7b5d1248
[   22.124897] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007ff035e2d000
[   22.125158]  </TASK>
[   22.125244] Modules linked in:
[   22.125394] ---[ end trace 0000000000000000 ]---
[   22.125565] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   22.125775] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   22.126428] RSP: 0018:ffff88802457fba8 EFLAGS: 00010206
[   22.126625] RAX: dffffc0000000000 RBX: ffff888014f9b000 RCX: 0000000000000000
[   22.126891] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   22.127149] RBP: ffff88802457fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   22.127405] R10: ffff88800aad88df R11: 0000000000000001 R12: 0000000000000000
[   22.127661] R13: ffffffff85cc0180 R14: ffff8880109b6ac0 R15: ffffffff87070ae0
[   22.127918] FS:  00007ff035dec600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   22.128208] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   22.128418] CR2: 0000000020000080 CR3: 000000002132e000 CR4: 0000000000750ef0
[   22.128675] PKRU: 55555554
[   22.129031] ------------[ cut here ]------------
[   22.129202] WARNING: CPU: 0 PID: 957 at drivers/iommu/iommufd/main.c:258 iommufd_fops_release+0x2a3/0x300
[   22.129545] Modules linked in:
[   22.129661] CPU: 0 PID: 957 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   22.129972] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   22.130374] RIP: 0010:iommufd_fops_release+0x2a3/0x300
[   22.130566] Code: 45 d0 65 48 2b 04 25 28 00 00 00 75 54 48 81 c4 88 00 00 00 31 c0 5b 41 5c 41 5d 41 5e 41 5f 5d c3 cc cc cc cc e8 ad 4f 0a fe <0f> 0b eb a6 e8 74 23 67 fe e9 f6 fe ff ff 48 89 85 50 ff ff ff e8
[   22.131263] RSP: 0018:ffff88800b997c00 EFLAGS: 00010293
[   22.131454] RAX: 0000000000000000 RBX: ffff88800fe06b08 RCX: 0000000000000000
[   22.131709] RDX: ffff8880122b4a00 RSI: ffffffff835563e3 RDI: ffffffff86702b40
[   22.131965] RBP: ffff88800b997cb0 R08: 0000000000000000 R09: fffffbfff0eb2644
[   22.132221] R10: ffffffff87593227 R11: ffff88800fe50600 R12: 0000000000000000
[   22.132477] R13: ffff888013551d18 R14: ffff88800b997c48 R15: ffffffff83556140
[   22.132733] FS:  0000000000000000(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   22.133022] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   22.133231] CR2: 0000000020000080 CR3: 000000000687e000 CR4: 0000000000750ef0
[   22.133488] PKRU: 55555554
[   22.133590] Call Trace:
[   22.133684]  <TASK>
[   22.133766]  ? show_regs+0x6e/0x80
[   22.133898]  ? __warn+0xef/0x340
[   22.134024]  ? report_bug+0x25e/0x4b0
[   22.134165]  ? iommufd_fops_release+0x2a3/0x300
[   22.134336]  ? report_bug+0x2cb/0x4b0
[   22.134479]  ? handle_bug+0x46/0x90
[   22.134619]  ? exc_invalid_op+0x1d/0x50
[   22.134770]  ? asm_exc_invalid_op+0x1f/0x30
[   22.134926]  ? __pfx_iommufd_fops_release+0x10/0x10
[   22.135111]  ? iommufd_fops_release+0x2a3/0x300
[   22.135282]  ? iommufd_fops_release+0x2a3/0x300
[   22.135456]  ? __pfx_iommufd_fops_release+0x10/0x10
[   22.135643]  ? rcu_is_watching+0x19/0xc0
[   22.135793]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   22.135993]  ? __pfx_iommufd_fops_release+0x10/0x10
[   22.136176]  __fput+0x424/0xaf0
[   22.136302]  ____fput+0x1f/0x30
[   22.136426]  task_work_run+0x19d/0x2b0
[   22.136570]  ? __pfx_task_work_run+0x10/0x10
[   22.136732]  ? __sanitizer_cov_trace_const_cmp1+0x1e/0x30
[   22.136931]  ? switch_task_namespaces+0xa9/0xe0
[   22.137103]  do_exit+0xac9/0x2790
[   22.137232]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   22.137462]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   22.137646]  ? __pfx_do_exit+0x10/0x10
[   22.137788]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   22.137988]  ? security_file_ioctl+0x9d/0xd0
[   22.138152]  make_task_dead+0x182/0x3c0
[   22.138299]  rewind_stack_and_make_dead+0x17/0x20
[   22.138477] RIP: 0033:0x7ff035a3ee5d
[   22.138619] Code: Unable to access opcode bytes at 0x7ff035a3ee33.
[   22.138873] RSP: 002b:00007ffd7b5d1118 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   22.139219] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007ff035a3ee5d
[   22.139483] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   22.139738] RBP: 00007ffd7b5d1130 R08: 0000000000000800 R09: 0000000000000800
[   22.139993] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffd7b5d1248
[   22.140249] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007ff035e2d000
[   22.140510]  </TASK>
[   22.140595] irq event stamp: 0
[   22.140710] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   22.140936] hardirqs last disabled at (0): [<ffffffff8122f2d1>] copy_process+0x1c51/0x7140
[   22.141232] softirqs last  enabled at (0): [<ffffffff8122f312>] copy_process+0x1c92/0x7140
[   22.141528] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   22.141755] ---[ end trace 0000000000000000 ]---
[   22.144525] iommufd_mock iommufd_mock235: Adding to iommu group 235
[   22.144779] iommufd_mock iommufd_mock235: Removing from iommu group 235
[   22.145035] general protection fault, probably for non-canonical address 0xdffffc0000000006: 0000 [#236] PREEMPT SMP KASAN NOPTI
[   22.145444] KASAN: null-ptr-deref in range [0x0000000000000030-0x0000000000000037]
[   22.145714] CPU: 0 PID: 958 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   22.146026] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   22.146429] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   22.146642] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   22.147310] RSP: 0018:ffff8880110efba8 EFLAGS: 00010206
[   22.147504] RAX: dffffc0000000000 RBX: ffff88802b8e2000 RCX: 0000000000000000
[   22.147763] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   22.148017] RBP: ffff8880110efbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   22.148273] R10: ffff88800aad88df R11: 5f6466756d6d6f69 R12: 0000000000000000
[   22.148528] R13: ffffffff85cc0180 R14: ffff88800f8d2f00 R15: ffffffff87070ae0
[   22.148784] FS:  00007fcb98768600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   22.149072] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   22.149281] CR2: 0000000020000080 CR3: 000000002132e000 CR4: 0000000000750ef0
[   22.149539] PKRU: 55555554
[   22.149642] Call Trace:
[   22.149735]  <TASK>
[   22.149817]  ? show_regs+0x6e/0x80
[   22.149952]  ? die_addr+0x45/0xb0
[   22.150085]  ? exc_general_protection+0x159/0x250
[   22.150267]  ? asm_exc_general_protection+0x2b/0x30
[   22.150452]  ? sysfs_remove_link_from_group+0x21/0x90
[   22.150641]  ? sysfs_remove_link_from_group+0x37/0x90
[   22.150835]  ? sysfs_remove_link_from_group+0x21/0x90
[   22.151027]  iommu_device_unlink+0x85/0xd0
[   22.151182]  iommu_deinit_device+0x11f/0x4c0
[   22.151347]  __iommu_group_remove_device+0x26b/0x300
[   22.151535]  iommu_group_remove_device+0x8a/0xb0
[   22.151710]  iommufd_test+0x1f1a/0x2d10
[   22.151855]  ? __pfx_lock_release+0x10/0x10
[   22.152014]  ? __pfx_lock_acquire+0x10/0x10
[   22.152173]  ? __pfx_iommufd_test+0x10/0x10
[   22.152331]  ? __sanitizer_cov_trace_const_cmp8+0x1c/0x30
[   22.152533]  iommufd_fops_ioctl+0x377/0x510
[   22.152693]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   22.152870]  ? trace_hardirqs_on+0x26/0x120
[   22.153031]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   22.153261]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   22.153446]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   22.153646]  ? security_file_ioctl+0x9d/0xd0
[   22.153811]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   22.153988]  __x64_sys_ioctl+0x1b9/0x230
[   22.154136]  do_syscall_64+0x3c/0x90
[   22.154273]  entry_SYSCALL_64_after_hwframe+0x6e/0xd8
[   22.154460] RIP: 0033:0x7fcb9843ee5d
[   22.154596] Code: ff c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d 93 af 1b 00 f7 d8 64 89 01 48
[   22.155251] RSP: 002b:00007ffd36dc2638 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   22.155523] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007fcb9843ee5d
[   22.155784] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   22.156042] RBP: 00007ffd36dc2650 R08: 0000000000000800 R09: 0000000000000800
[   22.156298] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffd36dc2768
[   22.156553] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007fcb987a9000
[   22.156814]  </TASK>
[   22.156899] Modules linked in:
[   22.157129] ---[ end trace 0000000000000000 ]---
[   22.157301] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   22.157511] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   22.158165] RSP: 0018:ffff88802457fba8 EFLAGS: 00010206
[   22.158356] RAX: dffffc0000000000 RBX: ffff888014f9b000 RCX: 0000000000000000
[   22.158621] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   22.158902] RBP: ffff88802457fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   22.159160] R10: ffff88800aad88df R11: 0000000000000001 R12: 0000000000000000
[   22.159415] R13: ffffffff85cc0180 R14: ffff8880109b6ac0 R15: ffffffff87070ae0
[   22.159670] FS:  00007fcb98768600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   22.159957] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   22.160169] CR2: 0000000020000080 CR3: 000000002132e000 CR4: 0000000000750ef0
[   22.160431] PKRU: 55555554
[   22.160796] ------------[ cut here ]------------
[   22.160967] WARNING: CPU: 0 PID: 958 at drivers/iommu/iommufd/main.c:258 iommufd_fops_release+0x2a3/0x300
[   22.161314] Modules linked in:
[   22.161431] CPU: 0 PID: 958 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   22.161743] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   22.162146] RIP: 0010:iommufd_fops_release+0x2a3/0x300
[   22.162337] Code: 45 d0 65 48 2b 04 25 28 00 00 00 75 54 48 81 c4 88 00 00 00 31 c0 5b 41 5c 41 5d 41 5e 41 5f 5d c3 cc cc cc cc e8 ad 4f 0a fe <0f> 0b eb a6 e8 74 23 67 fe e9 f6 fe ff ff 48 89 85 50 ff ff ff e8
[   22.163007] RSP: 0018:ffff8880110efc00 EFLAGS: 00010293
[   22.163204] RAX: 0000000000000000 RBX: ffff88800fe06508 RCX: 0000000000000000
[   22.163461] RDX: ffff888011e82500 RSI: ffffffff835563e3 RDI: ffffffff86702b40
[   22.163719] RBP: ffff8880110efcb0 R08: 0000000000000000 R09: fffffbfff0eb2644
[   22.163976] R10: ffffffff87593227 R11: ffff888018ac4a00 R12: 0000000000000000
[   22.164233] R13: ffff888013550698 R14: ffff8880110efc48 R15: ffffffff83556140
[   22.164490] FS:  0000000000000000(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   22.164779] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   22.164989] CR2: 0000000020000080 CR3: 000000000687e000 CR4: 0000000000750ef0
[   22.165247] PKRU: 55555554
[   22.165350] Call Trace:
[   22.165444]  <TASK>
[   22.165526]  ? show_regs+0x6e/0x80
[   22.165660]  ? __warn+0xef/0x340
[   22.165786]  ? report_bug+0x25e/0x4b0
[   22.165928]  ? iommufd_fops_release+0x2a3/0x300
[   22.166100]  ? report_bug+0x2cb/0x4b0
[   22.166243]  ? handle_bug+0x46/0x90
[   22.166378]  ? exc_invalid_op+0x1d/0x50
[   22.166525]  ? asm_exc_invalid_op+0x1f/0x30
[   22.166692]  ? __pfx_iommufd_fops_release+0x10/0x10
[   22.166883]  ? iommufd_fops_release+0x2a3/0x300
[   22.167055]  ? iommufd_fops_release+0x2a3/0x300
[   22.167229]  ? __pfx_iommufd_fops_release+0x10/0x10
[   22.167412]  ? rcu_is_watching+0x19/0xc0
[   22.167563]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   22.167765]  ? __pfx_iommufd_fops_release+0x10/0x10
[   22.167948]  __fput+0x424/0xaf0
[   22.168076]  ____fput+0x1f/0x30
[   22.168201]  task_work_run+0x19d/0x2b0
[   22.168346]  ? __pfx_task_work_run+0x10/0x10
[   22.168508]  ? __sanitizer_cov_trace_const_cmp1+0x1e/0x30
[   22.168709]  ? switch_task_namespaces+0xa9/0xe0
[   22.168881]  do_exit+0xac9/0x2790
[   22.169011]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   22.169243]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   22.169428]  ? __pfx_do_exit+0x10/0x10
[   22.169571]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   22.169771]  ? security_file_ioctl+0x9d/0xd0
[   22.169937]  make_task_dead+0x182/0x3c0
[   22.170085]  rewind_stack_and_make_dead+0x17/0x20
[   22.170263] RIP: 0033:0x7fcb9843ee5d
[   22.170399] Code: Unable to access opcode bytes at 0x7fcb9843ee33.
[   22.170629] RSP: 002b:00007ffd36dc2638 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   22.170910] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007fcb9843ee5d
[   22.171168] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   22.171426] RBP: 00007ffd36dc2650 R08: 0000000000000800 R09: 0000000000000800
[   22.171684] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffd36dc2768
[   22.171941] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007fcb987a9000
[   22.172204]  </TASK>
[   22.172290] irq event stamp: 0
[   22.172405] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   22.172633] hardirqs last disabled at (0): [<ffffffff8122f2d1>] copy_process+0x1c51/0x7140
[   22.172933] softirqs last  enabled at (0): [<ffffffff8122f312>] copy_process+0x1c92/0x7140
[   22.173232] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   22.173459] ---[ end trace 0000000000000000 ]---
[   22.176120] iommufd_mock iommufd_mock236: Adding to iommu group 236
[   22.176372] iommufd_mock iommufd_mock236: Removing from iommu group 236
[   22.176629] general protection fault, probably for non-canonical address 0xdffffc0000000006: 0000 [#237] PREEMPT SMP KASAN NOPTI
[   22.177040] KASAN: null-ptr-deref in range [0x0000000000000030-0x0000000000000037]
[   22.177311] CPU: 0 PID: 959 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   22.177623] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   22.178025] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   22.178238] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   22.178896] RSP: 0018:ffff88800f6a7ba8 EFLAGS: 00010206
[   22.179089] RAX: dffffc0000000000 RBX: ffff88802b8e0000 RCX: 0000000000000000
[   22.179346] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   22.179602] RBP: ffff88800f6a7bc0 R08: 0000000000000001 R09: ffffed100155b11b
[   22.179858] R10: ffff88800aad88df R11: 5f6466756d6d6f69 R12: 0000000000000000
[   22.180114] R13: ffffffff85cc0180 R14: ffff8880111b7400 R15: ffffffff87070ae0
[   22.180370] FS:  00007f3f27a6d600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   22.180659] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   22.180868] CR2: 0000000020000080 CR3: 000000002132e000 CR4: 0000000000750ef0
[   22.181126] PKRU: 55555554
[   22.181228] Call Trace:
[   22.181321]  <TASK>
[   22.181404]  ? show_regs+0x6e/0x80
[   22.181539]  ? die_addr+0x45/0xb0
[   22.181671]  ? exc_general_protection+0x159/0x250
[   22.181854]  ? asm_exc_general_protection+0x2b/0x30
[   22.182039]  ? sysfs_remove_link_from_group+0x21/0x90
[   22.182228]  ? sysfs_remove_link_from_group+0x37/0x90
[   22.182417]  ? sysfs_remove_link_from_group+0x21/0x90
[   22.182606]  iommu_device_unlink+0x85/0xd0
[   22.182765]  iommu_deinit_device+0x11f/0x4c0
[   22.182931]  __iommu_group_remove_device+0x26b/0x300
[   22.183120]  iommu_group_remove_device+0x8a/0xb0
[   22.183295]  iommufd_test+0x1f1a/0x2d10
[   22.183440]  ? __pfx_lock_release+0x10/0x10
[   22.183599]  ? __pfx_lock_acquire+0x10/0x10
[   22.183760]  ? __pfx_iommufd_test+0x10/0x10
[   22.183919]  ? __sanitizer_cov_trace_const_cmp8+0x1c/0x30
[   22.184122]  iommufd_fops_ioctl+0x377/0x510
[   22.184282]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   22.184460]  ? trace_hardirqs_on+0x26/0x120
[   22.184621]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   22.184853]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   22.185038]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   22.185239]  ? security_file_ioctl+0x9d/0xd0
[   22.185404]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   22.185582]  __x64_sys_ioctl+0x1b9/0x230
[   22.185731]  do_syscall_64+0x3c/0x90
[   22.185868]  entry_SYSCALL_64_after_hwframe+0x6e/0xd8
[   22.186055] RIP: 0033:0x7f3f2783ee5d
[   22.186191] Code: ff c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d 93 af 1b 00 f7 d8 64 89 01 48
[   22.186852] RSP: 002b:00007ffd970caf48 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   22.187126] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f3f2783ee5d
[   22.187382] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   22.187638] RBP: 00007ffd970caf60 R08: 0000000000000800 R09: 0000000000000800
[   22.187894] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffd970cb078
[   22.188150] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f3f27aae000
[   22.188410]  </TASK>
[   22.188496] Modules linked in:
[   22.188710] ---[ end trace 0000000000000000 ]---
[   22.188882] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   22.189092] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   22.189744] RSP: 0018:ffff88802457fba8 EFLAGS: 00010206
[   22.189935] RAX: dffffc0000000000 RBX: ffff888014f9b000 RCX: 0000000000000000
[   22.190192] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   22.190449] RBP: ffff88802457fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   22.190788] R10: ffff88800aad88df R11: 0000000000000001 R12: 0000000000000000
[   22.191103] R13: ffffffff85cc0180 R14: ffff8880109b6ac0 R15: ffffffff87070ae0
[   22.191357] FS:  00007f3f27a6d600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   22.191705] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   22.191912] CR2: 0000000020000080 CR3: 000000002132e000 CR4: 0000000000750ef0
[   22.192195] PKRU: 55555554
[   22.192599] ------------[ cut here ]------------
[   22.192777] WARNING: CPU: 0 PID: 959 at drivers/iommu/iommufd/main.c:258 iommufd_fops_release+0x2a3/0x300
[   22.193163] Modules linked in:
[   22.193279] CPU: 0 PID: 959 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   22.193651] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   22.194059] RIP: 0010:iommufd_fops_release+0x2a3/0x300
[   22.194297] Code: 45 d0 65 48 2b 04 25 28 00 00 00 75 54 48 81 c4 88 00 00 00 31 c0 5b 41 5c 41 5d 41 5e 41 5f 5d c3 cc cc cc cc e8 ad 4f 0a fe <0f> 0b eb a6 e8 74 23 67 fe e9 f6 fe ff ff 48 89 85 50 ff ff ff e8
[   22.195022] RSP: 0018:ffff88800f6a7c00 EFLAGS: 00010293
[   22.195213] RAX: 0000000000000000 RBX: ffff88800fe06e08 RCX: 0000000000000000
[   22.195496] RDX: ffff888011e84a00 RSI: ffffffff835563e3 RDI: ffffffff86702b40
[   22.195792] RBP: ffff88800f6a7cb0 R08: 0000000000000000 R09: fffffbfff0eb2644
[   22.196068] R10: ffffffff87593227 R11: ffff888010211600 R12: 0000000000000000
[   22.196364] R13: ffff888018977d18 R14: ffff88800f6a7c48 R15: ffffffff83556140
[   22.196628] FS:  0000000000000000(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   22.196974] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   22.197182] CR2: 0000000020000080 CR3: 000000000687e000 CR4: 0000000000750ef0
[   22.197438] PKRU: 55555554
[   22.197539] Call Trace:
[   22.197631]  <TASK>
[   22.197727]  ? show_regs+0x6e/0x80
[   22.197903]  ? __warn+0xef/0x340
[   22.198028]  ? report_bug+0x25e/0x4b0
[   22.198167]  ? iommufd_fops_release+0x2a3/0x300
[   22.198348]  ? report_bug+0x2cb/0x4b0
[   22.198533]  ? handle_bug+0x46/0x90
[   22.198677]  ? exc_invalid_op+0x1d/0x50
[   22.198830]  ? asm_exc_invalid_op+0x1f/0x30
[   22.198990]  ? __pfx_iommufd_fops_release+0x10/0x10
[   22.199227]  ? iommufd_fops_release+0x2a3/0x300
[   22.199397]  ? iommufd_fops_release+0x2a3/0x300
[   22.199568]  ? __pfx_iommufd_fops_release+0x10/0x10
[   22.199748]  ? rcu_is_watching+0x19/0xc0
[   22.199905]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   22.200157]  ? __pfx_iommufd_fops_release+0x10/0x10
[   22.200338]  __fput+0x424/0xaf0
[   22.200465]  ____fput+0x1f/0x30
[   22.200607]  task_work_run+0x19d/0x2b0
[   22.200800]  ? __pfx_task_work_run+0x10/0x10
[   22.200960]  ? __sanitizer_cov_trace_const_cmp1+0x1e/0x30
[   22.201157]  ? switch_task_namespaces+0xa9/0xe0
[   22.201336]  do_exit+0xac9/0x2790
[   22.201502]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   22.201735]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   22.201927]  ? __pfx_do_exit+0x10/0x10
[   22.202121]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   22.202323]  ? security_file_ioctl+0x9d/0xd0
[   22.202489]  make_task_dead+0x182/0x3c0
[   22.202700]  rewind_stack_and_make_dead+0x17/0x20
[   22.202882] RIP: 0033:0x7f3f2783ee5d
[   22.203019] Code: Unable to access opcode bytes at 0x7f3f2783ee33.
[   22.203243] RSP: 002b:00007ffd970caf48 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   22.203523] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f3f2783ee5d
[   22.203840] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   22.204098] RBP: 00007ffd970caf60 R08: 0000000000000800 R09: 0000000000000800
[   22.204414] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffd970cb078
[   22.204673] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f3f27aae000
[   22.204990]  </TASK>
[   22.205076] irq event stamp: 0
[   22.205193] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   22.205427] hardirqs last disabled at (0): [<ffffffff8122f2d1>] copy_process+0x1c51/0x7140
[   22.205783] softirqs last  enabled at (0): [<ffffffff8122f312>] copy_process+0x1c92/0x7140
[   22.206094] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   22.206371] ---[ end trace 0000000000000000 ]---
[   22.209214] iommufd_mock iommufd_mock237: Adding to iommu group 237
[   22.209466] iommufd_mock iommufd_mock237: Removing from iommu group 237
[   22.209725] general protection fault, probably for non-canonical address 0xdffffc0000000006: 0000 [#238] PREEMPT SMP KASAN NOPTI
[   22.210138] KASAN: null-ptr-deref in range [0x0000000000000030-0x0000000000000037]
[   22.210456] CPU: 0 PID: 960 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   22.210777] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   22.211186] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   22.211401] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   22.212059] RSP: 0018:ffff88800b997ba8 EFLAGS: 00010206
[   22.212253] RAX: dffffc0000000000 RBX: ffff88802b8e6000 RCX: 0000000000000000
[   22.212516] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   22.212774] RBP: ffff88800b997bc0 R08: 0000000000000001 R09: ffffed100155b11b
[   22.213032] R10: ffff88800aad88df R11: 5f6466756d6d6f69 R12: 0000000000000000
[   22.213290] R13: ffffffff85cc0180 R14: ffff8880111b7020 R15: ffffffff87070ae0
[   22.213544] FS:  00007fd392721600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   22.213830] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   22.214037] CR2: 0000000020000080 CR3: 00000000202d4000 CR4: 0000000000750ef0
[   22.214290] PKRU: 55555554
[   22.214393] Call Trace:
[   22.214485]  <TASK>
[   22.214567]  ? show_regs+0x6e/0x80
[   22.214705]  ? die_addr+0x45/0xb0
[   22.214843]  ? exc_general_protection+0x159/0x250
[   22.215024]  ? asm_exc_general_protection+0x2b/0x30
[   22.215208]  ? sysfs_remove_link_from_group+0x21/0x90
[   22.215396]  ? sysfs_remove_link_from_group+0x37/0x90
[   22.215583]  ? sysfs_remove_link_from_group+0x21/0x90
[   22.215769]  iommu_device_unlink+0x85/0xd0
[   22.215924]  iommu_deinit_device+0x11f/0x4c0
[   22.216086]  __iommu_group_remove_device+0x26b/0x300
[   22.216273]  iommu_group_remove_device+0x8a/0xb0
[   22.216446]  iommufd_test+0x1f1a/0x2d10
[   22.216589]  ? __pfx_lock_release+0x10/0x10
[   22.216746]  ? __pfx_lock_acquire+0x10/0x10
[   22.216904]  ? __pfx_iommufd_test+0x10/0x10
[   22.217061]  ? __sanitizer_cov_trace_const_cmp8+0x1c/0x30
[   22.217261]  iommufd_fops_ioctl+0x377/0x510
[   22.217419]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   22.217594]  ? trace_hardirqs_on+0x26/0x120
[   22.217753]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   22.217981]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   22.218164]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   22.218363]  ? security_file_ioctl+0x9d/0xd0
[   22.218526]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   22.218706]  __x64_sys_ioctl+0x1b9/0x230
[   22.218860]  do_syscall_64+0x3c/0x90
[   22.218995]  entry_SYSCALL_64_after_hwframe+0x6e/0xd8
[   22.219181] RIP: 0033:0x7fd39243ee5d
[   22.219316] Code: ff c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d 93 af 1b 00 f7 d8 64 89 01 48
[   22.219960] RSP: 002b:00007ffe384c51e8 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   22.220230] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007fd39243ee5d
[   22.220483] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   22.220736] RBP: 00007ffe384c5200 R08: 0000000000000800 R09: 0000000000000800
[   22.220989] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffe384c5318
[   22.221242] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007fd392762000
[   22.221501]  </TASK>
[   22.221585] Modules linked in:
[   22.221906] ---[ end trace 0000000000000000 ]---
[   22.222081] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   22.222293] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   22.222987] RSP: 0018:ffff88802457fba8 EFLAGS: 00010206
[   22.223181] RAX: dffffc0000000000 RBX: ffff888014f9b000 RCX: 0000000000000000
[   22.223445] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   22.223770] RBP: ffff88802457fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   22.224029] R10: ffff88800aad88df R11: 0000000000000001 R12: 0000000000000000
[   22.224349] R13: ffffffff85cc0180 R14: ffff8880109b6ac0 R15: ffffffff87070ae0
[   22.224606] FS:  00007fd392721600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   22.224913] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   22.225168] CR2: 0000000020000080 CR3: 00000000202d4000 CR4: 0000000000750ef0
[   22.225428] PKRU: 55555554
[   22.225846] ------------[ cut here ]------------
[   22.226019] WARNING: CPU: 0 PID: 960 at drivers/iommu/iommufd/main.c:258 iommufd_fops_release+0x2a3/0x300
[   22.226431] Modules linked in:
[   22.226550] CPU: 0 PID: 960 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   22.226974] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   22.227382] RIP: 0010:iommufd_fops_release+0x2a3/0x300
[   22.227576] Code: 45 d0 65 48 2b 04 25 28 00 00 00 75 54 48 81 c4 88 00 00 00 31 c0 5b 41 5c 41 5d 41 5e 41 5f 5d c3 cc cc cc cc e8 ad 4f 0a fe <0f> 0b eb a6 e8 74 23 67 fe e9 f6 fe ff ff 48 89 85 50 ff ff ff e8
[   22.228299] RSP: 0018:ffff88800b997c00 EFLAGS: 00010293
[   22.228551] RAX: 0000000000000000 RBX: ffff88800fe06608 RCX: 0000000000000000
[   22.228810] RDX: ffff888013a04a00 RSI: ffffffff835563e3 RDI: ffffffff86702b40
[   22.229129] RBP: ffff88800b997cb0 R08: 0000000000000000 R09: fffffbfff0eb2644
[   22.229388] R10: ffffffff87593227 R11: ffff888013197000 R12: 0000000000000000
[   22.229651] R13: ffff88801355ba98 R14: ffff88800b997c48 R15: ffffffff83556140
[   22.229963] FS:  0000000000000000(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   22.230255] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   22.230520] CR2: 0000000020000080 CR3: 000000000687e000 CR4: 0000000000750ef0
[   22.230791] PKRU: 55555554
[   22.230896] Call Trace:
[   22.230990]  <TASK>
[   22.231073]  ? show_regs+0x6e/0x80
[   22.231213]  ? __warn+0xef/0x340
[   22.231385]  ? report_bug+0x25e/0x4b0
[   22.231528]  ? iommufd_fops_release+0x2a3/0x300
[   22.231701]  ? report_bug+0x2cb/0x4b0
[   22.231845]  ? handle_bug+0x46/0x90
[   22.232040]  ? exc_invalid_op+0x1d/0x50
[   22.232187]  ? asm_exc_invalid_op+0x1f/0x30
[   22.232345]  ? __pfx_iommufd_fops_release+0x10/0x10
[   22.232540]  ? iommufd_fops_release+0x2a3/0x300
[   22.232768]  ? iommufd_fops_release+0x2a3/0x300
[   22.232943]  ? __pfx_iommufd_fops_release+0x10/0x10
[   22.233131]  ? rcu_is_watching+0x19/0xc0
[   22.233337]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   22.233540]  ? __pfx_iommufd_fops_release+0x10/0x10
[   22.233724]  __fput+0x424/0xaf0
[   22.233857]  ____fput+0x1f/0x30
[   22.234037]  task_work_run+0x19d/0x2b0
[   22.234183]  ? __pfx_task_work_run+0x10/0x10
[   22.234347]  ? __sanitizer_cov_trace_const_cmp1+0x1e/0x30
[   22.234614]  ? switch_task_namespaces+0xa9/0xe0
[   22.234792]  do_exit+0xac9/0x2790
[   22.234923]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   22.235154]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   22.235340]  ? __pfx_do_exit+0x10/0x10
[   22.235484]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   22.235774]  ? security_file_ioctl+0x9d/0xd0
[   22.235940]  make_task_dead+0x182/0x3c0
[   22.236088]  rewind_stack_and_make_dead+0x17/0x20
[   22.236273] RIP: 0033:0x7fd39243ee5d
[   22.236464] Code: Unable to access opcode bytes at 0x7fd39243ee33.
[   22.236688] RSP: 002b:00007ffe384c51e8 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   22.237024] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007fd39243ee5d
[   22.237283] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   22.237546] RBP: 00007ffe384c5200 R08: 0000000000000800 R09: 0000000000000800
[   22.237859] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffe384c5318
[   22.238117] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007fd392762000
[   22.238441]  </TASK>
[   22.238527] irq event stamp: 0
[   22.238650] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   22.238882] hardirqs last disabled at (0): [<ffffffff8122f2d1>] copy_process+0x1c51/0x7140
[   22.239205] softirqs last  enabled at (0): [<ffffffff8122f312>] copy_process+0x1c92/0x7140
[   22.239548] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   22.239782] ---[ end trace 0000000000000000 ]---
[   22.242544] iommufd_mock iommufd_mock238: Adding to iommu group 238
[   22.242831] iommufd_mock iommufd_mock238: Removing from iommu group 238
[   22.243095] general protection fault, probably for non-canonical address 0xdffffc0000000006: 0000 [#239] PREEMPT SMP KASAN NOPTI
[   22.243509] KASAN: null-ptr-deref in range [0x0000000000000030-0x0000000000000037]
[   22.243784] CPU: 0 PID: 961 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   22.244141] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   22.244550] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   22.244766] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   22.245426] RSP: 0018:ffff8880110efba8 EFLAGS: 00010206
[   22.245620] RAX: dffffc0000000000 RBX: ffff88802b8e5000 RCX: 0000000000000000
[   22.245879] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   22.246138] RBP: ffff8880110efbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   22.246396] R10: ffff88800aad88df R11: 5f6466756d6d6f69 R12: 0000000000000000
[   22.246657] R13: ffffffff85cc0180 R14: ffff8880111b7da0 R15: ffffffff87070ae0
[   22.246923] FS:  00007f86c80ea600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   22.247215] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   22.247426] CR2: 0000000020000080 CR3: 0000000013544000 CR4: 0000000000750ef0
[   22.247699] PKRU: 55555554
[   22.247804] Call Trace:
[   22.247901]  <TASK>
[   22.247984]  ? show_regs+0x6e/0x80
[   22.248121]  ? die_addr+0x45/0xb0
[   22.248254]  ? exc_general_protection+0x159/0x250
[   22.248439]  ? asm_exc_general_protection+0x2b/0x30
[   22.248626]  ? sysfs_remove_link_from_group+0x21/0x90
[   22.248818]  ? sysfs_remove_link_from_group+0x37/0x90
[   22.249010]  ? sysfs_remove_link_from_group+0x21/0x90
[   22.249201]  iommu_device_unlink+0x85/0xd0
[   22.249359]  iommu_deinit_device+0x11f/0x4c0
[   22.249525]  __iommu_group_remove_device+0x26b/0x300
[   22.249717]  iommu_group_remove_device+0x8a/0xb0
[   22.249894]  iommufd_test+0x1f1a/0x2d10
[   22.250041]  ? __pfx_lock_release+0x10/0x10
[   22.250201]  ? __pfx_lock_acquire+0x10/0x10
[   22.250364]  ? __pfx_iommufd_test+0x10/0x10
[   22.250524]  ? __sanitizer_cov_trace_const_cmp8+0x1c/0x30
[   22.250730]  iommufd_fops_ioctl+0x377/0x510
[   22.250897]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   22.251073]  ? trace_hardirqs_on+0x26/0x120
[   22.251232]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   22.251461]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   22.251644]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   22.251842]  ? security_file_ioctl+0x9d/0xd0
[   22.252005]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   22.252181]  __x64_sys_ioctl+0x1b9/0x230
[   22.252328]  do_syscall_64+0x3c/0x90
[   22.252463]  entry_SYSCALL_64_after_hwframe+0x6e/0xd8
[   22.252648] RIP: 0033:0x7f86c7e3ee5d
[   22.252782] Code: ff c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d 93 af 1b 00 f7 d8 64 89 01 48
[   22.253427] RSP: 002b:00007ffd44ae1158 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   22.253696] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f86c7e3ee5d
[   22.253950] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   22.254202] RBP: 00007ffd44ae1170 R08: 0000000000000800 R09: 0000000000000800
[   22.254455] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffd44ae1288
[   22.254712] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f86c812b000
[   22.254976]  </TASK>
[   22.255060] Modules linked in:
[   22.255315] ---[ end trace 0000000000000000 ]---
[   22.255488] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   22.255700] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   22.256381] RSP: 0018:ffff88802457fba8 EFLAGS: 00010206
[   22.256633] RAX: dffffc0000000000 RBX: ffff888014f9b000 RCX: 0000000000000000
[   22.256892] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   22.257216] RBP: ffff88802457fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   22.257476] R10: ffff88800aad88df R11: 0000000000000001 R12: 0000000000000000
[   22.257752] R13: ffffffff85cc0180 R14: ffff8880109b6ac0 R15: ffffffff87070ae0
[   22.258032] FS:  00007f86c80ea600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   22.258334] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   22.258605] CR2: 0000000020000080 CR3: 0000000013544000 CR4: 0000000000750ef0
[   22.258870] PKRU: 55555554
[   22.259231] ------------[ cut here ]------------
[   22.259437] WARNING: CPU: 0 PID: 961 at drivers/iommu/iommufd/main.c:258 iommufd_fops_release+0x2a3/0x300
[   22.259786] Modules linked in:
[   22.259936] CPU: 0 PID: 961 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   22.260246] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   22.260699] RIP: 0010:iommufd_fops_release+0x2a3/0x300
[   22.260888] Code: 45 d0 65 48 2b 04 25 28 00 00 00 75 54 48 81 c4 88 00 00 00 31 c0 5b 41 5c 41 5d 41 5e 41 5f 5d c3 cc cc cc cc e8 ad 4f 0a fe <0f> 0b eb a6 e8 74 23 67 fe e9 f6 fe ff ff 48 89 85 50 ff ff ff e8
[   22.261585] RSP: 0018:ffff8880110efc00 EFLAGS: 00010293
[   22.261823] RAX: 0000000000000000 RBX: ffff88800fe06008 RCX: 0000000000000000
[   22.262077] RDX: ffff888016492500 RSI: ffffffff835563e3 RDI: ffffffff86702b40
[   22.262341] RBP: ffff8880110efcb0 R08: 0000000000000000 R09: fffffbfff0eb2644
[   22.262649] R10: ffffffff87593227 R11: ffff8880134ff600 R12: 0000000000000000
[   22.262912] R13: ffff888012210418 R14: ffff8880110efc48 R15: ffffffff83556140
[   22.263166] FS:  0000000000000000(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   22.263515] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   22.263723] CR2: 0000000020000080 CR3: 000000000687e000 CR4: 0000000000750ef0
[   22.264028] PKRU: 55555554
[   22.264130] Call Trace:
[   22.264222]  <TASK>
[   22.264303]  ? show_regs+0x6e/0x80
[   22.264435]  ? __warn+0xef/0x340
[   22.264567]  ? report_bug+0x25e/0x4b0
[   22.264753]  ? iommufd_fops_release+0x2a3/0x300
[   22.264923]  ? report_bug+0x2cb/0x4b0
[   22.265065]  ? handle_bug+0x46/0x90
[   22.265217]  ? exc_invalid_op+0x1d/0x50
[   22.265398]  ? asm_exc_invalid_op+0x1f/0x30
[   22.265554]  ? __pfx_iommufd_fops_release+0x10/0x10
[   22.265742]  ? iommufd_fops_release+0x2a3/0x300
[   22.265950]  ? iommufd_fops_release+0x2a3/0x300
[   22.266121]  ? __pfx_iommufd_fops_release+0x10/0x10
[   22.266301]  ? rcu_is_watching+0x19/0xc0
[   22.266508]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   22.266718]  ? __pfx_iommufd_fops_release+0x10/0x10
[   22.266906]  __fput+0x424/0xaf0
[   22.267033]  ____fput+0x1f/0x30
[   22.267155]  task_work_run+0x19d/0x2b0
[   22.267297]  ? __pfx_task_work_run+0x10/0x10
[   22.267468]  ? __sanitizer_cov_trace_const_cmp1+0x1e/0x30
[   22.267696]  ? switch_task_namespaces+0xa9/0xe0
[   22.267884]  do_exit+0xac9/0x2790
[   22.268011]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   22.268299]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   22.268482]  ? __pfx_do_exit+0x10/0x10
[   22.268623]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   22.268881]  ? security_file_ioctl+0x9d/0xd0
[   22.269044]  make_task_dead+0x182/0x3c0
[   22.269189]  rewind_stack_and_make_dead+0x17/0x20
[   22.269382] RIP: 0033:0x7f86c7e3ee5d
[   22.269551] Code: Unable to access opcode bytes at 0x7f86c7e3ee33.
[   22.269770] RSP: 002b:00007ffd44ae1158 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   22.270083] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f86c7e3ee5d
[   22.270337] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   22.270613] RBP: 00007ffd44ae1170 R08: 0000000000000800 R09: 0000000000000800
[   22.270918] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffd44ae1288
[   22.271173] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f86c812b000
[   22.271432]  </TASK>
[   22.271516] irq event stamp: 0
[   22.271652] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   22.271913] hardirqs last disabled at (0): [<ffffffff8122f2d1>] copy_process+0x1c51/0x7140
[   22.272214] softirqs last  enabled at (0): [<ffffffff8122f312>] copy_process+0x1c92/0x7140
[   22.272561] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   22.272785] ---[ end trace 0000000000000000 ]---
[   22.275638] iommufd_mock iommufd_mock239: Adding to iommu group 239
[   22.275949] iommufd_mock iommufd_mock239: Removing from iommu group 239
[   22.276204] general protection fault, probably for non-canonical address 0xdffffc0000000006: 0000 [#240] PREEMPT SMP KASAN NOPTI
[   22.276609] KASAN: null-ptr-deref in range [0x0000000000000030-0x0000000000000037]
[   22.276887] CPU: 0 PID: 962 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   22.277226] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   22.277625] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   22.277836] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   22.278482] RSP: 0018:ffff888013c3fba8 EFLAGS: 00010206
[   22.278673] RAX: dffffc0000000000 RBX: ffff888014568000 RCX: 0000000000000000
[   22.278952] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   22.279207] RBP: ffff888013c3fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   22.279460] R10: ffff88800aad88df R11: 5f6466756d6d6f69 R12: 0000000000000000
[   22.279714] R13: ffffffff85cc0180 R14: ffff8880111b7c40 R15: ffffffff87070ae0
[   22.279968] FS:  00007fcd53b5d600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   22.280253] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   22.280460] CR2: 0000000020000080 CR3: 000000000efe6000 CR4: 0000000000750ef0
[   22.280715] PKRU: 55555554
[   22.280816] Call Trace:
[   22.280908]  <TASK>
[   22.280990]  ? show_regs+0x6e/0x80
[   22.281124]  ? die_addr+0x45/0xb0
[   22.281255]  ? exc_general_protection+0x159/0x250
[   22.281436]  ? asm_exc_general_protection+0x2b/0x30
[   22.281619]  ? sysfs_remove_link_from_group+0x21/0x90
[   22.281807]  ? sysfs_remove_link_from_group+0x37/0x90
[   22.281994]  ? sysfs_remove_link_from_group+0x21/0x90
[   22.282182]  iommu_device_unlink+0x85/0xd0
[   22.282336]  iommu_deinit_device+0x11f/0x4c0
[   22.282499]  __iommu_group_remove_device+0x26b/0x300
[   22.282686]  iommu_group_remove_device+0x8a/0xb0
[   22.282874]  iommufd_test+0x1f1a/0x2d10
[   22.283018]  ? __pfx_lock_release+0x10/0x10
[   22.283175]  ? __pfx_lock_acquire+0x10/0x10
[   22.283334]  ? __pfx_iommufd_test+0x10/0x10
[   22.283491]  ? __sanitizer_cov_trace_const_cmp8+0x1c/0x30
[   22.283692]  iommufd_fops_ioctl+0x377/0x510
[   22.283851]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   22.284026]  ? trace_hardirqs_on+0x26/0x120
[   22.284186]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   22.284414]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   22.284598]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   22.284796]  ? security_file_ioctl+0x9d/0xd0
[   22.284960]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   22.285135]  __x64_sys_ioctl+0x1b9/0x230
[   22.285283]  do_syscall_64+0x3c/0x90
[   22.285418]  entry_SYSCALL_64_after_hwframe+0x6e/0xd8
[   22.285603] RIP: 0033:0x7fcd5383ee5d
[   22.285737] Code: ff c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d 93 af 1b 00 f7 d8 64 89 01 48
[   22.286384] RSP: 002b:00007ffcdd27caa8 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   22.286654] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007fcd5383ee5d
[   22.286915] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   22.287168] RBP: 00007ffcdd27cac0 R08: 0000000000000800 R09: 0000000000000800
[   22.287422] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffcdd27cbd8
[   22.287676] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007fcd53b9e000
[   22.287935]  </TASK>
[   22.288018] Modules linked in:
[   22.288342] ---[ end trace 0000000000000000 ]---
[   22.288512] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   22.288721] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   22.289367] RSP: 0018:ffff88802457fba8 EFLAGS: 00010206
[   22.289556] RAX: dffffc0000000000 RBX: ffff888014f9b000 RCX: 0000000000000000
[   22.289819] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   22.290139] RBP: ffff88802457fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   22.290394] R10: ffff88800aad88df R11: 0000000000000001 R12: 0000000000000000
[   22.290713] R13: ffffffff85cc0180 R14: ffff8880109b6ac0 R15: ffffffff87070ae0
[   22.290981] FS:  00007fcd53b5d600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   22.291267] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   22.291499] CR2: 0000000020000080 CR3: 000000000efe6000 CR4: 0000000000750ef0
[   22.291792] PKRU: 55555554
[   22.292200] ------------[ cut here ]------------
[   22.292369] WARNING: CPU: 0 PID: 962 at drivers/iommu/iommufd/main.c:258 iommufd_fops_release+0x2a3/0x300
[   22.292732] Modules linked in:
[   22.292890] CPU: 0 PID: 962 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   22.293199] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   22.293656] RIP: 0010:iommufd_fops_release+0x2a3/0x300
[   22.293846] Code: 45 d0 65 48 2b 04 25 28 00 00 00 75 54 48 81 c4 88 00 00 00 31 c0 5b 41 5c 41 5d 41 5e 41 5f 5d c3 cc cc cc cc e8 ad 4f 0a fe <0f> 0b eb a6 e8 74 23 67 fe e9 f6 fe ff ff 48 89 85 50 ff ff ff e8
[   22.294561] RSP: 0018:ffff888013c3fc00 EFLAGS: 00010293
[   22.294795] RAX: 0000000000000000 RBX: ffff88800fe06a08 RCX: 0000000000000000
[   22.295091] RDX: ffff888014580000 RSI: ffffffff835563e3 RDI: ffffffff86702b40
[   22.295346] RBP: ffff888013c3fcb0 R08: 0000000000000000 R09: fffffbfff0eb2644
[   22.295608] R10: ffffffff87593227 R11: ffff88800f7ed000 R12: 0000000000000000
[   22.295921] R13: ffff888012210698 R14: ffff888013c3fc48 R15: ffffffff83556140
[   22.296174] FS:  0000000000000000(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   22.296522] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   22.296729] CR2: 0000000020000080 CR3: 000000000687e000 CR4: 0000000000750ef0
[   22.297004] PKRU: 55555554
[   22.297142] Call Trace:
[   22.297237]  <TASK>
[   22.297320]  ? show_regs+0x6e/0x80
[   22.297455]  ? __warn+0xef/0x340
[   22.297641]  ? report_bug+0x25e/0x4b0
[   22.297785]  ? iommufd_fops_release+0x2a3/0x300
[   22.297958]  ? report_bug+0x2cb/0x4b0
[   22.298108]  ? handle_bug+0x46/0x90
[   22.298297]  ? exc_invalid_op+0x1d/0x50
[   22.298445]  ? asm_exc_invalid_op+0x1f/0x30
[   22.298612]  ? __pfx_iommufd_fops_release+0x10/0x10
[   22.298801]  ? iommufd_fops_release+0x2a3/0x300
[   22.298974]  ? iommufd_fops_release+0x2a3/0x300
[   22.299154]  ? __pfx_iommufd_fops_release+0x10/0x10
[   22.299390]  ? rcu_is_watching+0x19/0xc0
[   22.299543]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   22.299745]  ? __pfx_iommufd_fops_release+0x10/0x10
[   22.299984]  __fput+0x424/0xaf0
[   22.300113]  ____fput+0x1f/0x30
[   22.300238]  task_work_run+0x19d/0x2b0
[   22.300384]  ? __pfx_task_work_run+0x10/0x10
[   22.300555]  ? __sanitizer_cov_trace_const_cmp1+0x1e/0x30
[   22.300803]  ? switch_task_namespaces+0xa9/0xe0
[   22.300977]  do_exit+0xac9/0x2790
[   22.301107]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   22.301399]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   22.301586]  ? __pfx_do_exit+0x10/0x10
[   22.301730]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   22.301984]  ? security_file_ioctl+0x9d/0xd0
[   22.302151]  make_task_dead+0x182/0x3c0
[   22.302299]  rewind_stack_and_make_dead+0x17/0x20
[   22.302486] RIP: 0033:0x7fcd5383ee5d
[   22.302679] Code: Unable to access opcode bytes at 0x7fcd5383ee33.
[   22.302906] RSP: 002b:00007ffcdd27caa8 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   22.303181] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007fcd5383ee5d
[   22.303440] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   22.303763] RBP: 00007ffcdd27cac0 R08: 0000000000000800 R09: 0000000000000800
[   22.304022] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffcdd27cbd8
[   22.304334] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007fcd53b9e000
[   22.304599]  </TASK>
[   22.304685] irq event stamp: 0
[   22.304805] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   22.305091] hardirqs last disabled at (0): [<ffffffff8122f2d1>] copy_process+0x1c51/0x7140
[   22.305392] softirqs last  enabled at (0): [<ffffffff8122f312>] copy_process+0x1c92/0x7140
[   22.305753] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   22.305982] ---[ end trace 0000000000000000 ]---
[   22.308762] iommufd_mock iommufd_mock240: Adding to iommu group 240
[   22.309013] iommufd_mock iommufd_mock240: Removing from iommu group 240
[   22.309272] general protection fault, probably for non-canonical address 0xdffffc0000000006: 0000 [#241] PREEMPT SMP KASAN NOPTI
[   22.309685] KASAN: null-ptr-deref in range [0x0000000000000030-0x0000000000000037]
[   22.309998] CPU: 0 PID: 963 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   22.310313] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   22.310722] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   22.310942] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   22.311601] RSP: 0018:ffff88800b997ba8 EFLAGS: 00010206
[   22.311791] RAX: dffffc0000000000 RBX: ffff88801456e000 RCX: 0000000000000000
[   22.312044] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   22.312297] RBP: ffff88800b997bc0 R08: 0000000000000001 R09: ffffed100155b11b
[   22.312551] R10: ffff88800aad88df R11: 5f6466756d6d6f69 R12: 0000000000000000
[   22.312804] R13: ffffffff85cc0180 R14: ffff8880111b77c0 R15: ffffffff87070ae0
[   22.313057] FS:  00007efeaa1df600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   22.313342] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   22.313549] CR2: 0000000020000080 CR3: 0000000013544000 CR4: 0000000000750ef0
[   22.313804] PKRU: 55555554
[   22.313905] Call Trace:
[   22.313997]  <TASK>
[   22.314079]  ? show_regs+0x6e/0x80
[   22.314213]  ? die_addr+0x45/0xb0
[   22.314343]  ? exc_general_protection+0x159/0x250
[   22.314527]  ? asm_exc_general_protection+0x2b/0x30
[   22.314715]  ? sysfs_remove_link_from_group+0x21/0x90
[   22.314910]  ? sysfs_remove_link_from_group+0x37/0x90
[   22.315098]  ? sysfs_remove_link_from_group+0x21/0x90
[   22.315285]  iommu_device_unlink+0x85/0xd0
[   22.315439]  iommu_deinit_device+0x11f/0x4c0
[   22.315602]  __iommu_group_remove_device+0x26b/0x300
[   22.315789]  iommu_group_remove_device+0x8a/0xb0
[   22.315962]  iommufd_test+0x1f1a/0x2d10
[   22.316106]  ? __pfx_lock_release+0x10/0x10
[   22.316263]  ? __pfx_lock_acquire+0x10/0x10
[   22.316422]  ? __pfx_iommufd_test+0x10/0x10
[   22.316579]  ? __sanitizer_cov_trace_const_cmp8+0x1c/0x30
[   22.316780]  iommufd_fops_ioctl+0x377/0x510
[   22.316938]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   22.317113]  ? trace_hardirqs_on+0x26/0x120
[   22.317272]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   22.317502]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   22.317685]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   22.317900]  ? security_file_ioctl+0x9d/0xd0
[   22.318064]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   22.318239]  __x64_sys_ioctl+0x1b9/0x230
[   22.318387]  do_syscall_64+0x3c/0x90
[   22.318522]  entry_SYSCALL_64_after_hwframe+0x6e/0xd8
[   22.318711] RIP: 0033:0x7efea9e3ee5d
[   22.318851] Code: ff c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d 93 af 1b 00 f7 d8 64 89 01 48
[   22.319501] RSP: 002b:00007fffb6c89c78 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   22.319771] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007efea9e3ee5d
[   22.320024] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   22.320277] RBP: 00007fffb6c89c90 R08: 0000000000000800 R09: 0000000000000800
[   22.320530] R10: 0000000000000000 R11: 0000000000000213 R12: 00007fffb6c89da8
[   22.320783] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007efeaa220000
[   22.321042]  </TASK>
[   22.321126] Modules linked in:
[   22.321363] ---[ end trace 0000000000000000 ]---
[   22.321536] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   22.321749] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   22.322409] RSP: 0018:ffff88802457fba8 EFLAGS: 00010206
[   22.322609] RAX: dffffc0000000000 RBX: ffff888014f9b000 RCX: 0000000000000000
[   22.322871] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   22.323203] RBP: ffff88802457fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   22.323457] R10: ffff88800aad88df R11: 0000000000000001 R12: 0000000000000000
[   22.323721] R13: ffffffff85cc0180 R14: ffff8880109b6ac0 R15: ffffffff87070ae0
[   22.324025] FS:  00007efeaa1df600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   22.324311] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   22.324541] CR2: 0000000020000080 CR3: 0000000013544000 CR4: 0000000000750ef0
[   22.324835] PKRU: 55555554
[   22.325239] ------------[ cut here ]------------
[   22.325411] WARNING: CPU: 0 PID: 963 at drivers/iommu/iommufd/main.c:258 iommufd_fops_release+0x2a3/0x300
[   22.325818] Modules linked in:
[   22.325937] CPU: 0 PID: 963 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   22.326252] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   22.326737] RIP: 0010:iommufd_fops_release+0x2a3/0x300
[   22.326935] Code: 45 d0 65 48 2b 04 25 28 00 00 00 75 54 48 81 c4 88 00 00 00 31 c0 5b 41 5c 41 5d 41 5e 41 5f 5d c3 cc cc cc cc e8 ad 4f 0a fe <0f> 0b eb a6 e8 74 23 67 fe e9 f6 fe ff ff 48 89 85 50 ff ff ff e8
[   22.327655] RSP: 0018:ffff88800b997c00 EFLAGS: 00010293
[   22.327849] RAX: 0000000000000000 RBX: ffff88800fe06408 RCX: 0000000000000000
[   22.328165] RDX: ffff888012c34a00 RSI: ffffffff835563e3 RDI: ffffffff86702b40
[   22.328424] RBP: ffff88800b997cb0 R08: 0000000000000000 R09: fffffbfff0eb2644
[   22.328745] R10: ffffffff87593227 R11: ffff8880130d0200 R12: 0000000000000000
[   22.329004] R13: ffff88801941ce18 R14: ffff88800b997c48 R15: ffffffff83556140
[   22.329323] FS:  0000000000000000(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   22.329614] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   22.329834] CR2: 0000000020000080 CR3: 000000000687e000 CR4: 0000000000750ef0
[   22.330146] PKRU: 55555554
[   22.330250] Call Trace:
[   22.330344]  <TASK>
[   22.330432]  ? show_regs+0x6e/0x80
[   22.330631]  ? __warn+0xef/0x340
[   22.330762]  ? report_bug+0x25e/0x4b0
[   22.330908]  ? iommufd_fops_release+0x2a3/0x300
[   22.331083]  ? report_bug+0x2cb/0x4b0
[   22.331227]  ? handle_bug+0x46/0x90
[   22.331363]  ? exc_invalid_op+0x1d/0x50
[   22.331569]  ? asm_exc_invalid_op+0x1f/0x30
[   22.331728]  ? __pfx_iommufd_fops_release+0x10/0x10
[   22.331914]  ? iommufd_fops_release+0x2a3/0x300
[   22.332094]  ? iommufd_fops_release+0x2a3/0x300
[   22.332320]  ? __pfx_iommufd_fops_release+0x10/0x10
[   22.332504]  ? rcu_is_watching+0x19/0xc0
[   22.332656]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   22.332914]  ? __pfx_iommufd_fops_release+0x10/0x10
[   22.333098]  __fput+0x424/0xaf0
[   22.333226]  ____fput+0x1f/0x30
[   22.333358]  task_work_run+0x19d/0x2b0
[   22.333553]  ? __pfx_task_work_run+0x10/0x10
[   22.333717]  ? __sanitizer_cov_trace_const_cmp1+0x1e/0x30
[   22.333919]  ? switch_task_namespaces+0xa9/0xe0
[   22.334146]  do_exit+0xac9/0x2790
[   22.334276]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   22.334508]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   22.334763]  ? __pfx_do_exit+0x10/0x10
[   22.334908]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   22.335109]  ? security_file_ioctl+0x9d/0xd0
[   22.335277]  make_task_dead+0x182/0x3c0
[   22.335425]  rewind_stack_and_make_dead+0x17/0x20
[   22.335604] RIP: 0033:0x7efea9e3ee5d
[   22.335807] Code: Unable to access opcode bytes at 0x7efea9e3ee33.
[   22.336033] RSP: 002b:00007fffb6c89c78 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   22.336312] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007efea9e3ee5d
[   22.336622] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   22.336881] RBP: 00007fffb6c89c90 R08: 0000000000000800 R09: 0000000000000800
[   22.337198] R10: 0000000000000000 R11: 0000000000000213 R12: 00007fffb6c89da8
[   22.337456] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007efeaa220000
[   22.337781]  </TASK>
[   22.337868] irq event stamp: 0
[   22.337984] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   22.338218] hardirqs last disabled at (0): [<ffffffff8122f2d1>] copy_process+0x1c51/0x7140
[   22.338570] softirqs last  enabled at (0): [<ffffffff8122f312>] copy_process+0x1c92/0x7140
[   22.338882] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   22.339111] ---[ end trace 0000000000000000 ]---
[   22.341942] iommufd_mock iommufd_mock241: Adding to iommu group 241
[   22.342191] iommufd_mock iommufd_mock241: Removing from iommu group 241
[   22.342462] general protection fault, probably for non-canonical address 0xdffffc0000000006: 0000 [#242] PREEMPT SMP KASAN NOPTI
[   22.342884] KASAN: null-ptr-deref in range [0x0000000000000030-0x0000000000000037]
[   22.343201] CPU: 0 PID: 964 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   22.343516] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   22.343923] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   22.344138] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   22.344798] RSP: 0018:ffff8880110efba8 EFLAGS: 00010206
[   22.344991] RAX: dffffc0000000000 RBX: ffff88801456d000 RCX: 0000000000000000
[   22.345250] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   22.345508] RBP: ffff8880110efbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   22.345769] R10: ffff88800aad88df R11: 5f6466756d6d6f69 R12: 0000000000000000
[   22.346022] R13: ffffffff85cc0180 R14: ffff8880111b70e0 R15: ffffffff87070ae0
[   22.346283] FS:  00007f7a804a2600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   22.346574] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   22.346790] CR2: 0000000020000080 CR3: 000000000efe6000 CR4: 0000000000750ef0
[   22.347050] PKRU: 55555554
[   22.347154] Call Trace:
[   22.347250]  <TASK>
[   22.347332]  ? show_regs+0x6e/0x80
[   22.347466]  ? die_addr+0x45/0xb0
[   22.347596]  ? exc_general_protection+0x159/0x250
[   22.347776]  ? asm_exc_general_protection+0x2b/0x30
[   22.347962]  ? sysfs_remove_link_from_group+0x21/0x90
[   22.348151]  ? sysfs_remove_link_from_group+0x37/0x90
[   22.348347]  ? sysfs_remove_link_from_group+0x21/0x90
[   22.348534]  iommu_device_unlink+0x85/0xd0
[   22.348688]  iommu_deinit_device+0x11f/0x4c0
[   22.348851]  __iommu_group_remove_device+0x26b/0x300
[   22.349038]  iommu_group_remove_device+0x8a/0xb0
[   22.349212]  iommufd_test+0x1f1a/0x2d10
[   22.349358]  ? __pfx_lock_release+0x10/0x10
[   22.349520]  ? __pfx_lock_acquire+0x10/0x10
[   22.349678]  ? __pfx_iommufd_test+0x10/0x10
[   22.349835]  ? __sanitizer_cov_trace_const_cmp8+0x1c/0x30
[   22.350036]  iommufd_fops_ioctl+0x377/0x510
[   22.350194]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   22.350370]  ? trace_hardirqs_on+0x26/0x120
[   22.350540]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   22.350776]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   22.350962]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   22.351160]  ? security_file_ioctl+0x9d/0xd0
[   22.351323]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   22.351498]  __x64_sys_ioctl+0x1b9/0x230
[   22.351649]  do_syscall_64+0x3c/0x90
[   22.351788]  entry_SYSCALL_64_after_hwframe+0x6e/0xd8
[   22.351973] RIP: 0033:0x7f7a8023ee5d
[   22.352107] Code: ff c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d 93 af 1b 00 f7 d8 64 89 01 48
[   22.352760] RSP: 002b:00007fff08483ac8 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   22.353034] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f7a8023ee5d
[   22.353287] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   22.353540] RBP: 00007fff08483ae0 R08: 0000000000000800 R09: 0000000000000800
[   22.353795] R10: 0000000000000000 R11: 0000000000000213 R12: 00007fff08483bf8
[   22.354052] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f7a804e3000
[   22.354310]  </TASK>
[   22.354393] Modules linked in:
[   22.354571] ---[ end trace 0000000000000000 ]---
[   22.354753] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   22.354966] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   22.355627] RSP: 0018:ffff88802457fba8 EFLAGS: 00010206
[   22.355820] RAX: dffffc0000000000 RBX: ffff888014f9b000 RCX: 0000000000000000
[   22.356082] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   22.356372] RBP: ffff88802457fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   22.356676] R10: ffff88800aad88df R11: 0000000000000001 R12: 0000000000000000
[   22.356931] R13: ffffffff85cc0180 R14: ffff8880109b6ac0 R15: ffffffff87070ae0
[   22.357259] FS:  00007f7a804a2600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   22.357552] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   22.357828] CR2: 0000000020000080 CR3: 000000000efe6000 CR4: 0000000000750ef0
[   22.358089] PKRU: 55555554
[   22.358497] ------------[ cut here ]------------
[   22.358786] WARNING: CPU: 0 PID: 964 at drivers/iommu/iommufd/main.c:258 iommufd_fops_release+0x2a3/0x300
[   22.359139] Modules linked in:
[   22.359256] CPU: 0 PID: 964 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   22.359641] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   22.360050] RIP: 0010:iommufd_fops_release+0x2a3/0x300
[   22.360306] Code: 45 d0 65 48 2b 04 25 28 00 00 00 75 54 48 81 c4 88 00 00 00 31 c0 5b 41 5c 41 5d 41 5e 41 5f 5d c3 cc cc cc cc e8 ad 4f 0a fe <0f> 0b eb a6 e8 74 23 67 fe e9 f6 fe ff ff 48 89 85 50 ff ff ff e8
[   22.361027] RSP: 0018:ffff8880110efc00 EFLAGS: 00010293
[   22.361222] RAX: 0000000000000000 RBX: ffff88800fe06108 RCX: 0000000000000000
[   22.361542] RDX: ffff888012c30000 RSI: ffffffff835563e3 RDI: ffffffff86702b40
[   22.361802] RBP: ffff8880110efcb0 R08: 0000000000000000 R09: fffffbfff0eb2644
[   22.362118] R10: ffffffff87593227 R11: ffff8880139fb800 R12: 0000000000000000
[   22.362377] R13: ffff888013255598 R14: ffff8880110efc48 R15: ffffffff83556140
[   22.362650] FS:  0000000000000000(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   22.363006] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   22.363218] CR2: 0000000020000080 CR3: 000000000687e000 CR4: 0000000000750ef0
[   22.363478] PKRU: 55555554
[   22.363601] Call Trace:
[   22.363738]  <TASK>
[   22.363821]  ? show_regs+0x6e/0x80
[   22.363956]  ? __warn+0xef/0x340
[   22.364109]  ? report_bug+0x25e/0x4b0
[   22.364310]  ? iommufd_fops_release+0x2a3/0x300
[   22.364483]  ? report_bug+0x2cb/0x4b0
[   22.364628]  ? handle_bug+0x46/0x90
[   22.364764]  ? exc_invalid_op+0x1d/0x50
[   22.364912]  ? asm_exc_invalid_op+0x1f/0x30
[   22.365070]  ? __pfx_iommufd_fops_release+0x10/0x10
[   22.365257]  ? iommufd_fops_release+0x2a3/0x300
[   22.365430]  ? iommufd_fops_release+0x2a3/0x300
[   22.365605]  ? __pfx_iommufd_fops_release+0x10/0x10
[   22.365788]  ? rcu_is_watching+0x19/0xc0
[   22.365941]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   22.366143]  ? __pfx_iommufd_fops_release+0x10/0x10
[   22.366327]  __fput+0x424/0xaf0
[   22.366455]  ____fput+0x1f/0x30
[   22.366587]  task_work_run+0x19d/0x2b0
[   22.366734]  ? __pfx_task_work_run+0x10/0x10
[   22.366902]  ? __sanitizer_cov_trace_const_cmp1+0x1e/0x30
[   22.367104]  ? switch_task_namespaces+0xa9/0xe0
[   22.367278]  do_exit+0xac9/0x2790
[   22.367408]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   22.367641]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   22.367826]  ? __pfx_do_exit+0x10/0x10
[   22.367970]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   22.368172]  ? security_file_ioctl+0x9d/0xd0
[   22.368338]  make_task_dead+0x182/0x3c0
[   22.368487]  rewind_stack_and_make_dead+0x17/0x20
[   22.368667] RIP: 0033:0x7f7a8023ee5d
[   22.368803] Code: Unable to access opcode bytes at 0x7f7a8023ee33.
[   22.369027] RSP: 002b:00007fff08483ac8 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   22.369302] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f7a8023ee5d
[   22.369561] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   22.369819] RBP: 00007fff08483ae0 R08: 0000000000000800 R09: 0000000000000800
[   22.370078] R10: 0000000000000000 R11: 0000000000000213 R12: 00007fff08483bf8
[   22.370337] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f7a804e3000
[   22.370608]  </TASK>
[   22.370695] irq event stamp: 0
[   22.370814] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   22.371043] hardirqs last disabled at (0): [<ffffffff8122f2d1>] copy_process+0x1c51/0x7140
[   22.371344] softirqs last  enabled at (0): [<ffffffff8122f312>] copy_process+0x1c92/0x7140
[   22.371645] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   22.371873] ---[ end trace 0000000000000000 ]---
[   22.374373] iommufd_mock iommufd_mock242: Adding to iommu group 242
[   22.374664] iommufd_mock iommufd_mock242: Removing from iommu group 242
[   22.374939] general protection fault, probably for non-canonical address 0xdffffc0000000006: 0000 [#243] PREEMPT SMP KASAN NOPTI
[   22.375361] KASAN: null-ptr-deref in range [0x0000000000000030-0x0000000000000037]
[   22.375641] CPU: 1 PID: 965 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   22.375962] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   22.376377] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   22.376595] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   22.377268] RSP: 0018:ffff888013c3fba8 EFLAGS: 00010206
[   22.377466] RAX: dffffc0000000000 RBX: ffff8880120be000 RCX: 0000000000000000
[   22.377730] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   22.377993] RBP: ffff888013c3fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   22.378257] R10: ffff88800aad88df R11: 5f6466756d6d6f69 R12: 0000000000000000
[   22.378520] R13: ffffffff85cc0180 R14: ffff8880247bde00 R15: ffffffff87070ae0
[   22.378789] FS:  00007f1d88370600(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
[   22.379086] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   22.379302] CR2: 0000000020000080 CR3: 0000000018934000 CR4: 0000000000750ee0
[   22.379566] PKRU: 55555554
[   22.379672] Call Trace:
[   22.379768]  <TASK>
[   22.379852]  ? show_regs+0x6e/0x80
[   22.379991]  ? die_addr+0x45/0xb0
[   22.380127]  ? exc_general_protection+0x159/0x250
[   22.380315]  ? asm_exc_general_protection+0x2b/0x30
[   22.380505]  ? sysfs_remove_link_from_group+0x21/0x90
[   22.380700]  ? sysfs_remove_link_from_group+0x37/0x90
[   22.380895]  ? sysfs_remove_link_from_group+0x21/0x90
[   22.381091]  iommu_device_unlink+0x85/0xd0
[   22.381251]  iommu_deinit_device+0x11f/0x4c0
[   22.381419]  __iommu_group_remove_device+0x26b/0x300
[   22.381614]  iommu_group_remove_device+0x8a/0xb0
[   22.381794]  iommufd_test+0x1f1a/0x2d10
[   22.381944]  ? __pfx_lock_release+0x10/0x10
[   22.382107]  ? __pfx_lock_acquire+0x10/0x10
[   22.382272]  ? __pfx_iommufd_test+0x10/0x10
[   22.382435]  ? __sanitizer_cov_trace_const_cmp8+0x1c/0x30
[   22.382643]  iommufd_fops_ioctl+0x377/0x510
[   22.382813]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   22.382997]  ? trace_hardirqs_on+0x26/0x120
[   22.383159]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   22.383392]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   22.383580]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   22.383782]  ? security_file_ioctl+0x9d/0xd0
[   22.383948]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   22.384128]  __x64_sys_ioctl+0x1b9/0x230
[   22.384278]  do_syscall_64+0x3c/0x90
[   22.384417]  entry_SYSCALL_64_after_hwframe+0x6e/0xd8
[   22.384606] RIP: 0033:0x7f1d8803ee5d
[   22.384743] Code: ff c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d 93 af 1b 00 f7 d8 64 89 01 48
[   22.385402] RSP: 002b:00007fff42a2e9b8 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   22.385678] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f1d8803ee5d
[   22.385937] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   22.386195] RBP: 00007fff42a2e9d0 R08: 0000000000000800 R09: 0000000000000800
[   22.386454] R10: 0000000000000000 R11: 0000000000000213 R12: 00007fff42a2eae8
[   22.386712] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f1d883b1000
[   22.386985]  </TASK>
[   22.387071] Modules linked in:
[   22.387221] ---[ end trace 0000000000000000 ]---
[   22.387400] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   22.387699] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   22.388548] RSP: 0018:ffff88802457fba8 EFLAGS: 00010206
[   22.388742] RAX: dffffc0000000000 RBX: ffff888014f9b000 RCX: 0000000000000000
[   22.388998] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   22.389255] RBP: ffff88802457fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   22.389512] R10: ffff88800aad88df R11: 0000000000000001 R12: 0000000000000000
[   22.389769] R13: ffffffff85cc0180 R14: ffff8880109b6ac0 R15: ffffffff87070ae0
[   22.390026] FS:  00007f1d88370600(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
[   22.390316] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   22.390526] CR2: 0000000020000080 CR3: 0000000018934000 CR4: 0000000000750ee0
[   22.390850] PKRU: 55555554
[   22.391627] ------------[ cut here ]------------
[   22.391800] WARNING: CPU: 1 PID: 965 at drivers/iommu/iommufd/main.c:258 iommufd_fops_release+0x2a3/0x300
[   22.392146] Modules linked in:
[   22.392263] CPU: 1 PID: 965 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   22.392575] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   22.392978] RIP: 0010:iommufd_fops_release+0x2a3/0x300
[   22.393170] Code: 45 d0 65 48 2b 04 25 28 00 00 00 75 54 48 81 c4 88 00 00 00 31 c0 5b 41 5c 41 5d 41 5e 41 5f 5d c3 cc cc cc cc e8 ad 4f 0a fe <0f> 0b eb a6 e8 74 23 67 fe e9 f6 fe ff ff 48 89 85 50 ff ff ff e8
[   22.393823] RSP: 0018:ffff888013c3fc00 EFLAGS: 00010293
[   22.394015] RAX: 0000000000000000 RBX: ffff88801248a508 RCX: 0000000000000000
[   22.394271] RDX: ffff88801392ca00 RSI: ffffffff835563e3 RDI: ffffffff86702b48
[   22.394528] RBP: ffff888013c3fcb0 R08: 0000000000000000 R09: fffffbfff0eb2644
[   22.394805] R10: ffffffff87593227 R11: ffff8880115d6e00 R12: 0000000000000000
[   22.395062] R13: ffff8880134c2b98 R14: ffff888013c3fc48 R15: ffffffff83556140
[   22.395318] FS:  0000000000000000(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
[   22.395607] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   22.395816] CR2: 0000000020000080 CR3: 000000000687e000 CR4: 0000000000750ee0
[   22.396073] PKRU: 55555554
[   22.396176] Call Trace:
[   22.396269]  <TASK>
[   22.396351]  ? show_regs+0x6e/0x80
[   22.396484]  ? __warn+0xef/0x340
[   22.396611]  ? report_bug+0x25e/0x4b0
[   22.396753]  ? iommufd_fops_release+0x2a3/0x300
[   22.396924]  ? report_bug+0x2cb/0x4b0
[   22.397067]  ? handle_bug+0x46/0x90
[   22.397202]  ? exc_invalid_op+0x1d/0x50
[   22.397347]  ? asm_exc_invalid_op+0x1f/0x30
[   22.397504]  ? __pfx_iommufd_fops_release+0x10/0x10
[   22.397688]  ? iommufd_fops_release+0x2a3/0x300
[   22.397859]  ? iommufd_fops_release+0x2a3/0x300
[   22.398031]  ? __pfx_iommufd_fops_release+0x10/0x10
[   22.398212]  ? rcu_is_watching+0x19/0xc0
[   22.398363]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   22.398563]  ? __pfx_iommufd_fops_release+0x10/0x10
[   22.398755]  __fput+0x424/0xaf0
[   22.398898]  ____fput+0x1f/0x30
[   22.399023]  task_work_run+0x19d/0x2b0
[   22.399168]  ? __pfx_task_work_run+0x10/0x10
[   22.399330]  ? __sanitizer_cov_trace_const_cmp1+0x1e/0x30
[   22.399529]  ? switch_task_namespaces+0xa9/0xe0
[   22.399701]  do_exit+0xac9/0x2790
[   22.399830]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   22.400060]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   22.400244]  ? __pfx_do_exit+0x10/0x10
[   22.400386]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   22.400586]  ? security_file_ioctl+0x9d/0xd0
[   22.400751]  make_task_dead+0x182/0x3c0
[   22.400898]  rewind_stack_and_make_dead+0x17/0x20
[   22.401075] RIP: 0033:0x7f1d8803ee5d
[   22.401211] Code: Unable to access opcode bytes at 0x7f1d8803ee33.
[   22.401432] RSP: 002b:00007fff42a2e9b8 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   22.401705] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f1d8803ee5d
[   22.401962] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   22.402217] RBP: 00007fff42a2e9d0 R08: 0000000000000800 R09: 0000000000000800
[   22.402473] R10: 0000000000000000 R11: 0000000000000213 R12: 00007fff42a2eae8
[   22.402734] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f1d883b1000
[   22.403005]  </TASK>
[   22.403094] irq event stamp: 0
[   22.403209] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   22.403436] hardirqs last disabled at (0): [<ffffffff8122f2d1>] copy_process+0x1c51/0x7140
[   22.403733] softirqs last  enabled at (0): [<ffffffff8122f312>] copy_process+0x1c92/0x7140
[   22.404031] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   22.404258] ---[ end trace 0000000000000000 ]---
[   22.406832] iommufd_mock iommufd_mock243: Adding to iommu group 243
[   22.407092] iommufd_mock iommufd_mock243: Removing from iommu group 243
[   22.407351] general protection fault, probably for non-canonical address 0xdffffc0000000006: 0000 [#244] PREEMPT SMP KASAN NOPTI
[   22.407765] KASAN: null-ptr-deref in range [0x0000000000000030-0x0000000000000037]
[   22.408039] CPU: 1 PID: 966 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   22.408353] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   22.408760] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   22.408972] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   22.409631] RSP: 0018:ffff8880110efba8 EFLAGS: 00010206
[   22.409824] RAX: dffffc0000000000 RBX: ffff8880120bd000 RCX: 0000000000000000
[   22.410082] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   22.410339] RBP: ffff8880110efbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   22.410598] R10: ffff88800aad88df R11: 5f6466756d6d6f69 R12: 0000000000000000
[   22.410867] R13: ffffffff85cc0180 R14: ffff8880247bd260 R15: ffffffff87070ae0
[   22.411126] FS:  00007f5cee774600(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
[   22.411423] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   22.411637] CR2: 0000000020000080 CR3: 0000000018934000 CR4: 0000000000750ee0
[   22.411899] PKRU: 55555554
[   22.412002] Call Trace:
[   22.412096]  <TASK>
[   22.412178]  ? show_regs+0x6e/0x80
[   22.412314]  ? die_addr+0x45/0xb0
[   22.412447]  ? exc_general_protection+0x159/0x250
[   22.412631]  ? asm_exc_general_protection+0x2b/0x30
[   22.412817]  ? sysfs_remove_link_from_group+0x21/0x90
[   22.413008]  ? sysfs_remove_link_from_group+0x37/0x90
[   22.413199]  ? sysfs_remove_link_from_group+0x21/0x90
[   22.413390]  iommu_device_unlink+0x85/0xd0
[   22.413547]  iommu_deinit_device+0x11f/0x4c0
[   22.413713]  __iommu_group_remove_device+0x26b/0x300
[   22.413903]  iommu_group_remove_device+0x8a/0xb0
[   22.414081]  iommufd_test+0x1f1a/0x2d10
[   22.414227]  ? __pfx_lock_release+0x10/0x10
[   22.414387]  ? __pfx_lock_acquire+0x10/0x10
[   22.414549]  ? __pfx_iommufd_test+0x10/0x10
[   22.414709]  ? __sanitizer_cov_trace_const_cmp8+0x1c/0x30
[   22.414921]  iommufd_fops_ioctl+0x377/0x510
[   22.415082]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   22.415261]  ? trace_hardirqs_on+0x26/0x120
[   22.415423]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   22.415656]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   22.415843]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   22.416045]  ? security_file_ioctl+0x9d/0xd0
[   22.416211]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   22.416390]  __x64_sys_ioctl+0x1b9/0x230
[   22.416540]  do_syscall_64+0x3c/0x90
[   22.416677]  entry_SYSCALL_64_after_hwframe+0x6e/0xd8
[   22.416866] RIP: 0033:0x7f5cee43ee5d
[   22.417003] Code: ff c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d 93 af 1b 00 f7 d8 64 89 01 48
[   22.417662] RSP: 002b:00007ffd7abfd7f8 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   22.417938] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f5cee43ee5d
[   22.418196] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   22.418455] RBP: 00007ffd7abfd810 R08: 0000000000000800 R09: 0000000000000800
[   22.418713] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffd7abfd928
[   22.418973] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f5cee7b5000
[   22.419235]  </TASK>
[   22.419321] Modules linked in:
[   22.419452] ---[ end trace 0000000000000000 ]---
[   22.419624] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   22.419836] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   22.420495] RSP: 0018:ffff88802457fba8 EFLAGS: 00010206
[   22.420688] RAX: dffffc0000000000 RBX: ffff888014f9b000 RCX: 0000000000000000
[   22.420945] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   22.421203] RBP: ffff88802457fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   22.421461] R10: ffff88800aad88df R11: 0000000000000001 R12: 0000000000000000
[   22.421719] R13: ffffffff85cc0180 R14: ffff8880109b6ac0 R15: ffffffff87070ae0
[   22.421977] FS:  00007f5cee774600(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
[   22.422268] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   22.422479] CR2: 0000000020000080 CR3: 0000000018934000 CR4: 0000000000750ee0
[   22.422750] PKRU: 55555554
[   22.423108] ------------[ cut here ]------------
[   22.423280] WARNING: CPU: 1 PID: 966 at drivers/iommu/iommufd/main.c:258 iommufd_fops_release+0x2a3/0x300
[   22.423627] Modules linked in:
[   22.423744] CPU: 1 PID: 966 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   22.424059] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   22.424465] RIP: 0010:iommufd_fops_release+0x2a3/0x300
[   22.424657] Code: 45 d0 65 48 2b 04 25 28 00 00 00 75 54 48 81 c4 88 00 00 00 31 c0 5b 41 5c 41 5d 41 5e 41 5f 5d c3 cc cc cc cc e8 ad 4f 0a fe <0f> 0b eb a6 e8 74 23 67 fe e9 f6 fe ff ff 48 89 85 50 ff ff ff e8
[   22.425315] RSP: 0018:ffff8880110efc00 EFLAGS: 00010293
[   22.425507] RAX: 0000000000000000 RBX: ffff88801248ad08 RCX: 0000000000000000
[   22.425765] RDX: ffff88801392a500 RSI: ffffffff835563e3 RDI: ffffffff86702b48
[   22.426022] RBP: ffff8880110efcb0 R08: 0000000000000000 R09: fffffbfff0eb2644
[   22.426280] R10: ffffffff87593227 R11: ffff8880126be800 R12: 0000000000000000
[   22.426538] R13: ffff8880134c2198 R14: ffff8880110efc48 R15: ffffffff83556140
[   22.426809] FS:  0000000000000000(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
[   22.427100] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   22.427311] CR2: 0000000020000080 CR3: 000000000687e000 CR4: 0000000000750ee0
[   22.427570] PKRU: 55555554
[   22.427673] Call Trace:
[   22.427767]  <TASK>
[   22.427849]  ? show_regs+0x6e/0x80
[   22.427983]  ? __warn+0xef/0x340
[   22.428109]  ? report_bug+0x25e/0x4b0
[   22.428251]  ? iommufd_fops_release+0x2a3/0x300
[   22.428423]  ? report_bug+0x2cb/0x4b0
[   22.428567]  ? handle_bug+0x46/0x90
[   22.428702]  ? exc_invalid_op+0x1d/0x50
[   22.428849]  ? asm_exc_invalid_op+0x1f/0x30
[   22.429007]  ? __pfx_iommufd_fops_release+0x10/0x10
[   22.429192]  ? iommufd_fops_release+0x2a3/0x300
[   22.429364]  ? iommufd_fops_release+0x2a3/0x300
[   22.429537]  ? __pfx_iommufd_fops_release+0x10/0x10
[   22.429720]  ? rcu_is_watching+0x19/0xc0
[   22.429871]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   22.430073]  ? __pfx_iommufd_fops_release+0x10/0x10
[   22.430256]  __fput+0x424/0xaf0
[   22.430383]  ____fput+0x1f/0x30
[   22.430508]  task_work_run+0x19d/0x2b0
[   22.430659]  ? __pfx_task_work_run+0x10/0x10
[   22.430822]  ? __sanitizer_cov_trace_const_cmp1+0x1e/0x30
[   22.431025]  ? switch_task_namespaces+0xa9/0xe0
[   22.431195]  do_exit+0xac9/0x2790
[   22.431322]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   22.431557]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   22.431738]  ? __pfx_do_exit+0x10/0x10
[   22.431879]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   22.432074]  ? security_file_ioctl+0x9d/0xd0
[   22.432236]  make_task_dead+0x182/0x3c0
[   22.432380]  rewind_stack_and_make_dead+0x17/0x20
[   22.432554] RIP: 0033:0x7f5cee43ee5d
[   22.432686] Code: Unable to access opcode bytes at 0x7f5cee43ee33.
[   22.432904] RSP: 002b:00007ffd7abfd7f8 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   22.433172] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f5cee43ee5d
[   22.433423] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   22.433675] RBP: 00007ffd7abfd810 R08: 0000000000000800 R09: 0000000000000800
[   22.433926] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffd7abfd928
[   22.434178] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f5cee7b5000
[   22.434434]  </TASK>
[   22.434518] irq event stamp: 0
[   22.434641] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   22.434889] hardirqs last disabled at (0): [<ffffffff8122f2d1>] copy_process+0x1c51/0x7140
[   22.435183] softirqs last  enabled at (0): [<ffffffff8122f312>] copy_process+0x1c92/0x7140
[   22.435475] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   22.435697] ---[ end trace 0000000000000000 ]---
[   22.438191] iommufd_mock iommufd_mock244: Adding to iommu group 244
[   22.438465] iommufd_mock iommufd_mock244: Removing from iommu group 244
[   22.438876] general protection fault, probably for non-canonical address 0xdffffc0000000006: 0000 [#245] PREEMPT SMP KASAN NOPTI
[   22.439314] KASAN: null-ptr-deref in range [0x0000000000000030-0x0000000000000037]
[   22.439612] CPU: 1 PID: 967 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   22.439923] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   22.440324] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   22.440534] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   22.441186] RSP: 0018:ffff88802451fba8 EFLAGS: 00010206
[   22.441377] RAX: dffffc0000000000 RBX: ffff8880120bf000 RCX: 0000000000000000
[   22.441632] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   22.441887] RBP: ffff88802451fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   22.442142] R10: ffff88800aad88df R11: ffff88806ca45a00 R12: 0000000000000000
[   22.442397] R13: ffffffff85cc0180 R14: ffff8880247bd200 R15: ffffffff87070ae0
[   22.442655] FS:  00007f7626147600(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
[   22.442951] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   22.443159] CR2: 0000000020000080 CR3: 0000000018934000 CR4: 0000000000750ee0
[   22.443415] PKRU: 55555554
[   22.443518] Call Trace:
[   22.443610]  <TASK>
[   22.443692]  ? show_regs+0x6e/0x80
[   22.443827]  ? die_addr+0x45/0xb0
[   22.443959]  ? exc_general_protection+0x159/0x250
[   22.444141]  ? asm_exc_general_protection+0x2b/0x30
[   22.444325]  ? sysfs_remove_link_from_group+0x21/0x90
[   22.444514]  ? sysfs_remove_link_from_group+0x37/0x90
[   22.444702]  ? sysfs_remove_link_from_group+0x21/0x90
[   22.444891]  iommu_device_unlink+0x85/0xd0
[   22.445046]  iommu_deinit_device+0x11f/0x4c0
[   22.445210]  __iommu_group_remove_device+0x26b/0x300
[   22.445398]  iommu_group_remove_device+0x8a/0xb0
[   22.445573]  iommufd_test+0x1f1a/0x2d10
[   22.445718]  ? __pfx_lock_release+0x10/0x10
[   22.445876]  ? __pfx_lock_acquire+0x10/0x10
[   22.446036]  ? __pfx_iommufd_test+0x10/0x10
[   22.446194]  ? __sanitizer_cov_trace_const_cmp8+0x1c/0x30
[   22.446395]  iommufd_fops_ioctl+0x377/0x510
[   22.446555]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   22.446734]  ? trace_hardirqs_on+0x26/0x120
[   22.446903]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   22.447134]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   22.447318]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   22.447518]  ? security_file_ioctl+0x9d/0xd0
[   22.447682]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   22.447859]  __x64_sys_ioctl+0x1b9/0x230
[   22.448007]  do_syscall_64+0x3c/0x90
[   22.448144]  entry_SYSCALL_64_after_hwframe+0x6e/0xd8
[   22.448331] RIP: 0033:0x7f7625e3ee5d
[   22.448466] Code: ff c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d 93 af 1b 00 f7 d8 64 89 01 48
[   22.449117] RSP: 002b:00007fffc6f21238 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   22.449389] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f7625e3ee5d
[   22.449644] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   22.449899] RBP: 00007fffc6f21250 R08: 0000000000000800 R09: 0000000000000800
[   22.450155] R10: 0000000000000000 R11: 0000000000000213 R12: 00007fffc6f21368
[   22.450410] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f7626188000
[   22.450672]  </TASK>
[   22.450761] Modules linked in:
[   22.450890] ---[ end trace 0000000000000000 ]---
[   22.451063] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   22.451276] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   22.451941] RSP: 0018:ffff88802457fba8 EFLAGS: 00010206
[   22.452137] RAX: dffffc0000000000 RBX: ffff888014f9b000 RCX: 0000000000000000
[   22.452540] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   22.452810] RBP: ffff88802457fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   22.453082] R10: ffff88800aad88df R11: 0000000000000001 R12: 0000000000000000
[   22.453397] R13: ffffffff85cc0180 R14: ffff8880109b6ac0 R15: ffffffff87070ae0
[   22.453662] FS:  00007f7626147600(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
[   22.454006] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   22.454222] CR2: 0000000020000080 CR3: 0000000018934000 CR4: 0000000000750ee0
[   22.454488] PKRU: 55555554
[   22.454930] ------------[ cut here ]------------
[   22.455109] WARNING: CPU: 1 PID: 967 at drivers/iommu/iommufd/main.c:258 iommufd_fops_release+0x2a3/0x300
[   22.455466] Modules linked in:
[   22.455587] CPU: 1 PID: 967 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   22.455954] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   22.456371] RIP: 0010:iommufd_fops_release+0x2a3/0x300
[   22.456613] Code: 45 d0 65 48 2b 04 25 28 00 00 00 75 54 48 81 c4 88 00 00 00 31 c0 5b 41 5c 41 5d 41 5e 41 5f 5d c3 cc cc cc cc e8 ad 4f 0a fe <0f> 0b eb a6 e8 74 23 67 fe e9 f6 fe ff ff 48 89 85 50 ff ff ff e8
[   22.457328] RSP: 0018:ffff88802451fc00 EFLAGS: 00010293
[   22.457526] RAX: 0000000000000000 RBX: ffff88801248af08 RCX: 0000000000000000
[   22.457796] RDX: ffff888011e40000 RSI: ffffffff835563e3 RDI: ffffffff86702b48
[   22.458088] RBP: ffff88802451fcb0 R08: 0000000000000000 R09: fffffbfff0eb2644
[   22.458352] R10: ffffffff87593227 R11: ffff8880111da800 R12: 0000000000000000
[   22.458673] R13: ffff888013270698 R14: ffff88802451fc48 R15: ffffffff83556140
[   22.458941] FS:  0000000000000000(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
[   22.459239] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   22.459460] CR2: 0000000020000080 CR3: 000000000687e000 CR4: 0000000000750ee0
[   22.459768] PKRU: 55555554
[   22.459873] Call Trace:
[   22.459969]  <TASK>
[   22.460054]  ? show_regs+0x6e/0x80
[   22.460213]  ? __warn+0xef/0x340
[   22.460356]  ? report_bug+0x25e/0x4b0
[   22.460502]  ? iommufd_fops_release+0x2a3/0x300
[   22.460678]  ? report_bug+0x2cb/0x4b0
[   22.460826]  ? handle_bug+0x46/0x90
[   22.461000]  ? exc_invalid_op+0x1d/0x50
[   22.461151]  ? asm_exc_invalid_op+0x1f/0x30
[   22.461312]  ? __pfx_iommufd_fops_release+0x10/0x10
[   22.461502]  ? iommufd_fops_release+0x2a3/0x300
[   22.461721]  ? iommufd_fops_release+0x2a3/0x300
[   22.461899]  ? __pfx_iommufd_fops_release+0x10/0x10
[   22.462086]  ? rcu_is_watching+0x19/0xc0
[   22.462250]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   22.462479]  ? __pfx_iommufd_fops_release+0x10/0x10
[   22.462762]  __fput+0x424/0xaf0
[   22.462892]  ____fput+0x1f/0x30
[   22.463018]  task_work_run+0x19d/0x2b0
[   22.463163]  ? __pfx_task_work_run+0x10/0x10
[   22.463325]  ? __sanitizer_cov_trace_const_cmp1+0x1e/0x30
[   22.463566]  ? switch_task_namespaces+0xa9/0xe0
[   22.463739]  do_exit+0xac9/0x2790
[   22.463869]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   22.464106]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   22.464345]  ? __pfx_do_exit+0x10/0x10
[   22.464489]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   22.464689]  ? security_file_ioctl+0x9d/0xd0
[   22.464862]  make_task_dead+0x182/0x3c0
[   22.465043]  rewind_stack_and_make_dead+0x17/0x20
[   22.465221] RIP: 0033:0x7f7625e3ee5d
[   22.465356] Code: Unable to access opcode bytes at 0x7f7625e3ee33.
[   22.465619] RSP: 002b:00007fffc6f21238 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   22.465894] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f7625e3ee5d
[   22.466157] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   22.466451] RBP: 00007fffc6f21250 R08: 0000000000000800 R09: 0000000000000800
[   22.466717] R10: 0000000000000000 R11: 0000000000000213 R12: 00007fffc6f21368
[   22.466977] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f7626188000
[   22.467246]  </TASK>
[   22.467367] irq event stamp: 0
[   22.467483] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   22.467711] hardirqs last disabled at (0): [<ffffffff8122f2d1>] copy_process+0x1c51/0x7140
[   22.468054] softirqs last  enabled at (0): [<ffffffff8122f312>] copy_process+0x1c92/0x7140
[   22.468353] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   22.468588] ---[ end trace 0000000000000000 ]---
[   22.471548] iommufd_mock iommufd_mock245: Adding to iommu group 245
[   22.471807] iommufd_mock iommufd_mock245: Removing from iommu group 245
[   22.472072] general protection fault, probably for non-canonical address 0xdffffc0000000006: 0000 [#246] PREEMPT SMP KASAN NOPTI
[   22.472495] KASAN: null-ptr-deref in range [0x0000000000000030-0x0000000000000037]
[   22.472822] CPU: 1 PID: 968 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   22.473142] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   22.473600] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   22.473817] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   22.474532] RSP: 0018:ffff8880110efba8 EFLAGS: 00010206
[   22.474731] RAX: dffffc0000000000 RBX: ffff8880120bc000 RCX: 0000000000000000
[   22.475026] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   22.475289] RBP: ffff8880110efbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   22.475559] R10: ffff88800aad88df R11: 5f6466756d6d6f69 R12: 0000000000000000
[   22.475858] R13: ffffffff85cc0180 R14: ffff8880247bdb80 R15: ffffffff87070ae0
[   22.476123] FS:  00007febdfbc8600(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
[   22.476456] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   22.476672] CR2: 0000000020000080 CR3: 0000000024d1c000 CR4: 0000000000750ee0
[   22.476941] PKRU: 55555554
[   22.477082] Call Trace:
[   22.477178]  <TASK>
[   22.477263]  ? show_regs+0x6e/0x80
[   22.477402]  ? die_addr+0x45/0xb0
[   22.477538]  ? exc_general_protection+0x159/0x250
[   22.477777]  ? asm_exc_general_protection+0x2b/0x30
[   22.477970]  ? sysfs_remove_link_from_group+0x21/0x90
[   22.478168]  ? sysfs_remove_link_from_group+0x37/0x90
[   22.478381]  ? sysfs_remove_link_from_group+0x21/0x90
[   22.478603]  iommu_device_unlink+0x85/0xd0
[   22.478765]  iommu_deinit_device+0x11f/0x4c0
[   22.478935]  __iommu_group_remove_device+0x26b/0x300
[   22.479149]  iommu_group_remove_device+0x8a/0xb0
[   22.479352]  iommufd_test+0x1f1a/0x2d10
[   22.479501]  ? __pfx_lock_release+0x10/0x10
[   22.479665]  ? __pfx_lock_acquire+0x10/0x10
[   22.479854]  ? __pfx_iommufd_test+0x10/0x10
[   22.480018]  ? __sanitizer_cov_trace_const_cmp8+0x1c/0x30
[   22.480226]  iommufd_fops_ioctl+0x377/0x510
[   22.480399]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   22.480613]  ? trace_hardirqs_on+0x26/0x120
[   22.480779]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   22.481017]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   22.481247]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   22.481454]  ? security_file_ioctl+0x9d/0xd0
[   22.481624]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   22.481817]  __x64_sys_ioctl+0x1b9/0x230
[   22.482000]  do_syscall_64+0x3c/0x90
[   22.482141]  entry_SYSCALL_64_after_hwframe+0x6e/0xd8
[   22.482334] RIP: 0033:0x7febdf83ee5d
[   22.482479] Code: ff c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d 93 af 1b 00 f7 d8 64 89 01 48
[   22.483190] RSP: 002b:00007ffd9bfabb08 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   22.483507] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007febdf83ee5d
[   22.483772] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   22.484074] RBP: 00007ffd9bfabb20 R08: 0000000000000800 R09: 0000000000000800
[   22.484338] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffd9bfabc38
[   22.484638] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007febdfc09000
[   22.484907]  </TASK>
[   22.484995] Modules linked in:
[   22.485138] ---[ end trace 0000000000000000 ]---
[   22.485313] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   22.485529] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   22.486201] RSP: 0018:ffff88802457fba8 EFLAGS: 00010206
[   22.486398] RAX: dffffc0000000000 RBX: ffff888014f9b000 RCX: 0000000000000000
[   22.486668] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   22.486963] RBP: ffff88802457fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   22.487226] R10: ffff88800aad88df R11: 0000000000000001 R12: 0000000000000000
[   22.487495] R13: ffffffff85cc0180 R14: ffff8880109b6ac0 R15: ffffffff87070ae0
[   22.487797] FS:  00007febdfbc8600(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
[   22.488093] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   22.488341] CR2: 0000000020000080 CR3: 0000000024d1c000 CR4: 0000000000750ee0
[   22.488606] PKRU: 55555554
[   22.488981] ------------[ cut here ]------------
[   22.489156] WARNING: CPU: 1 PID: 968 at drivers/iommu/iommufd/main.c:258 iommufd_fops_release+0x2a3/0x300
[   22.489516] Modules linked in:
[   22.489680] CPU: 1 PID: 968 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   22.489999] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   22.490454] RIP: 0010:iommufd_fops_release+0x2a3/0x300
[   22.490660] Code: 45 d0 65 48 2b 04 25 28 00 00 00 75 54 48 81 c4 88 00 00 00 31 c0 5b 41 5c 41 5d 41 5e 41 5f 5d c3 cc cc cc cc e8 ad 4f 0a fe <0f> 0b eb a6 e8 74 23 67 fe e9 f6 fe ff ff 48 89 85 50 ff ff ff e8
[   22.491374] RSP: 0018:ffff8880110efc00 EFLAGS: 00010293
[   22.491571] RAX: 0000000000000000 RBX: ffff88801248a208 RCX: 0000000000000000
[   22.491834] RDX: ffff888011e82500 RSI: ffffffff835563e3 RDI: ffffffff86702b48
[   22.492140] RBP: ffff8880110efcb0 R08: 0000000000000000 R09: fffffbfff0eb2644
[   22.492404] R10: ffffffff87593227 R11: ffff8880133dc600 R12: 0000000000000000
[   22.492709] R13: ffff88800f54e198 R14: ffff8880110efc48 R15: ffffffff83556140
[   22.492975] FS:  0000000000000000(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
[   22.493273] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   22.493488] CR2: 0000000020000080 CR3: 000000000687e000 CR4: 0000000000750ee0
[   22.493752] PKRU: 55555554
[   22.493858] Call Trace:
[   22.493953]  <TASK>
[   22.494040]  ? show_regs+0x6e/0x80
[   22.494178]  ? __warn+0xef/0x340
[   22.494308]  ? report_bug+0x25e/0x4b0
[   22.494453]  ? iommufd_fops_release+0x2a3/0x300
[   22.494636]  ? report_bug+0x2cb/0x4b0
[   22.494785]  ? handle_bug+0x46/0x90
[   22.494922]  ? exc_invalid_op+0x1d/0x50
[   22.495073]  ? asm_exc_invalid_op+0x1f/0x30
[   22.495231]  ? __pfx_iommufd_fops_release+0x10/0x10
[   22.495416]  ? iommufd_fops_release+0x2a3/0x300
[   22.495588]  ? iommufd_fops_release+0x2a3/0x300
[   22.495761]  ? __pfx_iommufd_fops_release+0x10/0x10
[   22.495944]  ? rcu_is_watching+0x19/0xc0
[   22.496095]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   22.496297]  ? __pfx_iommufd_fops_release+0x10/0x10
[   22.496480]  __fput+0x424/0xaf0
[   22.496608]  ____fput+0x1f/0x30
[   22.496732]  task_work_run+0x19d/0x2b0
[   22.496877]  ? __pfx_task_work_run+0x10/0x10
[   22.497040]  ? __sanitizer_cov_trace_const_cmp1+0x1e/0x30
[   22.497240]  ? switch_task_namespaces+0xa9/0xe0
[   22.497414]  do_exit+0xac9/0x2790
[   22.497544]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   22.497775]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   22.497959]  ? __pfx_do_exit+0x10/0x10
[   22.498103]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   22.498304]  ? security_file_ioctl+0x9d/0xd0
[   22.498470]  make_task_dead+0x182/0x3c0
[   22.498635]  rewind_stack_and_make_dead+0x17/0x20
[   22.498820] RIP: 0033:0x7febdf83ee5d
[   22.498969] Code: Unable to access opcode bytes at 0x7febdf83ee33.
[   22.499199] RSP: 002b:00007ffd9bfabb08 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   22.499480] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007febdf83ee5d
[   22.499743] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   22.500007] RBP: 00007ffd9bfabb20 R08: 0000000000000800 R09: 0000000000000800
[   22.500271] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffd9bfabc38
[   22.500535] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007febdfc09000
[   22.500804]  </TASK>
[   22.500892] irq event stamp: 0
[   22.501010] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   22.501244] hardirqs last disabled at (0): [<ffffffff8122f2d1>] copy_process+0x1c51/0x7140
[   22.501566] softirqs last  enabled at (0): [<ffffffff8122f312>] copy_process+0x1c92/0x7140
[   22.501871] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   22.502104] ---[ end trace 0000000000000000 ]---
[   22.504617] iommufd_mock iommufd_mock246: Adding to iommu group 246
[   22.504877] iommufd_mock iommufd_mock246: Removing from iommu group 246
[   22.505136] general protection fault, probably for non-canonical address 0xdffffc0000000006: 0000 [#247] PREEMPT SMP KASAN NOPTI
[   22.505549] KASAN: null-ptr-deref in range [0x0000000000000030-0x0000000000000037]
[   22.505824] CPU: 0 PID: 969 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   22.506138] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   22.506546] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   22.506766] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   22.507427] RSP: 0018:ffff888013d9fba8 EFLAGS: 00010206
[   22.507621] RAX: dffffc0000000000 RBX: ffff88801456f000 RCX: 0000000000000000
[   22.507880] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   22.508139] RBP: ffff888013d9fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   22.508398] R10: ffff88800aad88df R11: 5f6466756d6d6f69 R12: 0000000000000000
[   22.508656] R13: ffffffff85cc0180 R14: ffff8880111b7c60 R15: ffffffff87070ae0
[   22.508915] FS:  00007f93e7274600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   22.509207] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   22.509419] CR2: 0000000020000080 CR3: 00000000203dc000 CR4: 0000000000750ef0
[   22.509679] PKRU: 55555554
[   22.509782] Call Trace:
[   22.509876]  <TASK>
[   22.509959]  ? show_regs+0x6e/0x80
[   22.510096]  ? die_addr+0x45/0xb0
[   22.510229]  ? exc_general_protection+0x159/0x250
[   22.510413]  ? asm_exc_general_protection+0x2b/0x30
[   22.510600]  ? sysfs_remove_link_from_group+0x21/0x90
[   22.510801]  ? sysfs_remove_link_from_group+0x37/0x90
[   22.510989]  ? sysfs_remove_link_from_group+0x21/0x90
[   22.511176]  iommu_device_unlink+0x85/0xd0
[   22.511330]  iommu_deinit_device+0x11f/0x4c0
[   22.511494]  __iommu_group_remove_device+0x26b/0x300
[   22.511681]  iommu_group_remove_device+0x8a/0xb0
[   22.511854]  iommufd_test+0x1f1a/0x2d10
[   22.511997]  ? __pfx_lock_release+0x10/0x10
[   22.512155]  ? __pfx_lock_acquire+0x10/0x10
[   22.512314]  ? __pfx_iommufd_test+0x10/0x10
[   22.512470]  ? __sanitizer_cov_trace_const_cmp8+0x1c/0x30
[   22.512671]  iommufd_fops_ioctl+0x377/0x510
[   22.512829]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   22.513005]  ? trace_hardirqs_on+0x26/0x120
[   22.513163]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   22.513392]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   22.513575]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   22.513774]  ? security_file_ioctl+0x9d/0xd0
[   22.513937]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   22.514113]  __x64_sys_ioctl+0x1b9/0x230
[   22.514260]  do_syscall_64+0x3c/0x90
[   22.514394]  entry_SYSCALL_64_after_hwframe+0x6e/0xd8
[   22.514580] RIP: 0033:0x7f93e703ee5d
[   22.514725] Code: ff c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d 93 af 1b 00 f7 d8 64 89 01 48
[   22.515379] RSP: 002b:00007ffefb182ee8 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   22.515648] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f93e703ee5d
[   22.515902] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   22.516155] RBP: 00007ffefb182f00 R08: 0000000000000800 R09: 0000000000000800
[   22.516408] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffefb183018
[   22.516661] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f93e72b5000
[   22.516920]  </TASK>
[   22.517003] Modules linked in:
[   22.517293] ---[ end trace 0000000000000000 ]---
[   22.517466] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   22.517679] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   22.518339] RSP: 0018:ffff88802457fba8 EFLAGS: 00010206
[   22.518533] RAX: dffffc0000000000 RBX: ffff888014f9b000 RCX: 0000000000000000
[   22.518808] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   22.519067] RBP: ffff88802457fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   22.519321] R10: ffff88800aad88df R11: 0000000000000001 R12: 0000000000000000
[   22.519575] R13: ffffffff85cc0180 R14: ffff8880109b6ac0 R15: ffffffff87070ae0
[   22.519829] FS:  00007f93e7274600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   22.520116] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   22.520323] CR2: 0000000020000080 CR3: 00000000203dc000 CR4: 0000000000750ef0
[   22.520578] PKRU: 55555554
[   22.520949] ------------[ cut here ]------------
[   22.521118] WARNING: CPU: 0 PID: 969 at drivers/iommu/iommufd/main.c:258 iommufd_fops_release+0x2a3/0x300
[   22.521460] Modules linked in:
[   22.521575] CPU: 0 PID: 969 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   22.521883] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   22.522282] RIP: 0010:iommufd_fops_release+0x2a3/0x300
[   22.522471] Code: 45 d0 65 48 2b 04 25 28 00 00 00 75 54 48 81 c4 88 00 00 00 31 c0 5b 41 5c 41 5d 41 5e 41 5f 5d c3 cc cc cc cc e8 ad 4f 0a fe <0f> 0b eb a6 e8 74 23 67 fe e9 f6 fe ff ff 48 89 85 50 ff ff ff e8
[   22.523141] RSP: 0018:ffff888013d9fc00 EFLAGS: 00010293
[   22.523332] RAX: 0000000000000000 RBX: ffff88800fe06808 RCX: 0000000000000000
[   22.523586] RDX: ffff888011e42500 RSI: ffffffff835563e3 RDI: ffffffff86702b40
[   22.523855] RBP: ffff888013d9fcb0 R08: 0000000000000000 R09: fffffbfff0eb2644
[   22.524108] R10: ffffffff87593227 R11: ffff8880131a6000 R12: 0000000000000000
[   22.524361] R13: ffff88800f47d098 R14: ffff888013d9fc48 R15: ffffffff83556140
[   22.524614] FS:  0000000000000000(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   22.524899] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   22.525105] CR2: 0000000020000080 CR3: 000000000687e000 CR4: 0000000000750ef0
[   22.525359] PKRU: 55555554
[   22.525460] Call Trace:
[   22.525553]  <TASK>
[   22.525634]  ? show_regs+0x6e/0x80
[   22.525765]  ? __warn+0xef/0x340
[   22.525890]  ? report_bug+0x25e/0x4b0
[   22.526030]  ? iommufd_fops_release+0x2a3/0x300
[   22.526200]  ? report_bug+0x2cb/0x4b0
[   22.526341]  ? handle_bug+0x46/0x90
[   22.526474]  ? exc_invalid_op+0x1d/0x50
[   22.526678]  ? asm_exc_invalid_op+0x1f/0x30
[   22.526838]  ? __pfx_iommufd_fops_release+0x10/0x10
[   22.527020]  ? iommufd_fops_release+0x2a3/0x300
[   22.527190]  ? iommufd_fops_release+0x2a3/0x300
[   22.527361]  ? __pfx_iommufd_fops_release+0x10/0x10
[   22.527540]  ? rcu_is_watching+0x19/0xc0
[   22.527689]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   22.527887]  ? __pfx_iommufd_fops_release+0x10/0x10
[   22.528067]  __fput+0x424/0xaf0
[   22.528193]  ____fput+0x1f/0x30
[   22.528315]  task_work_run+0x19d/0x2b0
[   22.528457]  ? __pfx_task_work_run+0x10/0x10
[   22.528617]  ? __sanitizer_cov_trace_const_cmp1+0x1e/0x30
[   22.528814]  ? switch_task_namespaces+0xa9/0xe0
[   22.528984]  do_exit+0xac9/0x2790
[   22.529112]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   22.529339]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   22.529520]  ? __pfx_do_exit+0x10/0x10
[   22.529662]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   22.529858]  ? security_file_ioctl+0x9d/0xd0
[   22.530021]  make_task_dead+0x182/0x3c0
[   22.530166]  rewind_stack_and_make_dead+0x17/0x20
[   22.530341] RIP: 0033:0x7f93e703ee5d
[   22.530475] Code: Unable to access opcode bytes at 0x7f93e703ee33.
[   22.530701] RSP: 002b:00007ffefb182ee8 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   22.530974] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f93e703ee5d
[   22.531227] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   22.531479] RBP: 00007ffefb182f00 R08: 0000000000000800 R09: 0000000000000800
[   22.531732] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffefb183018
[   22.531985] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f93e72b5000
[   22.532243]  </TASK>
[   22.532327] irq event stamp: 0
[   22.532441] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   22.532665] hardirqs last disabled at (0): [<ffffffff8122f2d1>] copy_process+0x1c51/0x7140
[   22.532959] softirqs last  enabled at (0): [<ffffffff8122f312>] copy_process+0x1c92/0x7140
[   22.533253] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   22.533476] ---[ end trace 0000000000000000 ]---
[   22.536143] iommufd_mock iommufd_mock247: Adding to iommu group 247
[   22.536395] iommufd_mock iommufd_mock247: Removing from iommu group 247
[   22.536650] general protection fault, probably for non-canonical address 0xdffffc0000000006: 0000 [#248] PREEMPT SMP KASAN NOPTI
[   22.537055] KASAN: null-ptr-deref in range [0x0000000000000030-0x0000000000000037]
[   22.537324] CPU: 0 PID: 970 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   22.537632] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   22.538031] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   22.538240] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   22.538905] RSP: 0018:ffff8880110efba8 EFLAGS: 00010206
[   22.539096] RAX: dffffc0000000000 RBX: ffff88801456c000 RCX: 0000000000000000
[   22.539349] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   22.539603] RBP: ffff8880110efbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   22.539857] R10: ffff88800aad88df R11: 5f6466756d6d6f69 R12: 0000000000000000
[   22.540111] R13: ffffffff85cc0180 R14: ffff8880111b7760 R15: ffffffff87070ae0
[   22.540365] FS:  00007f6a0f6e3600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   22.540651] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   22.540859] CR2: 0000000020000080 CR3: 00000000203dc000 CR4: 0000000000750ef0
[   22.541119] PKRU: 55555554
[   22.541221] Call Trace:
[   22.541313]  <TASK>
[   22.541395]  ? show_regs+0x6e/0x80
[   22.541528]  ? die_addr+0x45/0xb0
[   22.541659]  ? exc_general_protection+0x159/0x250
[   22.541840]  ? asm_exc_general_protection+0x2b/0x30
[   22.542023]  ? sysfs_remove_link_from_group+0x21/0x90
[   22.542211]  ? sysfs_remove_link_from_group+0x37/0x90
[   22.542399]  ? sysfs_remove_link_from_group+0x21/0x90
[   22.542588]  iommu_device_unlink+0x85/0xd0
[   22.542750]  iommu_deinit_device+0x11f/0x4c0
[   22.542916]  __iommu_group_remove_device+0x26b/0x300
[   22.543105]  iommu_group_remove_device+0x8a/0xb0
[   22.543280]  iommufd_test+0x1f1a/0x2d10
[   22.543425]  ? __pfx_lock_release+0x10/0x10
[   22.543584]  ? __pfx_lock_acquire+0x10/0x10
[   22.543743]  ? __pfx_iommufd_test+0x10/0x10
[   22.543900]  ? __sanitizer_cov_trace_const_cmp8+0x1c/0x30
[   22.544101]  iommufd_fops_ioctl+0x377/0x510
[   22.544259]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   22.544435]  ? trace_hardirqs_on+0x26/0x120
[   22.544594]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   22.544823]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   22.545006]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   22.545205]  ? security_file_ioctl+0x9d/0xd0
[   22.545369]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   22.545545]  __x64_sys_ioctl+0x1b9/0x230
[   22.545692]  do_syscall_64+0x3c/0x90
[   22.545827]  entry_SYSCALL_64_after_hwframe+0x6e/0xd8
[   22.546013] RIP: 0033:0x7f6a0f43ee5d
[   22.546147] Code: ff c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d 93 af 1b 00 f7 d8 64 89 01 48
[   22.546797] RSP: 002b:00007fff2056fd98 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   22.547067] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f6a0f43ee5d
[   22.547321] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   22.547574] RBP: 00007fff2056fdb0 R08: 0000000000000800 R09: 0000000000000800
[   22.547828] R10: 0000000000000000 R11: 0000000000000213 R12: 00007fff2056fec8
[   22.548081] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f6a0f724000
[   22.548342]  </TASK>
[   22.548427] Modules linked in:
[   22.548597] ---[ end trace 0000000000000000 ]---
[   22.548767] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   22.548975] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   22.549622] RSP: 0018:ffff88802457fba8 EFLAGS: 00010206
[   22.549812] RAX: dffffc0000000000 RBX: ffff888014f9b000 RCX: 0000000000000000
[   22.550066] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   22.550320] RBP: ffff88802457fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   22.550603] R10: ffff88800aad88df R11: 0000000000000001 R12: 0000000000000000
[   22.550861] R13: ffffffff85cc0180 R14: ffff8880109b6ac0 R15: ffffffff87070ae0
[   22.551115] FS:  00007f6a0f6e3600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   22.551401] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   22.551608] CR2: 0000000020000080 CR3: 00000000203dc000 CR4: 0000000000750ef0
[   22.551863] PKRU: 55555554
[   22.552444] ------------[ cut here ]------------
[   22.552616] WARNING: CPU: 0 PID: 970 at drivers/iommu/iommufd/main.c:258 iommufd_fops_release+0x2a3/0x300
[   22.552957] Modules linked in:
[   22.553072] CPU: 0 PID: 970 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   22.553380] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   22.553779] RIP: 0010:iommufd_fops_release+0x2a3/0x300
[   22.553968] Code: 45 d0 65 48 2b 04 25 28 00 00 00 75 54 48 81 c4 88 00 00 00 31 c0 5b 41 5c 41 5d 41 5e 41 5f 5d c3 cc cc cc cc e8 ad 4f 0a fe <0f> 0b eb a6 e8 74 23 67 fe e9 f6 fe ff ff 48 89 85 50 ff ff ff e8
[   22.554628] RSP: 0018:ffff8880110efc00 EFLAGS: 00010293
[   22.554821] RAX: 0000000000000000 RBX: ffff88800fe06708 RCX: 0000000000000000
[   22.555075] RDX: ffff8880122b4a00 RSI: ffffffff835563e3 RDI: ffffffff86702b40
[   22.555328] RBP: ffff8880110efcb0 R08: 0000000000000000 R09: fffffbfff0eb2644
[   22.555582] R10: ffffffff87593227 R11: ffff88800fc02e00 R12: 0000000000000000
[   22.555835] R13: ffff888013a13318 R14: ffff8880110efc48 R15: ffffffff83556140
[   22.556088] FS:  0000000000000000(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   22.556376] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   22.556586] CR2: 0000000020000080 CR3: 000000000687e000 CR4: 0000000000750ef0
[   22.556840] PKRU: 55555554
[   22.556941] Call Trace:
[   22.557033]  <TASK>
[   22.557114]  ? show_regs+0x6e/0x80
[   22.557245]  ? __warn+0xef/0x340
[   22.557370]  ? report_bug+0x25e/0x4b0
[   22.557510]  ? iommufd_fops_release+0x2a3/0x300
[   22.557679]  ? report_bug+0x2cb/0x4b0
[   22.557821]  ? handle_bug+0x46/0x90
[   22.557954]  ? exc_invalid_op+0x1d/0x50
[   22.558098]  ? asm_exc_invalid_op+0x1f/0x30
[   22.558253]  ? __pfx_iommufd_fops_release+0x10/0x10
[   22.558435]  ? iommufd_fops_release+0x2a3/0x300
[   22.558676]  ? iommufd_fops_release+0x2a3/0x300
[   22.558850]  ? __pfx_iommufd_fops_release+0x10/0x10
[   22.559030]  ? rcu_is_watching+0x19/0xc0
[   22.559180]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   22.559378]  ? __pfx_iommufd_fops_release+0x10/0x10
[   22.559559]  __fput+0x424/0xaf0
[   22.559684]  ____fput+0x1f/0x30
[   22.559807]  task_work_run+0x19d/0x2b0
[   22.559949]  ? __pfx_task_work_run+0x10/0x10
[   22.560109]  ? __sanitizer_cov_trace_const_cmp1+0x1e/0x30
[   22.560306]  ? switch_task_namespaces+0xa9/0xe0
[   22.560476]  do_exit+0xac9/0x2790
[   22.560603]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   22.560830]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   22.561012]  ? __pfx_do_exit+0x10/0x10
[   22.561153]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   22.561350]  ? security_file_ioctl+0x9d/0xd0
[   22.561513]  make_task_dead+0x182/0x3c0
[   22.561659]  rewind_stack_and_make_dead+0x17/0x20
[   22.561834] RIP: 0033:0x7f6a0f43ee5d
[   22.561968] Code: Unable to access opcode bytes at 0x7f6a0f43ee33.
[   22.562187] RSP: 002b:00007fff2056fd98 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   22.562457] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f6a0f43ee5d
[   22.562717] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   22.562972] RBP: 00007fff2056fdb0 R08: 0000000000000800 R09: 0000000000000800
[   22.563226] R10: 0000000000000000 R11: 0000000000000213 R12: 00007fff2056fec8
[   22.563480] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f6a0f724000
[   22.563739]  </TASK>
[   22.563823] irq event stamp: 0
[   22.563936] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   22.564161] hardirqs last disabled at (0): [<ffffffff8122f2d1>] copy_process+0x1c51/0x7140
[   22.564456] softirqs last  enabled at (0): [<ffffffff8122f312>] copy_process+0x1c92/0x7140
[   22.564753] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   22.564976] ---[ end trace 0000000000000000 ]---
[   22.567522] iommufd_mock iommufd_mock248: Adding to iommu group 248
[   22.567773] iommufd_mock iommufd_mock248: Removing from iommu group 248
[   22.568029] general protection fault, probably for non-canonical address 0xdffffc0000000006: 0000 [#249] PREEMPT SMP KASAN NOPTI
[   22.568434] KASAN: null-ptr-deref in range [0x0000000000000030-0x0000000000000037]
[   22.568702] CPU: 0 PID: 971 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   22.569010] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   22.569409] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   22.569618] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   22.570265] RSP: 0018:ffff88801591fba8 EFLAGS: 00010206
[   22.570455] RAX: dffffc0000000000 RBX: ffff888014569000 RCX: 0000000000000000
[   22.570710] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   22.570970] RBP: ffff88801591fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   22.571223] R10: ffff88800aad88df R11: 5f6466756d6d6f69 R12: 0000000000000000
[   22.571477] R13: ffffffff85cc0180 R14: ffff8880111b73c0 R15: ffffffff87070ae0
[   22.571730] FS:  00007fb12a77f600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   22.572016] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   22.572223] CR2: 0000000020000080 CR3: 00000000203dc000 CR4: 0000000000750ef0
[   22.572476] PKRU: 55555554
[   22.572577] Call Trace:
[   22.572670]  <TASK>
[   22.572751]  ? show_regs+0x6e/0x80
[   22.572884]  ? die_addr+0x45/0xb0
[   22.573015]  ? exc_general_protection+0x159/0x250
[   22.573196]  ? asm_exc_general_protection+0x2b/0x30
[   22.573378]  ? sysfs_remove_link_from_group+0x21/0x90
[   22.573565]  ? sysfs_remove_link_from_group+0x37/0x90
[   22.573752]  ? sysfs_remove_link_from_group+0x21/0x90
[   22.573939]  iommu_device_unlink+0x85/0xd0
[   22.574092]  iommu_deinit_device+0x11f/0x4c0
[   22.574255]  __iommu_group_remove_device+0x26b/0x300
[   22.574441]  iommu_group_remove_device+0x8a/0xb0
[   22.574614]  iommufd_test+0x1f1a/0x2d10
[   22.574761]  ? __pfx_lock_release+0x10/0x10
[   22.574931]  ? __pfx_lock_acquire+0x10/0x10
[   22.575090]  ? __pfx_iommufd_test+0x10/0x10
[   22.575246]  ? __sanitizer_cov_trace_const_cmp8+0x1c/0x30
[   22.575449]  iommufd_fops_ioctl+0x377/0x510
[   22.575617]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   22.575795]  ? trace_hardirqs_on+0x26/0x120
[   22.575954]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   22.576182]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   22.576365]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   22.576563]  ? security_file_ioctl+0x9d/0xd0
[   22.576726]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   22.576901]  __x64_sys_ioctl+0x1b9/0x230
[   22.577048]  do_syscall_64+0x3c/0x90
[   22.577183]  entry_SYSCALL_64_after_hwframe+0x6e/0xd8
[   22.577368] RIP: 0033:0x7fb12a43ee5d
[   22.577502] Code: ff c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d 93 af 1b 00 f7 d8 64 89 01 48
[   22.578147] RSP: 002b:00007ffdc55f56a8 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   22.578417] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007fb12a43ee5d
[   22.578670] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   22.578932] RBP: 00007ffdc55f56c0 R08: 0000000000000800 R09: 0000000000000800
[   22.579184] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffdc55f57d8
[   22.579436] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007fb12a7c0000
[   22.579694]  </TASK>
[   22.579778] Modules linked in:
[   22.579909] ---[ end trace 0000000000000000 ]---
[   22.580076] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   22.580284] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   22.580930] RSP: 0018:ffff88802457fba8 EFLAGS: 00010206
[   22.581118] RAX: dffffc0000000000 RBX: ffff888014f9b000 RCX: 0000000000000000
[   22.581372] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   22.581624] RBP: ffff88802457fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   22.581877] R10: ffff88800aad88df R11: 0000000000000001 R12: 0000000000000000
[   22.582134] R13: ffffffff85cc0180 R14: ffff8880109b6ac0 R15: ffffffff87070ae0
[   22.582393] FS:  00007fb12a77f600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   22.582693] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   22.582910] CR2: 0000000020000080 CR3: 00000000203dc000 CR4: 0000000000750ef0
[   22.583164] PKRU: 55555554
[   22.583521] ------------[ cut here ]------------
[   22.583689] WARNING: CPU: 0 PID: 971 at drivers/iommu/iommufd/main.c:258 iommufd_fops_release+0x2a3/0x300
[   22.584029] Modules linked in:
[   22.584144] CPU: 0 PID: 971 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   22.584452] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   22.584850] RIP: 0010:iommufd_fops_release+0x2a3/0x300
[   22.585039] Code: 45 d0 65 48 2b 04 25 28 00 00 00 75 54 48 81 c4 88 00 00 00 31 c0 5b 41 5c 41 5d 41 5e 41 5f 5d c3 cc cc cc cc e8 ad 4f 0a fe <0f> 0b eb a6 e8 74 23 67 fe e9 f6 fe ff ff 48 89 85 50 ff ff ff e8
[   22.585684] RSP: 0018:ffff88801591fc00 EFLAGS: 00010293
[   22.585873] RAX: 0000000000000000 RBX: ffff88800fe06b08 RCX: 0000000000000000
[   22.586127] RDX: ffff8880138b4a00 RSI: ffffffff835563e3 RDI: ffffffff86702b40
[   22.586380] RBP: ffff88801591fcb0 R08: 0000000000000000 R09: fffffbfff0eb2644
[   22.586647] R10: ffffffff87593227 R11: ffff88800ff71400 R12: 0000000000000000
[   22.586903] R13: ffff88801395da98 R14: ffff88801591fc48 R15: ffffffff83556140
[   22.587157] FS:  0000000000000000(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   22.587442] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   22.587649] CR2: 0000000020000080 CR3: 000000000687e000 CR4: 0000000000750ef0
[   22.587903] PKRU: 55555554
[   22.588004] Call Trace:
[   22.588096]  <TASK>
[   22.588177]  ? show_regs+0x6e/0x80
[   22.588308]  ? __warn+0xef/0x340
[   22.588433]  ? report_bug+0x25e/0x4b0
[   22.588572]  ? iommufd_fops_release+0x2a3/0x300
[   22.588742]  ? report_bug+0x2cb/0x4b0
[   22.588883]  ? handle_bug+0x46/0x90
[   22.589015]  ? exc_invalid_op+0x1d/0x50
[   22.589159]  ? asm_exc_invalid_op+0x1f/0x30
[   22.589314]  ? __pfx_iommufd_fops_release+0x10/0x10
[   22.589497]  ? iommufd_fops_release+0x2a3/0x300
[   22.589665]  ? iommufd_fops_release+0x2a3/0x300
[   22.589836]  ? __pfx_iommufd_fops_release+0x10/0x10
[   22.590016]  ? rcu_is_watching+0x19/0xc0
[   22.590164]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   22.590363]  ? __pfx_iommufd_fops_release+0x10/0x10
[   22.590543]  __fput+0x424/0xaf0
[   22.590676]  ____fput+0x1f/0x30
[   22.590803]  task_work_run+0x19d/0x2b0
[   22.590945]  ? __pfx_task_work_run+0x10/0x10
[   22.591105]  ? __sanitizer_cov_trace_const_cmp1+0x1e/0x30
[   22.591301]  ? switch_task_namespaces+0xa9/0xe0
[   22.591472]  do_exit+0xac9/0x2790
[   22.591599]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   22.591825]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   22.592007]  ? __pfx_do_exit+0x10/0x10
[   22.592148]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   22.592345]  ? security_file_ioctl+0x9d/0xd0
[   22.592506]  make_task_dead+0x182/0x3c0
[   22.592651]  rewind_stack_and_make_dead+0x17/0x20
[   22.592826] RIP: 0033:0x7fb12a43ee5d
[   22.592959] Code: Unable to access opcode bytes at 0x7fb12a43ee33.
[   22.593178] RSP: 002b:00007ffdc55f56a8 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   22.593447] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007fb12a43ee5d
[   22.593700] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   22.593953] RBP: 00007ffdc55f56c0 R08: 0000000000000800 R09: 0000000000000800
[   22.594205] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffdc55f57d8
[   22.594458] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007fb12a7c0000
[   22.594724]  </TASK>
[   22.594811] irq event stamp: 0
[   22.594925] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   22.595150] hardirqs last disabled at (0): [<ffffffff8122f2d1>] copy_process+0x1c51/0x7140
[   22.595443] softirqs last  enabled at (0): [<ffffffff8122f312>] copy_process+0x1c92/0x7140
[   22.595737] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   22.595960] ---[ end trace 0000000000000000 ]---
[   22.598622] iommufd_mock iommufd_mock249: Adding to iommu group 249
[   22.598886] iommufd_mock iommufd_mock249: Removing from iommu group 249
[   22.599145] general protection fault, probably for non-canonical address 0xdffffc0000000006: 0000 [#250] PREEMPT SMP KASAN NOPTI
[   22.599550] KASAN: null-ptr-deref in range [0x0000000000000030-0x0000000000000037]
[   22.599818] CPU: 0 PID: 972 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   22.600126] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   22.600525] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   22.600734] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   22.601380] RSP: 0018:ffff888015a47ba8 EFLAGS: 00010206
[   22.601569] RAX: dffffc0000000000 RBX: ffff88801456b000 RCX: 0000000000000000
[   22.601821] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   22.602073] RBP: ffff888015a47bc0 R08: 0000000000000001 R09: ffffed100155b11b
[   22.602325] R10: ffff88800aad88df R11: 5f6466756d6d6f69 R12: 0000000000000000
[   22.602579] R13: ffffffff85cc0180 R14: ffff8880111b7e20 R15: ffffffff87070ae0
[   22.602838] FS:  00007f8a483fe600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   22.603129] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   22.603336] CR2: 0000000020000080 CR3: 00000000203dc000 CR4: 0000000000750ef0
[   22.603590] PKRU: 55555554
[   22.603691] Call Trace:
[   22.603782]  <TASK>
[   22.603864]  ? show_regs+0x6e/0x80
[   22.603997]  ? die_addr+0x45/0xb0
[   22.604128]  ? exc_general_protection+0x159/0x250
[   22.604308]  ? asm_exc_general_protection+0x2b/0x30
[   22.604491]  ? sysfs_remove_link_from_group+0x21/0x90
[   22.604678]  ? sysfs_remove_link_from_group+0x37/0x90
[   22.604865]  ? sysfs_remove_link_from_group+0x21/0x90
[   22.605052]  iommu_device_unlink+0x85/0xd0
[   22.605206]  iommu_deinit_device+0x11f/0x4c0
[   22.605368]  __iommu_group_remove_device+0x26b/0x300
[   22.605555]  iommu_group_remove_device+0x8a/0xb0
[   22.605728]  iommufd_test+0x1f1a/0x2d10
[   22.605871]  ? __pfx_lock_release+0x10/0x10
[   22.606028]  ? __pfx_lock_acquire+0x10/0x10
[   22.606187]  ? __pfx_iommufd_test+0x10/0x10
[   22.606343]  ? __sanitizer_cov_trace_const_cmp8+0x1c/0x30
[   22.606543]  iommufd_fops_ioctl+0x377/0x510
[   22.606701]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   22.606879]  ? trace_hardirqs_on+0x26/0x120
[   22.607039]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   22.607267]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   22.607450]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   22.607648]  ? security_file_ioctl+0x9d/0xd0
[   22.607811]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   22.607986]  __x64_sys_ioctl+0x1b9/0x230
[   22.608133]  do_syscall_64+0x3c/0x90
[   22.608268]  entry_SYSCALL_64_after_hwframe+0x6e/0xd8
[   22.608453] RIP: 0033:0x7f8a4803ee5d
[   22.608587] Code: ff c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d 93 af 1b 00 f7 d8 64 89 01 48
[   22.609231] RSP: 002b:00007fff4bbbeed8 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   22.609500] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f8a4803ee5d
[   22.609752] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   22.610004] RBP: 00007fff4bbbeef0 R08: 0000000000000800 R09: 0000000000000800
[   22.610258] R10: 0000000000000000 R11: 0000000000000213 R12: 00007fff4bbbf008
[   22.610510] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f8a4843f000
[   22.610770]  </TASK>
[   22.610854] Modules linked in:
[   22.611026] ---[ end trace 0000000000000000 ]---
[   22.611194] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   22.611401] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   22.612047] RSP: 0018:ffff88802457fba8 EFLAGS: 00010206
[   22.612236] RAX: dffffc0000000000 RBX: ffff888014f9b000 RCX: 0000000000000000
[   22.612488] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   22.612741] RBP: ffff88802457fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   22.612993] R10: ffff88800aad88df R11: 0000000000000001 R12: 0000000000000000
[   22.613246] R13: ffffffff85cc0180 R14: ffff8880109b6ac0 R15: ffffffff87070ae0
[   22.613498] FS:  00007f8a483fe600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   22.613783] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   22.613990] CR2: 0000000020000080 CR3: 00000000203dc000 CR4: 0000000000750ef0
[   22.614244] PKRU: 55555554
[   22.614611] ------------[ cut here ]------------
[   22.614785] WARNING: CPU: 0 PID: 972 at drivers/iommu/iommufd/main.c:258 iommufd_fops_release+0x2a3/0x300
[   22.615138] Modules linked in:
[   22.615253] CPU: 0 PID: 972 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   22.615560] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   22.615958] RIP: 0010:iommufd_fops_release+0x2a3/0x300
[   22.616146] Code: 45 d0 65 48 2b 04 25 28 00 00 00 75 54 48 81 c4 88 00 00 00 31 c0 5b 41 5c 41 5d 41 5e 41 5f 5d c3 cc cc cc cc e8 ad 4f 0a fe <0f> 0b eb a6 e8 74 23 67 fe e9 f6 fe ff ff 48 89 85 50 ff ff ff e8
[   22.616790] RSP: 0018:ffff888015a47c00 EFLAGS: 00010293
[   22.616980] RAX: 0000000000000000 RBX: ffff88800fe06c08 RCX: 0000000000000000
[   22.617232] RDX: ffff88801388ca00 RSI: ffffffff835563e3 RDI: ffffffff86702b40
[   22.617485] RBP: ffff888015a47cb0 R08: 0000000000000000 R09: fffffbfff0eb2644
[   22.617738] R10: ffffffff87593227 R11: ffff888013042400 R12: 0000000000000000
[   22.617991] R13: ffff888018b5f318 R14: ffff888015a47c48 R15: ffffffff83556140
[   22.618244] FS:  0000000000000000(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   22.618529] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   22.618742] CR2: 0000000020000080 CR3: 000000000687e000 CR4: 0000000000750ef0
[   22.619000] PKRU: 55555554
[   22.619101] Call Trace:
[   22.619193]  <TASK>
[   22.619273]  ? show_regs+0x6e/0x80
[   22.619404]  ? __warn+0xef/0x340
[   22.619528]  ? report_bug+0x25e/0x4b0
[   22.619667]  ? iommufd_fops_release+0x2a3/0x300
[   22.619835]  ? report_bug+0x2cb/0x4b0
[   22.619975]  ? handle_bug+0x46/0x90
[   22.620107]  ? exc_invalid_op+0x1d/0x50
[   22.620251]  ? asm_exc_invalid_op+0x1f/0x30
[   22.620405]  ? __pfx_iommufd_fops_release+0x10/0x10
[   22.620587]  ? iommufd_fops_release+0x2a3/0x300
[   22.620755]  ? iommufd_fops_release+0x2a3/0x300
[   22.620925]  ? __pfx_iommufd_fops_release+0x10/0x10
[   22.621103]  ? rcu_is_watching+0x19/0xc0
[   22.621252]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   22.621449]  ? __pfx_iommufd_fops_release+0x10/0x10
[   22.621628]  __fput+0x424/0xaf0
[   22.621752]  ____fput+0x1f/0x30
[   22.621874]  task_work_run+0x19d/0x2b0
[   22.622015]  ? __pfx_task_work_run+0x10/0x10
[   22.622174]  ? __sanitizer_cov_trace_const_cmp1+0x1e/0x30
[   22.622370]  ? switch_task_namespaces+0xa9/0xe0
[   22.622541]  do_exit+0xac9/0x2790
[   22.622689]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   22.622923]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   22.623108]  ? __pfx_do_exit+0x10/0x10
[   22.623254]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   22.623450]  ? security_file_ioctl+0x9d/0xd0
[   22.623613]  make_task_dead+0x182/0x3c0
[   22.623758]  rewind_stack_and_make_dead+0x17/0x20
[   22.623933] RIP: 0033:0x7f8a4803ee5d
[   22.624065] Code: Unable to access opcode bytes at 0x7f8a4803ee33.
[   22.624283] RSP: 002b:00007fff4bbbeed8 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   22.624552] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f8a4803ee5d
[   22.624804] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   22.625056] RBP: 00007fff4bbbeef0 R08: 0000000000000800 R09: 0000000000000800
[   22.625307] R10: 0000000000000000 R11: 0000000000000213 R12: 00007fff4bbbf008
[   22.625559] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f8a4843f000
[   22.625817]  </TASK>
[   22.625901] irq event stamp: 0
[   22.626014] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   22.626238] hardirqs last disabled at (0): [<ffffffff8122f2d1>] copy_process+0x1c51/0x7140
[   22.626531] softirqs last  enabled at (0): [<ffffffff8122f312>] copy_process+0x1c92/0x7140
[   22.626841] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   22.627080] ---[ end trace 0000000000000000 ]---
[   22.629619] iommufd_mock iommufd_mock250: Adding to iommu group 250
[   22.629888] iommufd_mock iommufd_mock250: Removing from iommu group 250
[   22.630147] general protection fault, probably for non-canonical address 0xdffffc0000000006: 0000 [#251] PREEMPT SMP KASAN NOPTI
[   22.630561] KASAN: null-ptr-deref in range [0x0000000000000030-0x0000000000000037]
[   22.630842] CPU: 0 PID: 973 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   22.631151] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   22.631552] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   22.631768] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   22.632415] RSP: 0018:ffff888017637ba8 EFLAGS: 00010206
[   22.632604] RAX: dffffc0000000000 RBX: ffff88801456a000 RCX: 0000000000000000
[   22.632857] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   22.633109] RBP: ffff888017637bc0 R08: 0000000000000001 R09: ffffed100155b11b
[   22.633363] R10: ffff88800aad88df R11: 5f6466756d6d6f69 R12: 0000000000000000
[   22.633615] R13: ffffffff85cc0180 R14: ffff8880111b7280 R15: ffffffff87070ae0
[   22.633869] FS:  00007fb87287c600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   22.634155] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   22.634361] CR2: 0000000020000080 CR3: 00000000203dc000 CR4: 0000000000750ef0
[   22.634616] PKRU: 55555554
[   22.634717] Call Trace:
[   22.634813]  <TASK>
[   22.634894]  ? show_regs+0x6e/0x80
[   22.635028]  ? die_addr+0x45/0xb0
[   22.635159]  ? exc_general_protection+0x159/0x250
[   22.635339]  ? asm_exc_general_protection+0x2b/0x30
[   22.635522]  ? sysfs_remove_link_from_group+0x21/0x90
[   22.635709]  ? sysfs_remove_link_from_group+0x37/0x90
[   22.635896]  ? sysfs_remove_link_from_group+0x21/0x90
[   22.636082]  iommu_device_unlink+0x85/0xd0
[   22.636238]  iommu_deinit_device+0x11f/0x4c0
[   22.636403]  __iommu_group_remove_device+0x26b/0x300
[   22.636589]  iommu_group_remove_device+0x8a/0xb0
[   22.636763]  iommufd_test+0x1f1a/0x2d10
[   22.636906]  ? __pfx_lock_release+0x10/0x10
[   22.637063]  ? __pfx_lock_acquire+0x10/0x10
[   22.637221]  ? __pfx_iommufd_test+0x10/0x10
[   22.637378]  ? __sanitizer_cov_trace_const_cmp8+0x1c/0x30
[   22.637578]  iommufd_fops_ioctl+0x377/0x510
[   22.637736]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   22.637911]  ? trace_hardirqs_on+0x26/0x120
[   22.638069]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   22.638297]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   22.638480]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   22.638679]  ? security_file_ioctl+0x9d/0xd0
[   22.638849]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   22.639027]  __x64_sys_ioctl+0x1b9/0x230
[   22.639175]  do_syscall_64+0x3c/0x90
[   22.639310]  entry_SYSCALL_64_after_hwframe+0x6e/0xd8
[   22.639496] RIP: 0033:0x7fb87263ee5d
[   22.639630] Code: ff c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d 93 af 1b 00 f7 d8 64 89 01 48
[   22.640300] RSP: 002b:00007ffe3447a748 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   22.640569] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007fb87263ee5d
[   22.640822] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   22.641074] RBP: 00007ffe3447a760 R08: 0000000000000800 R09: 0000000000000800
[   22.641327] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffe3447a878
[   22.641580] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007fb8728bd000
[   22.641838]  </TASK>
[   22.641921] Modules linked in:
[   22.642062] ---[ end trace 0000000000000000 ]---
[   22.642230] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   22.642438] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   22.643254] RSP: 0018:ffff88802457fba8 EFLAGS: 00010206
[   22.643448] RAX: dffffc0000000000 RBX: ffff888014f9b000 RCX: 0000000000000000
[   22.643701] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   22.643954] RBP: ffff88802457fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   22.644207] R10: ffff88800aad88df R11: 0000000000000001 R12: 0000000000000000
[   22.644460] R13: ffffffff85cc0180 R14: ffff8880109b6ac0 R15: ffffffff87070ae0
[   22.644713] FS:  00007fb87287c600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   22.644998] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   22.645205] CR2: 0000000020000080 CR3: 00000000203dc000 CR4: 0000000000750ef0
[   22.645459] PKRU: 55555554
[   22.645814] ------------[ cut here ]------------
[   22.645982] WARNING: CPU: 0 PID: 973 at drivers/iommu/iommufd/main.c:258 iommufd_fops_release+0x2a3/0x300
[   22.646323] Modules linked in:
[   22.646437] CPU: 0 PID: 973 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   22.646760] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   22.647176] RIP: 0010:iommufd_fops_release+0x2a3/0x300
[   22.647365] Code: 45 d0 65 48 2b 04 25 28 00 00 00 75 54 48 81 c4 88 00 00 00 31 c0 5b 41 5c 41 5d 41 5e 41 5f 5d c3 cc cc cc cc e8 ad 4f 0a fe <0f> 0b eb a6 e8 74 23 67 fe e9 f6 fe ff ff 48 89 85 50 ff ff ff e8
[   22.648010] RSP: 0018:ffff888017637c00 EFLAGS: 00010293
[   22.648198] RAX: 0000000000000000 RBX: ffff88800fe06308 RCX: 0000000000000000
[   22.648451] RDX: ffff88801388a500 RSI: ffffffff835563e3 RDI: ffffffff86702b40
[   22.648709] RBP: ffff888017637cb0 R08: 0000000000000000 R09: fffffbfff0eb2644
[   22.648961] R10: ffffffff87593227 R11: ffff888012f58800 R12: 0000000000000000
[   22.649214] R13: ffff888018b5fd18 R14: ffff888017637c48 R15: ffffffff83556140
[   22.649467] FS:  0000000000000000(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   22.649752] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   22.649959] CR2: 0000000020000080 CR3: 000000000687e000 CR4: 0000000000750ef0
[   22.650213] PKRU: 55555554
[   22.650314] Call Trace:
[   22.650406]  <TASK>
[   22.650487]  ? show_regs+0x6e/0x80
[   22.650625]  ? __warn+0xef/0x340
[   22.650754]  ? report_bug+0x25e/0x4b0
[   22.650894]  ? iommufd_fops_release+0x2a3/0x300
[   22.651064]  ? report_bug+0x2cb/0x4b0
[   22.651206]  ? handle_bug+0x46/0x90
[   22.651339]  ? exc_invalid_op+0x1d/0x50
[   22.651483]  ? asm_exc_invalid_op+0x1f/0x30
[   22.651638]  ? __pfx_iommufd_fops_release+0x10/0x10
[   22.651847]  ? iommufd_fops_release+0x2a3/0x300
[   22.652017]  ? iommufd_fops_release+0x2a3/0x300
[   22.652188]  ? __pfx_iommufd_fops_release+0x10/0x10
[   22.652368]  ? rcu_is_watching+0x19/0xc0
[   22.652517]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   22.652715]  ? __pfx_iommufd_fops_release+0x10/0x10
[   22.652895]  __fput+0x424/0xaf0
[   22.653021]  ____fput+0x1f/0x30
[   22.653143]  task_work_run+0x19d/0x2b0
[   22.653286]  ? __pfx_task_work_run+0x10/0x10
[   22.653446]  ? __sanitizer_cov_trace_const_cmp1+0x1e/0x30
[   22.653644]  ? switch_task_namespaces+0xa9/0xe0
[   22.653814]  do_exit+0xac9/0x2790
[   22.653942]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   22.654169]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   22.654351]  ? __pfx_do_exit+0x10/0x10
[   22.654493]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   22.654705]  ? security_file_ioctl+0x9d/0xd0
[   22.654871]  make_task_dead+0x182/0x3c0
[   22.655016]  rewind_stack_and_make_dead+0x17/0x20
[   22.655192] RIP: 0033:0x7fb87263ee5d
[   22.655325] Code: Unable to access opcode bytes at 0x7fb87263ee33.
[   22.655545] RSP: 002b:00007ffe3447a748 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   22.655814] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007fb87263ee5d
[   22.656067] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   22.656320] RBP: 00007ffe3447a760 R08: 0000000000000800 R09: 0000000000000800
[   22.656596] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffe3447a878
[   22.656850] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007fb8728bd000
[   22.657108]  </TASK>
[   22.657192] irq event stamp: 0
[   22.657306] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   22.657530] hardirqs last disabled at (0): [<ffffffff8122f2d1>] copy_process+0x1c51/0x7140
[   22.657823] softirqs last  enabled at (0): [<ffffffff8122f312>] copy_process+0x1c92/0x7140
[   22.658117] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   22.658341] ---[ end trace 0000000000000000 ]---
[   22.660899] iommufd_mock iommufd_mock251: Adding to iommu group 251
[   22.661153] iommufd_mock iommufd_mock251: Removing from iommu group 251
[   22.661408] general protection fault, probably for non-canonical address 0xdffffc0000000006: 0000 [#252] PREEMPT SMP KASAN NOPTI
[   22.661812] KASAN: null-ptr-deref in range [0x0000000000000030-0x0000000000000037]
[   22.662080] CPU: 0 PID: 974 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   22.662388] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   22.662805] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   22.663019] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   22.663665] RSP: 0018:ffff88800eeafba8 EFLAGS: 00010206
[   22.663856] RAX: dffffc0000000000 RBX: ffff888015918000 RCX: 0000000000000000
[   22.664109] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   22.664362] RBP: ffff88800eeafbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   22.664618] R10: ffff88800aad88df R11: 5f6466756d6d6f69 R12: 0000000000000000
[   22.664874] R13: ffffffff85cc0180 R14: ffff8880111b7080 R15: ffffffff87070ae0
[   22.665127] FS:  00007efd1d907600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   22.665413] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   22.665620] CR2: 0000000020000080 CR3: 00000000203dc000 CR4: 0000000000750ef0
[   22.665874] PKRU: 55555554
[   22.665976] Call Trace:
[   22.666068]  <TASK>
[   22.666149]  ? show_regs+0x6e/0x80
[   22.666282]  ? die_addr+0x45/0xb0
[   22.666414]  ? exc_general_protection+0x159/0x250
[   22.666594]  ? asm_exc_general_protection+0x2b/0x30
[   22.666788]  ? sysfs_remove_link_from_group+0x21/0x90
[   22.666976]  ? sysfs_remove_link_from_group+0x37/0x90
[   22.667163]  ? sysfs_remove_link_from_group+0x21/0x90
[   22.667351]  iommu_device_unlink+0x85/0xd0
[   22.667505]  iommu_deinit_device+0x11f/0x4c0
[   22.667668]  __iommu_group_remove_device+0x26b/0x300
[   22.667855]  iommu_group_remove_device+0x8a/0xb0
[   22.668028]  iommufd_test+0x1f1a/0x2d10
[   22.668172]  ? __pfx_lock_release+0x10/0x10
[   22.668329]  ? __pfx_lock_acquire+0x10/0x10
[   22.668488]  ? __pfx_iommufd_test+0x10/0x10
[   22.668645]  ? __sanitizer_cov_trace_const_cmp8+0x1c/0x30
[   22.668845]  iommufd_fops_ioctl+0x377/0x510
[   22.669004]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   22.669179]  ? trace_hardirqs_on+0x26/0x120
[   22.669338]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   22.669567]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   22.669750]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   22.669949]  ? security_file_ioctl+0x9d/0xd0
[   22.670112]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   22.670287]  __x64_sys_ioctl+0x1b9/0x230
[   22.670435]  do_syscall_64+0x3c/0x90
[   22.670570]  entry_SYSCALL_64_after_hwframe+0x6e/0xd8
[   22.670759] RIP: 0033:0x7efd1d63ee5d
[   22.670899] Code: ff c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d 93 af 1b 00 f7 d8 64 89 01 48
[   22.671545] RSP: 002b:00007ffeb9ae58b8 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   22.671817] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007efd1d63ee5d
[   22.672072] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   22.672325] RBP: 00007ffeb9ae58d0 R08: 0000000000000800 R09: 0000000000000800
[   22.672578] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffeb9ae59e8
[   22.672832] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007efd1d948000
[   22.673090]  </TASK>
[   22.673174] Modules linked in:
[   22.673396] ---[ end trace 0000000000000000 ]---
[   22.673566] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   22.673774] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   22.674421] RSP: 0018:ffff88802457fba8 EFLAGS: 00010206
[   22.674624] RAX: dffffc0000000000 RBX: ffff888014f9b000 RCX: 0000000000000000
[   22.674885] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   22.675138] RBP: ffff88802457fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   22.675392] R10: ffff88800aad88df R11: 0000000000000001 R12: 0000000000000000
[   22.675644] R13: ffffffff85cc0180 R14: ffff8880109b6ac0 R15: ffffffff87070ae0
[   22.675898] FS:  00007efd1d907600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   22.676184] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   22.676391] CR2: 0000000020000080 CR3: 00000000203dc000 CR4: 0000000000750ef0
[   22.676646] PKRU: 55555554
[   22.677003] ------------[ cut here ]------------
[   22.677172] WARNING: CPU: 0 PID: 974 at drivers/iommu/iommufd/main.c:258 iommufd_fops_release+0x2a3/0x300
[   22.677614] Modules linked in:
[   22.677733] CPU: 0 PID: 974 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   22.678041] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   22.678440] RIP: 0010:iommufd_fops_release+0x2a3/0x300
[   22.678642] Code: 45 d0 65 48 2b 04 25 28 00 00 00 75 54 48 81 c4 88 00 00 00 31 c0 5b 41 5c 41 5d 41 5e 41 5f 5d c3 cc cc cc cc e8 ad 4f 0a fe <0f> 0b eb a6 e8 74 23 67 fe e9 f6 fe ff ff 48 89 85 50 ff ff ff e8
[   22.679302] RSP: 0018:ffff88800eeafc00 EFLAGS: 00010293
[   22.679491] RAX: 0000000000000000 RBX: ffff88800fe06f08 RCX: 0000000000000000
[   22.679744] RDX: ffff888011e84a00 RSI: ffffffff835563e3 RDI: ffffffff86702b40
[   22.679997] RBP: ffff88800eeafcb0 R08: 0000000000000000 R09: fffffbfff0eb2644
[   22.680250] R10: ffffffff87593227 R11: ffff888013477800 R12: 0000000000000000
[   22.680503] R13: ffff8880132c1098 R14: ffff88800eeafc48 R15: ffffffff83556140
[   22.680756] FS:  0000000000000000(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   22.681041] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   22.681248] CR2: 0000000020000080 CR3: 000000000687e000 CR4: 0000000000750ef0
[   22.681502] PKRU: 55555554
[   22.681604] Call Trace:
[   22.681696]  <TASK>
[   22.681777]  ? show_regs+0x6e/0x80
[   22.681908]  ? __warn+0xef/0x340
[   22.682033]  ? report_bug+0x25e/0x4b0
[   22.682173]  ? iommufd_fops_release+0x2a3/0x300
[   22.682342]  ? report_bug+0x2cb/0x4b0
[   22.682485]  ? handle_bug+0x46/0x90
[   22.682633]  ? exc_invalid_op+0x1d/0x50
[   22.682781]  ? asm_exc_invalid_op+0x1f/0x30
[   22.682937]  ? __pfx_iommufd_fops_release+0x10/0x10
[   22.683120]  ? iommufd_fops_release+0x2a3/0x300
[   22.683289]  ? iommufd_fops_release+0x2a3/0x300
[   22.683460]  ? __pfx_iommufd_fops_release+0x10/0x10
[   22.683640]  ? rcu_is_watching+0x19/0xc0
[   22.683789]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   22.683987]  ? __pfx_iommufd_fops_release+0x10/0x10
[   22.684167]  __fput+0x424/0xaf0
[   22.684292]  ____fput+0x1f/0x30
[   22.684414]  task_work_run+0x19d/0x2b0
[   22.684557]  ? __pfx_task_work_run+0x10/0x10
[   22.684716]  ? __sanitizer_cov_trace_const_cmp1+0x1e/0x30
[   22.684913]  ? switch_task_namespaces+0xa9/0xe0
[   22.685085]  do_exit+0xac9/0x2790
[   22.685212]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   22.685439]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   22.685622]  ? __pfx_do_exit+0x10/0x10
[   22.685763]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   22.685960]  ? security_file_ioctl+0x9d/0xd0
[   22.686122]  make_task_dead+0x182/0x3c0
[   22.686268]  rewind_stack_and_make_dead+0x17/0x20
[   22.686443] RIP: 0033:0x7efd1d63ee5d
[   22.686584] Code: Unable to access opcode bytes at 0x7efd1d63ee33.
[   22.686807] RSP: 002b:00007ffeb9ae58b8 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   22.687077] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007efd1d63ee5d
[   22.687330] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   22.687584] RBP: 00007ffeb9ae58d0 R08: 0000000000000800 R09: 0000000000000800
[   22.687837] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffeb9ae59e8
[   22.688090] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007efd1d948000
[   22.688348]  </TASK>
[   22.688432] irq event stamp: 0
[   22.688546] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   22.688770] hardirqs last disabled at (0): [<ffffffff8122f2d1>] copy_process+0x1c51/0x7140
[   22.689064] softirqs last  enabled at (0): [<ffffffff8122f312>] copy_process+0x1c92/0x7140
[   22.689358] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   22.689582] ---[ end trace 0000000000000000 ]---
[   22.692208] iommufd_mock iommufd_mock252: Adding to iommu group 252
[   22.692458] iommufd_mock iommufd_mock252: Removing from iommu group 252
[   22.692713] general protection fault, probably for non-canonical address 0xdffffc0000000006: 0000 [#253] PREEMPT SMP KASAN NOPTI
[   22.693118] KASAN: null-ptr-deref in range [0x0000000000000030-0x0000000000000037]
[   22.693386] CPU: 0 PID: 975 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   22.693694] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   22.694093] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   22.694303] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   22.694956] RSP: 0018:ffff888012047ba8 EFLAGS: 00010206
[   22.695146] RAX: dffffc0000000000 RBX: ffff88801591e000 RCX: 0000000000000000
[   22.695400] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   22.695654] RBP: ffff888012047bc0 R08: 0000000000000001 R09: ffffed100155b11b
[   22.695907] R10: ffff88800aad88df R11: 5f6466756d6d6f69 R12: 0000000000000000
[   22.696161] R13: ffffffff85cc0180 R14: ffff8880111b7800 R15: ffffffff87070ae0
[   22.696415] FS:  00007fb9cb875600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   22.696701] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   22.696908] CR2: 0000000020000080 CR3: 00000000203dc000 CR4: 0000000000750ef0
[   22.697183] PKRU: 55555554
[   22.697285] Call Trace:
[   22.697379]  <TASK>
[   22.697461]  ? show_regs+0x6e/0x80
[   22.697595]  ? die_addr+0x45/0xb0
[   22.697726]  ? exc_general_protection+0x159/0x250
[   22.697906]  ? asm_exc_general_protection+0x2b/0x30
[   22.698090]  ? sysfs_remove_link_from_group+0x21/0x90
[   22.698277]  ? sysfs_remove_link_from_group+0x37/0x90
[   22.698465]  ? sysfs_remove_link_from_group+0x21/0x90
[   22.698653]  iommu_device_unlink+0x85/0xd0
[   22.698816]  iommu_deinit_device+0x11f/0x4c0
[   22.698979]  __iommu_group_remove_device+0x26b/0x300
[   22.699166]  iommu_group_remove_device+0x8a/0xb0
[   22.699340]  iommufd_test+0x1f1a/0x2d10
[   22.699484]  ? __pfx_lock_release+0x10/0x10
[   22.699641]  ? __pfx_lock_acquire+0x10/0x10
[   22.699800]  ? __pfx_iommufd_test+0x10/0x10
[   22.699957]  ? __sanitizer_cov_trace_const_cmp8+0x1c/0x30
[   22.700158]  iommufd_fops_ioctl+0x377/0x510
[   22.700317]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   22.700493]  ? trace_hardirqs_on+0x26/0x120
[   22.700652]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   22.700881]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   22.701065]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   22.701264]  ? security_file_ioctl+0x9d/0xd0
[   22.701427]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   22.701603]  __x64_sys_ioctl+0x1b9/0x230
[   22.701751]  do_syscall_64+0x3c/0x90
[   22.701909]  entry_SYSCALL_64_after_hwframe+0x6e/0xd8
[   22.702097] RIP: 0033:0x7fb9cb63ee5d
[   22.702235] Code: ff c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d 93 af 1b 00 f7 d8 64 89 01 48
[   22.702899] RSP: 002b:00007ffde9ac5398 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   22.703169] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007fb9cb63ee5d
[   22.703423] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   22.703676] RBP: 00007ffde9ac53b0 R08: 0000000000000800 R09: 0000000000000800
[   22.703930] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffde9ac54c8
[   22.704183] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007fb9cb8b6000
[   22.704441]  </TASK>
[   22.704526] Modules linked in:
[   22.704680] ---[ end trace 0000000000000000 ]---
[   22.704850] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   22.705058] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   22.705704] RSP: 0018:ffff88802457fba8 EFLAGS: 00010206
[   22.705894] RAX: dffffc0000000000 RBX: ffff888014f9b000 RCX: 0000000000000000
[   22.706148] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   22.706404] RBP: ffff88802457fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   22.706667] R10: ffff88800aad88df R11: 0000000000000001 R12: 0000000000000000
[   22.706966] R13: ffffffff85cc0180 R14: ffff8880109b6ac0 R15: ffffffff87070ae0
[   22.707290] FS:  00007fb9cb875600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   22.707577] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   22.707812] CR2: 0000000020000080 CR3: 00000000203dc000 CR4: 0000000000750ef0
[   22.708108] PKRU: 55555554
[   22.708478] ------------[ cut here ]------------
[   22.708683] WARNING: CPU: 0 PID: 975 at drivers/iommu/iommufd/main.c:258 iommufd_fops_release+0x2a3/0x300
[   22.709053] Modules linked in:
[   22.709209] CPU: 0 PID: 975 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   22.709519] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   22.709981] RIP: 0010:iommufd_fops_release+0x2a3/0x300
[   22.710171] Code: 45 d0 65 48 2b 04 25 28 00 00 00 75 54 48 81 c4 88 00 00 00 31 c0 5b 41 5c 41 5d 41 5e 41 5f 5d c3 cc cc cc cc e8 ad 4f 0a fe <0f> 0b eb a6 e8 74 23 67 fe e9 f6 fe ff ff 48 89 85 50 ff ff ff e8
[   22.710898] RSP: 0018:ffff888012047c00 EFLAGS: 00010293
[   22.711088] RAX: 0000000000000000 RBX: ffff88800fe06208 RCX: 0000000000000000
[   22.711404] RDX: ffff8880121d8000 RSI: ffffffff835563e3 RDI: ffffffff86702b40
[   22.711658] RBP: ffff888012047cb0 R08: 0000000000000000 R09: fffffbfff0eb2644
[   22.711928] R10: ffffffff87593227 R11: ffff8880132a5e00 R12: 0000000000000000
[   22.712232] R13: ffff8880132c0b98 R14: ffff888012047c48 R15: ffffffff83556140
[   22.712497] FS:  0000000000000000(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   22.712846] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   22.713058] CR2: 0000000020000080 CR3: 000000000687e000 CR4: 0000000000750ef0
[   22.713376] PKRU: 55555554
[   22.713481] Call Trace:
[   22.713575]  <TASK>
[   22.713659]  ? show_regs+0x6e/0x80
[   22.713801]  ? __warn+0xef/0x340
[   22.713980]  ? report_bug+0x25e/0x4b0
[   22.714120]  ? iommufd_fops_release+0x2a3/0x300
[   22.714290]  ? report_bug+0x2cb/0x4b0
[   22.714442]  ? handle_bug+0x46/0x90
[   22.714736]  ? exc_invalid_op+0x1d/0x50
[   22.714886]  ? asm_exc_invalid_op+0x1f/0x30
[   22.715041]  ? __pfx_iommufd_fops_release+0x10/0x10
[   22.715224]  ? iommufd_fops_release+0x2a3/0x300
[   22.715394]  ? iommufd_fops_release+0x2a3/0x300
[   22.715565]  ? __pfx_iommufd_fops_release+0x10/0x10
[   22.715803]  ? rcu_is_watching+0x19/0xc0
[   22.715953]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   22.716152]  ? __pfx_iommufd_fops_release+0x10/0x10
[   22.716350]  __fput+0x424/0xaf0
[   22.716516]  ____fput+0x1f/0x30
[   22.716638]  task_work_run+0x19d/0x2b0
[   22.716781]  ? __pfx_task_work_run+0x10/0x10
[   22.716961]  ? __sanitizer_cov_trace_const_cmp1+0x1e/0x30
[   22.717200]  ? switch_task_namespaces+0xa9/0xe0
[   22.717370]  do_exit+0xac9/0x2790
[   22.717498]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   22.717781]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   22.717963]  ? __pfx_do_exit+0x10/0x10
[   22.718104]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   22.718359]  ? security_file_ioctl+0x9d/0xd0
[   22.718525]  make_task_dead+0x182/0x3c0
[   22.718683]  rewind_stack_and_make_dead+0x17/0x20
[   22.718866] RIP: 0033:0x7fb9cb63ee5d
[   22.719002] Code: Unable to access opcode bytes at 0x7fb9cb63ee33.
[   22.719241] RSP: 002b:00007ffde9ac5398 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   22.719564] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007fb9cb63ee5d
[   22.719823] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   22.720139] RBP: 00007ffde9ac53b0 R08: 0000000000000800 R09: 0000000000000800
[   22.720398] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffde9ac54c8
[   22.720712] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007fb9cb8b6000
[   22.720977]  </TASK>
[   22.721063] irq event stamp: 0
[   22.721238] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   22.721469] hardirqs last disabled at (0): [<ffffffff8122f2d1>] copy_process+0x1c51/0x7140
[   22.721777] softirqs last  enabled at (0): [<ffffffff8122f312>] copy_process+0x1c92/0x7140
[   22.722127] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   22.722360] ---[ end trace 0000000000000000 ]---
[   22.725245] iommufd_mock iommufd_mock253: Adding to iommu group 253
[   22.725498] iommufd_mock iommufd_mock253: Removing from iommu group 253
[   22.725758] general protection fault, probably for non-canonical address 0xdffffc0000000006: 0000 [#254] PREEMPT SMP KASAN NOPTI
[   22.726212] KASAN: null-ptr-deref in range [0x0000000000000030-0x0000000000000037]
[   22.726487] CPU: 0 PID: 976 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   22.726809] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   22.727221] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   22.727431] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   22.728079] RSP: 0018:ffff88800eeafba8 EFLAGS: 00010206
[   22.728269] RAX: dffffc0000000000 RBX: ffff88801591d000 RCX: 0000000000000000
[   22.728523] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   22.728777] RBP: ffff88800eeafbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   22.729031] R10: ffff88800aad88df R11: 5f6466756d6d6f69 R12: 0000000000000000
[   22.729285] R13: ffffffff85cc0180 R14: ffff8880111b74c0 R15: ffffffff87070ae0
[   22.729540] FS:  00007f90537ad600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   22.729826] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   22.730034] CR2: 0000000020000080 CR3: 0000000018b0a000 CR4: 0000000000750ef0
[   22.730289] PKRU: 55555554
[   22.730392] Call Trace:
[   22.730484]  <TASK>
[   22.730566]  ? show_regs+0x6e/0x80
[   22.730704]  ? die_addr+0x45/0xb0
[   22.730844]  ? exc_general_protection+0x159/0x250
[   22.731025]  ? asm_exc_general_protection+0x2b/0x30
[   22.731210]  ? sysfs_remove_link_from_group+0x21/0x90
[   22.731398]  ? sysfs_remove_link_from_group+0x37/0x90
[   22.731585]  ? sysfs_remove_link_from_group+0x21/0x90
[   22.731773]  iommu_device_unlink+0x85/0xd0
[   22.731927]  iommu_deinit_device+0x11f/0x4c0
[   22.732090]  __iommu_group_remove_device+0x26b/0x300
[   22.732277]  iommu_group_remove_device+0x8a/0xb0
[   22.732451]  iommufd_test+0x1f1a/0x2d10
[   22.732595]  ? __pfx_lock_release+0x10/0x10
[   22.732752]  ? __pfx_lock_acquire+0x10/0x10
[   22.732911]  ? __pfx_iommufd_test+0x10/0x10
[   22.733069]  ? __sanitizer_cov_trace_const_cmp8+0x1c/0x30
[   22.733270]  iommufd_fops_ioctl+0x377/0x510
[   22.733429]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   22.733605]  ? trace_hardirqs_on+0x26/0x120
[   22.733765]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   22.733994]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   22.734178]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   22.734378]  ? security_file_ioctl+0x9d/0xd0
[   22.734541]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   22.734721]  __x64_sys_ioctl+0x1b9/0x230
[   22.734877]  do_syscall_64+0x3c/0x90
[   22.735016]  entry_SYSCALL_64_after_hwframe+0x6e/0xd8
[   22.735202] RIP: 0033:0x7f905343ee5d
[   22.735336] Code: ff c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d 93 af 1b 00 f7 d8 64 89 01 48
[   22.735985] RSP: 002b:00007ffeedc924e8 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   22.736256] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f905343ee5d
[   22.736514] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   22.736770] RBP: 00007ffeedc92500 R08: 0000000000000800 R09: 0000000000000800
[   22.737023] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffeedc92618
[   22.737277] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f90537ee000
[   22.737536]  </TASK>
[   22.737620] Modules linked in:
[   22.737805] ---[ end trace 0000000000000000 ]---
[   22.737977] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   22.738190] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   22.738942] RSP: 0018:ffff88802457fba8 EFLAGS: 00010206
[   22.739136] RAX: dffffc0000000000 RBX: ffff888014f9b000 RCX: 0000000000000000
[   22.739395] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   22.739654] RBP: ffff88802457fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   22.739988] R10: ffff88800aad88df R11: 0000000000000001 R12: 0000000000000000
[   22.740242] R13: ffffffff85cc0180 R14: ffff8880109b6ac0 R15: ffffffff87070ae0
[   22.740520] FS:  00007f90537ad600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   22.740846] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   22.741062] CR2: 0000000020000080 CR3: 0000000018b0a000 CR4: 0000000000750ef0
[   22.741368] PKRU: 55555554
[   22.741727] ------------[ cut here ]------------
[   22.741946] WARNING: CPU: 0 PID: 976 at drivers/iommu/iommufd/main.c:258 iommufd_fops_release+0x2a3/0x300
[   22.742293] Modules linked in:
[   22.742420] CPU: 0 PID: 976 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   22.742784] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   22.743190] RIP: 0010:iommufd_fops_release+0x2a3/0x300
[   22.743400] Code: 45 d0 65 48 2b 04 25 28 00 00 00 75 54 48 81 c4 88 00 00 00 31 c0 5b 41 5c 41 5d 41 5e 41 5f 5d c3 cc cc cc cc e8 ad 4f 0a fe <0f> 0b eb a6 e8 74 23 67 fe e9 f6 fe ff ff 48 89 85 50 ff ff ff e8
[   22.744089] RSP: 0018:ffff88800eeafc00 EFLAGS: 00010293
[   22.744299] RAX: 0000000000000000 RBX: ffff88800fe06908 RCX: 0000000000000000
[   22.744595] RDX: ffff88800c0b2500 RSI: ffffffff835563e3 RDI: ffffffff86702b40
[   22.744867] RBP: ffff88800eeafcb0 R08: 0000000000000000 R09: fffffbfff0eb2644
[   22.745173] R10: ffffffff87593227 R11: ffff88800f55cc00 R12: 0000000000000000
[   22.745432] R13: ffff888012469098 R14: ffff88800eeafc48 R15: ffffffff83556140
[   22.745756] FS:  0000000000000000(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   22.746048] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   22.746311] CR2: 0000000020000080 CR3: 000000000687e000 CR4: 0000000000750ef0
[   22.746572] PKRU: 55555554
[   22.746686] Call Trace:
[   22.746798]  <TASK>
[   22.746882]  ? show_regs+0x6e/0x80
[   22.747025]  ? __warn+0xef/0x340
[   22.747209]  ? report_bug+0x25e/0x4b0
[   22.747352]  ? iommufd_fops_release+0x2a3/0x300
[   22.747526]  ? report_bug+0x2cb/0x4b0
[   22.747671]  ? handle_bug+0x46/0x90
[   22.747866]  ? exc_invalid_op+0x1d/0x50
[   22.748014]  ? asm_exc_invalid_op+0x1f/0x30
[   22.748173]  ? __pfx_iommufd_fops_release+0x10/0x10
[   22.748369]  ? iommufd_fops_release+0x2a3/0x300
[   22.748579]  ? iommufd_fops_release+0x2a3/0x300
[   22.748756]  ? __pfx_iommufd_fops_release+0x10/0x10
[   22.748947]  ? rcu_is_watching+0x19/0xc0
[   22.749153]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   22.749356]  ? __pfx_iommufd_fops_release+0x10/0x10
[   22.749541]  __fput+0x424/0xaf0
[   22.749674]  ____fput+0x1f/0x30
[   22.749854]  task_work_run+0x19d/0x2b0
[   22.750001]  ? __pfx_task_work_run+0x10/0x10
[   22.750164]  ? __sanitizer_cov_trace_const_cmp1+0x1e/0x30
[   22.750384]  ? switch_task_namespaces+0xa9/0xe0
[   22.750608]  do_exit+0xac9/0x2790
[   22.750740]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   22.750977]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   22.751164]  ? __pfx_do_exit+0x10/0x10
[   22.751308]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   22.751519]  ? security_file_ioctl+0x9d/0xd0
[   22.751737]  make_task_dead+0x182/0x3c0
[   22.751886]  rewind_stack_and_make_dead+0x17/0x20
[   22.752066] RIP: 0033:0x7f905343ee5d
[   22.752262] Code: Unable to access opcode bytes at 0x7f905343ee33.
[   22.752487] RSP: 002b:00007ffeedc924e8 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   22.752770] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f905343ee5d
[   22.753082] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   22.753341] RBP: 00007ffeedc92500 R08: 0000000000000800 R09: 0000000000000800
[   22.753661] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffeedc92618
[   22.753920] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f90537ee000
[   22.754248]  </TASK>
[   22.754335] irq event stamp: 0
[   22.754452] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   22.754702] hardirqs last disabled at (0): [<ffffffff8122f2d1>] copy_process+0x1c51/0x7140
[   22.755062] softirqs last  enabled at (0): [<ffffffff8122f312>] copy_process+0x1c92/0x7140
[   22.755362] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   22.755591] ---[ end trace 0000000000000000 ]---
[   22.758363] iommufd_mock iommufd_mock254: Adding to iommu group 254
[   22.758674] iommufd_mock iommufd_mock254: Removing from iommu group 254
[   22.758940] general protection fault, probably for non-canonical address 0xdffffc0000000006: 0000 [#255] PREEMPT SMP KASAN NOPTI
[   22.759354] KASAN: null-ptr-deref in range [0x0000000000000030-0x0000000000000037]
[   22.759628] CPU: 0 PID: 977 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   22.759944] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   22.760395] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   22.760611] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   22.761273] RSP: 0018:ffff88800f3f7ba8 EFLAGS: 00010206
[   22.761467] RAX: dffffc0000000000 RBX: ffff88801591f000 RCX: 0000000000000000
[   22.761727] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   22.761986] RBP: ffff88800f3f7bc0 R08: 0000000000000001 R09: ffffed100155b11b
[   22.762244] R10: ffff88800aad88df R11: 5f6466756d6d6f69 R12: 0000000000000000
[   22.762503] R13: ffffffff85cc0180 R14: ffff8880111b7f00 R15: ffffffff87070ae0
[   22.762769] FS:  00007fc70cac2600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   22.763061] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   22.763273] CR2: 0000000020000080 CR3: 00000000203dc000 CR4: 0000000000750ef0
[   22.763534] PKRU: 55555554
[   22.763637] Call Trace:
[   22.763732]  <TASK>
[   22.763816]  ? show_regs+0x6e/0x80
[   22.763952]  ? die_addr+0x45/0xb0
[   22.764086]  ? exc_general_protection+0x159/0x250
[   22.764271]  ? asm_exc_general_protection+0x2b/0x30
[   22.764458]  ? sysfs_remove_link_from_group+0x21/0x90
[   22.764650]  ? sysfs_remove_link_from_group+0x37/0x90
[   22.764843]  ? sysfs_remove_link_from_group+0x21/0x90
[   22.765038]  iommu_device_unlink+0x85/0xd0
[   22.765196]  iommu_deinit_device+0x11f/0x4c0
[   22.765363]  __iommu_group_remove_device+0x26b/0x300
[   22.765554]  iommu_group_remove_device+0x8a/0xb0
[   22.765732]  iommufd_test+0x1f1a/0x2d10
[   22.765879]  ? __pfx_lock_release+0x10/0x10
[   22.766040]  ? __pfx_lock_acquire+0x10/0x10
[   22.766202]  ? __pfx_iommufd_test+0x10/0x10
[   22.766363]  ? __sanitizer_cov_trace_const_cmp8+0x1c/0x30
[   22.766568]  iommufd_fops_ioctl+0x377/0x510
[   22.766730]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   22.766916]  ? trace_hardirqs_on+0x26/0x120
[   22.767076]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   22.767306]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   22.767490]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   22.767689]  ? security_file_ioctl+0x9d/0xd0
[   22.767853]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   22.768029]  __x64_sys_ioctl+0x1b9/0x230
[   22.768178]  do_syscall_64+0x3c/0x90
[   22.768313]  entry_SYSCALL_64_after_hwframe+0x6e/0xd8
[   22.768500] RIP: 0033:0x7fc70c83ee5d
[   22.768634] Code: ff c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d 93 af 1b 00 f7 d8 64 89 01 48
[   22.769282] RSP: 002b:00007fffbc094d58 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   22.769553] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007fc70c83ee5d
[   22.769808] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   22.770062] RBP: 00007fffbc094d70 R08: 0000000000000800 R09: 0000000000000800
[   22.770316] R10: 0000000000000000 R11: 0000000000000213 R12: 00007fffbc094e88
[   22.770571] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007fc70cb03000
[   22.770838]  </TASK>
[   22.770927] Modules linked in:
[   22.771186] ---[ end trace 0000000000000000 ]---
[   22.771359] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   22.771572] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   22.772243] RSP: 0018:ffff88802457fba8 EFLAGS: 00010206
[   22.772491] RAX: dffffc0000000000 RBX: ffff888014f9b000 RCX: 0000000000000000
[   22.772751] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   22.773071] RBP: ffff88802457fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   22.773331] R10: ffff88800aad88df R11: 0000000000000001 R12: 0000000000000000
[   22.773605] R13: ffffffff85cc0180 R14: ffff8880109b6ac0 R15: ffffffff87070ae0
[   22.773908] FS:  00007fc70cac2600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   22.774205] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   22.774496] CR2: 0000000020000080 CR3: 00000000203dc000 CR4: 0000000000750ef0
[   22.774771] PKRU: 55555554
[   22.775141] ------------[ cut here ]------------
[   22.775360] WARNING: CPU: 0 PID: 977 at drivers/iommu/iommufd/main.c:258 iommufd_fops_release+0x2a3/0x300
[   22.775713] Modules linked in:
[   22.775886] CPU: 0 PID: 977 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   22.776202] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   22.776669] RIP: 0010:iommufd_fops_release+0x2a3/0x300
[   22.776862] Code: 45 d0 65 48 2b 04 25 28 00 00 00 75 54 48 81 c4 88 00 00 00 31 c0 5b 41 5c 41 5d 41 5e 41 5f 5d c3 cc cc cc cc e8 ad 4f 0a fe <0f> 0b eb a6 e8 74 23 67 fe e9 f6 fe ff ff 48 89 85 50 ff ff ff e8
[   22.777586] RSP: 0018:ffff88800f3f7c00 EFLAGS: 00010293
[   22.777838] RAX: 0000000000000000 RBX: ffff88800fe06d08 RCX: 0000000000000000
[   22.778098] RDX: ffff888014428000 RSI: ffffffff835563e3 RDI: ffffffff86702b40
[   22.778414] RBP: ffff88800f3f7cb0 R08: 0000000000000000 R09: fffffbfff0eb2644
[   22.778683] R10: ffffffff87593227 R11: ffff88801894e800 R12: 0000000000000000
[   22.778946] R13: ffff88800f476698 R14: ffff88800f3f7c48 R15: ffffffff83556140
[   22.779227] FS:  0000000000000000(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   22.779562] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   22.779795] CR2: 0000000020000080 CR3: 000000000687e000 CR4: 0000000000750ef0
[   22.780102] PKRU: 55555554
[   22.780207] Call Trace:
[   22.780301]  <TASK>
[   22.780385]  ? show_regs+0x6e/0x80
[   22.780580]  ? __warn+0xef/0x340
[   22.780708]  ? report_bug+0x25e/0x4b0
[   22.780851]  ? iommufd_fops_release+0x2a3/0x300
[   22.781028]  ? report_bug+0x2cb/0x4b0
[   22.781230]  ? handle_bug+0x46/0x90
[   22.781366]  ? exc_invalid_op+0x1d/0x50
[   22.781514]  ? asm_exc_invalid_op+0x1f/0x30
[   22.781672]  ? __pfx_iommufd_fops_release+0x10/0x10
[   22.781915]  ? iommufd_fops_release+0x2a3/0x300
[   22.782089]  ? iommufd_fops_release+0x2a3/0x300
[   22.782263]  ? __pfx_iommufd_fops_release+0x10/0x10
[   22.782507]  ? rcu_is_watching+0x19/0xc0
[   22.782667]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   22.782875]  ? __pfx_iommufd_fops_release+0x10/0x10
[   22.783060]  __fput+0x424/0xaf0
[   22.783188]  ____fput+0x1f/0x30
[   22.783313]  task_work_run+0x19d/0x2b0
[   22.783522]  ? __pfx_task_work_run+0x10/0x10
[   22.783686]  ? __sanitizer_cov_trace_const_cmp1+0x1e/0x30
[   22.783887]  ? switch_task_namespaces+0xa9/0xe0
[   22.784069]  do_exit+0xac9/0x2790
[   22.784279]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   22.784512]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   22.784709]  ? __pfx_do_exit+0x10/0x10
[   22.784908]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   22.785110]  ? security_file_ioctl+0x9d/0xd0
[   22.785277]  make_task_dead+0x182/0x3c0
[   22.785491]  rewind_stack_and_make_dead+0x17/0x20
[   22.785671] RIP: 0033:0x7fc70c83ee5d
[   22.785807] Code: Unable to access opcode bytes at 0x7fc70c83ee33.
[   22.786098] RSP: 002b:00007fffbc094d58 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   22.786374] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007fc70c83ee5d
[   22.786661] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   22.786943] systemd-journald[136]: Data hash table of /run/log/journal/938775788448454bb5b34822d5730c41/system.journal has a fill level at 75.0 (5446 of 7260 items, 4182016 file size, 767 bytes per hash table item), suggesting rotation.
[   22.786958] RBP: 00007fffbc094d70 R08: 0000000000000800 R09: 0000000000000800
[   22.787717] systemd-journald[136]: /run/log/journal/938775788448454bb5b34822d5730c41/system.journal: Journal header limits reached or header out-of-date, rotating.
[   22.787966] R10: 0000000000000000 R11: 0000000000000213 R12: 00007fffbc094e88
[   22.788744] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007fc70cb03000
[   22.789010]  </TASK>
[   22.789097] irq event stamp: 0
[   22.789213] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   22.789443] hardirqs last disabled at (0): [<ffffffff8122f2d1>] copy_process+0x1c51/0x7140
[   22.789744] softirqs last  enabled at (0): [<ffffffff8122f312>] copy_process+0x1c92/0x7140
[   22.790045] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   22.790274] ---[ end trace 0000000000000000 ]---
[   22.793014] iommufd_mock iommufd_mock255: Adding to iommu group 255
[   22.793343] iommufd_mock iommufd_mock255: Removing from iommu group 255
[   22.793605] general protection fault, probably for non-canonical address 0xdffffc0000000006: 0000 [#256] PREEMPT SMP KASAN NOPTI
[   22.794020] KASAN: null-ptr-deref in range [0x0000000000000030-0x0000000000000037]
[   22.794346] CPU: 0 PID: 978 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   22.794663] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   22.795089] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   22.795304] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   22.795981] RSP: 0018:ffff888012047ba8 EFLAGS: 00010206
[   22.796176] RAX: dffffc0000000000 RBX: ffff88801591c000 RCX: 0000000000000000
[   22.796438] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   22.796696] RBP: ffff888012047bc0 R08: 0000000000000001 R09: ffffed100155b11b
[   22.796955] R10: ffff88800aad88df R11: 5f6466756d6d6f69 R12: 0000000000000000
[   22.797214] R13: ffffffff85cc0180 R14: ffff8880111b78e0 R15: ffffffff87070ae0
[   22.797475] FS:  00007f93d818a600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   22.797770] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   22.797981] CR2: 0000000020000080 CR3: 0000000018b0a000 CR4: 0000000000750ef0
[   22.798241] PKRU: 55555554
[   22.798345] Call Trace:
[   22.798439]  <TASK>
[   22.798522]  ? show_regs+0x6e/0x80
[   22.798659]  ? die_addr+0x45/0xb0
[   22.798796]  ? exc_general_protection+0x159/0x250
[   22.798983]  ? asm_exc_general_protection+0x2b/0x30
[   22.799170]  ? sysfs_remove_link_from_group+0x21/0x90
[   22.799363]  ? sysfs_remove_link_from_group+0x37/0x90
[   22.799554]  ? sysfs_remove_link_from_group+0x21/0x90
[   22.799745]  iommu_device_unlink+0x85/0xd0
[   22.799902]  iommu_deinit_device+0x11f/0x4c0
[   22.800069]  __iommu_group_remove_device+0x26b/0x300
[   22.800259]  iommu_group_remove_device+0x8a/0xb0
[   22.800436]  iommufd_test+0x1f1a/0x2d10
[   22.800583]  ? __pfx_lock_release+0x10/0x10
[   22.800743]  ? __pfx_lock_acquire+0x10/0x10
[   22.800905]  ? __pfx_iommufd_test+0x10/0x10
[   22.801066]  ? __sanitizer_cov_trace_const_cmp8+0x1c/0x30
[   22.801270]  iommufd_fops_ioctl+0x377/0x510
[   22.801432]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   22.801611]  ? trace_hardirqs_on+0x26/0x120
[   22.801773]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   22.802006]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   22.802194]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   22.802396]  ? security_file_ioctl+0x9d/0xd0
[   22.802562]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   22.802742]  __x64_sys_ioctl+0x1b9/0x230
[   22.802896]  do_syscall_64+0x3c/0x90
[   22.803034]  entry_SYSCALL_64_after_hwframe+0x6e/0xd8
[   22.803223] RIP: 0033:0x7f93d7e3ee5d
[   22.803361] Code: ff c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d 93 af 1b 00 f7 d8 64 89 01 48
[   22.804020] RSP: 002b:00007fff76e33da8 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   22.804296] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f93d7e3ee5d
[   22.804554] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   22.804812] RBP: 00007fff76e33dc0 R08: 0000000000000800 R09: 0000000000000800
[   22.805071] R10: 0000000000000000 R11: 0000000000000213 R12: 00007fff76e33ed8
[   22.805329] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f93d81cb000
[   22.805592]  </TASK>
[   22.805678] Modules linked in:
[   22.805956] ---[ end trace 0000000000000000 ]---
[   22.806202] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   22.806416] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   22.807085] RSP: 0018:ffff88802457fba8 EFLAGS: 00010206
[   22.807335] RAX: dffffc0000000000 RBX: ffff888014f9b000 RCX: 0000000000000000
[   22.807594] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   22.807853] RBP: ffff88802457fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   22.808112] R10: ffff88800aad88df R11: 0000000000000001 R12: 0000000000000000
[   22.808371] R13: ffffffff85cc0180 R14: ffff8880109b6ac0 R15: ffffffff87070ae0
[   22.808630] FS:  00007f93d818a600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   22.808930] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   22.809198] CR2: 0000000020000080 CR3: 0000000018b0a000 CR4: 0000000000750ef0
[   22.809458] PKRU: 55555554
[   22.809861] ------------[ cut here ]------------
[   22.810034] WARNING: CPU: 0 PID: 978 at drivers/iommu/iommufd/main.c:258 iommufd_fops_release+0x2a3/0x300
[   22.810444] Modules linked in:
[   22.810563] CPU: 0 PID: 978 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   22.810902] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   22.811337] RIP: 0010:iommufd_fops_release+0x2a3/0x300
[   22.811532] Code: 45 d0 65 48 2b 04 25 28 00 00 00 75 54 48 81 c4 88 00 00 00 31 c0 5b 41 5c 41 5d 41 5e 41 5f 5d c3 cc cc cc cc e8 ad 4f 0a fe <0f> 0b eb a6 e8 74 23 67 fe e9 f6 fe ff ff 48 89 85 50 ff ff ff e8
[   22.812239] RSP: 0018:ffff888012047c00 EFLAGS: 00010293
[   22.812486] RAX: 0000000000000000 RBX: ffff88800fe06108 RCX: 0000000000000000
[   22.812745] RDX: ffff888010e3ca00 RSI: ffffffff835563e3 RDI: ffffffff86702b40
[   22.813022] RBP: ffff888012047cb0 R08: 0000000000000000 R09: fffffbfff0eb2644
[   22.813324] R10: ffffffff87593227 R11: ffff888013131e00 R12: 0000000000000000
[   22.813587] R13: ffff888018bb1318 R14: ffff888012047c48 R15: ffffffff83556140
[   22.813900] FS:  0000000000000000(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   22.814192] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   22.814404] CR2: 0000000020000080 CR3: 000000000687e000 CR4: 0000000000750ef0
[   22.814672] PKRU: 55555554
[   22.814780] Call Trace:
[   22.814874]  <TASK>
[   22.814957]  ? show_regs+0x6e/0x80
[   22.815092]  ? __warn+0xef/0x340
[   22.815239]  ? report_bug+0x25e/0x4b0
[   22.815421]  ? iommufd_fops_release+0x2a3/0x300
[   22.815595]  ? report_bug+0x2cb/0x4b0
[   22.815740]  ? handle_bug+0x46/0x90
[   22.815888]  ? exc_invalid_op+0x1d/0x50
[   22.816077]  ? asm_exc_invalid_op+0x1f/0x30
[   22.816235]  ? __pfx_iommufd_fops_release+0x10/0x10
[   22.816422]  ? iommufd_fops_release+0x2a3/0x300
[   22.816595]  ? iommufd_fops_release+0x2a3/0x300
[   22.816770]  ? __pfx_iommufd_fops_release+0x10/0x10
[   22.816953]  ? rcu_is_watching+0x19/0xc0
[   22.817105]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   22.817308]  ? __pfx_iommufd_fops_release+0x10/0x10
[   22.817492]  __fput+0x424/0xaf0
[   22.817620]  ____fput+0x1f/0x30
[   22.817745]  task_work_run+0x19d/0x2b0
[   22.817892]  ? __pfx_task_work_run+0x10/0x10
[   22.818056]  ? __sanitizer_cov_trace_const_cmp1+0x1e/0x30
[   22.818258]  ? switch_task_namespaces+0xa9/0xe0
[   22.818432]  do_exit+0xac9/0x2790
[   22.818626]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   22.818862]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   22.819048]  ? __pfx_do_exit+0x10/0x10
[   22.819192]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   22.819394]  ? security_file_ioctl+0x9d/0xd0
[   22.819569]  make_task_dead+0x182/0x3c0
[   22.819765]  rewind_stack_and_make_dead+0x17/0x20
[   22.819944] RIP: 0033:0x7f93d7e3ee5d
[   22.820081] Code: Unable to access opcode bytes at 0x7f93d7e3ee33.
[   22.820364] RSP: 002b:00007fff76e33da8 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   22.820640] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f93d7e3ee5d
[   22.820920] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   22.821221] RBP: 00007fff76e33dc0 R08: 0000000000000800 R09: 0000000000000800
[   22.821489] R10: 0000000000000000 R11: 0000000000000213 R12: 00007fff76e33ed8
[   22.821796] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f93d81cb000
[   22.822061]  </TASK>
[   22.822155] irq event stamp: 0
[   22.822317] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   22.822547] hardirqs last disabled at (0): [<ffffffff8122f2d1>] copy_process+0x1c51/0x7140
[   22.822904] softirqs last  enabled at (0): [<ffffffff8122f312>] copy_process+0x1c92/0x7140
[   22.823206] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   22.823435] ---[ end trace 0000000000000000 ]---
[   22.826179] iommufd_mock iommufd_mock256: Adding to iommu group 256
[   22.826428] iommufd_mock iommufd_mock256: Removing from iommu group 256
[   22.826706] general protection fault, probably for non-canonical address 0xdffffc0000000006: 0000 [#257] PREEMPT SMP KASAN NOPTI
[   22.827126] KASAN: null-ptr-deref in range [0x0000000000000030-0x0000000000000037]
[   22.827400] CPU: 0 PID: 980 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   22.827741] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   22.828162] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   22.828378] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   22.829038] RSP: 0018:ffff88800eeafba8 EFLAGS: 00010206
[   22.829232] RAX: dffffc0000000000 RBX: ffff888015919000 RCX: 0000000000000000
[   22.829491] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   22.829749] RBP: ffff88800eeafbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   22.830007] R10: ffff88800aad88df R11: 5f6466756d6d6f69 R12: 0000000000000000
[   22.830266] R13: ffffffff85cc0180 R14: ffff8880111b7bc0 R15: ffffffff87070ae0
[   22.830525] FS:  00007f06041e9600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   22.830840] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   22.831051] CR2: 0000000020000080 CR3: 00000000203dc000 CR4: 0000000000750ef0
[   22.831311] PKRU: 55555554
[   22.831414] Call Trace:
[   22.831508]  <TASK>
[   22.831592]  ? show_regs+0x6e/0x80
[   22.831728]  ? die_addr+0x45/0xb0
[   22.831861]  ? exc_general_protection+0x159/0x250
[   22.832046]  ? asm_exc_general_protection+0x2b/0x30
[   22.832233]  ? sysfs_remove_link_from_group+0x21/0x90
[   22.832424]  ? sysfs_remove_link_from_group+0x37/0x90
[   22.832616]  ? sysfs_remove_link_from_group+0x21/0x90
[   22.832807]  iommu_device_unlink+0x85/0xd0
[   22.832964]  iommu_deinit_device+0x11f/0x4c0
[   22.833130]  __iommu_group_remove_device+0x26b/0x300
[   22.833321]  iommu_group_remove_device+0x8a/0xb0
[   22.833498]  iommufd_test+0x1f1a/0x2d10
[   22.833644]  ? __pfx_lock_release+0x10/0x10
[   22.833805]  ? __pfx_lock_acquire+0x10/0x10
[   22.833967]  ? __pfx_iommufd_test+0x10/0x10
[   22.834127]  ? __sanitizer_cov_trace_const_cmp8+0x1c/0x30
[   22.834332]  iommufd_fops_ioctl+0x377/0x510
[   22.834493]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   22.834672]  ? trace_hardirqs_on+0x26/0x120
[   22.834838]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   22.835072]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   22.835259]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   22.835462]  ? security_file_ioctl+0x9d/0xd0
[   22.835628]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   22.835808]  __x64_sys_ioctl+0x1b9/0x230
[   22.835958]  do_syscall_64+0x3c/0x90
[   22.836096]  entry_SYSCALL_64_after_hwframe+0x6e/0xd8
[   22.836285] RIP: 0033:0x7f0603e3ee5d
[   22.836422] Code: ff c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d 93 af 1b 00 f7 d8 64 89 01 48
[   22.837086] RSP: 002b:00007fff4b277c78 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   22.837362] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f0603e3ee5d
[   22.837620] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   22.837878] RBP: 00007fff4b277c90 R08: 0000000000000800 R09: 0000000000000800
[   22.838137] R10: 0000000000000000 R11: 0000000000000213 R12: 00007fff4b277da8
[   22.838395] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f060422a000
[   22.838659]  </TASK>
[   22.838744] Modules linked in:
[   22.838967] ---[ end trace 0000000000000000 ]---
[   22.839140] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   22.839352] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   22.840034] RSP: 0018:ffff88802457fba8 EFLAGS: 00010206
[   22.840258] RAX: dffffc0000000000 RBX: ffff888014f9b000 RCX: 0000000000000000
[   22.840516] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   22.840775] RBP: ffff88802457fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   22.841078] R10: ffff88800aad88df R11: 0000000000000001 R12: 0000000000000000
[   22.841336] R13: ffffffff85cc0180 R14: ffff8880109b6ac0 R15: ffffffff87070ae0
[   22.841640] FS:  00007f06041e9600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   22.841932] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   22.842163] CR2: 0000000020000080 CR3: 00000000203dc000 CR4: 0000000000750ef0
[   22.842464] PKRU: 55555554
[   22.842856] ------------[ cut here ]------------
[   22.843048] WARNING: CPU: 0 PID: 980 at drivers/iommu/iommufd/main.c:258 iommufd_fops_release+0x2a3/0x300
[   22.843461] Modules linked in:
[   22.843580] CPU: 0 PID: 980 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   22.843955] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   22.844426] RIP: 0010:iommufd_fops_release+0x2a3/0x300
[   22.844619] Code: 45 d0 65 48 2b 04 25 28 00 00 00 75 54 48 81 c4 88 00 00 00 31 c0 5b 41 5c 41 5d 41 5e 41 5f 5d c3 cc cc cc cc e8 ad 4f 0a fe <0f> 0b eb a6 e8 74 23 67 fe e9 f6 fe ff ff 48 89 85 50 ff ff ff e8
[   22.845336] RSP: 0018:ffff88800eeafc00 EFLAGS: 00010293
[   22.845534] RAX: 0000000000000000 RBX: ffff88800fe06408 RCX: 0000000000000000
[   22.845847] RDX: ffff888014758000 RSI: ffffffff835563e3 RDI: ffffffff86702b40
[   22.846107] RBP: ffff88800eeafcb0 R08: 0000000000000000 R09: fffffbfff0eb2644
[   22.846418] R10: ffffffff87593227 R11: ffff888010211600 R12: 0000000000000000
[   22.846856] R13: ffff888013963318 R14: ffff88800eeafc48 R15: ffffffff83556140
[   22.847116] FS:  0000000000000000(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   22.847408] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   22.847676] CR2: 0000000020000080 CR3: 000000000687e000 CR4: 0000000000750ef0
[   22.847936] PKRU: 55555554
[   22.848039] Call Trace:
[   22.848147]  <TASK>
[   22.848271]  ? show_regs+0x6e/0x80
[   22.848406]  ? __warn+0xef/0x340
[   22.848534]  ? report_bug+0x25e/0x4b0
[   22.848676]  ? iommufd_fops_release+0x2a3/0x300
[   22.848904]  ? report_bug+0x2cb/0x4b0
[   22.849072]  ? handle_bug+0x46/0x90
[   22.849211]  ? exc_invalid_op+0x1d/0x50
[   22.849358]  ? asm_exc_invalid_op+0x1f/0x30
[   22.849573]  ? __pfx_iommufd_fops_release+0x10/0x10
[   22.849760]  ? iommufd_fops_release+0x2a3/0x300
[   22.849946]  ? iommufd_fops_release+0x2a3/0x300
[   22.850136]  ? __pfx_iommufd_fops_release+0x10/0x10
[   22.850354]  ? rcu_is_watching+0x19/0xc0
[   22.850508]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   22.850720]  ? __pfx_iommufd_fops_release+0x10/0x10
[   22.850972]  __fput+0x424/0xaf0
[   22.851102]  ____fput+0x1f/0x30
[   22.851228]  task_work_run+0x19d/0x2b0
[   22.851374]  ? __pfx_task_work_run+0x10/0x10
[   22.851538]  ? __sanitizer_cov_trace_const_cmp1+0x1e/0x30
[   22.851741]  ? switch_task_namespaces+0xa9/0xe0
[   22.851975]  do_exit+0xac9/0x2790
[   22.852108]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   22.852341]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   22.852536]  ? __pfx_do_exit+0x10/0x10
[   22.852729]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   22.852932]  ? security_file_ioctl+0x9d/0xd0
[   22.853105]  make_task_dead+0x182/0x3c0
[   22.853307]  rewind_stack_and_make_dead+0x17/0x20
[   22.853488] RIP: 0033:0x7f0603e3ee5d
[   22.853625] Code: Unable to access opcode bytes at 0x7f0603e3ee33.
[   22.853908] RSP: 002b:00007fff4b277c78 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   22.854186] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f0603e3ee5d
[   22.854459] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   22.854778] RBP: 00007fff4b277c90 R08: 0000000000000800 R09: 0000000000000800
[   22.855040] R10: 0000000000000000 R11: 0000000000000213 R12: 00007fff4b277da8
[   22.855300] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f060422a000
[   22.855566]  </TASK>
[   22.855653] irq event stamp: 0
[   22.855770] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   22.856001] hardirqs last disabled at (0): [<ffffffff8122f2d1>] copy_process+0x1c51/0x7140
[   22.856304] softirqs last  enabled at (0): [<ffffffff8122f312>] copy_process+0x1c92/0x7140
[   22.856606] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   22.856839] ---[ end trace 0000000000000000 ]---
[   22.859446] iommufd_mock iommufd_mock257: Adding to iommu group 257
[   22.859701] iommufd_mock iommufd_mock257: Removing from iommu group 257
[   22.859961] general protection fault, probably for non-canonical address 0xdffffc0000000006: 0000 [#258] PREEMPT SMP KASAN NOPTI
[   22.860375] KASAN: null-ptr-deref in range [0x0000000000000030-0x0000000000000037]
[   22.860650] CPU: 0 PID: 981 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   22.860965] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   22.861374] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   22.861587] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   22.862247] RSP: 0018:ffff888012467ba8 EFLAGS: 00010206
[   22.862441] RAX: dffffc0000000000 RBX: ffff88801591b000 RCX: 0000000000000000
[   22.862701] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   22.862965] RBP: ffff888012467bc0 R08: 0000000000000001 R09: ffffed100155b11b
[   22.863219] R10: ffff88800aad88df R11: 5f6466756d6d6f69 R12: 0000000000000000
[   22.863472] R13: ffffffff85cc0180 R14: ffff8880111b7c80 R15: ffffffff87070ae0
[   22.863725] FS:  00007f9333554600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   22.864011] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   22.864218] CR2: 0000000020000080 CR3: 00000000203dc000 CR4: 0000000000750ef0
[   22.864472] PKRU: 55555554
[   22.864574] Call Trace:
[   22.864666]  <TASK>
[   22.864748]  ? show_regs+0x6e/0x80
[   22.864881]  ? die_addr+0x45/0xb0
[   22.865012]  ? exc_general_protection+0x159/0x250
[   22.865216]  ? asm_exc_general_protection+0x2b/0x30
[   22.865400]  ? sysfs_remove_link_from_group+0x21/0x90
[   22.865587]  ? sysfs_remove_link_from_group+0x37/0x90
[   22.865774]  ? sysfs_remove_link_from_group+0x21/0x90
[   22.865962]  iommu_device_unlink+0x85/0xd0
[   22.866116]  iommu_deinit_device+0x11f/0x4c0
[   22.866278]  __iommu_group_remove_device+0x26b/0x300
[   22.866465]  iommu_group_remove_device+0x8a/0xb0
[   22.866641]  iommufd_test+0x1f1a/0x2d10
[   22.866791]  ? __pfx_lock_release+0x10/0x10
[   22.866954]  ? __pfx_lock_acquire+0x10/0x10
[   22.867112]  ? __pfx_iommufd_test+0x10/0x10
[   22.867269]  ? __sanitizer_cov_trace_const_cmp8+0x1c/0x30
[   22.867470]  iommufd_fops_ioctl+0x377/0x510
[   22.867628]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   22.867803]  ? trace_hardirqs_on+0x26/0x120
[   22.867963]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   22.868191]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   22.868375]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   22.868573]  ? security_file_ioctl+0x9d/0xd0
[   22.868737]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   22.868912]  __x64_sys_ioctl+0x1b9/0x230
[   22.869060]  do_syscall_64+0x3c/0x90
[   22.869195]  entry_SYSCALL_64_after_hwframe+0x6e/0xd8
[   22.869381] RIP: 0033:0x7f933323ee5d
[   22.869515] Code: ff c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d 93 af 1b 00 f7 d8 64 89 01 48
[   22.870161] RSP: 002b:00007ffd264d5768 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   22.870431] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f933323ee5d
[   22.870688] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   22.870953] RBP: 00007ffd264d5780 R08: 0000000000000800 R09: 0000000000000800
[   22.871206] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffd264d5898
[   22.871459] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f9333595000
[   22.871717]  </TASK>
[   22.871801] Modules linked in:
[   22.871940] ---[ end trace 0000000000000000 ]---
[   22.872125] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   22.872337] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   22.872997] RSP: 0018:ffff88802457fba8 EFLAGS: 00010206
[   22.873190] RAX: dffffc0000000000 RBX: ffff888014f9b000 RCX: 0000000000000000
[   22.873449] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   22.873708] RBP: ffff88802457fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   22.873966] R10: ffff88800aad88df R11: 0000000000000001 R12: 0000000000000000
[   22.874225] R13: ffffffff85cc0180 R14: ffff8880109b6ac0 R15: ffffffff87070ae0
[   22.874483] FS:  00007f9333554600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   22.874786] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   22.874998] CR2: 0000000020000080 CR3: 00000000203dc000 CR4: 0000000000750ef0
[   22.875256] PKRU: 55555554
[   22.875614] ------------[ cut here ]------------
[   22.875783] WARNING: CPU: 0 PID: 981 at drivers/iommu/iommufd/main.c:258 iommufd_fops_release+0x2a3/0x300
[   22.876125] Modules linked in:
[   22.876240] CPU: 0 PID: 981 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   22.876548] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   22.876946] RIP: 0010:iommufd_fops_release+0x2a3/0x300
[   22.877135] Code: 45 d0 65 48 2b 04 25 28 00 00 00 75 54 48 81 c4 88 00 00 00 31 c0 5b 41 5c 41 5d 41 5e 41 5f 5d c3 cc cc cc cc e8 ad 4f 0a fe <0f> 0b eb a6 e8 74 23 67 fe e9 f6 fe ff ff 48 89 85 50 ff ff ff e8
[   22.877783] RSP: 0018:ffff888012467c00 EFLAGS: 00010293
[   22.877971] RAX: 0000000000000000 RBX: ffff88800fe06a08 RCX: 0000000000000000
[   22.878223] RDX: ffff88801388ca00 RSI: ffffffff835563e3 RDI: ffffffff86702b40
[   22.878475] RBP: ffff888012467cb0 R08: 0000000000000000 R09: fffffbfff0eb2644
[   22.878736] R10: ffffffff87593227 R11: ffff88802038c600 R12: 0000000000000000
[   22.878992] R13: ffff888013963a98 R14: ffff888012467c48 R15: ffffffff83556140
[   22.879245] FS:  0000000000000000(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   22.879530] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   22.879736] CR2: 0000000020000080 CR3: 000000000687e000 CR4: 0000000000750ef0
[   22.879989] PKRU: 55555554
[   22.880090] Call Trace:
[   22.880182]  <TASK>
[   22.880263]  ? show_regs+0x6e/0x80
[   22.880393]  ? __warn+0xef/0x340
[   22.880517]  ? report_bug+0x25e/0x4b0
[   22.880657]  ? iommufd_fops_release+0x2a3/0x300
[   22.880826]  ? report_bug+0x2cb/0x4b0
[   22.880967]  ? handle_bug+0x46/0x90
[   22.881100]  ? exc_invalid_op+0x1d/0x50
[   22.881244]  ? asm_exc_invalid_op+0x1f/0x30
[   22.881398]  ? __pfx_iommufd_fops_release+0x10/0x10
[   22.881580]  ? iommufd_fops_release+0x2a3/0x300
[   22.881748]  ? iommufd_fops_release+0x2a3/0x300
[   22.881918]  ? __pfx_iommufd_fops_release+0x10/0x10
[   22.882097]  ? rcu_is_watching+0x19/0xc0
[   22.882245]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   22.882443]  ? __pfx_iommufd_fops_release+0x10/0x10
[   22.882628]  __fput+0x424/0xaf0
[   22.882757]  ____fput+0x1f/0x30
[   22.882894]  task_work_run+0x19d/0x2b0
[   22.883037]  ? __pfx_task_work_run+0x10/0x10
[   22.883197]  ? __sanitizer_cov_trace_const_cmp1+0x1e/0x30
[   22.883393]  ? switch_task_namespaces+0xa9/0xe0
[   22.883564]  do_exit+0xac9/0x2790
[   22.883690]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   22.883917]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   22.884098]  ? __pfx_do_exit+0x10/0x10
[   22.884239]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   22.884435]  ? security_file_ioctl+0x9d/0xd0
[   22.884597]  make_task_dead+0x182/0x3c0
[   22.884742]  rewind_stack_and_make_dead+0x17/0x20
[   22.884917] RIP: 0033:0x7f933323ee5d
[   22.885050] Code: Unable to access opcode bytes at 0x7f933323ee33.
[   22.885268] RSP: 002b:00007ffd264d5768 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   22.885537] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f933323ee5d
[   22.885790] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   22.886042] RBP: 00007ffd264d5780 R08: 0000000000000800 R09: 0000000000000800
[   22.886294] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffd264d5898
[   22.886545] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f9333595000
[   22.886811]  </TASK>
[   22.886895] irq event stamp: 0
[   22.887009] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   22.887232] hardirqs last disabled at (0): [<ffffffff8122f2d1>] copy_process+0x1c51/0x7140
[   22.887524] softirqs last  enabled at (0): [<ffffffff8122f312>] copy_process+0x1c92/0x7140
[   22.887817] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   22.888039] ---[ end trace 0000000000000000 ]---
[   22.890600] iommufd_mock iommufd_mock258: Adding to iommu group 258
[   22.891028] iommufd_mock iommufd_mock258: Removing from iommu group 258
[   22.891297] general protection fault, probably for non-canonical address 0xdffffc0000000006: 0000 [#259] PREEMPT SMP KASAN NOPTI
[   22.891837] KASAN: null-ptr-deref in range [0x0000000000000030-0x0000000000000037]
[   22.892119] CPU: 1 PID: 982 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   22.892554] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   22.892972] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   22.893191] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   22.893862] RSP: 0018:ffff88800fa47ba8 EFLAGS: 00010206
[   22.894059] RAX: dffffc0000000000 RBX: ffff8880120b9000 RCX: 0000000000000000
[   22.894322] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   22.894627] RBP: ffff88800fa47bc0 R08: 0000000000000001 R09: ffffed100155b11b
[   22.894895] R10: ffff88800aad88df R11: 5f6466756d6d6f69 R12: 0000000000000000
[   22.895158] R13: ffffffff85cc0180 R14: ffff88800fd720c0 R15: ffffffff87070ae0
[   22.895459] FS:  00007f7b27025600(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
[   22.895756] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   22.895975] CR2: 0000000020000080 CR3: 000000000fe46000 CR4: 0000000000750ee0
[   22.896271] PKRU: 55555554
[   22.896376] Call Trace:
[   22.896472]  <TASK>
[   22.896557]  ? show_regs+0x6e/0x80
[   22.896703]  ? die_addr+0x45/0xb0
[   22.896862]  ? exc_general_protection+0x159/0x250
[   22.897050]  ? asm_exc_general_protection+0x2b/0x30
[   22.897240]  ? sysfs_remove_link_from_group+0x21/0x90
[   22.897449]  ? sysfs_remove_link_from_group+0x37/0x90
[   22.897662]  ? sysfs_remove_link_from_group+0x21/0x90
[   22.897857]  iommu_device_unlink+0x85/0xd0
[   22.898017]  iommu_deinit_device+0x11f/0x4c0
[   22.898202]  __iommu_group_remove_device+0x26b/0x300
[   22.898418]  iommu_group_remove_device+0x8a/0xb0
[   22.898599]  iommufd_test+0x1f1a/0x2d10
[   22.898751]  ? __pfx_lock_release+0x10/0x10
[   22.898932]  ? __pfx_lock_acquire+0x10/0x10
[   22.899105]  ? __pfx_iommufd_test+0x10/0x10
[   22.899267]  ? __sanitizer_cov_trace_const_cmp8+0x1c/0x30
[   22.899476]  iommufd_fops_ioctl+0x377/0x510
[   22.899656]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   22.899866]  ? trace_hardirqs_on+0x26/0x120
[   22.900031]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   22.900274]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   22.900504]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   22.900710]  ? security_file_ioctl+0x9d/0xd0
[   22.900879]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   22.901079]  __x64_sys_ioctl+0x1b9/0x230
[   22.901261]  do_syscall_64+0x3c/0x90
[   22.901401]  entry_SYSCALL_64_after_hwframe+0x6e/0xd8
[   22.901593] RIP: 0033:0x7f7b26e3ee5d
[   22.901736] Code: ff c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d 93 af 1b 00 f7 d8 64 89 01 48
[   22.902449] RSP: 002b:00007fff2a018288 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   22.902770] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f7b26e3ee5d
[   22.903033] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   22.903327] RBP: 00007fff2a0182a0 R08: 0000000000000800 R09: 0000000000000800
[   22.903591] R10: 0000000000000000 R11: 0000000000000213 R12: 00007fff2a0183b8
[   22.903859] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f7b27066000
[   22.904160]  </TASK>
[   22.904247] Modules linked in:
[   22.904428] ---[ end trace 0000000000000000 ]---
[   22.904603] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   22.904818] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   22.905499] RSP: 0018:ffff88802457fba8 EFLAGS: 00010206
[   22.905725] RAX: dffffc0000000000 RBX: ffff888014f9b000 RCX: 0000000000000000
[   22.905988] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   22.906312] RBP: ffff88802457fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   22.906659] R10: ffff88800aad88df R11: 0000000000000001 R12: 0000000000000000
[   22.906931] R13: ffffffff85cc0180 R14: ffff8880109b6ac0 R15: ffffffff87070ae0
[   22.907247] FS:  00007f7b27025600(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
[   22.907544] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   22.907758] CR2: 0000000020000080 CR3: 000000000fe46000 CR4: 0000000000750ee0
[   22.908072] PKRU: 55555554
[   22.908903] ------------[ cut here ]------------
[   22.909084] WARNING: CPU: 1 PID: 982 at drivers/iommu/iommufd/main.c:258 iommufd_fops_release+0x2a3/0x300
[   22.909489] Modules linked in:
[   22.909609] CPU: 1 PID: 982 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   22.909929] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   22.910389] RIP: 0010:iommufd_fops_release+0x2a3/0x300
[   22.910626] Code: 45 d0 65 48 2b 04 25 28 00 00 00 75 54 48 81 c4 88 00 00 00 31 c0 5b 41 5c 41 5d 41 5e 41 5f 5d c3 cc cc cc cc e8 ad 4f 0a fe <0f> 0b eb a6 e8 74 23 67 fe e9 f6 fe ff ff 48 89 85 50 ff ff ff e8
[   22.911344] RSP: 0018:ffff88800fa47c00 EFLAGS: 00010293
[   22.911540] RAX: 0000000000000000 RBX: ffff88801248a208 RCX: 0000000000000000
[   22.911810] RDX: ffff8880138b4a00 RSI: ffffffff835563e3 RDI: ffffffff86702b48
[   22.912106] RBP: ffff88800fa47cb0 R08: 0000000000000000 R09: fffffbfff0eb2644
[   22.912370] R10: ffffffff87593227 R11: ffff888013ad0a00 R12: 0000000000000000
[   22.912679] R13: ffff888011a0f098 R14: ffff88800fa47c48 R15: ffffffff83556140
[   22.912943] FS:  0000000000000000(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
[   22.913248] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   22.913498] CR2: 0000000020000080 CR3: 000000000687e000 CR4: 0000000000750ee0
[   22.913762] PKRU: 55555554
[   22.913867] Call Trace:
[   22.913971]  <TASK>
[   22.914087]  ? show_regs+0x6e/0x80
[   22.914224]  ? __warn+0xef/0x340
[   22.914353]  ? report_bug+0x25e/0x4b0
[   22.914498]  ? iommufd_fops_release+0x2a3/0x300
[   22.914709]  ? report_bug+0x2cb/0x4b0
[   22.914892]  ? handle_bug+0x46/0x90
[   22.915030]  ? exc_invalid_op+0x1d/0x50
[   22.915180]  ? asm_exc_invalid_op+0x1f/0x30
[   22.915341]  ? __pfx_iommufd_fops_release+0x10/0x10
[   22.915530]  ? iommufd_fops_release+0x2a3/0x300
[   22.915706]  ? iommufd_fops_release+0x2a3/0x300
[   22.915920]  ? __pfx_iommufd_fops_release+0x10/0x10
[   22.916106]  ? rcu_is_watching+0x19/0xc0
[   22.916261]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   22.916476]  ? __pfx_iommufd_fops_release+0x10/0x10
[   22.916697]  __fput+0x424/0xaf0
[   22.916828]  ____fput+0x1f/0x30
[   22.916955]  task_work_run+0x19d/0x2b0
[   22.917103]  ? __pfx_task_work_run+0x10/0x10
[   22.917285]  ? __sanitizer_cov_trace_const_cmp1+0x1e/0x30
[   22.917513]  ? switch_task_namespaces+0xa9/0xe0
[   22.917690]  do_exit+0xac9/0x2790
[   22.917822]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   22.918103]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   22.918293]  ? __pfx_do_exit+0x10/0x10
[   22.918439]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   22.918675]  ? security_file_ioctl+0x9d/0xd0
[   22.918874]  make_task_dead+0x182/0x3c0
[   22.919025]  rewind_stack_and_make_dead+0x17/0x20
[   22.919208] RIP: 0033:0x7f7b26e3ee5d
[   22.919347] Code: Unable to access opcode bytes at 0x7f7b26e3ee33.
[   22.919575] RSP: 002b:00007fff2a018288 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   22.919873] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f7b26e3ee5d
[   22.920159] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   22.920422] RBP: 00007fff2a0182a0 R08: 0000000000000800 R09: 0000000000000800
[   22.920726] R10: 0000000000000000 R11: 0000000000000213 R12: 00007fff2a0183b8
[   22.920989] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f7b27066000
[   22.921259]  </TASK>
[   22.921351] irq event stamp: 0
[   22.921509] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   22.921742] hardirqs last disabled at (0): [<ffffffff8122f2d1>] copy_process+0x1c51/0x7140
[   22.922051] softirqs last  enabled at (0): [<ffffffff8122f312>] copy_process+0x1c92/0x7140
[   22.922397] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   22.922652] ---[ end trace 0000000000000000 ]---
[   22.925330] iommufd_mock iommufd_mock259: Adding to iommu group 259
[   22.925589] iommufd_mock iommufd_mock259: Removing from iommu group 259
[   22.925854] general protection fault, probably for non-canonical address 0xdffffc0000000006: 0000 [#260] PREEMPT SMP KASAN NOPTI
[   22.926325] KASAN: null-ptr-deref in range [0x0000000000000030-0x0000000000000037]
[   22.926605] CPU: 1 PID: 983 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   22.926959] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   22.927375] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   22.927600] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   22.928316] RSP: 0018:ffff88800cfafba8 EFLAGS: 00010206
[   22.928550] RAX: dffffc0000000000 RBX: ffff8880245dd000 RCX: 0000000000000000
[   22.928814] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   22.929088] RBP: ffff88800cfafbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   22.929369] R10: ffff88800aad88df R11: 5f6466756d6d6f69 R12: 0000000000000000
[   22.929632] R13: ffffffff85cc0180 R14: ffff8880247bd720 R15: ffffffff87070ae0
[   22.929941] FS:  00007f015d6a6600(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
[   22.930238] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   22.930460] CR2: 0000000020000080 CR3: 0000000017232000 CR4: 0000000000750ee0
[   22.930762] PKRU: 55555554
[   22.930867] Call Trace:
[   22.930963]  <TASK>
[   22.931048]  ? show_regs+0x6e/0x80
[   22.931191]  ? die_addr+0x45/0xb0
[   22.931363]  ? exc_general_protection+0x159/0x250
[   22.931550]  ? asm_exc_general_protection+0x2b/0x30
[   22.931741]  ? sysfs_remove_link_from_group+0x21/0x90
[   22.931948]  ? sysfs_remove_link_from_group+0x37/0x90
[   22.932163]  ? sysfs_remove_link_from_group+0x21/0x90
[   22.932359]  iommu_device_unlink+0x85/0xd0
[   22.932518]  iommu_deinit_device+0x11f/0x4c0
[   22.932706]  __iommu_group_remove_device+0x26b/0x300
[   22.932919]  iommu_group_remove_device+0x8a/0xb0
[   22.933099]  iommufd_test+0x1f1a/0x2d10
[   22.933248]  ? __pfx_lock_release+0x10/0x10
[   22.933449]  ? __pfx_lock_acquire+0x10/0x10
[   22.933615]  ? __pfx_iommufd_test+0x10/0x10
[   22.933778]  ? __sanitizer_cov_trace_const_cmp8+0x1c/0x30
[   22.933993]  iommufd_fops_ioctl+0x377/0x510
[   22.934199]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   22.934382]  ? trace_hardirqs_on+0x26/0x120
[   22.934548]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   22.934789]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   22.934980]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   22.935187]  ? security_file_ioctl+0x9d/0xd0
[   22.935356]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   22.935539]  __x64_sys_ioctl+0x1b9/0x230
[   22.935693]  do_syscall_64+0x3c/0x90
[   22.935833]  entry_SYSCALL_64_after_hwframe+0x6e/0xd8
[   22.936026] RIP: 0033:0x7f015d43ee5d
[   22.936165] Code: ff c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d 93 af 1b 00 f7 d8 64 89 01 48
[   22.936841] RSP: 002b:00007ffd9bf30828 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   22.937124] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f015d43ee5d
[   22.937387] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   22.937651] RBP: 00007ffd9bf30840 R08: 0000000000000800 R09: 0000000000000800
[   22.937915] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffd9bf30958
[   22.938178] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f015d6e7000
[   22.938447]  </TASK>
[   22.938535] Modules linked in:
[   22.938685] ---[ end trace 0000000000000000 ]---
[   22.938865] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   22.939081] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   22.939751] RSP: 0018:ffff88802457fba8 EFLAGS: 00010206
[   22.939948] RAX: dffffc0000000000 RBX: ffff888014f9b000 RCX: 0000000000000000
[   22.940210] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   22.940475] RBP: ffff88802457fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   22.940738] R10: ffff88800aad88df R11: 0000000000000001 R12: 0000000000000000
[   22.941001] R13: ffffffff85cc0180 R14: ffff8880109b6ac0 R15: ffffffff87070ae0
[   22.941264] FS:  00007f015d6a6600(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
[   22.941563] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   22.941781] CR2: 0000000020000080 CR3: 0000000017232000 CR4: 0000000000750ee0
[   22.942045] PKRU: 55555554
[   22.942412] ------------[ cut here ]------------
[   22.942599] WARNING: CPU: 1 PID: 983 at drivers/iommu/iommufd/main.c:258 iommufd_fops_release+0x2a3/0x300
[   22.942957] Modules linked in:
[   22.943075] CPU: 1 PID: 983 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   22.943394] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   22.943800] RIP: 0010:iommufd_fops_release+0x2a3/0x300
[   22.943993] Code: 45 d0 65 48 2b 04 25 28 00 00 00 75 54 48 81 c4 88 00 00 00 31 c0 5b 41 5c 41 5d 41 5e 41 5f 5d c3 cc cc cc cc e8 ad 4f 0a fe <0f> 0b eb a6 e8 74 23 67 fe e9 f6 fe ff ff 48 89 85 50 ff ff ff e8
[   22.944652] RSP: 0018:ffff88800cfafc00 EFLAGS: 00010293
[   22.944846] RAX: 0000000000000000 RBX: ffff88801248af08 RCX: 0000000000000000
[   22.945104] RDX: ffff88801388a500 RSI: ffffffff835563e3 RDI: ffffffff86702b48
[   22.945363] RBP: ffff88800cfafcb0 R08: 0000000000000000 R09: fffffbfff0eb2644
[   22.945623] R10: ffffffff87593227 R11: ffff8880111efa00 R12: 0000000000000000
[   22.945881] R13: ffff888011a0ee18 R14: ffff88800cfafc48 R15: ffffffff83556140
[   22.946140] FS:  0000000000000000(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
[   22.946432] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   22.946650] CR2: 0000000020000080 CR3: 000000000687e000 CR4: 0000000000750ee0
[   22.946913] PKRU: 55555554
[   22.947016] Call Trace:
[   22.947110]  <TASK>
[   22.947194]  ? show_regs+0x6e/0x80
[   22.947328]  ? __warn+0xef/0x340
[   22.947455]  ? report_bug+0x25e/0x4b0
[   22.947598]  ? iommufd_fops_release+0x2a3/0x300
[   22.947770]  ? report_bug+0x2cb/0x4b0
[   22.947915]  ? handle_bug+0x46/0x90
[   22.948051]  ? exc_invalid_op+0x1d/0x50
[   22.948199]  ? asm_exc_invalid_op+0x1f/0x30
[   22.948357]  ? __pfx_iommufd_fops_release+0x10/0x10
[   22.948543]  ? iommufd_fops_release+0x2a3/0x300
[   22.948717]  ? iommufd_fops_release+0x2a3/0x300
[   22.948891]  ? __pfx_iommufd_fops_release+0x10/0x10
[   22.949075]  ? rcu_is_watching+0x19/0xc0
[   22.949228]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   22.949434]  ? __pfx_iommufd_fops_release+0x10/0x10
[   22.949618]  __fput+0x424/0xaf0
[   22.949745]  ____fput+0x1f/0x30
[   22.949870]  task_work_run+0x19d/0x2b0
[   22.950015]  ? __pfx_task_work_run+0x10/0x10
[   22.950179]  ? __sanitizer_cov_trace_const_cmp1+0x1e/0x30
[   22.950383]  ? switch_task_namespaces+0xa9/0xe0
[   22.950560]  do_exit+0xac9/0x2790
[   22.950700]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   22.950964]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   22.951150]  ? __pfx_do_exit+0x10/0x10
[   22.951295]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   22.951495]  ? security_file_ioctl+0x9d/0xd0
[   22.951660]  make_task_dead+0x182/0x3c0
[   22.951808]  rewind_stack_and_make_dead+0x17/0x20
[   22.951986] RIP: 0033:0x7f015d43ee5d
[   22.952121] Code: Unable to access opcode bytes at 0x7f015d43ee33.
[   22.952343] RSP: 002b:00007ffd9bf30828 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   22.952617] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f015d43ee5d
[   22.952874] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   22.953130] RBP: 00007ffd9bf30840 R08: 0000000000000800 R09: 0000000000000800
[   22.953386] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffd9bf30958
[   22.953642] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f015d6e7000
[   22.953904]  </TASK>
[   22.953989] irq event stamp: 0
[   22.954105] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   22.954334] hardirqs last disabled at (0): [<ffffffff8122f2d1>] copy_process+0x1c51/0x7140
[   22.954638] softirqs last  enabled at (0): [<ffffffff8122f312>] copy_process+0x1c92/0x7140
[   22.954940] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   22.955169] ---[ end trace 0000000000000000 ]---
[   22.957699] iommufd_mock iommufd_mock260: Adding to iommu group 260
[   22.957956] iommufd_mock iommufd_mock260: Removing from iommu group 260
[   22.958214] general protection fault, probably for non-canonical address 0xdffffc0000000006: 0000 [#261] PREEMPT SMP KASAN NOPTI
[   22.958628] KASAN: null-ptr-deref in range [0x0000000000000030-0x0000000000000037]
[   22.958908] CPU: 0 PID: 984 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   22.959223] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   22.959631] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   22.959846] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   22.960544] RSP: 0018:ffff888014cbfba8 EFLAGS: 00010206
[   22.960759] RAX: dffffc0000000000 RBX: ffff88801591a000 RCX: 0000000000000000
[   22.961012] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   22.961265] RBP: ffff888014cbfbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   22.961517] R10: ffff88800aad88df R11: 5f6466756d6d6f69 R12: 0000000000000000
[   22.961770] R13: ffffffff85cc0180 R14: ffff8880111b7300 R15: ffffffff87070ae0
[   22.962024] FS:  00007fc9ee718600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   22.962309] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   22.962516] CR2: 0000000020000080 CR3: 00000000203dc000 CR4: 0000000000750ef0
[   22.962774] PKRU: 55555554
[   22.962876] Call Trace:
[   22.962968]  <TASK>
[   22.963050]  ? show_regs+0x6e/0x80
[   22.963184]  ? die_addr+0x45/0xb0
[   22.963314]  ? exc_general_protection+0x159/0x250
[   22.963494]  ? asm_exc_general_protection+0x2b/0x30
[   22.963677]  ? sysfs_remove_link_from_group+0x21/0x90
[   22.963865]  ? sysfs_remove_link_from_group+0x37/0x90
[   22.964051]  ? sysfs_remove_link_from_group+0x21/0x90
[   22.964238]  iommu_device_unlink+0x85/0xd0
[   22.964392]  iommu_deinit_device+0x11f/0x4c0
[   22.964554]  __iommu_group_remove_device+0x26b/0x300
[   22.964740]  iommu_group_remove_device+0x8a/0xb0
[   22.964914]  iommufd_test+0x1f1a/0x2d10
[   22.965057]  ? __pfx_lock_release+0x10/0x10
[   22.965214]  ? __pfx_lock_acquire+0x10/0x10
[   22.965376]  ? __pfx_iommufd_test+0x10/0x10
[   22.965534]  ? __sanitizer_cov_trace_const_cmp8+0x1c/0x30
[   22.965734]  iommufd_fops_ioctl+0x377/0x510
[   22.965892]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   22.966067]  ? trace_hardirqs_on+0x26/0x120
[   22.966226]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   22.966455]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   22.966638]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   22.966840]  ? security_file_ioctl+0x9d/0xd0
[   22.967003]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   22.967179]  __x64_sys_ioctl+0x1b9/0x230
[   22.967326]  do_syscall_64+0x3c/0x90
[   22.967461]  entry_SYSCALL_64_after_hwframe+0x6e/0xd8
[   22.967646] RIP: 0033:0x7fc9ee43ee5d
[   22.967780] Code: ff c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d 93 af 1b 00 f7 d8 64 89 01 48
[   22.968424] RSP: 002b:00007ffe23d53108 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   22.968694] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007fc9ee43ee5d
[   22.968947] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   22.969199] RBP: 00007ffe23d53120 R08: 0000000000000800 R09: 0000000000000800
[   22.969452] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffe23d53238
[   22.969704] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007fc9ee759000
[   22.969962]  </TASK>
[   22.970046] Modules linked in:
[   22.970233] ---[ end trace 0000000000000000 ]---
[   22.970402] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   22.970649] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   22.971337] RSP: 0018:ffff88802457fba8 EFLAGS: 00010206
[   22.971591] RAX: dffffc0000000000 RBX: ffff888014f9b000 RCX: 0000000000000000
[   22.971844] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   22.972119] RBP: ffff88802457fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   22.972428] R10: ffff88800aad88df R11: 0000000000000001 R12: 0000000000000000
[   22.972682] R13: ffffffff85cc0180 R14: ffff8880109b6ac0 R15: ffffffff87070ae0
[   22.972971] FS:  00007fc9ee718600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   22.973309] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   22.973545] CR2: 0000000020000080 CR3: 00000000203dc000 CR4: 0000000000750ef0
[   22.973855] PKRU: 55555554
[   22.974536] ------------[ cut here ]------------
[   22.974726] WARNING: CPU: 0 PID: 984 at drivers/iommu/iommufd/main.c:258 iommufd_fops_release+0x2a3/0x300
[   22.975078] Modules linked in:
[   22.975214] CPU: 0 PID: 984 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   22.975569] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   22.975988] RIP: 0010:iommufd_fops_release+0x2a3/0x300
[   22.976215] Code: 45 d0 65 48 2b 04 25 28 00 00 00 75 54 48 81 c4 88 00 00 00 31 c0 5b 41 5c 41 5d 41 5e 41 5f 5d c3 cc cc cc cc e8 ad 4f 0a fe <0f> 0b eb a6 e8 74 23 67 fe e9 f6 fe ff ff 48 89 85 50 ff ff ff e8
[   22.976930] RSP: 0018:ffff888014cbfc00 EFLAGS: 00010293
[   22.977124] RAX: 0000000000000000 RBX: ffff88800fe06908 RCX: 0000000000000000
[   22.977437] RDX: ffff8880122b4a00 RSI: ffffffff835563e3 RDI: ffffffff86702b40
[   22.977691] RBP: ffff888014cbfcb0 R08: 0000000000000000 R09: fffffbfff0eb2644
[   22.977972] R10: ffffffff87593227 R11: ffff888013410000 R12: 0000000000000000
[   22.978268] R13: ffff888020a21a98 R14: ffff888014cbfc48 R15: ffffffff83556140
[   22.978529] FS:  0000000000000000(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   22.979030] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   22.979238] CR2: 0000000020000080 CR3: 000000000687e000 CR4: 0000000000750ef0
[   22.979492] PKRU: 55555554
[   22.979604] Call Trace:
[   22.979712]  <TASK>
[   22.979795]  ? show_regs+0x6e/0x80
[   22.979965]  ? __warn+0xef/0x340
[   22.980091]  ? report_bug+0x25e/0x4b0
[   22.980238]  ? iommufd_fops_release+0x2a3/0x300
[   22.980422]  ? report_bug+0x2cb/0x4b0
[   22.980603]  ? handle_bug+0x46/0x90
[   22.980736]  ? exc_invalid_op+0x1d/0x50
[   22.980884]  ? asm_exc_invalid_op+0x1f/0x30
[   22.981052]  ? __pfx_iommufd_fops_release+0x10/0x10
[   22.981277]  ? iommufd_fops_release+0x2a3/0x300
[   22.981449]  ? iommufd_fops_release+0x2a3/0x300
[   22.981643]  ? __pfx_iommufd_fops_release+0x10/0x10
[   22.981872]  ? rcu_is_watching+0x19/0xc0
[   22.982024]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   22.982237]  ? __pfx_iommufd_fops_release+0x10/0x10
[   22.982471]  __fput+0x424/0xaf0
[   22.982608]  ____fput+0x1f/0x30
[   22.982733]  task_work_run+0x19d/0x2b0
[   22.982882]  ? __pfx_task_work_run+0x10/0x10
[   22.983045]  ? __sanitizer_cov_trace_const_cmp1+0x1e/0x30
[   22.983246]  ? switch_task_namespaces+0xa9/0xe0
[   22.983443]  do_exit+0xac9/0x2790
[   22.983604]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   22.983836]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   22.984029]  ? __pfx_do_exit+0x10/0x10
[   22.984216]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   22.984418]  ? security_file_ioctl+0x9d/0xd0
[   22.984584]  make_task_dead+0x182/0x3c0
[   22.984792]  rewind_stack_and_make_dead+0x17/0x20
[   22.984972] RIP: 0033:0x7fc9ee43ee5d
[   22.985108] Code: Unable to access opcode bytes at 0x7fc9ee43ee33.
[   22.985338] RSP: 002b:00007ffe23d53108 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   22.985666] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007fc9ee43ee5d
[   22.985925] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   22.986246] RBP: 00007ffe23d53120 R08: 0000000000000800 R09: 0000000000000800
[   22.986504] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffe23d53238
[   22.986793] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007fc9ee759000
[   22.987080]  </TASK>
[   22.987166] irq event stamp: 0
[   22.987282] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   22.987511] hardirqs last disabled at (0): [<ffffffff8122f2d1>] copy_process+0x1c51/0x7140
[   22.987870] softirqs last  enabled at (0): [<ffffffff8122f312>] copy_process+0x1c92/0x7140
[   22.988171] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   22.988418] ---[ end trace 0000000000000000 ]---
[   22.991062] iommufd_mock iommufd_mock261: Adding to iommu group 261
[   22.991323] iommufd_mock iommufd_mock261: Removing from iommu group 261
[   22.991588] general protection fault, probably for non-canonical address 0xdffffc0000000006: 0000 [#262] PREEMPT SMP KASAN NOPTI
[   22.992010] KASAN: null-ptr-deref in range [0x0000000000000030-0x0000000000000037]
[   22.992290] CPU: 1 PID: 985 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   22.992612] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   22.993029] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   22.993247] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   22.993921] RSP: 0018:ffff8880113b7ba8 EFLAGS: 00010206
[   22.994119] RAX: dffffc0000000000 RBX: ffff8880245df000 RCX: 0000000000000000
[   22.994384] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   22.994647] RBP: ffff8880113b7bc0 R08: 0000000000000001 R09: ffffed100155b11b
[   22.994917] R10: ffff88800aad88df R11: 5f6466756d6d6f69 R12: 0000000000000000
[   22.995181] R13: ffffffff85cc0180 R14: ffff8880247bd320 R15: ffffffff87070ae0
[   22.995445] FS:  00007f8ff7d83600(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
[   22.995743] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   22.995959] CR2: 0000000020000080 CR3: 000000000fe46000 CR4: 0000000000750ee0
[   22.996225] PKRU: 55555554
[   22.996331] Call Trace:
[   22.996427]  <TASK>
[   22.996511]  ? show_regs+0x6e/0x80
[   22.996650]  ? die_addr+0x45/0xb0
[   22.996787]  ? exc_general_protection+0x159/0x250
[   22.996974]  ? asm_exc_general_protection+0x2b/0x30
[   22.997165]  ? sysfs_remove_link_from_group+0x21/0x90
[   22.997361]  ? sysfs_remove_link_from_group+0x37/0x90
[   22.997556]  ? sysfs_remove_link_from_group+0x21/0x90
[   22.997751]  iommu_device_unlink+0x85/0xd0
[   22.997911]  iommu_deinit_device+0x11f/0x4c0
[   22.998081]  __iommu_group_remove_device+0x26b/0x300
[   22.998275]  iommu_group_remove_device+0x8a/0xb0
[   22.998456]  iommufd_test+0x1f1a/0x2d10
[   22.998606]  ? __pfx_lock_release+0x10/0x10
[   22.998772]  ? __pfx_lock_acquire+0x10/0x10
[   22.998938]  ? __pfx_iommufd_test+0x10/0x10
[   22.999102]  ? __sanitizer_cov_trace_const_cmp8+0x1c/0x30
[   22.999310]  iommufd_fops_ioctl+0x377/0x510
[   22.999475]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   22.999657]  ? trace_hardirqs_on+0x26/0x120
[   22.999823]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   23.000062]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   23.000254]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   23.000461]  ? security_file_ioctl+0x9d/0xd0
[   23.000631]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   23.000814]  __x64_sys_ioctl+0x1b9/0x230
[   23.000968]  do_syscall_64+0x3c/0x90
[   23.001109]  entry_SYSCALL_64_after_hwframe+0x6e/0xd8
[   23.001302] RIP: 0033:0x7f8ff7a3ee5d
[   23.001442] Code: ff c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d 93 af 1b 00 f7 d8 64 89 01 48
[   23.002116] RSP: 002b:00007ffc46251e78 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   23.002398] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f8ff7a3ee5d
[   23.002662] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   23.002929] RBP: 00007ffc46251e90 R08: 0000000000000800 R09: 0000000000000800
[   23.003193] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffc46251fa8
[   23.003458] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f8ff7dc4000
[   23.003729]  </TASK>
[   23.003817] Modules linked in:
[   23.003971] ---[ end trace 0000000000000000 ]---
[   23.004148] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   23.004363] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   23.005036] RSP: 0018:ffff88802457fba8 EFLAGS: 00010206
[   23.005233] RAX: dffffc0000000000 RBX: ffff888014f9b000 RCX: 0000000000000000
[   23.005497] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   23.005760] RBP: ffff88802457fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   23.006023] R10: ffff88800aad88df R11: 0000000000000001 R12: 0000000000000000
[   23.006287] R13: ffffffff85cc0180 R14: ffff8880109b6ac0 R15: ffffffff87070ae0
[   23.006550] FS:  00007f8ff7d83600(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
[   23.006857] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   23.007073] CR2: 0000000020000080 CR3: 000000000fe46000 CR4: 0000000000750ee0
[   23.007337] PKRU: 55555554
[   23.007707] ------------[ cut here ]------------
[   23.007882] WARNING: CPU: 1 PID: 985 at drivers/iommu/iommufd/main.c:258 iommufd_fops_release+0x2a3/0x300
[   23.008236] Modules linked in:
[   23.008356] CPU: 1 PID: 985 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   23.008676] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   23.009091] RIP: 0010:iommufd_fops_release+0x2a3/0x300
[   23.009287] Code: 45 d0 65 48 2b 04 25 28 00 00 00 75 54 48 81 c4 88 00 00 00 31 c0 5b 41 5c 41 5d 41 5e 41 5f 5d c3 cc cc cc cc e8 ad 4f 0a fe <0f> 0b eb a6 e8 74 23 67 fe e9 f6 fe ff ff 48 89 85 50 ff ff ff e8
[   23.009959] RSP: 0018:ffff8880113b7c00 EFLAGS: 00010293
[   23.010156] RAX: 0000000000000000 RBX: ffff88801248ae08 RCX: 0000000000000000
[   23.010419] RDX: ffff88801475a500 RSI: ffffffff835563e3 RDI: ffffffff86702b48
[   23.010694] RBP: ffff8880113b7cb0 R08: 0000000000000000 R09: fffffbfff0eb2644
[   23.010956] R10: ffffffff87593227 R11: ffff888018b67e00 R12: 0000000000000000
[   23.011215] R13: ffff888011063d18 R14: ffff8880113b7c48 R15: ffffffff83556140
[   23.011473] FS:  0000000000000000(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
[   23.011765] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   23.011975] CR2: 0000000020000080 CR3: 000000000687e000 CR4: 0000000000750ee0
[   23.012235] PKRU: 55555554
[   23.012338] Call Trace:
[   23.012432]  <TASK>
[   23.012515]  ? show_regs+0x6e/0x80
[   23.012648]  ? __warn+0xef/0x340
[   23.012775]  ? report_bug+0x25e/0x4b0
[   23.012918]  ? iommufd_fops_release+0x2a3/0x300
[   23.013091]  ? report_bug+0x2cb/0x4b0
[   23.013235]  ? handle_bug+0x46/0x90
[   23.013370]  ? exc_invalid_op+0x1d/0x50
[   23.013518]  ? asm_exc_invalid_op+0x1f/0x30
[   23.013676]  ? __pfx_iommufd_fops_release+0x10/0x10
[   23.013862]  ? iommufd_fops_release+0x2a3/0x300
[   23.014035]  ? iommufd_fops_release+0x2a3/0x300
[   23.014209]  ? __pfx_iommufd_fops_release+0x10/0x10
[   23.014392]  ? rcu_is_watching+0x19/0xc0
[   23.014544]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   23.014756]  ? __pfx_iommufd_fops_release+0x10/0x10
[   23.014941]  __fput+0x424/0xaf0
[   23.015069]  ____fput+0x1f/0x30
[   23.015194]  task_work_run+0x19d/0x2b0
[   23.015339]  ? __pfx_task_work_run+0x10/0x10
[   23.015502]  ? __sanitizer_cov_trace_const_cmp1+0x1e/0x30
[   23.015703]  ? switch_task_namespaces+0xa9/0xe0
[   23.015876]  do_exit+0xac9/0x2790
[   23.016006]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   23.016238]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   23.016423]  ? __pfx_do_exit+0x10/0x10
[   23.016567]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   23.016768]  ? security_file_ioctl+0x9d/0xd0
[   23.016934]  make_task_dead+0x182/0x3c0
[   23.017082]  rewind_stack_and_make_dead+0x17/0x20
[   23.017261] RIP: 0033:0x7f8ff7a3ee5d
[   23.017397] Code: Unable to access opcode bytes at 0x7f8ff7a3ee33.
[   23.017620] RSP: 002b:00007ffc46251e78 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   23.017896] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f8ff7a3ee5d
[   23.018154] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   23.018412] RBP: 00007ffc46251e90 R08: 0000000000000800 R09: 0000000000000800
[   23.018677] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffc46251fa8
[   23.018938] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f8ff7dc4000
[   23.019201]  </TASK>
[   23.019287] irq event stamp: 0
[   23.019403] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   23.019632] hardirqs last disabled at (0): [<ffffffff8122f2d1>] copy_process+0x1c51/0x7140
[   23.019932] softirqs last  enabled at (0): [<ffffffff8122f312>] copy_process+0x1c92/0x7140
[   23.020232] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   23.020460] ---[ end trace 0000000000000000 ]---
[   23.022920] iommufd_mock iommufd_mock262: Adding to iommu group 262
[   23.023185] iommufd_mock iommufd_mock262: Removing from iommu group 262
[   23.023449] general protection fault, probably for non-canonical address 0xdffffc0000000006: 0000 [#263] PREEMPT SMP KASAN NOPTI
[   23.023869] KASAN: null-ptr-deref in range [0x0000000000000030-0x0000000000000037]
[   23.024147] CPU: 1 PID: 986 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   23.024468] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   23.024882] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   23.025099] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   23.025771] RSP: 0018:ffff8880115ffba8 EFLAGS: 00010206
[   23.025968] RAX: dffffc0000000000 RBX: ffff8880245dc000 RCX: 0000000000000000
[   23.026231] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   23.026494] RBP: ffff8880115ffbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   23.026765] R10: ffff88800aad88df R11: 5f6466756d6d6f69 R12: 0000000000000000
[   23.027054] R13: ffffffff85cc0180 R14: ffff88800baaf1c0 R15: ffffffff87070ae0
[   23.027318] FS:  00007f07067b0600(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
[   23.027616] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   23.027831] CR2: 0000000020000080 CR3: 000000000fe46000 CR4: 0000000000750ee0
[   23.028096] PKRU: 55555554
[   23.028201] Call Trace:
[   23.028297]  <TASK>
[   23.028382]  ? show_regs+0x6e/0x80
[   23.028521]  ? die_addr+0x45/0xb0
[   23.028657]  ? exc_general_protection+0x159/0x250
[   23.028844]  ? asm_exc_general_protection+0x2b/0x30
[   23.029034]  ? sysfs_remove_link_from_group+0x21/0x90
[   23.029229]  ? sysfs_remove_link_from_group+0x37/0x90
[   23.029423]  ? sysfs_remove_link_from_group+0x21/0x90
[   23.029618]  iommu_device_unlink+0x85/0xd0
[   23.029778]  iommu_deinit_device+0x11f/0x4c0
[   23.029947]  __iommu_group_remove_device+0x26b/0x300
[   23.030141]  iommu_group_remove_device+0x8a/0xb0
[   23.030322]  iommufd_test+0x1f1a/0x2d10
[   23.030473]  ? __pfx_lock_release+0x10/0x10
[   23.030633]  ? __pfx_lock_acquire+0x10/0x10
[   23.030801]  ? __pfx_iommufd_test+0x10/0x10
[   23.030963]  ? __sanitizer_cov_trace_const_cmp8+0x1c/0x30
[   23.031168]  iommufd_fops_ioctl+0x377/0x510
[   23.031329]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   23.031519]  ? trace_hardirqs_on+0x26/0x120
[   23.031687]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   23.031934]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   23.032121]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   23.032322]  ? security_file_ioctl+0x9d/0xd0
[   23.032487]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   23.032665]  __x64_sys_ioctl+0x1b9/0x230
[   23.032814]  do_syscall_64+0x3c/0x90
[   23.032950]  entry_SYSCALL_64_after_hwframe+0x6e/0xd8
[   23.033138] RIP: 0033:0x7f070643ee5d
[   23.033274] Code: ff c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d 93 af 1b 00 f7 d8 64 89 01 48
[   23.033928] RSP: 002b:00007ffc89b868a8 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   23.034200] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f070643ee5d
[   23.034456] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   23.034712] RBP: 00007ffc89b868c0 R08: 0000000000000800 R09: 0000000000000800
[   23.034977] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffc89b869d8
[   23.035233] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f07067f1000
[   23.035495]  </TASK>
[   23.035579] Modules linked in:
[   23.035754] ---[ end trace 0000000000000000 ]---
[   23.035924] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   23.036134] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   23.036787] RSP: 0018:ffff88802457fba8 EFLAGS: 00010206
[   23.037002] RAX: dffffc0000000000 RBX: ffff888014f9b000 RCX: 0000000000000000
[   23.037259] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   23.037517] RBP: ffff88802457fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   23.037769] R10: ffff88800aad88df R11: 0000000000000001 R12: 0000000000000000
[   23.038050] R13: ffffffff85cc0180 R14: ffff8880109b6ac0 R15: ffffffff87070ae0
[   23.038348] FS:  00007f07067b0600(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
[   23.038642] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   23.038886] CR2: 0000000020000080 CR3: 000000000fe46000 CR4: 0000000000750ee0
[   23.039184] PKRU: 55555554
[   23.039545] ------------[ cut here ]------------
[   23.039722] WARNING: CPU: 1 PID: 986 at drivers/iommu/iommufd/main.c:258 iommufd_fops_release+0x2a3/0x300
[   23.040112] Modules linked in:
[   23.040228] CPU: 1 PID: 986 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   23.040560] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   23.040986] RIP: 0010:iommufd_fops_release+0x2a3/0x300
[   23.041196] Code: 45 d0 65 48 2b 04 25 28 00 00 00 75 54 48 81 c4 88 00 00 00 31 c0 5b 41 5c 41 5d 41 5e 41 5f 5d c3 cc cc cc cc e8 ad 4f 0a fe <0f> 0b eb a6 e8 74 23 67 fe e9 f6 fe ff ff 48 89 85 50 ff ff ff e8
[   23.041887] RSP: 0018:ffff8880115ffc00 EFLAGS: 00010293
[   23.042111] RAX: 0000000000000000 RBX: ffff88801248ab08 RCX: 0000000000000000
[   23.042367] RDX: ffff88800ececa00 RSI: ffffffff835563e3 RDI: ffffffff86702b48
[   23.042669] RBP: ffff8880115ffcb0 R08: 0000000000000000 R09: fffffbfff0eb2644
[   23.042972] R10: ffffffff87593227 R11: ffff88801210ae00 R12: 0000000000000000
[   23.043229] R13: ffff8880127c3d18 R14: ffff8880115ffc48 R15: ffffffff83556140
[   23.043488] FS:  0000000000000000(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
[   23.043806] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   23.044040] CR2: 0000000020000080 CR3: 000000000687e000 CR4: 0000000000750ee0
[   23.044303] PKRU: 55555554
[   23.044420] Call Trace:
[   23.044543]  <TASK>
[   23.044627]  ? show_regs+0x6e/0x80
[   23.044763]  ? __warn+0xef/0x340
[   23.044891]  ? report_bug+0x25e/0x4b0
[   23.045036]  ? iommufd_fops_release+0x2a3/0x300
[   23.045249]  ? report_bug+0x2cb/0x4b0
[   23.045392]  ? handle_bug+0x46/0x90
[   23.045526]  ? exc_invalid_op+0x1d/0x50
[   23.045672]  ? asm_exc_invalid_op+0x1f/0x30
[   23.045835]  ? __pfx_iommufd_fops_release+0x10/0x10
[   23.046078]  ? iommufd_fops_release+0x2a3/0x300
[   23.046251]  ? iommufd_fops_release+0x2a3/0x300
[   23.046425]  ? __pfx_iommufd_fops_release+0x10/0x10
[   23.046789]  ? rcu_is_watching+0x19/0xc0
[   23.046943]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   23.047145]  ? __pfx_iommufd_fops_release+0x10/0x10
[   23.047327]  __fput+0x424/0xaf0
[   23.047454]  ____fput+0x1f/0x30
[   23.047578]  task_work_run+0x19d/0x2b0
[   23.047723]  ? __pfx_task_work_run+0x10/0x10
[   23.047906]  ? __sanitizer_cov_trace_const_cmp1+0x1e/0x30
[   23.048141]  ? switch_task_namespaces+0xa9/0xe0
[   23.048314]  do_exit+0xac9/0x2790
[   23.048442]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   23.048707]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   23.048895]  ? __pfx_do_exit+0x10/0x10
[   23.049038]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   23.049238]  ? security_file_ioctl+0x9d/0xd0
[   23.049422]  make_task_dead+0x182/0x3c0
[   23.049592]  rewind_stack_and_make_dead+0x17/0x20
[   23.049770] RIP: 0033:0x7f070643ee5d
[   23.049905] Code: Unable to access opcode bytes at 0x7f070643ee33.
[   23.050147] RSP: 002b:00007ffc89b868a8 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   23.050497] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f070643ee5d
[   23.050830] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   23.051119] RBP: 00007ffc89b868c0 R08: 0000000000000800 R09: 0000000000000800
[   23.051376] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffc89b869d8
[   23.051633] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f07067f1000
[   23.051899]  </TASK>
[   23.052001] irq event stamp: 0
[   23.052141] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   23.052370] hardirqs last disabled at (0): [<ffffffff8122f2d1>] copy_process+0x1c51/0x7140
[   23.052687] softirqs last  enabled at (0): [<ffffffff8122f312>] copy_process+0x1c92/0x7140
[   23.053008] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   23.053239] ---[ end trace 0000000000000000 ]---
[   23.056114] iommufd_mock iommufd_mock263: Adding to iommu group 263
[   23.056372] iommufd_mock iommufd_mock263: Removing from iommu group 263
[   23.056642] general protection fault, probably for non-canonical address 0xdffffc0000000006: 0000 [#264] PREEMPT SMP KASAN NOPTI
[   23.057081] KASAN: null-ptr-deref in range [0x0000000000000030-0x0000000000000037]
[   23.057369] CPU: 1 PID: 987 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   23.057721] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   23.058147] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   23.058388] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   23.059135] RSP: 0018:ffff8880113b7ba8 EFLAGS: 00010206
[   23.059332] RAX: dffffc0000000000 RBX: ffff8880245d9000 RCX: 0000000000000000
[   23.059601] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   23.059900] RBP: ffff8880113b7bc0 R08: 0000000000000001 R09: ffffed100155b11b
[   23.060162] R10: ffff88800aad88df R11: ffff88806ca45a00 R12: 0000000000000000
[   23.060424] R13: ffffffff85cc0180 R14: ffff888024c35ec0 R15: ffffffff87070ae0
[   23.060686] FS:  00007f625db3f600(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
[   23.060981] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   23.061195] CR2: 0000000020000080 CR3: 0000000017232000 CR4: 0000000000750ee0
[   23.061458] PKRU: 55555554
[   23.061562] Call Trace:
[   23.061658]  <TASK>
[   23.061742]  ? show_regs+0x6e/0x80
[   23.061880]  ? die_addr+0x45/0xb0
[   23.062016]  ? exc_general_protection+0x159/0x250
[   23.062202]  ? asm_exc_general_protection+0x2b/0x30
[   23.062391]  ? sysfs_remove_link_from_group+0x21/0x90
[   23.062584]  ? sysfs_remove_link_from_group+0x37/0x90
[   23.062797]  ? sysfs_remove_link_from_group+0x21/0x90
[   23.062991]  iommu_device_unlink+0x85/0xd0
[   23.063148]  iommu_deinit_device+0x11f/0x4c0
[   23.063313]  __iommu_group_remove_device+0x26b/0x300
[   23.063502]  iommu_group_remove_device+0x8a/0xb0
[   23.063677]  iommufd_test+0x1f1a/0x2d10
[   23.063822]  ? __pfx_lock_release+0x10/0x10
[   23.063982]  ? __pfx_lock_acquire+0x10/0x10
[   23.064142]  ? __pfx_iommufd_test+0x10/0x10
[   23.064301]  ? __sanitizer_cov_trace_const_cmp8+0x1c/0x30
[   23.064504]  iommufd_fops_ioctl+0x377/0x510
[   23.064665]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   23.064842]  ? trace_hardirqs_on+0x26/0x120
[   23.065004]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   23.065235]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   23.065421]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   23.065624]  ? security_file_ioctl+0x9d/0xd0
[   23.065789]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   23.065967]  __x64_sys_ioctl+0x1b9/0x230
[   23.066116]  do_syscall_64+0x3c/0x90
[   23.066252]  entry_SYSCALL_64_after_hwframe+0x6e/0xd8
[   23.066440] RIP: 0033:0x7f625d83ee5d
[   23.066576] Code: ff c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d 93 af 1b 00 f7 d8 64 89 01 48
[   23.067252] RSP: 002b:00007ffd3d0013a8 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   23.067533] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f625d83ee5d
[   23.067795] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   23.068057] RBP: 00007ffd3d0013c0 R08: 0000000000000800 R09: 0000000000000800
[   23.068318] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffd3d0014d8
[   23.068580] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f625db80000
[   23.068847]  </TASK>
[   23.068934] Modules linked in:
[   23.069073] ---[ end trace 0000000000000000 ]---
[   23.069248] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   23.069462] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   23.070133] RSP: 0018:ffff88802457fba8 EFLAGS: 00010206
[   23.070331] RAX: dffffc0000000000 RBX: ffff888014f9b000 RCX: 0000000000000000
[   23.070598] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   23.070886] RBP: ffff88802457fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   23.071149] R10: ffff88800aad88df R11: 0000000000000001 R12: 0000000000000000
[   23.071410] R13: ffffffff85cc0180 R14: ffff8880109b6ac0 R15: ffffffff87070ae0
[   23.071672] FS:  00007f625db3f600(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
[   23.071967] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   23.072180] CR2: 0000000020000080 CR3: 0000000017232000 CR4: 0000000000750ee0
[   23.072442] PKRU: 55555554
[   23.072811] ------------[ cut here ]------------
[   23.072985] WARNING: CPU: 1 PID: 987 at drivers/iommu/iommufd/main.c:258 iommufd_fops_release+0x2a3/0x300
[   23.073336] Modules linked in:
[   23.073455] CPU: 1 PID: 987 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   23.073774] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   23.074185] RIP: 0010:iommufd_fops_release+0x2a3/0x300
[   23.074380] Code: 45 d0 65 48 2b 04 25 28 00 00 00 75 54 48 81 c4 88 00 00 00 31 c0 5b 41 5c 41 5d 41 5e 41 5f 5d c3 cc cc cc cc e8 ad 4f 0a fe <0f> 0b eb a6 e8 74 23 67 fe e9 f6 fe ff ff 48 89 85 50 ff ff ff e8
[   23.075073] RSP: 0018:ffff8880113b7c00 EFLAGS: 00010293
[   23.075266] RAX: 0000000000000000 RBX: ffff88801248a308 RCX: 0000000000000000
[   23.075524] RDX: ffff888011e84a00 RSI: ffffffff835563e3 RDI: ffffffff86702b48
[   23.075781] RBP: ffff8880113b7cb0 R08: 0000000000000000 R09: fffffbfff0eb2644
[   23.076038] R10: ffffffff87593227 R11: ffff888012f52200 R12: 0000000000000000
[   23.076296] R13: ffff8880135e5d18 R14: ffff8880113b7c48 R15: ffffffff83556140
[   23.076553] FS:  0000000000000000(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
[   23.076843] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   23.077053] CR2: 0000000020000080 CR3: 000000000687e000 CR4: 0000000000750ee0
[   23.077311] PKRU: 55555554
[   23.077414] Call Trace:
[   23.077508]  <TASK>
[   23.077590]  ? show_regs+0x6e/0x80
[   23.077724]  ? __warn+0xef/0x340
[   23.077851]  ? report_bug+0x25e/0x4b0
[   23.077993]  ? iommufd_fops_release+0x2a3/0x300
[   23.078165]  ? report_bug+0x2cb/0x4b0
[   23.078309]  ? handle_bug+0x46/0x90
[   23.078444]  ? exc_invalid_op+0x1d/0x50
[   23.078603]  ? asm_exc_invalid_op+0x1f/0x30
[   23.078763]  ? __pfx_iommufd_fops_release+0x10/0x10
[   23.078948]  ? iommufd_fops_release+0x2a3/0x300
[   23.079121]  ? iommufd_fops_release+0x2a3/0x300
[   23.079290]  ? __pfx_iommufd_fops_release+0x10/0x10
[   23.079469]  ? rcu_is_watching+0x19/0xc0
[   23.079617]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   23.079814]  ? __pfx_iommufd_fops_release+0x10/0x10
[   23.079996]  __fput+0x424/0xaf0
[   23.080121]  ____fput+0x1f/0x30
[   23.080243]  task_work_run+0x19d/0x2b0
[   23.080384]  ? __pfx_task_work_run+0x10/0x10
[   23.080543]  ? __sanitizer_cov_trace_const_cmp1+0x1e/0x30
[   23.080739]  ? switch_task_namespaces+0xa9/0xe0
[   23.080908]  do_exit+0xac9/0x2790
[   23.081034]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   23.081260]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   23.081441]  ? __pfx_do_exit+0x10/0x10
[   23.081581]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   23.081777]  ? security_file_ioctl+0x9d/0xd0
[   23.081938]  make_task_dead+0x182/0x3c0
[   23.082083]  rewind_stack_and_make_dead+0x17/0x20
[   23.082257] RIP: 0033:0x7f625d83ee5d
[   23.082390] Code: Unable to access opcode bytes at 0x7f625d83ee33.
[   23.082614] RSP: 002b:00007ffd3d0013a8 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   23.082887] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f625d83ee5d
[   23.083141] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   23.083393] RBP: 00007ffd3d0013c0 R08: 0000000000000800 R09: 0000000000000800
[   23.083644] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffd3d0014d8
[   23.083895] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f625db80000
[   23.084151]  </TASK>
[   23.084235] irq event stamp: 0
[   23.084348] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   23.084571] hardirqs last disabled at (0): [<ffffffff8122f2d1>] copy_process+0x1c51/0x7140
[   23.084863] softirqs last  enabled at (0): [<ffffffff8122f312>] copy_process+0x1c92/0x7140
[   23.085154] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   23.085377] ---[ end trace 0000000000000000 ]---
[   23.087822] iommufd_mock iommufd_mock264: Adding to iommu group 264
[   23.088076] iommufd_mock iommufd_mock264: Removing from iommu group 264
[   23.088333] general protection fault, probably for non-canonical address 0xdffffc0000000006: 0000 [#265] PREEMPT SMP KASAN NOPTI
[   23.088743] KASAN: null-ptr-deref in range [0x0000000000000030-0x0000000000000037]
[   23.089014] CPU: 1 PID: 988 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   23.089326] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   23.089730] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   23.089941] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   23.090596] RSP: 0018:ffff888014497ba8 EFLAGS: 00010206
[   23.090797] RAX: dffffc0000000000 RBX: ffff8880245db000 RCX: 0000000000000000
[   23.091060] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   23.091316] RBP: ffff888014497bc0 R08: 0000000000000001 R09: ffffed100155b11b
[   23.091572] R10: ffff88800aad88df R11: 5f6466756d6d6f69 R12: 0000000000000000
[   23.091829] R13: ffffffff85cc0180 R14: ffff88800bd793c0 R15: ffffffff87070ae0
[   23.092085] FS:  00007f9a7d528600(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
[   23.092374] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   23.092584] CR2: 0000000020000080 CR3: 0000000017232000 CR4: 0000000000750ee0
[   23.092842] PKRU: 55555554
[   23.092945] Call Trace:
[   23.093038]  <TASK>
[   23.093120]  ? show_regs+0x6e/0x80
[   23.093255]  ? die_addr+0x45/0xb0
[   23.093388]  ? exc_general_protection+0x159/0x250
[   23.093571]  ? asm_exc_general_protection+0x2b/0x30
[   23.093756]  ? sysfs_remove_link_from_group+0x21/0x90
[   23.093947]  ? sysfs_remove_link_from_group+0x37/0x90
[   23.094136]  ? sysfs_remove_link_from_group+0x21/0x90
[   23.094326]  iommu_device_unlink+0x85/0xd0
[   23.094482]  iommu_deinit_device+0x11f/0x4c0
[   23.094647]  __iommu_group_remove_device+0x26b/0x300
[   23.094841]  iommu_group_remove_device+0x8a/0xb0
[   23.095020]  iommufd_test+0x1f1a/0x2d10
[   23.095165]  ? __pfx_lock_release+0x10/0x10
[   23.095324]  ? __pfx_lock_acquire+0x10/0x10
[   23.095484]  ? __pfx_iommufd_test+0x10/0x10
[   23.095644]  ? __sanitizer_cov_trace_const_cmp8+0x1c/0x30
[   23.095846]  iommufd_fops_ioctl+0x377/0x510
[   23.096007]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   23.096185]  ? trace_hardirqs_on+0x26/0x120
[   23.096347]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   23.096578]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   23.096764]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   23.096964]  ? security_file_ioctl+0x9d/0xd0
[   23.097129]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   23.097307]  __x64_sys_ioctl+0x1b9/0x230
[   23.097456]  do_syscall_64+0x3c/0x90
[   23.097593]  entry_SYSCALL_64_after_hwframe+0x6e/0xd8
[   23.097781] RIP: 0033:0x7f9a7d23ee5d
[   23.097916] Code: ff c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d 93 af 1b 00 f7 d8 64 89 01 48
[   23.098570] RSP: 002b:00007ffc4f43c328 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   23.098870] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f9a7d23ee5d
[   23.099128] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   23.099385] RBP: 00007ffc4f43c340 R08: 0000000000000800 R09: 0000000000000800
[   23.099641] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffc4f43c458
[   23.099898] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f9a7d569000
[   23.100160]  </TASK>
[   23.100245] Modules linked in:
[   23.100465] ---[ end trace 0000000000000000 ]---
[   23.100637] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   23.100847] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   23.101501] RSP: 0018:ffff88802457fba8 EFLAGS: 00010206
[   23.101692] RAX: dffffc0000000000 RBX: ffff888014f9b000 RCX: 0000000000000000
[   23.101948] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   23.102204] RBP: ffff88802457fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   23.102459] R10: ffff88800aad88df R11: 0000000000000001 R12: 0000000000000000
[   23.102721] R13: ffffffff85cc0180 R14: ffff8880109b6ac0 R15: ffffffff87070ae0
[   23.102982] FS:  00007f9a7d528600(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
[   23.103265] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   23.103470] CR2: 0000000020000080 CR3: 0000000017232000 CR4: 0000000000750ee0
[   23.103722] PKRU: 55555554
[   23.104074] ------------[ cut here ]------------
[   23.104245] WARNING: CPU: 1 PID: 988 at drivers/iommu/iommufd/main.c:258 iommufd_fops_release+0x2a3/0x300
[   23.104589] Modules linked in:
[   23.104705] CPU: 1 PID: 988 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   23.105017] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   23.105422] RIP: 0010:iommufd_fops_release+0x2a3/0x300
[   23.105612] Code: 45 d0 65 48 2b 04 25 28 00 00 00 75 54 48 81 c4 88 00 00 00 31 c0 5b 41 5c 41 5d 41 5e 41 5f 5d c3 cc cc cc cc e8 ad 4f 0a fe <0f> 0b eb a6 e8 74 23 67 fe e9 f6 fe ff ff 48 89 85 50 ff ff ff e8
[   23.106265] RSP: 0018:ffff888014497c00 EFLAGS: 00010293
[   23.106456] RAX: 0000000000000000 RBX: ffff88801248a808 RCX: 0000000000000000
[   23.106719] RDX: ffff888010e3ca00 RSI: ffffffff835563e3 RDI: ffffffff86702b48
[   23.106974] RBP: ffff888014497cb0 R08: 0000000000000000 R09: fffffbfff0eb2644
[   23.107225] R10: ffffffff87593227 R11: ffff888013098200 R12: 0000000000000000
[   23.107477] R13: ffff8880135e4b98 R14: ffff888014497c48 R15: ffffffff83556140
[   23.107728] FS:  0000000000000000(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
[   23.108012] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   23.108217] CR2: 0000000020000080 CR3: 000000000687e000 CR4: 0000000000750ee0
[   23.108469] PKRU: 55555554
[   23.108569] Call Trace:
[   23.108660]  <TASK>
[   23.108741]  ? show_regs+0x6e/0x80
[   23.108871]  ? __warn+0xef/0x340
[   23.108995]  ? report_bug+0x25e/0x4b0
[   23.109134]  ? iommufd_fops_release+0x2a3/0x300
[   23.109303]  ? report_bug+0x2cb/0x4b0
[   23.109443]  ? handle_bug+0x46/0x90
[   23.109575]  ? exc_invalid_op+0x1d/0x50
[   23.109718]  ? asm_exc_invalid_op+0x1f/0x30
[   23.109872]  ? __pfx_iommufd_fops_release+0x10/0x10
[   23.110053]  ? iommufd_fops_release+0x2a3/0x300
[   23.110221]  ? iommufd_fops_release+0x2a3/0x300
[   23.110391]  ? __pfx_iommufd_fops_release+0x10/0x10
[   23.110570]  ? rcu_is_watching+0x19/0xc0
[   23.110726]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   23.110925]  ? __pfx_iommufd_fops_release+0x10/0x10
[   23.111104]  __fput+0x424/0xaf0
[   23.111229]  ____fput+0x1f/0x30
[   23.111350]  task_work_run+0x19d/0x2b0
[   23.111492]  ? __pfx_task_work_run+0x10/0x10
[   23.111651]  ? __sanitizer_cov_trace_const_cmp1+0x1e/0x30
[   23.111847]  ? switch_task_namespaces+0xa9/0xe0
[   23.112016]  do_exit+0xac9/0x2790
[   23.112143]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   23.112369]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   23.112549]  ? __pfx_do_exit+0x10/0x10
[   23.112690]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   23.112885]  ? security_file_ioctl+0x9d/0xd0
[   23.113047]  make_task_dead+0x182/0x3c0
[   23.113191]  rewind_stack_and_make_dead+0x17/0x20
[   23.113365] RIP: 0033:0x7f9a7d23ee5d
[   23.113498] Code: Unable to access opcode bytes at 0x7f9a7d23ee33.
[   23.113716] RSP: 002b:00007ffc4f43c328 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   23.113984] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f9a7d23ee5d
[   23.114235] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   23.114487] RBP: 00007ffc4f43c340 R08: 0000000000000800 R09: 0000000000000800
[   23.114750] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffc4f43c458
[   23.115003] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f9a7d569000
[   23.115260]  </TASK>
[   23.115343] irq event stamp: 0
[   23.115456] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   23.115679] hardirqs last disabled at (0): [<ffffffff8122f2d1>] copy_process+0x1c51/0x7140
[   23.115971] softirqs last  enabled at (0): [<ffffffff8122f312>] copy_process+0x1c92/0x7140
[   23.116263] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   23.116485] ---[ end trace 0000000000000000 ]---
[   23.119008] iommufd_mock iommufd_mock265: Adding to iommu group 265
[   23.119263] iommufd_mock iommufd_mock265: Removing from iommu group 265
[   23.119530] general protection fault, probably for non-canonical address 0xdffffc0000000006: 0000 [#266] PREEMPT SMP KASAN NOPTI
[   23.119943] KASAN: null-ptr-deref in range [0x0000000000000030-0x0000000000000037]
[   23.120217] CPU: 1 PID: 989 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   23.120531] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   23.120937] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   23.121151] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   23.121808] RSP: 0018:ffff888011c6fba8 EFLAGS: 00010206
[   23.122002] RAX: dffffc0000000000 RBX: ffff8880245da000 RCX: 0000000000000000
[   23.122259] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   23.122517] RBP: ffff888011c6fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   23.122781] R10: ffff88800aad88df R11: 5f6466756d6d6f69 R12: 0000000000000000
[   23.123041] R13: ffffffff85cc0180 R14: ffff8880231a8e80 R15: ffffffff87070ae0
[   23.123300] FS:  00007f684b372600(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
[   23.123591] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   23.123802] CR2: 0000000020000080 CR3: 0000000017232000 CR4: 0000000000750ee0
[   23.124061] PKRU: 55555554
[   23.124164] Call Trace:
[   23.124257]  <TASK>
[   23.124340]  ? show_regs+0x6e/0x80
[   23.124476]  ? die_addr+0x45/0xb0
[   23.124610]  ? exc_general_protection+0x159/0x250
[   23.124793]  ? asm_exc_general_protection+0x2b/0x30
[   23.124980]  ? sysfs_remove_link_from_group+0x21/0x90
[   23.125172]  ? sysfs_remove_link_from_group+0x37/0x90
[   23.125363]  ? sysfs_remove_link_from_group+0x21/0x90
[   23.125554]  iommu_device_unlink+0x85/0xd0
[   23.125710]  iommu_deinit_device+0x11f/0x4c0
[   23.125876]  __iommu_group_remove_device+0x26b/0x300
[   23.126067]  iommu_group_remove_device+0x8a/0xb0
[   23.126244]  iommufd_test+0x1f1a/0x2d10
[   23.126390]  ? __pfx_lock_release+0x10/0x10
[   23.126551]  ? __pfx_lock_acquire+0x10/0x10
[   23.126712]  ? __pfx_iommufd_test+0x10/0x10
[   23.126879]  ? __sanitizer_cov_trace_const_cmp8+0x1c/0x30
[   23.127083]  iommufd_fops_ioctl+0x377/0x510
[   23.127243]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   23.127420]  ? trace_hardirqs_on+0x26/0x120
[   23.127582]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   23.127813]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   23.127998]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   23.128200]  ? security_file_ioctl+0x9d/0xd0
[   23.128386]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   23.128565]  __x64_sys_ioctl+0x1b9/0x230
[   23.128716]  do_syscall_64+0x3c/0x90
[   23.128853]  entry_SYSCALL_64_after_hwframe+0x6e/0xd8
[   23.129042] RIP: 0033:0x7f684b03ee5d
[   23.129179] Code: ff c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d 93 af 1b 00 f7 d8 64 89 01 48
[   23.129838] RSP: 002b:00007ffe81a45628 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   23.130112] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f684b03ee5d
[   23.130371] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   23.130630] RBP: 00007ffe81a45640 R08: 0000000000000800 R09: 0000000000000800
[   23.130901] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffe81a45758
[   23.131157] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f684b3b3000
[   23.131419]  </TASK>
[   23.131504] Modules linked in:
[   23.131661] ---[ end trace 0000000000000000 ]---
[   23.131832] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   23.132047] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   23.132703] RSP: 0018:ffff88802457fba8 EFLAGS: 00010206
[   23.132894] RAX: dffffc0000000000 RBX: ffff888014f9b000 RCX: 0000000000000000
[   23.133151] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   23.133535] RBP: ffff88802457fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   23.133790] R10: ffff88800aad88df R11: 0000000000000001 R12: 0000000000000000
[   23.134046] R13: ffffffff85cc0180 R14: ffff8880109b6ac0 R15: ffffffff87070ae0
[   23.134301] FS:  00007f684b372600(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
[   23.134599] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   23.134815] CR2: 0000000020000080 CR3: 0000000017232000 CR4: 0000000000750ee0
[   23.135075] PKRU: 55555554
[   23.135442] ------------[ cut here ]------------
[   23.135612] WARNING: CPU: 1 PID: 989 at drivers/iommu/iommufd/main.c:258 iommufd_fops_release+0x2a3/0x300
[   23.135956] Modules linked in:
[   23.136072] CPU: 1 PID: 989 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   23.136382] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   23.136784] RIP: 0010:iommufd_fops_release+0x2a3/0x300
[   23.136974] Code: 45 d0 65 48 2b 04 25 28 00 00 00 75 54 48 81 c4 88 00 00 00 31 c0 5b 41 5c 41 5d 41 5e 41 5f 5d c3 cc cc cc cc e8 ad 4f 0a fe <0f> 0b eb a6 e8 74 23 67 fe e9 f6 fe ff ff 48 89 85 50 ff ff ff e8
[   23.137642] RSP: 0018:ffff888011c6fc00 EFLAGS: 00010293
[   23.137834] RAX: 0000000000000000 RBX: ffff88801248aa08 RCX: 0000000000000000
[   23.138088] RDX: ffff888014428000 RSI: ffffffff835563e3 RDI: ffffffff86702b48
[   23.138343] RBP: ffff888011c6fcb0 R08: 0000000000000000 R09: fffffbfff0eb2644
[   23.138609] R10: ffffffff87593227 R11: ffff888013a0ce00 R12: 0000000000000000
[   23.138869] R13: ffff8880127beb98 R14: ffff888011c6fc48 R15: ffffffff83556140
[   23.139132] FS:  0000000000000000(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
[   23.139420] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   23.139629] CR2: 0000000020000080 CR3: 000000000687e000 CR4: 0000000000750ee0
[   23.139885] PKRU: 55555554
[   23.139987] Call Trace:
[   23.140080]  <TASK>
[   23.140162]  ? show_regs+0x6e/0x80
[   23.140295]  ? __warn+0xef/0x340
[   23.140421]  ? report_bug+0x25e/0x4b0
[   23.140563]  ? iommufd_fops_release+0x2a3/0x300
[   23.140734]  ? report_bug+0x2cb/0x4b0
[   23.140878]  ? handle_bug+0x46/0x90
[   23.141012]  ? exc_invalid_op+0x1d/0x50
[   23.141157]  ? asm_exc_invalid_op+0x1f/0x30
[   23.141314]  ? __pfx_iommufd_fops_release+0x10/0x10
[   23.141497]  ? iommufd_fops_release+0x2a3/0x300
[   23.141669]  ? iommufd_fops_release+0x2a3/0x300
[   23.141841]  ? __pfx_iommufd_fops_release+0x10/0x10
[   23.142023]  ? rcu_is_watching+0x19/0xc0
[   23.142173]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   23.142373]  ? __pfx_iommufd_fops_release+0x10/0x10
[   23.142555]  __fput+0x424/0xaf0
[   23.142842]  ____fput+0x1f/0x30
[   23.142967]  task_work_run+0x19d/0x2b0
[   23.143109]  ? __pfx_task_work_run+0x10/0x10
[   23.143267]  ? __sanitizer_cov_trace_const_cmp1+0x1e/0x30
[   23.143463]  ? switch_task_namespaces+0xa9/0xe0
[   23.143655]  do_exit+0xac9/0x2790
[   23.143783]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   23.144008]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   23.144187]  ? __pfx_do_exit+0x10/0x10
[   23.144327]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   23.144523]  ? security_file_ioctl+0x9d/0xd0
[   23.144683]  make_task_dead+0x182/0x3c0
[   23.144828]  rewind_stack_and_make_dead+0x17/0x20
[   23.145001] RIP: 0033:0x7f684b03ee5d
[   23.145133] Code: Unable to access opcode bytes at 0x7f684b03ee33.
[   23.145350] RSP: 002b:00007ffe81a45628 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   23.145618] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f684b03ee5d
[   23.145869] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   23.146119] RBP: 00007ffe81a45640 R08: 0000000000000800 R09: 0000000000000800
[   23.146370] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffe81a45758
[   23.146626] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f684b3b3000
[   23.146908]  </TASK>
[   23.146993] irq event stamp: 0
[   23.147106] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   23.147328] hardirqs last disabled at (0): [<ffffffff8122f2d1>] copy_process+0x1c51/0x7140
[   23.147619] softirqs last  enabled at (0): [<ffffffff8122f312>] copy_process+0x1c92/0x7140
[   23.147910] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   23.148132] ---[ end trace 0000000000000000 ]---
[   23.150545] iommufd_mock iommufd_mock266: Adding to iommu group 266
[   23.150856] iommufd_mock iommufd_mock266: Removing from iommu group 266
[   23.151117] general protection fault, probably for non-canonical address 0xdffffc0000000006: 0000 [#267] PREEMPT SMP KASAN NOPTI
[   23.151520] KASAN: null-ptr-deref in range [0x0000000000000030-0x0000000000000037]
[   23.151787] CPU: 1 PID: 990 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   23.152094] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   23.152490] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   23.152699] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   23.153342] RSP: 0018:ffff8880232c7ba8 EFLAGS: 00010206
[   23.153530] RAX: dffffc0000000000 RBX: ffff8880245d8000 RCX: 0000000000000000
[   23.153781] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   23.154033] RBP: ffff8880232c7bc0 R08: 0000000000000001 R09: ffffed100155b11b
[   23.154285] R10: ffff88800aad88df R11: 5f6466756d6d6f69 R12: 0000000000000000
[   23.154536] R13: ffffffff85cc0180 R14: ffff8880231a8820 R15: ffffffff87070ae0
[   23.154811] FS:  00007f3549ccd600(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
[   23.155098] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   23.155303] CR2: 0000000020000080 CR3: 0000000017232000 CR4: 0000000000750ee0
[   23.155556] PKRU: 55555554
[   23.155657] Call Trace:
[   23.155748]  <TASK>
[   23.155830]  ? show_regs+0x6e/0x80
[   23.155963]  ? die_addr+0x45/0xb0
[   23.156093]  ? exc_general_protection+0x159/0x250
[   23.156273]  ? asm_exc_general_protection+0x2b/0x30
[   23.156455]  ? sysfs_remove_link_from_group+0x21/0x90
[   23.156642]  ? sysfs_remove_link_from_group+0x37/0x90
[   23.156828]  ? sysfs_remove_link_from_group+0x21/0x90
[   23.157013]  iommu_device_unlink+0x85/0xd0
[   23.157169]  iommu_deinit_device+0x11f/0x4c0
[   23.157334]  __iommu_group_remove_device+0x26b/0x300
[   23.157520]  iommu_group_remove_device+0x8a/0xb0
[   23.157694]  iommufd_test+0x1f1a/0x2d10
[   23.157837]  ? __pfx_lock_release+0x10/0x10
[   23.157993]  ? __pfx_lock_acquire+0x10/0x10
[   23.158151]  ? __pfx_iommufd_test+0x10/0x10
[   23.158307]  ? __sanitizer_cov_trace_const_cmp8+0x1c/0x30
[   23.158506]  iommufd_fops_ioctl+0x377/0x510
[   23.158667]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   23.158850]  ? trace_hardirqs_on+0x26/0x120
[   23.159012]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   23.159240]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   23.159422]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   23.159620]  ? security_file_ioctl+0x9d/0xd0
[   23.159782]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   23.159956]  __x64_sys_ioctl+0x1b9/0x230
[   23.160103]  do_syscall_64+0x3c/0x90
[   23.160237]  entry_SYSCALL_64_after_hwframe+0x6e/0xd8
[   23.160421] RIP: 0033:0x7f3549a3ee5d
[   23.160555] Code: ff c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d 93 af 1b 00 f7 d8 64 89 01 48
[   23.161196] RSP: 002b:00007ffd52d6a068 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   23.161465] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f3549a3ee5d
[   23.161717] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   23.161968] RBP: 00007ffd52d6a080 R08: 0000000000000800 R09: 0000000000000800
[   23.162220] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffd52d6a198
[   23.162475] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f3549d0e000
[   23.162737]  </TASK>
[   23.162827] Modules linked in:
[   23.162985] ---[ end trace 0000000000000000 ]---
[   23.163158] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   23.163370] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   23.164032] RSP: 0018:ffff88802457fba8 EFLAGS: 00010206
[   23.164220] RAX: dffffc0000000000 RBX: ffff888014f9b000 RCX: 0000000000000000
[   23.164471] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   23.164722] RBP: ffff88802457fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   23.164973] R10: ffff88800aad88df R11: 0000000000000001 R12: 0000000000000000
[   23.165225] R13: ffffffff85cc0180 R14: ffff8880109b6ac0 R15: ffffffff87070ae0
[   23.165476] FS:  00007f3549ccd600(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
[   23.165761] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   23.165968] CR2: 0000000020000080 CR3: 0000000017232000 CR4: 0000000000750ee0
[   23.166220] PKRU: 55555554
[   23.166587] ------------[ cut here ]------------
[   23.166760] WARNING: CPU: 1 PID: 990 at drivers/iommu/iommufd/main.c:258 iommufd_fops_release+0x2a3/0x300
[   23.167127] Modules linked in:
[   23.167243] CPU: 1 PID: 990 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   23.167555] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   23.167958] RIP: 0010:iommufd_fops_release+0x2a3/0x300
[   23.168149] Code: 45 d0 65 48 2b 04 25 28 00 00 00 75 54 48 81 c4 88 00 00 00 31 c0 5b 41 5c 41 5d 41 5e 41 5f 5d c3 cc cc cc cc e8 ad 4f 0a fe <0f> 0b eb a6 e8 74 23 67 fe e9 f6 fe ff ff 48 89 85 50 ff ff ff e8
[   23.168802] RSP: 0018:ffff8880232c7c00 EFLAGS: 00010293
[   23.168992] RAX: 0000000000000000 RBX: ffff88801248a408 RCX: 0000000000000000
[   23.169247] RDX: ffff88800c0b2500 RSI: ffffffff835563e3 RDI: ffffffff86702b48
[   23.169502] RBP: ffff8880232c7cb0 R08: 0000000000000000 R09: fffffbfff0eb2644
[   23.169758] R10: ffffffff87593227 R11: ffff888013460200 R12: 0000000000000000
[   23.170014] R13: ffff8880127bf818 R14: ffff8880232c7c48 R15: ffffffff83556140
[   23.170269] FS:  0000000000000000(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
[   23.170558] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   23.170780] CR2: 0000000020000080 CR3: 000000000687e000 CR4: 0000000000750ee0
[   23.171038] PKRU: 55555554
[   23.171140] Call Trace:
[   23.171234]  <TASK>
[   23.171316]  ? show_regs+0x6e/0x80
[   23.171449]  ? __warn+0xef/0x340
[   23.171575]  ? report_bug+0x25e/0x4b0
[   23.171717]  ? iommufd_fops_release+0x2a3/0x300
[   23.171889]  ? report_bug+0x2cb/0x4b0
[   23.172033]  ? handle_bug+0x46/0x90
[   23.172167]  ? exc_invalid_op+0x1d/0x50
[   23.172313]  ? asm_exc_invalid_op+0x1f/0x30
[   23.172470]  ? __pfx_iommufd_fops_release+0x10/0x10
[   23.172655]  ? iommufd_fops_release+0x2a3/0x300
[   23.172826]  ? iommufd_fops_release+0x2a3/0x300
[   23.172998]  ? __pfx_iommufd_fops_release+0x10/0x10
[   23.173182]  ? rcu_is_watching+0x19/0xc0
[   23.173335]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   23.173536]  ? __pfx_iommufd_fops_release+0x10/0x10
[   23.173718]  __fput+0x424/0xaf0
[   23.173845]  ____fput+0x1f/0x30
[   23.173969]  task_work_run+0x19d/0x2b0
[   23.174114]  ? __pfx_task_work_run+0x10/0x10
[   23.174275]  ? __sanitizer_cov_trace_const_cmp1+0x1e/0x30
[   23.174475]  ? switch_task_namespaces+0xa9/0xe0
[   23.174653]  do_exit+0xac9/0x2790
[   23.174785]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   23.175015]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   23.175199]  ? __pfx_do_exit+0x10/0x10
[   23.175342]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   23.175541]  ? security_file_ioctl+0x9d/0xd0
[   23.175705]  make_task_dead+0x182/0x3c0
[   23.175853]  rewind_stack_and_make_dead+0x17/0x20
[   23.176030] RIP: 0033:0x7f3549a3ee5d
[   23.176165] Code: Unable to access opcode bytes at 0x7f3549a3ee33.
[   23.176386] RSP: 002b:00007ffd52d6a068 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   23.176659] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f3549a3ee5d
[   23.176915] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   23.177171] RBP: 00007ffd52d6a080 R08: 0000000000000800 R09: 0000000000000800
[   23.177427] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffd52d6a198
[   23.177683] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f3549d0e000
[   23.177944]  </TASK>
[   23.178030] irq event stamp: 0
[   23.178145] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   23.178372] hardirqs last disabled at (0): [<ffffffff8122f2d1>] copy_process+0x1c51/0x7140
[   23.178679] softirqs last  enabled at (0): [<ffffffff8122f312>] copy_process+0x1c92/0x7140
[   23.178974] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   23.179197] ---[ end trace 0000000000000000 ]---
[   23.181598] iommufd_mock iommufd_mock267: Adding to iommu group 267
[   23.181851] iommufd_mock iommufd_mock267: Removing from iommu group 267
[   23.182107] general protection fault, probably for non-canonical address 0xdffffc0000000006: 0000 [#268] PREEMPT SMP KASAN NOPTI
[   23.182517] KASAN: null-ptr-deref in range [0x0000000000000030-0x0000000000000037]
[   23.182798] CPU: 1 PID: 991 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   23.183120] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   23.183524] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   23.183738] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   23.184399] RSP: 0018:ffff8880233a7ba8 EFLAGS: 00010206
[   23.184596] RAX: dffffc0000000000 RBX: ffff8880245de000 RCX: 0000000000000000
[   23.184855] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   23.185113] RBP: ffff8880233a7bc0 R08: 0000000000000001 R09: ffffed100155b11b
[   23.185372] R10: ffff88800aad88df R11: 5f6466756d6d6f69 R12: 0000000000000000
[   23.185630] R13: ffffffff85cc0180 R14: ffff8880231a8720 R15: ffffffff87070ae0
[   23.185889] FS:  00007f003cecf600(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
[   23.186180] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   23.186391] CR2: 0000000020000080 CR3: 0000000017232000 CR4: 0000000000750ee0
[   23.186651] PKRU: 55555554
[   23.186756] Call Trace:
[   23.186850]  <TASK>
[   23.186933]  ? show_regs+0x6e/0x80
[   23.187069]  ? die_addr+0x45/0xb0
[   23.187203]  ? exc_general_protection+0x159/0x250
[   23.187386]  ? asm_exc_general_protection+0x2b/0x30
[   23.187573]  ? sysfs_remove_link_from_group+0x21/0x90
[   23.187764]  ? sysfs_remove_link_from_group+0x37/0x90
[   23.187954]  ? sysfs_remove_link_from_group+0x21/0x90
[   23.188145]  iommu_device_unlink+0x85/0xd0
[   23.188302]  iommu_deinit_device+0x11f/0x4c0
[   23.188468]  __iommu_group_remove_device+0x26b/0x300
[   23.188658]  iommu_group_remove_device+0x8a/0xb0
[   23.188835]  iommufd_test+0x1f1a/0x2d10
[   23.188981]  ? __pfx_lock_release+0x10/0x10
[   23.189141]  ? __pfx_lock_acquire+0x10/0x10
[   23.189303]  ? __pfx_iommufd_test+0x10/0x10
[   23.189463]  ? __sanitizer_cov_trace_const_cmp8+0x1c/0x30
[   23.189667]  iommufd_fops_ioctl+0x377/0x510
[   23.189829]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   23.190008]  ? trace_hardirqs_on+0x26/0x120
[   23.190170]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   23.190403]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   23.190589]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   23.190794]  ? security_file_ioctl+0x9d/0xd0
[   23.190962]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   23.191141]  __x64_sys_ioctl+0x1b9/0x230
[   23.191291]  do_syscall_64+0x3c/0x90
[   23.191428]  entry_SYSCALL_64_after_hwframe+0x6e/0xd8
[   23.191617] RIP: 0033:0x7f003cc3ee5d
[   23.191754] Code: ff c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d 93 af 1b 00 f7 d8 64 89 01 48
[   23.192412] RSP: 002b:00007ffca0fcc828 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   23.192687] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f003cc3ee5d
[   23.192945] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   23.193202] RBP: 00007ffca0fcc840 R08: 0000000000000800 R09: 0000000000000800
[   23.193460] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffca0fcc958
[   23.193718] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f003cf10000
[   23.193980]  </TASK>
[   23.194066] Modules linked in:
[   23.194276] ---[ end trace 0000000000000000 ]---
[   23.194448] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   23.194665] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   23.195328] RSP: 0018:ffff88802457fba8 EFLAGS: 00010206
[   23.195521] RAX: dffffc0000000000 RBX: ffff888014f9b000 RCX: 0000000000000000
[   23.195779] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   23.196037] RBP: ffff88802457fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   23.196294] R10: ffff88800aad88df R11: 0000000000000001 R12: 0000000000000000
[   23.196551] R13: ffffffff85cc0180 R14: ffff8880109b6ac0 R15: ffffffff87070ae0
[   23.196809] FS:  00007f003cecf600(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
[   23.197100] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   23.197309] CR2: 0000000020000080 CR3: 0000000017232000 CR4: 0000000000750ee0
[   23.197568] PKRU: 55555554
[   23.197919] ------------[ cut here ]------------
[   23.198090] WARNING: CPU: 1 PID: 991 at drivers/iommu/iommufd/main.c:258 iommufd_fops_release+0x2a3/0x300
[   23.198437] Modules linked in:
[   23.198554] CPU: 1 PID: 991 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   23.198879] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   23.199287] RIP: 0010:iommufd_fops_release+0x2a3/0x300
[   23.199478] Code: 45 d0 65 48 2b 04 25 28 00 00 00 75 54 48 81 c4 88 00 00 00 31 c0 5b 41 5c 41 5d 41 5e 41 5f 5d c3 cc cc cc cc e8 ad 4f 0a fe <0f> 0b eb a6 e8 74 23 67 fe e9 f6 fe ff ff 48 89 85 50 ff ff ff e8
[   23.200131] RSP: 0018:ffff8880233a7c00 EFLAGS: 00010293
[   23.200323] RAX: 0000000000000000 RBX: ffff88801248a708 RCX: 0000000000000000
[   23.200579] RDX: ffff8880121d8000 RSI: ffffffff835563e3 RDI: ffffffff86702b48
[   23.200836] RBP: ffff8880233a7cb0 R08: 0000000000000000 R09: fffffbfff0eb2644
[   23.201092] R10: ffffffff87593227 R11: ffff888018b36000 R12: 0000000000000000
[   23.201348] R13: ffff888020a59318 R14: ffff8880233a7c48 R15: ffffffff83556140
[   23.201605] FS:  0000000000000000(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
[   23.201893] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   23.202102] CR2: 0000000020000080 CR3: 000000000687e000 CR4: 0000000000750ee0
[   23.202359] PKRU: 55555554
[   23.202461] Call Trace:
[   23.202554]  <TASK>
[   23.202643]  ? show_regs+0x6e/0x80
[   23.202783]  ? __warn+0xef/0x340
[   23.202910]  ? report_bug+0x25e/0x4b0
[   23.203052]  ? iommufd_fops_release+0x2a3/0x300
[   23.203223]  ? report_bug+0x2cb/0x4b0
[   23.203366]  ? handle_bug+0x46/0x90
[   23.203500]  ? exc_invalid_op+0x1d/0x50
[   23.203646]  ? asm_exc_invalid_op+0x1f/0x30
[   23.203803]  ? __pfx_iommufd_fops_release+0x10/0x10
[   23.203988]  ? iommufd_fops_release+0x2a3/0x300
[   23.204158]  ? iommufd_fops_release+0x2a3/0x300
[   23.204331]  ? __pfx_iommufd_fops_release+0x10/0x10
[   23.204512]  ? rcu_is_watching+0x19/0xc0
[   23.204663]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   23.204863]  ? __pfx_iommufd_fops_release+0x10/0x10
[   23.205045]  __fput+0x424/0xaf0
[   23.205172]  ____fput+0x1f/0x30
[   23.205296]  task_work_run+0x19d/0x2b0
[   23.205440]  ? __pfx_task_work_run+0x10/0x10
[   23.205601]  ? __sanitizer_cov_trace_const_cmp1+0x1e/0x30
[   23.205801]  ? switch_task_namespaces+0xa9/0xe0
[   23.205973]  do_exit+0xac9/0x2790
[   23.206102]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   23.206331]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   23.206515]  ? __pfx_do_exit+0x10/0x10
[   23.206665]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   23.206866]  ? security_file_ioctl+0x9d/0xd0
[   23.207031]  make_task_dead+0x182/0x3c0
[   23.207179]  rewind_stack_and_make_dead+0x17/0x20
[   23.207357] RIP: 0033:0x7f003cc3ee5d
[   23.207492] Code: Unable to access opcode bytes at 0x7f003cc3ee33.
[   23.207714] RSP: 002b:00007ffca0fcc828 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   23.207986] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f003cc3ee5d
[   23.208242] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   23.208498] RBP: 00007ffca0fcc840 R08: 0000000000000800 R09: 0000000000000800
[   23.208753] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffca0fcc958
[   23.209010] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f003cf10000
[   23.209271]  </TASK>
[   23.209356] irq event stamp: 0
[   23.209471] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   23.209698] hardirqs last disabled at (0): [<ffffffff8122f2d1>] copy_process+0x1c51/0x7140
[   23.209995] softirqs last  enabled at (0): [<ffffffff8122f312>] copy_process+0x1c92/0x7140
[   23.210292] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   23.210538] ---[ end trace 0000000000000000 ]---
[   23.213156] iommufd_mock iommufd_mock268: Adding to iommu group 268
[   23.213409] iommufd_mock iommufd_mock268: Removing from iommu group 268
[   23.213663] general protection fault, probably for non-canonical address 0xdffffc0000000006: 0000 [#269] PREEMPT SMP KASAN NOPTI
[   23.214068] KASAN: null-ptr-deref in range [0x0000000000000030-0x0000000000000037]
[   23.214337] CPU: 0 PID: 992 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   23.214646] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   23.215061] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   23.215273] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   23.215918] RSP: 0018:ffff888011c6fba8 EFLAGS: 00010206
[   23.216108] RAX: dffffc0000000000 RBX: ffff8880188e0000 RCX: 0000000000000000
[   23.216363] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   23.216616] RBP: ffff888011c6fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   23.216869] R10: ffff88800aad88df R11: 5f6466756d6d6f69 R12: 0000000000000000
[   23.217122] R13: ffffffff85cc0180 R14: ffff8880111b74a0 R15: ffffffff87070ae0
[   23.217376] FS:  00007fcd35363600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   23.217683] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   23.217892] CR2: 0000000020000080 CR3: 0000000013544000 CR4: 0000000000750ef0
[   23.218147] PKRU: 55555554
[   23.218249] Call Trace:
[   23.218341]  <TASK>
[   23.218422]  ? show_regs+0x6e/0x80
[   23.218556]  ? die_addr+0x45/0xb0
[   23.218687]  ? exc_general_protection+0x159/0x250
[   23.218874]  ? asm_exc_general_protection+0x2b/0x30
[   23.219059]  ? sysfs_remove_link_from_group+0x21/0x90
[   23.219247]  ? sysfs_remove_link_from_group+0x37/0x90
[   23.219434]  ? sysfs_remove_link_from_group+0x21/0x90
[   23.219621]  iommu_device_unlink+0x85/0xd0
[   23.219775]  iommu_deinit_device+0x11f/0x4c0
[   23.219937]  __iommu_group_remove_device+0x26b/0x300
[   23.220124]  iommu_group_remove_device+0x8a/0xb0
[   23.220297]  iommufd_test+0x1f1a/0x2d10
[   23.220441]  ? __pfx_lock_release+0x10/0x10
[   23.220598]  ? __pfx_lock_acquire+0x10/0x10
[   23.220757]  ? __pfx_iommufd_test+0x10/0x10
[   23.220914]  ? __sanitizer_cov_trace_const_cmp8+0x1c/0x30
[   23.221116]  iommufd_fops_ioctl+0x377/0x510
[   23.221274]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   23.221450]  ? trace_hardirqs_on+0x26/0x120
[   23.221609]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   23.221837]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   23.222021]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   23.222219]  ? security_file_ioctl+0x9d/0xd0
[   23.222383]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   23.222558]  __x64_sys_ioctl+0x1b9/0x230
[   23.222706]  do_syscall_64+0x3c/0x90
[   23.222848]  entry_SYSCALL_64_after_hwframe+0x6e/0xd8
[   23.223036] RIP: 0033:0x7fcd3503ee5d
[   23.223171] Code: ff c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d 93 af 1b 00 f7 d8 64 89 01 48
[   23.223819] RSP: 002b:00007ffd3dbbe9e8 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   23.224089] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007fcd3503ee5d
[   23.224343] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   23.224596] RBP: 00007ffd3dbbea00 R08: 0000000000000800 R09: 0000000000000800
[   23.224850] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffd3dbbeb18
[   23.225102] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007fcd353a4000
[   23.225361]  </TASK>
[   23.225446] Modules linked in:
[   23.225605] ---[ end trace 0000000000000000 ]---
[   23.225774] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   23.225982] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   23.226653] RSP: 0018:ffff88802457fba8 EFLAGS: 00010206
[   23.226850] RAX: dffffc0000000000 RBX: ffff888014f9b000 RCX: 0000000000000000
[   23.227106] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   23.227358] RBP: ffff88802457fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   23.227611] R10: ffff88800aad88df R11: 0000000000000001 R12: 0000000000000000
[   23.227863] R13: ffffffff85cc0180 R14: ffff8880109b6ac0 R15: ffffffff87070ae0
[   23.228115] FS:  00007fcd35363600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   23.228401] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   23.228607] CR2: 0000000020000080 CR3: 0000000013544000 CR4: 0000000000750ef0
[   23.228861] PKRU: 55555554
[   23.229343] ------------[ cut here ]------------
[   23.229529] WARNING: CPU: 1 PID: 992 at drivers/iommu/iommufd/main.c:258 iommufd_fops_release+0x2a3/0x300
[   23.229879] Modules linked in:
[   23.229997] CPU: 1 PID: 992 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   23.230312] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   23.230768] RIP: 0010:iommufd_fops_release+0x2a3/0x300
[   23.230981] Code: 45 d0 65 48 2b 04 25 28 00 00 00 75 54 48 81 c4 88 00 00 00 31 c0 5b 41 5c 41 5d 41 5e 41 5f 5d c3 cc cc cc cc e8 ad 4f 0a fe <0f> 0b eb a6 e8 74 23 67 fe e9 f6 fe ff ff 48 89 85 50 ff ff ff e8
[   23.231641] RSP: 0018:ffff888011c6fc00 EFLAGS: 00010293
[   23.231834] RAX: 0000000000000000 RBX: ffff88800fe06a08 RCX: 0000000000000000
[   23.232096] RDX: ffff888011e82500 RSI: ffffffff835563e3 RDI: ffffffff86702b48
[   23.232352] RBP: ffff888011c6fcb0 R08: 0000000000000000 R09: fffffbfff0eb2644
[   23.232608] R10: ffffffff87593227 R11: ffff888023174400 R12: 0000000000000000
[   23.232864] R13: ffff8880117cce18 R14: ffff888011c6fc48 R15: ffffffff83556140
[   23.233119] FS:  0000000000000000(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
[   23.233407] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   23.233616] CR2: 00007fa281de8008 CR3: 000000000687e000 CR4: 0000000000750ee0
[   23.233873] PKRU: 55555554
[   23.233975] Call Trace:
[   23.234068]  <TASK>
[   23.234151]  ? show_regs+0x6e/0x80
[   23.234284]  ? __warn+0xef/0x340
[   23.234410]  ? report_bug+0x25e/0x4b0
[   23.234552]  ? iommufd_fops_release+0x2a3/0x300
[   23.234752]  ? report_bug+0x2cb/0x4b0
[   23.234894]  ? handle_bug+0x46/0x90
[   23.235028]  ? exc_invalid_op+0x1d/0x50
[   23.235174]  ? asm_exc_invalid_op+0x1f/0x30
[   23.235330]  ? __pfx_iommufd_fops_release+0x10/0x10
[   23.235515]  ? iommufd_fops_release+0x2a3/0x300
[   23.235685]  ? iommufd_fops_release+0x2a3/0x300
[   23.235857]  ? __pfx_iommufd_fops_release+0x10/0x10
[   23.236039]  ? rcu_is_watching+0x19/0xc0
[   23.236189]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   23.236390]  ? __pfx_iommufd_fops_release+0x10/0x10
[   23.236571]  __fput+0x424/0xaf0
[   23.236698]  ____fput+0x1f/0x30
[   23.236821]  task_work_run+0x19d/0x2b0
[   23.236966]  ? __pfx_task_work_run+0x10/0x10
[   23.237127]  ? __sanitizer_cov_trace_const_cmp1+0x1e/0x30
[   23.237329]  ? switch_task_namespaces+0xa9/0xe0
[   23.237502]  do_exit+0xac9/0x2790
[   23.237631]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   23.237860]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   23.238044]  ? __pfx_do_exit+0x10/0x10
[   23.238187]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   23.238389]  ? security_file_ioctl+0x9d/0xd0
[   23.238555]  make_task_dead+0x182/0x3c0
[   23.238725]  rewind_stack_and_make_dead+0x17/0x20
[   23.238907] RIP: 0033:0x7fcd3503ee5d
[   23.239042] Code: Unable to access opcode bytes at 0x7fcd3503ee33.
[   23.239264] RSP: 002b:00007ffd3dbbe9e8 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   23.239537] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007fcd3503ee5d
[   23.239793] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   23.240049] RBP: 00007ffd3dbbea00 R08: 0000000000000800 R09: 0000000000000800
[   23.240305] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffd3dbbeb18
[   23.240560] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007fcd353a4000
[   23.240820]  </TASK>
[   23.240905] irq event stamp: 0
[   23.241020] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   23.241247] hardirqs last disabled at (0): [<ffffffff8122f2d1>] copy_process+0x1c51/0x7140
[   23.241544] softirqs last  enabled at (0): [<ffffffff8122f312>] copy_process+0x1c92/0x7140
[   23.241841] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   23.242071] ---[ end trace 0000000000000000 ]---
[   23.244699] iommufd_mock iommufd_mock269: Adding to iommu group 269
[   23.244953] iommufd_mock iommufd_mock269: Removing from iommu group 269
[   23.245212] general protection fault, probably for non-canonical address 0xdffffc0000000006: 0000 [#270] PREEMPT SMP KASAN NOPTI
[   23.245617] KASAN: null-ptr-deref in range [0x0000000000000030-0x0000000000000037]
[   23.245886] CPU: 0 PID: 993 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   23.246194] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   23.246593] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   23.246830] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   23.247480] RSP: 0018:ffff8880233a7ba8 EFLAGS: 00010206
[   23.247670] RAX: dffffc0000000000 RBX: ffff8880188e6000 RCX: 0000000000000000
[   23.247924] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   23.248177] RBP: ffff8880233a7bc0 R08: 0000000000000001 R09: ffffed100155b11b
[   23.248430] R10: ffff88800aad88df R11: 5f6466756d6d6f69 R12: 0000000000000000
[   23.248684] R13: ffffffff85cc0180 R14: ffff8880111b7f60 R15: ffffffff87070ae0
[   23.248937] FS:  00007fb7ec7e4600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   23.249223] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   23.249430] CR2: 0000000020000080 CR3: 0000000017232000 CR4: 0000000000750ef0
[   23.249685] PKRU: 55555554
[   23.249786] Call Trace:
[   23.249881]  <TASK>
[   23.249963]  ? show_regs+0x6e/0x80
[   23.250099]  ? die_addr+0x45/0xb0
[   23.250230]  ? exc_general_protection+0x159/0x250
[   23.250411]  ? asm_exc_general_protection+0x2b/0x30
[   23.250594]  ? sysfs_remove_link_from_group+0x21/0x90
[   23.250808]  ? sysfs_remove_link_from_group+0x37/0x90
[   23.250999]  ? sysfs_remove_link_from_group+0x21/0x90
[   23.251186]  iommu_device_unlink+0x85/0xd0
[   23.251340]  iommu_deinit_device+0x11f/0x4c0
[   23.251503]  __iommu_group_remove_device+0x26b/0x300
[   23.251690]  iommu_group_remove_device+0x8a/0xb0
[   23.251864]  iommufd_test+0x1f1a/0x2d10
[   23.252007]  ? __pfx_lock_release+0x10/0x10
[   23.252165]  ? __pfx_lock_acquire+0x10/0x10
[   23.252323]  ? __pfx_iommufd_test+0x10/0x10
[   23.252480]  ? __sanitizer_cov_trace_const_cmp8+0x1c/0x30
[   23.252681]  iommufd_fops_ioctl+0x377/0x510
[   23.252839]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   23.253014]  ? trace_hardirqs_on+0x26/0x120
[   23.253174]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   23.253402]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   23.253586]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   23.253784]  ? security_file_ioctl+0x9d/0xd0
[   23.253947]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   23.254123]  __x64_sys_ioctl+0x1b9/0x230
[   23.254271]  do_syscall_64+0x3c/0x90
[   23.254406]  entry_SYSCALL_64_after_hwframe+0x6e/0xd8
[   23.254592] RIP: 0033:0x7fb7ec43ee5d
[   23.254726] Code: ff c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d 93 af 1b 00 f7 d8 64 89 01 48
[   23.255382] RSP: 002b:00007ffedc7c6388 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   23.255652] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007fb7ec43ee5d
[   23.255905] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   23.256158] RBP: 00007ffedc7c63a0 R08: 0000000000000800 R09: 0000000000000800
[   23.256411] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffedc7c64b8
[   23.256665] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007fb7ec825000
[   23.256923]  </TASK>
[   23.257007] Modules linked in:
[   23.257165] ---[ end trace 0000000000000000 ]---
[   23.257335] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   23.257546] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   23.258192] RSP: 0018:ffff88802457fba8 EFLAGS: 00010206
[   23.258382] RAX: dffffc0000000000 RBX: ffff888014f9b000 RCX: 0000000000000000
[   23.258655] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   23.258928] RBP: ffff88802457fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   23.259184] R10: ffff88800aad88df R11: 0000000000000001 R12: 0000000000000000
[   23.259437] R13: ffffffff85cc0180 R14: ffff8880109b6ac0 R15: ffffffff87070ae0
[   23.259690] FS:  00007fb7ec7e4600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   23.259976] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   23.260182] CR2: 0000000020000080 CR3: 0000000017232000 CR4: 0000000000750ef0
[   23.260436] PKRU: 55555554
[   23.260822] ------------[ cut here ]------------
[   23.260992] WARNING: CPU: 0 PID: 993 at drivers/iommu/iommufd/main.c:258 iommufd_fops_release+0x2a3/0x300
[   23.261333] Modules linked in:
[   23.261448] CPU: 0 PID: 993 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   23.261757] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   23.262155] RIP: 0010:iommufd_fops_release+0x2a3/0x300
[   23.262344] Code: 45 d0 65 48 2b 04 25 28 00 00 00 75 54 48 81 c4 88 00 00 00 31 c0 5b 41 5c 41 5d 41 5e 41 5f 5d c3 cc cc cc cc e8 ad 4f 0a fe <0f> 0b eb a6 e8 74 23 67 fe e9 f6 fe ff ff 48 89 85 50 ff ff ff e8
[   23.263094] RSP: 0018:ffff8880233a7c00 EFLAGS: 00010293
[   23.263286] RAX: 0000000000000000 RBX: ffff88800fe06408 RCX: 0000000000000000
[   23.263539] RDX: ffff888013a04a00 RSI: ffffffff835563e3 RDI: ffffffff86702b40
[   23.263792] RBP: ffff8880233a7cb0 R08: 0000000000000000 R09: fffffbfff0eb2644
[   23.264047] R10: ffffffff87593227 R11: ffff88801305b000 R12: 0000000000000000
[   23.264300] R13: ffff8880117cd318 R14: ffff8880233a7c48 R15: ffffffff83556140
[   23.264554] FS:  0000000000000000(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   23.264839] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   23.265046] CR2: 0000000020000080 CR3: 000000000687e000 CR4: 0000000000750ef0
[   23.265301] PKRU: 55555554
[   23.265402] Call Trace:
[   23.265494]  <TASK>
[   23.265576]  ? show_regs+0x6e/0x80
[   23.265707]  ? __warn+0xef/0x340
[   23.265831]  ? report_bug+0x25e/0x4b0
[   23.265974]  ? iommufd_fops_release+0x2a3/0x300
[   23.266145]  ? report_bug+0x2cb/0x4b0
[   23.266287]  ? handle_bug+0x46/0x90
[   23.266421]  ? exc_invalid_op+0x1d/0x50
[   23.266567]  ? asm_exc_invalid_op+0x1f/0x30
[   23.266734]  ? __pfx_iommufd_fops_release+0x10/0x10
[   23.266923]  ? iommufd_fops_release+0x2a3/0x300
[   23.267093]  ? iommufd_fops_release+0x2a3/0x300
[   23.267264]  ? __pfx_iommufd_fops_release+0x10/0x10
[   23.267445]  ? rcu_is_watching+0x19/0xc0
[   23.267594]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   23.267792]  ? __pfx_iommufd_fops_release+0x10/0x10
[   23.267973]  __fput+0x424/0xaf0
[   23.268098]  ____fput+0x1f/0x30
[   23.268221]  task_work_run+0x19d/0x2b0
[   23.268364]  ? __pfx_task_work_run+0x10/0x10
[   23.268524]  ? __sanitizer_cov_trace_const_cmp1+0x1e/0x30
[   23.268721]  ? switch_task_namespaces+0xa9/0xe0
[   23.268891]  do_exit+0xac9/0x2790
[   23.269019]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   23.269245]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   23.269427]  ? __pfx_do_exit+0x10/0x10
[   23.269568]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   23.269766]  ? security_file_ioctl+0x9d/0xd0
[   23.269929]  make_task_dead+0x182/0x3c0
[   23.270074]  rewind_stack_and_make_dead+0x17/0x20
[   23.270250] RIP: 0033:0x7fb7ec43ee5d
[   23.270384] Code: Unable to access opcode bytes at 0x7fb7ec43ee33.
[   23.270609] RSP: 002b:00007ffedc7c6388 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   23.270885] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007fb7ec43ee5d
[   23.271139] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   23.271393] RBP: 00007ffedc7c63a0 R08: 0000000000000800 R09: 0000000000000800
[   23.271646] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffedc7c64b8
[   23.271899] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007fb7ec825000
[   23.272157]  </TASK>
[   23.272242] irq event stamp: 0
[   23.272356] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   23.272581] hardirqs last disabled at (0): [<ffffffff8122f2d1>] copy_process+0x1c51/0x7140
[   23.272875] softirqs last  enabled at (0): [<ffffffff8122f312>] copy_process+0x1c92/0x7140
[   23.273168] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   23.273392] ---[ end trace 0000000000000000 ]---
[   23.276001] iommufd_mock iommufd_mock270: Adding to iommu group 270
[   23.276256] iommufd_mock iommufd_mock270: Removing from iommu group 270
[   23.276510] general protection fault, probably for non-canonical address 0xdffffc0000000006: 0000 [#271] PREEMPT SMP KASAN NOPTI
[   23.276914] KASAN: null-ptr-deref in range [0x0000000000000030-0x0000000000000037]
[   23.277182] CPU: 0 PID: 994 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   23.277490] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   23.277888] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   23.278097] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   23.278744] RSP: 0018:ffff88802335fba8 EFLAGS: 00010206
[   23.278949] RAX: dffffc0000000000 RBX: ffff8880188e5000 RCX: 0000000000000000
[   23.279202] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   23.279456] RBP: ffff88802335fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   23.279709] R10: ffff88800aad88df R11: 5f6466756d6d6f69 R12: 0000000000000000
[   23.279962] R13: ffffffff85cc0180 R14: ffff8880111b7780 R15: ffffffff87070ae0
[   23.280216] FS:  00007fdc6555a600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   23.280502] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   23.280709] CR2: 0000000020000080 CR3: 0000000017232000 CR4: 0000000000750ef0
[   23.280963] PKRU: 55555554
[   23.281065] Call Trace:
[   23.281157]  <TASK>
[   23.281238]  ? show_regs+0x6e/0x80
[   23.281371]  ? die_addr+0x45/0xb0
[   23.281502]  ? exc_general_protection+0x159/0x250
[   23.281682]  ? asm_exc_general_protection+0x2b/0x30
[   23.281865]  ? sysfs_remove_link_from_group+0x21/0x90
[   23.282052]  ? sysfs_remove_link_from_group+0x37/0x90
[   23.282239]  ? sysfs_remove_link_from_group+0x21/0x90
[   23.282426]  iommu_device_unlink+0x85/0xd0
[   23.282581]  iommu_deinit_device+0x11f/0x4c0
[   23.282743]  __iommu_group_remove_device+0x26b/0x300
[   23.282937]  iommu_group_remove_device+0x8a/0xb0
[   23.283110]  iommufd_test+0x1f1a/0x2d10
[   23.283253]  ? __pfx_lock_release+0x10/0x10
[   23.283410]  ? __pfx_lock_acquire+0x10/0x10
[   23.283569]  ? __pfx_iommufd_test+0x10/0x10
[   23.283726]  ? __sanitizer_cov_trace_const_cmp8+0x1c/0x30
[   23.283927]  iommufd_fops_ioctl+0x377/0x510
[   23.284085]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   23.284260]  ? trace_hardirqs_on+0x26/0x120
[   23.284419]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   23.284647]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   23.284831]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   23.285030]  ? security_file_ioctl+0x9d/0xd0
[   23.285192]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   23.285368]  __x64_sys_ioctl+0x1b9/0x230
[   23.285515]  do_syscall_64+0x3c/0x90
[   23.285650]  entry_SYSCALL_64_after_hwframe+0x6e/0xd8
[   23.285836] RIP: 0033:0x7fdc6523ee5d
[   23.285969] Code: ff c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d 93 af 1b 00 f7 d8 64 89 01 48
[   23.286615] RSP: 002b:00007ffe063a9ec8 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   23.286890] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007fdc6523ee5d
[   23.287146] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   23.287400] RBP: 00007ffe063a9ee0 R08: 0000000000000800 R09: 0000000000000800
[   23.287653] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffe063a9ff8
[   23.287907] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007fdc6559b000
[   23.288165]  </TASK>
[   23.288249] Modules linked in:
[   23.288407] ---[ end trace 0000000000000000 ]---
[   23.288575] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   23.288783] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   23.289429] RSP: 0018:ffff88802457fba8 EFLAGS: 00010206
[   23.289619] RAX: dffffc0000000000 RBX: ffff888014f9b000 RCX: 0000000000000000
[   23.289872] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   23.290127] RBP: ffff88802457fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   23.290380] R10: ffff88800aad88df R11: 0000000000000001 R12: 0000000000000000
[   23.290678] R13: ffffffff85cc0180 R14: ffff8880109b6ac0 R15: ffffffff87070ae0
[   23.291004] FS:  00007fdc6555a600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   23.291293] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   23.291524] CR2: 0000000020000080 CR3: 0000000017232000 CR4: 0000000000750ef0
[   23.291841] PKRU: 55555554
[   23.292196] ------------[ cut here ]------------
[   23.292388] WARNING: CPU: 0 PID: 994 at drivers/iommu/iommufd/main.c:258 iommufd_fops_release+0x2a3/0x300
[   23.292773] Modules linked in:
[   23.292889] CPU: 0 PID: 994 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   23.293268] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   23.293678] RIP: 0010:iommufd_fops_release+0x2a3/0x300
[   23.293920] Code: 45 d0 65 48 2b 04 25 28 00 00 00 75 54 48 81 c4 88 00 00 00 31 c0 5b 41 5c 41 5d 41 5e 41 5f 5d c3 cc cc cc cc e8 ad 4f 0a fe <0f> 0b eb a6 e8 74 23 67 fe e9 f6 fe ff ff 48 89 85 50 ff ff ff e8
[   23.294647] RSP: 0018:ffff88802335fc00 EFLAGS: 00010293
[   23.294842] RAX: 0000000000000000 RBX: ffff88800fe06108 RCX: 0000000000000000
[   23.295114] RDX: ffff888013a02500 RSI: ffffffff835563e3 RDI: ffffffff86702b40
[   23.295411] RBP: ffff88802335fcb0 R08: 0000000000000000 R09: fffffbfff0eb2644
[   23.295669] R10: ffffffff87593227 R11: ffff888018b3f400 R12: 0000000000000000
[   23.295982] R13: ffff88801279c198 R14: ffff88802335fc48 R15: ffffffff83556140
[   23.296241] FS:  0000000000000000(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   23.296593] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   23.296806] CR2: 0000000020000080 CR3: 000000000687e000 CR4: 0000000000750ef0
[   23.297073] PKRU: 55555554
[   23.297224] Call Trace:
[   23.297319]  <TASK>
[   23.297403]  ? show_regs+0x6e/0x80
[   23.297537]  ? __warn+0xef/0x340
[   23.297665]  ? report_bug+0x25e/0x4b0
[   23.297808]  ? iommufd_fops_release+0x2a3/0x300
[   23.297981]  ? report_bug+0x2cb/0x4b0
[   23.298140]  ? handle_bug+0x46/0x90
[   23.298319]  ? exc_invalid_op+0x1d/0x50
[   23.298464]  ? asm_exc_invalid_op+0x1f/0x30
[   23.298637]  ? __pfx_iommufd_fops_release+0x10/0x10
[   23.298823]  ? iommufd_fops_release+0x2a3/0x300
[   23.298993]  ? iommufd_fops_release+0x2a3/0x300
[   23.299187]  ? __pfx_iommufd_fops_release+0x10/0x10
[   23.299399]  ? rcu_is_watching+0x19/0xc0
[   23.299549]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   23.299766]  ? __pfx_iommufd_fops_release+0x10/0x10
[   23.299988]  __fput+0x424/0xaf0
[   23.300114]  ____fput+0x1f/0x30
[   23.300236]  task_work_run+0x19d/0x2b0
[   23.300392]  ? __pfx_task_work_run+0x10/0x10
[   23.300594]  ? __sanitizer_cov_trace_const_cmp1+0x1e/0x30
[   23.300792]  ? switch_task_namespaces+0xa9/0xe0
[   23.300963]  do_exit+0xac9/0x2790
[   23.301096]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   23.301377]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   23.301560]  ? __pfx_do_exit+0x10/0x10
[   23.301701]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   23.301953]  ? security_file_ioctl+0x9d/0xd0
[   23.302118]  make_task_dead+0x182/0x3c0
[   23.302264]  rewind_stack_and_make_dead+0x17/0x20
[   23.302445] RIP: 0033:0x7fdc6523ee5d
[   23.302603] Code: Unable to access opcode bytes at 0x7fdc6523ee33.
[   23.302858] RSP: 002b:00007ffe063a9ec8 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   23.303134] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007fdc6523ee5d
[   23.303393] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   23.303710] RBP: 00007ffe063a9ee0 R08: 0000000000000800 R09: 0000000000000800
[   23.303969] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffe063a9ff8
[   23.304233] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007fdc6559b000
[   23.304551]  </TASK>
[   23.304637] irq event stamp: 0
[   23.304754] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   23.305043] hardirqs last disabled at (0): [<ffffffff8122f2d1>] copy_process+0x1c51/0x7140
[   23.305344] softirqs last  enabled at (0): [<ffffffff8122f312>] copy_process+0x1c92/0x7140
[   23.305706] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   23.305936] ---[ end trace 0000000000000000 ]---
[   23.308949] iommufd_mock iommufd_mock271: Adding to iommu group 271
[   23.309203] iommufd_mock iommufd_mock271: Removing from iommu group 271
[   23.309464] general protection fault, probably for non-canonical address 0xdffffc0000000006: 0000 [#272] PREEMPT SMP KASAN NOPTI
[   23.309924] KASAN: null-ptr-deref in range [0x0000000000000030-0x0000000000000037]
[   23.310199] CPU: 0 PID: 995 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   23.310514] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   23.310951] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   23.311167] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   23.311829] RSP: 0018:ffff8880233a7ba8 EFLAGS: 00010206
[   23.312023] RAX: dffffc0000000000 RBX: ffff8880188e7000 RCX: 0000000000000000
[   23.312282] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   23.312541] RBP: ffff8880233a7bc0 R08: 0000000000000001 R09: ffffed100155b11b
[   23.312800] R10: ffff88800aad88df R11: 5f6466756d6d6f69 R12: 0000000000000000
[   23.313059] R13: ffffffff85cc0180 R14: ffff8880111b7320 R15: ffffffff87070ae0
[   23.313318] FS:  00007f590b753600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   23.313610] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   23.313822] CR2: 0000000020000080 CR3: 0000000013544000 CR4: 0000000000750ef0
[   23.314082] PKRU: 55555554
[   23.314185] Call Trace:
[   23.314280]  <TASK>
[   23.314363]  ? show_regs+0x6e/0x80
[   23.314499]  ? die_addr+0x45/0xb0
[   23.314633]  ? exc_general_protection+0x159/0x250
[   23.314824]  ? asm_exc_general_protection+0x2b/0x30
[   23.315011]  ? sysfs_remove_link_from_group+0x21/0x90
[   23.315198]  ? sysfs_remove_link_from_group+0x37/0x90
[   23.315386]  ? sysfs_remove_link_from_group+0x21/0x90
[   23.315573]  iommu_device_unlink+0x85/0xd0
[   23.315727]  iommu_deinit_device+0x11f/0x4c0
[   23.315890]  __iommu_group_remove_device+0x26b/0x300
[   23.316077]  iommu_group_remove_device+0x8a/0xb0
[   23.316251]  iommufd_test+0x1f1a/0x2d10
[   23.316395]  ? __pfx_lock_release+0x10/0x10
[   23.316552]  ? __pfx_lock_acquire+0x10/0x10
[   23.316712]  ? __pfx_iommufd_test+0x10/0x10
[   23.316868]  ? __sanitizer_cov_trace_const_cmp8+0x1c/0x30
[   23.317069]  iommufd_fops_ioctl+0x377/0x510
[   23.317228]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   23.317404]  ? trace_hardirqs_on+0x26/0x120
[   23.317564]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   23.317793]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   23.318003]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   23.318202]  ? security_file_ioctl+0x9d/0xd0
[   23.318365]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   23.318540]  __x64_sys_ioctl+0x1b9/0x230
[   23.318701]  do_syscall_64+0x3c/0x90
[   23.318845]  entry_SYSCALL_64_after_hwframe+0x6e/0xd8
[   23.319036] RIP: 0033:0x7f590b43ee5d
[   23.319170] Code: ff c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d 93 af 1b 00 f7 d8 64 89 01 48
[   23.319816] RSP: 002b:00007ffd3aa2ad18 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   23.320086] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f590b43ee5d
[   23.320339] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   23.320592] RBP: 00007ffd3aa2ad30 R08: 0000000000000800 R09: 0000000000000800
[   23.320844] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffd3aa2ae48
[   23.321097] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f590b794000
[   23.321354]  </TASK>
[   23.321438] Modules linked in:
[   23.321691] ---[ end trace 0000000000000000 ]---
[   23.321865] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   23.322077] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   23.322744] RSP: 0018:ffff88802457fba8 EFLAGS: 00010206
[   23.322946] RAX: dffffc0000000000 RBX: ffff888014f9b000 RCX: 0000000000000000
[   23.323205] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   23.323542] RBP: ffff88802457fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   23.323801] R10: ffff88800aad88df R11: 0000000000000001 R12: 0000000000000000
[   23.324067] R13: ffffffff85cc0180 R14: ffff8880109b6ac0 R15: ffffffff87070ae0
[   23.324369] FS:  00007f590b753600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   23.324661] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   23.324936] CR2: 0000000020000080 CR3: 0000000013544000 CR4: 0000000000750ef0
[   23.325197] PKRU: 55555554
[   23.325604] ------------[ cut here ]------------
[   23.325776] WARNING: CPU: 0 PID: 995 at drivers/iommu/iommufd/main.c:258 iommufd_fops_release+0x2a3/0x300
[   23.326144] Modules linked in:
[   23.326307] CPU: 0 PID: 995 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   23.326637] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   23.327067] RIP: 0010:iommufd_fops_release+0x2a3/0x300
[   23.327304] Code: 45 d0 65 48 2b 04 25 28 00 00 00 75 54 48 81 c4 88 00 00 00 31 c0 5b 41 5c 41 5d 41 5e 41 5f 5d c3 cc cc cc cc e8 ad 4f 0a fe <0f> 0b eb a6 e8 74 23 67 fe e9 f6 fe ff ff 48 89 85 50 ff ff ff e8
[   23.328025] RSP: 0018:ffff8880233a7c00 EFLAGS: 00010293
[   23.328218] RAX: 0000000000000000 RBX: ffff88800fe06d08 RCX: 0000000000000000
[   23.328529] RDX: ffff8880121dca00 RSI: ffffffff835563e3 RDI: ffffffff86702b40
[   23.328788] RBP: ffff8880233a7cb0 R08: 0000000000000000 R09: fffffbfff0eb2644
[   23.329047] R10: ffffffff87593227 R11: ffff888013522800 R12: 0000000000000000
[   23.329368] R13: ffff8880202dc198 R14: ffff8880233a7c48 R15: ffffffff83556140
[   23.329628] FS:  0000000000000000(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   23.329979] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   23.330191] CR2: 0000000020000080 CR3: 000000000687e000 CR4: 0000000000750ef0
[   23.330469] PKRU: 55555554
[   23.330624] Call Trace:
[   23.330718]  <TASK>
[   23.330824]  ? show_regs+0x6e/0x80
[   23.330961]  ? __warn+0xef/0x340
[   23.331088]  ? report_bug+0x25e/0x4b0
[   23.331231]  ? iommufd_fops_release+0x2a3/0x300
[   23.331404]  ? report_bug+0x2cb/0x4b0
[   23.331601]  ? handle_bug+0x46/0x90
[   23.331737]  ? exc_invalid_op+0x1d/0x50
[   23.331885]  ? asm_exc_invalid_op+0x1f/0x30
[   23.332043]  ? __pfx_iommufd_fops_release+0x10/0x10
[   23.332288]  ? iommufd_fops_release+0x2a3/0x300
[   23.332461]  ? iommufd_fops_release+0x2a3/0x300
[   23.332637]  ? __pfx_iommufd_fops_release+0x10/0x10
[   23.332832]  ? rcu_is_watching+0x19/0xc0
[   23.333024]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   23.333227]  ? __pfx_iommufd_fops_release+0x10/0x10
[   23.333416]  __fput+0x424/0xaf0
[   23.333600]  ____fput+0x1f/0x30
[   23.333725]  task_work_run+0x19d/0x2b0
[   23.333870]  ? __pfx_task_work_run+0x10/0x10
[   23.334033]  ? __sanitizer_cov_trace_const_cmp1+0x1e/0x30
[   23.334310]  ? switch_task_namespaces+0xa9/0xe0
[   23.334485]  do_exit+0xac9/0x2790
[   23.334622]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   23.334858]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   23.335044]  ? __pfx_do_exit+0x10/0x10
[   23.335202]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   23.335459]  ? security_file_ioctl+0x9d/0xd0
[   23.335625]  make_task_dead+0x182/0x3c0
[   23.335774]  rewind_stack_and_make_dead+0x17/0x20
[   23.336018] RIP: 0033:0x7f590b43ee5d
[   23.336155] Code: Unable to access opcode bytes at 0x7f590b43ee33.
[   23.336379] RSP: 002b:00007ffd3aa2ad18 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   23.336719] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f590b43ee5d
[   23.336978] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   23.337258] RBP: 00007ffd3aa2ad30 R08: 0000000000000800 R09: 0000000000000800
[   23.337560] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffd3aa2ae48
[   23.337818] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f590b794000
[   23.338143]  </TASK>
[   23.338229] irq event stamp: 0
[   23.338345] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   23.338592] hardirqs last disabled at (0): [<ffffffff8122f2d1>] copy_process+0x1c51/0x7140
[   23.338939] softirqs last  enabled at (0): [<ffffffff8122f312>] copy_process+0x1c92/0x7140
[   23.339240] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   23.339469] ---[ end trace 0000000000000000 ]---
[   23.342528] iommufd_mock iommufd_mock272: Adding to iommu group 272
[   23.342826] iommufd_mock iommufd_mock272: Removing from iommu group 272
[   23.343088] general protection fault, probably for non-canonical address 0xdffffc0000000006: 0000 [#273] PREEMPT SMP KASAN NOPTI
[   23.343502] KASAN: null-ptr-deref in range [0x0000000000000030-0x0000000000000037]
[   23.343777] CPU: 0 PID: 996 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   23.344097] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   23.344557] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   23.344773] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   23.345435] RSP: 0018:ffff888011c6fba8 EFLAGS: 00010206
[   23.345629] RAX: dffffc0000000000 RBX: ffff8880188e4000 RCX: 0000000000000000
[   23.345888] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   23.346147] RBP: ffff888011c6fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   23.346406] R10: ffff88800aad88df R11: 5f6466756d6d6f69 R12: 0000000000000000
[   23.346666] R13: ffffffff85cc0180 R14: ffff8880111b75c0 R15: ffffffff87070ae0
[   23.346936] FS:  00007f82e1c89600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   23.347223] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   23.347430] CR2: 0000000020000080 CR3: 0000000017232000 CR4: 0000000000750ef0
[   23.347685] PKRU: 55555554
[   23.347787] Call Trace:
[   23.347879]  <TASK>
[   23.347961]  ? show_regs+0x6e/0x80
[   23.348095]  ? die_addr+0x45/0xb0
[   23.348226]  ? exc_general_protection+0x159/0x250
[   23.348406]  ? asm_exc_general_protection+0x2b/0x30
[   23.348591]  ? sysfs_remove_link_from_group+0x21/0x90
[   23.348779]  ? sysfs_remove_link_from_group+0x37/0x90
[   23.348966]  ? sysfs_remove_link_from_group+0x21/0x90
[   23.349154]  iommu_device_unlink+0x85/0xd0
[   23.349308]  iommu_deinit_device+0x11f/0x4c0
[   23.349471]  __iommu_group_remove_device+0x26b/0x300
[   23.349658]  iommu_group_remove_device+0x8a/0xb0
[   23.349832]  iommufd_test+0x1f1a/0x2d10
[   23.349976]  ? __pfx_lock_release+0x10/0x10
[   23.350157]  ? __pfx_lock_acquire+0x10/0x10
[   23.350317]  ? __pfx_iommufd_test+0x10/0x10
[   23.350476]  ? __sanitizer_cov_trace_const_cmp8+0x1c/0x30
[   23.350681]  iommufd_fops_ioctl+0x377/0x510
[   23.350846]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   23.351028]  ? trace_hardirqs_on+0x26/0x120
[   23.351187]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   23.351417]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   23.351601]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   23.351800]  ? security_file_ioctl+0x9d/0xd0
[   23.351964]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   23.352140]  __x64_sys_ioctl+0x1b9/0x230
[   23.352288]  do_syscall_64+0x3c/0x90
[   23.352423]  entry_SYSCALL_64_after_hwframe+0x6e/0xd8
[   23.352610] RIP: 0033:0x7f82e1a3ee5d
[   23.352744] Code: ff c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d 93 af 1b 00 f7 d8 64 89 01 48
[   23.353391] RSP: 002b:00007ffdce19fa88 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   23.353661] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f82e1a3ee5d
[   23.353915] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   23.354168] RBP: 00007ffdce19faa0 R08: 0000000000000800 R09: 0000000000000800
[   23.354422] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffdce19fbb8
[   23.354680] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f82e1cca000
[   23.354956]  </TASK>
[   23.355040] Modules linked in:
[   23.355235] ---[ end trace 0000000000000000 ]---
[   23.355408] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   23.355621] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   23.356291] RSP: 0018:ffff88802457fba8 EFLAGS: 00010206
[   23.356561] RAX: dffffc0000000000 RBX: ffff888014f9b000 RCX: 0000000000000000
[   23.356820] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   23.357089] RBP: ffff88802457fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   23.357399] R10: ffff88800aad88df R11: 0000000000000001 R12: 0000000000000000
[   23.357663] R13: ffffffff85cc0180 R14: ffff8880109b6ac0 R15: ffffffff87070ae0
[   23.357979] FS:  00007f82e1c89600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   23.358276] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   23.358491] CR2: 0000000020000080 CR3: 0000000017232000 CR4: 0000000000750ef0
[   23.358834] PKRU: 55555554
[   23.359205] ------------[ cut here ]------------
[   23.359378] WARNING: CPU: 0 PID: 996 at drivers/iommu/iommufd/main.c:258 iommufd_fops_release+0x2a3/0x300
[   23.359800] Modules linked in:
[   23.359919] CPU: 0 PID: 996 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   23.360299] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   23.360711] RIP: 0010:iommufd_fops_release+0x2a3/0x300
[   23.360965] Code: 45 d0 65 48 2b 04 25 28 00 00 00 75 54 48 81 c4 88 00 00 00 31 c0 5b 41 5c 41 5d 41 5e 41 5f 5d c3 cc cc cc cc e8 ad 4f 0a fe <0f> 0b eb a6 e8 74 23 67 fe e9 f6 fe ff ff 48 89 85 50 ff ff ff e8
[   23.361693] RSP: 0018:ffff888011c6fc00 EFLAGS: 00010293
[   23.361889] RAX: 0000000000000000 RBX: ffff88800fe06208 RCX: 0000000000000000
[   23.362151] RDX: ffff888016492500 RSI: ffffffff835563e3 RDI: ffffffff86702b40
[   23.362469] RBP: ffff888011c6fcb0 R08: 0000000000000000 R09: fffffbfff0eb2644
[   23.362741] R10: ffffffff87593227 R11: ffff888019418400 R12: 0000000000000000
[   23.363007] R13: ffff8880202dc698 R14: ffff888011c6fc48 R15: ffffffff83556140
[   23.363332] FS:  0000000000000000(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   23.363626] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   23.363863] CR2: 0000000020000080 CR3: 000000000687e000 CR4: 0000000000750ef0
[   23.364167] PKRU: 55555554
[   23.364272] Call Trace:
[   23.364366]  <TASK>
[   23.364455]  ? show_regs+0x6e/0x80
[   23.364644]  ? __warn+0xef/0x340
[   23.364773]  ? report_bug+0x25e/0x4b0
[   23.364917]  ? iommufd_fops_release+0x2a3/0x300
[   23.365097]  ? report_bug+0x2cb/0x4b0
[   23.365297]  ? handle_bug+0x46/0x90
[   23.365434]  ? exc_invalid_op+0x1d/0x50
[   23.365583]  ? asm_exc_invalid_op+0x1f/0x30
[   23.365743]  ? __pfx_iommufd_fops_release+0x10/0x10
[   23.365992]  ? iommufd_fops_release+0x2a3/0x300
[   23.366167]  ? iommufd_fops_release+0x2a3/0x300
[   23.366343]  ? __pfx_iommufd_fops_release+0x10/0x10
[   23.366600]  ? rcu_is_watching+0x19/0xc0
[   23.366757]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   23.366962]  ? __pfx_iommufd_fops_release+0x10/0x10
[   23.367147]  __fput+0x424/0xaf0
[   23.367276]  ____fput+0x1f/0x30
[   23.367403]  task_work_run+0x19d/0x2b0
[   23.367550]  ? __pfx_task_work_run+0x10/0x10
[   23.367782]  ? __sanitizer_cov_trace_const_cmp1+0x1e/0x30
[   23.367986]  ? switch_task_namespaces+0xa9/0xe0
[   23.368163]  do_exit+0xac9/0x2790
[   23.368309]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   23.368581]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   23.368769]  ? __pfx_do_exit+0x10/0x10
[   23.368921]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   23.369176]  ? security_file_ioctl+0x9d/0xd0
[   23.369344]  make_task_dead+0x182/0x3c0
[   23.369494]  rewind_stack_and_make_dead+0x17/0x20
[   23.369694] RIP: 0033:0x7f82e1a3ee5d
[   23.369871] Code: Unable to access opcode bytes at 0x7f82e1a3ee33.
[   23.370098] RSP: 002b:00007ffdce19fa88 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   23.370438] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f82e1a3ee5d
[   23.370708] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   23.370974] RBP: 00007ffdce19faa0 R08: 0000000000000800 R09: 0000000000000800
[   23.371235] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffdce19fbb8
[   23.371557] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f82e1cca000
[   23.371825]  </TASK>
[   23.371912] irq event stamp: 0
[   23.372033] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   23.372323] hardirqs last disabled at (0): [<ffffffff8122f2d1>] copy_process+0x1c51/0x7140
[   23.372626] softirqs last  enabled at (0): [<ffffffff8122f312>] copy_process+0x1c92/0x7140
[   23.372980] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   23.373212] ---[ end trace 0000000000000000 ]---
[   23.375994] iommufd_mock iommufd_mock273: Adding to iommu group 273
[   23.376247] iommufd_mock iommufd_mock273: Removing from iommu group 273
[   23.376507] general protection fault, probably for non-canonical address 0xdffffc0000000006: 0000 [#274] PREEMPT SMP KASAN NOPTI
[   23.376921] KASAN: null-ptr-deref in range [0x0000000000000030-0x0000000000000037]
[   23.377244] CPU: 0 PID: 997 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   23.377560] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   23.377967] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   23.378183] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   23.378854] RSP: 0018:ffff88802335fba8 EFLAGS: 00010206
[   23.379048] RAX: dffffc0000000000 RBX: ffff8880188e1000 RCX: 0000000000000000
[   23.379302] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   23.379555] RBP: ffff88802335fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   23.379809] R10: ffff88800aad88df R11: 5f6466756d6d6f69 R12: 0000000000000000
[   23.380062] R13: ffffffff85cc0180 R14: ffff8880111b7b20 R15: ffffffff87070ae0
[   23.380316] FS:  00007fa96846a600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   23.380602] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   23.380809] CR2: 0000000020000080 CR3: 0000000013544000 CR4: 0000000000750ef0
[   23.381064] PKRU: 55555554
[   23.381166] Call Trace:
[   23.381259]  <TASK>
[   23.381340]  ? show_regs+0x6e/0x80
[   23.381474]  ? die_addr+0x45/0xb0
[   23.381606]  ? exc_general_protection+0x159/0x250
[   23.381786]  ? asm_exc_general_protection+0x2b/0x30
[   23.381970]  ? sysfs_remove_link_from_group+0x21/0x90
[   23.382157]  ? sysfs_remove_link_from_group+0x37/0x90
[   23.382345]  ? sysfs_remove_link_from_group+0x21/0x90
[   23.382562]  iommu_device_unlink+0x85/0xd0
[   23.382721]  iommu_deinit_device+0x11f/0x4c0
[   23.382894]  __iommu_group_remove_device+0x26b/0x300
[   23.383085]  iommu_group_remove_device+0x8a/0xb0
[   23.383259]  iommufd_test+0x1f1a/0x2d10
[   23.383403]  ? __pfx_lock_release+0x10/0x10
[   23.383560]  ? __pfx_lock_acquire+0x10/0x10
[   23.383719]  ? __pfx_iommufd_test+0x10/0x10
[   23.383876]  ? __sanitizer_cov_trace_const_cmp8+0x1c/0x30
[   23.384077]  iommufd_fops_ioctl+0x377/0x510
[   23.384236]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   23.384411]  ? trace_hardirqs_on+0x26/0x120
[   23.384571]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   23.384800]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   23.384984]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   23.385183]  ? security_file_ioctl+0x9d/0xd0
[   23.385346]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   23.385521]  __x64_sys_ioctl+0x1b9/0x230
[   23.385669]  do_syscall_64+0x3c/0x90
[   23.385804]  entry_SYSCALL_64_after_hwframe+0x6e/0xd8
[   23.385990] RIP: 0033:0x7fa96823ee5d
[   23.386125] Code: ff c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d 93 af 1b 00 f7 d8 64 89 01 48
[   23.386807] RSP: 002b:00007ffd6f539398 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   23.387084] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007fa96823ee5d
[   23.387337] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   23.387590] RBP: 00007ffd6f5393b0 R08: 0000000000000800 R09: 0000000000000800
[   23.387843] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffd6f5394c8
[   23.388097] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007fa9684ab000
[   23.388355]  </TASK>
[   23.388439] Modules linked in:
[   23.388785] ---[ end trace 0000000000000000 ]---
[   23.388960] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   23.389173] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   23.389836] RSP: 0018:ffff88802457fba8 EFLAGS: 00010206
[   23.390030] RAX: dffffc0000000000 RBX: ffff888014f9b000 RCX: 0000000000000000
[   23.390289] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   23.390639] RBP: ffff88802457fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   23.390909] R10: ffff88800aad88df R11: 0000000000000001 R12: 0000000000000000
[   23.391170] R13: ffffffff85cc0180 R14: ffff8880109b6ac0 R15: ffffffff87070ae0
[   23.391429] FS:  00007fa96846a600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   23.391721] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   23.391933] CR2: 0000000020000080 CR3: 0000000013544000 CR4: 0000000000750ef0
[   23.392193] PKRU: 55555554
[   23.392612] ------------[ cut here ]------------
[   23.392785] WARNING: CPU: 0 PID: 997 at drivers/iommu/iommufd/main.c:258 iommufd_fops_release+0x2a3/0x300
[   23.393142] Modules linked in:
[   23.393315] CPU: 0 PID: 997 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   23.393631] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   23.394096] RIP: 0010:iommufd_fops_release+0x2a3/0x300
[   23.394290] Code: 45 d0 65 48 2b 04 25 28 00 00 00 75 54 48 81 c4 88 00 00 00 31 c0 5b 41 5c 41 5d 41 5e 41 5f 5d c3 cc cc cc cc e8 ad 4f 0a fe <0f> 0b eb a6 e8 74 23 67 fe e9 f6 fe ff ff 48 89 85 50 ff ff ff e8
[   23.395019] RSP: 0018:ffff88802335fc00 EFLAGS: 00010293
[   23.395214] RAX: 0000000000000000 RBX: ffff88800fe06f08 RCX: 0000000000000000
[   23.395473] RDX: ffff888014cd8000 RSI: ffffffff835563e3 RDI: ffffffff86702b40
[   23.395795] RBP: ffff88802335fcb0 R08: 0000000000000000 R09: fffffbfff0eb2644
[   23.396055] R10: ffffffff87593227 R11: ffff888011147000 R12: 0000000000000000
[   23.396377] R13: ffff88801390fd18 R14: ffff88802335fc48 R15: ffffffff83556140
[   23.396637] FS:  0000000000000000(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   23.396936] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   23.397200] CR2: 0000000020000080 CR3: 000000000687e000 CR4: 0000000000750ef0
[   23.397461] PKRU: 55555554
[   23.397570] Call Trace:
[   23.397719]  <TASK>
[   23.397803]  ? show_regs+0x6e/0x80
[   23.397937]  ? __warn+0xef/0x340
[   23.398064]  ? report_bug+0x25e/0x4b0
[   23.398213]  ? iommufd_fops_release+0x2a3/0x300
[   23.398435]  ? report_bug+0x2cb/0x4b0
[   23.398621]  ? handle_bug+0x46/0x90
[   23.398761]  ? exc_invalid_op+0x1d/0x50
[   23.398935]  ? asm_exc_invalid_op+0x1f/0x30
[   23.399094]  ? __pfx_iommufd_fops_release+0x10/0x10
[   23.399281]  ? iommufd_fops_release+0x2a3/0x300
[   23.399454]  ? iommufd_fops_release+0x2a3/0x300
[   23.399688]  ? __pfx_iommufd_fops_release+0x10/0x10
[   23.399872]  ? rcu_is_watching+0x19/0xc0
[   23.400024]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   23.400243]  ? __pfx_iommufd_fops_release+0x10/0x10
[   23.400469]  __fput+0x424/0xaf0
[   23.400599]  ____fput+0x1f/0x30
[   23.400723]  task_work_run+0x19d/0x2b0
[   23.400869]  ? __pfx_task_work_run+0x10/0x10
[   23.401091]  ? __sanitizer_cov_trace_const_cmp1+0x1e/0x30
[   23.401293]  ? switch_task_namespaces+0xa9/0xe0
[   23.401467]  do_exit+0xac9/0x2790
[   23.401614]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   23.401887]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   23.402074]  ? __pfx_do_exit+0x10/0x10
[   23.402225]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   23.402485]  ? security_file_ioctl+0x9d/0xd0
[   23.402661]  make_task_dead+0x182/0x3c0
[   23.402815]  rewind_stack_and_make_dead+0x17/0x20
[   23.402997] RIP: 0033:0x7fa96823ee5d
[   23.403133] Code: Unable to access opcode bytes at 0x7fa96823ee33.
[   23.403379] RSP: 002b:00007ffd6f539398 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   23.403699] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007fa96823ee5d
[   23.403964] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   23.404275] RBP: 00007ffd6f5393b0 R08: 0000000000000800 R09: 0000000000000800
[   23.404534] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffd6f5394c8
[   23.404800] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007fa9684ab000
[   23.405117]  </TASK>
[   23.405203] irq event stamp: 0
[   23.405320] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   23.405606] hardirqs last disabled at (0): [<ffffffff8122f2d1>] copy_process+0x1c51/0x7140
[   23.405908] softirqs last  enabled at (0): [<ffffffff8122f312>] copy_process+0x1c92/0x7140
[   23.406217] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   23.406490] ---[ end trace 0000000000000000 ]---
[   23.409333] iommufd_mock iommufd_mock274: Adding to iommu group 274
[   23.409582] iommufd_mock iommufd_mock274: Removing from iommu group 274
[   23.409841] general protection fault, probably for non-canonical address 0xdffffc0000000006: 0000 [#275] PREEMPT SMP KASAN NOPTI
[   23.410254] KASAN: null-ptr-deref in range [0x0000000000000030-0x0000000000000037]
[   23.410550] CPU: 0 PID: 998 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   23.410896] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   23.411305] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   23.411519] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   23.412177] RSP: 0018:ffff888011c6fba8 EFLAGS: 00010206
[   23.412370] RAX: dffffc0000000000 RBX: ffff8880188e3000 RCX: 0000000000000000
[   23.412628] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   23.412886] RBP: ffff888011c6fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   23.413144] R10: ffff88800aad88df R11: 5f6466756d6d6f69 R12: 0000000000000000
[   23.413402] R13: ffffffff85cc0180 R14: ffff8880111b79e0 R15: ffffffff87070ae0
[   23.413655] FS:  00007fc7e17cf600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   23.413940] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   23.414146] CR2: 0000000020000080 CR3: 0000000017232000 CR4: 0000000000750ef0
[   23.414400] PKRU: 55555554
[   23.414501] Call Trace:
[   23.414593]  <TASK>
[   23.414680]  ? show_regs+0x6e/0x80
[   23.414822]  ? die_addr+0x45/0xb0
[   23.414958]  ? exc_general_protection+0x159/0x250
[   23.415138]  ? asm_exc_general_protection+0x2b/0x30
[   23.415328]  ? sysfs_remove_link_from_group+0x21/0x90
[   23.415516]  ? sysfs_remove_link_from_group+0x37/0x90
[   23.415703]  ? sysfs_remove_link_from_group+0x21/0x90
[   23.415889]  iommu_device_unlink+0x85/0xd0
[   23.416043]  iommu_deinit_device+0x11f/0x4c0
[   23.416205]  __iommu_group_remove_device+0x26b/0x300
[   23.416391]  iommu_group_remove_device+0x8a/0xb0
[   23.416565]  iommufd_test+0x1f1a/0x2d10
[   23.416707]  ? __pfx_lock_release+0x10/0x10
[   23.416865]  ? __pfx_lock_acquire+0x10/0x10
[   23.417023]  ? __pfx_iommufd_test+0x10/0x10
[   23.417179]  ? __sanitizer_cov_trace_const_cmp8+0x1c/0x30
[   23.417379]  iommufd_fops_ioctl+0x377/0x510
[   23.417537]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   23.417712]  ? trace_hardirqs_on+0x26/0x120
[   23.417871]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   23.418098]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   23.418281]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   23.418479]  ? security_file_ioctl+0x9d/0xd0
[   23.418644]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   23.418827]  __x64_sys_ioctl+0x1b9/0x230
[   23.418981]  do_syscall_64+0x3c/0x90
[   23.419115]  entry_SYSCALL_64_after_hwframe+0x6e/0xd8
[   23.419301] RIP: 0033:0x7fc7e143ee5d
[   23.419435] Code: ff c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d 93 af 1b 00 f7 d8 64 89 01 48
[   23.420095] RSP: 002b:00007ffe8f6b8318 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   23.420365] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007fc7e143ee5d
[   23.420617] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   23.420869] RBP: 00007ffe8f6b8330 R08: 0000000000000800 R09: 0000000000000800
[   23.421122] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffe8f6b8448
[   23.421374] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007fc7e1810000
[   23.421631]  </TASK>
[   23.421715] Modules linked in:
[   23.421892] ---[ end trace 0000000000000000 ]---
[   23.422064] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   23.422277] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   23.423050] RSP: 0018:ffff88802457fba8 EFLAGS: 00010206
[   23.423244] RAX: dffffc0000000000 RBX: ffff888014f9b000 RCX: 0000000000000000
[   23.423503] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   23.423769] RBP: ffff88802457fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   23.424088] R10: ffff88800aad88df R11: 0000000000000001 R12: 0000000000000000
[   23.424348] R13: ffffffff85cc0180 R14: ffff8880109b6ac0 R15: ffffffff87070ae0
[   23.424658] FS:  00007fc7e17cf600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   23.424950] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   23.425162] CR2: 0000000020000080 CR3: 0000000017232000 CR4: 0000000000750ef0
[   23.425484] PKRU: 55555554
[   23.425851] ------------[ cut here ]------------
[   23.426085] WARNING: CPU: 0 PID: 998 at drivers/iommu/iommufd/main.c:258 iommufd_fops_release+0x2a3/0x300
[   23.426434] Modules linked in:
[   23.426564] CPU: 0 PID: 998 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   23.426948] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   23.427357] RIP: 0010:iommufd_fops_release+0x2a3/0x300
[   23.427572] Code: 45 d0 65 48 2b 04 25 28 00 00 00 75 54 48 81 c4 88 00 00 00 31 c0 5b 41 5c 41 5d 41 5e 41 5f 5d c3 cc cc cc cc e8 ad 4f 0a fe <0f> 0b eb a6 e8 74 23 67 fe e9 f6 fe ff ff 48 89 85 50 ff ff ff e8
[   23.428265] RSP: 0018:ffff888011c6fc00 EFLAGS: 00010293
[   23.428520] RAX: 0000000000000000 RBX: ffff88800fe06308 RCX: 0000000000000000
[   23.428780] RDX: ffff888014cdca00 RSI: ffffffff835563e3 RDI: ffffffff86702b40
[   23.429043] RBP: ffff888011c6fcb0 R08: 0000000000000000 R09: fffffbfff0eb2644
[   23.429356] R10: ffffffff87593227 R11: ffff88801894e600 R12: 0000000000000000
[   23.429615] R13: ffff8880114e1598 R14: ffff888011c6fc48 R15: ffffffff83556140
[   23.429928] FS:  0000000000000000(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   23.430220] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   23.430491] CR2: 0000000020000080 CR3: 000000000687e000 CR4: 0000000000750ef0
[   23.430763] PKRU: 55555554
[   23.430893] Call Trace:
[   23.430989]  <TASK>
[   23.431072]  ? show_regs+0x6e/0x80
[   23.431206]  ? __warn+0xef/0x340
[   23.431334]  ? report_bug+0x25e/0x4b0
[   23.431537]  ? iommufd_fops_release+0x2a3/0x300
[   23.431710]  ? report_bug+0x2cb/0x4b0
[   23.431855]  ? handle_bug+0x46/0x90
[   23.431990]  ? exc_invalid_op+0x1d/0x50
[   23.432197]  ? asm_exc_invalid_op+0x1f/0x30
[   23.432356]  ? __pfx_iommufd_fops_release+0x10/0x10
[   23.432543]  ? iommufd_fops_release+0x2a3/0x300
[   23.432720]  ? iommufd_fops_release+0x2a3/0x300
[   23.432949]  ? __pfx_iommufd_fops_release+0x10/0x10
[   23.433133]  ? rcu_is_watching+0x19/0xc0
[   23.433285]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   23.433548]  ? __pfx_iommufd_fops_release+0x10/0x10
[   23.433732]  __fput+0x424/0xaf0
[   23.433860]  ____fput+0x1f/0x30
[   23.433985]  task_work_run+0x19d/0x2b0
[   23.434189]  ? __pfx_task_work_run+0x10/0x10
[   23.434353]  ? __sanitizer_cov_trace_const_cmp1+0x1e/0x30
[   23.434554]  ? switch_task_namespaces+0xa9/0xe0
[   23.434740]  do_exit+0xac9/0x2790
[   23.434944]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   23.435177]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   23.435363]  ? __pfx_do_exit+0x10/0x10
[   23.435507]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   23.435708]  ? security_file_ioctl+0x9d/0xd0
[   23.435886]  make_task_dead+0x182/0x3c0
[   23.436077]  rewind_stack_and_make_dead+0x17/0x20
[   23.436256] RIP: 0033:0x7fc7e143ee5d
[   23.436393] Code: Unable to access opcode bytes at 0x7fc7e143ee33.
[   23.436666] RSP: 002b:00007ffe8f6b8318 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   23.436941] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007fc7e143ee5d
[   23.437206] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   23.437537] RBP: 00007ffe8f6b8330 R08: 0000000000000800 R09: 0000000000000800
[   23.437799] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffe8f6b8448
[   23.438114] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007fc7e1810000
[   23.438379]  </TASK>
[   23.438464] irq event stamp: 0
[   23.438597] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   23.438875] hardirqs last disabled at (0): [<ffffffff8122f2d1>] copy_process+0x1c51/0x7140
[   23.439178] softirqs last  enabled at (0): [<ffffffff8122f312>] copy_process+0x1c92/0x7140
[   23.439479] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   23.439773] ---[ end trace 0000000000000000 ]---
[   23.442534] iommufd_mock iommufd_mock275: Adding to iommu group 275
[   23.442825] iommufd_mock iommufd_mock275: Removing from iommu group 275
[   23.443092] general protection fault, probably for non-canonical address 0xdffffc0000000006: 0000 [#276] PREEMPT SMP KASAN NOPTI
[   23.443506] KASAN: null-ptr-deref in range [0x0000000000000030-0x0000000000000037]
[   23.443780] CPU: 0 PID: 999 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   23.444097] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   23.444556] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   23.444771] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   23.445432] RSP: 0018:ffff8880233a7ba8 EFLAGS: 00010206
[   23.445626] RAX: dffffc0000000000 RBX: ffff8880188e2000 RCX: 0000000000000000
[   23.445885] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   23.446144] RBP: ffff8880233a7bc0 R08: 0000000000000001 R09: ffffed10025864a5
[   23.446403] R10: ffff888012c3252b R11: ffff88806cb45a00 R12: 0000000000000000
[   23.446663] R13: ffffffff85cc0180 R14: ffff8880111b7b40 R15: ffffffff87070ae0
[   23.446932] FS:  00007f16e8de2600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   23.447219] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   23.447426] CR2: 0000000020000080 CR3: 0000000013544000 CR4: 0000000000750ef0
[   23.447681] PKRU: 55555554
[   23.447783] Call Trace:
[   23.447875]  <TASK>
[   23.447956]  ? show_regs+0x6e/0x80
[   23.448090]  ? die_addr+0x45/0xb0
[   23.448220]  ? exc_general_protection+0x159/0x250
[   23.448401]  ? asm_exc_general_protection+0x2b/0x30
[   23.448584]  ? sysfs_remove_link_from_group+0x21/0x90
[   23.448771]  ? sysfs_remove_link_from_group+0x37/0x90
[   23.448958]  ? sysfs_remove_link_from_group+0x21/0x90
[   23.449146]  iommu_device_unlink+0x85/0xd0
[   23.449299]  iommu_deinit_device+0x11f/0x4c0
[   23.449462]  __iommu_group_remove_device+0x26b/0x300
[   23.449649]  iommu_group_remove_device+0x8a/0xb0
[   23.449822]  iommufd_test+0x1f1a/0x2d10
[   23.449965]  ? __pfx_lock_release+0x10/0x10
[   23.450122]  ? __pfx_lock_acquire+0x10/0x10
[   23.450282]  ? __pfx_iommufd_test+0x10/0x10
[   23.450440]  ? __sanitizer_cov_trace_const_cmp8+0x1c/0x30
[   23.450644]  iommufd_fops_ioctl+0x377/0x510
[   23.450811]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   23.450992]  ? trace_hardirqs_on+0x26/0x120
[   23.451151]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   23.451380]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   23.451563]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   23.451761]  ? security_file_ioctl+0x9d/0xd0
[   23.451924]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   23.452099]  __x64_sys_ioctl+0x1b9/0x230
[   23.452247]  do_syscall_64+0x3c/0x90
[   23.452382]  entry_SYSCALL_64_after_hwframe+0x6e/0xd8
[   23.452567] RIP: 0033:0x7f16e8a3ee5d
[   23.452701] Code: ff c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d 93 af 1b 00 f7 d8 64 89 01 48
[   23.453347] RSP: 002b:00007fff3cf3af58 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   23.453616] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f16e8a3ee5d
[   23.453869] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   23.454122] RBP: 00007fff3cf3af70 R08: 0000000000000800 R09: 0000000000000800
[   23.454375] R10: 0000000000000000 R11: 0000000000000213 R12: 00007fff3cf3b088
[   23.454629] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f16e8e23000
[   23.454899]  </TASK>
[   23.454984] Modules linked in:
[   23.455244] ---[ end trace 0000000000000000 ]---
[   23.455417] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   23.455629] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   23.456355] RSP: 0018:ffff88802457fba8 EFLAGS: 00010206
[   23.456549] RAX: dffffc0000000000 RBX: ffff888014f9b000 RCX: 0000000000000000
[   23.456808] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   23.457126] RBP: ffff88802457fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   23.457385] R10: ffff88800aad88df R11: 0000000000000001 R12: 0000000000000000
[   23.457658] R13: ffffffff85cc0180 R14: ffff8880109b6ac0 R15: ffffffff87070ae0
[   23.457969] FS:  00007f16e8de2600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   23.458261] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   23.458528] CR2: 0000000020000080 CR3: 0000000013544000 CR4: 0000000000750ef0
[   23.458800] PKRU: 55555554
[   23.459169] ------------[ cut here ]------------
[   23.459404] WARNING: CPU: 0 PID: 999 at drivers/iommu/iommufd/main.c:258 iommufd_fops_release+0x2a3/0x300
[   23.459753] Modules linked in:
[   23.459871] CPU: 0 PID: 999 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   23.460244] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   23.460714] RIP: 0010:iommufd_fops_release+0x2a3/0x300
[   23.460908] Code: 45 d0 65 48 2b 04 25 28 00 00 00 75 54 48 81 c4 88 00 00 00 31 c0 5b 41 5c 41 5d 41 5e 41 5f 5d c3 cc cc cc cc e8 ad 4f 0a fe <0f> 0b eb a6 e8 74 23 67 fe e9 f6 fe ff ff 48 89 85 50 ff ff ff e8
[   23.461627] RSP: 0018:ffff8880233a7c00 EFLAGS: 00010293
[   23.461821] RAX: 0000000000000000 RBX: ffff88800fe06c08 RCX: 0000000000000000
[   23.462141] RDX: ffff88801734a500 RSI: ffffffff835563e3 RDI: ffffffff86702b40
[   23.462400] RBP: ffff8880233a7cb0 R08: 0000000000000000 R09: fffffbfff0eb2644
[   23.462730] R10: ffffffff87593227 R11: ffff888018aac600 R12: 0000000000000000
[   23.462992] R13: ffff8880114e1818 R14: ffff8880233a7c48 R15: ffffffff83556140
[   23.463251] FS:  0000000000000000(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   23.463552] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   23.463812] CR2: 0000000020000080 CR3: 000000000687e000 CR4: 0000000000750ef0
[   23.464072] PKRU: 55555554
[   23.464185] Call Trace:
[   23.464329]  <TASK>
[   23.464412]  ? show_regs+0x6e/0x80
[   23.464547]  ? __warn+0xef/0x340
[   23.464674]  ? report_bug+0x25e/0x4b0
[   23.464823]  ? iommufd_fops_release+0x2a3/0x300
[   23.465042]  ? report_bug+0x2cb/0x4b0
[   23.465187]  ? handle_bug+0x46/0x90
[   23.465322]  ? exc_invalid_op+0x1d/0x50
[   23.465470]  ? asm_exc_invalid_op+0x1f/0x30
[   23.465685]  ? __pfx_iommufd_fops_release+0x10/0x10
[   23.465872]  ? iommufd_fops_release+0x2a3/0x300
[   23.466044]  ? iommufd_fops_release+0x2a3/0x300
[   23.466237]  ? __pfx_iommufd_fops_release+0x10/0x10
[   23.466476]  ? rcu_is_watching+0x19/0xc0
[   23.466635]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   23.466842]  ? __pfx_iommufd_fops_release+0x10/0x10
[   23.467026]  __fput+0x424/0xaf0
[   23.467155]  ____fput+0x1f/0x30
[   23.467285]  task_work_run+0x19d/0x2b0
[   23.467475]  ? __pfx_task_work_run+0x10/0x10
[   23.467639]  ? __sanitizer_cov_trace_const_cmp1+0x1e/0x30
[   23.467840]  ? switch_task_namespaces+0xa9/0xe0
[   23.468073]  do_exit+0xac9/0x2790
[   23.468204]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   23.468436]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   23.468630]  ? __pfx_do_exit+0x10/0x10
[   23.468812]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   23.469013]  ? security_file_ioctl+0x9d/0xd0
[   23.469180]  make_task_dead+0x182/0x3c0
[   23.469347]  rewind_stack_and_make_dead+0x17/0x20
[   23.469564] RIP: 0033:0x7f16e8a3ee5d
[   23.469700] Code: Unable to access opcode bytes at 0x7f16e8a3ee33.
[   23.469929] RSP: 002b:00007fff3cf3af58 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   23.470256] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f16e8a3ee5d
[   23.470515] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   23.470838] RBP: 00007fff3cf3af70 R08: 0000000000000800 R09: 0000000000000800
[   23.471097] R10: 0000000000000000 R11: 0000000000000213 R12: 00007fff3cf3b088
[   23.471355] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f16e8e23000
[   23.471623]  </TASK>
[   23.471760] irq event stamp: 0
[   23.471877] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   23.472106] hardirqs last disabled at (0): [<ffffffff8122f2d1>] copy_process+0x1c51/0x7140
[   23.472464] softirqs last  enabled at (0): [<ffffffff8122f312>] copy_process+0x1c92/0x7140
[   23.472764] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   23.473007] ---[ end trace 0000000000000000 ]---
[   23.475792] iommufd_mock iommufd_mock276: Adding to iommu group 276
[   23.476048] iommufd_mock iommufd_mock276: Removing from iommu group 276
[   23.476313] general protection fault, probably for non-canonical address 0xdffffc0000000006: 0000 [#277] PREEMPT SMP KASAN NOPTI
[   23.476773] KASAN: null-ptr-deref in range [0x0000000000000030-0x0000000000000037]
[   23.477047] CPU: 0 PID: 1000 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   23.477364] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   23.477771] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   23.477986] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   23.478652] RSP: 0018:ffff88802335fba8 EFLAGS: 00010206
[   23.478852] RAX: dffffc0000000000 RBX: ffff88802b873000 RCX: 0000000000000000
[   23.479111] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   23.479363] RBP: ffff88802335fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   23.479616] R10: ffff88800aad88df R11: ffff88806cb45a00 R12: 0000000000000000
[   23.479869] R13: ffffffff85cc0180 R14: ffff8880111b72a0 R15: ffffffff87070ae0
[   23.480122] FS:  00007fb27e58f600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   23.480408] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   23.480615] CR2: 0000000020000080 CR3: 0000000017232000 CR4: 0000000000750ef0
[   23.480869] PKRU: 55555554
[   23.480971] Call Trace:
[   23.481063]  <TASK>
[   23.481145]  ? show_regs+0x6e/0x80
[   23.481278]  ? die_addr+0x45/0xb0
[   23.481408]  ? exc_general_protection+0x159/0x250
[   23.481589]  ? asm_exc_general_protection+0x2b/0x30
[   23.481772]  ? sysfs_remove_link_from_group+0x21/0x90
[   23.481959]  ? sysfs_remove_link_from_group+0x37/0x90
[   23.482146]  ? sysfs_remove_link_from_group+0x21/0x90
[   23.482333]  iommu_device_unlink+0x85/0xd0
[   23.482487]  iommu_deinit_device+0x11f/0x4c0
[   23.482652]  __iommu_group_remove_device+0x26b/0x300
[   23.482848]  iommu_group_remove_device+0x8a/0xb0
[   23.483027]  iommufd_test+0x1f1a/0x2d10
[   23.483170]  ? __pfx_lock_release+0x10/0x10
[   23.483327]  ? __pfx_lock_acquire+0x10/0x10
[   23.483486]  ? __pfx_iommufd_test+0x10/0x10
[   23.483642]  ? __sanitizer_cov_trace_const_cmp8+0x1c/0x30
[   23.483843]  iommufd_fops_ioctl+0x377/0x510
[   23.484001]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   23.484176]  ? trace_hardirqs_on+0x26/0x120
[   23.484335]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   23.484564]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   23.484747]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   23.484945]  ? security_file_ioctl+0x9d/0xd0
[   23.485108]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   23.485284]  __x64_sys_ioctl+0x1b9/0x230
[   23.485431]  do_syscall_64+0x3c/0x90
[   23.485566]  entry_SYSCALL_64_after_hwframe+0x6e/0xd8
[   23.485751] RIP: 0033:0x7fb27e23ee5d
[   23.485885] Code: ff c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d 93 af 1b 00 f7 d8 64 89 01 48
[   23.486531] RSP: 002b:00007ffc896dc058 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   23.486811] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007fb27e23ee5d
[   23.487070] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   23.487323] RBP: 00007ffc896dc070 R08: 0000000000000800 R09: 0000000000000800
[   23.487576] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffc896dc188
[   23.487831] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007fb27e5d0000
[   23.488092]  </TASK>
[   23.488176] Modules linked in:
[   23.488448] ---[ end trace 0000000000000000 ]---
[   23.488622] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   23.488834] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   23.489494] RSP: 0018:ffff88802457fba8 EFLAGS: 00010206
[   23.489688] RAX: dffffc0000000000 RBX: ffff888014f9b000 RCX: 0000000000000000
[   23.489946] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   23.490271] RBP: ffff88802457fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   23.490530] R10: ffff88800aad88df R11: 0000000000000001 R12: 0000000000000000
[   23.490889] R13: ffffffff85cc0180 R14: ffff8880109b6ac0 R15: ffffffff87070ae0
[   23.491151] FS:  00007fb27e58f600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   23.491443] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   23.491716] CR2: 0000000020000080 CR3: 0000000017232000 CR4: 0000000000750ef0
[   23.491976] PKRU: 55555554
[   23.492377] ------------[ cut here ]------------
[   23.492549] WARNING: CPU: 0 PID: 1000 at drivers/iommu/iommufd/main.c:258 iommufd_fops_release+0x2a3/0x300
[   23.492920] Modules linked in:
[   23.493078] CPU: 0 PID: 1000 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   23.493396] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   23.493855] RIP: 0010:iommufd_fops_release+0x2a3/0x300
[   23.494049] Code: 45 d0 65 48 2b 04 25 28 00 00 00 75 54 48 81 c4 88 00 00 00 31 c0 5b 41 5c 41 5d 41 5e 41 5f 5d c3 cc cc cc cc e8 ad 4f 0a fe <0f> 0b eb a6 e8 74 23 67 fe e9 f6 fe ff ff 48 89 85 50 ff ff ff e8
[   23.494784] RSP: 0018:ffff88802335fc00 EFLAGS: 00010293
[   23.494978] RAX: 0000000000000000 RBX: ffff88800fe06008 RCX: 0000000000000000
[   23.495298] RDX: ffff88801734ca00 RSI: ffffffff835563e3 RDI: ffffffff86702b40
[   23.495557] RBP: ffff88802335fcb0 R08: 0000000000000000 R09: fffffbfff0eb2644
[   23.495821] R10: ffffffff87593227 R11: ffff888013197600 R12: 0000000000000000
[   23.496127] R13: ffff888011183598 R14: ffff88802335fc48 R15: ffffffff83556140
[   23.496387] FS:  0000000000000000(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   23.496736] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   23.496948] CR2: 0000000020000080 CR3: 000000000687e000 CR4: 0000000000750ef0
[   23.497219] PKRU: 55555554
[   23.497365] Call Trace:
[   23.497460]  <TASK>
[   23.497543]  ? show_regs+0x6e/0x80
[   23.497677]  ? __warn+0xef/0x340
[   23.497808]  ? report_bug+0x25e/0x4b0
[   23.498004]  ? iommufd_fops_release+0x2a3/0x300
[   23.498177]  ? report_bug+0x2cb/0x4b0
[   23.498323]  ? handle_bug+0x46/0x90
[   23.498458]  ? exc_invalid_op+0x1d/0x50
[   23.498682]  ? asm_exc_invalid_op+0x1f/0x30
[   23.498845]  ? __pfx_iommufd_fops_release+0x10/0x10
[   23.499031]  ? iommufd_fops_release+0x2a3/0x300
[   23.499204]  ? iommufd_fops_release+0x2a3/0x300
[   23.499379]  ? __pfx_iommufd_fops_release+0x10/0x10
[   23.499571]  ? rcu_is_watching+0x19/0xc0
[   23.499775]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   23.499978]  ? __pfx_iommufd_fops_release+0x10/0x10
[   23.500162]  __fput+0x424/0xaf0
[   23.500350]  ____fput+0x1f/0x30
[   23.500475]  task_work_run+0x19d/0x2b0
[   23.500621]  ? __pfx_task_work_run+0x10/0x10
[   23.500784]  ? __sanitizer_cov_trace_const_cmp1+0x1e/0x30
[   23.501047]  ? switch_task_namespaces+0xa9/0xe0
[   23.501221]  do_exit+0xac9/0x2790
[   23.501351]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   23.501593]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   23.501823]  ? __pfx_do_exit+0x10/0x10
[   23.501968]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   23.502169]  ? security_file_ioctl+0x9d/0xd0
[   23.502396]  make_task_dead+0x182/0x3c0
[   23.502545]  rewind_stack_and_make_dead+0x17/0x20
[   23.502732] RIP: 0033:0x7fb27e23ee5d
[   23.502871] Code: Unable to access opcode bytes at 0x7fb27e23ee33.
[   23.503095] RSP: 002b:00007ffc896dc058 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   23.503433] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007fb27e23ee5d
[   23.503692] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   23.503956] RBP: 00007ffc896dc070 R08: 0000000000000800 R09: 0000000000000800
[   23.504265] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffc896dc188
[   23.504524] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007fb27e5d0000
[   23.504849]  </TASK>
[   23.504935] irq event stamp: 0
[   23.505051] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   23.505289] hardirqs last disabled at (0): [<ffffffff8122f2d1>] copy_process+0x1c51/0x7140
[   23.505640] softirqs last  enabled at (0): [<ffffffff8122f312>] copy_process+0x1c92/0x7140
[   23.505944] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   23.506226] ---[ end trace 0000000000000000 ]---
[   23.508665] iommufd_mock iommufd_mock277: Adding to iommu group 277
[   23.508921] iommufd_mock iommufd_mock277: Removing from iommu group 277
[   23.509189] general protection fault, probably for non-canonical address 0xdffffc0000000006: 0000 [#278] PREEMPT SMP KASAN NOPTI
[   23.509600] KASAN: null-ptr-deref in range [0x0000000000000030-0x0000000000000037]
[   23.509869] CPU: 0 PID: 1001 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   23.510179] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   23.510580] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   23.510807] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   23.511464] RSP: 0018:ffff888011c6fba8 EFLAGS: 00010206
[   23.511654] RAX: dffffc0000000000 RBX: ffff88802b872000 RCX: 0000000000000000
[   23.511907] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   23.512160] RBP: ffff888011c6fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   23.512413] R10: ffff88800aad88df R11: 5f6466756d6d6f69 R12: 0000000000000000
[   23.512666] R13: ffffffff85cc0180 R14: ffff8880111b7de0 R15: ffffffff87070ae0
[   23.512919] FS:  00007f625bc19600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   23.513204] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   23.513411] CR2: 0000000020000080 CR3: 0000000013544000 CR4: 0000000000750ef0
[   23.513665] PKRU: 55555554
[   23.513767] Call Trace:
[   23.513859]  <TASK>
[   23.513940]  ? show_regs+0x6e/0x80
[   23.514074]  ? die_addr+0x45/0xb0
[   23.514204]  ? exc_general_protection+0x159/0x250
[   23.514385]  ? asm_exc_general_protection+0x2b/0x30
[   23.514568]  ? sysfs_remove_link_from_group+0x21/0x90
[   23.514774]  ? sysfs_remove_link_from_group+0x37/0x90
[   23.514985]  ? sysfs_remove_link_from_group+0x21/0x90
[   23.515173]  iommu_device_unlink+0x85/0xd0
[   23.515327]  iommu_deinit_device+0x11f/0x4c0
[   23.515490]  __iommu_group_remove_device+0x26b/0x300
[   23.515676]  iommu_group_remove_device+0x8a/0xb0
[   23.515849]  iommufd_test+0x1f1a/0x2d10
[   23.515993]  ? __pfx_lock_release+0x10/0x10
[   23.516150]  ? __pfx_lock_acquire+0x10/0x10
[   23.516308]  ? __pfx_iommufd_test+0x10/0x10
[   23.516465]  ? __sanitizer_cov_trace_const_cmp8+0x1c/0x30
[   23.516665]  iommufd_fops_ioctl+0x377/0x510
[   23.516824]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   23.516999]  ? trace_hardirqs_on+0x26/0x120
[   23.517158]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   23.517387]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   23.517570]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   23.517768]  ? security_file_ioctl+0x9d/0xd0
[   23.517931]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   23.518107]  __x64_sys_ioctl+0x1b9/0x230
[   23.518254]  do_syscall_64+0x3c/0x90
[   23.518389]  entry_SYSCALL_64_after_hwframe+0x6e/0xd8
[   23.518574] RIP: 0033:0x7f625ba3ee5d
[   23.518717] Code: ff c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d 93 af 1b 00 f7 d8 64 89 01 48
[   23.519374] RSP: 002b:00007ffe80bd0178 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   23.519644] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f625ba3ee5d
[   23.519898] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   23.520151] RBP: 00007ffe80bd0190 R08: 0000000000000800 R09: 0000000000000800
[   23.520404] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffe80bd02a8
[   23.520657] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f625bc5a000
[   23.520915]  </TASK>
[   23.520999] Modules linked in:
[   23.521186] ---[ end trace 0000000000000000 ]---
[   23.521358] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   23.521571] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   23.522231] RSP: 0018:ffff88802457fba8 EFLAGS: 00010206
[   23.522425] RAX: dffffc0000000000 RBX: ffff888014f9b000 RCX: 0000000000000000
[   23.522689] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   23.522957] RBP: ffff88802457fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   23.523210] R10: ffff88800aad88df R11: 0000000000000001 R12: 0000000000000000
[   23.523463] R13: ffffffff85cc0180 R14: ffff8880109b6ac0 R15: ffffffff87070ae0
[   23.523716] FS:  00007f625bc19600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   23.524001] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   23.524208] CR2: 0000000020000080 CR3: 0000000013544000 CR4: 0000000000750ef0
[   23.524462] PKRU: 55555554
[   23.524822] ------------[ cut here ]------------
[   23.524990] WARNING: CPU: 0 PID: 1001 at drivers/iommu/iommufd/main.c:258 iommufd_fops_release+0x2a3/0x300
[   23.525334] Modules linked in:
[   23.525449] CPU: 0 PID: 1001 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   23.525760] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   23.526158] RIP: 0010:iommufd_fops_release+0x2a3/0x300
[   23.526350] Code: 45 d0 65 48 2b 04 25 28 00 00 00 75 54 48 81 c4 88 00 00 00 31 c0 5b 41 5c 41 5d 41 5e 41 5f 5d c3 cc cc cc cc e8 ad 4f 0a fe <0f> 0b eb a6 e8 74 23 67 fe e9 f6 fe ff ff 48 89 85 50 ff ff ff e8
[   23.527017] RSP: 0018:ffff888011c6fc00 EFLAGS: 00010293
[   23.527211] RAX: 0000000000000000 RBX: ffff88800fe06608 RCX: 0000000000000000
[   23.527469] RDX: ffff888010b50000 RSI: ffffffff835563e3 RDI: ffffffff86702b40
[   23.527721] RBP: ffff888011c6fcb0 R08: 0000000000000000 R09: fffffbfff0eb2644
[   23.527973] R10: ffffffff87593227 R11: ffff888013298a00 R12: 0000000000000000
[   23.528225] R13: ffff888013a3b318 R14: ffff888011c6fc48 R15: ffffffff83556140
[   23.528477] FS:  0000000000000000(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   23.528761] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   23.528967] CR2: 0000000020000080 CR3: 000000000687e000 CR4: 0000000000750ef0
[   23.529220] PKRU: 55555554
[   23.529321] Call Trace:
[   23.529413]  <TASK>
[   23.529494]  ? show_regs+0x6e/0x80
[   23.529624]  ? __warn+0xef/0x340
[   23.529749]  ? report_bug+0x25e/0x4b0
[   23.529888]  ? iommufd_fops_release+0x2a3/0x300
[   23.530056]  ? report_bug+0x2cb/0x4b0
[   23.530198]  ? handle_bug+0x46/0x90
[   23.530330]  ? exc_invalid_op+0x1d/0x50
[   23.530473]  ? asm_exc_invalid_op+0x1f/0x30
[   23.530634]  ? __pfx_iommufd_fops_release+0x10/0x10
[   23.530819]  ? iommufd_fops_release+0x2a3/0x300
[   23.530988]  ? iommufd_fops_release+0x2a3/0x300
[   23.531157]  ? __pfx_iommufd_fops_release+0x10/0x10
[   23.531336]  ? rcu_is_watching+0x19/0xc0
[   23.531484]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   23.531682]  ? __pfx_iommufd_fops_release+0x10/0x10
[   23.531861]  __fput+0x424/0xaf0
[   23.531985]  ____fput+0x1f/0x30
[   23.532107]  task_work_run+0x19d/0x2b0
[   23.532249]  ? __pfx_task_work_run+0x10/0x10
[   23.532408]  ? __sanitizer_cov_trace_const_cmp1+0x1e/0x30
[   23.532604]  ? switch_task_namespaces+0xa9/0xe0
[   23.532774]  do_exit+0xac9/0x2790
[   23.532900]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   23.533126]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   23.533307]  ? __pfx_do_exit+0x10/0x10
[   23.533447]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   23.533644]  ? security_file_ioctl+0x9d/0xd0
[   23.533805]  make_task_dead+0x182/0x3c0
[   23.533950]  rewind_stack_and_make_dead+0x17/0x20
[   23.534124] RIP: 0033:0x7f625ba3ee5d
[   23.534257] Code: Unable to access opcode bytes at 0x7f625ba3ee33.
[   23.534475] RSP: 002b:00007ffe80bd0178 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   23.534754] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f625ba3ee5d
[   23.535006] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   23.535258] RBP: 00007ffe80bd0190 R08: 0000000000000800 R09: 0000000000000800
[   23.535512] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffe80bd02a8
[   23.535765] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f625bc5a000
[   23.536021]  </TASK>
[   23.536105] irq event stamp: 0
[   23.536218] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   23.536441] hardirqs last disabled at (0): [<ffffffff8122f2d1>] copy_process+0x1c51/0x7140
[   23.536733] softirqs last  enabled at (0): [<ffffffff8122f312>] copy_process+0x1c92/0x7140
[   23.537025] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   23.537247] ---[ end trace 0000000000000000 ]---
[   23.539916] iommufd_mock iommufd_mock278: Adding to iommu group 278
[   23.540168] iommufd_mock iommufd_mock278: Removing from iommu group 278
[   23.540421] general protection fault, probably for non-canonical address 0xdffffc0000000006: 0000 [#279] PREEMPT SMP KASAN NOPTI
[   23.540823] KASAN: null-ptr-deref in range [0x0000000000000030-0x0000000000000037]
[   23.541089] CPU: 0 PID: 1002 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   23.541398] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   23.541794] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   23.542002] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   23.542645] RSP: 0018:ffff88801440fba8 EFLAGS: 00010206
[   23.542855] RAX: dffffc0000000000 RBX: ffff88802b870000 RCX: 0000000000000000
[   23.543110] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   23.543361] RBP: ffff88801440fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   23.543613] R10: ffff88800aad88df R11: 5f6466756d6d6f69 R12: 0000000000000000
[   23.543865] R13: ffffffff85cc0180 R14: ffff8880111b71e0 R15: ffffffff87070ae0
[   23.544117] FS:  00007f20b9800600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   23.544427] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   23.544632] CR2: 0000000020000080 CR3: 0000000013544000 CR4: 0000000000750ef0
[   23.544885] PKRU: 55555554
[   23.544986] Call Trace:
[   23.545078]  <TASK>
[   23.545158]  ? show_regs+0x6e/0x80
[   23.545292]  ? die_addr+0x45/0xb0
[   23.545422]  ? exc_general_protection+0x159/0x250
[   23.545602]  ? asm_exc_general_protection+0x2b/0x30
[   23.545784]  ? sysfs_remove_link_from_group+0x21/0x90
[   23.545971]  ? sysfs_remove_link_from_group+0x37/0x90
[   23.546157]  ? sysfs_remove_link_from_group+0x21/0x90
[   23.546343]  iommu_device_unlink+0x85/0xd0
[   23.546496]  iommu_deinit_device+0x11f/0x4c0
[   23.546658]  __iommu_group_remove_device+0x26b/0x300
[   23.546850]  iommu_group_remove_device+0x8a/0xb0
[   23.547025]  iommufd_test+0x1f1a/0x2d10
[   23.547167]  ? __pfx_lock_release+0x10/0x10
[   23.547323]  ? __pfx_lock_acquire+0x10/0x10
[   23.547482]  ? __pfx_iommufd_test+0x10/0x10
[   23.547638]  ? __sanitizer_cov_trace_const_cmp8+0x1c/0x30
[   23.547855]  iommufd_fops_ioctl+0x377/0x510
[   23.548012]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   23.548187]  ? trace_hardirqs_on+0x26/0x120
[   23.548345]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   23.548573]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   23.548755]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   23.548952]  ? security_file_ioctl+0x9d/0xd0
[   23.549115]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   23.549289]  __x64_sys_ioctl+0x1b9/0x230
[   23.549435]  do_syscall_64+0x3c/0x90
[   23.549569]  entry_SYSCALL_64_after_hwframe+0x6e/0xd8
[   23.549754] RIP: 0033:0x7f20b943ee5d
[   23.549887] Code: ff c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d 93 af 1b 00 f7 d8 64 89 01 48
[   23.550541] RSP: 002b:00007ffc22e60f88 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   23.550815] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f20b943ee5d
[   23.551068] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   23.551318] RBP: 00007ffc22e60fa0 R08: 0000000000000800 R09: 0000000000000800
[   23.551570] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffc22e610b8
[   23.551820] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f20b9841000
[   23.552077]  </TASK>
[   23.552160] Modules linked in:
[   23.552316] ---[ end trace 0000000000000000 ]---
[   23.552484] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   23.552690] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   23.553331] RSP: 0018:ffff88802457fba8 EFLAGS: 00010206
[   23.553519] RAX: dffffc0000000000 RBX: ffff888014f9b000 RCX: 0000000000000000
[   23.553769] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   23.554020] RBP: ffff88802457fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   23.554271] R10: ffff88800aad88df R11: 0000000000000001 R12: 0000000000000000
[   23.554523] R13: ffffffff85cc0180 R14: ffff8880109b6ac0 R15: ffffffff87070ae0
[   23.554894] FS:  00007f20b9800600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   23.555178] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   23.555384] CR2: 0000000020000080 CR3: 0000000013544000 CR4: 0000000000750ef0
[   23.555715] PKRU: 55555554
[   23.556247] ------------[ cut here ]------------
[   23.556416] WARNING: CPU: 0 PID: 1002 at drivers/iommu/iommufd/main.c:258 iommufd_fops_release+0x2a3/0x300
[   23.556792] Modules linked in:
[   23.556954] CPU: 0 PID: 1002 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   23.557265] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   23.557722] RIP: 0010:iommufd_fops_release+0x2a3/0x300
[   23.557913] Code: 45 d0 65 48 2b 04 25 28 00 00 00 75 54 48 81 c4 88 00 00 00 31 c0 5b 41 5c 41 5d 41 5e 41 5f 5d c3 cc cc cc cc e8 ad 4f 0a fe <0f> 0b eb a6 e8 74 23 67 fe e9 f6 fe ff ff 48 89 85 50 ff ff ff e8
[   23.558709] RSP: 0018:ffff88801440fc00 EFLAGS: 00010293
[   23.558909] RAX: 0000000000000000 RBX: ffff88800fe06e08 RCX: 0000000000000000
[   23.559169] RDX: ffff888013a04a00 RSI: ffffffff835563e3 RDI: ffffffff86702b40
[   23.559489] RBP: ffff88801440fcb0 R08: 0000000000000000 R09: fffffbfff0eb2644
[   23.559742] R10: ffffffff87593227 R11: ffff88800fe4f000 R12: 0000000000000000
[   23.560013] R13: ffff88801345b598 R14: ffff88801440fc48 R15: ffffffff83556140
[   23.560304] FS:  0000000000000000(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   23.560608] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   23.560858] CR2: 0000000020000080 CR3: 000000000687e000 CR4: 0000000000750ef0
[   23.561111] PKRU: 55555554
[   23.561221] Call Trace:
[   23.561324]  <TASK>
[   23.561441]  ? show_regs+0x6e/0x80
[   23.561575]  ? __warn+0xef/0x340
[   23.561702]  ? report_bug+0x25e/0x4b0
[   23.561845]  ? iommufd_fops_release+0x2a3/0x300
[   23.562081]  ? report_bug+0x2cb/0x4b0
[   23.562226]  ? handle_bug+0x46/0x90
[   23.562361]  ? exc_invalid_op+0x1d/0x50
[   23.562507]  ? asm_exc_invalid_op+0x1f/0x30
[   23.562738]  ? __pfx_iommufd_fops_release+0x10/0x10
[   23.562935]  ? iommufd_fops_release+0x2a3/0x300
[   23.563106]  ? iommufd_fops_release+0x2a3/0x300
[   23.563279]  ? __pfx_iommufd_fops_release+0x10/0x10
[   23.563462]  ? rcu_is_watching+0x19/0xc0
[   23.563614]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   23.563875]  ? __pfx_iommufd_fops_release+0x10/0x10
[   23.564059]  __fput+0x424/0xaf0
[   23.564186]  ____fput+0x1f/0x30
[   23.564310]  task_work_run+0x19d/0x2b0
[   23.564518]  ? __pfx_task_work_run+0x10/0x10
[   23.564681]  ? __sanitizer_cov_trace_const_cmp1+0x1e/0x30
[   23.564881]  ? switch_task_namespaces+0xa9/0xe0
[   23.565063]  do_exit+0xac9/0x2790
[   23.565237]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   23.565469]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   23.565654]  ? __pfx_do_exit+0x10/0x10
[   23.565851]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   23.566052]  ? security_file_ioctl+0x9d/0xd0
[   23.566217]  make_task_dead+0x182/0x3c0
[   23.566371]  rewind_stack_and_make_dead+0x17/0x20
[   23.566627] RIP: 0033:0x7f20b943ee5d
[   23.566768] Code: Unable to access opcode bytes at 0x7f20b943ee33.
[   23.566990] RSP: 002b:00007ffc22e60f88 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   23.567264] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f20b943ee5d
[   23.567541] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   23.567842] RBP: 00007ffc22e60fa0 R08: 0000000000000800 R09: 0000000000000800
[   23.568105] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffc22e610b8
[   23.568415] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f20b9841000
[   23.568679]  </TASK>
[   23.568765] irq event stamp: 0
[   23.568902] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   23.569164] hardirqs last disabled at (0): [<ffffffff8122f2d1>] copy_process+0x1c51/0x7140
[   23.569470] softirqs last  enabled at (0): [<ffffffff8122f312>] copy_process+0x1c92/0x7140
[   23.569817] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   23.570045] ---[ end trace 0000000000000000 ]---
[   23.572843] iommufd_mock iommufd_mock279: Adding to iommu group 279
[   23.573093] iommufd_mock iommufd_mock279: Removing from iommu group 279
[   23.573351] general protection fault, probably for non-canonical address 0xdffffc0000000006: 0000 [#280] PREEMPT SMP KASAN NOPTI
[   23.573763] KASAN: null-ptr-deref in range [0x0000000000000030-0x0000000000000037]
[   23.574036] CPU: 0 PID: 1003 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   23.574352] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   23.574763] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   23.575002] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   23.575660] RSP: 0018:ffff888011c6fba8 EFLAGS: 00010206
[   23.575864] RAX: dffffc0000000000 RBX: ffff88802b876000 RCX: 0000000000000000
[   23.576144] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   23.576402] RBP: ffff888011c6fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   23.576660] R10: ffff88800aad88df R11: 5f6466756d6d6f69 R12: 0000000000000000
[   23.576917] R13: ffffffff85cc0180 R14: ffff8880111b7660 R15: ffffffff87070ae0
[   23.577175] FS:  00007f72ae2b5600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   23.577465] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   23.577675] CR2: 0000000020000080 CR3: 0000000017232000 CR4: 0000000000750ef0
[   23.577934] PKRU: 55555554
[   23.578037] Call Trace:
[   23.578131]  <TASK>
[   23.578214]  ? show_regs+0x6e/0x80
[   23.578350]  ? die_addr+0x45/0xb0
[   23.578482]  ? exc_general_protection+0x159/0x250
[   23.578666]  ? asm_exc_general_protection+0x2b/0x30
[   23.578858]  ? sysfs_remove_link_from_group+0x21/0x90
[   23.579047]  ? sysfs_remove_link_from_group+0x37/0x90
[   23.579234]  ? sysfs_remove_link_from_group+0x21/0x90
[   23.579420]  iommu_device_unlink+0x85/0xd0
[   23.579573]  iommu_deinit_device+0x11f/0x4c0
[   23.579735]  __iommu_group_remove_device+0x26b/0x300
[   23.579921]  iommu_group_remove_device+0x8a/0xb0
[   23.580093]  iommufd_test+0x1f1a/0x2d10
[   23.580236]  ? __pfx_lock_release+0x10/0x10
[   23.580393]  ? __pfx_lock_acquire+0x10/0x10
[   23.580551]  ? __pfx_iommufd_test+0x10/0x10
[   23.580707]  ? __sanitizer_cov_trace_const_cmp8+0x1c/0x30
[   23.580906]  iommufd_fops_ioctl+0x377/0x510
[   23.581064]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   23.581239]  ? trace_hardirqs_on+0x26/0x120
[   23.581397]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   23.581625]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   23.581807]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   23.582005]  ? security_file_ioctl+0x9d/0xd0
[   23.582167]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   23.582342]  __x64_sys_ioctl+0x1b9/0x230
[   23.582490]  do_syscall_64+0x3c/0x90
[   23.582627]  entry_SYSCALL_64_after_hwframe+0x6e/0xd8
[   23.582822] RIP: 0033:0x7f72ae03ee5d
[   23.582959] Code: ff c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d 93 af 1b 00 f7 d8 64 89 01 48
[   23.583602] RSP: 002b:00007ffcf9c5aac8 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   23.583870] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f72ae03ee5d
[   23.584121] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   23.584373] RBP: 00007ffcf9c5aae0 R08: 0000000000000800 R09: 0000000000000800
[   23.584624] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffcf9c5abf8
[   23.584875] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f72ae2f6000
[   23.585131]  </TASK>
[   23.585215] Modules linked in:
[   23.585400] ---[ end trace 0000000000000000 ]---
[   23.585571] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   23.585782] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   23.586437] RSP: 0018:ffff88802457fba8 EFLAGS: 00010206
[   23.586636] RAX: dffffc0000000000 RBX: ffff888014f9b000 RCX: 0000000000000000
[   23.586905] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   23.587190] RBP: ffff88802457fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   23.587489] R10: ffff88800aad88df R11: 0000000000000001 R12: 0000000000000000
[   23.587747] R13: ffffffff85cc0180 R14: ffff8880109b6ac0 R15: ffffffff87070ae0
[   23.588059] FS:  00007f72ae2b5600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   23.588351] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   23.588582] CR2: 0000000020000080 CR3: 0000000017232000 CR4: 0000000000750ef0
[   23.588874] PKRU: 55555554
[   23.589235] ------------[ cut here ]------------
[   23.589450] WARNING: CPU: 0 PID: 1003 at drivers/iommu/iommufd/main.c:258 iommufd_fops_release+0x2a3/0x300
[   23.589800] Modules linked in:
[   23.589930] CPU: 0 PID: 1003 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   23.590281] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   23.590766] RIP: 0010:iommufd_fops_release+0x2a3/0x300
[   23.590981] Code: 45 d0 65 48 2b 04 25 28 00 00 00 75 54 48 81 c4 88 00 00 00 31 c0 5b 41 5c 41 5d 41 5e 41 5f 5d c3 cc cc cc cc e8 ad 4f 0a fe <0f> 0b eb a6 e8 74 23 67 fe e9 f6 fe ff ff 48 89 85 50 ff ff ff e8
[   23.591694] RSP: 0018:ffff888011c6fc00 EFLAGS: 00010293
[   23.591887] RAX: 0000000000000000 RBX: ffff88800fe06508 RCX: 0000000000000000
[   23.592147] RDX: ffff888011e42500 RSI: ffffffff835563e3 RDI: ffffffff86702b40
[   23.592454] RBP: ffff888011c6fcb0 R08: 0000000000000000 R09: fffffbfff0eb2644
[   23.592712] R10: ffffffff87593227 R11: ffff88800f7eda00 R12: 0000000000000000
[   23.593025] R13: ffff88801345a198 R14: ffff888011c6fc48 R15: ffffffff83556140
[   23.593283] FS:  0000000000000000(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   23.593594] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   23.593839] CR2: 0000000020000080 CR3: 000000000687e000 CR4: 0000000000750ef0
[   23.594098] PKRU: 55555554
[   23.594201] Call Trace:
[   23.594294]  <TASK>
[   23.594377]  ? show_regs+0x6e/0x80
[   23.594510]  ? __warn+0xef/0x340
[   23.594645]  ? report_bug+0x25e/0x4b0
[   23.594791]  ? iommufd_fops_release+0x2a3/0x300
[   23.594964]  ? report_bug+0x2cb/0x4b0
[   23.595108]  ? handle_bug+0x46/0x90
[   23.595240]  ? exc_invalid_op+0x1d/0x50
[   23.595383]  ? asm_exc_invalid_op+0x1f/0x30
[   23.595537]  ? __pfx_iommufd_fops_release+0x10/0x10
[   23.595718]  ? iommufd_fops_release+0x2a3/0x300
[   23.595887]  ? iommufd_fops_release+0x2a3/0x300
[   23.596056]  ? __pfx_iommufd_fops_release+0x10/0x10
[   23.596235]  ? rcu_is_watching+0x19/0xc0
[   23.596384]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   23.596581]  ? __pfx_iommufd_fops_release+0x10/0x10
[   23.596760]  __fput+0x424/0xaf0
[   23.596885]  ____fput+0x1f/0x30
[   23.597007]  task_work_run+0x19d/0x2b0
[   23.597148]  ? __pfx_task_work_run+0x10/0x10
[   23.597307]  ? __sanitizer_cov_trace_const_cmp1+0x1e/0x30
[   23.597503]  ? switch_task_namespaces+0xa9/0xe0
[   23.597672]  do_exit+0xac9/0x2790
[   23.597799]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   23.598025]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   23.598205]  ? __pfx_do_exit+0x10/0x10
[   23.598347]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   23.598542]  ? security_file_ioctl+0x9d/0xd0
[   23.598714]  make_task_dead+0x182/0x3c0
[   23.598860]  rewind_stack_and_make_dead+0x17/0x20
[   23.599034] RIP: 0033:0x7f72ae03ee5d
[   23.599167] Code: Unable to access opcode bytes at 0x7f72ae03ee33.
[   23.599385] RSP: 002b:00007ffcf9c5aac8 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   23.599653] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f72ae03ee5d
[   23.599905] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   23.600157] RBP: 00007ffcf9c5aae0 R08: 0000000000000800 R09: 0000000000000800
[   23.600409] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffcf9c5abf8
[   23.600660] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f72ae2f6000
[   23.600917]  </TASK>
[   23.601000] irq event stamp: 0
[   23.601114] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   23.601337] hardirqs last disabled at (0): [<ffffffff8122f2d1>] copy_process+0x1c51/0x7140
[   23.601630] softirqs last  enabled at (0): [<ffffffff8122f312>] copy_process+0x1c92/0x7140
[   23.601922] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   23.602144] ---[ end trace 0000000000000000 ]---
[   23.604679] iommufd_mock iommufd_mock280: Adding to iommu group 280
[   23.604947] iommufd_mock iommufd_mock280: Removing from iommu group 280
[   23.605200] general protection fault, probably for non-canonical address 0xdffffc0000000006: 0000 [#281] PREEMPT SMP KASAN NOPTI
[   23.605603] KASAN: null-ptr-deref in range [0x0000000000000030-0x0000000000000037]
[   23.605869] CPU: 0 PID: 1004 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   23.606179] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   23.606576] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   23.606792] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   23.607442] RSP: 0018:ffff888010667ba8 EFLAGS: 00010206
[   23.607630] RAX: dffffc0000000000 RBX: ffff88802b875000 RCX: 0000000000000000
[   23.607882] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   23.608134] RBP: ffff888010667bc0 R08: 0000000000000001 R09: ffffed100155b11b
[   23.608386] R10: ffff88800aad88df R11: 5f6466756d6d6f69 R12: 0000000000000000
[   23.608638] R13: ffffffff85cc0180 R14: ffff8880111b7860 R15: ffffffff87070ae0
[   23.608891] FS:  00007f02d6349600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   23.609175] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   23.609381] CR2: 0000000020000080 CR3: 0000000017232000 CR4: 0000000000750ef0
[   23.609634] PKRU: 55555554
[   23.609736] Call Trace:
[   23.609827]  <TASK>
[   23.609908]  ? show_regs+0x6e/0x80
[   23.610041]  ? die_addr+0x45/0xb0
[   23.610172]  ? exc_general_protection+0x159/0x250
[   23.610352]  ? asm_exc_general_protection+0x2b/0x30
[   23.610534]  ? sysfs_remove_link_from_group+0x21/0x90
[   23.610721]  ? sysfs_remove_link_from_group+0x37/0x90
[   23.610927]  ? sysfs_remove_link_from_group+0x21/0x90
[   23.611115]  iommu_device_unlink+0x85/0xd0
[   23.611268]  iommu_deinit_device+0x11f/0x4c0
[   23.611431]  __iommu_group_remove_device+0x26b/0x300
[   23.611617]  iommu_group_remove_device+0x8a/0xb0
[   23.611789]  iommufd_test+0x1f1a/0x2d10
[   23.611932]  ? __pfx_lock_release+0x10/0x10
[   23.612089]  ? __pfx_lock_acquire+0x10/0x10
[   23.612247]  ? __pfx_iommufd_test+0x10/0x10
[   23.612403]  ? __sanitizer_cov_trace_const_cmp8+0x1c/0x30
[   23.612603]  iommufd_fops_ioctl+0x377/0x510
[   23.612760]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   23.612935]  ? trace_hardirqs_on+0x26/0x120
[   23.613094]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   23.613321]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   23.613504]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   23.613702]  ? security_file_ioctl+0x9d/0xd0
[   23.613864]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   23.614039]  __x64_sys_ioctl+0x1b9/0x230
[   23.614186]  do_syscall_64+0x3c/0x90
[   23.614321]  entry_SYSCALL_64_after_hwframe+0x6e/0xd8
[   23.614505] RIP: 0033:0x7f02d603ee5d
[   23.614639] Code: ff c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d 93 af 1b 00 f7 d8 64 89 01 48
[   23.615309] RSP: 002b:00007ffcd62d21d8 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   23.615578] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f02d603ee5d
[   23.615831] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   23.616083] RBP: 00007ffcd62d21f0 R08: 0000000000000800 R09: 0000000000000800
[   23.616338] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffcd62d2308
[   23.616590] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f02d638a000
[   23.616847]  </TASK>
[   23.616930] Modules linked in:
[   23.617105] ---[ end trace 0000000000000000 ]---
[   23.617273] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   23.617481] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   23.618124] RSP: 0018:ffff88802457fba8 EFLAGS: 00010206
[   23.618313] RAX: dffffc0000000000 RBX: ffff888014f9b000 RCX: 0000000000000000
[   23.618566] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   23.618877] RBP: ffff88802457fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   23.619132] R10: ffff88800aad88df R11: 0000000000000001 R12: 0000000000000000
[   23.619385] R13: ffffffff85cc0180 R14: ffff8880109b6ac0 R15: ffffffff87070ae0
[   23.619637] FS:  00007f02d6349600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   23.619921] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   23.620127] CR2: 0000000020000080 CR3: 0000000017232000 CR4: 0000000000750ef0
[   23.620379] PKRU: 55555554
[   23.620774] ------------[ cut here ]------------
[   23.620943] WARNING: CPU: 0 PID: 1004 at drivers/iommu/iommufd/main.c:258 iommufd_fops_release+0x2a3/0x300
[   23.621285] Modules linked in:
[   23.621400] CPU: 0 PID: 1004 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   23.621710] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   23.622108] RIP: 0010:iommufd_fops_release+0x2a3/0x300
[   23.622296] Code: 45 d0 65 48 2b 04 25 28 00 00 00 75 54 48 81 c4 88 00 00 00 31 c0 5b 41 5c 41 5d 41 5e 41 5f 5d c3 cc cc cc cc e8 ad 4f 0a fe <0f> 0b eb a6 e8 74 23 67 fe e9 f6 fe ff ff 48 89 85 50 ff ff ff e8
[   23.623042] RSP: 0018:ffff888010667c00 EFLAGS: 00010293
[   23.623232] RAX: 0000000000000000 RBX: ffff88800fe06208 RCX: 0000000000000000
[   23.623484] RDX: ffff888013a02500 RSI: ffffffff835563e3 RDI: ffffffff86702b40
[   23.623736] RBP: ffff888010667cb0 R08: 0000000000000000 R09: fffffbfff0eb2644
[   23.623988] R10: ffffffff87593227 R11: ffff8880111ee200 R12: 0000000000000000
[   23.624241] R13: ffff8880114dc698 R14: ffff888010667c48 R15: ffffffff83556140
[   23.624493] FS:  0000000000000000(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   23.624778] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   23.624984] CR2: 0000000020000080 CR3: 000000000687e000 CR4: 0000000000750ef0
[   23.625237] PKRU: 55555554
[   23.625338] Call Trace:
[   23.625430]  <TASK>
[   23.625511]  ? show_regs+0x6e/0x80
[   23.625643]  ? __warn+0xef/0x340
[   23.625768]  ? report_bug+0x25e/0x4b0
[   23.625907]  ? iommufd_fops_release+0x2a3/0x300
[   23.626075]  ? report_bug+0x2cb/0x4b0
[   23.626216]  ? handle_bug+0x46/0x90
[   23.626348]  ? exc_invalid_op+0x1d/0x50
[   23.626492]  ? asm_exc_invalid_op+0x1f/0x30
[   23.626654]  ? __pfx_iommufd_fops_release+0x10/0x10
[   23.626841]  ? iommufd_fops_release+0x2a3/0x300
[   23.627012]  ? iommufd_fops_release+0x2a3/0x300
[   23.627182]  ? __pfx_iommufd_fops_release+0x10/0x10
[   23.627361]  ? rcu_is_watching+0x19/0xc0
[   23.627510]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   23.627707]  ? __pfx_iommufd_fops_release+0x10/0x10
[   23.627887]  __fput+0x424/0xaf0
[   23.628012]  ____fput+0x1f/0x30
[   23.628133]  task_work_run+0x19d/0x2b0
[   23.628276]  ? __pfx_task_work_run+0x10/0x10
[   23.628435]  ? __sanitizer_cov_trace_const_cmp1+0x1e/0x30
[   23.628632]  ? switch_task_namespaces+0xa9/0xe0
[   23.628801]  do_exit+0xac9/0x2790
[   23.628928]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   23.629154]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   23.629335]  ? __pfx_do_exit+0x10/0x10
[   23.629476]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   23.629672]  ? security_file_ioctl+0x9d/0xd0
[   23.629834]  make_task_dead+0x182/0x3c0
[   23.629979]  rewind_stack_and_make_dead+0x17/0x20
[   23.630154] RIP: 0033:0x7f02d603ee5d
[   23.630287] Code: Unable to access opcode bytes at 0x7f02d603ee33.
[   23.630505] RSP: 002b:00007ffcd62d21d8 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   23.630781] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f02d603ee5d
[   23.631034] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   23.631286] RBP: 00007ffcd62d21f0 R08: 0000000000000800 R09: 0000000000000800
[   23.631538] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffcd62d2308
[   23.631789] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f02d638a000
[   23.632047]  </TASK>
[   23.632131] irq event stamp: 0
[   23.632244] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   23.632468] hardirqs last disabled at (0): [<ffffffff8122f2d1>] copy_process+0x1c51/0x7140
[   23.632760] softirqs last  enabled at (0): [<ffffffff8122f312>] copy_process+0x1c92/0x7140
[   23.633053] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   23.633276] ---[ end trace 0000000000000000 ]---
[   23.635935] iommufd_mock iommufd_mock281: Adding to iommu group 281
[   23.636187] iommufd_mock iommufd_mock281: Removing from iommu group 281
[   23.636444] general protection fault, probably for non-canonical address 0xdffffc0000000006: 0000 [#282] PREEMPT SMP KASAN NOPTI
[   23.636854] KASAN: null-ptr-deref in range [0x0000000000000030-0x0000000000000037]
[   23.637120] CPU: 0 PID: 1005 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   23.637430] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   23.637827] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   23.638058] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   23.638713] RSP: 0018:ffff888013bc7ba8 EFLAGS: 00010206
[   23.638912] RAX: dffffc0000000000 RBX: ffff88802b877000 RCX: 0000000000000000
[   23.639165] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   23.639417] RBP: ffff888013bc7bc0 R08: 0000000000000001 R09: ffffed100155b11b
[   23.639669] R10: ffff88800aad88df R11: 5f6466756d6d6f69 R12: 0000000000000000
[   23.639921] R13: ffffffff85cc0180 R14: ffff8880111b7160 R15: ffffffff87070ae0
[   23.640173] FS:  00007f95531f9600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   23.640458] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   23.640664] CR2: 0000000020000080 CR3: 0000000017232000 CR4: 0000000000750ef0
[   23.640918] PKRU: 55555554
[   23.641019] Call Trace:
[   23.641111]  <TASK>
[   23.641192]  ? show_regs+0x6e/0x80
[   23.641326]  ? die_addr+0x45/0xb0
[   23.641456]  ? exc_general_protection+0x159/0x250
[   23.641636]  ? asm_exc_general_protection+0x2b/0x30
[   23.641818]  ? sysfs_remove_link_from_group+0x21/0x90
[   23.642010]  ? sysfs_remove_link_from_group+0x37/0x90
[   23.642206]  ? sysfs_remove_link_from_group+0x21/0x90
[   23.642399]  iommu_device_unlink+0x85/0xd0
[   23.642555]  iommu_deinit_device+0x11f/0x4c0
[   23.642721]  __iommu_group_remove_device+0x26b/0x300
[   23.642934]  iommu_group_remove_device+0x8a/0xb0
[   23.643108]  iommufd_test+0x1f1a/0x2d10
[   23.643251]  ? __pfx_lock_release+0x10/0x10
[   23.643407]  ? __pfx_lock_acquire+0x10/0x10
[   23.643564]  ? __pfx_iommufd_test+0x10/0x10
[   23.643720]  ? __sanitizer_cov_trace_const_cmp8+0x1c/0x30
[   23.643919]  iommufd_fops_ioctl+0x377/0x510
[   23.644077]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   23.644251]  ? trace_hardirqs_on+0x26/0x120
[   23.644412]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   23.644642]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   23.644824]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   23.645021]  ? security_file_ioctl+0x9d/0xd0
[   23.645183]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   23.645357]  __x64_sys_ioctl+0x1b9/0x230
[   23.645504]  do_syscall_64+0x3c/0x90
[   23.645639]  entry_SYSCALL_64_after_hwframe+0x6e/0xd8
[   23.645823] RIP: 0033:0x7f9552e3ee5d
[   23.645956] Code: ff c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d 93 af 1b 00 f7 d8 64 89 01 48
[   23.646598] RSP: 002b:00007ffcaac39f28 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   23.646871] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f9552e3ee5d
[   23.647123] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   23.647375] RBP: 00007ffcaac39f40 R08: 0000000000000800 R09: 0000000000000800
[   23.647626] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffcaac3a058
[   23.647878] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f955323a000
[   23.648134]  </TASK>
[   23.648218] Modules linked in:
[   23.648354] ---[ end trace 0000000000000000 ]---
[   23.648522] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   23.648729] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   23.649373] RSP: 0018:ffff88802457fba8 EFLAGS: 00010206
[   23.649562] RAX: dffffc0000000000 RBX: ffff888014f9b000 RCX: 0000000000000000
[   23.649814] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   23.650066] RBP: ffff88802457fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   23.650318] R10: ffff88800aad88df R11: 0000000000000001 R12: 0000000000000000
[   23.650570] R13: ffffffff85cc0180 R14: ffff8880109b6ac0 R15: ffffffff87070ae0
[   23.650844] FS:  00007f95531f9600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   23.651134] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   23.651340] CR2: 0000000020000080 CR3: 0000000017232000 CR4: 0000000000750ef0
[   23.651593] PKRU: 55555554
[   23.651951] ------------[ cut here ]------------
[   23.652120] WARNING: CPU: 0 PID: 1005 at drivers/iommu/iommufd/main.c:258 iommufd_fops_release+0x2a3/0x300
[   23.652461] Modules linked in:
[   23.652575] CPU: 0 PID: 1005 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   23.652885] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   23.653282] RIP: 0010:iommufd_fops_release+0x2a3/0x300
[   23.653470] Code: 45 d0 65 48 2b 04 25 28 00 00 00 75 54 48 81 c4 88 00 00 00 31 c0 5b 41 5c 41 5d 41 5e 41 5f 5d c3 cc cc cc cc e8 ad 4f 0a fe <0f> 0b eb a6 e8 74 23 67 fe e9 f6 fe ff ff 48 89 85 50 ff ff ff e8
[   23.654113] RSP: 0018:ffff888013bc7c00 EFLAGS: 00010293
[   23.654302] RAX: 0000000000000000 RBX: ffff88800fe06d08 RCX: 0000000000000000
[   23.654554] RDX: ffff8880121dca00 RSI: ffffffff835563e3 RDI: ffffffff86702b40
[   23.654850] RBP: ffff888013bc7cb0 R08: 0000000000000000 R09: fffffbfff0eb2644
[   23.655108] R10: ffffffff87593227 R11: ffff8880135c1800 R12: 0000000000000000
[   23.655361] R13: ffff888012e15098 R14: ffff888013bc7c48 R15: ffffffff83556140
[   23.655613] FS:  0000000000000000(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   23.655897] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   23.656103] CR2: 0000000020000080 CR3: 000000000687e000 CR4: 0000000000750ef0
[   23.656356] PKRU: 55555554
[   23.656457] Call Trace:
[   23.656549]  <TASK>
[   23.656629]  ? show_regs+0x6e/0x80
[   23.656760]  ? __warn+0xef/0x340
[   23.656884]  ? report_bug+0x25e/0x4b0
[   23.657024]  ? iommufd_fops_release+0x2a3/0x300
[   23.657193]  ? report_bug+0x2cb/0x4b0
[   23.657334]  ? handle_bug+0x46/0x90
[   23.657467]  ? exc_invalid_op+0x1d/0x50
[   23.657610]  ? asm_exc_invalid_op+0x1f/0x30
[   23.657765]  ? __pfx_iommufd_fops_release+0x10/0x10
[   23.657947]  ? iommufd_fops_release+0x2a3/0x300
[   23.658116]  ? iommufd_fops_release+0x2a3/0x300
[   23.658287]  ? __pfx_iommufd_fops_release+0x10/0x10
[   23.658467]  ? rcu_is_watching+0x19/0xc0
[   23.658623]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   23.658826]  ? __pfx_iommufd_fops_release+0x10/0x10
[   23.659013]  __fput+0x424/0xaf0
[   23.659138]  ____fput+0x1f/0x30
[   23.659260]  task_work_run+0x19d/0x2b0
[   23.659402]  ? __pfx_task_work_run+0x10/0x10
[   23.659561]  ? __sanitizer_cov_trace_const_cmp1+0x1e/0x30
[   23.659757]  ? switch_task_namespaces+0xa9/0xe0
[   23.659927]  do_exit+0xac9/0x2790
[   23.660054]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   23.660280]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   23.660461]  ? __pfx_do_exit+0x10/0x10
[   23.660602]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   23.660798]  ? security_file_ioctl+0x9d/0xd0
[   23.660960]  make_task_dead+0x182/0x3c0
[   23.661105]  rewind_stack_and_make_dead+0x17/0x20
[   23.661279] RIP: 0033:0x7f9552e3ee5d
[   23.661412] Code: Unable to access opcode bytes at 0x7f9552e3ee33.
[   23.661630] RSP: 002b:00007ffcaac39f28 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   23.661899] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f9552e3ee5d
[   23.662151] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   23.662402] RBP: 00007ffcaac39f40 R08: 0000000000000800 R09: 0000000000000800
[   23.662660] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffcaac3a058
[   23.662922] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f955323a000
[   23.663181]  </TASK>
[   23.663265] irq event stamp: 0
[   23.663378] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   23.663601] hardirqs last disabled at (0): [<ffffffff8122f2d1>] copy_process+0x1c51/0x7140
[   23.663893] softirqs last  enabled at (0): [<ffffffff8122f312>] copy_process+0x1c92/0x7140
[   23.664186] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   23.664409] ---[ end trace 0000000000000000 ]---
[   23.667103] iommufd_mock iommufd_mock282: Adding to iommu group 282
[   23.667366] iommufd_mock iommufd_mock282: Removing from iommu group 282
[   23.667629] general protection fault, probably for non-canonical address 0xdffffc0000000006: 0000 [#283] PREEMPT SMP KASAN NOPTI
[   23.668033] KASAN: null-ptr-deref in range [0x0000000000000030-0x0000000000000037]
[   23.668300] CPU: 0 PID: 1006 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   23.668609] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   23.669006] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   23.669214] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   23.669858] RSP: 0018:ffff88802475fba8 EFLAGS: 00010206
[   23.670047] RAX: dffffc0000000000 RBX: ffff88802b874000 RCX: 0000000000000000
[   23.670300] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   23.670551] RBP: ffff88802475fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   23.670825] R10: ffff88800aad88df R11: 5f6466756d6d6f69 R12: 0000000000000000
[   23.671083] R13: ffffffff85cc0180 R14: ffff8880111b7840 R15: ffffffff87070ae0
[   23.671335] FS:  00007f53b97cc600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   23.671619] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   23.671825] CR2: 0000000020000080 CR3: 0000000017232000 CR4: 0000000000750ef0
[   23.672077] PKRU: 55555554
[   23.672178] Call Trace:
[   23.672270]  <TASK>
[   23.672351]  ? show_regs+0x6e/0x80
[   23.672484]  ? die_addr+0x45/0xb0
[   23.672614]  ? exc_general_protection+0x159/0x250
[   23.672793]  ? asm_exc_general_protection+0x2b/0x30
[   23.672976]  ? sysfs_remove_link_from_group+0x21/0x90
[   23.673162]  ? sysfs_remove_link_from_group+0x37/0x90
[   23.673348]  ? sysfs_remove_link_from_group+0x21/0x90
[   23.673534]  iommu_device_unlink+0x85/0xd0
[   23.673687]  iommu_deinit_device+0x11f/0x4c0
[   23.673849]  __iommu_group_remove_device+0x26b/0x300
[   23.674034]  iommu_group_remove_device+0x8a/0xb0
[   23.674207]  iommufd_test+0x1f1a/0x2d10
[   23.674350]  ? __pfx_lock_release+0x10/0x10
[   23.674507]  ? __pfx_lock_acquire+0x10/0x10
[   23.674664]  ? __pfx_iommufd_test+0x10/0x10
[   23.674827]  ? __sanitizer_cov_trace_const_cmp8+0x1c/0x30
[   23.675030]  iommufd_fops_ioctl+0x377/0x510
[   23.675188]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   23.675362]  ? trace_hardirqs_on+0x26/0x120
[   23.675520]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   23.675763]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   23.675946]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   23.676143]  ? security_file_ioctl+0x9d/0xd0
[   23.676305]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   23.676479]  __x64_sys_ioctl+0x1b9/0x230
[   23.676626]  do_syscall_64+0x3c/0x90
[   23.676760]  entry_SYSCALL_64_after_hwframe+0x6e/0xd8
[   23.676944] RIP: 0033:0x7f53b943ee5d
[   23.677077] Code: ff c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d 93 af 1b 00 f7 d8 64 89 01 48
[   23.677718] RSP: 002b:00007ffccdb043d8 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   23.677986] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f53b943ee5d
[   23.678238] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   23.678489] RBP: 00007ffccdb043f0 R08: 0000000000000800 R09: 0000000000000800
[   23.678741] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffccdb04508
[   23.679022] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f53b980d000
[   23.679279]  </TASK>
[   23.679362] Modules linked in:
[   23.679560] ---[ end trace 0000000000000000 ]---
[   23.679729] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   23.679936] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   23.680579] RSP: 0018:ffff88802457fba8 EFLAGS: 00010206
[   23.680767] RAX: dffffc0000000000 RBX: ffff888014f9b000 RCX: 0000000000000000
[   23.681020] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   23.681272] RBP: ffff88802457fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   23.681524] R10: ffff88800aad88df R11: 0000000000000001 R12: 0000000000000000
[   23.681775] R13: ffffffff85cc0180 R14: ffff8880109b6ac0 R15: ffffffff87070ae0
[   23.682027] FS:  00007f53b97cc600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   23.682311] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   23.682516] CR2: 0000000020000080 CR3: 0000000017232000 CR4: 0000000000750ef0
[   23.682778] PKRU: 55555554
[   23.683167] ------------[ cut here ]------------
[   23.683334] WARNING: CPU: 0 PID: 1006 at drivers/iommu/iommufd/main.c:258 iommufd_fops_release+0x2a3/0x300
[   23.683675] Modules linked in:
[   23.683790] CPU: 0 PID: 1006 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   23.684099] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   23.684494] RIP: 0010:iommufd_fops_release+0x2a3/0x300
[   23.684682] Code: 45 d0 65 48 2b 04 25 28 00 00 00 75 54 48 81 c4 88 00 00 00 31 c0 5b 41 5c 41 5d 41 5e 41 5f 5d c3 cc cc cc cc e8 ad 4f 0a fe <0f> 0b eb a6 e8 74 23 67 fe e9 f6 fe ff ff 48 89 85 50 ff ff ff e8
[   23.685324] RSP: 0018:ffff88802475fc00 EFLAGS: 00010293
[   23.685512] RAX: 0000000000000000 RBX: ffff88800fe06108 RCX: 0000000000000000
[   23.685763] RDX: ffff8880121d8000 RSI: ffffffff835563e3 RDI: ffffffff86702b40
[   23.686014] RBP: ffff88802475fcb0 R08: 0000000000000000 R09: fffffbfff0eb2644
[   23.686266] R10: ffffffff87593227 R11: ffff88800f527000 R12: 0000000000000000
[   23.686518] R13: ffff888012e14198 R14: ffff88802475fc48 R15: ffffffff83556140
[   23.686782] FS:  0000000000000000(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   23.687067] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   23.687273] CR2: 0000000020000080 CR3: 000000000687e000 CR4: 0000000000750ef0
[   23.687526] PKRU: 55555554
[   23.687627] Call Trace:
[   23.687718]  <TASK>
[   23.687799]  ? show_regs+0x6e/0x80
[   23.687929]  ? __warn+0xef/0x340
[   23.688053]  ? report_bug+0x25e/0x4b0
[   23.688192]  ? iommufd_fops_release+0x2a3/0x300
[   23.688361]  ? report_bug+0x2cb/0x4b0
[   23.688501]  ? handle_bug+0x46/0x90
[   23.688633]  ? exc_invalid_op+0x1d/0x50
[   23.688777]  ? asm_exc_invalid_op+0x1f/0x30
[   23.688931]  ? __pfx_iommufd_fops_release+0x10/0x10
[   23.689112]  ? iommufd_fops_release+0x2a3/0x300
[   23.689280]  ? iommufd_fops_release+0x2a3/0x300
[   23.689450]  ? __pfx_iommufd_fops_release+0x10/0x10
[   23.689629]  ? rcu_is_watching+0x19/0xc0
[   23.689777]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   23.689974]  ? __pfx_iommufd_fops_release+0x10/0x10
[   23.690153]  __fput+0x424/0xaf0
[   23.690278]  ____fput+0x1f/0x30
[   23.690400]  task_work_run+0x19d/0x2b0
[   23.690542]  ? __pfx_task_work_run+0x10/0x10
[   23.690708]  ? __sanitizer_cov_trace_const_cmp1+0x1e/0x30
[   23.690913]  ? switch_task_namespaces+0xa9/0xe0
[   23.691082]  do_exit+0xac9/0x2790
[   23.691210]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   23.691436]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   23.691617]  ? __pfx_do_exit+0x10/0x10
[   23.691757]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   23.691953]  ? security_file_ioctl+0x9d/0xd0
[   23.692115]  make_task_dead+0x182/0x3c0
[   23.692259]  rewind_stack_and_make_dead+0x17/0x20
[   23.692434] RIP: 0033:0x7f53b943ee5d
[   23.692566] Code: Unable to access opcode bytes at 0x7f53b943ee33.
[   23.692784] RSP: 002b:00007ffccdb043d8 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   23.693053] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f53b943ee5d
[   23.693304] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   23.693555] RBP: 00007ffccdb043f0 R08: 0000000000000800 R09: 0000000000000800
[   23.693807] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffccdb04508
[   23.694058] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f53b980d000
[   23.694315]  </TASK>
[   23.694398] irq event stamp: 0
[   23.694512] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   23.694741] hardirqs last disabled at (0): [<ffffffff8122f2d1>] copy_process+0x1c51/0x7140
[   23.695036] softirqs last  enabled at (0): [<ffffffff8122f312>] copy_process+0x1c92/0x7140
[   23.695329] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   23.695551] ---[ end trace 0000000000000000 ]---
[   23.698236] iommufd_mock iommufd_mock283: Adding to iommu group 283
[   23.698488] iommufd_mock iommufd_mock283: Removing from iommu group 283
[   23.698865] general protection fault, probably for non-canonical address 0xdffffc0000000006: 0000 [#284] PREEMPT SMP KASAN NOPTI
[   23.699280] KASAN: null-ptr-deref in range [0x0000000000000030-0x0000000000000037]
[   23.699552] CPU: 0 PID: 1007 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   23.699866] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   23.700263] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   23.700471] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   23.701114] RSP: 0018:ffff88800b69fba8 EFLAGS: 00010206
[   23.701303] RAX: dffffc0000000000 RBX: ffff88802b871000 RCX: 0000000000000000
[   23.701555] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   23.701806] RBP: ffff88800b69fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   23.702058] R10: ffff88800aad88df R11: 5f6466756d6d6f69 R12: 0000000000000000
[   23.702310] R13: ffffffff85cc0180 R14: ffff8880111b72e0 R15: ffffffff87070ae0
[   23.702562] FS:  00007f1c15198600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   23.702887] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   23.703096] CR2: 0000000020000080 CR3: 0000000017232000 CR4: 0000000000750ef0
[   23.703349] PKRU: 55555554
[   23.703450] Call Trace:
[   23.703541]  <TASK>
[   23.703622]  ? show_regs+0x6e/0x80
[   23.703755]  ? die_addr+0x45/0xb0
[   23.703886]  ? exc_general_protection+0x159/0x250
[   23.704065]  ? asm_exc_general_protection+0x2b/0x30
[   23.704248]  ? sysfs_remove_link_from_group+0x21/0x90
[   23.704435]  ? sysfs_remove_link_from_group+0x37/0x90
[   23.704622]  ? sysfs_remove_link_from_group+0x21/0x90
[   23.704808]  iommu_device_unlink+0x85/0xd0
[   23.704962]  iommu_deinit_device+0x11f/0x4c0
[   23.705125]  __iommu_group_remove_device+0x26b/0x300
[   23.705311]  iommu_group_remove_device+0x8a/0xb0
[   23.705484]  iommufd_test+0x1f1a/0x2d10
[   23.705627]  ? __pfx_lock_release+0x10/0x10
[   23.705784]  ? __pfx_lock_acquire+0x10/0x10
[   23.705942]  ? __pfx_iommufd_test+0x10/0x10
[   23.706099]  ? __sanitizer_cov_trace_const_cmp8+0x1c/0x30
[   23.706299]  iommufd_fops_ioctl+0x377/0x510
[   23.706457]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   23.706632]  ? trace_hardirqs_on+0x26/0x120
[   23.706800]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   23.707037]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   23.707220]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   23.707418]  ? security_file_ioctl+0x9d/0xd0
[   23.707580]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   23.707755]  __x64_sys_ioctl+0x1b9/0x230
[   23.707902]  do_syscall_64+0x3c/0x90
[   23.708036]  entry_SYSCALL_64_after_hwframe+0x6e/0xd8
[   23.708221] RIP: 0033:0x7f1c14e3ee5d
[   23.708355] Code: ff c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d 93 af 1b 00 f7 d8 64 89 01 48
[   23.708998] RSP: 002b:00007ffd10f4e198 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   23.709268] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f1c14e3ee5d
[   23.709520] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   23.709773] RBP: 00007ffd10f4e1b0 R08: 0000000000000800 R09: 0000000000000800
[   23.710025] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffd10f4e2c8
[   23.710277] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f1c151d9000
[   23.710535]  </TASK>
[   23.710619] Modules linked in:
[   23.710766] ---[ end trace 0000000000000000 ]---
[   23.710940] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   23.711150] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   23.711794] RSP: 0018:ffff88802457fba8 EFLAGS: 00010206
[   23.711984] RAX: dffffc0000000000 RBX: ffff888014f9b000 RCX: 0000000000000000
[   23.712236] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   23.712488] RBP: ffff88802457fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   23.712740] R10: ffff88800aad88df R11: 0000000000000001 R12: 0000000000000000
[   23.712992] R13: ffffffff85cc0180 R14: ffff8880109b6ac0 R15: ffffffff87070ae0
[   23.713244] FS:  00007f1c15198600(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   23.713528] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   23.713734] CR2: 0000000020000080 CR3: 0000000017232000 CR4: 0000000000750ef0
[   23.713987] PKRU: 55555554
[   23.714347] ------------[ cut here ]------------
[   23.714514] WARNING: CPU: 0 PID: 1007 at drivers/iommu/iommufd/main.c:258 iommufd_fops_release+0x2a3/0x300
[   23.714915] Modules linked in:
[   23.715033] CPU: 0 PID: 1007 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   23.715342] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   23.715739] RIP: 0010:iommufd_fops_release+0x2a3/0x300
[   23.715927] Code: 45 d0 65 48 2b 04 25 28 00 00 00 75 54 48 81 c4 88 00 00 00 31 c0 5b 41 5c 41 5d 41 5e 41 5f 5d c3 cc cc cc cc e8 ad 4f 0a fe <0f> 0b eb a6 e8 74 23 67 fe e9 f6 fe ff ff 48 89 85 50 ff ff ff e8
[   23.716570] RSP: 0018:ffff88800b69fc00 EFLAGS: 00010293
[   23.716758] RAX: 0000000000000000 RBX: ffff88800fe06408 RCX: 0000000000000000
[   23.717010] RDX: ffff88801475a500 RSI: ffffffff835563e3 RDI: ffffffff86702b40
[   23.717262] RBP: ffff88800b69fcb0 R08: 0000000000000000 R09: fffffbfff0eb2644
[   23.717514] R10: ffffffff87593227 R11: ffff888018942200 R12: 0000000000000000
[   23.717765] R13: ffff88801355ae18 R14: ffff88800b69fc48 R15: ffffffff83556140
[   23.718018] FS:  0000000000000000(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   23.718302] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   23.718508] CR2: 0000000020000080 CR3: 000000000687e000 CR4: 0000000000750ef0
[   23.718770] PKRU: 55555554
[   23.718878] Call Trace:
[   23.718974]  <TASK>
[   23.719057]  ? show_regs+0x6e/0x80
[   23.719188]  ? __warn+0xef/0x340
[   23.719313]  ? report_bug+0x25e/0x4b0
[   23.719453]  ? iommufd_fops_release+0x2a3/0x300
[   23.719621]  ? report_bug+0x2cb/0x4b0
[   23.719762]  ? handle_bug+0x46/0x90
[   23.719895]  ? exc_invalid_op+0x1d/0x50
[   23.720038]  ? asm_exc_invalid_op+0x1f/0x30
[   23.720192]  ? __pfx_iommufd_fops_release+0x10/0x10
[   23.720374]  ? iommufd_fops_release+0x2a3/0x300
[   23.720543]  ? iommufd_fops_release+0x2a3/0x300
[   23.720713]  ? __pfx_iommufd_fops_release+0x10/0x10
[   23.720893]  ? rcu_is_watching+0x19/0xc0
[   23.721042]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   23.721240]  ? __pfx_iommufd_fops_release+0x10/0x10
[   23.721419]  __fput+0x424/0xaf0
[   23.721544]  ____fput+0x1f/0x30
[   23.721666]  task_work_run+0x19d/0x2b0
[   23.721808]  ? __pfx_task_work_run+0x10/0x10
[   23.721967]  ? __sanitizer_cov_trace_const_cmp1+0x1e/0x30
[   23.722164]  ? switch_task_namespaces+0xa9/0xe0
[   23.722334]  do_exit+0xac9/0x2790
[   23.722460]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   23.722695]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   23.722895]  ? __pfx_do_exit+0x10/0x10
[   23.723038]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   23.723235]  ? security_file_ioctl+0x9d/0xd0
[   23.723396]  make_task_dead+0x182/0x3c0
[   23.723541]  rewind_stack_and_make_dead+0x17/0x20
[   23.723715] RIP: 0033:0x7f1c14e3ee5d
[   23.723848] Code: Unable to access opcode bytes at 0x7f1c14e3ee33.
[   23.724066] RSP: 002b:00007ffd10f4e198 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   23.724334] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f1c14e3ee5d
[   23.724585] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   23.724836] RBP: 00007ffd10f4e1b0 R08: 0000000000000800 R09: 0000000000000800
[   23.725088] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffd10f4e2c8
[   23.725340] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f1c151d9000
[   23.725596]  </TASK>
[   23.725680] irq event stamp: 0
[   23.725793] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   23.726015] hardirqs last disabled at (0): [<ffffffff8122f2d1>] copy_process+0x1c51/0x7140
[   23.726307] softirqs last  enabled at (0): [<ffffffff8122f312>] copy_process+0x1c92/0x7140
[   23.726604] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   23.726832] ---[ end trace 0000000000000000 ]---
[   23.729256] iommufd_mock iommufd_mock284: Adding to iommu group 284
[   23.729514] iommufd_mock iommufd_mock284: Removing from iommu group 284
[   23.729772] general protection fault, probably for non-canonical address 0xdffffc0000000006: 0000 [#285] PREEMPT SMP KASAN NOPTI
[   23.730184] KASAN: null-ptr-deref in range [0x0000000000000030-0x0000000000000037]
[   23.730457] CPU: 1 PID: 1008 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   23.730782] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   23.731223] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   23.731437] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   23.732096] RSP: 0018:ffff888013bc7ba8 EFLAGS: 00010206
[   23.732289] RAX: dffffc0000000000 RBX: ffff88802440c000 RCX: 0000000000000000
[   23.732548] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   23.732806] RBP: ffff888013bc7bc0 R08: 0000000000000001 R09: ffffed100155b11b
[   23.733064] R10: ffff88800aad88df R11: 5f6466756d6d6f69 R12: 0000000000000000
[   23.733322] R13: ffffffff85cc0180 R14: ffff8880231a8ea0 R15: ffffffff87070ae0
[   23.733581] FS:  00007f819073e600(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
[   23.733872] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   23.734083] CR2: 0000000020000080 CR3: 0000000012402000 CR4: 0000000000750ee0
[   23.734343] PKRU: 55555554
[   23.734448] Call Trace:
[   23.734542]  <TASK>
[   23.734626]  ? show_regs+0x6e/0x80
[   23.734766]  ? die_addr+0x45/0xb0
[   23.734902]  ? exc_general_protection+0x159/0x250
[   23.735085]  ? asm_exc_general_protection+0x2b/0x30
[   23.735272]  ? sysfs_remove_link_from_group+0x21/0x90
[   23.735462]  ? sysfs_remove_link_from_group+0x37/0x90
[   23.735653]  ? sysfs_remove_link_from_group+0x21/0x90
[   23.735843]  iommu_device_unlink+0x85/0xd0
[   23.736000]  iommu_deinit_device+0x11f/0x4c0
[   23.736165]  __iommu_group_remove_device+0x26b/0x300
[   23.736355]  iommu_group_remove_device+0x8a/0xb0
[   23.736532]  iommufd_test+0x1f1a/0x2d10
[   23.736677]  ? __pfx_lock_release+0x10/0x10
[   23.736837]  ? __pfx_lock_acquire+0x10/0x10
[   23.736999]  ? __pfx_iommufd_test+0x10/0x10
[   23.737159]  ? __sanitizer_cov_trace_const_cmp8+0x1c/0x30
[   23.737363]  iommufd_fops_ioctl+0x377/0x510
[   23.737524]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   23.737703]  ? trace_hardirqs_on+0x26/0x120
[   23.737865]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   23.738100]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   23.738298]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   23.738502]  ? security_file_ioctl+0x9d/0xd0
[   23.738668]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   23.738852]  __x64_sys_ioctl+0x1b9/0x230
[   23.739005]  do_syscall_64+0x3c/0x90
[   23.739142]  entry_SYSCALL_64_after_hwframe+0x6e/0xd8
[   23.739331] RIP: 0033:0x7f819043ee5d
[   23.739467] Code: ff c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d 93 af 1b 00 f7 d8 64 89 01 48
[   23.740125] RSP: 002b:00007ffe752bc748 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   23.740399] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f819043ee5d
[   23.740657] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   23.740914] RBP: 00007ffe752bc760 R08: 0000000000000800 R09: 0000000000000800
[   23.741172] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffe752bc878
[   23.741430] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f819077f000
[   23.741693]  </TASK>
[   23.741779] Modules linked in:
[   23.741936] ---[ end trace 0000000000000000 ]---
[   23.742107] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   23.742318] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   23.743019] RSP: 0018:ffff88802457fba8 EFLAGS: 00010206
[   23.743213] RAX: dffffc0000000000 RBX: ffff888014f9b000 RCX: 0000000000000000
[   23.743471] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   23.743728] RBP: ffff88802457fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   23.743986] R10: ffff88800aad88df R11: 0000000000000001 R12: 0000000000000000
[   23.744243] R13: ffffffff85cc0180 R14: ffff8880109b6ac0 R15: ffffffff87070ae0
[   23.744501] FS:  00007f819073e600(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
[   23.744817] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   23.745027] CR2: 0000000020000080 CR3: 0000000012402000 CR4: 0000000000750ee0
[   23.745286] PKRU: 55555554
[   23.745680] ------------[ cut here ]------------
[   23.745853] WARNING: CPU: 1 PID: 1008 at drivers/iommu/iommufd/main.c:258 iommufd_fops_release+0x2a3/0x300
[   23.746202] Modules linked in:
[   23.746319] CPU: 1 PID: 1008 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   23.746720] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   23.747136] RIP: 0010:iommufd_fops_release+0x2a3/0x300
[   23.747329] Code: 45 d0 65 48 2b 04 25 28 00 00 00 75 54 48 81 c4 88 00 00 00 31 c0 5b 41 5c 41 5d 41 5e 41 5f 5d c3 cc cc cc cc e8 ad 4f 0a fe <0f> 0b eb a6 e8 74 23 67 fe e9 f6 fe ff ff 48 89 85 50 ff ff ff e8
[   23.747986] RSP: 0018:ffff888013bc7c00 EFLAGS: 00010293
[   23.748178] RAX: 0000000000000000 RBX: ffff88801248a708 RCX: 0000000000000000
[   23.748436] RDX: ffff888011e40000 RSI: ffffffff835563e3 RDI: ffffffff86702b48
[   23.748693] RBP: ffff888013bc7cb0 R08: 0000000000000000 R09: fffffbfff0eb2644
[   23.748950] R10: ffffffff87593227 R11: ffff88800f508000 R12: 0000000000000000
[   23.749207] R13: ffff888013253d18 R14: ffff888013bc7c48 R15: ffffffff83556140
[   23.749464] FS:  0000000000000000(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
[   23.749754] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   23.749964] CR2: 0000000020000080 CR3: 000000000687e000 CR4: 0000000000750ee0
[   23.750223] PKRU: 55555554
[   23.750326] Call Trace:
[   23.750420]  <TASK>
[   23.750503]  ? show_regs+0x6e/0x80
[   23.750641]  ? __warn+0xef/0x340
[   23.750769]  ? report_bug+0x25e/0x4b0
[   23.750938]  ? iommufd_fops_release+0x2a3/0x300
[   23.751112]  ? report_bug+0x2cb/0x4b0
[   23.751252]  ? handle_bug+0x46/0x90
[   23.751384]  ? exc_invalid_op+0x1d/0x50
[   23.751527]  ? asm_exc_invalid_op+0x1f/0x30
[   23.751681]  ? __pfx_iommufd_fops_release+0x10/0x10
[   23.751863]  ? iommufd_fops_release+0x2a3/0x300
[   23.752031]  ? iommufd_fops_release+0x2a3/0x300
[   23.752200]  ? __pfx_iommufd_fops_release+0x10/0x10
[   23.752379]  ? rcu_is_watching+0x19/0xc0
[   23.752526]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   23.752723]  ? __pfx_iommufd_fops_release+0x10/0x10
[   23.752901]  __fput+0x424/0xaf0
[   23.753025]  ____fput+0x1f/0x30
[   23.753147]  task_work_run+0x19d/0x2b0
[   23.753288]  ? __pfx_task_work_run+0x10/0x10
[   23.753447]  ? __sanitizer_cov_trace_const_cmp1+0x1e/0x30
[   23.753642]  ? switch_task_namespaces+0xa9/0xe0
[   23.753811]  do_exit+0xac9/0x2790
[   23.753937]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   23.754163]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   23.754342]  ? __pfx_do_exit+0x10/0x10
[   23.754482]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   23.754684]  ? security_file_ioctl+0x9d/0xd0
[   23.754847]  make_task_dead+0x182/0x3c0
[   23.754991]  rewind_stack_and_make_dead+0x17/0x20
[   23.755164] RIP: 0033:0x7f819043ee5d
[   23.755297] Code: Unable to access opcode bytes at 0x7f819043ee33.
[   23.755515] RSP: 002b:00007ffe752bc748 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   23.755782] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f819043ee5d
[   23.756033] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   23.756284] RBP: 00007ffe752bc760 R08: 0000000000000800 R09: 0000000000000800
[   23.756535] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffe752bc878
[   23.756786] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f819077f000
[   23.757042]  </TASK>
[   23.757126] irq event stamp: 0
[   23.757239] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   23.757461] hardirqs last disabled at (0): [<ffffffff8122f2d1>] copy_process+0x1c51/0x7140
[   23.757752] softirqs last  enabled at (0): [<ffffffff8122f312>] copy_process+0x1c92/0x7140
[   23.758043] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   23.758266] ---[ end trace 0000000000000000 ]---
[   23.760752] iommufd_mock iommufd_mock285: Adding to iommu group 285
[   23.761007] iommufd_mock iommufd_mock285: Removing from iommu group 285
[   23.761264] general protection fault, probably for non-canonical address 0xdffffc0000000006: 0000 [#286] PREEMPT SMP KASAN NOPTI
[   23.761674] KASAN: null-ptr-deref in range [0x0000000000000030-0x0000000000000037]
[   23.761945] CPU: 1 PID: 1009 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   23.762260] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   23.762665] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   23.762887] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   23.763544] RSP: 0018:ffff888013fe7ba8 EFLAGS: 00010206
[   23.763736] RAX: dffffc0000000000 RBX: ffff888024409000 RCX: 0000000000000000
[   23.763993] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   23.764249] RBP: ffff888013fe7bc0 R08: 0000000000000001 R09: ffffed100155b11b
[   23.764505] R10: ffff88800aad88df R11: 5f6466756d6d6f69 R12: 0000000000000000
[   23.764762] R13: ffffffff85cc0180 R14: ffff8880231a84c0 R15: ffffffff87070ae0
[   23.765018] FS:  00007f5b81f5c600(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
[   23.765307] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   23.765516] CR2: 0000000020000080 CR3: 0000000012402000 CR4: 0000000000750ee0
[   23.765774] PKRU: 55555554
[   23.765877] Call Trace:
[   23.765970]  <TASK>
[   23.766052]  ? show_regs+0x6e/0x80
[   23.766188]  ? die_addr+0x45/0xb0
[   23.766320]  ? exc_general_protection+0x159/0x250
[   23.766502]  ? asm_exc_general_protection+0x2b/0x30
[   23.766687]  ? sysfs_remove_link_from_group+0x21/0x90
[   23.766904]  ? sysfs_remove_link_from_group+0x37/0x90
[   23.767100]  ? sysfs_remove_link_from_group+0x21/0x90
[   23.767289]  iommu_device_unlink+0x85/0xd0
[   23.767445]  iommu_deinit_device+0x11f/0x4c0
[   23.767610]  __iommu_group_remove_device+0x26b/0x300
[   23.767798]  iommu_group_remove_device+0x8a/0xb0
[   23.767974]  iommufd_test+0x1f1a/0x2d10
[   23.768119]  ? __pfx_lock_release+0x10/0x10
[   23.768279]  ? __pfx_lock_acquire+0x10/0x10
[   23.768439]  ? __pfx_iommufd_test+0x10/0x10
[   23.768597]  ? __sanitizer_cov_trace_const_cmp8+0x1c/0x30
[   23.768800]  iommufd_fops_ioctl+0x377/0x510
[   23.768960]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   23.769138]  ? trace_hardirqs_on+0x26/0x120
[   23.769299]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   23.769530]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   23.769716]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   23.769916]  ? security_file_ioctl+0x9d/0xd0
[   23.770081]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   23.770259]  __x64_sys_ioctl+0x1b9/0x230
[   23.770409]  do_syscall_64+0x3c/0x90
[   23.770546]  entry_SYSCALL_64_after_hwframe+0x6e/0xd8
[   23.770733] RIP: 0033:0x7f5b81c3ee5d
[   23.770875] Code: ff c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d 93 af 1b 00 f7 d8 64 89 01 48
[   23.771531] RSP: 002b:00007ffc95dfde78 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   23.771803] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f5b81c3ee5d
[   23.772060] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   23.772316] RBP: 00007ffc95dfde90 R08: 0000000000000800 R09: 0000000000000800
[   23.772572] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffc95dfdfa8
[   23.772828] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f5b81f9d000
[   23.773089]  </TASK>
[   23.773174] Modules linked in:
[   23.773447] ---[ end trace 0000000000000000 ]---
[   23.773619] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   23.773829] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   23.774504] RSP: 0018:ffff88802457fba8 EFLAGS: 00010206
[   23.774706] RAX: dffffc0000000000 RBX: ffff888014f9b000 RCX: 0000000000000000
[   23.774964] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   23.775331] RBP: ffff88802457fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   23.775583] R10: ffff88800aad88df R11: 0000000000000001 R12: 0000000000000000
[   23.775834] R13: ffffffff85cc0180 R14: ffff8880109b6ac0 R15: ffffffff87070ae0
[   23.776085] FS:  00007f5b81f5c600(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
[   23.776368] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   23.776573] CR2: 0000000020000080 CR3: 0000000012402000 CR4: 0000000000750ee0
[   23.776826] PKRU: 55555554
[   23.777186] ------------[ cut here ]------------
[   23.777356] WARNING: CPU: 1 PID: 1009 at drivers/iommu/iommufd/main.c:258 iommufd_fops_release+0x2a3/0x300
[   23.777704] Modules linked in:
[   23.777820] CPU: 1 PID: 1009 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   23.778136] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   23.778539] RIP: 0010:iommufd_fops_release+0x2a3/0x300
[   23.778763] Code: 45 d0 65 48 2b 04 25 28 00 00 00 75 54 48 81 c4 88 00 00 00 31 c0 5b 41 5c 41 5d 41 5e 41 5f 5d c3 cc cc cc cc e8 ad 4f 0a fe <0f> 0b eb a6 e8 74 23 67 fe e9 f6 fe ff ff 48 89 85 50 ff ff ff e8
[   23.779416] RSP: 0018:ffff888013fe7c00 EFLAGS: 00010293
[   23.779606] RAX: 0000000000000000 RBX: ffff88801248a408 RCX: 0000000000000000
[   23.779858] RDX: ffff888014580000 RSI: ffffffff835563e3 RDI: ffffffff86702b48
[   23.780109] RBP: ffff888013fe7cb0 R08: 0000000000000000 R09: fffffbfff0eb2644
[   23.780360] R10: ffffffff87593227 R11: ffff888013a0d400 R12: 0000000000000000
[   23.780611] R13: ffff888013291818 R14: ffff888013fe7c48 R15: ffffffff83556140
[   23.780862] FS:  0000000000000000(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
[   23.781145] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   23.781350] CR2: 0000000020000080 CR3: 000000000687e000 CR4: 0000000000750ee0
[   23.781602] PKRU: 55555554
[   23.781702] Call Trace:
[   23.781794]  <TASK>
[   23.781875]  ? show_regs+0x6e/0x80
[   23.782005]  ? __warn+0xef/0x340
[   23.782129]  ? report_bug+0x25e/0x4b0
[   23.782268]  ? iommufd_fops_release+0x2a3/0x300
[   23.782436]  ? report_bug+0x2cb/0x4b0
[   23.782624]  ? handle_bug+0x46/0x90
[   23.782760]  ? exc_invalid_op+0x1d/0x50
[   23.782904]  ? asm_exc_invalid_op+0x1f/0x30
[   23.783059]  ? __pfx_iommufd_fops_release+0x10/0x10
[   23.783242]  ? iommufd_fops_release+0x2a3/0x300
[   23.783412]  ? iommufd_fops_release+0x2a3/0x300
[   23.783582]  ? __pfx_iommufd_fops_release+0x10/0x10
[   23.783762]  ? rcu_is_watching+0x19/0xc0
[   23.783910]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   23.784107]  ? __pfx_iommufd_fops_release+0x10/0x10
[   23.784286]  __fput+0x424/0xaf0
[   23.784411]  ____fput+0x1f/0x30
[   23.784532]  task_work_run+0x19d/0x2b0
[   23.784674]  ? __pfx_task_work_run+0x10/0x10
[   23.784833]  ? __sanitizer_cov_trace_const_cmp1+0x1e/0x30
[   23.785029]  ? switch_task_namespaces+0xa9/0xe0
[   23.785198]  do_exit+0xac9/0x2790
[   23.785324]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   23.785550]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   23.785730]  ? __pfx_do_exit+0x10/0x10
[   23.785870]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   23.786066]  ? security_file_ioctl+0x9d/0xd0
[   23.786228]  make_task_dead+0x182/0x3c0
[   23.786373]  rewind_stack_and_make_dead+0x17/0x20
[   23.786547] RIP: 0033:0x7f5b81c3ee5d
[   23.786688] Code: Unable to access opcode bytes at 0x7f5b81c3ee33.
[   23.786910] RSP: 002b:00007ffc95dfde78 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   23.787180] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f5b81c3ee5d
[   23.787434] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   23.787690] RBP: 00007ffc95dfde90 R08: 0000000000000800 R09: 0000000000000800
[   23.787941] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffc95dfdfa8
[   23.788192] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f5b81f9d000
[   23.788448]  </TASK>
[   23.788531] irq event stamp: 0
[   23.788644] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   23.788867] hardirqs last disabled at (0): [<ffffffff8122f2d1>] copy_process+0x1c51/0x7140
[   23.789160] softirqs last  enabled at (0): [<ffffffff8122f312>] copy_process+0x1c92/0x7140
[   23.789451] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   23.789673] ---[ end trace 0000000000000000 ]---
[   23.792521] iommufd_mock iommufd_mock286: Adding to iommu group 286
[   23.792778] iommufd_mock iommufd_mock286: Removing from iommu group 286
[   23.793036] general protection fault, probably for non-canonical address 0xdffffc0000000006: 0000 [#287] PREEMPT SMP KASAN NOPTI
[   23.793449] KASAN: null-ptr-deref in range [0x0000000000000030-0x0000000000000037]
[   23.793723] CPU: 1 PID: 1010 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   23.794041] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   23.794448] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   23.794663] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   23.795328] RSP: 0018:ffff888013f97ba8 EFLAGS: 00010206
[   23.795520] RAX: dffffc0000000000 RBX: ffff88802440b000 RCX: 0000000000000000
[   23.795776] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   23.796032] RBP: ffff888013f97bc0 R08: 0000000000000001 R09: ffffed100155b11b
[   23.796290] R10: ffff88800aad88df R11: 5f6466756d6d6f69 R12: 0000000000000000
[   23.796549] R13: ffffffff85cc0180 R14: ffff8880231a8f00 R15: ffffffff87070ae0
[   23.796805] FS:  00007fcfe423e600(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
[   23.797094] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   23.797304] CR2: 0000000020000080 CR3: 0000000012402000 CR4: 0000000000750ee0
[   23.797561] PKRU: 55555554
[   23.797664] Call Trace:
[   23.797757]  <TASK>
[   23.797839]  ? show_regs+0x6e/0x80
[   23.797974]  ? die_addr+0x45/0xb0
[   23.798106]  ? exc_general_protection+0x159/0x250
[   23.798288]  ? asm_exc_general_protection+0x2b/0x30
[   23.798473]  ? sysfs_remove_link_from_group+0x21/0x90
[   23.798686]  ? sysfs_remove_link_from_group+0x37/0x90
[   23.798880]  ? sysfs_remove_link_from_group+0x21/0x90
[   23.799069]  iommu_device_unlink+0x85/0xd0
[   23.799225]  iommu_deinit_device+0x11f/0x4c0
[   23.799389]  __iommu_group_remove_device+0x26b/0x300
[   23.799578]  iommu_group_remove_device+0x8a/0xb0
[   23.799754]  iommufd_test+0x1f1a/0x2d10
[   23.799899]  ? __pfx_lock_release+0x10/0x10
[   23.800058]  ? __pfx_lock_acquire+0x10/0x10
[   23.800218]  ? __pfx_iommufd_test+0x10/0x10
[   23.800377]  ? __sanitizer_cov_trace_const_cmp8+0x1c/0x30
[   23.800580]  iommufd_fops_ioctl+0x377/0x510
[   23.800740]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   23.800917]  ? trace_hardirqs_on+0x26/0x120
[   23.801078]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   23.801309]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   23.801494]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   23.801695]  ? security_file_ioctl+0x9d/0xd0
[   23.801859]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   23.802037]  __x64_sys_ioctl+0x1b9/0x230
[   23.802187]  do_syscall_64+0x3c/0x90
[   23.802323]  entry_SYSCALL_64_after_hwframe+0x6e/0xd8
[   23.802510] RIP: 0033:0x7fcfe403ee5d
[   23.802665] Code: ff c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d 93 af 1b 00 f7 d8 64 89 01 48
[   23.803326] RSP: 002b:00007ffe769d4f58 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   23.803599] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007fcfe403ee5d
[   23.803856] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   23.804112] RBP: 00007ffe769d4f70 R08: 0000000000000800 R09: 0000000000000800
[   23.804369] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffe769d5088
[   23.804625] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007fcfe427f000
[   23.804886]  </TASK>
[   23.804971] Modules linked in:
[   23.805227] ---[ end trace 0000000000000000 ]---
[   23.805399] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   23.805611] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   23.806268] RSP: 0018:ffff88802457fba8 EFLAGS: 00010206
[   23.806460] RAX: dffffc0000000000 RBX: ffff888014f9b000 RCX: 0000000000000000
[   23.806724] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   23.806984] RBP: ffff88802457fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   23.807243] R10: ffff88800aad88df R11: 0000000000000001 R12: 0000000000000000
[   23.807501] R13: ffffffff85cc0180 R14: ffff8880109b6ac0 R15: ffffffff87070ae0
[   23.807759] FS:  00007fcfe423e600(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
[   23.808050] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   23.808260] CR2: 0000000020000080 CR3: 0000000012402000 CR4: 0000000000750ee0
[   23.808521] PKRU: 55555554
[   23.808878] ------------[ cut here ]------------
[   23.809090] WARNING: CPU: 1 PID: 1010 at drivers/iommu/iommufd/main.c:258 iommufd_fops_release+0x2a3/0x300
[   23.809519] Modules linked in:
[   23.809639] CPU: 1 PID: 1010 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   23.809958] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   23.810377] RIP: 0010:iommufd_fops_release+0x2a3/0x300
[   23.810629] Code: 45 d0 65 48 2b 04 25 28 00 00 00 75 54 48 81 c4 88 00 00 00 31 c0 5b 41 5c 41 5d 41 5e 41 5f 5d c3 cc cc cc cc e8 ad 4f 0a fe <0f> 0b eb a6 e8 74 23 67 fe e9 f6 fe ff ff 48 89 85 50 ff ff ff e8
[   23.811295] RSP: 0018:ffff888013f97c00 EFLAGS: 00010293
[   23.811504] RAX: 0000000000000000 RBX: ffff88801248aa08 RCX: 0000000000000000
[   23.811799] RDX: ffff888012c30000 RSI: ffffffff835563e3 RDI: ffffffff86702b48
[   23.812058] RBP: ffff888013f97cb0 R08: 0000000000000000 R09: fffffbfff0eb2644
[   23.812339] R10: ffffffff87593227 R11: ffff888012f18000 R12: 0000000000000000
[   23.812622] R13: ffff888013290698 R14: ffff888013f97c48 R15: ffffffff83556140
[   23.812881] FS:  0000000000000000(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
[   23.813241] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   23.813453] CR2: 0000000020000080 CR3: 000000000687e000 CR4: 0000000000750ee0
[   23.813721] PKRU: 55555554
[   23.813849] Call Trace:
[   23.813968]  <TASK>
[   23.814052]  ? show_regs+0x6e/0x80
[   23.814186]  ? __warn+0xef/0x340
[   23.814314]  ? report_bug+0x25e/0x4b0
[   23.814464]  ? iommufd_fops_release+0x2a3/0x300
[   23.814710]  ? report_bug+0x2cb/0x4b0
[   23.814862]  ? handle_bug+0x46/0x90
[   23.815000]  ? exc_invalid_op+0x1d/0x50
[   23.815148]  ? asm_exc_invalid_op+0x1f/0x30
[   23.815316]  ? __pfx_iommufd_fops_release+0x10/0x10
[   23.815549]  ? iommufd_fops_release+0x2a3/0x300
[   23.815722]  ? iommufd_fops_release+0x2a3/0x300
[   23.815897]  ? __pfx_iommufd_fops_release+0x10/0x10
[   23.816081]  ? rcu_is_watching+0x19/0xc0
[   23.816233]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   23.816436]  ? __pfx_iommufd_fops_release+0x10/0x10
[   23.816629]  __fput+0x424/0xaf0
[   23.816785]  ____fput+0x1f/0x30
[   23.816921]  task_work_run+0x19d/0x2b0
[   23.817070]  ? __pfx_task_work_run+0x10/0x10
[   23.817237]  ? __sanitizer_cov_trace_const_cmp1+0x1e/0x30
[   23.817493]  ? switch_task_namespaces+0xa9/0xe0
[   23.817669]  do_exit+0xac9/0x2790
[   23.817800]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   23.818039]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   23.818275]  ? __pfx_do_exit+0x10/0x10
[   23.818423]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   23.818638]  ? security_file_ioctl+0x9d/0xd0
[   23.818814]  make_task_dead+0x182/0x3c0
[   23.818963]  rewind_stack_and_make_dead+0x17/0x20
[   23.819151] RIP: 0033:0x7fcfe403ee5d
[   23.819333] Code: Unable to access opcode bytes at 0x7fcfe403ee33.
[   23.819560] RSP: 002b:00007ffe769d4f58 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   23.819842] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007fcfe403ee5d
[   23.820155] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   23.820414] RBP: 00007ffe769d4f70 R08: 0000000000000800 R09: 0000000000000800
[   23.820708] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffe769d5088
[   23.820992] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007fcfe427f000
[   23.821262]  </TASK>
[   23.821361] irq event stamp: 0
[   23.821523] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   23.821757] hardirqs last disabled at (0): [<ffffffff8122f2d1>] copy_process+0x1c51/0x7140
[   23.822064] softirqs last  enabled at (0): [<ffffffff8122f312>] copy_process+0x1c92/0x7140
[   23.822433] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   23.822674] ---[ end trace 0000000000000000 ]---
[   23.825562] iommufd_mock iommufd_mock287: Adding to iommu group 287
[   23.825825] iommufd_mock iommufd_mock287: Removing from iommu group 287
[   23.826092] general protection fault, probably for non-canonical address 0xdffffc0000000006: 0000 [#288] PREEMPT SMP KASAN NOPTI
[   23.826517] KASAN: null-ptr-deref in range [0x0000000000000030-0x0000000000000037]
[   23.826871] CPU: 1 PID: 1011 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   23.827199] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   23.827680] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   23.827901] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   23.828638] RSP: 0018:ffff888013fe7ba8 EFLAGS: 00010206
[   23.828837] RAX: dffffc0000000000 RBX: ffff88802440a000 RCX: 0000000000000000
[   23.829156] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   23.829422] RBP: ffff888013fe7bc0 R08: 0000000000000001 R09: ffffed100155b11b
[   23.829688] R10: ffff88800aad88df R11: 5f6466756d6d6f69 R12: 0000000000000000
[   23.830008] R13: ffffffff85cc0180 R14: ffff8880231a88e0 R15: ffffffff87070ae0
[   23.830274] FS:  00007f93273dd600(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
[   23.830629] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   23.830850] CR2: 0000000020000080 CR3: 000000000fe46000 CR4: 0000000000750ee0
[   23.831118] PKRU: 55555554
[   23.831232] Call Trace:
[   23.831373]  <TASK>
[   23.831462]  ? show_regs+0x6e/0x80
[   23.831601]  ? die_addr+0x45/0xb0
[   23.831737]  ? exc_general_protection+0x159/0x250
[   23.831924]  ? asm_exc_general_protection+0x2b/0x30
[   23.832176]  ? sysfs_remove_link_from_group+0x21/0x90
[   23.832372]  ? sysfs_remove_link_from_group+0x37/0x90
[   23.832565]  ? sysfs_remove_link_from_group+0x21/0x90
[   23.832772]  iommu_device_unlink+0x85/0xd0
[   23.832960]  iommu_deinit_device+0x11f/0x4c0
[   23.833128]  __iommu_group_remove_device+0x26b/0x300
[   23.833321]  iommu_group_remove_device+0x8a/0xb0
[   23.833528]  iommufd_test+0x1f1a/0x2d10
[   23.833693]  ? __pfx_lock_release+0x10/0x10
[   23.833855]  ? __pfx_lock_acquire+0x10/0x10
[   23.834019]  ? __pfx_iommufd_test+0x10/0x10
[   23.834187]  ? __sanitizer_cov_trace_const_cmp8+0x1c/0x30
[   23.834444]  iommufd_fops_ioctl+0x377/0x510
[   23.834611]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   23.834796]  ? trace_hardirqs_on+0x26/0x120
[   23.834969]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   23.835239]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   23.835428]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   23.835636]  ? security_file_ioctl+0x9d/0xd0
[   23.835834]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   23.836015]  __x64_sys_ioctl+0x1b9/0x230
[   23.836168]  do_syscall_64+0x3c/0x90
[   23.836308]  entry_SYSCALL_64_after_hwframe+0x6e/0xd8
[   23.836540] RIP: 0033:0x7f932703ee5d
[   23.836679] Code: ff c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d 93 af 1b 00 f7 d8 64 89 01 48
[   23.837388] RSP: 002b:00007ffd33b23fd8 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   23.837667] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f932703ee5d
[   23.837968] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   23.838231] RBP: 00007ffd33b23ff0 R08: 0000000000000800 R09: 0000000000000800
[   23.838494] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffd33b24108
[   23.838809] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f932741e000
[   23.839078]  </TASK>
[   23.839165] Modules linked in:
[   23.839321] ---[ end trace 0000000000000000 ]---
[   23.839523] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   23.839737] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   23.840403] RSP: 0018:ffff88802457fba8 EFLAGS: 00010206
[   23.840599] RAX: dffffc0000000000 RBX: ffff888014f9b000 RCX: 0000000000000000
[   23.840860] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   23.841121] RBP: ffff88802457fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   23.841383] R10: ffff88800aad88df R11: 0000000000000001 R12: 0000000000000000
[   23.841697] R13: ffffffff85cc0180 R14: ffff8880109b6ac0 R15: ffffffff87070ae0
[   23.841959] FS:  00007f93273dd600(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
[   23.842253] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   23.842499] CR2: 0000000020000080 CR3: 000000000fe46000 CR4: 0000000000750ee0
[   23.842820] PKRU: 55555554
[   23.843258] ------------[ cut here ]------------
[   23.843479] WARNING: CPU: 1 PID: 1011 at drivers/iommu/iommufd/main.c:258 iommufd_fops_release+0x2a3/0x300
[   23.843835] Modules linked in:
[   23.843954] CPU: 1 PID: 1011 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   23.844312] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   23.844736] RIP: 0010:iommufd_fops_release+0x2a3/0x300
[   23.844974] Code: 45 d0 65 48 2b 04 25 28 00 00 00 75 54 48 81 c4 88 00 00 00 31 c0 5b 41 5c 41 5d 41 5e 41 5f 5d c3 cc cc cc cc e8 ad 4f 0a fe <0f> 0b eb a6 e8 74 23 67 fe e9 f6 fe ff ff 48 89 85 50 ff ff ff e8
[   23.845686] RSP: 0018:ffff888013fe7c00 EFLAGS: 00010293
[   23.845882] RAX: 0000000000000000 RBX: ffff88801248a808 RCX: 0000000000000000
[   23.846143] RDX: ffff888014758000 RSI: ffffffff835563e3 RDI: ffffffff86702b48
[   23.846451] RBP: ffff888013fe7cb0 R08: 0000000000000000 R09: fffffbfff0eb2644
[   23.846792] R10: ffffffff87593227 R11: ffff888012eaf000 R12: 0000000000000000
[   23.847053] R13: ffff888018949318 R14: ffff888013fe7c48 R15: ffffffff83556140
[   23.847310] FS:  0000000000000000(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
[   23.847644] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   23.847854] CR2: 0000000020000080 CR3: 000000000687e000 CR4: 0000000000750ee0
[   23.848113] PKRU: 55555554
[   23.848216] Call Trace:
[   23.848328]  <TASK>
[   23.848437]  ? show_regs+0x6e/0x80
[   23.848570]  ? __warn+0xef/0x340
[   23.848696]  ? report_bug+0x25e/0x4b0
[   23.848840]  ? iommufd_fops_release+0x2a3/0x300
[   23.849029]  ? report_bug+0x2cb/0x4b0
[   23.849190]  ? handle_bug+0x46/0x90
[   23.849326]  ? exc_invalid_op+0x1d/0x50
[   23.849472]  ? asm_exc_invalid_op+0x1f/0x30
[   23.849629]  ? __pfx_iommufd_fops_release+0x10/0x10
[   23.849819]  ? iommufd_fops_release+0x2a3/0x300
[   23.850026]  ? iommufd_fops_release+0x2a3/0x300
[   23.850200]  ? __pfx_iommufd_fops_release+0x10/0x10
[   23.850383]  ? rcu_is_watching+0x19/0xc0
[   23.850571]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   23.850879]  ? __pfx_iommufd_fops_release+0x10/0x10
[   23.851067]  __fput+0x424/0xaf0
[   23.851196]  ____fput+0x1f/0x30
[   23.851320]  task_work_run+0x19d/0x2b0
[   23.851465]  ? __pfx_task_work_run+0x10/0x10
[   23.851627]  ? __sanitizer_cov_trace_const_cmp1+0x1e/0x30
[   23.851867]  ? switch_task_namespaces+0xa9/0xe0
[   23.852040]  do_exit+0xac9/0x2790
[   23.852169]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   23.852400]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   23.852624]  ? __pfx_do_exit+0x10/0x10
[   23.852767]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   23.852967]  ? security_file_ioctl+0x9d/0xd0
[   23.853140]  make_task_dead+0x182/0x3c0
[   23.853322]  rewind_stack_and_make_dead+0x17/0x20
[   23.853500] RIP: 0033:0x7f932703ee5d
[   23.853636] Code: Unable to access opcode bytes at 0x7f932703ee33.
[   23.853865] RSP: 002b:00007ffd33b23fd8 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   23.854179] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f932703ee5d
[   23.854435] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   23.854767] RBP: 00007ffd33b23ff0 R08: 0000000000000800 R09: 0000000000000800
[   23.855029] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffd33b24108
[   23.855285] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f932741e000
[   23.855547]  </TASK>
[   23.855633] irq event stamp: 0
[   23.855764] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   23.856024] hardirqs last disabled at (0): [<ffffffff8122f2d1>] copy_process+0x1c51/0x7140
[   23.856323] softirqs last  enabled at (0): [<ffffffff8122f312>] copy_process+0x1c92/0x7140
[   23.856667] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   23.856895] ---[ end trace 0000000000000000 ]---
[   23.859635] iommufd_mock iommufd_mock288: Adding to iommu group 288
[   23.859892] iommufd_mock iommufd_mock288: Removing from iommu group 288
[   23.860157] general protection fault, probably for non-canonical address 0xdffffc0000000006: 0000 [#289] PREEMPT SMP KASAN NOPTI
[   23.860628] KASAN: null-ptr-deref in range [0x0000000000000030-0x0000000000000037]
[   23.860905] CPU: 1 PID: 1012 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   23.861291] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   23.861706] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   23.861940] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   23.862659] RSP: 0018:ffff888013f97ba8 EFLAGS: 00010206
[   23.862887] RAX: dffffc0000000000 RBX: ffff888024408000 RCX: 0000000000000000
[   23.863151] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   23.863451] RBP: ffff888013f97bc0 R08: 0000000000000001 R09: ffffed100155b11b
[   23.863740] R10: ffff88800aad88df R11: 5f6466756d6d6f69 R12: 0000000000000000
[   23.864002] R13: ffffffff85cc0180 R14: ffff8880231a8a40 R15: ffffffff87070ae0
[   23.864315] FS:  00007f2c71339600(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
[   23.864613] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   23.864833] CR2: 0000000020000080 CR3: 0000000012402000 CR4: 0000000000750ee0
[   23.865135] PKRU: 55555554
[   23.865241] Call Trace:
[   23.865337]  <TASK>
[   23.865421]  ? show_regs+0x6e/0x80
[   23.865566]  ? die_addr+0x45/0xb0
[   23.865713]  ? exc_general_protection+0x159/0x250
[   23.865928]  ? asm_exc_general_protection+0x2b/0x30
[   23.866118]  ? sysfs_remove_link_from_group+0x21/0x90
[   23.866316]  ? sysfs_remove_link_from_group+0x37/0x90
[   23.866551]  ? sysfs_remove_link_from_group+0x21/0x90
[   23.866751]  iommu_device_unlink+0x85/0xd0
[   23.866934]  iommu_deinit_device+0x11f/0x4c0
[   23.867113]  __iommu_group_remove_device+0x26b/0x300
[   23.867343]  iommu_group_remove_device+0x8a/0xb0
[   23.867523]  iommufd_test+0x1f1a/0x2d10
[   23.867673]  ? __pfx_lock_release+0x10/0x10
[   23.867846]  ? __pfx_lock_acquire+0x10/0x10
[   23.868043]  ? __pfx_iommufd_test+0x10/0x10
[   23.868207]  ? __sanitizer_cov_trace_const_cmp8+0x1c/0x30
[   23.868416]  iommufd_fops_ioctl+0x377/0x510
[   23.868599]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   23.868802]  ? trace_hardirqs_on+0x26/0x120
[   23.868967]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   23.869205]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   23.869447]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   23.869654]  ? security_file_ioctl+0x9d/0xd0
[   23.869823]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   23.870012]  __x64_sys_ioctl+0x1b9/0x230
[   23.870207]  do_syscall_64+0x3c/0x90
[   23.870348]  entry_SYSCALL_64_after_hwframe+0x6e/0xd8
[   23.870541] RIP: 0033:0x7f2c7103ee5d
[   23.870682] Code: ff c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d 93 af 1b 00 f7 d8 64 89 01 48
[   23.871398] RSP: 002b:00007ffee52041b8 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   23.871723] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f2c7103ee5d
[   23.871987] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   23.872268] RBP: 00007ffee52041d0 R08: 0000000000000800 R09: 0000000000000800
[   23.872549] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffee52042e8
[   23.872813] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f2c7137a000
[   23.873134]  </TASK>
[   23.873222] Modules linked in:
[   23.873376] ---[ end trace 0000000000000000 ]---
[   23.873552] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   23.873768] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   23.874440] RSP: 0018:ffff88802457fba8 EFLAGS: 00010206
[   23.874642] RAX: dffffc0000000000 RBX: ffff888014f9b000 RCX: 0000000000000000
[   23.874904] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   23.875176] RBP: ffff88802457fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   23.875473] R10: ffff88800aad88df R11: 0000000000000001 R12: 0000000000000000
[   23.875732] R13: ffffffff85cc0180 R14: ffff8880109b6ac0 R15: ffffffff87070ae0
[   23.876038] FS:  00007f2c71339600(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
[   23.876330] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   23.876541] CR2: 0000000020000080 CR3: 0000000012402000 CR4: 0000000000750ee0
[   23.876844] PKRU: 55555554
[   23.877481] ------------[ cut here ]------------
[   23.877660] WARNING: CPU: 1 PID: 1012 at drivers/iommu/iommufd/main.c:258 iommufd_fops_release+0x2a3/0x300
[   23.878021] Modules linked in:
[   23.878142] CPU: 1 PID: 1012 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   23.878467] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   23.878950] RIP: 0010:iommufd_fops_release+0x2a3/0x300
[   23.879144] Code: 45 d0 65 48 2b 04 25 28 00 00 00 75 54 48 81 c4 88 00 00 00 31 c0 5b 41 5c 41 5d 41 5e 41 5f 5d c3 cc cc cc cc e8 ad 4f 0a fe <0f> 0b eb a6 e8 74 23 67 fe e9 f6 fe ff ff 48 89 85 50 ff ff ff e8
[   23.879797] RSP: 0018:ffff888013f97c00 EFLAGS: 00010293
[   23.879987] RAX: 0000000000000000 RBX: ffff88801248a308 RCX: 0000000000000000
[   23.880240] RDX: ffff88800fc12500 RSI: ffffffff835563e3 RDI: ffffffff86702b48
[   23.880494] RBP: ffff888013f97cb0 R08: 0000000000000000 R09: fffffbfff0eb2644
[   23.880747] R10: ffffffff87593227 R11: ffff888018950800 R12: 0000000000000000
[   23.881000] R13: ffff88800f95a698 R14: ffff888013f97c48 R15: ffffffff83556140
[   23.881253] FS:  0000000000000000(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
[   23.881539] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   23.881746] CR2: 0000000020000080 CR3: 000000000687e000 CR4: 0000000000750ee0
[   23.882002] PKRU: 55555554
[   23.882105] Call Trace:
[   23.882197]  <TASK>
[   23.882278]  ? show_regs+0x6e/0x80
[   23.882410]  ? __warn+0xef/0x340
[   23.882536]  ? report_bug+0x25e/0x4b0
[   23.882691]  ? iommufd_fops_release+0x2a3/0x300
[   23.882867]  ? report_bug+0x2cb/0x4b0
[   23.883012]  ? handle_bug+0x46/0x90
[   23.883149]  ? exc_invalid_op+0x1d/0x50
[   23.883293]  ? asm_exc_invalid_op+0x1f/0x30
[   23.883449]  ? __pfx_iommufd_fops_release+0x10/0x10
[   23.883632]  ? iommufd_fops_release+0x2a3/0x300
[   23.883802]  ? iommufd_fops_release+0x2a3/0x300
[   23.883973]  ? __pfx_iommufd_fops_release+0x10/0x10
[   23.884153]  ? rcu_is_watching+0x19/0xc0
[   23.884305]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   23.884507]  ? __pfx_iommufd_fops_release+0x10/0x10
[   23.884688]  __fput+0x424/0xaf0
[   23.884814]  ____fput+0x1f/0x30
[   23.884936]  task_work_run+0x19d/0x2b0
[   23.885079]  ? __pfx_task_work_run+0x10/0x10
[   23.885239]  ? __sanitizer_cov_trace_const_cmp1+0x1e/0x30
[   23.885436]  ? switch_task_namespaces+0xa9/0xe0
[   23.885607]  do_exit+0xac9/0x2790
[   23.885735]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   23.885963]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   23.886146]  ? __pfx_do_exit+0x10/0x10
[   23.886287]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   23.886485]  ? security_file_ioctl+0x9d/0xd0
[   23.886673]  make_task_dead+0x182/0x3c0
[   23.886850]  rewind_stack_and_make_dead+0x17/0x20
[   23.887040] RIP: 0033:0x7f2c7103ee5d
[   23.887177] Code: Unable to access opcode bytes at 0x7f2c7103ee33.
[   23.887396] RSP: 002b:00007ffee52041b8 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   23.887665] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f2c7103ee5d
[   23.887918] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   23.888171] RBP: 00007ffee52041d0 R08: 0000000000000800 R09: 0000000000000800
[   23.888459] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffee52042e8
[   23.888762] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f2c7137a000
[   23.889026]  </TASK>
[   23.889111] irq event stamp: 0
[   23.889227] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   23.889456] hardirqs last disabled at (0): [<ffffffff8122f2d1>] copy_process+0x1c51/0x7140
[   23.889754] softirqs last  enabled at (0): [<ffffffff8122f312>] copy_process+0x1c92/0x7140
[   23.890053] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   23.890281] ---[ end trace 0000000000000000 ]---
[   23.890911] systemd-journald[136]: Data hash table of /run/log/journal/938775788448454bb5b34822d5730c41/system.journal has a fill level at 75.0 (5446 of 7260 items, 4182016 file size, 767 bytes per hash table item), suggesting rotation.
[   23.891954] systemd-journald[136]: /run/log/journal/938775788448454bb5b34822d5730c41/system.journal: Journal header limits reached or header out-of-date, rotating.
[   23.893605] iommufd_mock iommufd_mock289: Adding to iommu group 289
[   23.893871] iommufd_mock iommufd_mock289: Removing from iommu group 289
[   23.894137] general protection fault, probably for non-canonical address 0xdffffc0000000006: 0000 [#290] PREEMPT SMP KASAN NOPTI
[   23.894560] KASAN: null-ptr-deref in range [0x0000000000000030-0x0000000000000037]
[   23.894847] CPU: 1 PID: 1013 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   23.895174] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   23.895591] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   23.895811] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   23.896486] RSP: 0018:ffff888013fe7ba8 EFLAGS: 00010206
[   23.896684] RAX: dffffc0000000000 RBX: ffff88802440e000 RCX: 0000000000000000
[   23.896948] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   23.897263] RBP: ffff888013fe7bc0 R08: 0000000000000001 R09: ffffed100155b11b
[   23.897527] R10: ffff88800aad88df R11: 5f6466756d6d6f69 R12: 0000000000000000
[   23.897797] R13: ffffffff85cc0180 R14: ffff8880231a86c0 R15: ffffffff87070ae0
[   23.898104] FS:  00007feb8eae3600(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
[   23.898402] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   23.898624] CR2: 0000000020000080 CR3: 000000000fe46000 CR4: 0000000000750ee0
[   23.898940] PKRU: 55555554
[   23.899046] Call Trace:
[   23.899142]  <TASK>
[   23.899226]  ? show_regs+0x6e/0x80
[   23.899375]  ? die_addr+0x45/0xb0
[   23.899548]  ? exc_general_protection+0x159/0x250
[   23.899737]  ? asm_exc_general_protection+0x2b/0x30
[   23.899928]  ? sysfs_remove_link_from_group+0x21/0x90
[   23.900143]  ? sysfs_remove_link_from_group+0x37/0x90
[   23.900363]  ? sysfs_remove_link_from_group+0x21/0x90
[   23.900559]  iommu_device_unlink+0x85/0xd0
[   23.900720]  iommu_deinit_device+0x11f/0x4c0
[   23.900928]  __iommu_group_remove_device+0x26b/0x300
[   23.901123]  iommu_group_remove_device+0x8a/0xb0
[   23.901304]  iommufd_test+0x1f1a/0x2d10
[   23.901454]  ? __pfx_lock_release+0x10/0x10
[   23.901660]  ? __pfx_lock_acquire+0x10/0x10
[   23.901825]  ? __pfx_iommufd_test+0x10/0x10
[   23.901989]  ? __sanitizer_cov_trace_const_cmp8+0x1c/0x30
[   23.902198]  iommufd_fops_ioctl+0x377/0x510
[   23.902363]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   23.902546]  ? trace_hardirqs_on+0x26/0x120
[   23.902712]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   23.902953]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   23.903144]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   23.903350]  ? security_file_ioctl+0x9d/0xd0
[   23.903520]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   23.903703]  __x64_sys_ioctl+0x1b9/0x230
[   23.903858]  do_syscall_64+0x3c/0x90
[   23.903998]  entry_SYSCALL_64_after_hwframe+0x6e/0xd8
[   23.904191] RIP: 0033:0x7feb8e83ee5d
[   23.904331] Code: ff c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d 93 af 1b 00 f7 d8 64 89 01 48
[   23.905006] RSP: 002b:00007ffe25039638 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   23.905287] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007feb8e83ee5d
[   23.905552] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   23.905816] RBP: 00007ffe25039650 R08: 0000000000000800 R09: 0000000000000800
[   23.906080] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffe25039768
[   23.906344] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007feb8eb24000
[   23.906614]  </TASK>
[   23.906701] Modules linked in:
[   23.906861] ---[ end trace 0000000000000000 ]---
[   23.907037] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   23.907253] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   23.907927] RSP: 0018:ffff88802457fba8 EFLAGS: 00010206
[   23.908155] RAX: dffffc0000000000 RBX: ffff888014f9b000 RCX: 0000000000000000
[   23.908436] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   23.908700] RBP: ffff88802457fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   23.909021] R10: ffff88800aad88df R11: 0000000000000001 R12: 0000000000000000
[   23.909286] R13: ffffffff85cc0180 R14: ffff8880109b6ac0 R15: ffffffff87070ae0
[   23.909557] FS:  00007feb8eae3600(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
[   23.909901] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   23.910117] CR2: 0000000020000080 CR3: 000000000fe46000 CR4: 0000000000750ee0
[   23.910426] PKRU: 55555554
[   23.910821] ------------[ cut here ]------------
[   23.910998] WARNING: CPU: 1 PID: 1013 at drivers/iommu/iommufd/main.c:258 iommufd_fops_release+0x2a3/0x300
[   23.911404] Modules linked in:
[   23.911524] CPU: 1 PID: 1013 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   23.911849] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   23.912311] RIP: 0010:iommufd_fops_release+0x2a3/0x300
[   23.912508] Code: 45 d0 65 48 2b 04 25 28 00 00 00 75 54 48 81 c4 88 00 00 00 31 c0 5b 41 5c 41 5d 41 5e 41 5f 5d c3 cc cc cc cc e8 ad 4f 0a fe <0f> 0b eb a6 e8 74 23 67 fe e9 f6 fe ff ff 48 89 85 50 ff ff ff e8
[   23.913181] RSP: 0018:ffff888013fe7c00 EFLAGS: 00010293
[   23.913379] RAX: 0000000000000000 RBX: ffff88801248ab08 RCX: 0000000000000000
[   23.913642] RDX: ffff88800fc10000 RSI: ffffffff835563e3 RDI: ffffffff86702b48
[   23.913906] RBP: ffff888013fe7cb0 R08: 0000000000000000 R09: fffffbfff0eb2644
[   23.914169] R10: ffffffff87593227 R11: ffff888013042200 R12: 0000000000000000
[   23.914427] R13: ffff888011a90698 R14: ffff888013fe7c48 R15: ffffffff83556140
[   23.914696] FS:  0000000000000000(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
[   23.914996] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   23.915207] CR2: 0000000020000080 CR3: 000000000687e000 CR4: 0000000000750ee0
[   23.915479] PKRU: 55555554
[   23.915622] Call Trace:
[   23.915716]  <TASK>
[   23.915799]  ? show_regs+0x6e/0x80
[   23.915933]  ? __warn+0xef/0x340
[   23.916061]  ? report_bug+0x25e/0x4b0
[   23.916211]  ? iommufd_fops_release+0x2a3/0x300
[   23.916419]  ? report_bug+0x2cb/0x4b0
[   23.916564]  ? handle_bug+0x46/0x90
[   23.916699]  ? exc_invalid_op+0x1d/0x50
[   23.916847]  ? asm_exc_invalid_op+0x1f/0x30
[   23.917060]  ? __pfx_iommufd_fops_release+0x10/0x10
[   23.917246]  ? iommufd_fops_release+0x2a3/0x300
[   23.917419]  ? iommufd_fops_release+0x2a3/0x300
[   23.917597]  ? __pfx_iommufd_fops_release+0x10/0x10
[   23.917818]  ? rcu_is_watching+0x19/0xc0
[   23.917971]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   23.918177]  ? __pfx_iommufd_fops_release+0x10/0x10
[   23.918361]  __fput+0x424/0xaf0
[   23.918489]  ____fput+0x1f/0x30
[   23.918626]  task_work_run+0x19d/0x2b0
[   23.918773]  ? __pfx_task_work_run+0x10/0x10
[   23.918937]  ? __sanitizer_cov_trace_const_cmp1+0x1e/0x30
[   23.919135]  ? switch_task_namespaces+0xa9/0xe0
[   23.919306]  do_exit+0xac9/0x2790
[   23.919435]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   23.919663]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   23.919864]  ? __pfx_do_exit+0x10/0x10
[   23.920029]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   23.920227]  ? security_file_ioctl+0x9d/0xd0
[   23.920391]  make_task_dead+0x182/0x3c0
[   23.920536]  rewind_stack_and_make_dead+0x17/0x20
[   23.920712] RIP: 0033:0x7feb8e83ee5d
[   23.920846] Code: Unable to access opcode bytes at 0x7feb8e83ee33.
[   23.921065] RSP: 002b:00007ffe25039638 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   23.921336] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007feb8e83ee5d
[   23.921590] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   23.921843] RBP: 00007ffe25039650 R08: 0000000000000800 R09: 0000000000000800
[   23.922097] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffe25039768
[   23.922350] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007feb8eb24000
[   23.922615]  </TASK>
[   23.922700] irq event stamp: 0
[   23.922817] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   23.923041] hardirqs last disabled at (0): [<ffffffff8122f2d1>] copy_process+0x1c51/0x7140
[   23.923336] softirqs last  enabled at (0): [<ffffffff8122f312>] copy_process+0x1c92/0x7140
[   23.923676] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   23.923901] ---[ end trace 0000000000000000 ]---
[   23.927169] iommufd_mock iommufd_mock290: Adding to iommu group 290
[   23.927431] iommufd_mock iommufd_mock290: Removing from iommu group 290
[   23.927691] general protection fault, probably for non-canonical address 0xdffffc0000000006: 0000 [#291] PREEMPT SMP KASAN NOPTI
[   23.928105] KASAN: null-ptr-deref in range [0x0000000000000030-0x0000000000000037]
[   23.928380] CPU: 1 PID: 1015 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   23.928698] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   23.929106] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   23.929321] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   23.930042] RSP: 0018:ffff888013bc7ba8 EFLAGS: 00010206
[   23.930236] RAX: dffffc0000000000 RBX: ffff88802440d000 RCX: 0000000000000000
[   23.930537] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   23.930803] RBP: ffff888013bc7bc0 R08: 0000000000000001 R09: ffffed100155b11b
[   23.931066] R10: ffff88800aad88df R11: 5f6466756d6d6f69 R12: 0000000000000000
[   23.931364] R13: ffffffff85cc0180 R14: ffff8880231a8480 R15: ffffffff87070ae0
[   23.931624] FS:  00007f5246f35600(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
[   23.931965] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   23.932177] CR2: 0000000020000080 CR3: 0000000012402000 CR4: 0000000000750ee0
[   23.932437] PKRU: 55555554
[   23.932551] Call Trace:
[   23.932684]  <TASK>
[   23.932767]  ? show_regs+0x6e/0x80
[   23.932904]  ? die_addr+0x45/0xb0
[   23.933038]  ? exc_general_protection+0x159/0x250
[   23.933227]  ? asm_exc_general_protection+0x2b/0x30
[   23.933450]  ? sysfs_remove_link_from_group+0x21/0x90
[   23.933641]  ? sysfs_remove_link_from_group+0x37/0x90
[   23.933833]  ? sysfs_remove_link_from_group+0x21/0x90
[   23.934070]  iommu_device_unlink+0x85/0xd0
[   23.934228]  iommu_deinit_device+0x11f/0x4c0
[   23.934394]  __iommu_group_remove_device+0x26b/0x300
[   23.934585]  iommu_group_remove_device+0x8a/0xb0
[   23.934814]  iommufd_test+0x1f1a/0x2d10
[   23.934964]  ? __pfx_lock_release+0x10/0x10
[   23.935125]  ? __pfx_lock_acquire+0x10/0x10
[   23.935287]  ? __pfx_iommufd_test+0x10/0x10
[   23.935467]  ? __sanitizer_cov_trace_const_cmp8+0x1c/0x30
[   23.935700]  iommufd_fops_ioctl+0x377/0x510
[   23.935862]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   23.936041]  ? trace_hardirqs_on+0x26/0x120
[   23.936248]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   23.936483]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   23.936670]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   23.936922]  ? security_file_ioctl+0x9d/0xd0
[   23.937088]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   23.937268]  __x64_sys_ioctl+0x1b9/0x230
[   23.937418]  do_syscall_64+0x3c/0x90
[   23.937575]  entry_SYSCALL_64_after_hwframe+0x6e/0xd8
[   23.937792] RIP: 0033:0x7f5246c3ee5d
[   23.937930] Code: ff c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d 93 af 1b 00 f7 d8 64 89 01 48
[   23.938643] RSP: 002b:00007ffdb1ebbb58 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   23.938922] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f5246c3ee5d
[   23.939210] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   23.939469] RBP: 00007ffdb1ebbb70 R08: 0000000000000800 R09: 0000000000000800
[   23.939781] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffdb1ebbc88
[   23.940041] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f5246f76000
[   23.940309]  </TASK>
[   23.940426] Modules linked in:
[   23.940581] ---[ end trace 0000000000000000 ]---
[   23.940753] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   23.940966] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   23.941690] RSP: 0018:ffff88802457fba8 EFLAGS: 00010206
[   23.941930] RAX: dffffc0000000000 RBX: ffff888014f9b000 RCX: 0000000000000000
[   23.942189] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   23.942455] RBP: ffff88802457fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   23.942766] R10: ffff88800aad88df R11: 0000000000000001 R12: 0000000000000000
[   23.943020] R13: ffffffff85cc0180 R14: ffff8880109b6ac0 R15: ffffffff87070ae0
[   23.943291] FS:  00007f5246f35600(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
[   23.943608] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   23.943820] CR2: 0000000020000080 CR3: 0000000012402000 CR4: 0000000000750ee0
[   23.944126] PKRU: 55555554
[   23.945469] ------------[ cut here ]------------
[   23.945658] WARNING: CPU: 0 PID: 1015 at drivers/iommu/iommufd/main.c:258 iommufd_fops_release+0x2a3/0x300
[   23.946018] Modules linked in:
[   23.946138] CPU: 0 PID: 1015 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   23.946463] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   23.946939] RIP: 0010:iommufd_fops_release+0x2a3/0x300
[   23.947134] Code: 45 d0 65 48 2b 04 25 28 00 00 00 75 54 48 81 c4 88 00 00 00 31 c0 5b 41 5c 41 5d 41 5e 41 5f 5d c3 cc cc cc cc e8 ad 4f 0a fe <0f> 0b eb a6 e8 74 23 67 fe e9 f6 fe ff ff 48 89 85 50 ff ff ff e8
[   23.947794] RSP: 0018:ffff888013bc7c00 EFLAGS: 00010293
[   23.947988] RAX: 0000000000000000 RBX: ffff88801248ae08 RCX: 0000000000000000
[   23.948246] RDX: ffff88800bb2a500 RSI: ffffffff835563e3 RDI: ffffffff86702b40
[   23.948505] RBP: ffff888013bc7cb0 R08: 0000000000000000 R09: fffffbfff0eb2644
[   23.948764] R10: ffffffff87593227 R11: ffff8880130ce200 R12: 0000000000000000
[   23.949022] R13: ffff8880111ed318 R14: ffff888013bc7c48 R15: ffffffff83556140
[   23.949281] FS:  0000000000000000(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
[   23.949571] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   23.949782] CR2: 00007f313ba9b000 CR3: 000000000687e000 CR4: 0000000000750ef0
[   23.950041] PKRU: 55555554
[   23.950145] Call Trace:
[   23.950239]  <TASK>
[   23.950322]  ? show_regs+0x6e/0x80
[   23.950456]  ? __warn+0xef/0x340
[   23.950598]  ? report_bug+0x25e/0x4b0
[   23.950741]  ? iommufd_fops_release+0x2a3/0x300
[   23.950920]  ? report_bug+0x2cb/0x4b0
[   23.951068]  ? handle_bug+0x46/0x90
[   23.951207]  ? exc_invalid_op+0x1d/0x50
[   23.951357]  ? asm_exc_invalid_op+0x1f/0x30
[   23.951520]  ? __pfx_iommufd_fops_release+0x10/0x10
[   23.951705]  ? iommufd_fops_release+0x2a3/0x300
[   23.951878]  ? iommufd_fops_release+0x2a3/0x300
[   23.952052]  ? __pfx_iommufd_fops_release+0x10/0x10
[   23.952237]  ? rcu_is_watching+0x19/0xc0
[   23.952389]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   23.952591]  ? __pfx_iommufd_fops_release+0x10/0x10
[   23.952775]  __fput+0x424/0xaf0
[   23.952904]  ____fput+0x1f/0x30
[   23.953029]  task_work_run+0x19d/0x2b0
[   23.953175]  ? __pfx_task_work_run+0x10/0x10
[   23.953338]  ? __sanitizer_cov_trace_const_cmp1+0x1e/0x30
[   23.953539]  ? switch_task_namespaces+0xa9/0xe0
[   23.953713]  do_exit+0xac9/0x2790
[   23.953844]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   23.954077]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   23.954262]  ? __pfx_do_exit+0x10/0x10
[   23.954407]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   23.954617]  ? security_file_ioctl+0x9d/0xd0
[   23.954786]  make_task_dead+0x182/0x3c0
[   23.954934]  rewind_stack_and_make_dead+0x17/0x20
[   23.955113] RIP: 0033:0x7f5246c3ee5d
[   23.955250] Code: Unable to access opcode bytes at 0x7f5246c3ee33.
[   23.955474] RSP: 002b:00007ffdb1ebbb58 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   23.955749] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f5246c3ee5d
[   23.956008] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   23.956267] RBP: 00007ffdb1ebbb70 R08: 0000000000000800 R09: 0000000000000800
[   23.956530] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffdb1ebbc88
[   23.956789] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f5246f76000
[   23.957052]  </TASK>
[   23.957138] irq event stamp: 0
[   23.957255] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   23.957484] hardirqs last disabled at (0): [<ffffffff8122f2d1>] copy_process+0x1c51/0x7140
[   23.957784] softirqs last  enabled at (0): [<ffffffff8122f312>] copy_process+0x1c92/0x7140
[   23.958083] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   23.958311] ---[ end trace 0000000000000000 ]---
[   23.960915] iommufd_mock iommufd_mock291: Adding to iommu group 291
[   23.961171] iommufd_mock iommufd_mock291: Removing from iommu group 291
[   23.961436] general protection fault, probably for non-canonical address 0xdffffc0000000006: 0000 [#292] PREEMPT SMP KASAN NOPTI
[   23.961849] KASAN: null-ptr-deref in range [0x0000000000000030-0x0000000000000037]
[   23.962123] CPU: 1 PID: 1016 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   23.962439] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   23.962854] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   23.963075] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   23.963732] RSP: 0018:ffff8880172dfba8 EFLAGS: 00010206
[   23.963925] RAX: dffffc0000000000 RBX: ffff88802440f000 RCX: 0000000000000000
[   23.964182] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   23.964439] RBP: ffff8880172dfbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   23.964782] R10: ffff88800aad88df R11: 0000000000045a00 R12: 0000000000000000
[   23.965043] R13: ffffffff85cc0180 R14: ffff8880231a8780 R15: ffffffff87070ae0
[   23.965300] FS:  00007f586df5a600(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
[   23.965646] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   23.965858] CR2: 0000000020000080 CR3: 00000000203dc000 CR4: 0000000000750ee0
[   23.966118] PKRU: 55555554
[   23.966244] Call Trace:
[   23.966364]  <TASK>
[   23.966447]  ? show_regs+0x6e/0x80
[   23.966586]  ? die_addr+0x45/0xb0
[   23.966722]  ? exc_general_protection+0x159/0x250
[   23.966910]  ? asm_exc_general_protection+0x2b/0x30
[   23.967131]  ? sysfs_remove_link_from_group+0x21/0x90
[   23.967323]  ? sysfs_remove_link_from_group+0x37/0x90
[   23.967514]  ? sysfs_remove_link_from_group+0x21/0x90
[   23.967713]  iommu_device_unlink+0x85/0xd0
[   23.967905]  iommu_deinit_device+0x11f/0x4c0
[   23.968070]  __iommu_group_remove_device+0x26b/0x300
[   23.968260]  iommu_group_remove_device+0x8a/0xb0
[   23.968443]  iommufd_test+0x1f1a/0x2d10
[   23.968630]  ? __pfx_lock_release+0x10/0x10
[   23.968791]  ? __pfx_lock_acquire+0x10/0x10
[   23.968953]  ? __pfx_iommufd_test+0x10/0x10
[   23.969113]  ? __sanitizer_cov_trace_const_cmp8+0x1c/0x30
[   23.969361]  iommufd_fops_ioctl+0x377/0x510
[   23.969522]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   23.969701]  ? trace_hardirqs_on+0x26/0x120
[   23.969869]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   23.970139]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   23.970325]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   23.970528]  ? security_file_ioctl+0x9d/0xd0
[   23.970714]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   23.970927]  __x64_sys_ioctl+0x1b9/0x230
[   23.971078]  do_syscall_64+0x3c/0x90
[   23.971216]  entry_SYSCALL_64_after_hwframe+0x6e/0xd8
[   23.971412] RIP: 0033:0x7f586dc3ee5d
[   23.971581] Code: ff c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d 93 af 1b 00 f7 d8 64 89 01 48
[   23.972292] RSP: 002b:00007ffde360c0f8 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   23.972567] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f586dc3ee5d
[   23.972829] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   23.973130] RBP: 00007ffde360c110 R08: 0000000000000800 R09: 0000000000000800
[   23.973388] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffde360c228
[   23.973656] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f586df9b000
[   23.973953]  </TASK>
[   23.974039] Modules linked in:
[   23.974201] ---[ end trace 0000000000000000 ]---
[   23.974374] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   23.974606] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   23.975269] RSP: 0018:ffff88802457fba8 EFLAGS: 00010206
[   23.975463] RAX: dffffc0000000000 RBX: ffff888014f9b000 RCX: 0000000000000000
[   23.975722] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   23.976027] RBP: ffff88802457fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   23.976402] R10: ffff88800aad88df R11: 0000000000000001 R12: 0000000000000000
[   23.976661] R13: ffffffff85cc0180 R14: ffff8880109b6ac0 R15: ffffffff87070ae0
[   23.976961] FS:  00007f586df5a600(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
[   23.977253] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   23.977464] CR2: 0000000020000080 CR3: 00000000203dc000 CR4: 0000000000750ee0
[   23.977770] PKRU: 55555554
[   23.978253] ------------[ cut here ]------------
[   23.978478] WARNING: CPU: 1 PID: 1016 at drivers/iommu/iommufd/main.c:258 iommufd_fops_release+0x2a3/0x300
[   23.978842] Modules linked in:
[   23.978960] CPU: 1 PID: 1016 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   23.979278] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   23.979725] RIP: 0010:iommufd_fops_release+0x2a3/0x300
[   23.979918] Code: 45 d0 65 48 2b 04 25 28 00 00 00 75 54 48 81 c4 88 00 00 00 31 c0 5b 41 5c 41 5d 41 5e 41 5f 5d c3 cc cc cc cc e8 ad 4f 0a fe <0f> 0b eb a6 e8 74 23 67 fe e9 f6 fe ff ff 48 89 85 50 ff ff ff e8
[   23.980626] RSP: 0018:ffff8880172dfc00 EFLAGS: 00010293
[   23.980819] RAX: 0000000000000000 RBX: ffff88801248ad08 RCX: 0000000000000000
[   23.981115] RDX: ffff88800bb28000 RSI: ffffffff835563e3 RDI: ffffffff86702b48
[   23.981373] RBP: ffff8880172dfcb0 R08: 0000000000000000 R09: fffffbfff0eb2644
[   23.981632] R10: ffffffff87593227 R11: ffff88800fe4bc00 R12: 0000000000000000
[   23.981940] R13: ffff888018b8eb98 R14: ffff8880172dfc48 R15: ffffffff83556140
[   23.982198] FS:  0000000000000000(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
[   23.982507] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   23.982763] CR2: 0000000020000080 CR3: 000000000687e000 CR4: 0000000000750ee0
[   23.983023] PKRU: 55555554
[   23.983127] Call Trace:
[   23.983221]  <TASK>
[   23.983304]  ? show_regs+0x6e/0x80
[   23.983439]  ? __warn+0xef/0x340
[   23.983611]  ? report_bug+0x25e/0x4b0
[   23.983755]  ? iommufd_fops_release+0x2a3/0x300
[   23.983928]  ? report_bug+0x2cb/0x4b0
[   23.984072]  ? handle_bug+0x46/0x90
[   23.984214]  ? exc_invalid_op+0x1d/0x50
[   23.984397]  ? asm_exc_invalid_op+0x1f/0x30
[   23.984555]  ? __pfx_iommufd_fops_release+0x10/0x10
[   23.984742]  ? iommufd_fops_release+0x2a3/0x300
[   23.984915]  ? iommufd_fops_release+0x2a3/0x300
[   23.985136]  ? __pfx_iommufd_fops_release+0x10/0x10
[   23.985319]  ? rcu_is_watching+0x19/0xc0
[   23.985471]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   23.985679]  ? __pfx_iommufd_fops_release+0x10/0x10
[   23.985907]  __fput+0x424/0xaf0
[   23.986035]  ____fput+0x1f/0x30
[   23.986160]  task_work_run+0x19d/0x2b0
[   23.986305]  ? __pfx_task_work_run+0x10/0x10
[   23.986487]  ? __sanitizer_cov_trace_const_cmp1+0x1e/0x30
[   23.986708]  ? switch_task_namespaces+0xa9/0xe0
[   23.986884]  do_exit+0xac9/0x2790
[   23.987014]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   23.987246]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   23.987432]  ? __pfx_do_exit+0x10/0x10
[   23.987580]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   23.987815]  ? security_file_ioctl+0x9d/0xd0
[   23.987981]  make_task_dead+0x182/0x3c0
[   23.988129]  rewind_stack_and_make_dead+0x17/0x20
[   23.988313] RIP: 0033:0x7f586dc3ee5d
[   23.988486] Code: Unable to access opcode bytes at 0x7f586dc3ee33.
[   23.988709] RSP: 002b:00007ffde360c0f8 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   23.988985] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f586dc3ee5d
[   23.989299] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   23.989557] RBP: 00007ffde360c110 R08: 0000000000000800 R09: 0000000000000800
[   23.989822] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffde360c228
[   23.990113] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007f586df9b000
[   23.990377]  </TASK>
[   23.990464] irq event stamp: 0
[   23.990597] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   23.990865] hardirqs last disabled at (0): [<ffffffff8122f2d1>] copy_process+0x1c51/0x7140
[   23.991165] softirqs last  enabled at (0): [<ffffffff8122f312>] copy_process+0x1c92/0x7140
[   23.991465] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   23.991715] ---[ end trace 0000000000000000 ]---
[   23.994270] iommufd_mock iommufd_mock292: Adding to iommu group 292
[   23.994527] iommufd_mock iommufd_mock292: Removing from iommu group 292
[   23.994869] general protection fault, probably for non-canonical address 0xdffffc0000000006: 0000 [#293] PREEMPT SMP KASAN NOPTI
[   23.995286] KASAN: null-ptr-deref in range [0x0000000000000030-0x0000000000000037]
[   23.995560] CPU: 1 PID: 1017 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   23.995882] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   23.996344] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   23.996558] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   23.997261] RSP: 0018:ffff88802b99fba8 EFLAGS: 00010206
[   23.997473] RAX: dffffc0000000000 RBX: ffff888024580000 RCX: 0000000000000000
[   23.997755] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   23.998013] RBP: ffff88802b99fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   23.998313] R10: ffff88800aad88df R11: 5f6466756d6d6f69 R12: 0000000000000000
[   23.998571] R13: ffffffff85cc0180 R14: ffff8880231a8320 R15: ffffffff87070ae0
[   23.998837] FS:  00007ff4420f4600(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
[   23.999159] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   23.999370] CR2: 0000000020000080 CR3: 000000000fe46000 CR4: 0000000000750ee0
[   23.999630] PKRU: 55555554
[   23.999734] Call Trace:
[   23.999829]  <TASK>
[   23.999912]  ? show_regs+0x6e/0x80
[   24.000048]  ? die_addr+0x45/0xb0
[   24.000181]  ? exc_general_protection+0x159/0x250
[   24.000366]  ? asm_exc_general_protection+0x2b/0x30
[   24.000553]  ? sysfs_remove_link_from_group+0x21/0x90
[   24.000744]  ? sysfs_remove_link_from_group+0x37/0x90
[   24.000935]  ? sysfs_remove_link_from_group+0x21/0x90
[   24.001127]  iommu_device_unlink+0x85/0xd0
[   24.001284]  iommu_deinit_device+0x11f/0x4c0
[   24.001451]  __iommu_group_remove_device+0x26b/0x300
[   24.001641]  iommu_group_remove_device+0x8a/0xb0
[   24.001819]  iommufd_test+0x1f1a/0x2d10
[   24.001965]  ? __pfx_lock_release+0x10/0x10
[   24.002126]  ? __pfx_lock_acquire+0x10/0x10
[   24.002288]  ? __pfx_iommufd_test+0x10/0x10
[   24.002447]  ? __sanitizer_cov_trace_const_cmp8+0x1c/0x30
[   24.002652]  iommufd_fops_ioctl+0x377/0x510
[   24.002817]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   24.002998]  ? trace_hardirqs_on+0x26/0x120
[   24.003160]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   24.003394]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   24.003580]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   24.003783]  ? security_file_ioctl+0x9d/0xd0
[   24.003949]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   24.004128]  __x64_sys_ioctl+0x1b9/0x230
[   24.004279]  do_syscall_64+0x3c/0x90
[   24.004417]  entry_SYSCALL_64_after_hwframe+0x6e/0xd8
[   24.004606] RIP: 0033:0x7ff441e3ee5d
[   24.004743] Code: ff c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d 93 af 1b 00 f7 d8 64 89 01 48
[   24.005402] RSP: 002b:00007ffd7a514488 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   24.005677] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007ff441e3ee5d
[   24.005936] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   24.006193] RBP: 00007ffd7a5144a0 R08: 0000000000000800 R09: 0000000000000800
[   24.006453] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffd7a5145b8
[   24.006711] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007ff442135000
[   24.006976]  </TASK>
[   24.007063] Modules linked in:
[   24.007201] ---[ end trace 0000000000000000 ]---
[   24.007372] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   24.007584] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   24.008244] RSP: 0018:ffff88802457fba8 EFLAGS: 00010206
[   24.008437] RAX: dffffc0000000000 RBX: ffff888014f9b000 RCX: 0000000000000000
[   24.008694] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   24.008952] RBP: ffff88802457fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   24.009210] R10: ffff88800aad88df R11: 0000000000000001 R12: 0000000000000000
[   24.009467] R13: ffffffff85cc0180 R14: ffff8880109b6ac0 R15: ffffffff87070ae0
[   24.009725] FS:  00007ff4420f4600(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
[   24.010015] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   24.010226] CR2: 0000000020000080 CR3: 000000000fe46000 CR4: 0000000000750ee0
[   24.010485] PKRU: 55555554
[   24.010857] ------------[ cut here ]------------
[   24.011031] WARNING: CPU: 1 PID: 1017 at drivers/iommu/iommufd/main.c:258 iommufd_fops_release+0x2a3/0x300
[   24.011381] Modules linked in:
[   24.011498] CPU: 1 PID: 1017 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   24.011815] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   24.012222] RIP: 0010:iommufd_fops_release+0x2a3/0x300
[   24.012414] Code: 45 d0 65 48 2b 04 25 28 00 00 00 75 54 48 81 c4 88 00 00 00 31 c0 5b 41 5c 41 5d 41 5e 41 5f 5d c3 cc cc cc cc e8 ad 4f 0a fe <0f> 0b eb a6 e8 74 23 67 fe e9 f6 fe ff ff 48 89 85 50 ff ff ff e8
[   24.013073] RSP: 0018:ffff88802b99fc00 EFLAGS: 00010293
[   24.013266] RAX: 0000000000000000 RBX: ffff88801248af08 RCX: 0000000000000000
[   24.013524] RDX: ffff888010562500 RSI: ffffffff835563e3 RDI: ffffffff86702b48
[   24.013782] RBP: ffff88802b99fcb0 R08: 0000000000000000 R09: fffffbfff0eb2644
[   24.014040] R10: ffffffff87593227 R11: ffff8880124ff000 R12: 0000000000000000
[   24.014298] R13: ffff888018b8f818 R14: ffff88802b99fc48 R15: ffffffff83556140
[   24.014557] FS:  0000000000000000(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
[   24.014859] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   24.015067] CR2: 0000000020000080 CR3: 000000000687e000 CR4: 0000000000750ee0
[   24.015321] PKRU: 55555554
[   24.015423] Call Trace:
[   24.015516]  <TASK>
[   24.015597]  ? show_regs+0x6e/0x80
[   24.015728]  ? __warn+0xef/0x340
[   24.015853]  ? report_bug+0x25e/0x4b0
[   24.015993]  ? iommufd_fops_release+0x2a3/0x300
[   24.016162]  ? report_bug+0x2cb/0x4b0
[   24.016304]  ? handle_bug+0x46/0x90
[   24.016437]  ? exc_invalid_op+0x1d/0x50
[   24.016582]  ? asm_exc_invalid_op+0x1f/0x30
[   24.016737]  ? __pfx_iommufd_fops_release+0x10/0x10
[   24.016920]  ? iommufd_fops_release+0x2a3/0x300
[   24.017089]  ? iommufd_fops_release+0x2a3/0x300
[   24.017260]  ? __pfx_iommufd_fops_release+0x10/0x10
[   24.017440]  ? rcu_is_watching+0x19/0xc0
[   24.017589]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   24.017787]  ? __pfx_iommufd_fops_release+0x10/0x10
[   24.017967]  __fput+0x424/0xaf0
[   24.018093]  ____fput+0x1f/0x30
[   24.018217]  task_work_run+0x19d/0x2b0
[   24.018359]  ? __pfx_task_work_run+0x10/0x10
[   24.018519]  ? __sanitizer_cov_trace_const_cmp1+0x1e/0x30
[   24.018811]  ? switch_task_namespaces+0xa9/0xe0
[   24.018982]  do_exit+0xac9/0x2790
[   24.019110]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   24.019340]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   24.019522]  ? __pfx_do_exit+0x10/0x10
[   24.019664]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   24.019862]  ? security_file_ioctl+0x9d/0xd0
[   24.020025]  make_task_dead+0x182/0x3c0
[   24.020171]  rewind_stack_and_make_dead+0x17/0x20
[   24.020347] RIP: 0033:0x7ff441e3ee5d
[   24.020480] Code: Unable to access opcode bytes at 0x7ff441e3ee33.
[   24.020700] RSP: 002b:00007ffd7a514488 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   24.020968] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007ff441e3ee5d
[   24.021220] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   24.021472] RBP: 00007ffd7a5144a0 R08: 0000000000000800 R09: 0000000000000800
[   24.021724] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffd7a5145b8
[   24.021975] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007ff442135000
[   24.022234]  </TASK>
[   24.022318] irq event stamp: 0
[   24.022431] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   24.022662] hardirqs last disabled at (0): [<ffffffff8122f2d1>] copy_process+0x1c51/0x7140
[   24.022956] softirqs last  enabled at (0): [<ffffffff8122f312>] copy_process+0x1c92/0x7140
[   24.023248] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   24.023470] ---[ end trace 0000000000000000 ]---
[   24.025895] iommufd_mock iommufd_mock293: Adding to iommu group 293
[   24.026150] iommufd_mock iommufd_mock293: Removing from iommu group 293
[   24.026407] general protection fault, probably for non-canonical address 0xdffffc0000000006: 0000 [#294] PREEMPT SMP KASAN NOPTI
[   24.026827] KASAN: null-ptr-deref in range [0x0000000000000030-0x0000000000000037]
[   24.027101] CPU: 1 PID: 1018 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   24.027417] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   24.027821] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   24.028034] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   24.028688] RSP: 0018:ffff888012177ba8 EFLAGS: 00010206
[   24.028880] RAX: dffffc0000000000 RBX: ffff888024586000 RCX: 0000000000000000
[   24.029137] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   24.029393] RBP: ffff888012177bc0 R08: 0000000000000001 R09: ffffed100155b11b
[   24.029649] R10: ffff88800aad88df R11: 5f6466756d6d6f69 R12: 0000000000000000
[   24.029905] R13: ffffffff85cc0180 R14: ffff8880231a85c0 R15: ffffffff87070ae0
[   24.030162] FS:  00007fea34edb600(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
[   24.030453] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   24.030662] CR2: 0000000020000080 CR3: 000000000fe46000 CR4: 0000000000750ee0
[   24.030949] PKRU: 55555554
[   24.031052] Call Trace:
[   24.031145]  <TASK>
[   24.031227]  ? show_regs+0x6e/0x80
[   24.031363]  ? die_addr+0x45/0xb0
[   24.031496]  ? exc_general_protection+0x159/0x250
[   24.031678]  ? asm_exc_general_protection+0x2b/0x30
[   24.031863]  ? sysfs_remove_link_from_group+0x21/0x90
[   24.032052]  ? sysfs_remove_link_from_group+0x37/0x90
[   24.032247]  ? sysfs_remove_link_from_group+0x21/0x90
[   24.032439]  iommu_device_unlink+0x85/0xd0
[   24.032595]  iommu_deinit_device+0x11f/0x4c0
[   24.032759]  __iommu_group_remove_device+0x26b/0x300
[   24.032948]  iommu_group_remove_device+0x8a/0xb0
[   24.033123]  iommufd_test+0x1f1a/0x2d10
[   24.033269]  ? __pfx_lock_release+0x10/0x10
[   24.033434]  ? __pfx_lock_acquire+0x10/0x10
[   24.033612]  ? __pfx_iommufd_test+0x10/0x10
[   24.033770]  ? __sanitizer_cov_trace_const_cmp8+0x1c/0x30
[   24.033980]  iommufd_fops_ioctl+0x377/0x510
[   24.034146]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   24.034329]  ? trace_hardirqs_on+0x26/0x120
[   24.034491]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   24.034727]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   24.034942]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   24.035145]  ? security_file_ioctl+0x9d/0xd0
[   24.035309]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   24.035487]  __x64_sys_ioctl+0x1b9/0x230
[   24.035636]  do_syscall_64+0x3c/0x90
[   24.035773]  entry_SYSCALL_64_after_hwframe+0x6e/0xd8
[   24.035961] RIP: 0033:0x7fea34c3ee5d
[   24.036097] Code: ff c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d 93 af 1b 00 f7 d8 64 89 01 48
[   24.036751] RSP: 002b:00007ffe43a09d98 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   24.037024] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007fea34c3ee5d
[   24.037280] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   24.037536] RBP: 00007ffe43a09db0 R08: 0000000000000800 R09: 0000000000000800
[   24.037792] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffe43a09ec8
[   24.038048] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007fea34f1c000
[   24.038309]  </TASK>
[   24.038394] Modules linked in:
[   24.038547] ---[ end trace 0000000000000000 ]---
[   24.038727] RIP: 0010:sysfs_remove_link_from_group+0x37/0x90
[   24.038947] Code: 41 56 49 89 d6 41 55 49 89 f5 41 54 49 89 fc e8 4f 1a 6c ff 49 8d 7c 24 30 48 b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 <80> 3c 02 00 75 42 49 8b 7c 24 30 31 d2 4c 89 ee e8 54 e2 fe ff 49
[   24.039589] RSP: 0018:ffff88802457fba8 EFLAGS: 00010206
[   24.039777] RAX: dffffc0000000000 RBX: ffff888014f9b000 RCX: 0000000000000000
[   24.040028] RDX: 0000000000000006 RSI: ffffffff81f39941 RDI: 0000000000000030
[   24.040280] RBP: ffff88802457fbc0 R08: 0000000000000001 R09: ffffed100155b11b
[   24.040532] R10: ffff88800aad88df R11: 0000000000000001 R12: 0000000000000000
[   24.040783] R13: ffffffff85cc0180 R14: ffff8880109b6ac0 R15: ffffffff87070ae0
[   24.041034] FS:  00007fea34edb600(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
[   24.041317] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   24.041522] CR2: 0000000020000080 CR3: 000000000fe46000 CR4: 0000000000750ee0
[   24.041774] PKRU: 55555554
[   24.042130] ------------[ cut here ]------------
[   24.042301] WARNING: CPU: 1 PID: 1018 at drivers/iommu/iommufd/main.c:258 iommufd_fops_release+0x2a3/0x300
[   24.042661] Modules linked in:
[   24.042782] CPU: 1 PID: 1018 Comm: repro Tainted: G      D W          6.5.0-rc4-a3fe9a2e1692+ #1
[   24.043099] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   24.043505] RIP: 0010:iommufd_fops_release+0x2a3/0x300
[   24.043697] Code: 45 d0 65 48 2b 04 25 28 00 00 00 75 54 48 81 c4 88 00 00 00 31 c0 5b 41 5c 41 5d 41 5e 41 5f 5d c3 cc cc cc cc e8 ad 4f 0a fe <0f> 0b eb a6 e8 74 23 67 fe e9 f6 fe ff ff 48 89 85 50 ff ff ff e8
[   24.044354] RSP: 0018:ffff888012177c00 EFLAGS: 00010293
[   24.044546] RAX: 0000000000000000 RBX: ffff88801248a208 RCX: 0000000000000000
[   24.044803] RDX: ffff888014580000 RSI: ffffffff835563e3 RDI: ffffffff86702b48
[   24.045063] RBP: ffff888012177cb0 R08: 0000000000000000 R09: fffffbfff0eb2644
[   24.045323] R10: ffffffff87593227 R11: ffff88801323d600 R12: 0000000000000000
[   24.045583] R13: ffff888013317318 R14: ffff888012177c48 R15: ffffffff83556140
[   24.045842] FS:  0000000000000000(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
[   24.046134] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   24.046346] CR2: 0000000020000080 CR3: 000000000687e000 CR4: 0000000000750ee0
[   24.046621] PKRU: 55555554
[   24.046726] Call Trace:
[   24.046825]  <TASK>
[   24.046908]  ? show_regs+0x6e/0x80
[   24.047044]  ? __warn+0xef/0x340
[   24.047173]  ? report_bug+0x25e/0x4b0
[   24.047317]  ? iommufd_fops_release+0x2a3/0x300
[   24.047492]  ? report_bug+0x2cb/0x4b0
[   24.047639]  ? handle_bug+0x46/0x90
[   24.047775]  ? exc_invalid_op+0x1d/0x50
[   24.047923]  ? asm_exc_invalid_op+0x1f/0x30
[   24.048083]  ? __pfx_iommufd_fops_release+0x10/0x10
[   24.048271]  ? iommufd_fops_release+0x2a3/0x300
[   24.048444]  ? iommufd_fops_release+0x2a3/0x300
[   24.048620]  ? __pfx_iommufd_fops_release+0x10/0x10
[   24.048805]  ? rcu_is_watching+0x19/0xc0
[   24.048959]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   24.049164]  ? __pfx_iommufd_fops_release+0x10/0x10
[   24.049350]  __fput+0x424/0xaf0
[   24.049481]  ____fput+0x1f/0x30
[   24.049606]  task_work_run+0x19d/0x2b0
[   24.049754]  ? __pfx_task_work_run+0x10/0x10
[   24.049918]  ? __sanitizer_cov_trace_const_cmp1+0x1e/0x30
[   24.050122]  ? switch_task_namespaces+0xa9/0xe0
[   24.050298]  do_exit+0xac9/0x2790
[   24.050429]  ? seqcount_lockdep_reader_access.constprop.0+0xc0/0xd0
[   24.050674]  ? __sanitizer_cov_trace_cmp4+0x1a/0x20
[   24.050865]  ? __pfx_do_exit+0x10/0x10
[   24.051010]  ? __sanitizer_cov_trace_const_cmp4+0x1a/0x20
[   24.051214]  ? security_file_ioctl+0x9d/0xd0
[   24.051388]  make_task_dead+0x182/0x3c0
[   24.051537]  rewind_stack_and_make_dead+0x17/0x20
[   24.051719] RIP: 0033:0x7fea34c3ee5d
[   24.051856] Code: Unable to access opcode bytes at 0x7fea34c3ee33.
[   24.052081] RSP: 002b:00007ffe43a09d98 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   24.052361] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007fea34c3ee5d
[   24.052622] RDX: 0000000020000180 RSI: 0000000000003ba0 RDI: 0000000000000003
[   24.052884] RBP: 00007ffe43a09db0 R08: 0000000000000800 R09: 0000000000000800
[   24.053147] R10: 0000000000000000 R11: 0000000000000213 R12: 00007ffe43a09ec8
[   24.053411] R13: 0000000000401136 R14: 0000000000403e08 R15: 00007fea34f1c000
[   24.053678]  </TASK>
[   24.053766] irq event stamp: 0
[   24.053883] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   24.054116] hardirqs last disabled at (0): [<ffffffff8122f2d1>] copy_process+0x1c51/0x7140
[   24.054422] softirqs last  enabled at (0): [<ffffffff8122f312>] copy_process+0x1c92/0x7140
[   24.054732] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   24.054965] ---[ end trace 0000000000000000 ]---
