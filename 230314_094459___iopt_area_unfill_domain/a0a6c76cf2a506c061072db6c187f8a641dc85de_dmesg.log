c[?7l[2J[0mSeaBIOS (version rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org)


iPXE (http://ipxe.org) 00:03.0 CA00 PCI2.10 PnP PMM+7FF91000+7FEF1000 CA00
Press Ctrl-B to configure iPXE (PCI 00:03.0)...                                                                               


Booting from ROM...
c[?7l[2J[    0.000000] Linux version 6.1.0-a0a6c76cf2a5+ (root@p-tglh01.sh.intel.com) (gcc (GCC) 8.5.0 20210514 (Red Hat 8.5.0-18), GNU ld version 2.36.1-2.el8) #1 SMP PREEMPT_DYNAMIC Tue Mar 14 13:52:22 CST 2023
[    0.000000] Command line: console=ttyS0 root=/dev/sda earlyprintk=serial net.ifnames=0
[    0.000000] KERNEL supported cpus:
[    0.000000]   Intel GenuineIntel
[    0.000000]   AMD AuthenticAMD
[    0.000000]   Hygon HygonGenuine
[    0.000000]   Centaur CentaurHauls
[    0.000000]   zhaoxin   Shanghai  
[    0.000000] x86/fpu: Supporting XSAVE feature 0x001: 'x87 floating point registers'
[    0.000000] x86/fpu: Supporting XSAVE feature 0x002: 'SSE registers'
[    0.000000] x86/fpu: Supporting XSAVE feature 0x004: 'AVX registers'
[    0.000000] x86/fpu: Supporting XSAVE feature 0x020: 'AVX-512 opmask'
[    0.000000] x86/fpu: Supporting XSAVE feature 0x040: 'AVX-512 Hi256'
[    0.000000] x86/fpu: Supporting XSAVE feature 0x080: 'AVX-512 ZMM_Hi256'
[    0.000000] x86/fpu: Supporting XSAVE feature 0x200: 'Protection Keys User registers'
[    0.000000] x86/fpu: xstate_offset[2]:  576, xstate_sizes[2]:  256
[    0.000000] x86/fpu: xstate_offset[5]:  832, xstate_sizes[5]:   64
[    0.000000] x86/fpu: xstate_offset[6]:  896, xstate_sizes[6]:  512
[    0.000000] x86/fpu: xstate_offset[7]: 1408, xstate_sizes[7]: 1024
[    0.000000] x86/fpu: xstate_offset[9]: 2432, xstate_sizes[9]:    8
[    0.000000] x86/fpu: Enabled xstate features 0x2e7, context size is 2440 bytes, using 'compacted' format.
[    0.000000] signal: max sigframe size: 3632
[    0.000000] BIOS-provided physical RAM map:
[    0.000000] BIOS-e820: [mem 0x0000000000000000-0x000000000009fbff] usable
[    0.000000] BIOS-e820: [mem 0x000000000009fc00-0x000000000009ffff] reserved
[    0.000000] BIOS-e820: [mem 0x00000000000f0000-0x00000000000fffff] reserved
[    0.000000] BIOS-e820: [mem 0x0000000000100000-0x000000007ffdffff] usable
[    0.000000] BIOS-e820: [mem 0x000000007ffe0000-0x000000007fffffff] reserved
[    0.000000] BIOS-e820: [mem 0x00000000feffc000-0x00000000feffffff] reserved
[    0.000000] BIOS-e820: [mem 0x00000000fffc0000-0x00000000ffffffff] reserved
[    0.000000] printk: bootconsole [earlyser0] enabled
[    0.000000] NX (Execute Disable) protection: active
[    0.000000] SMBIOS 2.8 present.
[    0.000000] DMI: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[    0.000000] Hypervisor detected: KVM
[    0.000000] kvm-clock: Using msrs 4b564d01 and 4b564d00
[    0.000006] kvm-clock: using sched offset of 587299631 cycles
[    0.000601] clocksource: kvm-clock: mask: 0xffffffffffffffff max_cycles: 0x1cd42e4dffb, max_idle_ns: 881590591483 ns
[    0.002426] tsc: Detected 3110.400 MHz processor
[    0.012541] last_pfn = 0x7ffe0 max_arch_pfn = 0x400000000
[    0.013240] x86/PAT: Configuration [0-7]: WB  WC  UC- UC  WB  WP  UC- WT  
[    0.026245] found SMP MP-table at [mem 0x000f5ba0-0x000f5baf]
[    0.027082] Using GB pages for direct mapping
[    0.029328] ACPI: Early table checksum verification disabled
[    0.029995] ACPI: RSDP 0x00000000000F59C0 000014 (v00 BOCHS )
[    0.030689] ACPI: RSDT 0x000000007FFE1951 000034 (v01 BOCHS  BXPC     00000001 BXPC 00000001)
[    0.031680] ACPI: FACP 0x000000007FFE17FD 000074 (v01 BOCHS  BXPC     00000001 BXPC 00000001)
[    0.032667] ACPI: DSDT 0x000000007FFE0040 0017BD (v01 BOCHS  BXPC     00000001 BXPC 00000001)
[    0.033666] ACPI: FACS 0x000000007FFE0000 000040
[    0.034200] ACPI: APIC 0x000000007FFE1871 000080 (v01 BOCHS  BXPC     00000001 BXPC 00000001)
[    0.035253] ACPI: HPET 0x000000007FFE18F1 000038 (v01 BOCHS  BXPC     00000001 BXPC 00000001)
[    0.036258] ACPI: WAET 0x000000007FFE1929 000028 (v01 BOCHS  BXPC     00000001 BXPC 00000001)
[    0.037271] ACPI: Reserving FACP table memory at [mem 0x7ffe17fd-0x7ffe1870]
[    0.038058] ACPI: Reserving DSDT table memory at [mem 0x7ffe0040-0x7ffe17fc]
[    0.038882] ACPI: Reserving FACS table memory at [mem 0x7ffe0000-0x7ffe003f]
[    0.039696] ACPI: Reserving APIC table memory at [mem 0x7ffe1871-0x7ffe18f0]
[    0.040528] ACPI: Reserving HPET table memory at [mem 0x7ffe18f1-0x7ffe1928]
[    0.041363] ACPI: Reserving WAET table memory at [mem 0x7ffe1929-0x7ffe1950]
[    0.043541] No NUMA configuration found
[    0.043967] Faking a node at [mem 0x0000000000000000-0x000000007ffdffff]
[    0.044827] NODE_DATA(0) allocated [mem 0x7ffb5000-0x7ffdffff]
[    0.049661] Zone ranges:
[    0.049944]   DMA      [mem 0x0000000000001000-0x0000000000ffffff]
[    0.050642]   DMA32    [mem 0x0000000001000000-0x000000007ffdffff]
[    0.051321]   Normal   empty
[    0.051642]   Device   empty
[    0.051976] Movable zone start for each node
[    0.052463] Early memory node ranges
[    0.052866]   node   0: [mem 0x0000000000001000-0x000000000009efff]
[    0.053585]   node   0: [mem 0x0000000000100000-0x000000007ffdffff]
[    0.054271] Initmem setup node 0 [mem 0x0000000000001000-0x000000007ffdffff]
[    0.056389] On node 0, zone DMA: 1 pages in unavailable ranges
[    0.056612] On node 0, zone DMA: 97 pages in unavailable ranges
[    0.108660] On node 0, zone DMA32: 32 pages in unavailable ranges
[    0.109738] ACPI: PM-Timer IO Port: 0x608
[    0.110890] ACPI: LAPIC_NMI (acpi_id[0xff] dfl dfl lint[0x1])
[    0.111616] IOAPIC[0]: apic_id 0, version 17, address 0xfec00000, GSI 0-23
[    0.112413] ACPI: INT_SRC_OVR (bus 0 bus_irq 0 global_irq 2 dfl dfl)
[    0.113207] ACPI: INT_SRC_OVR (bus 0 bus_irq 5 global_irq 5 high level)
[    0.113932] ACPI: INT_SRC_OVR (bus 0 bus_irq 9 global_irq 9 high level)
[    0.114658] ACPI: INT_SRC_OVR (bus 0 bus_irq 10 global_irq 10 high level)
[    0.115416] ACPI: INT_SRC_OVR (bus 0 bus_irq 11 global_irq 11 high level)
[    0.116184] ACPI: Using ACPI (MADT) for SMP configuration information
[    0.116906] ACPI: HPET id: 0x8086a201 base: 0xfed00000
[    0.117510] TSC deadline timer available
[    0.117942] smpboot: Allowing 2 CPUs, 0 hotplug CPUs
[    0.118619] kvm-guest: KVM setup pv remote TLB flush
[    0.119209] kvm-guest: setup PV sched yield
[    0.119750] PM: hibernation: Registered nosave memory: [mem 0x00000000-0x00000fff]
[    0.120577] PM: hibernation: Registered nosave memory: [mem 0x0009f000-0x0009ffff]
[    0.121422] PM: hibernation: Registered nosave memory: [mem 0x000a0000-0x000effff]
[    0.122230] PM: hibernation: Registered nosave memory: [mem 0x000f0000-0x000fffff]
[    0.123078] [mem 0x80000000-0xfeffbfff] available for PCI devices
[    0.123764] Booting paravirtualized kernel on KVM
[    0.124320] clocksource: refined-jiffies: mask: 0xffffffff max_cycles: 0xffffffff, max_idle_ns: 7645519600211568 ns
[    0.125518] setup_percpu: NR_CPUS:8192 nr_cpumask_bits:2 nr_cpu_ids:2 nr_node_ids:1
[    0.128017] percpu: Embedded 64 pages/cpu s225280 r8192 d28672 u1048576
[    0.129077] kvm-guest: PV spinlocks enabled
[    0.129554] PV qspinlock hash table entries: 256 (order: 0, 4096 bytes, linear)
[    0.130398] Fallback order for Node 0: 0 
[    0.130893] Built 1 zonelists, mobility grouping on.  Total pages: 515808
[    0.131677] Policy zone: DMA32
[    0.132023] Kernel command line: net.ifnames=0 console=ttyS0 root=/dev/sda earlyprintk=serial net.ifnames=0
[    0.133885] random: crng init done
[    0.135585] Dentry cache hash table entries: 262144 (order: 9, 2097152 bytes, linear)
[    0.136639] Inode-cache hash table entries: 131072 (order: 8, 1048576 bytes, linear)
[    0.137699] mem auto-init: stack:off, heap alloc:off, heap free:off
[    0.142427] Memory: 1983336K/2096632K available (32784K kernel code, 4708K rwdata, 8372K rodata, 3688K init, 22088K bss, 113040K reserved, 0K cma-reserved)
[    0.144850] SLUB: HWalign=64, Order=0-3, MinObjects=0, CPUs=2, Nodes=1
[    0.145585] kmemleak: Kernel memory leak detector disabled
[    0.146200] ftrace: allocating 67831 entries in 265 pages
[    0.183481] ftrace: allocated 265 pages with 3 groups
[    0.188771] Dynamic Preempt: voluntary
[    0.189440] Running RCU self tests
[    0.189845] rcu: Preemptible hierarchical RCU implementation.
[    0.190499] rcu: 	RCU lockdep checking is enabled.
[    0.191038] rcu: 	RCU restricting CPUs from NR_CPUS=8192 to nr_cpu_ids=2.
[    0.191764] 	Trampoline variant of Tasks RCU enabled.
[    0.192548] 	Rude variant of Tasks RCU enabled.
[    0.193244] 	Tracing variant of Tasks RCU enabled.
[    0.194031] rcu: RCU calculated value of scheduler-enlistment delay is 25 jiffies.
[    0.195313] rcu: Adjusting geometry for rcu_fanout_leaf=16, nr_cpu_ids=2
[    0.254536] NR_IRQS: 524544, nr_irqs: 440, preallocated irqs: 16
[    0.256159] rcu: srcu_init: Setting srcu_struct sizes based on contention.
[    0.271998] Console: colour VGA+ 80x25
[    0.272765] printk: console [ttyS0] enabled
[    0.272765] printk: console [ttyS0] enabled
[    0.274113] printk: bootconsole [earlyser0] disabled
[    0.274113] printk: bootconsole [earlyser0] disabled
[    0.275832] Lock dependency validator: Copyright (c) 2006 Red Hat, Inc., Ingo Molnar
[    0.277164] ... MAX_LOCKDEP_SUBCLASSES:  8
[    0.277884] ... MAX_LOCK_DEPTH:          48
[    0.278619] ... MAX_LOCKDEP_KEYS:        8192
[    0.279405] ... CLASSHASH_SIZE:          4096
[    0.280171] ... MAX_LOCKDEP_ENTRIES:     32768
[    0.280940] ... MAX_LOCKDEP_CHAINS:      65536
[    0.281712] ... CHAINHASH_SIZE:          32768
[    0.282464]  memory used by lock dependency info: 6365 kB
[    0.283442]  memory used for stack traces: 4224 kB
[    0.284274]  per task-struct memory footprint: 1920 bytes
[    0.285347] ACPI: Core revision 20221020
[    0.286599] clocksource: hpet: mask: 0xffffffff max_cycles: 0xffffffff, max_idle_ns: 19112604467 ns
[    0.288476] APIC: Switch to symmetric I/O mode setup
[    0.289648] x2apic enabled
[    0.290485] Switched APIC routing to physical x2apic.
[    0.291367] kvm-guest: setup PV IPIs
[    0.293722] ..TIMER: vector=0x30 apic1=0 pin1=2 apic2=-1 pin2=-1
[    0.294811] clocksource: tsc-early: mask: 0xffffffffffffffff max_cycles: 0x2cd5a8bb032, max_idle_ns: 440795365915 ns
[    0.296687] Calibrating delay loop (skipped) preset value.. 6220.80 BogoMIPS (lpj=12441600)
[    0.298104] pid_max: default: 32768 minimum: 301
[    0.299122] LSM: initializing lsm=capability,yama,integrity
[    0.300071] Yama: becoming mindful.
[    0.301052] Mount-cache hash table entries: 4096 (order: 3, 32768 bytes, linear)
[    0.302328] Mountpoint-cache hash table entries: 4096 (order: 3, 32768 bytes, linear)
[    0.308604] x86/cpu: User Mode Instruction Prevention (UMIP) activated
[    0.310450] Last level iTLB entries: 4KB 0, 2MB 0, 4MB 0
[    0.311412] Last level dTLB entries: 4KB 0, 2MB 0, 4MB 0, 1GB 0
[    0.312462] Spectre V1 : Mitigation: usercopy/swapgs barriers and __user pointer sanitization
[    0.312694] Spectre V2 : WARNING: Unprivileged eBPF is enabled with eIBRS on, data leaks possible via Spectre v2 BHB attacks!
[    0.314548] Spectre V2 : Mitigation: Enhanced IBRS
[    0.316662] Spectre V2 : Spectre v2 / SpectreRSB mitigation: Filling RSB on context switch
[    0.317921] Spectre V2 : Spectre v2 / PBRSB-eIBRS: Retire a single CALL on VMEXIT
[    0.319127] Spectre V2 : mitigation: Enabling conditional Indirect Branch Prediction Barrier
[    0.320666] Speculative Store Bypass: Mitigation: Speculative Store Bypass disabled via prctl
[    0.554847] Freeing SMP alternatives memory: 56K
[    0.556306] smpboot: CPU0: Genuine Intel(R) CPU 0000 @ 2.20GHz (family: 0x6, model: 0x8d, stepping: 0x0)
[    0.556654] cblist_init_generic: Setting adjustable number of callback queues.
[    0.556654] cblist_init_generic: Setting shift to 1 and lim to 1.
[    0.556826] cblist_init_generic: Setting shift to 1 and lim to 1.
[    0.557958] cblist_init_generic: Setting shift to 1 and lim to 1.
[    0.559130] Running RCU-tasks wait API self tests
[    0.660907] Performance Events: Icelake events, full-width counters, Intel PMU driver.
[    0.662554] ... version:                2
[    0.663227] ... bit width:              48
[    0.663896] ... generic registers:      8
[    0.664552] ... value mask:             0000ffffffffffff
[    0.664671] ... max period:             00007fffffffffff
[    0.665559] ... fixed-purpose events:   3
[    0.666239] ... event mask:             00000007000000ff
[    0.667962] rcu: Hierarchical SRCU implementation.
[    0.668668] rcu: 	Max phase no-delay instances is 1000.
[    0.672765] Callback from call_rcu_tasks_trace() invoked.
[    0.674072] smp: Bringing up secondary CPUs ...
[    0.675884] x86: Booting SMP configuration:
[    0.676583] .... node  #0, CPUs:      #1
[    0.677194] smp: Brought up 1 node, 2 CPUs
[    0.678136] smpboot: Max logical packages: 1
[    0.678834] smpboot: Total of 2 processors activated (12441.60 BogoMIPS)
[    0.685473] devtmpfs: initialized
[    0.685822] x86/mm: Memory block size: 128MB
[    0.693183] clocksource: jiffies: mask: 0xffffffff max_cycles: 0xffffffff, max_idle_ns: 7645041785100000 ns
[    0.694713] futex hash table entries: 512 (order: 4, 65536 bytes, linear)
[    0.696238] pinctrl core: initialized pinctrl subsystem
[    0.697865] 
[    0.698141] *************************************************************
[    0.699232] **     NOTICE NOTICE NOTICE NOTICE NOTICE NOTICE NOTICE    **
[    0.700399] **                                                         **
[    0.700665] **  IOMMU DebugFS SUPPORT HAS BEEN ENABLED IN THIS KERNEL  **
[    0.701739] **                                                         **
[    0.702771] ** This means that this kernel is built to expose internal **
[    0.703838] ** IOMMU data structures, which may compromise security on **
[    0.704666] ** your system.                                            **
[    0.705718] **                                                         **
[    0.706769] ** If you see this message and you are not debugging the   **
[    0.707838] ** kernel, report this immediately to your vendor!         **
[    0.708666] **                                                         **
[    0.709682] **     NOTICE NOTICE NOTICE NOTICE NOTICE NOTICE NOTICE    **
[    0.710719] *************************************************************
[    0.711893] PM: RTC time: 05:53:16, date: 2023-03-14
[    0.719525] NET: Registered PF_NETLINK/PF_ROUTE protocol family
[    0.721099] DMA: preallocated 256 KiB GFP_KERNEL pool for atomic allocations
[    0.721889] DMA: preallocated 256 KiB GFP_KERNEL|GFP_DMA pool for atomic allocations
[    0.722706] DMA: preallocated 256 KiB GFP_KERNEL|GFP_DMA32 pool for atomic allocations
[    0.723610] audit: initializing netlink subsys (disabled)
[    0.724249] audit: type=2000 audit(1678773196.611:1): state=initialized audit_enabled=0 res=1
[    0.724249] thermal_sys: Registered thermal governor 'fair_share'
[    0.724249] thermal_sys: Registered thermal governor 'bang_bang'
[    0.724677] thermal_sys: Registered thermal governor 'step_wise'
[    0.725575] thermal_sys: Registered thermal governor 'user_space'
[    0.726608] cpuidle: using governor ladder
[    0.729128] cpuidle: using governor menu
[    0.729977] acpiphp: ACPI Hot Plug PCI Controller Driver version: 0.5
[    0.731090] PCI: Using configuration type 1 for base access
[    0.732910] kprobes: kprobe jump-optimization is enabled. All kprobes are optimized if possible.
[    1.084326] HugeTLB: registered 1.00 GiB page size, pre-allocated 0 pages
[    1.084681] HugeTLB: 16380 KiB vmemmap can be freed for a 1.00 GiB page
[    1.085734] HugeTLB: registered 2.00 MiB page size, pre-allocated 0 pages
[    1.086769] HugeTLB: 28 KiB vmemmap can be freed for a 2.00 MiB page
[    1.095411] ACPI: Added _OSI(Module Device)
[    1.096108] ACPI: Added _OSI(Processor Device)
[    1.096671] ACPI: Added _OSI(3.0 _SCP Extensions)
[    1.097438] ACPI: Added _OSI(Processor Aggregator Device)
[    1.110935] ACPI: 1 ACPI AML tables successfully acquired and loaded
[    1.119378] ACPI: Interpreter enabled
[    1.120229] ACPI: PM: (supports S0 S3 S4 S5)
[    1.120669] ACPI: Using IOAPIC for interrupt routing
[    1.121593] PCI: Using host bridge windows from ACPI; if necessary, use "pci=nocrs" and report a bug
[    1.123068] PCI: Using E820 reservations for host bridge windows
[    1.125622] ACPI: Enabled 2 GPEs in block 00 to 0F
[    1.165661] ACPI: PCI Root Bridge [PCI0] (domain 0000 [bus 00-ff])
[    1.166846] acpi PNP0A03:00: _OSC: OS supports [ASPM ClockPM Segments MSI EDR HPX-Type3]
[    1.168131] acpi PNP0A03:00: _OSC: not requesting OS control; OS requires [ExtendedConfig ASPM ClockPM MSI]
[    1.168813] acpi PNP0A03:00: fail to add MMCONFIG information, can't access extended PCI configuration space under this bridge.
[    1.176413] acpiphp: Slot [3] registered
[    1.176813] acpiphp: Slot [4] registered
[    1.177618] acpiphp: Slot [5] registered
[    1.178403] acpiphp: Slot [6] registered
[    1.179198] acpiphp: Slot [7] registered
[    1.179955] acpiphp: Slot [8] registered
[    1.180733] acpiphp: Slot [9] registered
[    1.181521] acpiphp: Slot [10] registered
[    1.182302] acpiphp: Slot [11] registered
[    1.183112] acpiphp: Slot [12] registered
[    1.183892] acpiphp: Slot [13] registered
[    1.184738] acpiphp: Slot [14] registered
[    1.185534] acpiphp: Slot [15] registered
[    1.186334] acpiphp: Slot [16] registered
[    1.187123] acpiphp: Slot [17] registered
[    1.187917] acpiphp: Slot [18] registered
[    1.188715] acpiphp: Slot [19] registered
[    1.189512] acpiphp: Slot [20] registered
[    1.190309] acpiphp: Slot [21] registered
[    1.191118] acpiphp: Slot [22] registered
[    1.191903] acpiphp: Slot [23] registered
[    1.192701] acpiphp: Slot [24] registered
[    1.193503] acpiphp: Slot [25] registered
[    1.194298] acpiphp: Slot [26] registered
[    1.195103] acpiphp: Slot [27] registered
[    1.195879] acpiphp: Slot [28] registered
[    1.196686] acpiphp: Slot [29] registered
[    1.197487] acpiphp: Slot [30] registered
[    1.198278] acpiphp: Slot [31] registered
[    1.198969] PCI host bridge to bus 0000:00
[    1.199626] pci_bus 0000:00: root bus resource [io  0x0000-0x0cf7 window]
[    1.200669] pci_bus 0000:00: root bus resource [io  0x0d00-0xffff window]
[    1.201726] pci_bus 0000:00: root bus resource [mem 0x000a0000-0x000bffff window]
[    1.202918] pci_bus 0000:00: root bus resource [mem 0x80000000-0xfebfffff window]
[    1.204081] pci_bus 0000:00: root bus resource [mem 0x100000000-0x17fffffff window]
[    1.204670] pci_bus 0000:00: root bus resource [bus 00-ff]
[    1.205793] pci 0000:00:00.0: [8086:1237] type 00 class 0x060000
[    1.213571] pci 0000:00:01.0: [8086:7000] type 00 class 0x060100
[    1.216068] pci 0000:00:01.1: [8086:7010] type 00 class 0x010180
[    1.219347] pci 0000:00:01.1: reg 0x20: [io  0xc040-0xc04f]
[    1.221251] pci 0000:00:01.1: legacy IDE quirk: reg 0x10: [io  0x01f0-0x01f7]
[    1.222396] pci 0000:00:01.1: legacy IDE quirk: reg 0x14: [io  0x03f6]
[    1.223424] pci 0000:00:01.1: legacy IDE quirk: reg 0x18: [io  0x0170-0x0177]
[    1.224554] pci 0000:00:01.1: legacy IDE quirk: reg 0x1c: [io  0x0376]
[    1.225299] pci 0000:00:01.3: [8086:7113] type 00 class 0x068000
[    1.227204] pci 0000:00:01.3: quirk: [io  0x0600-0x063f] claimed by PIIX4 ACPI
[    1.228373] pci 0000:00:01.3: quirk: [io  0x0700-0x070f] claimed by PIIX4 SMB
[    1.229293] pci 0000:00:02.0: [1234:1111] type 00 class 0x030000
[    1.233228] pci 0000:00:02.0: reg 0x10: [mem 0xfd000000-0xfdffffff pref]
[    1.237190] pci 0000:00:02.0: reg 0x18: [mem 0xfebf0000-0xfebf0fff]
[    1.244725] pci 0000:00:02.0: reg 0x30: [mem 0xfebe0000-0xfebeffff pref]
[    1.246463] pci 0000:00:02.0: Video device with shadowed ROM at [mem 0x000c0000-0x000dffff]
[    1.254756] pci 0000:00:03.0: [8086:100e] type 00 class 0x020000
[    1.256671] pci 0000:00:03.0: reg 0x10: [mem 0xfebc0000-0xfebdffff]
[    1.258665] pci 0000:00:03.0: reg 0x14: [io  0xc000-0xc03f]
[    1.264041] pci 0000:00:03.0: reg 0x30: [mem 0xfeb80000-0xfebbffff pref]
[    1.287047] ACPI: PCI: Interrupt link LNKA configured for IRQ 10
[    1.288889] ACPI: PCI: Interrupt link LNKB configured for IRQ 10
[    1.290658] ACPI: PCI: Interrupt link LNKC configured for IRQ 11
[    1.292466] ACPI: PCI: Interrupt link LNKD configured for IRQ 11
[    1.293109] ACPI: PCI: Interrupt link LNKS configured for IRQ 9
[    1.296770] iommu: Default domain type: Translated 
[    1.297662] iommu: DMA domain TLB invalidation policy: lazy mode 
[    1.301074] SCSI subsystem initialized
[    1.302402] ACPI: bus type USB registered
[    1.303197] usbcore: registered new interface driver usbfs
[    1.304190] usbcore: registered new interface driver hub
[    1.304743] usbcore: registered new device driver usb
[    1.305792] pps_core: LinuxPPS API ver. 1 registered
[    1.306575] pps_core: Software ver. 5.3.6 - Copyright 2005-2007 Rodolfo Giometti <giometti@linux.it>
[    1.308032] PTP clock support registered
[    1.309080] EDAC MC: Ver: 3.0.0
[    1.313212] NetLabel: Initializing
[    1.313794] NetLabel:  domain hash size = 128
[    1.314508] NetLabel:  protocols = UNLABELED CIPSOv4 CALIPSO
[    1.315593] NetLabel:  unlabeled traffic allowed by default
[    1.317226] PCI: Using ACPI for IRQ routing
[    1.318437] pci 0000:00:02.0: vgaarb: setting as boot VGA device
[    1.319429] pci 0000:00:02.0: vgaarb: bridge control possible
[    1.320363] pci 0000:00:02.0: vgaarb: VGA device added: decodes=io+mem,owns=io+mem,locks=none
[    1.320675] vgaarb: loaded
[    1.322253] hpet0: at MMIO 0xfed00000, IRQs 2, 8, 0
[    1.323137] hpet0: 3 comparators, 64-bit 100.000000 MHz counter
[    4.464581] Callback from call_rcu_tasks_rude() invoked.
[    4.464581] clocksource: Switched to clocksource kvm-clock
[    4.572845] Callback from call_rcu_tasks() invoked.
[    4.744945] VFS: Disk quotas dquot_6.6.0
[    4.745735] VFS: Dquot-cache hash table entries: 512 (order 0, 4096 bytes)
[    4.747442] pnp: PnP ACPI init
[    4.752194] pnp: PnP ACPI: found 6 devices
[    4.775970] clocksource: acpi_pm: mask: 0xffffff max_cycles: 0xffffff, max_idle_ns: 2085701024 ns
[    4.778148] NET: Registered PF_INET protocol family
[    4.779343] IP idents hash table entries: 32768 (order: 6, 262144 bytes, linear)
[    4.782722] tcp_listen_portaddr_hash hash table entries: 1024 (order: 4, 73728 bytes, linear)
[    4.784165] Table-perturb hash table entries: 65536 (order: 6, 262144 bytes, linear)
[    4.785566] TCP established hash table entries: 16384 (order: 5, 131072 bytes, linear)
[    4.787459] TCP bind hash table entries: 16384 (order: 9, 2359296 bytes, linear)
[    4.794478] TCP: Hash tables configured (established 16384 bind 16384)
[    4.795861] UDP hash table entries: 1024 (order: 5, 163840 bytes, linear)
[    4.797153] UDP-Lite hash table entries: 1024 (order: 5, 163840 bytes, linear)
[    4.798759] NET: Registered PF_UNIX/PF_LOCAL protocol family
[    4.801056] RPC: Registered named UNIX socket transport module.
[    4.802009] RPC: Registered udp transport module.
[    4.802752] RPC: Registered tcp transport module.
[    4.803458] RPC: Registered tcp NFSv4.1 backchannel transport module.
[    4.804500] pci_bus 0000:00: resource 4 [io  0x0000-0x0cf7 window]
[    4.805485] pci_bus 0000:00: resource 5 [io  0x0d00-0xffff window]
[    4.806450] pci_bus 0000:00: resource 6 [mem 0x000a0000-0x000bffff window]
[    4.807521] pci_bus 0000:00: resource 7 [mem 0x80000000-0xfebfffff window]
[    4.808611] pci_bus 0000:00: resource 8 [mem 0x100000000-0x17fffffff window]
[    4.810308] pci 0000:00:01.0: PIIX3: Enabling Passive Release
[    4.811231] pci 0000:00:00.0: Limiting direct PCI/PCI transfers
[    4.812361] PCI: CLS 0 bytes, default 64
[    4.813157] ACPI: bus type thunderbolt registered
[    4.814481] clocksource: tsc: mask: 0xffffffffffffffff max_cycles: 0x2cd5a8bb032, max_idle_ns: 440795365915 ns
[    4.824128] Initialise system trusted keyrings
[    4.825024] Key type blacklist registered
[    4.826025] workingset: timestamp_bits=36 max_order=19 bucket_order=0
[    4.827162] zbud: loaded
[    4.829072] squashfs: version 4.0 (2009/01/31) Phillip Lougher
[    4.831402] NFS: Registering the id_resolver key type
[    4.832226] Key type id_resolver registered
[    4.832932] Key type id_legacy registered
[    4.833624] nfs4filelayout_init: NFSv4 File Layout Driver Registering...
[    4.834723] nfs4flexfilelayout_init: NFSv4 Flexfile Layout Driver Registering...
[    4.836246] fuse: init (API version 7.38)
[    4.837334] SGI XFS with ACLs, security attributes, realtime, quota, no debug enabled
[    4.839550] 9p: Installing v9fs 9p2000 file system support
[    4.857712] Key type asymmetric registered
[    4.858436] Asymmetric key parser 'x509' registered
[    4.861959] alg: self-tests for CTR-KDF (hmac(sha256)) passed
[    4.863044] Block layer SCSI generic (bsg) driver version 0.4 loaded (major 243)
[    4.864540] io scheduler mq-deadline registered
[    4.865426] io scheduler bfq registered
[    4.868033] shpchp: Standard Hot Plug PCI Controller Driver version: 0.4
[    4.870166] IPMI message handler: version 39.2
[    4.871012] ipmi device interface
[    4.875476] input: Power Button as /devices/LNXSYSTM:00/LNXPWRBN:00/input/input0
[    4.877228] ACPI: button: Power Button [PWRF]
[    4.880059] ERST DBG: ERST support is disabled.
[    4.882197] Serial: 8250/16550 driver, 32 ports, IRQ sharing enabled
[    4.884181] 00:04: ttyS0 at I/O 0x3f8 (irq = 4, base_baud = 115200) is a 16550A
[    4.906814] Linux agpgart interface v0.103
[    4.909388] ACPI: bus type drm_connector registered
[    4.939511] brd: module loaded
[    4.956806] loop: module loaded
[    4.966948] scsi host0: ata_piix
[    4.968836] scsi host1: ata_piix
[    4.969876] ata1: PATA max MWDMA2 cmd 0x1f0 ctl 0x3f6 bmdma 0xc040 irq 14
[    4.970980] ata2: PATA max MWDMA2 cmd 0x170 ctl 0x376 bmdma 0xc048 irq 15
[    4.975000] tun: Universal TUN/TAP device driver, 1.6
[    4.976329] e100: Intel(R) PRO/100 Network Driver
[    4.977138] e100: Copyright(c) 1999-2006 Intel Corporation
[    4.978095] e1000: Intel(R) PRO/1000 Network Driver
[    4.978887] e1000: Copyright (c) 1999-2006 Intel Corporation.
[    5.132960] ata2: found unknown device (class 0)
[    5.134428] ata1: found unknown device (class 0)
[    5.135863] ata2.00: ATAPI: QEMU DVD-ROM, 2.5+, max UDMA/100
[    5.137483] ata1.00: ATA-7: QEMU HARDDISK, 2.5+, max UDMA/100
[    5.138430] ata1.00: 16777216 sectors, multi 16: LBA48 
[    5.141587] scsi 0:0:0:0: Direct-Access     ATA      QEMU HARDDISK    2.5+ PQ: 0 ANSI: 5
[    5.145092] scsi 0:0:0:0: Attached scsi generic sg0 type 0
[    5.148850] scsi 1:0:0:0: CD-ROM            QEMU     QEMU DVD-ROM     2.5+ PQ: 0 ANSI: 5
[    5.149244] sd 0:0:0:0: [sda] 16777216 512-byte logical blocks: (8.59 GB/8.00 GiB)
[    5.151934] sd 0:0:0:0: [sda] Write Protect is off
[    5.152991] sd 0:0:0:0: [sda] Write cache: enabled, read cache: enabled, doesn't support DPO or FUA
[    5.154538] sd 0:0:0:0: [sda] Preferred minimum I/O size 512 bytes
[    5.183156] sd 0:0:0:0: [sda] Attached SCSI disk
[    5.198278] scsi 1:0:0:0: Attached scsi generic sg1 type 5
[    5.427496] ACPI: \_SB_.LNKC: Enabled at IRQ 11
[    5.782681] e1000 0000:00:03.0 eth0: (PCI:33MHz:32-bit) 52:54:00:12:34:56
[    5.783885] e1000 0000:00:03.0 eth0: Intel(R) PRO/1000 Network Connection
[    5.785225] e1000e: Intel(R) PRO/1000 Network Driver
[    5.786048] e1000e: Copyright(c) 1999 - 2015 Intel Corporation.
[    5.787117] igb: Intel(R) Gigabit Ethernet Network Driver
[    5.787991] igb: Copyright (c) 2007-2014 Intel Corporation.
[    5.789157] PPP generic driver version 2.4.2
[    5.790516] VFIO - User Level meta-driver version: 0.3
[    5.792370] usbcore: registered new interface driver uas
[    5.793468] usbcore: registered new interface driver usb-storage
[    5.794752] i8042: PNP: PS/2 Controller [PNP0303:KBD,PNP0f13:MOU] at 0x60,0x64 irq 1,12
[    5.797427] serio: i8042 KBD port at 0x60,0x64 irq 1
[    5.798348] serio: i8042 AUX port at 0x60,0x64 irq 12
[    5.800750] mousedev: PS/2 mouse device common for all mice
[    5.803312] input: AT Translated Set 2 keyboard as /devices/platform/i8042/serio0/input/input1
[    5.805299] rtc_cmos 00:05: RTC can wake from S4
[    5.807900] input: VirtualPS/2 VMware VMMouse as /devices/platform/i8042/serio1/input/input4
[    5.808512] rtc_cmos 00:05: registered as rtc0
[    5.810306] rtc_cmos 00:05: setting system clock to 2023-03-14T05:53:21 UTC (1678773201)
[    5.812043] rtc_cmos 00:05: alarms up to one day, y3k, 242 bytes nvram, hpet irqs
[    5.812065] input: VirtualPS/2 VMware VMMouse as /devices/platform/i8042/serio1/input/input3
[    5.813450] i2c_dev: i2c /dev entries driver
[    5.815541] device-mapper: core: CONFIG_IMA_DISABLE_HTABLE is disabled. Duplicate IMA measurements will not be recorded in the IMA log.
[    5.817573] device-mapper: uevent: version 1.0.3
[    5.818712] device-mapper: ioctl: 4.47.0-ioctl (2022-07-28) initialised: dm-devel@redhat.com
[    5.820005] intel_pstate: CPU model not supported
[    5.821054] sdhci: Secure Digital Host Controller Interface driver
[    5.822032] sdhci: Copyright(c) Pierre Ossman
[    5.822969] sdhci-pltfm: SDHCI platform and OF driver helper
[    5.823997] ledtrig-cpu: registered to indicate activity on CPUs
[    5.825792] drop_monitor: Initializing network drop monitor service
[    5.827174] NET: Registered PF_INET6 protocol family
[    5.831579] Segment Routing with IPv6
[    5.832275] In-situ OAM (IOAM) with IPv6
[    5.833028] NET: Registered PF_PACKET protocol family
[    5.834283] 9pnet: Installing 9P2000 support
[    5.835116] Key type dns_resolver registered
[    5.837458] IPI shorthand broadcast: enabled
[    5.872583] sched_clock: Marking stable (5837386498, 31281983)->(5907490908, -38822427)
[    5.875544] registered taskstats version 1
[    5.876871] Loading compiled-in X.509 certificates
[    5.878401] zswap: loaded using pool lzo/zbud
[    5.917541] Key type .fscrypt registered
[    5.918234] Key type fscrypt-provisioning registered
[    5.921604] Key type encrypted registered
[    5.922334] ima: No TPM chip found, activating TPM-bypass!
[    5.923238] ima: Allocated hash algorithm: sha1
[    5.924084] ima: No architecture policies found
[    5.925047] evm: Initialising EVM extended attributes:
[    5.925880] evm: security.selinux
[    5.926432] evm: security.SMACK64
[    5.926966] evm: security.SMACK64EXEC
[    5.927546] evm: security.SMACK64TRANSMUTE
[    5.928208] evm: security.SMACK64MMAP
[    5.928843] evm: security.apparmor
[    5.929413] evm: security.ima
[    5.929905] evm: security.capability
[    5.930500] evm: HMAC attrs: 0x1
[    5.943966] PM:   Magic number: 15:898:870
[    5.945824] RAS: Correctable Errors collector initialized.
[    5.948994] md: Waiting for all devices to be available before autodetect
[    5.949760] md: If you don't use raid, use raid=noautodetect
[    5.950407] md: Autodetecting RAID arrays.
[    5.950921] md: autorun ...
[    5.951265] md: ... autorun DONE.
[    5.961914] EXT4-fs (sda): mounted filesystem 23a53bb9-f815-47a5-b74c-5e08f7731193 with ordered data mode. Quota mode: none.
[    5.963310] VFS: Mounted root (ext4 filesystem) readonly on device 8:0.
[    5.967233] devtmpfs: mounted
[    5.988050] Freeing unused decrypted memory: 2036K
[    5.992883] Freeing unused kernel image (initmem) memory: 3688K
[    5.993717] Write protecting the kernel read-only data: 45056k
[    6.000982] Freeing unused kernel image (text/rodata gap) memory: 2028K
[    6.004737] Freeing unused kernel image (rodata/data gap) memory: 1868K
[    6.179352] x86/mm: Checked W+X mappings: passed, no W+X pages found.
[    6.180306] Run /sbin/init as init process
[    6.347669] systemd[1]: RTC configured in localtime, applying delta of 0 minutes to system time.
[    6.406163] systemd[1]: systemd 239 (239-49.el8) running in system mode. (+PAM +AUDIT +SELINUX +IMA -APPARMOR +SMACK +SYSVINIT +UTMP +LIBCRYPTSETUP +GCRYPT +GNUTLS +ACL +XZ +LZ4 +SECCOMP +BLKID +ELFUTILS +KMOD +IDN2 -IDN +PCRE2 default-hierarchy=legacy)
[    6.409119] systemd[1]: Detected virtualization kvm.
[    6.409733] systemd[1]: Detected architecture x86-64.

Welcome to [0;31mCentOS Stream 8[0m!

[    6.481305] systemd[1]: Set hostname to <test>.
[    6.902981] systemd[1]: Created slice system-getty.slice.
[[0;32m  OK  [0m] Created slice system-getty.slice.
[    6.915176] systemd[1]: Listening on Process Core Dump Socket.
[[0;32m  OK  [0m] Listening on Process Core Dump Socket.
[    6.917560] systemd[1]: Created slice system-serial\x2dgetty.slice.
[[0;32m  OK  [0m] Created slice system-serial\x2dgetty.slice.
[    6.919646] systemd[1]: Set up automount Arbitrary Executable File Formats File System Automount Point.
[[0;32m  OK  [0m] Set up automount Arbitrary Executab…rmats File System Automount Point.
[    6.921551] systemd[1]: Listening on multipathd control socket.
[[0;32m  OK  [0m] Listening on multipathd control socket.
[    6.922895] systemd[1]: Listening on udev Kernel Socket.
[[0;32m  OK  [0m] Listening on udev Kernel Socket.
[[0;32m  OK  [0m] Listening on Journal Socket (/dev/log).
[[0;32m  OK  [0m] Listening on Device-mapper event daemon FIFOs.
[[0;32m  OK  [0m] Listening on RPCbind Server Activation Socket.
[[0;32m  OK  [0m] Listening on LVM2 poll daemon socket.
[[0;32m  OK  [0m] Reached target Swap.
[[0;32m  OK  [0m] Listening on Journal Socket.
         Starting Remount Root and Kernel File Systems...
         Mounting Huge Pages File System...
         Starting Setup Virtual Console...
         Mounting Kernel Debug File System...
         Mounting POSIX Message Queue File System...
         Starting Journal Service...
         Starting Monitoring of LVM2 mirrors…ng dmeventd or progress polling...
[[0;32m  OK  [0m] Reached target RPC Port Mapper.
[[0;32m  OK  [0m] Started Forward Password Requests to Wall Directory Watch.
         Starting Load Kernel Modules...
[[0;32m  OK  [0m] Created slice system-sshd\x2dkeygen.slice.
[[0;32m  OK  [0m] Listening on initctl Compatibility Named Pipe.
[[0;32m  OK  [0m] Created slice User and Session Slice.
[[0;32m  OK  [0m] Reached target Slices.
[[0;32m  OK  [0m] Listening on udev Control Socket.
         Starting udev Coldplug all Devices...
[[0;32m  OK  [0m] Started Journal Service.[    7.552725] EXT4-fs (sda): re-mounted 23a53bb9-f815-47a5-b74c-5e08f7731193. Quota mode: none.

[[0;32m  OK  [0m] Started Remount Root and Kernel File Systems.
[[0;32m  OK  [0m] Mounted Huge Pages File System.
[[0;32m  OK  [0m] Mounted Kernel Debug File System.
[[0;32m  OK  [0m] Mounted POSIX Message Queue File System.
[[0;32m  OK  [0m] Started Monitoring of LVM2 mirrors,…sing dmeventd or progress polling.
[[0;1;31mFAILED[0m] Failed to start Load Kernel Modules.
See 'systemctl status systemd-modules-load.service' for details.
         Starting Apply Kernel Variables...
         Mounting Kernel Configuration File System...
         Mounting FUSE Control File System...
         Starting Load/Save Random Seed...
         Starting Create Static Device Nodes in /dev...
         Starting Flush Journal to Persistent Storage...
[[0;32m  OK  [0m] Started Setup Virtual Console.
[[0;32m  OK  [0m] Started Apply Kernel Variables.
[[0;32m  OK  [0m] Mounted Kernel Configuration File System.
[[0;32m  OK  [0m] Mounted FUSE Control File System.
[[0;32m  OK  [0m] Started Load/Save Random Seed.
[[0;32m  OK  [0m] Started Create Static Device Nodes in /dev.
         Starting udev Kernel Device Manager...
[[0;32m  OK  [0m] Started Flush Journal to Persistent Storage.
[[0;32m  OK  [0m] Started udev Kernel Device Manager.
[[0;32m  OK  [0m] Started udev Coldplug all Devices.
         Starting udev Wait for Complete Device Initialization...
         Starting Show Plymouth Boot Screen...
[[0;32m  OK  [0m] Started Show Plymouth Boot Screen.
[[0;32m  OK  [0m] Reached target Local Encrypted Volumes.
[[0;32m  OK  [0m] Reached target Paths.
[[0;32m  OK  [0m] Started Forward Password Requests to Plymouth Directory Watch.
[[0;32m  OK  [0m] Found device /dev/ttyS0.
[[0;32m  OK  [0m] Started udev Wait for Complete Device Initialization.
[[0;32m  OK  [0m] Reached target Local File Systems (Pre).
[[0;32m  OK  [0m] Reached target Local File Systems.
         Starting Tell Plymouth To Write Out Runtime Data...
         Starting Restore /run/initramfs on shutdown...
         Starting Create Volatile Files and Directories...
[[0;32m  OK  [0m] Listening on Load/Save RF Kill Switch Status /dev/rfkill Watch.
[[0;32m  OK  [0m] Started Tell Plymouth To Write Out Runtime Data.
[[0;32m  OK  [0m] Started Restore /run/initramfs on shutdown.
[[0;32m  OK  [0m] Started Create Volatile Files and Directories.
         Mounting RPC Pipe File System...
         Starting RPC Bind...
         Starting Security Auditing Service...
[[0;32m  OK  [0m] Mounted RPC Pipe File System.
[[0;32m  OK  [0m] Reached target rpc_pipefs.target.
[[0;32m  OK  [0m] Started RPC Bind.
[[0;32m  OK  [0m] Started Security Auditing Service.
         Starting Update UTMP about System Boot/Shutdown...
[[0;32m  OK  [0m] Started Update UTMP about System Boot/Shutdown.
[[0;32m  OK  [0m] Reached target System Initialization.
[[0;32m  OK  [0m] Listening on D-Bus System Message Bus Socket.
[[0;32m  OK  [0m] Started daily update of the root trust anchor for DNSSEC.
[[0;32m  OK  [0m] Started Daily Cleanup of Temporary Directories.
[[0;32m  OK  [0m] Started dnf makecache --timer.
[[0;32m  OK  [0m] Reached target Timers.
[[0;32m  OK  [0m] Listening on SSSD Kerberos Cache Manager responder socket.
[[0;32m  OK  [0m] Reached target Sockets.
[[0;32m  OK  [0m] Reached target Basic System.
         Starting Login Service...
         Starting Auto-connect to subsystems…-NVME devices found during boot...
[[0;32m  OK  [0m] Started Machine Check Exception Logging Daemon.
[[0;32m  OK  [0m] Started D-Bus System Message Bus.
         Starting Authorization Manager...
         Starting Self Monitoring and Reporting Technology (SMART) Daemon...
         Starting NTP client/server...
[[0;32m  OK  [0m] Started irqbalance daemon.
[[0;32m  OK  [0m] Reached target sshd-keygen.target.
         Starting Network Manager...
[[0;32m  OK  [0m] Started Auto-connect to subsystems …FC-NVME devices found during boot.
         Starting update of the root trust a…or DNSSEC validation in unbound...
[[0;32m  OK  [0m] Started Login Service.
[[0;32m  OK  [0m] Started Self Monitoring and Reporting Technology (SMART) Daemon.
[[0;32m  OK  [0m] Started update of the root trust an… for DNSSEC validation in unbound.
[[0;32m  OK  [0m] Started Network Manager.
         Starting Network Manager Wait Online...
[[0;32m  OK  [0m] Reached target Network.
         Starting Dynamic System Tuning Daemon...
         Starting GSSAPI Proxy Daemon...
         Starting OpenSSH server daemon...
[[0;32m  OK  [0m] Started NTP client/server.
[[0;32m  OK  [0m] Started Authorization Manager.
         Starting Hostname Service...
[[0;32m  OK  [0m] Started GSSAPI Proxy Daemon.
[[0;32m  OK  [0m] Reached target NFS client services.
[[0;32m  OK  [0m] Reached target Remote File Systems (Pre).
[[0;32m  OK  [0m] Reached target Remote File Systems.
         Starting Permit User Sessions...
[[0;32m  OK  [0m] Started OpenSSH server daemon.
[[0;32m  OK  [0m] Started Permit User Sessions.
         Starting Hold until boot process finishes up...
         Starting Terminate Plymouth Boot Screen...
[[0;32m  OK  [0m] Started Command Scheduler.
[   10.580985] e1000: eth0 NIC Link is Up 1000 Mbps Full Duplex, Flow Control: RX
[   10.582226] IPv6: ADDRCONF(NETDEV_CHANGE): eth0: link becomes ready
[   10.901162] Spectre V2 : WARNING: Unprivileged eBPF is enabled with eIBRS on, data leaks possible via Spectre v2 BHB attacks!
[   10.902497] Spectre V2 : WARNING: Unprivileged eBPF is enabled with eIBRS on, data leaks possible via Spectre v2 BHB attacks!

CentOS Stream 8
Kernel 6.1.0-a0a6c76cf2a5+ on an x86_64

test login: [   30.512022] ------------[ cut here ]------------
[   30.512645] WARNING: CPU: 0 PID: 585 at drivers/iommu/iommufd/pages.c:294 __iopt_area_unfill_domain+0x152/0x560
[   30.513758] Modules linked in:
[   30.514102] CPU: 0 PID: 585 Comm: repro Not tainted 6.1.0-a0a6c76cf2a5+ #1
[   30.514844] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   30.515996] RIP: 0010:__iopt_area_unfill_domain+0x152/0x560
[   30.516616] Code: a1 2b ff 44 8b 64 24 54 48 8b 44 24 48 31 ff 44 89 e6 48 89 44 24 38 e8 6c a2 2b ff 45 85 e4 0f 85 eb 01 00 00 e8 ee a0 2b ff <0f> 0b e8 e7 a0 2b ff 48 8b 44 24 38 89 5c 24 58 89 18 8b 44 24 54
[   30.518588] RSP: 0018:ffffc9000100bae0 EFLAGS: 00010246
[   30.519136] RAX: 0000000000000000 RBX: 00000000ffffffff RCX: ffffffff81fe0bd5
[   30.519869] RDX: 0000000000000000 RSI: ffff8880135d8000 RDI: 0000000000000002
[   30.520618] RBP: ffffc9000100bd10 R08: 000000000003b5c5 R09: 0000000000000010
[   30.521391] R10: 000000000003b5a0 R11: 0000000000000024 R12: 0000000000000080
[   30.522137] R13: 0000000000000801 R14: 00000000000007ff R15: 0000000000000800
[   30.522882] FS:  00007f3777af9740(0000) GS:ffff88807dc00000(0000) knlGS:0000000000000000
[   30.523731] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   30.524333] CR2: 00007f3777c1e580 CR3: 000000000caae003 CR4: 0000000000770ef0
[   30.525147] PKRU: 55555554
[   30.525457] Call Trace:
[   30.525737]  <TASK>
[   30.526035]  ? __this_cpu_preempt_check+0x20/0x30
[   30.526600]  ? lock_is_held_type+0xe6/0x140
[   30.527068]  ? rcu_read_lock_sched_held+0x57/0x80
[   30.527593]  ? __mutex_lock+0x13a/0xf30
[   30.528035]  ? write_comp_data+0x2f/0x90
[   30.528479]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   30.529038]  iopt_area_unfill_domain+0x32/0x40
[   30.529530]  iopt_table_remove_domain+0x23f/0x4c0
[   30.530061]  iommufd_device_selftest_detach+0x3a/0x90
[   30.530642]  iommufd_selftest_destroy+0x55/0x70
[   30.531144]  iommufd_object_destroy_user+0xce/0x130
[   30.531677]  iommufd_destroy+0xa2/0xc0
[   30.532090]  iommufd_fops_ioctl+0x1ef/0x310
[   30.532558]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   30.533092]  ? write_comp_data+0x2f/0x90
[   30.533533]  __x64_sys_ioctl+0x10e/0x160
[   30.533992]  ? iommufd_get_object.part.6+0x1c0/0x1c0
[   30.534532]  do_syscall_64+0x3b/0x90
[   30.534799]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   30.535160] RIP: 0033:0x7f3777c1e59d
[   30.535416] Code: 00 c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d d3 08 0d 00 f7 d8 64 89 01 48
[   30.536646] RSP: 002b:00007ffd0d727918 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   30.537204] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f3777c1e59d
[   30.537703] RDX: 0000000020000140 RSI: 0000000000003b80 RDI: 0000000000000003
[   30.538205] RBP: 00007ffd0d727930 R08: 00007ffd0d727930 R09: 00007ffd0d727930
[   30.538730] R10: 00007ffd0d727930 R11: 0000000000000213 R12: 0000000000401180
[   30.539233] R13: 00007ffd0d727a50 R14: 0000000000000000 R15: 0000000000000000
[   30.539750]  </TASK>
[   30.539925] irq event stamp: 14767
[   30.540171] hardirqs last  enabled at (14775): [<ffffffff811b7f21>] __up_console_sem+0x91/0xb0
[   30.540821] hardirqs last disabled at (14802): [<ffffffff811b7f06>] __up_console_sem+0x76/0xb0
[   30.541435] softirqs last  enabled at (14800): [<ffffffff83000329>] __do_softirq+0x329/0x490
[   30.542038] softirqs last disabled at (14783): [<ffffffff81111082>] irq_exit_rcu+0xd2/0x100
[   30.542633] ---[ end trace 0000000000000000 ]---
[   30.543065] ------------[ cut here ]------------
[   30.543394] WARNING: CPU: 0 PID: 585 at drivers/iommu/iommufd/pages.c:1290 __iopt_area_unfill_domain+0x54f/0x560
[   30.544101] Modules linked in:
[   30.544325] CPU: 0 PID: 585 Comm: repro Tainted: G        W          6.1.0-a0a6c76cf2a5+ #1
[   30.544915] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   30.545692] RIP: 0010:__iopt_area_unfill_domain+0x54f/0x560
[   30.546089] Code: e8 86 9e 2b ff 85 db 0f 85 35 fb ff ff e8 09 9d 2b ff 0f 0b e9 29 fb ff ff e8 fd 9c 2b ff 0f 0b e9 69 fe ff ff e8 f1 9c 2b ff <0f> 0b e9 58 ff ff ff e8 65 2d dc 00 0f 1f 44 00 00 0f 1f 44 00 00
[   30.547371] RSP: 0018:ffffc9000100bae0 EFLAGS: 00010246
[   30.547750] RAX: 0000000000000000 RBX: 00000000ffffffff RCX: ffffffff81fe0d26
[   30.548242] RDX: 0000000000000000 RSI: ffff8880135d8000 RDI: 0000000000000002
[   30.548759] RBP: ffffc9000100bd10 R08: 000000000003b5c5 R09: 0000000000000010
[   30.549246] R10: 000000000003b5a0 R11: 0000000000000024 R12: 00000000000007ff
[   30.549738] R13: 0000000000000801 R14: 00000000000007ff R15: 0000000000000800
[   30.550238] FS:  00007f3777af9740(0000) GS:ffff88807dc00000(0000) knlGS:0000000000000000
[   30.550808] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   30.551216] CR2: 00007f3777c1e580 CR3: 000000000caae003 CR4: 0000000000770ef0
[   30.551724] PKRU: 55555554
[   30.551922] Call Trace:
[   30.552104]  <TASK>
[   30.552292]  ? __this_cpu_preempt_check+0x20/0x30
[   30.552643]  ? lock_is_held_type+0xe6/0x140
[   30.552985]  ? rcu_read_lock_sched_held+0x57/0x80
[   30.553333]  ? __mutex_lock+0x13a/0xf30
[   30.553620]  ? write_comp_data+0x2f/0x90
[   30.553910]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   30.554258]  iopt_area_unfill_domain+0x32/0x40
[   30.554599]  iopt_table_remove_domain+0x23f/0x4c0
[   30.554947]  iommufd_device_selftest_detach+0x3a/0x90
[   30.555332]  iommufd_selftest_destroy+0x55/0x70
[   30.555672]  iommufd_object_destroy_user+0xce/0x130
[   30.556028]  iommufd_destroy+0xa2/0xc0
[   30.556315]  iommufd_fops_ioctl+0x1ef/0x310
[   30.556622]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   30.556984]  ? write_comp_data+0x2f/0x90
[   30.557280]  __x64_sys_ioctl+0x10e/0x160
[   30.557586]  ? iommufd_get_object.part.6+0x1c0/0x1c0
[   30.557948]  do_syscall_64+0x3b/0x90
[   30.558220]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   30.558596] RIP: 0033:0x7f3777c1e59d
[   30.558858] Code: 00 c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d d3 08 0d 00 f7 d8 64 89 01 48
[   30.560131] RSP: 002b:00007ffd0d727918 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   30.560685] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f3777c1e59d
[   30.561173] RDX: 0000000020000140 RSI: 0000000000003b80 RDI: 0000000000000003
[   30.561665] RBP: 00007ffd0d727930 R08: 00007ffd0d727930 R09: 00007ffd0d727930
[   30.562158] R10: 00007ffd0d727930 R11: 0000000000000213 R12: 0000000000401180
[   30.562719] R13: 00007ffd0d727a50 R14: 0000000000000000 R15: 0000000000000000
[   30.563306]  </TASK>
[   30.563474] irq event stamp: 15239
[   30.563715] hardirqs last  enabled at (15247): [<ffffffff811b7f21>] __up_console_sem+0x91/0xb0
[   30.564308] hardirqs last disabled at (15254): [<ffffffff811b7f06>] __up_console_sem+0x76/0xb0
[   30.564924] softirqs last  enabled at (14800): [<ffffffff83000329>] __do_softirq+0x329/0x490
[   30.565525] softirqs last disabled at (14783): [<ffffffff81111082>] irq_exit_rcu+0xd2/0x100
[   30.566107] ---[ end trace 0000000000000000 ]---
[   30.574122] ------------[ cut here ]------------
[   30.574565] WARNING: CPU: 1 PID: 585 at drivers/iommu/iommufd/pages.c:178 batch_unpin.isra.23+0x151/0x1a0
[   30.575289] Modules linked in:
[   30.575531] CPU: 1 PID: 585 Comm: repro Tainted: G        W          6.1.0-a0a6c76cf2a5+ #1
[   30.576110] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   30.576941] RIP: 0010:batch_unpin.isra.23+0x151/0x1a0
[   30.577331] Code: e8 c4 be 2b ff 48 8b 45 d0 48 85 c0 75 17 e8 26 bd 2b ff 48 8b 7d c8 48 89 de e8 fa bd 2b ff 48 39 5d c8 73 07 e8 0f bd 2b ff <0f> 0b e8 08 bd 2b ff 4d 29 e5 31 ff 41 83 c6 01 4c 89 ee 31 db e8
[   30.578657] RSP: 0018:ffffc9000100b9d8 EFLAGS: 00010246
[   30.579029] RAX: 0000000000000000 RBX: ffffffffffffffff RCX: ffffffff81fded8c
[   30.579552] RDX: 0000000000000000 RSI: ffff8880135d8000 RDI: 0000000000000002
[   30.580043] RBP: ffffc9000100ba20 R08: 0000000000000000 R09: ffff88807dd3b890
[   30.580537] R10: 0000000000000eb9 R11: 0000000000000000 R12: 0000000000000001
[   30.581086] R13: 0000000000000001 R14: 0000000000000000 R15: ffff888009f84c00
[   30.581581] FS:  0000000000000000(0000) GS:ffff88807dd00000(0000) knlGS:0000000000000000
[   30.582176] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   30.582590] CR2: 00007f3777cf0500 CR3: 0000000003c12005 CR4: 0000000000770ee0
[   30.583113] PKRU: 55555554
[   30.583313] Call Trace:
[   30.583497]  <TASK>
[   30.583665]  iopt_pages_unfill_xarray+0x39f/0x5c0
[   30.584071]  ? write_comp_data+0x2f/0x90
[   30.584368]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   30.584736]  ? write_comp_data+0x2f/0x90
[   30.585070]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   30.585410]  ? interval_tree_remove+0x291/0x4e0
[   30.585752]  ? write_comp_data+0x2f/0x90
[   30.586073]  iopt_area_remove_access+0x108/0x120
[   30.586505]  iommufd_access_unpin_pages+0x177/0x210
[   30.586877]  iommufd_test_access_unmap+0xe0/0x130
[   30.587255]  ? iommufd_test_access_unmap+0x130/0x130
[   30.587624]  iommufd_test_staccess_release+0x39/0x60
[   30.587991]  __fput+0x11f/0x450
[   30.588267]  ____fput+0x1e/0x30
[   30.588509]  task_work_run+0xb6/0x120
[   30.588835]  do_exit+0x521/0x1340
[   30.589092]  ? lockdep_hardirqs_on+0x8a/0x110
[   30.589447]  ? trace_hardirqs_on+0x3f/0x100
[   30.589765]  do_group_exit+0x5e/0xf0
[   30.590033]  __x64_sys_exit_group+0x25/0x30
[   30.590338]  do_syscall_64+0x3b/0x90
[   30.590637]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   30.590992] RIP: 0033:0x7f3777be6cf6
[   30.591248] Code: Unable to access opcode bytes at 0x7f3777be6ccc.
[   30.591695] RSP: 002b:00007ffd0d7278d8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
[   30.592228] RAX: ffffffffffffffda RBX: 00007f3777cf1490 RCX: 00007f3777be6cf6
[   30.592769] RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
[   30.593270] RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffff80
[   30.593800] R10: 0000000000000004 R11: 0000000000000246 R12: 00007f3777cf1490
[   30.594293] R13: 0000000000000001 R14: 00007f3777cf4e88 R15: 0000000000000000
[   30.594841]  </TASK>
[   30.595009] irq event stamp: 21557
[   30.595253] hardirqs last  enabled at (21565): [<ffffffff811b7f21>] __up_console_sem+0x91/0xb0
[   30.595921] hardirqs last disabled at (21572): [<ffffffff811b7f06>] __up_console_sem+0x76/0xb0
[   30.596550] softirqs last  enabled at (21418): [<ffffffff83000329>] __do_softirq+0x329/0x490
[   30.597210] softirqs last disabled at (21589): [<ffffffff81111082>] irq_exit_rcu+0xd2/0x100
[   30.597803] ---[ end trace 0000000000000000 ]---
[   30.598246] ------------[ cut here ]------------
[   30.598582] WARNING: CPU: 1 PID: 585 at drivers/iommu/iommufd/pages.c:886 update_unpinned+0x75/0x80
[   30.599241] Modules linked in:
[   30.599484] CPU: 1 PID: 585 Comm: repro Tainted: G        W          6.1.0-a0a6c76cf2a5+ #1
[   30.600067] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   30.600928] RIP: 0010:update_unpinned+0x75/0x80
[   30.601294] Code: ac 2b ff 48 89 de 31 c9 31 d2 4c 29 e6 4c 89 ef e8 70 fb ff ff e8 bb ac 2b ff 5b 41 5c 41 5d 5d c3 cc cc cc cc e8 ab ac 2b ff <0f> 0b eb e7 0f 1f 80 00 00 00 00 0f 1f 44 00 00 55 48 89 e5 41 57
[   30.602593] RSP: 0018:ffffc9000100ba08 EFLAGS: 00010246
[   30.602966] RAX: 0000000000000000 RBX: 0000000000000000 RCX: ffffffff81fdfdcf
[   30.603498] RDX: 0000000000000000 RSI: ffff8880135d8000 RDI: 0000000000000002
[   30.603987] RBP: ffffc9000100ba20 R08: 0000000000000000 R09: ffff88807dd3b890
[   30.604503] R10: 0000000000000eb9 R11: 0000000000000000 R12: ffffffffffffffff
[   30.605021] R13: ffff888009f84c00 R14: 0000000000000002 R15: 0000000000000002
[   30.605511] FS:  0000000000000000(0000) GS:ffff88807dd00000(0000) knlGS:0000000000000000
[   30.606095] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   30.606513] CR2: 00007f3777cf0500 CR3: 0000000003c12005 CR4: 0000000000770ee0
[   30.607036] PKRU: 55555554
[   30.607250] Call Trace:
[   30.607431]  <TASK>
[   30.607600]  iopt_pages_unfill_xarray+0x522/0x5c0
[   30.608005]  ? write_comp_data+0x2f/0x90
[   30.608301]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   30.608644]  ? write_comp_data+0x2f/0x90
[   30.609005]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   30.609348]  ? interval_tree_remove+0x291/0x4e0
[   30.609683]  ? write_comp_data+0x2f/0x90
[   30.610005]  iopt_area_remove_access+0x108/0x120
[   30.610369]  iommufd_access_unpin_pages+0x177/0x210
[   30.610771]  iommufd_test_access_unmap+0xe0/0x130
[   30.611154]  ? iommufd_test_access_unmap+0x130/0x130
[   30.611528]  iommufd_test_staccess_release+0x39/0x60
[   30.611888]  __fput+0x11f/0x450
[   30.612163]  ____fput+0x1e/0x30
[   30.612406]  task_work_run+0xb6/0x120
[   30.612742]  do_exit+0x521/0x1340
[   30.612996]  ? lockdep_hardirqs_on+0x8a/0x110
[   30.613352]  ? trace_hardirqs_on+0x3f/0x100
[   30.613670]  do_group_exit+0x5e/0xf0
[   30.613941]  __x64_sys_exit_group+0x25/0x30
[   30.614268]  do_syscall_64+0x3b/0x90
[   30.614565]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   30.614936] RIP: 0033:0x7f3777be6cf6
[   30.615206] Code: Unable to access opcode bytes at 0x7f3777be6ccc.
[   30.615663] RSP: 002b:00007ffd0d7278d8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
[   30.616187] RAX: ffffffffffffffda RBX: 00007f3777cf1490 RCX: 00007f3777be6cf6
[   30.616723] RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
[   30.617217] RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffff80
[   30.617758] R10: 0000000000000004 R11: 0000000000000246 R12: 00007f3777cf1490
[   30.618254] R13: 0000000000000001 R14: 00007f3777cf4e88 R15: 0000000000000000
[   30.618804]  </TASK>
[   30.618970] irq event stamp: 22113
[   30.619220] hardirqs last  enabled at (22121): [<ffffffff811b7f21>] __up_console_sem+0x91/0xb0
[   30.619857] hardirqs last disabled at (22128): [<ffffffff811b7f06>] __up_console_sem+0x76/0xb0
[   30.620468] softirqs last  enabled at (21974): [<ffffffff83000329>] __do_softirq+0x329/0x490
[   30.621110] softirqs last disabled at (21917): [<ffffffff81111082>] irq_exit_rcu+0xd2/0x100
[   30.621710] ---[ end trace 0000000000000000 ]---
[   30.622242] ------------[ cut here ]------------
[   30.622651] WARNING: CPU: 1 PID: 585 at drivers/iommu/iommufd/pages.c:1181 iopt_release_pages+0x159/0x190
[   30.623372] Modules linked in:
[   30.623611] CPU: 1 PID: 585 Comm: repro Tainted: G        W          6.1.0-a0a6c76cf2a5+ #1
[   30.624254] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   30.625256] RIP: 0010:iopt_release_pages+0x159/0x190
[   30.625630] Code: b5 11 ff eb cb e8 87 90 2b ff be 03 00 00 00 4c 89 f7 e8 6a 8b ce ff eb b7 e8 73 90 2b ff 0f 0b e9 ed fe ff ff e8 67 90 2b ff <0f> 0b e9 00 ff ff ff e8 5b 90 2b ff 0f 0b e9 07 ff ff ff e8 4f 90
[   30.626938] RSP: 0018:ffffc9000100bc88 EFLAGS: 00010246
[   30.627313] RAX: 0000000000000000 RBX: ffff888009f84c00 RCX: ffffffff81fe1957
[   30.627838] RDX: 0000000000000000 RSI: ffff8880135d8000 RDI: 0000000000000002
[   30.628328] RBP: ffffc9000100bca8 R08: ffff88800950d780 R09: 0000000080150013
[   30.628862] R10: 0000000000000001 R11: 0000000000000000 R12: ffffffffffffffff
[   30.629356] R13: 0000000001000000 R14: 00000000017fffff R15: 0000000000000000
[   30.629877] FS:  0000000000000000(0000) GS:ffff88807dd00000(0000) knlGS:0000000000000000
[   30.630434] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   30.630876] CR2: 00007f3777cf0500 CR3: 0000000003c12005 CR4: 0000000000770ee0
[   30.631377] PKRU: 55555554
[   30.631577] Call Trace:
[   30.631783]  <TASK>
[   30.631947]  iopt_unmap_iova_range+0x1ef/0x2e0
[   30.632284]  iopt_unmap_all+0x2f/0x60
[   30.632556]  iommufd_ioas_destroy+0x2c/0x70
[   30.632914]  iommufd_fops_release+0xd4/0x170
[   30.633236]  ? iommufd_ctx_get+0x30/0x30
[   30.633531]  __fput+0x11f/0x450
[   30.633784]  ____fput+0x1e/0x30
[   30.634059]  task_work_run+0xb6/0x120
[   30.634349]  do_exit+0x521/0x1340
[   30.634608]  ? lockdep_hardirqs_on+0x8a/0x110
[   30.634940]  ? trace_hardirqs_on+0x3f/0x100
[   30.635279]  do_group_exit+0x5e/0xf0
[   30.635554]  __x64_sys_exit_group+0x25/0x30
[   30.635854]  do_syscall_64+0x3b/0x90
[   30.636147]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   30.636508] RIP: 0033:0x7f3777be6cf6
[   30.636786] Code: Unable to access opcode bytes at 0x7f3777be6ccc.
[   30.637247] RSP: 002b:00007ffd0d7278d8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
[   30.637782] RAX: ffffffffffffffda RBX: 00007f3777cf1490 RCX: 00007f3777be6cf6
[   30.638272] RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
[   30.638783] RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffff80
[   30.639278] R10: 0000000000000004 R11: 0000000000000246 R12: 00007f3777cf1490
[   30.639809] R13: 0000000000000001 R14: 00007f3777cf4e88 R15: 0000000000000000
[   30.640334]  </TASK>
[   30.640528] irq event stamp: 23165
[   30.640796] hardirqs last  enabled at (23175): [<ffffffff811b7f21>] __up_console_sem+0x91/0xb0
[   30.641416] hardirqs last disabled at (23182): [<ffffffff811b7f06>] __up_console_sem+0x76/0xb0
[   30.642057] softirqs last  enabled at (22840): [<ffffffff83000329>] __do_softirq+0x329/0x490
[   30.642692] softirqs last disabled at (22245): [<ffffffff81111082>] irq_exit_rcu+0xd2/0x100
[   30.643279] ---[ end trace 0000000000000000 ]---
[   30.708973] ------------[ cut here ]------------
[   30.709492] WARNING: CPU: 1 PID: 587 at drivers/iommu/iommufd/pages.c:294 __iopt_area_unfill_domain+0x152/0x560
[   30.710205] Modules linked in:
[   30.710450] CPU: 1 PID: 587 Comm: repro Tainted: G        W          6.1.0-a0a6c76cf2a5+ #1
[   30.711162] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   30.711985] RIP: 0010:__iopt_area_unfill_domain+0x152/0x560
[   30.712385] Code: a1 2b ff 44 8b 64 24 54 48 8b 44 24 48 31 ff 44 89 e6 48 89 44 24 38 e8 6c a2 2b ff 45 85 e4 0f 85 eb 01 00 00 e8 ee a0 2b ff <0f> 0b e8 e7 a0 2b ff 48 8b 44 24 38 89 5c 24 58 89 18 8b 44 24 54
[   30.713713] RSP: 0018:ffffc90000f63ae0 EFLAGS: 00010246
[   30.714106] RAX: 0000000000000000 RBX: 00000000ffffffff RCX: ffffffff81fe0bd5
[   30.714633] RDX: 0000000000000000 RSI: ffff8880135dd300 RDI: 0000000000000002
[   30.715163] RBP: ffffc90000f63d10 R08: 000000000003b5c5 R09: 0000000000000002
[   30.715665] R10: 000000000003b5a0 R11: 0000000000000024 R12: 000000000000005e
[   30.716196] R13: 0000000000000801 R14: 00000000000007ff R15: 0000000000000800
[   30.716716] FS:  00007f3777af9740(0000) GS:ffff88807dd00000(0000) knlGS:0000000000000000
[   30.717310] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   30.717721] CR2: 00007f3777c1e580 CR3: 000000000c99c002 CR4: 0000000000770ee0
[   30.718254] PKRU: 55555554
[   30.718454] Call Trace:
[   30.718650]  <TASK>
[   30.718836]  ? __this_cpu_preempt_check+0x20/0x30
[   30.719219]  ? lock_is_held_type+0xe6/0x140
[   30.719558]  ? rcu_read_lock_sched_held+0x57/0x80
[   30.719908]  ? __mutex_lock+0x13a/0xf30
[   30.720192]  ? write_comp_data+0x2f/0x90
[   30.720510]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   30.720883]  iopt_area_unfill_domain+0x32/0x40
[   30.721222]  iopt_table_remove_domain+0x23f/0x4c0
[   30.721601]  iommufd_device_selftest_detach+0x3a/0x90
[   30.721984]  iommufd_selftest_destroy+0x55/0x70
[   30.722332]  iommufd_object_destroy_user+0xce/0x130
[   30.722739]  iommufd_destroy+0xa2/0xc0
[   30.723029]  iommufd_fops_ioctl+0x1ef/0x310
[   30.723341]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   30.723784]  ? write_comp_data+0x2f/0x90
[   30.724084]  __x64_sys_ioctl+0x10e/0x160
[   30.724378]  ? iommufd_get_object.part.6+0x1c0/0x1c0
[   30.724795]  do_syscall_64+0x3b/0x90
[   30.725067]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   30.725436] RIP: 0033:0x7f3777c1e59d
[   30.725715] Code: 00 c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d d3 08 0d 00 f7 d8 64 89 01 48
[   30.727064] RSP: 002b:00007ffd0d727918 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   30.727582] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f3777c1e59d
[   30.728110] RDX: 0000000020000140 RSI: 0000000000003b80 RDI: 0000000000000003
[   30.728604] RBP: 00007ffd0d727930 R08: 00007ffd0d727930 R09: 00007ffd0d727930
[   30.729140] R10: 00007ffd0d727930 R11: 0000000000000213 R12: 0000000000401180
[   30.729640] R13: 00007ffd0d727a50 R14: 0000000000000000 R15: 0000000000000000
[   30.730178]  </TASK>
[   30.730346] irq event stamp: 14793
[   30.730603] hardirqs last  enabled at (14801): [<ffffffff811b7f21>] __up_console_sem+0x91/0xb0
[   30.731245] hardirqs last disabled at (14808): [<ffffffff811b7f06>] __up_console_sem+0x76/0xb0
[   30.731852] softirqs last  enabled at (14450): [<ffffffff83000329>] __do_softirq+0x329/0x490
[   30.732499] softirqs last disabled at (14445): [<ffffffff81111082>] irq_exit_rcu+0xd2/0x100
[   30.733091] ---[ end trace 0000000000000000 ]---
[   30.733531] ------------[ cut here ]------------
[   30.733863] WARNING: CPU: 1 PID: 587 at drivers/iommu/iommufd/pages.c:1290 __iopt_area_unfill_domain+0x54f/0x560
[   30.734625] Modules linked in:
[   30.734860] CPU: 1 PID: 587 Comm: repro Tainted: G        W          6.1.0-a0a6c76cf2a5+ #1
[   30.735438] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   30.736260] RIP: 0010:__iopt_area_unfill_domain+0x54f/0x560
[   30.736716] Code: e8 86 9e 2b ff 85 db 0f 85 35 fb ff ff e8 09 9d 2b ff 0f 0b e9 29 fb ff ff e8 fd 9c 2b ff 0f 0b e9 69 fe ff ff e8 f1 9c 2b ff <0f> 0b e9 58 ff ff ff e8 65 2d dc 00 0f 1f 44 00 00 0f 1f 44 00 00
[   30.738013] RSP: 0018:ffffc90000f63ae0 EFLAGS: 00010246
[   30.738384] RAX: 0000000000000000 RBX: 00000000ffffffff RCX: ffffffff81fe0d26
[   30.738920] RDX: 0000000000000000 RSI: ffff8880135dd300 RDI: 0000000000000002
[   30.739424] RBP: ffffc90000f63d10 R08: 000000000003b5c5 R09: 0000000000000002
[   30.739955] R10: 000000000003b5a0 R11: 0000000000000024 R12: 00000000000007ff
[   30.740445] R13: 0000000000000801 R14: 00000000000007ff R15: 0000000000000800
[   30.740977] FS:  00007f3777af9740(0000) GS:ffff88807dd00000(0000) knlGS:0000000000000000
[   30.741551] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   30.741959] CR2: 00007f3777c1e580 CR3: 000000000c99c002 CR4: 0000000000770ee0
[   30.742512] PKRU: 55555554
[   30.742719] Call Trace:
[   30.742903]  <TASK>
[   30.743101]  ? __this_cpu_preempt_check+0x20/0x30
[   30.743488]  ? lock_is_held_type+0xe6/0x140
[   30.743808]  ? rcu_read_lock_sched_held+0x57/0x80
[   30.744159]  ? __mutex_lock+0x13a/0xf30
[   30.744477]  ? write_comp_data+0x2f/0x90
[   30.744794]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   30.745146]  iopt_area_unfill_domain+0x32/0x40
[   30.745506]  iopt_table_remove_domain+0x23f/0x4c0
[   30.745855]  iommufd_device_selftest_detach+0x3a/0x90
[   30.746230]  iommufd_selftest_destroy+0x55/0x70
[   30.746608]  iommufd_object_destroy_user+0xce/0x130
[   30.746970]  iommufd_destroy+0xa2/0xc0
[   30.747257]  iommufd_fops_ioctl+0x1ef/0x310
[   30.747607]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   30.747953]  ? write_comp_data+0x2f/0x90
[   30.748248]  __x64_sys_ioctl+0x10e/0x160
[   30.748548]  ? iommufd_get_object.part.6+0x1c0/0x1c0
[   30.748958]  do_syscall_64+0x3b/0x90
[   30.749229]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   30.749595] RIP: 0033:0x7f3777c1e59d
[   30.749890] Code: 00 c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d d3 08 0d 00 f7 d8 64 89 01 48
[   30.751192] RSP: 002b:00007ffd0d727918 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   30.751733] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f3777c1e59d
[   30.752261] RDX: 0000000020000140 RSI: 0000000000003b80 RDI: 0000000000000003
[   30.752789] RBP: 00007ffd0d727930 R08: 00007ffd0d727930 R09: 00007ffd0d727930
[   30.753491] R10: 00007ffd0d727930 R11: 0000000000000213 R12: 0000000000401180
[   30.753984] R13: 00007ffd0d727a50 R14: 0000000000000000 R15: 0000000000000000
[   30.754542]  </TASK>
[   30.754708] irq event stamp: 15255
[   30.754963] hardirqs last  enabled at (15263): [<ffffffff811b7f21>] __up_console_sem+0x91/0xb0
[   30.755596] hardirqs last disabled at (15270): [<ffffffff811b7f06>] __up_console_sem+0x76/0xb0
[   30.756228] softirqs last  enabled at (15228): [<ffffffff83000329>] __do_softirq+0x329/0x490
[   30.756865] softirqs last disabled at (15287): [<ffffffff81111082>] irq_exit_rcu+0xd2/0x100
[   30.757485] ---[ end trace 0000000000000000 ]---
[   30.762024] ------------[ cut here ]------------
[   30.762383] WARNING: CPU: 1 PID: 587 at drivers/iommu/iommufd/pages.c:178 batch_unpin.isra.23+0x151/0x1a0
[   30.763099] Modules linked in:
[   30.763336] CPU: 1 PID: 587 Comm: repro Tainted: G        W          6.1.0-a0a6c76cf2a5+ #1
[   30.763956] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   30.764781] RIP: 0010:batch_unpin.isra.23+0x151/0x1a0
[   30.765190] Code: e8 c4 be 2b ff 48 8b 45 d0 48 85 c0 75 17 e8 26 bd 2b ff 48 8b 7d c8 48 89 de e8 fa bd 2b ff 48 39 5d c8 73 07 e8 0f bd 2b ff <0f> 0b e8 08 bd 2b ff 4d 29 e5 31 ff 41 83 c6 01 4c 89 ee 31 db e8
[   30.766487] RSP: 0018:ffffc90000f639d8 EFLAGS: 00010246
[   30.766911] RAX: 0000000000000000 RBX: ffffffffffffffff RCX: ffffffff81fded8c
[   30.767557] RDX: 0000000000000000 RSI: ffff8880135dd300 RDI: 0000000000000002
[   30.768063] RBP: ffffc90000f63a20 R08: 0000000000000000 R09: ffff88807dd3b890
[   30.768685] R10: 0000000000000eee R11: 0000000000000000 R12: 0000000000000001
[   30.769184] R13: 0000000000000001 R14: 0000000000000000 R15: ffff888005ec9c00
[   30.769708] FS:  0000000000000000(0000) GS:ffff88807dd00000(0000) knlGS:0000000000000000
[   30.770401] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   30.770833] CR2: 00007f3777cf0500 CR3: 0000000003c12005 CR4: 0000000000770ee0
[   30.771339] PKRU: 55555554
[   30.771571] Call Trace:
[   30.771756]  <TASK>
[   30.771937]  iopt_pages_unfill_xarray+0x39f/0x5c0
[   30.772421]  ? write_comp_data+0x2f/0x90
[   30.772758]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   30.773102]  ? write_comp_data+0x2f/0x90
[   30.773400]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   30.773798]  ? interval_tree_remove+0x291/0x4e0
[   30.774203]  ? write_comp_data+0x2f/0x90
[   30.774511]  iopt_area_remove_access+0x108/0x120
[   30.774883]  iommufd_access_unpin_pages+0x177/0x210
[   30.775267]  iommufd_test_access_unmap+0xe0/0x130
[   30.775620]  ? iommufd_test_access_unmap+0x130/0x130
[   30.776012]  iommufd_test_staccess_release+0x39/0x60
[   30.776379]  __fput+0x11f/0x450
[   30.776676]  ____fput+0x1e/0x30
[   30.777036]  task_work_run+0xb6/0x120
[   30.777322]  do_exit+0x521/0x1340
[   30.777575]  ? lockdep_hardirqs_on+0x8a/0x110
[   30.777898]  ? trace_hardirqs_on+0x3f/0x100
[   30.778255]  do_group_exit+0x5e/0xf0
[   30.778544]  __x64_sys_exit_group+0x25/0x30
[   30.778864]  do_syscall_64+0x3b/0x90
[   30.779169]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   30.779551] RIP: 0033:0x7f3777be6cf6
[   30.779827] Code: Unable to access opcode bytes at 0x7f3777be6ccc.
[   30.780428] RSP: 002b:00007ffd0d7278d8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
[   30.780999] RAX: ffffffffffffffda RBX: 00007f3777cf1490 RCX: 00007f3777be6cf6
[   30.781536] RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
[   30.782042] RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffff80
[   30.782593] R10: 0000000000000004 R11: 0000000000000246 R12: 00007f3777cf1490
[   30.783098] R13: 0000000000000001 R14: 00007f3777cf4e88 R15: 0000000000000000
[   30.783762]  </TASK>
[   30.783933] irq event stamp: 21199
[   30.784183] hardirqs last  enabled at (21207): [<ffffffff811b7f21>] __up_console_sem+0x91/0xb0
[   30.784844] hardirqs last disabled at (21216): [<ffffffff811b7f06>] __up_console_sem+0x76/0xb0
[   30.785462] softirqs last  enabled at (20872): [<ffffffff83000329>] __do_softirq+0x329/0x490
[   30.786104] softirqs last disabled at (20867): [<ffffffff81111082>] irq_exit_rcu+0xd2/0x100
[   30.786832] ---[ end trace 0000000000000000 ]---
[   30.787276] ------------[ cut here ]------------
[   30.787614] WARNING: CPU: 1 PID: 587 at drivers/iommu/iommufd/pages.c:886 update_unpinned+0x75/0x80
[   30.788295] Modules linked in:
[   30.788530] CPU: 1 PID: 587 Comm: repro Tainted: G        W          6.1.0-a0a6c76cf2a5+ #1
[   30.789173] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   30.790127] RIP: 0010:update_unpinned+0x75/0x80
[   30.790481] Code: ac 2b ff 48 89 de 31 c9 31 d2 4c 29 e6 4c 89 ef e8 70 fb ff ff e8 bb ac 2b ff 5b 41 5c 41 5d 5d c3 cc cc cc cc e8 ab ac 2b ff <0f> 0b eb e7 0f 1f 80 00 00 00 00 0f 1f 44 00 00 55 48 89 e5 41 57
[   30.791824] RSP: 0018:ffffc90000f63a08 EFLAGS: 00010246
[   30.792245] RAX: 0000000000000000 RBX: 0000000000000000 RCX: ffffffff81fdfdcf
[   30.792771] RDX: 0000000000000000 RSI: ffff8880135dd300 RDI: 0000000000000002
[   30.793347] RBP: ffffc90000f63a20 R08: 0000000000000000 R09: ffff88807dd3b890
[   30.793935] R10: 0000000000000eee R11: 0000000000000000 R12: ffffffffffffffff
[   30.794484] R13: ffff888005ec9c00 R14: 0000000000000002 R15: 0000000000000002
[   30.795003] FS:  0000000000000000(0000) GS:ffff88807dd00000(0000) knlGS:0000000000000000
[   30.795615] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   30.796185] CR2: 00007f3777cf0500 CR3: 0000000003c12005 CR4: 0000000000770ee0
[   30.796756] PKRU: 55555554
[   30.796969] Call Trace:
[   30.797162]  <TASK>
[   30.797327]  iopt_pages_unfill_xarray+0x522/0x5c0
[   30.797749]  ? write_comp_data+0x2f/0x90
[   30.798058]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   30.798416]  ? write_comp_data+0x2f/0x90
[   30.798754]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   30.799174]  ? interval_tree_remove+0x291/0x4e0
[   30.799597]  ? write_comp_data+0x2f/0x90
[   30.799934]  iopt_area_remove_access+0x108/0x120
[   30.800295]  iommufd_access_unpin_pages+0x177/0x210
[   30.800706]  iommufd_test_access_unmap+0xe0/0x130
[   30.801104]  ? iommufd_test_access_unmap+0x130/0x130
[   30.801486]  iommufd_test_staccess_release+0x39/0x60
[   30.801860]  __fput+0x11f/0x450
[   30.802150]  ____fput+0x1e/0x30
[   30.802402]  task_work_run+0xb6/0x120
[   30.802714]  do_exit+0x521/0x1340
[   30.803061]  ? lockdep_hardirqs_on+0x8a/0x110
[   30.803427]  ? trace_hardirqs_on+0x3f/0x100
[   30.803757]  do_group_exit+0x5e/0xf0
[   30.804036]  __x64_sys_exit_group+0x25/0x30
[   30.804399]  do_syscall_64+0x3b/0x90
[   30.804731]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   30.805167] RIP: 0033:0x7f3777be6cf6
[   30.805481] Code: Unable to access opcode bytes at 0x7f3777be6ccc.
[   30.805924] RSP: 002b:00007ffd0d7278d8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
[   30.806509] RAX: ffffffffffffffda RBX: 00007f3777cf1490 RCX: 00007f3777be6cf6
[   30.807024] RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
[   30.807566] RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffff80
[   30.808092] R10: 0000000000000004 R11: 0000000000000246 R12: 00007f3777cf1490
[   30.808785] R13: 0000000000000001 R14: 00007f3777cf4e88 R15: 0000000000000000
[   30.809315]  </TASK>
[   30.809491] irq event stamp: 21691
[   30.809789] hardirqs last  enabled at (21699): [<ffffffff811b7f21>] __up_console_sem+0x91/0xb0
[   30.810417] hardirqs last disabled at (21706): [<ffffffff811b7f06>] __up_console_sem+0x76/0xb0
[   30.811103] softirqs last  enabled at (21600): [<ffffffff83000329>] __do_softirq+0x329/0x490
[   30.811790] softirqs last disabled at (21591): [<ffffffff81111082>] irq_exit_rcu+0xd2/0x100
[   30.812424] ---[ end trace 0000000000000000 ]---
[   30.813078] ------------[ cut here ]------------
[   30.813433] WARNING: CPU: 1 PID: 587 at drivers/iommu/iommufd/pages.c:1181 iopt_release_pages+0x159/0x190
[   30.814201] Modules linked in:
[   30.814468] CPU: 1 PID: 587 Comm: repro Tainted: G        W          6.1.0-a0a6c76cf2a5+ #1
[   30.815074] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   30.815922] RIP: 0010:iopt_release_pages+0x159/0x190
[   30.816435] Code: b5 11 ff eb cb e8 87 90 2b ff be 03 00 00 00 4c 89 f7 e8 6a 8b ce ff eb b7 e8 73 90 2b ff 0f 0b e9 ed fe ff ff e8 67 90 2b ff <0f> 0b e9 00 ff ff ff e8 5b 90 2b ff 0f 0b e9 07 ff ff ff e8 4f 90
[   30.817806] RSP: 0018:ffffc90000f63c88 EFLAGS: 00010246
[   30.818195] RAX: 0000000000000000 RBX: ffff888005ec9c00 RCX: ffffffff81fe1957
[   30.818763] RDX: 0000000000000000 RSI: ffff8880135dd300 RDI: 0000000000000002
[   30.819359] RBP: ffffc90000f63ca8 R08: 000000000000001c R09: 0000000000000001
[   30.819905] R10: ffff8880135de098 R11: 0000000000000000 R12: ffffffffffffffff
[   30.820423] R13: 0000000001000000 R14: 00000000017fffff R15: 0000000000000000
[   30.821010] FS:  0000000000000000(0000) GS:ffff88807dd00000(0000) knlGS:0000000000000000
[   30.821658] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   30.822111] CR2: 00007f3777cf0500 CR3: 000000000d54a004 CR4: 0000000000770ee0
[   30.822642] PKRU: 55555554
[   30.822876] Call Trace:
[   30.823068]  <TASK>
[   30.823244]  iopt_unmap_iova_range+0x1ef/0x2e0
[   30.823592]  iopt_unmap_all+0x2f/0x60
[   30.824052]  iommufd_ioas_destroy+0x2c/0x70
[   30.824374]  iommufd_fops_release+0xd4/0x170
[   30.824729]  ? iommufd_ctx_get+0x30/0x30
[   30.825068]  __fput+0x11f/0x450
[   30.825328]  ____fput+0x1e/0x30
[   30.825579]  task_work_run+0xb6/0x120
[   30.825878]  do_exit+0x521/0x1340
[   30.826162]  ? lockdep_hardirqs_on+0x8a/0x110
[   30.826535]  ? trace_hardirqs_on+0x3f/0x100
[   30.826872]  do_group_exit+0x5e/0xf0
[   30.827189]  __x64_sys_exit_group+0x25/0x30
[   30.827509]  do_syscall_64+0x3b/0x90
[   30.827800]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   30.828305] RIP: 0033:0x7f3777be6cf6
[   30.828579] Code: Unable to access opcode bytes at 0x7f3777be6ccc.
[   30.829054] RSP: 002b:00007ffd0d7278d8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
[   30.829641] RAX: ffffffffffffffda RBX: 00007f3777cf1490 RCX: 00007f3777be6cf6
[   30.830154] RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
[   30.830706] RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffff80
[   30.831313] R10: 0000000000000004 R11: 0000000000000246 R12: 00007f3777cf1490
[   30.831862] R13: 0000000000000001 R14: 00007f3777cf4e88 R15: 0000000000000000
[   30.832404]  </TASK>
[   30.832586] irq event stamp: 22165
[   30.832890] hardirqs last  enabled at (22175): [<ffffffff811b7f21>] __up_console_sem+0x91/0xb0
[   30.833531] hardirqs last disabled at (22182): [<ffffffff811b7f06>] __up_console_sem+0x76/0xb0
[   30.834227] softirqs last  enabled at (22100): [<ffffffff83000329>] __do_softirq+0x329/0x490
[   30.834969] softirqs last disabled at (22093): [<ffffffff81111082>] irq_exit_rcu+0xd2/0x100
[   30.835573] ---[ end trace 0000000000000000 ]---
[   31.144867] ------------[ cut here ]------------
[   31.145239] WARNING: CPU: 0 PID: 595 at drivers/iommu/iommufd/pages.c:294 __iopt_area_unfill_domain+0x152/0x560
[   31.145992] Modules linked in:
[   31.146221] CPU: 0 PID: 595 Comm: repro Tainted: G        W          6.1.0-a0a6c76cf2a5+ #1
[   31.146860] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   31.147651] RIP: 0010:__iopt_area_unfill_domain+0x152/0x560
[   31.148081] Code: a1 2b ff 44 8b 64 24 54 48 8b 44 24 48 31 ff 44 89 e6 48 89 44 24 38 e8 6c a2 2b ff 45 85 e4 0f 85 eb 01 00 00 e8 ee a0 2b ff <0f> 0b e8 e7 a0 2b ff 48 8b 44 24 38 89 5c 24 58 89 18 8b 44 24 54
[   31.149411] RSP: 0018:ffffc9000103bae0 EFLAGS: 00010246
[   31.149790] RAX: 0000000000000000 RBX: 00000000ffffffff RCX: ffffffff81fe0bd5
[   31.150321] RDX: 0000000000000000 RSI: ffff8880135da980 RDI: 0000000000000002
[   31.150831] RBP: ffffc9000103bd10 R08: 000000000003b5c5 R09: 000000000000000b
[   31.151355] R10: 000000000003b5a0 R11: 0000000000000024 R12: 00000000000000a5
[   31.151849] R13: 0000000000000801 R14: 00000000000007ff R15: 0000000000000800
[   31.152619] FS:  00007f3777af9740(0000) GS:ffff88807dc00000(0000) knlGS:0000000000000000
[   31.153241] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   31.153649] CR2: 00007f3777c1e580 CR3: 0000000009d60003 CR4: 0000000000770ef0
[   31.154149] PKRU: 55555554
[   31.154379] Call Trace:
[   31.154575]  <TASK>
[   31.154775]  ? __this_cpu_preempt_check+0x20/0x30
[   31.155128]  ? lock_is_held_type+0xe6/0x140
[   31.155484]  ? rcu_read_lock_sched_held+0x57/0x80
[   31.155834]  ? __mutex_lock+0x13a/0xf30
[   31.156126]  ? write_comp_data+0x2f/0x90
[   31.156446]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   31.156830]  iopt_area_unfill_domain+0x32/0x40
[   31.157164]  iopt_table_remove_domain+0x23f/0x4c0
[   31.157539]  iommufd_device_selftest_detach+0x3a/0x90
[   31.157927]  iommufd_selftest_destroy+0x55/0x70
[   31.158261]  iommufd_object_destroy_user+0xce/0x130
[   31.158651]  iommufd_destroy+0xa2/0xc0
[   31.158944]  iommufd_fops_ioctl+0x1ef/0x310
[   31.159259]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   31.159602]  ? write_comp_data+0x2f/0x90
[   31.159920]  __x64_sys_ioctl+0x10e/0x160
[   31.160210]  ? iommufd_get_object.part.6+0x1c0/0x1c0
[   31.160565]  do_syscall_64+0x3b/0x90
[   31.160882]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   31.161273] RIP: 0033:0x7f3777c1e59d
[   31.161540] Code: 00 c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d d3 08 0d 00 f7 d8 64 89 01 48
[   31.162892] RSP: 002b:00007ffd0d727918 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   31.163453] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f3777c1e59d
[   31.163964] RDX: 0000000020000140 RSI: 0000000000003b80 RDI: 0000000000000003
[   31.164510] RBP: 00007ffd0d727930 R08: 00007ffd0d727930 R09: 00007ffd0d727930
[   31.165045] R10: 00007ffd0d727930 R11: 0000000000000213 R12: 0000000000401180
[   31.165579] R13: 00007ffd0d727a50 R14: 0000000000000000 R15: 0000000000000000
[   31.166106]  </TASK>
[   31.166309] irq event stamp: 14779
[   31.166573] hardirqs last  enabled at (14787): [<ffffffff811b7f21>] __up_console_sem+0x91/0xb0
[   31.167211] hardirqs last disabled at (14794): [<ffffffff811b7f06>] __up_console_sem+0x76/0xb0
[   31.167854] softirqs last  enabled at (14490): [<ffffffff83000329>] __do_softirq+0x329/0x490
[   31.168484] softirqs last disabled at (14479): [<ffffffff81111082>] irq_exit_rcu+0xd2/0x100
[   31.169118] ---[ end trace 0000000000000000 ]---
[   31.169593] ------------[ cut here ]------------
[   31.169933] WARNING: CPU: 0 PID: 595 at drivers/iommu/iommufd/pages.c:1290 __iopt_area_unfill_domain+0x54f/0x560
[   31.170696] Modules linked in:
[   31.170931] CPU: 0 PID: 595 Comm: repro Tainted: G        W          6.1.0-a0a6c76cf2a5+ #1
[   31.171547] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   31.172385] RIP: 0010:__iopt_area_unfill_domain+0x54f/0x560
[   31.172857] Code: e8 86 9e 2b ff 85 db 0f 85 35 fb ff ff e8 09 9d 2b ff 0f 0b e9 29 fb ff ff e8 fd 9c 2b ff 0f 0b e9 69 fe ff ff e8 f1 9c 2b ff <0f> 0b e9 58 ff ff ff e8 65 2d dc 00 0f 1f 44 00 00 0f 1f 44 00 00
[   31.174226] RSP: 0018:ffffc9000103bae0 EFLAGS: 00010246
[   31.174627] RAX: 0000000000000000 RBX: 00000000ffffffff RCX: ffffffff81fe0d26
[   31.175169] RDX: 0000000000000000 RSI: ffff8880135da980 RDI: 0000000000000002
[   31.175701] RBP: ffffc9000103bd10 R08: 000000000003b5c5 R09: 000000000000000b
[   31.176240] R10: 000000000003b5a0 R11: 0000000000000024 R12: 00000000000007ff
[   31.176802] R13: 0000000000000801 R14: 00000000000007ff R15: 0000000000000800
[   31.177359] FS:  00007f3777af9740(0000) GS:ffff88807dc00000(0000) knlGS:0000000000000000
[   31.177939] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   31.178389] CR2: 00007f3777c1e580 CR3: 0000000009d60003 CR4: 0000000000770ef0
[   31.178921] PKRU: 55555554
[   31.179134] Call Trace:
[   31.179334]  <TASK>
[   31.179553]  ? __this_cpu_preempt_check+0x20/0x30
[   31.179917]  ? lock_is_held_type+0xe6/0x140
[   31.180246]  ? rcu_read_lock_sched_held+0x57/0x80
[   31.180634]  ? __mutex_lock+0x13a/0xf30
[   31.180969]  ? write_comp_data+0x2f/0x90
[   31.181274]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   31.181670]  iopt_area_unfill_domain+0x32/0x40
[   31.182017]  iopt_table_remove_domain+0x23f/0x4c0
[   31.182372]  iommufd_device_selftest_detach+0x3a/0x90
[   31.182791]  iommufd_selftest_destroy+0x55/0x70
[   31.183160]  iommufd_object_destroy_user+0xce/0x130
[   31.183540]  iommufd_destroy+0xa2/0xc0
[   31.183859]  iommufd_fops_ioctl+0x1ef/0x310
[   31.184182]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   31.184535]  ? write_comp_data+0x2f/0x90
[   31.184904]  __x64_sys_ioctl+0x10e/0x160
[   31.185211]  ? iommufd_get_object.part.6+0x1c0/0x1c0
[   31.185578]  do_syscall_64+0x3b/0x90
[   31.185855]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   31.186255] RIP: 0033:0x7f3777c1e59d
[   31.186534] Code: 00 c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d d3 08 0d 00 f7 d8 64 89 01 48
[   31.187869] RSP: 002b:00007ffd0d727918 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   31.188434] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f3777c1e59d
[   31.188965] RDX: 0000000020000140 RSI: 0000000000003b80 RDI: 0000000000000003
[   31.189498] RBP: 00007ffd0d727930 R08: 00007ffd0d727930 R09: 00007ffd0d727930
[   31.190004] R10: 00007ffd0d727930 R11: 0000000000000213 R12: 0000000000401180
[   31.190553] R13: 00007ffd0d727a50 R14: 0000000000000000 R15: 0000000000000000
[   31.191091]  </TASK>
[   31.191271] irq event stamp: 15267
[   31.191559] hardirqs last  enabled at (15275): [<ffffffff811b7f21>] __up_console_sem+0x91/0xb0
[   31.192182] hardirqs last disabled at (15282): [<ffffffff811b7f06>] __up_console_sem+0x76/0xb0
[   31.192864] softirqs last  enabled at (15152): [<ffffffff83000329>] __do_softirq+0x329/0x490
[   31.193465] softirqs last disabled at (15135): [<ffffffff81111082>] irq_exit_rcu+0xd2/0x100
[   31.194130] ---[ end trace 0000000000000000 ]---
[   31.198845] ------------[ cut here ]------------
[   31.199243] WARNING: CPU: 0 PID: 595 at drivers/iommu/iommufd/pages.c:178 batch_unpin.isra.23+0x151/0x1a0
[   31.199945] Modules linked in:
[   31.200209] CPU: 0 PID: 595 Comm: repro Tainted: G        W          6.1.0-a0a6c76cf2a5+ #1
[   31.200839] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   31.201679] RIP: 0010:batch_unpin.isra.23+0x151/0x1a0
[   31.202060] Code: e8 c4 be 2b ff 48 8b 45 d0 48 85 c0 75 17 e8 26 bd 2b ff 48 8b 7d c8 48 89 de e8 fa bd 2b ff 48 39 5d c8 73 07 e8 0f bd 2b ff <0f> 0b e8 08 bd 2b ff 4d 29 e5 31 ff 41 83 c6 01 4c 89 ee 31 db e8
[   31.203475] RSP: 0018:ffffc9000103b9d8 EFLAGS: 00010246
[   31.203877] RAX: 0000000000000000 RBX: ffffffffffffffff RCX: ffffffff81fded8c
[   31.204396] RDX: 0000000000000000 RSI: ffff8880135da980 RDI: 0000000000000002
[   31.204955] RBP: ffffc9000103ba20 R08: 0000000000000000 R09: ffff88807dc3b890
[   31.205472] R10: 0000000000000ea6 R11: 0000000000000000 R12: 0000000000000001
[   31.206014] R13: 0000000000000001 R14: 0000000000000000 R15: ffff888009f85000
[   31.206542] FS:  0000000000000000(0000) GS:ffff88807dc00000(0000) knlGS:0000000000000000
[   31.207153] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   31.207574] CR2: 00007f3777cf0500 CR3: 0000000003c12004 CR4: 0000000000770ef0
[   31.208128] PKRU: 55555554
[   31.208334] Call Trace:
[   31.208526]  <TASK>
[   31.208722]  iopt_pages_unfill_xarray+0x39f/0x5c0
[   31.209146]  ? write_comp_data+0x2f/0x90
[   31.209460]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   31.209834]  ? write_comp_data+0x2f/0x90
[   31.210174]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   31.210540]  ? interval_tree_remove+0x291/0x4e0
[   31.210885]  ? write_comp_data+0x2f/0x90
[   31.211225]  iopt_area_remove_access+0x108/0x120
[   31.211591]  iommufd_access_unpin_pages+0x177/0x210
[   31.211973]  iommufd_test_access_unmap+0xe0/0x130
[   31.212358]  ? iommufd_test_access_unmap+0x130/0x130
[   31.212757]  iommufd_test_staccess_release+0x39/0x60
[   31.213134]  __fput+0x11f/0x450
[   31.213421]  ____fput+0x1e/0x30
[   31.213673]  task_work_run+0xb6/0x120
[   31.213967]  do_exit+0x521/0x1340
[   31.214223]  ? lockdep_hardirqs_on+0x8a/0x110
[   31.214601]  ? trace_hardirqs_on+0x3f/0x100
[   31.214941]  do_group_exit+0x5e/0xf0
[   31.215230]  __x64_sys_exit_group+0x25/0x30
[   31.215579]  do_syscall_64+0x3b/0x90
[   31.215853]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   31.216227] RIP: 0033:0x7f3777be6cf6
[   31.216528] Code: Unable to access opcode bytes at 0x7f3777be6ccc.
[   31.216990] RSP: 002b:00007ffd0d7278d8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
[   31.217553] RAX: ffffffffffffffda RBX: 00007f3777cf1490 RCX: 00007f3777be6cf6
[   31.218086] RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
[   31.218636] RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffff80
[   31.219166] R10: 0000000000000004 R11: 0000000000000246 R12: 00007f3777cf1490
[   31.219684] R13: 0000000000000001 R14: 00007f3777cf4e88 R15: 0000000000000000
[   31.220243]  </TASK>
[   31.220416] irq event stamp: 21187
[   31.220689] hardirqs last  enabled at (21197): [<ffffffff811b7f21>] __up_console_sem+0x91/0xb0
[   31.221338] hardirqs last disabled at (21204): [<ffffffff811b7f06>] __up_console_sem+0x76/0xb0
[   31.221996] softirqs last  enabled at (20852): [<ffffffff83000329>] __do_softirq+0x329/0x490
[   31.222612] softirqs last disabled at (20847): [<ffffffff81111082>] irq_exit_rcu+0xd2/0x100
[   31.223261] ---[ end trace 0000000000000000 ]---
[   31.223714] ------------[ cut here ]------------
[   31.224050] WARNING: CPU: 0 PID: 595 at drivers/iommu/iommufd/pages.c:886 update_unpinned+0x75/0x80
[   31.224753] Modules linked in:
[   31.224989] CPU: 0 PID: 595 Comm: repro Tainted: G        W          6.1.0-a0a6c76cf2a5+ #1
[   31.225610] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   31.226442] RIP: 0010:update_unpinned+0x75/0x80
[   31.226796] Code: ac 2b ff 48 89 de 31 c9 31 d2 4c 29 e6 4c 89 ef e8 70 fb ff ff e8 bb ac 2b ff 5b 41 5c 41 5d 5d c3 cc cc cc cc e8 ab ac 2b ff <0f> 0b eb e7 0f 1f 80 00 00 00 00 0f 1f 44 00 00 55 48 89 e5 41 57
[   31.228129] RSP: 0018:ffffc9000103ba08 EFLAGS: 00010246
[   31.228554] RAX: 0000000000000000 RBX: 0000000000000000 RCX: ffffffff81fdfdcf
[   31.229111] RDX: 0000000000000000 RSI: ffff8880135da980 RDI: 0000000000000002
[   31.229658] RBP: ffffc9000103ba20 R08: 0000000000000000 R09: ffff88807dc3b890
[   31.230171] R10: 0000000000000ea6 R11: 0000000000000000 R12: ffffffffffffffff
[   31.230722] R13: ffff888009f85000 R14: 0000000000000002 R15: 0000000000000002
[   31.231239] FS:  0000000000000000(0000) GS:ffff88807dc00000(0000) knlGS:0000000000000000
[   31.231860] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   31.232286] CR2: 00007f3777cf0500 CR3: 0000000003c12004 CR4: 0000000000770ef0
[   31.232852] PKRU: 55555554
[   31.233063] Call Trace:
[   31.233250]  <TASK>
[   31.233421]  iopt_pages_unfill_xarray+0x522/0x5c0
[   31.233812]  ? write_comp_data+0x2f/0x90
[   31.234147]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   31.234562]  ? write_comp_data+0x2f/0x90
[   31.234865]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   31.235260]  ? interval_tree_remove+0x291/0x4e0
[   31.235612]  ? write_comp_data+0x2f/0x90
[   31.235922]  iopt_area_remove_access+0x108/0x120
[   31.236312]  iommufd_access_unpin_pages+0x177/0x210
[   31.236720]  iommufd_test_access_unmap+0xe0/0x130
[   31.237082]  ? iommufd_test_access_unmap+0x130/0x130
[   31.237493]  iommufd_test_staccess_release+0x39/0x60
[   31.237872]  __fput+0x11f/0x450
[   31.238132]  ____fput+0x1e/0x30
[   31.238412]  task_work_run+0xb6/0x120
[   31.238712]  do_exit+0x521/0x1340
[   31.238975]  ? lockdep_hardirqs_on+0x8a/0x110
[   31.239321]  ? trace_hardirqs_on+0x3f/0x100
[   31.239674]  do_group_exit+0x5e/0xf0
[   31.239954]  __x64_sys_exit_group+0x25/0x30
[   31.240269]  do_syscall_64+0x3b/0x90
[   31.240575]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   31.240978] RIP: 0033:0x7f3777be6cf6
[   31.241255] Code: Unable to access opcode bytes at 0x7f3777be6ccc.
[   31.241728] RSP: 002b:00007ffd0d7278d8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
[   31.242271] RAX: ffffffffffffffda RBX: 00007f3777cf1490 RCX: 00007f3777be6cf6
[   31.242813] RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
[   31.243343] RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffff80
[   31.243881] R10: 0000000000000004 R11: 0000000000000246 R12: 00007f3777cf1490
[   31.244396] R13: 0000000000000001 R14: 00007f3777cf4e88 R15: 0000000000000000
[   31.244973]  </TASK>
[   31.245149] irq event stamp: 21679
[   31.245402] hardirqs last  enabled at (21687): [<ffffffff811b7f21>] __up_console_sem+0x91/0xb0
[   31.246056] hardirqs last disabled at (21694): [<ffffffff811b7f06>] __up_console_sem+0x76/0xb0
[   31.246696] softirqs last  enabled at (21334): [<ffffffff83000329>] __do_softirq+0x329/0x490
[   31.247345] softirqs last disabled at (21323): [<ffffffff81111082>] irq_exit_rcu+0xd2/0x100
[   31.247954] ---[ end trace 0000000000000000 ]---
[   31.248470] ------------[ cut here ]------------
[   31.248829] WARNING: CPU: 0 PID: 595 at drivers/iommu/iommufd/pages.c:1181 iopt_release_pages+0x159/0x190
[   31.249557] Modules linked in:
[   31.249792] CPU: 0 PID: 595 Comm: repro Tainted: G        W          6.1.0-a0a6c76cf2a5+ #1
[   31.250415] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   31.251229] RIP: 0010:iopt_release_pages+0x159/0x190
[   31.251627] Code: b5 11 ff eb cb e8 87 90 2b ff be 03 00 00 00 4c 89 f7 e8 6a 8b ce ff eb b7 e8 73 90 2b ff 0f 0b e9 ed fe ff ff e8 67 90 2b ff <0f> 0b e9 00 ff ff ff e8 5b 90 2b ff 0f 0b e9 07 ff ff ff e8 4f 90
[   31.252974] RSP: 0018:ffffc9000103bc88 EFLAGS: 00010246
[   31.253358] RAX: 0000000000000000 RBX: ffff888009f85000 RCX: ffffffff81fe1957
[   31.253896] RDX: 0000000000000000 RSI: ffff8880135da980 RDI: 0000000000000002
[   31.254423] RBP: ffffc9000103bca8 R08: 000000000000001c R09: 0000000000000001
[   31.254956] R10: ffff8880135db718 R11: 0000000000000000 R12: ffffffffffffffff
[   31.255478] R13: 0000000001000000 R14: 00000000017fffff R15: 0000000000000000
[   31.256026] FS:  0000000000000000(0000) GS:ffff88807dc00000(0000) knlGS:0000000000000000
[   31.256615] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   31.257073] CR2: 00007f3777cf0500 CR3: 0000000003c12004 CR4: 0000000000770ef0
[   31.257588] PKRU: 55555554
[   31.257797] Call Trace:
[   31.258016]  <TASK>
[   31.258186]  iopt_unmap_iova_range+0x1ef/0x2e0
[   31.258563]  iopt_unmap_all+0x2f/0x60
[   31.258846]  iommufd_ioas_destroy+0x2c/0x70
[   31.259194]  iommufd_fops_release+0xd4/0x170
[   31.259538]  ? iommufd_ctx_get+0x30/0x30
[   31.259844]  __fput+0x11f/0x450
[   31.260129]  ____fput+0x1e/0x30
[   31.260379]  task_work_run+0xb6/0x120
[   31.260693]  do_exit+0x521/0x1340
[   31.260953]  ? lockdep_hardirqs_on+0x8a/0x110
[   31.261325]  ? trace_hardirqs_on+0x3f/0x100
[   31.261652]  do_group_exit+0x5e/0xf0
[   31.261939]  __x64_sys_exit_group+0x25/0x30
[   31.262272]  do_syscall_64+0x3b/0x90
[   31.262577]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   31.262967] RIP: 0033:0x7f3777be6cf6
[   31.263247] Code: Unable to access opcode bytes at 0x7f3777be6ccc.
[   31.263729] RSP: 002b:00007ffd0d7278d8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
[   31.264273] RAX: ffffffffffffffda RBX: 00007f3777cf1490 RCX: 00007f3777be6cf6
[   31.264831] RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
[   31.265340] RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffff80
[   31.265882] R10: 0000000000000004 R11: 0000000000000246 R12: 00007f3777cf1490
[   31.266397] R13: 0000000000000001 R14: 00007f3777cf4e88 R15: 0000000000000000
[   31.266957]  </TASK>
[   31.267131] irq event stamp: 22133
[   31.267389] hardirqs last  enabled at (22141): [<ffffffff811b7f21>] __up_console_sem+0x91/0xb0
[   31.268056] hardirqs last disabled at (22148): [<ffffffff811b7f06>] __up_console_sem+0x76/0xb0
[   31.268708] softirqs last  enabled at (21334): [<ffffffff83000329>] __do_softirq+0x329/0x490
[   31.269353] softirqs last disabled at (21323): [<ffffffff81111082>] irq_exit_rcu+0xd2/0x100
[   31.269991] ---[ end trace 0000000000000000 ]---
[   31.874005] ------------[ cut here ]------------
[   31.874393] WARNING: CPU: 0 PID: 610 at drivers/iommu/iommufd/pages.c:178 batch_unpin.isra.23+0x151/0x1a0
[   31.875103] Modules linked in:
[   31.875334] CPU: 0 PID: 610 Comm: repro Tainted: G        W          6.1.0-a0a6c76cf2a5+ #1
[   31.875929] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   31.876759] RIP: 0010:batch_unpin.isra.23+0x151/0x1a0
[   31.877136] Code: e8 c4 be 2b ff 48 8b 45 d0 48 85 c0 75 17 e8 26 bd 2b ff 48 8b 7d c8 48 89 de e8 fa bd 2b ff 48 39 5d c8 73 07 e8 0f bd 2b ff <0f> 0b e8 08 bd 2b ff 4d 29 e5 31 ff 41 83 c6 01 4c 89 ee 31 db e8
[   31.878428] RSP: 0018:ffffc900010b3a88 EFLAGS: 00010246
[   31.878820] RAX: 0000000000000000 RBX: ffffffffffffffff RCX: ffffffff81fded8c
[   31.879354] RDX: 0000000000000000 RSI: ffff8880135d8000 RDI: 0000000000000002
[   31.879870] RBP: ffffc900010b3ad0 R08: 000000000003b5c5 R09: 000000000000000a
[   31.880380] R10: 000000000003b5a0 R11: 0000000000000024 R12: 0000000000000003
[   31.880908] R13: 0000000000000003 R14: 0000000000000212 R15: ffff888009f85400
[   31.881421] FS:  00007f3777af9740(0000) GS:ffff88807dc00000(0000) knlGS:0000000000000000
[   31.881996] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   31.882422] CR2: 00007f3777c1e580 CR3: 0000000006460004 CR4: 0000000000770ef0
[   31.882944] PKRU: 55555554
[   31.883164] Call Trace:
[   31.883355]  <TASK>
[   31.883531]  __iopt_area_unfill_domain+0x257/0x560
[   31.883919]  ? __this_cpu_preempt_check+0x20/0x30
[   31.884311]  ? lock_is_held_type+0xe6/0x140
[   31.884631]  ? rcu_read_lock_sched_held+0x57/0x80
[   31.885001]  ? __mutex_lock+0x13a/0xf30
[   31.885303]  ? write_comp_data+0x2f/0x90
[   31.885609]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   31.885999]  iopt_area_unfill_domain+0x32/0x40
[   31.886333]  iopt_table_remove_domain+0x23f/0x4c0
[   31.886692]  iommufd_device_selftest_detach+0x3a/0x90
[   31.887073]  iommufd_selftest_destroy+0x55/0x70
[   31.887418]  iommufd_object_destroy_user+0xce/0x130
[   31.887798]  iommufd_destroy+0xa2/0xc0
[   31.888084]  iommufd_fops_ioctl+0x1ef/0x310
[   31.888402]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   31.888779]  ? write_comp_data+0x2f/0x90
[   31.889081]  __x64_sys_ioctl+0x10e/0x160
[   31.889389]  ? iommufd_get_object.part.6+0x1c0/0x1c0
[   31.889760]  do_syscall_64+0x3b/0x90
[   31.890045]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   31.890423] RIP: 0033:0x7f3777c1e59d
[   31.890702] Code: 00 c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d d3 08 0d 00 f7 d8 64 89 01 48
[   31.891990] RSP: 002b:00007ffd0d727918 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   31.892531] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f3777c1e59d
[   31.893055] RDX: 0000000020000140 RSI: 0000000000003b80 RDI: 0000000000000003
[   31.893564] RBP: 00007ffd0d727930 R08: 00007ffd0d727930 R09: 00007ffd0d727930
[   31.894070] R10: 00007ffd0d727930 R11: 0000000000000213 R12: 0000000000401180
[   31.894593] R13: 00007ffd0d727a50 R14: 0000000000000000 R15: 0000000000000000
[   31.895113]  </TASK>
[   31.895287] irq event stamp: 14737
[   31.895550] hardirqs last  enabled at (14745): [<ffffffff811b7f21>] __up_console_sem+0x91/0xb0
[   31.896182] hardirqs last disabled at (14752): [<ffffffff811b7f06>] __up_console_sem+0x76/0xb0
[   31.896837] softirqs last  enabled at (14296): [<ffffffff83000329>] __do_softirq+0x329/0x490
[   31.897437] softirqs last disabled at (14283): [<ffffffff81111082>] irq_exit_rcu+0xd2/0x100
[   31.898057] ---[ end trace 0000000000000000 ]---
[   31.898508] ------------[ cut here ]------------
[   31.898845] WARNING: CPU: 0 PID: 610 at drivers/iommu/iommufd/pages.c:294 __iopt_area_unfill_domain+0x152/0x560
[   31.899571] Modules linked in:
[   31.899805] CPU: 0 PID: 610 Comm: repro Tainted: G        W          6.1.0-a0a6c76cf2a5+ #1
[   31.900393] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   31.901213] RIP: 0010:__iopt_area_unfill_domain+0x152/0x560
[   31.901624] Code: a1 2b ff 44 8b 64 24 54 48 8b 44 24 48 31 ff 44 89 e6 48 89 44 24 38 e8 6c a2 2b ff 45 85 e4 0f 85 eb 01 00 00 e8 ee a0 2b ff <0f> 0b e8 e7 a0 2b ff 48 8b 44 24 38 89 5c 24 58 89 18 8b 44 24 54
[   31.902941] RSP: 0018:ffffc900010b3ae0 EFLAGS: 00010246
[   31.903324] RAX: 0000000000000000 RBX: 00000000fffffffe RCX: ffffffff81fe0bd5
[   31.903831] RDX: 0000000000000000 RSI: ffff8880135d8000 RDI: 0000000000000002
[   31.904337] RBP: ffffc900010b3d10 R08: 000000000003b5c5 R09: 000000000000000a
[   31.904871] R10: 000000000003b5a0 R11: 0000000000000024 R12: 0000000000000091
[   31.905384] R13: 0000000000000802 R14: 00000000000007ff R15: 0000000000000800
[   31.905902] FS:  00007f3777af9740(0000) GS:ffff88807dc00000(0000) knlGS:0000000000000000
[   31.906480] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   31.906894] CR2: 00007f3777c1e580 CR3: 0000000006460004 CR4: 0000000000770ef0
[   31.907404] PKRU: 55555554
[   31.907614] Call Trace:
[   31.907806]  <TASK>
[   31.908000]  ? __this_cpu_preempt_check+0x20/0x30
[   31.908368]  ? lock_is_held_type+0xe6/0x140
[   31.908713]  ? rcu_read_lock_sched_held+0x57/0x80
[   31.909079]  ? __mutex_lock+0x13a/0xf30
[   31.909382]  ? write_comp_data+0x2f/0x90
[   31.909690]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   31.910058]  iopt_area_unfill_domain+0x32/0x40
[   31.910393]  iopt_table_remove_domain+0x23f/0x4c0
[   31.910761]  iommufd_device_selftest_detach+0x3a/0x90
[   31.911160]  iommufd_selftest_destroy+0x55/0x70
[   31.911512]  iommufd_object_destroy_user+0xce/0x130
[   31.911887]  iommufd_destroy+0xa2/0xc0
[   31.912194]  iommufd_fops_ioctl+0x1ef/0x310
[   31.912517]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   31.912897]  ? write_comp_data+0x2f/0x90
[   31.913208]  __x64_sys_ioctl+0x10e/0x160
[   31.913517]  ? iommufd_get_object.part.6+0x1c0/0x1c0
[   31.913894]  do_syscall_64+0x3b/0x90
[   31.914173]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   31.914557] RIP: 0033:0x7f3777c1e59d
[   31.914831] Code: 00 c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d d3 08 0d 00 f7 d8 64 89 01 48
[   31.916162] RSP: 002b:00007ffd0d727918 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   31.916729] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f3777c1e59d
[   31.917246] RDX: 0000000020000140 RSI: 0000000000003b80 RDI: 0000000000000003
[   31.917763] RBP: 00007ffd0d727930 R08: 00007ffd0d727930 R09: 00007ffd0d727930
[   31.918283] R10: 00007ffd0d727930 R11: 0000000000000213 R12: 0000000000401180
[   31.918811] R13: 00007ffd0d727a50 R14: 0000000000000000 R15: 0000000000000000
[   31.919346]  </TASK>
[   31.919519] irq event stamp: 15197
[   31.919772] hardirqs last  enabled at (15205): [<ffffffff811b7f21>] __up_console_sem+0x91/0xb0
[   31.920392] hardirqs last disabled at (15212): [<ffffffff811b7f06>] __up_console_sem+0x76/0xb0
[   31.921032] softirqs last  enabled at (14894): [<ffffffff83000329>] __do_softirq+0x329/0x490
[   31.921646] softirqs last disabled at (14889): [<ffffffff81111082>] irq_exit_rcu+0xd2/0x100
[   31.922253] ---[ end trace 0000000000000000 ]---
[   31.922680] ------------[ cut here ]------------
[   31.923017] WARNING: CPU: 0 PID: 610 at drivers/iommu/iommufd/pages.c:1290 __iopt_area_unfill_domain+0x54f/0x560
[   31.923777] Modules linked in:
[   31.924013] CPU: 0 PID: 610 Comm: repro Tainted: G        W          6.1.0-a0a6c76cf2a5+ #1
[   31.924613] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   31.925435] RIP: 0010:__iopt_area_unfill_domain+0x54f/0x560
[   31.925849] Code: e8 86 9e 2b ff 85 db 0f 85 35 fb ff ff e8 09 9d 2b ff 0f 0b e9 29 fb ff ff e8 fd 9c 2b ff 0f 0b e9 69 fe ff ff e8 f1 9c 2b ff <0f> 0b e9 58 ff ff ff e8 65 2d dc 00 0f 1f 44 00 00 0f 1f 44 00 00
[   31.927182] RSP: 0018:ffffc900010b3ae0 EFLAGS: 00010246
[   31.927569] RAX: 0000000000000000 RBX: 00000000fffffffe RCX: ffffffff81fe0d26
[   31.928095] RDX: 0000000000000000 RSI: ffff8880135d8000 RDI: 0000000000000002
[   31.928614] RBP: ffffc900010b3d10 R08: 000000000003b5c5 R09: 000000000000000a
[   31.929156] R10: 000000000003b5a0 R11: 0000000000000024 R12: 00000000000007ff
[   31.929684] R13: 0000000000000802 R14: 00000000000007ff R15: 0000000000000800
[   31.930198] FS:  00007f3777af9740(0000) GS:ffff88807dc00000(0000) knlGS:0000000000000000
[   31.930781] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   31.931198] CR2: 00007f3777c1e580 CR3: 0000000006460004 CR4: 0000000000770ef0
[   31.931711] PKRU: 55555554
[   31.931922] Call Trace:
[   31.932111]  <TASK>
[   31.932302]  ? __this_cpu_preempt_check+0x20/0x30
[   31.932691]  ? lock_is_held_type+0xe6/0x140
[   31.933021]  ? rcu_read_lock_sched_held+0x57/0x80
[   31.933384]  ? __mutex_lock+0x13a/0xf30
[   31.933683]  ? write_comp_data+0x2f/0x90
[   31.933988]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   31.934351]  iopt_area_unfill_domain+0x32/0x40
[   31.934701]  iopt_table_remove_domain+0x23f/0x4c0
[   31.935065]  iommufd_device_selftest_detach+0x3a/0x90
[   31.935465]  iommufd_selftest_destroy+0x55/0x70
[   31.935825]  iommufd_object_destroy_user+0xce/0x130
[   31.936202]  iommufd_destroy+0xa2/0xc0
[   31.936494]  iommufd_fops_ioctl+0x1ef/0x310
[   31.936840]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   31.937206]  ? write_comp_data+0x2f/0x90
[   31.937508]  __x64_sys_ioctl+0x10e/0x160
[   31.937816]  ? iommufd_get_object.part.6+0x1c0/0x1c0
[   31.938180]  do_syscall_64+0x3b/0x90
[   31.938446]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   31.938804] RIP: 0033:0x7f3777c1e59d
[   31.939072] Code: 00 c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d d3 08 0d 00 f7 d8 64 89 01 48
[   31.940402] RSP: 002b:00007ffd0d727918 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   31.940977] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f3777c1e59d
[   31.941507] RDX: 0000000020000140 RSI: 0000000000003b80 RDI: 0000000000000003
[   31.942036] RBP: 00007ffd0d727930 R08: 00007ffd0d727930 R09: 00007ffd0d727930
[   31.942568] R10: 00007ffd0d727930 R11: 0000000000000213 R12: 0000000000401180
[   31.943070] R13: 00007ffd0d727a50 R14: 0000000000000000 R15: 0000000000000000
[   31.943605]  </TASK>
[   31.943775] irq event stamp: 15651
[   31.944034] hardirqs last  enabled at (15659): [<ffffffff811b7f21>] __up_console_sem+0x91/0xb0
[   31.944694] hardirqs last disabled at (15668): [<ffffffff811b7f06>] __up_console_sem+0x76/0xb0
[   31.945330] softirqs last  enabled at (14894): [<ffffffff83000329>] __do_softirq+0x329/0x490
[   31.945961] softirqs last disabled at (14889): [<ffffffff81111082>] irq_exit_rcu+0xd2/0x100
[   31.946582] ---[ end trace 0000000000000000 ]---
[   31.947010] ------------[ cut here ]------------
[   31.947348] WARNING: CPU: 0 PID: 610 at drivers/iommu/iommufd/pages.c:886 update_unpinned+0x75/0x80
[   31.948019] Modules linked in:
[   31.948259] CPU: 0 PID: 610 Comm: repro Tainted: G        W          6.1.0-a0a6c76cf2a5+ #1
[   31.948949] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   31.949739] RIP: 0010:update_unpinned+0x75/0x80
[   31.950086] Code: ac 2b ff 48 89 de 31 c9 31 d2 4c 29 e6 4c 89 ef e8 70 fb ff ff e8 bb ac 2b ff 5b 41 5c 41 5d 5d c3 cc cc cc cc e8 ab ac 2b ff <0f> 0b eb e7 0f 1f 80 00 00 00 00 0f 1f 44 00 00 55 48 89 e5 41 57
[   31.951367] RSP: 0018:ffffc900010b3ab8 EFLAGS: 00010246
[   31.951737] RAX: 0000000000000000 RBX: 0000000000000800 RCX: ffffffff81fdfdcf
[   31.952230] RDX: 0000000000000000 RSI: ffff8880135d8000 RDI: 0000000000000002
[   31.952743] RBP: ffffc900010b3ad0 R08: 0000000000000000 R09: ffff88807dc3b920
[   31.953234] R10: 0000000000000792 R11: 0000000000000009 R12: ffffffffffffffff
[   31.953727] R13: ffff888009f85400 R14: 00000000000007ff R15: 0000000000000800
[   31.954221] FS:  00007f3777af9740(0000) GS:ffff88807dc00000(0000) knlGS:0000000000000000
[   31.954791] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   31.955198] CR2: 00007f3777c1e580 CR3: 0000000006460004 CR4: 0000000000770ef0
[   31.955693] PKRU: 55555554
[   31.955892] Call Trace:
[   31.956072]  <TASK>
[   31.956233]  __iopt_area_unfill_domain+0x4e1/0x560
[   31.956621]  ? __this_cpu_preempt_check+0x20/0x30
[   31.956993]  ? lock_is_held_type+0xe6/0x140
[   31.957310]  ? rcu_read_lock_sched_held+0x57/0x80
[   31.957664]  ? __mutex_lock+0x13a/0xf30
[   31.957954]  ? write_comp_data+0x2f/0x90
[   31.958247]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   31.958602]  iopt_area_unfill_domain+0x32/0x40
[   31.958930]  iopt_table_remove_domain+0x23f/0x4c0
[   31.959284]  iommufd_device_selftest_detach+0x3a/0x90
[   31.959664]  iommufd_selftest_destroy+0x55/0x70
[   31.960001]  iommufd_object_destroy_user+0xce/0x130
[   31.960357]  iommufd_destroy+0xa2/0xc0
[   31.960644]  iommufd_fops_ioctl+0x1ef/0x310
[   31.960992]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   31.961349]  ? write_comp_data+0x2f/0x90
[   31.961650]  __x64_sys_ioctl+0x10e/0x160
[   31.961951]  ? iommufd_get_object.part.6+0x1c0/0x1c0
[   31.962315]  do_syscall_64+0x3b/0x90
[   31.962589]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   31.962960] RIP: 0033:0x7f3777c1e59d
[   31.963232] Code: 00 c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d d3 08 0d 00 f7 d8 64 89 01 48
[   31.964533] RSP: 002b:00007ffd0d727918 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   31.965094] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f3777c1e59d
[   31.965585] RDX: 0000000020000140 RSI: 0000000000003b80 RDI: 0000000000000003
[   31.966085] RBP: 00007ffd0d727930 R08: 00007ffd0d727930 R09: 00007ffd0d727930
[   31.966586] R10: 00007ffd0d727930 R11: 0000000000000213 R12: 0000000000401180
[   31.967081] R13: 00007ffd0d727a50 R14: 0000000000000000 R15: 0000000000000000
[   31.967603]  </TASK>
[   31.967782] irq event stamp: 16143
[   31.968041] hardirqs last  enabled at (16151): [<ffffffff811b7f21>] __up_console_sem+0x91/0xb0
[   31.968701] hardirqs last disabled at (16160): [<ffffffff811b7f06>] __up_console_sem+0x76/0xb0
[   31.969345] softirqs last  enabled at (16092): [<ffffffff83000329>] __do_softirq+0x329/0x490
[   31.969980] softirqs last disabled at (16075): [<ffffffff81111082>] irq_exit_rcu+0xd2/0x100
[   31.970618] ---[ end trace 0000000000000000 ]---
[   31.974985] ------------[ cut here ]------------
[   31.975341] WARNING: CPU: 0 PID: 610 at drivers/iommu/iommufd/pages.c:178 batch_unpin.isra.23+0x151/0x1a0
[   31.976068] Modules linked in:
[   31.976314] CPU: 0 PID: 610 Comm: repro Tainted: G        W          6.1.0-a0a6c76cf2a5+ #1
[   31.976955] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   31.977796] RIP: 0010:batch_unpin.isra.23+0x151/0x1a0
[   31.978197] Code: e8 c4 be 2b ff 48 8b 45 d0 48 85 c0 75 17 e8 26 bd 2b ff 48 8b 7d c8 48 89 de e8 fa bd 2b ff 48 39 5d c8 73 07 e8 0f bd 2b ff <0f> 0b e8 08 bd 2b ff 4d 29 e5 31 ff 41 83 c6 01 4c 89 ee 31 db e8
[   31.979544] RSP: 0018:ffffc900010b39d8 EFLAGS: 00010246
[   31.979943] RAX: 0000000000000000 RBX: fffffffffffffffe RCX: ffffffff81fdeda6
[   31.980474] RDX: 0000000000000000 RSI: ffff8880135d8000 RDI: 0000000000000002
[   31.981044] RBP: ffffc900010b3a20 R08: 0000000000000000 R09: ffff88807dc3b890
[   31.981576] R10: 0000000000000f93 R11: 0000000000000000 R12: 0000000000000001
[   31.982109] R13: 0000000000000001 R14: 0000000000000000 R15: ffff888009f85400
[   31.982638] FS:  0000000000000000(0000) GS:ffff88807dc00000(0000) knlGS:0000000000000000
[   31.983219] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   31.983646] CR2: 00007f3777cf0500 CR3: 0000000003c12006 CR4: 0000000000770ef0
[   31.984184] PKRU: 55555554
[   31.984397] Call Trace:
[   31.984591]  <TASK>
[   31.984789]  iopt_pages_unfill_xarray+0x39f/0x5c0
[   31.985182]  ? write_comp_data+0x2f/0x90
[   31.985500]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   31.985863]  ? write_comp_data+0x2f/0x90
[   31.986175]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   31.986552]  ? interval_tree_remove+0x291/0x4e0
[   31.986895]  ? write_comp_data+0x2f/0x90
[   31.987202]  iopt_area_remove_access+0x108/0x120
[   31.987561]  iommufd_access_unpin_pages+0x177/0x210
[   31.987959]  iommufd_test_access_unmap+0xe0/0x130
[   31.988329]  ? iommufd_test_access_unmap+0x130/0x130
[   31.988737]  iommufd_test_staccess_release+0x39/0x60
[   31.989132]  __fput+0x11f/0x450
[   31.989387]  ____fput+0x1e/0x30
[   31.989638]  task_work_run+0xb6/0x120
[   31.989934]  do_exit+0x521/0x1340
[   31.990203]  ? lockdep_hardirqs_on+0x8a/0x110
[   31.990561]  ? trace_hardirqs_on+0x3f/0x100
[   31.990882]  do_group_exit+0x5e/0xf0
[   31.991160]  __x64_sys_exit_group+0x25/0x30
[   31.991482]  do_syscall_64+0x3b/0x90
[   31.991766]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   31.992189] RIP: 0033:0x7f3777be6cf6
[   31.992487] Code: Unable to access opcode bytes at 0x7f3777be6ccc.
[   31.992967] RSP: 002b:00007ffd0d7278d8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
[   31.993536] RAX: ffffffffffffffda RBX: 00007f3777cf1490 RCX: 00007f3777be6cf6
[   31.994068] RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
[   31.994599] RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffff80
[   31.995108] R10: 0000000000000004 R11: 0000000000000246 R12: 00007f3777cf1490
[   31.995629] R13: 0000000000000001 R14: 00007f3777cf4e88 R15: 0000000000000000
[   31.996175]  </TASK>
[   31.996351] irq event stamp: 22031
[   31.996612] hardirqs last  enabled at (22039): [<ffffffff811b7f21>] __up_console_sem+0x91/0xb0
[   31.997275] hardirqs last disabled at (22048): [<ffffffff811b7f06>] __up_console_sem+0x76/0xb0
[   31.997903] softirqs last  enabled at (16092): [<ffffffff83000329>] __do_softirq+0x329/0x490
[   31.998546] softirqs last disabled at (16075): [<ffffffff81111082>] irq_exit_rcu+0xd2/0x100
[   31.999145] ---[ end trace 0000000000000000 ]---
[   31.999583] ------------[ cut here ]------------
[   31.999936] WARNING: CPU: 0 PID: 610 at drivers/iommu/iommufd/pages.c:886 update_unpinned+0x75/0x80
[   32.000609] Modules linked in:
[   32.000859] CPU: 0 PID: 610 Comm: repro Tainted: G        W          6.1.0-a0a6c76cf2a5+ #1
[   32.001479] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   32.002316] RIP: 0010:update_unpinned+0x75/0x80
[   32.002663] Code: ac 2b ff 48 89 de 31 c9 31 d2 4c 29 e6 4c 89 ef e8 70 fb ff ff e8 bb ac 2b ff 5b 41 5c 41 5d 5d c3 cc cc cc cc e8 ab ac 2b ff <0f> 0b eb e7 0f 1f 80 00 00 00 00 0f 1f 44 00 00 55 48 89 e5 41 57
[   32.004019] RSP: 0018:ffffc900010b3a08 EFLAGS: 00010246
[   32.004417] RAX: 0000000000000000 RBX: 0000000000000800 RCX: ffffffff81fdfdcf
[   32.004967] RDX: 0000000000000000 RSI: ffff8880135d8000 RDI: 0000000000000002
[   32.005503] RBP: ffffc900010b3a20 R08: 0000000000000000 R09: ffff88807dc3b890
[   32.006041] R10: 0000000000000f93 R11: 0000000000000000 R12: fffffffffffffffe
[   32.006594] R13: ffff888009f85400 R14: 0000000000000002 R15: 0000000000000002
[   32.007101] FS:  0000000000000000(0000) GS:ffff88807dc00000(0000) knlGS:0000000000000000
[   32.007687] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   32.008125] CR2: 00007f3777cf0500 CR3: 0000000003c12006 CR4: 0000000000770ef0
[   32.008681] PKRU: 55555554
[   32.008895] Call Trace:
[   32.009113]  <TASK>
[   32.009286]  iopt_pages_unfill_xarray+0x522/0x5c0
[   32.009688]  ? write_comp_data+0x2f/0x90
[   32.010006]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   32.010376]  ? write_comp_data+0x2f/0x90
[   32.010687]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   32.011042]  ? interval_tree_remove+0x291/0x4e0
[   32.011389]  ? write_comp_data+0x2f/0x90
[   32.011702]  iopt_area_remove_access+0x108/0x120
[   32.012073]  iommufd_access_unpin_pages+0x177/0x210
[   32.012483]  iommufd_test_access_unmap+0xe0/0x130
[   32.012860]  ? iommufd_test_access_unmap+0x130/0x130
[   32.013240]  iommufd_test_staccess_release+0x39/0x60
[   32.013632]  __fput+0x11f/0x450
[   32.013899]  ____fput+0x1e/0x30
[   32.014161]  task_work_run+0xb6/0x120
[   32.014467]  do_exit+0x521/0x1340
[   32.014736]  ? lockdep_hardirqs_on+0x8a/0x110
[   32.015070]  ? trace_hardirqs_on+0x3f/0x100
[   32.015399]  do_group_exit+0x5e/0xf0
[   32.015680]  __x64_sys_exit_group+0x25/0x30
[   32.016016]  do_syscall_64+0x3b/0x90
[   32.016303]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   32.016696] RIP: 0033:0x7f3777be6cf6
[   32.016971] Code: Unable to access opcode bytes at 0x7f3777be6ccc.
[   32.017437] RSP: 002b:00007ffd0d7278d8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
[   32.018007] RAX: ffffffffffffffda RBX: 00007f3777cf1490 RCX: 00007f3777be6cf6
[   32.018571] RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
[   32.019082] RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffff80
[   32.019599] R10: 0000000000000004 R11: 0000000000000246 R12: 00007f3777cf1490
[   32.020126] R13: 0000000000000001 R14: 00007f3777cf4e88 R15: 0000000000000000
[   32.020692]  </TASK>
[   32.020870] irq event stamp: 22511
[   32.021132] hardirqs last  enabled at (22519): [<ffffffff811b7f21>] __up_console_sem+0x91/0xb0
[   32.021777] hardirqs last disabled at (22526): [<ffffffff811b7f06>] __up_console_sem+0x76/0xb0
[   32.022401] softirqs last  enabled at (16092): [<ffffffff83000329>] __do_softirq+0x329/0x490
[   32.023010] softirqs last disabled at (16075): [<ffffffff81111082>] irq_exit_rcu+0xd2/0x100
[   32.023612] ---[ end trace 0000000000000000 ]---
[   32.024105] ------------[ cut here ]------------
[   32.024460] WARNING: CPU: 0 PID: 610 at drivers/iommu/iommufd/pages.c:1181 iopt_release_pages+0x159/0x190
[   32.025198] Modules linked in:
[   32.025447] CPU: 0 PID: 610 Comm: repro Tainted: G        W          6.1.0-a0a6c76cf2a5+ #1
[   32.026038] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   32.026865] RIP: 0010:iopt_release_pages+0x159/0x190
[   32.027250] Code: b5 11 ff eb cb e8 87 90 2b ff be 03 00 00 00 4c 89 f7 e8 6a 8b ce ff eb b7 e8 73 90 2b ff 0f 0b e9 ed fe ff ff e8 67 90 2b ff <0f> 0b e9 00 ff ff ff e8 5b 90 2b ff 0f 0b e9 07 ff ff ff e8 4f 90
[   32.028632] RSP: 0018:ffffc900010b3c88 EFLAGS: 00010246
[   32.029052] RAX: 0000000000000000 RBX: ffff888009f85400 RCX: ffffffff81fe1957
[   32.029585] RDX: 0000000000000000 RSI: ffff8880135d8000 RDI: 0000000000000002
[   32.030117] RBP: ffffc900010b3ca8 R08: 000000000000001c R09: 0000000000000001
[   32.030646] R10: ffff8880135d8d98 R11: 0000000000000000 R12: fffffffffffffffe
[   32.031151] R13: 0000000001000000 R14: 00000000017fffff R15: 0000000000000000
[   32.031678] FS:  0000000000000000(0000) GS:ffff88807dc00000(0000) knlGS:0000000000000000
[   32.032280] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   32.032731] CR2: 00007f3777cf0500 CR3: 0000000003c12006 CR4: 0000000000770ef0
[   32.033268] PKRU: 55555554
[   32.033482] Call Trace:
[   32.033717]  <TASK>
[   32.033888]  iopt_unmap_iova_range+0x1ef/0x2e0
[   32.034225]  iopt_unmap_all+0x2f/0x60
[   32.034516]  iommufd_ioas_destroy+0x2c/0x70
[   32.034840]  iommufd_fops_release+0xd4/0x170
[   32.035177]  ? iommufd_ctx_get+0x30/0x30
[   32.035488]  __fput+0x11f/0x450
[   32.035762]  ____fput+0x1e/0x30
[   32.036023]  task_work_run+0xb6/0x120
[   32.036328]  do_exit+0x521/0x1340
[   32.036595]  ? lockdep_hardirqs_on+0x8a/0x110
[   32.036968]  ? trace_hardirqs_on+0x3f/0x100
[   32.037310]  do_group_exit+0x5e/0xf0
[   32.037600]  __x64_sys_exit_group+0x25/0x30
[   32.037927]  do_syscall_64+0x3b/0x90
[   32.038211]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   32.038606] RIP: 0033:0x7f3777be6cf6
[   32.038871] Code: Unable to access opcode bytes at 0x7f3777be6ccc.
[   32.039318] RSP: 002b:00007ffd0d7278d8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
[   32.039885] RAX: ffffffffffffffda RBX: 00007f3777cf1490 RCX: 00007f3777be6cf6
[   32.040434] RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
[   32.040981] RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffff80
[   32.041510] R10: 0000000000000004 R11: 0000000000000246 R12: 00007f3777cf1490
[   32.042045] R13: 0000000000000001 R14: 00007f3777cf4e88 R15: 0000000000000000
[   32.042596]  </TASK>
[   32.042763] irq event stamp: 22971
[   32.043019] hardirqs last  enabled at (22979): [<ffffffff811b7f21>] __up_console_sem+0x91/0xb0
[   32.043650] hardirqs last disabled at (22986): [<ffffffff811b7f06>] __up_console_sem+0x76/0xb0
[   32.044298] softirqs last  enabled at (22614): [<ffffffff83000329>] __do_softirq+0x329/0x490
[   32.044954] softirqs last disabled at (22609): [<ffffffff81111082>] irq_exit_rcu+0xd2/0x100
[   32.045597] ---[ end trace 0000000000000000 ]---
[   32.272072] ------------[ cut here ]------------
[   32.272434] WARNING: CPU: 0 PID: 617 at drivers/iommu/iommufd/pages.c:294 __iopt_area_unfill_domain+0x152/0x560
[   32.273211] Modules linked in:
[   32.273446] CPU: 0 PID: 617 Comm: repro Tainted: G        W          6.1.0-a0a6c76cf2a5+ #1
[   32.274066] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   32.274916] RIP: 0010:__iopt_area_unfill_domain+0x152/0x560
[   32.275544] Code: a1 2b ff 44 8b 64 24 54 48 8b 44 24 48 31 ff 44 89 e6 48 89 44 24 38 e8 6c a2 2b ff 45 85 e4 0f 85 eb 01 00 00 e8 ee a0 2b ff <0f> 0b e8 e7 a0 2b ff 48 8b 44 24 38 89 5c 24 58 89 18 8b 44 24 54
[   32.277060] RSP: 0018:ffffc900010ebae0 EFLAGS: 00010246
[   32.277478] RAX: 0000000000000000 RBX: 00000000ffffffff RCX: ffffffff81fe0bd5
[   32.278006] RDX: 0000000000000000 RSI: ffff8880135da980 RDI: 0000000000000002
[   32.278874] RBP: ffffc900010ebd10 R08: 000000000003b5c5 R09: 000000000000000d
[   32.279659] R10: 000000000003b5a0 R11: 0000000000000024 R12: 000000000000001b
[   32.280376] R13: 0000000000000801 R14: 00000000000007ff R15: 0000000000000800
[   32.281152] FS:  00007f3777af9740(0000) GS:ffff88807dc00000(0000) knlGS:0000000000000000
[   32.281907] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   32.282578] CR2: 00007f3777c1e580 CR3: 0000000013562006 CR4: 0000000000770ef0
[   32.283292] PKRU: 55555554
[   32.283622] Call Trace:
[   32.283866]  <TASK>
[   32.284106]  ? __this_cpu_preempt_check+0x20/0x30
[   32.284616]  ? lock_is_held_type+0xe6/0x140
[   32.285117]  ? rcu_read_lock_sched_held+0x57/0x80
[   32.285576]  ? __mutex_lock+0x13a/0xf30
[   32.285961]  ? write_comp_data+0x2f/0x90
[   32.286349]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   32.286817]  iopt_area_unfill_domain+0x32/0x40
[   32.287258]  iopt_table_remove_domain+0x23f/0x4c0
[   32.287843]  iommufd_device_selftest_detach+0x3a/0x90
[   32.288342]  iommufd_selftest_destroy+0x55/0x70
[   32.288818]  iommufd_object_destroy_user+0xce/0x130
[   32.289416]  iommufd_destroy+0xa2/0xc0
[   32.289802]  iommufd_fops_ioctl+0x1ef/0x310
[   32.290216]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   32.290683]  ? write_comp_data+0x2f/0x90
[   32.291072]  __x64_sys_ioctl+0x10e/0x160
[   32.291468]  ? iommufd_get_object.part.6+0x1c0/0x1c0
[   32.292076]  do_syscall_64+0x3b/0x90
[   32.292434]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   32.292941] RIP: 0033:0x7f3777c1e59d
[   32.293297] Code: 00 c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d d3 08 0d 00 f7 d8 64 89 01 48
[   32.295096] RSP: 002b:00007ffd0d727918 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   32.295834] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f3777c1e59d
[   32.296611] RDX: 0000000020000140 RSI: 0000000000003b80 RDI: 0000000000000003
[   32.297301] RBP: 00007ffd0d727930 R08: 00007ffd0d727930 R09: 00007ffd0d727930
[   32.298103] R10: 00007ffd0d727930 R11: 0000000000000213 R12: 0000000000401180
[   32.298777] R13: 00007ffd0d727a50 R14: 0000000000000000 R15: 0000000000000000
[   32.299309]  </TASK>
[   32.299484] irq event stamp: 14895
[   32.299760] hardirqs last  enabled at (14903): [<ffffffff811b7f21>] __up_console_sem+0x91/0xb0
[   32.300499] hardirqs last disabled at (14924): [<ffffffff811b7f06>] __up_console_sem+0x76/0xb0
[   32.301274] softirqs last  enabled at (14922): [<ffffffff83000329>] __do_softirq+0x329/0x490
[   32.302000] softirqs last disabled at (14943): [<ffffffff81111082>] irq_exit_rcu+0xd2/0x100
[   32.302647] ---[ end trace 0000000000000000 ]---
[   32.303084] ------------[ cut here ]------------
[   32.303423] WARNING: CPU: 0 PID: 617 at drivers/iommu/iommufd/pages.c:1290 __iopt_area_unfill_domain+0x54f/0x560
[   32.304321] Modules linked in:
[   32.304563] CPU: 0 PID: 617 Comm: repro Tainted: G        W          6.1.0-a0a6c76cf2a5+ #1
[   32.305193] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   32.306041] RIP: 0010:__iopt_area_unfill_domain+0x54f/0x560
[   32.306608] Code: e8 86 9e 2b ff 85 db 0f 85 35 fb ff ff e8 09 9d 2b ff 0f 0b e9 29 fb ff ff e8 fd 9c 2b ff 0f 0b e9 69 fe ff ff e8 f1 9c 2b ff <0f> 0b e9 58 ff ff ff e8 65 2d dc 00 0f 1f 44 00 00 0f 1f 44 00 00
[   32.308098] RSP: 0018:ffffc900010ebae0 EFLAGS: 00010246
[   32.308498] RAX: 0000000000000000 RBX: 00000000ffffffff RCX: ffffffff81fe0d26
[   32.309048] RDX: 0000000000000000 RSI: ffff8880135da980 RDI: 0000000000000002
[   32.309580] RBP: ffffc900010ebd10 R08: 000000000003b5c5 R09: 000000000000000d
[   32.310107] R10: 000000000003b5a0 R11: 0000000000000024 R12: 00000000000007ff
[   32.310764] R13: 0000000000000801 R14: 00000000000007ff R15: 0000000000000800
[   32.311275] FS:  00007f3777af9740(0000) GS:ffff88807dc00000(0000) knlGS:0000000000000000
[   32.312003] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   32.312436] CR2: 00007f3777c1e580 CR3: 0000000013562006 CR4: 0000000000770ef0
[   32.312984] PKRU: 55555554
[   32.313195] Call Trace:
[   32.313386]  <TASK>
[   32.313591]  ? __this_cpu_preempt_check+0x20/0x30
[   32.313967]  ? lock_is_held_type+0xe6/0x140
[   32.314298]  ? rcu_read_lock_sched_held+0x57/0x80
[   32.314793]  ? __mutex_lock+0x13a/0xf30
[   32.315087]  ? write_comp_data+0x2f/0x90
[   32.315389]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   32.315752]  iopt_area_unfill_domain+0x32/0x40
[   32.316107]  iopt_table_remove_domain+0x23f/0x4c0
[   32.316581]  iommufd_device_selftest_detach+0x3a/0x90
[   32.317008]  iommufd_selftest_destroy+0x55/0x70
[   32.317368]  iommufd_object_destroy_user+0xce/0x130
[   32.317735]  iommufd_destroy+0xa2/0xc0
[   32.318027]  iommufd_fops_ioctl+0x1ef/0x310
[   32.318353]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   32.318722]  ? write_comp_data+0x2f/0x90
[   32.319036]  __x64_sys_ioctl+0x10e/0x160
[   32.319398]  ? iommufd_get_object.part.6+0x1c0/0x1c0
[   32.319846]  do_syscall_64+0x3b/0x90
[   32.320127]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   32.320506] RIP: 0033:0x7f3777c1e59d
[   32.320810] Code: 00 c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d d3 08 0d 00 f7 d8 64 89 01 48
[   32.322211] RSP: 002b:00007ffd0d727918 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   32.322769] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f3777c1e59d
[   32.323298] RDX: 0000000020000140 RSI: 0000000000003b80 RDI: 0000000000000003
[   32.323918] RBP: 00007ffd0d727930 R08: 00007ffd0d727930 R09: 00007ffd0d727930
[   32.324475] R10: 00007ffd0d727930 R11: 0000000000000213 R12: 0000000000401180
[   32.325167] R13: 00007ffd0d727a50 R14: 0000000000000000 R15: 0000000000000000
[   32.325714]  </TASK>
[   32.325887] irq event stamp: 15539
[   32.326146] hardirqs last  enabled at (15547): [<ffffffff811b7f21>] __up_console_sem+0x91/0xb0
[   32.326783] hardirqs last disabled at (15554): [<ffffffff811b7f06>] __up_console_sem+0x76/0xb0
[   32.327425] softirqs last  enabled at (15520): [<ffffffff83000329>] __do_softirq+0x329/0x490
[   32.328145] softirqs last disabled at (15571): [<ffffffff81111082>] irq_exit_rcu+0xd2/0x100
[   32.328791] ---[ end trace 0000000000000000 ]---
[   32.337101] ------------[ cut here ]------------
[   32.337461] WARNING: CPU: 0 PID: 617 at drivers/iommu/iommufd/pages.c:178 batch_unpin.isra.23+0x151/0x1a0
[   32.338308] Modules linked in:
[   32.338563] CPU: 0 PID: 617 Comm: repro Tainted: G        W          6.1.0-a0a6c76cf2a5+ #1
[   32.339272] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   32.340241] RIP: 0010:batch_unpin.isra.23+0x151/0x1a0
[   32.340631] Code: e8 c4 be 2b ff 48 8b 45 d0 48 85 c0 75 17 e8 26 bd 2b ff 48 8b 7d c8 48 89 de e8 fa bd 2b ff 48 39 5d c8 73 07 e8 0f bd 2b ff <0f> 0b e8 08 bd 2b ff 4d 29 e5 31 ff 41 83 c6 01 4c 89 ee 31 db e8
[   32.342141] RSP: 0018:ffffc900010eb9d8 EFLAGS: 00010246
[   32.342547] RAX: 0000000000000000 RBX: ffffffffffffffff RCX: ffffffff81fded8c
[   32.343053] RDX: 0000000000000000 RSI: ffff8880135da980 RDI: 0000000000000002
[   32.343571] RBP: ffffc900010eba20 R08: 0000000000000000 R09: ffff88807dc3b890
[   32.344093] R10: 0000000000000ffa R11: 0000000000000000 R12: 0000000000000001
[   32.344613] R13: 0000000000000001 R14: 0000000000000000 R15: ffff888009f85000
[   32.345171] FS:  0000000000000000(0000) GS:ffff88807dc00000(0000) knlGS:0000000000000000
[   32.345769] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   32.346197] CR2: 00007f3777cf0500 CR3: 000000000d51a001 CR4: 0000000000770ef0
[   32.346752] PKRU: 55555554
[   32.346960] Call Trace:
[   32.347153]  <TASK>
[   32.347328]  iopt_pages_unfill_xarray+0x39f/0x5c0
[   32.347729]  ? write_comp_data+0x2f/0x90
[   32.348044]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   32.348407]  ? write_comp_data+0x2f/0x90
[   32.348737]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   32.349105]  ? interval_tree_remove+0x291/0x4e0
[   32.349477]  ? write_comp_data+0x2f/0x90
[   32.349789]  iopt_area_remove_access+0x108/0x120
[   32.350155]  iommufd_access_unpin_pages+0x177/0x210
[   32.350554]  iommufd_test_access_unmap+0xe0/0x130
[   32.350909]  ? iommufd_test_access_unmap+0x130/0x130
[   32.351285]  iommufd_test_staccess_release+0x39/0x60
[   32.351668]  __fput+0x11f/0x450
[   32.351927]  ____fput+0x1e/0x30
[   32.352184]  task_work_run+0xb6/0x120
[   32.352482]  do_exit+0x521/0x1340
[   32.352767]  ? lockdep_hardirqs_on+0x8a/0x110
[   32.353114]  ? trace_hardirqs_on+0x3f/0x100
[   32.353447]  do_group_exit+0x5e/0xf0
[   32.353732]  __x64_sys_exit_group+0x25/0x30
[   32.354056]  do_syscall_64+0x3b/0x90
[   32.354339]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   32.354723] RIP: 0033:0x7f3777be6cf6
[   32.354993] Code: Unable to access opcode bytes at 0x7f3777be6ccc.
[   32.355441] RSP: 002b:00007ffd0d7278d8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
[   32.356000] RAX: ffffffffffffffda RBX: 00007f3777cf1490 RCX: 00007f3777be6cf6
[   32.356524] RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
[   32.357069] RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffff80
[   32.357601] R10: 0000000000000004 R11: 0000000000000246 R12: 00007f3777cf1490
[   32.358139] R13: 0000000000000001 R14: 00007f3777cf4e88 R15: 0000000000000000
[   32.358686]  </TASK>
[   32.358862] irq event stamp: 21725
[   32.359119] hardirqs last  enabled at (21733): [<ffffffff811b7f21>] __up_console_sem+0x91/0xb0
[   32.359934] hardirqs last disabled at (21740): [<ffffffff811b7f06>] __up_console_sem+0x76/0xb0
[   32.360760] softirqs last  enabled at (21414): [<ffffffff83000329>] __do_softirq+0x329/0x490
[   32.361558] softirqs last disabled at (21397): [<ffffffff81111082>] irq_exit_rcu+0xd2/0x100
[   32.362343] ---[ end trace 0000000000000000 ]---
[   32.362886] ------------[ cut here ]------------
[   32.363324] WARNING: CPU: 0 PID: 617 at drivers/iommu/iommufd/pages.c:886 update_unpinned+0x75/0x80
[   32.364175] Modules linked in:
[   32.364475] CPU: 0 PID: 617 Comm: repro Tainted: G        W          6.1.0-a0a6c76cf2a5+ #1
[   32.365274] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   32.366328] RIP: 0010:update_unpinned+0x75/0x80
[   32.366775] Code: ac 2b ff 48 89 de 31 c9 31 d2 4c 29 e6 4c 89 ef e8 70 fb ff ff e8 bb ac 2b ff 5b 41 5c 41 5d 5d c3 cc cc cc cc e8 ab ac 2b ff <0f> 0b eb e7 0f 1f 80 00 00 00 00 0f 1f 44 00 00 55 48 89 e5 41 57
[   32.368486] RSP: 0018:ffffc900010eba08 EFLAGS: 00010246
[   32.369001] RAX: 0000000000000000 RBX: 0000000000000000 RCX: ffffffff81fdfdcf
[   32.369680] RDX: 0000000000000000 RSI: ffff8880135da980 RDI: 0000000000000002
[   32.370350] RBP: ffffc900010eba20 R08: 0000000000000000 R09: ffff88807dc3b890
[   32.371021] R10: 0000000000000ffa R11: 0000000000000000 R12: ffffffffffffffff
[   32.371690] R13: ffff888009f85000 R14: 0000000000000002 R15: 0000000000000002
[   32.372353] FS:  0000000000000000(0000) GS:ffff88807dc00000(0000) knlGS:0000000000000000
[   32.373129] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   32.373674] CR2: 00007f3777cf0500 CR3: 000000000d51a001 CR4: 0000000000770ef0
[   32.374342] PKRU: 55555554
[   32.374616] Call Trace:
[   32.374855]  <TASK>
[   32.375071]  iopt_pages_unfill_xarray+0x522/0x5c0
[   32.375577]  ? write_comp_data+0x2f/0x90
[   32.375951]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   32.376325]  ? write_comp_data+0x2f/0x90
[   32.376625]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   32.377016]  ? interval_tree_remove+0x291/0x4e0
[   32.377545]  ? write_comp_data+0x2f/0x90
[   32.378034]  iopt_area_remove_access+0x108/0x120
[   32.378595]  iommufd_access_unpin_pages+0x177/0x210
[   32.378970]  iommufd_test_access_unmap+0xe0/0x130
[   32.379323]  ? iommufd_test_access_unmap+0x130/0x130
[   32.379715]  iommufd_test_staccess_release+0x39/0x60
[   32.380081]  __fput+0x11f/0x450
[   32.380334]  ____fput+0x1e/0x30
[   32.380593]  task_work_run+0xb6/0x120
[   32.380931]  do_exit+0x521/0x1340
[   32.381334]  ? lockdep_hardirqs_on+0x8a/0x110
[   32.381862]  ? trace_hardirqs_on+0x3f/0x100
[   32.382339]  do_group_exit+0x5e/0xf0
[   32.382661]  __x64_sys_exit_group+0x25/0x30
[   32.382990]  do_syscall_64+0x3b/0x90
[   32.383267]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   32.383650] RIP: 0033:0x7f3777be6cf6
[   32.383941] Code: Unable to access opcode bytes at 0x7f3777be6ccc.
[   32.384380] RSP: 002b:00007ffd0d7278d8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
[   32.384972] RAX: ffffffffffffffda RBX: 00007f3777cf1490 RCX: 00007f3777be6cf6
[   32.385776] RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
[   32.386423] RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffff80
[   32.386926] R10: 0000000000000004 R11: 0000000000000246 R12: 00007f3777cf1490
[   32.387440] R13: 0000000000000001 R14: 00007f3777cf4e88 R15: 0000000000000000
[   32.387954]  </TASK>
[   32.388141] irq event stamp: 22205
[   32.388386] hardirqs last  enabled at (22213): [<ffffffff811b7f21>] __up_console_sem+0x91/0xb0
[   32.389033] hardirqs last disabled at (22222): [<ffffffff811b7f06>] __up_console_sem+0x76/0xb0
[   32.389977] softirqs last  enabled at (21414): [<ffffffff83000329>] __do_softirq+0x329/0x490
[   32.390608] softirqs last disabled at (21397): [<ffffffff81111082>] irq_exit_rcu+0xd2/0x100
[   32.391193] ---[ end trace 0000000000000000 ]---
[   32.391784] ------------[ cut here ]------------
[   32.392490] WARNING: CPU: 1 PID: 617 at drivers/iommu/iommufd/pages.c:1181 iopt_release_pages+0x159/0x190
[   32.393583] Modules linked in:
[   32.394028] CPU: 1 PID: 617 Comm: repro Tainted: G        W          6.1.0-a0a6c76cf2a5+ #1
[   32.394949] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   32.396226] RIP: 0010:iopt_release_pages+0x159/0x190
[   32.396843] Code: b5 11 ff eb cb e8 87 90 2b ff be 03 00 00 00 4c 89 f7 e8 6a 8b ce ff eb b7 e8 73 90 2b ff 0f 0b e9 ed fe ff ff e8 67 90 2b ff <0f> 0b e9 00 ff ff ff e8 5b 90 2b ff 0f 0b e9 07 ff ff ff e8 4f 90
[   32.398895] RSP: 0018:ffffc900010ebc88 EFLAGS: 00010246
[   32.399485] RAX: 0000000000000000 RBX: ffff888009f85000 RCX: ffffffff81fe1957
[   32.400305] RDX: 0000000000000000 RSI: ffff8880135da980 RDI: 0000000000000002
[   32.401112] RBP: ffffc900010ebca8 R08: ffff88800950d840 R09: 0000000080150011
[   32.401880] R10: 0000000000000001 R11: 0000000000000000 R12: ffffffffffffffff
[   32.402669] R13: 0000000001000000 R14: 00000000017fffff R15: 0000000000000000
[   32.403477] FS:  0000000000000000(0000) GS:ffff88807dd00000(0000) knlGS:0000000000000000
[   32.404344] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   32.405055] CR2: 00007fd6e4fb7020 CR3: 0000000013558003 CR4: 0000000000770ee0
[   32.405907] PKRU: 55555554
[   32.406226] Call Trace:
[   32.406523]  <TASK>
[   32.406787]  iopt_unmap_iova_range+0x1ef/0x2e0
[   32.407315]  iopt_unmap_all+0x2f/0x60
[   32.407754]  iommufd_ioas_destroy+0x2c/0x70
[   32.408272]  iommufd_fops_release+0xd4/0x170
[   32.408794]  ? iommufd_ctx_get+0x30/0x30
[   32.409291]  __fput+0x11f/0x450
[   32.409697]  ____fput+0x1e/0x30
[   32.410103]  task_work_run+0xb6/0x120
[   32.410575]  do_exit+0x521/0x1340
[   32.410960]  ? lockdep_hardirqs_on+0x8a/0x110
[   32.411514]  ? trace_hardirqs_on+0x3f/0x100
[   32.412024]  do_group_exit+0x5e/0xf0
[   32.412511]  __x64_sys_exit_group+0x25/0x30
[   32.413018]  do_syscall_64+0x3b/0x90
[   32.413465]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   32.414040] RIP: 0033:0x7f3777be6cf6
[   32.414463] Code: Unable to access opcode bytes at 0x7f3777be6ccc.
[   32.415150] RSP: 002b:00007ffd0d7278d8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
[   32.416006] RAX: ffffffffffffffda RBX: 00007f3777cf1490 RCX: 00007f3777be6cf6
[   32.416823] RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
[   32.417612] RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffff80
[   32.418406] R10: 0000000000000004 R11: 0000000000000246 R12: 00007f3777cf1490
[   32.419224] R13: 0000000000000001 R14: 00007f3777cf4e88 R15: 0000000000000000
[   32.420021]  </TASK>
[   32.420283] irq event stamp: 22735
[   32.420614] hardirqs last  enabled at (22743): [<ffffffff811b7f21>] __up_console_sem+0x91/0xb0
[   32.421289] hardirqs last disabled at (22752): [<ffffffff811b7f06>] __up_console_sem+0x76/0xb0
[   32.422113] softirqs last  enabled at (22374): [<ffffffff83000329>] __do_softirq+0x329/0x490
[   32.422727] softirqs last disabled at (22311): [<ffffffff81111082>] irq_exit_rcu+0xd2/0x100
[   32.423322] ---[ end trace 0000000000000000 ]---
[   32.520554] ------------[ cut here ]------------
[   32.520972] WARNING: CPU: 0 PID: 620 at drivers/iommu/iommufd/pages.c:294 __iopt_area_unfill_domain+0x152/0x560
[   32.521771] Modules linked in:
[   32.522021] CPU: 0 PID: 620 Comm: repro Tainted: G        W          6.1.0-a0a6c76cf2a5+ #1
[   32.522674] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   32.523522] RIP: 0010:__iopt_area_unfill_domain+0x152/0x560
[   32.523970] Code: a1 2b ff 44 8b 64 24 54 48 8b 44 24 48 31 ff 44 89 e6 48 89 44 24 38 e8 6c a2 2b ff 45 85 e4 0f 85 eb 01 00 00 e8 ee a0 2b ff <0f> 0b e8 e7 a0 2b ff 48 8b 44 24 38 89 5c 24 58 89 18 8b 44 24 54
[   32.525433] RSP: 0018:ffffc900010fbae0 EFLAGS: 00010246
[   32.526025] RAX: 0000000000000000 RBX: 00000000ffffffff RCX: ffffffff81fe0bd5
[   32.526843] RDX: 0000000000000000 RSI: ffff8880135dd300 RDI: 0000000000000002
[   32.527391] RBP: ffffc900010fbd10 R08: 000000000003b5c5 R09: 0000000000000005
[   32.527956] R10: 000000000003b5a0 R11: 0000000000000024 R12: 0000000000000001
[   32.528502] R13: 0000000000000801 R14: 00000000000007ff R15: 0000000000000800
[   32.529112] FS:  00007f3777af9740(0000) GS:ffff88807dc00000(0000) knlGS:0000000000000000
[   32.530023] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   32.530673] CR2: 00007f3777c1e580 CR3: 0000000013570001 CR4: 0000000000770ef0
[   32.531658] PKRU: 55555554
[   32.531996] Call Trace:
[   32.532469]  <TASK>
[   32.532824]  ? __this_cpu_preempt_check+0x20/0x30
[   32.533406]  ? lock_is_held_type+0xe6/0x140
[   32.533943]  ? rcu_read_lock_sched_held+0x57/0x80
[   32.534549]  ? __mutex_lock+0x13a/0xf30
[   32.535025]  ? write_comp_data+0x2f/0x90
[   32.535647]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   32.536234]  iopt_area_unfill_domain+0x32/0x40
[   32.536798]  iopt_table_remove_domain+0x23f/0x4c0
[   32.537464]  iommufd_device_selftest_detach+0x3a/0x90
[   32.538080]  iommufd_selftest_destroy+0x55/0x70
[   32.538636]  iommufd_object_destroy_user+0xce/0x130
[   32.539206]  iommufd_destroy+0xa2/0xc0
[   32.539808]  iommufd_fops_ioctl+0x1ef/0x310
[   32.540327]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   32.540942]  ? write_comp_data+0x2f/0x90
[   32.541426]  __x64_sys_ioctl+0x10e/0x160
[   32.541920]  ? iommufd_get_object.part.6+0x1c0/0x1c0
[   32.542673]  do_syscall_64+0x3b/0x90
[   32.543116]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   32.543723] RIP: 0033:0x7f3777c1e59d
[   32.544312] Code: 00 c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d d3 08 0d 00 f7 d8 64 89 01 48
[   32.546543] RSP: 002b:00007ffd0d727918 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   32.547371] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f3777c1e59d
[   32.548144] RDX: 0000000020000140 RSI: 0000000000003b80 RDI: 0000000000000003
[   32.549132] RBP: 00007ffd0d727930 R08: 00007ffd0d727930 R09: 00007ffd0d727930
[   32.549944] R10: 00007ffd0d727930 R11: 0000000000000213 R12: 0000000000401180
[   32.550867] R13: 00007ffd0d727a50 R14: 0000000000000000 R15: 0000000000000000
[   32.551506]  </TASK>
[   32.551681] irq event stamp: 14755
[   32.551950] hardirqs last  enabled at (14763): [<ffffffff811b7f21>] __up_console_sem+0x91/0xb0
[   32.552582] hardirqs last disabled at (14770): [<ffffffff811b7f06>] __up_console_sem+0x76/0xb0
[   32.553253] softirqs last  enabled at (14736): [<ffffffff83000329>] __do_softirq+0x329/0x490
[   32.554236] softirqs last disabled at (14725): [<ffffffff81111082>] irq_exit_rcu+0xd2/0x100
[   32.554851] ---[ end trace 0000000000000000 ]---
[   32.555309] ------------[ cut here ]------------
[   32.555642] WARNING: CPU: 0 PID: 620 at drivers/iommu/iommufd/pages.c:1290 __iopt_area_unfill_domain+0x54f/0x560
[   32.556396] Modules linked in:
[   32.556633] CPU: 0 PID: 620 Comm: repro Tainted: G        W          6.1.0-a0a6c76cf2a5+ #1
[   32.557282] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   32.558429] RIP: 0010:__iopt_area_unfill_domain+0x54f/0x560
[   32.558853] Code: e8 86 9e 2b ff 85 db 0f 85 35 fb ff ff e8 09 9d 2b ff 0f 0b e9 29 fb ff ff e8 fd 9c 2b ff 0f 0b e9 69 fe ff ff e8 f1 9c 2b ff <0f> 0b e9 58 ff ff ff e8 65 2d dc 00 0f 1f 44 00 00 0f 1f 44 00 00
[   32.560195] RSP: 0018:ffffc900010fbae0 EFLAGS: 00010246
[   32.560592] RAX: 0000000000000000 RBX: 00000000ffffffff RCX: ffffffff81fe0d26
[   32.561137] RDX: 0000000000000000 RSI: ffff8880135dd300 RDI: 0000000000000002
[   32.561912] RBP: ffffc900010fbd10 R08: 000000000003b5c5 R09: 0000000000000005
[   32.562436] R10: 000000000003b5a0 R11: 0000000000000024 R12: 00000000000007ff
[   32.562973] R13: 0000000000000801 R14: 00000000000007ff R15: 0000000000000800
[   32.563504] FS:  00007f3777af9740(0000) GS:ffff88807dc00000(0000) knlGS:0000000000000000
[   32.564105] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   32.564524] CR2: 00007f3777c1e580 CR3: 0000000013570001 CR4: 0000000000770ef0
[   32.565060] PKRU: 55555554
[   32.565267] Call Trace:
[   32.565467]  <TASK>
[   32.565664]  ? __this_cpu_preempt_check+0x20/0x30
[   32.566038]  ? lock_is_held_type+0xe6/0x140
[   32.566372]  ? rcu_read_lock_sched_held+0x57/0x80
[   32.566748]  ? __mutex_lock+0x13a/0xf30
[   32.567047]  ? write_comp_data+0x2f/0x90
[   32.567353]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   32.567723]  iopt_area_unfill_domain+0x32/0x40
[   32.568078]  iopt_table_remove_domain+0x23f/0x4c0
[   32.568436]  iommufd_device_selftest_detach+0x3a/0x90
[   32.568852]  iommufd_selftest_destroy+0x55/0x70
[   32.569206]  iommufd_object_destroy_user+0xce/0x130
[   32.569599]  iommufd_destroy+0xa2/0xc0
[   32.569895]  iommufd_fops_ioctl+0x1ef/0x310
[   32.570229]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   32.570595]  ? write_comp_data+0x2f/0x90
[   32.570901]  __x64_sys_ioctl+0x10e/0x160
[   32.571207]  ? iommufd_get_object.part.6+0x1c0/0x1c0
[   32.571594]  do_syscall_64+0x3b/0x90
[   32.571882]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   32.572259] RIP: 0033:0x7f3777c1e59d
[   32.572532] Code: 00 c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d d3 08 0d 00 f7 d8 64 89 01 48
[   32.573864] RSP: 002b:00007ffd0d727918 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   32.574418] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f3777c1e59d
[   32.574933] RDX: 0000000020000140 RSI: 0000000000003b80 RDI: 0000000000000003
[   32.575451] RBP: 00007ffd0d727930 R08: 00007ffd0d727930 R09: 00007ffd0d727930
[   32.575970] R10: 00007ffd0d727930 R11: 0000000000000213 R12: 0000000000401180
[   32.576491] R13: 00007ffd0d727a50 R14: 0000000000000000 R15: 0000000000000000
[   32.577046]  </TASK>
[   32.577221] irq event stamp: 15217
[   32.577483] hardirqs last  enabled at (15225): [<ffffffff811b7f21>] __up_console_sem+0x91/0xb0
[   32.578115] hardirqs last disabled at (15232): [<ffffffff811b7f06>] __up_console_sem+0x76/0xb0
[   32.578742] softirqs last  enabled at (15052): [<ffffffff83000329>] __do_softirq+0x329/0x490
[   32.579360] softirqs last disabled at (15047): [<ffffffff81111082>] irq_exit_rcu+0xd2/0x100
[   32.579967] ---[ end trace 0000000000000000 ]---
[   32.584525] ------------[ cut here ]------------
[   32.584980] WARNING: CPU: 0 PID: 620 at drivers/iommu/iommufd/pages.c:178 batch_unpin.isra.23+0x151/0x1a0
[   32.585697] Modules linked in:
[   32.585936] CPU: 0 PID: 620 Comm: repro Tainted: G        W          6.1.0-a0a6c76cf2a5+ #1
[   32.586554] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   32.587360] RIP: 0010:batch_unpin.isra.23+0x151/0x1a0
[   32.587735] Code: e8 c4 be 2b ff 48 8b 45 d0 48 85 c0 75 17 e8 26 bd 2b ff 48 8b 7d c8 48 89 de e8 fa bd 2b ff 48 39 5d c8 73 07 e8 0f bd 2b ff <0f> 0b e8 08 bd 2b ff 4d 29 e5 31 ff 41 83 c6 01 4c 89 ee 31 db e8
[   32.589065] RSP: 0018:ffffc900010fb9d8 EFLAGS: 00010246
[   32.589457] RAX: 0000000000000000 RBX: ffffffffffffffff RCX: ffffffff81fded8c
[   32.589963] RDX: 0000000000000000 RSI: ffff8880135dd300 RDI: 0000000000000002
[   32.590468] RBP: ffffc900010fba20 R08: 0000000000000000 R09: ffff88807dc3b890
[   32.590989] R10: 000000000000101c R11: 0000000000000000 R12: 0000000000000001
[   32.591507] R13: 0000000000000001 R14: 0000000000000000 R15: ffff888009f85000
[   32.592028] FS:  0000000000000000(0000) GS:ffff88807dc00000(0000) knlGS:0000000000000000
[   32.592617] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   32.593054] CR2: 00007f3777cf0500 CR3: 0000000003c12005 CR4: 0000000000770ef0
[   32.593573] PKRU: 55555554
[   32.593786] Call Trace:
[   32.593977]  <TASK>
[   32.594152]  iopt_pages_unfill_xarray+0x39f/0x5c0
[   32.594552]  ? write_comp_data+0x2f/0x90
[   32.594855]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   32.595222]  ? write_comp_data+0x2f/0x90
[   32.595534]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   32.595893]  ? interval_tree_remove+0x291/0x4e0
[   32.596243]  ? write_comp_data+0x2f/0x90
[   32.596549]  iopt_area_remove_access+0x108/0x120
[   32.596927]  iommufd_access_unpin_pages+0x177/0x210
[   32.597330]  iommufd_test_access_unmap+0xe0/0x130
[   32.597694]  ? iommufd_test_access_unmap+0x130/0x130
[   32.598068]  iommufd_test_staccess_release+0x39/0x60
[   32.598447]  __fput+0x11f/0x450
[   32.598721]  ____fput+0x1e/0x30
[   32.598971]  task_work_run+0xb6/0x120
[   32.599259]  do_exit+0x521/0x1340
[   32.599522]  ? lockdep_hardirqs_on+0x8a/0x110
[   32.599862]  ? trace_hardirqs_on+0x3f/0x100
[   32.600194]  do_group_exit+0x5e/0xf0
[   32.600479]  __x64_sys_exit_group+0x25/0x30
[   32.600812]  do_syscall_64+0x3b/0x90
[   32.601087]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   32.601462] RIP: 0033:0x7f3777be6cf6
[   32.601738] Code: Unable to access opcode bytes at 0x7f3777be6ccc.
[   32.602174] RSP: 002b:00007ffd0d7278d8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
[   32.602729] RAX: ffffffffffffffda RBX: 00007f3777cf1490 RCX: 00007f3777be6cf6
[   32.603238] RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
[   32.603761] RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffff80
[   32.604309] R10: 0000000000000004 R11: 0000000000000246 R12: 00007f3777cf1490
[   32.604832] R13: 0000000000000001 R14: 00007f3777cf4e88 R15: 0000000000000000
[   32.605351]  </TASK>
[   32.605522] irq event stamp: 21249
[   32.605774] hardirqs last  enabled at (21257): [<ffffffff811b7f21>] __up_console_sem+0x91/0xb0
[   32.606397] hardirqs last disabled at (21264): [<ffffffff811b7f06>] __up_console_sem+0x76/0xb0
[   32.607034] softirqs last  enabled at (20826): [<ffffffff83000329>] __do_softirq+0x329/0x490
[   32.607647] softirqs last disabled at (20713): [<ffffffff81111082>] irq_exit_rcu+0xd2/0x100
[   32.608248] ---[ end trace 0000000000000000 ]---
[   32.608727] ------------[ cut here ]------------
[   32.609064] WARNING: CPU: 0 PID: 620 at drivers/iommu/iommufd/pages.c:886 update_unpinned+0x75/0x80
[   32.609713] Modules linked in:
[   32.609944] CPU: 0 PID: 620 Comm: repro Tainted: G        W          6.1.0-a0a6c76cf2a5+ #1
[   32.610550] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   32.611363] RIP: 0010:update_unpinned+0x75/0x80
[   32.611709] Code: ac 2b ff 48 89 de 31 c9 31 d2 4c 29 e6 4c 89 ef e8 70 fb ff ff e8 bb ac 2b ff 5b 41 5c 41 5d 5d c3 cc cc cc cc e8 ab ac 2b ff <0f> 0b eb e7 0f 1f 80 00 00 00 00 0f 1f 44 00 00 55 48 89 e5 41 57
[   32.613053] RSP: 0018:ffffc900010fba08 EFLAGS: 00010246
[   32.613446] RAX: 0000000000000000 RBX: 0000000000000000 RCX: ffffffff81fdfdcf
[   32.613955] RDX: 0000000000000000 RSI: ffff8880135dd300 RDI: 0000000000000002
[   32.614460] RBP: ffffc900010fba20 R08: 0000000000000000 R09: ffff88807dc3b890
[   32.614987] R10: 000000000000101c R11: 0000000000000000 R12: ffffffffffffffff
[   32.615503] R13: ffff888009f85000 R14: 0000000000000002 R15: 0000000000000002
[   32.616013] FS:  0000000000000000(0000) GS:ffff88807dc00000(0000) knlGS:0000000000000000
[   32.616587] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   32.617030] CR2: 00007f3777cf0500 CR3: 0000000003c12005 CR4: 0000000000770ef0
[   32.617550] PKRU: 55555554
[   32.617758] Call Trace:
[   32.617955]  <TASK>
[   32.618130]  iopt_pages_unfill_xarray+0x522/0x5c0
[   32.618534]  ? write_comp_data+0x2f/0x90
[   32.618838]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   32.619196]  ? write_comp_data+0x2f/0x90
[   32.619504]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   32.619865]  ? interval_tree_remove+0x291/0x4e0
[   32.620209]  ? write_comp_data+0x2f/0x90
[   32.620515]  iopt_area_remove_access+0x108/0x120
[   32.620896]  iommufd_access_unpin_pages+0x177/0x210
[   32.621289]  iommufd_test_access_unmap+0xe0/0x130
[   32.621657]  ? iommufd_test_access_unmap+0x130/0x130
[   32.622045]  iommufd_test_staccess_release+0x39/0x60
[   32.622420]  __fput+0x11f/0x450
[   32.622684]  ____fput+0x1e/0x30
[   32.622926]  task_work_run+0xb6/0x120
[   32.623214]  do_exit+0x521/0x1340
[   32.623470]  ? lockdep_hardirqs_on+0x8a/0x110
[   32.623808]  ? trace_hardirqs_on+0x3f/0x100
[   32.624149]  do_group_exit+0x5e/0xf0
[   32.624426]  __x64_sys_exit_group+0x25/0x30
[   32.624763]  do_syscall_64+0x3b/0x90
[   32.625045]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   32.625425] RIP: 0033:0x7f3777be6cf6
[   32.625695] Code: Unable to access opcode bytes at 0x7f3777be6ccc.
[   32.626146] RSP: 002b:00007ffd0d7278d8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
[   32.626700] RAX: ffffffffffffffda RBX: 00007f3777cf1490 RCX: 00007f3777be6cf6
[   32.627222] RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
[   32.627739] RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffff80
[   32.628263] R10: 0000000000000004 R11: 0000000000000246 R12: 00007f3777cf1490
[   32.628802] R13: 0000000000000001 R14: 00007f3777cf4e88 R15: 0000000000000000
[   32.629331]  </TASK>
[   32.629501] irq event stamp: 21753
[   32.629771] hardirqs last  enabled at (21761): [<ffffffff811b7f21>] __up_console_sem+0x91/0xb0
[   32.630404] hardirqs last disabled at (21768): [<ffffffff811b7f06>] __up_console_sem+0x76/0xb0
[   32.631030] softirqs last  enabled at (21386): [<ffffffff83000329>] __do_softirq+0x329/0x490
[   32.631643] softirqs last disabled at (21371): [<ffffffff81111082>] irq_exit_rcu+0xd2/0x100
[   32.632249] ---[ end trace 0000000000000000 ]---
[   32.632914] ------------[ cut here ]------------
[   32.633258] WARNING: CPU: 0 PID: 620 at drivers/iommu/iommufd/pages.c:1181 iopt_release_pages+0x159/0x190
[   32.633955] Modules linked in:
[   32.634187] CPU: 0 PID: 620 Comm: repro Tainted: G        W          6.1.0-a0a6c76cf2a5+ #1
[   32.634789] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   32.635590] RIP: 0010:iopt_release_pages+0x159/0x190
[   32.635979] Code: b5 11 ff eb cb e8 87 90 2b ff be 03 00 00 00 4c 89 f7 e8 6a 8b ce ff eb b7 e8 73 90 2b ff 0f 0b e9 ed fe ff ff e8 67 90 2b ff <0f> 0b e9 00 ff ff ff e8 5b 90 2b ff 0f 0b e9 07 ff ff ff e8 4f 90
[   32.637377] RSP: 0018:ffffc900010fbc88 EFLAGS: 00010246
[   32.637767] RAX: 0000000000000000 RBX: ffff888009f85000 RCX: ffffffff81fe1957
[   32.638283] RDX: 0000000000000000 RSI: ffff8880135dd300 RDI: 0000000000000002
[   32.638819] RBP: ffffc900010fbca8 R08: 000000000000001c R09: 0000000000000001
[   32.639339] R10: ffff8880135de098 R11: 0000000000000000 R12: ffffffffffffffff
[   32.639863] R13: 0000000001000000 R14: 00000000017fffff R15: 0000000000000000
[   32.640396] FS:  0000000000000000(0000) GS:ffff88807dc00000(0000) knlGS:0000000000000000
[   32.641009] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   32.641443] CR2: 00007f3777cf0500 CR3: 0000000003c12005 CR4: 0000000000770ef0
[   32.641961] PKRU: 55555554
[   32.642175] Call Trace:
[   32.642370]  <TASK>
[   32.642569]  iopt_unmap_iova_range+0x1ef/0x2e0
[   32.642914]  iopt_unmap_all+0x2f/0x60
[   32.643206]  iommufd_ioas_destroy+0x2c/0x70
[   32.643527]  iommufd_fops_release+0xd4/0x170
[   32.643857]  ? iommufd_ctx_get+0x30/0x30
[   32.644154]  __fput+0x11f/0x450
[   32.644406]  ____fput+0x1e/0x30
[   32.644677]  task_work_run+0xb6/0x120
[   32.644973]  do_exit+0x521/0x1340
[   32.645230]  ? lockdep_hardirqs_on+0x8a/0x110
[   32.645571]  ? trace_hardirqs_on+0x3f/0x100
[   32.645906]  do_group_exit+0x5e/0xf0
[   32.646183]  __x64_sys_exit_group+0x25/0x30
[   32.646520]  do_syscall_64+0x3b/0x90
[   32.646797]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   32.647177] RIP: 0033:0x7f3777be6cf6
[   32.647454] Code: Unable to access opcode bytes at 0x7f3777be6ccc.
[   32.647898] RSP: 002b:00007ffd0d7278d8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
[   32.648449] RAX: ffffffffffffffda RBX: 00007f3777cf1490 RCX: 00007f3777be6cf6
[   32.648984] RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
[   32.649495] RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffff80
[   32.650003] R10: 0000000000000004 R11: 0000000000000246 R12: 00007f3777cf1490
[   32.650529] R13: 0000000000000001 R14: 00007f3777cf4e88 R15: 0000000000000000
[   32.651060]  </TASK>
[   32.651237] irq event stamp: 22313
[   32.651497] hardirqs last  enabled at (22321): [<ffffffff811b7f21>] __up_console_sem+0x91/0xb0
[   32.652131] hardirqs last disabled at (22328): [<ffffffff811b7f06>] __up_console_sem+0x76/0xb0
[   32.652805] softirqs last  enabled at (22068): [<ffffffff83000329>] __do_softirq+0x329/0x490
[   32.653779] softirqs last disabled at (22061): [<ffffffff81111082>] irq_exit_rcu+0xd2/0x100
[   32.654492] ---[ end trace 0000000000000000 ]---
[   32.857939] ------------[ cut here ]------------
[   32.858330] WARNING: CPU: 0 PID: 626 at drivers/iommu/iommufd/pages.c:178 batch_unpin.isra.23+0x151/0x1a0
[   32.859032] Modules linked in:
[   32.859276] CPU: 0 PID: 626 Comm: repro Tainted: G        W          6.1.0-a0a6c76cf2a5+ #1
[   32.859892] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   32.860735] RIP: 0010:batch_unpin.isra.23+0x151/0x1a0
[   32.861118] Code: e8 c4 be 2b ff 48 8b 45 d0 48 85 c0 75 17 e8 26 bd 2b ff 48 8b 7d c8 48 89 de e8 fa bd 2b ff 48 39 5d c8 73 07 e8 0f bd 2b ff <0f> 0b e8 08 bd 2b ff 4d 29 e5 31 ff 41 83 c6 01 4c 89 ee 31 db e8
[   32.862451] RSP: 0018:ffffc9000112ba88 EFLAGS: 00010246
[   32.862891] RAX: 0000000000000000 RBX: ffffffffffffffff RCX: ffffffff81fded8c
[   32.863654] RDX: 0000000000000000 RSI: ffff8880135dd300 RDI: 0000000000000002
[   32.864245] RBP: ffffc9000112bad0 R08: 000000000003b5c5 R09: 000000000000000a
[   32.864903] R10: 000000000003b5a0 R11: 0000000000000024 R12: 0000000000000004
[   32.865429] R13: 0000000000000004 R14: 00000000000002e9 R15: ffff888009f85000
[   32.865943] FS:  00007f3777af9740(0000) GS:ffff88807dc00000(0000) knlGS:0000000000000000
[   32.866684] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   32.867119] CR2: 00007f3777c1e580 CR3: 0000000013578002 CR4: 0000000000770ef0
[   32.867679] PKRU: 55555554
[   32.867887] Call Trace:
[   32.868139]  <TASK>
[   32.868415]  __iopt_area_unfill_domain+0x257/0x560
[   32.868830]  ? __this_cpu_preempt_check+0x20/0x30
[   32.869198]  ? lock_is_held_type+0xe6/0x140
[   32.869524]  ? rcu_read_lock_sched_held+0x57/0x80
[   32.869887]  ? __mutex_lock+0x13a/0xf30
[   32.870196]  ? write_comp_data+0x2f/0x90
[   32.870518]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   32.870886]  iopt_area_unfill_domain+0x32/0x40
[   32.871228]  iopt_table_remove_domain+0x23f/0x4c0
[   32.871593]  iommufd_device_selftest_detach+0x3a/0x90
[   32.871978]  iommufd_selftest_destroy+0x55/0x70
[   32.872328]  iommufd_object_destroy_user+0xce/0x130
[   32.872722]  iommufd_destroy+0xa2/0xc0
[   32.873071]  iommufd_fops_ioctl+0x1ef/0x310
[   32.873504]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   32.873880]  ? write_comp_data+0x2f/0x90
[   32.874186]  __x64_sys_ioctl+0x10e/0x160
[   32.874517]  ? iommufd_get_object.part.6+0x1c0/0x1c0
[   32.874966]  do_syscall_64+0x3b/0x90
[   32.875319]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   32.875705] RIP: 0033:0x7f3777c1e59d
[   32.875985] Code: 00 c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d d3 08 0d 00 f7 d8 64 89 01 48
[   32.877313] RSP: 002b:00007ffd0d727918 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   32.877999] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f3777c1e59d
[   32.878525] RDX: 0000000020000140 RSI: 0000000000003b80 RDI: 0000000000000003
[   32.879051] RBP: 00007ffd0d727930 R08: 00007ffd0d727930 R09: 00007ffd0d727930
[   32.879601] R10: 00007ffd0d727930 R11: 0000000000000213 R12: 0000000000401180
[   32.880119] R13: 00007ffd0d727a50 R14: 0000000000000000 R15: 0000000000000000
[   32.880726]  </TASK>
[   32.880988] irq event stamp: 14845
[   32.881247] hardirqs last  enabled at (14853): [<ffffffff811b7f21>] __up_console_sem+0x91/0xb0
[   32.881878] hardirqs last disabled at (14860): [<ffffffff811b7f06>] __up_console_sem+0x76/0xb0
[   32.882507] softirqs last  enabled at (14842): [<ffffffff83000329>] __do_softirq+0x329/0x490
[   32.883121] softirqs last disabled at (14831): [<ffffffff81111082>] irq_exit_rcu+0xd2/0x100
[   32.883890] ---[ end trace 0000000000000000 ]---
[   32.884334] ------------[ cut here ]------------
[   32.884692] WARNING: CPU: 0 PID: 626 at drivers/iommu/iommufd/pages.c:294 __iopt_area_unfill_domain+0x152/0x560
[   32.885421] Modules linked in:
[   32.885663] CPU: 0 PID: 626 Comm: repro Tainted: G        W          6.1.0-a0a6c76cf2a5+ #1
[   32.886262] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   32.887218] RIP: 0010:__iopt_area_unfill_domain+0x152/0x560
[   32.887639] Code: a1 2b ff 44 8b 64 24 54 48 8b 44 24 48 31 ff 44 89 e6 48 89 44 24 38 e8 6c a2 2b ff 45 85 e4 0f 85 eb 01 00 00 e8 ee a0 2b ff <0f> 0b e8 e7 a0 2b ff 48 8b 44 24 38 89 5c 24 58 89 18 8b 44 24 54
[   32.889113] RSP: 0018:ffffc9000112bae0 EFLAGS: 00010246
[   32.889505] RAX: 0000000000000000 RBX: 00000000fffffffe RCX: ffffffff81fe0bd5
[   32.890056] RDX: 0000000000000000 RSI: ffff8880135dd300 RDI: 0000000000000002
[   32.890578] RBP: ffffc9000112bd10 R08: 000000000003b5c5 R09: 000000000000000a
[   32.891216] R10: 000000000003b5a0 R11: 0000000000000024 R12: 0000000000000001
[   32.891747] R13: 0000000000000802 R14: 00000000000007ff R15: 0000000000000800
[   32.892264] FS:  00007f3777af9740(0000) GS:ffff88807dc00000(0000) knlGS:0000000000000000
[   32.893036] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   32.893459] CR2: 00007f3777c1e580 CR3: 0000000013578002 CR4: 0000000000770ef0
[   32.893974] PKRU: 55555554
[   32.894184] Call Trace:
[   32.894371]  <TASK>
[   32.894578]  ? __this_cpu_preempt_check+0x20/0x30
[   32.894944]  ? lock_is_held_type+0xe6/0x140
[   32.895274]  ? rcu_read_lock_sched_held+0x57/0x80
[   32.895636]  ? __mutex_lock+0x13a/0xf30
[   32.896097]  ? write_comp_data+0x2f/0x90
[   32.896413]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   32.896794]  iopt_area_unfill_domain+0x32/0x40
[   32.897146]  iopt_table_remove_domain+0x23f/0x4c0
[   32.897506]  iommufd_device_selftest_detach+0x3a/0x90
[   32.897917]  iommufd_selftest_destroy+0x55/0x70
[   32.898267]  iommufd_object_destroy_user+0xce/0x130
[   32.898655]  iommufd_destroy+0xa2/0xc0
[   32.898957]  iommufd_fops_ioctl+0x1ef/0x310
[   32.899466]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   32.899848]  ? write_comp_data+0x2f/0x90
[   32.900159]  __x64_sys_ioctl+0x10e/0x160
[   32.900470]  ? iommufd_get_object.part.6+0x1c0/0x1c0
[   32.900870]  do_syscall_64+0x3b/0x90
[   32.901155]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   32.901533] RIP: 0033:0x7f3777c1e59d
[   32.901808] Code: 00 c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d d3 08 0d 00 f7 d8 64 89 01 48
[   32.903241] RSP: 002b:00007ffd0d727918 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   32.903801] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f3777c1e59d
[   32.904326] RDX: 0000000020000140 RSI: 0000000000003b80 RDI: 0000000000000003
[   32.905035] RBP: 00007ffd0d727930 R08: 00007ffd0d727930 R09: 00007ffd0d727930
[   32.905559] R10: 00007ffd0d727930 R11: 0000000000000213 R12: 0000000000401180
[   32.906082] R13: 00007ffd0d727a50 R14: 0000000000000000 R15: 0000000000000000
[   32.906641]  </TASK>
[   32.906816] irq event stamp: 15429
[   32.907209] hardirqs last  enabled at (15451): [<ffffffff811b7f21>] __up_console_sem+0x91/0xb0
[   32.907837] hardirqs last disabled at (15458): [<ffffffff811b7f06>] __up_console_sem+0x76/0xb0
[   32.908460] softirqs last  enabled at (15448): [<ffffffff83000329>] __do_softirq+0x329/0x490
[   32.909279] softirqs last disabled at (15477): [<ffffffff81111082>] irq_exit_rcu+0xd2/0x100
[   32.909888] ---[ end trace 0000000000000000 ]---
[   32.910329] ------------[ cut here ]------------
[   32.910680] WARNING: CPU: 0 PID: 626 at drivers/iommu/iommufd/pages.c:1290 __iopt_area_unfill_domain+0x54f/0x560
[   32.911433] Modules linked in:
[   32.911671] CPU: 0 PID: 626 Comm: repro Tainted: G        W          6.1.0-a0a6c76cf2a5+ #1
[   32.912431] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   32.913292] RIP: 0010:__iopt_area_unfill_domain+0x54f/0x560
[   32.913708] Code: e8 86 9e 2b ff 85 db 0f 85 35 fb ff ff e8 09 9d 2b ff 0f 0b e9 29 fb ff ff e8 fd 9c 2b ff 0f 0b e9 69 fe ff ff e8 f1 9c 2b ff <0f> 0b e9 58 ff ff ff e8 65 2d dc 00 0f 1f 44 00 00 0f 1f 44 00 00
[   32.915156] RSP: 0018:ffffc9000112bae0 EFLAGS: 00010246
[   32.915543] RAX: 0000000000000000 RBX: 00000000fffffffe RCX: ffffffff81fe0d26
[   32.916056] RDX: 0000000000000000 RSI: ffff8880135dd300 RDI: 0000000000000002
[   32.916607] RBP: ffffc9000112bd10 R08: 000000000003b5c5 R09: 000000000000000a
[   32.917246] R10: 000000000003b5a0 R11: 0000000000000024 R12: 00000000000007ff
[   32.917768] R13: 0000000000000802 R14: 00000000000007ff R15: 0000000000000800
[   32.918284] FS:  00007f3777af9740(0000) GS:ffff88807dc00000(0000) knlGS:0000000000000000
[   32.918879] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   32.919301] CR2: 00007f3777c1e580 CR3: 0000000013578002 CR4: 0000000000770ef0
[   32.919952] PKRU: 55555554
[   32.920162] Call Trace:
[   32.920347]  <TASK>
[   32.920544]  ? __this_cpu_preempt_check+0x20/0x30
[   32.920935]  ? lock_is_held_type+0xe6/0x140
[   32.921279]  ? rcu_read_lock_sched_held+0x57/0x80
[   32.921638]  ? __mutex_lock+0x13a/0xf30
[   32.921937]  ? write_comp_data+0x2f/0x90
[   32.922241]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   32.922612]  iopt_area_unfill_domain+0x32/0x40
[   32.922989]  iopt_table_remove_domain+0x23f/0x4c0
[   32.923466]  iommufd_device_selftest_detach+0x3a/0x90
[   32.923856]  iommufd_selftest_destroy+0x55/0x70
[   32.924204]  iommufd_object_destroy_user+0xce/0x130
[   32.924569]  iommufd_destroy+0xa2/0xc0
[   32.924916]  iommufd_fops_ioctl+0x1ef/0x310
[   32.925328]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   32.925683]  ? write_comp_data+0x2f/0x90
[   32.925992]  __x64_sys_ioctl+0x10e/0x160
[   32.926300]  ? iommufd_get_object.part.6+0x1c0/0x1c0
[   32.926691]  do_syscall_64+0x3b/0x90
[   32.926967]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   32.927345] RIP: 0033:0x7f3777c1e59d
[   32.927613] Code: 00 c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d d3 08 0d 00 f7 d8 64 89 01 48
[   32.929101] RSP: 002b:00007ffd0d727918 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   32.929665] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f3777c1e59d
[   32.930185] RDX: 0000000020000140 RSI: 0000000000003b80 RDI: 0000000000000003
[   32.930710] RBP: 00007ffd0d727930 R08: 00007ffd0d727930 R09: 00007ffd0d727930
[   32.931352] R10: 00007ffd0d727930 R11: 0000000000000213 R12: 0000000000401180
[   32.931869] R13: 00007ffd0d727a50 R14: 0000000000000000 R15: 0000000000000000
[   32.932419]  </TASK>
[   32.932596] irq event stamp: 16023
[   32.932892] hardirqs last  enabled at (16033): [<ffffffff811b7f21>] __up_console_sem+0x91/0xb0
[   32.933661] hardirqs last disabled at (16054): [<ffffffff811b7f06>] __up_console_sem+0x76/0xb0
[   32.934290] softirqs last  enabled at (16052): [<ffffffff83000329>] __do_softirq+0x329/0x490
[   32.934921] softirqs last disabled at (16041): [<ffffffff81111082>] irq_exit_rcu+0xd2/0x100
[   32.935544] ---[ end trace 0000000000000000 ]---
[   32.935983] ------------[ cut here ]------------
[   32.936475] WARNING: CPU: 0 PID: 626 at drivers/iommu/iommufd/pages.c:886 update_unpinned+0x75/0x80
[   32.937161] Modules linked in:
[   32.937399] CPU: 0 PID: 626 Comm: repro Tainted: G        W          6.1.0-a0a6c76cf2a5+ #1
[   32.937993] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   32.938802] RIP: 0010:update_unpinned+0x75/0x80
[   32.939182] Code: ac 2b ff 48 89 de 31 c9 31 d2 4c 29 e6 4c 89 ef e8 70 fb ff ff e8 bb ac 2b ff 5b 41 5c 41 5d 5d c3 cc cc cc cc e8 ab ac 2b ff <0f> 0b eb e7 0f 1f 80 00 00 00 00 0f 1f 44 00 00 55 48 89 e5 41 57
[   32.940602] RSP: 0018:ffffc9000112bab8 EFLAGS: 00010246
[   32.941165] RAX: 0000000000000000 RBX: 0000000000000800 RCX: ffffffff81fdfdcf
[   32.941682] RDX: 0000000000000000 RSI: ffff8880135dd300 RDI: 0000000000000002
[   32.942199] RBP: ffffc9000112bad0 R08: 0000000000000000 R09: ffff88807dc3b920
[   32.942722] R10: 0000000000000899 R11: 0000000000000009 R12: ffffffffffffffff
[   32.943244] R13: ffff888009f85000 R14: 00000000000007ff R15: 0000000000000800
[   32.943925] FS:  00007f3777af9740(0000) GS:ffff88807dc00000(0000) knlGS:0000000000000000
[   32.944509] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   32.944971] CR2: 00007f3777c1e580 CR3: 0000000013578002 CR4: 0000000000770ef0
[   32.945497] PKRU: 55555554
[   32.945703] Call Trace:
[   32.945894]  <TASK>
[   32.946065]  __iopt_area_unfill_domain+0x4e1/0x560
[   32.946455]  ? __this_cpu_preempt_check+0x20/0x30
[   32.946961]  ? lock_is_held_type+0xe6/0x140
[   32.947298]  ? rcu_read_lock_sched_held+0x57/0x80
[   32.947656]  ? __mutex_lock+0x13a/0xf30
[   32.947959]  ? write_comp_data+0x2f/0x90
[   32.948262]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   32.948728]  iopt_area_unfill_domain+0x32/0x40
[   32.949123]  iopt_table_remove_domain+0x23f/0x4c0
[   32.949535]  iommufd_device_selftest_detach+0x3a/0x90
[   32.949965]  iommufd_selftest_destroy+0x55/0x70
[   32.950316]  iommufd_object_destroy_user+0xce/0x130
[   32.950821]  iommufd_destroy+0xa2/0xc0
[   32.951120]  iommufd_fops_ioctl+0x1ef/0x310
[   32.951443]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   32.951804]  ? write_comp_data+0x2f/0x90
[   32.952121]  __x64_sys_ioctl+0x10e/0x160
[   32.952609]  ? iommufd_get_object.part.6+0x1c0/0x1c0
[   32.953007]  do_syscall_64+0x3b/0x90
[   32.953289]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   32.953664] RIP: 0033:0x7f3777c1e59d
[   32.953944] Code: 00 c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d d3 08 0d 00 f7 d8 64 89 01 48
[   32.955359] RSP: 002b:00007ffd0d727918 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   32.955982] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f3777c1e59d
[   32.956636] RDX: 0000000020000140 RSI: 0000000000003b80 RDI: 0000000000000003
[   32.957166] RBP: 00007ffd0d727930 R08: 00007ffd0d727930 R09: 00007ffd0d727930
[   32.957705] R10: 00007ffd0d727930 R11: 0000000000000213 R12: 0000000000401180
[   32.958366] R13: 00007ffd0d727a50 R14: 0000000000000000 R15: 0000000000000000
[   32.958907]  </TASK>
[   32.959083] irq event stamp: 16665
[   32.959340] hardirqs last  enabled at (16673): [<ffffffff811b7f21>] __up_console_sem+0x91/0xb0
[   32.960144] hardirqs last disabled at (16694): [<ffffffff811b7f06>] __up_console_sem+0x76/0xb0
[   32.960791] softirqs last  enabled at (16692): [<ffffffff83000329>] __do_softirq+0x329/0x490
[   32.961415] softirqs last disabled at (16681): [<ffffffff81111082>] irq_exit_rcu+0xd2/0x100
[   32.962030] ---[ end trace 0000000000000000 ]---
[   32.966657] ------------[ cut here ]------------
[   32.967012] WARNING: CPU: 0 PID: 626 at drivers/iommu/iommufd/pages.c:178 batch_unpin.isra.23+0x151/0x1a0
[   32.967713] Modules linked in:
[   32.967951] CPU: 0 PID: 626 Comm: repro Tainted: G        W          6.1.0-a0a6c76cf2a5+ #1
[   32.968557] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   32.969406] RIP: 0010:batch_unpin.isra.23+0x151/0x1a0
[   32.969790] Code: e8 c4 be 2b ff 48 8b 45 d0 48 85 c0 75 17 e8 26 bd 2b ff 48 8b 7d c8 48 89 de e8 fa bd 2b ff 48 39 5d c8 73 07 e8 0f bd 2b ff <0f> 0b e8 08 bd 2b ff 4d 29 e5 31 ff 41 83 c6 01 4c 89 ee 31 db e8
[   32.971103] RSP: 0018:ffffc9000112b9d8 EFLAGS: 00010246
[   32.971484] RAX: 0000000000000000 RBX: fffffffffffffffe RCX: ffffffff81fdeda6
[   32.972030] RDX: 0000000000000000 RSI: ffff8880135dd300 RDI: 0000000000000002
[   32.972563] RBP: ffffc9000112ba20 R08: 0000000000000000 R09: ffff88807dc3b890
[   32.973148] R10: 000000000000109a R11: 0000000000000000 R12: 0000000000000001
[   32.973669] R13: 0000000000000001 R14: 0000000000000000 R15: ffff888009f85000
[   32.974183] FS:  0000000000000000(0000) GS:ffff88807dc00000(0000) knlGS:0000000000000000
[   32.974770] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   32.975191] CR2: 00007f3777cf0500 CR3: 0000000003c12006 CR4: 0000000000770ef0
[   32.975713] PKRU: 55555554
[   32.975954] Call Trace:
[   32.976171]  <TASK>
[   32.976348]  iopt_pages_unfill_xarray+0x39f/0x5c0
[   32.976768]  ? write_comp_data+0x2f/0x90
[   32.977079]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   32.977446]  ? write_comp_data+0x2f/0x90
[   32.977748]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   32.978103]  ? interval_tree_remove+0x291/0x4e0
[   32.978450]  ? write_comp_data+0x2f/0x90
[   32.978779]  iopt_area_remove_access+0x108/0x120
[   32.979142]  iommufd_access_unpin_pages+0x177/0x210
[   32.979541]  iommufd_test_access_unmap+0xe0/0x130
[   32.979906]  ? iommufd_test_access_unmap+0x130/0x130
[   32.980281]  iommufd_test_staccess_release+0x39/0x60
[   32.980677]  __fput+0x11f/0x450
[   32.980936]  ____fput+0x1e/0x30
[   32.981184]  task_work_run+0xb6/0x120
[   32.981476]  do_exit+0x521/0x1340
[   32.981734]  ? lockdep_hardirqs_on+0x8a/0x110
[   32.982073]  ? trace_hardirqs_on+0x3f/0x100
[   32.982401]  do_group_exit+0x5e/0xf0
[   32.982690]  __x64_sys_exit_group+0x25/0x30
[   32.983003]  do_syscall_64+0x3b/0x90
[   32.983280]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   32.983659] RIP: 0033:0x7f3777be6cf6
[   32.983936] Code: Unable to access opcode bytes at 0x7f3777be6ccc.
[   32.984379] RSP: 002b:00007ffd0d7278d8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
[   32.984947] RAX: ffffffffffffffda RBX: 00007f3777cf1490 RCX: 00007f3777be6cf6
[   32.985464] RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
[   32.985992] RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffff80
[   32.986523] R10: 0000000000000004 R11: 0000000000000246 R12: 00007f3777cf1490
[   32.987029] R13: 0000000000000001 R14: 00007f3777cf4e88 R15: 0000000000000000
[   32.987557]  </TASK>
[   32.987731] irq event stamp: 22697
[   32.987988] hardirqs last  enabled at (22705): [<ffffffff811b7f21>] __up_console_sem+0x91/0xb0
[   32.988608] hardirqs last disabled at (22712): [<ffffffff811b7f06>] __up_console_sem+0x76/0xb0
[   32.989247] softirqs last  enabled at (22444): [<ffffffff83000329>] __do_softirq+0x329/0x490
[   32.989867] softirqs last disabled at (22439): [<ffffffff81111082>] irq_exit_rcu+0xd2/0x100
[   32.990470] ---[ end trace 0000000000000000 ]---
[   32.990917] ------------[ cut here ]------------
[   32.991260] WARNING: CPU: 0 PID: 626 at drivers/iommu/iommufd/pages.c:886 update_unpinned+0x75/0x80
[   32.991914] Modules linked in:
[   32.992154] CPU: 0 PID: 626 Comm: repro Tainted: G        W          6.1.0-a0a6c76cf2a5+ #1
[   32.992807] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   32.993694] RIP: 0010:update_unpinned+0x75/0x80
[   32.994039] Code: ac 2b ff 48 89 de 31 c9 31 d2 4c 29 e6 4c 89 ef e8 70 fb ff ff e8 bb ac 2b ff 5b 41 5c 41 5d 5d c3 cc cc cc cc e8 ab ac 2b ff <0f> 0b eb e7 0f 1f 80 00 00 00 00 0f 1f 44 00 00 55 48 89 e5 41 57
[   32.995324] RSP: 0018:ffffc9000112ba08 EFLAGS: 00010246
[   32.995707] RAX: 0000000000000000 RBX: 0000000000000800 RCX: ffffffff81fdfdcf
[   32.996213] RDX: 0000000000000000 RSI: ffff8880135dd300 RDI: 0000000000000002
[   32.996745] RBP: ffffc9000112ba20 R08: 0000000000000000 R09: ffff88807dc3b890
[   32.997255] R10: 000000000000109a R11: 0000000000000000 R12: fffffffffffffffe
[   32.997794] R13: ffff888009f85000 R14: 0000000000000002 R15: 0000000000000002
[   32.998303] FS:  0000000000000000(0000) GS:ffff88807dc00000(0000) knlGS:0000000000000000
[   32.998884] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   32.999309] CR2: 00007f3777cf0500 CR3: 0000000003c12006 CR4: 0000000000770ef0
[   32.999848] PKRU: 55555554
[   33.000054] Call Trace:
[   33.000239]  <TASK>
[   33.000410]  iopt_pages_unfill_xarray+0x522/0x5c0
[   33.000828]  ? write_comp_data+0x2f/0x90
[   33.001136]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   33.001491]  ? write_comp_data+0x2f/0x90
[   33.001792]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   33.002145]  ? interval_tree_remove+0x291/0x4e0
[   33.002505]  ? write_comp_data+0x2f/0x90
[   33.002811]  iopt_area_remove_access+0x108/0x120
[   33.003163]  iommufd_access_unpin_pages+0x177/0x210
[   33.003584]  iommufd_test_access_unmap+0xe0/0x130
[   33.003940]  ? iommufd_test_access_unmap+0x130/0x130
[   33.004319]  iommufd_test_staccess_release+0x39/0x60
[   33.004714]  __fput+0x11f/0x450
[   33.004974]  ____fput+0x1e/0x30
[   33.005227]  task_work_run+0xb6/0x120
[   33.005521]  do_exit+0x521/0x1340
[   33.005779]  ? lockdep_hardirqs_on+0x8a/0x110
[   33.006115]  ? trace_hardirqs_on+0x3f/0x100
[   33.006438]  do_group_exit+0x5e/0xf0
[   33.006723]  __x64_sys_exit_group+0x25/0x30
[   33.007039]  do_syscall_64+0x3b/0x90
[   33.007314]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   33.007709] RIP: 0033:0x7f3777be6cf6
[   33.007981] Code: Unable to access opcode bytes at 0x7f3777be6ccc.
[   33.008426] RSP: 002b:00007ffd0d7278d8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
[   33.008992] RAX: ffffffffffffffda RBX: 00007f3777cf1490 RCX: 00007f3777be6cf6
[   33.009536] RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
[   33.010075] RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffff80
[   33.010599] R10: 0000000000000004 R11: 0000000000000246 R12: 00007f3777cf1490
[   33.011119] R13: 0000000000000001 R14: 00007f3777cf4e88 R15: 0000000000000000
[   33.011661]  </TASK>
[   33.011831] irq event stamp: 23175
[   33.012081] hardirqs last  enabled at (23183): [<ffffffff811b7f21>] __up_console_sem+0x91/0xb0
[   33.012744] hardirqs last disabled at (23192): [<ffffffff811b7f06>] __up_console_sem+0x76/0xb0
[   33.013372] softirqs last  enabled at (22444): [<ffffffff83000329>] __do_softirq+0x329/0x490
[   33.013977] softirqs last disabled at (22439): [<ffffffff81111082>] irq_exit_rcu+0xd2/0x100
[   33.014584] ---[ end trace 0000000000000000 ]---
[   33.015067] ------------[ cut here ]------------
[   33.015420] WARNING: CPU: 0 PID: 626 at drivers/iommu/iommufd/pages.c:1181 iopt_release_pages+0x159/0x190
[   33.016145] Modules linked in:
[   33.016381] CPU: 0 PID: 626 Comm: repro Tainted: G        W          6.1.0-a0a6c76cf2a5+ #1
[   33.016992] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   33.017788] RIP: 0010:iopt_release_pages+0x159/0x190
[   33.018156] Code: b5 11 ff eb cb e8 87 90 2b ff be 03 00 00 00 4c 89 f7 e8 6a 8b ce ff eb b7 e8 73 90 2b ff 0f 0b e9 ed fe ff ff e8 67 90 2b ff <0f> 0b e9 00 ff ff ff e8 5b 90 2b ff 0f 0b e9 07 ff ff ff e8 4f 90
[   33.019489] RSP: 0018:ffffc9000112bc88 EFLAGS: 00010246
[   33.019894] RAX: 0000000000000000 RBX: ffff888009f85000 RCX: ffffffff81fe1957
[   33.020415] RDX: 0000000000000000 RSI: ffff8880135dd300 RDI: 0000000000000002
[   33.020955] RBP: ffffc9000112bca8 R08: 000000000000001c R09: 0000000000000001
[   33.021468] R10: ffff8880135de098 R11: 0000000000000000 R12: fffffffffffffffe
[   33.021980] R13: 0000000001000000 R14: 00000000017fffff R15: 0000000000000000
[   33.022496] FS:  0000000000000000(0000) GS:ffff88807dc00000(0000) knlGS:0000000000000000
[   33.023073] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   33.023493] CR2: 00007f3777cf0500 CR3: 0000000003c12006 CR4: 0000000000770ef0
[   33.024001] PKRU: 55555554
[   33.024206] Call Trace:
[   33.024394]  <TASK>
[   33.024579]  iopt_unmap_iova_range+0x1ef/0x2e0
[   33.024948]  iopt_unmap_all+0x2f/0x60
[   33.025238]  iommufd_ioas_destroy+0x2c/0x70
[   33.025598]  iommufd_fops_release+0xd4/0x170
[   33.025922]  ? iommufd_ctx_get+0x30/0x30
[   33.026221]  __fput+0x11f/0x450
[   33.026487]  ____fput+0x1e/0x30
[   33.026732]  task_work_run+0xb6/0x120
[   33.027027]  do_exit+0x521/0x1340
[   33.027280]  ? lockdep_hardirqs_on+0x8a/0x110
[   33.027612]  ? trace_hardirqs_on+0x3f/0x100
[   33.027932]  do_group_exit+0x5e/0xf0
[   33.028207]  __x64_sys_exit_group+0x25/0x30
[   33.028520]  do_syscall_64+0x3b/0x90
[   33.028814]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   33.029188] RIP: 0033:0x7f3777be6cf6
[   33.029462] Code: Unable to access opcode bytes at 0x7f3777be6ccc.
[   33.029902] RSP: 002b:00007ffd0d7278d8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
[   33.030450] RAX: ffffffffffffffda RBX: 00007f3777cf1490 RCX: 00007f3777be6cf6
[   33.030981] RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
[   33.031501] RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffff80
[   33.032010] R10: 0000000000000004 R11: 0000000000000246 R12: 00007f3777cf1490
[   33.032517] R13: 0000000000000001 R14: 00007f3777cf4e88 R15: 0000000000000000
[   33.033063]  </TASK>
[   33.033234] irq event stamp: 23635
[   33.033485] hardirqs last  enabled at (23643): [<ffffffff811b7f21>] __up_console_sem+0x91/0xb0
[   33.034111] hardirqs last disabled at (23650): [<ffffffff811b7f06>] __up_console_sem+0x76/0xb0
[   33.034752] softirqs last  enabled at (22444): [<ffffffff83000329>] __do_softirq+0x329/0x490
[   33.035379] softirqs last disabled at (22439): [<ffffffff81111082>] irq_exit_rcu+0xd2/0x100
[   33.035955] ---[ end trace 0000000000000000 ]---
[   33.090889] ------------[ cut here ]------------
[   33.091265] WARNING: CPU: 0 PID: 627 at drivers/iommu/iommufd/pages.c:178 batch_unpin.isra.23+0x151/0x1a0
[   33.091967] Modules linked in:
[   33.092203] CPU: 0 PID: 627 Comm: repro Tainted: G        W          6.1.0-a0a6c76cf2a5+ #1
[   33.092839] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   33.093652] RIP: 0010:batch_unpin.isra.23+0x151/0x1a0
[   33.094032] Code: e8 c4 be 2b ff 48 8b 45 d0 48 85 c0 75 17 e8 26 bd 2b ff 48 8b 7d c8 48 89 de e8 fa bd 2b ff 48 39 5d c8 73 07 e8 0f bd 2b ff <0f> 0b e8 08 bd 2b ff 4d 29 e5 31 ff 41 83 c6 01 4c 89 ee 31 db e8
[   33.095375] RSP: 0018:ffffc900010eba88 EFLAGS: 00010246
[   33.095760] RAX: 0000000000000000 RBX: fffffffffffffffb RCX: ffffffff81fded8c
[   33.096286] RDX: 0000000000000000 RSI: ffff88800cb4d300 RDI: 0000000000000002
[   33.096827] RBP: ffffc900010ebad0 R08: 000000000003b5c5 R09: 0000000000000006
[   33.097345] R10: 000000000003b5a0 R11: 0000000000000024 R12: 000000000000000a
[   33.097862] R13: 000000000000000a R14: 0000000000081000 R15: ffff888005ec9400
[   33.098373] FS:  00007f3777af9740(0000) GS:ffff88807dc00000(0000) knlGS:0000000000000000
[   33.098960] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   33.099376] CR2: 00007ffd0d727918 CR3: 0000000013578004 CR4: 0000000000770ef0
[   33.099893] PKRU: 55555554
[   33.100108] Call Trace:
[   33.100293]  <TASK>
[   33.100477]  __iopt_area_unfill_domain+0x257/0x560
[   33.100892]  ? __this_cpu_preempt_check+0x20/0x30
[   33.101260]  ? lock_is_held_type+0xe6/0x140
[   33.101596]  ? rcu_read_lock_sched_held+0x57/0x80
[   33.101957]  ? __mutex_lock+0x13a/0xf30
[   33.102278]  ? write_comp_data+0x2f/0x90
[   33.102603]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   33.102964]  iopt_area_unfill_domain+0x32/0x40
[   33.103313]  iopt_table_remove_domain+0x23f/0x4c0
[   33.103698]  iommufd_device_selftest_detach+0x3a/0x90
[   33.104094]  iommufd_selftest_destroy+0x55/0x70
[   33.104443]  iommufd_object_destroy_user+0xce/0x130
[   33.104837]  iommufd_destroy+0xa2/0xc0
[   33.105135]  iommufd_fops_ioctl+0x1ef/0x310
[   33.105460]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   33.105818]  ? write_comp_data+0x2f/0x90
[   33.106128]  __x64_sys_ioctl+0x10e/0x160
[   33.106437]  ? iommufd_get_object.part.6+0x1c0/0x1c0
[   33.106830]  do_syscall_64+0x3b/0x90
[   33.107117]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   33.107501] RIP: 0033:0x7f3777c1e59d
[   33.107773] Code: 00 c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d d3 08 0d 00 f7 d8 64 89 01 48
[   33.109101] RSP: 002b:00007ffd0d727918 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   33.109649] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f3777c1e59d
[   33.110169] RDX: 0000000020000140 RSI: 0000000000003b80 RDI: 0000000000000003
[   33.110690] RBP: 00007ffd0d727930 R08: 00007ffd0d727930 R09: 00007ffd0d727930
[   33.111205] R10: 00007ffd0d727930 R11: 0000000000000213 R12: 0000000000401180
[   33.111746] R13: 00007ffd0d727a50 R14: 0000000000000000 R15: 0000000000000000
[   33.112282]  </TASK>
[   33.112455] irq event stamp: 15301
[   33.112733] hardirqs last  enabled at (15311): [<ffffffff811b7f21>] __up_console_sem+0x91/0xb0
[   33.113361] hardirqs last disabled at (15318): [<ffffffff811b7f06>] __up_console_sem+0x76/0xb0
[   33.113987] softirqs last  enabled at (14982): [<ffffffff83000329>] __do_softirq+0x329/0x490
[   33.114615] softirqs last disabled at (14977): [<ffffffff81111082>] irq_exit_rcu+0xd2/0x100
[   33.115217] ---[ end trace 0000000000000000 ]---
[   33.115667] ------------[ cut here ]------------
[   33.116010] WARNING: CPU: 0 PID: 627 at drivers/iommu/iommufd/pages.c:294 __iopt_area_unfill_domain+0x152/0x560
[   33.116782] Modules linked in:
[   33.117022] CPU: 0 PID: 627 Comm: repro Tainted: G        W          6.1.0-a0a6c76cf2a5+ #1
[   33.117620] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   33.118449] RIP: 0010:__iopt_area_unfill_domain+0x152/0x560
[   33.118891] Code: a1 2b ff 44 8b 64 24 54 48 8b 44 24 48 31 ff 44 89 e6 48 89 44 24 38 e8 6c a2 2b ff 45 85 e4 0f 85 eb 01 00 00 e8 ee a0 2b ff <0f> 0b e8 e7 a0 2b ff 48 8b 44 24 38 89 5c 24 58 89 18 8b 44 24 54
[   33.120202] RSP: 0018:ffffc900010ebae0 EFLAGS: 00010246
[   33.120587] RAX: 0000000000000000 RBX: 00000000fffffffa RCX: ffffffff81fe0bd5
[   33.121126] RDX: 0000000000000000 RSI: ffff88800cb4d300 RDI: 0000000000000002
[   33.121642] RBP: ffffc900010ebd10 R08: 000000000003b5c5 R09: 0000000000000006
[   33.122154] R10: 000000000003b5a0 R11: 0000000000000024 R12: 0000000000000002
[   33.122673] R13: 0000000000000806 R14: 00000000000007ff R15: 0000000000000800
[   33.123343] FS:  00007f3777af9740(0000) GS:ffff88807dc00000(0000) knlGS:0000000000000000
[   33.124297] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   33.125003] CR2: 00007ffd0d727918 CR3: 0000000013578004 CR4: 0000000000770ef0
[   33.125705] PKRU: 55555554
[   33.125981] Call Trace:
[   33.126233]  <TASK>
[   33.126508]  ? __this_cpu_preempt_check+0x20/0x30
[   33.127091]  ? lock_is_held_type+0xe6/0x140
[   33.127530]  ? rcu_read_lock_sched_held+0x57/0x80
[   33.128018]  ? __mutex_lock+0x13a/0xf30
[   33.128448]  ? write_comp_data+0x2f/0x90
[   33.128974]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   33.129462]  iopt_area_unfill_domain+0x32/0x40
[   33.129861]  iopt_table_remove_domain+0x23f/0x4c0
[   33.130233]  iommufd_device_selftest_detach+0x3a/0x90
[   33.130650]  iommufd_selftest_destroy+0x55/0x70
[   33.131001]  iommufd_object_destroy_user+0xce/0x130
[   33.131373]  iommufd_destroy+0xa2/0xc0
[   33.131669]  iommufd_fops_ioctl+0x1ef/0x310
[   33.131992]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   33.132350]  ? write_comp_data+0x2f/0x90
[   33.132677]  __x64_sys_ioctl+0x10e/0x160
[   33.132995]  ? iommufd_get_object.part.6+0x1c0/0x1c0
[   33.133394]  do_syscall_64+0x3b/0x90
[   33.133676]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   33.134057] RIP: 0033:0x7f3777c1e59d
[   33.134331] Code: 00 c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d d3 08 0d 00 f7 d8 64 89 01 48
[   33.135639] RSP: 002b:00007ffd0d727918 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   33.136187] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f3777c1e59d
[   33.136728] RDX: 0000000020000140 RSI: 0000000000003b80 RDI: 0000000000000003
[   33.137240] RBP: 00007ffd0d727930 R08: 00007ffd0d727930 R09: 00007ffd0d727930
[   33.137751] R10: 00007ffd0d727930 R11: 0000000000000213 R12: 0000000000401180
[   33.138304] R13: 00007ffd0d727a50 R14: 0000000000000000 R15: 0000000000000000
[   33.138859]  </TASK>
[   33.139032] irq event stamp: 15813
[   33.139288] hardirqs last  enabled at (15821): [<ffffffff811b7f21>] __up_console_sem+0x91/0xb0
[   33.139908] hardirqs last disabled at (15828): [<ffffffff811b7f06>] __up_console_sem+0x76/0xb0
[   33.140525] softirqs last  enabled at (15616): [<ffffffff83000329>] __do_softirq+0x329/0x490
[   33.141157] softirqs last disabled at (15609): [<ffffffff81111082>] irq_exit_rcu+0xd2/0x100
[   33.141759] ---[ end trace 0000000000000000 ]---
[   33.142203] ------------[ cut here ]------------
[   33.142545] WARNING: CPU: 0 PID: 627 at drivers/iommu/iommufd/pages.c:1290 __iopt_area_unfill_domain+0x54f/0x560
[   33.143284] Modules linked in:
[   33.143517] CPU: 0 PID: 627 Comm: repro Tainted: G        W          6.1.0-a0a6c76cf2a5+ #1
[   33.144147] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   33.144972] RIP: 0010:__iopt_area_unfill_domain+0x54f/0x560
[   33.145386] Code: e8 86 9e 2b ff 85 db 0f 85 35 fb ff ff e8 09 9d 2b ff 0f 0b e9 29 fb ff ff e8 fd 9c 2b ff 0f 0b e9 69 fe ff ff e8 f1 9c 2b ff <0f> 0b e9 58 ff ff ff e8 65 2d dc 00 0f 1f 44 00 00 0f 1f 44 00 00
[   33.146695] RSP: 0018:ffffc900010ebae0 EFLAGS: 00010246
[   33.147096] RAX: 0000000000000000 RBX: 00000000fffffffa RCX: ffffffff81fe0d26
[   33.147634] RDX: 0000000000000000 RSI: ffff88800cb4d300 RDI: 0000000000000002
[   33.148156] RBP: ffffc900010ebd10 R08: 000000000003b5c5 R09: 0000000000000006
[   33.148685] R10: 000000000003b5a0 R11: 0000000000000024 R12: 00000000000007ff
[   33.149199] R13: 0000000000000806 R14: 00000000000007ff R15: 0000000000000800
[   33.149711] FS:  00007f3777af9740(0000) GS:ffff88807dc00000(0000) knlGS:0000000000000000
[   33.150286] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   33.150713] CR2: 00007ffd0d727918 CR3: 0000000013578004 CR4: 0000000000770ef0
[   33.151234] PKRU: 55555554
[   33.151445] Call Trace:
[   33.151629]  <TASK>
[   33.151825]  ? __this_cpu_preempt_check+0x20/0x30
[   33.152208]  ? lock_is_held_type+0xe6/0x140
[   33.152535]  ? rcu_read_lock_sched_held+0x57/0x80
[   33.152917]  ? __mutex_lock+0x13a/0xf30
[   33.153231]  ? write_comp_data+0x2f/0x90
[   33.153533]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   33.153918]  iopt_area_unfill_domain+0x32/0x40
[   33.154269]  iopt_table_remove_domain+0x23f/0x4c0
[   33.154642]  iommufd_device_selftest_detach+0x3a/0x90
[   33.155040]  iommufd_selftest_destroy+0x55/0x70
[   33.155391]  iommufd_object_destroy_user+0xce/0x130
[   33.155761]  iommufd_destroy+0xa2/0xc0
[   33.156061]  iommufd_fops_ioctl+0x1ef/0x310
[   33.156390]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   33.156770]  ? write_comp_data+0x2f/0x90
[   33.157080]  __x64_sys_ioctl+0x10e/0x160
[   33.157405]  ? iommufd_get_object.part.6+0x1c0/0x1c0
[   33.157788]  do_syscall_64+0x3b/0x90
[   33.158067]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   33.158452] RIP: 0033:0x7f3777c1e59d
[   33.158742] Code: 00 c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d d3 08 0d 00 f7 d8 64 89 01 48
[   33.160064] RSP: 002b:00007ffd0d727918 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   33.160630] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f3777c1e59d
[   33.161179] RDX: 0000000020000140 RSI: 0000000000003b80 RDI: 0000000000000003
[   33.161696] RBP: 00007ffd0d727930 R08: 00007ffd0d727930 R09: 00007ffd0d727930
[   33.162217] R10: 00007ffd0d727930 R11: 0000000000000213 R12: 0000000000401180
[   33.162741] R13: 00007ffd0d727a50 R14: 0000000000000000 R15: 0000000000000000
[   33.163267]  </TASK>
[   33.163435] irq event stamp: 16267
[   33.163691] hardirqs last  enabled at (16275): [<ffffffff811b7f21>] __up_console_sem+0x91/0xb0
[   33.164324] hardirqs last disabled at (16282): [<ffffffff811b7f06>] __up_console_sem+0x76/0xb0
[   33.164969] softirqs last  enabled at (15616): [<ffffffff83000329>] __do_softirq+0x329/0x490
[   33.165582] softirqs last disabled at (15609): [<ffffffff81111082>] irq_exit_rcu+0xd2/0x100
[   33.166195] ---[ end trace 0000000000000000 ]---
[   33.166643] ------------[ cut here ]------------
[   33.166983] WARNING: CPU: 0 PID: 627 at drivers/iommu/iommufd/pages.c:886 update_unpinned+0x75/0x80
[   33.167637] Modules linked in:
[   33.167872] CPU: 0 PID: 627 Comm: repro Tainted: G        W          6.1.0-a0a6c76cf2a5+ #1
[   33.168472] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   33.169302] RIP: 0010:update_unpinned+0x75/0x80
[   33.169657] Code: ac 2b ff 48 89 de 31 c9 31 d2 4c 29 e6 4c 89 ef e8 70 fb ff ff e8 bb ac 2b ff 5b 41 5c 41 5d 5d c3 cc cc cc cc e8 ab ac 2b ff <0f> 0b eb e7 0f 1f 80 00 00 00 00 0f 1f 44 00 00 55 48 89 e5 41 57
[   33.170973] RSP: 0018:ffffc900010ebab8 EFLAGS: 00010246
[   33.171364] RAX: 0000000000000000 RBX: 0000000000000800 RCX: ffffffff81fdfdcf
[   33.171877] RDX: 0000000000000000 RSI: ffff88800cb4d300 RDI: 0000000000000002
[   33.172417] RBP: ffffc900010ebad0 R08: 0000000000000000 R09: ffff88807dc3b920
[   33.172948] R10: 0000000000000924 R11: 0000000000000009 R12: fffffffffffffffb
[   33.173461] R13: ffff888005ec9400 R14: 00000000000007ff R15: 0000000000000800
[   33.173989] FS:  00007f3777af9740(0000) GS:ffff88807dc00000(0000) knlGS:0000000000000000
[   33.174577] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   33.174992] CR2: 00007ffd0d727918 CR3: 0000000013578004 CR4: 0000000000770ef0
[   33.175504] PKRU: 55555554
[   33.175712] Call Trace:
[   33.175907]  <TASK>
[   33.176076]  __iopt_area_unfill_domain+0x4e1/0x560
[   33.176471]  ? __this_cpu_preempt_check+0x20/0x30
[   33.176857]  ? lock_is_held_type+0xe6/0x140
[   33.177187]  ? rcu_read_lock_sched_held+0x57/0x80
[   33.177545]  ? __mutex_lock+0x13a/0xf30
[   33.177846]  ? write_comp_data+0x2f/0x90
[   33.178152]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   33.178518]  iopt_area_unfill_domain+0x32/0x40
[   33.178864]  iopt_table_remove_domain+0x23f/0x4c0
[   33.179227]  iommufd_device_selftest_detach+0x3a/0x90
[   33.179617]  iommufd_selftest_destroy+0x55/0x70
[   33.179965]  iommufd_object_destroy_user+0xce/0x130
[   33.180335]  iommufd_destroy+0xa2/0xc0
[   33.180627]  iommufd_fops_ioctl+0x1ef/0x310
[   33.180975]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   33.181335]  ? write_comp_data+0x2f/0x90
[   33.181642]  __x64_sys_ioctl+0x10e/0x160
[   33.181953]  ? iommufd_get_object.part.6+0x1c0/0x1c0
[   33.182333]  do_syscall_64+0x3b/0x90
[   33.182683]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   33.183203] RIP: 0033:0x7f3777c1e59d
[   33.183577] Code: 00 c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d d3 08 0d 00 f7 d8 64 89 01 48
[   33.185410] RSP: 002b:00007ffd0d727918 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   33.186190] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f3777c1e59d
[   33.186901] RDX: 0000000020000140 RSI: 0000000000003b80 RDI: 0000000000000003
[   33.187823] RBP: 00007ffd0d727930 R08: 00007ffd0d727930 R09: 00007ffd0d727930
[   33.188639] R10: 00007ffd0d727930 R11: 0000000000000213 R12: 0000000000401180
[   33.189646] R13: 00007ffd0d727a50 R14: 0000000000000000 R15: 0000000000000000
[   33.190650]  </TASK>
[   33.190917] irq event stamp: 16733
[   33.191343] hardirqs last  enabled at (16741): [<ffffffff811b7f21>] __up_console_sem+0x91/0xb0
[   33.192337] hardirqs last disabled at (16748): [<ffffffff811b7f06>] __up_console_sem+0x76/0xb0
[   33.193510] softirqs last  enabled at (15616): [<ffffffff83000329>] __do_softirq+0x329/0x490
[   33.194512] softirqs last disabled at (15609): [<ffffffff81111082>] irq_exit_rcu+0xd2/0x100
[   33.195499] ---[ end trace 0000000000000000 ]---
[   33.204542] ------------[ cut here ]------------
[   33.205293] WARNING: CPU: 0 PID: 627 at drivers/iommu/iommufd/pages.c:178 batch_unpin.isra.23+0x151/0x1a0
[   33.206438] Modules linked in:
[   33.206909] CPU: 0 PID: 627 Comm: repro Tainted: G        W          6.1.0-a0a6c76cf2a5+ #1
[   33.207978] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   33.209393] RIP: 0010:batch_unpin.isra.23+0x151/0x1a0
[   33.210096] Code: e8 c4 be 2b ff 48 8b 45 d0 48 85 c0 75 17 e8 26 bd 2b ff 48 8b 7d c8 48 89 de e8 fa bd 2b ff 48 39 5d c8 73 07 e8 0f bd 2b ff <0f> 0b e8 08 bd 2b ff 4d 29 e5 31 ff 41 83 c6 01 4c 89 ee 31 db e8
[   33.212406] RSP: 0018:ffffc900010eb9d8 EFLAGS: 00010246
[   33.213087] RAX: 0000000000000000 RBX: fffffffffffffffa RCX: ffffffff81fdeda6
[   33.213909] RDX: 0000000000000000 RSI: ffff88800cb4d300 RDI: 0000000000000002
[   33.214980] RBP: ffffc900010eba20 R08: 0000000000000000 R09: ffff88807dc3b890
[   33.215907] R10: 0000000000001123 R11: 0000000000000000 R12: 0000000000000001
[   33.216869] R13: 0000000000000001 R14: 0000000000000000 R15: ffff888005ec9400
[   33.217751] FS:  0000000000000000(0000) GS:ffff88807dc00000(0000) knlGS:0000000000000000
[   33.218721] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   33.219424] CR2: 00007f3777cf0500 CR3: 0000000013558003 CR4: 0000000000770ef0
[   33.220308] PKRU: 55555554
[   33.220521] Call Trace:
[   33.220746]  <TASK>
[   33.220927]  iopt_pages_unfill_xarray+0x39f/0x5c0
[   33.221324]  ? write_comp_data+0x2f/0x90
[   33.221633]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   33.222005]  ? write_comp_data+0x2f/0x90
[   33.222313]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   33.222685]  ? interval_tree_remove+0x291/0x4e0
[   33.223044]  ? write_comp_data+0x2f/0x90
[   33.223351]  iopt_area_remove_access+0x108/0x120
[   33.223709]  iommufd_access_unpin_pages+0x177/0x210
[   33.224098]  iommufd_test_access_unmap+0xe0/0x130
[   33.224462]  ? iommufd_test_access_unmap+0x130/0x130
[   33.224870]  iommufd_test_staccess_release+0x39/0x60
[   33.225250]  __fput+0x11f/0x450
[   33.225508]  ____fput+0x1e/0x30
[   33.225760]  task_work_run+0xb6/0x120
[   33.226054]  do_exit+0x521/0x1340
[   33.226315]  ? lockdep_hardirqs_on+0x8a/0x110
[   33.226669]  ? trace_hardirqs_on+0x3f/0x100
[   33.226998]  do_group_exit+0x5e/0xf0
[   33.227280]  __x64_sys_exit_group+0x25/0x30
[   33.227593]  do_syscall_64+0x3b/0x90
[   33.227872]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   33.228252] RIP: 0033:0x7f3777be6cf6
[   33.228528] Code: Unable to access opcode bytes at 0x7f3777be6ccc.
[   33.228999] RSP: 002b:00007ffd0d7278d8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
[   33.229557] RAX: ffffffffffffffda RBX: 00007f3777cf1490 RCX: 00007f3777be6cf6
[   33.230073] RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
[   33.230616] RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffff80
[   33.231126] R10: 0000000000000004 R11: 0000000000000246 R12: 00007f3777cf1490
[   33.231647] R13: 0000000000000001 R14: 00007f3777cf4e88 R15: 0000000000000000
[   33.232180]  </TASK>
[   33.232355] irq event stamp: 22759
[   33.232611] hardirqs last  enabled at (22767): [<ffffffff811b7f21>] __up_console_sem+0x91/0xb0
[   33.233260] hardirqs last disabled at (22776): [<ffffffff811b7f06>] __up_console_sem+0x76/0xb0
[   33.233892] softirqs last  enabled at (22334): [<ffffffff83000329>] __do_softirq+0x329/0x490
[   33.234505] softirqs last disabled at (22327): [<ffffffff81111082>] irq_exit_rcu+0xd2/0x100
[   33.235097] ---[ end trace 0000000000000000 ]---
[   33.235549] ------------[ cut here ]------------
[   33.235893] WARNING: CPU: 0 PID: 627 at drivers/iommu/iommufd/pages.c:886 update_unpinned+0x75/0x80
[   33.236562] Modules linked in:
[   33.236817] CPU: 0 PID: 627 Comm: repro Tainted: G        W          6.1.0-a0a6c76cf2a5+ #1
[   33.237441] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   33.238262] RIP: 0010:update_unpinned+0x75/0x80
[   33.238620] Code: ac 2b ff 48 89 de 31 c9 31 d2 4c 29 e6 4c 89 ef e8 70 fb ff ff e8 bb ac 2b ff 5b 41 5c 41 5d 5d c3 cc cc cc cc e8 ab ac 2b ff <0f> 0b eb e7 0f 1f 80 00 00 00 00 0f 1f 44 00 00 55 48 89 e5 41 57
[   33.239931] RSP: 0018:ffffc900010eba08 EFLAGS: 00010246
[   33.240319] RAX: 0000000000000000 RBX: 0000000000000800 RCX: ffffffff81fdfdcf
[   33.240853] RDX: 0000000000000000 RSI: ffff88800cb4d300 RDI: 0000000000000002
[   33.241359] RBP: ffffc900010eba20 R08: 0000000000000000 R09: ffff88807dc3b890
[   33.241881] R10: 0000000000001123 R11: 0000000000000000 R12: fffffffffffffffa
[   33.242412] R13: ffff888005ec9400 R14: 0000000000000002 R15: 0000000000000002
[   33.242931] FS:  0000000000000000(0000) GS:ffff88807dc00000(0000) knlGS:0000000000000000
[   33.243514] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   33.243952] CR2: 00007f3777cf0500 CR3: 0000000013558003 CR4: 0000000000770ef0
[   33.244474] PKRU: 55555554
[   33.244704] Call Trace:
[   33.244895]  <TASK>
[   33.245069]  iopt_pages_unfill_xarray+0x522/0x5c0
[   33.245462]  ? write_comp_data+0x2f/0x90
[   33.245770]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   33.246130]  ? write_comp_data+0x2f/0x90
[   33.246437]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   33.246811]  ? interval_tree_remove+0x291/0x4e0
[   33.247195]  ? write_comp_data+0x2f/0x90
[   33.247504]  iopt_area_remove_access+0x108/0x120
[   33.247870]  iommufd_access_unpin_pages+0x177/0x210
[   33.248277]  iommufd_test_access_unmap+0xe0/0x130
[   33.248639]  ? iommufd_test_access_unmap+0x130/0x130
[   33.249064]  iommufd_test_staccess_release+0x39/0x60
[   33.249439]  __fput+0x11f/0x450
[   33.249698]  ____fput+0x1e/0x30
[   33.249949]  task_work_run+0xb6/0x120
[   33.250241]  do_exit+0x521/0x1340
[   33.250518]  ? lockdep_hardirqs_on+0x8a/0x110
[   33.250851]  ? trace_hardirqs_on+0x3f/0x100
[   33.251190]  do_group_exit+0x5e/0xf0
[   33.251479]  __x64_sys_exit_group+0x25/0x30
[   33.251808]  do_syscall_64+0x3b/0x90
[   33.252098]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   33.252514] RIP: 0033:0x7f3777be6cf6
[   33.252815] Code: Unable to access opcode bytes at 0x7f3777be6ccc.
[   33.253285] RSP: 002b:00007ffd0d7278d8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
[   33.253852] RAX: ffffffffffffffda RBX: 00007f3777cf1490 RCX: 00007f3777be6cf6
[   33.254394] RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
[   33.254947] RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffff80
[   33.255486] R10: 0000000000000004 R11: 0000000000000246 R12: 00007f3777cf1490
[   33.256024] R13: 0000000000000001 R14: 00007f3777cf4e88 R15: 0000000000000000
[   33.256574]  </TASK>
[   33.256771] irq event stamp: 23239
[   33.257053] hardirqs last  enabled at (23247): [<ffffffff811b7f21>] __up_console_sem+0x91/0xb0
[   33.257708] hardirqs last disabled at (23254): [<ffffffff811b7f06>] __up_console_sem+0x76/0xb0
[   33.258351] softirqs last  enabled at (22334): [<ffffffff83000329>] __do_softirq+0x329/0x490
[   33.258983] softirqs last disabled at (22327): [<ffffffff81111082>] irq_exit_rcu+0xd2/0x100
[   33.259618] ---[ end trace 0000000000000000 ]---
[   33.260401] ------------[ cut here ]------------
[   33.261025] WARNING: CPU: 1 PID: 627 at drivers/iommu/iommufd/pages.c:1181 iopt_release_pages+0x159/0x190
[   33.262315] Modules linked in:
[   33.262754] CPU: 1 PID: 627 Comm: repro Tainted: G        W          6.1.0-a0a6c76cf2a5+ #1
[   33.263837] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   33.265350] RIP: 0010:iopt_release_pages+0x159/0x190
[   33.265995] Code: b5 11 ff eb cb e8 87 90 2b ff be 03 00 00 00 4c 89 f7 e8 6a 8b ce ff eb b7 e8 73 90 2b ff 0f 0b e9 ed fe ff ff e8 67 90 2b ff <0f> 0b e9 00 ff ff ff e8 5b 90 2b ff 0f 0b e9 07 ff ff ff e8 4f 90
[   33.268345] RSP: 0018:ffffc900010ebc88 EFLAGS: 00010246
[   33.269125] RAX: 0000000000000000 RBX: ffff888005ec9400 RCX: ffffffff81fe1957
[   33.270070] RDX: 0000000000000000 RSI: ffff88800cb4d300 RDI: 0000000000000002
[   33.270966] RBP: ffffc900010ebca8 R08: 000000000000001c R09: 0000000000000001
[   33.271941] R10: ffff88800cb4e098 R11: 0000000000000000 R12: fffffffffffffffa
[   33.272888] R13: 0000000001000000 R14: 00000000017fffff R15: 0000000000000000
[   33.273799] FS:  0000000000000000(0000) GS:ffff88807dd00000(0000) knlGS:0000000000000000
[   33.274832] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   33.275523] CR2: 00007fd6e5040000 CR3: 0000000013558004 CR4: 0000000000770ee0
[   33.276457] PKRU: 55555554
[   33.276902] Call Trace:
[   33.277203]  <TASK>
[   33.277483]  iopt_unmap_iova_range+0x1ef/0x2e0
[   33.278254]  iopt_unmap_all+0x2f/0x60
[   33.278736]  iommufd_ioas_destroy+0x2c/0x70
[   33.279296]  iommufd_fops_release+0xd4/0x170
[   33.280010]  ? iommufd_ctx_get+0x30/0x30
[   33.280527]  __fput+0x11f/0x450
[   33.281011]  ____fput+0x1e/0x30
[   33.281396]  task_work_run+0xb6/0x120
[   33.281881]  do_exit+0x521/0x1340
[   33.282347]  ? lockdep_hardirqs_on+0x8a/0x110
[   33.282959]  ? trace_hardirqs_on+0x3f/0x100
[   33.283534]  do_group_exit+0x5e/0xf0
[   33.284070]  __x64_sys_exit_group+0x25/0x30
[   33.284604]  do_syscall_64+0x3b/0x90
[   33.285087]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   33.285717] RIP: 0033:0x7f3777be6cf6
[   33.286187] Code: Unable to access opcode bytes at 0x7f3777be6ccc.
[   33.286906] RSP: 002b:00007ffd0d7278d8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
[   33.287850] RAX: ffffffffffffffda RBX: 00007f3777cf1490 RCX: 00007f3777be6cf6
[   33.288695] RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
[   33.289598] RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffff80
[   33.290425] R10: 0000000000000004 R11: 0000000000000246 R12: 00007f3777cf1490
[   33.291312] R13: 0000000000000001 R14: 00007f3777cf4e88 R15: 0000000000000000
[   33.292191]  </TASK>
[   33.292540] irq event stamp: 23769
[   33.292964] hardirqs last  enabled at (23779): [<ffffffff811b7f21>] __up_console_sem+0x91/0xb0
[   33.293902] hardirqs last disabled at (23786): [<ffffffff811b7f06>] __up_console_sem+0x76/0xb0
[   33.294973] softirqs last  enabled at (23398): [<ffffffff83000329>] __do_softirq+0x329/0x490
[   33.296014] softirqs last disabled at (23333): [<ffffffff81111082>] irq_exit_rcu+0xd2/0x100
[   33.297084] ---[ end trace 0000000000000000 ]---
[   33.713622] ------------[ cut here ]------------
[   33.714067] WARNING: CPU: 1 PID: 638 at drivers/iommu/iommufd/pages.c:294 __iopt_area_unfill_domain+0x152/0x560
[   33.714826] Modules linked in:
[   33.715063] CPU: 1 PID: 638 Comm: repro Tainted: G        W          6.1.0-a0a6c76cf2a5+ #1
[   33.715712] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   33.716538] RIP: 0010:__iopt_area_unfill_domain+0x152/0x560
[   33.716997] Code: a1 2b ff 44 8b 64 24 54 48 8b 44 24 48 31 ff 44 89 e6 48 89 44 24 38 e8 6c a2 2b ff 45 85 e4 0f 85 eb 01 00 00 e8 ee a0 2b ff <0f> 0b e8 e7 a0 2b ff 48 8b 44 24 38 89 5c 24 58 89 18 8b 44 24 54
[   33.718714] RSP: 0018:ffffc90001173ae0 EFLAGS: 00010246
[   33.719104] RAX: 0000000000000000 RBX: 00000000ffffffff RCX: ffffffff81fe0bd5
[   33.719629] RDX: 0000000000000000 RSI: ffff88801235d300 RDI: 0000000000000002
[   33.720144] RBP: ffffc90001173d10 R08: 000000000003b5c5 R09: 0000000000000010
[   33.720709] R10: 000000000003b5a0 R11: 0000000000000024 R12: 000000000000006b
[   33.721471] R13: 0000000000000801 R14: 00000000000007ff R15: 0000000000000800
[   33.721983] FS:  00007f3777af9740(0000) GS:ffff88807dd00000(0000) knlGS:0000000000000000
[   33.722580] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   33.722991] CR2: 00007f3777c1e580 CR3: 00000000099fa002 CR4: 0000000000770ee0
[   33.723521] PKRU: 55555554
[   33.723732] Call Trace:
[   33.723920]  <TASK>
[   33.724118]  ? __this_cpu_preempt_check+0x20/0x30
[   33.724487]  ? lock_is_held_type+0xe6/0x140
[   33.724867]  ? rcu_read_lock_sched_held+0x57/0x80
[   33.725445]  ? __mutex_lock+0x13a/0xf30
[   33.725934]  ? write_comp_data+0x2f/0x90
[   33.726421]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   33.726789]  iopt_area_unfill_domain+0x32/0x40
[   33.727130]  iopt_table_remove_domain+0x23f/0x4c0
[   33.727512]  iommufd_device_selftest_detach+0x3a/0x90
[   33.727903]  iommufd_selftest_destroy+0x55/0x70
[   33.728255]  iommufd_object_destroy_user+0xce/0x130
[   33.728640]  iommufd_destroy+0xa2/0xc0
[   33.729146]  iommufd_fops_ioctl+0x1ef/0x310
[   33.729669]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   33.730101]  ? write_comp_data+0x2f/0x90
[   33.730412]  __x64_sys_ioctl+0x10e/0x160
[   33.730727]  ? iommufd_get_object.part.6+0x1c0/0x1c0
[   33.731125]  do_syscall_64+0x3b/0x90
[   33.731408]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   33.731795] RIP: 0033:0x7f3777c1e59d
[   33.732084] Code: 00 c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d d3 08 0d 00 f7 d8 64 89 01 48
[   33.733459] RSP: 002b:00007ffd0d727918 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   33.734320] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f3777c1e59d
[   33.735001] RDX: 0000000020000140 RSI: 0000000000003b80 RDI: 0000000000000003
[   33.735511] RBP: 00007ffd0d727930 R08: 00007ffd0d727930 R09: 00007ffd0d727930
[   33.736036] R10: 00007ffd0d727930 R11: 0000000000000213 R12: 0000000000401180
[   33.736550] R13: 00007ffd0d727a50 R14: 0000000000000000 R15: 0000000000000000
[   33.737170]  </TASK>
[   33.737451] irq event stamp: 14741
[   33.737860] hardirqs last  enabled at (14749): [<ffffffff811b7f21>] __up_console_sem+0x91/0xb0
[   33.738521] hardirqs last disabled at (14756): [<ffffffff811b7f06>] __up_console_sem+0x76/0xb0
[   33.739157] softirqs last  enabled at (14730): [<ffffffff83000329>] __do_softirq+0x329/0x490
[   33.739787] softirqs last disabled at (14721): [<ffffffff81111082>] irq_exit_rcu+0xd2/0x100
[   33.740411] ---[ end trace 0000000000000000 ]---
[   33.740949] ------------[ cut here ]------------
[   33.741494] WARNING: CPU: 1 PID: 638 at drivers/iommu/iommufd/pages.c:1290 __iopt_area_unfill_domain+0x54f/0x560
[   33.742333] Modules linked in:
[   33.742587] CPU: 1 PID: 638 Comm: repro Tainted: G        W          6.1.0-a0a6c76cf2a5+ #1
[   33.743201] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   33.744031] RIP: 0010:__iopt_area_unfill_domain+0x54f/0x560
[   33.744450] Code: e8 86 9e 2b ff 85 db 0f 85 35 fb ff ff e8 09 9d 2b ff 0f 0b e9 29 fb ff ff e8 fd 9c 2b ff 0f 0b e9 69 fe ff ff e8 f1 9c 2b ff <0f> 0b e9 58 ff ff ff e8 65 2d dc 00 0f 1f 44 00 00 0f 1f 44 00 00
[   33.745800] RSP: 0018:ffffc90001173ae0 EFLAGS: 00010246
[   33.746397] RAX: 0000000000000000 RBX: 00000000ffffffff RCX: ffffffff81fe0d26
[   33.747015] RDX: 0000000000000000 RSI: ffff88801235d300 RDI: 0000000000000002
[   33.747525] RBP: ffffc90001173d10 R08: 000000000003b5c5 R09: 0000000000000010
[   33.748035] R10: 000000000003b5a0 R11: 0000000000000024 R12: 00000000000007ff
[   33.748526] R13: 0000000000000801 R14: 00000000000007ff R15: 0000000000000800
[   33.749087] FS:  00007f3777af9740(0000) GS:ffff88807dd00000(0000) knlGS:0000000000000000
[   33.749875] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   33.750298] CR2: 00007f3777c1e580 CR3: 00000000099fa002 CR4: 0000000000770ee0
[   33.750815] PKRU: 55555554
[   33.751033] Call Trace:
[   33.751215]  <TASK>
[   33.751413]  ? __this_cpu_preempt_check+0x20/0x30
[   33.751778]  ? lock_is_held_type+0xe6/0x140
[   33.752110]  ? rcu_read_lock_sched_held+0x57/0x80
[   33.752458]  ? __mutex_lock+0x13a/0xf30
[   33.752790]  ? write_comp_data+0x2f/0x90
[   33.753269]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   33.753837]  iopt_area_unfill_domain+0x32/0x40
[   33.754333]  iopt_table_remove_domain+0x23f/0x4c0
[   33.754688]  iommufd_device_selftest_detach+0x3a/0x90
[   33.755056]  iommufd_selftest_destroy+0x55/0x70
[   33.755402]  iommufd_object_destroy_user+0xce/0x130
[   33.755766]  iommufd_destroy+0xa2/0xc0
[   33.756049]  iommufd_fops_ioctl+0x1ef/0x310
[   33.756375]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   33.756766]  ? write_comp_data+0x2f/0x90
[   33.757244]  __x64_sys_ioctl+0x10e/0x160
[   33.757741]  ? iommufd_get_object.part.6+0x1c0/0x1c0
[   33.758222]  do_syscall_64+0x3b/0x90
[   33.758517]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   33.758881] RIP: 0033:0x7f3777c1e59d
[   33.759148] Code: 00 c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d d3 08 0d 00 f7 d8 64 89 01 48
[   33.760427] RSP: 002b:00007ffd0d727918 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   33.761017] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f3777c1e59d
[   33.761802] RDX: 0000000020000140 RSI: 0000000000003b80 RDI: 0000000000000003
[   33.762307] RBP: 00007ffd0d727930 R08: 00007ffd0d727930 R09: 00007ffd0d727930
[   33.762825] R10: 00007ffd0d727930 R11: 0000000000000213 R12: 0000000000401180
[   33.763330] R13: 00007ffd0d727a50 R14: 0000000000000000 R15: 0000000000000000
[   33.763840]  </TASK>
[   33.764019] irq event stamp: 15201
[   33.764269] hardirqs last  enabled at (15209): [<ffffffff811b7f21>] __up_console_sem+0x91/0xb0
[   33.764903] hardirqs last disabled at (15218): [<ffffffff811b7f06>] __up_console_sem+0x76/0xb0
[   33.765866] softirqs last  enabled at (14858): [<ffffffff83000329>] __do_softirq+0x329/0x490
[   33.766519] softirqs last disabled at (14853): [<ffffffff81111082>] irq_exit_rcu+0xd2/0x100
[   33.767110] ---[ end trace 0000000000000000 ]---
[   33.771853] ------------[ cut here ]------------
[   33.772208] WARNING: CPU: 1 PID: 638 at drivers/iommu/iommufd/pages.c:178 batch_unpin.isra.23+0x151/0x1a0
[   33.772948] Modules linked in:
[   33.773304] CPU: 1 PID: 638 Comm: repro Tainted: G        W          6.1.0-a0a6c76cf2a5+ #1
[   33.773986] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   33.774798] RIP: 0010:batch_unpin.isra.23+0x151/0x1a0
[   33.775164] Code: e8 c4 be 2b ff 48 8b 45 d0 48 85 c0 75 17 e8 26 bd 2b ff 48 8b 7d c8 48 89 de e8 fa bd 2b ff 48 39 5d c8 73 07 e8 0f bd 2b ff <0f> 0b e8 08 bd 2b ff 4d 29 e5 31 ff 41 83 c6 01 4c 89 ee 31 db e8
[   33.776443] RSP: 0018:ffffc900011739d8 EFLAGS: 00010246
[   33.776873] RAX: 0000000000000000 RBX: ffffffffffffffff RCX: ffffffff81fded8c
[   33.777615] RDX: 0000000000000000 RSI: ffff88801235d300 RDI: 0000000000000002
[   33.778131] RBP: ffffc90001173a20 R08: 0000000000000000 R09: ffff88807dd3b890
[   33.778636] R10: 0000000000000e9e R11: 0000000000000000 R12: 0000000000000001
[   33.779154] R13: 0000000000000001 R14: 0000000000000000 R15: ffff888005ec9c00
[   33.779678] FS:  0000000000000000(0000) GS:ffff88807dd00000(0000) knlGS:0000000000000000
[   33.780298] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   33.780770] CR2: 00007f3777cf0500 CR3: 0000000003c12005 CR4: 0000000000770ee0
[   33.781575] PKRU: 55555554
[   33.781861] Call Trace:
[   33.782057]  <TASK>
[   33.782250]  iopt_pages_unfill_xarray+0x39f/0x5c0
[   33.782660]  ? write_comp_data+0x2f/0x90
[   33.782965]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   33.783338]  ? write_comp_data+0x2f/0x90
[   33.783653]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   33.784028]  ? interval_tree_remove+0x291/0x4e0
[   33.784408]  ? write_comp_data+0x2f/0x90
[   33.784766]  iopt_area_remove_access+0x108/0x120
[   33.785326]  iommufd_access_unpin_pages+0x177/0x210
[   33.785941]  iommufd_test_access_unmap+0xe0/0x130
[   33.786419]  ? iommufd_test_access_unmap+0x130/0x130
[   33.786812]  iommufd_test_staccess_release+0x39/0x60
[   33.787186]  __fput+0x11f/0x450
[   33.787447]  ____fput+0x1e/0x30
[   33.787720]  task_work_run+0xb6/0x120
[   33.788027]  do_exit+0x521/0x1340
[   33.788296]  ? lockdep_hardirqs_on+0x8a/0x110
[   33.788716]  ? trace_hardirqs_on+0x3f/0x100
[   33.789246]  do_group_exit+0x5e/0xf0
[   33.789708]  __x64_sys_exit_group+0x25/0x30
[   33.790108]  do_syscall_64+0x3b/0x90
[   33.790402]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   33.790805] RIP: 0033:0x7f3777be6cf6
[   33.791077] Code: Unable to access opcode bytes at 0x7f3777be6ccc.
[   33.791530] RSP: 002b:00007ffd0d7278d8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
[   33.792115] RAX: ffffffffffffffda RBX: 00007f3777cf1490 RCX: 00007f3777be6cf6
[   33.792697] RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
[   33.793543] RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffff80
[   33.794110] R10: 0000000000000004 R11: 0000000000000246 R12: 00007f3777cf1490
[   33.794648] R13: 0000000000000001 R14: 00007f3777cf4e88 R15: 0000000000000000
[   33.795187]  </TASK>
[   33.795361] irq event stamp: 21101
[   33.795618] hardirqs last  enabled at (21109): [<ffffffff811b7f21>] __up_console_sem+0x91/0xb0
[   33.796289] hardirqs last disabled at (21116): [<ffffffff811b7f06>] __up_console_sem+0x76/0xb0
[   33.796974] softirqs last  enabled at (20978): [<ffffffff83000329>] __do_softirq+0x329/0x490
[   33.797932] softirqs last disabled at (20973): [<ffffffff81111082>] irq_exit_rcu+0xd2/0x100
[   33.798636] ---[ end trace 0000000000000000 ]---
[   33.799067] ------------[ cut here ]------------
[   33.799427] WARNING: CPU: 1 PID: 638 at drivers/iommu/iommufd/pages.c:886 update_unpinned+0x75/0x80
[   33.800115] Modules linked in:
[   33.800365] CPU: 1 PID: 638 Comm: repro Tainted: G        W          6.1.0-a0a6c76cf2a5+ #1
[   33.801044] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   33.802150] RIP: 0010:update_unpinned+0x75/0x80
[   33.802530] Code: ac 2b ff 48 89 de 31 c9 31 d2 4c 29 e6 4c 89 ef e8 70 fb ff ff e8 bb ac 2b ff 5b 41 5c 41 5d 5d c3 cc cc cc cc e8 ab ac 2b ff <0f> 0b eb e7 0f 1f 80 00 00 00 00 0f 1f 44 00 00 55 48 89 e5 41 57
[   33.803874] RSP: 0018:ffffc90001173a08 EFLAGS: 00010246
[   33.804279] RAX: 0000000000000000 RBX: 0000000000000000 RCX: ffffffff81fdfdcf
[   33.804858] RDX: 0000000000000000 RSI: ffff88801235d300 RDI: 0000000000000002
[   33.805608] RBP: ffffc90001173a20 R08: 0000000000000000 R09: ffff88807dd3b890
[   33.806156] R10: 0000000000000e9e R11: 0000000000000000 R12: ffffffffffffffff
[   33.806687] R13: ffff888005ec9c00 R14: 0000000000000002 R15: 0000000000000002
[   33.807213] FS:  0000000000000000(0000) GS:ffff88807dd00000(0000) knlGS:0000000000000000
[   33.807812] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   33.808261] CR2: 00007f3777cf0500 CR3: 0000000003c12005 CR4: 0000000000770ee0
[   33.808834] PKRU: 55555554
[   33.809160] Call Trace:
[   33.809453]  <TASK>
[   33.809719]  iopt_pages_unfill_xarray+0x522/0x5c0
[   33.810253]  ? write_comp_data+0x2f/0x90
[   33.810585]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   33.810941]  ? write_comp_data+0x2f/0x90
[   33.811259]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   33.811626]  ? interval_tree_remove+0x291/0x4e0
[   33.811989]  ? write_comp_data+0x2f/0x90
[   33.812318]  iopt_area_remove_access+0x108/0x120
[   33.812730]  iommufd_access_unpin_pages+0x177/0x210
[   33.813339]  iommufd_test_access_unmap+0xe0/0x130
[   33.813875]  ? iommufd_test_access_unmap+0x130/0x130
[   33.814267]  iommufd_test_staccess_release+0x39/0x60
[   33.814697]  __fput+0x11f/0x450
[   33.814946]  ____fput+0x1e/0x30
[   33.815180]  task_work_run+0xb6/0x120
[   33.815473]  do_exit+0x521/0x1340
[   33.815726]  ? lockdep_hardirqs_on+0x8a/0x110
[   33.816061]  ? trace_hardirqs_on+0x3f/0x100
[   33.816381]  do_group_exit+0x5e/0xf0
[   33.816695]  __x64_sys_exit_group+0x25/0x30
[   33.817197]  do_syscall_64+0x3b/0x90
[   33.817641]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   33.818204] RIP: 0033:0x7f3777be6cf6
[   33.818470] Code: Unable to access opcode bytes at 0x7f3777be6ccc.
[   33.818939] RSP: 002b:00007ffd0d7278d8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
[   33.819475] RAX: ffffffffffffffda RBX: 00007f3777cf1490 RCX: 00007f3777be6cf6
[   33.819987] RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
[   33.820479] RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffff80
[   33.821022] R10: 0000000000000004 R11: 0000000000000246 R12: 00007f3777cf1490
[   33.821805] R13: 0000000000000001 R14: 00007f3777cf4e88 R15: 0000000000000000
[   33.822398]  </TASK>
[   33.822571] irq event stamp: 21587
[   33.822816] hardirqs last  enabled at (21595): [<ffffffff811b7f21>] __up_console_sem+0x91/0xb0
[   33.823436] hardirqs last disabled at (21602): [<ffffffff811b7f06>] __up_console_sem+0x76/0xb0
[   33.824056] softirqs last  enabled at (21242): [<ffffffff83000329>] __do_softirq+0x329/0x490
[   33.824704] softirqs last disabled at (21237): [<ffffffff81111082>] irq_exit_rcu+0xd2/0x100
[   33.825580] ---[ end trace 0000000000000000 ]---
[   33.826069] ------------[ cut here ]------------
[   33.826414] WARNING: CPU: 1 PID: 638 at drivers/iommu/iommufd/pages.c:1181 iopt_release_pages+0x159/0x190
[   33.827112] Modules linked in:
[   33.827360] CPU: 1 PID: 638 Comm: repro Tainted: G        W          6.1.0-a0a6c76cf2a5+ #1
[   33.827977] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   33.828871] RIP: 0010:iopt_release_pages+0x159/0x190
[   33.829441] Code: b5 11 ff eb cb e8 87 90 2b ff be 03 00 00 00 4c 89 f7 e8 6a 8b ce ff eb b7 e8 73 90 2b ff 0f 0b e9 ed fe ff ff e8 67 90 2b ff <0f> 0b e9 00 ff ff ff e8 5b 90 2b ff 0f 0b e9 07 ff ff ff e8 4f 90
[   33.831017] RSP: 0018:ffffc90001173c88 EFLAGS: 00010246
[   33.831402] RAX: 0000000000000000 RBX: ffff888005ec9c00 RCX: ffffffff81fe1957
[   33.831928] RDX: 0000000000000000 RSI: ffff88801235d300 RDI: 0000000000000002
[   33.832453] RBP: ffffc90001173ca8 R08: 000000000000001c R09: 0000000000000001
[   33.833045] R10: ffff88801235e098 R11: 0000000000000000 R12: ffffffffffffffff
[   33.833576] R13: 0000000001000000 R14: 00000000017fffff R15: 0000000000000000
[   33.834102] FS:  0000000000000000(0000) GS:ffff88807dd00000(0000) knlGS:0000000000000000
[   33.834697] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   33.835114] CR2: 00007f3777cf0500 CR3: 0000000003c12005 CR4: 0000000000770ee0
[   33.835643] PKRU: 55555554
[   33.835887] Call Trace:
[   33.836079]  <TASK>
[   33.836258]  iopt_unmap_iova_range+0x1ef/0x2e0
[   33.836614]  iopt_unmap_all+0x2f/0x60
[   33.836923]  iommufd_ioas_destroy+0x2c/0x70
[   33.837251]  iommufd_fops_release+0xd4/0x170
[   33.837585]  ? iommufd_ctx_get+0x30/0x30
[   33.837893]  __fput+0x11f/0x450
[   33.838153]  ____fput+0x1e/0x30
[   33.838407]  task_work_run+0xb6/0x120
[   33.838703]  do_exit+0x521/0x1340
[   33.838956]  ? lockdep_hardirqs_on+0x8a/0x110
[   33.839297]  ? trace_hardirqs_on+0x3f/0x100
[   33.839631]  do_group_exit+0x5e/0xf0
[   33.839915]  __x64_sys_exit_group+0x25/0x30
[   33.840238]  do_syscall_64+0x3b/0x90
[   33.840521]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   33.840932] RIP: 0033:0x7f3777be6cf6
[   33.841214] Code: Unable to access opcode bytes at 0x7f3777be6ccc.
[   33.841672] RSP: 002b:00007ffd0d7278d8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
[   33.842236] RAX: ffffffffffffffda RBX: 00007f3777cf1490 RCX: 00007f3777be6cf6
[   33.842754] RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
[   33.843268] RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffff80
[   33.843800] R10: 0000000000000004 R11: 0000000000000246 R12: 00007f3777cf1490
[   33.844328] R13: 0000000000000001 R14: 00007f3777cf4e88 R15: 0000000000000000
[   33.844889]  </TASK>
[   33.845065] irq event stamp: 22155
[   33.845324] hardirqs last  enabled at (22163): [<ffffffff811b7f21>] __up_console_sem+0x91/0xb0
[   33.845966] hardirqs last disabled at (22170): [<ffffffff811b7f06>] __up_console_sem+0x76/0xb0
[   33.846607] softirqs last  enabled at (22072): [<ffffffff83000329>] __do_softirq+0x329/0x490
[   33.847218] softirqs last disabled at (22063): [<ffffffff81111082>] irq_exit_rcu+0xd2/0x100
[   33.847838] ---[ end trace 0000000000000000 ]---
[   34.061349] ------------[ cut here ]------------
[   34.061726] WARNING: CPU: 0 PID: 644 at drivers/iommu/iommufd/pages.c:294 __iopt_area_unfill_domain+0x152/0x560
[   34.062506] Modules linked in:
[   34.062741] CPU: 0 PID: 644 Comm: repro Tainted: G        W          6.1.0-a0a6c76cf2a5+ #1
[   34.063342] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   34.064170] RIP: 0010:__iopt_area_unfill_domain+0x152/0x560
[   34.064613] Code: a1 2b ff 44 8b 64 24 54 48 8b 44 24 48 31 ff 44 89 e6 48 89 44 24 38 e8 6c a2 2b ff 45 85 e4 0f 85 eb 01 00 00 e8 ee a0 2b ff <0f> 0b e8 e7 a0 2b ff 48 8b 44 24 38 89 5c 24 58 89 18 8b 44 24 54
[   34.065970] RSP: 0018:ffffc900011a3ae0 EFLAGS: 00010246
[   34.066559] RAX: 0000000000000000 RBX: 00000000ffffffff RCX: ffffffff81fe0bd5
[   34.067379] RDX: 0000000000000000 RSI: ffff88801235d300 RDI: 0000000000000002
[   34.068157] RBP: ffffc900011a3d10 R08: 000000000003b5c5 R09: 0000000000000001
[   34.069196] R10: 000000000003b5a0 R11: 0000000000000024 R12: 0000000000000001
[   34.070001] R13: 0000000000000801 R14: 00000000000007ff R15: 0000000000000800
[   34.070745] FS:  00007f3777af9740(0000) GS:ffff88807dc00000(0000) knlGS:0000000000000000
[   34.071466] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   34.071885] CR2: 00007ffd0d727918 CR3: 000000001357e001 CR4: 0000000000770ef0
[   34.072436] PKRU: 55555554
[   34.072648] Call Trace:
[   34.072982]  <TASK>
[   34.073305]  ? __this_cpu_preempt_check+0x20/0x30
[   34.073791]  ? lock_is_held_type+0xe6/0x140
[   34.074123]  ? rcu_read_lock_sched_held+0x57/0x80
[   34.074492]  ? __mutex_lock+0x13a/0xf30
[   34.074808]  ? write_comp_data+0x2f/0x90
[   34.075111]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   34.075476]  iopt_area_unfill_domain+0x32/0x40
[   34.075838]  iopt_table_remove_domain+0x23f/0x4c0
[   34.076194]  iommufd_device_selftest_detach+0x3a/0x90
[   34.076592]  iommufd_selftest_destroy+0x55/0x70
[   34.076994]  iommufd_object_destroy_user+0xce/0x130
[   34.077573]  iommufd_destroy+0xa2/0xc0
[   34.078032]  iommufd_fops_ioctl+0x1ef/0x310
[   34.078570]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   34.078941]  ? write_comp_data+0x2f/0x90
[   34.079250]  __x64_sys_ioctl+0x10e/0x160
[   34.079561]  ? iommufd_get_object.part.6+0x1c0/0x1c0
[   34.079961]  do_syscall_64+0x3b/0x90
[   34.080238]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   34.080622] RIP: 0033:0x7f3777c1e59d
[   34.080952] Code: 00 c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d d3 08 0d 00 f7 d8 64 89 01 48
[   34.082655] RSP: 002b:00007ffd0d727918 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   34.083230] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f3777c1e59d
[   34.083741] RDX: 0000000020000140 RSI: 0000000000003b80 RDI: 0000000000000003
[   34.084269] RBP: 00007ffd0d727930 R08: 00007ffd0d727930 R09: 00007ffd0d727930
[   34.084816] R10: 00007ffd0d727930 R11: 0000000000000213 R12: 0000000000401180
[   34.085577] R13: 00007ffd0d727a50 R14: 0000000000000000 R15: 0000000000000000
[   34.086106]  </TASK>
[   34.086278] irq event stamp: 14771
[   34.086565] hardirqs last  enabled at (14779): [<ffffffff811b7f21>] __up_console_sem+0x91/0xb0
[   34.087190] hardirqs last disabled at (14786): [<ffffffff811b7f06>] __up_console_sem+0x76/0xb0
[   34.087838] softirqs last  enabled at (14466): [<ffffffff83000329>] __do_softirq+0x329/0x490
[   34.088458] softirqs last disabled at (14459): [<ffffffff81111082>] irq_exit_rcu+0xd2/0x100
[   34.089110] ---[ end trace 0000000000000000 ]---
[   34.089798] ------------[ cut here ]------------
[   34.090327] WARNING: CPU: 0 PID: 644 at drivers/iommu/iommufd/pages.c:1290 __iopt_area_unfill_domain+0x54f/0x560
[   34.091079] Modules linked in:
[   34.091331] CPU: 0 PID: 644 Comm: repro Tainted: G        W          6.1.0-a0a6c76cf2a5+ #1
[   34.091947] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   34.092804] RIP: 0010:__iopt_area_unfill_domain+0x54f/0x560
[   34.093464] Code: e8 86 9e 2b ff 85 db 0f 85 35 fb ff ff e8 09 9d 2b ff 0f 0b e9 29 fb ff ff e8 fd 9c 2b ff 0f 0b e9 69 fe ff ff e8 f1 9c 2b ff <0f> 0b e9 58 ff ff ff e8 65 2d dc 00 0f 1f 44 00 00 0f 1f 44 00 00
[   34.094845] RSP: 0018:ffffc900011a3ae0 EFLAGS: 00010246
[   34.095228] RAX: 0000000000000000 RBX: 00000000ffffffff RCX: ffffffff81fe0d26
[   34.095758] RDX: 0000000000000000 RSI: ffff88801235d300 RDI: 0000000000000002
[   34.096289] RBP: ffffc900011a3d10 R08: 000000000003b5c5 R09: 0000000000000001
[   34.096862] R10: 000000000003b5a0 R11: 0000000000000024 R12: 00000000000007ff
[   34.097692] R13: 0000000000000801 R14: 00000000000007ff R15: 0000000000000800
[   34.098234] FS:  00007f3777af9740(0000) GS:ffff88807dc00000(0000) knlGS:0000000000000000
[   34.098835] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   34.099281] CR2: 00007ffd0d727918 CR3: 000000001357e001 CR4: 0000000000770ef0
[   34.099810] PKRU: 55555554
[   34.100034] Call Trace:
[   34.100226]  <TASK>
[   34.100420]  ? __this_cpu_preempt_check+0x20/0x30
[   34.100826]  ? lock_is_held_type+0xe6/0x140
[   34.101359]  ? rcu_read_lock_sched_held+0x57/0x80
[   34.101917]  ? __mutex_lock+0x13a/0xf30
[   34.102339]  ? write_comp_data+0x2f/0x90
[   34.102661]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   34.103033]  iopt_area_unfill_domain+0x32/0x40
[   34.103396]  iopt_table_remove_domain+0x23f/0x4c0
[   34.103759]  iommufd_device_selftest_detach+0x3a/0x90
[   34.104152]  iommufd_selftest_destroy+0x55/0x70
[   34.104527]  iommufd_object_destroy_user+0xce/0x130
[   34.104949]  iommufd_destroy+0xa2/0xc0
[   34.105439]  iommufd_fops_ioctl+0x1ef/0x310
[   34.105964]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   34.106435]  ? write_comp_data+0x2f/0x90
[   34.106757]  __x64_sys_ioctl+0x10e/0x160
[   34.107068]  ? iommufd_get_object.part.6+0x1c0/0x1c0
[   34.107460]  do_syscall_64+0x3b/0x90
[   34.107746]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   34.108125] RIP: 0033:0x7f3777c1e59d
[   34.108402] Code: 00 c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d d3 08 0d 00 f7 d8 64 89 01 48
[   34.109791] RSP: 002b:00007ffd0d727918 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   34.110675] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f3777c1e59d
[   34.111284] RDX: 0000000020000140 RSI: 0000000000003b80 RDI: 0000000000000003
[   34.111822] RBP: 00007ffd0d727930 R08: 00007ffd0d727930 R09: 00007ffd0d727930
[   34.112344] R10: 00007ffd0d727930 R11: 0000000000000213 R12: 0000000000401180
[   34.112928] R13: 00007ffd0d727a50 R14: 0000000000000000 R15: 0000000000000000
[   34.113677]  </TASK>
[   34.113851] irq event stamp: 15227
[   34.114120] hardirqs last  enabled at (15235): [<ffffffff811b7f21>] __up_console_sem+0x91/0xb0
[   34.114738] hardirqs last disabled at (15242): [<ffffffff811b7f06>] __up_console_sem+0x76/0xb0
[   34.115379] softirqs last  enabled at (14466): [<ffffffff83000329>] __do_softirq+0x329/0x490
[   34.115998] softirqs last disabled at (14459): [<ffffffff81111082>] irq_exit_rcu+0xd2/0x100
[   34.116613] ---[ end trace 0000000000000000 ]---
[   34.125454] ------------[ cut here ]------------
[   34.125842] WARNING: CPU: 1 PID: 644 at drivers/iommu/iommufd/pages.c:178 batch_unpin.isra.23+0x151/0x1a0
[   34.126549] Modules linked in:
[   34.126791] CPU: 1 PID: 644 Comm: repro Tainted: G        W          6.1.0-a0a6c76cf2a5+ #1
[   34.127407] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   34.128232] RIP: 0010:batch_unpin.isra.23+0x151/0x1a0
[   34.128613] Code: e8 c4 be 2b ff 48 8b 45 d0 48 85 c0 75 17 e8 26 bd 2b ff 48 8b 7d c8 48 89 de e8 fa bd 2b ff 48 39 5d c8 73 07 e8 0f bd 2b ff <0f> 0b e8 08 bd 2b ff 4d 29 e5 31 ff 41 83 c6 01 4c 89 ee 31 db e8
[   34.130251] RSP: 0018:ffffc900011a39d8 EFLAGS: 00010246
[   34.130858] RAX: 0000000000000000 RBX: ffffffffffffffff RCX: ffffffff81fded8c
[   34.131544] RDX: 0000000000000000 RSI: ffff88801235d300 RDI: 0000000000000002
[   34.132061] RBP: ffffc900011a3a20 R08: 0000000000000000 R09: ffff88807dd3b890
[   34.132598] R10: 0000000000000efb R11: 0000000000000000 R12: 0000000000000001
[   34.133154] R13: 0000000000000001 R14: 0000000000000000 R15: ffff888005ec9c00
[   34.133866] FS:  0000000000000000(0000) GS:ffff88807dd00000(0000) knlGS:0000000000000000
[   34.134448] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   34.134898] CR2: 00007f3777cf0500 CR3: 0000000013558004 CR4: 0000000000770ee0
[   34.135425] PKRU: 55555554
[   34.135630] Call Trace:
[   34.135829]  <TASK>
[   34.136010]  iopt_pages_unfill_xarray+0x39f/0x5c0
[   34.136403]  ? write_comp_data+0x2f/0x90
[   34.136754]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   34.137318]  ? write_comp_data+0x2f/0x90
[   34.137804]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   34.138307]  ? interval_tree_remove+0x291/0x4e0
[   34.138671]  ? write_comp_data+0x2f/0x90
[   34.138984]  iopt_area_remove_access+0x108/0x120
[   34.139358]  iommufd_access_unpin_pages+0x177/0x210
[   34.139750]  iommufd_test_access_unmap+0xe0/0x130
[   34.140123]  ? iommufd_test_access_unmap+0x130/0x130
[   34.140505]  iommufd_test_staccess_release+0x39/0x60
[   34.140926]  __fput+0x11f/0x450
[   34.141341]  ____fput+0x1e/0x30
[   34.141755]  task_work_run+0xb6/0x120
[   34.142224]  do_exit+0x521/0x1340
[   34.142519]  ? lockdep_hardirqs_on+0x8a/0x110
[   34.142853]  ? trace_hardirqs_on+0x3f/0x100
[   34.143176]  do_group_exit+0x5e/0xf0
[   34.143468]  __x64_sys_exit_group+0x25/0x30
[   34.143789]  do_syscall_64+0x3b/0x90
[   34.144067]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   34.144460] RIP: 0033:0x7f3777be6cf6
[   34.144774] Code: Unable to access opcode bytes at 0x7f3777be6ccc.
[   34.145475] RSP: 002b:00007ffd0d7278d8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
[   34.146250] RAX: ffffffffffffffda RBX: 00007f3777cf1490 RCX: 00007f3777be6cf6
[   34.146780] RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
[   34.147300] RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffff80
[   34.147834] R10: 0000000000000004 R11: 0000000000000246 R12: 00007f3777cf1490
[   34.148342] R13: 0000000000000001 R14: 00007f3777cf4e88 R15: 0000000000000000
[   34.148928]  </TASK>
[   34.149219] irq event stamp: 21865
[   34.149633] hardirqs last  enabled at (21873): [<ffffffff811b7f21>] __up_console_sem+0x91/0xb0
[   34.150366] hardirqs last disabled at (21880): [<ffffffff811b7f06>] __up_console_sem+0x76/0xb0
[   34.151010] softirqs last  enabled at (21496): [<ffffffff83000329>] __do_softirq+0x329/0x490
[   34.151614] softirqs last disabled at (20923): [<ffffffff81111082>] irq_exit_rcu+0xd2/0x100
[   34.152228] ---[ end trace 0000000000000000 ]---
[   34.152704] ------------[ cut here ]------------
[   34.153234] WARNING: CPU: 1 PID: 644 at drivers/iommu/iommufd/pages.c:886 update_unpinned+0x75/0x80
[   34.153989] Modules linked in:
[   34.154243] CPU: 1 PID: 644 Comm: repro Tainted: G        W          6.1.0-a0a6c76cf2a5+ #1
[   34.154848] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   34.155677] RIP: 0010:update_unpinned+0x75/0x80
[   34.156021] Code: ac 2b ff 48 89 de 31 c9 31 d2 4c 29 e6 4c 89 ef e8 70 fb ff ff e8 bb ac 2b ff 5b 41 5c 41 5d 5d c3 cc cc cc cc e8 ab ac 2b ff <0f> 0b eb e7 0f 1f 80 00 00 00 00 0f 1f 44 00 00 55 48 89 e5 41 57
[   34.157382] RSP: 0018:ffffc900011a3a08 EFLAGS: 00010246
[   34.157999] RAX: 0000000000000000 RBX: 0000000000000000 RCX: ffffffff81fdfdcf
[   34.158655] RDX: 0000000000000000 RSI: ffff88801235d300 RDI: 0000000000000002
[   34.159162] RBP: ffffc900011a3a20 R08: 0000000000000000 R09: ffff88807dd3b890
[   34.159698] R10: 0000000000000efb R11: 0000000000000000 R12: ffffffffffffffff
[   34.160209] R13: ffff888005ec9c00 R14: 0000000000000002 R15: 0000000000000002
[   34.160780] FS:  0000000000000000(0000) GS:ffff88807dd00000(0000) knlGS:0000000000000000
[   34.161603] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   34.162056] CR2: 00007f3777cf0500 CR3: 0000000013558004 CR4: 0000000000770ee0
[   34.162581] PKRU: 55555554
[   34.162809] Call Trace:
[   34.163004]  <TASK>
[   34.163178]  iopt_pages_unfill_xarray+0x522/0x5c0
[   34.163582]  ? write_comp_data+0x2f/0x90
[   34.163911]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   34.164272]  ? write_comp_data+0x2f/0x90
[   34.164575]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   34.164988]  ? interval_tree_remove+0x291/0x4e0
[   34.165544]  ? write_comp_data+0x2f/0x90
[   34.166039]  iopt_area_remove_access+0x108/0x120
[   34.166619]  iommufd_access_unpin_pages+0x177/0x210
[   34.167025]  iommufd_test_access_unmap+0xe0/0x130
[   34.167389]  ? iommufd_test_access_unmap+0x130/0x130
[   34.167767]  iommufd_test_staccess_release+0x39/0x60
[   34.168156]  __fput+0x11f/0x450
[   34.168423]  ____fput+0x1e/0x30
[   34.168708]  task_work_run+0xb6/0x120
[   34.169180]  do_exit+0x521/0x1340
[   34.169595]  ? lockdep_hardirqs_on+0x8a/0x110
[   34.170025]  ? trace_hardirqs_on+0x3f/0x100
[   34.170368]  do_group_exit+0x5e/0xf0
[   34.170660]  __x64_sys_exit_group+0x25/0x30
[   34.170987]  do_syscall_64+0x3b/0x90
[   34.171270]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   34.171667] RIP: 0033:0x7f3777be6cf6
[   34.171941] Code: Unable to access opcode bytes at 0x7f3777be6ccc.
[   34.172396] RSP: 002b:00007ffd0d7278d8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
[   34.172991] RAX: ffffffffffffffda RBX: 00007f3777cf1490 RCX: 00007f3777be6cf6
[   34.173818] RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
[   34.174496] RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffff80
[   34.175022] R10: 0000000000000004 R11: 0000000000000246 R12: 00007f3777cf1490
[   34.175537] R13: 0000000000000001 R14: 00007f3777cf4e88 R15: 0000000000000000
[   34.176092]  </TASK>
[   34.176262] irq event stamp: 22343
[   34.176513] hardirqs last  enabled at (22351): [<ffffffff811b7f21>] __up_console_sem+0x91/0xb0
[   34.177229] hardirqs last disabled at (22360): [<ffffffff811b7f06>] __up_console_sem+0x76/0xb0
[   34.178192] softirqs last  enabled at (21496): [<ffffffff83000329>] __do_softirq+0x329/0x490
[   34.178817] softirqs last disabled at (20923): [<ffffffff81111082>] irq_exit_rcu+0xd2/0x100
[   34.179549] ---[ end trace 0000000000000000 ]---
[   34.180561] ------------[ cut here ]------------
[   34.180982] WARNING: CPU: 1 PID: 644 at drivers/iommu/iommufd/pages.c:1181 iopt_release_pages+0x159/0x190
[   34.181957] Modules linked in:
[   34.182209] CPU: 1 PID: 644 Comm: repro Tainted: G        W          6.1.0-a0a6c76cf2a5+ #1
[   34.182969] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   34.184262] RIP: 0010:iopt_release_pages+0x159/0x190
[   34.184882] Code: b5 11 ff eb cb e8 87 90 2b ff be 03 00 00 00 4c 89 f7 e8 6a 8b ce ff eb b7 e8 73 90 2b ff 0f 0b e9 ed fe ff ff e8 67 90 2b ff <0f> 0b e9 00 ff ff ff e8 5b 90 2b ff 0f 0b e9 07 ff ff ff e8 4f 90
[   34.187010] RSP: 0018:ffffc900011a3c88 EFLAGS: 00010246
[   34.187595] RAX: 0000000000000000 RBX: ffff888005ec9c00 RCX: ffffffff81fe1957
[   34.188428] RDX: 0000000000000000 RSI: ffff88801235d300 RDI: 0000000000000002
[   34.189243] RBP: ffffc900011a3ca8 R08: 000000000000001c R09: 0000000000000001
[   34.190056] R10: ffff88801235e098 R11: 0000000000000000 R12: ffffffffffffffff
[   34.190904] R13: 0000000001000000 R14: 00000000017fffff R15: 0000000000000000
[   34.191716] FS:  0000000000000000(0000) GS:ffff88807dd00000(0000) knlGS:0000000000000000
[   34.192610] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   34.193318] CR2: 00007f3777cf0500 CR3: 0000000013558004 CR4: 0000000000770ee0
[   34.194151] PKRU: 55555554
[   34.194486] Call Trace:
[   34.194786]  <TASK>
[   34.195071]  iopt_unmap_iova_range+0x1ef/0x2e0
[   34.195680]  iopt_unmap_all+0x2f/0x60
[   34.196129]  iommufd_ioas_destroy+0x2c/0x70
[   34.196679]  iommufd_fops_release+0xd4/0x170
[   34.197204]  ? iommufd_ctx_get+0x30/0x30
[   34.197694]  __fput+0x11f/0x450
[   34.198135]  ____fput+0x1e/0x30
[   34.198524]  task_work_run+0xb6/0x120
[   34.198990]  do_exit+0x521/0x1340
[   34.199401]  ? lockdep_hardirqs_on+0x8a/0x110
[   34.199929]  ? trace_hardirqs_on+0x3f/0x100
[   34.200469]  do_group_exit+0x5e/0xf0
[   34.200942]  __x64_sys_exit_group+0x25/0x30
[   34.201508]  do_syscall_64+0x3b/0x90
[   34.201937]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   34.202539] RIP: 0033:0x7f3777be6cf6
[   34.203012] Code: Unable to access opcode bytes at 0x7f3777be6ccc.
[   34.203710] RSP: 002b:00007ffd0d7278d8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
[   34.204580] RAX: ffffffffffffffda RBX: 00007f3777cf1490 RCX: 00007f3777be6cf6
[   34.205457] RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
[   34.206318] RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffff80
[   34.207119] R10: 0000000000000004 R11: 0000000000000246 R12: 00007f3777cf1490
[   34.207991] R13: 0000000000000001 R14: 00007f3777cf4e88 R15: 0000000000000000
[   34.208874]  </TASK>
[   34.209156] irq event stamp: 22847
[   34.209570] hardirqs last  enabled at (22855): [<ffffffff811b7f21>] __up_console_sem+0x91/0xb0
[   34.210626] hardirqs last disabled at (22862): [<ffffffff811b7f06>] __up_console_sem+0x76/0xb0
[   34.211639] softirqs last  enabled at (22524): [<ffffffff83000329>] __do_softirq+0x329/0x490
[   34.212646] softirqs last disabled at (22519): [<ffffffff81111082>] irq_exit_rcu+0xd2/0x100
[   34.213651] ---[ end trace 0000000000000000 ]---
[   34.861727] ------------[ cut here ]------------
[   34.862101] WARNING: CPU: 1 PID: 662 at drivers/iommu/iommufd/pages.c:178 batch_unpin.isra.23+0x151/0x1a0
[   34.862816] Modules linked in:
[   34.863049] CPU: 1 PID: 662 Comm: repro Tainted: G        W          6.1.0-a0a6c76cf2a5+ #1
[   34.863671] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   34.864479] RIP: 0010:batch_unpin.isra.23+0x151/0x1a0
[   34.864909] Code: e8 c4 be 2b ff 48 8b 45 d0 48 85 c0 75 17 e8 26 bd 2b ff 48 8b 7d c8 48 89 de e8 fa bd 2b ff 48 39 5d c8 73 07 e8 0f bd 2b ff <0f> 0b e8 08 bd 2b ff 4d 29 e5 31 ff 41 83 c6 01 4c 89 ee 31 db e8
[   34.866619] RSP: 0018:ffffc90001233a88 EFLAGS: 00010246
[   34.867017] RAX: 0000000000000000 RBX: ffffffffffffffff RCX: ffffffff81fded8c
[   34.867551] RDX: 0000000000000000 RSI: ffff88801235d300 RDI: 0000000000000002
[   34.868067] RBP: ffffc90001233ad0 R08: 000000000003b5c5 R09: 000000000000000b
[   34.868605] R10: 000000000003b5a0 R11: 0000000000000024 R12: 0000000000000002
[   34.869173] R13: 0000000000000002 R14: 0000000000038000 R15: ffff888005ec9c00
[   34.870001] FS:  00007f3777af9740(0000) GS:ffff88807dd00000(0000) knlGS:0000000000000000
[   34.870597] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   34.871011] CR2: 00007f3777c1e580 CR3: 000000000c9aa003 CR4: 0000000000770ee0
[   34.871537] PKRU: 55555554
[   34.871755] Call Trace:
[   34.871945]  <TASK>
[   34.872137]  __iopt_area_unfill_domain+0x257/0x560
[   34.872534]  ? __this_cpu_preempt_check+0x20/0x30
[   34.872949]  ? lock_is_held_type+0xe6/0x140
[   34.873446]  ? rcu_read_lock_sched_held+0x57/0x80
[   34.873998]  ? __mutex_lock+0x13a/0xf30
[   34.874419]  ? write_comp_data+0x2f/0x90
[   34.874725]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   34.875089]  iopt_area_unfill_domain+0x32/0x40
[   34.875450]  iopt_table_remove_domain+0x23f/0x4c0
[   34.875814]  iommufd_device_selftest_detach+0x3a/0x90
[   34.876210]  iommufd_selftest_destroy+0x55/0x70
[   34.876577]  iommufd_object_destroy_user+0xce/0x130
[   34.877002]  iommufd_destroy+0xa2/0xc0
[   34.877481]  iommufd_fops_ioctl+0x1ef/0x310
[   34.878017]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   34.878485]  ? write_comp_data+0x2f/0x90
[   34.878794]  __x64_sys_ioctl+0x10e/0x160
[   34.879099]  ? iommufd_get_object.part.6+0x1c0/0x1c0
[   34.879497]  do_syscall_64+0x3b/0x90
[   34.879780]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   34.880162] RIP: 0033:0x7f3777c1e59d
[   34.880457] Code: 00 c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d d3 08 0d 00 f7 d8 64 89 01 48
[   34.881826] RSP: 002b:00007ffd0d727918 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   34.882712] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f3777c1e59d
[   34.883333] RDX: 0000000020000140 RSI: 0000000000003b80 RDI: 0000000000000003
[   34.883848] RBP: 00007ffd0d727930 R08: 00007ffd0d727930 R09: 00007ffd0d727930
[   34.884377] R10: 00007ffd0d727930 R11: 0000000000000213 R12: 0000000000401180
[   34.884935] R13: 00007ffd0d727a50 R14: 0000000000000000 R15: 0000000000000000
[   34.885669]  </TASK>
[   34.885844] irq event stamp: 14795
[   34.886101] hardirqs last  enabled at (14803): [<ffffffff811b7f21>] __up_console_sem+0x91/0xb0
[   34.886758] hardirqs last disabled at (14810): [<ffffffff811b7f06>] __up_console_sem+0x76/0xb0
[   34.887383] softirqs last  enabled at (14564): [<ffffffff83000329>] __do_softirq+0x329/0x490
[   34.888016] softirqs last disabled at (14559): [<ffffffff81111082>] irq_exit_rcu+0xd2/0x100
[   34.888624] ---[ end trace 0000000000000000 ]---
[   34.889173] ------------[ cut here ]------------
[   34.889713] WARNING: CPU: 1 PID: 662 at drivers/iommu/iommufd/pages.c:294 __iopt_area_unfill_domain+0x152/0x560
[   34.890636] Modules linked in:
[   34.890874] CPU: 1 PID: 662 Comm: repro Tainted: G        W          6.1.0-a0a6c76cf2a5+ #1
[   34.891500] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   34.892352] RIP: 0010:__iopt_area_unfill_domain+0x152/0x560
[   34.892814] Code: a1 2b ff 44 8b 64 24 54 48 8b 44 24 48 31 ff 44 89 e6 48 89 44 24 38 e8 6c a2 2b ff 45 85 e4 0f 85 eb 01 00 00 e8 ee a0 2b ff <0f> 0b e8 e7 a0 2b ff 48 8b 44 24 38 89 5c 24 58 89 18 8b 44 24 54
[   34.894395] RSP: 0018:ffffc90001233ae0 EFLAGS: 00010246
[   34.894809] RAX: 0000000000000000 RBX: 00000000fffffffe RCX: ffffffff81fe0bd5
[   34.895322] RDX: 0000000000000000 RSI: ffff88801235d300 RDI: 0000000000000002
[   34.895849] RBP: ffffc90001233d10 R08: 000000000003b5c5 R09: 000000000000000b
[   34.896367] R10: 000000000003b5a0 R11: 0000000000000024 R12: 0000000000000001
[   34.896923] R13: 0000000000000802 R14: 00000000000007ff R15: 0000000000000800
[   34.897735] FS:  00007f3777af9740(0000) GS:ffff88807dd00000(0000) knlGS:0000000000000000
[   34.898334] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   34.898764] CR2: 00007f3777c1e580 CR3: 000000000c9aa003 CR4: 0000000000770ee0
[   34.899296] PKRU: 55555554
[   34.899502] Call Trace:
[   34.899686]  <TASK>
[   34.899901]  ? __this_cpu_preempt_check+0x20/0x30
[   34.900284]  ? lock_is_held_type+0xe6/0x140
[   34.900617]  ? rcu_read_lock_sched_held+0x57/0x80
[   34.901042]  ? __mutex_lock+0x13a/0xf30
[   34.901507]  ? write_comp_data+0x2f/0x90
[   34.901986]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   34.902576]  iopt_area_unfill_domain+0x32/0x40
[   34.902914]  iopt_table_remove_domain+0x23f/0x4c0
[   34.903292]  iommufd_device_selftest_detach+0x3a/0x90
[   34.903683]  iommufd_selftest_destroy+0x55/0x70
[   34.904044]  iommufd_object_destroy_user+0xce/0x130
[   34.904421]  iommufd_destroy+0xa2/0xc0
[   34.904750]  iommufd_fops_ioctl+0x1ef/0x310
[   34.905272]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   34.905821]  ? write_comp_data+0x2f/0x90
[   34.906130]  __x64_sys_ioctl+0x10e/0x160
[   34.906456]  ? iommufd_get_object.part.6+0x1c0/0x1c0
[   34.906849]  do_syscall_64+0x3b/0x90
[   34.907131]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   34.907523] RIP: 0033:0x7f3777c1e59d
[   34.907806] Code: 00 c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d d3 08 0d 00 f7 d8 64 89 01 48
[   34.909187] RSP: 002b:00007ffd0d727918 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   34.910114] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f3777c1e59d
[   34.910734] RDX: 0000000020000140 RSI: 0000000000003b80 RDI: 0000000000000003
[   34.911251] RBP: 00007ffd0d727930 R08: 00007ffd0d727930 R09: 00007ffd0d727930
[   34.911789] R10: 00007ffd0d727930 R11: 0000000000000213 R12: 0000000000401180
[   34.912308] R13: 00007ffd0d727a50 R14: 0000000000000000 R15: 0000000000000000
[   34.912906]  </TASK>
[   34.913181] irq event stamp: 15261
[   34.913573] hardirqs last  enabled at (15269): [<ffffffff811b7f21>] __up_console_sem+0x91/0xb0
[   34.914286] hardirqs last disabled at (15276): [<ffffffff811b7f06>] __up_console_sem+0x76/0xb0
[   34.914896] softirqs last  enabled at (15194): [<ffffffff83000329>] __do_softirq+0x329/0x490
[   34.915527] softirqs last disabled at (15185): [<ffffffff81111082>] irq_exit_rcu+0xd2/0x100
[   34.916148] ---[ end trace 0000000000000000 ]---
[   34.916599] ------------[ cut here ]------------
[   34.916982] WARNING: CPU: 1 PID: 662 at drivers/iommu/iommufd/pages.c:1290 __iopt_area_unfill_domain+0x54f/0x560
[   34.918015] Modules linked in:
[   34.918263] CPU: 1 PID: 662 Comm: repro Tainted: G        W          6.1.0-a0a6c76cf2a5+ #1
[   34.918874] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   34.919700] RIP: 0010:__iopt_area_unfill_domain+0x54f/0x560
[   34.920118] Code: e8 86 9e 2b ff 85 db 0f 85 35 fb ff ff e8 09 9d 2b ff 0f 0b e9 29 fb ff ff e8 fd 9c 2b ff 0f 0b e9 69 fe ff ff e8 f1 9c 2b ff <0f> 0b e9 58 ff ff ff e8 65 2d dc 00 0f 1f 44 00 00 0f 1f 44 00 00
[   34.921496] RSP: 0018:ffffc90001233ae0 EFLAGS: 00010246
[   34.922132] RAX: 0000000000000000 RBX: 00000000fffffffe RCX: ffffffff81fe0d26
[   34.922763] RDX: 0000000000000000 RSI: ffff88801235d300 RDI: 0000000000000002
[   34.923280] RBP: ffffc90001233d10 R08: 000000000003b5c5 R09: 000000000000000b
[   34.923806] R10: 000000000003b5a0 R11: 0000000000000024 R12: 00000000000007ff
[   34.924321] R13: 0000000000000802 R14: 00000000000007ff R15: 0000000000000800
[   34.924887] FS:  00007f3777af9740(0000) GS:ffff88807dd00000(0000) knlGS:0000000000000000
[   34.925738] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   34.926168] CR2: 00007f3777c1e580 CR3: 000000000c9aa003 CR4: 0000000000770ee0
[   34.926691] PKRU: 55555554
[   34.926917] Call Trace:
[   34.927109]  <TASK>
[   34.927305]  ? __this_cpu_preempt_check+0x20/0x30
[   34.927674]  ? lock_is_held_type+0xe6/0x140
[   34.928021]  ? rcu_read_lock_sched_held+0x57/0x80
[   34.928385]  ? __mutex_lock+0x13a/0xf30
[   34.928716]  ? write_comp_data+0x2f/0x90
[   34.929195]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   34.929790]  iopt_area_unfill_domain+0x32/0x40
[   34.930312]  iopt_table_remove_domain+0x23f/0x4c0
[   34.930670]  iommufd_device_selftest_detach+0x3a/0x90
[   34.931046]  iommufd_selftest_destroy+0x55/0x70
[   34.931406]  iommufd_object_destroy_user+0xce/0x130
[   34.931779]  iommufd_destroy+0xa2/0xc0
[   34.932069]  iommufd_fops_ioctl+0x1ef/0x310
[   34.932413]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   34.932823]  ? write_comp_data+0x2f/0x90
[   34.933337]  __x64_sys_ioctl+0x10e/0x160
[   34.933846]  ? iommufd_get_object.part.6+0x1c0/0x1c0
[   34.934353]  do_syscall_64+0x3b/0x90
[   34.934648]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   34.935033] RIP: 0033:0x7f3777c1e59d
[   34.935308] Code: 00 c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d d3 08 0d 00 f7 d8 64 89 01 48
[   34.936650] RSP: 002b:00007ffd0d727918 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   34.937537] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f3777c1e59d
[   34.938061] RDX: 0000000020000140 RSI: 0000000000003b80 RDI: 0000000000000003
[   34.938603] RBP: 00007ffd0d727930 R08: 00007ffd0d727930 R09: 00007ffd0d727930
[   34.939121] R10: 00007ffd0d727930 R11: 0000000000000213 R12: 0000000000401180
[   34.939635] R13: 00007ffd0d727a50 R14: 0000000000000000 R15: 0000000000000000
[   34.940181]  </TASK>
[   34.940356] irq event stamp: 15731
[   34.940612] hardirqs last  enabled at (15739): [<ffffffff811b7f21>] __up_console_sem+0x91/0xb0
[   34.941337] hardirqs last disabled at (15806): [<ffffffff811b7f06>] __up_console_sem+0x76/0xb0
[   34.942358] softirqs last  enabled at (15804): [<ffffffff83000329>] __do_softirq+0x329/0x490
[   34.943093] softirqs last disabled at (15747): [<ffffffff81111082>] irq_exit_rcu+0xd2/0x100
[   34.943703] ---[ end trace 0000000000000000 ]---
[   34.944163] ------------[ cut here ]------------
[   34.944506] WARNING: CPU: 1 PID: 662 at drivers/iommu/iommufd/pages.c:886 update_unpinned+0x75/0x80
[   34.945219] Modules linked in:
[   34.945601] CPU: 1 PID: 662 Comm: repro Tainted: G        W          6.1.0-a0a6c76cf2a5+ #1
[   34.946378] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   34.947224] RIP: 0010:update_unpinned+0x75/0x80
[   34.947577] Code: ac 2b ff 48 89 de 31 c9 31 d2 4c 29 e6 4c 89 ef e8 70 fb ff ff e8 bb ac 2b ff 5b 41 5c 41 5d 5d c3 cc cc cc cc e8 ab ac 2b ff <0f> 0b eb e7 0f 1f 80 00 00 00 00 0f 1f 44 00 00 55 48 89 e5 41 57
[   34.948949] RSP: 0018:ffffc90001233ab8 EFLAGS: 00010246
[   34.949544] RAX: 0000000000000000 RBX: 0000000000000800 RCX: ffffffff81fdfdcf
[   34.950073] RDX: 0000000000000000 RSI: ffff88801235d300 RDI: 0000000000000002
[   34.950621] RBP: ffffc90001233ad0 R08: 0000000000000000 R09: ffff88807dd3b920
[   34.951135] R10: 0000000000000829 R11: 0000000000000009 R12: ffffffffffffffff
[   34.951682] R13: ffff888005ec9c00 R14: 00000000000007ff R15: 0000000000000800
[   34.952196] FS:  00007f3777af9740(0000) GS:ffff88807dd00000(0000) knlGS:0000000000000000
[   34.952835] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   34.953522] CR2: 00007f3777c1e580 CR3: 000000000c9aa003 CR4: 0000000000770ee0
[   34.954203] PKRU: 55555554
[   34.954419] Call Trace:
[   34.954626]  <TASK>
[   34.954827]  __iopt_area_unfill_domain+0x4e1/0x560
[   34.955240]  ? __this_cpu_preempt_check+0x20/0x30
[   34.955616]  ? lock_is_held_type+0xe6/0x140
[   34.955962]  ? rcu_read_lock_sched_held+0x57/0x80
[   34.956325]  ? __mutex_lock+0x13a/0xf30
[   34.956627]  ? write_comp_data+0x2f/0x90
[   34.956999]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   34.957599]  iopt_area_unfill_domain+0x32/0x40
[   34.958145]  iopt_table_remove_domain+0x23f/0x4c0
[   34.958669]  iommufd_device_selftest_detach+0x3a/0x90
[   34.959087]  iommufd_selftest_destroy+0x55/0x70
[   34.959434]  iommufd_object_destroy_user+0xce/0x130
[   34.959817]  iommufd_destroy+0xa2/0xc0
[   34.960124]  iommufd_fops_ioctl+0x1ef/0x310
[   34.960452]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   34.960843]  ? write_comp_data+0x2f/0x90
[   34.961346]  __x64_sys_ioctl+0x10e/0x160
[   34.961824]  ? iommufd_get_object.part.6+0x1c0/0x1c0
[   34.962281]  do_syscall_64+0x3b/0x90
[   34.962577]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   34.962963] RIP: 0033:0x7f3777c1e59d
[   34.963241] Code: 00 c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d d3 08 0d 00 f7 d8 64 89 01 48
[   34.964577] RSP: 002b:00007ffd0d727918 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   34.965171] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f3777c1e59d
[   34.966006] RDX: 0000000020000140 RSI: 0000000000003b80 RDI: 0000000000000003
[   34.966554] RBP: 00007ffd0d727930 R08: 00007ffd0d727930 R09: 00007ffd0d727930
[   34.967075] R10: 00007ffd0d727930 R11: 0000000000000213 R12: 0000000000401180
[   34.967627] R13: 00007ffd0d727a50 R14: 0000000000000000 R15: 0000000000000000
[   34.968158]  </TASK>
[   34.968332] irq event stamp: 16255
[   34.968592] hardirqs last  enabled at (16263): [<ffffffff811b7f21>] __up_console_sem+0x91/0xb0
[   34.969261] hardirqs last disabled at (16272): [<ffffffff811b7f06>] __up_console_sem+0x76/0xb0
[   34.970298] softirqs last  enabled at (15804): [<ffffffff83000329>] __do_softirq+0x329/0x490
[   34.970934] softirqs last disabled at (15747): [<ffffffff81111082>] irq_exit_rcu+0xd2/0x100
[   34.971543] ---[ end trace 0000000000000000 ]---
[   34.976483] ------------[ cut here ]------------
[   34.976900] WARNING: CPU: 1 PID: 662 at drivers/iommu/iommufd/pages.c:178 batch_unpin.isra.23+0x151/0x1a0
[   34.977618] Modules linked in:
[   34.977856] CPU: 1 PID: 662 Comm: repro Tainted: G        W          6.1.0-a0a6c76cf2a5+ #1
[   34.978496] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   34.979312] RIP: 0010:batch_unpin.isra.23+0x151/0x1a0
[   34.979711] Code: e8 c4 be 2b ff 48 8b 45 d0 48 85 c0 75 17 e8 26 bd 2b ff 48 8b 7d c8 48 89 de e8 fa bd 2b ff 48 39 5d c8 73 07 e8 0f bd 2b ff <0f> 0b e8 08 bd 2b ff 4d 29 e5 31 ff 41 83 c6 01 4c 89 ee 31 db e8
[   34.981081] RSP: 0018:ffffc900012339d8 EFLAGS: 00010246
[   34.981688] RAX: 0000000000000000 RBX: fffffffffffffffe RCX: ffffffff81fdeda6
[   34.982470] RDX: 0000000000000000 RSI: ffff88801235d300 RDI: 0000000000000002
[   34.983012] RBP: ffffc90001233a20 R08: 0000000000000000 R09: ffff88807dd3b890
[   34.983531] R10: 000000000000102c R11: 0000000000000000 R12: 0000000000000001
[   34.984060] R13: 0000000000000001 R14: 0000000000000000 R15: ffff888005ec9c00
[   34.984575] FS:  0000000000000000(0000) GS:ffff88807dd00000(0000) knlGS:0000000000000000
[   34.985225] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   34.985881] CR2: 00007f3777cf0500 CR3: 0000000003c12004 CR4: 0000000000770ee0
[   34.986514] PKRU: 55555554
[   34.986721] Call Trace:
[   34.986908]  <TASK>
[   34.987100]  iopt_pages_unfill_xarray+0x39f/0x5c0
[   34.987495]  ? write_comp_data+0x2f/0x90
[   34.987813]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   34.988194]  ? write_comp_data+0x2f/0x90
[   34.988501]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   34.988898]  ? interval_tree_remove+0x291/0x4e0
[   34.989474]  ? write_comp_data+0x2f/0x90
[   34.989980]  iopt_area_remove_access+0x108/0x120
[   34.990453]  iommufd_access_unpin_pages+0x177/0x210
[   34.990849]  iommufd_test_access_unmap+0xe0/0x130
[   34.991215]  ? iommufd_test_access_unmap+0x130/0x130
[   34.991614]  iommufd_test_staccess_release+0x39/0x60
[   34.991998]  __fput+0x11f/0x450
[   34.992256]  ____fput+0x1e/0x30
[   34.992522]  task_work_run+0xb6/0x120
[   34.992871]  do_exit+0x521/0x1340
[   34.993297]  ? lockdep_hardirqs_on+0x8a/0x110
[   34.993856]  ? trace_hardirqs_on+0x3f/0x100
[   34.994295]  do_group_exit+0x5e/0xf0
[   34.994606]  __x64_sys_exit_group+0x25/0x30
[   34.994925]  do_syscall_64+0x3b/0x90
[   34.995205]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   34.995597] RIP: 0033:0x7f3777be6cf6
[   34.995874] Code: Unable to access opcode bytes at 0x7f3777be6ccc.
[   34.996322] RSP: 002b:00007ffd0d7278d8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
[   34.996907] RAX: ffffffffffffffda RBX: 00007f3777cf1490 RCX: 00007f3777be6cf6
[   34.997691] RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
[   34.998341] RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffff80
[   34.998891] R10: 0000000000000004 R11: 0000000000000246 R12: 00007f3777cf1490
[   34.999418] R13: 0000000000000001 R14: 00007f3777cf4e88 R15: 0000000000000000
[   34.999965]  </TASK>
[   35.000140] irq event stamp: 22153
[   35.000393] hardirqs last  enabled at (22161): [<ffffffff811b7f21>] __up_console_sem+0x91/0xb0
[   35.001049] hardirqs last disabled at (22170): [<ffffffff811b7f06>] __up_console_sem+0x76/0xb0
[   35.001999] softirqs last  enabled at (22014): [<ffffffff83000329>] __do_softirq+0x329/0x490
[   35.002657] softirqs last disabled at (22009): [<ffffffff81111082>] irq_exit_rcu+0xd2/0x100
[   35.003283] ---[ end trace 0000000000000000 ]---
[   35.003733] ------------[ cut here ]------------
[   35.004071] WARNING: CPU: 1 PID: 662 at drivers/iommu/iommufd/pages.c:886 update_unpinned+0x75/0x80
[   35.004777] Modules linked in:
[   35.005163] CPU: 1 PID: 662 Comm: repro Tainted: G        W          6.1.0-a0a6c76cf2a5+ #1
[   35.005991] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   35.006780] RIP: 0010:update_unpinned+0x75/0x80
[   35.007111] Code: ac 2b ff 48 89 de 31 c9 31 d2 4c 29 e6 4c 89 ef e8 70 fb ff ff e8 bb ac 2b ff 5b 41 5c 41 5d 5d c3 cc cc cc cc e8 ab ac 2b ff <0f> 0b eb e7 0f 1f 80 00 00 00 00 0f 1f 44 00 00 55 48 89 e5 41 57
[   35.008413] RSP: 0018:ffffc90001233a08 EFLAGS: 00010246
[   35.008861] RAX: 0000000000000000 RBX: 0000000000000800 RCX: ffffffff81fdfdcf
[   35.009655] RDX: 0000000000000000 RSI: ffff88801235d300 RDI: 0000000000000002
[   35.010173] RBP: ffffc90001233a20 R08: 0000000000000000 R09: ffff88807dd3b890
[   35.010721] R10: 000000000000102c R11: 0000000000000000 R12: fffffffffffffffe
[   35.011232] R13: ffff888005ec9c00 R14: 0000000000000002 R15: 0000000000000002
[   35.011775] FS:  0000000000000000(0000) GS:ffff88807dd00000(0000) knlGS:0000000000000000
[   35.012356] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   35.012831] CR2: 00007f3777cf0500 CR3: 0000000003c12004 CR4: 0000000000770ee0
[   35.013647] PKRU: 55555554
[   35.013944] Call Trace:
[   35.014141]  <TASK>
[   35.014313]  iopt_pages_unfill_xarray+0x522/0x5c0
[   35.014764]  ? write_comp_data+0x2f/0x90
[   35.015113]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   35.015480]  ? write_comp_data+0x2f/0x90
[   35.015794]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   35.016219]  ? interval_tree_remove+0x291/0x4e0
[   35.016581]  ? write_comp_data+0x2f/0x90
[   35.016920]  iopt_area_remove_access+0x108/0x120
[   35.017283]  iommufd_access_unpin_pages+0x177/0x210
[   35.017675]  iommufd_test_access_unmap+0xe0/0x130
[   35.018042]  ? iommufd_test_access_unmap+0x130/0x130
[   35.018418]  iommufd_test_staccess_release+0x39/0x60
[   35.018801]  __fput+0x11f/0x450
[   35.019062]  ____fput+0x1e/0x30
[   35.019316]  task_work_run+0xb6/0x120
[   35.019622]  do_exit+0x521/0x1340
[   35.019880]  ? lockdep_hardirqs_on+0x8a/0x110
[   35.020228]  ? trace_hardirqs_on+0x3f/0x100
[   35.020557]  do_group_exit+0x5e/0xf0
[   35.020863]  __x64_sys_exit_group+0x25/0x30
[   35.021180]  do_syscall_64+0x3b/0x90
[   35.021458]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   35.021829] RIP: 0033:0x7f3777be6cf6
[   35.022095] Code: Unable to access opcode bytes at 0x7f3777be6ccc.
[   35.022544] RSP: 002b:00007ffd0d7278d8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
[   35.023087] RAX: ffffffffffffffda RBX: 00007f3777cf1490 RCX: 00007f3777be6cf6
[   35.023594] RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
[   35.024104] RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffff80
[   35.024611] R10: 0000000000000004 R11: 0000000000000246 R12: 00007f3777cf1490
[   35.025142] R13: 0000000000000001 R14: 00007f3777cf4e88 R15: 0000000000000000
[   35.025670]  </TASK>
[   35.025843] irq event stamp: 22643
[   35.026098] hardirqs last  enabled at (22651): [<ffffffff811b7f21>] __up_console_sem+0x91/0xb0
[   35.026733] hardirqs last disabled at (22658): [<ffffffff811b7f06>] __up_console_sem+0x76/0xb0
[   35.027386] softirqs last  enabled at (22348): [<ffffffff83000329>] __do_softirq+0x329/0x490
[   35.028012] softirqs last disabled at (22339): [<ffffffff81111082>] irq_exit_rcu+0xd2/0x100
[   35.028609] ---[ end trace 0000000000000000 ]---
[   35.029136] ------------[ cut here ]------------
[   35.029476] WARNING: CPU: 1 PID: 662 at drivers/iommu/iommufd/pages.c:1181 iopt_release_pages+0x159/0x190
[   35.030170] Modules linked in:
[   35.030415] CPU: 1 PID: 662 Comm: repro Tainted: G        W          6.1.0-a0a6c76cf2a5+ #1
[   35.031028] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   35.031841] RIP: 0010:iopt_release_pages+0x159/0x190
[   35.032223] Code: b5 11 ff eb cb e8 87 90 2b ff be 03 00 00 00 4c 89 f7 e8 6a 8b ce ff eb b7 e8 73 90 2b ff 0f 0b e9 ed fe ff ff e8 67 90 2b ff <0f> 0b e9 00 ff ff ff e8 5b 90 2b ff 0f 0b e9 07 ff ff ff e8 4f 90
[   35.033599] RSP: 0018:ffffc90001233c88 EFLAGS: 00010246
[   35.033984] RAX: 0000000000000000 RBX: ffff888005ec9c00 RCX: ffffffff81fe1957
[   35.034509] RDX: 0000000000000000 RSI: ffff88801235d300 RDI: 0000000000000002
[   35.035030] RBP: ffffc90001233ca8 R08: 000000000000001c R09: 0000000000000001
[   35.035546] R10: ffff88801235e098 R11: 0000000000000000 R12: fffffffffffffffe
[   35.036062] R13: 0000000001000000 R14: 00000000017fffff R15: 0000000000000000
[   35.036577] FS:  0000000000000000(0000) GS:ffff88807dd00000(0000) knlGS:0000000000000000
[   35.037190] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   35.037623] CR2: 00007f3777cf0500 CR3: 0000000003c12004 CR4: 0000000000770ee0
[   35.038146] PKRU: 55555554
[   35.038356] Call Trace:
[   35.038555]  <TASK>
[   35.038726]  iopt_unmap_iova_range+0x1ef/0x2e0
[   35.039073]  iopt_unmap_all+0x2f/0x60
[   35.039363]  iommufd_ioas_destroy+0x2c/0x70
[   35.039687]  iommufd_fops_release+0xd4/0x170
[   35.040025]  ? iommufd_ctx_get+0x30/0x30
[   35.040328]  __fput+0x11f/0x450
[   35.040601]  ____fput+0x1e/0x30
[   35.040870]  task_work_run+0xb6/0x120
[   35.041175]  do_exit+0x521/0x1340
[   35.041438]  ? lockdep_hardirqs_on+0x8a/0x110
[   35.041779]  ? trace_hardirqs_on+0x3f/0x100
[   35.042108]  do_group_exit+0x5e/0xf0
[   35.042390]  __x64_sys_exit_group+0x25/0x30
[   35.042713]  do_syscall_64+0x3b/0x90
[   35.042995]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   35.043381] RIP: 0033:0x7f3777be6cf6
[   35.043657] Code: Unable to access opcode bytes at 0x7f3777be6ccc.
[   35.044110] RSP: 002b:00007ffd0d7278d8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
[   35.044679] RAX: ffffffffffffffda RBX: 00007f3777cf1490 RCX: 00007f3777be6cf6
[   35.045203] RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
[   35.045718] RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffff80
[   35.046234] R10: 0000000000000004 R11: 0000000000000246 R12: 00007f3777cf1490
[   35.046754] R13: 0000000000000001 R14: 00007f3777cf4e88 R15: 0000000000000000
[   35.047294]  </TASK>
[   35.047465] irq event stamp: 23097
[   35.047724] hardirqs last  enabled at (23105): [<ffffffff811b7f21>] __up_console_sem+0x91/0xb0
[   35.048346] hardirqs last disabled at (23112): [<ffffffff811b7f06>] __up_console_sem+0x76/0xb0
[   35.048994] softirqs last  enabled at (22348): [<ffffffff83000329>] __do_softirq+0x329/0x490
[   35.049605] softirqs last disabled at (22339): [<ffffffff81111082>] irq_exit_rcu+0xd2/0x100
[   35.050209] ---[ end trace 0000000000000000 ]---
[   35.161978] ------------[ cut here ]------------
[   35.162374] WARNING: CPU: 1 PID: 665 at drivers/iommu/iommufd/pages.c:294 __iopt_area_unfill_domain+0x152/0x560
[   35.163119] Modules linked in:
[   35.163365] CPU: 1 PID: 665 Comm: repro Tainted: G        W          6.1.0-a0a6c76cf2a5+ #1
[   35.163960] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   35.164835] RIP: 0010:__iopt_area_unfill_domain+0x152/0x560
[   35.165263] Code: a1 2b ff 44 8b 64 24 54 48 8b 44 24 48 31 ff 44 89 e6 48 89 44 24 38 e8 6c a2 2b ff 45 85 e4 0f 85 eb 01 00 00 e8 ee a0 2b ff <0f> 0b e8 e7 a0 2b ff 48 8b 44 24 38 89 5c 24 58 89 18 8b 44 24 54
[   35.166581] RSP: 0018:ffffc9000124bae0 EFLAGS: 00010246
[   35.166967] RAX: 0000000000000000 RBX: 00000000ffffffff RCX: ffffffff81fe0bd5
[   35.167670] RDX: 0000000000000000 RSI: ffff88800cb4d300 RDI: 0000000000000002
[   35.168176] RBP: ffffc9000124bd10 R08: 000000000003b5c5 R09: 0000000000000001
[   35.168763] R10: 000000000003b5a0 R11: 0000000000000024 R12: 0000000000000001
[   35.169331] R13: 0000000000000801 R14: 00000000000007ff R15: 0000000000000800
[   35.169844] FS:  00007f3777af9740(0000) GS:ffff88807dd00000(0000) knlGS:0000000000000000
[   35.170523] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   35.170943] CR2: 00007f3777c1e580 CR3: 000000000c97e001 CR4: 0000000000770ee0
[   35.171524] PKRU: 55555554
[   35.171776] Call Trace:
[   35.171962]  <TASK>
[   35.172155]  ? __this_cpu_preempt_check+0x20/0x30
[   35.172516]  ? lock_is_held_type+0xe6/0x140
[   35.172981]  ? rcu_read_lock_sched_held+0x57/0x80
[   35.173340]  ? __mutex_lock+0x13a/0xf30
[   35.173639]  ? write_comp_data+0x2f/0x90
[   35.173960]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   35.174404]  iopt_area_unfill_domain+0x32/0x40
[   35.174765]  iopt_table_remove_domain+0x23f/0x4c0
[   35.175129]  iommufd_device_selftest_detach+0x3a/0x90
[   35.175515]  iommufd_selftest_destroy+0x55/0x70
[   35.175865]  iommufd_object_destroy_user+0xce/0x130
[   35.176237]  iommufd_destroy+0xa2/0xc0
[   35.176637]  iommufd_fops_ioctl+0x1ef/0x310
[   35.176986]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   35.177348]  ? write_comp_data+0x2f/0x90
[   35.177658]  __x64_sys_ioctl+0x10e/0x160
[   35.177968]  ? iommufd_get_object.part.6+0x1c0/0x1c0
[   35.178340]  do_syscall_64+0x3b/0x90
[   35.178631]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   35.179084] RIP: 0033:0x7f3777c1e59d
[   35.179363] Code: 00 c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d d3 08 0d 00 f7 d8 64 89 01 48
[   35.180675] RSP: 002b:00007ffd0d727918 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   35.181261] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f3777c1e59d
[   35.181835] RDX: 0000000020000140 RSI: 0000000000003b80 RDI: 0000000000000003
[   35.182340] RBP: 00007ffd0d727930 R08: 00007ffd0d727930 R09: 00007ffd0d727930
[   35.182862] R10: 00007ffd0d727930 R11: 0000000000000213 R12: 0000000000401180
[   35.183381] R13: 00007ffd0d727a50 R14: 0000000000000000 R15: 0000000000000000
[   35.184034]  </TASK>
[   35.184210] irq event stamp: 14875
[   35.184467] hardirqs last  enabled at (14883): [<ffffffff811b7f21>] __up_console_sem+0x91/0xb0
[   35.185117] hardirqs last disabled at (14892): [<ffffffff811b7f06>] __up_console_sem+0x76/0xb0
[   35.185767] softirqs last  enabled at (14810): [<ffffffff83000329>] __do_softirq+0x329/0x490
[   35.186521] softirqs last disabled at (14805): [<ffffffff81111082>] irq_exit_rcu+0xd2/0x100
[   35.187125] ---[ end trace 0000000000000000 ]---
[   35.187569] ------------[ cut here ]------------
[   35.187901] WARNING: CPU: 1 PID: 665 at drivers/iommu/iommufd/pages.c:1290 __iopt_area_unfill_domain+0x54f/0x560
[   35.188646] Modules linked in:
[   35.188911] CPU: 1 PID: 665 Comm: repro Tainted: G        W          6.1.0-a0a6c76cf2a5+ #1
[   35.189621] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   35.190427] RIP: 0010:__iopt_area_unfill_domain+0x54f/0x560
[   35.190968] Code: e8 86 9e 2b ff 85 db 0f 85 35 fb ff ff e8 09 9d 2b ff 0f 0b e9 29 fb ff ff e8 fd 9c 2b ff 0f 0b e9 69 fe ff ff e8 f1 9c 2b ff <0f> 0b e9 58 ff ff ff e8 65 2d dc 00 0f 1f 44 00 00 0f 1f 44 00 00
[   35.192375] RSP: 0018:ffffc9000124bae0 EFLAGS: 00010246
[   35.192769] RAX: 0000000000000000 RBX: 00000000ffffffff RCX: ffffffff81fe0d26
[   35.193323] RDX: 0000000000000000 RSI: ffff88800cb4d300 RDI: 0000000000000002
[   35.193907] RBP: ffffc9000124bd10 R08: 000000000003b5c5 R09: 0000000000000001
[   35.194416] R10: 000000000003b5a0 R11: 0000000000000024 R12: 00000000000007ff
[   35.195007] R13: 0000000000000801 R14: 00000000000007ff R15: 0000000000000800
[   35.195536] FS:  00007f3777af9740(0000) GS:ffff88807dd00000(0000) knlGS:0000000000000000
[   35.196214] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   35.196632] CR2: 00007f3777c1e580 CR3: 000000000c97e001 CR4: 0000000000770ee0
[   35.197189] PKRU: 55555554
[   35.197447] Call Trace:
[   35.197631]  <TASK>
[   35.197829]  ? __this_cpu_preempt_check+0x20/0x30
[   35.198206]  ? lock_is_held_type+0xe6/0x140
[   35.198614]  ? rcu_read_lock_sched_held+0x57/0x80
[   35.198971]  ? __mutex_lock+0x13a/0xf30
[   35.199273]  ? write_comp_data+0x2f/0x90
[   35.199572]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   35.200015]  iopt_area_unfill_domain+0x32/0x40
[   35.200360]  iopt_table_remove_domain+0x23f/0x4c0
[   35.200732]  iommufd_device_selftest_detach+0x3a/0x90
[   35.201236]  iommufd_selftest_destroy+0x55/0x70
[   35.201595]  iommufd_object_destroy_user+0xce/0x130
[   35.201979]  iommufd_destroy+0xa2/0xc0
[   35.202307]  iommufd_fops_ioctl+0x1ef/0x310
[   35.202692]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   35.203057]  ? write_comp_data+0x2f/0x90
[   35.203358]  __x64_sys_ioctl+0x10e/0x160
[   35.203757]  ? iommufd_get_object.part.6+0x1c0/0x1c0
[   35.204145]  do_syscall_64+0x3b/0x90
[   35.204432]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   35.204951] RIP: 0033:0x7f3777c1e59d
[   35.205222] Code: 00 c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d d3 08 0d 00 f7 d8 64 89 01 48
[   35.206639] RSP: 002b:00007ffd0d727918 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   35.207197] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f3777c1e59d
[   35.207806] RDX: 0000000020000140 RSI: 0000000000003b80 RDI: 0000000000000003
[   35.208316] RBP: 00007ffd0d727930 R08: 00007ffd0d727930 R09: 00007ffd0d727930
[   35.208949] R10: 00007ffd0d727930 R11: 0000000000000213 R12: 0000000000401180
[   35.209475] R13: 00007ffd0d727a50 R14: 0000000000000000 R15: 0000000000000000
[   35.210073]  </TASK>
[   35.210255] irq event stamp: 15331
[   35.210529] hardirqs last  enabled at (15339): [<ffffffff811b7f21>] __up_console_sem+0x91/0xb0
[   35.211127] hardirqs last disabled at (15346): [<ffffffff811b7f06>] __up_console_sem+0x76/0xb0
[   35.211807] softirqs last  enabled at (14810): [<ffffffff83000329>] __do_softirq+0x329/0x490
[   35.212414] softirqs last disabled at (14805): [<ffffffff81111082>] irq_exit_rcu+0xd2/0x100
[   35.213106] ---[ end trace 0000000000000000 ]---
[   35.222239] ------------[ cut here ]------------
[   35.222615] WARNING: CPU: 1 PID: 665 at drivers/iommu/iommufd/pages.c:178 batch_unpin.isra.23+0x151/0x1a0
[   35.223410] Modules linked in:
[   35.223652] CPU: 1 PID: 665 Comm: repro Tainted: G        W          6.1.0-a0a6c76cf2a5+ #1
[   35.224252] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   35.225164] RIP: 0010:batch_unpin.isra.23+0x151/0x1a0
[   35.225548] Code: e8 c4 be 2b ff 48 8b 45 d0 48 85 c0 75 17 e8 26 bd 2b ff 48 8b 7d c8 48 89 de e8 fa bd 2b ff 48 39 5d c8 73 07 e8 0f bd 2b ff <0f> 0b e8 08 bd 2b ff 4d 29 e5 31 ff 41 83 c6 01 4c 89 ee 31 db e8
[   35.226998] RSP: 0018:ffffc9000124b9d8 EFLAGS: 00010246
[   35.227478] RAX: 0000000000000000 RBX: ffffffffffffffff RCX: ffffffff81fded8c
[   35.227986] RDX: 0000000000000000 RSI: ffff88800cb4d300 RDI: 0000000000000002
[   35.228537] RBP: ffffc9000124ba20 R08: 0000000000000000 R09: ffff88807dd3b890
[   35.229108] R10: 0000000000001061 R11: 0000000000000000 R12: 0000000000000001
[   35.229645] R13: 0000000000000001 R14: 0000000000000000 R15: ffff888005ec9400
[   35.230295] FS:  0000000000000000(0000) GS:ffff88807dd00000(0000) knlGS:0000000000000000
[   35.230900] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   35.231410] CR2: 00007fd6e50ca028 CR3: 000000000d51a002 CR4: 0000000000770ee0
[   35.231925] PKRU: 55555554
[   35.232134] Call Trace:
[   35.232340]  <TASK>
[   35.232604]  iopt_pages_unfill_xarray+0x39f/0x5c0
[   35.233016]  ? write_comp_data+0x2f/0x90
[   35.233328]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   35.233713]  ? write_comp_data+0x2f/0x90
[   35.234059]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   35.234423]  ? interval_tree_remove+0x291/0x4e0
[   35.234790]  ? write_comp_data+0x2f/0x90
[   35.235197]  iopt_area_remove_access+0x108/0x120
[   35.235597]  iommufd_access_unpin_pages+0x177/0x210
[   35.235986]  iommufd_test_access_unmap+0xe0/0x130
[   35.236369]  ? iommufd_test_access_unmap+0x130/0x130
[   35.236851]  iommufd_test_staccess_release+0x39/0x60
[   35.237231]  __fput+0x11f/0x450
[   35.237489]  ____fput+0x1e/0x30
[   35.237790]  task_work_run+0xb6/0x120
[   35.238177]  do_exit+0x521/0x1340
[   35.238436]  ? lockdep_hardirqs_on+0x8a/0x110
[   35.238780]  ? trace_hardirqs_on+0x3f/0x100
[   35.239130]  do_group_exit+0x5e/0xf0
[   35.239468]  __x64_sys_exit_group+0x25/0x30
[   35.239797]  do_syscall_64+0x3b/0x90
[   35.240077]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   35.240551] RIP: 0033:0x7f3777be6cf6
[   35.240870] Code: Unable to access opcode bytes at 0x7f3777be6ccc.
[   35.241322] RSP: 002b:00007ffd0d7278d8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
[   35.241969] RAX: ffffffffffffffda RBX: 00007f3777cf1490 RCX: 00007f3777be6cf6
[   35.242486] RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
[   35.242989] RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffff80
[   35.243501] R10: 0000000000000004 R11: 0000000000000246 R12: 00007f3777cf1490
[   35.244012] R13: 0000000000000001 R14: 00007f3777cf4e88 R15: 0000000000000000
[   35.244542]  </TASK>
[   35.244730] irq event stamp: 21455
[   35.244988] hardirqs last  enabled at (21463): [<ffffffff811b7f21>] __up_console_sem+0x91/0xb0
[   35.245612] hardirqs last disabled at (21470): [<ffffffff811b7f06>] __up_console_sem+0x76/0xb0
[   35.246234] softirqs last  enabled at (21126): [<ffffffff83000329>] __do_softirq+0x329/0x490
[   35.246853] softirqs last disabled at (21117): [<ffffffff81111082>] irq_exit_rcu+0xd2/0x100
[   35.247453] ---[ end trace 0000000000000000 ]---
[   35.247900] ------------[ cut here ]------------
[   35.248242] WARNING: CPU: 1 PID: 665 at drivers/iommu/iommufd/pages.c:886 update_unpinned+0x75/0x80
[   35.248913] Modules linked in:
[   35.249151] CPU: 1 PID: 665 Comm: repro Tainted: G        W          6.1.0-a0a6c76cf2a5+ #1
[   35.249760] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   35.250580] RIP: 0010:update_unpinned+0x75/0x80
[   35.250924] Code: ac 2b ff 48 89 de 31 c9 31 d2 4c 29 e6 4c 89 ef e8 70 fb ff ff e8 bb ac 2b ff 5b 41 5c 41 5d 5d c3 cc cc cc cc e8 ab ac 2b ff <0f> 0b eb e7 0f 1f 80 00 00 00 00 0f 1f 44 00 00 55 48 89 e5 41 57
[   35.252246] RSP: 0018:ffffc9000124ba08 EFLAGS: 00010246
[   35.252634] RAX: 0000000000000000 RBX: 0000000000000000 RCX: ffffffff81fdfdcf
[   35.253205] RDX: 0000000000000000 RSI: ffff88800cb4d300 RDI: 0000000000000002
[   35.253724] RBP: ffffc9000124ba20 R08: 0000000000000000 R09: ffff88807dd3b890
[   35.254241] R10: 0000000000001061 R11: 0000000000000000 R12: ffffffffffffffff
[   35.254759] R13: ffff888005ec9400 R14: 0000000000000002 R15: 0000000000000002
[   35.255308] FS:  0000000000000000(0000) GS:ffff88807dd00000(0000) knlGS:0000000000000000
[   35.255901] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   35.256323] CR2: 00007fd6e50ca028 CR3: 000000000d51a002 CR4: 0000000000770ee0
[   35.256863] PKRU: 55555554
[   35.257075] Call Trace:
[   35.257265]  <TASK>
[   35.257436]  iopt_pages_unfill_xarray+0x522/0x5c0
[   35.257833]  ? write_comp_data+0x2f/0x90
[   35.258143]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   35.258511]  ? write_comp_data+0x2f/0x90
[   35.258816]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   35.259181]  ? interval_tree_remove+0x291/0x4e0
[   35.259533]  ? write_comp_data+0x2f/0x90
[   35.259841]  iopt_area_remove_access+0x108/0x120
[   35.260204]  iommufd_access_unpin_pages+0x177/0x210
[   35.260592]  iommufd_test_access_unmap+0xe0/0x130
[   35.260980]  ? iommufd_test_access_unmap+0x130/0x130
[   35.261362]  iommufd_test_staccess_release+0x39/0x60
[   35.261742]  __fput+0x11f/0x450
[   35.262002]  ____fput+0x1e/0x30
[   35.262256]  task_work_run+0xb6/0x120
[   35.262560]  do_exit+0x521/0x1340
[   35.262821]  ? lockdep_hardirqs_on+0x8a/0x110
[   35.263168]  ? trace_hardirqs_on+0x3f/0x100
[   35.263509]  do_group_exit+0x5e/0xf0
[   35.263790]  __x64_sys_exit_group+0x25/0x30
[   35.264110]  do_syscall_64+0x3b/0x90
[   35.264392]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   35.264790] RIP: 0033:0x7f3777be6cf6
[   35.265071] Code: Unable to access opcode bytes at 0x7f3777be6ccc.
[   35.265520] RSP: 002b:00007ffd0d7278d8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
[   35.266070] RAX: ffffffffffffffda RBX: 00007f3777cf1490 RCX: 00007f3777be6cf6
[   35.266593] RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
[   35.267101] RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffff80
[   35.267623] R10: 0000000000000004 R11: 0000000000000246 R12: 00007f3777cf1490
[   35.268145] R13: 0000000000000001 R14: 00007f3777cf4e88 R15: 0000000000000000
[   35.268692]  </TASK>
[   35.268871] irq event stamp: 21995
[   35.269131] hardirqs last  enabled at (22003): [<ffffffff811b7f21>] __up_console_sem+0x91/0xb0
[   35.269758] hardirqs last disabled at (22010): [<ffffffff811b7f06>] __up_console_sem+0x76/0xb0
[   35.270389] softirqs last  enabled at (21650): [<ffffffff83000329>] __do_softirq+0x329/0x490
[   35.271018] softirqs last disabled at (21589): [<ffffffff81111082>] irq_exit_rcu+0xd2/0x100
[   35.271626] ---[ end trace 0000000000000000 ]---
[   35.272254] ------------[ cut here ]------------
[   35.273090] WARNING: CPU: 0 PID: 665 at drivers/iommu/iommufd/pages.c:1181 iopt_release_pages+0x159/0x190
[   35.274277] Modules linked in:
[   35.274676] CPU: 0 PID: 665 Comm: repro Tainted: G        W          6.1.0-a0a6c76cf2a5+ #1
[   35.275696] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   35.277096] RIP: 0010:iopt_release_pages+0x159/0x190
[   35.277774] Code: b5 11 ff eb cb e8 87 90 2b ff be 03 00 00 00 4c 89 f7 e8 6a 8b ce ff eb b7 e8 73 90 2b ff 0f 0b e9 ed fe ff ff e8 67 90 2b ff <0f> 0b e9 00 ff ff ff e8 5b 90 2b ff 0f 0b e9 07 ff ff ff e8 4f 90
[   35.279904] RSP: 0018:ffffc9000124bc88 EFLAGS: 00010246
[   35.280571] RAX: 0000000000000000 RBX: ffff888005ec9400 RCX: ffffffff81fe1957
[   35.281492] RDX: 0000000000000000 RSI: ffff88800cb4d300 RDI: 0000000000000002
[   35.282387] RBP: ffffc9000124bca8 R08: ffff888006824180 R09: 0000000080150013
[   35.283201] R10: 0000000000000001 R11: 0000000000000000 R12: ffffffffffffffff
[   35.284068] R13: 0000000001000000 R14: 00000000017fffff R15: 0000000000000000
[   35.284984] FS:  0000000000000000(0000) GS:ffff88807dc00000(0000) knlGS:0000000000000000
[   35.285981] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   35.286690] CR2: 00007fd6e50d3010 CR3: 0000000013558005 CR4: 0000000000770ef0
[   35.287548] PKRU: 55555554
[   35.287910] Call Trace:
[   35.288215]  <TASK>
[   35.288494]  iopt_unmap_iova_range+0x1ef/0x2e0
[   35.289060]  iopt_unmap_all+0x2f/0x60
[   35.289491]  iommufd_ioas_destroy+0x2c/0x70
[   35.290022]  iommufd_fops_release+0xd4/0x170
[   35.290598]  ? iommufd_ctx_get+0x30/0x30
[   35.291103]  __fput+0x11f/0x450
[   35.291535]  ____fput+0x1e/0x30
[   35.291958]  task_work_run+0xb6/0x120
[   35.292447]  do_exit+0x521/0x1340
[   35.292923]  ? lockdep_hardirqs_on+0x8a/0x110
[   35.293494]  ? trace_hardirqs_on+0x3f/0x100
[   35.294068]  do_group_exit+0x5e/0xf0
[   35.294537]  __x64_sys_exit_group+0x25/0x30
[   35.295071]  do_syscall_64+0x3b/0x90
[   35.295547]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   35.296182] RIP: 0033:0x7f3777be6cf6
[   35.296637] Code: Unable to access opcode bytes at 0x7f3777be6ccc.
[   35.297416] RSP: 002b:00007ffd0d7278d8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
[   35.298353] RAX: ffffffffffffffda RBX: 00007f3777cf1490 RCX: 00007f3777be6cf6
[   35.299199] RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
[   35.300039] RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffff80
[   35.300890] R10: 0000000000000004 R11: 0000000000000246 R12: 00007f3777cf1490
[   35.301743] R13: 0000000000000001 R14: 00007f3777cf4e88 R15: 0000000000000000
[   35.302651]  </TASK>
[   35.302938] irq event stamp: 22787
[   35.303376] hardirqs last  enabled at (22795): [<ffffffff811b7f21>] __up_console_sem+0x91/0xb0
[   35.304430] hardirqs last disabled at (22802): [<ffffffff811b7f06>] __up_console_sem+0x76/0xb0
[   35.305515] softirqs last  enabled at (22416): [<ffffffff83000329>] __do_softirq+0x329/0x490
[   35.306551] softirqs last disabled at (22087): [<ffffffff81111082>] irq_exit_rcu+0xd2/0x100
[   35.307533] ---[ end trace 0000000000000000 ]---
[   36.046573] ------------[ cut here ]------------
[   36.046937] WARNING: CPU: 1 PID: 684 at drivers/iommu/iommufd/pages.c:294 __iopt_area_unfill_domain+0x152/0x560
[   36.047686] Modules linked in:
[   36.047930] CPU: 1 PID: 684 Comm: repro Tainted: G        W          6.1.0-a0a6c76cf2a5+ #1
[   36.048535] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   36.049367] RIP: 0010:__iopt_area_unfill_domain+0x152/0x560
[   36.049783] Code: a1 2b ff 44 8b 64 24 54 48 8b 44 24 48 31 ff 44 89 e6 48 89 44 24 38 e8 6c a2 2b ff 45 85 e4 0f 85 eb 01 00 00 e8 ee a0 2b ff <0f> 0b e8 e7 a0 2b ff 48 8b 44 24 38 89 5c 24 58 89 18 8b 44 24 54
[   36.051077] RSP: 0018:ffffc900012c3ae0 EFLAGS: 00010246
[   36.051449] RAX: 0000000000000000 RBX: 00000000ffffffff RCX: ffffffff81fe0bd5
[   36.051973] RDX: 0000000000000000 RSI: ffff88801235d300 RDI: 0000000000000002
[   36.052466] RBP: ffffc900012c3d10 R08: 000000000003b5c5 R09: 000000000000000f
[   36.053014] R10: 000000000003b5a0 R11: 0000000000000024 R12: 0000000000000001
[   36.053509] R13: 0000000000000801 R14: 00000000000007ff R15: 0000000000000800
[   36.054028] FS:  00007f3777af9740(0000) GS:ffff88807dd00000(0000) knlGS:0000000000000000
[   36.054589] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   36.055025] CR2: 00007f3777c1e580 CR3: 000000000b382003 CR4: 0000000000770ee0
[   36.055525] PKRU: 55555554
[   36.055724] Call Trace:
[   36.055932]  <TASK>
[   36.056119]  ? __this_cpu_preempt_check+0x20/0x30
[   36.056472]  ? lock_is_held_type+0xe6/0x140
[   36.056807]  ? rcu_read_lock_sched_held+0x57/0x80
[   36.057187]  ? __mutex_lock+0x13a/0xf30
[   36.057476]  ? write_comp_data+0x2f/0x90
[   36.057772]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   36.058153]  iopt_area_unfill_domain+0x32/0x40
[   36.058493]  iopt_table_remove_domain+0x23f/0x4c0
[   36.058843]  iommufd_device_selftest_detach+0x3a/0x90
[   36.059253]  iommufd_selftest_destroy+0x55/0x70
[   36.059591]  iommufd_object_destroy_user+0xce/0x130
[   36.059942]  iommufd_destroy+0xa2/0xc0
[   36.060236]  iommufd_fops_ioctl+0x1ef/0x310
[   36.060582]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   36.060952]  ? write_comp_data+0x2f/0x90
[   36.061247]  __x64_sys_ioctl+0x10e/0x160
[   36.061576]  ? iommufd_get_object.part.6+0x1c0/0x1c0
[   36.061939]  do_syscall_64+0x3b/0x90
[   36.062212]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   36.062616] RIP: 0033:0x7f3777c1e59d
[   36.062886] Code: 00 c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d d3 08 0d 00 f7 d8 64 89 01 48
[   36.064172] RSP: 002b:00007ffd0d727918 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   36.064758] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f3777c1e59d
[   36.065256] RDX: 0000000020000140 RSI: 0000000000003b80 RDI: 0000000000000003
[   36.065783] RBP: 00007ffd0d727930 R08: 00007ffd0d727930 R09: 00007ffd0d727930
[   36.066280] R10: 00007ffd0d727930 R11: 0000000000000213 R12: 0000000000401180
[   36.066817] R13: 00007ffd0d727a50 R14: 0000000000000000 R15: 0000000000000000
[   36.067333]  </TASK>
[   36.067504] irq event stamp: 14741
[   36.067761] hardirqs last  enabled at (14749): [<ffffffff811b7f21>] __up_console_sem+0x91/0xb0
[   36.068381] hardirqs last disabled at (14756): [<ffffffff811b7f06>] __up_console_sem+0x76/0xb0
[   36.069040] softirqs last  enabled at (14438): [<ffffffff83000329>] __do_softirq+0x329/0x490
[   36.069636] softirqs last disabled at (14429): [<ffffffff81111082>] irq_exit_rcu+0xd2/0x100
[   36.070262] ---[ end trace 0000000000000000 ]---
[   36.070691] ------------[ cut here ]------------
[   36.071020] WARNING: CPU: 1 PID: 684 at drivers/iommu/iommufd/pages.c:1290 __iopt_area_unfill_domain+0x54f/0x560
[   36.071774] Modules linked in:
[   36.072000] CPU: 1 PID: 684 Comm: repro Tainted: G        W          6.1.0-a0a6c76cf2a5+ #1
[   36.072605] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   36.073437] RIP: 0010:__iopt_area_unfill_domain+0x54f/0x560
[   36.073841] Code: e8 86 9e 2b ff 85 db 0f 85 35 fb ff ff e8 09 9d 2b ff 0f 0b e9 29 fb ff ff e8 fd 9c 2b ff 0f 0b e9 69 fe ff ff e8 f1 9c 2b ff <0f> 0b e9 58 ff ff ff e8 65 2d dc 00 0f 1f 44 00 00 0f 1f 44 00 00
[   36.075152] RSP: 0018:ffffc900012c3ae0 EFLAGS: 00010246
[   36.075552] RAX: 0000000000000000 RBX: 00000000ffffffff RCX: ffffffff81fe0d26
[   36.076046] RDX: 0000000000000000 RSI: ffff88801235d300 RDI: 0000000000000002
[   36.076564] RBP: ffffc900012c3d10 R08: 000000000003b5c5 R09: 000000000000000f
[   36.077092] R10: 000000000003b5a0 R11: 0000000000000024 R12: 00000000000007ff
[   36.077597] R13: 0000000000000801 R14: 00000000000007ff R15: 0000000000000800
[   36.078116] FS:  00007f3777af9740(0000) GS:ffff88807dd00000(0000) knlGS:0000000000000000
[   36.078707] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   36.079126] CR2: 00007f3777c1e580 CR3: 000000000b382003 CR4: 0000000000770ee0
[   36.079616] PKRU: 55555554
[   36.079840] Call Trace:
[   36.080029]  <TASK>
[   36.080217]  ? __this_cpu_preempt_check+0x20/0x30
[   36.080576]  ? lock_is_held_type+0xe6/0x140
[   36.080938]  ? rcu_read_lock_sched_held+0x57/0x80
[   36.081285]  ? __mutex_lock+0x13a/0xf30
[   36.081572]  ? write_comp_data+0x2f/0x90
[   36.081862]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   36.082238]  iopt_area_unfill_domain+0x32/0x40
[   36.082575]  iopt_table_remove_domain+0x23f/0x4c0
[   36.082920]  iommufd_device_selftest_detach+0x3a/0x90
[   36.083323]  iommufd_selftest_destroy+0x55/0x70
[   36.083664]  iommufd_object_destroy_user+0xce/0x130
[   36.084025]  iommufd_destroy+0xa2/0xc0
[   36.084334]  iommufd_fops_ioctl+0x1ef/0x310
[   36.084647]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   36.085021]  ? write_comp_data+0x2f/0x90
[   36.085352]  __x64_sys_ioctl+0x10e/0x160
[   36.085650]  ? iommufd_get_object.part.6+0x1c0/0x1c0
[   36.086025]  do_syscall_64+0x3b/0x90
[   36.086316]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   36.086691] RIP: 0033:0x7f3777c1e59d
[   36.086956] Code: 00 c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d d3 08 0d 00 f7 d8 64 89 01 48
[   36.088221] RSP: 002b:00007ffd0d727918 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   36.088798] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f3777c1e59d
[   36.089292] RDX: 0000000020000140 RSI: 0000000000003b80 RDI: 0000000000000003
[   36.089809] RBP: 00007ffd0d727930 R08: 00007ffd0d727930 R09: 00007ffd0d727930
[   36.090301] R10: 00007ffd0d727930 R11: 0000000000000213 R12: 0000000000401180
[   36.090824] R13: 00007ffd0d727a50 R14: 0000000000000000 R15: 0000000000000000
[   36.091339]  </TASK>
[   36.091506] irq event stamp: 15227
[   36.091778] hardirqs last  enabled at (15235): [<ffffffff811b7f21>] __up_console_sem+0x91/0xb0
[   36.092378] hardirqs last disabled at (15242): [<ffffffff811b7f06>] __up_console_sem+0x76/0xb0
[   36.093059] softirqs last  enabled at (15256): [<ffffffff83000329>] __do_softirq+0x329/0x490
[   36.093657] softirqs last disabled at (15251): [<ffffffff81111082>] irq_exit_rcu+0xd2/0x100
[   36.094268] ---[ end trace 0000000000000000 ]---
[   36.098832] ------------[ cut here ]------------
[   36.099193] WARNING: CPU: 1 PID: 684 at drivers/iommu/iommufd/pages.c:178 batch_unpin.isra.23+0x151/0x1a0
[   36.099963] Modules linked in:
[   36.100193] CPU: 1 PID: 684 Comm: repro Tainted: G        W          6.1.0-a0a6c76cf2a5+ #1
[   36.100865] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   36.101681] RIP: 0010:batch_unpin.isra.23+0x151/0x1a0
[   36.102051] Code: e8 c4 be 2b ff 48 8b 45 d0 48 85 c0 75 17 e8 26 bd 2b ff 48 8b 7d c8 48 89 de e8 fa bd 2b ff 48 39 5d c8 73 07 e8 0f bd 2b ff <0f> 0b e8 08 bd 2b ff 4d 29 e5 31 ff 41 83 c6 01 4c 89 ee 31 db e8
[   36.103364] RSP: 0018:ffffc900012c39d8 EFLAGS: 00010246
[   36.103766] RAX: 0000000000000000 RBX: ffffffffffffffff RCX: ffffffff81fded8c
[   36.104266] RDX: 0000000000000000 RSI: ffff88801235d300 RDI: 0000000000000002
[   36.104805] RBP: ffffc900012c3a20 R08: 0000000000000000 R09: ffff88807dd3b890
[   36.105320] R10: 000000000000184e R11: 0000000000000000 R12: 0000000000000001
[   36.105830] R13: 0000000000000001 R14: 0000000000000000 R15: ffff888005ec8c00
[   36.106355] FS:  0000000000000000(0000) GS:ffff88807dd00000(0000) knlGS:0000000000000000
[   36.106936] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   36.107368] CR2: 00007f3777cf0500 CR3: 0000000003c12001 CR4: 0000000000770ee0
[   36.107868] PKRU: 55555554
[   36.108099] Call Trace:
[   36.108280]  <TASK>
[   36.108451]  iopt_pages_unfill_xarray+0x39f/0x5c0
[   36.108848]  ? write_comp_data+0x2f/0x90
[   36.109167]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   36.109524]  ? write_comp_data+0x2f/0x90
[   36.109827]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   36.110173]  ? interval_tree_remove+0x291/0x4e0
[   36.110549]  ? write_comp_data+0x2f/0x90
[   36.110845]  iopt_area_remove_access+0x108/0x120
[   36.111209]  iommufd_access_unpin_pages+0x177/0x210
[   36.111617]  iommufd_test_access_unmap+0xe0/0x130
[   36.111967]  ? iommufd_test_access_unmap+0x130/0x130
[   36.112334]  iommufd_test_staccess_release+0x39/0x60
[   36.112753]  __fput+0x11f/0x450
[   36.113021]  ____fput+0x1e/0x30
[   36.113281]  task_work_run+0xb6/0x120
[   36.113607]  do_exit+0x521/0x1340
[   36.113871]  ? lockdep_hardirqs_on+0x8a/0x110
[   36.114226]  ? trace_hardirqs_on+0x3f/0x100
[   36.114597]  do_group_exit+0x5e/0xf0
[   36.114873]  __x64_sys_exit_group+0x25/0x30
[   36.115195]  do_syscall_64+0x3b/0x90
[   36.115477]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   36.115890] RIP: 0033:0x7f3777be6cf6
[   36.116170] Code: Unable to access opcode bytes at 0x7f3777be6ccc.
[   36.116628] RSP: 002b:00007ffd0d7278d8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
[   36.117228] RAX: ffffffffffffffda RBX: 00007f3777cf1490 RCX: 00007f3777be6cf6
[   36.117764] RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
[   36.118322] RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffff80
[   36.118860] R10: 0000000000000004 R11: 0000000000000246 R12: 00007f3777cf1490
[   36.119401] R13: 0000000000000001 R14: 00007f3777cf4e88 R15: 0000000000000000
[   36.119965]  </TASK>
[   36.120160] irq event stamp: 21219
[   36.120412] hardirqs last  enabled at (21227): [<ffffffff811b7f21>] __up_console_sem+0x91/0xb0
[   36.121115] hardirqs last disabled at (21236): [<ffffffff811b7f06>] __up_console_sem+0x76/0xb0
[   36.121758] softirqs last  enabled at (20828): [<ffffffff83000329>] __do_softirq+0x329/0x490
[   36.122418] softirqs last disabled at (20751): [<ffffffff81111082>] irq_exit_rcu+0xd2/0x100
[   36.123027] ---[ end trace 0000000000000000 ]---
[   36.123485] ------------[ cut here ]------------
[   36.123836] WARNING: CPU: 1 PID: 684 at drivers/iommu/iommufd/pages.c:886 update_unpinned+0x75/0x80
[   36.124551] Modules linked in:
[   36.124792] CPU: 1 PID: 684 Comm: repro Tainted: G        W          6.1.0-a0a6c76cf2a5+ #1
[   36.125378] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   36.126191] RIP: 0010:update_unpinned+0x75/0x80
[   36.126560] Code: ac 2b ff 48 89 de 31 c9 31 d2 4c 29 e6 4c 89 ef e8 70 fb ff ff e8 bb ac 2b ff 5b 41 5c 41 5d 5d c3 cc cc cc cc e8 ab ac 2b ff <0f> 0b eb e7 0f 1f 80 00 00 00 00 0f 1f 44 00 00 55 48 89 e5 41 57
[   36.127850] RSP: 0018:ffffc900012c3a08 EFLAGS: 00010246
[   36.128221] RAX: 0000000000000000 RBX: 0000000000000000 RCX: ffffffff81fdfdcf
[   36.128762] RDX: 0000000000000000 RSI: ffff88801235d300 RDI: 0000000000000002
[   36.129258] RBP: ffffc900012c3a20 R08: 0000000000000000 R09: ffff88807dd3b890
[   36.129778] R10: 000000000000184e R11: 0000000000000000 R12: ffffffffffffffff
[   36.130304] R13: ffff888005ec8c00 R14: 0000000000000002 R15: 0000000000000002
[   36.130811] FS:  0000000000000000(0000) GS:ffff88807dd00000(0000) knlGS:0000000000000000
[   36.131403] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   36.131818] CR2: 00007f3777cf0500 CR3: 0000000003c12001 CR4: 0000000000770ee0
[   36.132340] PKRU: 55555554
[   36.132543] Call Trace:
[   36.132748]  <TASK>
[   36.132913]  iopt_pages_unfill_xarray+0x522/0x5c0
[   36.133323]  ? write_comp_data+0x2f/0x90
[   36.133621]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   36.133971]  ? write_comp_data+0x2f/0x90
[   36.134296]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   36.134653]  ? interval_tree_remove+0x291/0x4e0
[   36.134986]  ? write_comp_data+0x2f/0x90
[   36.135307]  iopt_area_remove_access+0x108/0x120
[   36.135653]  iommufd_access_unpin_pages+0x177/0x210
[   36.136025]  iommufd_test_access_unmap+0xe0/0x130
[   36.136398]  ? iommufd_test_access_unmap+0x130/0x130
[   36.136796]  iommufd_test_staccess_release+0x39/0x60
[   36.137171]  __fput+0x11f/0x450
[   36.137446]  ____fput+0x1e/0x30
[   36.137691]  task_work_run+0xb6/0x120
[   36.137982]  do_exit+0x521/0x1340
[   36.138235]  ? lockdep_hardirqs_on+0x8a/0x110
[   36.138596]  ? trace_hardirqs_on+0x3f/0x100
[   36.138911]  do_group_exit+0x5e/0xf0
[   36.139178]  __x64_sys_exit_group+0x25/0x30
[   36.139481]  do_syscall_64+0x3b/0x90
[   36.139777]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   36.140145] RIP: 0033:0x7f3777be6cf6
[   36.140412] Code: Unable to access opcode bytes at 0x7f3777be6ccc.
[   36.140891] RSP: 002b:00007ffd0d7278d8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
[   36.141418] RAX: ffffffffffffffda RBX: 00007f3777cf1490 RCX: 00007f3777be6cf6
[   36.141944] RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
[   36.142442] RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffff80
[   36.142962] R10: 0000000000000004 R11: 0000000000000246 R12: 00007f3777cf1490
[   36.143455] R13: 0000000000000001 R14: 00007f3777cf4e88 R15: 0000000000000000
[   36.143992]  </TASK>
[   36.144162] irq event stamp: 21703
[   36.144409] hardirqs last  enabled at (21711): [<ffffffff811b7f21>] __up_console_sem+0x91/0xb0
[   36.145067] hardirqs last disabled at (21720): [<ffffffff811b7f06>] __up_console_sem+0x76/0xb0
[   36.145684] softirqs last  enabled at (21532): [<ffffffff83000329>] __do_softirq+0x329/0x490
[   36.146319] softirqs last disabled at (21527): [<ffffffff81111082>] irq_exit_rcu+0xd2/0x100
[   36.146900] ---[ end trace 0000000000000000 ]---
[   36.147399] ------------[ cut here ]------------
[   36.147732] WARNING: CPU: 1 PID: 684 at drivers/iommu/iommufd/pages.c:1181 iopt_release_pages+0x159/0x190
[   36.148429] Modules linked in:
[   36.148682] CPU: 1 PID: 684 Comm: repro Tainted: G        W          6.1.0-a0a6c76cf2a5+ #1
[   36.149264] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   36.150075] RIP: 0010:iopt_release_pages+0x159/0x190
[   36.150463] Code: b5 11 ff eb cb e8 87 90 2b ff be 03 00 00 00 4c 89 f7 e8 6a 8b ce ff eb b7 e8 73 90 2b ff 0f 0b e9 ed fe ff ff e8 67 90 2b ff <0f> 0b e9 00 ff ff ff e8 5b 90 2b ff 0f 0b e9 07 ff ff ff e8 4f 90
[   36.151774] RSP: 0018:ffffc900012c3c88 EFLAGS: 00010246
[   36.152145] RAX: 0000000000000000 RBX: ffff888005ec8c00 RCX: ffffffff81fe1957
[   36.152690] RDX: 0000000000000000 RSI: ffff88801235d300 RDI: 0000000000000002
[   36.153179] RBP: ffffc900012c3ca8 R08: 000000000000001c R09: 0000000000000001
[   36.153712] R10: ffff88801235e098 R11: 0000000000000000 R12: ffffffffffffffff
[   36.154210] R13: 0000000001000000 R14: 00000000017fffff R15: 0000000000000000
[   36.154724] FS:  0000000000000000(0000) GS:ffff88807dd00000(0000) knlGS:0000000000000000
[   36.155313] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   36.155723] CR2: 00007f3777cf0500 CR3: 0000000003c12001 CR4: 0000000000770ee0
[   36.156246] PKRU: 55555554
[   36.156448] Call Trace:
[   36.156630]  <TASK>
[   36.156833]  iopt_unmap_iova_range+0x1ef/0x2e0
[   36.157196]  iopt_unmap_all+0x2f/0x60
[   36.157482]  iommufd_ioas_destroy+0x2c/0x70
[   36.157793]  iommufd_fops_release+0xd4/0x170
[   36.158167]  ? iommufd_ctx_get+0x30/0x30
[   36.158457]  __fput+0x11f/0x450
[   36.158725]  ____fput+0x1e/0x30
[   36.158965]  task_work_run+0xb6/0x120
[   36.159285]  do_exit+0x521/0x1340
[   36.159542]  ? lockdep_hardirqs_on+0x8a/0x110
[   36.159877]  ? trace_hardirqs_on+0x3f/0x100
[   36.160225]  do_group_exit+0x5e/0xf0
[   36.160512]  __x64_sys_exit_group+0x25/0x30
[   36.160841]  do_syscall_64+0x3b/0x90
[   36.161114]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   36.161623] RIP: 0033:0x7f3777be6cf6
[   36.161889] Code: Unable to access opcode bytes at 0x7f3777be6ccc.
[   36.162352] RSP: 002b:00007ffd0d7278d8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
[   36.162902] RAX: ffffffffffffffda RBX: 00007f3777cf1490 RCX: 00007f3777be6cf6
[   36.163405] RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
[   36.163924] RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffff80
[   36.164426] R10: 0000000000000004 R11: 0000000000000246 R12: 00007f3777cf1490
[   36.164966] R13: 0000000000000001 R14: 00007f3777cf4e88 R15: 0000000000000000
[   36.165476]  </TASK>
[   36.165643] irq event stamp: 22169
[   36.165911] hardirqs last  enabled at (22177): [<ffffffff811b7f21>] __up_console_sem+0x91/0xb0
[   36.166537] hardirqs last disabled at (22184): [<ffffffff811b7f06>] __up_console_sem+0x76/0xb0
[   36.167158] softirqs last  enabled at (21964): [<ffffffff83000329>] __do_softirq+0x329/0x490
[   36.167761] softirqs last disabled at (21955): [<ffffffff81111082>] irq_exit_rcu+0xd2/0x100
[   36.168354] ---[ end trace 0000000000000000 ]---
[   36.614764] ------------[ cut here ]------------
[   36.615150] WARNING: CPU: 1 PID: 696 at drivers/iommu/iommufd/pages.c:294 __iopt_area_unfill_domain+0x152/0x560
[   36.615906] Modules linked in:
[   36.616159] CPU: 1 PID: 696 Comm: repro Tainted: G        W          6.1.0-a0a6c76cf2a5+ #1
[   36.616810] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   36.617944] RIP: 0010:__iopt_area_unfill_domain+0x152/0x560
[   36.618361] Code: a1 2b ff 44 8b 64 24 54 48 8b 44 24 48 31 ff 44 89 e6 48 89 44 24 38 e8 6c a2 2b ff 45 85 e4 0f 85 eb 01 00 00 e8 ee a0 2b ff <0f> 0b e8 e7 a0 2b ff 48 8b 44 24 38 89 5c 24 58 89 18 8b 44 24 54
[   36.619686] RSP: 0018:ffffc90001293ae0 EFLAGS: 00010246
[   36.620093] RAX: 0000000000000000 RBX: 00000000ffffffff RCX: ffffffff81fe0bd5
[   36.620599] RDX: 0000000000000000 RSI: ffff8880135dd300 RDI: 0000000000000002
[   36.621164] RBP: ffffc90001293d10 R08: 000000000003b5c5 R09: 0000000000000007
[   36.621979] R10: 000000000003b5a0 R11: 0000000000000024 R12: 0000000000000005
[   36.622513] R13: 0000000000000801 R14: 00000000000007ff R15: 0000000000000800
[   36.623029] FS:  00007f3777af9740(0000) GS:ffff88807dd00000(0000) knlGS:0000000000000000
[   36.623631] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   36.624054] CR2: 00007f3777c1e580 CR3: 0000000009d5c006 CR4: 0000000000770ee0
[   36.624584] PKRU: 55555554
[   36.624837] Call Trace:
[   36.625144]  <TASK>
[   36.625468]  ? __this_cpu_preempt_check+0x20/0x30
[   36.626020]  ? lock_is_held_type+0xe6/0x140
[   36.626347]  ? rcu_read_lock_sched_held+0x57/0x80
[   36.626711]  ? __mutex_lock+0x13a/0xf30
[   36.627027]  ? write_comp_data+0x2f/0x90
[   36.627339]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   36.627706]  iopt_area_unfill_domain+0x32/0x40
[   36.628046]  iopt_table_remove_domain+0x23f/0x4c0
[   36.628427]  iommufd_device_selftest_detach+0x3a/0x90
[   36.628861]  iommufd_selftest_destroy+0x55/0x70
[   36.629425]  iommufd_object_destroy_user+0xce/0x130
[   36.630027]  iommufd_destroy+0xa2/0xc0
[   36.630432]  iommufd_fops_ioctl+0x1ef/0x310
[   36.630781]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   36.631147]  ? write_comp_data+0x2f/0x90
[   36.631478]  __x64_sys_ioctl+0x10e/0x160
[   36.631785]  ? iommufd_get_object.part.6+0x1c0/0x1c0
[   36.632163]  do_syscall_64+0x3b/0x90
[   36.632463]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   36.632914] RIP: 0033:0x7f3777c1e59d
[   36.633362] Code: 00 c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d d3 08 0d 00 f7 d8 64 89 01 48
[   36.635001] RSP: 002b:00007ffd0d727918 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   36.635555] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f3777c1e59d
[   36.636085] RDX: 0000000020000140 RSI: 0000000000003b80 RDI: 0000000000000003
[   36.636601] RBP: 00007ffd0d727930 R08: 00007ffd0d727930 R09: 00007ffd0d727930
[   36.637159] R10: 00007ffd0d727930 R11: 0000000000000213 R12: 0000000000401180
[   36.637934] R13: 00007ffd0d727a50 R14: 0000000000000000 R15: 0000000000000000
[   36.638464]  </TASK>
[   36.638648] irq event stamp: 14835
[   36.638917] hardirqs last  enabled at (14843): [<ffffffff811b7f21>] __up_console_sem+0x91/0xb0
[   36.639535] hardirqs last disabled at (14850): [<ffffffff811b7f06>] __up_console_sem+0x76/0xb0
[   36.640175] softirqs last  enabled at (14136): [<ffffffff83000329>] __do_softirq+0x329/0x490
[   36.640830] softirqs last disabled at (14131): [<ffffffff81111082>] irq_exit_rcu+0xd2/0x100
[   36.641785] ---[ end trace 0000000000000000 ]---
[   36.642254] ------------[ cut here ]------------
[   36.642608] WARNING: CPU: 1 PID: 696 at drivers/iommu/iommufd/pages.c:1290 __iopt_area_unfill_domain+0x54f/0x560
[   36.643370] Modules linked in:
[   36.643605] CPU: 1 PID: 696 Comm: repro Tainted: G        W          6.1.0-a0a6c76cf2a5+ #1
[   36.644219] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   36.645069] RIP: 0010:__iopt_area_unfill_domain+0x54f/0x560
[   36.645735] Code: e8 86 9e 2b ff 85 db 0f 85 35 fb ff ff e8 09 9d 2b ff 0f 0b e9 29 fb ff ff e8 fd 9c 2b ff 0f 0b e9 69 fe ff ff e8 f1 9c 2b ff <0f> 0b e9 58 ff ff ff e8 65 2d dc 00 0f 1f 44 00 00 0f 1f 44 00 00
[   36.647262] RSP: 0018:ffffc90001293ae0 EFLAGS: 00010246
[   36.647668] RAX: 0000000000000000 RBX: 00000000ffffffff RCX: ffffffff81fe0d26
[   36.648180] RDX: 0000000000000000 RSI: ffff8880135dd300 RDI: 0000000000000002
[   36.648763] RBP: ffffc90001293d10 R08: 000000000003b5c5 R09: 0000000000000007
[   36.649478] R10: 000000000003b5a0 R11: 0000000000000024 R12: 00000000000007ff
[   36.650010] R13: 0000000000000801 R14: 00000000000007ff R15: 0000000000000800
[   36.650537] FS:  00007f3777af9740(0000) GS:ffff88807dd00000(0000) knlGS:0000000000000000
[   36.651142] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   36.651576] CR2: 00007f3777c1e580 CR3: 0000000009d5c006 CR4: 0000000000770ee0
[   36.652110] PKRU: 55555554
[   36.652319] Call Trace:
[   36.652514]  <TASK>
[   36.652769]  ? __this_cpu_preempt_check+0x20/0x30
[   36.653364]  ? lock_is_held_type+0xe6/0x140
[   36.653897]  ? rcu_read_lock_sched_held+0x57/0x80
[   36.654363]  ? __mutex_lock+0x13a/0xf30
[   36.654674]  ? write_comp_data+0x2f/0x90
[   36.655011]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   36.655376]  iopt_area_unfill_domain+0x32/0x40
[   36.655716]  iopt_table_remove_domain+0x23f/0x4c0
[   36.656093]  iommufd_device_selftest_detach+0x3a/0x90
[   36.656482]  iommufd_selftest_destroy+0x55/0x70
[   36.656872]  iommufd_object_destroy_user+0xce/0x130
[   36.657485]  iommufd_destroy+0xa2/0xc0
[   36.657977]  iommufd_fops_ioctl+0x1ef/0x310
[   36.658408]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   36.658781]  ? write_comp_data+0x2f/0x90
[   36.659092]  __x64_sys_ioctl+0x10e/0x160
[   36.659422]  ? iommufd_get_object.part.6+0x1c0/0x1c0
[   36.659810]  do_syscall_64+0x3b/0x90
[   36.660099]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   36.660503] RIP: 0033:0x7f3777c1e59d
[   36.660824] Code: 00 c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d d3 08 0d 00 f7 d8 64 89 01 48
[   36.662555] RSP: 002b:00007ffd0d727918 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   36.663111] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f3777c1e59d
[   36.663644] RDX: 0000000020000140 RSI: 0000000000003b80 RDI: 0000000000000003
[   36.664156] RBP: 00007ffd0d727930 R08: 00007ffd0d727930 R09: 00007ffd0d727930
[   36.664723] R10: 00007ffd0d727930 R11: 0000000000000213 R12: 0000000000401180
[   36.665477] R13: 00007ffd0d727a50 R14: 0000000000000000 R15: 0000000000000000
[   36.666031]  </TASK>
[   36.666200] irq event stamp: 15297
[   36.666453] hardirqs last  enabled at (15305): [<ffffffff811b7f21>] __up_console_sem+0x91/0xb0
[   36.667106] hardirqs last disabled at (15312): [<ffffffff811b7f06>] __up_console_sem+0x76/0xb0
[   36.667732] softirqs last  enabled at (15270): [<ffffffff83000329>] __do_softirq+0x329/0x490
[   36.668363] softirqs last disabled at (15265): [<ffffffff81111082>] irq_exit_rcu+0xd2/0x100
[   36.668997] ---[ end trace 0000000000000000 ]---
[   36.674053] ------------[ cut here ]------------
[   36.674437] WARNING: CPU: 1 PID: 696 at drivers/iommu/iommufd/pages.c:178 batch_unpin.isra.23+0x151/0x1a0
[   36.675140] Modules linked in:
[   36.675374] CPU: 1 PID: 696 Comm: repro Tainted: G        W          6.1.0-a0a6c76cf2a5+ #1
[   36.675989] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   36.676865] RIP: 0010:batch_unpin.isra.23+0x151/0x1a0
[   36.677453] Code: e8 c4 be 2b ff 48 8b 45 d0 48 85 c0 75 17 e8 26 bd 2b ff 48 8b 7d c8 48 89 de e8 fa bd 2b ff 48 39 5d c8 73 07 e8 0f bd 2b ff <0f> 0b e8 08 bd 2b ff 4d 29 e5 31 ff 41 83 c6 01 4c 89 ee 31 db e8
[   36.678927] RSP: 0018:ffffc900012939d8 EFLAGS: 00010246
[   36.679313] RAX: 0000000000000000 RBX: ffffffffffffffff RCX: ffffffff81fded8c
[   36.679850] RDX: 0000000000000000 RSI: ffff8880135dd300 RDI: 0000000000000002
[   36.680368] RBP: ffffc90001293a20 R08: 0000000000000000 R09: ffff88807dd3b890
[   36.680935] R10: 0000000000001903 R11: 0000000000000000 R12: 0000000000000001
[   36.681705] R13: 0000000000000001 R14: 0000000000000000 R15: ffff888005ec8c00
[   36.682237] FS:  0000000000000000(0000) GS:ffff88807dd00000(0000) knlGS:0000000000000000
[   36.682816] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   36.683255] CR2: 00007f3777cf0500 CR3: 0000000003c12003 CR4: 0000000000770ee0
[   36.683767] PKRU: 55555554
[   36.683979] Call Trace:
[   36.684182]  <TASK>
[   36.684356]  iopt_pages_unfill_xarray+0x39f/0x5c0
[   36.684835]  ? write_comp_data+0x2f/0x90
[   36.685313]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   36.685859]  ? write_comp_data+0x2f/0x90
[   36.686278]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   36.686636]  ? interval_tree_remove+0x291/0x4e0
[   36.686975]  ? write_comp_data+0x2f/0x90
[   36.687272]  iopt_area_remove_access+0x108/0x120
[   36.687635]  iommufd_access_unpin_pages+0x177/0x210
[   36.688002]  iommufd_test_access_unmap+0xe0/0x130
[   36.688353]  ? iommufd_test_access_unmap+0x130/0x130
[   36.688765]  iommufd_test_staccess_release+0x39/0x60
[   36.689347]  __fput+0x11f/0x450
[   36.689747]  ____fput+0x1e/0x30
[   36.690086]  task_work_run+0xb6/0x120
[   36.690371]  do_exit+0x521/0x1340
[   36.690647]  ? lockdep_hardirqs_on+0x8a/0x110
[   36.690977]  ? trace_hardirqs_on+0x3f/0x100
[   36.691296]  do_group_exit+0x5e/0xf0
[   36.691588]  __x64_sys_exit_group+0x25/0x30
[   36.691906]  do_syscall_64+0x3b/0x90
[   36.692170]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   36.692540] RIP: 0033:0x7f3777be6cf6
[   36.692853] Code: Unable to access opcode bytes at 0x7f3777be6ccc.
[   36.693538] RSP: 002b:00007ffd0d7278d8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
[   36.694342] RAX: ffffffffffffffda RBX: 00007f3777cf1490 RCX: 00007f3777be6cf6
[   36.694870] RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
[   36.695365] RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffff80
[   36.695871] R10: 0000000000000004 R11: 0000000000000246 R12: 00007f3777cf1490
[   36.696377] R13: 0000000000000001 R14: 00007f3777cf4e88 R15: 0000000000000000
[   36.696930]  </TASK>
[   36.697200] irq event stamp: 21219
[   36.697596] hardirqs last  enabled at (21227): [<ffffffff811b7f21>] __up_console_sem+0x91/0xb0
[   36.698329] hardirqs last disabled at (21234): [<ffffffff811b7f06>] __up_console_sem+0x76/0xb0
[   36.698955] softirqs last  enabled at (20834): [<ffffffff83000329>] __do_softirq+0x329/0x490
[   36.699563] softirqs last disabled at (20825): [<ffffffff81111082>] irq_exit_rcu+0xd2/0x100
[   36.700145] ---[ end trace 0000000000000000 ]---
[   36.700581] ------------[ cut here ]------------
[   36.700945] WARNING: CPU: 1 PID: 696 at drivers/iommu/iommufd/pages.c:886 update_unpinned+0x75/0x80
[   36.701885] Modules linked in:
[   36.702115] CPU: 1 PID: 696 Comm: repro Tainted: G        W          6.1.0-a0a6c76cf2a5+ #1
[   36.702725] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   36.703538] RIP: 0010:update_unpinned+0x75/0x80
[   36.703875] Code: ac 2b ff 48 89 de 31 c9 31 d2 4c 29 e6 4c 89 ef e8 70 fb ff ff e8 bb ac 2b ff 5b 41 5c 41 5d 5d c3 cc cc cc cc e8 ab ac 2b ff <0f> 0b eb e7 0f 1f 80 00 00 00 00 0f 1f 44 00 00 55 48 89 e5 41 57
[   36.705186] RSP: 0018:ffffc90001293a08 EFLAGS: 00010246
[   36.705781] RAX: 0000000000000000 RBX: 0000000000000000 RCX: ffffffff81fdfdcf
[   36.706389] RDX: 0000000000000000 RSI: ffff8880135dd300 RDI: 0000000000000002
[   36.706911] RBP: ffffc90001293a20 R08: 0000000000000000 R09: ffff88807dd3b890
[   36.707410] R10: 0000000000001903 R11: 0000000000000000 R12: ffffffffffffffff
[   36.707921] R13: ffff888005ec8c00 R14: 0000000000000002 R15: 0000000000000002
[   36.708415] FS:  0000000000000000(0000) GS:ffff88807dd00000(0000) knlGS:0000000000000000
[   36.709030] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   36.709683] CR2: 00007f3777cf0500 CR3: 0000000003c12003 CR4: 0000000000770ee0
[   36.710296] PKRU: 55555554
[   36.710508] Call Trace:
[   36.710696]  <TASK>
[   36.710863]  iopt_pages_unfill_xarray+0x522/0x5c0
[   36.711265]  ? write_comp_data+0x2f/0x90
[   36.711563]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   36.711911]  ? write_comp_data+0x2f/0x90
[   36.712221]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   36.712562]  ? interval_tree_remove+0x291/0x4e0
[   36.712940]  ? write_comp_data+0x2f/0x90
[   36.713418]  iopt_area_remove_access+0x108/0x120
[   36.713981]  iommufd_access_unpin_pages+0x177/0x210
[   36.714533]  iommufd_test_access_unmap+0xe0/0x130
[   36.714887]  ? iommufd_test_access_unmap+0x130/0x130
[   36.715269]  iommufd_test_staccess_release+0x39/0x60
[   36.715642]  __fput+0x11f/0x450
[   36.715888]  ____fput+0x1e/0x30
[   36.716128]  task_work_run+0xb6/0x120
[   36.716429]  do_exit+0x521/0x1340
[   36.716727]  ? lockdep_hardirqs_on+0x8a/0x110
[   36.717268]  ? trace_hardirqs_on+0x3f/0x100
[   36.717789]  do_group_exit+0x5e/0xf0
[   36.718079]  __x64_sys_exit_group+0x25/0x30
[   36.718385]  do_syscall_64+0x3b/0x90
[   36.718681]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   36.719050] RIP: 0033:0x7f3777be6cf6
[   36.719324] Code: Unable to access opcode bytes at 0x7f3777be6ccc.
[   36.719780] RSP: 002b:00007ffd0d7278d8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
[   36.720312] RAX: ffffffffffffffda RBX: 00007f3777cf1490 RCX: 00007f3777be6cf6
[   36.720855] RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
[   36.721649] RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffff80
[   36.722313] R10: 0000000000000004 R11: 0000000000000246 R12: 00007f3777cf1490
[   36.722830] R13: 0000000000000001 R14: 00007f3777cf4e88 R15: 0000000000000000
[   36.723342]  </TASK>
[   36.723509] irq event stamp: 21697
[   36.723757] hardirqs last  enabled at (21705): [<ffffffff811b7f21>] __up_console_sem+0x91/0xb0
[   36.724383] hardirqs last disabled at (21712): [<ffffffff811b7f06>] __up_console_sem+0x76/0xb0
[   36.725053] softirqs last  enabled at (21726): [<ffffffff83000329>] __do_softirq+0x329/0x490
[   36.725984] softirqs last disabled at (21721): [<ffffffff81111082>] irq_exit_rcu+0xd2/0x100
[   36.726594] ---[ end trace 0000000000000000 ]---
[   36.727091] ------------[ cut here ]------------
[   36.727424] WARNING: CPU: 1 PID: 696 at drivers/iommu/iommufd/pages.c:1181 iopt_release_pages+0x159/0x190
[   36.728138] Modules linked in:
[   36.728367] CPU: 1 PID: 696 Comm: repro Tainted: G        W          6.1.0-a0a6c76cf2a5+ #1
[   36.729002] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   36.730149] RIP: 0010:iopt_release_pages+0x159/0x190
[   36.730546] Code: b5 11 ff eb cb e8 87 90 2b ff be 03 00 00 00 4c 89 f7 e8 6a 8b ce ff eb b7 e8 73 90 2b ff 0f 0b e9 ed fe ff ff e8 67 90 2b ff <0f> 0b e9 00 ff ff ff e8 5b 90 2b ff 0f 0b e9 07 ff ff ff e8 4f 90
[   36.731842] RSP: 0018:ffffc90001293c88 EFLAGS: 00010246
[   36.732215] RAX: 0000000000000000 RBX: ffff888005ec8c00 RCX: ffffffff81fe1957
[   36.732789] RDX: 0000000000000000 RSI: ffff8880135dd300 RDI: 0000000000000002
[   36.733532] RBP: ffffc90001293ca8 R08: 000000000000001c R09: 0000000000000001
[   36.734026] R10: ffff8880135de098 R11: 0000000000000000 R12: ffffffffffffffff
[   36.734550] R13: 0000000001000000 R14: 00000000017fffff R15: 0000000000000000
[   36.735052] FS:  0000000000000000(0000) GS:ffff88807dd00000(0000) knlGS:0000000000000000
[   36.735668] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   36.736086] CR2: 00007f3777cf0500 CR3: 0000000003c12003 CR4: 0000000000770ee0
[   36.736596] PKRU: 55555554
[   36.736858] Call Trace:
[   36.737143]  <TASK>
[   36.737419]  iopt_unmap_iova_range+0x1ef/0x2e0
[   36.737976]  iopt_unmap_all+0x2f/0x60
[   36.738372]  iommufd_ioas_destroy+0x2c/0x70
[   36.738693]  iommufd_fops_release+0xd4/0x170
[   36.739033]  ? iommufd_ctx_get+0x30/0x30
[   36.739345]  __fput+0x11f/0x450
[   36.739662]  ____fput+0x1e/0x30
[   36.739940]  task_work_run+0xb6/0x120
[   36.740242]  do_exit+0x521/0x1340
[   36.740499]  ? lockdep_hardirqs_on+0x8a/0x110
[   36.740892]  ? trace_hardirqs_on+0x3f/0x100
[   36.741418]  do_group_exit+0x5e/0xf0
[   36.741864]  __x64_sys_exit_group+0x25/0x30
[   36.742361]  do_syscall_64+0x3b/0x90
[   36.742652]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   36.743042] RIP: 0033:0x7f3777be6cf6
[   36.743331] Code: Unable to access opcode bytes at 0x7f3777be6ccc.
[   36.743776] RSP: 002b:00007ffd0d7278d8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
[   36.744341] RAX: ffffffffffffffda RBX: 00007f3777cf1490 RCX: 00007f3777be6cf6
[   36.744893] RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
[   36.745688] RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffff80
[   36.746273] R10: 0000000000000004 R11: 0000000000000246 R12: 00007f3777cf1490
[   36.746816] R13: 0000000000000001 R14: 00007f3777cf4e88 R15: 0000000000000000
[   36.747355]  </TASK>
[   36.747542] irq event stamp: 22189
[   36.747797] hardirqs last  enabled at (22197): [<ffffffff811b7f21>] __up_console_sem+0x91/0xb0
[   36.748423] hardirqs last disabled at (22204): [<ffffffff811b7f06>] __up_console_sem+0x76/0xb0
[   36.749097] softirqs last  enabled at (21902): [<ffffffff83000329>] __do_softirq+0x329/0x490
[   36.750074] softirqs last disabled at (21885): [<ffffffff81111082>] irq_exit_rcu+0xd2/0x100
[   36.750706] ---[ end trace 0000000000000000 ]---
[   36.886392] ------------[ cut here ]------------
[   36.886809] WARNING: CPU: 1 PID: 700 at drivers/iommu/iommufd/pages.c:294 __iopt_area_unfill_domain+0x152/0x560
[   36.887579] Modules linked in:
[   36.887819] CPU: 1 PID: 700 Comm: repro Tainted: G        W          6.1.0-a0a6c76cf2a5+ #1
[   36.888453] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   36.889307] RIP: 0010:__iopt_area_unfill_domain+0x152/0x560
[   36.889946] Code: a1 2b ff 44 8b 64 24 54 48 8b 44 24 48 31 ff 44 89 e6 48 89 44 24 38 e8 6c a2 2b ff 45 85 e4 0f 85 eb 01 00 00 e8 ee a0 2b ff <0f> 0b e8 e7 a0 2b ff 48 8b 44 24 38 89 5c 24 58 89 18 8b 44 24 54
[   36.892074] RSP: 0018:ffffc9000133bae0 EFLAGS: 00010246
[   36.892734] RAX: 0000000000000000 RBX: 00000000ffffffff RCX: ffffffff81fe0bd5
[   36.893645] RDX: 0000000000000000 RSI: ffff88800b375300 RDI: 0000000000000002
[   36.894430] RBP: ffffc9000133bd10 R08: 000000000003b5c5 R09: 000000000000000a
[   36.895325] R10: 000000000003b5a0 R11: 0000000000000024 R12: 0000000000000002
[   36.896173] R13: 0000000000000801 R14: 00000000000007ff R15: 0000000000000800
[   36.897108] FS:  00007f3777af9740(0000) GS:ffff88807dd00000(0000) knlGS:0000000000000000
[   36.898067] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   36.898774] CR2: 00007f3777c1e580 CR3: 000000000b332005 CR4: 0000000000770ee0
[   36.899595] PKRU: 55555554
[   36.899945] Call Trace:
[   36.900254]  <TASK>
[   36.900584]  ? __this_cpu_preempt_check+0x20/0x30
[   36.901219]  ? lock_is_held_type+0xe6/0x140
[   36.901769]  ? rcu_read_lock_sched_held+0x57/0x80
[   36.902337]  ? __mutex_lock+0x13a/0xf30
[   36.902834]  ? write_comp_data+0x2f/0x90
[   36.903314]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   36.903894]  iopt_area_unfill_domain+0x32/0x40
[   36.904451]  iopt_table_remove_domain+0x23f/0x4c0
[   36.905146]  iommufd_device_selftest_detach+0x3a/0x90
[   36.905784]  iommufd_selftest_destroy+0x55/0x70
[   36.906368]  iommufd_object_destroy_user+0xce/0x130
[   36.906965]  iommufd_destroy+0xa2/0xc0
[   36.907458]  iommufd_fops_ioctl+0x1ef/0x310
[   36.907965]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   36.908574]  ? write_comp_data+0x2f/0x90
[   36.909128]  __x64_sys_ioctl+0x10e/0x160
[   36.909646]  ? iommufd_get_object.part.6+0x1c0/0x1c0
[   36.910259]  do_syscall_64+0x3b/0x90
[   36.910719]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   36.911330] RIP: 0033:0x7f3777c1e59d
[   36.911775] Code: 00 c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d d3 08 0d 00 f7 d8 64 89 01 48
[   36.913788] RSP: 002b:00007ffd0d727918 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   36.914714] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f3777c1e59d
[   36.915574] RDX: 0000000020000140 RSI: 0000000000003b80 RDI: 0000000000000003
[   36.916485] RBP: 00007ffd0d727930 R08: 00007ffd0d727930 R09: 00007ffd0d727930
[   36.917360] R10: 00007ffd0d727930 R11: 0000000000000213 R12: 0000000000401180
[   36.918220] R13: 00007ffd0d727a50 R14: 0000000000000000 R15: 0000000000000000
[   36.919108]  </TASK>
[   36.919390] irq event stamp: 14747
[   36.919830] hardirqs last  enabled at (14755): [<ffffffff811b7f21>] __up_console_sem+0x91/0xb0
[   36.920924] hardirqs last disabled at (14764): [<ffffffff811b7f06>] __up_console_sem+0x76/0xb0
[   36.921908] softirqs last  enabled at (14572): [<ffffffff83000329>] __do_softirq+0x329/0x490
[   36.922879] softirqs last disabled at (14567): [<ffffffff81111082>] irq_exit_rcu+0xd2/0x100
[   36.923847] ---[ end trace 0000000000000000 ]---
[   36.924540] ------------[ cut here ]------------
[   36.925140] WARNING: CPU: 1 PID: 700 at drivers/iommu/iommufd/pages.c:1290 __iopt_area_unfill_domain+0x54f/0x560
[   36.926230] Modules linked in:
[   36.926601] CPU: 1 PID: 700 Comm: repro Tainted: G        W          6.1.0-a0a6c76cf2a5+ #1
[   36.927522] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   36.928834] RIP: 0010:__iopt_area_unfill_domain+0x54f/0x560
[   36.929509] Code: e8 86 9e 2b ff 85 db 0f 85 35 fb ff ff e8 09 9d 2b ff 0f 0b e9 29 fb ff ff e8 fd 9c 2b ff 0f 0b e9 69 fe ff ff e8 f1 9c 2b ff <0f> 0b e9 58 ff ff ff e8 65 2d dc 00 0f 1f 44 00 00 0f 1f 44 00 00
[   36.931589] RSP: 0018:ffffc9000133bae0 EFLAGS: 00010246
[   36.932237] RAX: 0000000000000000 RBX: 00000000ffffffff RCX: ffffffff81fe0d26
[   36.933151] RDX: 0000000000000000 RSI: ffff88800b375300 RDI: 0000000000000002
[   36.933985] RBP: ffffc9000133bd10 R08: 000000000003b5c5 R09: 000000000000000a
[   36.934842] R10: 000000000003b5a0 R11: 0000000000000024 R12: 00000000000007ff
[   36.935683] R13: 0000000000000801 R14: 00000000000007ff R15: 0000000000000800
[   36.936490] FS:  00007f3777af9740(0000) GS:ffff88807dd00000(0000) knlGS:0000000000000000
[   36.937475] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   36.938188] CR2: 00007f3777c1e580 CR3: 000000000b332005 CR4: 0000000000770ee0
[   36.939018] PKRU: 55555554
[   36.939353] Call Trace:
[   36.939662]  <TASK>
[   36.939983]  ? __this_cpu_preempt_check+0x20/0x30
[   36.940643]  ? lock_is_held_type+0xe6/0x140
[   36.941233]  ? rcu_read_lock_sched_held+0x57/0x80
[   36.941824]  ? __mutex_lock+0x13a/0xf30
[   36.942339]  ? write_comp_data+0x2f/0x90
[   36.942838]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   36.943439]  iopt_area_unfill_domain+0x32/0x40
[   36.944017]  iopt_table_remove_domain+0x23f/0x4c0
[   36.944632]  iommufd_device_selftest_detach+0x3a/0x90
[   36.945318]  iommufd_selftest_destroy+0x55/0x70
[   36.945902]  iommufd_object_destroy_user+0xce/0x130
[   36.946541]  iommufd_destroy+0xa2/0xc0
[   36.947000]  iommufd_fops_ioctl+0x1ef/0x310
[   36.947539]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   36.948137]  ? write_comp_data+0x2f/0x90
[   36.948691]  __x64_sys_ioctl+0x10e/0x160
[   36.949195]  ? iommufd_get_object.part.6+0x1c0/0x1c0
[   36.949819]  do_syscall_64+0x3b/0x90
[   36.950285]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   36.950936] RIP: 0033:0x7f3777c1e59d
[   36.951385] Code: 00 c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d d3 08 0d 00 f7 d8 64 89 01 48
[   36.953588] RSP: 002b:00007ffd0d727918 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   36.954501] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f3777c1e59d
[   36.955316] RDX: 0000000020000140 RSI: 0000000000003b80 RDI: 0000000000000003
[   36.956180] RBP: 00007ffd0d727930 R08: 00007ffd0d727930 R09: 00007ffd0d727930
[   36.957080] R10: 00007ffd0d727930 R11: 0000000000000213 R12: 0000000000401180
[   36.957932] R13: 00007ffd0d727a50 R14: 0000000000000000 R15: 0000000000000000
[   36.958819]  </TASK>
[   36.959091] irq event stamp: 15219
[   36.959501] hardirqs last  enabled at (15227): [<ffffffff811b7f21>] __up_console_sem+0x91/0xb0
[   36.960535] hardirqs last disabled at (15234): [<ffffffff811b7f06>] __up_console_sem+0x76/0xb0
[   36.961565] softirqs last  enabled at (14990): [<ffffffff83000329>] __do_softirq+0x329/0x490
[   36.962593] softirqs last disabled at (14981): [<ffffffff81111082>] irq_exit_rcu+0xd2/0x100
[   36.963585] ---[ end trace 0000000000000000 ]---
[   36.971841] ------------[ cut here ]------------
[   36.972214] WARNING: CPU: 1 PID: 700 at drivers/iommu/iommufd/pages.c:178 batch_unpin.isra.23+0x151/0x1a0
[   36.973100] Modules linked in:
[   36.973488] CPU: 1 PID: 700 Comm: repro Tainted: G        W          6.1.0-a0a6c76cf2a5+ #1
[   36.974117] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   36.974967] RIP: 0010:batch_unpin.isra.23+0x151/0x1a0
[   36.975346] Code: e8 c4 be 2b ff 48 8b 45 d0 48 85 c0 75 17 e8 26 bd 2b ff 48 8b 7d c8 48 89 de e8 fa bd 2b ff 48 39 5d c8 73 07 e8 0f bd 2b ff <0f> 0b e8 08 bd 2b ff 4d 29 e5 31 ff 41 83 c6 01 4c 89 ee 31 db e8
[   36.976731] RSP: 0018:ffffc9000133b9d8 EFLAGS: 00010246
[   36.977357] RAX: 0000000000000000 RBX: ffffffffffffffff RCX: ffffffff81fded8c
[   36.977902] RDX: 0000000000000000 RSI: ffff88800b375300 RDI: 0000000000000002
[   36.978426] RBP: ffffc9000133ba20 R08: 0000000000000000 R09: ffff88807dd3b890
[   36.978958] R10: 0000000000001945 R11: 0000000000000000 R12: 0000000000000001
[   36.979477] R13: 0000000000000001 R14: 0000000000000000 R15: ffff888005ec8c00
[   36.980018] FS:  0000000000000000(0000) GS:ffff88807dd00000(0000) knlGS:0000000000000000
[   36.980595] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   36.981220] CR2: 00007f3777cf0500 CR3: 0000000003c12004 CR4: 0000000000770ee0
[   36.982042] PKRU: 55555554
[   36.982382] Call Trace:
[   36.982688]  <TASK>
[   36.982965]  iopt_pages_unfill_xarray+0x39f/0x5c0
[   36.983366]  ? write_comp_data+0x2f/0x90
[   36.983675]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   36.984048]  ? write_comp_data+0x2f/0x90
[   36.984353]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   36.984751]  ? interval_tree_remove+0x291/0x4e0
[   36.985328]  ? write_comp_data+0x2f/0x90
[   36.985776]  iopt_area_remove_access+0x108/0x120
[   36.986138]  iommufd_access_unpin_pages+0x177/0x210
[   36.986555]  iommufd_test_access_unmap+0xe0/0x130
[   36.986922]  ? iommufd_test_access_unmap+0x130/0x130
[   36.987314]  iommufd_test_staccess_release+0x39/0x60
[   36.987692]  __fput+0x11f/0x450
[   36.987959]  ____fput+0x1e/0x30
[   36.988211]  task_work_run+0xb6/0x120
[   36.988526]  do_exit+0x521/0x1340
[   36.988841]  ? lockdep_hardirqs_on+0x8a/0x110
[   36.989393]  ? trace_hardirqs_on+0x3f/0x100
[   36.989942]  do_group_exit+0x5e/0xf0
[   36.990381]  __x64_sys_exit_group+0x25/0x30
[   36.990734]  do_syscall_64+0x3b/0x90
[   36.991014]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   36.991395] RIP: 0033:0x7f3777be6cf6
[   36.991685] Code: Unable to access opcode bytes at 0x7f3777be6ccc.
[   36.992140] RSP: 002b:00007ffd0d7278d8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
[   36.992742] RAX: ffffffffffffffda RBX: 00007f3777cf1490 RCX: 00007f3777be6cf6
[   36.993589] RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
[   36.994138] RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffff80
[   36.994666] R10: 0000000000000004 R11: 0000000000000246 R12: 00007f3777cf1490
[   36.995198] R13: 0000000000000001 R14: 00007f3777cf4e88 R15: 0000000000000000
[   36.995797]  </TASK>
[   36.995992] irq event stamp: 21275
[   36.996246] hardirqs last  enabled at (21283): [<ffffffff811b7f21>] __up_console_sem+0x91/0xb0
[   36.996916] hardirqs last disabled at (21292): [<ffffffff811b7f06>] __up_console_sem+0x76/0xb0
[   36.997917] softirqs last  enabled at (21224): [<ffffffff83000329>] __do_softirq+0x329/0x490
[   36.998578] softirqs last disabled at (21219): [<ffffffff81111082>] irq_exit_rcu+0xd2/0x100
[   36.999205] ---[ end trace 0000000000000000 ]---
[   36.999647] ------------[ cut here ]------------
[   36.999988] WARNING: CPU: 1 PID: 700 at drivers/iommu/iommufd/pages.c:886 update_unpinned+0x75/0x80
[   37.000699] Modules linked in:
[   37.001070] CPU: 1 PID: 700 Comm: repro Tainted: G        W          6.1.0-a0a6c76cf2a5+ #1
[   37.001906] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   37.002757] RIP: 0010:update_unpinned+0x75/0x80
[   37.003107] Code: ac 2b ff 48 89 de 31 c9 31 d2 4c 29 e6 4c 89 ef e8 70 fb ff ff e8 bb ac 2b ff 5b 41 5c 41 5d 5d c3 cc cc cc cc e8 ab ac 2b ff <0f> 0b eb e7 0f 1f 80 00 00 00 00 0f 1f 44 00 00 55 48 89 e5 41 57
[   37.004435] RSP: 0018:ffffc9000133ba08 EFLAGS: 00010246
[   37.004882] RAX: 0000000000000000 RBX: 0000000000000000 RCX: ffffffff81fdfdcf
[   37.005661] RDX: 0000000000000000 RSI: ffff88800b375300 RDI: 0000000000000002
[   37.006177] RBP: ffffc9000133ba20 R08: 0000000000000000 R09: ffff88807dd3b890
[   37.006714] R10: 0000000000001945 R11: 0000000000000000 R12: ffffffffffffffff
[   37.007232] R13: ffff888005ec8c00 R14: 0000000000000002 R15: 0000000000000002
[   37.007769] FS:  0000000000000000(0000) GS:ffff88807dd00000(0000) knlGS:0000000000000000
[   37.008356] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   37.008824] CR2: 00007f3777cf0500 CR3: 0000000003c12004 CR4: 0000000000770ee0
[   37.009681] PKRU: 55555554
[   37.009969] Call Trace:
[   37.010160]  <TASK>
[   37.010336]  iopt_pages_unfill_xarray+0x522/0x5c0
[   37.010744]  ? write_comp_data+0x2f/0x90
[   37.011066]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   37.011431]  ? write_comp_data+0x2f/0x90
[   37.011737]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   37.012117]  ? interval_tree_remove+0x291/0x4e0
[   37.012477]  ? write_comp_data+0x2f/0x90
[   37.012837]  iopt_area_remove_access+0x108/0x120
[   37.013450]  iommufd_access_unpin_pages+0x177/0x210
[   37.014091]  iommufd_test_access_unmap+0xe0/0x130
[   37.014599]  ? iommufd_test_access_unmap+0x130/0x130
[   37.014977]  iommufd_test_staccess_release+0x39/0x60
[   37.015384]  __fput+0x11f/0x450
[   37.015652]  ____fput+0x1e/0x30
[   37.015906]  task_work_run+0xb6/0x120
[   37.016213]  do_exit+0x521/0x1340
[   37.016486]  ? lockdep_hardirqs_on+0x8a/0x110
[   37.016861]  ? trace_hardirqs_on+0x3f/0x100
[   37.017411]  do_group_exit+0x5e/0xf0
[   37.017889]  __x64_sys_exit_group+0x25/0x30
[   37.018302]  do_syscall_64+0x3b/0x90
[   37.018615]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   37.018993] RIP: 0033:0x7f3777be6cf6
[   37.019262] Code: Unable to access opcode bytes at 0x7f3777be6ccc.
[   37.019726] RSP: 002b:00007ffd0d7278d8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
[   37.020284] RAX: ffffffffffffffda RBX: 00007f3777cf1490 RCX: 00007f3777be6cf6
[   37.020866] RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
[   37.021713] RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffff80
[   37.022318] R10: 0000000000000004 R11: 0000000000000246 R12: 00007f3777cf1490
[   37.022856] R13: 0000000000000001 R14: 00007f3777cf4e88 R15: 0000000000000000
[   37.023399]  </TASK>
[   37.023574] irq event stamp: 21755
[   37.023852] hardirqs last  enabled at (21763): [<ffffffff811b7f21>] __up_console_sem+0x91/0xb0
[   37.024524] hardirqs last disabled at (21770): [<ffffffff811b7f06>] __up_console_sem+0x76/0xb0
[   37.025230] softirqs last  enabled at (21224): [<ffffffff83000329>] __do_softirq+0x329/0x490
[   37.026193] softirqs last disabled at (21219): [<ffffffff81111082>] irq_exit_rcu+0xd2/0x100
[   37.026833] ---[ end trace 0000000000000000 ]---
[   37.027339] ------------[ cut here ]------------
[   37.027689] WARNING: CPU: 1 PID: 700 at drivers/iommu/iommufd/pages.c:1181 iopt_release_pages+0x159/0x190
[   37.028410] Modules linked in:
[   37.028695] CPU: 1 PID: 700 Comm: repro Tainted: G        W          6.1.0-a0a6c76cf2a5+ #1
[   37.029351] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   37.030158] RIP: 0010:iopt_release_pages+0x159/0x190
[   37.030546] Code: b5 11 ff eb cb e8 87 90 2b ff be 03 00 00 00 4c 89 f7 e8 6a 8b ce ff eb b7 e8 73 90 2b ff 0f 0b e9 ed fe ff ff e8 67 90 2b ff <0f> 0b e9 00 ff ff ff e8 5b 90 2b ff 0f 0b e9 07 ff ff ff e8 4f 90
[   37.031868] RSP: 0018:ffffc9000133bc88 EFLAGS: 00010246
[   37.032256] RAX: 0000000000000000 RBX: ffff888005ec8c00 RCX: ffffffff81fe1957
[   37.032883] RDX: 0000000000000000 RSI: ffff88800b375300 RDI: 0000000000000002
[   37.033406] RBP: ffffc9000133bca8 R08: 000000000000001c R09: 0000000000000001
[   37.033911] R10: ffff88800b376098 R11: 0000000000000000 R12: ffffffffffffffff
[   37.034437] R13: 0000000001000000 R14: 00000000017fffff R15: 0000000000000000
[   37.034952] FS:  0000000000000000(0000) GS:ffff88807dd00000(0000) knlGS:0000000000000000
[   37.035546] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   37.035977] CR2: 00007f3777cf0500 CR3: 0000000003c12004 CR4: 0000000000770ee0
[   37.036496] PKRU: 55555554
[   37.036726] Call Trace:
[   37.036916]  <TASK>
[   37.037089]  iopt_unmap_iova_range+0x1ef/0x2e0
[   37.037437]  iopt_unmap_all+0x2f/0x60
[   37.037728]  iommufd_ioas_destroy+0x2c/0x70
[   37.038054]  iommufd_fops_release+0xd4/0x170
[   37.038398]  ? iommufd_ctx_get+0x30/0x30
[   37.038714]  __fput+0x11f/0x450
[   37.038973]  ____fput+0x1e/0x30
[   37.039229]  task_work_run+0xb6/0x120
[   37.039524]  do_exit+0x521/0x1340
[   37.039784]  ? lockdep_hardirqs_on+0x8a/0x110
[   37.040126]  ? trace_hardirqs_on+0x3f/0x100
[   37.040461]  do_group_exit+0x5e/0xf0
[   37.040771]  __x64_sys_exit_group+0x25/0x30
[   37.041093]  do_syscall_64+0x3b/0x90
[   37.041374]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   37.041758] RIP: 0033:0x7f3777be6cf6
[   37.042038] Code: Unable to access opcode bytes at 0x7f3777be6ccc.
[   37.042503] RSP: 002b:00007ffd0d7278d8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
[   37.043055] RAX: ffffffffffffffda RBX: 00007f3777cf1490 RCX: 00007f3777be6cf6
[   37.043573] RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
[   37.044089] RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffff80
[   37.044606] R10: 0000000000000004 R11: 0000000000000246 R12: 00007f3777cf1490
[   37.045144] R13: 0000000000000001 R14: 00007f3777cf4e88 R15: 0000000000000000
[   37.045669]  </TASK>
[   37.045844] irq event stamp: 22313
[   37.046107] hardirqs last  enabled at (22321): [<ffffffff811b7f21>] __up_console_sem+0x91/0xb0
[   37.046750] hardirqs last disabled at (22328): [<ffffffff811b7f06>] __up_console_sem+0x76/0xb0
[   37.047367] softirqs last  enabled at (22026): [<ffffffff83000329>] __do_softirq+0x329/0x490
[   37.047985] softirqs last disabled at (21937): [<ffffffff81111082>] irq_exit_rcu+0xd2/0x100
[   37.048590] ---[ end trace 0000000000000000 ]---
[   37.115060] ------------[ cut here ]------------
[   37.115455] WARNING: CPU: 1 PID: 702 at drivers/iommu/iommufd/pages.c:294 __iopt_area_unfill_domain+0x152/0x560
[   37.116220] Modules linked in:
[   37.116462] CPU: 1 PID: 702 Comm: repro Tainted: G        W          6.1.0-a0a6c76cf2a5+ #1
[   37.117147] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   37.118241] RIP: 0010:__iopt_area_unfill_domain+0x152/0x560
[   37.118697] Code: a1 2b ff 44 8b 64 24 54 48 8b 44 24 48 31 ff 44 89 e6 48 89 44 24 38 e8 6c a2 2b ff 45 85 e4 0f 85 eb 01 00 00 e8 ee a0 2b ff <0f> 0b e8 e7 a0 2b ff 48 8b 44 24 38 89 5c 24 58 89 18 8b 44 24 54
[   37.120010] RSP: 0018:ffffc9000134bae0 EFLAGS: 00010246
[   37.120402] RAX: 0000000000000000 RBX: 00000000ffffffff RCX: ffffffff81fe0bd5
[   37.120952] RDX: 0000000000000000 RSI: ffff88800b375300 RDI: 0000000000000002
[   37.121476] RBP: ffffc9000134bd10 R08: 000000000003b5c5 R09: 000000000000000c
[   37.121997] R10: 000000000003b5a0 R11: 0000000000000024 R12: 0000000000000002
[   37.122536] R13: 0000000000000801 R14: 00000000000007ff R15: 0000000000000800
[   37.123056] FS:  00007f3777af9740(0000) GS:ffff88807dd00000(0000) knlGS:0000000000000000
[   37.123725] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   37.124152] CR2: 00007f3777c1e580 CR3: 000000000caae001 CR4: 0000000000770ee0
[   37.124702] PKRU: 55555554
[   37.124915] Call Trace:
[   37.125109]  <TASK>
[   37.125309]  ? __this_cpu_preempt_check+0x20/0x30
[   37.125681]  ? lock_is_held_type+0xe6/0x140
[   37.126016]  ? rcu_read_lock_sched_held+0x57/0x80
[   37.126376]  ? __mutex_lock+0x13a/0xf30
[   37.126678]  ? write_comp_data+0x2f/0x90
[   37.126982]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   37.127344]  iopt_area_unfill_domain+0x32/0x40
[   37.127687]  iopt_table_remove_domain+0x23f/0x4c0
[   37.128062]  iommufd_device_selftest_detach+0x3a/0x90
[   37.128468]  iommufd_selftest_destroy+0x55/0x70
[   37.128841]  iommufd_object_destroy_user+0xce/0x130
[   37.129229]  iommufd_destroy+0xa2/0xc0
[   37.129525]  iommufd_fops_ioctl+0x1ef/0x310
[   37.129854]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   37.130214]  ? write_comp_data+0x2f/0x90
[   37.130533]  __x64_sys_ioctl+0x10e/0x160
[   37.130838]  ? iommufd_get_object.part.6+0x1c0/0x1c0
[   37.131222]  do_syscall_64+0x3b/0x90
[   37.131504]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   37.131895] RIP: 0033:0x7f3777c1e59d
[   37.132174] Code: 00 c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d d3 08 0d 00 f7 d8 64 89 01 48
[   37.133536] RSP: 002b:00007ffd0d727918 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   37.134105] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f3777c1e59d
[   37.134646] RDX: 0000000020000140 RSI: 0000000000003b80 RDI: 0000000000000003
[   37.135161] RBP: 00007ffd0d727930 R08: 00007ffd0d727930 R09: 00007ffd0d727930
[   37.135685] R10: 00007ffd0d727930 R11: 0000000000000213 R12: 0000000000401180
[   37.136220] R13: 00007ffd0d727a50 R14: 0000000000000000 R15: 0000000000000000
[   37.136781]  </TASK>
[   37.136964] irq event stamp: 14725
[   37.137224] hardirqs last  enabled at (14733): [<ffffffff811b7f21>] __up_console_sem+0x91/0xb0
[   37.137858] hardirqs last disabled at (14740): [<ffffffff811b7f06>] __up_console_sem+0x76/0xb0
[   37.138489] softirqs last  enabled at (14356): [<ffffffff83000329>] __do_softirq+0x329/0x490
[   37.139103] softirqs last disabled at (14351): [<ffffffff81111082>] irq_exit_rcu+0xd2/0x100
[   37.139712] ---[ end trace 0000000000000000 ]---
[   37.140153] ------------[ cut here ]------------
[   37.140497] WARNING: CPU: 1 PID: 702 at drivers/iommu/iommufd/pages.c:1290 __iopt_area_unfill_domain+0x54f/0x560
[   37.141271] Modules linked in:
[   37.141521] CPU: 1 PID: 702 Comm: repro Tainted: G        W          6.1.0-a0a6c76cf2a5+ #1
[   37.142132] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   37.142956] RIP: 0010:__iopt_area_unfill_domain+0x54f/0x560
[   37.143379] Code: e8 86 9e 2b ff 85 db 0f 85 35 fb ff ff e8 09 9d 2b ff 0f 0b e9 29 fb ff ff e8 fd 9c 2b ff 0f 0b e9 69 fe ff ff e8 f1 9c 2b ff <0f> 0b e9 58 ff ff ff e8 65 2d dc 00 0f 1f 44 00 00 0f 1f 44 00 00
[   37.144755] RSP: 0018:ffffc9000134bae0 EFLAGS: 00010246
[   37.145146] RAX: 0000000000000000 RBX: 00000000ffffffff RCX: ffffffff81fe0d26
[   37.145661] RDX: 0000000000000000 RSI: ffff88800b375300 RDI: 0000000000000002
[   37.146179] RBP: ffffc9000134bd10 R08: 000000000003b5c5 R09: 000000000000000c
[   37.146706] R10: 000000000003b5a0 R11: 0000000000000024 R12: 00000000000007ff
[   37.147240] R13: 0000000000000801 R14: 00000000000007ff R15: 0000000000000800
[   37.147758] FS:  00007f3777af9740(0000) GS:ffff88807dd00000(0000) knlGS:0000000000000000
[   37.148351] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   37.148806] CR2: 00007f3777c1e580 CR3: 000000000caae001 CR4: 0000000000770ee0
[   37.149330] PKRU: 55555554
[   37.149544] Call Trace:
[   37.149735]  <TASK>
[   37.149934]  ? __this_cpu_preempt_check+0x20/0x30
[   37.150311]  ? lock_is_held_type+0xe6/0x140
[   37.150947]  ? rcu_read_lock_sched_held+0x57/0x80
[   37.151324]  ? __mutex_lock+0x13a/0xf30
[   37.151714]  ? write_comp_data+0x2f/0x90
[   37.152053]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   37.152420]  iopt_area_unfill_domain+0x32/0x40
[   37.152803]  iopt_table_remove_domain+0x23f/0x4c0
[   37.153224]  iommufd_device_selftest_detach+0x3a/0x90
[   37.153678]  iommufd_selftest_destroy+0x55/0x70
[   37.154029]  iommufd_object_destroy_user+0xce/0x130
[   37.154402]  iommufd_destroy+0xa2/0xc0
[   37.154796]  iommufd_fops_ioctl+0x1ef/0x310
[   37.155130]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   37.155494]  ? write_comp_data+0x2f/0x90
[   37.155811]  __x64_sys_ioctl+0x10e/0x160
[   37.156243]  ? iommufd_get_object.part.6+0x1c0/0x1c0
[   37.156630]  do_syscall_64+0x3b/0x90
[   37.156940]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   37.157380] RIP: 0033:0x7f3777c1e59d
[   37.157762] Code: 00 c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d d3 08 0d 00 f7 d8 64 89 01 48
[   37.159110] RSP: 002b:00007ffd0d727918 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   37.159662] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f3777c1e59d
[   37.160180] RDX: 0000000020000140 RSI: 0000000000003b80 RDI: 0000000000000003
[   37.160902] RBP: 00007ffd0d727930 R08: 00007ffd0d727930 R09: 00007ffd0d727930
[   37.161424] R10: 00007ffd0d727930 R11: 0000000000000213 R12: 0000000000401180
[   37.161949] R13: 00007ffd0d727a50 R14: 0000000000000000 R15: 0000000000000000
[   37.162504]  </TASK>
[   37.162676] irq event stamp: 15185
[   37.162935] hardirqs last  enabled at (15193): [<ffffffff811b7f21>] __up_console_sem+0x91/0xb0
[   37.163586] hardirqs last disabled at (15200): [<ffffffff811b7f06>] __up_console_sem+0x76/0xb0
[   37.164410] softirqs last  enabled at (14842): [<ffffffff83000329>] __do_softirq+0x329/0x490
[   37.165055] softirqs last disabled at (14837): [<ffffffff81111082>] irq_exit_rcu+0xd2/0x100
[   37.165672] ---[ end trace 0000000000000000 ]---
[   37.170267] ------------[ cut here ]------------
[   37.170692] WARNING: CPU: 1 PID: 702 at drivers/iommu/iommufd/pages.c:178 batch_unpin.isra.23+0x151/0x1a0
[   37.171831] Modules linked in:
[   37.172238] CPU: 1 PID: 702 Comm: repro Tainted: G        W          6.1.0-a0a6c76cf2a5+ #1
[   37.173497] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   37.174824] RIP: 0010:batch_unpin.isra.23+0x151/0x1a0
[   37.175560] Code: e8 c4 be 2b ff 48 8b 45 d0 48 85 c0 75 17 e8 26 bd 2b ff 48 8b 7d c8 48 89 de e8 fa bd 2b ff 48 39 5d c8 73 07 e8 0f bd 2b ff <0f> 0b e8 08 bd 2b ff 4d 29 e5 31 ff 41 83 c6 01 4c 89 ee 31 db e8
[   37.177819] RSP: 0018:ffffc9000134b9d8 EFLAGS: 00010246
[   37.178452] RAX: 0000000000000000 RBX: ffffffffffffffff RCX: ffffffff81fded8c
[   37.179248] RDX: 0000000000000000 RSI: ffff88800b375300 RDI: 0000000000000002
[   37.180237] RBP: ffffc9000134ba20 R08: 0000000000000000 R09: ffff88807dd3b890
[   37.181151] R10: 0000000000001964 R11: 0000000000000000 R12: 0000000000000001
[   37.181979] R13: 0000000000000001 R14: 0000000000000000 R15: ffff888005ec8c00
[   37.182938] FS:  0000000000000000(0000) GS:ffff88807dd00000(0000) knlGS:0000000000000000
[   37.183896] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   37.184756] CR2: 00007f3777cf0500 CR3: 0000000003c12004 CR4: 0000000000770ee0
[   37.185543] PKRU: 55555554
[   37.185891] Call Trace:
[   37.186201]  <TASK>
[   37.186505]  iopt_pages_unfill_xarray+0x39f/0x5c0
[   37.187187]  ? write_comp_data+0x2f/0x90
[   37.187693]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   37.188300]  ? write_comp_data+0x2f/0x90
[   37.188885]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   37.189578]  ? interval_tree_remove+0x291/0x4e0
[   37.190142]  ? write_comp_data+0x2f/0x90
[   37.190648]  iopt_area_remove_access+0x108/0x120
[   37.191228]  iommufd_access_unpin_pages+0x177/0x210
[   37.191856]  iommufd_test_access_unmap+0xe0/0x130
[   37.192630]  ? iommufd_test_access_unmap+0x130/0x130
[   37.193309]  iommufd_test_staccess_release+0x39/0x60
[   37.193924]  __fput+0x11f/0x450
[   37.194351]  ____fput+0x1e/0x30
[   37.194747]  task_work_run+0xb6/0x120
[   37.195293]  do_exit+0x521/0x1340
[   37.195713]  ? lockdep_hardirqs_on+0x8a/0x110
[   37.196280]  ? trace_hardirqs_on+0x3f/0x100
[   37.196973]  do_group_exit+0x5e/0xf0
[   37.197442]  __x64_sys_exit_group+0x25/0x30
[   37.197960]  do_syscall_64+0x3b/0x90
[   37.198392]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   37.198978] RIP: 0033:0x7f3777be6cf6
[   37.199400] Code: Unable to access opcode bytes at 0x7f3777be6ccc.
[   37.200170] RSP: 002b:00007ffd0d7278d8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
[   37.201193] RAX: ffffffffffffffda RBX: 00007f3777cf1490 RCX: 00007f3777be6cf6
[   37.202017] RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
[   37.202866] RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffff80
[   37.203753] R10: 0000000000000004 R11: 0000000000000246 R12: 00007f3777cf1490
[   37.204619] R13: 0000000000000001 R14: 00007f3777cf4e88 R15: 0000000000000000
[   37.205690]  </TASK>
[   37.205978] irq event stamp: 21147
[   37.206389] hardirqs last  enabled at (21155): [<ffffffff811b7f21>] __up_console_sem+0x91/0xb0
[   37.207352] hardirqs last disabled at (21162): [<ffffffff811b7f06>] __up_console_sem+0x76/0xb0
[   37.208517] softirqs last  enabled at (21136): [<ffffffff83000329>] __do_softirq+0x329/0x490
[   37.209620] softirqs last disabled at (21129): [<ffffffff81111082>] irq_exit_rcu+0xd2/0x100
[   37.210773] ---[ end trace 0000000000000000 ]---
[   37.211443] ------------[ cut here ]------------
[   37.211966] WARNING: CPU: 1 PID: 702 at drivers/iommu/iommufd/pages.c:886 update_unpinned+0x75/0x80
[   37.213165] Modules linked in:
[   37.213537] CPU: 1 PID: 702 Comm: repro Tainted: G        W          6.1.0-a0a6c76cf2a5+ #1
[   37.214488] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   37.215934] RIP: 0010:update_unpinned+0x75/0x80
[   37.216495] Code: ac 2b ff 48 89 de 31 c9 31 d2 4c 29 e6 4c 89 ef e8 70 fb ff ff e8 bb ac 2b ff 5b 41 5c 41 5d 5d c3 cc cc cc cc e8 ab ac 2b ff <0f> 0b eb e7 0f 1f 80 00 00 00 00 0f 1f 44 00 00 55 48 89 e5 41 57
[   37.218812] RSP: 0018:ffffc9000134ba08 EFLAGS: 00010246
[   37.219425] RAX: 0000000000000000 RBX: 0000000000000000 RCX: ffffffff81fdfdcf
[   37.220242] RDX: 0000000000000000 RSI: ffff88800b375300 RDI: 0000000000000002
[   37.221107] RBP: ffffc9000134ba20 R08: 0000000000000000 R09: ffff88807dd3b890
[   37.221999] R10: 0000000000001964 R11: 0000000000000000 R12: ffffffffffffffff
[   37.222830] R13: ffff888005ec8c00 R14: 0000000000000002 R15: 0000000000000002
[   37.223758] FS:  0000000000000000(0000) GS:ffff88807dd00000(0000) knlGS:0000000000000000
[   37.224759] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   37.225445] CR2: 00007f3777cf0500 CR3: 0000000003c12004 CR4: 0000000000770ee0
[   37.226404] PKRU: 55555554
[   37.226730] Call Trace:
[   37.227020]  <TASK>
[   37.227287]  iopt_pages_unfill_xarray+0x522/0x5c0
[   37.227932]  ? write_comp_data+0x2f/0x90
[   37.228556]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   37.229221]  ? write_comp_data+0x2f/0x90
[   37.229725]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   37.230283]  ? interval_tree_remove+0x291/0x4e0
[   37.230812]  ? write_comp_data+0x2f/0x90
[   37.231282]  iopt_area_remove_access+0x108/0x120
[   37.231846]  iommufd_access_unpin_pages+0x177/0x210
[   37.232457]  iommufd_test_access_unmap+0xe0/0x130
[   37.233038]  ? iommufd_test_access_unmap+0x130/0x130
[   37.233633]  iommufd_test_staccess_release+0x39/0x60
[   37.234218]  __fput+0x11f/0x450
[   37.234626]  ____fput+0x1e/0x30
[   37.235006]  task_work_run+0xb6/0x120
[   37.235460]  do_exit+0x521/0x1340
[   37.235863]  ? lockdep_hardirqs_on+0x8a/0x110
[   37.236404]  ? trace_hardirqs_on+0x3f/0x100
[   37.236972]  do_group_exit+0x5e/0xf0
[   37.237391]  __x64_sys_exit_group+0x25/0x30
[   37.237872]  do_syscall_64+0x3b/0x90
[   37.238298]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   37.238898] RIP: 0033:0x7f3777be6cf6
[   37.239321] Code: Unable to access opcode bytes at 0x7f3777be6ccc.
[   37.240011] RSP: 002b:00007ffd0d7278d8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
[   37.240903] RAX: ffffffffffffffda RBX: 00007f3777cf1490 RCX: 00007f3777be6cf6
[   37.241669] RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
[   37.242459] RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffff80
[   37.243280] R10: 0000000000000004 R11: 0000000000000246 R12: 00007f3777cf1490
[   37.244086] R13: 0000000000000001 R14: 00007f3777cf4e88 R15: 0000000000000000
[   37.244958]  </TASK>
[   37.245233] irq event stamp: 21645
[   37.245634] hardirqs last  enabled at (21653): [<ffffffff811b7f21>] __up_console_sem+0x91/0xb0
[   37.246602] hardirqs last disabled at (21660): [<ffffffff811b7f06>] __up_console_sem+0x76/0xb0
[   37.247533] softirqs last  enabled at (21404): [<ffffffff83000329>] __do_softirq+0x329/0x490
[   37.248501] softirqs last disabled at (21393): [<ffffffff81111082>] irq_exit_rcu+0xd2/0x100
[   37.249484] ---[ end trace 0000000000000000 ]---
[   37.250434] ------------[ cut here ]------------
[   37.250955] WARNING: CPU: 1 PID: 702 at drivers/iommu/iommufd/pages.c:1181 iopt_release_pages+0x159/0x190
[   37.252032] Modules linked in:
[   37.252408] CPU: 1 PID: 702 Comm: repro Tainted: G        W          6.1.0-a0a6c76cf2a5+ #1
[   37.253405] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   37.254693] RIP: 0010:iopt_release_pages+0x159/0x190
[   37.255287] Code: b5 11 ff eb cb e8 87 90 2b ff be 03 00 00 00 4c 89 f7 e8 6a 8b ce ff eb b7 e8 73 90 2b ff 0f 0b e9 ed fe ff ff e8 67 90 2b ff <0f> 0b e9 00 ff ff ff e8 5b 90 2b ff 0f 0b e9 07 ff ff ff e8 4f 90
[   37.257340] RSP: 0018:ffffc9000134bc88 EFLAGS: 00010246
[   37.257952] RAX: 0000000000000000 RBX: ffff888005ec8c00 RCX: ffffffff81fe1957
[   37.258763] RDX: 0000000000000000 RSI: ffff88800b375300 RDI: 0000000000000002
[   37.259470] RBP: ffffc9000134bca8 R08: 000000000000001c R09: 0000000000000001
[   37.260276] R10: ffff88800b376098 R11: 0000000000000000 R12: ffffffffffffffff
[   37.261137] R13: 0000000001000000 R14: 00000000017fffff R15: 0000000000000000
[   37.261930] FS:  0000000000000000(0000) GS:ffff88807dd00000(0000) knlGS:0000000000000000
[   37.262861] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   37.263541] CR2: 00007f3777cf0500 CR3: 0000000003c12004 CR4: 0000000000770ee0
[   37.264347] PKRU: 55555554
[   37.264711] Call Trace:
[   37.265021]  <TASK>
[   37.265297]  iopt_unmap_iova_range+0x1ef/0x2e0
[   37.265855]  iopt_unmap_all+0x2f/0x60
[   37.266300]  iommufd_ioas_destroy+0x2c/0x70
[   37.266812]  iommufd_fops_release+0xd4/0x170
[   37.267331]  ? iommufd_ctx_get+0x30/0x30
[   37.267810]  __fput+0x11f/0x450
[   37.268228]  ____fput+0x1e/0x30
[   37.268610]  task_work_run+0xb6/0x120
[   37.269106]  do_exit+0x521/0x1340
[   37.269522]  ? lockdep_hardirqs_on+0x8a/0x110
[   37.270063]  ? trace_hardirqs_on+0x3f/0x100
[   37.270603]  do_group_exit+0x5e/0xf0
[   37.271049]  __x64_sys_exit_group+0x25/0x30
[   37.271548]  do_syscall_64+0x3b/0x90
[   37.271997]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   37.272596] RIP: 0033:0x7f3777be6cf6
[   37.273062] Code: Unable to access opcode bytes at 0x7f3777be6ccc.
[   37.273789] RSP: 002b:00007ffd0d7278d8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
[   37.274680] RAX: ffffffffffffffda RBX: 00007f3777cf1490 RCX: 00007f3777be6cf6
[   37.275476] RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
[   37.276288] RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffff80
[   37.277128] R10: 0000000000000004 R11: 0000000000000246 R12: 00007f3777cf1490
[   37.277941] R13: 0000000000000001 R14: 00007f3777cf4e88 R15: 0000000000000000
[   37.278795]  </TASK>
[   37.279073] irq event stamp: 22127
[   37.279462] hardirqs last  enabled at (22135): [<ffffffff811b7f21>] __up_console_sem+0x91/0xb0
[   37.280421] hardirqs last disabled at (22142): [<ffffffff811b7f06>] __up_console_sem+0x76/0xb0
[   37.281437] softirqs last  enabled at (21814): [<ffffffff83000329>] __do_softirq+0x329/0x490
[   37.282381] softirqs last disabled at (21809): [<ffffffff81111082>] irq_exit_rcu+0xd2/0x100
[   37.283353] ---[ end trace 0000000000000000 ]---
[   37.522663] ------------[ cut here ]------------
[   37.523035] WARNING: CPU: 1 PID: 709 at drivers/iommu/iommufd/pages.c:294 __iopt_area_unfill_domain+0x152/0x560
[   37.523766] Modules linked in:
[   37.524000] CPU: 1 PID: 709 Comm: repro Tainted: G        W          6.1.0-a0a6c76cf2a5+ #1
[   37.524585] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   37.525410] RIP: 0010:__iopt_area_unfill_domain+0x152/0x560
[   37.525823] Code: a1 2b ff 44 8b 64 24 54 48 8b 44 24 48 31 ff 44 89 e6 48 89 44 24 38 e8 6c a2 2b ff 45 85 e4 0f 85 eb 01 00 00 e8 ee a0 2b ff <0f> 0b e8 e7 a0 2b ff 48 8b 44 24 38 89 5c 24 58 89 18 8b 44 24 54
[   37.527539] RSP: 0018:ffffc90001383ae0 EFLAGS: 00010246
[   37.528207] RAX: 0000000000000000 RBX: 00000000ffffffff RCX: ffffffff81fe0bd5
[   37.528893] RDX: 0000000000000000 RSI: ffff88801235d300 RDI: 0000000000000002
[   37.529655] RBP: ffffc90001383d10 R08: 000000000003b5c5 R09: 000000000000000f
[   37.530329] R10: 000000000003b5a0 R11: 0000000000000024 R12: 0000000000000004
[   37.531000] R13: 0000000000000801 R14: 00000000000007ff R15: 0000000000000800
[   37.531665] FS:  00007f3777af9740(0000) GS:ffff88807dd00000(0000) knlGS:0000000000000000
[   37.532537] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   37.533104] CR2: 00007f3777c1e580 CR3: 000000000b324004 CR4: 0000000000770ee0
[   37.533778] PKRU: 55555554
[   37.534048] Call Trace:
[   37.534291]  <TASK>
[   37.534585]  ? __this_cpu_preempt_check+0x20/0x30
[   37.535059]  ? lock_is_held_type+0xe6/0x140
[   37.535475]  ? rcu_read_lock_sched_held+0x57/0x80
[   37.535940]  ? __mutex_lock+0x13a/0xf30
[   37.536408]  ? write_comp_data+0x2f/0x90
[   37.536811]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   37.537276]  iopt_area_unfill_domain+0x32/0x40
[   37.537724]  iopt_table_remove_domain+0x23f/0x4c0
[   37.538190]  iommufd_device_selftest_detach+0x3a/0x90
[   37.538699]  iommufd_selftest_destroy+0x55/0x70
[   37.539143]  iommufd_object_destroy_user+0xce/0x130
[   37.539628]  iommufd_destroy+0xa2/0xc0
[   37.540053]  iommufd_fops_ioctl+0x1ef/0x310
[   37.540462]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   37.540943]  ? write_comp_data+0x2f/0x90
[   37.541340]  __x64_sys_ioctl+0x10e/0x160
[   37.541738]  ? iommufd_get_object.part.6+0x1c0/0x1c0
[   37.542222]  do_syscall_64+0x3b/0x90
[   37.542619]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   37.543135] RIP: 0033:0x7f3777c1e59d
[   37.543486] Code: 00 c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d d3 08 0d 00 f7 d8 64 89 01 48
[   37.545304] RSP: 002b:00007ffd0d727918 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   37.546027] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f3777c1e59d
[   37.546703] RDX: 0000000020000140 RSI: 0000000000003b80 RDI: 0000000000000003
[   37.547461] RBP: 00007ffd0d727930 R08: 00007ffd0d727930 R09: 00007ffd0d727930
[   37.548130] R10: 00007ffd0d727930 R11: 0000000000000213 R12: 0000000000401180
[   37.548904] R13: 00007ffd0d727a50 R14: 0000000000000000 R15: 0000000000000000
[   37.549598]  </TASK>
[   37.549819] irq event stamp: 14723
[   37.550149] hardirqs last  enabled at (14731): [<ffffffff811b7f21>] __up_console_sem+0x91/0xb0
[   37.550967] hardirqs last disabled at (14738): [<ffffffff811b7f06>] __up_console_sem+0x76/0xb0
[   37.551866] softirqs last  enabled at (14180): [<ffffffff83000329>] __do_softirq+0x329/0x490
[   37.552693] softirqs last disabled at (14755): [<ffffffff81111082>] irq_exit_rcu+0xd2/0x100
[   37.553483] ---[ end trace 0000000000000000 ]---
[   37.554016] ------------[ cut here ]------------
[   37.554547] WARNING: CPU: 1 PID: 709 at drivers/iommu/iommufd/pages.c:1290 __iopt_area_unfill_domain+0x54f/0x560
[   37.555527] Modules linked in:
[   37.555854] CPU: 1 PID: 709 Comm: repro Tainted: G        W          6.1.0-a0a6c76cf2a5+ #1
[   37.556744] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   37.557827] RIP: 0010:__iopt_area_unfill_domain+0x54f/0x560
[   37.558387] Code: e8 86 9e 2b ff 85 db 0f 85 35 fb ff ff e8 09 9d 2b ff 0f 0b e9 29 fb ff ff e8 fd 9c 2b ff 0f 0b e9 69 fe ff ff e8 f1 9c 2b ff <0f> 0b e9 58 ff ff ff e8 65 2d dc 00 0f 1f 44 00 00 0f 1f 44 00 00
[   37.560215] RSP: 0018:ffffc90001383ae0 EFLAGS: 00010246
[   37.560840] RAX: 0000000000000000 RBX: 00000000ffffffff RCX: ffffffff81fe0d26
[   37.561534] RDX: 0000000000000000 RSI: ffff88801235d300 RDI: 0000000000000002
[   37.562235] RBP: ffffc90001383d10 R08: 000000000003b5c5 R09: 000000000000000f
[   37.562927] R10: 000000000003b5a0 R11: 0000000000000024 R12: 00000000000007ff
[   37.563619] R13: 0000000000000801 R14: 00000000000007ff R15: 0000000000000800
[   37.564310] FS:  00007f3777af9740(0000) GS:ffff88807dd00000(0000) knlGS:0000000000000000
[   37.565103] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   37.565672] CR2: 00007f3777c1e580 CR3: 000000000b324004 CR4: 0000000000770ee0
[   37.566367] PKRU: 55555554
[   37.566646] Call Trace:
[   37.566892]  <TASK>
[   37.567135]  ? __this_cpu_preempt_check+0x20/0x30
[   37.567615]  ? lock_is_held_type+0xe6/0x140
[   37.568049]  ? rcu_read_lock_sched_held+0x57/0x80
[   37.568525]  ? __mutex_lock+0x13a/0xf30
[   37.568942]  ? write_comp_data+0x2f/0x90
[   37.569346]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   37.569828]  iopt_area_unfill_domain+0x32/0x40
[   37.570283]  iopt_table_remove_domain+0x23f/0x4c0
[   37.570765]  iommufd_device_selftest_detach+0x3a/0x90
[   37.571280]  iommufd_selftest_destroy+0x55/0x70
[   37.571758]  iommufd_object_destroy_user+0xce/0x130
[   37.572257]  iommufd_destroy+0xa2/0xc0
[   37.572641]  iommufd_fops_ioctl+0x1ef/0x310
[   37.573098]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   37.573573]  ? write_comp_data+0x2f/0x90
[   37.573982]  __x64_sys_ioctl+0x10e/0x160
[   37.574390]  ? iommufd_get_object.part.6+0x1c0/0x1c0
[   37.574895]  do_syscall_64+0x3b/0x90
[   37.575264]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   37.575772] RIP: 0033:0x7f3777c1e59d
[   37.576136] Code: 00 c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d d3 08 0d 00 f7 d8 64 89 01 48
[   37.577933] RSP: 002b:00007ffd0d727918 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   37.578683] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f3777c1e59d
[   37.579373] RDX: 0000000020000140 RSI: 0000000000003b80 RDI: 0000000000000003
[   37.580067] RBP: 00007ffd0d727930 R08: 00007ffd0d727930 R09: 00007ffd0d727930
[   37.580782] R10: 00007ffd0d727930 R11: 0000000000000213 R12: 0000000000401180
[   37.581481] R13: 00007ffd0d727a50 R14: 0000000000000000 R15: 0000000000000000
[   37.582191]  </TASK>
[   37.582420] irq event stamp: 15203
[   37.582762] hardirqs last  enabled at (15211): [<ffffffff811b7f21>] __up_console_sem+0x91/0xb0
[   37.583601] hardirqs last disabled at (15218): [<ffffffff811b7f06>] __up_console_sem+0x76/0xb0
[   37.584440] softirqs last  enabled at (15136): [<ffffffff83000329>] __do_softirq+0x329/0x490
[   37.585298] softirqs last disabled at (15131): [<ffffffff81111082>] irq_exit_rcu+0xd2/0x100
[   37.586116] ---[ end trace 0000000000000000 ]---
[   37.590822] ------------[ cut here ]------------
[   37.591298] WARNING: CPU: 1 PID: 709 at drivers/iommu/iommufd/pages.c:178 batch_unpin.isra.23+0x151/0x1a0
[   37.592241] Modules linked in:
[   37.592556] CPU: 1 PID: 709 Comm: repro Tainted: G        W          6.1.0-a0a6c76cf2a5+ #1
[   37.593398] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   37.594499] RIP: 0010:batch_unpin.isra.23+0x151/0x1a0
[   37.595008] Code: e8 c4 be 2b ff 48 8b 45 d0 48 85 c0 75 17 e8 26 bd 2b ff 48 8b 7d c8 48 89 de e8 fa bd 2b ff 48 39 5d c8 73 07 e8 0f bd 2b ff <0f> 0b e8 08 bd 2b ff 4d 29 e5 31 ff 41 83 c6 01 4c 89 ee 31 db e8
[   37.596808] RSP: 0018:ffffc900013839d8 EFLAGS: 00010246
[   37.597331] RAX: 0000000000000000 RBX: ffffffffffffffff RCX: ffffffff81fded8c
[   37.598018] RDX: 0000000000000000 RSI: ffff88801235d300 RDI: 0000000000000002
[   37.598716] RBP: ffffc90001383a20 R08: 0000000000000000 R09: ffff88807dd3b890
[   37.599404] R10: 00000000000019ce R11: 0000000000000000 R12: 0000000000000001
[   37.600089] R13: 0000000000000001 R14: 0000000000000000 R15: ffff888005ec9400
[   37.600800] FS:  0000000000000000(0000) GS:ffff88807dd00000(0000) knlGS:0000000000000000
[   37.601583] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   37.602164] CR2: 00007f3777cf0500 CR3: 0000000003c12005 CR4: 0000000000770ee0
[   37.602863] PKRU: 55555554
[   37.603136] Call Trace:
[   37.603386]  <TASK>
[   37.603617]  iopt_pages_unfill_xarray+0x39f/0x5c0
[   37.604129]  ? write_comp_data+0x2f/0x90
[   37.604534]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   37.605029]  ? write_comp_data+0x2f/0x90
[   37.605437]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   37.605914]  ? interval_tree_remove+0x291/0x4e0
[   37.606378]  ? write_comp_data+0x2f/0x90
[   37.606790]  iopt_area_remove_access+0x108/0x120
[   37.607264]  iommufd_access_unpin_pages+0x177/0x210
[   37.607777]  iommufd_test_access_unmap+0xe0/0x130
[   37.608258]  ? iommufd_test_access_unmap+0x130/0x130
[   37.608782]  iommufd_test_staccess_release+0x39/0x60
[   37.609292]  __fput+0x11f/0x450
[   37.609630]  ____fput+0x1e/0x30
[   37.609960]  task_work_run+0xb6/0x120
[   37.610348]  do_exit+0x521/0x1340
[   37.610695]  ? lockdep_hardirqs_on+0x8a/0x110
[   37.611142]  ? trace_hardirqs_on+0x3f/0x100
[   37.611574]  do_group_exit+0x5e/0xf0
[   37.611946]  __x64_sys_exit_group+0x25/0x30
[   37.612370]  do_syscall_64+0x3b/0x90
[   37.612769]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   37.613279] RIP: 0033:0x7f3777be6cf6
[   37.613644] Code: Unable to access opcode bytes at 0x7f3777be6ccc.
[   37.614244] RSP: 002b:00007ffd0d7278d8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
[   37.614983] RAX: ffffffffffffffda RBX: 00007f3777cf1490 RCX: 00007f3777be6cf6
[   37.615669] RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
[   37.616358] RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffff80
[   37.617070] R10: 0000000000000004 R11: 0000000000000246 R12: 00007f3777cf1490
[   37.617764] R13: 0000000000000001 R14: 00007f3777cf4e88 R15: 0000000000000000
[   37.618462]  </TASK>
[   37.618691] irq event stamp: 21111
[   37.619019] hardirqs last  enabled at (21119): [<ffffffff811b7f21>] __up_console_sem+0x91/0xb0
[   37.619828] hardirqs last disabled at (21126): [<ffffffff811b7f06>] __up_console_sem+0x76/0xb0
[   37.620635] softirqs last  enabled at (21020): [<ffffffff83000329>] __do_softirq+0x329/0x490
[   37.621480] softirqs last disabled at (21139): [<ffffffff81111082>] irq_exit_rcu+0xd2/0x100
[   37.622271] ---[ end trace 0000000000000000 ]---
[   37.622815] ------------[ cut here ]------------
[   37.623260] WARNING: CPU: 1 PID: 709 at drivers/iommu/iommufd/pages.c:886 update_unpinned+0x75/0x80
[   37.624113] Modules linked in:
[   37.624416] CPU: 1 PID: 709 Comm: repro Tainted: G        W          6.1.0-a0a6c76cf2a5+ #1
[   37.625264] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   37.626328] RIP: 0010:update_unpinned+0x75/0x80
[   37.626778] Code: ac 2b ff 48 89 de 31 c9 31 d2 4c 29 e6 4c 89 ef e8 70 fb ff ff e8 bb ac 2b ff 5b 41 5c 41 5d 5d c3 cc cc cc cc e8 ab ac 2b ff <0f> 0b eb e7 0f 1f 80 00 00 00 00 0f 1f 44 00 00 55 48 89 e5 41 57
[   37.628497] RSP: 0018:ffffc90001383a08 EFLAGS: 00010246
[   37.629023] RAX: 0000000000000000 RBX: 0000000000000000 RCX: ffffffff81fdfdcf
[   37.629697] RDX: 0000000000000000 RSI: ffff88801235d300 RDI: 0000000000000002
[   37.630368] RBP: ffffc90001383a20 R08: 0000000000000000 R09: ffff88807dd3b890
[   37.631043] R10: 00000000000019ce R11: 0000000000000000 R12: ffffffffffffffff
[   37.631716] R13: ffff888005ec9400 R14: 0000000000000002 R15: 0000000000000002
[   37.632379] FS:  0000000000000000(0000) GS:ffff88807dd00000(0000) knlGS:0000000000000000
[   37.633146] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   37.633694] CR2: 00007f3777cf0500 CR3: 0000000003c12005 CR4: 0000000000770ee0
[   37.634373] PKRU: 55555554
[   37.634649] Call Trace:
[   37.634891]  <TASK>
[   37.635107]  iopt_pages_unfill_xarray+0x522/0x5c0
[   37.635600]  ? write_comp_data+0x2f/0x90
[   37.635993]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   37.636456]  ? write_comp_data+0x2f/0x90
[   37.636868]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   37.637334]  ? interval_tree_remove+0x291/0x4e0
[   37.637791]  ? write_comp_data+0x2f/0x90
[   37.638186]  iopt_area_remove_access+0x108/0x120
[   37.638655]  iommufd_access_unpin_pages+0x177/0x210
[   37.639144]  iommufd_test_access_unmap+0xe0/0x130
[   37.639608]  ? iommufd_test_access_unmap+0x130/0x130
[   37.640098]  iommufd_test_staccess_release+0x39/0x60
[   37.640593]  __fput+0x11f/0x450
[   37.640937]  ____fput+0x1e/0x30
[   37.641205]  task_work_run+0xb6/0x120
[   37.641495]  do_exit+0x521/0x1340
[   37.641745]  ? lockdep_hardirqs_on+0x8a/0x110
[   37.642071]  ? trace_hardirqs_on+0x3f/0x100
[   37.642386]  do_group_exit+0x5e/0xf0
[   37.642666]  __x64_sys_exit_group+0x25/0x30
[   37.642979]  do_syscall_64+0x3b/0x90
[   37.643253]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   37.643617] RIP: 0033:0x7f3777be6cf6
[   37.643885] Code: Unable to access opcode bytes at 0x7f3777be6ccc.
[   37.644322] RSP: 002b:00007ffd0d7278d8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
[   37.644872] RAX: ffffffffffffffda RBX: 00007f3777cf1490 RCX: 00007f3777be6cf6
[   37.645362] RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
[   37.645858] RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffff80
[   37.646364] R10: 0000000000000004 R11: 0000000000000246 R12: 00007f3777cf1490
[   37.646893] R13: 0000000000000001 R14: 00007f3777cf4e88 R15: 0000000000000000
[   37.647414]  </TASK>
[   37.647587] irq event stamp: 21687
[   37.647848] hardirqs last  enabled at (21695): [<ffffffff811b7f21>] __up_console_sem+0x91/0xb0
[   37.648485] hardirqs last disabled at (21702): [<ffffffff811b7f06>] __up_console_sem+0x76/0xb0
[   37.649133] softirqs last  enabled at (21294): [<ffffffff83000329>] __do_softirq+0x329/0x490
[   37.649747] softirqs last disabled at (21209): [<ffffffff81111082>] irq_exit_rcu+0xd2/0x100
[   37.650351] ---[ end trace 0000000000000000 ]---
[   37.650847] ------------[ cut here ]------------
[   37.651190] WARNING: CPU: 1 PID: 709 at drivers/iommu/iommufd/pages.c:1181 iopt_release_pages+0x159/0x190
[   37.651887] Modules linked in:
[   37.652123] CPU: 1 PID: 709 Comm: repro Tainted: G        W          6.1.0-a0a6c76cf2a5+ #1
[   37.652743] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   37.653549] RIP: 0010:iopt_release_pages+0x159/0x190
[   37.653919] Code: b5 11 ff eb cb e8 87 90 2b ff be 03 00 00 00 4c 89 f7 e8 6a 8b ce ff eb b7 e8 73 90 2b ff 0f 0b e9 ed fe ff ff e8 67 90 2b ff <0f> 0b e9 00 ff ff ff e8 5b 90 2b ff 0f 0b e9 07 ff ff ff e8 4f 90
[   37.655244] RSP: 0018:ffffc90001383c88 EFLAGS: 00010246
[   37.655631] RAX: 0000000000000000 RBX: ffff888005ec9400 RCX: ffffffff81fe1957
[   37.656151] RDX: 0000000000000000 RSI: ffff88801235d300 RDI: 0000000000000002
[   37.656700] RBP: ffffc90001383ca8 R08: 000000000000001c R09: 0000000000000001
[   37.657213] R10: ffff88801235e098 R11: 0000000000000000 R12: ffffffffffffffff
[   37.657721] R13: 0000000001000000 R14: 00000000017fffff R15: 0000000000000000
[   37.658231] FS:  0000000000000000(0000) GS:ffff88807dd00000(0000) knlGS:0000000000000000
[   37.658811] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   37.659236] CR2: 00007f3777cf0500 CR3: 0000000003c12005 CR4: 0000000000770ee0
[   37.659761] PKRU: 55555554
[   37.659967] Call Trace:
[   37.660154]  <TASK>
[   37.660334]  iopt_unmap_iova_range+0x1ef/0x2e0
[   37.660699]  iopt_unmap_all+0x2f/0x60
[   37.660977]  iommufd_ioas_destroy+0x2c/0x70
[   37.661296]  iommufd_fops_release+0xd4/0x170
[   37.661627]  ? iommufd_ctx_get+0x30/0x30
[   37.661926]  __fput+0x11f/0x450
[   37.662178]  ____fput+0x1e/0x30
[   37.662425]  task_work_run+0xb6/0x120
[   37.662732]  do_exit+0x521/0x1340
[   37.662992]  ? lockdep_hardirqs_on+0x8a/0x110
[   37.663334]  ? trace_hardirqs_on+0x3f/0x100
[   37.663666]  do_group_exit+0x5e/0xf0
[   37.663958]  __x64_sys_exit_group+0x25/0x30
[   37.664274]  do_syscall_64+0x3b/0x90
[   37.664544]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   37.664931] RIP: 0033:0x7f3777be6cf6
[   37.665202] Code: Unable to access opcode bytes at 0x7f3777be6ccc.
[   37.665658] RSP: 002b:00007ffd0d7278d8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
[   37.666208] RAX: ffffffffffffffda RBX: 00007f3777cf1490 RCX: 00007f3777be6cf6
[   37.666738] RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
[   37.667262] RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffff80
[   37.667781] R10: 0000000000000004 R11: 0000000000000246 R12: 00007f3777cf1490
[   37.668294] R13: 0000000000000001 R14: 00007f3777cf4e88 R15: 0000000000000000
[   37.668853]  </TASK>
[   37.669119] irq event stamp: 22147
[   37.669528] hardirqs last  enabled at (22155): [<ffffffff811b7f21>] __up_console_sem+0x91/0xb0
[   37.670300] hardirqs last disabled at (22162): [<ffffffff811b7f06>] __up_console_sem+0x76/0xb0
[   37.670949] softirqs last  enabled at (21294): [<ffffffff83000329>] __do_softirq+0x329/0x490
[   37.671554] softirqs last disabled at (21209): [<ffffffff81111082>] irq_exit_rcu+0xd2/0x100
[   37.672171] ---[ end trace 0000000000000000 ]---
[   37.738780] ------------[ cut here ]------------
[   37.739170] WARNING: CPU: 1 PID: 711 at drivers/iommu/iommufd/pages.c:178 batch_unpin.isra.23+0x151/0x1a0
[   37.739888] Modules linked in:
[   37.740131] CPU: 1 PID: 711 Comm: repro Tainted: G        W          6.1.0-a0a6c76cf2a5+ #1
[   37.740800] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   37.741919] RIP: 0010:batch_unpin.isra.23+0x151/0x1a0
[   37.742315] Code: e8 c4 be 2b ff 48 8b 45 d0 48 85 c0 75 17 e8 26 bd 2b ff 48 8b 7d c8 48 89 de e8 fa bd 2b ff 48 39 5d c8 73 07 e8 0f bd 2b ff <0f> 0b e8 08 bd 2b ff 4d 29 e5 31 ff 41 83 c6 01 4c 89 ee 31 db e8
[   37.743691] RSP: 0018:ffffc90001393a88 EFLAGS: 00010246
[   37.744079] RAX: 0000000000000000 RBX: ffffffffffffffff RCX: ffffffff81fded8c
[   37.744606] RDX: 0000000000000000 RSI: ffff88801235d300 RDI: 0000000000000002
[   37.745174] RBP: ffffc90001393ad0 R08: 000000000003b5c5 R09: 0000000000000012
[   37.746025] R10: 000000000003b5a0 R11: 0000000000000024 R12: 0000000000000002
[   37.746554] R13: 0000000000000002 R14: 0000000000001000 R15: ffff888005ec9400
[   37.747087] FS:  00007f3777af9740(0000) GS:ffff88807dd00000(0000) knlGS:0000000000000000
[   37.747671] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   37.748109] CR2: 00007f3777c1e580 CR3: 000000000d4de002 CR4: 0000000000770ee0
[   37.748620] PKRU: 55555554
[   37.748865] Call Trace:
[   37.749187]  <TASK>
[   37.749482]  __iopt_area_unfill_domain+0x257/0x560
[   37.750099]  ? __this_cpu_preempt_check+0x20/0x30
[   37.750467]  ? lock_is_held_type+0xe6/0x140
[   37.750810]  ? rcu_read_lock_sched_held+0x57/0x80
[   37.751190]  ? __mutex_lock+0x13a/0xf30
[   37.751502]  ? write_comp_data+0x2f/0x90
[   37.751814]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   37.752193]  iopt_area_unfill_domain+0x32/0x40
[   37.752537]  iopt_table_remove_domain+0x23f/0x4c0
[   37.752950]  iommufd_device_selftest_detach+0x3a/0x90
[   37.753607]  iommufd_selftest_destroy+0x55/0x70
[   37.754187]  iommufd_object_destroy_user+0xce/0x130
[   37.754601]  iommufd_destroy+0xa2/0xc0
[   37.754896]  iommufd_fops_ioctl+0x1ef/0x310
[   37.755226]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   37.755604]  ? write_comp_data+0x2f/0x90
[   37.755915]  __x64_sys_ioctl+0x10e/0x160
[   37.756224]  ? iommufd_get_object.part.6+0x1c0/0x1c0
[   37.756619]  do_syscall_64+0x3b/0x90
[   37.756936]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   37.757562] RIP: 0033:0x7f3777c1e59d
[   37.758015] Code: 00 c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d d3 08 0d 00 f7 d8 64 89 01 48
[   37.759466] RSP: 002b:00007ffd0d727918 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   37.760036] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f3777c1e59d
[   37.760553] RDX: 0000000020000140 RSI: 0000000000003b80 RDI: 0000000000000003
[   37.761130] RBP: 00007ffd0d727930 R08: 00007ffd0d727930 R09: 00007ffd0d727930
[   37.761874] R10: 00007ffd0d727930 R11: 0000000000000213 R12: 0000000000401180
[   37.762390] R13: 00007ffd0d727a50 R14: 0000000000000000 R15: 0000000000000000
[   37.762946]  </TASK>
[   37.763112] irq event stamp: 14733
[   37.763368] hardirqs last  enabled at (14741): [<ffffffff811b7f21>] __up_console_sem+0x91/0xb0
[   37.764014] hardirqs last disabled at (14748): [<ffffffff811b7f06>] __up_console_sem+0x76/0xb0
[   37.764637] softirqs last  enabled at (14272): [<ffffffff83000329>] __do_softirq+0x329/0x490
[   37.765642] softirqs last disabled at (14761): [<ffffffff81111082>] irq_exit_rcu+0xd2/0x100
[   37.766276] ---[ end trace 0000000000000000 ]---
[   37.766725] ------------[ cut here ]------------
[   37.767063] WARNING: CPU: 1 PID: 711 at drivers/iommu/iommufd/pages.c:294 __iopt_area_unfill_domain+0x152/0x560
[   37.767815] Modules linked in:
[   37.768061] CPU: 1 PID: 711 Comm: repro Tainted: G        W          6.1.0-a0a6c76cf2a5+ #1
[   37.768732] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   37.769881] RIP: 0010:__iopt_area_unfill_domain+0x152/0x560
[   37.770312] Code: a1 2b ff 44 8b 64 24 54 48 8b 44 24 48 31 ff 44 89 e6 48 89 44 24 38 e8 6c a2 2b ff 45 85 e4 0f 85 eb 01 00 00 e8 ee a0 2b ff <0f> 0b e8 e7 a0 2b ff 48 8b 44 24 38 89 5c 24 58 89 18 8b 44 24 54
[   37.771649] RSP: 0018:ffffc90001393ae0 EFLAGS: 00010246
[   37.772045] RAX: 0000000000000000 RBX: 00000000fffffffe RCX: ffffffff81fe0bd5
[   37.772574] RDX: 0000000000000000 RSI: ffff88801235d300 RDI: 0000000000000002
[   37.773137] RBP: ffffc90001393d10 R08: 000000000003b5c5 R09: 0000000000000012
[   37.773936] R10: 000000000003b5a0 R11: 0000000000000024 R12: 0000000000000001
[   37.774455] R13: 0000000000000802 R14: 00000000000007ff R15: 0000000000000800
[   37.774987] FS:  00007f3777af9740(0000) GS:ffff88807dd00000(0000) knlGS:0000000000000000
[   37.775566] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   37.775995] CR2: 00007f3777c1e580 CR3: 000000000d4de002 CR4: 0000000000770ee0
[   37.776522] PKRU: 55555554
[   37.776774] Call Trace:
[   37.777082]  <TASK>
[   37.777418]  ? __this_cpu_preempt_check+0x20/0x30
[   37.778008]  ? lock_is_held_type+0xe6/0x140
[   37.778335]  ? rcu_read_lock_sched_held+0x57/0x80
[   37.778703]  ? __mutex_lock+0x13a/0xf30
[   37.779016]  ? write_comp_data+0x2f/0x90
[   37.779340]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   37.779702]  iopt_area_unfill_domain+0x32/0x40
[   37.780049]  iopt_table_remove_domain+0x23f/0x4c0
[   37.780433]  iommufd_device_selftest_detach+0x3a/0x90
[   37.780874]  iommufd_selftest_destroy+0x55/0x70
[   37.781453]  iommufd_object_destroy_user+0xce/0x130
[   37.782073]  iommufd_destroy+0xa2/0xc0
[   37.782549]  iommufd_fops_ioctl+0x1ef/0x310
[   37.783031]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   37.783646]  ? write_comp_data+0x2f/0x90
[   37.784157]  __x64_sys_ioctl+0x10e/0x160
[   37.784702]  ? iommufd_get_object.part.6+0x1c0/0x1c0
[   37.785384]  do_syscall_64+0x3b/0x90
[   37.785862]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   37.786495] RIP: 0033:0x7f3777c1e59d
[   37.786918] Code: 00 c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d d3 08 0d 00 f7 d8 64 89 01 48
[   37.789107] RSP: 002b:00007ffd0d727918 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   37.790041] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f3777c1e59d
[   37.790922] RDX: 0000000020000140 RSI: 0000000000003b80 RDI: 0000000000000003
[   37.791741] RBP: 00007ffd0d727930 R08: 00007ffd0d727930 R09: 00007ffd0d727930
[   37.792587] R10: 00007ffd0d727930 R11: 0000000000000213 R12: 0000000000401180
[   37.793464] R13: 00007ffd0d727a50 R14: 0000000000000000 R15: 0000000000000000
[   37.794378]  </TASK>
[   37.794667] irq event stamp: 15219
[   37.795063] hardirqs last  enabled at (15227): [<ffffffff811b7f21>] __up_console_sem+0x91/0xb0
[   37.796054] hardirqs last disabled at (15234): [<ffffffff811b7f06>] __up_console_sem+0x76/0xb0
[   37.797073] softirqs last  enabled at (14848): [<ffffffff83000329>] __do_softirq+0x329/0x490
[   37.797820] softirqs last disabled at (14831): [<ffffffff81111082>] irq_exit_rcu+0xd2/0x100
[   37.798438] ---[ end trace 0000000000000000 ]---
[   37.798885] ------------[ cut here ]------------
[   37.799227] WARNING: CPU: 1 PID: 711 at drivers/iommu/iommufd/pages.c:1290 __iopt_area_unfill_domain+0x54f/0x560
[   37.800016] Modules linked in:
[   37.800293] CPU: 1 PID: 711 Comm: repro Tainted: G        W          6.1.0-a0a6c76cf2a5+ #1
[   37.800945] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   37.801774] RIP: 0010:__iopt_area_unfill_domain+0x54f/0x560
[   37.802198] Code: e8 86 9e 2b ff 85 db 0f 85 35 fb ff ff e8 09 9d 2b ff 0f 0b e9 29 fb ff ff e8 fd 9c 2b ff 0f 0b e9 69 fe ff ff e8 f1 9c 2b ff <0f> 0b e9 58 ff ff ff e8 65 2d dc 00 0f 1f 44 00 00 0f 1f 44 00 00
[   37.803665] RSP: 0018:ffffc90001393ae0 EFLAGS: 00010246
[   37.804051] RAX: 0000000000000000 RBX: 00000000fffffffe RCX: ffffffff81fe0d26
[   37.804568] RDX: 0000000000000000 RSI: ffff88801235d300 RDI: 0000000000000002
[   37.805239] RBP: ffffc90001393d10 R08: 000000000003b5c5 R09: 0000000000000012
[   37.805761] R10: 000000000003b5a0 R11: 0000000000000024 R12: 00000000000007ff
[   37.806287] R13: 0000000000000802 R14: 00000000000007ff R15: 0000000000000800
[   37.806818] FS:  00007f3777af9740(0000) GS:ffff88807dd00000(0000) knlGS:0000000000000000
[   37.807409] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   37.807873] CR2: 00007f3777c1e580 CR3: 000000000d4de002 CR4: 0000000000770ee0
[   37.808518] PKRU: 55555554
[   37.808750] Call Trace:
[   37.808945]  <TASK>
[   37.809143]  ? __this_cpu_preempt_check+0x20/0x30
[   37.809525]  ? lock_is_held_type+0xe6/0x140
[   37.809858]  ? rcu_read_lock_sched_held+0x57/0x80
[   37.810225]  ? __mutex_lock+0x13a/0xf30
[   37.810554]  ? write_comp_data+0x2f/0x90
[   37.810863]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   37.811227]  iopt_area_unfill_domain+0x32/0x40
[   37.811670]  iopt_table_remove_domain+0x23f/0x4c0
[   37.812036]  iommufd_device_selftest_detach+0x3a/0x90
[   37.812427]  iommufd_selftest_destroy+0x55/0x70
[   37.812802]  iommufd_object_destroy_user+0xce/0x130
[   37.813182]  iommufd_destroy+0xa2/0xc0
[   37.813481]  iommufd_fops_ioctl+0x1ef/0x310
[   37.813812]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   37.814182]  ? write_comp_data+0x2f/0x90
[   37.814503]  __x64_sys_ioctl+0x10e/0x160
[   37.814810]  ? iommufd_get_object.part.6+0x1c0/0x1c0
[   37.815279]  do_syscall_64+0x3b/0x90
[   37.815564]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   37.815952] RIP: 0033:0x7f3777c1e59d
[   37.816243] Code: 00 c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d d3 08 0d 00 f7 d8 64 89 01 48
[   37.817739] RSP: 002b:00007ffd0d727918 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   37.818298] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f3777c1e59d
[   37.818820] RDX: 0000000020000140 RSI: 0000000000003b80 RDI: 0000000000000003
[   37.819347] RBP: 00007ffd0d727930 R08: 00007ffd0d727930 R09: 00007ffd0d727930
[   37.819865] R10: 00007ffd0d727930 R11: 0000000000000213 R12: 0000000000401180
[   37.820519] R13: 00007ffd0d727a50 R14: 0000000000000000 R15: 0000000000000000
[   37.821083]  </TASK>
[   37.821262] irq event stamp: 15685
[   37.821526] hardirqs last  enabled at (15693): [<ffffffff811b7f21>] __up_console_sem+0x91/0xb0
[   37.822168] hardirqs last disabled at (15700): [<ffffffff811b7f06>] __up_console_sem+0x76/0xb0
[   37.822805] softirqs last  enabled at (15674): [<ffffffff83000329>] __do_softirq+0x329/0x490
[   37.823520] softirqs last disabled at (15665): [<ffffffff81111082>] irq_exit_rcu+0xd2/0x100
[   37.824131] ---[ end trace 0000000000000000 ]---
[   37.824580] ------------[ cut here ]------------
[   37.825008] WARNING: CPU: 1 PID: 711 at drivers/iommu/iommufd/pages.c:886 update_unpinned+0x75/0x80
[   37.825700] Modules linked in:
[   37.825938] CPU: 1 PID: 711 Comm: repro Tainted: G        W          6.1.0-a0a6c76cf2a5+ #1
[   37.826552] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   37.827379] RIP: 0010:update_unpinned+0x75/0x80
[   37.827730] Code: ac 2b ff 48 89 de 31 c9 31 d2 4c 29 e6 4c 89 ef e8 70 fb ff ff e8 bb ac 2b ff 5b 41 5c 41 5d 5d c3 cc cc cc cc e8 ab ac 2b ff <0f> 0b eb e7 0f 1f 80 00 00 00 00 0f 1f 44 00 00 55 48 89 e5 41 57
[   37.829228] RSP: 0018:ffffc90001393ab8 EFLAGS: 00010246
[   37.829631] RAX: 0000000000000000 RBX: 0000000000000800 RCX: ffffffff81fdfdcf
[   37.830160] RDX: 0000000000000000 RSI: ffff88801235d300 RDI: 0000000000000002
[   37.830743] RBP: ffffc90001393ad0 R08: 0000000000000000 R09: ffff88807dd3b920
[   37.831298] R10: 00000000000011ea R11: 0000000000000009 R12: ffffffffffffffff
[   37.831815] R13: ffff888005ec9400 R14: 00000000000007ff R15: 0000000000000800
[   37.832345] FS:  00007f3777af9740(0000) GS:ffff88807dd00000(0000) knlGS:0000000000000000
[   37.833082] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   37.833507] CR2: 00007f3777c1e580 CR3: 000000000d4de002 CR4: 0000000000770ee0
[   37.834028] PKRU: 55555554
[   37.834237] Call Trace:
[   37.834428]  <TASK>
[   37.834607]  __iopt_area_unfill_domain+0x4e1/0x560
[   37.834995]  ? __this_cpu_preempt_check+0x20/0x30
[   37.835390]  ? lock_is_held_type+0xe6/0x140
[   37.835802]  ? rcu_read_lock_sched_held+0x57/0x80
[   37.836168]  ? __mutex_lock+0x13a/0xf30
[   37.836469]  ? write_comp_data+0x2f/0x90
[   37.836796]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   37.837159]  iopt_area_unfill_domain+0x32/0x40
[   37.837508]  iopt_table_remove_domain+0x23f/0x4c0
[   37.837871]  iommufd_device_selftest_detach+0x3a/0x90
[   37.838263]  iommufd_selftest_destroy+0x55/0x70
[   37.838616]  iommufd_object_destroy_user+0xce/0x130
[   37.838995]  iommufd_destroy+0xa2/0xc0
[   37.839300]  iommufd_fops_ioctl+0x1ef/0x310
[   37.839754]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   37.840120]  ? write_comp_data+0x2f/0x90
[   37.840437]  __x64_sys_ioctl+0x10e/0x160
[   37.840778]  ? iommufd_get_object.part.6+0x1c0/0x1c0
[   37.841169]  do_syscall_64+0x3b/0x90
[   37.841454]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   37.841838] RIP: 0033:0x7f3777c1e59d
[   37.842119] Code: 00 c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d d3 08 0d 00 f7 d8 64 89 01 48
[   37.843547] RSP: 002b:00007ffd0d727918 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   37.844114] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f3777c1e59d
[   37.844840] RDX: 0000000020000140 RSI: 0000000000003b80 RDI: 0000000000000003
[   37.845359] RBP: 00007ffd0d727930 R08: 00007ffd0d727930 R09: 00007ffd0d727930
[   37.845874] R10: 00007ffd0d727930 R11: 0000000000000213 R12: 0000000000401180
[   37.846389] R13: 00007ffd0d727a50 R14: 0000000000000000 R15: 0000000000000000
[   37.846929]  </TASK>
[   37.847103] irq event stamp: 16157
[   37.847401] hardirqs last  enabled at (16165): [<ffffffff811b7f21>] __up_console_sem+0x91/0xb0
[   37.848081] hardirqs last disabled at (16172): [<ffffffff811b7f06>] __up_console_sem+0x76/0xb0
[   37.848740] softirqs last  enabled at (15806): [<ffffffff83000329>] __do_softirq+0x329/0x490
[   37.849361] softirqs last disabled at (15799): [<ffffffff81111082>] irq_exit_rcu+0xd2/0x100
[   37.849967] ---[ end trace 0000000000000000 ]---
[   37.854606] ------------[ cut here ]------------
[   37.854962] WARNING: CPU: 1 PID: 711 at drivers/iommu/iommufd/pages.c:178 batch_unpin.isra.23+0x151/0x1a0
[   37.855667] Modules linked in:
[   37.855910] CPU: 1 PID: 711 Comm: repro Tainted: G        W          6.1.0-a0a6c76cf2a5+ #1
[   37.856707] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   37.857548] RIP: 0010:batch_unpin.isra.23+0x151/0x1a0
[   37.857936] Code: e8 c4 be 2b ff 48 8b 45 d0 48 85 c0 75 17 e8 26 bd 2b ff 48 8b 7d c8 48 89 de e8 fa bd 2b ff 48 39 5d c8 73 07 e8 0f bd 2b ff <0f> 0b e8 08 bd 2b ff 4d 29 e5 31 ff 41 83 c6 01 4c 89 ee 31 db e8
[   37.859361] RSP: 0018:ffffc900013939d8 EFLAGS: 00010246
[   37.859757] RAX: 0000000000000000 RBX: fffffffffffffffe RCX: ffffffff81fdeda6
[   37.860277] RDX: 0000000000000000 RSI: ffff88801235d300 RDI: 0000000000000002
[   37.860964] RBP: ffffc90001393a20 R08: 0000000000000000 R09: ffff88807dd3b890
[   37.861490] R10: 00000000000019ed R11: 0000000000000000 R12: 0000000000000001
[   37.862020] R13: 0000000000000001 R14: 0000000000000000 R15: ffff888005ec9400
[   37.862545] FS:  0000000000000000(0000) GS:ffff88807dd00000(0000) knlGS:0000000000000000
[   37.863129] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   37.863578] CR2: 00007f3777cf0500 CR3: 0000000003c12001 CR4: 0000000000770ee0
[   37.864186] PKRU: 55555554
[   37.864396] Call Trace:
[   37.864586]  <TASK>
[   37.864789]  iopt_pages_unfill_xarray+0x39f/0x5c0
[   37.865195]  ? write_comp_data+0x2f/0x90
[   37.865508]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   37.865887]  ? write_comp_data+0x2f/0x90
[   37.866197]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   37.866569]  ? interval_tree_remove+0x291/0x4e0
[   37.866926]  ? write_comp_data+0x2f/0x90
[   37.867285]  iopt_area_remove_access+0x108/0x120
[   37.867688]  iommufd_access_unpin_pages+0x177/0x210
[   37.868087]  iommufd_test_access_unmap+0xe0/0x130
[   37.868454]  ? iommufd_test_access_unmap+0x130/0x130
[   37.868858]  iommufd_test_staccess_release+0x39/0x60
[   37.869246]  __fput+0x11f/0x450
[   37.869544]  ____fput+0x1e/0x30
[   37.869834]  task_work_run+0xb6/0x120
[   37.870152]  do_exit+0x521/0x1340
[   37.870424]  ? lockdep_hardirqs_on+0x8a/0x110
[   37.870890]  ? trace_hardirqs_on+0x3f/0x100
[   37.871227]  do_group_exit+0x5e/0xf0
[   37.871516]  __x64_sys_exit_group+0x25/0x30
[   37.871870]  do_syscall_64+0x3b/0x90
[   37.872157]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   37.872630] RIP: 0033:0x7f3777be6cf6
[   37.873021] Code: Unable to access opcode bytes at 0x7f3777be6ccc.
[   37.873477] RSP: 002b:00007ffd0d7278d8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
[   37.874069] RAX: ffffffffffffffda RBX: 00007f3777cf1490 RCX: 00007f3777be6cf6
[   37.874601] RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
[   37.875144] RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffff80
[   37.875661] R10: 0000000000000004 R11: 0000000000000246 R12: 00007f3777cf1490
[   37.876382] R13: 0000000000000001 R14: 00007f3777cf4e88 R15: 0000000000000000
[   37.876939]  </TASK>
[   37.877116] irq event stamp: 22057
[   37.877401] hardirqs last  enabled at (22065): [<ffffffff811b7f21>] __up_console_sem+0x91/0xb0
[   37.878074] hardirqs last disabled at (22072): [<ffffffff811b7f06>] __up_console_sem+0x76/0xb0
[   37.878740] softirqs last  enabled at (21664): [<ffffffff83000329>] __do_softirq+0x329/0x490
[   37.879573] softirqs last disabled at (21657): [<ffffffff81111082>] irq_exit_rcu+0xd2/0x100
[   37.880200] ---[ end trace 0000000000000000 ]---
[   37.880715] ------------[ cut here ]------------
[   37.881061] WARNING: CPU: 1 PID: 711 at drivers/iommu/iommufd/pages.c:886 update_unpinned+0x75/0x80
[   37.881758] Modules linked in:
[   37.882013] CPU: 1 PID: 711 Comm: repro Tainted: G        W          6.1.0-a0a6c76cf2a5+ #1
[   37.882780] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   37.883609] RIP: 0010:update_unpinned+0x75/0x80
[   37.884023] Code: ac 2b ff 48 89 de 31 c9 31 d2 4c 29 e6 4c 89 ef e8 70 fb ff ff e8 bb ac 2b ff 5b 41 5c 41 5d 5d c3 cc cc cc cc e8 ab ac 2b ff <0f> 0b eb e7 0f 1f 80 00 00 00 00 0f 1f 44 00 00 55 48 89 e5 41 57
[   37.885512] RSP: 0018:ffffc90001393a08 EFLAGS: 00010246
[   37.885951] RAX: 0000000000000000 RBX: 0000000000000800 RCX: ffffffff81fdfdcf
[   37.886491] RDX: 0000000000000000 RSI: ffff88801235d300 RDI: 0000000000000002
[   37.887033] RBP: ffffc90001393a20 R08: 0000000000000000 R09: ffff88807dd3b890
[   37.887682] R10: 00000000000019ed R11: 0000000000000000 R12: fffffffffffffffe
[   37.888230] R13: ffff888005ec9400 R14: 0000000000000002 R15: 0000000000000002
[   37.888772] FS:  0000000000000000(0000) GS:ffff88807dd00000(0000) knlGS:0000000000000000
[   37.889401] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   37.889840] CR2: 00007f3777cf0500 CR3: 0000000003c12001 CR4: 0000000000770ee0
[   37.890493] PKRU: 55555554
[   37.890701] Call Trace:
[   37.890893]  <TASK>
[   37.891066]  iopt_pages_unfill_xarray+0x522/0x5c0
[   37.891504]  ? write_comp_data+0x2f/0x90
[   37.891851]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   37.892307]  ? write_comp_data+0x2f/0x90
[   37.892643]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   37.893034]  ? interval_tree_remove+0x291/0x4e0
[   37.893391]  ? write_comp_data+0x2f/0x90
[   37.893738]  iopt_area_remove_access+0x108/0x120
[   37.894105]  iommufd_access_unpin_pages+0x177/0x210
[   37.894513]  iommufd_test_access_unmap+0xe0/0x130
[   37.894902]  ? iommufd_test_access_unmap+0x130/0x130
[   37.895287]  iommufd_test_staccess_release+0x39/0x60
[   37.895683]  __fput+0x11f/0x450
[   37.896059]  ____fput+0x1e/0x30
[   37.896386]  task_work_run+0xb6/0x120
[   37.896710]  do_exit+0x521/0x1340
[   37.897013]  ? lockdep_hardirqs_on+0x8a/0x110
[   37.897363]  ? trace_hardirqs_on+0x3f/0x100
[   37.897703]  do_group_exit+0x5e/0xf0
[   37.898034]  __x64_sys_exit_group+0x25/0x30
[   37.898358]  do_syscall_64+0x3b/0x90
[   37.898650]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   37.899078] RIP: 0033:0x7f3777be6cf6
[   37.899464] Code: Unable to access opcode bytes at 0x7f3777be6ccc.
[   37.899921] RSP: 002b:00007ffd0d7278d8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
[   37.900506] RAX: ffffffffffffffda RBX: 00007f3777cf1490 RCX: 00007f3777be6cf6
[   37.901186] RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
[   37.901717] RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffff80
[   37.902274] R10: 0000000000000004 R11: 0000000000000246 R12: 00007f3777cf1490
[   37.902845] R13: 0000000000000001 R14: 00007f3777cf4e88 R15: 0000000000000000
[   37.903454]  </TASK>
[   37.903631] irq event stamp: 22563
[   37.903890] hardirqs last  enabled at (22571): [<ffffffff811b7f21>] __up_console_sem+0x91/0xb0
[   37.904711] hardirqs last disabled at (22580): [<ffffffff811b7f06>] __up_console_sem+0x76/0xb0
[   37.905349] softirqs last  enabled at (22196): [<ffffffff83000329>] __do_softirq+0x329/0x490
[   37.906002] softirqs last disabled at (22179): [<ffffffff81111082>] irq_exit_rcu+0xd2/0x100
[   37.906800] ---[ end trace 0000000000000000 ]---
[   37.907388] ------------[ cut here ]------------
[   37.907877] WARNING: CPU: 1 PID: 711 at drivers/iommu/iommufd/pages.c:1181 iopt_release_pages+0x159/0x190
[   37.908578] Modules linked in:
[   37.908873] CPU: 1 PID: 711 Comm: repro Tainted: G        W          6.1.0-a0a6c76cf2a5+ #1
[   37.909483] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   37.910327] RIP: 0010:iopt_release_pages+0x159/0x190
[   37.910775] Code: b5 11 ff eb cb e8 87 90 2b ff be 03 00 00 00 4c 89 f7 e8 6a 8b ce ff eb b7 e8 73 90 2b ff 0f 0b e9 ed fe ff ff e8 67 90 2b ff <0f> 0b e9 00 ff ff ff e8 5b 90 2b ff 0f 0b e9 07 ff ff ff e8 4f 90
[   37.912293] RSP: 0018:ffffc90001393c88 EFLAGS: 00010246
[   37.912727] RAX: 0000000000000000 RBX: ffff888005ec9400 RCX: ffffffff81fe1957
[   37.913280] RDX: 0000000000000000 RSI: ffff88801235d300 RDI: 0000000000000002
[   37.913841] RBP: ffffc90001393ca8 R08: 000000000000001c R09: 0000000000000001
[   37.914460] R10: ffff88801235e098 R11: 0000000000000000 R12: fffffffffffffffe
[   37.914981] R13: 0000000001000000 R14: 00000000017fffff R15: 0000000000000000
[   37.915584] FS:  0000000000000000(0000) GS:ffff88807dd00000(0000) knlGS:0000000000000000
[   37.916181] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   37.916773] CR2: 00007f3777cf0500 CR3: 0000000003c12001 CR4: 0000000000770ee0
[   37.917292] PKRU: 55555554
[   37.917536] Call Trace:
[   37.917730]  <TASK>
[   37.917903]  iopt_unmap_iova_range+0x1ef/0x2e0
[   37.918256]  iopt_unmap_all+0x2f/0x60
[   37.918592]  iommufd_ioas_destroy+0x2c/0x70
[   37.918963]  iommufd_fops_release+0xd4/0x170
[   37.919310]  ? iommufd_ctx_get+0x30/0x30
[   37.919620]  __fput+0x11f/0x450
[   37.919911]  ____fput+0x1e/0x30
[   37.920175]  task_work_run+0xb6/0x120
[   37.920474]  do_exit+0x521/0x1340
[   37.920785]  ? lockdep_hardirqs_on+0x8a/0x110
[   37.921140]  ? trace_hardirqs_on+0x3f/0x100
[   37.921477]  do_group_exit+0x5e/0xf0
[   37.921762]  __x64_sys_exit_group+0x25/0x30
[   37.922123]  do_syscall_64+0x3b/0x90
[   37.922410]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   37.922803] RIP: 0033:0x7f3777be6cf6
[   37.923105] Code: Unable to access opcode bytes at 0x7f3777be6ccc.
[   37.923566] RSP: 002b:00007ffd0d7278d8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
[   37.924155] RAX: ffffffffffffffda RBX: 00007f3777cf1490 RCX: 00007f3777be6cf6
[   37.924709] RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
[   37.925264] RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffff80
[   37.925790] R10: 0000000000000004 R11: 0000000000000246 R12: 00007f3777cf1490
[   37.926339] R13: 0000000000000001 R14: 00007f3777cf4e88 R15: 0000000000000000
[   37.926883]  </TASK>
[   37.927058] irq event stamp: 23053
[   37.927345] hardirqs last  enabled at (23061): [<ffffffff811b7f21>] __up_console_sem+0x91/0xb0
[   37.927973] hardirqs last disabled at (23068): [<ffffffff811b7f06>] __up_console_sem+0x76/0xb0
[   37.928615] softirqs last  enabled at (23010): [<ffffffff83000329>] __do_softirq+0x329/0x490
[   37.929275] softirqs last disabled at (23001): [<ffffffff81111082>] irq_exit_rcu+0xd2/0x100
[   37.929919] ---[ end trace 0000000000000000 ]---
[   38.097719] ------------[ cut here ]------------
[   38.098097] WARNING: CPU: 1 PID: 716 at drivers/iommu/iommufd/pages.c:294 __iopt_area_unfill_domain+0x152/0x560
[   38.098861] Modules linked in:
[   38.099091] CPU: 1 PID: 716 Comm: repro Tainted: G        W          6.1.0-a0a6c76cf2a5+ #1
[   38.099713] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   38.100510] RIP: 0010:__iopt_area_unfill_domain+0x152/0x560
[   38.100979] Code: a1 2b ff 44 8b 64 24 54 48 8b 44 24 48 31 ff 44 89 e6 48 89 44 24 38 e8 6c a2 2b ff 45 85 e4 0f 85 eb 01 00 00 e8 ee a0 2b ff <0f> 0b e8 e7 a0 2b ff 48 8b 44 24 38 89 5c 24 58 89 18 8b 44 24 54
[   38.102311] RSP: 0018:ffffc900013bbae0 EFLAGS: 00010246
[   38.102701] RAX: 0000000000000000 RBX: 00000000ffffffff RCX: ffffffff81fe0bd5
[   38.103355] RDX: 0000000000000000 RSI: ffff88800cb4d300 RDI: 0000000000000002
[   38.103860] RBP: ffffc900013bbd10 R08: 000000000003b5c5 R09: 000000000000000b
[   38.104525] R10: 000000000003b5a0 R11: 0000000000000024 R12: 0000000000000001
[   38.105080] R13: 0000000000000801 R14: 00000000000007ff R15: 0000000000000800
[   38.105589] FS:  00007f3777af9740(0000) GS:ffff88807dd00000(0000) knlGS:0000000000000000
[   38.106205] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   38.106688] CR2: 00007f3777c1e580 CR3: 000000000cacc003 CR4: 0000000000770ee0
[   38.107220] PKRU: 55555554
[   38.107491] Call Trace:
[   38.107753]  <TASK>
[   38.107945]  ? __this_cpu_preempt_check+0x20/0x30
[   38.108326]  ? lock_is_held_type+0xe6/0x140
[   38.108647]  ? rcu_read_lock_sched_held+0x57/0x80
[   38.109043]  ? __mutex_lock+0x13a/0xf30
[   38.109341]  ? write_comp_data+0x2f/0x90
[   38.109668]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   38.110037]  iopt_area_unfill_domain+0x32/0x40
[   38.110373]  iopt_table_remove_domain+0x23f/0x4c0
[   38.110771]  iommufd_device_selftest_detach+0x3a/0x90
[   38.111154]  iommufd_selftest_destroy+0x55/0x70
[   38.111495]  iommufd_object_destroy_user+0xce/0x130
[   38.111881]  iommufd_destroy+0xa2/0xc0
[   38.112167]  iommufd_fops_ioctl+0x1ef/0x310
[   38.112483]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   38.112949]  ? write_comp_data+0x2f/0x90
[   38.113258]  __x64_sys_ioctl+0x10e/0x160
[   38.113568]  ? iommufd_get_object.part.6+0x1c0/0x1c0
[   38.113975]  do_syscall_64+0x3b/0x90
[   38.114249]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   38.114630] RIP: 0033:0x7f3777c1e59d
[   38.114922] Code: 00 c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d d3 08 0d 00 f7 d8 64 89 01 48
[   38.116249] RSP: 002b:00007ffd0d727918 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   38.116816] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f3777c1e59d
[   38.117352] RDX: 0000000020000140 RSI: 0000000000003b80 RDI: 0000000000000003
[   38.117852] RBP: 00007ffd0d727930 R08: 00007ffd0d727930 R09: 00007ffd0d727930
[   38.118383] R10: 00007ffd0d727930 R11: 0000000000000213 R12: 0000000000401180
[   38.118893] R13: 00007ffd0d727a50 R14: 0000000000000000 R15: 0000000000000000
[   38.119447]  </TASK>
[   38.119617] irq event stamp: 14701
[   38.119869] hardirqs last  enabled at (14709): [<ffffffff811b7f21>] __up_console_sem+0x91/0xb0
[   38.120519] hardirqs last disabled at (14716): [<ffffffff811b7f06>] __up_console_sem+0x76/0xb0
[   38.121150] softirqs last  enabled at (14578): [<ffffffff83000329>] __do_softirq+0x329/0x490
[   38.121784] softirqs last disabled at (14463): [<ffffffff81111082>] irq_exit_rcu+0xd2/0x100
[   38.122394] ---[ end trace 0000000000000000 ]---
[   38.122842] ------------[ cut here ]------------
[   38.123170] WARNING: CPU: 1 PID: 716 at drivers/iommu/iommufd/pages.c:1290 __iopt_area_unfill_domain+0x54f/0x560
[   38.123917] Modules linked in:
[   38.124153] CPU: 1 PID: 716 Comm: repro Tainted: G        W          6.1.0-a0a6c76cf2a5+ #1
[   38.124795] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   38.125589] RIP: 0010:__iopt_area_unfill_domain+0x54f/0x560
[   38.126021] Code: e8 86 9e 2b ff 85 db 0f 85 35 fb ff ff e8 09 9d 2b ff 0f 0b e9 29 fb ff ff e8 fd 9c 2b ff 0f 0b e9 69 fe ff ff e8 f1 9c 2b ff <0f> 0b e9 58 ff ff ff e8 65 2d dc 00 0f 1f 44 00 00 0f 1f 44 00 00
[   38.127334] RSP: 0018:ffffc900013bbae0 EFLAGS: 00010246
[   38.127718] RAX: 0000000000000000 RBX: 00000000ffffffff RCX: ffffffff81fe0d26
[   38.128241] RDX: 0000000000000000 RSI: ffff88800cb4d300 RDI: 0000000000000002
[   38.128768] RBP: ffffc900013bbd10 R08: 000000000003b5c5 R09: 000000000000000b
[   38.129306] R10: 000000000003b5a0 R11: 0000000000000024 R12: 00000000000007ff
[   38.129819] R13: 0000000000000801 R14: 00000000000007ff R15: 0000000000000800
[   38.130347] FS:  00007f3777af9740(0000) GS:ffff88807dd00000(0000) knlGS:0000000000000000
[   38.130923] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   38.131370] CR2: 00007f3777c1e580 CR3: 000000000cacc003 CR4: 0000000000770ee0
[   38.131900] PKRU: 55555554
[   38.132105] Call Trace:
[   38.132314]  <TASK>
[   38.132500]  ? __this_cpu_preempt_check+0x20/0x30
[   38.132875]  ? lock_is_held_type+0xe6/0x140
[   38.133197]  ? rcu_read_lock_sched_held+0x57/0x80
[   38.133574]  ? __mutex_lock+0x13a/0xf30
[   38.133866]  ? write_comp_data+0x2f/0x90
[   38.134165]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   38.134554]  iopt_area_unfill_domain+0x32/0x40
[   38.134884]  iopt_table_remove_domain+0x23f/0x4c0
[   38.135242]  iommufd_device_selftest_detach+0x3a/0x90
[   38.135654]  iommufd_selftest_destroy+0x55/0x70
[   38.135995]  iommufd_object_destroy_user+0xce/0x130
[   38.136361]  iommufd_destroy+0xa2/0xc0
[   38.136696]  iommufd_fops_ioctl+0x1ef/0x310
[   38.137015]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   38.137362]  ? write_comp_data+0x2f/0x90
[   38.137692]  __x64_sys_ioctl+0x10e/0x160
[   38.137994]  ? iommufd_get_object.part.6+0x1c0/0x1c0
[   38.138365]  do_syscall_64+0x3b/0x90
[   38.138642]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   38.139050] RIP: 0033:0x7f3777c1e59d
[   38.139317] Code: 00 c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d d3 08 0d 00 f7 d8 64 89 01 48
[   38.140616] RSP: 002b:00007ffd0d727918 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   38.141216] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f3777c1e59d
[   38.141723] RDX: 0000000020000140 RSI: 0000000000003b80 RDI: 0000000000000003
[   38.142250] RBP: 00007ffd0d727930 R08: 00007ffd0d727930 R09: 00007ffd0d727930
[   38.142765] R10: 00007ffd0d727930 R11: 0000000000000213 R12: 0000000000401180
[   38.143296] R13: 00007ffd0d727a50 R14: 0000000000000000 R15: 0000000000000000
[   38.143815]  </TASK>
[   38.143984] irq event stamp: 15171
[   38.144257] hardirqs last  enabled at (15179): [<ffffffff811b7f21>] __up_console_sem+0x91/0xb0
[   38.144883] hardirqs last disabled at (15188): [<ffffffff811b7f06>] __up_console_sem+0x76/0xb0
[   38.145519] softirqs last  enabled at (14942): [<ffffffff83000329>] __do_softirq+0x329/0x490
[   38.146129] softirqs last disabled at (14933): [<ffffffff81111082>] irq_exit_rcu+0xd2/0x100
[   38.146756] ---[ end trace 0000000000000000 ]---
[   38.151398] ------------[ cut here ]------------
[   38.151780] WARNING: CPU: 1 PID: 716 at drivers/iommu/iommufd/pages.c:178 batch_unpin.isra.23+0x151/0x1a0
[   38.152474] Modules linked in:
[   38.152828] CPU: 1 PID: 716 Comm: repro Tainted: G        W          6.1.0-a0a6c76cf2a5+ #1
[   38.153451] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   38.154305] RIP: 0010:batch_unpin.isra.23+0x151/0x1a0
[   38.154696] Code: e8 c4 be 2b ff 48 8b 45 d0 48 85 c0 75 17 e8 26 bd 2b ff 48 8b 7d c8 48 89 de e8 fa bd 2b ff 48 39 5d c8 73 07 e8 0f bd 2b ff <0f> 0b e8 08 bd 2b ff 4d 29 e5 31 ff 41 83 c6 01 4c 89 ee 31 db e8
[   38.156026] RSP: 0018:ffffc900013bb9d8 EFLAGS: 00010246
[   38.156438] RAX: 0000000000000000 RBX: ffffffffffffffff RCX: ffffffff81fded8c
[   38.156969] RDX: 0000000000000000 RSI: ffff88800cb4d300 RDI: 0000000000000002
[   38.157502] RBP: ffffc900013bba20 R08: 0000000000000000 R09: ffff88807dd3b890
[   38.158009] R10: 0000000000001a40 R11: 0000000000000000 R12: 0000000000000001
[   38.158548] R13: 0000000000000001 R14: 0000000000000000 R15: ffff888005ec8c00
[   38.159056] FS:  0000000000000000(0000) GS:ffff88807dd00000(0000) knlGS:0000000000000000
[   38.159649] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   38.160066] CR2: 00007f3777cf0500 CR3: 0000000003c12002 CR4: 0000000000770ee0
[   38.160607] PKRU: 55555554
[   38.160837] Call Trace:
[   38.161026]  <TASK>
[   38.161198]  iopt_pages_unfill_xarray+0x39f/0x5c0
[   38.161627]  ? write_comp_data+0x2f/0x90
[   38.161930]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   38.162281]  ? write_comp_data+0x2f/0x90
[   38.162588]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   38.162966]  ? interval_tree_remove+0x291/0x4e0
[   38.163314]  ? write_comp_data+0x2f/0x90
[   38.163624]  iopt_area_remove_access+0x108/0x120
[   38.164008]  iommufd_access_unpin_pages+0x177/0x210
[   38.164393]  iommufd_test_access_unmap+0xe0/0x130
[   38.164773]  ? iommufd_test_access_unmap+0x130/0x130
[   38.165169]  iommufd_test_staccess_release+0x39/0x60
[   38.165532]  __fput+0x11f/0x450
[   38.165789]  ____fput+0x1e/0x30
[   38.166063]  task_work_run+0xb6/0x120
[   38.166355]  do_exit+0x521/0x1340
[   38.166621]  ? lockdep_hardirqs_on+0x8a/0x110
[   38.166957]  ? trace_hardirqs_on+0x3f/0x100
[   38.167311]  do_group_exit+0x5e/0xf0
[   38.167591]  __x64_sys_exit_group+0x25/0x30
[   38.167903]  do_syscall_64+0x3b/0x90
[   38.168202]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   38.168583] RIP: 0033:0x7f3777be6cf6
[   38.168874] Code: Unable to access opcode bytes at 0x7f3777be6ccc.
[   38.169339] RSP: 002b:00007ffd0d7278d8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
[   38.169882] RAX: ffffffffffffffda RBX: 00007f3777cf1490 RCX: 00007f3777be6cf6
[   38.170426] RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
[   38.170954] RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffff80
[   38.171490] R10: 0000000000000004 R11: 0000000000000246 R12: 00007f3777cf1490
[   38.171988] R13: 0000000000000001 R14: 00007f3777cf4e88 R15: 0000000000000000
[   38.172522]  </TASK>
[   38.172717] irq event stamp: 21161
[   38.172969] hardirqs last  enabled at (21169): [<ffffffff811b7f21>] __up_console_sem+0x91/0xb0
[   38.173638] hardirqs last disabled at (21176): [<ffffffff811b7f06>] __up_console_sem+0x76/0xb0
[   38.174261] softirqs last  enabled at (20760): [<ffffffff83000329>] __do_softirq+0x329/0x490
[   38.174888] softirqs last disabled at (20679): [<ffffffff81111082>] irq_exit_rcu+0xd2/0x100
[   38.175484] ---[ end trace 0000000000000000 ]---
[   38.175938] ------------[ cut here ]------------
[   38.176270] WARNING: CPU: 1 PID: 716 at drivers/iommu/iommufd/pages.c:886 update_unpinned+0x75/0x80
[   38.176969] Modules linked in:
[   38.177204] CPU: 1 PID: 716 Comm: repro Tainted: G        W          6.1.0-a0a6c76cf2a5+ #1
[   38.177805] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   38.178625] RIP: 0010:update_unpinned+0x75/0x80
[   38.178986] Code: ac 2b ff 48 89 de 31 c9 31 d2 4c 29 e6 4c 89 ef e8 70 fb ff ff e8 bb ac 2b ff 5b 41 5c 41 5d 5d c3 cc cc cc cc e8 ab ac 2b ff <0f> 0b eb e7 0f 1f 80 00 00 00 00 0f 1f 44 00 00 55 48 89 e5 41 57
[   38.180284] RSP: 0018:ffffc900013bba08 EFLAGS: 00010246
[   38.180681] RAX: 0000000000000000 RBX: 0000000000000000 RCX: ffffffff81fdfdcf
[   38.181204] RDX: 0000000000000000 RSI: ffff88800cb4d300 RDI: 0000000000000002
[   38.181735] RBP: ffffc900013bba20 R08: 0000000000000000 R09: ffff88807dd3b890
[   38.182264] R10: 0000000000001a40 R11: 0000000000000000 R12: ffffffffffffffff
[   38.182773] R13: ffff888005ec8c00 R14: 0000000000000002 R15: 0000000000000002
[   38.183303] FS:  0000000000000000(0000) GS:ffff88807dd00000(0000) knlGS:0000000000000000
[   38.183885] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   38.184302] CR2: 00007f3777cf0500 CR3: 0000000003c12002 CR4: 0000000000770ee0
[   38.184858] PKRU: 55555554
[   38.185064] Call Trace:
[   38.185250]  <TASK>
[   38.185425]  iopt_pages_unfill_xarray+0x522/0x5c0
[   38.185831]  ? write_comp_data+0x2f/0x90
[   38.186135]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   38.186497]  ? write_comp_data+0x2f/0x90
[   38.186818]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   38.187177]  ? interval_tree_remove+0x291/0x4e0
[   38.187524]  ? write_comp_data+0x2f/0x90
[   38.187847]  iopt_area_remove_access+0x108/0x120
[   38.188196]  iommufd_access_unpin_pages+0x177/0x210
[   38.188590]  iommufd_test_access_unmap+0xe0/0x130
[   38.188997]  ? iommufd_test_access_unmap+0x130/0x130
[   38.189370]  iommufd_test_staccess_release+0x39/0x60
[   38.189764]  __fput+0x11f/0x450
[   38.190039]  ____fput+0x1e/0x30
[   38.190287]  task_work_run+0xb6/0x120
[   38.190589]  do_exit+0x521/0x1340
[   38.190848]  ? lockdep_hardirqs_on+0x8a/0x110
[   38.191213]  ? trace_hardirqs_on+0x3f/0x100
[   38.191542]  do_group_exit+0x5e/0xf0
[   38.191820]  __x64_sys_exit_group+0x25/0x30
[   38.192158]  do_syscall_64+0x3b/0x90
[   38.192431]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   38.192830] RIP: 0033:0x7f3777be6cf6
[   38.193123] Code: Unable to access opcode bytes at 0x7f3777be6ccc.
[   38.193564] RSP: 002b:00007ffd0d7278d8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
[   38.194106] RAX: ffffffffffffffda RBX: 00007f3777cf1490 RCX: 00007f3777be6cf6
[   38.194639] RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
[   38.195151] RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffff80
[   38.195673] R10: 0000000000000004 R11: 0000000000000246 R12: 00007f3777cf1490
[   38.196172] R13: 0000000000000001 R14: 00007f3777cf4e88 R15: 0000000000000000
[   38.196731]  </TASK>
[   38.196903] irq event stamp: 21645
[   38.197151] hardirqs last  enabled at (21653): [<ffffffff811b7f21>] __up_console_sem+0x91/0xb0
[   38.197805] hardirqs last disabled at (21660): [<ffffffff811b7f06>] __up_console_sem+0x76/0xb0
[   38.198421] softirqs last  enabled at (21464): [<ffffffff83000329>] __do_softirq+0x329/0x490
[   38.199056] softirqs last disabled at (21459): [<ffffffff81111082>] irq_exit_rcu+0xd2/0x100
[   38.199671] ---[ end trace 0000000000000000 ]---
[   38.200146] ------------[ cut here ]------------
[   38.200482] WARNING: CPU: 1 PID: 716 at drivers/iommu/iommufd/pages.c:1181 iopt_release_pages+0x159/0x190
[   38.201209] Modules linked in:
[   38.201443] CPU: 1 PID: 716 Comm: repro Tainted: G        W          6.1.0-a0a6c76cf2a5+ #1
[   38.202057] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   38.202888] RIP: 0010:iopt_release_pages+0x159/0x190
[   38.203263] Code: b5 11 ff eb cb e8 87 90 2b ff be 03 00 00 00 4c 89 f7 e8 6a 8b ce ff eb b7 e8 73 90 2b ff 0f 0b e9 ed fe ff ff e8 67 90 2b ff <0f> 0b e9 00 ff ff ff e8 5b 90 2b ff 0f 0b e9 07 ff ff ff e8 4f 90
[   38.204576] RSP: 0018:ffffc900013bbc88 EFLAGS: 00010246
[   38.204986] RAX: 0000000000000000 RBX: ffff888005ec8c00 RCX: ffffffff81fe1957
[   38.205487] RDX: 0000000000000000 RSI: ffff88800cb4d300 RDI: 0000000000000002
[   38.206044] RBP: ffffc900013bbca8 R08: 000000000000001c R09: 0000000000000001
[   38.206722] R10: ffff88800cb4e098 R11: 0000000000000000 R12: ffffffffffffffff
[   38.207498] R13: 0000000001000000 R14: 00000000017fffff R15: 0000000000000000
[   38.208138] FS:  0000000000000000(0000) GS:ffff88807dd00000(0000) knlGS:0000000000000000
[   38.208837] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   38.209252] CR2: 00007f3777cf0500 CR3: 0000000003c12002 CR4: 0000000000770ee0
[   38.209777] PKRU: 55555554
[   38.209984] Call Trace:
[   38.210168]  <TASK>
[   38.210344]  iopt_unmap_iova_range+0x1ef/0x2e0
[   38.210724]  iopt_unmap_all+0x2f/0x60
[   38.211010]  iommufd_ioas_destroy+0x2c/0x70
[   38.211330]  iommufd_fops_release+0xd4/0x170
[   38.211674]  ? iommufd_ctx_get+0x30/0x30
[   38.211969]  __fput+0x11f/0x450
[   38.212227]  ____fput+0x1e/0x30
[   38.212472]  task_work_run+0xb6/0x120
[   38.212799]  do_exit+0x521/0x1340
[   38.213056]  ? lockdep_hardirqs_on+0x8a/0x110
[   38.213388]  ? trace_hardirqs_on+0x3f/0x100
[   38.213757]  do_group_exit+0x5e/0xf0
[   38.214043]  __x64_sys_exit_group+0x25/0x30
[   38.214355]  do_syscall_64+0x3b/0x90
[   38.214637]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   38.215032] RIP: 0033:0x7f3777be6cf6
[   38.215299] Code: Unable to access opcode bytes at 0x7f3777be6ccc.
[   38.215739] RSP: 002b:00007ffd0d7278d8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
[   38.216298] RAX: ffffffffffffffda RBX: 00007f3777cf1490 RCX: 00007f3777be6cf6
[   38.216827] RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
[   38.217364] RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffff80
[   38.217874] R10: 0000000000000004 R11: 0000000000000246 R12: 00007f3777cf1490
[   38.218398] R13: 0000000000000001 R14: 00007f3777cf4e88 R15: 0000000000000000
[   38.218926]  </TASK>
[   38.219099] irq event stamp: 22103
[   38.219369] hardirqs last  enabled at (22111): [<ffffffff811b7f21>] __up_console_sem+0x91/0xb0
[   38.219982] hardirqs last disabled at (22118): [<ffffffff811b7f06>] __up_console_sem+0x76/0xb0
[   38.220609] softirqs last  enabled at (21464): [<ffffffff83000329>] __do_softirq+0x329/0x490
[   38.221224] softirqs last disabled at (21459): [<ffffffff81111082>] irq_exit_rcu+0xd2/0x100
[   38.221866] ---[ end trace 0000000000000000 ]---
[   38.252432] ------------[ cut here ]------------
[   38.252832] WARNING: CPU: 1 PID: 717 at drivers/iommu/iommufd/pages.c:294 __iopt_area_unfill_domain+0x152/0x560
[   38.253587] Modules linked in:
[   38.253820] CPU: 1 PID: 717 Comm: repro Tainted: G        W          6.1.0-a0a6c76cf2a5+ #1
[   38.254443] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   38.255273] RIP: 0010:__iopt_area_unfill_domain+0x152/0x560
[   38.255686] Code: a1 2b ff 44 8b 64 24 54 48 8b 44 24 48 31 ff 44 89 e6 48 89 44 24 38 e8 6c a2 2b ff 45 85 e4 0f 85 eb 01 00 00 e8 ee a0 2b ff <0f> 0b e8 e7 a0 2b ff 48 8b 44 24 38 89 5c 24 58 89 18 8b 44 24 54
[   38.257020] RSP: 0018:ffffc900013c3ae0 EFLAGS: 00010246
[   38.257418] RAX: 0000000000000000 RBX: 00000000ffffffff RCX: ffffffff81fe0bd5
[   38.257947] RDX: 0000000000000000 RSI: ffff88801235d300 RDI: 0000000000000002
[   38.258483] RBP: ffffc900013c3d10 R08: 000000000003b5c5 R09: 000000000000000c
[   38.258997] R10: 000000000003b5a0 R11: 0000000000000024 R12: 0000000000000001
[   38.259525] R13: 0000000000000801 R14: 00000000000007ff R15: 0000000000000800
[   38.260025] FS:  00007f3777af9740(0000) GS:ffff88807dd00000(0000) knlGS:0000000000000000
[   38.260615] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   38.261046] CR2: 00007f3777c1e580 CR3: 000000000cace004 CR4: 0000000000770ee0
[   38.261566] PKRU: 55555554
[   38.261783] Call Trace:
[   38.261969]  <TASK>
[   38.262161]  ? __this_cpu_preempt_check+0x20/0x30
[   38.262537]  ? lock_is_held_type+0xe6/0x140
[   38.262870]  ? rcu_read_lock_sched_held+0x57/0x80
[   38.263224]  ? __mutex_lock+0x13a/0xf30
[   38.263518]  ? write_comp_data+0x2f/0x90
[   38.263829]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   38.264201]  iopt_area_unfill_domain+0x32/0x40
[   38.264546]  iopt_table_remove_domain+0x23f/0x4c0
[   38.264954]  iommufd_device_selftest_detach+0x3a/0x90
[   38.265337]  iommufd_selftest_destroy+0x55/0x70
[   38.265699]  iommufd_object_destroy_user+0xce/0x130
[   38.266093]  iommufd_destroy+0xa2/0xc0
[   38.266381]  iommufd_fops_ioctl+0x1ef/0x310
[   38.266708]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   38.267080]  ? write_comp_data+0x2f/0x90
[   38.267390]  __x64_sys_ioctl+0x10e/0x160
[   38.267714]  ? iommufd_get_object.part.6+0x1c0/0x1c0
[   38.268111]  do_syscall_64+0x3b/0x90
[   38.268389]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   38.268786] RIP: 0033:0x7f3777c1e59d
[   38.269067] Code: 00 c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d d3 08 0d 00 f7 d8 64 89 01 48
[   38.270421] RSP: 002b:00007ffd0d727918 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   38.270970] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f3777c1e59d
[   38.271501] RDX: 0000000020000140 RSI: 0000000000003b80 RDI: 0000000000000003
[   38.272014] RBP: 00007ffd0d727930 R08: 00007ffd0d727930 R09: 00007ffd0d727930
[   38.272550] R10: 00007ffd0d727930 R11: 0000000000000213 R12: 0000000000401180
[   38.273080] R13: 00007ffd0d727a50 R14: 0000000000000000 R15: 0000000000000000
[   38.273628]  </TASK>
[   38.273800] irq event stamp: 14527
[   38.274049] hardirqs last  enabled at (14535): [<ffffffff811b7f21>] __up_console_sem+0x91/0xb0
[   38.274694] hardirqs last disabled at (14542): [<ffffffff811b7f06>] __up_console_sem+0x76/0xb0
[   38.275306] softirqs last  enabled at (14014): [<ffffffff83000329>] __do_softirq+0x329/0x490
[   38.275940] softirqs last disabled at (14009): [<ffffffff81111082>] irq_exit_rcu+0xd2/0x100
[   38.276543] ---[ end trace 0000000000000000 ]---
[   38.277008] ------------[ cut here ]------------
[   38.277348] WARNING: CPU: 1 PID: 717 at drivers/iommu/iommufd/pages.c:1290 __iopt_area_unfill_domain+0x54f/0x560
[   38.278109] Modules linked in:
[   38.278337] CPU: 1 PID: 717 Comm: repro Tainted: G        W          6.1.0-a0a6c76cf2a5+ #1
[   38.278954] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   38.279760] RIP: 0010:__iopt_area_unfill_domain+0x54f/0x560
[   38.280190] Code: e8 86 9e 2b ff 85 db 0f 85 35 fb ff ff e8 09 9d 2b ff 0f 0b e9 29 fb ff ff e8 fd 9c 2b ff 0f 0b e9 69 fe ff ff e8 f1 9c 2b ff <0f> 0b e9 58 ff ff ff e8 65 2d dc 00 0f 1f 44 00 00 0f 1f 44 00 00
[   38.281512] RSP: 0018:ffffc900013c3ae0 EFLAGS: 00010246
[   38.281891] RAX: 0000000000000000 RBX: 00000000ffffffff RCX: ffffffff81fe0d26
[   38.282414] RDX: 0000000000000000 RSI: ffff88801235d300 RDI: 0000000000000002
[   38.282944] RBP: ffffc900013c3d10 R08: 000000000003b5c5 R09: 000000000000000c
[   38.283471] R10: 000000000003b5a0 R11: 0000000000000024 R12: 00000000000007ff
[   38.283970] R13: 0000000000000801 R14: 00000000000007ff R15: 0000000000000800
[   38.284483] FS:  00007f3777af9740(0000) GS:ffff88807dd00000(0000) knlGS:0000000000000000
[   38.285078] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   38.285513] CR2: 00007f3777c1e580 CR3: 000000000cace004 CR4: 0000000000770ee0
[   38.286048] PKRU: 55555554
[   38.286262] Call Trace:
[   38.286448]  <TASK>
[   38.286665]  ? __this_cpu_preempt_check+0x20/0x30
[   38.287022]  ? lock_is_held_type+0xe6/0x140
[   38.287351]  ? rcu_read_lock_sched_held+0x57/0x80
[   38.287748]  ? __mutex_lock+0x13a/0xf30
[   38.288040]  ? write_comp_data+0x2f/0x90
[   38.288337]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   38.288744]  iopt_area_unfill_domain+0x32/0x40
[   38.289095]  iopt_table_remove_domain+0x23f/0x4c0
[   38.289454]  iommufd_device_selftest_detach+0x3a/0x90
[   38.289854]  iommufd_selftest_destroy+0x55/0x70
[   38.290196]  iommufd_object_destroy_user+0xce/0x130
[   38.290569]  iommufd_destroy+0xa2/0xc0
[   38.290867]  iommufd_fops_ioctl+0x1ef/0x310
[   38.291189]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   38.291542]  ? write_comp_data+0x2f/0x90
[   38.291843]  __x64_sys_ioctl+0x10e/0x160
[   38.292162]  ? iommufd_get_object.part.6+0x1c0/0x1c0
[   38.292532]  do_syscall_64+0x3b/0x90
[   38.292828]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   38.293223] RIP: 0033:0x7f3777c1e59d
[   38.293497] Code: 00 c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d d3 08 0d 00 f7 d8 64 89 01 48
[   38.294839] RSP: 002b:00007ffd0d727918 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   38.295401] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f3777c1e59d
[   38.295917] RDX: 0000000020000140 RSI: 0000000000003b80 RDI: 0000000000000003
[   38.296441] RBP: 00007ffd0d727930 R08: 00007ffd0d727930 R09: 00007ffd0d727930
[   38.296966] R10: 00007ffd0d727930 R11: 0000000000000213 R12: 0000000000401180
[   38.297493] R13: 00007ffd0d727a50 R14: 0000000000000000 R15: 0000000000000000
[   38.298020]  </TASK>
[   38.298188] irq event stamp: 14981
[   38.298449] hardirqs last  enabled at (14989): [<ffffffff811b7f21>] __up_console_sem+0x91/0xb0
[   38.299085] hardirqs last disabled at (14996): [<ffffffff811b7f06>] __up_console_sem+0x76/0xb0
[   38.299714] softirqs last  enabled at (14014): [<ffffffff83000329>] __do_softirq+0x329/0x490
[   38.300317] softirqs last disabled at (14009): [<ffffffff81111082>] irq_exit_rcu+0xd2/0x100
[   38.300965] ---[ end trace 0000000000000000 ]---
[   38.305571] ------------[ cut here ]------------
[   38.305930] WARNING: CPU: 1 PID: 717 at drivers/iommu/iommufd/pages.c:178 batch_unpin.isra.23+0x151/0x1a0
[   38.306646] Modules linked in:
[   38.306877] CPU: 1 PID: 717 Comm: repro Tainted: G        W          6.1.0-a0a6c76cf2a5+ #1
[   38.307488] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   38.308296] RIP: 0010:batch_unpin.isra.23+0x151/0x1a0
[   38.308700] Code: e8 c4 be 2b ff 48 8b 45 d0 48 85 c0 75 17 e8 26 bd 2b ff 48 8b 7d c8 48 89 de e8 fa bd 2b ff 48 39 5d c8 73 07 e8 0f bd 2b ff <0f> 0b e8 08 bd 2b ff 4d 29 e5 31 ff 41 83 c6 01 4c 89 ee 31 db e8
[   38.310039] RSP: 0018:ffffc900013c39d8 EFLAGS: 00010246
[   38.310435] RAX: 0000000000000000 RBX: ffffffffffffffff RCX: ffffffff81fded8c
[   38.310952] RDX: 0000000000000000 RSI: ffff88801235d300 RDI: 0000000000000002
[   38.311482] RBP: ffffc900013c3a20 R08: 0000000000000000 R09: ffff88807dd3b890
[   38.311987] R10: 0000000000001a3b R11: 0000000000000000 R12: 0000000000000001
[   38.312498] R13: 0000000000000001 R14: 0000000000000000 R15: ffff888005ec9400
[   38.313047] FS:  0000000000000000(0000) GS:ffff88807dd00000(0000) knlGS:0000000000000000
[   38.313629] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   38.314053] CR2: 00007f3777cf0500 CR3: 0000000003c12002 CR4: 0000000000770ee0
[   38.314565] PKRU: 55555554
[   38.314783] Call Trace:
[   38.314972]  <TASK>
[   38.315142]  iopt_pages_unfill_xarray+0x39f/0x5c0
[   38.315534]  ? write_comp_data+0x2f/0x90
[   38.315855]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   38.316202]  ? write_comp_data+0x2f/0x90
[   38.316500]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   38.316904]  ? interval_tree_remove+0x291/0x4e0
[   38.317250]  ? write_comp_data+0x2f/0x90
[   38.317572]  iopt_area_remove_access+0x108/0x120
[   38.317933]  iommufd_access_unpin_pages+0x177/0x210
[   38.318331]  iommufd_test_access_unmap+0xe0/0x130
[   38.318701]  ? iommufd_test_access_unmap+0x130/0x130
[   38.319090]  iommufd_test_staccess_release+0x39/0x60
[   38.319460]  __fput+0x11f/0x450
[   38.319721]  ____fput+0x1e/0x30
[   38.319966]  task_work_run+0xb6/0x120
[   38.320276]  do_exit+0x521/0x1340
[   38.320534]  ? lockdep_hardirqs_on+0x8a/0x110
[   38.320892]  ? trace_hardirqs_on+0x3f/0x100
[   38.321233]  do_group_exit+0x5e/0xf0
[   38.321513]  __x64_sys_exit_group+0x25/0x30
[   38.321826]  do_syscall_64+0x3b/0x90
[   38.322105]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   38.322507] RIP: 0033:0x7f3777be6cf6
[   38.322772] Code: Unable to access opcode bytes at 0x7f3777be6ccc.
[   38.323197] RSP: 002b:00007ffd0d7278d8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
[   38.323752] RAX: ffffffffffffffda RBX: 00007f3777cf1490 RCX: 00007f3777be6cf6
[   38.324266] RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
[   38.324804] RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffff80
[   38.325306] R10: 0000000000000004 R11: 0000000000000246 R12: 00007f3777cf1490
[   38.325846] R13: 0000000000000001 R14: 00007f3777cf4e88 R15: 0000000000000000
[   38.326368]  </TASK>
[   38.326552] irq event stamp: 20891
[   38.326823] hardirqs last  enabled at (20899): [<ffffffff811b7f21>] __up_console_sem+0x91/0xb0
[   38.327452] hardirqs last disabled at (20906): [<ffffffff811b7f06>] __up_console_sem+0x76/0xb0
[   38.328099] softirqs last  enabled at (20516): [<ffffffff83000329>] __do_softirq+0x329/0x490
[   38.328727] softirqs last disabled at (20511): [<ffffffff81111082>] irq_exit_rcu+0xd2/0x100
[   38.329344] ---[ end trace 0000000000000000 ]---
[   38.329787] ------------[ cut here ]------------
[   38.330145] WARNING: CPU: 1 PID: 717 at drivers/iommu/iommufd/pages.c:886 update_unpinned+0x75/0x80
[   38.330788] Modules linked in:
[   38.331031] CPU: 1 PID: 717 Comm: repro Tainted: G        W          6.1.0-a0a6c76cf2a5+ #1
[   38.331625] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   38.332454] RIP: 0010:update_unpinned+0x75/0x80
[   38.332819] Code: ac 2b ff 48 89 de 31 c9 31 d2 4c 29 e6 4c 89 ef e8 70 fb ff ff e8 bb ac 2b ff 5b 41 5c 41 5d 5d c3 cc cc cc cc e8 ab ac 2b ff <0f> 0b eb e7 0f 1f 80 00 00 00 00 0f 1f 44 00 00 55 48 89 e5 41 57
[   38.334133] RSP: 0018:ffffc900013c3a08 EFLAGS: 00010246
[   38.334542] RAX: 0000000000000000 RBX: 0000000000000000 RCX: ffffffff81fdfdcf
[   38.335044] RDX: 0000000000000000 RSI: ffff88801235d300 RDI: 0000000000000002
[   38.335561] RBP: ffffc900013c3a20 R08: 0000000000000000 R09: ffff88807dd3b890
[   38.336073] R10: 0000000000001a3b R11: 0000000000000000 R12: ffffffffffffffff
[   38.336599] R13: ffff888005ec9400 R14: 0000000000000002 R15: 0000000000000002
[   38.337123] FS:  0000000000000000(0000) GS:ffff88807dd00000(0000) knlGS:0000000000000000
[   38.337710] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   38.338122] CR2: 00007f3777cf0500 CR3: 0000000003c12002 CR4: 0000000000770ee0
[   38.338658] PKRU: 55555554
[   38.338857] Call Trace:
[   38.339038]  <TASK>
[   38.339206]  iopt_pages_unfill_xarray+0x522/0x5c0
[   38.339594]  ? write_comp_data+0x2f/0x90
[   38.339909]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   38.340262]  ? write_comp_data+0x2f/0x90
[   38.340565]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   38.340964]  ? interval_tree_remove+0x291/0x4e0
[   38.341311]  ? write_comp_data+0x2f/0x90
[   38.341637]  iopt_area_remove_access+0x108/0x120
[   38.342014]  iommufd_access_unpin_pages+0x177/0x210
[   38.342395]  iommufd_test_access_unmap+0xe0/0x130
[   38.342760]  ? iommufd_test_access_unmap+0x130/0x130
[   38.343165]  iommufd_test_staccess_release+0x39/0x60
[   38.343538]  __fput+0x11f/0x450
[   38.343787]  ____fput+0x1e/0x30
[   38.344050]  task_work_run+0xb6/0x120
[   38.344336]  do_exit+0x521/0x1340
[   38.344591]  ? lockdep_hardirqs_on+0x8a/0x110
[   38.344950]  ? trace_hardirqs_on+0x3f/0x100
[   38.345298]  do_group_exit+0x5e/0xf0
[   38.345592]  __x64_sys_exit_group+0x25/0x30
[   38.345908]  do_syscall_64+0x3b/0x90
[   38.346197]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   38.346590] RIP: 0033:0x7f3777be6cf6
[   38.346860] Code: Unable to access opcode bytes at 0x7f3777be6ccc.
[   38.347328] RSP: 002b:00007ffd0d7278d8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
[   38.347869] RAX: ffffffffffffffda RBX: 00007f3777cf1490 RCX: 00007f3777be6cf6
[   38.348406] RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
[   38.348935] RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffff80
[   38.349455] R10: 0000000000000004 R11: 0000000000000246 R12: 00007f3777cf1490
[   38.349974] R13: 0000000000000001 R14: 00007f3777cf4e88 R15: 0000000000000000
[   38.350503]  </TASK>
[   38.350698] irq event stamp: 21379
[   38.350947] hardirqs last  enabled at (21387): [<ffffffff811b7f21>] __up_console_sem+0x91/0xb0
[   38.351555] hardirqs last disabled at (21394): [<ffffffff811b7f06>] __up_console_sem+0x76/0xb0
[   38.352180] softirqs last  enabled at (21158): [<ffffffff83000329>] __do_softirq+0x329/0x490
[   38.352821] softirqs last disabled at (21149): [<ffffffff81111082>] irq_exit_rcu+0xd2/0x100
[   38.353411] ---[ end trace 0000000000000000 ]---
[   38.353940] ------------[ cut here ]------------
[   38.354284] WARNING: CPU: 1 PID: 717 at drivers/iommu/iommufd/pages.c:1181 iopt_release_pages+0x159/0x190
[   38.354997] Modules linked in:
[   38.355226] CPU: 1 PID: 717 Comm: repro Tainted: G        W          6.1.0-a0a6c76cf2a5+ #1
[   38.355818] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   38.356628] RIP: 0010:iopt_release_pages+0x159/0x190
[   38.357041] Code: b5 11 ff eb cb e8 87 90 2b ff be 03 00 00 00 4c 89 f7 e8 6a 8b ce ff eb b7 e8 73 90 2b ff 0f 0b e9 ed fe ff ff e8 67 90 2b ff <0f> 0b e9 00 ff ff ff e8 5b 90 2b ff 0f 0b e9 07 ff ff ff e8 4f 90
[   38.358425] RSP: 0018:ffffc900013c3c88 EFLAGS: 00010246
[   38.358918] RAX: 0000000000000000 RBX: ffff888005ec9400 RCX: ffffffff81fe1957
[   38.359553] RDX: 0000000000000000 RSI: ffff88801235d300 RDI: 0000000000000002
[   38.360060] RBP: ffffc900013c3ca8 R08: 000000000000001c R09: 0000000000000001
[   38.360736] R10: ffff88801235e098 R11: 0000000000000000 R12: ffffffffffffffff
[   38.361249] R13: 0000000001000000 R14: 00000000017fffff R15: 0000000000000000
[   38.361818] FS:  0000000000000000(0000) GS:ffff88807dd00000(0000) knlGS:0000000000000000
[   38.362532] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   38.362940] CR2: 00007f3777cf0500 CR3: 0000000003c12002 CR4: 0000000000770ee0
[   38.363543] PKRU: 55555554
[   38.363768] Call Trace:
[   38.363959]  <TASK>
[   38.364125]  iopt_unmap_iova_range+0x1ef/0x2e0
[   38.364469]  iopt_unmap_all+0x2f/0x60
[   38.364889]  iommufd_ioas_destroy+0x2c/0x70
[   38.365206]  iommufd_fops_release+0xd4/0x170
[   38.365528]  ? iommufd_ctx_get+0x30/0x30
[   38.365882]  __fput+0x11f/0x450
[   38.366175]  ____fput+0x1e/0x30
[   38.366423]  task_work_run+0xb6/0x120
[   38.366722]  do_exit+0x521/0x1340
[   38.366997]  ? lockdep_hardirqs_on+0x8a/0x110
[   38.367334]  ? trace_hardirqs_on+0x3f/0x100
[   38.367655]  do_group_exit+0x5e/0xf0
[   38.367947]  __x64_sys_exit_group+0x25/0x30
[   38.368363]  do_syscall_64+0x3b/0x90
[   38.368646]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   38.369076] RIP: 0033:0x7f3777be6cf6
[   38.369339] Code: Unable to access opcode bytes at 0x7f3777be6ccc.
[   38.369796] RSP: 002b:00007ffd0d7278d8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
[   38.370464] RAX: ffffffffffffffda RBX: 00007f3777cf1490 RCX: 00007f3777be6cf6
[   38.370980] RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
[   38.371507] RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffff80
[   38.372016] R10: 0000000000000004 R11: 0000000000000246 R12: 00007f3777cf1490
[   38.372622] R13: 0000000000000001 R14: 00007f3777cf4e88 R15: 0000000000000000
[   38.373192]  </TASK>
[   38.373390] irq event stamp: 21993
[   38.373643] hardirqs last  enabled at (22001): [<ffffffff811b7f21>] __up_console_sem+0x91/0xb0
[   38.374255] hardirqs last disabled at (22008): [<ffffffff811b7f06>] __up_console_sem+0x76/0xb0
[   38.375004] softirqs last  enabled at (21982): [<ffffffff83000329>] __do_softirq+0x329/0x490
[   38.375626] softirqs last disabled at (21965): [<ffffffff81111082>] irq_exit_rcu+0xd2/0x100
[   38.376337] ---[ end trace 0000000000000000 ]---
[   38.477544] ------------[ cut here ]------------
[   38.477936] WARNING: CPU: 1 PID: 720 at drivers/iommu/iommufd/pages.c:294 __iopt_area_unfill_domain+0x152/0x560
[   38.478678] Modules linked in:
[   38.478910] CPU: 1 PID: 720 Comm: repro Tainted: G        W          6.1.0-a0a6c76cf2a5+ #1
[   38.479520] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   38.480322] RIP: 0010:__iopt_area_unfill_domain+0x152/0x560
[   38.480761] Code: a1 2b ff 44 8b 64 24 54 48 8b 44 24 48 31 ff 44 89 e6 48 89 44 24 38 e8 6c a2 2b ff 45 85 e4 0f 85 eb 01 00 00 e8 ee a0 2b ff <0f> 0b e8 e7 a0 2b ff 48 8b 44 24 38 89 5c 24 58 89 18 8b 44 24 54
[   38.482054] RSP: 0018:ffffc900013d3ae0 EFLAGS: 00010246
[   38.482436] RAX: 0000000000000000 RBX: 00000000ffffffff RCX: ffffffff81fe0bd5
[   38.482971] RDX: 0000000000000000 RSI: ffff88800cb4d300 RDI: 0000000000000002
[   38.483482] RBP: ffffc900013d3d10 R08: 000000000003b5c5 R09: 0000000000000004
[   38.483990] R10: 000000000003b5a0 R11: 0000000000000024 R12: 0000000000000001
[   38.484489] R13: 0000000000000801 R14: 00000000000007ff R15: 0000000000000800
[   38.485025] FS:  00007f3777af9740(0000) GS:ffff88807dd00000(0000) knlGS:0000000000000000
[   38.485595] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   38.486005] CR2: 00007f3777c1e580 CR3: 000000000caac004 CR4: 0000000000770ee0
[   38.486520] PKRU: 55555554
[   38.486726] Call Trace:
[   38.486913]  <TASK>
[   38.487105]  ? __this_cpu_preempt_check+0x20/0x30
[   38.487494]  ? lock_is_held_type+0xe6/0x140
[   38.487819]  ? rcu_read_lock_sched_held+0x57/0x80
[   38.488177]  ? __mutex_lock+0x13a/0xf30
[   38.488487]  ? write_comp_data+0x2f/0x90
[   38.488806]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   38.489171]  iopt_area_unfill_domain+0x32/0x40
[   38.489521]  iopt_table_remove_domain+0x23f/0x4c0
[   38.489882]  iommufd_device_selftest_detach+0x3a/0x90
[   38.490278]  iommufd_selftest_destroy+0x55/0x70
[   38.490625]  iommufd_object_destroy_user+0xce/0x130
[   38.491023]  iommufd_destroy+0xa2/0xc0
[   38.491315]  iommufd_fops_ioctl+0x1ef/0x310
[   38.491643]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   38.491996]  ? write_comp_data+0x2f/0x90
[   38.492321]  __x64_sys_ioctl+0x10e/0x160
[   38.492628]  ? iommufd_get_object.part.6+0x1c0/0x1c0
[   38.493024]  do_syscall_64+0x3b/0x90
[   38.493316]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   38.493733] RIP: 0033:0x7f3777c1e59d
[   38.494008] Code: 00 c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d d3 08 0d 00 f7 d8 64 89 01 48
[   38.495344] RSP: 002b:00007ffd0d727918 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   38.495890] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f3777c1e59d
[   38.496411] RDX: 0000000020000140 RSI: 0000000000003b80 RDI: 0000000000000003
[   38.496938] RBP: 00007ffd0d727930 R08: 00007ffd0d727930 R09: 00007ffd0d727930
[   38.497443] R10: 00007ffd0d727930 R11: 0000000000000213 R12: 0000000000401180
[   38.497999] R13: 00007ffd0d727a50 R14: 0000000000000000 R15: 0000000000000000
[   38.498568]  </TASK>
[   38.498756] irq event stamp: 14709
[   38.499012] hardirqs last  enabled at (14717): [<ffffffff811b7f21>] __up_console_sem+0x91/0xb0
[   38.499638] hardirqs last disabled at (14724): [<ffffffff811b7f06>] __up_console_sem+0x76/0xb0
[   38.500266] softirqs last  enabled at (14018): [<ffffffff83000329>] __do_softirq+0x329/0x490
[   38.500929] softirqs last disabled at (14005): [<ffffffff81111082>] irq_exit_rcu+0xd2/0x100
[   38.501530] ---[ end trace 0000000000000000 ]---
[   38.501987] ------------[ cut here ]------------
[   38.502324] WARNING: CPU: 1 PID: 720 at drivers/iommu/iommufd/pages.c:1290 __iopt_area_unfill_domain+0x54f/0x560
[   38.503078] Modules linked in:
[   38.503314] CPU: 1 PID: 720 Comm: repro Tainted: G        W          6.1.0-a0a6c76cf2a5+ #1
[   38.503918] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   38.504757] RIP: 0010:__iopt_area_unfill_domain+0x54f/0x560
[   38.505187] Code: e8 86 9e 2b ff 85 db 0f 85 35 fb ff ff e8 09 9d 2b ff 0f 0b e9 29 fb ff ff e8 fd 9c 2b ff 0f 0b e9 69 fe ff ff e8 f1 9c 2b ff <0f> 0b e9 58 ff ff ff e8 65 2d dc 00 0f 1f 44 00 00 0f 1f 44 00 00
[   38.506504] RSP: 0018:ffffc900013d3ae0 EFLAGS: 00010246
[   38.506878] RAX: 0000000000000000 RBX: 00000000ffffffff RCX: ffffffff81fe0d26
[   38.507411] RDX: 0000000000000000 RSI: ffff88800cb4d300 RDI: 0000000000000002
[   38.507920] RBP: ffffc900013d3d10 R08: 000000000003b5c5 R09: 0000000000000004
[   38.508447] R10: 000000000003b5a0 R11: 0000000000000024 R12: 00000000000007ff
[   38.508981] R13: 0000000000000801 R14: 00000000000007ff R15: 0000000000000800
[   38.509511] FS:  00007f3777af9740(0000) GS:ffff88807dd00000(0000) knlGS:0000000000000000
[   38.510078] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   38.510506] CR2: 00007f3777c1e580 CR3: 000000000caac004 CR4: 0000000000770ee0
[   38.511028] PKRU: 55555554
[   38.511233] Call Trace:
[   38.511419]  <TASK>
[   38.511644]  ? __this_cpu_preempt_check+0x20/0x30
[   38.512002]  ? lock_is_held_type+0xe6/0x140
[   38.512317]  ? rcu_read_lock_sched_held+0x57/0x80
[   38.512702]  ? __mutex_lock+0x13a/0xf30
[   38.513009]  ? write_comp_data+0x2f/0x90
[   38.513329]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   38.513713]  iopt_area_unfill_domain+0x32/0x40
[   38.514076]  iopt_table_remove_domain+0x23f/0x4c0
[   38.514431]  iommufd_device_selftest_detach+0x3a/0x90
[   38.514838]  iommufd_selftest_destroy+0x55/0x70
[   38.515212]  iommufd_object_destroy_user+0xce/0x130
[   38.515579]  iommufd_destroy+0xa2/0xc0
[   38.515865]  iommufd_fops_ioctl+0x1ef/0x310
[   38.516202]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   38.516552]  ? write_comp_data+0x2f/0x90
[   38.516875]  __x64_sys_ioctl+0x10e/0x160
[   38.517202]  ? iommufd_get_object.part.6+0x1c0/0x1c0
[   38.517569]  do_syscall_64+0x3b/0x90
[   38.517836]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   38.518234] RIP: 0033:0x7f3777c1e59d
[   38.518523] Code: 00 c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d d3 08 0d 00 f7 d8 64 89 01 48
[   38.519866] RSP: 002b:00007ffd0d727918 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   38.520431] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f3777c1e59d
[   38.520967] RDX: 0000000020000140 RSI: 0000000000003b80 RDI: 0000000000000003
[   38.521498] RBP: 00007ffd0d727930 R08: 00007ffd0d727930 R09: 00007ffd0d727930
[   38.522041] R10: 00007ffd0d727930 R11: 0000000000000213 R12: 0000000000401180
[   38.522583] R13: 00007ffd0d727a50 R14: 0000000000000000 R15: 0000000000000000
[   38.523124]  </TASK>
[   38.523306] irq event stamp: 15169
[   38.523585] hardirqs last  enabled at (15177): [<ffffffff811b7f21>] __up_console_sem+0x91/0xb0
[   38.524221] hardirqs last disabled at (15184): [<ffffffff811b7f06>] __up_console_sem+0x76/0xb0
[   38.524892] softirqs last  enabled at (14874): [<ffffffff83000329>] __do_softirq+0x329/0x490
[   38.525512] softirqs last disabled at (14869): [<ffffffff81111082>] irq_exit_rcu+0xd2/0x100
[   38.526142] ---[ end trace 0000000000000000 ]---
[   38.530901] ------------[ cut here ]------------
[   38.531287] WARNING: CPU: 1 PID: 720 at drivers/iommu/iommufd/pages.c:178 batch_unpin.isra.23+0x151/0x1a0
[   38.532005] Modules linked in:
[   38.532239] CPU: 1 PID: 720 Comm: repro Tainted: G        W          6.1.0-a0a6c76cf2a5+ #1
[   38.532900] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   38.533732] RIP: 0010:batch_unpin.isra.23+0x151/0x1a0
[   38.534115] Code: e8 c4 be 2b ff 48 8b 45 d0 48 85 c0 75 17 e8 26 bd 2b ff 48 8b 7d c8 48 89 de e8 fa bd 2b ff 48 39 5d c8 73 07 e8 0f bd 2b ff <0f> 0b e8 08 bd 2b ff 4d 29 e5 31 ff 41 83 c6 01 4c 89 ee 31 db e8
[   38.535489] RSP: 0018:ffffc900013d39d8 EFLAGS: 00010246
[   38.535936] RAX: 0000000000000000 RBX: ffffffffffffffff RCX: ffffffff81fded8c
[   38.536450] RDX: 0000000000000000 RSI: ffff88800cb4d300 RDI: 0000000000000002
[   38.537015] RBP: ffffc900013d3a20 R08: 0000000000000000 R09: ffff88807dd3b890
[   38.537535] R10: 0000000000001a6c R11: 0000000000000000 R12: 0000000000000001
[   38.538110] R13: 0000000000000001 R14: 0000000000000000 R15: ffff888005ec8c00
[   38.538638] FS:  0000000000000000(0000) GS:ffff88807dd00000(0000) knlGS:0000000000000000
[   38.539250] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   38.539683] CR2: 00007f3777cf0500 CR3: 0000000003c12003 CR4: 0000000000770ee0
[   38.540419] PKRU: 55555554
[   38.540771] Call Trace:
[   38.541065]  <TASK>
[   38.541340]  iopt_pages_unfill_xarray+0x39f/0x5c0
[   38.541961]  ? write_comp_data+0x2f/0x90
[   38.542436]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   38.542979]  ? write_comp_data+0x2f/0x90
[   38.543445]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   38.544003]  ? interval_tree_remove+0x291/0x4e0
[   38.544544]  ? write_comp_data+0x2f/0x90
[   38.545036]  iopt_area_remove_access+0x108/0x120
[   38.545605]  iommufd_access_unpin_pages+0x177/0x210
[   38.546215]  iommufd_test_access_unmap+0xe0/0x130
[   38.546780]  ? iommufd_test_access_unmap+0x130/0x130
[   38.547365]  iommufd_test_staccess_release+0x39/0x60
[   38.547967]  __fput+0x11f/0x450
[   38.548380]  ____fput+0x1e/0x30
[   38.548821]  task_work_run+0xb6/0x120
[   38.549301]  do_exit+0x521/0x1340
[   38.549719]  ? lockdep_hardirqs_on+0x8a/0x110
[   38.550271]  ? trace_hardirqs_on+0x3f/0x100
[   38.550780]  do_group_exit+0x5e/0xf0
[   38.551210]  __x64_sys_exit_group+0x25/0x30
[   38.551701]  do_syscall_64+0x3b/0x90
[   38.552130]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   38.552741] RIP: 0033:0x7f3777be6cf6
[   38.553168] Code: Unable to access opcode bytes at 0x7f3777be6ccc.
[   38.553859] RSP: 002b:00007ffd0d7278d8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
[   38.554721] RAX: ffffffffffffffda RBX: 00007f3777cf1490 RCX: 00007f3777be6cf6
[   38.555502] RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
[   38.556301] RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffff80
[   38.557131] R10: 0000000000000004 R11: 0000000000000246 R12: 00007f3777cf1490
[   38.557934] R13: 0000000000000001 R14: 00007f3777cf4e88 R15: 0000000000000000
[   38.558774]  </TASK>
[   38.559042] irq event stamp: 21081
[   38.559439] hardirqs last  enabled at (21089): [<ffffffff811b7f21>] __up_console_sem+0x91/0xb0
[   38.560385] hardirqs last disabled at (21096): [<ffffffff811b7f06>] __up_console_sem+0x76/0xb0
[   38.561374] softirqs last  enabled at (20932): [<ffffffff83000329>] __do_softirq+0x329/0x490
[   38.562333] softirqs last disabled at (20923): [<ffffffff81111082>] irq_exit_rcu+0xd2/0x100
[   38.563242] ---[ end trace 0000000000000000 ]---
[   38.563924] ------------[ cut here ]------------
[   38.564441] WARNING: CPU: 1 PID: 720 at drivers/iommu/iommufd/pages.c:886 update_unpinned+0x75/0x80
[   38.565453] Modules linked in:
[   38.565806] CPU: 1 PID: 720 Comm: repro Tainted: G        W          6.1.0-a0a6c76cf2a5+ #1
[   38.566732] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   38.567964] RIP: 0010:update_unpinned+0x75/0x80
[   38.568500] Code: ac 2b ff 48 89 de 31 c9 31 d2 4c 29 e6 4c 89 ef e8 70 fb ff ff e8 bb ac 2b ff 5b 41 5c 41 5d 5d c3 cc cc cc cc e8 ab ac 2b ff <0f> 0b eb e7 0f 1f 80 00 00 00 00 0f 1f 44 00 00 55 48 89 e5 41 57
[   38.570527] RSP: 0018:ffffc900013d3a08 EFLAGS: 00010246
[   38.571092] RAX: 0000000000000000 RBX: 0000000000000000 RCX: ffffffff81fdfdcf
[   38.571863] RDX: 0000000000000000 RSI: ffff88800cb4d300 RDI: 0000000000000002
[   38.572646] RBP: ffffc900013d3a20 R08: 0000000000000000 R09: ffff88807dd3b890
[   38.573467] R10: 0000000000001a6c R11: 0000000000000000 R12: ffffffffffffffff
[   38.574248] R13: ffff888005ec8c00 R14: 0000000000000002 R15: 0000000000000002
[   38.575011] FS:  0000000000000000(0000) GS:ffff88807dd00000(0000) knlGS:0000000000000000
[   38.575898] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   38.576524] CR2: 00007f3777cf0500 CR3: 0000000003c12003 CR4: 0000000000770ee0
[   38.577322] PKRU: 55555554
[   38.577641] Call Trace:
[   38.577929]  <TASK>
[   38.578189]  iopt_pages_unfill_xarray+0x522/0x5c0
[   38.578798]  ? write_comp_data+0x2f/0x90
[   38.579243]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   38.579770]  ? write_comp_data+0x2f/0x90
[   38.580228]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   38.580802]  ? interval_tree_remove+0x291/0x4e0
[   38.581310]  ? write_comp_data+0x2f/0x90
[   38.581768]  iopt_area_remove_access+0x108/0x120
[   38.582319]  iommufd_access_unpin_pages+0x177/0x210
[   38.582900]  iommufd_test_access_unmap+0xe0/0x130
[   38.583441]  ? iommufd_test_access_unmap+0x130/0x130
[   38.584013]  iommufd_test_staccess_release+0x39/0x60
[   38.584585]  __fput+0x11f/0x450
[   38.585006]  ____fput+0x1e/0x30
[   38.585379]  task_work_run+0xb6/0x120
[   38.585828]  do_exit+0x521/0x1340
[   38.586220]  ? lockdep_hardirqs_on+0x8a/0x110
[   38.586734]  ? trace_hardirqs_on+0x3f/0x100
[   38.587213]  do_group_exit+0x5e/0xf0
[   38.587634]  __x64_sys_exit_group+0x25/0x30
[   38.588118]  do_syscall_64+0x3b/0x90
[   38.588537]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   38.589140] RIP: 0033:0x7f3777be6cf6
[   38.589541] Code: Unable to access opcode bytes at 0x7f3777be6ccc.
[   38.590206] RSP: 002b:00007ffd0d7278d8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
[   38.590930] RAX: ffffffffffffffda RBX: 00007f3777cf1490 RCX: 00007f3777be6cf6
[   38.591456] RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
[   38.591972] RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffff80
[   38.592498] R10: 0000000000000004 R11: 0000000000000246 R12: 00007f3777cf1490
[   38.593035] R13: 0000000000000001 R14: 00007f3777cf4e88 R15: 0000000000000000
[   38.593569]  </TASK>
[   38.593748] irq event stamp: 21597
[   38.594006] hardirqs last  enabled at (21605): [<ffffffff811b7f21>] __up_console_sem+0x91/0xb0
[   38.594657] hardirqs last disabled at (21612): [<ffffffff811b7f06>] __up_console_sem+0x76/0xb0
[   38.595288] softirqs last  enabled at (21308): [<ffffffff83000329>] __do_softirq+0x329/0x490
[   38.595904] softirqs last disabled at (21295): [<ffffffff81111082>] irq_exit_rcu+0xd2/0x100
[   38.596512] ---[ end trace 0000000000000000 ]---
[   38.597027] ------------[ cut here ]------------
[   38.597371] WARNING: CPU: 1 PID: 720 at drivers/iommu/iommufd/pages.c:1181 iopt_release_pages+0x159/0x190
[   38.598074] Modules linked in:
[   38.598312] CPU: 1 PID: 720 Comm: repro Tainted: G        W          6.1.0-a0a6c76cf2a5+ #1
[   38.598904] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   38.599712] RIP: 0010:iopt_release_pages+0x159/0x190
[   38.600093] Code: b5 11 ff eb cb e8 87 90 2b ff be 03 00 00 00 4c 89 f7 e8 6a 8b ce ff eb b7 e8 73 90 2b ff 0f 0b e9 ed fe ff ff e8 67 90 2b ff <0f> 0b e9 00 ff ff ff e8 5b 90 2b ff 0f 0b e9 07 ff ff ff e8 4f 90
[   38.601441] RSP: 0018:ffffc900013d3c88 EFLAGS: 00010246
[   38.601826] RAX: 0000000000000000 RBX: ffff888005ec8c00 RCX: ffffffff81fe1957
[   38.602341] RDX: 0000000000000000 RSI: ffff88800cb4d300 RDI: 0000000000000002
[   38.602869] RBP: ffffc900013d3ca8 R08: 000000000000001c R09: 0000000000000001
[   38.603384] R10: ffff88800cb4e098 R11: 0000000000000000 R12: ffffffffffffffff
[   38.603895] R13: 0000000001000000 R14: 00000000017fffff R15: 0000000000000000
[   38.604416] FS:  0000000000000000(0000) GS:ffff88807dd00000(0000) knlGS:0000000000000000
[   38.605112] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   38.605523] CR2: 00007f3777cf0500 CR3: 0000000003c12003 CR4: 0000000000770ee0
[   38.606022] PKRU: 55555554
[   38.606220] Call Trace:
[   38.606401]  <TASK>
[   38.606577]  iopt_unmap_iova_range+0x1ef/0x2e0
[   38.606909]  iopt_unmap_all+0x2f/0x60
[   38.607187]  iommufd_ioas_destroy+0x2c/0x70
[   38.607517]  iommufd_fops_release+0xd4/0x170
[   38.607860]  ? iommufd_ctx_get+0x30/0x30
[   38.608159]  __fput+0x11f/0x450
[   38.608413]  ____fput+0x1e/0x30
[   38.608681]  task_work_run+0xb6/0x120
[   38.608969]  do_exit+0x521/0x1340
[   38.609220]  ? lockdep_hardirqs_on+0x8a/0x110
[   38.609558]  ? trace_hardirqs_on+0x3f/0x100
[   38.609889]  do_group_exit+0x5e/0xf0
[   38.610165]  __x64_sys_exit_group+0x25/0x30
[   38.610489]  do_syscall_64+0x3b/0x90
[   38.610757]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   38.611129] RIP: 0033:0x7f3777be6cf6
[   38.611401] Code: Unable to access opcode bytes at 0x7f3777be6ccc.
[   38.611861] RSP: 002b:00007ffd0d7278d8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
[   38.612418] RAX: ffffffffffffffda RBX: 00007f3777cf1490 RCX: 00007f3777be6cf6
[   38.612956] RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
[   38.613487] RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffff80
[   38.614020] R10: 0000000000000004 R11: 0000000000000246 R12: 00007f3777cf1490
[   38.614546] R13: 0000000000000001 R14: 00007f3777cf4e88 R15: 0000000000000000
[   38.615074]  </TASK>
[   38.615255] irq event stamp: 22237
[   38.615518] hardirqs last  enabled at (22245): [<ffffffff811b7f21>] __up_console_sem+0x91/0xb0
[   38.616148] hardirqs last disabled at (22252): [<ffffffff811b7f06>] __up_console_sem+0x76/0xb0
[   38.616802] softirqs last  enabled at (21992): [<ffffffff83000329>] __do_softirq+0x329/0x490
[   38.617450] softirqs last disabled at (21823): [<ffffffff81111082>] irq_exit_rcu+0xd2/0x100
[   38.618065] ---[ end trace 0000000000000000 ]---
[   38.828816] ------------[ cut here ]------------
[   38.829186] WARNING: CPU: 1 PID: 726 at drivers/iommu/iommufd/pages.c:294 __iopt_area_unfill_domain+0x152/0x560
[   38.829936] Modules linked in:
[   38.830172] CPU: 1 PID: 726 Comm: repro Tainted: G        W          6.1.0-a0a6c76cf2a5+ #1
[   38.830787] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   38.831589] RIP: 0010:__iopt_area_unfill_domain+0x152/0x560
[   38.832010] Code: a1 2b ff 44 8b 64 24 54 48 8b 44 24 48 31 ff 44 89 e6 48 89 44 24 38 e8 6c a2 2b ff 45 85 e4 0f 85 eb 01 00 00 e8 ee a0 2b ff <0f> 0b e8 e7 a0 2b ff 48 8b 44 24 38 89 5c 24 58 89 18 8b 44 24 54
[   38.833396] RSP: 0018:ffffc900013fbae0 EFLAGS: 00010246
[   38.833783] RAX: 0000000000000000 RBX: 00000000ffffffff RCX: ffffffff81fe0bd5
[   38.834310] RDX: 0000000000000000 RSI: ffff88800cb4d300 RDI: 0000000000000002
[   38.834839] RBP: ffffc900013fbd10 R08: 000000000003b5c5 R09: 0000000000000008
[   38.835372] R10: 000000000003b5a0 R11: 0000000000000024 R12: 0000000000000001
[   38.835882] R13: 0000000000000801 R14: 00000000000007ff R15: 0000000000000800
[   38.836400] FS:  00007f3777af9740(0000) GS:ffff88807dd00000(0000) knlGS:0000000000000000
[   38.837019] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   38.837446] CR2: 00007f3777c1e580 CR3: 000000000c992002 CR4: 0000000000770ee0
[   38.837968] PKRU: 55555554
[   38.838194] Call Trace:
[   38.838383]  <TASK>
[   38.838585]  ? __this_cpu_preempt_check+0x20/0x30
[   38.838967]  ? lock_is_held_type+0xe6/0x140
[   38.839310]  ? rcu_read_lock_sched_held+0x57/0x80
[   38.839710]  ? __mutex_lock+0x13a/0xf30
[   38.840027]  ? write_comp_data+0x2f/0x90
[   38.840342]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   38.840736]  iopt_area_unfill_domain+0x32/0x40
[   38.841105]  iopt_table_remove_domain+0x23f/0x4c0
[   38.841472]  iommufd_device_selftest_detach+0x3a/0x90
[   38.841877]  iommufd_selftest_destroy+0x55/0x70
[   38.842235]  iommufd_object_destroy_user+0xce/0x130
[   38.842620]  iommufd_destroy+0xa2/0xc0
[   38.842920]  iommufd_fops_ioctl+0x1ef/0x310
[   38.843250]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   38.843625]  ? write_comp_data+0x2f/0x90
[   38.843953]  __x64_sys_ioctl+0x10e/0x160
[   38.844262]  ? iommufd_get_object.part.6+0x1c0/0x1c0
[   38.844641]  do_syscall_64+0x3b/0x90
[   38.844994]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   38.845373] RIP: 0033:0x7f3777c1e59d
[   38.845648] Code: 00 c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d d3 08 0d 00 f7 d8 64 89 01 48
[   38.846962] RSP: 002b:00007ffd0d727918 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   38.847514] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f3777c1e59d
[   38.848058] RDX: 0000000020000140 RSI: 0000000000003b80 RDI: 0000000000000003
[   38.848591] RBP: 00007ffd0d727930 R08: 00007ffd0d727930 R09: 00007ffd0d727930
[   38.849174] R10: 00007ffd0d727930 R11: 0000000000000213 R12: 0000000000401180
[   38.849692] R13: 00007ffd0d727a50 R14: 0000000000000000 R15: 0000000000000000
[   38.850226]  </TASK>
[   38.850416] irq event stamp: 14881
[   38.850680] hardirqs last  enabled at (14889): [<ffffffff811b7f21>] __up_console_sem+0x91/0xb0
[   38.851304] hardirqs last disabled at (14896): [<ffffffff811b7f06>] __up_console_sem+0x76/0xb0
[   38.851941] softirqs last  enabled at (14854): [<ffffffff83000329>] __do_softirq+0x329/0x490
[   38.852569] softirqs last disabled at (14769): [<ffffffff81111082>] irq_exit_rcu+0xd2/0x100
[   38.853201] ---[ end trace 0000000000000000 ]---
[   38.853640] ------------[ cut here ]------------
[   38.853982] WARNING: CPU: 1 PID: 726 at drivers/iommu/iommufd/pages.c:1290 __iopt_area_unfill_domain+0x54f/0x560
[   38.854725] Modules linked in:
[   38.854964] CPU: 1 PID: 726 Comm: repro Tainted: G        W          6.1.0-a0a6c76cf2a5+ #1
[   38.855563] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   38.856368] RIP: 0010:__iopt_area_unfill_domain+0x54f/0x560
[   38.856823] Code: e8 86 9e 2b ff 85 db 0f 85 35 fb ff ff e8 09 9d 2b ff 0f 0b e9 29 fb ff ff e8 fd 9c 2b ff 0f 0b e9 69 fe ff ff e8 f1 9c 2b ff <0f> 0b e9 58 ff ff ff e8 65 2d dc 00 0f 1f 44 00 00 0f 1f 44 00 00
[   38.858158] RSP: 0018:ffffc900013fbae0 EFLAGS: 00010246
[   38.858550] RAX: 0000000000000000 RBX: 00000000ffffffff RCX: ffffffff81fe0d26
[   38.859065] RDX: 0000000000000000 RSI: ffff88800cb4d300 RDI: 0000000000000002
[   38.859589] RBP: ffffc900013fbd10 R08: 000000000003b5c5 R09: 0000000000000008
[   38.860149] R10: 000000000003b5a0 R11: 0000000000000024 R12: 00000000000007ff
[   38.860698] R13: 0000000000000801 R14: 00000000000007ff R15: 0000000000000800
[   38.861214] FS:  00007f3777af9740(0000) GS:ffff88807dd00000(0000) knlGS:0000000000000000
[   38.861797] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   38.862226] CR2: 00007f3777c1e580 CR3: 000000000c992002 CR4: 0000000000770ee0
[   38.862759] PKRU: 55555554
[   38.862973] Call Trace:
[   38.863163]  <TASK>
[   38.863357]  ? __this_cpu_preempt_check+0x20/0x30
[   38.863724]  ? lock_is_held_type+0xe6/0x140
[   38.864059]  ? rcu_read_lock_sched_held+0x57/0x80
[   38.864426]  ? __mutex_lock+0x13a/0xf30
[   38.864760]  ? write_comp_data+0x2f/0x90
[   38.865069]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   38.865432]  iopt_area_unfill_domain+0x32/0x40
[   38.865779]  iopt_table_remove_domain+0x23f/0x4c0
[   38.866160]  iommufd_device_selftest_detach+0x3a/0x90
[   38.866569]  iommufd_selftest_destroy+0x55/0x70
[   38.866914]  iommufd_object_destroy_user+0xce/0x130
[   38.867290]  iommufd_destroy+0xa2/0xc0
[   38.867591]  iommufd_fops_ioctl+0x1ef/0x310
[   38.867921]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   38.868281]  ? write_comp_data+0x2f/0x90
[   38.868595]  __x64_sys_ioctl+0x10e/0x160
[   38.868926]  ? iommufd_get_object.part.6+0x1c0/0x1c0
[   38.869305]  do_syscall_64+0x3b/0x90
[   38.869586]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   38.869984] RIP: 0033:0x7f3777c1e59d
[   38.870259] Code: 00 c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d d3 08 0d 00 f7 d8 64 89 01 48
[   38.871581] RSP: 002b:00007ffd0d727918 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   38.872131] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f3777c1e59d
[   38.872640] RDX: 0000000020000140 RSI: 0000000000003b80 RDI: 0000000000000003
[   38.873181] RBP: 00007ffd0d727930 R08: 00007ffd0d727930 R09: 00007ffd0d727930
[   38.873712] R10: 00007ffd0d727930 R11: 0000000000000213 R12: 0000000000401180
[   38.874264] R13: 00007ffd0d727a50 R14: 0000000000000000 R15: 0000000000000000
[   38.875123]  </TASK>
[   38.875305] irq event stamp: 15347
[   38.875562] hardirqs last  enabled at (15355): [<ffffffff811b7f21>] __up_console_sem+0x91/0xb0
[   38.876269] hardirqs last disabled at (15362): [<ffffffff811b7f06>] __up_console_sem+0x76/0xb0
[   38.876986] softirqs last  enabled at (15050): [<ffffffff83000329>] __do_softirq+0x329/0x490
[   38.877727] softirqs last disabled at (15041): [<ffffffff81111082>] irq_exit_rcu+0xd2/0x100
[   38.878419] ---[ end trace 0000000000000000 ]---
[   38.884000] ------------[ cut here ]------------
[   38.884360] WARNING: CPU: 1 PID: 726 at drivers/iommu/iommufd/pages.c:178 batch_unpin.isra.23+0x151/0x1a0
[   38.885211] Modules linked in:
[   38.885451] CPU: 1 PID: 726 Comm: repro Tainted: G        W          6.1.0-a0a6c76cf2a5+ #1
[   38.886114] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   38.886984] RIP: 0010:batch_unpin.isra.23+0x151/0x1a0
[   38.887367] Code: e8 c4 be 2b ff 48 8b 45 d0 48 85 c0 75 17 e8 26 bd 2b ff 48 8b 7d c8 48 89 de e8 fa bd 2b ff 48 39 5d c8 73 07 e8 0f bd 2b ff <0f> 0b e8 08 bd 2b ff 4d 29 e5 31 ff 41 83 c6 01 4c 89 ee 31 db e8
[   38.888852] RSP: 0018:ffffc900013fb9d8 EFLAGS: 00010246
[   38.889268] RAX: 0000000000000000 RBX: ffffffffffffffff RCX: ffffffff81fded8c
[   38.889794] RDX: 0000000000000000 RSI: ffff88800cb4d300 RDI: 0000000000000002
[   38.890404] RBP: ffffc900013fba20 R08: 0000000000000000 R09: ffff88807dd3b890
[   38.890928] R10: 0000000000001ab6 R11: 0000000000000000 R12: 0000000000000001
[   38.891472] R13: 0000000000000001 R14: 0000000000000000 R15: ffff888005ec8c00
[   38.892078] FS:  0000000000000000(0000) GS:ffff88807dd00000(0000) knlGS:0000000000000000
[   38.892683] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   38.893112] CR2: 00007f3777cf0500 CR3: 000000000d51a003 CR4: 0000000000770ee0
[   38.893633] PKRU: 55555554
[   38.893843] Call Trace:
[   38.894033]  <TASK>
[   38.894209]  iopt_pages_unfill_xarray+0x39f/0x5c0
[   38.894610]  ? write_comp_data+0x2f/0x90
[   38.894920]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   38.895289]  ? write_comp_data+0x2f/0x90
[   38.895601]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   38.895962]  ? interval_tree_remove+0x291/0x4e0
[   38.896346]  ? write_comp_data+0x2f/0x90
[   38.896697]  iopt_area_remove_access+0x108/0x120
[   38.897061]  iommufd_access_unpin_pages+0x177/0x210
[   38.897500]  iommufd_test_access_unmap+0xe0/0x130
[   38.897871]  ? iommufd_test_access_unmap+0x130/0x130
[   38.898257]  iommufd_test_staccess_release+0x39/0x60
[   38.898645]  __fput+0x11f/0x450
[   38.898904]  ____fput+0x1e/0x30
[   38.899157]  task_work_run+0xb6/0x120
[   38.899455]  do_exit+0x521/0x1340
[   38.899718]  ? lockdep_hardirqs_on+0x8a/0x110
[   38.900058]  ? trace_hardirqs_on+0x3f/0x100
[   38.900390]  do_group_exit+0x5e/0xf0
[   38.900700]  __x64_sys_exit_group+0x25/0x30
[   38.901021]  do_syscall_64+0x3b/0x90
[   38.901306]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   38.901716] RIP: 0033:0x7f3777be6cf6
[   38.901994] Code: Unable to access opcode bytes at 0x7f3777be6ccc.
[   38.902444] RSP: 002b:00007ffd0d7278d8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
[   38.903000] RAX: ffffffffffffffda RBX: 00007f3777cf1490 RCX: 00007f3777be6cf6
[   38.903525] RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
[   38.904078] RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffff80
[   38.904584] R10: 0000000000000004 R11: 0000000000000246 R12: 00007f3777cf1490
[   38.905112] R13: 0000000000000001 R14: 00007f3777cf4e88 R15: 0000000000000000
[   38.905655]  </TASK>
[   38.905825] irq event stamp: 21331
[   38.906084] hardirqs last  enabled at (21339): [<ffffffff811b7f21>] __up_console_sem+0x91/0xb0
[   38.906715] hardirqs last disabled at (21346): [<ffffffff811b7f06>] __up_console_sem+0x76/0xb0
[   38.907348] softirqs last  enabled at (20916): [<ffffffff83000329>] __do_softirq+0x329/0x490
[   38.907993] softirqs last disabled at (20911): [<ffffffff81111082>] irq_exit_rcu+0xd2/0x100
[   38.908613] ---[ end trace 0000000000000000 ]---
[   38.909084] ------------[ cut here ]------------
[   38.909424] WARNING: CPU: 1 PID: 726 at drivers/iommu/iommufd/pages.c:886 update_unpinned+0x75/0x80
[   38.910085] Modules linked in:
[   38.910321] CPU: 1 PID: 726 Comm: repro Tainted: G        W          6.1.0-a0a6c76cf2a5+ #1
[   38.910939] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   38.911768] RIP: 0010:update_unpinned+0x75/0x80
[   38.912113] Code: ac 2b ff 48 89 de 31 c9 31 d2 4c 29 e6 4c 89 ef e8 70 fb ff ff e8 bb ac 2b ff 5b 41 5c 41 5d 5d c3 cc cc cc cc e8 ab ac 2b ff <0f> 0b eb e7 0f 1f 80 00 00 00 00 0f 1f 44 00 00 55 48 89 e5 41 57
[   38.913482] RSP: 0018:ffffc900013fba08 EFLAGS: 00010246
[   38.913876] RAX: 0000000000000000 RBX: 0000000000000000 RCX: ffffffff81fdfdcf
[   38.914397] RDX: 0000000000000000 RSI: ffff88800cb4d300 RDI: 0000000000000002
[   38.914919] RBP: ffffc900013fba20 R08: 0000000000000000 R09: ffff88807dd3b890
[   38.915441] R10: 0000000000001ab6 R11: 0000000000000000 R12: ffffffffffffffff
[   38.915963] R13: ffff888005ec8c00 R14: 0000000000000002 R15: 0000000000000002
[   38.916478] FS:  0000000000000000(0000) GS:ffff88807dd00000(0000) knlGS:0000000000000000
[   38.917079] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   38.917504] CR2: 00007f3777cf0500 CR3: 000000000d51a003 CR4: 0000000000770ee0
[   38.918030] PKRU: 55555554
[   38.918256] Call Trace:
[   38.918454]  <TASK>
[   38.918634]  iopt_pages_unfill_xarray+0x522/0x5c0
[   38.919028]  ? write_comp_data+0x2f/0x90
[   38.919340]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   38.919701]  ? write_comp_data+0x2f/0x90
[   38.920007]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   38.920400]  ? interval_tree_remove+0x291/0x4e0
[   38.920776]  ? write_comp_data+0x2f/0x90
[   38.921084]  iopt_area_remove_access+0x108/0x120
[   38.921452]  iommufd_access_unpin_pages+0x177/0x210
[   38.921843]  iommufd_test_access_unmap+0xe0/0x130
[   38.922206]  ? iommufd_test_access_unmap+0x130/0x130
[   38.922597]  iommufd_test_staccess_release+0x39/0x60
[   38.922978]  __fput+0x11f/0x450
[   38.923240]  ____fput+0x1e/0x30
[   38.923498]  task_work_run+0xb6/0x120
[   38.923790]  do_exit+0x521/0x1340
[   38.924052]  ? lockdep_hardirqs_on+0x8a/0x110
[   38.924397]  ? trace_hardirqs_on+0x3f/0x100
[   38.924749]  do_group_exit+0x5e/0xf0
[   38.925031]  __x64_sys_exit_group+0x25/0x30
[   38.925347]  do_syscall_64+0x3b/0x90
[   38.925624]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   38.926002] RIP: 0033:0x7f3777be6cf6
[   38.926279] Code: Unable to access opcode bytes at 0x7f3777be6ccc.
[   38.926736] RSP: 002b:00007ffd0d7278d8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
[   38.927278] RAX: ffffffffffffffda RBX: 00007f3777cf1490 RCX: 00007f3777be6cf6
[   38.927815] RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
[   38.928327] RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffff80
[   38.928857] R10: 0000000000000004 R11: 0000000000000246 R12: 00007f3777cf1490
[   38.929369] R13: 0000000000000001 R14: 00007f3777cf4e88 R15: 0000000000000000
[   38.929894]  </TASK>
[   38.930067] irq event stamp: 21815
[   38.930322] hardirqs last  enabled at (21823): [<ffffffff811b7f21>] __up_console_sem+0x91/0xb0
[   38.930993] hardirqs last disabled at (21830): [<ffffffff811b7f06>] __up_console_sem+0x76/0xb0
[   38.931668] softirqs last  enabled at (21384): [<ffffffff83000329>] __do_softirq+0x329/0x490
[   38.932304] softirqs last disabled at (21379): [<ffffffff81111082>] irq_exit_rcu+0xd2/0x100
[   38.932932] ---[ end trace 0000000000000000 ]---
[   38.933427] ------------[ cut here ]------------
[   38.933776] WARNING: CPU: 1 PID: 726 at drivers/iommu/iommufd/pages.c:1181 iopt_release_pages+0x159/0x190
[   38.934481] Modules linked in:
[   38.934713] CPU: 1 PID: 726 Comm: repro Tainted: G        W          6.1.0-a0a6c76cf2a5+ #1
[   38.935329] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   38.936144] RIP: 0010:iopt_release_pages+0x159/0x190
[   38.936520] Code: b5 11 ff eb cb e8 87 90 2b ff be 03 00 00 00 4c 89 f7 e8 6a 8b ce ff eb b7 e8 73 90 2b ff 0f 0b e9 ed fe ff ff e8 67 90 2b ff <0f> 0b e9 00 ff ff ff e8 5b 90 2b ff 0f 0b e9 07 ff ff ff e8 4f 90
[   38.937867] RSP: 0018:ffffc900013fbc88 EFLAGS: 00010246
[   38.938253] RAX: 0000000000000000 RBX: ffff888005ec8c00 RCX: ffffffff81fe1957
[   38.938778] RDX: 0000000000000000 RSI: ffff88800cb4d300 RDI: 0000000000000002
[   38.939304] RBP: ffffc900013fbca8 R08: 000000000000001c R09: 0000000000000001
[   38.939832] R10: ffff88800cb4e098 R11: 0000000000000000 R12: ffffffffffffffff
[   38.940348] R13: 0000000001000000 R14: 00000000017fffff R15: 0000000000000000
[   38.940882] FS:  0000000000000000(0000) GS:ffff88807dd00000(0000) knlGS:0000000000000000
[   38.941468] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   38.941907] CR2: 00007f3777cf0500 CR3: 000000000d51a003 CR4: 0000000000770ee0
[   38.942466] PKRU: 55555554
[   38.942675] Call Trace:
[   38.942861]  <TASK>
[   38.943034]  iopt_unmap_iova_range+0x1ef/0x2e0
[   38.943377]  iopt_unmap_all+0x2f/0x60
[   38.943668]  iommufd_ioas_destroy+0x2c/0x70
[   38.943988]  iommufd_fops_release+0xd4/0x170
[   38.944312]  ? iommufd_ctx_get+0x30/0x30
[   38.944613]  __fput+0x11f/0x450
[   38.944896]  ____fput+0x1e/0x30
[   38.945147]  task_work_run+0xb6/0x120
[   38.945441]  do_exit+0x521/0x1340
[   38.945708]  ? lockdep_hardirqs_on+0x8a/0x110
[   38.946075]  ? trace_hardirqs_on+0x3f/0x100
[   38.946404]  do_group_exit+0x5e/0xf0
[   38.946694]  __x64_sys_exit_group+0x25/0x30
[   38.947034]  do_syscall_64+0x3b/0x90
[   38.947313]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   38.947694] RIP: 0033:0x7f3777be6cf6
[   38.947970] Code: Unable to access opcode bytes at 0x7f3777be6ccc.
[   38.948419] RSP: 002b:00007ffd0d7278d8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
[   38.948993] RAX: ffffffffffffffda RBX: 00007f3777cf1490 RCX: 00007f3777be6cf6
[   38.949511] RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
[   38.950058] RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffff80
[   38.950586] R10: 0000000000000004 R11: 0000000000000246 R12: 00007f3777cf1490
[   38.951096] R13: 0000000000000001 R14: 00007f3777cf4e88 R15: 0000000000000000
[   38.951634]  </TASK>
[   38.951809] irq event stamp: 22287
[   38.952070] hardirqs last  enabled at (22295): [<ffffffff811b7f21>] __up_console_sem+0x91/0xb0
[   38.952723] hardirqs last disabled at (22304): [<ffffffff811b7f06>] __up_console_sem+0x76/0xb0
[   38.953355] softirqs last  enabled at (22034): [<ffffffff83000329>] __do_softirq+0x329/0x490
[   38.953980] softirqs last disabled at (22029): [<ffffffff81111082>] irq_exit_rcu+0xd2/0x100
[   38.954600] ---[ end trace 0000000000000000 ]---
[   39.194203] ------------[ cut here ]------------
[   39.194742] WARNING: CPU: 1 PID: 733 at drivers/iommu/iommufd/pages.c:294 __iopt_area_unfill_domain+0x152/0x560
[   39.195729] Modules linked in:
[   39.196043] CPU: 1 PID: 733 Comm: repro Tainted: G        W          6.1.0-a0a6c76cf2a5+ #1
[   39.196760] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   39.197573] RIP: 0010:__iopt_area_unfill_domain+0x152/0x560
[   39.197996] Code: a1 2b ff 44 8b 64 24 54 48 8b 44 24 48 31 ff 44 89 e6 48 89 44 24 38 e8 6c a2 2b ff 45 85 e4 0f 85 eb 01 00 00 e8 ee a0 2b ff <0f> 0b e8 e7 a0 2b ff 48 8b 44 24 38 89 5c 24 58 89 18 8b 44 24 54
[   39.199664] RSP: 0018:ffffc90001433ae0 EFLAGS: 00010246
[   39.200061] RAX: 0000000000000000 RBX: 00000000ffffffff RCX: ffffffff81fe0bd5
[   39.200611] RDX: 0000000000000000 RSI: ffff88801235d300 RDI: 0000000000000002
[   39.201286] RBP: ffffc90001433d10 R08: 000000000003b5c5 R09: 000000000000000c
[   39.201927] R10: 000000000003b5a0 R11: 0000000000000024 R12: 0000000000000001
[   39.202501] R13: 0000000000000801 R14: 00000000000007ff R15: 0000000000000800
[   39.203014] FS:  00007f3777af9740(0000) GS:ffff88807dd00000(0000) knlGS:0000000000000000
[   39.203590] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   39.204003] CR2: 00007f3777c1e580 CR3: 000000000d54c005 CR4: 0000000000770ee0
[   39.204514] PKRU: 55555554
[   39.204745] Call Trace:
[   39.204935]  <TASK>
[   39.205127]  ? __this_cpu_preempt_check+0x20/0x30
[   39.205502]  ? lock_is_held_type+0xe6/0x140
[   39.205828]  ? rcu_read_lock_sched_held+0x57/0x80
[   39.206188]  ? __mutex_lock+0x13a/0xf30
[   39.206501]  ? write_comp_data+0x2f/0x90
[   39.206797]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   39.207163]  iopt_area_unfill_domain+0x32/0x40
[   39.207517]  iopt_table_remove_domain+0x23f/0x4c0
[   39.207875]  iommufd_device_selftest_detach+0x3a/0x90
[   39.208275]  iommufd_selftest_destroy+0x55/0x70
[   39.208620]  iommufd_object_destroy_user+0xce/0x130
[   39.209014]  iommufd_destroy+0xa2/0xc0
[   39.209314]  iommufd_fops_ioctl+0x1ef/0x310
[   39.209635]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   39.209992]  ? write_comp_data+0x2f/0x90
[   39.210295]  __x64_sys_ioctl+0x10e/0x160
[   39.210615]  ? iommufd_get_object.part.6+0x1c0/0x1c0
[   39.210982]  do_syscall_64+0x3b/0x90
[   39.211254]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   39.211624] RIP: 0033:0x7f3777c1e59d
[   39.211893] Code: 00 c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d d3 08 0d 00 f7 d8 64 89 01 48
[   39.213277] RSP: 002b:00007ffd0d727918 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   39.214011] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f3777c1e59d
[   39.214523] RDX: 0000000020000140 RSI: 0000000000003b80 RDI: 0000000000000003
[   39.215055] RBP: 00007ffd0d727930 R08: 00007ffd0d727930 R09: 00007ffd0d727930
[   39.215561] R10: 00007ffd0d727930 R11: 0000000000000213 R12: 0000000000401180
[   39.216068] R13: 00007ffd0d727a50 R14: 0000000000000000 R15: 0000000000000000
[   39.216797]  </TASK>
[   39.216970] irq event stamp: 14743
[   39.217222] hardirqs last  enabled at (14751): [<ffffffff811b7f21>] __up_console_sem+0x91/0xb0
[   39.217850] hardirqs last disabled at (14758): [<ffffffff811b7f06>] __up_console_sem+0x76/0xb0
[   39.218465] softirqs last  enabled at (14306): [<ffffffff83000329>] __do_softirq+0x329/0x490
[   39.219248] softirqs last disabled at (14301): [<ffffffff81111082>] irq_exit_rcu+0xd2/0x100
[   39.219852] ---[ end trace 0000000000000000 ]---
[   39.220318] ------------[ cut here ]------------
[   39.220690] WARNING: CPU: 1 PID: 733 at drivers/iommu/iommufd/pages.c:1290 __iopt_area_unfill_domain+0x54f/0x560
[   39.221424] Modules linked in:
[   39.221656] CPU: 1 PID: 733 Comm: repro Tainted: G        W          6.1.0-a0a6c76cf2a5+ #1
[   39.222296] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   39.223445] RIP: 0010:__iopt_area_unfill_domain+0x54f/0x560
[   39.224005] Code: e8 86 9e 2b ff 85 db 0f 85 35 fb ff ff e8 09 9d 2b ff 0f 0b e9 29 fb ff ff e8 fd 9c 2b ff 0f 0b e9 69 fe ff ff e8 f1 9c 2b ff <0f> 0b e9 58 ff ff ff e8 65 2d dc 00 0f 1f 44 00 00 0f 1f 44 00 00
[   39.225881] RSP: 0018:ffffc90001433ae0 EFLAGS: 00010246
[   39.226399] RAX: 0000000000000000 RBX: 00000000ffffffff RCX: ffffffff81fe0d26
[   39.227108] RDX: 0000000000000000 RSI: ffff88801235d300 RDI: 0000000000000002
[   39.227868] RBP: ffffc90001433d10 R08: 000000000003b5c5 R09: 000000000000000c
[   39.228557] R10: 000000000003b5a0 R11: 0000000000000024 R12: 00000000000007ff
[   39.229332] R13: 0000000000000801 R14: 00000000000007ff R15: 0000000000000800
[   39.230028] FS:  00007f3777af9740(0000) GS:ffff88807dd00000(0000) knlGS:0000000000000000
[   39.230813] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   39.231372] CR2: 00007f3777c1e580 CR3: 000000000d54c005 CR4: 0000000000770ee0
[   39.232167] PKRU: 55555554
[   39.232438] Call Trace:
[   39.232706]  <TASK>
[   39.232954]  ? __this_cpu_preempt_check+0x20/0x30
[   39.233445]  ? lock_is_held_type+0xe6/0x140
[   39.233875]  ? rcu_read_lock_sched_held+0x57/0x80
[   39.234350]  ? __mutex_lock+0x13a/0xf30
[   39.234769]  ? write_comp_data+0x2f/0x90
[   39.235225]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   39.235702]  iopt_area_unfill_domain+0x32/0x40
[   39.236152]  iopt_table_remove_domain+0x23f/0x4c0
[   39.236685]  iommufd_device_selftest_detach+0x3a/0x90
[   39.237235]  iommufd_selftest_destroy+0x55/0x70
[   39.237698]  iommufd_object_destroy_user+0xce/0x130
[   39.238186]  iommufd_destroy+0xa2/0xc0
[   39.238576]  iommufd_fops_ioctl+0x1ef/0x310
[   39.239004]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   39.239475]  ? write_comp_data+0x2f/0x90
[   39.239976]  __x64_sys_ioctl+0x10e/0x160
[   39.240382]  ? iommufd_get_object.part.6+0x1c0/0x1c0
[   39.240904]  do_syscall_64+0x3b/0x90
[   39.241277]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   39.241775] RIP: 0033:0x7f3777c1e59d
[   39.242135] Code: 00 c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d d3 08 0d 00 f7 d8 64 89 01 48
[   39.243969] RSP: 002b:00007ffd0d727918 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   39.244803] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f3777c1e59d
[   39.245497] RDX: 0000000020000140 RSI: 0000000000003b80 RDI: 0000000000000003
[   39.246205] RBP: 00007ffd0d727930 R08: 00007ffd0d727930 R09: 00007ffd0d727930
[   39.246967] R10: 00007ffd0d727930 R11: 0000000000000213 R12: 0000000000401180
[   39.247676] R13: 00007ffd0d727a50 R14: 0000000000000000 R15: 0000000000000000
[   39.248441]  </TASK>
[   39.248689] irq event stamp: 15207
[   39.249031] hardirqs last  enabled at (15215): [<ffffffff811b7f21>] __up_console_sem+0x91/0xb0
[   39.249882] hardirqs last disabled at (15222): [<ffffffff811b7f06>] __up_console_sem+0x76/0xb0
[   39.250796] softirqs last  enabled at (14860): [<ffffffff83000329>] __do_softirq+0x329/0x490
[   39.251627] softirqs last disabled at (14855): [<ffffffff81111082>] irq_exit_rcu+0xd2/0x100
[   39.252511] ---[ end trace 0000000000000000 ]---
[   39.257231] ------------[ cut here ]------------
[   39.257706] WARNING: CPU: 1 PID: 733 at drivers/iommu/iommufd/pages.c:178 batch_unpin.isra.23+0x151/0x1a0
[   39.258584] Modules linked in:
[   39.258821] CPU: 1 PID: 733 Comm: repro Tainted: G        W          6.1.0-a0a6c76cf2a5+ #1
[   39.259409] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   39.260382] RIP: 0010:batch_unpin.isra.23+0x151/0x1a0
[   39.260795] Code: e8 c4 be 2b ff 48 8b 45 d0 48 85 c0 75 17 e8 26 bd 2b ff 48 8b 7d c8 48 89 de e8 fa bd 2b ff 48 39 5d c8 73 07 e8 0f bd 2b ff <0f> 0b e8 08 bd 2b ff 4d 29 e5 31 ff 41 83 c6 01 4c 89 ee 31 db e8
[   39.262078] RSP: 0018:ffffc900014339d8 EFLAGS: 00010246
[   39.262459] RAX: 0000000000000000 RBX: ffffffffffffffff RCX: ffffffff81fded8c
[   39.263077] RDX: 0000000000000000 RSI: ffff88801235d300 RDI: 0000000000000002
[   39.263604] RBP: ffffc90001433a20 R08: 0000000000000000 R09: ffff88807dd3b890
[   39.264111] R10: 0000000000001b2d R11: 0000000000000000 R12: 0000000000000001
[   39.264696] R13: 0000000000000001 R14: 0000000000000000 R15: ffff888005ec9400
[   39.265284] FS:  0000000000000000(0000) GS:ffff88807dd00000(0000) knlGS:0000000000000000
[   39.265860] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   39.266274] CR2: 00007f3777cf0500 CR3: 0000000003c12006 CR4: 0000000000770ee0
[   39.266791] PKRU: 55555554
[   39.266998] Call Trace:
[   39.267186]  <TASK>
[   39.267384]  iopt_pages_unfill_xarray+0x39f/0x5c0
[   39.267803]  ? write_comp_data+0x2f/0x90
[   39.268173]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   39.268527]  ? write_comp_data+0x2f/0x90
[   39.268848]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   39.269205]  ? interval_tree_remove+0x291/0x4e0
[   39.269568]  ? write_comp_data+0x2f/0x90
[   39.269871]  iopt_area_remove_access+0x108/0x120
[   39.270227]  iommufd_access_unpin_pages+0x177/0x210
[   39.270615]  iommufd_test_access_unmap+0xe0/0x130
[   39.270971]  ? iommufd_test_access_unmap+0x130/0x130
[   39.271338]  iommufd_test_staccess_release+0x39/0x60
[   39.271834]  __fput+0x11f/0x450
[   39.272110]  ____fput+0x1e/0x30
[   39.272356]  task_work_run+0xb6/0x120
[   39.272647]  do_exit+0x521/0x1340
[   39.272948]  ? lockdep_hardirqs_on+0x8a/0x110
[   39.273285]  ? trace_hardirqs_on+0x3f/0x100
[   39.273609]  do_group_exit+0x5e/0xf0
[   39.273886]  __x64_sys_exit_group+0x25/0x30
[   39.274226]  do_syscall_64+0x3b/0x90
[   39.274518]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   39.274979] RIP: 0033:0x7f3777be6cf6
[   39.275283] Code: Unable to access opcode bytes at 0x7f3777be6ccc.
[   39.275726] RSP: 002b:00007ffd0d7278d8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
[   39.276268] RAX: ffffffffffffffda RBX: 00007f3777cf1490 RCX: 00007f3777be6cf6
[   39.276931] RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
[   39.277444] RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffff80
[   39.277950] R10: 0000000000000004 R11: 0000000000000246 R12: 00007f3777cf1490
[   39.278452] R13: 0000000000000001 R14: 00007f3777cf4e88 R15: 0000000000000000
[   39.278994]  </TASK>
[   39.279168] irq event stamp: 21129
[   39.279426] hardirqs last  enabled at (21137): [<ffffffff811b7f21>] __up_console_sem+0x91/0xb0
[   39.280199] hardirqs last disabled at (21144): [<ffffffff811b7f06>] __up_console_sem+0x76/0xb0
[   39.280871] softirqs last  enabled at (21086): [<ffffffff83000329>] __do_softirq+0x329/0x490
[   39.281476] softirqs last disabled at (21077): [<ffffffff81111082>] irq_exit_rcu+0xd2/0x100
[   39.282058] ---[ end trace 0000000000000000 ]---
[   39.282501] ------------[ cut here ]------------
[   39.282862] WARNING: CPU: 1 PID: 733 at drivers/iommu/iommufd/pages.c:886 update_unpinned+0x75/0x80
[   39.283564] Modules linked in:
[   39.283797] CPU: 1 PID: 733 Comm: repro Tainted: G        W          6.1.0-a0a6c76cf2a5+ #1
[   39.284379] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   39.285360] RIP: 0010:update_unpinned+0x75/0x80
[   39.285705] Code: ac 2b ff 48 89 de 31 c9 31 d2 4c 29 e6 4c 89 ef e8 70 fb ff ff e8 bb ac 2b ff 5b 41 5c 41 5d 5d c3 cc cc cc cc e8 ab ac 2b ff <0f> 0b eb e7 0f 1f 80 00 00 00 00 0f 1f 44 00 00 55 48 89 e5 41 57
[   39.287013] RSP: 0018:ffffc90001433a08 EFLAGS: 00010246
[   39.287388] RAX: 0000000000000000 RBX: 0000000000000000 RCX: ffffffff81fdfdcf
[   39.287914] RDX: 0000000000000000 RSI: ffff88801235d300 RDI: 0000000000000002
[   39.288434] RBP: ffffc90001433a20 R08: 0000000000000000 R09: ffff88807dd3b890
[   39.288970] R10: 0000000000001b2d R11: 0000000000000000 R12: ffffffffffffffff
[   39.289477] R13: ffff888005ec9400 R14: 0000000000000002 R15: 0000000000000002
[   39.289981] FS:  0000000000000000(0000) GS:ffff88807dd00000(0000) knlGS:0000000000000000
[   39.290579] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   39.290988] CR2: 00007f3777cf0500 CR3: 0000000003c12006 CR4: 0000000000770ee0
[   39.291512] PKRU: 55555554
[   39.291723] Call Trace:
[   39.291912]  <TASK>
[   39.292077]  iopt_pages_unfill_xarray+0x522/0x5c0
[   39.292475]  ? write_comp_data+0x2f/0x90
[   39.292803]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   39.293173]  ? write_comp_data+0x2f/0x90
[   39.293484]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   39.293838]  ? interval_tree_remove+0x291/0x4e0
[   39.294205]  ? write_comp_data+0x2f/0x90
[   39.294625]  iopt_area_remove_access+0x108/0x120
[   39.295092]  iommufd_access_unpin_pages+0x177/0x210
[   39.295603]  iommufd_test_access_unmap+0xe0/0x130
[   39.296083]  ? iommufd_test_access_unmap+0x130/0x130
[   39.296582]  iommufd_test_staccess_release+0x39/0x60
[   39.297109]  __fput+0x11f/0x450
[   39.297444]  ____fput+0x1e/0x30
[   39.297776]  task_work_run+0xb6/0x120
[   39.298161]  do_exit+0x521/0x1340
[   39.298510]  ? lockdep_hardirqs_on+0x8a/0x110
[   39.298953]  ? trace_hardirqs_on+0x3f/0x100
[   39.299378]  do_group_exit+0x5e/0xf0
[   39.299746]  __x64_sys_exit_group+0x25/0x30
[   39.300164]  do_syscall_64+0x3b/0x90
[   39.300529]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   39.301051] RIP: 0033:0x7f3777be6cf6
[   39.301416] Code: Unable to access opcode bytes at 0x7f3777be6ccc.
[   39.302016] RSP: 002b:00007ffd0d7278d8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
[   39.302752] RAX: ffffffffffffffda RBX: 00007f3777cf1490 RCX: 00007f3777be6cf6
[   39.303435] RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
[   39.304117] RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffff80
[   39.304823] R10: 0000000000000004 R11: 0000000000000246 R12: 00007f3777cf1490
[   39.305517] R13: 0000000000000001 R14: 00007f3777cf4e88 R15: 0000000000000000
[   39.306221]  </TASK>
[   39.306446] irq event stamp: 21633
[   39.306787] hardirqs last  enabled at (21641): [<ffffffff811b7f21>] __up_console_sem+0x91/0xb0
[   39.307614] hardirqs last disabled at (21648): [<ffffffff811b7f06>] __up_console_sem+0x76/0xb0
[   39.308441] softirqs last  enabled at (21304): [<ffffffff83000329>] __do_softirq+0x329/0x490
[   39.309281] softirqs last disabled at (21289): [<ffffffff81111082>] irq_exit_rcu+0xd2/0x100
[   39.310088] ---[ end trace 0000000000000000 ]---
[   39.310699] ------------[ cut here ]------------
[   39.311154] WARNING: CPU: 1 PID: 733 at drivers/iommu/iommufd/pages.c:1181 iopt_release_pages+0x159/0x190
[   39.312077] Modules linked in:
[   39.312386] CPU: 1 PID: 733 Comm: repro Tainted: G        W          6.1.0-a0a6c76cf2a5+ #1
[   39.313226] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   39.314309] RIP: 0010:iopt_release_pages+0x159/0x190
[   39.314820] Code: b5 11 ff eb cb e8 87 90 2b ff be 03 00 00 00 4c 89 f7 e8 6a 8b ce ff eb b7 e8 73 90 2b ff 0f 0b e9 ed fe ff ff e8 67 90 2b ff <0f> 0b e9 00 ff ff ff e8 5b 90 2b ff 0f 0b e9 07 ff ff ff e8 4f 90
[   39.316582] RSP: 0018:ffffc90001433c88 EFLAGS: 00010246
[   39.317137] RAX: 0000000000000000 RBX: ffff888005ec9400 RCX: ffffffff81fe1957
[   39.317821] RDX: 0000000000000000 RSI: ffff88801235d300 RDI: 0000000000000002
[   39.318517] RBP: ffffc90001433ca8 R08: 000000000000001c R09: 0000000000000001
[   39.319171] R10: ffff88801235e098 R11: 0000000000000000 R12: ffffffffffffffff
[   39.319705] R13: 0000000001000000 R14: 00000000017fffff R15: 0000000000000000
[   39.320271] FS:  0000000000000000(0000) GS:ffff88807dd00000(0000) knlGS:0000000000000000
[   39.320949] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   39.321398] CR2: 00007f3777cf0500 CR3: 0000000003c12006 CR4: 0000000000770ee0
[   39.321943] PKRU: 55555554
[   39.322160] Call Trace:
[   39.322361]  <TASK>
[   39.322549]  iopt_unmap_iova_range+0x1ef/0x2e0
[   39.322896]  iopt_unmap_all+0x2f/0x60
[   39.323185]  iommufd_ioas_destroy+0x2c/0x70
[   39.323512]  iommufd_fops_release+0xd4/0x170
[   39.323856]  ? iommufd_ctx_get+0x30/0x30
[   39.324171]  __fput+0x11f/0x450
[   39.324439]  ____fput+0x1e/0x30
[   39.324723]  task_work_run+0xb6/0x120
[   39.325036]  do_exit+0x521/0x1340
[   39.325312]  ? lockdep_hardirqs_on+0x8a/0x110
[   39.325668]  ? trace_hardirqs_on+0x3f/0x100
[   39.326012]  do_group_exit+0x5e/0xf0
[   39.326304]  __x64_sys_exit_group+0x25/0x30
[   39.326642]  do_syscall_64+0x3b/0x90
[   39.326934]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   39.327332] RIP: 0033:0x7f3777be6cf6
[   39.327620] Code: Unable to access opcode bytes at 0x7f3777be6ccc.
[   39.328089] RSP: 002b:00007ffd0d7278d8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
[   39.328694] RAX: ffffffffffffffda RBX: 00007f3777cf1490 RCX: 00007f3777be6cf6
[   39.329237] RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
[   39.329781] RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffff80
[   39.330321] R10: 0000000000000004 R11: 0000000000000246 R12: 00007f3777cf1490
[   39.330853] R13: 0000000000000001 R14: 00007f3777cf4e88 R15: 0000000000000000
[   39.331398]  </TASK>
[   39.331578] irq event stamp: 22115
[   39.331841] hardirqs last  enabled at (22123): [<ffffffff811b7f21>] __up_console_sem+0x91/0xb0
[   39.332480] hardirqs last disabled at (22130): [<ffffffff811b7f06>] __up_console_sem+0x76/0xb0
[   39.333151] softirqs last  enabled at (21820): [<ffffffff83000329>] __do_softirq+0x329/0x490
[   39.333787] softirqs last disabled at (21809): [<ffffffff81111082>] irq_exit_rcu+0xd2/0x100
[   39.334408] ---[ end trace 0000000000000000 ]---
[   39.403137] BUG: Bad page state in process repro  pfn:0d46a
[   39.403753] page:00000000841d266a refcount:-3072 mapcount:0 mapping:0000000000000000 index:0x0 pfn:0xd46a
[   39.404479] flags: 0xfffffc0000008(dirty|node=0|zone=1|lastcpupid=0x1fffff)
[   39.405004] raw: 000fffffc0000008 dead000000000100 dead000000000122 0000000000000000
[   39.405583] raw: 0000000000000000 0000000000000000 fffff400ffffffff 0000000000000000
[   39.406162] page dumped because: nonzero _refcount
[   39.406515] Modules linked in:
[   39.406739] CPU: 1 PID: 736 Comm: repro Tainted: G        W          6.1.0-a0a6c76cf2a5+ #1
[   39.407330] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   39.408154] Call Trace:
[   39.408344]  <TASK>
[   39.408513]  dump_stack_lvl+0xa7/0xdb
[   39.408822]  dump_stack+0x19/0x1f
[   39.409094]  bad_page.cold.125+0x63/0x93
[   39.409416]  free_pcppages_bulk+0x61f/0x7d0
[   39.409760]  free_unref_page_commit+0xf2/0x130
[   39.410105]  free_unref_page+0xf1/0x180
[   39.410406]  __free_pages+0xd2/0xe0
[   39.410682]  free_pages.part.106+0x38/0x50
[   39.410990]  free_pages+0x17/0x30
[   39.411247]  pgd_free+0xd3/0x100
[   39.411513]  __mmdrop+0x79/0x280
[   39.411788]  finish_task_switch+0x1e8/0x2a0
[   39.412130]  ? debug_smp_processor_id+0x20/0x30
[   39.412486]  schedule_tail+0x13/0x80
[   39.412757]  ret_from_fork+0x8/0x30
[   39.413034] RIP: 0033:0x7f3777be6af0
[   39.413314] Code: Unable to access opcode bytes at 0x7f3777be6ac6.
[   39.413773] RSP: 002b:00007ffd0d727920 EFLAGS: 00000246 ORIG_RAX: 0000000000000038
[   39.414337] RAX: 0000000000000000 RBX: 0000000000000000 RCX: 00007f3777be6af0
[   39.414853] RDX: 0000000000000000 RSI: 0000000000000000 RDI: 0000000001200011
[   39.415365] RBP: 0000000000000000 R08: 0000000000000000 R09: 00007f3777af9740
[   39.415890] R10: 00007f3777af9a10 R11: 0000000000000246 R12: 0000000000401180
[   39.416419] R13: 00007ffd0d727a50 R14: 0000000000000000 R15: 0000000000000000
[   39.416962]  </TASK>
[   39.417136] Disabling lock debugging due to kernel taint
[   39.516313] ------------[ cut here ]------------
[   39.516688] WARNING: CPU: 1 PID: 740 at drivers/iommu/iommufd/pages.c:294 __iopt_area_unfill_domain+0x152/0x560
[   39.517447] Modules linked in:
[   39.517683] CPU: 1 PID: 740 Comm: repro Tainted: G    B   W          6.1.0-a0a6c76cf2a5+ #1
[   39.518308] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   39.519116] RIP: 0010:__iopt_area_unfill_domain+0x152/0x560
[   39.519536] Code: a1 2b ff 44 8b 64 24 54 48 8b 44 24 48 31 ff 44 89 e6 48 89 44 24 38 e8 6c a2 2b ff 45 85 e4 0f 85 eb 01 00 00 e8 ee a0 2b ff <0f> 0b e8 e7 a0 2b ff 48 8b 44 24 38 89 5c 24 58 89 18 8b 44 24 54
[   39.520890] RSP: 0018:ffffc90001463ae0 EFLAGS: 00010246
[   39.521283] RAX: 0000000000000000 RBX: 00000000ffffffff RCX: ffffffff81fe0bd5
[   39.521808] RDX: 0000000000000000 RSI: ffff88800b375300 RDI: 0000000000000002
[   39.522332] RBP: ffffc90001463d10 R08: 000000000003b5c5 R09: 0000000000000006
[   39.523135] R10: 000000000003b5a0 R11: 0000000000000024 R12: 0000000000000001
[   39.523662] R13: 0000000000000801 R14: 00000000000007ff R15: 0000000000000800
[   39.524302] FS:  00007f3777af9740(0000) GS:ffff88807dd00000(0000) knlGS:0000000000000000
[   39.524909] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   39.525416] CR2: 00007f3777c1e580 CR3: 000000000d520002 CR4: 0000000000770ee0
[   39.525988] PKRU: 55555554
[   39.526199] Call Trace:
[   39.526388]  <TASK>
[   39.526574]  ? rcu_read_lock_sched_held+0x29/0x80
[   39.526926]  ? lock_acquire+0x1a1/0x2f0
[   39.527230]  ? rcu_read_lock_held_common+0x12/0x50
[   39.527621]  ? rcu_read_lock_sched_held+0x29/0x80
[   39.528061]  ? __mutex_lock+0x13a/0xf30
[   39.528363]  ? write_comp_data+0x2f/0x90
[   39.528690]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   39.529057]  iopt_area_unfill_domain+0x32/0x40
[   39.529403]  iopt_table_remove_domain+0x23f/0x4c0
[   39.529879]  iommufd_device_selftest_detach+0x3a/0x90
[   39.530277]  iommufd_selftest_destroy+0x55/0x70
[   39.530631]  iommufd_object_destroy_user+0xce/0x130
[   39.531046]  iommufd_destroy+0xa2/0xc0
[   39.531364]  iommufd_fops_ioctl+0x1ef/0x310
[   39.531685]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   39.532046]  ? write_comp_data+0x2f/0x90
[   39.532468]  __x64_sys_ioctl+0x10e/0x160
[   39.532797]  ? iommufd_get_object.part.6+0x1c0/0x1c0
[   39.533176]  do_syscall_64+0x3b/0x90
[   39.533456]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   39.533839] RIP: 0033:0x7f3777c1e59d
[   39.534117] Code: 00 c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d d3 08 0d 00 f7 d8 64 89 01 48
[   39.535514] RSP: 002b:00007ffd0d727918 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   39.536159] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f3777c1e59d
[   39.536694] RDX: 0000000020000140 RSI: 0000000000003b80 RDI: 0000000000000003
[   39.537207] RBP: 00007ffd0d727930 R08: 00007ffd0d727930 R09: 00007ffd0d727930
[   39.537757] R10: 00007ffd0d727930 R11: 0000000000000213 R12: 0000000000401180
[   39.538309] R13: 00007ffd0d727a50 R14: 0000000000000000 R15: 0000000000000000
[   39.538826]  </TASK>
[   39.539043] irq event stamp: 0
[   39.539308] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   39.539772] hardirqs last disabled at (0): [<ffffffff810fff0c>] copy_process+0x11cc/0x2b10
[   39.540514] softirqs last  enabled at (0): [<ffffffff810fff10>] copy_process+0x11d0/0x2b10
[   39.541301] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   39.541858] ---[ end trace 0000000000000000 ]---
[   39.542277] ------------[ cut here ]------------
[   39.542616] WARNING: CPU: 1 PID: 740 at drivers/iommu/iommufd/pages.c:1290 __iopt_area_unfill_domain+0x54f/0x560
[   39.543366] Modules linked in:
[   39.543601] CPU: 1 PID: 740 Comm: repro Tainted: G    B   W          6.1.0-a0a6c76cf2a5+ #1
[   39.544283] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   39.545139] RIP: 0010:__iopt_area_unfill_domain+0x54f/0x560
[   39.545604] Code: e8 86 9e 2b ff 85 db 0f 85 35 fb ff ff e8 09 9d 2b ff 0f 0b e9 29 fb ff ff e8 fd 9c 2b ff 0f 0b e9 69 fe ff ff e8 f1 9c 2b ff <0f> 0b e9 58 ff ff ff e8 65 2d dc 00 0f 1f 44 00 00 0f 1f 44 00 00
[   39.546919] RSP: 0018:ffffc90001463ae0 EFLAGS: 00010246
[   39.547365] RAX: 0000000000000000 RBX: 00000000ffffffff RCX: ffffffff81fe0d26
[   39.547896] RDX: 0000000000000000 RSI: ffff88800b375300 RDI: 0000000000000002
[   39.548506] RBP: ffffc90001463d10 R08: 000000000003b5c5 R09: 0000000000000006
[   39.549037] R10: 000000000003b5a0 R11: 0000000000000024 R12: 00000000000007ff
[   39.549562] R13: 0000000000000801 R14: 00000000000007ff R15: 0000000000000800
[   39.550119] FS:  00007f3777af9740(0000) GS:ffff88807dd00000(0000) knlGS:0000000000000000
[   39.550729] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   39.551157] CR2: 00007f3777c1e580 CR3: 000000000d520002 CR4: 0000000000770ee0
[   39.551764] PKRU: 55555554
[   39.551974] Call Trace:
[   39.552163]  <TASK>
[   39.552338]  ? rcu_read_lock_sched_held+0x29/0x80
[   39.552808]  ? lock_acquire+0x1a1/0x2f0
[   39.553108]  ? rcu_read_lock_held_common+0x12/0x50
[   39.553478]  ? rcu_read_lock_sched_held+0x29/0x80
[   39.553839]  ? __mutex_lock+0x13a/0xf30
[   39.554141]  ? write_comp_data+0x2f/0x90
[   39.554448]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   39.554831]  iopt_area_unfill_domain+0x32/0x40
[   39.555208]  iopt_table_remove_domain+0x23f/0x4c0
[   39.555565]  iommufd_device_selftest_detach+0x3a/0x90
[   39.555977]  iommufd_selftest_destroy+0x55/0x70
[   39.556389]  iommufd_object_destroy_user+0xce/0x130
[   39.556782]  iommufd_destroy+0xa2/0xc0
[   39.557076]  iommufd_fops_ioctl+0x1ef/0x310
[   39.557402]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   39.557762]  ? write_comp_data+0x2f/0x90
[   39.558069]  __x64_sys_ioctl+0x10e/0x160
[   39.558368]  ? iommufd_get_object.part.6+0x1c0/0x1c0
[   39.558744]  do_syscall_64+0x3b/0x90
[   39.559024]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   39.559410] RIP: 0033:0x7f3777c1e59d
[   39.559685] Code: 00 c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d d3 08 0d 00 f7 d8 64 89 01 48
[   39.561034] RSP: 002b:00007ffd0d727918 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   39.561598] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f3777c1e59d
[   39.562120] RDX: 0000000020000140 RSI: 0000000000003b80 RDI: 0000000000000003
[   39.562638] RBP: 00007ffd0d727930 R08: 00007ffd0d727930 R09: 00007ffd0d727930
[   39.563142] R10: 00007ffd0d727930 R11: 0000000000000213 R12: 0000000000401180
[   39.563660] R13: 00007ffd0d727a50 R14: 0000000000000000 R15: 0000000000000000
[   39.564191]  </TASK>
[   39.564363] irq event stamp: 0
[   39.564627] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   39.565228] hardirqs last disabled at (0): [<ffffffff810fff0c>] copy_process+0x11cc/0x2b10
[   39.566002] softirqs last  enabled at (0): [<ffffffff810fff10>] copy_process+0x11d0/0x2b10
[   39.566782] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   39.567373] ---[ end trace 0000000000000000 ]---
[   39.570170] ------------[ cut here ]------------
[   39.570646] WARNING: CPU: 1 PID: 740 at drivers/iommu/iommufd/pages.c:178 batch_unpin.isra.23+0x151/0x1a0
[   39.571543] Modules linked in:
[   39.571850] CPU: 1 PID: 740 Comm: repro Tainted: G    B   W          6.1.0-a0a6c76cf2a5+ #1
[   39.572629] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   39.573700] RIP: 0010:batch_unpin.isra.23+0x151/0x1a0
[   39.574186] Code: e8 c4 be 2b ff 48 8b 45 d0 48 85 c0 75 17 e8 26 bd 2b ff 48 8b 7d c8 48 89 de e8 fa bd 2b ff 48 39 5d c8 73 07 e8 0f bd 2b ff <0f> 0b e8 08 bd 2b ff 4d 29 e5 31 ff 41 83 c6 01 4c 89 ee 31 db e8
[   39.575900] RSP: 0018:ffffc900014639d8 EFLAGS: 00010246
[   39.576395] RAX: 0000000000000000 RBX: ffffffffffffffff RCX: ffffffff81fded8c
[   39.577070] RDX: 0000000000000000 RSI: ffff88800b375300 RDI: 0000000000000002
[   39.577732] RBP: ffffc90001463a20 R08: 0000000000000000 R09: ffff88807dd3b890
[   39.578394] R10: 0000000000000951 R11: 0000000000000000 R12: 0000000000000001
[   39.579063] R13: 0000000000000001 R14: 0000000000000000 R15: ffff888005ec8c00
[   39.579729] FS:  0000000000000000(0000) GS:ffff88807dd00000(0000) knlGS:0000000000000000
[   39.580485] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   39.581042] CR2: 00007f3777cf0500 CR3: 0000000003c12001 CR4: 0000000000770ee0
[   39.581709] PKRU: 55555554
[   39.581972] Call Trace:
[   39.582211]  <TASK>
[   39.582423]  iopt_pages_unfill_xarray+0x39f/0x5c0
[   39.582895]  ? rcu_read_lock_held_common+0x12/0x50
[   39.583246]  ? write_comp_data+0x2f/0x90
[   39.583538]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   39.583884]  ? write_comp_data+0x2f/0x90
[   39.584172]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   39.584518]  ? interval_tree_remove+0x291/0x4e0
[   39.584866]  ? write_comp_data+0x2f/0x90
[   39.585153]  iopt_area_remove_access+0x108/0x120
[   39.585489]  iommufd_access_unpin_pages+0x177/0x210
[   39.585852]  iommufd_test_access_unmap+0xe0/0x130
[   39.586197]  ? iommufd_test_access_unmap+0x130/0x130
[   39.586570]  iommufd_test_staccess_release+0x39/0x60
[   39.586930]  __fput+0x11f/0x450
[   39.587178]  ____fput+0x1e/0x30
[   39.587428]  task_work_run+0xb6/0x120
[   39.587706]  do_exit+0x521/0x1340
[   39.587951]  ? lock_release+0x202/0x2c0
[   39.588239]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   39.588590]  ? trace_hardirqs_on+0x3f/0x100
[   39.588933]  do_group_exit+0x5e/0xf0
[   39.589218]  __x64_sys_exit_group+0x25/0x30
[   39.589520]  do_syscall_64+0x3b/0x90
[   39.589787]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   39.590150] RIP: 0033:0x7f3777be6cf6
[   39.590412] Code: Unable to access opcode bytes at 0x7f3777be6ccc.
[   39.590841] RSP: 002b:00007ffd0d7278d8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
[   39.591368] RAX: ffffffffffffffda RBX: 00007f3777cf1490 RCX: 00007f3777be6cf6
[   39.591870] RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
[   39.592385] RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffff80
[   39.592894] R10: 0000000000000004 R11: 0000000000000246 R12: 00007f3777cf1490
[   39.593394] R13: 0000000000000001 R14: 00007f3777cf4e88 R15: 0000000000000000
[   39.593899]  </TASK>
[   39.594065] irq event stamp: 0
[   39.594299] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   39.594748] hardirqs last disabled at (0): [<ffffffff810fff0c>] copy_process+0x11cc/0x2b10
[   39.595336] softirqs last  enabled at (0): [<ffffffff810fff10>] copy_process+0x11d0/0x2b10
[   39.595914] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   39.596344] ---[ end trace 0000000000000000 ]---
[   39.596774] ------------[ cut here ]------------
[   39.597096] WARNING: CPU: 1 PID: 740 at drivers/iommu/iommufd/pages.c:886 update_unpinned+0x75/0x80
[   39.597721] Modules linked in:
[   39.597946] CPU: 1 PID: 740 Comm: repro Tainted: G    B   W          6.1.0-a0a6c76cf2a5+ #1
[   39.598533] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   39.599317] RIP: 0010:update_unpinned+0x75/0x80
[   39.599644] Code: ac 2b ff 48 89 de 31 c9 31 d2 4c 29 e6 4c 89 ef e8 70 fb ff ff e8 bb ac 2b ff 5b 41 5c 41 5d 5d c3 cc cc cc cc e8 ab ac 2b ff <0f> 0b eb e7 0f 1f 80 00 00 00 00 0f 1f 44 00 00 55 48 89 e5 41 57
[   39.600901] RSP: 0018:ffffc90001463a08 EFLAGS: 00010246
[   39.601265] RAX: 0000000000000000 RBX: 0000000000000000 RCX: ffffffff81fdfdcf
[   39.601757] RDX: 0000000000000000 RSI: ffff88800b375300 RDI: 0000000000000002
[   39.602254] RBP: ffffc90001463a20 R08: 0000000000000000 R09: ffff88807dd3b890
[   39.602754] R10: 0000000000000951 R11: 0000000000000000 R12: ffffffffffffffff
[   39.603246] R13: ffff888005ec8c00 R14: 0000000000000002 R15: 0000000000000002
[   39.603736] FS:  0000000000000000(0000) GS:ffff88807dd00000(0000) knlGS:0000000000000000
[   39.604280] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   39.604696] CR2: 00007f3777cf0500 CR3: 0000000003c12001 CR4: 0000000000770ee0
[   39.605181] PKRU: 55555554
[   39.605379] Call Trace:
[   39.605559]  <TASK>
[   39.605716]  iopt_pages_unfill_xarray+0x522/0x5c0
[   39.606070]  ? rcu_read_lock_held_common+0x12/0x50
[   39.606425]  ? write_comp_data+0x2f/0x90
[   39.606739]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   39.607112]  ? write_comp_data+0x2f/0x90
[   39.607412]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   39.607754]  ? interval_tree_remove+0x291/0x4e0
[   39.608080]  ? write_comp_data+0x2f/0x90
[   39.608366]  iopt_area_remove_access+0x108/0x120
[   39.608716]  iommufd_access_unpin_pages+0x177/0x210
[   39.609080]  iommufd_test_access_unmap+0xe0/0x130
[   39.609422]  ? iommufd_test_access_unmap+0x130/0x130
[   39.609787]  iommufd_test_staccess_release+0x39/0x60
[   39.610144]  __fput+0x11f/0x450
[   39.610385]  ____fput+0x1e/0x30
[   39.610632]  task_work_run+0xb6/0x120
[   39.610908]  do_exit+0x521/0x1340
[   39.611160]  ? lock_release+0x202/0x2c0
[   39.611442]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   39.611793]  ? trace_hardirqs_on+0x3f/0x100
[   39.612101]  do_group_exit+0x5e/0xf0
[   39.612365]  __x64_sys_exit_group+0x25/0x30
[   39.612686]  do_syscall_64+0x3b/0x90
[   39.612961]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   39.613331] RIP: 0033:0x7f3777be6cf6
[   39.613596] Code: Unable to access opcode bytes at 0x7f3777be6ccc.
[   39.614024] RSP: 002b:00007ffd0d7278d8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
[   39.614563] RAX: ffffffffffffffda RBX: 00007f3777cf1490 RCX: 00007f3777be6cf6
[   39.615058] RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
[   39.615552] RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffff80
[   39.616058] R10: 0000000000000004 R11: 0000000000000246 R12: 00007f3777cf1490
[   39.616544] R13: 0000000000000001 R14: 00007f3777cf4e88 R15: 0000000000000000
[   39.617070]  </TASK>
[   39.617234] irq event stamp: 0
[   39.617455] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   39.617891] hardirqs last disabled at (0): [<ffffffff810fff0c>] copy_process+0x11cc/0x2b10
[   39.618480] softirqs last  enabled at (0): [<ffffffff810fff10>] copy_process+0x11d0/0x2b10
[   39.619065] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   39.619518] ---[ end trace 0000000000000000 ]---
[   39.619971] ------------[ cut here ]------------
[   39.620304] WARNING: CPU: 1 PID: 740 at drivers/iommu/iommufd/pages.c:1181 iopt_release_pages+0x159/0x190
[   39.620995] Modules linked in:
[   39.621230] CPU: 1 PID: 740 Comm: repro Tainted: G    B   W          6.1.0-a0a6c76cf2a5+ #1
[   39.621822] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   39.622617] RIP: 0010:iopt_release_pages+0x159/0x190
[   39.622976] Code: b5 11 ff eb cb e8 87 90 2b ff be 03 00 00 00 4c 89 f7 e8 6a 8b ce ff eb b7 e8 73 90 2b ff 0f 0b e9 ed fe ff ff e8 67 90 2b ff <0f> 0b e9 00 ff ff ff e8 5b 90 2b ff 0f 0b e9 07 ff ff ff e8 4f 90
[   39.624290] RSP: 0018:ffffc90001463c88 EFLAGS: 00010246
[   39.624720] RAX: 0000000000000000 RBX: ffff888005ec8c00 RCX: ffffffff81fe1957
[   39.625217] RDX: 0000000000000000 RSI: ffff88800b375300 RDI: 0000000000000002
[   39.625710] RBP: ffffc90001463ca8 R08: 0000000000000000 R09: 0000000000000000
[   39.626202] R10: ffffc90001463c58 R11: 0000000000000000 R12: ffffffffffffffff
[   39.626704] R13: 0000000001000000 R14: 00000000017fffff R15: 0000000000000000
[   39.627206] FS:  0000000000000000(0000) GS:ffff88807dd00000(0000) knlGS:0000000000000000
[   39.627781] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   39.628184] CR2: 00007f3777cf0500 CR3: 0000000003c12001 CR4: 0000000000770ee0
[   39.628695] PKRU: 55555554
[   39.628898] Call Trace:
[   39.629077]  <TASK>
[   39.629241]  iopt_unmap_iova_range+0x1ef/0x2e0
[   39.629564]  iopt_unmap_all+0x2f/0x60
[   39.629832]  iommufd_ioas_destroy+0x2c/0x70
[   39.630141]  iommufd_fops_release+0xd4/0x170
[   39.630455]  ? iommufd_ctx_get+0x30/0x30
[   39.630750]  __fput+0x11f/0x450
[   39.630992]  ____fput+0x1e/0x30
[   39.631234]  task_work_run+0xb6/0x120
[   39.631513]  do_exit+0x521/0x1340
[   39.631766]  ? lock_release+0x202/0x2c0
[   39.632049]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   39.632390]  ? trace_hardirqs_on+0x3f/0x100
[   39.632719]  do_group_exit+0x5e/0xf0
[   39.632988]  __x64_sys_exit_group+0x25/0x30
[   39.633289]  do_syscall_64+0x3b/0x90
[   39.633557]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   39.633923] RIP: 0033:0x7f3777be6cf6
[   39.634192] Code: Unable to access opcode bytes at 0x7f3777be6ccc.
[   39.634632] RSP: 002b:00007ffd0d7278d8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
[   39.635177] RAX: ffffffffffffffda RBX: 00007f3777cf1490 RCX: 00007f3777be6cf6
[   39.635674] RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
[   39.636167] RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffff80
[   39.636689] R10: 0000000000000004 R11: 0000000000000246 R12: 00007f3777cf1490
[   39.637176] R13: 0000000000000001 R14: 00007f3777cf4e88 R15: 0000000000000000
[   39.637677]  </TASK>
[   39.637843] irq event stamp: 0
[   39.638073] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   39.638516] hardirqs last disabled at (0): [<ffffffff810fff0c>] copy_process+0x11cc/0x2b10
[   39.639094] softirqs last  enabled at (0): [<ffffffff810fff10>] copy_process+0x11d0/0x2b10
[   39.639682] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   39.640120] ---[ end trace 0000000000000000 ]---
[   39.739998] ------------[ cut here ]------------
[   39.740347] WARNING: CPU: 1 PID: 745 at drivers/iommu/iommufd/pages.c:294 __iopt_area_unfill_domain+0x152/0x560
[   39.741124] Modules linked in:
[   39.741351] CPU: 1 PID: 745 Comm: repro Tainted: G    B   W          6.1.0-a0a6c76cf2a5+ #1
[   39.741919] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   39.742707] RIP: 0010:__iopt_area_unfill_domain+0x152/0x560
[   39.743109] Code: a1 2b ff 44 8b 64 24 54 48 8b 44 24 48 31 ff 44 89 e6 48 89 44 24 38 e8 6c a2 2b ff 45 85 e4 0f 85 eb 01 00 00 e8 ee a0 2b ff <0f> 0b e8 e7 a0 2b ff 48 8b 44 24 38 89 5c 24 58 89 18 8b 44 24 54
[   39.744365] RSP: 0018:ffffc9000148bae0 EFLAGS: 00010246
[   39.744752] RAX: 0000000000000000 RBX: 00000000ffffffff RCX: ffffffff81fe0bd5
[   39.745252] RDX: 0000000000000000 RSI: ffff88800cb4d300 RDI: 0000000000000002
[   39.745747] RBP: ffffc9000148bd10 R08: 000000000003b5c5 R09: 0000000000000014
[   39.746234] R10: 000000000003b5a0 R11: 0000000000000024 R12: 0000000000000001
[   39.746733] R13: 0000000000000801 R14: 00000000000007ff R15: 0000000000000800
[   39.747237] FS:  00007f3777af9740(0000) GS:ffff88807dd00000(0000) knlGS:0000000000000000
[   39.747796] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   39.748197] CR2: 00007f3777c1e580 CR3: 000000000c976003 CR4: 0000000000770ee0
[   39.748711] PKRU: 55555554
[   39.748916] Call Trace:
[   39.749100]  <TASK>
[   39.749269]  ? rcu_read_lock_sched_held+0x29/0x80
[   39.749640]  ? lock_acquire+0x1a1/0x2f0
[   39.749930]  ? rcu_read_lock_held_common+0x12/0x50
[   39.750280]  ? rcu_read_lock_sched_held+0x29/0x80
[   39.750634]  ? __mutex_lock+0x13a/0xf30
[   39.750921]  ? write_comp_data+0x2f/0x90
[   39.751207]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   39.751553]  iopt_area_unfill_domain+0x32/0x40
[   39.751881]  iopt_table_remove_domain+0x23f/0x4c0
[   39.752220]  iommufd_device_selftest_detach+0x3a/0x90
[   39.752588]  iommufd_selftest_destroy+0x55/0x70
[   39.752961]  iommufd_object_destroy_user+0xce/0x130
[   39.753324]  iommufd_destroy+0xa2/0xc0
[   39.753607]  iommufd_fops_ioctl+0x1ef/0x310
[   39.753924]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   39.754282]  ? write_comp_data+0x2f/0x90
[   39.754583]  __x64_sys_ioctl+0x10e/0x160
[   39.754877]  ? iommufd_get_object.part.6+0x1c0/0x1c0
[   39.755250]  do_syscall_64+0x3b/0x90
[   39.755518]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   39.755905] RIP: 0033:0x7f3777c1e59d
[   39.756173] Code: 00 c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d d3 08 0d 00 f7 d8 64 89 01 48
[   39.757424] RSP: 002b:00007ffd0d727918 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   39.757942] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f3777c1e59d
[   39.758430] RDX: 0000000020000140 RSI: 0000000000003b80 RDI: 0000000000000003
[   39.758957] RBP: 00007ffd0d727930 R08: 00007ffd0d727930 R09: 00007ffd0d727930
[   39.759479] R10: 00007ffd0d727930 R11: 0000000000000213 R12: 0000000000401180
[   39.760007] R13: 00007ffd0d727a50 R14: 0000000000000000 R15: 0000000000000000
[   39.760548]  </TASK>
[   39.760739] irq event stamp: 0
[   39.760978] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   39.761537] hardirqs last disabled at (0): [<ffffffff810fff0c>] copy_process+0x11cc/0x2b10
[   39.762313] softirqs last  enabled at (0): [<ffffffff810fff10>] copy_process+0x11d0/0x2b10
[   39.763105] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   39.763700] ---[ end trace 0000000000000000 ]---
[   39.764234] ------------[ cut here ]------------
[   39.764686] WARNING: CPU: 1 PID: 745 at drivers/iommu/iommufd/pages.c:1290 __iopt_area_unfill_domain+0x54f/0x560
[   39.765638] Modules linked in:
[   39.765934] CPU: 1 PID: 745 Comm: repro Tainted: G    B   W          6.1.0-a0a6c76cf2a5+ #1
[   39.766718] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   39.767770] RIP: 0010:__iopt_area_unfill_domain+0x54f/0x560
[   39.768306] Code: e8 86 9e 2b ff 85 db 0f 85 35 fb ff ff e8 09 9d 2b ff 0f 0b e9 29 fb ff ff e8 fd 9c 2b ff 0f 0b e9 69 fe ff ff e8 f1 9c 2b ff <0f> 0b e9 58 ff ff ff e8 65 2d dc 00 0f 1f 44 00 00 0f 1f 44 00 00
[   39.769683] RSP: 0018:ffffc9000148bae0 EFLAGS: 00010246
[   39.770079] RAX: 0000000000000000 RBX: 00000000ffffffff RCX: ffffffff81fe0d26
[   39.770607] RDX: 0000000000000000 RSI: ffff88800cb4d300 RDI: 0000000000000002
[   39.771106] RBP: ffffc9000148bd10 R08: 000000000003b5c5 R09: 0000000000000014
[   39.771624] R10: 000000000003b5a0 R11: 0000000000000024 R12: 00000000000007ff
[   39.772150] R13: 0000000000000801 R14: 00000000000007ff R15: 0000000000000800
[   39.772716] FS:  00007f3777af9740(0000) GS:ffff88807dd00000(0000) knlGS:0000000000000000
[   39.773501] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   39.773947] CR2: 00007f3777c1e580 CR3: 000000000c976003 CR4: 0000000000770ee0
[   39.774499] PKRU: 55555554
[   39.774699] Call Trace:
[   39.774880]  <TASK>
[   39.775055]  ? rcu_read_lock_sched_held+0x29/0x80
[   39.775412]  ? lock_acquire+0x1a1/0x2f0
[   39.775730]  ? rcu_read_lock_held_common+0x12/0x50
[   39.776113]  ? rcu_read_lock_sched_held+0x29/0x80
[   39.776480]  ? __mutex_lock+0x13a/0xf30
[   39.776830]  ? write_comp_data+0x2f/0x90
[   39.777291]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   39.777839]  iopt_area_unfill_domain+0x32/0x40
[   39.778352]  iopt_table_remove_domain+0x23f/0x4c0
[   39.778870]  iommufd_device_selftest_detach+0x3a/0x90
[   39.779517]  iommufd_selftest_destroy+0x55/0x70
[   39.780121]  iommufd_object_destroy_user+0xce/0x130
[   39.780728]  iommufd_destroy+0xa2/0xc0
[   39.781188]  iommufd_fops_ioctl+0x1ef/0x310
[   39.781705]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   39.782251]  ? write_comp_data+0x2f/0x90
[   39.782768]  __x64_sys_ioctl+0x10e/0x160
[   39.783256]  ? iommufd_get_object.part.6+0x1c0/0x1c0
[   39.783849]  do_syscall_64+0x3b/0x90
[   39.784267]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   39.784878] RIP: 0033:0x7f3777c1e59d
[   39.785345] Code: 00 c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d d3 08 0d 00 f7 d8 64 89 01 48
[   39.787336] RSP: 002b:00007ffd0d727918 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   39.788177] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f3777c1e59d
[   39.789009] RDX: 0000000020000140 RSI: 0000000000003b80 RDI: 0000000000000003
[   39.789791] RBP: 00007ffd0d727930 R08: 00007ffd0d727930 R09: 00007ffd0d727930
[   39.790599] R10: 00007ffd0d727930 R11: 0000000000000213 R12: 0000000000401180
[   39.791335] R13: 00007ffd0d727a50 R14: 0000000000000000 R15: 0000000000000000
[   39.792139]  </TASK>
[   39.792411] irq event stamp: 0
[   39.792796] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   39.793523] hardirqs last disabled at (0): [<ffffffff810fff0c>] copy_process+0x11cc/0x2b10
[   39.794452] softirqs last  enabled at (0): [<ffffffff810fff10>] copy_process+0x11d0/0x2b10
[   39.795390] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   39.796110] ---[ end trace 0000000000000000 ]---
[   39.800750] ------------[ cut here ]------------
[   39.801326] WARNING: CPU: 1 PID: 745 at drivers/iommu/iommufd/pages.c:178 batch_unpin.isra.23+0x151/0x1a0
[   39.802458] Modules linked in:
[   39.802805] CPU: 1 PID: 745 Comm: repro Tainted: G    B   W          6.1.0-a0a6c76cf2a5+ #1
[   39.803751] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   39.805107] RIP: 0010:batch_unpin.isra.23+0x151/0x1a0
[   39.805675] Code: e8 c4 be 2b ff 48 8b 45 d0 48 85 c0 75 17 e8 26 bd 2b ff 48 8b 7d c8 48 89 de e8 fa bd 2b ff 48 39 5d c8 73 07 e8 0f bd 2b ff <0f> 0b e8 08 bd 2b ff 4d 29 e5 31 ff 41 83 c6 01 4c 89 ee 31 db e8
[   39.807651] RSP: 0018:ffffc9000148b9d8 EFLAGS: 00010246
[   39.808288] RAX: 0000000000000000 RBX: ffffffffffffffff RCX: ffffffff81fded8c
[   39.809100] RDX: 0000000000000000 RSI: ffff88800cb4d300 RDI: 0000000000000002
[   39.809899] RBP: ffffc9000148ba20 R08: 0000000000000000 R09: ffff88807dd3b890
[   39.810701] R10: 00000000000009b7 R11: 0000000000000000 R12: 0000000000000001
[   39.811506] R13: 0000000000000001 R14: 0000000000000000 R15: ffff888005ec9400
[   39.812341] FS:  0000000000000000(0000) GS:ffff88807dd00000(0000) knlGS:0000000000000000
[   39.813222] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   39.813888] CR2: 00007f3777cf0500 CR3: 0000000003c12002 CR4: 0000000000770ee0
[   39.814682] PKRU: 55555554
[   39.814995] Call Trace:
[   39.815319]  <TASK>
[   39.815585]  iopt_pages_unfill_xarray+0x39f/0x5c0
[   39.816176]  ? rcu_read_lock_held_common+0x12/0x50
[   39.816794]  ? write_comp_data+0x2f/0x90
[   39.817265]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   39.817827]  ? write_comp_data+0x2f/0x90
[   39.818298]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   39.818892]  ? interval_tree_remove+0x291/0x4e0
[   39.819437]  ? write_comp_data+0x2f/0x90
[   39.819934]  iopt_area_remove_access+0x108/0x120
[   39.820485]  iommufd_access_unpin_pages+0x177/0x210
[   39.821127]  iommufd_test_access_unmap+0xe0/0x130
[   39.821669]  ? iommufd_test_access_unmap+0x130/0x130
[   39.822235]  iommufd_test_staccess_release+0x39/0x60
[   39.822811]  __fput+0x11f/0x450
[   39.823194]  ____fput+0x1e/0x30
[   39.823581]  task_work_run+0xb6/0x120
[   39.824026]  do_exit+0x521/0x1340
[   39.824432]  ? lock_release+0x202/0x2c0
[   39.824890]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   39.825438]  ? trace_hardirqs_on+0x3f/0x100
[   39.825843]  do_group_exit+0x5e/0xf0
[   39.826135]  __x64_sys_exit_group+0x25/0x30
[   39.826449]  do_syscall_64+0x3b/0x90
[   39.826741]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   39.827109] RIP: 0033:0x7f3777be6cf6
[   39.827379] Code: Unable to access opcode bytes at 0x7f3777be6ccc.
[   39.827840] RSP: 002b:00007ffd0d7278d8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
[   39.828386] RAX: ffffffffffffffda RBX: 00007f3777cf1490 RCX: 00007f3777be6cf6
[   39.828945] RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
[   39.829764] RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffff80
[   39.830296] R10: 0000000000000004 R11: 0000000000000246 R12: 00007f3777cf1490
[   39.830818] R13: 0000000000000001 R14: 00007f3777cf4e88 R15: 0000000000000000
[   39.831353]  </TASK>
[   39.831526] irq event stamp: 0
[   39.831759] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   39.832218] hardirqs last disabled at (0): [<ffffffff810fff0c>] copy_process+0x11cc/0x2b10
[   39.832836] softirqs last  enabled at (0): [<ffffffff810fff10>] copy_process+0x11d0/0x2b10
[   39.833715] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   39.834160] ---[ end trace 0000000000000000 ]---
[   39.834593] ------------[ cut here ]------------
[   39.834935] WARNING: CPU: 1 PID: 745 at drivers/iommu/iommufd/pages.c:886 update_unpinned+0x75/0x80
[   39.835589] Modules linked in:
[   39.835831] CPU: 1 PID: 745 Comm: repro Tainted: G    B   W          6.1.0-a0a6c76cf2a5+ #1
[   39.836412] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   39.837248] RIP: 0010:update_unpinned+0x75/0x80
[   39.837798] Code: ac 2b ff 48 89 de 31 c9 31 d2 4c 29 e6 4c 89 ef e8 70 fb ff ff e8 bb ac 2b ff 5b 41 5c 41 5d 5d c3 cc cc cc cc e8 ab ac 2b ff <0f> 0b eb e7 0f 1f 80 00 00 00 00 0f 1f 44 00 00 55 48 89 e5 41 57
[   39.839227] RSP: 0018:ffffc9000148ba08 EFLAGS: 00010246
[   39.839611] RAX: 0000000000000000 RBX: 0000000000000000 RCX: ffffffff81fdfdcf
[   39.840138] RDX: 0000000000000000 RSI: ffff88800cb4d300 RDI: 0000000000000002
[   39.840649] RBP: ffffc9000148ba20 R08: 0000000000000000 R09: ffff88807dd3b890
[   39.841353] R10: 00000000000009b7 R11: 0000000000000000 R12: ffffffffffffffff
[   39.841868] R13: ffff888005ec9400 R14: 0000000000000002 R15: 0000000000000002
[   39.842390] FS:  0000000000000000(0000) GS:ffff88807dd00000(0000) knlGS:0000000000000000
[   39.842972] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   39.843398] CR2: 00007f3777cf0500 CR3: 0000000003c12002 CR4: 0000000000770ee0
[   39.843912] PKRU: 55555554
[   39.844118] Call Trace:
[   39.844316]  <TASK>
[   39.844486]  iopt_pages_unfill_xarray+0x522/0x5c0
[   39.844991]  ? rcu_read_lock_held_common+0x12/0x50
[   39.845540]  ? write_comp_data+0x2f/0x90
[   39.845987]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   39.846350]  ? write_comp_data+0x2f/0x90
[   39.846678]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   39.847027]  ? interval_tree_remove+0x291/0x4e0
[   39.847372]  ? write_comp_data+0x2f/0x90
[   39.847684]  iopt_area_remove_access+0x108/0x120
[   39.848035]  iommufd_access_unpin_pages+0x177/0x210
[   39.848407]  iommufd_test_access_unmap+0xe0/0x130
[   39.848798]  ? iommufd_test_access_unmap+0x130/0x130
[   39.849381]  iommufd_test_staccess_release+0x39/0x60
[   39.849888]  __fput+0x11f/0x450
[   39.850137]  ____fput+0x1e/0x30
[   39.850380]  task_work_run+0xb6/0x120
[   39.850700]  do_exit+0x521/0x1340
[   39.850961]  ? lock_release+0x202/0x2c0
[   39.851248]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   39.851600]  ? trace_hardirqs_on+0x3f/0x100
[   39.851934]  do_group_exit+0x5e/0xf0
[   39.852203]  __x64_sys_exit_group+0x25/0x30
[   39.852513]  do_syscall_64+0x3b/0x90
[   39.852821]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   39.853417] RIP: 0033:0x7f3777be6cf6
[   39.853857] Code: Unable to access opcode bytes at 0x7f3777be6ccc.
[   39.854347] RSP: 002b:00007ffd0d7278d8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
[   39.854906] RAX: ffffffffffffffda RBX: 00007f3777cf1490 RCX: 00007f3777be6cf6
[   39.855433] RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
[   39.855947] RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffff80
[   39.856461] R10: 0000000000000004 R11: 0000000000000246 R12: 00007f3777cf1490
[   39.856992] R13: 0000000000000001 R14: 00007f3777cf4e88 R15: 0000000000000000
[   39.857731]  </TASK>
[   39.857898] irq event stamp: 0
[   39.858121] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   39.858589] hardirqs last disabled at (0): [<ffffffff810fff0c>] copy_process+0x11cc/0x2b10
[   39.859179] softirqs last  enabled at (0): [<ffffffff810fff10>] copy_process+0x11d0/0x2b10
[   39.859797] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   39.860244] ---[ end trace 0000000000000000 ]---
[   39.860776] ------------[ cut here ]------------
[   39.861327] WARNING: CPU: 1 PID: 745 at drivers/iommu/iommufd/pages.c:1181 iopt_release_pages+0x159/0x190
[   39.862084] Modules linked in:
[   39.862314] CPU: 1 PID: 745 Comm: repro Tainted: G    B   W          6.1.0-a0a6c76cf2a5+ #1
[   39.862935] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   39.863742] RIP: 0010:iopt_release_pages+0x159/0x190
[   39.864117] Code: b5 11 ff eb cb e8 87 90 2b ff be 03 00 00 00 4c 89 f7 e8 6a 8b ce ff eb b7 e8 73 90 2b ff 0f 0b e9 ed fe ff ff e8 67 90 2b ff <0f> 0b e9 00 ff ff ff e8 5b 90 2b ff 0f 0b e9 07 ff ff ff e8 4f 90
[   39.865487] RSP: 0018:ffffc9000148bc88 EFLAGS: 00010246
[   39.866071] RAX: 0000000000000000 RBX: ffff888005ec9400 RCX: ffffffff81fe1957
[   39.866636] RDX: 0000000000000000 RSI: ffff88800cb4d300 RDI: 0000000000000002
[   39.867165] RBP: ffffc9000148bca8 R08: 0000000000000000 R09: 0000000000000000
[   39.867671] R10: ffffc9000148bc58 R11: 0000000000000000 R12: ffffffffffffffff
[   39.868189] R13: 0000000001000000 R14: 00000000017fffff R15: 0000000000000000
[   39.868733] FS:  0000000000000000(0000) GS:ffff88807dd00000(0000) knlGS:0000000000000000
[   39.869468] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   39.869880] CR2: 00007f3777cf0500 CR3: 0000000003c12002 CR4: 0000000000770ee0
[   39.870389] PKRU: 55555554
[   39.870593] Call Trace:
[   39.870781]  <TASK>
[   39.870953]  iopt_unmap_iova_range+0x1ef/0x2e0
[   39.871287]  iopt_unmap_all+0x2f/0x60
[   39.871555]  iommufd_ioas_destroy+0x2c/0x70
[   39.871855]  iommufd_fops_release+0xd4/0x170
[   39.872178]  ? iommufd_ctx_get+0x30/0x30
[   39.872464]  __fput+0x11f/0x450
[   39.872738]  ____fput+0x1e/0x30
[   39.873121]  task_work_run+0xb6/0x120
[   39.873577]  do_exit+0x521/0x1340
[   39.873966]  ? lock_release+0x202/0x2c0
[   39.874262]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   39.874617]  ? trace_hardirqs_on+0x3f/0x100
[   39.874925]  do_group_exit+0x5e/0xf0
[   39.875189]  __x64_sys_exit_group+0x25/0x30
[   39.875500]  do_syscall_64+0x3b/0x90
[   39.875764]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   39.876125] RIP: 0033:0x7f3777be6cf6
[   39.876408] Code: Unable to access opcode bytes at 0x7f3777be6ccc.
[   39.876855] RSP: 002b:00007ffd0d7278d8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
[   39.877695] RAX: ffffffffffffffda RBX: 00007f3777cf1490 RCX: 00007f3777be6cf6
[   39.878246] RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
[   39.878755] RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffff80
[   39.879241] R10: 0000000000000004 R11: 0000000000000246 R12: 00007f3777cf1490
[   39.879746] R13: 0000000000000001 R14: 00007f3777cf4e88 R15: 0000000000000000
[   39.880244]  </TASK>
[   39.880409] irq event stamp: 0
[   39.880639] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   39.881346] hardirqs last disabled at (0): [<ffffffff810fff0c>] copy_process+0x11cc/0x2b10
[   39.881942] softirqs last  enabled at (0): [<ffffffff810fff10>] copy_process+0x11d0/0x2b10
[   39.882553] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   39.882995] ---[ end trace 0000000000000000 ]---
[   39.920177] ------------[ cut here ]------------
[   39.920537] WARNING: CPU: 1 PID: 747 at drivers/iommu/iommufd/pages.c:294 __iopt_area_unfill_domain+0x152/0x560
[   39.921288] Modules linked in:
[   39.921615] CPU: 1 PID: 747 Comm: repro Tainted: G    B   W          6.1.0-a0a6c76cf2a5+ #1
[   39.922227] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   39.923035] RIP: 0010:__iopt_area_unfill_domain+0x152/0x560
[   39.923434] Code: a1 2b ff 44 8b 64 24 54 48 8b 44 24 48 31 ff 44 89 e6 48 89 44 24 38 e8 6c a2 2b ff 45 85 e4 0f 85 eb 01 00 00 e8 ee a0 2b ff <0f> 0b e8 e7 a0 2b ff 48 8b 44 24 38 89 5c 24 58 89 18 8b 44 24 54
[   39.924732] RSP: 0018:ffffc9000149bae0 EFLAGS: 00010246
[   39.925296] RAX: 0000000000000000 RBX: 00000000ffffffff RCX: ffffffff81fe0bd5
[   39.925789] RDX: 0000000000000000 RSI: ffff88801235d300 RDI: 0000000000000002
[   39.926292] RBP: ffffc9000149bd10 R08: 000000000003b5c5 R09: 0000000000000001
[   39.926790] R10: 000000000003b5a0 R11: 0000000000000024 R12: 0000000000000002
[   39.927296] R13: 0000000000000801 R14: 00000000000007ff R15: 0000000000000800
[   39.927793] FS:  00007f3777af9740(0000) GS:ffff88807dd00000(0000) knlGS:0000000000000000
[   39.928359] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   39.928789] CR2: 00007f3777c1e580 CR3: 000000000d53c005 CR4: 0000000000770ee0
[   39.929572] PKRU: 55555554
[   39.929771] Call Trace:
[   39.929952]  <TASK>
[   39.930134]  ? rcu_read_lock_sched_held+0x29/0x80
[   39.930508]  ? lock_acquire+0x1a1/0x2f0
[   39.930787]  ? rcu_read_lock_held_common+0x12/0x50
[   39.931137]  ? rcu_read_lock_sched_held+0x29/0x80
[   39.931479]  ? __mutex_lock+0x13a/0xf30
[   39.931780]  ? write_comp_data+0x2f/0x90
[   39.932069]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   39.932416]  iopt_area_unfill_domain+0x32/0x40
[   39.932778]  iopt_table_remove_domain+0x23f/0x4c0
[   39.933342]  iommufd_device_selftest_detach+0x3a/0x90
[   39.933944]  iommufd_selftest_destroy+0x55/0x70
[   39.934279]  iommufd_object_destroy_user+0xce/0x130
[   39.934641]  iommufd_destroy+0xa2/0xc0
[   39.934928]  iommufd_fops_ioctl+0x1ef/0x310
[   39.935242]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   39.935587]  ? write_comp_data+0x2f/0x90
[   39.935894]  __x64_sys_ioctl+0x10e/0x160
[   39.936195]  ? iommufd_get_object.part.6+0x1c0/0x1c0
[   39.936550]  do_syscall_64+0x3b/0x90
[   39.936857]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   39.937437] RIP: 0033:0x7f3777c1e59d
[   39.937832] Code: 00 c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d d3 08 0d 00 f7 d8 64 89 01 48
[   39.939137] RSP: 002b:00007ffd0d727918 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   39.939668] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f3777c1e59d
[   39.940178] RDX: 0000000020000140 RSI: 0000000000003b80 RDI: 0000000000000003
[   39.940698] RBP: 00007ffd0d727930 R08: 00007ffd0d727930 R09: 00007ffd0d727930
[   39.941386] R10: 00007ffd0d727930 R11: 0000000000000213 R12: 0000000000401180
[   39.941870] R13: 00007ffd0d727a50 R14: 0000000000000000 R15: 0000000000000000
[   39.942372]  </TASK>
[   39.942550] irq event stamp: 0
[   39.942774] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   39.943227] hardirqs last disabled at (0): [<ffffffff810fff0c>] copy_process+0x11cc/0x2b10
[   39.943816] softirqs last  enabled at (0): [<ffffffff810fff10>] copy_process+0x11d0/0x2b10
[   39.944395] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   39.944874] ---[ end trace 0000000000000000 ]---
[   39.945545] ------------[ cut here ]------------
[   39.945955] WARNING: CPU: 1 PID: 747 at drivers/iommu/iommufd/pages.c:1290 __iopt_area_unfill_domain+0x54f/0x560
[   39.946682] Modules linked in:
[   39.946914] CPU: 1 PID: 747 Comm: repro Tainted: G    B   W          6.1.0-a0a6c76cf2a5+ #1
[   39.947510] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   39.948271] RIP: 0010:__iopt_area_unfill_domain+0x54f/0x560
[   39.948714] Code: e8 86 9e 2b ff 85 db 0f 85 35 fb ff ff e8 09 9d 2b ff 0f 0b e9 29 fb ff ff e8 fd 9c 2b ff 0f 0b e9 69 fe ff ff e8 f1 9c 2b ff <0f> 0b e9 58 ff ff ff e8 65 2d dc 00 0f 1f 44 00 00 0f 1f 44 00 00
[   39.950644] RSP: 0018:ffffc9000149bae0 EFLAGS: 00010246
[   39.951038] RAX: 0000000000000000 RBX: 00000000ffffffff RCX: ffffffff81fe0d26
[   39.951764] RDX: 0000000000000000 RSI: ffff88801235d300 RDI: 0000000000000002
[   39.952561] RBP: ffffc9000149bd10 R08: 000000000003b5c5 R09: 0000000000000001
[   39.953339] R10: 000000000003b5a0 R11: 0000000000000024 R12: 00000000000007ff
[   39.954058] R13: 0000000000000801 R14: 00000000000007ff R15: 0000000000000800
[   39.954580] FS:  00007f3777af9740(0000) GS:ffff88807dd00000(0000) knlGS:0000000000000000
[   39.955141] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   39.955568] CR2: 00007f3777c1e580 CR3: 000000000d53c005 CR4: 0000000000770ee0
[   39.956071] PKRU: 55555554
[   39.956269] Call Trace:
[   39.956452]  <TASK>
[   39.956631]  ? rcu_read_lock_sched_held+0x29/0x80
[   39.957192]  ? lock_acquire+0x1a1/0x2f0
[   39.957586]  ? rcu_read_lock_held_common+0x12/0x50
[   39.957949]  ? rcu_read_lock_sched_held+0x29/0x80
[   39.958291]  ? __mutex_lock+0x13a/0xf30
[   39.958587]  ? write_comp_data+0x2f/0x90
[   39.958894]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   39.959239]  iopt_area_unfill_domain+0x32/0x40
[   39.959565]  iopt_table_remove_domain+0x23f/0x4c0
[   39.959922]  iommufd_device_selftest_detach+0x3a/0x90
[   39.960304]  iommufd_selftest_destroy+0x55/0x70
[   39.960642]  iommufd_object_destroy_user+0xce/0x130
[   39.961311]  iommufd_destroy+0xa2/0xc0
[   39.961738]  iommufd_fops_ioctl+0x1ef/0x310
[   39.962047]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   39.962388]  ? write_comp_data+0x2f/0x90
[   39.962689]  __x64_sys_ioctl+0x10e/0x160
[   39.962997]  ? iommufd_get_object.part.6+0x1c0/0x1c0
[   39.963354]  do_syscall_64+0x3b/0x90
[   39.963616]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   39.963987] RIP: 0033:0x7f3777c1e59d
[   39.964244] Code: 00 c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d d3 08 0d 00 f7 d8 64 89 01 48
[   39.965534] RSP: 002b:00007ffd0d727918 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   39.966362] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f3777c1e59d
[   39.966930] RDX: 0000000020000140 RSI: 0000000000003b80 RDI: 0000000000000003
[   39.967439] RBP: 00007ffd0d727930 R08: 00007ffd0d727930 R09: 00007ffd0d727930
[   39.967932] R10: 00007ffd0d727930 R11: 0000000000000213 R12: 0000000000401180
[   39.968426] R13: 00007ffd0d727a50 R14: 0000000000000000 R15: 0000000000000000
[   39.968953]  </TASK>
[   39.969213] irq event stamp: 0
[   39.969546] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   39.969986] hardirqs last disabled at (0): [<ffffffff810fff0c>] copy_process+0x11cc/0x2b10
[   39.970588] softirqs last  enabled at (0): [<ffffffff810fff10>] copy_process+0x11d0/0x2b10
[   39.971172] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   39.971624] ---[ end trace 0000000000000000 ]---
[   39.974613] ------------[ cut here ]------------
[   39.974951] WARNING: CPU: 1 PID: 747 at drivers/iommu/iommufd/pages.c:178 batch_unpin.isra.23+0x151/0x1a0
[   39.975611] Modules linked in:
[   39.975832] CPU: 1 PID: 747 Comm: repro Tainted: G    B   W          6.1.0-a0a6c76cf2a5+ #1
[   39.976397] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   39.977419] RIP: 0010:batch_unpin.isra.23+0x151/0x1a0
[   39.977964] Code: e8 c4 be 2b ff 48 8b 45 d0 48 85 c0 75 17 e8 26 bd 2b ff 48 8b 7d c8 48 89 de e8 fa bd 2b ff 48 39 5d c8 73 07 e8 0f bd 2b ff <0f> 0b e8 08 bd 2b ff 4d 29 e5 31 ff 41 83 c6 01 4c 89 ee 31 db e8
[   39.979309] RSP: 0018:ffffc9000149b9d8 EFLAGS: 00010246
[   39.979681] RAX: 0000000000000000 RBX: ffffffffffffffff RCX: ffffffff81fded8c
[   39.980183] RDX: 0000000000000000 RSI: ffff88801235d300 RDI: 0000000000000002
[   39.980697] RBP: ffffc9000149ba20 R08: 0000000000000000 R09: ffff88807dd3b890
[   39.981346] R10: 00000000000009cd R11: 0000000000000000 R12: 0000000000000001
[   39.981850] R13: 0000000000000001 R14: 0000000000000000 R15: ffff888005ec9400
[   39.982349] FS:  0000000000000000(0000) GS:ffff88807dd00000(0000) knlGS:0000000000000000
[   39.982920] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   39.983330] CR2: 00007f3777cf0500 CR3: 0000000003c12002 CR4: 0000000000770ee0
[   39.983825] PKRU: 55555554
[   39.984019] Call Trace:
[   39.984210]  <TASK>
[   39.984373]  iopt_pages_unfill_xarray+0x39f/0x5c0
[   39.984747]  ? rcu_read_lock_sched_held+0x29/0x80
[   39.985314]  ? rcu_read_lock_held_common+0x12/0x50
[   39.985816]  ? write_comp_data+0x2f/0x90
[   39.986103]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   39.986468]  ? write_comp_data+0x2f/0x90
[   39.986766]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   39.987105]  ? interval_tree_remove+0x291/0x4e0
[   39.987447]  ? write_comp_data+0x2f/0x90
[   39.987737]  iopt_area_remove_access+0x108/0x120
[   39.988074]  iommufd_access_unpin_pages+0x177/0x210
[   39.988443]  iommufd_test_access_unmap+0xe0/0x130
[   39.988809]  ? iommufd_test_access_unmap+0x130/0x130
[   39.989395]  iommufd_test_staccess_release+0x39/0x60
[   39.989897]  __fput+0x11f/0x450
[   39.990142]  ____fput+0x1e/0x30
[   39.990383]  task_work_run+0xb6/0x120
[   39.990691]  do_exit+0x521/0x1340
[   39.990940]  ? lock_release+0x202/0x2c0
[   39.991218]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   39.991562]  ? trace_hardirqs_on+0x3f/0x100
[   39.991889]  do_group_exit+0x5e/0xf0
[   39.992155]  __x64_sys_exit_group+0x25/0x30
[   39.992450]  do_syscall_64+0x3b/0x90
[   39.992754]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   39.993343] RIP: 0033:0x7f3777be6cf6
[   39.993764] Code: Unable to access opcode bytes at 0x7f3777be6ccc.
[   39.994207] RSP: 002b:00007ffd0d7278d8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
[   39.994740] RAX: ffffffffffffffda RBX: 00007f3777cf1490 RCX: 00007f3777be6cf6
[   39.995239] RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
[   39.995727] RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffff80
[   39.996227] R10: 0000000000000004 R11: 0000000000000246 R12: 00007f3777cf1490
[   39.996739] R13: 0000000000000001 R14: 00007f3777cf4e88 R15: 0000000000000000
[   39.997480]  </TASK>
[   39.997643] irq event stamp: 0
[   39.997861] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   39.998308] hardirqs last disabled at (0): [<ffffffff810fff0c>] copy_process+0x11cc/0x2b10
[   39.998897] softirqs last  enabled at (0): [<ffffffff810fff10>] copy_process+0x11d0/0x2b10
[   39.999471] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   39.999911] ---[ end trace 0000000000000000 ]---
[   40.000347] ------------[ cut here ]------------
[   40.000707] WARNING: CPU: 1 PID: 747 at drivers/iommu/iommufd/pages.c:886 update_unpinned+0x75/0x80
[   40.001652] Modules linked in:
[   40.001876] CPU: 1 PID: 747 Comm: repro Tainted: G    B   W          6.1.0-a0a6c76cf2a5+ #1
[   40.002460] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   40.003269] RIP: 0010:update_unpinned+0x75/0x80
[   40.003615] Code: ac 2b ff 48 89 de 31 c9 31 d2 4c 29 e6 4c 89 ef e8 70 fb ff ff e8 bb ac 2b ff 5b 41 5c 41 5d 5d c3 cc cc cc cc e8 ab ac 2b ff <0f> 0b eb e7 0f 1f 80 00 00 00 00 0f 1f 44 00 00 55 48 89 e5 41 57
[   40.004905] RSP: 0018:ffffc9000149ba08 EFLAGS: 00010246
[   40.005483] RAX: 0000000000000000 RBX: 0000000000000000 RCX: ffffffff81fdfdcf
[   40.005971] RDX: 0000000000000000 RSI: ffff88801235d300 RDI: 0000000000000002
[   40.006463] RBP: ffffc9000149ba20 R08: 0000000000000000 R09: ffff88807dd3b890
[   40.006976] R10: 00000000000009cd R11: 0000000000000000 R12: ffffffffffffffff
[   40.007479] R13: ffff888005ec9400 R14: 0000000000000002 R15: 0000000000000002
[   40.007980] FS:  0000000000000000(0000) GS:ffff88807dd00000(0000) knlGS:0000000000000000
[   40.008533] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   40.008974] CR2: 00007f3777cf0500 CR3: 0000000003c12002 CR4: 0000000000770ee0
[   40.009740] PKRU: 55555554
[   40.009938] Call Trace:
[   40.010114]  <TASK>
[   40.010272]  iopt_pages_unfill_xarray+0x522/0x5c0
[   40.010625]  ? rcu_read_lock_sched_held+0x29/0x80
[   40.010993]  ? rcu_read_lock_held_common+0x12/0x50
[   40.011344]  ? write_comp_data+0x2f/0x90
[   40.011632]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   40.011985]  ? write_comp_data+0x2f/0x90
[   40.012266]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   40.012606]  ? interval_tree_remove+0x291/0x4e0
[   40.012974]  ? write_comp_data+0x2f/0x90
[   40.013435]  iopt_area_remove_access+0x108/0x120
[   40.013972]  iommufd_access_unpin_pages+0x177/0x210
[   40.014415]  iommufd_test_access_unmap+0xe0/0x130
[   40.014759]  ? iommufd_test_access_unmap+0x130/0x130
[   40.015125]  iommufd_test_staccess_release+0x39/0x60
[   40.015483]  __fput+0x11f/0x450
[   40.015722]  ____fput+0x1e/0x30
[   40.015956]  task_work_run+0xb6/0x120
[   40.016242]  do_exit+0x521/0x1340
[   40.016490]  ? lock_release+0x202/0x2c0
[   40.016806]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   40.017371]  ? trace_hardirqs_on+0x3f/0x100
[   40.017806]  do_group_exit+0x5e/0xf0
[   40.018069]  __x64_sys_exit_group+0x25/0x30
[   40.018384]  do_syscall_64+0x3b/0x90
[   40.018666]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   40.019036] RIP: 0033:0x7f3777be6cf6
[   40.019312] Code: Unable to access opcode bytes at 0x7f3777be6ccc.
[   40.019745] RSP: 002b:00007ffd0d7278d8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
[   40.020267] RAX: ffffffffffffffda RBX: 00007f3777cf1490 RCX: 00007f3777be6cf6
[   40.020795] RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
[   40.021589] RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffff80
[   40.022072] R10: 0000000000000004 R11: 0000000000000246 R12: 00007f3777cf1490
[   40.022577] R13: 0000000000000001 R14: 00007f3777cf4e88 R15: 0000000000000000
[   40.023079]  </TASK>
[   40.023242] irq event stamp: 0
[   40.023468] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   40.023913] hardirqs last disabled at (0): [<ffffffff810fff0c>] copy_process+0x11cc/0x2b10
[   40.024487] softirqs last  enabled at (0): [<ffffffff810fff10>] copy_process+0x11d0/0x2b10
[   40.025134] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   40.025828] ---[ end trace 0000000000000000 ]---
[   40.026381] ------------[ cut here ]------------
[   40.026718] WARNING: CPU: 1 PID: 747 at drivers/iommu/iommufd/pages.c:1181 iopt_release_pages+0x159/0x190
[   40.027413] Modules linked in:
[   40.027638] CPU: 1 PID: 747 Comm: repro Tainted: G    B   W          6.1.0-a0a6c76cf2a5+ #1
[   40.028223] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   40.029046] RIP: 0010:iopt_release_pages+0x159/0x190
[   40.029603] Code: b5 11 ff eb cb e8 87 90 2b ff be 03 00 00 00 4c 89 f7 e8 6a 8b ce ff eb b7 e8 73 90 2b ff 0f 0b e9 ed fe ff ff e8 67 90 2b ff <0f> 0b e9 00 ff ff ff e8 5b 90 2b ff 0f 0b e9 07 ff ff ff e8 4f 90
[   40.030884] RSP: 0018:ffffc9000149bc88 EFLAGS: 00010246
[   40.031267] RAX: 0000000000000000 RBX: ffff888005ec9400 RCX: ffffffff81fe1957
[   40.031765] RDX: 0000000000000000 RSI: ffff88801235d300 RDI: 0000000000000002
[   40.032259] RBP: ffffc9000149bca8 R08: 0000000000000000 R09: 0000000000000000
[   40.032783] R10: ffffc9000149bc58 R11: 0000000000000000 R12: ffffffffffffffff
[   40.033492] R13: 0000000001000000 R14: 00000000017fffff R15: 0000000000000000
[   40.033977] FS:  0000000000000000(0000) GS:ffff88807dd00000(0000) knlGS:0000000000000000
[   40.034550] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   40.034956] CR2: 00007f3777cf0500 CR3: 0000000003c12002 CR4: 0000000000770ee0
[   40.035472] PKRU: 55555554
[   40.035668] Call Trace:
[   40.035858]  <TASK>
[   40.036021]  iopt_unmap_iova_range+0x1ef/0x2e0
[   40.036368]  iopt_unmap_all+0x2f/0x60
[   40.036641]  iommufd_ioas_destroy+0x2c/0x70
[   40.037163]  iommufd_fops_release+0xd4/0x170
[   40.037677]  ? iommufd_ctx_get+0x30/0x30
[   40.038111]  __fput+0x11f/0x450
[   40.038544]  ____fput+0x1e/0x30
[   40.038955]  task_work_run+0xb6/0x120
[   40.039412]  do_exit+0x521/0x1340
[   40.039841]  ? lock_release+0x202/0x2c0
[   40.040312]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   40.040950]  ? trace_hardirqs_on+0x3f/0x100
[   40.041461]  do_group_exit+0x5e/0xf0
[   40.041894]  __x64_sys_exit_group+0x25/0x30
[   40.042418]  do_syscall_64+0x3b/0x90
[   40.042870]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   40.043536] RIP: 0033:0x7f3777be6cf6
[   40.043967] Code: Unable to access opcode bytes at 0x7f3777be6ccc.
[   40.044728] RSP: 002b:00007ffd0d7278d8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
[   40.045579] RAX: ffffffffffffffda RBX: 00007f3777cf1490 RCX: 00007f3777be6cf6
[   40.046411] RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
[   40.047200] RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffff80
[   40.047999] R10: 0000000000000004 R11: 0000000000000246 R12: 00007f3777cf1490
[   40.048843] R13: 0000000000000001 R14: 00007f3777cf4e88 R15: 0000000000000000
[   40.049667]  </TASK>
[   40.049940] irq event stamp: 0
[   40.050346] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   40.051061] hardirqs last disabled at (0): [<ffffffff810fff0c>] copy_process+0x11cc/0x2b10
[   40.051984] softirqs last  enabled at (0): [<ffffffff810fff10>] copy_process+0x11d0/0x2b10
[   40.052976] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   40.053715] ---[ end trace 0000000000000000 ]---
[   40.105857] ------------[ cut here ]------------
[   40.106258] WARNING: CPU: 0 PID: 750 at drivers/iommu/iommufd/pages.c:178 batch_unpin.isra.23+0x151/0x1a0
[   40.106948] Modules linked in:
[   40.107186] CPU: 0 PID: 750 Comm: repro Tainted: G    B   W          6.1.0-a0a6c76cf2a5+ #1
[   40.107799] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   40.108615] RIP: 0010:batch_unpin.isra.23+0x151/0x1a0
[   40.109034] Code: e8 c4 be 2b ff 48 8b 45 d0 48 85 c0 75 17 e8 26 bd 2b ff 48 8b 7d c8 48 89 de e8 fa bd 2b ff 48 39 5d c8 73 07 e8 0f bd 2b ff <0f> 0b e8 08 bd 2b ff 4d 29 e5 31 ff 41 83 c6 01 4c 89 ee 31 db e8
[   40.110633] RSP: 0018:ffffc9000149ba88 EFLAGS: 00010246
[   40.111033] RAX: 0000000000000000 RBX: fffffffffffffffc RCX: ffffffff81fded8c
[   40.111539] RDX: 0000000000000000 RSI: ffff8880135d8000 RDI: 0000000000000002
[   40.112053] RBP: ffffc9000149bad0 R08: 000000000003b5c5 R09: 000000000000000f
[   40.112558] R10: 000000000003b5a0 R11: 0000000000000024 R12: 000000000000000a
[   40.113103] R13: 000000000000000a R14: 000000000000002f R15: ffff888009f84c00
[   40.113819] FS:  00007f3777af9740(0000) GS:ffff88807dc00000(0000) knlGS:0000000000000000
[   40.114403] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   40.114824] CR2: 00007f3777c1e580 CR3: 000000000d53c006 CR4: 0000000000770ef0
[   40.115347] PKRU: 55555554
[   40.115550] Call Trace:
[   40.115734]  <TASK>
[   40.115901]  __iopt_area_unfill_domain+0x257/0x560
[   40.116276]  ? rcu_read_lock_sched_held+0x29/0x80
[   40.116635]  ? lock_acquire+0x1a1/0x2f0
[   40.117128]  ? rcu_read_lock_held_common+0x12/0x50
[   40.117654]  ? rcu_read_lock_sched_held+0x29/0x80
[   40.118013]  ? __mutex_lock+0x13a/0xf30
[   40.118312]  ? write_comp_data+0x2f/0x90
[   40.118626]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   40.119003]  iopt_area_unfill_domain+0x32/0x40
[   40.119343]  iopt_table_remove_domain+0x23f/0x4c0
[   40.119697]  iommufd_device_selftest_detach+0x3a/0x90
[   40.120090]  iommufd_selftest_destroy+0x55/0x70
[   40.120432]  iommufd_object_destroy_user+0xce/0x130
[   40.120845]  iommufd_destroy+0xa2/0xc0
[   40.121292]  iommufd_fops_ioctl+0x1ef/0x310
[   40.121810]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   40.122189]  ? write_comp_data+0x2f/0x90
[   40.122501]  __x64_sys_ioctl+0x10e/0x160
[   40.122807]  ? iommufd_get_object.part.6+0x1c0/0x1c0
[   40.123200]  do_syscall_64+0x3b/0x90
[   40.123475]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   40.123848] RIP: 0033:0x7f3777c1e59d
[   40.124128] Code: 00 c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d d3 08 0d 00 f7 d8 64 89 01 48
[   40.125510] RSP: 002b:00007ffd0d727918 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   40.126367] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f3777c1e59d
[   40.126896] RDX: 0000000020000140 RSI: 0000000000003b80 RDI: 0000000000000003
[   40.127420] RBP: 00007ffd0d727930 R08: 00007ffd0d727930 R09: 00007ffd0d727930
[   40.127926] R10: 00007ffd0d727930 R11: 0000000000000213 R12: 0000000000401180
[   40.128440] R13: 00007ffd0d727a50 R14: 0000000000000000 R15: 0000000000000000
[   40.128993]  </TASK>
[   40.129266] irq event stamp: 0
[   40.129626] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   40.130076] hardirqs last disabled at (0): [<ffffffff810fff0c>] copy_process+0x11cc/0x2b10
[   40.130692] softirqs last  enabled at (0): [<ffffffff810fff10>] copy_process+0x11d0/0x2b10
[   40.131295] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   40.131756] ---[ end trace 0000000000000000 ]---
[   40.132182] ------------[ cut here ]------------
[   40.132539] WARNING: CPU: 0 PID: 750 at drivers/iommu/iommufd/pages.c:294 __iopt_area_unfill_domain+0x152/0x560
[   40.133283] Modules linked in:
[   40.133640] CPU: 0 PID: 750 Comm: repro Tainted: G    B   W          6.1.0-a0a6c76cf2a5+ #1
[   40.134427] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   40.135256] RIP: 0010:__iopt_area_unfill_domain+0x152/0x560
[   40.135667] Code: a1 2b ff 44 8b 64 24 54 48 8b 44 24 48 31 ff 44 89 e6 48 89 44 24 38 e8 6c a2 2b ff 45 85 e4 0f 85 eb 01 00 00 e8 ee a0 2b ff <0f> 0b e8 e7 a0 2b ff 48 8b 44 24 38 89 5c 24 58 89 18 8b 44 24 54
[   40.137018] RSP: 0018:ffffc9000149bae0 EFLAGS: 00010246
[   40.137557] RAX: 0000000000000000 RBX: 00000000fffffffb RCX: ffffffff81fe0bd5
[   40.138105] RDX: 0000000000000000 RSI: ffff8880135d8000 RDI: 0000000000000002
[   40.138621] RBP: ffffc9000149bd10 R08: 000000000003b5c5 R09: 000000000000000f
[   40.139159] R10: 000000000003b5a0 R11: 0000000000000024 R12: 000000000000005b
[   40.139663] R13: 0000000000000805 R14: 00000000000007ff R15: 0000000000000800
[   40.140179] FS:  00007f3777af9740(0000) GS:ffff88807dc00000(0000) knlGS:0000000000000000
[   40.140775] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   40.141424] CR2: 00007f3777c1e580 CR3: 000000000d53c006 CR4: 0000000000770ef0
[   40.141945] PKRU: 55555554
[   40.142161] Call Trace:
[   40.142347]  <TASK>
[   40.142530]  ? rcu_read_lock_sched_held+0x29/0x80
[   40.142889]  ? lock_acquire+0x1a1/0x2f0
[   40.143197]  ? rcu_read_lock_held_common+0x12/0x50
[   40.143568]  ? rcu_read_lock_sched_held+0x29/0x80
[   40.143915]  ? __mutex_lock+0x13a/0xf30
[   40.144213]  ? write_comp_data+0x2f/0x90
[   40.144525]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   40.144909]  iopt_area_unfill_domain+0x32/0x40
[   40.145449]  iopt_table_remove_domain+0x23f/0x4c0
[   40.146014]  iommufd_device_selftest_detach+0x3a/0x90
[   40.146462]  iommufd_selftest_destroy+0x55/0x70
[   40.146818]  iommufd_object_destroy_user+0xce/0x130
[   40.147195]  iommufd_destroy+0xa2/0xc0
[   40.147486]  iommufd_fops_ioctl+0x1ef/0x310
[   40.147800]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   40.148160]  ? write_comp_data+0x2f/0x90
[   40.148458]  __x64_sys_ioctl+0x10e/0x160
[   40.148791]  ? iommufd_get_object.part.6+0x1c0/0x1c0
[   40.149187]  do_syscall_64+0x3b/0x90
[   40.149462]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   40.149833] RIP: 0033:0x7f3777c1e59d
[   40.150103] Code: 00 c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d d3 08 0d 00 f7 d8 64 89 01 48
[   40.151424] RSP: 002b:00007ffd0d727918 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   40.151954] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f3777c1e59d
[   40.152456] RDX: 0000000020000140 RSI: 0000000000003b80 RDI: 0000000000000003
[   40.152974] RBP: 00007ffd0d727930 R08: 00007ffd0d727930 R09: 00007ffd0d727930
[   40.153484] R10: 00007ffd0d727930 R11: 0000000000000213 R12: 0000000000401180
[   40.153998] R13: 00007ffd0d727a50 R14: 0000000000000000 R15: 0000000000000000
[   40.154521]  </TASK>
[   40.154688] irq event stamp: 0
[   40.155358] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   40.155816] hardirqs last disabled at (0): [<ffffffff810fff0c>] copy_process+0x11cc/0x2b10
[   40.156417] softirqs last  enabled at (0): [<ffffffff810fff10>] copy_process+0x11d0/0x2b10
[   40.157030] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   40.157476] ---[ end trace 0000000000000000 ]---
[   40.157933] ------------[ cut here ]------------
[   40.158281] WARNING: CPU: 0 PID: 750 at drivers/iommu/iommufd/pages.c:1290 __iopt_area_unfill_domain+0x54f/0x560
[   40.159018] Modules linked in:
[   40.159254] CPU: 0 PID: 750 Comm: repro Tainted: G    B   W          6.1.0-a0a6c76cf2a5+ #1
[   40.159853] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   40.160643] RIP: 0010:__iopt_area_unfill_domain+0x54f/0x560
[   40.161084] Code: e8 86 9e 2b ff 85 db 0f 85 35 fb ff ff e8 09 9d 2b ff 0f 0b e9 29 fb ff ff e8 fd 9c 2b ff 0f 0b e9 69 fe ff ff e8 f1 9c 2b ff <0f> 0b e9 58 ff ff ff e8 65 2d dc 00 0f 1f 44 00 00 0f 1f 44 00 00
[   40.162359] RSP: 0018:ffffc9000149bae0 EFLAGS: 00010246
[   40.162751] RAX: 0000000000000000 RBX: 00000000fffffffb RCX: ffffffff81fe0d26
[   40.163285] RDX: 0000000000000000 RSI: ffff8880135d8000 RDI: 0000000000000002
[   40.163790] RBP: ffffc9000149bd10 R08: 000000000003b5c5 R09: 000000000000000f
[   40.164294] R10: 000000000003b5a0 R11: 0000000000000024 R12: 00000000000007ff
[   40.164824] R13: 0000000000000805 R14: 00000000000007ff R15: 0000000000000800
[   40.165334] FS:  00007f3777af9740(0000) GS:ffff88807dc00000(0000) knlGS:0000000000000000
[   40.165905] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   40.166318] CR2: 00007f3777c1e580 CR3: 000000000d53c006 CR4: 0000000000770ef0
[   40.166847] PKRU: 55555554
[   40.167056] Call Trace:
[   40.167249]  <TASK>
[   40.167424]  ? rcu_read_lock_sched_held+0x29/0x80
[   40.167779]  ? lock_acquire+0x1a1/0x2f0
[   40.168072]  ? rcu_read_lock_held_common+0x12/0x50
[   40.168429]  ? rcu_read_lock_sched_held+0x29/0x80
[   40.168793]  ? __mutex_lock+0x13a/0xf30
[   40.169099]  ? write_comp_data+0x2f/0x90
[   40.169405]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   40.169753]  iopt_area_unfill_domain+0x32/0x40
[   40.170095]  iopt_table_remove_domain+0x23f/0x4c0
[   40.170459]  iommufd_device_selftest_detach+0x3a/0x90
[   40.170866]  iommufd_selftest_destroy+0x55/0x70
[   40.171207]  iommufd_object_destroy_user+0xce/0x130
[   40.171582]  iommufd_destroy+0xa2/0xc0
[   40.171872]  iommufd_fops_ioctl+0x1ef/0x310
[   40.172192]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   40.172538]  ? write_comp_data+0x2f/0x90
[   40.172838]  __x64_sys_ioctl+0x10e/0x160
[   40.173143]  ? iommufd_get_object.part.6+0x1c0/0x1c0
[   40.173529]  do_syscall_64+0x3b/0x90
[   40.173808]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   40.174181] RIP: 0033:0x7f3777c1e59d
[   40.174453] Code: 00 c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d d3 08 0d 00 f7 d8 64 89 01 48
[   40.175770] RSP: 002b:00007ffd0d727918 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   40.176307] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f3777c1e59d
[   40.176822] RDX: 0000000020000140 RSI: 0000000000003b80 RDI: 0000000000000003
[   40.177329] RBP: 00007ffd0d727930 R08: 00007ffd0d727930 R09: 00007ffd0d727930
[   40.177826] R10: 00007ffd0d727930 R11: 0000000000000213 R12: 0000000000401180
[   40.178349] R13: 00007ffd0d727a50 R14: 0000000000000000 R15: 0000000000000000
[   40.178881]  </TASK>
[   40.179048] irq event stamp: 0
[   40.179275] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   40.179720] hardirqs last disabled at (0): [<ffffffff810fff0c>] copy_process+0x11cc/0x2b10
[   40.180312] softirqs last  enabled at (0): [<ffffffff810fff10>] copy_process+0x11d0/0x2b10
[   40.180914] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   40.181383] ---[ end trace 0000000000000000 ]---
[   40.181820] ------------[ cut here ]------------
[   40.182162] WARNING: CPU: 0 PID: 750 at drivers/iommu/iommufd/pages.c:886 update_unpinned+0x75/0x80
[   40.182823] Modules linked in:
[   40.183060] CPU: 0 PID: 750 Comm: repro Tainted: G    B   W          6.1.0-a0a6c76cf2a5+ #1
[   40.183664] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   40.184462] RIP: 0010:update_unpinned+0x75/0x80
[   40.184816] Code: ac 2b ff 48 89 de 31 c9 31 d2 4c 29 e6 4c 89 ef e8 70 fb ff ff e8 bb ac 2b ff 5b 41 5c 41 5d 5d c3 cc cc cc cc e8 ab ac 2b ff <0f> 0b eb e7 0f 1f 80 00 00 00 00 0f 1f 44 00 00 55 48 89 e5 41 57
[   40.186103] RSP: 0018:ffffc9000149bab8 EFLAGS: 00010246
[   40.186491] RAX: 0000000000000000 RBX: 0000000000000800 RCX: ffffffff81fdfdcf
[   40.187011] RDX: 0000000000000000 RSI: ffff8880135d8000 RDI: 0000000000000002
[   40.187523] RBP: ffffc9000149bad0 R08: 0000000000000000 R09: ffff88807dc3b920
[   40.188034] R10: 000000000000047f R11: 0000000000000009 R12: fffffffffffffffc
[   40.188542] R13: ffff888009f84c00 R14: 00000000000007ff R15: 0000000000000800
[   40.189056] FS:  00007f3777af9740(0000) GS:ffff88807dc00000(0000) knlGS:0000000000000000
[   40.189631] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   40.190051] CR2: 00007f3777c1e580 CR3: 000000000d53c006 CR4: 0000000000770ef0
[   40.190576] PKRU: 55555554
[   40.190778] Call Trace:
[   40.190967]  <TASK>
[   40.191136]  __iopt_area_unfill_domain+0x4e1/0x560
[   40.191508]  ? rcu_read_lock_sched_held+0x29/0x80
[   40.191864]  ? lock_acquire+0x1a1/0x2f0
[   40.192158]  ? rcu_read_lock_held_common+0x12/0x50
[   40.192523]  ? rcu_read_lock_sched_held+0x29/0x80
[   40.192901]  ? __mutex_lock+0x13a/0xf30
[   40.193200]  ? write_comp_data+0x2f/0x90
[   40.193497]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   40.193852]  iopt_area_unfill_domain+0x32/0x40
[   40.194184]  iopt_table_remove_domain+0x23f/0x4c0
[   40.194543]  iommufd_device_selftest_detach+0x3a/0x90
[   40.194936]  iommufd_selftest_destroy+0x55/0x70
[   40.195277]  iommufd_object_destroy_user+0xce/0x130
[   40.195628]  iommufd_destroy+0xa2/0xc0
[   40.195915]  iommufd_fops_ioctl+0x1ef/0x310
[   40.196229]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   40.196578]  ? write_comp_data+0x2f/0x90
[   40.196887]  __x64_sys_ioctl+0x10e/0x160
[   40.197190]  ? iommufd_get_object.part.6+0x1c0/0x1c0
[   40.197560]  do_syscall_64+0x3b/0x90
[   40.197833]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   40.198206] RIP: 0033:0x7f3777c1e59d
[   40.198481] Code: 00 c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d d3 08 0d 00 f7 d8 64 89 01 48
[   40.199787] RSP: 002b:00007ffd0d727918 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   40.200320] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f3777c1e59d
[   40.200838] RDX: 0000000020000140 RSI: 0000000000003b80 RDI: 0000000000000003
[   40.201345] RBP: 00007ffd0d727930 R08: 00007ffd0d727930 R09: 00007ffd0d727930
[   40.201849] R10: 00007ffd0d727930 R11: 0000000000000213 R12: 0000000000401180
[   40.202353] R13: 00007ffd0d727a50 R14: 0000000000000000 R15: 0000000000000000
[   40.202875]  </TASK>
[   40.203042] irq event stamp: 0
[   40.203269] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   40.203717] hardirqs last disabled at (0): [<ffffffff810fff0c>] copy_process+0x11cc/0x2b10
[   40.204309] softirqs last  enabled at (0): [<ffffffff810fff10>] copy_process+0x11d0/0x2b10
[   40.204913] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   40.205362] ---[ end trace 0000000000000000 ]---
[   40.208173] ------------[ cut here ]------------
[   40.208526] WARNING: CPU: 0 PID: 750 at drivers/iommu/iommufd/pages.c:178 batch_unpin.isra.23+0x151/0x1a0
[   40.209252] Modules linked in:
[   40.209484] CPU: 0 PID: 750 Comm: repro Tainted: G    B   W          6.1.0-a0a6c76cf2a5+ #1
[   40.210084] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   40.210927] RIP: 0010:batch_unpin.isra.23+0x151/0x1a0
[   40.211313] Code: e8 c4 be 2b ff 48 8b 45 d0 48 85 c0 75 17 e8 26 bd 2b ff 48 8b 7d c8 48 89 de e8 fa bd 2b ff 48 39 5d c8 73 07 e8 0f bd 2b ff <0f> 0b e8 08 bd 2b ff 4d 29 e5 31 ff 41 83 c6 01 4c 89 ee 31 db e8
[   40.212621] RSP: 0018:ffffc9000149b9d8 EFLAGS: 00010246
[   40.213019] RAX: 0000000000000000 RBX: fffffffffffffffb RCX: ffffffff81fdeda6
[   40.213531] RDX: 0000000000000000 RSI: ffff8880135d8000 RDI: 0000000000000002
[   40.214050] RBP: ffffc9000149ba20 R08: 0000000000000000 R09: ffff88807dc3b890
[   40.214564] R10: 0000000000000c77 R11: 0000000000000000 R12: 0000000000000001
[   40.215079] R13: 0000000000000001 R14: 0000000000000000 R15: ffff888009f84c00
[   40.215599] FS:  0000000000000000(0000) GS:ffff88807dc00000(0000) knlGS:0000000000000000
[   40.216173] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   40.216586] CR2: 00007f3777cf0500 CR3: 0000000003c12001 CR4: 0000000000770ef0
[   40.217111] PKRU: 55555554
[   40.217315] Call Trace:
[   40.217501]  <TASK>
[   40.217671]  iopt_pages_unfill_xarray+0x39f/0x5c0
[   40.218029]  ? rcu_read_lock_sched_held+0x29/0x80
[   40.218395]  ? rcu_read_lock_held_common+0x12/0x50
[   40.218760]  ? write_comp_data+0x2f/0x90
[   40.219058]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   40.219408]  ? write_comp_data+0x2f/0x90
[   40.219718]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   40.220077]  ? interval_tree_remove+0x291/0x4e0
[   40.220418]  ? write_comp_data+0x2f/0x90
[   40.220733]  iopt_area_remove_access+0x108/0x120
[   40.221085]  iommufd_access_unpin_pages+0x177/0x210
[   40.221458]  iommufd_test_access_unmap+0xe0/0x130
[   40.221814]  ? iommufd_test_access_unmap+0x130/0x130
[   40.222185]  iommufd_test_staccess_release+0x39/0x60
[   40.222559]  __fput+0x11f/0x450
[   40.222809]  ____fput+0x1e/0x30
[   40.223057]  task_work_run+0xb6/0x120
[   40.223354]  do_exit+0x521/0x1340
[   40.223606]  ? lock_release+0x202/0x2c0
[   40.223893]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   40.224244]  ? trace_hardirqs_on+0x3f/0x100
[   40.224565]  do_group_exit+0x5e/0xf0
[   40.224851]  __x64_sys_exit_group+0x25/0x30
[   40.225164]  do_syscall_64+0x3b/0x90
[   40.225438]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   40.225810] RIP: 0033:0x7f3777be6cf6
[   40.226078] Code: Unable to access opcode bytes at 0x7f3777be6ccc.
[   40.226530] RSP: 002b:00007ffd0d7278d8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
[   40.227070] RAX: ffffffffffffffda RBX: 00007f3777cf1490 RCX: 00007f3777be6cf6
[   40.227578] RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
[   40.228081] RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffff80
[   40.228581] R10: 0000000000000004 R11: 0000000000000246 R12: 00007f3777cf1490
[   40.229099] R13: 0000000000000001 R14: 00007f3777cf4e88 R15: 0000000000000000
[   40.229613]  </TASK>
[   40.229784] irq event stamp: 0
[   40.230014] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   40.230462] hardirqs last disabled at (0): [<ffffffff810fff0c>] copy_process+0x11cc/0x2b10
[   40.231058] softirqs last  enabled at (0): [<ffffffff810fff10>] copy_process+0x11d0/0x2b10
[   40.231668] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   40.232119] ---[ end trace 0000000000000000 ]---
[   40.232544] ------------[ cut here ]------------
[   40.232892] WARNING: CPU: 0 PID: 750 at drivers/iommu/iommufd/pages.c:886 update_unpinned+0x75/0x80
[   40.233540] Modules linked in:
[   40.233770] CPU: 0 PID: 750 Comm: repro Tainted: G    B   W          6.1.0-a0a6c76cf2a5+ #1
[   40.234361] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   40.235168] RIP: 0010:update_unpinned+0x75/0x80
[   40.235507] Code: ac 2b ff 48 89 de 31 c9 31 d2 4c 29 e6 4c 89 ef e8 70 fb ff ff e8 bb ac 2b ff 5b 41 5c 41 5d 5d c3 cc cc cc cc e8 ab ac 2b ff <0f> 0b eb e7 0f 1f 80 00 00 00 00 0f 1f 44 00 00 55 48 89 e5 41 57
[   40.236850] RSP: 0018:ffffc9000149ba08 EFLAGS: 00010246
[   40.237227] RAX: 0000000000000000 RBX: 0000000000000800 RCX: ffffffff81fdfdcf
[   40.237732] RDX: 0000000000000000 RSI: ffff8880135d8000 RDI: 0000000000000002
[   40.238269] RBP: ffffc9000149ba20 R08: 0000000000000000 R09: ffff88807dc3b890
[   40.238787] R10: 0000000000000c77 R11: 0000000000000000 R12: fffffffffffffffb
[   40.239302] R13: ffff888009f84c00 R14: 0000000000000002 R15: 0000000000000002
[   40.239805] FS:  0000000000000000(0000) GS:ffff88807dc00000(0000) knlGS:0000000000000000
[   40.240372] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   40.240807] CR2: 00007f3777cf0500 CR3: 0000000003c12001 CR4: 0000000000770ef0
[   40.241315] PKRU: 55555554
[   40.241516] Call Trace:
[   40.241701]  <TASK>
[   40.241877]  iopt_pages_unfill_xarray+0x522/0x5c0
[   40.242236]  ? rcu_read_lock_sched_held+0x29/0x80
[   40.242605]  ? rcu_read_lock_held_common+0x12/0x50
[   40.242961]  ? write_comp_data+0x2f/0x90
[   40.243253]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   40.243600]  ? write_comp_data+0x2f/0x90
[   40.243899]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   40.244248]  ? interval_tree_remove+0x291/0x4e0
[   40.244588]  ? write_comp_data+0x2f/0x90
[   40.244899]  iopt_area_remove_access+0x108/0x120
[   40.245266]  iommufd_access_unpin_pages+0x177/0x210
[   40.245648]  iommufd_test_access_unmap+0xe0/0x130
[   40.246012]  ? iommufd_test_access_unmap+0x130/0x130
[   40.246385]  iommufd_test_staccess_release+0x39/0x60
[   40.246759]  __fput+0x11f/0x450
[   40.247010]  ____fput+0x1e/0x30
[   40.247277]  task_work_run+0xb6/0x120
[   40.247566]  do_exit+0x521/0x1340
[   40.247839]  ? lock_release+0x202/0x2c0
[   40.248146]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   40.248510]  ? trace_hardirqs_on+0x3f/0x100
[   40.248861]  do_group_exit+0x5e/0xf0
[   40.249293]  __x64_sys_exit_group+0x25/0x30
[   40.249795]  do_syscall_64+0x3b/0x90
[   40.250143]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   40.250712] RIP: 0033:0x7f3777be6cf6
[   40.250982] Code: Unable to access opcode bytes at 0x7f3777be6ccc.
[   40.251438] RSP: 002b:00007ffd0d7278d8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
[   40.251978] RAX: ffffffffffffffda RBX: 00007f3777cf1490 RCX: 00007f3777be6cf6
[   40.252509] RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
[   40.253064] RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffff80
[   40.253830] R10: 0000000000000004 R11: 0000000000000246 R12: 00007f3777cf1490
[   40.254343] R13: 0000000000000001 R14: 00007f3777cf4e88 R15: 0000000000000000
[   40.254880]  </TASK>
[   40.255053] irq event stamp: 0
[   40.255277] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   40.255737] hardirqs last disabled at (0): [<ffffffff810fff0c>] copy_process+0x11cc/0x2b10
[   40.256334] softirqs last  enabled at (0): [<ffffffff810fff10>] copy_process+0x11d0/0x2b10
[   40.256966] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   40.257683] ---[ end trace 0000000000000000 ]---
[   40.258203] ------------[ cut here ]------------
[   40.258555] WARNING: CPU: 0 PID: 750 at drivers/iommu/iommufd/pages.c:1181 iopt_release_pages+0x159/0x190
[   40.259257] Modules linked in:
[   40.259495] CPU: 0 PID: 750 Comm: repro Tainted: G    B   W          6.1.0-a0a6c76cf2a5+ #1
[   40.260110] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   40.260978] RIP: 0010:iopt_release_pages+0x159/0x190
[   40.261556] Code: b5 11 ff eb cb e8 87 90 2b ff be 03 00 00 00 4c 89 f7 e8 6a 8b ce ff eb b7 e8 73 90 2b ff 0f 0b e9 ed fe ff ff e8 67 90 2b ff <0f> 0b e9 00 ff ff ff e8 5b 90 2b ff 0f 0b e9 07 ff ff ff e8 4f 90
[   40.262887] RSP: 0018:ffffc9000149bc88 EFLAGS: 00010246
[   40.263281] RAX: 0000000000000000 RBX: ffff888009f84c00 RCX: ffffffff81fe1957
[   40.263789] RDX: 0000000000000000 RSI: ffff8880135d8000 RDI: 0000000000000002
[   40.264303] RBP: ffffc9000149bca8 R08: 0000000000000000 R09: 0000000000000000
[   40.264901] R10: ffffc9000149bc58 R11: 0000000000000000 R12: fffffffffffffffb
[   40.265627] R13: 0000000001000000 R14: 00000000017fffff R15: 0000000000000000
[   40.266143] FS:  0000000000000000(0000) GS:ffff88807dc00000(0000) knlGS:0000000000000000
[   40.266731] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   40.267152] CR2: 00007f3777cf0500 CR3: 0000000003c12001 CR4: 0000000000770ef0
[   40.267683] PKRU: 55555554
[   40.267891] Call Trace:
[   40.268077]  <TASK>
[   40.268251]  iopt_unmap_iova_range+0x1ef/0x2e0
[   40.268596]  iopt_unmap_all+0x2f/0x60
[   40.268912]  iommufd_ioas_destroy+0x2c/0x70
[   40.269407]  iommufd_fops_release+0xd4/0x170
[   40.269931]  ? iommufd_ctx_get+0x30/0x30
[   40.270229]  __fput+0x11f/0x450
[   40.270504]  ____fput+0x1e/0x30
[   40.270747]  task_work_run+0xb6/0x120
[   40.271037]  do_exit+0x521/0x1340
[   40.271295]  ? lock_release+0x202/0x2c0
[   40.271601]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   40.271959]  ? trace_hardirqs_on+0x3f/0x100
[   40.272285]  do_group_exit+0x5e/0xf0
[   40.272574]  __x64_sys_exit_group+0x25/0x30
[   40.272918]  do_syscall_64+0x3b/0x90
[   40.273361]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   40.273949] RIP: 0033:0x7f3777be6cf6
[   40.274292] Code: Unable to access opcode bytes at 0x7f3777be6ccc.
[   40.274754] RSP: 002b:00007ffd0d7278d8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
[   40.275305] RAX: ffffffffffffffda RBX: 00007f3777cf1490 RCX: 00007f3777be6cf6
[   40.275822] RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
[   40.276338] RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffff80
[   40.276888] R10: 0000000000000004 R11: 0000000000000246 R12: 00007f3777cf1490
[   40.277610] R13: 0000000000000001 R14: 00007f3777cf4e88 R15: 0000000000000000
[   40.278134]  </TASK>
[   40.278303] irq event stamp: 0
[   40.278543] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   40.279010] hardirqs last disabled at (0): [<ffffffff810fff0c>] copy_process+0x11cc/0x2b10
[   40.279603] softirqs last  enabled at (0): [<ffffffff810fff10>] copy_process+0x11d0/0x2b10
[   40.280208] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   40.280674] ---[ end trace 0000000000000000 ]---
[   40.358225] ------------[ cut here ]------------
[   40.358612] WARNING: CPU: 0 PID: 754 at drivers/iommu/iommufd/pages.c:294 __iopt_area_unfill_domain+0x152/0x560
[   40.359348] Modules linked in:
[   40.359596] CPU: 0 PID: 754 Comm: repro Tainted: G    B   W          6.1.0-a0a6c76cf2a5+ #1
[   40.360194] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   40.361038] RIP: 0010:__iopt_area_unfill_domain+0x152/0x560
[   40.361663] Code: a1 2b ff 44 8b 64 24 54 48 8b 44 24 48 31 ff 44 89 e6 48 89 44 24 38 e8 6c a2 2b ff 45 85 e4 0f 85 eb 01 00 00 e8 ee a0 2b ff <0f> 0b e8 e7 a0 2b ff 48 8b 44 24 38 89 5c 24 58 89 18 8b 44 24 54
[   40.363872] RSP: 0018:ffffc900014b3ae0 EFLAGS: 00010246
[   40.364497] RAX: 0000000000000000 RBX: 00000000ffffffff RCX: ffffffff81fe0bd5
[   40.365154] RDX: 0000000000000000 RSI: ffff8880135da980 RDI: 0000000000000002
[   40.365810] RBP: ffffc900014b3d10 R08: 000000000003b5c5 R09: 0000000000000003
[   40.366321] R10: 000000000003b5a0 R11: 0000000000000024 R12: 0000000000000001
[   40.366857] R13: 0000000000000801 R14: 00000000000007ff R15: 0000000000000800
[   40.367372] FS:  00007f3777af9740(0000) GS:ffff88807dc00000(0000) knlGS:0000000000000000
[   40.367951] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   40.368372] CR2: 00007f3777c1e580 CR3: 0000000009d6e005 CR4: 0000000000770ef0
[   40.368911] PKRU: 55555554
[   40.369232] Call Trace:
[   40.369521]  <TASK>
[   40.369796]  ? rcu_read_lock_sched_held+0x29/0x80
[   40.370172]  ? lock_acquire+0x1a1/0x2f0
[   40.370465]  ? rcu_read_lock_held_common+0x12/0x50
[   40.370835]  ? rcu_read_lock_sched_held+0x29/0x80
[   40.371208]  ? __mutex_lock+0x13a/0xf30
[   40.371503]  ? write_comp_data+0x2f/0x90
[   40.371802]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   40.372162]  iopt_area_unfill_domain+0x32/0x40
[   40.372503]  iopt_table_remove_domain+0x23f/0x4c0
[   40.372886]  iommufd_device_selftest_detach+0x3a/0x90
[   40.373499]  iommufd_selftest_destroy+0x55/0x70
[   40.373993]  iommufd_object_destroy_user+0xce/0x130
[   40.374372]  iommufd_destroy+0xa2/0xc0
[   40.374674]  iommufd_fops_ioctl+0x1ef/0x310
[   40.374991]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   40.375353]  ? write_comp_data+0x2f/0x90
[   40.375662]  __x64_sys_ioctl+0x10e/0x160
[   40.375980]  ? iommufd_get_object.part.6+0x1c0/0x1c0
[   40.376346]  do_syscall_64+0x3b/0x90
[   40.376630]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   40.377033] RIP: 0033:0x7f3777c1e59d
[   40.377468] Code: 00 c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d d3 08 0d 00 f7 d8 64 89 01 48
[   40.378998] RSP: 002b:00007ffd0d727918 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   40.379549] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f3777c1e59d
[   40.380079] RDX: 0000000020000140 RSI: 0000000000003b80 RDI: 0000000000000003
[   40.380596] RBP: 00007ffd0d727930 R08: 00007ffd0d727930 R09: 00007ffd0d727930
[   40.381149] R10: 00007ffd0d727930 R11: 0000000000000213 R12: 0000000000401180
[   40.381658] R13: 00007ffd0d727a50 R14: 0000000000000000 R15: 0000000000000000
[   40.382182]  </TASK>
[   40.382351] irq event stamp: 0
[   40.382594] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   40.383053] hardirqs last disabled at (0): [<ffffffff810fff0c>] copy_process+0x11cc/0x2b10
[   40.383665] softirqs last  enabled at (0): [<ffffffff810fff10>] copy_process+0x11d0/0x2b10
[   40.384273] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   40.384742] ---[ end trace 0000000000000000 ]---
[   40.385184] ------------[ cut here ]------------
[   40.385519] WARNING: CPU: 0 PID: 754 at drivers/iommu/iommufd/pages.c:1290 __iopt_area_unfill_domain+0x54f/0x560
[   40.386244] Modules linked in:
[   40.386482] CPU: 0 PID: 754 Comm: repro Tainted: G    B   W          6.1.0-a0a6c76cf2a5+ #1
[   40.387081] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   40.387878] RIP: 0010:__iopt_area_unfill_domain+0x54f/0x560
[   40.388286] Code: e8 86 9e 2b ff 85 db 0f 85 35 fb ff ff e8 09 9d 2b ff 0f 0b e9 29 fb ff ff e8 fd 9c 2b ff 0f 0b e9 69 fe ff ff e8 f1 9c 2b ff <0f> 0b e9 58 ff ff ff e8 65 2d dc 00 0f 1f 44 00 00 0f 1f 44 00 00
[   40.389600] RSP: 0018:ffffc900014b3ae0 EFLAGS: 00010246
[   40.389982] RAX: 0000000000000000 RBX: 00000000ffffffff RCX: ffffffff81fe0d26
[   40.390503] RDX: 0000000000000000 RSI: ffff8880135da980 RDI: 0000000000000002
[   40.391020] RBP: ffffc900014b3d10 R08: 000000000003b5c5 R09: 0000000000000003
[   40.391535] R10: 000000000003b5a0 R11: 0000000000000024 R12: 00000000000007ff
[   40.392041] R13: 0000000000000801 R14: 00000000000007ff R15: 0000000000000800
[   40.392555] FS:  00007f3777af9740(0000) GS:ffff88807dc00000(0000) knlGS:0000000000000000
[   40.393143] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   40.393582] CR2: 00007f3777c1e580 CR3: 0000000009d6e005 CR4: 0000000000770ef0
[   40.394102] PKRU: 55555554
[   40.394311] Call Trace:
[   40.394503]  <TASK>
[   40.394676]  ? rcu_read_lock_sched_held+0x29/0x80
[   40.395035]  ? lock_acquire+0x1a1/0x2f0
[   40.395325]  ? rcu_read_lock_held_common+0x12/0x50
[   40.395682]  ? rcu_read_lock_sched_held+0x29/0x80
[   40.396032]  ? __mutex_lock+0x13a/0xf30
[   40.396324]  ? write_comp_data+0x2f/0x90
[   40.396620]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   40.396991]  iopt_area_unfill_domain+0x32/0x40
[   40.397329]  iopt_table_remove_domain+0x23f/0x4c0
[   40.397682]  iommufd_device_selftest_detach+0x3a/0x90
[   40.398064]  iommufd_selftest_destroy+0x55/0x70
[   40.398402]  iommufd_object_destroy_user+0xce/0x130
[   40.398788]  iommufd_destroy+0xa2/0xc0
[   40.399069]  iommufd_fops_ioctl+0x1ef/0x310
[   40.399375]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   40.399724]  ? write_comp_data+0x2f/0x90
[   40.400019]  __x64_sys_ioctl+0x10e/0x160
[   40.400319]  ? iommufd_get_object.part.6+0x1c0/0x1c0
[   40.400709]  do_syscall_64+0x3b/0x90
[   40.401001]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   40.401431] RIP: 0033:0x7f3777c1e59d
[   40.401701] Code: 00 c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d d3 08 0d 00 f7 d8 64 89 01 48
[   40.403002] RSP: 002b:00007ffd0d727918 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   40.403537] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f3777c1e59d
[   40.404036] RDX: 0000000020000140 RSI: 0000000000003b80 RDI: 0000000000000003
[   40.404559] RBP: 00007ffd0d727930 R08: 00007ffd0d727930 R09: 00007ffd0d727930
[   40.405080] R10: 00007ffd0d727930 R11: 0000000000000213 R12: 0000000000401180
[   40.405584] R13: 00007ffd0d727a50 R14: 0000000000000000 R15: 0000000000000000
[   40.406108]  </TASK>
[   40.406274] irq event stamp: 0
[   40.406510] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   40.406970] hardirqs last disabled at (0): [<ffffffff810fff0c>] copy_process+0x11cc/0x2b10
[   40.407581] softirqs last  enabled at (0): [<ffffffff810fff10>] copy_process+0x11d0/0x2b10
[   40.408168] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   40.408613] ---[ end trace 0000000000000000 ]---
[   40.411732] ------------[ cut here ]------------
[   40.412085] WARNING: CPU: 0 PID: 754 at drivers/iommu/iommufd/pages.c:178 batch_unpin.isra.23+0x151/0x1a0
[   40.412924] Modules linked in:
[   40.413161] CPU: 0 PID: 754 Comm: repro Tainted: G    B   W          6.1.0-a0a6c76cf2a5+ #1
[   40.413849] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   40.414768] RIP: 0010:batch_unpin.isra.23+0x151/0x1a0
[   40.415271] Code: e8 c4 be 2b ff 48 8b 45 d0 48 85 c0 75 17 e8 26 bd 2b ff 48 8b 7d c8 48 89 de e8 fa bd 2b ff 48 39 5d c8 73 07 e8 0f bd 2b ff <0f> 0b e8 08 bd 2b ff 4d 29 e5 31 ff 41 83 c6 01 4c 89 ee 31 db e8
[   40.416702] RSP: 0018:ffffc900014b39d8 EFLAGS: 00010246
[   40.417096] RAX: 0000000000000000 RBX: ffffffffffffffff RCX: ffffffff81fded8c
[   40.417660] RDX: 0000000000000000 RSI: ffff8880135da980 RDI: 0000000000000002
[   40.418226] RBP: ffffc900014b3a20 R08: 0000000000000000 R09: ffff88807dc3b890
[   40.418740] R10: 0000000000000cd8 R11: 0000000000000000 R12: 0000000000000001
[   40.419238] R13: 0000000000000001 R14: 0000000000000000 R15: ffff888009f84c00
[   40.419769] FS:  0000000000000000(0000) GS:ffff88807dc00000(0000) knlGS:0000000000000000
[   40.420344] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   40.420768] CR2: 00007f3777cf0500 CR3: 0000000003c12001 CR4: 0000000000770ef0
[   40.421289] PKRU: 55555554
[   40.421493] Call Trace:
[   40.421678]  <TASK>
[   40.421848]  iopt_pages_unfill_xarray+0x39f/0x5c0
[   40.422204]  ? rcu_read_lock_sched_held+0x29/0x80
[   40.422579]  ? rcu_read_lock_held_common+0x12/0x50
[   40.422937]  ? write_comp_data+0x2f/0x90
[   40.423237]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   40.423596]  ? write_comp_data+0x2f/0x90
[   40.423893]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   40.424291]  ? interval_tree_remove+0x291/0x4e0
[   40.424669]  ? write_comp_data+0x2f/0x90
[   40.424969]  iopt_area_remove_access+0x108/0x120
[   40.425330]  iommufd_access_unpin_pages+0x177/0x210
[   40.425714]  iommufd_test_access_unmap+0xe0/0x130
[   40.426071]  ? iommufd_test_access_unmap+0x130/0x130
[   40.426468]  iommufd_test_staccess_release+0x39/0x60
[   40.426855]  __fput+0x11f/0x450
[   40.427104]  ____fput+0x1e/0x30
[   40.427347]  task_work_run+0xb6/0x120
[   40.427633]  do_exit+0x521/0x1340
[   40.427893]  ? lock_release+0x202/0x2c0
[   40.428185]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   40.428535]  ? trace_hardirqs_on+0x3f/0x100
[   40.428892]  do_group_exit+0x5e/0xf0
[   40.429188]  __x64_sys_exit_group+0x25/0x30
[   40.429503]  do_syscall_64+0x3b/0x90
[   40.429778]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   40.430160] RIP: 0033:0x7f3777be6cf6
[   40.430435] Code: Unable to access opcode bytes at 0x7f3777be6ccc.
[   40.430884] RSP: 002b:00007ffd0d7278d8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
[   40.431424] RAX: ffffffffffffffda RBX: 00007f3777cf1490 RCX: 00007f3777be6cf6
[   40.431944] RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
[   40.432460] RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffff80
[   40.432982] R10: 0000000000000004 R11: 0000000000000246 R12: 00007f3777cf1490
[   40.433493] R13: 0000000000000001 R14: 00007f3777cf4e88 R15: 0000000000000000
[   40.434020]  </TASK>
[   40.434191] irq event stamp: 0
[   40.434420] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   40.434873] hardirqs last disabled at (0): [<ffffffff810fff0c>] copy_process+0x11cc/0x2b10
[   40.435469] softirqs last  enabled at (0): [<ffffffff810fff10>] copy_process+0x11d0/0x2b10
[   40.436056] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   40.436506] ---[ end trace 0000000000000000 ]---
[   40.436952] ------------[ cut here ]------------
[   40.437288] WARNING: CPU: 0 PID: 754 at drivers/iommu/iommufd/pages.c:886 update_unpinned+0x75/0x80
[   40.437945] Modules linked in:
[   40.438180] CPU: 0 PID: 754 Comm: repro Tainted: G    B   W          6.1.0-a0a6c76cf2a5+ #1
[   40.438814] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   40.439610] RIP: 0010:update_unpinned+0x75/0x80
[   40.439958] Code: ac 2b ff 48 89 de 31 c9 31 d2 4c 29 e6 4c 89 ef e8 70 fb ff ff e8 bb ac 2b ff 5b 41 5c 41 5d 5d c3 cc cc cc cc e8 ab ac 2b ff <0f> 0b eb e7 0f 1f 80 00 00 00 00 0f 1f 44 00 00 55 48 89 e5 41 57
[   40.441275] RSP: 0018:ffffc900014b3a08 EFLAGS: 00010246
[   40.441654] RAX: 0000000000000000 RBX: 0000000000000000 RCX: ffffffff81fdfdcf
[   40.442161] RDX: 0000000000000000 RSI: ffff8880135da980 RDI: 0000000000000002
[   40.442678] RBP: ffffc900014b3a20 R08: 0000000000000000 R09: ffff88807dc3b890
[   40.443191] R10: 0000000000000cd8 R11: 0000000000000000 R12: ffffffffffffffff
[   40.443696] R13: ffff888009f84c00 R14: 0000000000000002 R15: 0000000000000002
[   40.444215] FS:  0000000000000000(0000) GS:ffff88807dc00000(0000) knlGS:0000000000000000
[   40.444805] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   40.445218] CR2: 00007f3777cf0500 CR3: 0000000003c12001 CR4: 0000000000770ef0
[   40.445730] PKRU: 55555554
[   40.445932] Call Trace:
[   40.446117]  <TASK>
[   40.446279]  iopt_pages_unfill_xarray+0x522/0x5c0
[   40.446643]  ? rcu_read_lock_sched_held+0x29/0x80
[   40.447018]  ? rcu_read_lock_held_common+0x12/0x50
[   40.447381]  ? write_comp_data+0x2f/0x90
[   40.447678]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   40.448033]  ? write_comp_data+0x2f/0x90
[   40.448331]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   40.448700]  ? interval_tree_remove+0x291/0x4e0
[   40.449050]  ? write_comp_data+0x2f/0x90
[   40.449406]  iopt_area_remove_access+0x108/0x120
[   40.449766]  iommufd_access_unpin_pages+0x177/0x210
[   40.450145]  iommufd_test_access_unmap+0xe0/0x130
[   40.450516]  ? iommufd_test_access_unmap+0x130/0x130
[   40.450885]  iommufd_test_staccess_release+0x39/0x60
[   40.451266]  __fput+0x11f/0x450
[   40.451523]  ____fput+0x1e/0x30
[   40.451771]  task_work_run+0xb6/0x120
[   40.452060]  do_exit+0x521/0x1340
[   40.452317]  ? lock_release+0x202/0x2c0
[   40.452612]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   40.452988]  ? trace_hardirqs_on+0x3f/0x100
[   40.453347]  do_group_exit+0x5e/0xf0
[   40.453711]  __x64_sys_exit_group+0x25/0x30
[   40.454126]  do_syscall_64+0x3b/0x90
[   40.454494]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   40.454999] RIP: 0033:0x7f3777be6cf6
[   40.455361] Code: Unable to access opcode bytes at 0x7f3777be6ccc.
[   40.455954] RSP: 002b:00007ffd0d7278d8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
[   40.456704] RAX: ffffffffffffffda RBX: 00007f3777cf1490 RCX: 00007f3777be6cf6
[   40.457399] RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
[   40.458082] RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffff80
[   40.458778] R10: 0000000000000004 R11: 0000000000000246 R12: 00007f3777cf1490
[   40.459463] R13: 0000000000000001 R14: 00007f3777cf4e88 R15: 0000000000000000
[   40.460065]  </TASK>
[   40.460237] irq event stamp: 0
[   40.460463] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   40.460922] hardirqs last disabled at (0): [<ffffffff810fff0c>] copy_process+0x11cc/0x2b10
[   40.461524] softirqs last  enabled at (0): [<ffffffff810fff10>] copy_process+0x11d0/0x2b10
[   40.462123] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   40.462611] ---[ end trace 0000000000000000 ]---
[   40.463374] ------------[ cut here ]------------
[   40.463713] WARNING: CPU: 0 PID: 754 at drivers/iommu/iommufd/pages.c:1181 iopt_release_pages+0x159/0x190
[   40.464646] Modules linked in:
[   40.464919] CPU: 0 PID: 754 Comm: repro Tainted: G    B   W          6.1.0-a0a6c76cf2a5+ #1
[   40.465702] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   40.466518] RIP: 0010:iopt_release_pages+0x159/0x190
[   40.466960] Code: b5 11 ff eb cb e8 87 90 2b ff be 03 00 00 00 4c 89 f7 e8 6a 8b ce ff eb b7 e8 73 90 2b ff 0f 0b e9 ed fe ff ff e8 67 90 2b ff <0f> 0b e9 00 ff ff ff e8 5b 90 2b ff 0f 0b e9 07 ff ff ff e8 4f 90
[   40.468333] RSP: 0018:ffffc900014b3c88 EFLAGS: 00010246
[   40.468736] RAX: 0000000000000000 RBX: ffff888009f84c00 RCX: ffffffff81fe1957
[   40.469245] RDX: 0000000000000000 RSI: ffff8880135da980 RDI: 0000000000000002
[   40.469770] RBP: ffffc900014b3ca8 R08: 0000000000000000 R09: 0000000000000000
[   40.470288] R10: ffffc900014b3c58 R11: 0000000000000000 R12: ffffffffffffffff
[   40.470822] R13: 0000000001000000 R14: 00000000017fffff R15: 0000000000000000
[   40.471350] FS:  0000000000000000(0000) GS:ffff88807dc00000(0000) knlGS:0000000000000000
[   40.471925] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   40.472342] CR2: 00007f3777cf0500 CR3: 0000000003c12001 CR4: 0000000000770ef0
[   40.472875] PKRU: 55555554
[   40.473083] Call Trace:
[   40.473272]  <TASK>
[   40.473442]  iopt_unmap_iova_range+0x1ef/0x2e0
[   40.473788]  iopt_unmap_all+0x2f/0x60
[   40.474070]  iommufd_ioas_destroy+0x2c/0x70
[   40.474396]  iommufd_fops_release+0xd4/0x170
[   40.474738]  ? iommufd_ctx_get+0x30/0x30
[   40.475041]  __fput+0x11f/0x450
[   40.475298]  ____fput+0x1e/0x30
[   40.475546]  task_work_run+0xb6/0x120
[   40.475839]  do_exit+0x521/0x1340
[   40.476096]  ? lock_release+0x202/0x2c0
[   40.476391]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   40.476763]  ? trace_hardirqs_on+0x3f/0x100
[   40.477089]  do_group_exit+0x5e/0xf0
[   40.477366]  __x64_sys_exit_group+0x25/0x30
[   40.477684]  do_syscall_64+0x3b/0x90
[   40.477964]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   40.478346] RIP: 0033:0x7f3777be6cf6
[   40.478628] Code: Unable to access opcode bytes at 0x7f3777be6ccc.
[   40.479074] RSP: 002b:00007ffd0d7278d8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
[   40.479617] RAX: ffffffffffffffda RBX: 00007f3777cf1490 RCX: 00007f3777be6cf6
[   40.480134] RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
[   40.480677] RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffff80
[   40.481201] R10: 0000000000000004 R11: 0000000000000246 R12: 00007f3777cf1490
[   40.481727] R13: 0000000000000001 R14: 00007f3777cf4e88 R15: 0000000000000000
[   40.482256]  </TASK>
[   40.482428] irq event stamp: 0
[   40.482667] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   40.483125] hardirqs last disabled at (0): [<ffffffff810fff0c>] copy_process+0x11cc/0x2b10
[   40.483733] softirqs last  enabled at (0): [<ffffffff810fff10>] copy_process+0x11d0/0x2b10
[   40.484345] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   40.484819] ---[ end trace 0000000000000000 ]---
[   40.547689] ------------[ cut here ]------------
[   40.548068] WARNING: CPU: 0 PID: 757 at drivers/iommu/iommufd/pages.c:294 __iopt_area_unfill_domain+0x152/0x560
[   40.548844] Modules linked in:
[   40.549088] CPU: 0 PID: 757 Comm: repro Tainted: G    B   W          6.1.0-a0a6c76cf2a5+ #1
[   40.549707] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   40.550550] RIP: 0010:__iopt_area_unfill_domain+0x152/0x560
[   40.550988] Code: a1 2b ff 44 8b 64 24 54 48 8b 44 24 48 31 ff 44 89 e6 48 89 44 24 38 e8 6c a2 2b ff 45 85 e4 0f 85 eb 01 00 00 e8 ee a0 2b ff <0f> 0b e8 e7 a0 2b ff 48 8b 44 24 38 89 5c 24 58 89 18 8b 44 24 54
[   40.552346] RSP: 0018:ffffc900014a3ae0 EFLAGS: 00010246
[   40.552759] RAX: 0000000000000000 RBX: 00000000ffffffff RCX: ffffffff81fe0bd5
[   40.553289] RDX: 0000000000000000 RSI: ffff88800cb4d300 RDI: 0000000000000002
[   40.553830] RBP: ffffc900014a3d10 R08: 000000000003b5c5 R09: 0000000000000010
[   40.554368] R10: 000000000003b5a0 R11: 0000000000000024 R12: 0000000000000001
[   40.554968] R13: 0000000000000801 R14: 00000000000007ff R15: 0000000000000800
[   40.555516] FS:  00007f3777af9740(0000) GS:ffff88807dc00000(0000) knlGS:0000000000000000
[   40.556116] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   40.556600] CR2: 00007f3777c1e580 CR3: 000000001731c004 CR4: 0000000000770ef0
[   40.557391] PKRU: 55555554
[   40.557620] Call Trace:
[   40.557813]  <TASK>
[   40.558011]  ? rcu_read_lock_sched_held+0x29/0x80
[   40.558403]  ? lock_acquire+0x1a1/0x2f0
[   40.558722]  ? rcu_read_lock_held_common+0x12/0x50
[   40.559243]  ? rcu_read_lock_sched_held+0x29/0x80
[   40.559596]  ? __mutex_lock+0x13a/0xf30
[   40.560108]  ? write_comp_data+0x2f/0x90
[   40.560416]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   40.560796]  iopt_area_unfill_domain+0x32/0x40
[   40.561160]  iopt_table_remove_domain+0x23f/0x4c0
[   40.561521]  iommufd_device_selftest_detach+0x3a/0x90
[   40.561959]  iommufd_selftest_destroy+0x55/0x70
[   40.562439]  iommufd_object_destroy_user+0xce/0x130
[   40.562820]  iommufd_destroy+0xa2/0xc0
[   40.563112]  iommufd_fops_ioctl+0x1ef/0x310
[   40.563430]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   40.563784]  ? write_comp_data+0x2f/0x90
[   40.564229]  __x64_sys_ioctl+0x10e/0x160
[   40.564542]  ? iommufd_get_object.part.6+0x1c0/0x1c0
[   40.564936]  do_syscall_64+0x3b/0x90
[   40.565214]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   40.565595] RIP: 0033:0x7f3777c1e59d
[   40.565869] Code: 00 c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d d3 08 0d 00 f7 d8 64 89 01 48
[   40.567315] RSP: 002b:00007ffd0d727918 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   40.567863] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f3777c1e59d
[   40.568580] RDX: 0000000020000140 RSI: 0000000000003b80 RDI: 0000000000000003
[   40.569115] RBP: 00007ffd0d727930 R08: 00007ffd0d727930 R09: 00007ffd0d727930
[   40.569629] R10: 00007ffd0d727930 R11: 0000000000000213 R12: 0000000000401180
[   40.570298] R13: 00007ffd0d727a50 R14: 0000000000000000 R15: 0000000000000000
[   40.570854]  </TASK>
[   40.571053] irq event stamp: 0
[   40.571373] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   40.571826] hardirqs last disabled at (0): [<ffffffff810fff0c>] copy_process+0x11cc/0x2b10
[   40.572432] softirqs last  enabled at (0): [<ffffffff810fff10>] copy_process+0x11d0/0x2b10
[   40.573049] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   40.573508] ---[ end trace 0000000000000000 ]---
[   40.574054] ------------[ cut here ]------------
[   40.574510] WARNING: CPU: 0 PID: 757 at drivers/iommu/iommufd/pages.c:1290 __iopt_area_unfill_domain+0x54f/0x560
[   40.575482] Modules linked in:
[   40.575794] CPU: 0 PID: 757 Comm: repro Tainted: G    B   W          6.1.0-a0a6c76cf2a5+ #1
[   40.576599] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   40.577702] RIP: 0010:__iopt_area_unfill_domain+0x54f/0x560
[   40.578264] Code: e8 86 9e 2b ff 85 db 0f 85 35 fb ff ff e8 09 9d 2b ff 0f 0b e9 29 fb ff ff e8 fd 9c 2b ff 0f 0b e9 69 fe ff ff e8 f1 9c 2b ff <0f> 0b e9 58 ff ff ff e8 65 2d dc 00 0f 1f 44 00 00 0f 1f 44 00 00
[   40.580027] RSP: 0018:ffffc900014a3ae0 EFLAGS: 00010246
[   40.580456] RAX: 0000000000000000 RBX: 00000000ffffffff RCX: ffffffff81fe0d26
[   40.580984] RDX: 0000000000000000 RSI: ffff88800cb4d300 RDI: 0000000000000002
[   40.581491] RBP: ffffc900014a3d10 R08: 000000000003b5c5 R09: 0000000000000010
[   40.582025] R10: 000000000003b5a0 R11: 0000000000000024 R12: 00000000000007ff
[   40.582522] R13: 0000000000000801 R14: 00000000000007ff R15: 0000000000000800
[   40.583010] FS:  00007f3777af9740(0000) GS:ffff88807dc00000(0000) knlGS:0000000000000000
[   40.583554] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   40.583972] CR2: 00007f3777c1e580 CR3: 000000001731c004 CR4: 0000000000770ef0
[   40.584489] PKRU: 55555554
[   40.584716] Call Trace:
[   40.584911]  <TASK>
[   40.585087]  ? rcu_read_lock_sched_held+0x29/0x80
[   40.585448]  ? lock_acquire+0x1a1/0x2f0
[   40.585754]  ? rcu_read_lock_held_common+0x12/0x50
[   40.586126]  ? rcu_read_lock_sched_held+0x29/0x80
[   40.586493]  ? __mutex_lock+0x13a/0xf30
[   40.586792]  ? write_comp_data+0x2f/0x90
[   40.587092]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   40.587471]  iopt_area_unfill_domain+0x32/0x40
[   40.587808]  iopt_table_remove_domain+0x23f/0x4c0
[   40.588153]  iommufd_device_selftest_detach+0x3a/0x90
[   40.588545]  iommufd_selftest_destroy+0x55/0x70
[   40.588909]  iommufd_object_destroy_user+0xce/0x130
[   40.589277]  iommufd_destroy+0xa2/0xc0
[   40.589567]  iommufd_fops_ioctl+0x1ef/0x310
[   40.589883]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   40.590237]  ? write_comp_data+0x2f/0x90
[   40.590549]  __x64_sys_ioctl+0x10e/0x160
[   40.590851]  ? iommufd_get_object.part.6+0x1c0/0x1c0
[   40.591228]  do_syscall_64+0x3b/0x90
[   40.591515]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   40.591906] RIP: 0033:0x7f3777c1e59d
[   40.592179] Code: 00 c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d d3 08 0d 00 f7 d8 64 89 01 48
[   40.593500] RSP: 002b:00007ffd0d727918 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   40.594068] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f3777c1e59d
[   40.594594] RDX: 0000000020000140 RSI: 0000000000003b80 RDI: 0000000000000003
[   40.595110] RBP: 00007ffd0d727930 R08: 00007ffd0d727930 R09: 00007ffd0d727930
[   40.595635] R10: 00007ffd0d727930 R11: 0000000000000213 R12: 0000000000401180
[   40.596150] R13: 00007ffd0d727a50 R14: 0000000000000000 R15: 0000000000000000
[   40.596735]  </TASK>
[   40.596921] irq event stamp: 0
[   40.597152] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   40.597605] hardirqs last disabled at (0): [<ffffffff810fff0c>] copy_process+0x11cc/0x2b10
[   40.598202] softirqs last  enabled at (0): [<ffffffff810fff10>] copy_process+0x11d0/0x2b10
[   40.598832] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   40.599291] ---[ end trace 0000000000000000 ]---
[   40.602059] ------------[ cut here ]------------
[   40.602419] WARNING: CPU: 0 PID: 757 at drivers/iommu/iommufd/pages.c:178 batch_unpin.isra.23+0x151/0x1a0
[   40.603126] Modules linked in:
[   40.603359] CPU: 0 PID: 757 Comm: repro Tainted: G    B   W          6.1.0-a0a6c76cf2a5+ #1
[   40.603955] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   40.604809] RIP: 0010:batch_unpin.isra.23+0x151/0x1a0
[   40.605196] Code: e8 c4 be 2b ff 48 8b 45 d0 48 85 c0 75 17 e8 26 bd 2b ff 48 8b 7d c8 48 89 de e8 fa bd 2b ff 48 39 5d c8 73 07 e8 0f bd 2b ff <0f> 0b e8 08 bd 2b ff 4d 29 e5 31 ff 41 83 c6 01 4c 89 ee 31 db e8
[   40.606521] RSP: 0018:ffffc900014a39d8 EFLAGS: 00010246
[   40.606909] RAX: 0000000000000000 RBX: ffffffffffffffff RCX: ffffffff81fded8c
[   40.607426] RDX: 0000000000000000 RSI: ffff88800cb4d300 RDI: 0000000000000002
[   40.607939] RBP: ffffc900014a3a20 R08: 0000000000000000 R09: ffff88807dc3b890
[   40.608449] R10: 0000000000000d00 R11: 0000000000000000 R12: 0000000000000001
[   40.608977] R13: 0000000000000001 R14: 0000000000000000 R15: ffff888009f85400
[   40.609494] FS:  0000000000000000(0000) GS:ffff88807dc00000(0000) knlGS:0000000000000000
[   40.610078] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   40.610512] CR2: 00007f3777cf0500 CR3: 0000000003c12002 CR4: 0000000000770ef0
[   40.611033] PKRU: 55555554
[   40.611239] Call Trace:
[   40.611423]  <TASK>
[   40.611592]  iopt_pages_unfill_xarray+0x39f/0x5c0
[   40.611947]  ? rcu_read_lock_sched_held+0x29/0x80
[   40.612316]  ? rcu_read_lock_held_common+0x12/0x50
[   40.612695]  ? write_comp_data+0x2f/0x90
[   40.612990]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   40.613344]  ? write_comp_data+0x2f/0x90
[   40.613647]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   40.614002]  ? interval_tree_remove+0x291/0x4e0
[   40.614353]  ? write_comp_data+0x2f/0x90
[   40.614667]  iopt_area_remove_access+0x108/0x120
[   40.615019]  iommufd_access_unpin_pages+0x177/0x210
[   40.615400]  iommufd_test_access_unmap+0xe0/0x130
[   40.615762]  ? iommufd_test_access_unmap+0x130/0x130
[   40.616153]  iommufd_test_staccess_release+0x39/0x60
[   40.616561]  __fput+0x11f/0x450
[   40.616858]  ____fput+0x1e/0x30
[   40.617107]  task_work_run+0xb6/0x120
[   40.617401]  do_exit+0x521/0x1340
[   40.617655]  ? lock_release+0x202/0x2c0
[   40.617951]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   40.618319]  ? trace_hardirqs_on+0x3f/0x100
[   40.618645]  do_group_exit+0x5e/0xf0
[   40.618996]  __x64_sys_exit_group+0x25/0x30
[   40.619461]  do_syscall_64+0x3b/0x90
[   40.619754]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   40.620237] RIP: 0033:0x7f3777be6cf6
[   40.620518] Code: Unable to access opcode bytes at 0x7f3777be6ccc.
[   40.621144] RSP: 002b:00007ffd0d7278d8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
[   40.621696] RAX: ffffffffffffffda RBX: 00007f3777cf1490 RCX: 00007f3777be6cf6
[   40.622377] RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
[   40.622902] RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffff80
[   40.623538] R10: 0000000000000004 R11: 0000000000000246 R12: 00007f3777cf1490
[   40.624055] R13: 0000000000000001 R14: 00007f3777cf4e88 R15: 0000000000000000
[   40.624573]  </TASK>
[   40.624759] irq event stamp: 0
[   40.624994] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   40.625637] hardirqs last disabled at (0): [<ffffffff810fff0c>] copy_process+0x11cc/0x2b10
[   40.626242] softirqs last  enabled at (0): [<ffffffff810fff10>] copy_process+0x11d0/0x2b10
[   40.626843] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   40.627304] ---[ end trace 0000000000000000 ]---
[   40.627843] ------------[ cut here ]------------
[   40.628184] WARNING: CPU: 0 PID: 757 at drivers/iommu/iommufd/pages.c:886 update_unpinned+0x75/0x80
[   40.628894] Modules linked in:
[   40.629125] CPU: 0 PID: 757 Comm: repro Tainted: G    B   W          6.1.0-a0a6c76cf2a5+ #1
[   40.629846] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   40.630672] RIP: 0010:update_unpinned+0x75/0x80
[   40.631134] Code: ac 2b ff 48 89 de 31 c9 31 d2 4c 29 e6 4c 89 ef e8 70 fb ff ff e8 bb ac 2b ff 5b 41 5c 41 5d 5d c3 cc cc cc cc e8 ab ac 2b ff <0f> 0b eb e7 0f 1f 80 00 00 00 00 0f 1f 44 00 00 55 48 89 e5 41 57
[   40.632601] RSP: 0018:ffffc900014a3a08 EFLAGS: 00010246
[   40.633012] RAX: 0000000000000000 RBX: 0000000000000000 RCX: ffffffff81fdfdcf
[   40.633546] RDX: 0000000000000000 RSI: ffff88800cb4d300 RDI: 0000000000000002
[   40.634160] RBP: ffffc900014a3a20 R08: 0000000000000000 R09: ffff88807dc3b890
[   40.634682] R10: 0000000000000d00 R11: 0000000000000000 R12: ffffffffffffffff
[   40.635383] R13: ffff888009f85400 R14: 0000000000000002 R15: 0000000000000002
[   40.635906] FS:  0000000000000000(0000) GS:ffff88807dc00000(0000) knlGS:0000000000000000
[   40.636582] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   40.637021] CR2: 00007f3777cf0500 CR3: 0000000003c12002 CR4: 0000000000770ef0
[   40.637539] PKRU: 55555554
[   40.637749] Call Trace:
[   40.637941]  <TASK>
[   40.638109]  iopt_pages_unfill_xarray+0x522/0x5c0
[   40.638466]  ? rcu_read_lock_sched_held+0x29/0x80
[   40.638844]  ? rcu_read_lock_held_common+0x12/0x50
[   40.639212]  ? write_comp_data+0x2f/0x90
[   40.639516]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   40.639869]  ? write_comp_data+0x2f/0x90
[   40.640169]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   40.640528]  ? interval_tree_remove+0x291/0x4e0
[   40.640896]  ? write_comp_data+0x2f/0x90
[   40.641211]  iopt_area_remove_access+0x108/0x120
[   40.641568]  iommufd_access_unpin_pages+0x177/0x210
[   40.641948]  iommufd_test_access_unmap+0xe0/0x130
[   40.642309]  ? iommufd_test_access_unmap+0x130/0x130
[   40.642708]  iommufd_test_staccess_release+0x39/0x60
[   40.643086]  __fput+0x11f/0x450
[   40.643339]  ____fput+0x1e/0x30
[   40.643587]  task_work_run+0xb6/0x120
[   40.643876]  do_exit+0x521/0x1340
[   40.644143]  ? lock_release+0x202/0x2c0
[   40.644435]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   40.644805]  ? trace_hardirqs_on+0x3f/0x100
[   40.645133]  do_group_exit+0x5e/0xf0
[   40.645409]  __x64_sys_exit_group+0x25/0x30
[   40.645724]  do_syscall_64+0x3b/0x90
[   40.646003]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   40.646390] RIP: 0033:0x7f3777be6cf6
[   40.646658] Code: Unable to access opcode bytes at 0x7f3777be6ccc.
[   40.647118] RSP: 002b:00007ffd0d7278d8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
[   40.647662] RAX: ffffffffffffffda RBX: 00007f3777cf1490 RCX: 00007f3777be6cf6
[   40.648177] RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
[   40.648707] RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffff80
[   40.649233] R10: 0000000000000004 R11: 0000000000000246 R12: 00007f3777cf1490
[   40.649747] R13: 0000000000000001 R14: 00007f3777cf4e88 R15: 0000000000000000
[   40.650266]  </TASK>
[   40.650438] irq event stamp: 0
[   40.650676] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   40.651125] hardirqs last disabled at (0): [<ffffffff810fff0c>] copy_process+0x11cc/0x2b10
[   40.651714] softirqs last  enabled at (0): [<ffffffff810fff10>] copy_process+0x11d0/0x2b10
[   40.652316] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   40.652789] ---[ end trace 0000000000000000 ]---
[   40.653291] ------------[ cut here ]------------
[   40.653632] WARNING: CPU: 0 PID: 757 at drivers/iommu/iommufd/pages.c:1181 iopt_release_pages+0x159/0x190
[   40.654328] Modules linked in:
[   40.654576] CPU: 0 PID: 757 Comm: repro Tainted: G    B   W          6.1.0-a0a6c76cf2a5+ #1
[   40.655181] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   40.655990] RIP: 0010:iopt_release_pages+0x159/0x190
[   40.656364] Code: b5 11 ff eb cb e8 87 90 2b ff be 03 00 00 00 4c 89 f7 e8 6a 8b ce ff eb b7 e8 73 90 2b ff 0f 0b e9 ed fe ff ff e8 67 90 2b ff <0f> 0b e9 00 ff ff ff e8 5b 90 2b ff 0f 0b e9 07 ff ff ff e8 4f 90
[   40.657704] RSP: 0018:ffffc900014a3c88 EFLAGS: 00010246
[   40.658092] RAX: 0000000000000000 RBX: ffff888009f85400 RCX: ffffffff81fe1957
[   40.658617] RDX: 0000000000000000 RSI: ffff88800cb4d300 RDI: 0000000000000002
[   40.659130] RBP: ffffc900014a3ca8 R08: 0000000000000000 R09: 0000000000000000
[   40.659646] R10: ffffc900014a3c58 R11: 0000000000000000 R12: ffffffffffffffff
[   40.660160] R13: 0000000001000000 R14: 00000000017fffff R15: 0000000000000000
[   40.660690] FS:  0000000000000000(0000) GS:ffff88807dc00000(0000) knlGS:0000000000000000
[   40.661270] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   40.661691] CR2: 00007f3777cf0500 CR3: 0000000003c12002 CR4: 0000000000770ef0
[   40.662207] PKRU: 55555554
[   40.662414] Call Trace:
[   40.662611]  <TASK>
[   40.662778]  iopt_unmap_iova_range+0x1ef/0x2e0
[   40.663117]  iopt_unmap_all+0x2f/0x60
[   40.663403]  iommufd_ioas_destroy+0x2c/0x70
[   40.663715]  iommufd_fops_release+0xd4/0x170
[   40.664045]  ? iommufd_ctx_get+0x30/0x30
[   40.664344]  __fput+0x11f/0x450
[   40.664597]  ____fput+0x1e/0x30
[   40.664869]  task_work_run+0xb6/0x120
[   40.665163]  do_exit+0x521/0x1340
[   40.665420]  ? lock_release+0x202/0x2c0
[   40.665712]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   40.666070]  ? trace_hardirqs_on+0x3f/0x100
[   40.666400]  do_group_exit+0x5e/0xf0
[   40.666689]  __x64_sys_exit_group+0x25/0x30
[   40.667011]  do_syscall_64+0x3b/0x90
[   40.667296]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   40.667686] RIP: 0033:0x7f3777be6cf6
[   40.667964] Code: Unable to access opcode bytes at 0x7f3777be6ccc.
[   40.668405] RSP: 002b:00007ffd0d7278d8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
[   40.668973] RAX: ffffffffffffffda RBX: 00007f3777cf1490 RCX: 00007f3777be6cf6
[   40.669488] RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
[   40.670001] RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffff80
[   40.670527] R10: 0000000000000004 R11: 0000000000000246 R12: 00007f3777cf1490
[   40.671037] R13: 0000000000000001 R14: 00007f3777cf4e88 R15: 0000000000000000
[   40.671545]  </TASK>
[   40.671716] irq event stamp: 0
[   40.671947] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   40.672401] hardirqs last disabled at (0): [<ffffffff810fff0c>] copy_process+0x11cc/0x2b10
[   40.673041] softirqs last  enabled at (0): [<ffffffff810fff10>] copy_process+0x11d0/0x2b10
[   40.673645] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   40.674102] ---[ end trace 0000000000000000 ]---
[   40.868992] ------------[ cut here ]------------
[   40.869479] WARNING: CPU: 0 PID: 770 at drivers/iommu/iommufd/pages.c:294 __iopt_area_unfill_domain+0x152/0x560
[   40.870433] Modules linked in:
[   40.870741] CPU: 0 PID: 770 Comm: repro Tainted: G    B   W          6.1.0-a0a6c76cf2a5+ #1
[   40.871520] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   40.872573] RIP: 0010:__iopt_area_unfill_domain+0x152/0x560
[   40.873157] Code: a1 2b ff 44 8b 64 24 54 48 8b 44 24 48 31 ff 44 89 e6 48 89 44 24 38 e8 6c a2 2b ff 45 85 e4 0f 85 eb 01 00 00 e8 ee a0 2b ff <0f> 0b e8 e7 a0 2b ff 48 8b 44 24 38 89 5c 24 58 89 18 8b 44 24 54
[   40.875109] RSP: 0018:ffffc9000150bae0 EFLAGS: 00010246
[   40.875614] RAX: 0000000000000000 RBX: 00000000ffffffff RCX: ffffffff81fe0bd5
[   40.876282] RDX: 0000000000000000 RSI: ffff8880135d8000 RDI: 0000000000000002
[   40.876966] RBP: ffffc9000150bd10 R08: 000000000003b5c5 R09: 0000000000000001
[   40.877631] R10: 000000000003b5a0 R11: 0000000000000024 R12: 0000000000000001
[   40.878300] R13: 0000000000000801 R14: 00000000000007ff R15: 0000000000000800
[   40.878970] FS:  00007f3777af9740(0000) GS:ffff88807dc00000(0000) knlGS:0000000000000000
[   40.879724] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   40.880264] CR2: 00007f3777c1e580 CR3: 0000000017326003 CR4: 0000000000770ef0
[   40.880950] PKRU: 55555554
[   40.881218] Call Trace:
[   40.881462]  <TASK>
[   40.881685]  ? rcu_read_lock_sched_held+0x29/0x80
[   40.882149]  ? lock_acquire+0x1a1/0x2f0
[   40.882531]  ? rcu_read_lock_held_common+0x12/0x50
[   40.882994]  ? rcu_read_lock_sched_held+0x29/0x80
[   40.883452]  ? __mutex_lock+0x13a/0xf30
[   40.883833]  ? write_comp_data+0x2f/0x90
[   40.884221]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   40.884699]  iopt_area_unfill_domain+0x32/0x40
[   40.885136]  iopt_table_remove_domain+0x23f/0x4c0
[   40.885593]  iommufd_device_selftest_detach+0x3a/0x90
[   40.886091]  iommufd_selftest_destroy+0x55/0x70
[   40.886543]  iommufd_object_destroy_user+0xce/0x130
[   40.887012]  iommufd_destroy+0xa2/0xc0
[   40.887382]  iommufd_fops_ioctl+0x1ef/0x310
[   40.887795]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   40.888250]  ? write_comp_data+0x2f/0x90
[   40.888646]  __x64_sys_ioctl+0x10e/0x160
[   40.889078]  ? iommufd_get_object.part.6+0x1c0/0x1c0
[   40.889565]  do_syscall_64+0x3b/0x90
[   40.889918]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   40.890402] RIP: 0033:0x7f3777c1e59d
[   40.890760] Code: 00 c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d d3 08 0d 00 f7 d8 64 89 01 48
[   40.892468] RSP: 002b:00007ffd0d727918 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   40.893206] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f3777c1e59d
[   40.893878] RDX: 0000000020000140 RSI: 0000000000003b80 RDI: 0000000000000003
[   40.894548] RBP: 00007ffd0d727930 R08: 00007ffd0d727930 R09: 00007ffd0d727930
[   40.895211] R10: 00007ffd0d727930 R11: 0000000000000213 R12: 0000000000401180
[   40.895870] R13: 00007ffd0d727a50 R14: 0000000000000000 R15: 0000000000000000
[   40.896539]  </TASK>
[   40.896774] irq event stamp: 0
[   40.897072] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   40.897665] hardirqs last disabled at (0): [<ffffffff810fff0c>] copy_process+0x11cc/0x2b10
[   40.898451] softirqs last  enabled at (0): [<ffffffff810fff10>] copy_process+0x11d0/0x2b10
[   40.899233] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   40.899830] ---[ end trace 0000000000000000 ]---
[   40.900361] ------------[ cut here ]------------
[   40.900807] WARNING: CPU: 0 PID: 770 at drivers/iommu/iommufd/pages.c:1290 __iopt_area_unfill_domain+0x54f/0x560
[   40.901763] Modules linked in:
[   40.902061] CPU: 0 PID: 770 Comm: repro Tainted: G    B   W          6.1.0-a0a6c76cf2a5+ #1
[   40.902841] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   40.903899] RIP: 0010:__iopt_area_unfill_domain+0x54f/0x560
[   40.904345] Code: e8 86 9e 2b ff 85 db 0f 85 35 fb ff ff e8 09 9d 2b ff 0f 0b e9 29 fb ff ff e8 fd 9c 2b ff 0f 0b e9 69 fe ff ff e8 f1 9c 2b ff <0f> 0b e9 58 ff ff ff e8 65 2d dc 00 0f 1f 44 00 00 0f 1f 44 00 00
[   40.905729] RSP: 0018:ffffc9000150bae0 EFLAGS: 00010246
[   40.906092] RAX: 0000000000000000 RBX: 00000000ffffffff RCX: ffffffff81fe0d26
[   40.906609] RDX: 0000000000000000 RSI: ffff8880135d8000 RDI: 0000000000000002
[   40.907127] RBP: ffffc9000150bd10 R08: 000000000003b5c5 R09: 0000000000000001
[   40.907645] R10: 000000000003b5a0 R11: 0000000000000024 R12: 00000000000007ff
[   40.908174] R13: 0000000000000801 R14: 00000000000007ff R15: 0000000000000800
[   40.908691] FS:  00007f3777af9740(0000) GS:ffff88807dc00000(0000) knlGS:0000000000000000
[   40.909260] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   40.909675] CR2: 00007f3777c1e580 CR3: 0000000017326003 CR4: 0000000000770ef0
[   40.910223] PKRU: 55555554
[   40.910446] Call Trace:
[   40.910619]  <TASK>
[   40.910786]  ? rcu_read_lock_sched_held+0x29/0x80
[   40.911111]  ? lock_acquire+0x1a1/0x2f0
[   40.911370]  ? rcu_read_lock_held_common+0x12/0x50
[   40.911722]  ? rcu_read_lock_sched_held+0x29/0x80
[   40.912055]  ? __mutex_lock+0x13a/0xf30
[   40.912341]  ? write_comp_data+0x2f/0x90
[   40.912627]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   40.912989]  iopt_area_unfill_domain+0x32/0x40
[   40.913319]  iopt_table_remove_domain+0x23f/0x4c0
[   40.913657]  iommufd_device_selftest_detach+0x3a/0x90
[   40.914028]  iommufd_selftest_destroy+0x55/0x70
[   40.914362]  iommufd_object_destroy_user+0xce/0x130
[   40.914723]  iommufd_destroy+0xa2/0xc0
[   40.914997]  iommufd_fops_ioctl+0x1ef/0x310
[   40.915305]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   40.915643]  ? write_comp_data+0x2f/0x90
[   40.915934]  __x64_sys_ioctl+0x10e/0x160
[   40.916225]  ? iommufd_get_object.part.6+0x1c0/0x1c0
[   40.916585]  do_syscall_64+0x3b/0x90
[   40.916864]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   40.917229] RIP: 0033:0x7f3777c1e59d
[   40.917491] Code: 00 c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d d3 08 0d 00 f7 d8 64 89 01 48
[   40.918738] RSP: 002b:00007ffd0d727918 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   40.919269] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f3777c1e59d
[   40.919762] RDX: 0000000020000140 RSI: 0000000000003b80 RDI: 0000000000000003
[   40.920255] RBP: 00007ffd0d727930 R08: 00007ffd0d727930 R09: 00007ffd0d727930
[   40.920761] R10: 00007ffd0d727930 R11: 0000000000000213 R12: 0000000000401180
[   40.921248] R13: 00007ffd0d727a50 R14: 0000000000000000 R15: 0000000000000000
[   40.921740]  </TASK>
[   40.921900] irq event stamp: 0
[   40.922118] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   40.922551] hardirqs last disabled at (0): [<ffffffff810fff0c>] copy_process+0x11cc/0x2b10
[   40.923136] softirqs last  enabled at (0): [<ffffffff810fff10>] copy_process+0x11d0/0x2b10
[   40.923716] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   40.924144] ---[ end trace 0000000000000000 ]---
[   40.931243] ------------[ cut here ]------------
[   40.931887] WARNING: CPU: 1 PID: 770 at drivers/iommu/iommufd/pages.c:178 batch_unpin.isra.23+0x151/0x1a0
[   40.933112] Modules linked in:
[   40.933498] CPU: 1 PID: 770 Comm: repro Tainted: G    B   W          6.1.0-a0a6c76cf2a5+ #1
[   40.934594] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   40.935935] RIP: 0010:batch_unpin.isra.23+0x151/0x1a0
[   40.936623] Code: e8 c4 be 2b ff 48 8b 45 d0 48 85 c0 75 17 e8 26 bd 2b ff 48 8b 7d c8 48 89 de e8 fa bd 2b ff 48 39 5d c8 73 07 e8 0f bd 2b ff <0f> 0b e8 08 bd 2b ff 4d 29 e5 31 ff 41 83 c6 01 4c 89 ee 31 db e8
[   40.938829] RSP: 0018:ffffc9000150b9d8 EFLAGS: 00010246
[   40.939387] RAX: 0000000000000000 RBX: ffffffffffffffff RCX: ffffffff81fded8c
[   40.940140] RDX: 0000000000000000 RSI: ffff8880135d8000 RDI: 0000000000000002
[   40.940919] RBP: ffffc9000150ba20 R08: 0000000000000000 R09: ffff88807dd3b890
[   40.941664] R10: 0000000000001240 R11: 0000000000000000 R12: 0000000000000001
[   40.942410] R13: 0000000000000001 R14: 0000000000000000 R15: ffff888009f85400
[   40.943176] FS:  0000000000000000(0000) GS:ffff88807dd00000(0000) knlGS:0000000000000000
[   40.944054] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   40.944741] CR2: 00007f3777cf0500 CR3: 000000000d51a002 CR4: 0000000000770ee0
[   40.945486] PKRU: 55555554
[   40.945790] Call Trace:
[   40.946065]  <TASK>
[   40.946322]  iopt_pages_unfill_xarray+0x39f/0x5c0
[   40.946905]  ? rcu_read_lock_held_common+0x12/0x50
[   40.947451]  ? write_comp_data+0x2f/0x90
[   40.947906]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   40.948439]  ? write_comp_data+0x2f/0x90
[   40.948904]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   40.949432]  ? interval_tree_remove+0x291/0x4e0
[   40.949960]  ? write_comp_data+0x2f/0x90
[   40.950420]  iopt_area_remove_access+0x108/0x120
[   40.950943]  iommufd_access_unpin_pages+0x177/0x210
[   40.951498]  iommufd_test_access_unmap+0xe0/0x130
[   40.952034]  ? iommufd_test_access_unmap+0x130/0x130
[   40.952607]  iommufd_test_staccess_release+0x39/0x60
[   40.953211]  __fput+0x11f/0x450
[   40.953575]  ____fput+0x1e/0x30
[   40.953934]  task_work_run+0xb6/0x120
[   40.954360]  do_exit+0x521/0x1340
[   40.954756]  ? lock_release+0x202/0x2c0
[   40.955188]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   40.955723]  ? trace_hardirqs_on+0x3f/0x100
[   40.956202]  do_group_exit+0x5e/0xf0
[   40.956606]  __x64_sys_exit_group+0x25/0x30
[   40.957100]  do_syscall_64+0x3b/0x90
[   40.957514]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   40.958088] RIP: 0033:0x7f3777be6cf6
[   40.958522] Code: Unable to access opcode bytes at 0x7f3777be6ccc.
[   40.959147] RSP: 002b:00007ffd0d7278d8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
[   40.959953] RAX: ffffffffffffffda RBX: 00007f3777cf1490 RCX: 00007f3777be6cf6
[   40.960733] RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
[   40.961480] RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffff80
[   40.962229] R10: 0000000000000004 R11: 0000000000000246 R12: 00007f3777cf1490
[   40.962975] R13: 0000000000000001 R14: 00007f3777cf4e88 R15: 0000000000000000
[   40.963820]  </TASK>
[   40.964078] irq event stamp: 0
[   40.964430] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   40.965144] hardirqs last disabled at (0): [<ffffffff810fff0c>] copy_process+0x11cc/0x2b10
[   40.966034] softirqs last  enabled at (0): [<ffffffff810fff10>] copy_process+0x11d0/0x2b10
[   40.966935] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   40.967640] ---[ end trace 0000000000000000 ]---
[   40.968302] ------------[ cut here ]------------
[   40.968837] WARNING: CPU: 1 PID: 770 at drivers/iommu/iommufd/pages.c:886 update_unpinned+0x75/0x80
[   40.969845] Modules linked in:
[   40.970210] CPU: 1 PID: 770 Comm: repro Tainted: G    B   W          6.1.0-a0a6c76cf2a5+ #1
[   40.971110] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   40.972302] RIP: 0010:update_unpinned+0x75/0x80
[   40.972855] Code: ac 2b ff 48 89 de 31 c9 31 d2 4c 29 e6 4c 89 ef e8 70 fb ff ff e8 bb ac 2b ff 5b 41 5c 41 5d 5d c3 cc cc cc cc e8 ab ac 2b ff <0f> 0b eb e7 0f 1f 80 00 00 00 00 0f 1f 44 00 00 55 48 89 e5 41 57
[   40.974827] RSP: 0018:ffffc9000150ba08 EFLAGS: 00010246
[   40.975390] RAX: 0000000000000000 RBX: 0000000000000000 RCX: ffffffff81fdfdcf
[   40.976163] RDX: 0000000000000000 RSI: ffff8880135d8000 RDI: 0000000000000002
[   40.976962] RBP: ffffc9000150ba20 R08: 0000000000000000 R09: ffff88807dd3b890
[   40.977747] R10: 0000000000001240 R11: 0000000000000000 R12: ffffffffffffffff
[   40.978534] R13: ffff888009f85400 R14: 0000000000000002 R15: 0000000000000002
[   40.979285] FS:  0000000000000000(0000) GS:ffff88807dd00000(0000) knlGS:0000000000000000
[   40.980166] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   40.980829] CR2: 00007f3777cf0500 CR3: 000000000d51a002 CR4: 0000000000770ee0
[   40.981607] PKRU: 55555554
[   40.981920] Call Trace:
[   40.982204]  <TASK>
[   40.982461]  iopt_pages_unfill_xarray+0x522/0x5c0
[   40.983075]  ? rcu_read_lock_held_common+0x12/0x50
[   40.983616]  ? write_comp_data+0x2f/0x90
[   40.984075]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   40.984621]  ? write_comp_data+0x2f/0x90
[   40.985109]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   40.985686]  ? interval_tree_remove+0x291/0x4e0
[   40.986243]  ? write_comp_data+0x2f/0x90
[   40.986712]  iopt_area_remove_access+0x108/0x120
[   40.987265]  iommufd_access_unpin_pages+0x177/0x210
[   40.987862]  iommufd_test_access_unmap+0xe0/0x130
[   40.988425]  ? iommufd_test_access_unmap+0x130/0x130
[   40.989051]  iommufd_test_staccess_release+0x39/0x60
[   40.989649]  __fput+0x11f/0x450
[   40.990044]  ____fput+0x1e/0x30
[   40.990425]  task_work_run+0xb6/0x120
[   40.990869]  do_exit+0x521/0x1340
[   40.991281]  ? lock_release+0x202/0x2c0
[   40.991754]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   40.992313]  ? trace_hardirqs_on+0x3f/0x100
[   40.992841]  do_group_exit+0x5e/0xf0
[   40.993277]  __x64_sys_exit_group+0x25/0x30
[   40.993769]  do_syscall_64+0x3b/0x90
[   40.994207]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   40.994794] RIP: 0033:0x7f3777be6cf6
[   40.995218] Code: Unable to access opcode bytes at 0x7f3777be6ccc.
[   40.995915] RSP: 002b:00007ffd0d7278d8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
[   40.996796] RAX: ffffffffffffffda RBX: 00007f3777cf1490 RCX: 00007f3777be6cf6
[   40.997612] RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
[   40.998416] RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffff80
[   40.999176] R10: 0000000000000004 R11: 0000000000000246 R12: 00007f3777cf1490
[   40.999986] R13: 0000000000000001 R14: 00007f3777cf4e88 R15: 0000000000000000
[   41.000833]  </TASK>
[   41.001103] irq event stamp: 0
[   41.001531] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   41.002283] hardirqs last disabled at (0): [<ffffffff810fff0c>] copy_process+0x11cc/0x2b10
[   41.003240] softirqs last  enabled at (0): [<ffffffff810fff10>] copy_process+0x11d0/0x2b10
[   41.004196] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   41.004925] ---[ end trace 0000000000000000 ]---
[   41.005725] ------------[ cut here ]------------
[   41.006253] WARNING: CPU: 1 PID: 770 at drivers/iommu/iommufd/pages.c:1181 iopt_release_pages+0x159/0x190
[   41.007326] Modules linked in:
[   41.007686] CPU: 1 PID: 770 Comm: repro Tainted: G    B   W          6.1.0-a0a6c76cf2a5+ #1
[   41.008623] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   41.009990] RIP: 0010:iopt_release_pages+0x159/0x190
[   41.010568] Code: b5 11 ff eb cb e8 87 90 2b ff be 03 00 00 00 4c 89 f7 e8 6a 8b ce ff eb b7 e8 73 90 2b ff 0f 0b e9 ed fe ff ff e8 67 90 2b ff <0f> 0b e9 00 ff ff ff e8 5b 90 2b ff 0f 0b e9 07 ff ff ff e8 4f 90
[   41.012560] RSP: 0018:ffffc9000150bc88 EFLAGS: 00010246
[   41.013173] RAX: 0000000000000000 RBX: ffff888009f85400 RCX: ffffffff81fe1957
[   41.013976] RDX: 0000000000000000 RSI: ffff8880135d8000 RDI: 0000000000000002
[   41.014776] RBP: ffffc9000150bca8 R08: ffff88800950dc00 R09: 000000008015000d
[   41.015568] R10: 0000000000000001 R11: 0000000000000000 R12: ffffffffffffffff
[   41.016361] R13: 0000000001000000 R14: 00000000017fffff R15: 0000000000000000
[   41.017168] FS:  0000000000000000(0000) GS:ffff88807dd00000(0000) knlGS:0000000000000000
[   41.018049] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   41.018685] CR2: 00007f3777cf0500 CR3: 000000000d51a002 CR4: 0000000000770ee0
[   41.019481] PKRU: 55555554
[   41.019801] Call Trace:
[   41.020089]  <TASK>
[   41.020349]  iopt_unmap_iova_range+0x1ef/0x2e0
[   41.020896]  iopt_unmap_all+0x2f/0x60
[   41.021334]  iommufd_ioas_destroy+0x2c/0x70
[   41.021823]  iommufd_fops_release+0xd4/0x170
[   41.022327]  ? iommufd_ctx_get+0x30/0x30
[   41.022788]  __fput+0x11f/0x450
[   41.023169]  ____fput+0x1e/0x30
[   41.023549]  task_work_run+0xb6/0x120
[   41.023998]  do_exit+0x521/0x1340
[   41.024395]  ? lock_release+0x202/0x2c0
[   41.024868]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   41.025404]  ? trace_hardirqs_on+0x3f/0x100
[   41.025900]  do_group_exit+0x5e/0xf0
[   41.026319]  __x64_sys_exit_group+0x25/0x30
[   41.026802]  do_syscall_64+0x3b/0x90
[   41.027235]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   41.027824] RIP: 0033:0x7f3777be6cf6
[   41.028258] Code: Unable to access opcode bytes at 0x7f3777be6ccc.
[   41.028956] RSP: 002b:00007ffd0d7278d8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
[   41.029814] RAX: ffffffffffffffda RBX: 00007f3777cf1490 RCX: 00007f3777be6cf6
[   41.030632] RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
[   41.031413] RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffff80
[   41.032220] R10: 0000000000000004 R11: 0000000000000246 R12: 00007f3777cf1490
[   41.033040] R13: 0000000000000001 R14: 00007f3777cf4e88 R15: 0000000000000000
[   41.033830]  </TASK>
[   41.034104] irq event stamp: 0
[   41.034466] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   41.035166] hardirqs last disabled at (0): [<ffffffff810fff0c>] copy_process+0x11cc/0x2b10
[   41.036102] softirqs last  enabled at (0): [<ffffffff810fff10>] copy_process+0x11d0/0x2b10
[   41.037034] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   41.037718] ---[ end trace 0000000000000000 ]---
[   41.288574] ------------[ cut here ]------------
[   41.289199] WARNING: CPU: 1 PID: 778 at drivers/iommu/iommufd/pages.c:294 __iopt_area_unfill_domain+0x152/0x560
[   41.290370] Modules linked in:
[   41.290760] CPU: 1 PID: 778 Comm: repro Tainted: G    B   W          6.1.0-a0a6c76cf2a5+ #1
[   41.291715] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   41.293003] RIP: 0010:__iopt_area_unfill_domain+0x152/0x560
[   41.293668] Code: a1 2b ff 44 8b 64 24 54 48 8b 44 24 48 31 ff 44 89 e6 48 89 44 24 38 e8 6c a2 2b ff 45 85 e4 0f 85 eb 01 00 00 e8 ee a0 2b ff <0f> 0b e8 e7 a0 2b ff 48 8b 44 24 38 89 5c 24 58 89 18 8b 44 24 54
[   41.295980] RSP: 0018:ffffc90001533ae0 EFLAGS: 00010246
[   41.296756] RAX: 0000000000000000 RBX: 00000000ffffffff RCX: ffffffff81fe0bd5
[   41.297554] RDX: 0000000000000000 RSI: ffff88800b375300 RDI: 0000000000000002
[   41.298430] RBP: ffffc90001533d10 R08: 000000000003b5c5 R09: 0000000000000003
[   41.299225] R10: 000000000003b5a0 R11: 0000000000000024 R12: 0000000000000002
[   41.300207] R13: 0000000000000801 R14: 00000000000007ff R15: 0000000000000800
[   41.301137] FS:  00007f3777af9740(0000) GS:ffff88807dd00000(0000) knlGS:0000000000000000
[   41.302047] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   41.302704] CR2: 00007f3777c1e580 CR3: 0000000017334004 CR4: 0000000000770ee0
[   41.303638] PKRU: 55555554
[   41.303974] Call Trace:
[   41.304276]  <TASK>
[   41.304691]  ? rcu_read_lock_sched_held+0x29/0x80
[   41.305241]  ? lock_acquire+0x1a1/0x2f0
[   41.305708]  ? rcu_read_lock_held_common+0x12/0x50
[   41.306246]  ? rcu_read_lock_sched_held+0x29/0x80
[   41.306889]  ? __mutex_lock+0x13a/0xf30
[   41.307374]  ? write_comp_data+0x2f/0x90
[   41.307854]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   41.308503]  iopt_area_unfill_domain+0x32/0x40
[   41.309085]  iopt_table_remove_domain+0x23f/0x4c0
[   41.309658]  iommufd_device_selftest_detach+0x3a/0x90
[   41.310240]  iommufd_selftest_destroy+0x55/0x70
[   41.310863]  iommufd_object_destroy_user+0xce/0x130
[   41.311451]  iommufd_destroy+0xa2/0xc0
[   41.311989]  iommufd_fops_ioctl+0x1ef/0x310
[   41.312490]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   41.313082]  ? write_comp_data+0x2f/0x90
[   41.313670]  __x64_sys_ioctl+0x10e/0x160
[   41.314167]  ? iommufd_get_object.part.6+0x1c0/0x1c0
[   41.314761]  do_syscall_64+0x3b/0x90
[   41.315188]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   41.315906] RIP: 0033:0x7f3777c1e59d
[   41.316391] Code: 00 c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d d3 08 0d 00 f7 d8 64 89 01 48
[   41.318702] RSP: 002b:00007ffd0d727918 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   41.319535] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f3777c1e59d
[   41.320404] RDX: 0000000020000140 RSI: 0000000000003b80 RDI: 0000000000000003
[   41.321330] RBP: 00007ffd0d727930 R08: 00007ffd0d727930 R09: 00007ffd0d727930
[   41.322129] R10: 00007ffd0d727930 R11: 0000000000000213 R12: 0000000000401180
[   41.322983] R13: 00007ffd0d727a50 R14: 0000000000000000 R15: 0000000000000000
[   41.323913]  </TASK>
[   41.324187] irq event stamp: 0
[   41.324536] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   41.325395] hardirqs last disabled at (0): [<ffffffff810fff0c>] copy_process+0x11cc/0x2b10
[   41.326335] softirqs last  enabled at (0): [<ffffffff810fff10>] copy_process+0x11d0/0x2b10
[   41.327335] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   41.328044] ---[ end trace 0000000000000000 ]---
[   41.328805] ------------[ cut here ]------------
[   41.329318] WARNING: CPU: 1 PID: 778 at drivers/iommu/iommufd/pages.c:1290 __iopt_area_unfill_domain+0x54f/0x560
[   41.330527] Modules linked in:
[   41.330906] CPU: 1 PID: 778 Comm: repro Tainted: G    B   W          6.1.0-a0a6c76cf2a5+ #1
[   41.331851] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   41.333207] RIP: 0010:__iopt_area_unfill_domain+0x54f/0x560
[   41.333840] Code: e8 86 9e 2b ff 85 db 0f 85 35 fb ff ff e8 09 9d 2b ff 0f 0b e9 29 fb ff ff e8 fd 9c 2b ff 0f 0b e9 69 fe ff ff e8 f1 9c 2b ff <0f> 0b e9 58 ff ff ff e8 65 2d dc 00 0f 1f 44 00 00 0f 1f 44 00 00
[   41.335846] RSP: 0018:ffffc90001533ae0 EFLAGS: 00010246
[   41.336449] RAX: 0000000000000000 RBX: 00000000ffffffff RCX: ffffffff81fe0d26
[   41.337283] RDX: 0000000000000000 RSI: ffff88800b375300 RDI: 0000000000000002
[   41.338070] RBP: ffffc90001533d10 R08: 000000000003b5c5 R09: 0000000000000003
[   41.338854] R10: 000000000003b5a0 R11: 0000000000000024 R12: 00000000000007ff
[   41.339626] R13: 0000000000000801 R14: 00000000000007ff R15: 0000000000000800
[   41.340439] FS:  00007f3777af9740(0000) GS:ffff88807dd00000(0000) knlGS:0000000000000000
[   41.341335] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   41.341977] CR2: 00007f3777c1e580 CR3: 0000000017334004 CR4: 0000000000770ee0
[   41.342751] PKRU: 55555554
[   41.343061] Call Trace:
[   41.343345]  <TASK>
[   41.343616]  ? rcu_read_lock_sched_held+0x29/0x80
[   41.344170]  ? lock_acquire+0x1a1/0x2f0
[   41.344626]  ? rcu_read_lock_held_common+0x12/0x50
[   41.345225]  ? rcu_read_lock_sched_held+0x29/0x80
[   41.345779]  ? __mutex_lock+0x13a/0xf30
[   41.346251]  ? write_comp_data+0x2f/0x90
[   41.346733]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   41.347282]  iopt_area_unfill_domain+0x32/0x40
[   41.347875]  iopt_table_remove_domain+0x23f/0x4c0
[   41.348425]  iommufd_device_selftest_detach+0x3a/0x90
[   41.349058]  iommufd_selftest_destroy+0x55/0x70
[   41.349596]  iommufd_object_destroy_user+0xce/0x130
[   41.350170]  iommufd_destroy+0xa2/0xc0
[   41.350626]  iommufd_fops_ioctl+0x1ef/0x310
[   41.351114]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   41.351657]  ? write_comp_data+0x2f/0x90
[   41.352129]  __x64_sys_ioctl+0x10e/0x160
[   41.352602]  ? iommufd_get_object.part.6+0x1c0/0x1c0
[   41.353213]  do_syscall_64+0x3b/0x90
[   41.353651]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   41.354239] RIP: 0033:0x7f3777c1e59d
[   41.354679] Code: 00 c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d d3 08 0d 00 f7 d8 64 89 01 48
[   41.356643] RSP: 002b:00007ffd0d727918 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   41.357530] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f3777c1e59d
[   41.358293] RDX: 0000000020000140 RSI: 0000000000003b80 RDI: 0000000000000003
[   41.359075] RBP: 00007ffd0d727930 R08: 00007ffd0d727930 R09: 00007ffd0d727930
[   41.359851] R10: 00007ffd0d727930 R11: 0000000000000213 R12: 0000000000401180
[   41.360643] R13: 00007ffd0d727a50 R14: 0000000000000000 R15: 0000000000000000
[   41.361456]  </TASK>
[   41.361719] irq event stamp: 0
[   41.362072] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   41.362780] hardirqs last disabled at (0): [<ffffffff810fff0c>] copy_process+0x11cc/0x2b10
[   41.363704] softirqs last  enabled at (0): [<ffffffff810fff10>] copy_process+0x11d0/0x2b10
[   41.364630] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   41.365384] ---[ end trace 0000000000000000 ]---
[   41.370105] ------------[ cut here ]------------
[   41.370684] WARNING: CPU: 1 PID: 778 at drivers/iommu/iommufd/pages.c:178 batch_unpin.isra.23+0x151/0x1a0
[   41.371786] Modules linked in:
[   41.372163] CPU: 1 PID: 778 Comm: repro Tainted: G    B   W          6.1.0-a0a6c76cf2a5+ #1
[   41.373181] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   41.374446] RIP: 0010:batch_unpin.isra.23+0x151/0x1a0
[   41.375047] Code: e8 c4 be 2b ff 48 8b 45 d0 48 85 c0 75 17 e8 26 bd 2b ff 48 8b 7d c8 48 89 de e8 fa bd 2b ff 48 39 5d c8 73 07 e8 0f bd 2b ff <0f> 0b e8 08 bd 2b ff 4d 29 e5 31 ff 41 83 c6 01 4c 89 ee 31 db e8
[   41.377148] RSP: 0018:ffffc900015339d8 EFLAGS: 00010246
[   41.377787] RAX: 0000000000000000 RBX: ffffffffffffffff RCX: ffffffff81fded8c
[   41.378624] RDX: 0000000000000000 RSI: ffff88800b375300 RDI: 0000000000000002
[   41.379442] RBP: ffffc90001533a20 R08: 0000000000000000 R09: ffff88807dd3b890
[   41.380276] R10: 00000000000012b9 R11: 0000000000000000 R12: 0000000000000001
[   41.381140] R13: 0000000000000001 R14: 0000000000000000 R15: ffff888005ec9c00
[   41.381979] FS:  0000000000000000(0000) GS:ffff88807dd00000(0000) knlGS:0000000000000000
[   41.382914] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   41.383587] CR2: 00007f3777cf0500 CR3: 0000000003c12003 CR4: 0000000000770ee0
[   41.384424] PKRU: 55555554
[   41.384797] Call Trace:
[   41.385103]  <TASK>
[   41.385370]  iopt_pages_unfill_xarray+0x39f/0x5c0
[   41.385946]  ? rcu_read_lock_sched_held+0x29/0x80
[   41.386559]  ? rcu_read_lock_held_common+0x12/0x50
[   41.387130]  ? write_comp_data+0x2f/0x90
[   41.387621]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   41.388200]  ? write_comp_data+0x2f/0x90
[   41.388706]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   41.389264]  ? interval_tree_remove+0x291/0x4e0
[   41.389809]  ? write_comp_data+0x2f/0x90
[   41.390303]  iopt_area_remove_access+0x108/0x120
[   41.390872]  iommufd_access_unpin_pages+0x177/0x210
[   41.391479]  iommufd_test_access_unmap+0xe0/0x130
[   41.392080]  ? iommufd_test_access_unmap+0x130/0x130
[   41.392704]  iommufd_test_staccess_release+0x39/0x60
[   41.393313]  __fput+0x11f/0x450
[   41.393714]  ____fput+0x1e/0x30
[   41.394118]  task_work_run+0xb6/0x120
[   41.394598]  do_exit+0x521/0x1340
[   41.395002]  ? lock_release+0x202/0x2c0
[   41.395469]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   41.396027]  ? trace_hardirqs_on+0x3f/0x100
[   41.396560]  do_group_exit+0x5e/0xf0
[   41.397038]  __x64_sys_exit_group+0x25/0x30
[   41.397555]  do_syscall_64+0x3b/0x90
[   41.397995]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   41.398579] RIP: 0033:0x7f3777be6cf6
[   41.399005] Code: Unable to access opcode bytes at 0x7f3777be6ccc.
[   41.399693] RSP: 002b:00007ffd0d7278d8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
[   41.400603] RAX: ffffffffffffffda RBX: 00007f3777cf1490 RCX: 00007f3777be6cf6
[   41.401410] RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
[   41.402229] RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffff80
[   41.403036] R10: 0000000000000004 R11: 0000000000000246 R12: 00007f3777cf1490
[   41.403927] R13: 0000000000000001 R14: 00007f3777cf4e88 R15: 0000000000000000
[   41.404771]  </TASK>
[   41.405045] irq event stamp: 0
[   41.405414] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   41.406120] hardirqs last disabled at (0): [<ffffffff810fff0c>] copy_process+0x11cc/0x2b10
[   41.407057] softirqs last  enabled at (0): [<ffffffff810fff10>] copy_process+0x11d0/0x2b10
[   41.408000] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   41.408741] ---[ end trace 0000000000000000 ]---
[   41.409412] ------------[ cut here ]------------
[   41.409934] WARNING: CPU: 1 PID: 778 at drivers/iommu/iommufd/pages.c:886 update_unpinned+0x75/0x80
[   41.410982] Modules linked in:
[   41.411354] CPU: 1 PID: 778 Comm: repro Tainted: G    B   W          6.1.0-a0a6c76cf2a5+ #1
[   41.412328] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   41.413662] RIP: 0010:update_unpinned+0x75/0x80
[   41.414228] Code: ac 2b ff 48 89 de 31 c9 31 d2 4c 29 e6 4c 89 ef e8 70 fb ff ff e8 bb ac 2b ff 5b 41 5c 41 5d 5d c3 cc cc cc cc e8 ab ac 2b ff <0f> 0b eb e7 0f 1f 80 00 00 00 00 0f 1f 44 00 00 55 48 89 e5 41 57
[   41.416326] RSP: 0018:ffffc90001533a08 EFLAGS: 00010246
[   41.416974] RAX: 0000000000000000 RBX: 0000000000000000 RCX: ffffffff81fdfdcf
[   41.417810] RDX: 0000000000000000 RSI: ffff88800b375300 RDI: 0000000000000002
[   41.418618] RBP: ffffc90001533a20 R08: 0000000000000000 R09: ffff88807dd3b890
[   41.419445] R10: 00000000000012b9 R11: 0000000000000000 R12: ffffffffffffffff
[   41.420283] R13: ffff888005ec9c00 R14: 0000000000000002 R15: 0000000000000002
[   41.421139] FS:  0000000000000000(0000) GS:ffff88807dd00000(0000) knlGS:0000000000000000
[   41.422044] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   41.422727] CR2: 00007f3777cf0500 CR3: 0000000003c12003 CR4: 0000000000770ee0
[   41.423566] PKRU: 55555554
[   41.423904] Call Trace:
[   41.424204]  <TASK>
[   41.424476]  iopt_pages_unfill_xarray+0x522/0x5c0
[   41.425083]  ? rcu_read_lock_sched_held+0x29/0x80
[   41.425687]  ? rcu_read_lock_held_common+0x12/0x50
[   41.426278]  ? write_comp_data+0x2f/0x90
[   41.426766]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   41.427336]  ? write_comp_data+0x2f/0x90
[   41.427829]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   41.428414]  ? interval_tree_remove+0x291/0x4e0
[   41.429020]  ? write_comp_data+0x2f/0x90
[   41.429498]  iopt_area_remove_access+0x108/0x120
[   41.430053]  iommufd_access_unpin_pages+0x177/0x210
[   41.430673]  iommufd_test_access_unmap+0xe0/0x130
[   41.431242]  ? iommufd_test_access_unmap+0x130/0x130
[   41.431848]  iommufd_test_staccess_release+0x39/0x60
[   41.432458]  __fput+0x11f/0x450
[   41.432898]  ____fput+0x1e/0x30
[   41.433297]  task_work_run+0xb6/0x120
[   41.433768]  do_exit+0x521/0x1340
[   41.434178]  ? lock_release+0x202/0x2c0
[   41.434642]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   41.435186]  ? trace_hardirqs_on+0x3f/0x100
[   41.435669]  do_group_exit+0x5e/0xf0
[   41.436103]  __x64_sys_exit_group+0x25/0x30
[   41.436622]  do_syscall_64+0x3b/0x90
[   41.437111]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   41.437739] RIP: 0033:0x7f3777be6cf6
[   41.438196] Code: Unable to access opcode bytes at 0x7f3777be6ccc.
[   41.438913] RSP: 002b:00007ffd0d7278d8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
[   41.439791] RAX: ffffffffffffffda RBX: 00007f3777cf1490 RCX: 00007f3777be6cf6
[   41.440626] RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
[   41.441452] RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffff80
[   41.442288] R10: 0000000000000004 R11: 0000000000000246 R12: 00007f3777cf1490
[   41.443099] R13: 0000000000000001 R14: 00007f3777cf4e88 R15: 0000000000000000
[   41.443948]  </TASK>
[   41.444233] irq event stamp: 0
[   41.444606] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   41.445363] hardirqs last disabled at (0): [<ffffffff810fff0c>] copy_process+0x11cc/0x2b10
[   41.446312] softirqs last  enabled at (0): [<ffffffff810fff10>] copy_process+0x11d0/0x2b10
[   41.447296] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   41.448039] ---[ end trace 0000000000000000 ]---
[   41.448819] ------------[ cut here ]------------
[   41.449374] WARNING: CPU: 1 PID: 778 at drivers/iommu/iommufd/pages.c:1181 iopt_release_pages+0x159/0x190
[   41.450507] Modules linked in:
[   41.450870] CPU: 1 PID: 778 Comm: repro Tainted: G    B   W          6.1.0-a0a6c76cf2a5+ #1
[   41.451815] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   41.453159] RIP: 0010:iopt_release_pages+0x159/0x190
[   41.453778] Code: b5 11 ff eb cb e8 87 90 2b ff be 03 00 00 00 4c 89 f7 e8 6a 8b ce ff eb b7 e8 73 90 2b ff 0f 0b e9 ed fe ff ff e8 67 90 2b ff <0f> 0b e9 00 ff ff ff e8 5b 90 2b ff 0f 0b e9 07 ff ff ff e8 4f 90
[   41.455896] RSP: 0018:ffffc90001533c88 EFLAGS: 00010246
[   41.456553] RAX: 0000000000000000 RBX: ffff888005ec9c00 RCX: ffffffff81fe1957
[   41.457435] RDX: 0000000000000000 RSI: ffff88800b375300 RDI: 0000000000000002
[   41.458270] RBP: ffffc90001533ca8 R08: 0000000000000000 R09: 0000000000000000
[   41.459083] R10: ffffc90001533c58 R11: 0000000000000000 R12: ffffffffffffffff
[   41.459869] R13: 0000000001000000 R14: 00000000017fffff R15: 0000000000000000
[   41.460724] FS:  0000000000000000(0000) GS:ffff88807dd00000(0000) knlGS:0000000000000000
[   41.461707] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   41.462404] CR2: 00007f3777cf0500 CR3: 0000000003c12003 CR4: 0000000000770ee0
[   41.463213] PKRU: 55555554
[   41.463537] Call Trace:
[   41.463830]  <TASK>
[   41.464088]  iopt_unmap_iova_range+0x1ef/0x2e0
[   41.464615]  iopt_unmap_all+0x2f/0x60
[   41.465077]  iommufd_ioas_destroy+0x2c/0x70
[   41.465596]  iommufd_fops_release+0xd4/0x170
[   41.466129]  ? iommufd_ctx_get+0x30/0x30
[   41.466611]  __fput+0x11f/0x450
[   41.467016]  ____fput+0x1e/0x30
[   41.467418]  task_work_run+0xb6/0x120
[   41.467899]  do_exit+0x521/0x1340
[   41.468309]  ? lock_release+0x202/0x2c0
[   41.468797]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   41.469367]  ? trace_hardirqs_on+0x3f/0x100
[   41.469888]  do_group_exit+0x5e/0xf0
[   41.470331]  __x64_sys_exit_group+0x25/0x30
[   41.470838]  do_syscall_64+0x3b/0x90
[   41.471282]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   41.471876] RIP: 0033:0x7f3777be6cf6
[   41.472297] Code: Unable to access opcode bytes at 0x7f3777be6ccc.
[   41.473016] RSP: 002b:00007ffd0d7278d8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
[   41.473906] RAX: ffffffffffffffda RBX: 00007f3777cf1490 RCX: 00007f3777be6cf6
[   41.474737] RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
[   41.475637] RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffff80
[   41.476469] R10: 0000000000000004 R11: 0000000000000246 R12: 00007f3777cf1490
[   41.477334] R13: 0000000000000001 R14: 00007f3777cf4e88 R15: 0000000000000000
[   41.478192]  </TASK>
[   41.478483] irq event stamp: 0
[   41.478847] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   41.479574] hardirqs last disabled at (0): [<ffffffff810fff0c>] copy_process+0x11cc/0x2b10
[   41.480549] softirqs last  enabled at (0): [<ffffffff810fff10>] copy_process+0x11d0/0x2b10
[   41.481498] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   41.482238] ---[ end trace 0000000000000000 ]---
[   41.676596] ------------[ cut here ]------------
[   41.677196] WARNING: CPU: 1 PID: 784 at drivers/iommu/iommufd/pages.c:178 batch_unpin.isra.23+0x151/0x1a0
[   41.678326] Modules linked in:
[   41.678696] CPU: 1 PID: 784 Comm: repro Tainted: G    B   W          6.1.0-a0a6c76cf2a5+ #1
[   41.679643] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   41.680969] RIP: 0010:batch_unpin.isra.23+0x151/0x1a0
[   41.681582] Code: e8 c4 be 2b ff 48 8b 45 d0 48 85 c0 75 17 e8 26 bd 2b ff 48 8b 7d c8 48 89 de e8 fa bd 2b ff 48 39 5d c8 73 07 e8 0f bd 2b ff <0f> 0b e8 08 bd 2b ff 4d 29 e5 31 ff 41 83 c6 01 4c 89 ee 31 db e8
[   41.683761] RSP: 0018:ffffc90001563a88 EFLAGS: 00010246
[   41.684484] RAX: 0000000000000000 RBX: ffffffffffffffff RCX: ffffffff81fded8c
[   41.685319] RDX: 0000000000000000 RSI: ffff88800ca22980 RDI: 0000000000000002
[   41.686215] RBP: ffffc90001563ad0 R08: 000000000003b5c5 R09: 0000000000000008
[   41.687105] R10: 000000000003b5a0 R11: 0000000000000024 R12: 0000000000000003
[   41.687931] R13: 0000000000000003 R14: 00000000000001fb R15: ffff888005ec9c00
[   41.688851] FS:  00007f3777af9740(0000) GS:ffff88807dd00000(0000) knlGS:0000000000000000
[   41.689812] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   41.690533] CR2: 00007f3777c1e580 CR3: 000000000cab4005 CR4: 0000000000770ee0
[   41.691293] PKRU: 55555554
[   41.691599] Call Trace:
[   41.691880]  <TASK>
[   41.692163]  __iopt_area_unfill_domain+0x257/0x560
[   41.692793]  ? rcu_read_lock_sched_held+0x29/0x80
[   41.693326]  ? lock_acquire+0x1a1/0x2f0
[   41.693791]  ? rcu_read_lock_held_common+0x12/0x50
[   41.694494]  ? rcu_read_lock_sched_held+0x29/0x80
[   41.695028]  ? __mutex_lock+0x13a/0xf30
[   41.695494]  ? write_comp_data+0x2f/0x90
[   41.696047]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   41.696588]  iopt_area_unfill_domain+0x32/0x40
[   41.697182]  iopt_table_remove_domain+0x23f/0x4c0
[   41.697704]  iommufd_device_selftest_detach+0x3a/0x90
[   41.698279]  iommufd_selftest_destroy+0x55/0x70
[   41.698791]  iommufd_object_destroy_user+0xce/0x130
[   41.699363]  iommufd_destroy+0xa2/0xc0
[   41.699842]  iommufd_fops_ioctl+0x1ef/0x310
[   41.700323]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   41.700971]  ? write_comp_data+0x2f/0x90
[   41.701412]  __x64_sys_ioctl+0x10e/0x160
[   41.701861]  ? iommufd_get_object.part.6+0x1c0/0x1c0
[   41.702410]  do_syscall_64+0x3b/0x90
[   41.702886]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   41.703439] RIP: 0033:0x7f3777c1e59d
[   41.703842] Code: 00 c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d d3 08 0d 00 f7 d8 64 89 01 48
[   41.706061] RSP: 002b:00007ffd0d727918 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   41.706864] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f3777c1e59d
[   41.707652] RDX: 0000000020000140 RSI: 0000000000003b80 RDI: 0000000000000003
[   41.708483] RBP: 00007ffd0d727930 R08: 00007ffd0d727930 R09: 00007ffd0d727930
[   41.709322] R10: 00007ffd0d727930 R11: 0000000000000213 R12: 0000000000401180
[   41.710089] R13: 00007ffd0d727a50 R14: 0000000000000000 R15: 0000000000000000
[   41.710918]  </TASK>
[   41.711199] irq event stamp: 0
[   41.711537] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   41.712259] hardirqs last disabled at (0): [<ffffffff810fff0c>] copy_process+0x11cc/0x2b10
[   41.713201] softirqs last  enabled at (0): [<ffffffff810fff10>] copy_process+0x11d0/0x2b10
[   41.714100] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   41.714843] ---[ end trace 0000000000000000 ]---
[   41.715495] ------------[ cut here ]------------
[   41.716053] WARNING: CPU: 1 PID: 784 at drivers/iommu/iommufd/pages.c:294 __iopt_area_unfill_domain+0x152/0x560
[   41.717256] Modules linked in:
[   41.717588] CPU: 1 PID: 784 Comm: repro Tainted: G    B   W          6.1.0-a0a6c76cf2a5+ #1
[   41.718442] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   41.719769] RIP: 0010:__iopt_area_unfill_domain+0x152/0x560
[   41.720421] Code: a1 2b ff 44 8b 64 24 54 48 8b 44 24 48 31 ff 44 89 e6 48 89 44 24 38 e8 6c a2 2b ff 45 85 e4 0f 85 eb 01 00 00 e8 ee a0 2b ff <0f> 0b e8 e7 a0 2b ff 48 8b 44 24 38 89 5c 24 58 89 18 8b 44 24 54
[   41.722574] RSP: 0018:ffffc90001563ae0 EFLAGS: 00010246
[   41.723130] RAX: 0000000000000000 RBX: 00000000fffffffe RCX: ffffffff81fe0bd5
[   41.724002] RDX: 0000000000000000 RSI: ffff88800ca22980 RDI: 0000000000000002
[   41.724774] RBP: ffffc90001563d10 R08: 000000000003b5c5 R09: 0000000000000008
[   41.725629] R10: 000000000003b5a0 R11: 0000000000000024 R12: 0000000000000006
[   41.726383] R13: 0000000000000802 R14: 00000000000007ff R15: 0000000000000800
[   41.727265] FS:  00007f3777af9740(0000) GS:ffff88807dd00000(0000) knlGS:0000000000000000
[   41.728262] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   41.728922] CR2: 00007f3777c1e580 CR3: 000000000cab4005 CR4: 0000000000770ee0
[   41.729704] PKRU: 55555554
[   41.730014] Call Trace:
[   41.730285]  <TASK>
[   41.730553]  ? rcu_read_lock_sched_held+0x29/0x80
[   41.731085]  ? lock_acquire+0x1a1/0x2f0
[   41.731622]  ? rcu_read_lock_held_common+0x12/0x50
[   41.732159]  ? rcu_read_lock_sched_held+0x29/0x80
[   41.732697]  ? __mutex_lock+0x13a/0xf30
[   41.733123]  ? write_comp_data+0x2f/0x90
[   41.733549]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   41.734088]  iopt_area_unfill_domain+0x32/0x40
[   41.734609]  iopt_table_remove_domain+0x23f/0x4c0
[   41.735138]  iommufd_device_selftest_detach+0x3a/0x90
[   41.735729]  iommufd_selftest_destroy+0x55/0x70
[   41.736256]  iommufd_object_destroy_user+0xce/0x130
[   41.736838]  iommufd_destroy+0xa2/0xc0
[   41.737281]  iommufd_fops_ioctl+0x1ef/0x310
[   41.737770]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   41.738318]  ? write_comp_data+0x2f/0x90
[   41.738780]  __x64_sys_ioctl+0x10e/0x160
[   41.739240]  ? iommufd_get_object.part.6+0x1c0/0x1c0
[   41.739813]  do_syscall_64+0x3b/0x90
[   41.740238]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   41.740834] RIP: 0033:0x7f3777c1e59d
[   41.741249] Code: 00 c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d d3 08 0d 00 f7 d8 64 89 01 48
[   41.743251] RSP: 002b:00007ffd0d727918 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   41.744107] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f3777c1e59d
[   41.744924] RDX: 0000000020000140 RSI: 0000000000003b80 RDI: 0000000000000003
[   41.745731] RBP: 00007ffd0d727930 R08: 00007ffd0d727930 R09: 00007ffd0d727930
[   41.746534] R10: 00007ffd0d727930 R11: 0000000000000213 R12: 0000000000401180
[   41.747300] R13: 00007ffd0d727a50 R14: 0000000000000000 R15: 0000000000000000
[   41.748110]  </TASK>
[   41.748375] irq event stamp: 0
[   41.748738] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   41.749193] hardirqs last disabled at (0): [<ffffffff810fff0c>] copy_process+0x11cc/0x2b10
[   41.750081] softirqs last  enabled at (0): [<ffffffff810fff10>] copy_process+0x11d0/0x2b10
[   41.750973] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   41.751641] ---[ end trace 0000000000000000 ]---
[   41.752286] ------------[ cut here ]------------
[   41.752812] WARNING: CPU: 1 PID: 784 at drivers/iommu/iommufd/pages.c:1290 __iopt_area_unfill_domain+0x54f/0x560
[   41.753930] Modules linked in:
[   41.754284] CPU: 1 PID: 784 Comm: repro Tainted: G    B   W          6.1.0-a0a6c76cf2a5+ #1
[   41.755155] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   41.756347] RIP: 0010:__iopt_area_unfill_domain+0x54f/0x560
[   41.756994] Code: e8 86 9e 2b ff 85 db 0f 85 35 fb ff ff e8 09 9d 2b ff 0f 0b e9 29 fb ff ff e8 fd 9c 2b ff 0f 0b e9 69 fe ff ff e8 f1 9c 2b ff <0f> 0b e9 58 ff ff ff e8 65 2d dc 00 0f 1f 44 00 00 0f 1f 44 00 00
[   41.758976] RSP: 0018:ffffc90001563ae0 EFLAGS: 00010246
[   41.759535] RAX: 0000000000000000 RBX: 00000000fffffffe RCX: ffffffff81fe0d26
[   41.760314] RDX: 0000000000000000 RSI: ffff88800ca22980 RDI: 0000000000000002
[   41.761119] RBP: ffffc90001563d10 R08: 000000000003b5c5 R09: 0000000000000008
[   41.761895] R10: 000000000003b5a0 R11: 0000000000000024 R12: 00000000000007ff
[   41.762673] R13: 0000000000000802 R14: 00000000000007ff R15: 0000000000000800
[   41.763446] FS:  00007f3777af9740(0000) GS:ffff88807dd00000(0000) knlGS:0000000000000000
[   41.764323] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   41.764953] CR2: 00007f3777c1e580 CR3: 000000000cab4005 CR4: 0000000000770ee0
[   41.765709] PKRU: 55555554
[   41.766005] Call Trace:
[   41.766280]  <TASK>
[   41.766549]  ? rcu_read_lock_sched_held+0x29/0x80
[   41.767091]  ? lock_acquire+0x1a1/0x2f0
[   41.767545]  ? rcu_read_lock_held_common+0x12/0x50
[   41.768096]  ? rcu_read_lock_sched_held+0x29/0x80
[   41.768638]  ? __mutex_lock+0x13a/0xf30
[   41.769127]  ? write_comp_data+0x2f/0x90
[   41.769562]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   41.770091]  iopt_area_unfill_domain+0x32/0x40
[   41.770612]  iopt_table_remove_domain+0x23f/0x4c0
[   41.770992]  iommufd_device_selftest_detach+0x3a/0x90
[   41.771375]  iommufd_selftest_destroy+0x55/0x70
[   41.771711]  iommufd_object_destroy_user+0xce/0x130
[   41.772079]  iommufd_destroy+0xa2/0xc0
[   41.772354]  iommufd_fops_ioctl+0x1ef/0x310
[   41.772695]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   41.773069]  ? write_comp_data+0x2f/0x90
[   41.773360]  __x64_sys_ioctl+0x10e/0x160
[   41.773650]  ? iommufd_get_object.part.6+0x1c0/0x1c0
[   41.774031]  do_syscall_64+0x3b/0x90
[   41.774325]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   41.774693] RIP: 0033:0x7f3777c1e59d
[   41.774954] Code: 00 c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d d3 08 0d 00 f7 d8 64 89 01 48
[   41.776230] RSP: 002b:00007ffd0d727918 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   41.776815] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f3777c1e59d
[   41.777311] RDX: 0000000020000140 RSI: 0000000000003b80 RDI: 0000000000000003
[   41.777832] RBP: 00007ffd0d727930 R08: 00007ffd0d727930 R09: 00007ffd0d727930
[   41.778320] R10: 00007ffd0d727930 R11: 0000000000000213 R12: 0000000000401180
[   41.778839] R13: 00007ffd0d727a50 R14: 0000000000000000 R15: 0000000000000000
[   41.779346]  </TASK>
[   41.779515] irq event stamp: 0
[   41.779759] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   41.780225] hardirqs last disabled at (0): [<ffffffff810fff0c>] copy_process+0x11cc/0x2b10
[   41.780847] softirqs last  enabled at (0): [<ffffffff810fff10>] copy_process+0x11d0/0x2b10
[   41.781428] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   41.781891] ---[ end trace 0000000000000000 ]---
[   41.782312] ------------[ cut here ]------------
[   41.782653] WARNING: CPU: 1 PID: 784 at drivers/iommu/iommufd/pages.c:886 update_unpinned+0x75/0x80
[   41.783297] Modules linked in:
[   41.783527] CPU: 1 PID: 784 Comm: repro Tainted: G    B   W          6.1.0-a0a6c76cf2a5+ #1
[   41.784121] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   41.784945] RIP: 0010:update_unpinned+0x75/0x80
[   41.785296] Code: ac 2b ff 48 89 de 31 c9 31 d2 4c 29 e6 4c 89 ef e8 70 fb ff ff e8 bb ac 2b ff 5b 41 5c 41 5d 5d c3 cc cc cc cc e8 ab ac 2b ff <0f> 0b eb e7 0f 1f 80 00 00 00 00 0f 1f 44 00 00 55 48 89 e5 41 57
[   41.786587] RSP: 0018:ffffc90001563ab8 EFLAGS: 00010246
[   41.786957] RAX: 0000000000000000 RBX: 0000000000000800 RCX: ffffffff81fdfdcf
[   41.787483] RDX: 0000000000000000 RSI: ffff88800ca22980 RDI: 0000000000000002
[   41.787979] RBP: ffffc90001563ad0 R08: 0000000000000000 R09: ffff88807dd3b920
[   41.788493] R10: 0000000000000b19 R11: 0000000000000009 R12: ffffffffffffffff
[   41.789005] R13: ffff888005ec9c00 R14: 00000000000007ff R15: 0000000000000800
[   41.789521] FS:  00007f3777af9740(0000) GS:ffff88807dd00000(0000) knlGS:0000000000000000
[   41.790078] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   41.790507] CR2: 00007f3777c1e580 CR3: 000000000cab4005 CR4: 0000000000770ee0
[   41.790984] PKRU: 55555554
[   41.791177] Call Trace:
[   41.791357]  <TASK>
[   41.791537]  __iopt_area_unfill_domain+0x4e1/0x560
[   41.791898]  ? rcu_read_lock_sched_held+0x29/0x80
[   41.792248]  ? lock_acquire+0x1a1/0x2f0
[   41.792556]  ? rcu_read_lock_held_common+0x12/0x50
[   41.792945]  ? rcu_read_lock_sched_held+0x29/0x80
[   41.793296]  ? __mutex_lock+0x13a/0xf30
[   41.793582]  ? write_comp_data+0x2f/0x90
[   41.793906]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   41.794261]  iopt_area_unfill_domain+0x32/0x40
[   41.794609]  iopt_table_remove_domain+0x23f/0x4c0
[   41.794980]  iommufd_device_selftest_detach+0x3a/0x90
[   41.795375]  iommufd_selftest_destroy+0x55/0x70
[   41.795721]  iommufd_object_destroy_user+0xce/0x130
[   41.796104]  iommufd_destroy+0xa2/0xc0
[   41.796389]  iommufd_fops_ioctl+0x1ef/0x310
[   41.796721]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   41.797094]  ? write_comp_data+0x2f/0x90
[   41.797396]  __x64_sys_ioctl+0x10e/0x160
[   41.797704]  ? iommufd_get_object.part.6+0x1c0/0x1c0
[   41.798091]  do_syscall_64+0x3b/0x90
[   41.798367]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   41.798755] RIP: 0033:0x7f3777c1e59d
[   41.799020] Code: 00 c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d d3 08 0d 00 f7 d8 64 89 01 48
[   41.800347] RSP: 002b:00007ffd0d727918 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   41.800936] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f3777c1e59d
[   41.801477] RDX: 0000000020000140 RSI: 0000000000003b80 RDI: 0000000000000003
[   41.801988] RBP: 00007ffd0d727930 R08: 00007ffd0d727930 R09: 00007ffd0d727930
[   41.802529] R10: 00007ffd0d727930 R11: 0000000000000213 R12: 0000000000401180
[   41.803042] R13: 00007ffd0d727a50 R14: 0000000000000000 R15: 0000000000000000
[   41.803584]  </TASK>
[   41.803754] irq event stamp: 0
[   41.803979] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   41.804448] hardirqs last disabled at (0): [<ffffffff810fff0c>] copy_process+0x11cc/0x2b10
[   41.805080] softirqs last  enabled at (0): [<ffffffff810fff10>] copy_process+0x11d0/0x2b10
[   41.805689] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   41.806142] ---[ end trace 0000000000000000 ]---
[   41.809033] ------------[ cut here ]------------
[   41.809412] WARNING: CPU: 1 PID: 784 at drivers/iommu/iommufd/pages.c:178 batch_unpin.isra.23+0x151/0x1a0
[   41.810135] Modules linked in:
[   41.810370] CPU: 1 PID: 784 Comm: repro Tainted: G    B   W          6.1.0-a0a6c76cf2a5+ #1
[   41.810976] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   41.811805] RIP: 0010:batch_unpin.isra.23+0x151/0x1a0
[   41.812198] Code: e8 c4 be 2b ff 48 8b 45 d0 48 85 c0 75 17 e8 26 bd 2b ff 48 8b 7d c8 48 89 de e8 fa bd 2b ff 48 39 5d c8 73 07 e8 0f bd 2b ff <0f> 0b e8 08 bd 2b ff 4d 29 e5 31 ff 41 83 c6 01 4c 89 ee 31 db e8
[   41.813539] RSP: 0018:ffffc900015639d8 EFLAGS: 00010246
[   41.813920] RAX: 0000000000000000 RBX: fffffffffffffffe RCX: ffffffff81fdeda6
[   41.814450] RDX: 0000000000000000 RSI: ffff88800ca22980 RDI: 0000000000000002
[   41.814962] RBP: ffffc90001563a20 R08: 0000000000000000 R09: ffff88807dd3b890
[   41.815485] R10: 000000000000131a R11: 0000000000000000 R12: 0000000000000001
[   41.815986] R13: 0000000000000001 R14: 0000000000000000 R15: ffff888005ec9c00
[   41.816533] FS:  0000000000000000(0000) GS:ffff88807dd00000(0000) knlGS:0000000000000000
[   41.817127] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   41.817543] CR2: 00007f3777cf0500 CR3: 0000000003c12004 CR4: 0000000000770ee0
[   41.818075] PKRU: 55555554
[   41.818316] Call Trace:
[   41.818515]  <TASK>
[   41.818701]  iopt_pages_unfill_xarray+0x39f/0x5c0
[   41.819071]  ? rcu_read_lock_held_common+0x12/0x50
[   41.819434]  ? write_comp_data+0x2f/0x90
[   41.819746]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   41.820121]  ? write_comp_data+0x2f/0x90
[   41.820419]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   41.820780]  ? interval_tree_remove+0x291/0x4e0
[   41.821146]  ? write_comp_data+0x2f/0x90
[   41.821447]  iopt_area_remove_access+0x108/0x120
[   41.821798]  iommufd_access_unpin_pages+0x177/0x210
[   41.822201]  iommufd_test_access_unmap+0xe0/0x130
[   41.822568]  ? iommufd_test_access_unmap+0x130/0x130
[   41.822939]  iommufd_test_staccess_release+0x39/0x60
[   41.823335]  __fput+0x11f/0x450
[   41.823586]  ____fput+0x1e/0x30
[   41.823838]  task_work_run+0xb6/0x120
[   41.824145]  do_exit+0x521/0x1340
[   41.824421]  ? lock_release+0x202/0x2c0
[   41.824733]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   41.825090]  ? trace_hardirqs_on+0x3f/0x100
[   41.825432]  do_group_exit+0x5e/0xf0
[   41.825704]  __x64_sys_exit_group+0x25/0x30
[   41.826017]  do_syscall_64+0x3b/0x90
[   41.826318]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   41.826705] RIP: 0033:0x7f3777be6cf6
[   41.826976] Code: Unable to access opcode bytes at 0x7f3777be6ccc.
[   41.827446] RSP: 002b:00007ffd0d7278d8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
[   41.827989] RAX: ffffffffffffffda RBX: 00007f3777cf1490 RCX: 00007f3777be6cf6
[   41.828514] RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
[   41.829040] RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffff80
[   41.829568] R10: 0000000000000004 R11: 0000000000000246 R12: 00007f3777cf1490
[   41.830072] R13: 0000000000000001 R14: 00007f3777cf4e88 R15: 0000000000000000
[   41.830583]  </TASK>
[   41.830774] irq event stamp: 0
[   41.831003] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   41.831458] hardirqs last disabled at (0): [<ffffffff810fff0c>] copy_process+0x11cc/0x2b10
[   41.832065] softirqs last  enabled at (0): [<ffffffff810fff10>] copy_process+0x11d0/0x2b10
[   41.832695] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   41.833161] ---[ end trace 0000000000000000 ]---
[   41.833592] ------------[ cut here ]------------
[   41.833954] WARNING: CPU: 1 PID: 784 at drivers/iommu/iommufd/pages.c:886 update_unpinned+0x75/0x80
[   41.834634] Modules linked in:
[   41.834864] CPU: 1 PID: 784 Comm: repro Tainted: G    B   W          6.1.0-a0a6c76cf2a5+ #1
[   41.835493] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   41.836319] RIP: 0010:update_unpinned+0x75/0x80
[   41.836674] Code: ac 2b ff 48 89 de 31 c9 31 d2 4c 29 e6 4c 89 ef e8 70 fb ff ff e8 bb ac 2b ff 5b 41 5c 41 5d 5d c3 cc cc cc cc e8 ab ac 2b ff <0f> 0b eb e7 0f 1f 80 00 00 00 00 0f 1f 44 00 00 55 48 89 e5 41 57
[   41.837998] RSP: 0018:ffffc90001563a08 EFLAGS: 00010246
[   41.838402] RAX: 0000000000000000 RBX: 0000000000000800 RCX: ffffffff81fdfdcf
[   41.838916] RDX: 0000000000000000 RSI: ffff88800ca22980 RDI: 0000000000000002
[   41.839439] RBP: ffffc90001563a20 R08: 0000000000000000 R09: ffff88807dd3b890
[   41.839961] R10: 000000000000131a R11: 0000000000000000 R12: fffffffffffffffe
[   41.840511] R13: ffff888005ec9c00 R14: 0000000000000002 R15: 0000000000000002
[   41.841040] FS:  0000000000000000(0000) GS:ffff88807dd00000(0000) knlGS:0000000000000000
[   41.841653] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   41.842082] CR2: 00007f3777cf0500 CR3: 0000000003c12004 CR4: 0000000000770ee0
[   41.842604] PKRU: 55555554
[   41.842808] Call Trace:
[   41.842994]  <TASK>
[   41.843158]  iopt_pages_unfill_xarray+0x522/0x5c0
[   41.843526]  ? rcu_read_lock_held_common+0x12/0x50
[   41.843897]  ? write_comp_data+0x2f/0x90
[   41.844196]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   41.844543]  ? write_comp_data+0x2f/0x90
[   41.844854]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   41.845211]  ? interval_tree_remove+0x291/0x4e0
[   41.845558]  ? write_comp_data+0x2f/0x90
[   41.845853]  iopt_area_remove_access+0x108/0x120
[   41.846209]  iommufd_access_unpin_pages+0x177/0x210
[   41.846593]  iommufd_test_access_unmap+0xe0/0x130
[   41.846945]  ? iommufd_test_access_unmap+0x130/0x130
[   41.847321]  iommufd_test_staccess_release+0x39/0x60
[   41.847701]  __fput+0x11f/0x450
[   41.847951]  ____fput+0x1e/0x30
[   41.848201]  task_work_run+0xb6/0x120
[   41.848485]  do_exit+0x521/0x1340
[   41.848752]  ? lock_release+0x202/0x2c0
[   41.849042]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   41.849380]  ? trace_hardirqs_on+0x3f/0x100
[   41.849700]  do_group_exit+0x5e/0xf0
[   41.849970]  __x64_sys_exit_group+0x25/0x30
[   41.850285]  do_syscall_64+0x3b/0x90
[   41.850567]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   41.850936] RIP: 0033:0x7f3777be6cf6
[   41.851211] Code: Unable to access opcode bytes at 0x7f3777be6ccc.
[   41.851659] RSP: 002b:00007ffd0d7278d8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
[   41.852202] RAX: ffffffffffffffda RBX: 00007f3777cf1490 RCX: 00007f3777be6cf6
[   41.852731] RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
[   41.853241] RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffff80
[   41.853751] R10: 0000000000000004 R11: 0000000000000246 R12: 00007f3777cf1490
[   41.854255] R13: 0000000000000001 R14: 00007f3777cf4e88 R15: 0000000000000000
[   41.854770]  </TASK>
[   41.854942] irq event stamp: 0
[   41.855172] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   41.855629] hardirqs last disabled at (0): [<ffffffff810fff0c>] copy_process+0x11cc/0x2b10
[   41.856239] softirqs last  enabled at (0): [<ffffffff810fff10>] copy_process+0x11d0/0x2b10
[   41.856838] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   41.857283] ---[ end trace 0000000000000000 ]---
[   41.857767] ------------[ cut here ]------------
[   41.858109] WARNING: CPU: 1 PID: 784 at drivers/iommu/iommufd/pages.c:1181 iopt_release_pages+0x159/0x190
[   41.858802] Modules linked in:
[   41.859033] CPU: 1 PID: 784 Comm: repro Tainted: G    B   W          6.1.0-a0a6c76cf2a5+ #1
[   41.859627] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   41.860421] RIP: 0010:iopt_release_pages+0x159/0x190
[   41.860805] Code: b5 11 ff eb cb e8 87 90 2b ff be 03 00 00 00 4c 89 f7 e8 6a 8b ce ff eb b7 e8 73 90 2b ff 0f 0b e9 ed fe ff ff e8 67 90 2b ff <0f> 0b e9 00 ff ff ff e8 5b 90 2b ff 0f 0b e9 07 ff ff ff e8 4f 90
[   41.862104] RSP: 0018:ffffc90001563c88 EFLAGS: 00010246
[   41.862487] RAX: 0000000000000000 RBX: ffff888005ec9c00 RCX: ffffffff81fe1957
[   41.862991] RDX: 0000000000000000 RSI: ffff88800ca22980 RDI: 0000000000000002
[   41.863504] RBP: ffffc90001563ca8 R08: 0000000000000000 R09: 0000000000000000
[   41.864009] R10: ffffc90001563c58 R11: 0000000000000000 R12: fffffffffffffffe
[   41.864516] R13: 0000000001000000 R14: 00000000017fffff R15: 0000000000000000
[   41.865029] FS:  0000000000000000(0000) GS:ffff88807dd00000(0000) knlGS:0000000000000000
[   41.865602] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   41.866022] CR2: 00007f3777cf0500 CR3: 0000000003c12004 CR4: 0000000000770ee0
[   41.866538] PKRU: 55555554
[   41.866744] Call Trace:
[   41.866927]  <TASK>
[   41.867094]  iopt_unmap_iova_range+0x1ef/0x2e0
[   41.867440]  iopt_unmap_all+0x2f/0x60
[   41.867722]  iommufd_ioas_destroy+0x2c/0x70
[   41.868038]  iommufd_fops_release+0xd4/0x170
[   41.868364]  ? iommufd_ctx_get+0x30/0x30
[   41.868678]  __fput+0x11f/0x450
[   41.868926]  ____fput+0x1e/0x30
[   41.869180]  task_work_run+0xb6/0x120
[   41.869471]  do_exit+0x521/0x1340
[   41.869726]  ? lock_release+0x202/0x2c0
[   41.870014]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   41.870367]  ? trace_hardirqs_on+0x3f/0x100
[   41.870697]  do_group_exit+0x5e/0xf0
[   41.870973]  __x64_sys_exit_group+0x25/0x30
[   41.871295]  do_syscall_64+0x3b/0x90
[   41.871576]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   41.871947] RIP: 0033:0x7f3777be6cf6
[   41.872213] Code: Unable to access opcode bytes at 0x7f3777be6ccc.
[   41.872667] RSP: 002b:00007ffd0d7278d8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
[   41.873209] RAX: ffffffffffffffda RBX: 00007f3777cf1490 RCX: 00007f3777be6cf6
[   41.873725] RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
[   41.874241] RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffff80
[   41.874758] R10: 0000000000000004 R11: 0000000000000246 R12: 00007f3777cf1490
[   41.875269] R13: 0000000000000001 R14: 00007f3777cf4e88 R15: 0000000000000000
[   41.875806]  </TASK>
[   41.875976] irq event stamp: 0
[   41.876206] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   41.876672] hardirqs last disabled at (0): [<ffffffff810fff0c>] copy_process+0x11cc/0x2b10
[   41.877266] softirqs last  enabled at (0): [<ffffffff810fff10>] copy_process+0x11d0/0x2b10
[   41.877873] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   41.878329] ---[ end trace 0000000000000000 ]---
[   42.080197] ------------[ cut here ]------------
[   42.080564] WARNING: CPU: 0 PID: 793 at drivers/iommu/iommufd/pages.c:294 __iopt_area_unfill_domain+0x152/0x560
[   42.081300] Modules linked in:
[   42.081528] CPU: 0 PID: 793 Comm: repro Tainted: G    B   W          6.1.0-a0a6c76cf2a5+ #1
[   42.082105] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   42.083119] RIP: 0010:__iopt_area_unfill_domain+0x152/0x560
[   42.083519] Code: a1 2b ff 44 8b 64 24 54 48 8b 44 24 48 31 ff 44 89 e6 48 89 44 24 38 e8 6c a2 2b ff 45 85 e4 0f 85 eb 01 00 00 e8 ee a0 2b ff <0f> 0b e8 e7 a0 2b ff 48 8b 44 24 38 89 5c 24 58 89 18 8b 44 24 54
[   42.084938] RSP: 0018:ffffc9000159bae0 EFLAGS: 00010246
[   42.085307] RAX: 0000000000000000 RBX: 00000000ffffffff RCX: ffffffff81fe0bd5
[   42.085795] RDX: 0000000000000000 RSI: ffff8880135dd300 RDI: 0000000000000002
[   42.086282] RBP: ffffc9000159bd10 R08: 000000000003b5c5 R09: 000000000000000b
[   42.086790] R10: 000000000003b5a0 R11: 0000000000000024 R12: 0000000000000001
[   42.087282] R13: 0000000000000801 R14: 00000000000007ff R15: 0000000000000800
[   42.087768] FS:  00007f3777af9740(0000) GS:ffff88807dc00000(0000) knlGS:0000000000000000
[   42.088319] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   42.088735] CR2: 00007f3777c1e580 CR3: 000000000b340001 CR4: 0000000000770ef0
[   42.089237] PKRU: 55555554
[   42.089435] Call Trace:
[   42.089617]  <TASK>
[   42.089784]  ? rcu_read_lock_sched_held+0x29/0x80
[   42.090125]  ? lock_acquire+0x1a1/0x2f0
[   42.090405]  ? rcu_read_lock_held_common+0x12/0x50
[   42.090752]  ? rcu_read_lock_sched_held+0x29/0x80
[   42.091092]  ? __mutex_lock+0x13a/0xf30
[   42.091384]  ? write_comp_data+0x2f/0x90
[   42.091679]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   42.092027]  iopt_area_unfill_domain+0x32/0x40
[   42.092353]  iopt_table_remove_domain+0x23f/0x4c0
[   42.092708]  iommufd_device_selftest_detach+0x3a/0x90
[   42.093082]  iommufd_selftest_destroy+0x55/0x70
[   42.093416]  iommufd_object_destroy_user+0xce/0x130
[   42.093813]  iommufd_destroy+0xa2/0xc0
[   42.094095]  iommufd_fops_ioctl+0x1ef/0x310
[   42.094405]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   42.094756]  ? write_comp_data+0x2f/0x90
[   42.095051]  __x64_sys_ioctl+0x10e/0x160
[   42.095349]  ? iommufd_get_object.part.6+0x1c0/0x1c0
[   42.095703]  do_syscall_64+0x3b/0x90
[   42.095976]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   42.096339] RIP: 0033:0x7f3777c1e59d
[   42.096596] Code: 00 c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d d3 08 0d 00 f7 d8 64 89 01 48
[   42.097874] RSP: 002b:00007ffd0d727918 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   42.098395] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f3777c1e59d
[   42.098892] RDX: 0000000020000140 RSI: 0000000000003b80 RDI: 0000000000000003
[   42.099393] RBP: 00007ffd0d727930 R08: 00007ffd0d727930 R09: 00007ffd0d727930
[   42.099894] R10: 00007ffd0d727930 R11: 0000000000000213 R12: 0000000000401180
[   42.100383] R13: 00007ffd0d727a50 R14: 0000000000000000 R15: 0000000000000000
[   42.100900]  </TASK>
[   42.101064] irq event stamp: 0
[   42.101282] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   42.101717] hardirqs last disabled at (0): [<ffffffff810fff0c>] copy_process+0x11cc/0x2b10
[   42.102295] softirqs last  enabled at (0): [<ffffffff810fff10>] copy_process+0x11d0/0x2b10
[   42.102875] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   42.103319] ---[ end trace 0000000000000000 ]---
[   42.103739] ------------[ cut here ]------------
[   42.104067] WARNING: CPU: 0 PID: 793 at drivers/iommu/iommufd/pages.c:1290 __iopt_area_unfill_domain+0x54f/0x560
[   42.104788] Modules linked in:
[   42.105013] CPU: 0 PID: 793 Comm: repro Tainted: G    B   W          6.1.0-a0a6c76cf2a5+ #1
[   42.105589] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   42.106383] RIP: 0010:__iopt_area_unfill_domain+0x54f/0x560
[   42.106790] Code: e8 86 9e 2b ff 85 db 0f 85 35 fb ff ff e8 09 9d 2b ff 0f 0b e9 29 fb ff ff e8 fd 9c 2b ff 0f 0b e9 69 fe ff ff e8 f1 9c 2b ff <0f> 0b e9 58 ff ff ff e8 65 2d dc 00 0f 1f 44 00 00 0f 1f 44 00 00
[   42.108056] RSP: 0018:ffffc9000159bae0 EFLAGS: 00010246
[   42.108420] RAX: 0000000000000000 RBX: 00000000ffffffff RCX: ffffffff81fe0d26
[   42.108982] RDX: 0000000000000000 RSI: ffff8880135dd300 RDI: 0000000000000002
[   42.109472] RBP: ffffc9000159bd10 R08: 000000000003b5c5 R09: 000000000000000b
[   42.109972] R10: 000000000003b5a0 R11: 0000000000000024 R12: 00000000000007ff
[   42.110478] R13: 0000000000000801 R14: 00000000000007ff R15: 0000000000000800
[   42.110981] FS:  00007f3777af9740(0000) GS:ffff88807dc00000(0000) knlGS:0000000000000000
[   42.111539] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   42.111945] CR2: 00007f3777c1e580 CR3: 000000000b340001 CR4: 0000000000770ef0
[   42.112436] PKRU: 55555554
[   42.112632] Call Trace:
[   42.112843]  <TASK>
[   42.113014]  ? rcu_read_lock_sched_held+0x29/0x80
[   42.113365]  ? lock_acquire+0x1a1/0x2f0
[   42.113651]  ? rcu_read_lock_held_common+0x12/0x50
[   42.114001]  ? rcu_read_lock_sched_held+0x29/0x80
[   42.114340]  ? __mutex_lock+0x13a/0xf30
[   42.114632]  ? write_comp_data+0x2f/0x90
[   42.114916]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   42.115257]  iopt_area_unfill_domain+0x32/0x40
[   42.115589]  iopt_table_remove_domain+0x23f/0x4c0
[   42.115947]  iommufd_device_selftest_detach+0x3a/0x90
[   42.116322]  iommufd_selftest_destroy+0x55/0x70
[   42.116669]  iommufd_object_destroy_user+0xce/0x130
[   42.117027]  iommufd_destroy+0xa2/0xc0
[   42.117316]  iommufd_fops_ioctl+0x1ef/0x310
[   42.117627]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   42.117962]  ? write_comp_data+0x2f/0x90
[   42.118254]  __x64_sys_ioctl+0x10e/0x160
[   42.118551]  ? iommufd_get_object.part.6+0x1c0/0x1c0
[   42.118894]  do_syscall_64+0x3b/0x90
[   42.119154]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   42.119512] RIP: 0033:0x7f3777c1e59d
[   42.119768] Code: 00 c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d d3 08 0d 00 f7 d8 64 89 01 48
[   42.121026] RSP: 002b:00007ffd0d727918 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   42.121553] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f3777c1e59d
[   42.122061] RDX: 0000000020000140 RSI: 0000000000003b80 RDI: 0000000000000003
[   42.122566] RBP: 00007ffd0d727930 R08: 00007ffd0d727930 R09: 00007ffd0d727930
[   42.123057] R10: 00007ffd0d727930 R11: 0000000000000213 R12: 0000000000401180
[   42.123544] R13: 00007ffd0d727a50 R14: 0000000000000000 R15: 0000000000000000
[   42.124042]  </TASK>
[   42.124208] irq event stamp: 0
[   42.124430] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   42.124878] hardirqs last disabled at (0): [<ffffffff810fff0c>] copy_process+0x11cc/0x2b10
[   42.125451] softirqs last  enabled at (0): [<ffffffff810fff10>] copy_process+0x11d0/0x2b10
[   42.126030] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   42.126482] ---[ end trace 0000000000000000 ]---
[   42.131461] ------------[ cut here ]------------
[   42.131806] WARNING: CPU: 0 PID: 793 at drivers/iommu/iommufd/pages.c:178 batch_unpin.isra.23+0x151/0x1a0
[   42.132620] Modules linked in:
[   42.132900] CPU: 0 PID: 793 Comm: repro Tainted: G    B   W          6.1.0-a0a6c76cf2a5+ #1
[   42.133484] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   42.134257] RIP: 0010:batch_unpin.isra.23+0x151/0x1a0
[   42.134733] Code: e8 c4 be 2b ff 48 8b 45 d0 48 85 c0 75 17 e8 26 bd 2b ff 48 8b 7d c8 48 89 de e8 fa bd 2b ff 48 39 5d c8 73 07 e8 0f bd 2b ff <0f> 0b e8 08 bd 2b ff 4d 29 e5 31 ff 41 83 c6 01 4c 89 ee 31 db e8
[   42.136007] RSP: 0018:ffffc9000159b9d8 EFLAGS: 00010246
[   42.136375] RAX: 0000000000000000 RBX: ffffffffffffffff RCX: ffffffff81fded8c
[   42.136884] RDX: 0000000000000000 RSI: ffff8880135dd300 RDI: 0000000000000002
[   42.137380] RBP: ffffc9000159ba20 R08: 0000000000000000 R09: ffff88807dc3b890
[   42.137865] R10: 0000000000000c95 R11: 0000000000000000 R12: 0000000000000001
[   42.138374] R13: 0000000000000001 R14: 0000000000000000 R15: ffff888009f84e00
[   42.138870] FS:  0000000000000000(0000) GS:ffff88807dc00000(0000) knlGS:0000000000000000
[   42.139424] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   42.139830] CR2: 00007f3777c1e580 CR3: 0000000013558003 CR4: 0000000000770ef0
[   42.140320] PKRU: 55555554
[   42.140520] Call Trace:
[   42.140720]  <TASK>
[   42.140886]  iopt_pages_unfill_xarray+0x39f/0x5c0
[   42.141243]  ? rcu_read_lock_held_common+0x12/0x50
[   42.141588]  ? write_comp_data+0x2f/0x90
[   42.141879]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   42.142221]  ? write_comp_data+0x2f/0x90
[   42.142527]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   42.142865]  ? interval_tree_remove+0x291/0x4e0
[   42.143201]  ? write_comp_data+0x2f/0x90
[   42.143502]  iopt_area_remove_access+0x108/0x120
[   42.143847]  iommufd_access_unpin_pages+0x177/0x210
[   42.144215]  iommufd_test_access_unmap+0xe0/0x130
[   42.144561]  ? iommufd_test_access_unmap+0x130/0x130
[   42.144933]  iommufd_test_staccess_release+0x39/0x60
[   42.145295]  __fput+0x11f/0x450
[   42.145541]  ____fput+0x1e/0x30
[   42.145789]  task_work_run+0xb6/0x120
[   42.146065]  do_exit+0x521/0x1340
[   42.146309]  ? lock_release+0x202/0x2c0
[   42.146591]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   42.146933]  ? trace_hardirqs_on+0x3f/0x100
[   42.147306]  do_group_exit+0x5e/0xf0
[   42.147607]  __x64_sys_exit_group+0x25/0x30
[   42.147916]  do_syscall_64+0x3b/0x90
[   42.148195]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   42.148576] RIP: 0033:0x7f3777be6cf6
[   42.148861] Code: Unable to access opcode bytes at 0x7f3777be6ccc.
[   42.149302] RSP: 002b:00007ffd0d7278d8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
[   42.149844] RAX: ffffffffffffffda RBX: 00007f3777cf1490 RCX: 00007f3777be6cf6
[   42.150364] RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
[   42.150888] RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffff80
[   42.151400] R10: 0000000000000004 R11: 0000000000000246 R12: 00007f3777cf1490
[   42.151909] R13: 0000000000000001 R14: 00007f3777cf4e88 R15: 0000000000000000
[   42.152430]  </TASK>
[   42.152600] irq event stamp: 0
[   42.152844] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   42.153307] hardirqs last disabled at (0): [<ffffffff810fff0c>] copy_process+0x11cc/0x2b10
[   42.153940] softirqs last  enabled at (0): [<ffffffff810fff10>] copy_process+0x11d0/0x2b10
[   42.154546] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   42.154996] ---[ end trace 0000000000000000 ]---
[   42.155427] ------------[ cut here ]------------
[   42.155771] WARNING: CPU: 0 PID: 793 at drivers/iommu/iommufd/pages.c:886 update_unpinned+0x75/0x80
[   42.156436] Modules linked in:
[   42.156682] CPU: 0 PID: 793 Comm: repro Tainted: G    B   W          6.1.0-a0a6c76cf2a5+ #1
[   42.157286] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   42.158096] RIP: 0010:update_unpinned+0x75/0x80
[   42.158439] Code: ac 2b ff 48 89 de 31 c9 31 d2 4c 29 e6 4c 89 ef e8 70 fb ff ff e8 bb ac 2b ff 5b 41 5c 41 5d 5d c3 cc cc cc cc e8 ab ac 2b ff <0f> 0b eb e7 0f 1f 80 00 00 00 00 0f 1f 44 00 00 55 48 89 e5 41 57
[   42.159750] RSP: 0018:ffffc9000159ba08 EFLAGS: 00010246
[   42.160136] RAX: 0000000000000000 RBX: 0000000000000000 RCX: ffffffff81fdfdcf
[   42.160637] RDX: 0000000000000000 RSI: ffff8880135dd300 RDI: 0000000000000002
[   42.161170] RBP: ffffc9000159ba20 R08: 0000000000000000 R09: ffff88807dc3b890
[   42.161677] R10: 0000000000000c95 R11: 0000000000000000 R12: ffffffffffffffff
[   42.162189] R13: ffff888009f84e00 R14: 0000000000000002 R15: 0000000000000002
[   42.162706] FS:  0000000000000000(0000) GS:ffff88807dc00000(0000) knlGS:0000000000000000
[   42.163278] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   42.163698] CR2: 00007f3777c1e580 CR3: 0000000013558003 CR4: 0000000000770ef0
[   42.164214] PKRU: 55555554
[   42.164419] Call Trace:
[   42.164601]  <TASK>
[   42.164782]  iopt_pages_unfill_xarray+0x522/0x5c0
[   42.165155]  ? rcu_read_lock_held_common+0x12/0x50
[   42.165523]  ? write_comp_data+0x2f/0x90
[   42.165822]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   42.166177]  ? write_comp_data+0x2f/0x90
[   42.166480]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   42.166969]  ? interval_tree_remove+0x291/0x4e0
[   42.167314]  ? write_comp_data+0x2f/0x90
[   42.167618]  iopt_area_remove_access+0x108/0x120
[   42.167979]  iommufd_access_unpin_pages+0x177/0x210
[   42.168354]  iommufd_test_access_unmap+0xe0/0x130
[   42.168729]  ? iommufd_test_access_unmap+0x130/0x130
[   42.169100]  iommufd_test_staccess_release+0x39/0x60
[   42.169474]  __fput+0x11f/0x450
[   42.169726]  ____fput+0x1e/0x30
[   42.169977]  task_work_run+0xb6/0x120
[   42.170268]  do_exit+0x521/0x1340
[   42.170532]  ? lock_release+0x202/0x2c0
[   42.170826]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   42.171178]  ? trace_hardirqs_on+0x3f/0x100
[   42.171507]  do_group_exit+0x5e/0xf0
[   42.171786]  __x64_sys_exit_group+0x25/0x30
[   42.172104]  do_syscall_64+0x3b/0x90
[   42.172378]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   42.172770] RIP: 0033:0x7f3777be6cf6
[   42.173042] Code: Unable to access opcode bytes at 0x7f3777be6ccc.
[   42.173488] RSP: 002b:00007ffd0d7278d8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
[   42.174028] RAX: ffffffffffffffda RBX: 00007f3777cf1490 RCX: 00007f3777be6cf6
[   42.174560] RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
[   42.175076] RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffff80
[   42.175576] R10: 0000000000000004 R11: 0000000000000246 R12: 00007f3777cf1490
[   42.176092] R13: 0000000000000001 R14: 00007f3777cf4e88 R15: 0000000000000000
[   42.176601]  </TASK>
[   42.176792] irq event stamp: 0
[   42.177028] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   42.177483] hardirqs last disabled at (0): [<ffffffff810fff0c>] copy_process+0x11cc/0x2b10
[   42.178089] softirqs last  enabled at (0): [<ffffffff810fff10>] copy_process+0x11d0/0x2b10
[   42.178694] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   42.179140] ---[ end trace 0000000000000000 ]---
[   42.180211] ------------[ cut here ]------------
[   42.180585] WARNING: CPU: 0 PID: 793 at drivers/iommu/iommufd/pages.c:1181 iopt_release_pages+0x159/0x190
[   42.181405] Modules linked in:
[   42.181642] CPU: 0 PID: 793 Comm: repro Tainted: G    B   W          6.1.0-a0a6c76cf2a5+ #1
[   42.182248] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   42.183067] RIP: 0010:iopt_release_pages+0x159/0x190
[   42.183446] Code: b5 11 ff eb cb e8 87 90 2b ff be 03 00 00 00 4c 89 f7 e8 6a 8b ce ff eb b7 e8 73 90 2b ff 0f 0b e9 ed fe ff ff e8 67 90 2b ff <0f> 0b e9 00 ff ff ff e8 5b 90 2b ff 0f 0b e9 07 ff ff ff e8 4f 90
[   42.184753] RSP: 0018:ffffc9000159bc88 EFLAGS: 00010246
[   42.185163] RAX: 0000000000000000 RBX: ffff888009f84e00 RCX: ffffffff81fe1957
[   42.185671] RDX: 0000000000000000 RSI: ffff8880135dd300 RDI: 0000000000000002
[   42.186174] RBP: ffffc9000159bca8 R08: 0000000000000000 R09: 0000000000000000
[   42.186692] R10: ffffc9000159bc58 R11: 0000000000000000 R12: ffffffffffffffff
[   42.187215] R13: 0000000001000000 R14: 00000000017fffff R15: 0000000000000000
[   42.187733] FS:  0000000000000000(0000) GS:ffff88807dc00000(0000) knlGS:0000000000000000
[   42.188324] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   42.188784] CR2: 00007f3777c1e580 CR3: 000000000d51a002 CR4: 0000000000770ef0
[   42.189329] PKRU: 55555554
[   42.189535] Call Trace:
[   42.189728]  <TASK>
[   42.189902]  iopt_unmap_iova_range+0x1ef/0x2e0
[   42.190270]  iopt_unmap_all+0x2f/0x60
[   42.190563]  iommufd_ioas_destroy+0x2c/0x70
[   42.190878]  iommufd_fops_release+0xd4/0x170
[   42.191196]  ? iommufd_ctx_get+0x30/0x30
[   42.191487]  __fput+0x11f/0x450
[   42.191732]  ____fput+0x1e/0x30
[   42.192000]  task_work_run+0xb6/0x120
[   42.192291]  do_exit+0x521/0x1340
[   42.192556]  ? lock_release+0x202/0x2c0
[   42.192882]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   42.193241]  ? trace_hardirqs_on+0x3f/0x100
[   42.193577]  do_group_exit+0x5e/0xf0
[   42.193851]  __x64_sys_exit_group+0x25/0x30
[   42.194165]  do_syscall_64+0x3b/0x90
[   42.194446]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   42.194834] RIP: 0033:0x7f3777be6cf6
[   42.195108] Code: Unable to access opcode bytes at 0x7f3777be6ccc.
[   42.195571] RSP: 002b:00007ffd0d7278d8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
[   42.196104] RAX: ffffffffffffffda RBX: 00007f3777cf1490 RCX: 00007f3777be6cf6
[   42.196610] RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
[   42.197130] RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffff80
[   42.197635] R10: 0000000000000004 R11: 0000000000000246 R12: 00007f3777cf1490
[   42.198142] R13: 0000000000000001 R14: 00007f3777cf4e88 R15: 0000000000000000
[   42.198656]  </TASK>
[   42.198826] irq event stamp: 0
[   42.199063] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   42.199512] hardirqs last disabled at (0): [<ffffffff810fff0c>] copy_process+0x11cc/0x2b10
[   42.200120] softirqs last  enabled at (0): [<ffffffff810fff10>] copy_process+0x11d0/0x2b10
[   42.200724] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   42.201169] ---[ end trace 0000000000000000 ]---
[   42.388933] ------------[ cut here ]------------
[   42.389303] WARNING: CPU: 0 PID: 802 at drivers/iommu/iommufd/pages.c:294 __iopt_area_unfill_domain+0x152/0x560
[   42.390030] Modules linked in:
[   42.390262] CPU: 0 PID: 802 Comm: repro Tainted: G    B   W          6.1.0-a0a6c76cf2a5+ #1
[   42.390865] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   42.391680] RIP: 0010:__iopt_area_unfill_domain+0x152/0x560
[   42.392099] Code: a1 2b ff 44 8b 64 24 54 48 8b 44 24 48 31 ff 44 89 e6 48 89 44 24 38 e8 6c a2 2b ff 45 85 e4 0f 85 eb 01 00 00 e8 ee a0 2b ff <0f> 0b e8 e7 a0 2b ff 48 8b 44 24 38 89 5c 24 58 89 18 8b 44 24 54
[   42.393678] RSP: 0018:ffffc900015e3ae0 EFLAGS: 00010246
[   42.394072] RAX: 0000000000000000 RBX: 00000000ffffffff RCX: ffffffff81fe0bd5
[   42.394604] RDX: 0000000000000000 RSI: ffff8880135dd300 RDI: 0000000000000002
[   42.395116] RBP: ffffc900015e3d10 R08: 000000000003b5c5 R09: 0000000000000010
[   42.395634] R10: 000000000003b5a0 R11: 0000000000000024 R12: 0000000000000001
[   42.396317] R13: 0000000000000801 R14: 00000000000007ff R15: 0000000000000800
[   42.396853] FS:  00007f3777af9740(0000) GS:ffff88807dc00000(0000) knlGS:0000000000000000
[   42.397424] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   42.397844] CR2: 00007f3777c1e580 CR3: 0000000017330002 CR4: 0000000000770ef0
[   42.398353] PKRU: 55555554
[   42.398568] Call Trace:
[   42.398759]  <TASK>
[   42.398932]  ? rcu_read_lock_sched_held+0x29/0x80
[   42.399294]  ? lock_acquire+0x1a1/0x2f0
[   42.399589]  ? rcu_read_lock_held_common+0x12/0x50
[   42.399947]  ? rcu_read_lock_sched_held+0x29/0x80
[   42.400301]  ? __mutex_lock+0x13a/0xf30
[   42.400597]  ? write_comp_data+0x2f/0x90
[   42.400917]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   42.401277]  iopt_area_unfill_domain+0x32/0x40
[   42.401620]  iopt_table_remove_domain+0x23f/0x4c0
[   42.401974]  iommufd_device_selftest_detach+0x3a/0x90
[   42.402365]  iommufd_selftest_destroy+0x55/0x70
[   42.402716]  iommufd_object_destroy_user+0xce/0x130
[   42.403085]  iommufd_destroy+0xa2/0xc0
[   42.403376]  iommufd_fops_ioctl+0x1ef/0x310
[   42.403694]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   42.404045]  ? write_comp_data+0x2f/0x90
[   42.404346]  __x64_sys_ioctl+0x10e/0x160
[   42.404667]  ? iommufd_get_object.part.6+0x1c0/0x1c0
[   42.405039]  do_syscall_64+0x3b/0x90
[   42.405312]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   42.405683] RIP: 0033:0x7f3777c1e59d
[   42.405952] Code: 00 c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d d3 08 0d 00 f7 d8 64 89 01 48
[   42.407259] RSP: 002b:00007ffd0d727918 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   42.407803] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f3777c1e59d
[   42.408311] RDX: 0000000020000140 RSI: 0000000000003b80 RDI: 0000000000000003
[   42.408838] RBP: 00007ffd0d727930 R08: 00007ffd0d727930 R09: 00007ffd0d727930
[   42.409344] R10: 00007ffd0d727930 R11: 0000000000000213 R12: 0000000000401180
[   42.409853] R13: 00007ffd0d727a50 R14: 0000000000000000 R15: 0000000000000000
[   42.410371]  </TASK>
[   42.410548] irq event stamp: 0
[   42.410780] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   42.411239] hardirqs last disabled at (0): [<ffffffff810fff0c>] copy_process+0x11cc/0x2b10
[   42.411829] softirqs last  enabled at (0): [<ffffffff810fff10>] copy_process+0x11d0/0x2b10
[   42.412425] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   42.412889] ---[ end trace 0000000000000000 ]---
[   42.413315] ------------[ cut here ]------------
[   42.413647] WARNING: CPU: 0 PID: 802 at drivers/iommu/iommufd/pages.c:1290 __iopt_area_unfill_domain+0x54f/0x560
[   42.414370] Modules linked in:
[   42.414616] CPU: 0 PID: 802 Comm: repro Tainted: G    B   W          6.1.0-a0a6c76cf2a5+ #1
[   42.415215] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   42.416008] RIP: 0010:__iopt_area_unfill_domain+0x54f/0x560
[   42.416416] Code: e8 86 9e 2b ff 85 db 0f 85 35 fb ff ff e8 09 9d 2b ff 0f 0b e9 29 fb ff ff e8 fd 9c 2b ff 0f 0b e9 69 fe ff ff e8 f1 9c 2b ff <0f> 0b e9 58 ff ff ff e8 65 2d dc 00 0f 1f 44 00 00 0f 1f 44 00 00
[   42.417715] RSP: 0018:ffffc900015e3ae0 EFLAGS: 00010246
[   42.418093] RAX: 0000000000000000 RBX: 00000000ffffffff RCX: ffffffff81fe0d26
[   42.418603] RDX: 0000000000000000 RSI: ffff8880135dd300 RDI: 0000000000000002
[   42.419124] RBP: ffffc900015e3d10 R08: 000000000003b5c5 R09: 0000000000000010
[   42.419631] R10: 000000000003b5a0 R11: 0000000000000024 R12: 00000000000007ff
[   42.420137] R13: 0000000000000801 R14: 00000000000007ff R15: 0000000000000800
[   42.420648] FS:  00007f3777af9740(0000) GS:ffff88807dc00000(0000) knlGS:0000000000000000
[   42.421243] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   42.421660] CR2: 00007f3777c1e580 CR3: 0000000017330002 CR4: 0000000000770ef0
[   42.422175] PKRU: 55555554
[   42.422380] Call Trace:
[   42.422573]  <TASK>
[   42.422751]  ? rcu_read_lock_sched_held+0x29/0x80
[   42.423109]  ? lock_acquire+0x1a1/0x2f0
[   42.423405]  ? rcu_read_lock_held_common+0x12/0x50
[   42.423771]  ? rcu_read_lock_sched_held+0x29/0x80
[   42.424125]  ? __mutex_lock+0x13a/0xf30
[   42.424421]  ? write_comp_data+0x2f/0x90
[   42.424743]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   42.425101]  iopt_area_unfill_domain+0x32/0x40
[   42.425436]  iopt_table_remove_domain+0x23f/0x4c0
[   42.425788]  iommufd_device_selftest_detach+0x3a/0x90
[   42.426176]  iommufd_selftest_destroy+0x55/0x70
[   42.426525]  iommufd_object_destroy_user+0xce/0x130
[   42.426889]  iommufd_destroy+0xa2/0xc0
[   42.427180]  iommufd_fops_ioctl+0x1ef/0x310
[   42.427498]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   42.427851]  ? write_comp_data+0x2f/0x90
[   42.428148]  __x64_sys_ioctl+0x10e/0x160
[   42.428452]  ? iommufd_get_object.part.6+0x1c0/0x1c0
[   42.428833]  do_syscall_64+0x3b/0x90
[   42.429111]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   42.429483] RIP: 0033:0x7f3777c1e59d
[   42.429757] Code: 00 c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d d3 08 0d 00 f7 d8 64 89 01 48
[   42.431063] RSP: 002b:00007ffd0d727918 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   42.431612] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f3777c1e59d
[   42.432121] RDX: 0000000020000140 RSI: 0000000000003b80 RDI: 0000000000000003
[   42.432627] RBP: 00007ffd0d727930 R08: 00007ffd0d727930 R09: 00007ffd0d727930
[   42.433145] R10: 00007ffd0d727930 R11: 0000000000000213 R12: 0000000000401180
[   42.433669] R13: 00007ffd0d727a50 R14: 0000000000000000 R15: 0000000000000000
[   42.434208]  </TASK>
[   42.434376] irq event stamp: 0
[   42.434609] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   42.435056] hardirqs last disabled at (0): [<ffffffff810fff0c>] copy_process+0x11cc/0x2b10
[   42.435654] softirqs last  enabled at (0): [<ffffffff810fff10>] copy_process+0x11d0/0x2b10
[   42.436249] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   42.436713] ---[ end trace 0000000000000000 ]---
[   42.439504] ------------[ cut here ]------------
[   42.439870] WARNING: CPU: 0 PID: 802 at drivers/iommu/iommufd/pages.c:178 batch_unpin.isra.23+0x151/0x1a0
[   42.440535] Modules linked in:
[   42.440781] CPU: 0 PID: 802 Comm: repro Tainted: G    B   W          6.1.0-a0a6c76cf2a5+ #1
[   42.441356] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   42.442221] RIP: 0010:batch_unpin.isra.23+0x151/0x1a0
[   42.442636] Code: e8 c4 be 2b ff 48 8b 45 d0 48 85 c0 75 17 e8 26 bd 2b ff 48 8b 7d c8 48 89 de e8 fa bd 2b ff 48 39 5d c8 73 07 e8 0f bd 2b ff <0f> 0b e8 08 bd 2b ff 4d 29 e5 31 ff 41 83 c6 01 4c 89 ee 31 db e8
[   42.443896] RSP: 0018:ffffc900015e39d8 EFLAGS: 00010246
[   42.444259] RAX: 0000000000000000 RBX: ffffffffffffffff RCX: ffffffff81fded8c
[   42.444770] RDX: 0000000000000000 RSI: ffff8880135dd300 RDI: 0000000000000002
[   42.445260] RBP: ffffc900015e3a20 R08: 0000000000000000 R09: ffff88807dc3b890
[   42.445748] R10: 0000000000000d3c R11: 0000000000000000 R12: 0000000000000001
[   42.446239] R13: 0000000000000001 R14: 0000000000000000 R15: ffff888009f84200
[   42.446737] FS:  0000000000000000(0000) GS:ffff88807dc00000(0000) knlGS:0000000000000000
[   42.447303] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   42.447730] CR2: 00007f3777cf0500 CR3: 0000000003c12006 CR4: 0000000000770ef0
[   42.448229] PKRU: 55555554
[   42.448426] Call Trace:
[   42.448605]  <TASK>
[   42.448786]  iopt_pages_unfill_xarray+0x39f/0x5c0
[   42.449135]  ? rcu_read_lock_sched_held+0x29/0x80
[   42.449492]  ? rcu_read_lock_held_common+0x12/0x50
[   42.449834]  ? write_comp_data+0x2f/0x90
[   42.450126]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   42.450466]  ? write_comp_data+0x2f/0x90
[   42.450762]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   42.451109]  ? interval_tree_remove+0x291/0x4e0
[   42.451439]  ? write_comp_data+0x2f/0x90
[   42.451728]  iopt_area_remove_access+0x108/0x120
[   42.452065]  iommufd_access_unpin_pages+0x177/0x210
[   42.452424]  iommufd_test_access_unmap+0xe0/0x130
[   42.452782]  ? iommufd_test_access_unmap+0x130/0x130
[   42.453146]  iommufd_test_staccess_release+0x39/0x60
[   42.453511]  __fput+0x11f/0x450
[   42.453753]  ____fput+0x1e/0x30
[   42.454017]  task_work_run+0xb6/0x120
[   42.454291]  do_exit+0x521/0x1340
[   42.454545]  ? lock_release+0x202/0x2c0
[   42.454824]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   42.455169]  ? trace_hardirqs_on+0x3f/0x100
[   42.455479]  do_group_exit+0x5e/0xf0
[   42.455745]  __x64_sys_exit_group+0x25/0x30
[   42.456045]  do_syscall_64+0x3b/0x90
[   42.456316]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   42.456701] RIP: 0033:0x7f3777be6cf6
[   42.456967] Code: Unable to access opcode bytes at 0x7f3777be6ccc.
[   42.457405] RSP: 002b:00007ffd0d7278d8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
[   42.457940] RAX: ffffffffffffffda RBX: 00007f3777cf1490 RCX: 00007f3777be6cf6
[   42.458443] RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
[   42.458955] RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffff80
[   42.459453] R10: 0000000000000004 R11: 0000000000000246 R12: 00007f3777cf1490
[   42.459941] R13: 0000000000000001 R14: 00007f3777cf4e88 R15: 0000000000000000
[   42.460441]  </TASK>
[   42.460604] irq event stamp: 0
[   42.460838] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   42.461275] hardirqs last disabled at (0): [<ffffffff810fff0c>] copy_process+0x11cc/0x2b10
[   42.461851] softirqs last  enabled at (0): [<ffffffff810fff10>] copy_process+0x11d0/0x2b10
[   42.462424] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   42.462878] ---[ end trace 0000000000000000 ]---
[   42.463298] ------------[ cut here ]------------
[   42.463625] WARNING: CPU: 0 PID: 802 at drivers/iommu/iommufd/pages.c:886 update_unpinned+0x75/0x80
[   42.464258] Modules linked in:
[   42.464483] CPU: 0 PID: 802 Comm: repro Tainted: G    B   W          6.1.0-a0a6c76cf2a5+ #1
[   42.465073] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   42.465858] RIP: 0010:update_unpinned+0x75/0x80
[   42.466194] Code: ac 2b ff 48 89 de 31 c9 31 d2 4c 29 e6 4c 89 ef e8 70 fb ff ff e8 bb ac 2b ff 5b 41 5c 41 5d 5d c3 cc cc cc cc e8 ab ac 2b ff <0f> 0b eb e7 0f 1f 80 00 00 00 00 0f 1f 44 00 00 55 48 89 e5 41 57
[   42.467483] RSP: 0018:ffffc900015e3a08 EFLAGS: 00010246
[   42.467854] RAX: 0000000000000000 RBX: 0000000000000000 RCX: ffffffff81fdfdcf
[   42.468401] RDX: 0000000000000000 RSI: ffff8880135dd300 RDI: 0000000000000002
[   42.468904] RBP: ffffc900015e3a20 R08: 0000000000000000 R09: ffff88807dc3b890
[   42.469395] R10: 0000000000000d3c R11: 0000000000000000 R12: ffffffffffffffff
[   42.469886] R13: ffff888009f84200 R14: 0000000000000002 R15: 0000000000000002
[   42.470372] FS:  0000000000000000(0000) GS:ffff88807dc00000(0000) knlGS:0000000000000000
[   42.470934] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   42.471343] CR2: 00007f3777cf0500 CR3: 0000000003c12006 CR4: 0000000000770ef0
[   42.471850] PKRU: 55555554
[   42.472060] Call Trace:
[   42.472237]  <TASK>
[   42.472394]  iopt_pages_unfill_xarray+0x522/0x5c0
[   42.472758]  ? rcu_read_lock_sched_held+0x29/0x80
[   42.473115]  ? rcu_read_lock_held_common+0x12/0x50
[   42.473457]  ? write_comp_data+0x2f/0x90
[   42.473742]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   42.474102]  ? write_comp_data+0x2f/0x90
[   42.474388]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   42.474747]  ? interval_tree_remove+0x291/0x4e0
[   42.475083]  ? write_comp_data+0x2f/0x90
[   42.475373]  iopt_area_remove_access+0x108/0x120
[   42.475712]  iommufd_access_unpin_pages+0x177/0x210
[   42.476078]  iommufd_test_access_unmap+0xe0/0x130
[   42.476416]  ? iommufd_test_access_unmap+0x130/0x130
[   42.476787]  iommufd_test_staccess_release+0x39/0x60
[   42.477142]  __fput+0x11f/0x450
[   42.477380]  ____fput+0x1e/0x30
[   42.477616]  task_work_run+0xb6/0x120
[   42.477892]  do_exit+0x521/0x1340
[   42.478148]  ? lock_release+0x202/0x2c0
[   42.478439]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   42.478811]  ? trace_hardirqs_on+0x3f/0x100
[   42.479131]  do_group_exit+0x5e/0xf0
[   42.479411]  __x64_sys_exit_group+0x25/0x30
[   42.479714]  do_syscall_64+0x3b/0x90
[   42.479987]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   42.480357] RIP: 0033:0x7f3777be6cf6
[   42.480624] Code: Unable to access opcode bytes at 0x7f3777be6ccc.
[   42.481072] RSP: 002b:00007ffd0d7278d8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
[   42.481605] RAX: ffffffffffffffda RBX: 00007f3777cf1490 RCX: 00007f3777be6cf6
[   42.482110] RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
[   42.482623] RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffff80
[   42.483129] R10: 0000000000000004 R11: 0000000000000246 R12: 00007f3777cf1490
[   42.483645] R13: 0000000000000001 R14: 00007f3777cf4e88 R15: 0000000000000000
[   42.484156]  </TASK>
[   42.484322] irq event stamp: 0
[   42.484549] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   42.485007] hardirqs last disabled at (0): [<ffffffff810fff0c>] copy_process+0x11cc/0x2b10
[   42.485591] softirqs last  enabled at (0): [<ffffffff810fff10>] copy_process+0x11d0/0x2b10
[   42.486177] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   42.486634] ---[ end trace 0000000000000000 ]---
[   42.487106] ------------[ cut here ]------------
[   42.487437] WARNING: CPU: 0 PID: 802 at drivers/iommu/iommufd/pages.c:1181 iopt_release_pages+0x159/0x190
[   42.488125] Modules linked in:
[   42.488355] CPU: 0 PID: 802 Comm: repro Tainted: G    B   W          6.1.0-a0a6c76cf2a5+ #1
[   42.488958] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   42.489754] RIP: 0010:iopt_release_pages+0x159/0x190
[   42.490124] Code: b5 11 ff eb cb e8 87 90 2b ff be 03 00 00 00 4c 89 f7 e8 6a 8b ce ff eb b7 e8 73 90 2b ff 0f 0b e9 ed fe ff ff e8 67 90 2b ff <0f> 0b e9 00 ff ff ff e8 5b 90 2b ff 0f 0b e9 07 ff ff ff e8 4f 90
[   42.491439] RSP: 0018:ffffc900015e3c88 EFLAGS: 00010246
[   42.491813] RAX: 0000000000000000 RBX: ffff888009f84200 RCX: ffffffff81fe1957
[   42.492322] RDX: 0000000000000000 RSI: ffff8880135dd300 RDI: 0000000000000002
[   42.492862] RBP: ffffc900015e3ca8 R08: 0000000000000000 R09: 0000000000000000
[   42.493372] R10: ffffc900015e3c58 R11: 0000000000000000 R12: ffffffffffffffff
[   42.493884] R13: 0000000001000000 R14: 00000000017fffff R15: 0000000000000000
[   42.494390] FS:  0000000000000000(0000) GS:ffff88807dc00000(0000) knlGS:0000000000000000
[   42.494978] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   42.495411] CR2: 00007f3777cf0500 CR3: 0000000003c12006 CR4: 0000000000770ef0
[   42.495921] PKRU: 55555554
[   42.496127] Call Trace:
[   42.496312]  <TASK>
[   42.496476]  iopt_unmap_iova_range+0x1ef/0x2e0
[   42.496824]  iopt_unmap_all+0x2f/0x60
[   42.497100]  iommufd_ioas_destroy+0x2c/0x70
[   42.497409]  iommufd_fops_release+0xd4/0x170
[   42.497729]  ? iommufd_ctx_get+0x30/0x30
[   42.498023]  __fput+0x11f/0x450
[   42.498270]  ____fput+0x1e/0x30
[   42.498520]  task_work_run+0xb6/0x120
[   42.498808]  do_exit+0x521/0x1340
[   42.499061]  ? lock_release+0x202/0x2c0
[   42.499350]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   42.499706]  ? trace_hardirqs_on+0x3f/0x100
[   42.500023]  do_group_exit+0x5e/0xf0
[   42.500292]  __x64_sys_exit_group+0x25/0x30
[   42.500607]  do_syscall_64+0x3b/0x90
[   42.500902]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   42.501269] RIP: 0033:0x7f3777be6cf6
[   42.501532] Code: Unable to access opcode bytes at 0x7f3777be6ccc.
[   42.501971] RSP: 002b:00007ffd0d7278d8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
[   42.502514] RAX: ffffffffffffffda RBX: 00007f3777cf1490 RCX: 00007f3777be6cf6
[   42.503033] RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
[   42.503544] RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffff80
[   42.504055] R10: 0000000000000004 R11: 0000000000000246 R12: 00007f3777cf1490
[   42.504554] R13: 0000000000000001 R14: 00007f3777cf4e88 R15: 0000000000000000
[   42.505079]  </TASK>
[   42.505247] irq event stamp: 0
[   42.505477] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   42.505919] hardirqs last disabled at (0): [<ffffffff810fff0c>] copy_process+0x11cc/0x2b10
[   42.506582] softirqs last  enabled at (0): [<ffffffff810fff10>] copy_process+0x11d0/0x2b10
[   42.507179] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   42.507625] ---[ end trace 0000000000000000 ]---
[   42.525716] ------------[ cut here ]------------
[   42.526070] WARNING: CPU: 0 PID: 803 at drivers/iommu/iommufd/pages.c:294 __iopt_area_unfill_domain+0x152/0x560
[   42.526805] Modules linked in:
[   42.527067] CPU: 0 PID: 803 Comm: repro Tainted: G    B   W          6.1.0-a0a6c76cf2a5+ #1
[   42.527662] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   42.528462] RIP: 0010:__iopt_area_unfill_domain+0x152/0x560
[   42.528900] Code: a1 2b ff 44 8b 64 24 54 48 8b 44 24 48 31 ff 44 89 e6 48 89 44 24 38 e8 6c a2 2b ff 45 85 e4 0f 85 eb 01 00 00 e8 ee a0 2b ff <0f> 0b e8 e7 a0 2b ff 48 8b 44 24 38 89 5c 24 58 89 18 8b 44 24 54
[   42.530207] RSP: 0018:ffffc900015ebae0 EFLAGS: 00010246
[   42.530595] RAX: 0000000000000000 RBX: 00000000ffffffff RCX: ffffffff81fe0bd5
[   42.531104] RDX: 0000000000000000 RSI: ffff8880135d8000 RDI: 0000000000000002
[   42.531607] RBP: ffffc900015ebd10 R08: 000000000003b5c5 R09: 0000000000000007
[   42.532117] R10: 000000000003b5a0 R11: 0000000000000024 R12: 0000000000000001
[   42.532623] R13: 0000000000000801 R14: 00000000000007ff R15: 0000000000000800
[   42.533167] FS:  00007f3777af9740(0000) GS:ffff88807dc00000(0000) knlGS:0000000000000000
[   42.533753] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   42.534176] CR2: 00007f3777c1e580 CR3: 000000001732e003 CR4: 0000000000770ef0
[   42.534696] PKRU: 55555554
[   42.534903] Call Trace:
[   42.535094]  <TASK>
[   42.535275]  ? rcu_read_lock_sched_held+0x29/0x80
[   42.535633]  ? lock_acquire+0x1a1/0x2f0
[   42.535926]  ? rcu_read_lock_held_common+0x12/0x50
[   42.536291]  ? rcu_read_lock_sched_held+0x29/0x80
[   42.536645]  ? __mutex_lock+0x13a/0xf30
[   42.536967]  ? write_comp_data+0x2f/0x90
[   42.537273]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   42.537627]  iopt_area_unfill_domain+0x32/0x40
[   42.537966]  iopt_table_remove_domain+0x23f/0x4c0
[   42.538324]  iommufd_device_selftest_detach+0x3a/0x90
[   42.538715]  iommufd_selftest_destroy+0x55/0x70
[   42.539061]  iommufd_object_destroy_user+0xce/0x130
[   42.539434]  iommufd_destroy+0xa2/0xc0
[   42.539719]  iommufd_fops_ioctl+0x1ef/0x310
[   42.540035]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   42.540389]  ? write_comp_data+0x2f/0x90
[   42.540719]  __x64_sys_ioctl+0x10e/0x160
[   42.541028]  ? iommufd_get_object.part.6+0x1c0/0x1c0
[   42.541400]  do_syscall_64+0x3b/0x90
[   42.541678]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   42.542061] RIP: 0033:0x7f3777c1e59d
[   42.542335] Code: 00 c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d d3 08 0d 00 f7 d8 64 89 01 48
[   42.543658] RSP: 002b:00007ffd0d727918 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   42.544203] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f3777c1e59d
[   42.544723] RDX: 0000000020000140 RSI: 0000000000003b80 RDI: 0000000000000003
[   42.545247] RBP: 00007ffd0d727930 R08: 00007ffd0d727930 R09: 00007ffd0d727930
[   42.545762] R10: 00007ffd0d727930 R11: 0000000000000213 R12: 0000000000401180
[   42.546277] R13: 00007ffd0d727a50 R14: 0000000000000000 R15: 0000000000000000
[   42.546808]  </TASK>
[   42.546979] irq event stamp: 0
[   42.547207] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   42.547658] hardirqs last disabled at (0): [<ffffffff810fff0c>] copy_process+0x11cc/0x2b10
[   42.548253] softirqs last  enabled at (0): [<ffffffff810fff10>] copy_process+0x11d0/0x2b10
[   42.548861] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   42.549315] ---[ end trace 0000000000000000 ]---
[   42.549746] ------------[ cut here ]------------
[   42.550076] WARNING: CPU: 0 PID: 803 at drivers/iommu/iommufd/pages.c:1290 __iopt_area_unfill_domain+0x54f/0x560
[   42.550815] Modules linked in:
[   42.551045] CPU: 0 PID: 803 Comm: repro Tainted: G    B   W          6.1.0-a0a6c76cf2a5+ #1
[   42.551637] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   42.552448] RIP: 0010:__iopt_area_unfill_domain+0x54f/0x560
[   42.552877] Code: e8 86 9e 2b ff 85 db 0f 85 35 fb ff ff e8 09 9d 2b ff 0f 0b e9 29 fb ff ff e8 fd 9c 2b ff 0f 0b e9 69 fe ff ff e8 f1 9c 2b ff <0f> 0b e9 58 ff ff ff e8 65 2d dc 00 0f 1f 44 00 00 0f 1f 44 00 00
[   42.554188] RSP: 0018:ffffc900015ebae0 EFLAGS: 00010246
[   42.554578] RAX: 0000000000000000 RBX: 00000000ffffffff RCX: ffffffff81fe0d26
[   42.555083] RDX: 0000000000000000 RSI: ffff8880135d8000 RDI: 0000000000000002
[   42.555600] RBP: ffffc900015ebd10 R08: 000000000003b5c5 R09: 0000000000000007
[   42.556140] R10: 000000000003b5a0 R11: 0000000000000024 R12: 00000000000007ff
[   42.556691] R13: 0000000000000801 R14: 00000000000007ff R15: 0000000000000800
[   42.557206] FS:  00007f3777af9740(0000) GS:ffff88807dc00000(0000) knlGS:0000000000000000
[   42.557787] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   42.558216] CR2: 00007f3777c1e580 CR3: 000000001732e003 CR4: 0000000000770ef0
[   42.558740] PKRU: 55555554
[   42.558952] Call Trace:
[   42.559141]  <TASK>
[   42.559317]  ? rcu_read_lock_sched_held+0x29/0x80
[   42.559675]  ? lock_acquire+0x1a1/0x2f0
[   42.559967]  ? rcu_read_lock_held_common+0x12/0x50
[   42.560323]  ? rcu_read_lock_sched_held+0x29/0x80
[   42.560688]  ? __mutex_lock+0x13a/0xf30
[   42.560984]  ? write_comp_data+0x2f/0x90
[   42.561286]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   42.561640]  iopt_area_unfill_domain+0x32/0x40
[   42.561977]  iopt_table_remove_domain+0x23f/0x4c0
[   42.562329]  iommufd_device_selftest_detach+0x3a/0x90
[   42.562721]  iommufd_selftest_destroy+0x55/0x70
[   42.563064]  iommufd_object_destroy_user+0xce/0x130
[   42.563434]  iommufd_destroy+0xa2/0xc0
[   42.563724]  iommufd_fops_ioctl+0x1ef/0x310
[   42.564040]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   42.564393]  ? write_comp_data+0x2f/0x90
[   42.564716]  __x64_sys_ioctl+0x10e/0x160
[   42.565020]  ? iommufd_get_object.part.6+0x1c0/0x1c0
[   42.565391]  do_syscall_64+0x3b/0x90
[   42.565666]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   42.566040] RIP: 0033:0x7f3777c1e59d
[   42.566308] Code: 00 c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d d3 08 0d 00 f7 d8 64 89 01 48
[   42.567615] RSP: 002b:00007ffd0d727918 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   42.568156] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f3777c1e59d
[   42.568686] RDX: 0000000020000140 RSI: 0000000000003b80 RDI: 0000000000000003
[   42.569198] RBP: 00007ffd0d727930 R08: 00007ffd0d727930 R09: 00007ffd0d727930
[   42.569705] R10: 00007ffd0d727930 R11: 0000000000000213 R12: 0000000000401180
[   42.570217] R13: 00007ffd0d727a50 R14: 0000000000000000 R15: 0000000000000000
[   42.570737]  </TASK>
[   42.570908] irq event stamp: 0
[   42.571140] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   42.571593] hardirqs last disabled at (0): [<ffffffff810fff0c>] copy_process+0x11cc/0x2b10
[   42.572194] softirqs last  enabled at (0): [<ffffffff810fff10>] copy_process+0x11d0/0x2b10
[   42.572804] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   42.573256] ---[ end trace 0000000000000000 ]---
[   42.576022] ------------[ cut here ]------------
[   42.576375] WARNING: CPU: 0 PID: 803 at drivers/iommu/iommufd/pages.c:178 batch_unpin.isra.23+0x151/0x1a0
[   42.577093] Modules linked in:
[   42.577328] CPU: 0 PID: 803 Comm: repro Tainted: G    B   W          6.1.0-a0a6c76cf2a5+ #1
[   42.577926] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   42.578741] RIP: 0010:batch_unpin.isra.23+0x151/0x1a0
[   42.579125] Code: e8 c4 be 2b ff 48 8b 45 d0 48 85 c0 75 17 e8 26 bd 2b ff 48 8b 7d c8 48 89 de e8 fa bd 2b ff 48 39 5d c8 73 07 e8 0f bd 2b ff <0f> 0b e8 08 bd 2b ff 4d 29 e5 31 ff 41 83 c6 01 4c 89 ee 31 db e8
[   42.580457] RSP: 0018:ffffc900015eb9d8 EFLAGS: 00010246
[   42.580858] RAX: 0000000000000000 RBX: ffffffffffffffff RCX: ffffffff81fded8c
[   42.581373] RDX: 0000000000000000 RSI: ffff8880135d8000 RDI: 0000000000000002
[   42.581888] RBP: ffffc900015eba20 R08: 0000000000000000 R09: ffff88807dc3b890
[   42.582403] R10: 0000000000000d4c R11: 0000000000000000 R12: 0000000000000001
[   42.582919] R13: 0000000000000001 R14: 0000000000000000 R15: ffff888009f84e00
[   42.583441] FS:  0000000000000000(0000) GS:ffff88807dc00000(0000) knlGS:0000000000000000
[   42.584025] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   42.584439] CR2: 00007f3777cf0500 CR3: 0000000003c12006 CR4: 0000000000770ef0
[   42.584970] PKRU: 55555554
[   42.585177] Call Trace:
[   42.585366]  <TASK>
[   42.585533]  iopt_pages_unfill_xarray+0x39f/0x5c0
[   42.585924]  ? rcu_read_lock_held_common+0x12/0x50
[   42.586285]  ? write_comp_data+0x2f/0x90
[   42.586591]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   42.586946]  ? write_comp_data+0x2f/0x90
[   42.587252]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   42.587605]  ? interval_tree_remove+0x291/0x4e0
[   42.587951]  ? write_comp_data+0x2f/0x90
[   42.588247]  iopt_area_remove_access+0x108/0x120
[   42.588596]  iommufd_access_unpin_pages+0x177/0x210
[   42.588986]  iommufd_test_access_unmap+0xe0/0x130
[   42.589339]  ? iommufd_test_access_unmap+0x130/0x130
[   42.589708]  iommufd_test_staccess_release+0x39/0x60
[   42.590076]  __fput+0x11f/0x450
[   42.590328]  ____fput+0x1e/0x30
[   42.590580]  task_work_run+0xb6/0x120
[   42.590866]  do_exit+0x521/0x1340
[   42.591118]  ? lock_release+0x202/0x2c0
[   42.591414]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   42.591788]  ? trace_hardirqs_on+0x3f/0x100
[   42.592109]  do_group_exit+0x5e/0xf0
[   42.592380]  __x64_sys_exit_group+0x25/0x30
[   42.592713]  do_syscall_64+0x3b/0x90
[   42.593010]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   42.593381] RIP: 0033:0x7f3777be6cf6
[   42.593649] Code: Unable to access opcode bytes at 0x7f3777be6ccc.
[   42.594086] RSP: 002b:00007ffd0d7278d8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
[   42.594789] RAX: ffffffffffffffda RBX: 00007f3777cf1490 RCX: 00007f3777be6cf6
[   42.595344] RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
[   42.595846] RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffff80
[   42.596353] R10: 0000000000000004 R11: 0000000000000246 R12: 00007f3777cf1490
[   42.596869] R13: 0000000000000001 R14: 00007f3777cf4e88 R15: 0000000000000000
[   42.597380]  </TASK>
[   42.597551] irq event stamp: 0
[   42.597780] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   42.598226] hardirqs last disabled at (0): [<ffffffff810fff0c>] copy_process+0x11cc/0x2b10
[   42.598825] softirqs last  enabled at (0): [<ffffffff810fff10>] copy_process+0x11d0/0x2b10
[   42.599435] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   42.599883] ---[ end trace 0000000000000000 ]---
[   42.600302] ------------[ cut here ]------------
[   42.600640] WARNING: CPU: 0 PID: 803 at drivers/iommu/iommufd/pages.c:886 update_unpinned+0x75/0x80
[   42.601313] Modules linked in:
[   42.601542] CPU: 0 PID: 803 Comm: repro Tainted: G    B   W          6.1.0-a0a6c76cf2a5+ #1
[   42.602131] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   42.602937] RIP: 0010:update_unpinned+0x75/0x80
[   42.603294] Code: ac 2b ff 48 89 de 31 c9 31 d2 4c 29 e6 4c 89 ef e8 70 fb ff ff e8 bb ac 2b ff 5b 41 5c 41 5d 5d c3 cc cc cc cc e8 ab ac 2b ff <0f> 0b eb e7 0f 1f 80 00 00 00 00 0f 1f 44 00 00 55 48 89 e5 41 57
[   42.604611] RSP: 0018:ffffc900015eba08 EFLAGS: 00010246
[   42.605002] RAX: 0000000000000000 RBX: 0000000000000000 RCX: ffffffff81fdfdcf
[   42.605513] RDX: 0000000000000000 RSI: ffff8880135d8000 RDI: 0000000000000002
[   42.606021] RBP: ffffc900015eba20 R08: 0000000000000000 R09: ffff88807dc3b890
[   42.606537] R10: 0000000000000d4c R11: 0000000000000000 R12: ffffffffffffffff
[   42.607049] R13: ffff888009f84e00 R14: 0000000000000002 R15: 0000000000000002
[   42.607576] FS:  0000000000000000(0000) GS:ffff88807dc00000(0000) knlGS:0000000000000000
[   42.608153] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   42.608574] CR2: 00007f3777cf0500 CR3: 0000000003c12006 CR4: 0000000000770ef0
[   42.609106] PKRU: 55555554
[   42.609311] Call Trace:
[   42.609502]  <TASK>
[   42.609667]  iopt_pages_unfill_xarray+0x522/0x5c0
[   42.610038]  ? rcu_read_lock_held_common+0x12/0x50
[   42.610418]  ? write_comp_data+0x2f/0x90
[   42.610721]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   42.611078]  ? write_comp_data+0x2f/0x90
[   42.611381]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   42.611742]  ? interval_tree_remove+0x291/0x4e0
[   42.612093]  ? write_comp_data+0x2f/0x90
[   42.612394]  iopt_area_remove_access+0x108/0x120
[   42.612764]  iommufd_access_unpin_pages+0x177/0x210
[   42.613143]  iommufd_test_access_unmap+0xe0/0x130
[   42.613496]  ? iommufd_test_access_unmap+0x130/0x130
[   42.613865]  iommufd_test_staccess_release+0x39/0x60
[   42.614235]  __fput+0x11f/0x450
[   42.614491]  ____fput+0x1e/0x30
[   42.614738]  task_work_run+0xb6/0x120
[   42.615029]  do_exit+0x521/0x1340
[   42.615293]  ? lock_release+0x202/0x2c0
[   42.615588]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   42.615951]  ? trace_hardirqs_on+0x3f/0x100
[   42.616269]  do_group_exit+0x5e/0xf0
[   42.616543]  __x64_sys_exit_group+0x25/0x30
[   42.616874]  do_syscall_64+0x3b/0x90
[   42.617149]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   42.617527] RIP: 0033:0x7f3777be6cf6
[   42.617795] Code: Unable to access opcode bytes at 0x7f3777be6ccc.
[   42.618235] RSP: 002b:00007ffd0d7278d8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
[   42.618785] RAX: ffffffffffffffda RBX: 00007f3777cf1490 RCX: 00007f3777be6cf6
[   42.619303] RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
[   42.619807] RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffff80
[   42.620318] R10: 0000000000000004 R11: 0000000000000246 R12: 00007f3777cf1490
[   42.620848] R13: 0000000000000001 R14: 00007f3777cf4e88 R15: 0000000000000000
[   42.621365]  </TASK>
[   42.621547] irq event stamp: 0
[   42.621778] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   42.622241] hardirqs last disabled at (0): [<ffffffff810fff0c>] copy_process+0x11cc/0x2b10
[   42.622846] softirqs last  enabled at (0): [<ffffffff810fff10>] copy_process+0x11d0/0x2b10
[   42.623450] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   42.623905] ---[ end trace 0000000000000000 ]---
[   42.624370] ------------[ cut here ]------------
[   42.624717] WARNING: CPU: 0 PID: 803 at drivers/iommu/iommufd/pages.c:1181 iopt_release_pages+0x159/0x190
[   42.625418] Modules linked in:
[   42.625647] CPU: 0 PID: 803 Comm: repro Tainted: G    B   W          6.1.0-a0a6c76cf2a5+ #1
[   42.626239] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   42.627048] RIP: 0010:iopt_release_pages+0x159/0x190
[   42.627413] Code: b5 11 ff eb cb e8 87 90 2b ff be 03 00 00 00 4c 89 f7 e8 6a 8b ce ff eb b7 e8 73 90 2b ff 0f 0b e9 ed fe ff ff e8 67 90 2b ff <0f> 0b e9 00 ff ff ff e8 5b 90 2b ff 0f 0b e9 07 ff ff ff e8 4f 90
[   42.628720] RSP: 0018:ffffc900015ebc88 EFLAGS: 00010246
[   42.629112] RAX: 0000000000000000 RBX: ffff888009f84e00 RCX: ffffffff81fe1957
[   42.629632] RDX: 0000000000000000 RSI: ffff8880135d8000 RDI: 0000000000000002
[   42.630138] RBP: ffffc900015ebca8 R08: 0000000000000000 R09: 0000000000000000
[   42.630660] R10: ffffc900015ebc58 R11: 0000000000000000 R12: ffffffffffffffff
[   42.631178] R13: 0000000001000000 R14: 00000000017fffff R15: 0000000000000000
[   42.631701] FS:  0000000000000000(0000) GS:ffff88807dc00000(0000) knlGS:0000000000000000
[   42.632275] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   42.632705] CR2: 00007f3777cf0500 CR3: 0000000003c12006 CR4: 0000000000770ef0
[   42.633212] PKRU: 55555554
[   42.633417] Call Trace:
[   42.633601]  <TASK>
[   42.633766]  iopt_unmap_iova_range+0x1ef/0x2e0
[   42.634103]  iopt_unmap_all+0x2f/0x60
[   42.634380]  iommufd_ioas_destroy+0x2c/0x70
[   42.634719]  iommufd_fops_release+0xd4/0x170
[   42.635045]  ? iommufd_ctx_get+0x30/0x30
[   42.635348]  __fput+0x11f/0x450
[   42.635604]  ____fput+0x1e/0x30
[   42.635851]  task_work_run+0xb6/0x120
[   42.636138]  do_exit+0x521/0x1340
[   42.636392]  ? lock_release+0x202/0x2c0
[   42.636696]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   42.637049]  ? trace_hardirqs_on+0x3f/0x100
[   42.637371]  do_group_exit+0x5e/0xf0
[   42.637641]  __x64_sys_exit_group+0x25/0x30
[   42.637952]  do_syscall_64+0x3b/0x90
[   42.638224]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   42.638610] RIP: 0033:0x7f3777be6cf6
[   42.638879] Code: Unable to access opcode bytes at 0x7f3777be6ccc.
[   42.639343] RSP: 002b:00007ffd0d7278d8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
[   42.639888] RAX: ffffffffffffffda RBX: 00007f3777cf1490 RCX: 00007f3777be6cf6
[   42.640404] RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
[   42.640931] RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffff80
[   42.641445] R10: 0000000000000004 R11: 0000000000000246 R12: 00007f3777cf1490
[   42.641972] R13: 0000000000000001 R14: 00007f3777cf4e88 R15: 0000000000000000
[   42.642497]  </TASK>
[   42.642665] irq event stamp: 0
[   42.642898] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   42.643363] hardirqs last disabled at (0): [<ffffffff810fff0c>] copy_process+0x11cc/0x2b10
[   42.643963] softirqs last  enabled at (0): [<ffffffff810fff10>] copy_process+0x11d0/0x2b10
[   42.644561] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   42.645029] ---[ end trace 0000000000000000 ]---
[   42.882102] ------------[ cut here ]------------
[   42.882494] WARNING: CPU: 1 PID: 813 at drivers/iommu/iommufd/pages.c:294 __iopt_area_unfill_domain+0x152/0x560
[   42.883233] Modules linked in:
[   42.883467] CPU: 1 PID: 813 Comm: repro Tainted: G    B   W          6.1.0-a0a6c76cf2a5+ #1
[   42.884081] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   42.884910] RIP: 0010:__iopt_area_unfill_domain+0x152/0x560
[   42.885321] Code: a1 2b ff 44 8b 64 24 54 48 8b 44 24 48 31 ff 44 89 e6 48 89 44 24 38 e8 6c a2 2b ff 45 85 e4 0f 85 eb 01 00 00 e8 ee a0 2b ff <0f> 0b e8 e7 a0 2b ff 48 8b 44 24 38 89 5c 24 58 89 18 8b 44 24 54
[   42.886627] RSP: 0018:ffffc90001623ae0 EFLAGS: 00010246
[   42.887296] RAX: 0000000000000000 RBX: 00000000ffffffff RCX: ffffffff81fe0bd5
[   42.887813] RDX: 0000000000000000 RSI: ffff88800e67d300 RDI: 0000000000000002
[   42.888508] RBP: ffffc90001623d10 R08: 000000000003b5c5 R09: 0000000000000005
[   42.889046] R10: 000000000003b5a0 R11: 0000000000000024 R12: 0000000000000001
[   42.889559] R13: 0000000000000801 R14: 00000000000007ff R15: 0000000000000800
[   42.890064] FS:  00007f3777af9740(0000) GS:ffff88807dd00000(0000) knlGS:0000000000000000
[   42.890775] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   42.891203] CR2: 00007f3777c1e580 CR3: 000000000cab4006 CR4: 0000000000770ee0
[   42.891754] PKRU: 55555554
[   42.892058] Call Trace:
[   42.892245]  <TASK>
[   42.892419]  ? rcu_read_lock_sched_held+0x29/0x80
[   42.892805]  ? lock_acquire+0x1a1/0x2f0
[   42.893104]  ? rcu_read_lock_held_common+0x12/0x50
[   42.893474]  ? rcu_read_lock_sched_held+0x29/0x80
[   42.893848]  ? __mutex_lock+0x13a/0xf30
[   42.894154]  ? write_comp_data+0x2f/0x90
[   42.894576]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   42.894935]  iopt_area_unfill_domain+0x32/0x40
[   42.895274]  iopt_table_remove_domain+0x23f/0x4c0
[   42.895663]  iommufd_device_selftest_detach+0x3a/0x90
[   42.896123]  iommufd_selftest_destroy+0x55/0x70
[   42.896464]  iommufd_object_destroy_user+0xce/0x130
[   42.896851]  iommufd_destroy+0xa2/0xc0
[   42.897148]  iommufd_fops_ioctl+0x1ef/0x310
[   42.897462]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   42.897814]  ? write_comp_data+0x2f/0x90
[   42.898112]  __x64_sys_ioctl+0x10e/0x160
[   42.898521]  ? iommufd_get_object.part.6+0x1c0/0x1c0
[   42.898894]  do_syscall_64+0x3b/0x90
[   42.899167]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   42.899549] RIP: 0033:0x7f3777c1e59d
[   42.899921] Code: 00 c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d d3 08 0d 00 f7 d8 64 89 01 48
[   42.901378] RSP: 002b:00007ffd0d727918 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   42.901919] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f3777c1e59d
[   42.902435] RDX: 0000000020000140 RSI: 0000000000003b80 RDI: 0000000000000003
[   42.902967] RBP: 00007ffd0d727930 R08: 00007ffd0d727930 R09: 00007ffd0d727930
[   42.903590] R10: 00007ffd0d727930 R11: 0000000000000213 R12: 0000000000401180
[   42.904099] R13: 00007ffd0d727a50 R14: 0000000000000000 R15: 0000000000000000
[   42.904633]  </TASK>
[   42.904914] irq event stamp: 0
[   42.905145] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   42.905606] hardirqs last disabled at (0): [<ffffffff810fff0c>] copy_process+0x11cc/0x2b10
[   42.906202] softirqs last  enabled at (0): [<ffffffff810fff10>] copy_process+0x11d0/0x2b10
[   42.906798] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   42.907328] ---[ end trace 0000000000000000 ]---
[   42.907764] ------------[ cut here ]------------
[   42.908117] WARNING: CPU: 1 PID: 813 at drivers/iommu/iommufd/pages.c:1290 __iopt_area_unfill_domain+0x54f/0x560
[   42.908943] Modules linked in:
[   42.909180] CPU: 1 PID: 813 Comm: repro Tainted: G    B   W          6.1.0-a0a6c76cf2a5+ #1
[   42.909774] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   42.910669] RIP: 0010:__iopt_area_unfill_domain+0x54f/0x560
[   42.911080] Code: e8 86 9e 2b ff 85 db 0f 85 35 fb ff ff e8 09 9d 2b ff 0f 0b e9 29 fb ff ff e8 fd 9c 2b ff 0f 0b e9 69 fe ff ff e8 f1 9c 2b ff <0f> 0b e9 58 ff ff ff e8 65 2d dc 00 0f 1f 44 00 00 0f 1f 44 00 00
[   42.912482] RSP: 0018:ffffc90001623ae0 EFLAGS: 00010246
[   42.912877] RAX: 0000000000000000 RBX: 00000000ffffffff RCX: ffffffff81fe0d26
[   42.913383] RDX: 0000000000000000 RSI: ffff88800e67d300 RDI: 0000000000000002
[   42.914032] RBP: ffffc90001623d10 R08: 000000000003b5c5 R09: 0000000000000005
[   42.914553] R10: 000000000003b5a0 R11: 0000000000000024 R12: 00000000000007ff
[   42.915074] R13: 0000000000000801 R14: 00000000000007ff R15: 0000000000000800
[   42.915704] FS:  00007f3777af9740(0000) GS:ffff88807dd00000(0000) knlGS:0000000000000000
[   42.916284] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   42.916865] CR2: 00007f3777c1e580 CR3: 000000000cab4006 CR4: 0000000000770ee0
[   42.917383] PKRU: 55555554
[   42.917586] Call Trace:
[   42.917769]  <TASK>
[   42.917951]  ? rcu_read_lock_sched_held+0x29/0x80
[   42.918307]  ? lock_acquire+0x1a1/0x2f0
[   42.918608]  ? rcu_read_lock_held_common+0x12/0x50
[   42.919057]  ? rcu_read_lock_sched_held+0x29/0x80
[   42.919407]  ? __mutex_lock+0x13a/0xf30
[   42.919701]  ? write_comp_data+0x2f/0x90
[   42.920017]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   42.920468]  iopt_area_unfill_domain+0x32/0x40
[   42.920826]  iopt_table_remove_domain+0x23f/0x4c0
[   42.921186]  iommufd_device_selftest_detach+0x3a/0x90
[   42.921558]  iommufd_selftest_destroy+0x55/0x70
[   42.921897]  iommufd_object_destroy_user+0xce/0x130
[   42.922265]  iommufd_destroy+0xa2/0xc0
[   42.922556]  iommufd_fops_ioctl+0x1ef/0x310
[   42.922920]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   42.923345]  ? write_comp_data+0x2f/0x90
[   42.923649]  __x64_sys_ioctl+0x10e/0x160
[   42.923966]  ? iommufd_get_object.part.6+0x1c0/0x1c0
[   42.924477]  do_syscall_64+0x3b/0x90
[   42.924770]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   42.925141] RIP: 0033:0x7f3777c1e59d
[   42.925411] Code: 00 c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d d3 08 0d 00 f7 d8 64 89 01 48
[   42.926772] RSP: 002b:00007ffd0d727918 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   42.927344] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f3777c1e59d
[   42.927851] RDX: 0000000020000140 RSI: 0000000000003b80 RDI: 0000000000000003
[   42.928507] RBP: 00007ffd0d727930 R08: 00007ffd0d727930 R09: 00007ffd0d727930
[   42.929039] R10: 00007ffd0d727930 R11: 0000000000000213 R12: 0000000000401180
[   42.929551] R13: 00007ffd0d727a50 R14: 0000000000000000 R15: 0000000000000000
[   42.930070]  </TASK>
[   42.930296] irq event stamp: 0
[   42.930600] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   42.931056] hardirqs last disabled at (0): [<ffffffff810fff0c>] copy_process+0x11cc/0x2b10
[   42.931716] softirqs last  enabled at (0): [<ffffffff810fff10>] copy_process+0x11d0/0x2b10
[   42.932412] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   42.932866] ---[ end trace 0000000000000000 ]---
[   42.935641] ------------[ cut here ]------------
[   42.935993] WARNING: CPU: 1 PID: 813 at drivers/iommu/iommufd/pages.c:178 batch_unpin.isra.23+0x151/0x1a0
[   42.936856] Modules linked in:
[   42.937093] CPU: 1 PID: 813 Comm: repro Tainted: G    B   W          6.1.0-a0a6c76cf2a5+ #1
[   42.937686] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   42.938605] RIP: 0010:batch_unpin.isra.23+0x151/0x1a0
[   42.938981] Code: e8 c4 be 2b ff 48 8b 45 d0 48 85 c0 75 17 e8 26 bd 2b ff 48 8b 7d c8 48 89 de e8 fa bd 2b ff 48 39 5d c8 73 07 e8 0f bd 2b ff <0f> 0b e8 08 bd 2b ff 4d 29 e5 31 ff 41 83 c6 01 4c 89 ee 31 db e8
[   42.940447] RSP: 0018:ffffc900016239d8 EFLAGS: 00010246
[   42.940954] RAX: 0000000000000000 RBX: ffffffffffffffff RCX: ffffffff81fded8c
[   42.941473] RDX: 0000000000000000 RSI: ffff88800e67d300 RDI: 0000000000000002
[   42.941980] RBP: ffffc90001623a20 R08: 0000000000000000 R09: ffff88807dd3b890
[   42.942500] R10: 0000000000000ade R11: 0000000000000000 R12: 0000000000000001
[   42.943114] R13: 0000000000000001 R14: 0000000000000000 R15: ffff888005ec8c00
[   42.943633] FS:  0000000000000000(0000) GS:ffff88807dd00000(0000) knlGS:0000000000000000
[   42.944276] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   42.944793] CR2: 00007f3777cf0500 CR3: 0000000003c12003 CR4: 0000000000770ee0
[   42.945309] PKRU: 55555554
[   42.945514] Call Trace:
[   42.945701]  <TASK>
[   42.945871]  iopt_pages_unfill_xarray+0x39f/0x5c0
[   42.946233]  ? rcu_read_lock_sched_held+0x29/0x80
[   42.946680]  ? rcu_read_lock_held_common+0x12/0x50
[   42.947056]  ? write_comp_data+0x2f/0x90
[   42.947355]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   42.947708]  ? write_comp_data+0x2f/0x90
[   42.948157]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   42.948510]  ? interval_tree_remove+0x291/0x4e0
[   42.948873]  ? write_comp_data+0x2f/0x90
[   42.949168]  iopt_area_remove_access+0x108/0x120
[   42.949745]  iommufd_access_unpin_pages+0x177/0x210
[   42.950370]  iommufd_test_access_unmap+0xe0/0x130
[   42.951058]  ? iommufd_test_access_unmap+0x130/0x130
[   42.951656]  iommufd_test_staccess_release+0x39/0x60
[   42.952386]  __fput+0x11f/0x450
[   42.952818]  ____fput+0x1e/0x30
[   42.953211]  task_work_run+0xb6/0x120
[   42.953782]  do_exit+0x521/0x1340
[   42.954193]  ? lock_release+0x202/0x2c0
[   42.954662]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   42.955306]  ? trace_hardirqs_on+0x3f/0x100
[   42.955825]  do_group_exit+0x5e/0xf0
[   42.956317]  __x64_sys_exit_group+0x25/0x30
[   42.956863]  do_syscall_64+0x3b/0x90
[   42.957304]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   42.958010] RIP: 0033:0x7f3777be6cf6
[   42.958429] Code: Unable to access opcode bytes at 0x7f3777be6ccc.
[   42.959107] RSP: 002b:00007ffd0d7278d8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
[   42.959989] RAX: ffffffffffffffda RBX: 00007f3777cf1490 RCX: 00007f3777be6cf6
[   42.960912] RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
[   42.961721] RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffff80
[   42.962610] R10: 0000000000000004 R11: 0000000000000246 R12: 00007f3777cf1490
[   42.963456] R13: 0000000000000001 R14: 00007f3777cf4e88 R15: 0000000000000000
[   42.964304]  </TASK>
[   42.964593] irq event stamp: 0
[   42.965010] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   42.965693] hardirqs last disabled at (0): [<ffffffff810fff0c>] copy_process+0x11cc/0x2b10
[   42.966742] softirqs last  enabled at (0): [<ffffffff810fff10>] copy_process+0x11d0/0x2b10
[   42.967783] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   42.968499] ---[ end trace 0000000000000000 ]---
[   42.969347] ------------[ cut here ]------------
[   42.969889] WARNING: CPU: 1 PID: 813 at drivers/iommu/iommufd/pages.c:886 update_unpinned+0x75/0x80
[   42.971028] Modules linked in:
[   42.971381] CPU: 1 PID: 813 Comm: repro Tainted: G    B   W          6.1.0-a0a6c76cf2a5+ #1
[   42.972455] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   42.973886] RIP: 0010:update_unpinned+0x75/0x80
[   42.974503] Code: ac 2b ff 48 89 de 31 c9 31 d2 4c 29 e6 4c 89 ef e8 70 fb ff ff e8 bb ac 2b ff 5b 41 5c 41 5d 5d c3 cc cc cc cc e8 ab ac 2b ff <0f> 0b eb e7 0f 1f 80 00 00 00 00 0f 1f 44 00 00 55 48 89 e5 41 57
[   42.976622] RSP: 0018:ffffc90001623a08 EFLAGS: 00010246
[   42.977372] RAX: 0000000000000000 RBX: 0000000000000000 RCX: ffffffff81fdfdcf
[   42.978143] RDX: 0000000000000000 RSI: ffff88800e67d300 RDI: 0000000000000002
[   42.979071] RBP: ffffc90001623a20 R08: 0000000000000000 R09: ffff88807dd3b890
[   42.979891] R10: 0000000000000ade R11: 0000000000000000 R12: ffffffffffffffff
[   42.980792] R13: ffff888005ec8c00 R14: 0000000000000002 R15: 0000000000000002
[   42.981650] FS:  0000000000000000(0000) GS:ffff88807dd00000(0000) knlGS:0000000000000000
[   42.982584] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   42.983283] CR2: 00007f3777cf0500 CR3: 0000000003c12003 CR4: 0000000000770ee0
[   42.984181] PKRU: 55555554
[   42.984514] Call Trace:
[   42.984833]  <TASK>
[   42.985095]  iopt_pages_unfill_xarray+0x522/0x5c0
[   42.985725]  ? rcu_read_lock_sched_held+0x29/0x80
[   42.986301]  ? rcu_read_lock_held_common+0x12/0x50
[   42.986972]  ? write_comp_data+0x2f/0x90
[   42.987435]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   42.987994]  ? write_comp_data+0x2f/0x90
[   42.988514]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   42.989090]  ? interval_tree_remove+0x291/0x4e0
[   42.989764]  ? write_comp_data+0x2f/0x90
[   42.990227]  iopt_area_remove_access+0x108/0x120
[   42.990801]  iommufd_access_unpin_pages+0x177/0x210
[   42.991464]  iommufd_test_access_unmap+0xe0/0x130
[   42.992012]  ? iommufd_test_access_unmap+0x130/0x130
[   42.992586]  iommufd_test_staccess_release+0x39/0x60
[   42.993142]  __fput+0x11f/0x450
[   42.993517]  ____fput+0x1e/0x30
[   42.993885]  task_work_run+0xb6/0x120
[   42.994325]  do_exit+0x521/0x1340
[   42.994721]  ? lock_release+0x202/0x2c0
[   42.995171]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   42.995718]  ? trace_hardirqs_on+0x3f/0x100
[   42.996221]  do_group_exit+0x5e/0xf0
[   42.996645]  __x64_sys_exit_group+0x25/0x30
[   42.997159]  do_syscall_64+0x3b/0x90
[   42.997587]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   42.998171] RIP: 0033:0x7f3777be6cf6
[   42.998603] Code: Unable to access opcode bytes at 0x7f3777be6ccc.
[   42.999252] RSP: 002b:00007ffd0d7278d8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
[   43.000088] RAX: ffffffffffffffda RBX: 00007f3777cf1490 RCX: 00007f3777be6cf6
[   43.000975] RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
[   43.001772] RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffff80
[   43.002572] R10: 0000000000000004 R11: 0000000000000246 R12: 00007f3777cf1490
[   43.003348] R13: 0000000000000001 R14: 00007f3777cf4e88 R15: 0000000000000000
[   43.004144]  </TASK>
[   43.004408] irq event stamp: 0
[   43.004785] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   43.005492] hardirqs last disabled at (0): [<ffffffff810fff0c>] copy_process+0x11cc/0x2b10
[   43.006421] softirqs last  enabled at (0): [<ffffffff810fff10>] copy_process+0x11d0/0x2b10
[   43.007320] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   43.008012] ---[ end trace 0000000000000000 ]---
[   43.008769] ------------[ cut here ]------------
[   43.009297] WARNING: CPU: 1 PID: 813 at drivers/iommu/iommufd/pages.c:1181 iopt_release_pages+0x159/0x190
[   43.010375] Modules linked in:
[   43.010747] CPU: 1 PID: 813 Comm: repro Tainted: G    B   W          6.1.0-a0a6c76cf2a5+ #1
[   43.011682] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   43.013028] RIP: 0010:iopt_release_pages+0x159/0x190
[   43.013640] Code: b5 11 ff eb cb e8 87 90 2b ff be 03 00 00 00 4c 89 f7 e8 6a 8b ce ff eb b7 e8 73 90 2b ff 0f 0b e9 ed fe ff ff e8 67 90 2b ff <0f> 0b e9 00 ff ff ff e8 5b 90 2b ff 0f 0b e9 07 ff ff ff e8 4f 90
[   43.015712] RSP: 0018:ffffc90001623c88 EFLAGS: 00010246
[   43.016337] RAX: 0000000000000000 RBX: ffff888005ec8c00 RCX: ffffffff81fe1957
[   43.017194] RDX: 0000000000000000 RSI: ffff88800e67d300 RDI: 0000000000000002
[   43.017995] RBP: ffffc90001623ca8 R08: 0000000000000000 R09: 0000000000000000
[   43.018830] R10: ffffc90001623c58 R11: 0000000000000000 R12: ffffffffffffffff
[   43.019661] R13: 0000000001000000 R14: 00000000017fffff R15: 0000000000000000
[   43.020505] FS:  0000000000000000(0000) GS:ffff88807dd00000(0000) knlGS:0000000000000000
[   43.021472] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   43.022171] CR2: 00007f3777cf0500 CR3: 0000000003c12003 CR4: 0000000000770ee0
[   43.023004] PKRU: 55555554
[   43.023318] Call Trace:
[   43.023621]  <TASK>
[   43.023894]  iopt_unmap_iova_range+0x1ef/0x2e0
[   43.024457]  iopt_unmap_all+0x2f/0x60
[   43.024946]  iommufd_ioas_destroy+0x2c/0x70
[   43.025478]  iommufd_fops_release+0xd4/0x170
[   43.025991]  ? iommufd_ctx_get+0x30/0x30
[   43.026463]  __fput+0x11f/0x450
[   43.026880]  ____fput+0x1e/0x30
[   43.027290]  task_work_run+0xb6/0x120
[   43.027779]  do_exit+0x521/0x1340
[   43.028196]  ? lock_release+0x202/0x2c0
[   43.028690]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   43.029265]  ? trace_hardirqs_on+0x3f/0x100
[   43.029774]  do_group_exit+0x5e/0xf0
[   43.030212]  __x64_sys_exit_group+0x25/0x30
[   43.030736]  do_syscall_64+0x3b/0x90
[   43.031188]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   43.031802] RIP: 0033:0x7f3777be6cf6
[   43.032245] Code: Unable to access opcode bytes at 0x7f3777be6ccc.
[   43.033007] RSP: 002b:00007ffd0d7278d8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
[   43.033901] RAX: ffffffffffffffda RBX: 00007f3777cf1490 RCX: 00007f3777be6cf6
[   43.034755] RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
[   43.035585] RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffff80
[   43.036413] R10: 0000000000000004 R11: 0000000000000246 R12: 00007f3777cf1490
[   43.037261] R13: 0000000000000001 R14: 00007f3777cf4e88 R15: 0000000000000000
[   43.038098]  </TASK>
[   43.038378] irq event stamp: 0
[   43.038754] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   43.039485] hardirqs last disabled at (0): [<ffffffff810fff0c>] copy_process+0x11cc/0x2b10
[   43.040450] softirqs last  enabled at (0): [<ffffffff810fff10>] copy_process+0x11d0/0x2b10
[   43.041444] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   43.042184] ---[ end trace 0000000000000000 ]---
[   43.580360] ------------[ cut here ]------------
[   43.580951] WARNING: CPU: 1 PID: 830 at drivers/iommu/iommufd/pages.c:294 __iopt_area_unfill_domain+0x152/0x560
[   43.582153] Modules linked in:
[   43.582545] CPU: 1 PID: 830 Comm: repro Tainted: G    B   W          6.1.0-a0a6c76cf2a5+ #1
[   43.583483] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   43.584789] RIP: 0010:__iopt_area_unfill_domain+0x152/0x560
[   43.585432] Code: a1 2b ff 44 8b 64 24 54 48 8b 44 24 48 31 ff 44 89 e6 48 89 44 24 38 e8 6c a2 2b ff 45 85 e4 0f 85 eb 01 00 00 e8 ee a0 2b ff <0f> 0b e8 e7 a0 2b ff 48 8b 44 24 38 89 5c 24 58 89 18 8b 44 24 54
[   43.587517] RSP: 0018:ffffc900016abae0 EFLAGS: 00010246
[   43.588136] RAX: 0000000000000000 RBX: 00000000ffffffff RCX: ffffffff81fe0bd5
[   43.588988] RDX: 0000000000000000 RSI: ffff88800e67a980 RDI: 0000000000000002
[   43.589814] RBP: ffffc900016abd10 R08: 000000000003b5c5 R09: 0000000000000006
[   43.590612] R10: 000000000003b5a0 R11: 0000000000000024 R12: 0000000000000001
[   43.591425] R13: 0000000000000801 R14: 00000000000007ff R15: 0000000000000800
[   43.592250] FS:  00007f3777af9740(0000) GS:ffff88807dd00000(0000) knlGS:0000000000000000
[   43.593198] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   43.593844] CR2: 00007f3777c1e580 CR3: 000000000d51c002 CR4: 0000000000770ee0
[   43.594657] PKRU: 55555554
[   43.594982] Call Trace:
[   43.595273]  <TASK>
[   43.595553]  ? rcu_read_lock_sched_held+0x29/0x80
[   43.596134]  ? lock_acquire+0x1a1/0x2f0
[   43.596601]  ? rcu_read_lock_held_common+0x12/0x50
[   43.597186]  ? rcu_read_lock_sched_held+0x29/0x80
[   43.597762]  ? __mutex_lock+0x13a/0xf30
[   43.598248]  ? write_comp_data+0x2f/0x90
[   43.598736]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   43.599292]  iopt_area_unfill_domain+0x32/0x40
[   43.599836]  iopt_table_remove_domain+0x23f/0x4c0
[   43.600413]  iommufd_device_selftest_detach+0x3a/0x90
[   43.601069]  iommufd_selftest_destroy+0x55/0x70
[   43.601618]  iommufd_object_destroy_user+0xce/0x130
[   43.602172]  iommufd_destroy+0xa2/0xc0
[   43.602618]  iommufd_fops_ioctl+0x1ef/0x310
[   43.603119]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   43.603681]  ? write_comp_data+0x2f/0x90
[   43.604169]  __x64_sys_ioctl+0x10e/0x160
[   43.604709]  ? iommufd_get_object.part.6+0x1c0/0x1c0
[   43.605276]  do_syscall_64+0x3b/0x90
[   43.605691]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   43.606284] RIP: 0033:0x7f3777c1e59d
[   43.606714] Code: 00 c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d d3 08 0d 00 f7 d8 64 89 01 48
[   43.608776] RSP: 002b:00007ffd0d727918 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   43.609650] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f3777c1e59d
[   43.610465] RDX: 0000000020000140 RSI: 0000000000003b80 RDI: 0000000000000003
[   43.611241] RBP: 00007ffd0d727930 R08: 00007ffd0d727930 R09: 00007ffd0d727930
[   43.612004] R10: 00007ffd0d727930 R11: 0000000000000213 R12: 0000000000401180
[   43.612589] R13: 00007ffd0d727a50 R14: 0000000000000000 R15: 0000000000000000
[   43.613424]  </TASK>
[   43.613713] irq event stamp: 0
[   43.614083] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   43.614825] hardirqs last disabled at (0): [<ffffffff810fff0c>] copy_process+0x11cc/0x2b10
[   43.615773] softirqs last  enabled at (0): [<ffffffff810fff10>] copy_process+0x11d0/0x2b10
[   43.616766] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   43.617472] ---[ end trace 0000000000000000 ]---
[   43.618153] ------------[ cut here ]------------
[   43.618718] WARNING: CPU: 1 PID: 830 at drivers/iommu/iommufd/pages.c:1290 __iopt_area_unfill_domain+0x54f/0x560
[   43.619933] Modules linked in:
[   43.620325] CPU: 1 PID: 830 Comm: repro Tainted: G    B   W          6.1.0-a0a6c76cf2a5+ #1
[   43.621291] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   43.622574] RIP: 0010:__iopt_area_unfill_domain+0x54f/0x560
[   43.623222] Code: e8 86 9e 2b ff 85 db 0f 85 35 fb ff ff e8 09 9d 2b ff 0f 0b e9 29 fb ff ff e8 fd 9c 2b ff 0f 0b e9 69 fe ff ff e8 f1 9c 2b ff <0f> 0b e9 58 ff ff ff e8 65 2d dc 00 0f 1f 44 00 00 0f 1f 44 00 00
[   43.625384] RSP: 0018:ffffc900016abae0 EFLAGS: 00010246
[   43.626029] RAX: 0000000000000000 RBX: 00000000ffffffff RCX: ffffffff81fe0d26
[   43.626836] RDX: 0000000000000000 RSI: ffff88800e67a980 RDI: 0000000000000002
[   43.627662] RBP: ffffc900016abd10 R08: 000000000003b5c5 R09: 0000000000000006
[   43.628513] R10: 000000000003b5a0 R11: 0000000000000024 R12: 00000000000007ff
[   43.629328] R13: 0000000000000801 R14: 00000000000007ff R15: 0000000000000800
[   43.630152] FS:  00007f3777af9740(0000) GS:ffff88807dd00000(0000) knlGS:0000000000000000
[   43.631098] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   43.631780] CR2: 00007f3777c1e580 CR3: 000000000d51c002 CR4: 0000000000770ee0
[   43.632646] PKRU: 55555554
[   43.633032] Call Trace:
[   43.633335]  <TASK>
[   43.633615]  ? rcu_read_lock_sched_held+0x29/0x80
[   43.634187]  ? lock_acquire+0x1a1/0x2f0
[   43.634672]  ? rcu_read_lock_held_common+0x12/0x50
[   43.635269]  ? rcu_read_lock_sched_held+0x29/0x80
[   43.635840]  ? __mutex_lock+0x13a/0xf30
[   43.636322]  ? write_comp_data+0x2f/0x90
[   43.636817]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   43.637384]  iopt_area_unfill_domain+0x32/0x40
[   43.637944]  iopt_table_remove_domain+0x23f/0x4c0
[   43.638544]  iommufd_device_selftest_detach+0x3a/0x90
[   43.639144]  iommufd_selftest_destroy+0x55/0x70
[   43.639711]  iommufd_object_destroy_user+0xce/0x130
[   43.640335]  iommufd_destroy+0xa2/0xc0
[   43.640846]  iommufd_fops_ioctl+0x1ef/0x310
[   43.641348]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   43.641911]  ? write_comp_data+0x2f/0x90
[   43.642384]  __x64_sys_ioctl+0x10e/0x160
[   43.642868]  ? iommufd_get_object.part.6+0x1c0/0x1c0
[   43.643436]  do_syscall_64+0x3b/0x90
[   43.643863]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   43.644455] RIP: 0033:0x7f3777c1e59d
[   43.644885] Code: 00 c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d d3 08 0d 00 f7 d8 64 89 01 48
[   43.646927] RSP: 002b:00007ffd0d727918 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   43.647790] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f3777c1e59d
[   43.648616] RDX: 0000000020000140 RSI: 0000000000003b80 RDI: 0000000000000003
[   43.649470] RBP: 00007ffd0d727930 R08: 00007ffd0d727930 R09: 00007ffd0d727930
[   43.650310] R10: 00007ffd0d727930 R11: 0000000000000213 R12: 0000000000401180
[   43.651103] R13: 00007ffd0d727a50 R14: 0000000000000000 R15: 0000000000000000
[   43.651927]  </TASK>
[   43.652203] irq event stamp: 0
[   43.652617] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   43.653456] hardirqs last disabled at (0): [<ffffffff810fff0c>] copy_process+0x11cc/0x2b10
[   43.654436] softirqs last  enabled at (0): [<ffffffff810fff10>] copy_process+0x11d0/0x2b10
[   43.655396] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   43.656119] ---[ end trace 0000000000000000 ]---
[   43.660739] ------------[ cut here ]------------
[   43.661312] WARNING: CPU: 1 PID: 830 at drivers/iommu/iommufd/pages.c:178 batch_unpin.isra.23+0x151/0x1a0
[   43.662456] Modules linked in:
[   43.662827] CPU: 1 PID: 830 Comm: repro Tainted: G    B   W          6.1.0-a0a6c76cf2a5+ #1
[   43.663787] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   43.665184] RIP: 0010:batch_unpin.isra.23+0x151/0x1a0
[   43.665809] Code: e8 c4 be 2b ff 48 8b 45 d0 48 85 c0 75 17 e8 26 bd 2b ff 48 8b 7d c8 48 89 de e8 fa bd 2b ff 48 39 5d c8 73 07 e8 0f bd 2b ff <0f> 0b e8 08 bd 2b ff 4d 29 e5 31 ff 41 83 c6 01 4c 89 ee 31 db e8
[   43.667837] RSP: 0018:ffffc900016ab9d8 EFLAGS: 00010246
[   43.668483] RAX: 0000000000000000 RBX: ffffffffffffffff RCX: ffffffff81fded8c
[   43.669384] RDX: 0000000000000000 RSI: ffff88800e67a980 RDI: 0000000000000002
[   43.670211] RBP: ffffc900016aba20 R08: 0000000000000000 R09: ffff88807dd3b890
[   43.671023] R10: 0000000000000bfe R11: 0000000000000000 R12: 0000000000000001
[   43.671887] R13: 0000000000000001 R14: 0000000000000000 R15: ffff888005ec9c00
[   43.672729] FS:  0000000000000000(0000) GS:ffff88807dd00000(0000) knlGS:0000000000000000
[   43.673682] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   43.674370] CR2: 00007f3777cf0500 CR3: 0000000003c12006 CR4: 0000000000770ee0
[   43.675188] PKRU: 55555554
[   43.675540] Call Trace:
[   43.675852]  <TASK>
[   43.676137]  iopt_pages_unfill_xarray+0x39f/0x5c0
[   43.676764]  ? rcu_read_lock_sched_held+0x29/0x80
[   43.677383]  ? rcu_read_lock_held_common+0x12/0x50
[   43.677996]  ? write_comp_data+0x2f/0x90
[   43.678516]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   43.679092]  ? write_comp_data+0x2f/0x90
[   43.679568]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   43.680155]  ? interval_tree_remove+0x291/0x4e0
[   43.680777]  ? write_comp_data+0x2f/0x90
[   43.681296]  iopt_area_remove_access+0x108/0x120
[   43.681883]  iommufd_access_unpin_pages+0x177/0x210
[   43.682509]  iommufd_test_access_unmap+0xe0/0x130
[   43.683085]  ? iommufd_test_access_unmap+0x130/0x130
[   43.683702]  iommufd_test_staccess_release+0x39/0x60
[   43.684320]  __fput+0x11f/0x450
[   43.684784]  ____fput+0x1e/0x30
[   43.685209]  task_work_run+0xb6/0x120
[   43.685688]  do_exit+0x521/0x1340
[   43.686120]  ? lock_release+0x202/0x2c0
[   43.686630]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   43.687227]  ? trace_hardirqs_on+0x3f/0x100
[   43.687764]  do_group_exit+0x5e/0xf0
[   43.688202]  __x64_sys_exit_group+0x25/0x30
[   43.688742]  do_syscall_64+0x3b/0x90
[   43.689228]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   43.689877] RIP: 0033:0x7f3777be6cf6
[   43.690345] Code: Unable to access opcode bytes at 0x7f3777be6ccc.
[   43.691073] RSP: 002b:00007ffd0d7278d8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
[   43.692021] RAX: ffffffffffffffda RBX: 00007f3777cf1490 RCX: 00007f3777be6cf6
[   43.692891] RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
[   43.693751] RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffff80
[   43.694637] R10: 0000000000000004 R11: 0000000000000246 R12: 00007f3777cf1490
[   43.695513] R13: 0000000000000001 R14: 00007f3777cf4e88 R15: 0000000000000000
[   43.696414]  </TASK>
[   43.696740] irq event stamp: 0
[   43.697148] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   43.697943] hardirqs last disabled at (0): [<ffffffff810fff0c>] copy_process+0x11cc/0x2b10
[   43.698978] softirqs last  enabled at (0): [<ffffffff810fff10>] copy_process+0x11d0/0x2b10
[   43.700006] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   43.700842] ---[ end trace 0000000000000000 ]---
[   43.701596] ------------[ cut here ]------------
[   43.702177] WARNING: CPU: 1 PID: 830 at drivers/iommu/iommufd/pages.c:886 update_unpinned+0x75/0x80
[   43.703255] Modules linked in:
[   43.703655] CPU: 1 PID: 830 Comm: repro Tainted: G    B   W          6.1.0-a0a6c76cf2a5+ #1
[   43.704745] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   43.706137] RIP: 0010:update_unpinned+0x75/0x80
[   43.706711] Code: ac 2b ff 48 89 de 31 c9 31 d2 4c 29 e6 4c 89 ef e8 70 fb ff ff e8 bb ac 2b ff 5b 41 5c 41 5d 5d c3 cc cc cc cc e8 ab ac 2b ff <0f> 0b eb e7 0f 1f 80 00 00 00 00 0f 1f 44 00 00 55 48 89 e5 41 57
[   43.708936] RSP: 0018:ffffc900016aba08 EFLAGS: 00010246
[   43.709580] RAX: 0000000000000000 RBX: 0000000000000000 RCX: ffffffff81fdfdcf
[   43.710459] RDX: 0000000000000000 RSI: ffff88800e67a980 RDI: 0000000000000002
[   43.711313] RBP: ffffc900016aba20 R08: 0000000000000000 R09: ffff88807dd3b890
[   43.712220] R10: 0000000000000bfe R11: 0000000000000000 R12: ffffffffffffffff
[   43.713097] R13: ffff888005ec9c00 R14: 0000000000000002 R15: 0000000000000002
[   43.713970] FS:  0000000000000000(0000) GS:ffff88807dd00000(0000) knlGS:0000000000000000
[   43.714934] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   43.715625] CR2: 00007f3777cf0500 CR3: 0000000003c12006 CR4: 0000000000770ee0
[   43.716481] PKRU: 55555554
[   43.716871] Call Trace:
[   43.717188]  <TASK>
[   43.717468]  iopt_pages_unfill_xarray+0x522/0x5c0
[   43.718078]  ? rcu_read_lock_sched_held+0x29/0x80
[   43.718664]  ? rcu_read_lock_held_common+0x12/0x50
[   43.719248]  ? write_comp_data+0x2f/0x90
[   43.719743]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   43.720352]  ? write_comp_data+0x2f/0x90
[   43.720899]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   43.721476]  ? interval_tree_remove+0x291/0x4e0
[   43.722024]  ? write_comp_data+0x2f/0x90
[   43.722536]  iopt_area_remove_access+0x108/0x120
[   43.723132]  iommufd_access_unpin_pages+0x177/0x210
[   43.723751]  iommufd_test_access_unmap+0xe0/0x130
[   43.724363]  ? iommufd_test_access_unmap+0x130/0x130
[   43.725016]  iommufd_test_staccess_release+0x39/0x60
[   43.725641]  __fput+0x11f/0x450
[   43.726072]  ____fput+0x1e/0x30
[   43.726512]  task_work_run+0xb6/0x120
[   43.726982]  do_exit+0x521/0x1340
[   43.727404]  ? lock_release+0x202/0x2c0
[   43.727891]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   43.728449]  ? trace_hardirqs_on+0x3f/0x100
[   43.728983]  do_group_exit+0x5e/0xf0
[   43.729455]  __x64_sys_exit_group+0x25/0x30
[   43.730008]  do_syscall_64+0x3b/0x90
[   43.730505]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   43.731110] RIP: 0033:0x7f3777be6cf6
[   43.731555] Code: Unable to access opcode bytes at 0x7f3777be6ccc.
[   43.732308] RSP: 002b:00007ffd0d7278d8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
[   43.733241] RAX: ffffffffffffffda RBX: 00007f3777cf1490 RCX: 00007f3777be6cf6
[   43.734110] RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
[   43.734960] RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffff80
[   43.735812] R10: 0000000000000004 R11: 0000000000000246 R12: 00007f3777cf1490
[   43.736637] R13: 0000000000000001 R14: 00007f3777cf4e88 R15: 0000000000000000
[   43.737557]  </TASK>
[   43.737852] irq event stamp: 0
[   43.738244] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   43.738982] hardirqs last disabled at (0): [<ffffffff810fff0c>] copy_process+0x11cc/0x2b10
[   43.739998] softirqs last  enabled at (0): [<ffffffff810fff10>] copy_process+0x11d0/0x2b10
[   43.741022] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   43.741803] ---[ end trace 0000000000000000 ]---
[   43.742581] ------------[ cut here ]------------
[   43.743119] WARNING: CPU: 1 PID: 830 at drivers/iommu/iommufd/pages.c:1181 iopt_release_pages+0x159/0x190
[   43.744272] Modules linked in:
[   43.744695] CPU: 1 PID: 830 Comm: repro Tainted: G    B   W          6.1.0-a0a6c76cf2a5+ #1
[   43.745654] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   43.746965] RIP: 0010:iopt_release_pages+0x159/0x190
[   43.747594] Code: b5 11 ff eb cb e8 87 90 2b ff be 03 00 00 00 4c 89 f7 e8 6a 8b ce ff eb b7 e8 73 90 2b ff 0f 0b e9 ed fe ff ff e8 67 90 2b ff <0f> 0b e9 00 ff ff ff e8 5b 90 2b ff 0f 0b e9 07 ff ff ff e8 4f 90
[   43.749782] RSP: 0018:ffffc900016abc88 EFLAGS: 00010246
[   43.750408] RAX: 0000000000000000 RBX: ffff888005ec9c00 RCX: ffffffff81fe1957
[   43.751222] RDX: 0000000000000000 RSI: ffff88800e67a980 RDI: 0000000000000002
[   43.752049] RBP: ffffc900016abca8 R08: 0000000000000000 R09: 0000000000000000
[   43.752940] R10: ffffc900016abc58 R11: 0000000000000000 R12: ffffffffffffffff
[   43.753802] R13: 0000000001000000 R14: 00000000017fffff R15: 0000000000000000
[   43.754654] FS:  0000000000000000(0000) GS:ffff88807dd00000(0000) knlGS:0000000000000000
[   43.755597] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   43.756295] CR2: 00007f3777cf0500 CR3: 0000000003c12006 CR4: 0000000000770ee0
[   43.757176] PKRU: 55555554
[   43.757516] Call Trace:
[   43.757816]  <TASK>
[   43.758083]  iopt_unmap_iova_range+0x1ef/0x2e0
[   43.758639]  iopt_unmap_all+0x2f/0x60
[   43.759105]  iommufd_ioas_destroy+0x2c/0x70
[   43.759637]  iommufd_fops_release+0xd4/0x170
[   43.760179]  ? iommufd_ctx_get+0x30/0x30
[   43.760710]  __fput+0x11f/0x450
[   43.761107]  ____fput+0x1e/0x30
[   43.761503]  task_work_run+0xb6/0x120
[   43.761981]  do_exit+0x521/0x1340
[   43.762406]  ? lock_release+0x202/0x2c0
[   43.762874]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   43.763432]  ? trace_hardirqs_on+0x3f/0x100
[   43.763951]  do_group_exit+0x5e/0xf0
[   43.764414]  __x64_sys_exit_group+0x25/0x30
[   43.764967]  do_syscall_64+0x3b/0x90
[   43.765427]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   43.766042] RIP: 0033:0x7f3777be6cf6
[   43.766489] Code: Unable to access opcode bytes at 0x7f3777be6ccc.
[   43.767223] RSP: 002b:00007ffd0d7278d8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
[   43.768098] RAX: ffffffffffffffda RBX: 00007f3777cf1490 RCX: 00007f3777be6cf6
[   43.768977] RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
[   43.769778] RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffff80
[   43.770639] R10: 0000000000000004 R11: 0000000000000246 R12: 00007f3777cf1490
[   43.771456] R13: 0000000000000001 R14: 00007f3777cf4e88 R15: 0000000000000000
[   43.772305]  </TASK>
[   43.772589] irq event stamp: 0
[   43.772999] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   43.773762] hardirqs last disabled at (0): [<ffffffff810fff0c>] copy_process+0x11cc/0x2b10
[   43.774757] softirqs last  enabled at (0): [<ffffffff810fff10>] copy_process+0x11d0/0x2b10
[   43.775725] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   43.776466] ---[ end trace 0000000000000000 ]---
[   43.973555] ------------[ cut here ]------------
[   43.974131] WARNING: CPU: 1 PID: 836 at drivers/iommu/iommufd/pages.c:294 __iopt_area_unfill_domain+0x152/0x560
[   43.975342] Modules linked in:
[   43.975713] CPU: 1 PID: 836 Comm: repro Tainted: G    B   W          6.1.0-a0a6c76cf2a5+ #1
[   43.976719] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   43.978018] RIP: 0010:__iopt_area_unfill_domain+0x152/0x560
[   43.978856] Code: a1 2b ff 44 8b 64 24 54 48 8b 44 24 48 31 ff 44 89 e6 48 89 44 24 38 e8 6c a2 2b ff 45 85 e4 0f 85 eb 01 00 00 e8 ee a0 2b ff <0f> 0b e8 e7 a0 2b ff 48 8b 44 24 38 89 5c 24 58 89 18 8b 44 24 54
[   43.981168] RSP: 0018:ffffc900016dbae0 EFLAGS: 00010246
[   43.981878] RAX: 0000000000000000 RBX: 00000000ffffffff RCX: ffffffff81fe0bd5
[   43.982799] RDX: 0000000000000000 RSI: ffff88800e678000 RDI: 0000000000000002
[   43.983607] RBP: ffffc900016dbd10 R08: 000000000003b5c5 R09: 000000000000000a
[   43.984564] R10: 000000000003b5a0 R11: 0000000000000024 R12: 0000000000000001
[   43.985551] R13: 0000000000000801 R14: 00000000000007ff R15: 0000000000000800
[   43.986361] FS:  00007f3777af9740(0000) GS:ffff88807dd00000(0000) knlGS:0000000000000000
[   43.987243] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   43.988026] CR2: 00007f3777c1e580 CR3: 0000000009f72003 CR4: 0000000000770ee0
[   43.988903] PKRU: 55555554
[   43.989294] Call Trace:
[   43.989662]  <TASK>
[   43.989949]  ? rcu_read_lock_sched_held+0x29/0x80
[   43.990526]  ? lock_acquire+0x1a1/0x2f0
[   43.990972]  ? rcu_read_lock_held_common+0x12/0x50
[   43.991599]  ? rcu_read_lock_sched_held+0x29/0x80
[   43.992159]  ? __mutex_lock+0x13a/0xf30
[   43.992687]  ? write_comp_data+0x2f/0x90
[   43.993225]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   43.993801]  iopt_area_unfill_domain+0x32/0x40
[   43.994309]  iopt_table_remove_domain+0x23f/0x4c0
[   43.994987]  iommufd_device_selftest_detach+0x3a/0x90
[   43.995629]  iommufd_selftest_destroy+0x55/0x70
[   43.996306]  iommufd_object_destroy_user+0xce/0x130
[   43.996942]  iommufd_destroy+0xa2/0xc0
[   43.997410]  iommufd_fops_ioctl+0x1ef/0x310
[   43.997923]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   43.998618]  ? write_comp_data+0x2f/0x90
[   43.999093]  __x64_sys_ioctl+0x10e/0x160
[   43.999596]  ? iommufd_get_object.part.6+0x1c0/0x1c0
[   44.000277]  do_syscall_64+0x3b/0x90
[   44.000737]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   44.001322] RIP: 0033:0x7f3777c1e59d
[   44.001798] Code: 00 c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d d3 08 0d 00 f7 d8 64 89 01 48
[   44.004090] RSP: 002b:00007ffd0d727918 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   44.005058] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f3777c1e59d
[   44.005874] RDX: 0000000020000140 RSI: 0000000000003b80 RDI: 0000000000000003
[   44.006731] RBP: 00007ffd0d727930 R08: 00007ffd0d727930 R09: 00007ffd0d727930
[   44.007539] R10: 00007ffd0d727930 R11: 0000000000000213 R12: 0000000000401180
[   44.008445] R13: 00007ffd0d727a50 R14: 0000000000000000 R15: 0000000000000000
[   44.009347]  </TASK>
[   44.009692] irq event stamp: 0
[   44.010049] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   44.010790] hardirqs last disabled at (0): [<ffffffff810fff0c>] copy_process+0x11cc/0x2b10
[   44.011935] softirqs last  enabled at (0): [<ffffffff810fff10>] copy_process+0x11d0/0x2b10
[   44.012966] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   44.013716] ---[ end trace 0000000000000000 ]---
[   44.014406] ------------[ cut here ]------------
[   44.015011] WARNING: CPU: 1 PID: 836 at drivers/iommu/iommufd/pages.c:1290 __iopt_area_unfill_domain+0x54f/0x560
[   44.016344] Modules linked in:
[   44.016785] CPU: 1 PID: 836 Comm: repro Tainted: G    B   W          6.1.0-a0a6c76cf2a5+ #1
[   44.017720] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   44.019121] RIP: 0010:__iopt_area_unfill_domain+0x54f/0x560
[   44.019854] Code: e8 86 9e 2b ff 85 db 0f 85 35 fb ff ff e8 09 9d 2b ff 0f 0b e9 29 fb ff ff e8 fd 9c 2b ff 0f 0b e9 69 fe ff ff e8 f1 9c 2b ff <0f> 0b e9 58 ff ff ff e8 65 2d dc 00 0f 1f 44 00 00 0f 1f 44 00 00
[   44.022027] RSP: 0018:ffffc900016dbae0 EFLAGS: 00010246
[   44.022732] RAX: 0000000000000000 RBX: 00000000ffffffff RCX: ffffffff81fe0d26
[   44.023559] RDX: 0000000000000000 RSI: ffff88800e678000 RDI: 0000000000000002
[   44.024508] RBP: ffffc900016dbd10 R08: 000000000003b5c5 R09: 000000000000000a
[   44.025339] R10: 000000000003b5a0 R11: 0000000000000024 R12: 00000000000007ff
[   44.026225] R13: 0000000000000801 R14: 00000000000007ff R15: 0000000000000800
[   44.027039] FS:  00007f3777af9740(0000) GS:ffff88807dd00000(0000) knlGS:0000000000000000
[   44.028077] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   44.028847] CR2: 00007f3777c1e580 CR3: 0000000009f72003 CR4: 0000000000770ee0
[   44.029805] PKRU: 55555554
[   44.030128] Call Trace:
[   44.030438]  <TASK>
[   44.030732]  ? rcu_read_lock_sched_held+0x29/0x80
[   44.031450]  ? lock_acquire+0x1a1/0x2f0
[   44.031934]  ? rcu_read_lock_held_common+0x12/0x50
[   44.032631]  ? rcu_read_lock_sched_held+0x29/0x80
[   44.033244]  ? __mutex_lock+0x13a/0xf30
[   44.033689]  ? write_comp_data+0x2f/0x90
[   44.034190]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   44.034947]  iopt_area_unfill_domain+0x32/0x40
[   44.035510]  iopt_table_remove_domain+0x23f/0x4c0
[   44.036109]  iommufd_device_selftest_detach+0x3a/0x90
[   44.036738]  iommufd_selftest_destroy+0x55/0x70
[   44.037258]  iommufd_object_destroy_user+0xce/0x130
[   44.037834]  iommufd_destroy+0xa2/0xc0
[   44.038299]  iommufd_fops_ioctl+0x1ef/0x310
[   44.038805]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   44.039359]  ? write_comp_data+0x2f/0x90
[   44.039841]  __x64_sys_ioctl+0x10e/0x160
[   44.040337]  ? iommufd_get_object.part.6+0x1c0/0x1c0
[   44.040958]  do_syscall_64+0x3b/0x90
[   44.041395]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   44.041962] RIP: 0033:0x7f3777c1e59d
[   44.042398] Code: 00 c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d d3 08 0d 00 f7 d8 64 89 01 48
[   44.044598] RSP: 002b:00007ffd0d727918 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   44.045491] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f3777c1e59d
[   44.046309] RDX: 0000000020000140 RSI: 0000000000003b80 RDI: 0000000000000003
[   44.047116] RBP: 00007ffd0d727930 R08: 00007ffd0d727930 R09: 00007ffd0d727930
[   44.047925] R10: 00007ffd0d727930 R11: 0000000000000213 R12: 0000000000401180
[   44.048744] R13: 00007ffd0d727a50 R14: 0000000000000000 R15: 0000000000000000
[   44.049544]  </TASK>
[   44.049809] irq event stamp: 0
[   44.050163] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   44.050857] hardirqs last disabled at (0): [<ffffffff810fff0c>] copy_process+0x11cc/0x2b10
[   44.051819] softirqs last  enabled at (0): [<ffffffff810fff10>] copy_process+0x11d0/0x2b10
[   44.052808] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   44.053558] ---[ end trace 0000000000000000 ]---
[   44.058423] ------------[ cut here ]------------
[   44.058977] WARNING: CPU: 1 PID: 836 at drivers/iommu/iommufd/pages.c:178 batch_unpin.isra.23+0x151/0x1a0
[   44.060069] Modules linked in:
[   44.060439] CPU: 1 PID: 836 Comm: repro Tainted: G    B   W          6.1.0-a0a6c76cf2a5+ #1
[   44.061442] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   44.062717] RIP: 0010:batch_unpin.isra.23+0x151/0x1a0
[   44.063304] Code: e8 c4 be 2b ff 48 8b 45 d0 48 85 c0 75 17 e8 26 bd 2b ff 48 8b 7d c8 48 89 de e8 fa bd 2b ff 48 39 5d c8 73 07 e8 0f bd 2b ff <0f> 0b e8 08 bd 2b ff 4d 29 e5 31 ff 41 83 c6 01 4c 89 ee 31 db e8
[   44.065400] RSP: 0018:ffffc900016db9d8 EFLAGS: 00010246
[   44.065989] RAX: 0000000000000000 RBX: ffffffffffffffff RCX: ffffffff81fded8c
[   44.066856] RDX: 0000000000000000 RSI: ffff88800e678000 RDI: 0000000000000002
[   44.067756] RBP: ffffc900016dba20 R08: 0000000000000000 R09: ffff88807dd3b890
[   44.068540] R10: 0000000000000c61 R11: 0000000000000000 R12: 0000000000000001
[   44.069336] R13: 0000000000000001 R14: 0000000000000000 R15: ffff888005ec9c00
[   44.070146] FS:  0000000000000000(0000) GS:ffff88807dd00000(0000) knlGS:0000000000000000
[   44.071007] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   44.071647] CR2: 00007f3777cf0500 CR3: 0000000003c12001 CR4: 0000000000770ee0
[   44.072507] PKRU: 55555554
[   44.072844] Call Trace:
[   44.073128]  <TASK>
[   44.073390]  iopt_pages_unfill_xarray+0x39f/0x5c0
[   44.073932]  ? rcu_read_lock_sched_held+0x29/0x80
[   44.074498]  ? rcu_read_lock_held_common+0x12/0x50
[   44.075033]  ? write_comp_data+0x2f/0x90
[   44.075484]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   44.076028]  ? write_comp_data+0x2f/0x90
[   44.076494]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   44.077085]  ? interval_tree_remove+0x291/0x4e0
[   44.077647]  ? write_comp_data+0x2f/0x90
[   44.078132]  iopt_area_remove_access+0x108/0x120
[   44.078697]  iommufd_access_unpin_pages+0x177/0x210
[   44.079270]  iommufd_test_access_unmap+0xe0/0x130
[   44.079829]  ? iommufd_test_access_unmap+0x130/0x130
[   44.080423]  iommufd_test_staccess_release+0x39/0x60
[   44.081024]  __fput+0x11f/0x450
[   44.081423]  ____fput+0x1e/0x30
[   44.081820]  task_work_run+0xb6/0x120
[   44.082271]  do_exit+0x521/0x1340
[   44.082674]  ? lock_release+0x202/0x2c0
[   44.083121]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   44.083678]  ? trace_hardirqs_on+0x3f/0x100
[   44.084178]  do_group_exit+0x5e/0xf0
[   44.084605]  __x64_sys_exit_group+0x25/0x30
[   44.085115]  do_syscall_64+0x3b/0x90
[   44.085538]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   44.086115] RIP: 0033:0x7f3777be6cf6
[   44.086555] Code: Unable to access opcode bytes at 0x7f3777be6ccc.
[   44.087226] RSP: 002b:00007ffd0d7278d8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
[   44.088067] RAX: ffffffffffffffda RBX: 00007f3777cf1490 RCX: 00007f3777be6cf6
[   44.088901] RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
[   44.089715] RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffff80
[   44.090544] R10: 0000000000000004 R11: 0000000000000246 R12: 00007f3777cf1490
[   44.091329] R13: 0000000000000001 R14: 00007f3777cf4e88 R15: 0000000000000000
[   44.092159]  </TASK>
[   44.092428] irq event stamp: 0
[   44.092834] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   44.093568] hardirqs last disabled at (0): [<ffffffff810fff0c>] copy_process+0x11cc/0x2b10
[   44.094529] softirqs last  enabled at (0): [<ffffffff810fff10>] copy_process+0x11d0/0x2b10
[   44.095463] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   44.096174] ---[ end trace 0000000000000000 ]---
[   44.096892] ------------[ cut here ]------------
[   44.097432] WARNING: CPU: 1 PID: 836 at drivers/iommu/iommufd/pages.c:886 update_unpinned+0x75/0x80
[   44.098485] Modules linked in:
[   44.098839] CPU: 1 PID: 836 Comm: repro Tainted: G    B   W          6.1.0-a0a6c76cf2a5+ #1
[   44.099765] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   44.101074] RIP: 0010:update_unpinned+0x75/0x80
[   44.101618] Code: ac 2b ff 48 89 de 31 c9 31 d2 4c 29 e6 4c 89 ef e8 70 fb ff ff e8 bb ac 2b ff 5b 41 5c 41 5d 5d c3 cc cc cc cc e8 ab ac 2b ff <0f> 0b eb e7 0f 1f 80 00 00 00 00 0f 1f 44 00 00 55 48 89 e5 41 57
[   44.103653] RSP: 0018:ffffc900016dba08 EFLAGS: 00010246
[   44.104263] RAX: 0000000000000000 RBX: 0000000000000000 RCX: ffffffff81fdfdcf
[   44.105095] RDX: 0000000000000000 RSI: ffff88800e678000 RDI: 0000000000000002
[   44.105908] RBP: ffffc900016dba20 R08: 0000000000000000 R09: ffff88807dd3b890
[   44.106720] R10: 0000000000000c61 R11: 0000000000000000 R12: ffffffffffffffff
[   44.107503] R13: ffff888005ec9c00 R14: 0000000000000002 R15: 0000000000000002
[   44.108311] FS:  0000000000000000(0000) GS:ffff88807dd00000(0000) knlGS:0000000000000000
[   44.109260] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   44.109903] CR2: 00007f3777cf0500 CR3: 0000000003c12001 CR4: 0000000000770ee0
[   44.110716] PKRU: 55555554
[   44.111042] Call Trace:
[   44.111331]  <TASK>
[   44.111598]  iopt_pages_unfill_xarray+0x522/0x5c0
[   44.112165]  ? rcu_read_lock_sched_held+0x29/0x80
[   44.112778]  ? rcu_read_lock_held_common+0x12/0x50
[   44.113354]  ? write_comp_data+0x2f/0x90
[   44.113835]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   44.114398]  ? write_comp_data+0x2f/0x90
[   44.114865]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   44.115421]  ? interval_tree_remove+0x291/0x4e0
[   44.115970]  ? write_comp_data+0x2f/0x90
[   44.116448]  iopt_area_remove_access+0x108/0x120
[   44.117031]  iommufd_access_unpin_pages+0x177/0x210
[   44.117615]  iommufd_test_access_unmap+0xe0/0x130
[   44.118172]  ? iommufd_test_access_unmap+0x130/0x130
[   44.118744]  iommufd_test_staccess_release+0x39/0x60
[   44.119321]  __fput+0x11f/0x450
[   44.119699]  ____fput+0x1e/0x30
[   44.120072]  task_work_run+0xb6/0x120
[   44.120509]  do_exit+0x521/0x1340
[   44.120912]  ? lock_release+0x202/0x2c0
[   44.121356]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   44.121897]  ? trace_hardirqs_on+0x3f/0x100
[   44.122386]  do_group_exit+0x5e/0xf0
[   44.122805]  __x64_sys_exit_group+0x25/0x30
[   44.123272]  do_syscall_64+0x3b/0x90
[   44.123689]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   44.124260] RIP: 0033:0x7f3777be6cf6
[   44.124683] Code: Unable to access opcode bytes at 0x7f3777be6ccc.
[   44.125352] RSP: 002b:00007ffd0d7278d8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
[   44.126195] RAX: ffffffffffffffda RBX: 00007f3777cf1490 RCX: 00007f3777be6cf6
[   44.126978] RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
[   44.127720] RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffff80
[   44.128483] R10: 0000000000000004 R11: 0000000000000246 R12: 00007f3777cf1490
[   44.129283] R13: 0000000000000001 R14: 00007f3777cf4e88 R15: 0000000000000000
[   44.130053]  </TASK>
[   44.130311] irq event stamp: 0
[   44.130666] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   44.131328] hardirqs last disabled at (0): [<ffffffff810fff0c>] copy_process+0x11cc/0x2b10
[   44.132225] softirqs last  enabled at (0): [<ffffffff810fff10>] copy_process+0x11d0/0x2b10
[   44.133174] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   44.133875] ---[ end trace 0000000000000000 ]---
[   44.134623] ------------[ cut here ]------------
[   44.135103] WARNING: CPU: 1 PID: 836 at drivers/iommu/iommufd/pages.c:1181 iopt_release_pages+0x159/0x190
[   44.136104] Modules linked in:
[   44.136461] CPU: 1 PID: 836 Comm: repro Tainted: G    B   W          6.1.0-a0a6c76cf2a5+ #1
[   44.137423] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   44.138710] RIP: 0010:iopt_release_pages+0x159/0x190
[   44.139329] Code: b5 11 ff eb cb e8 87 90 2b ff be 03 00 00 00 4c 89 f7 e8 6a 8b ce ff eb b7 e8 73 90 2b ff 0f 0b e9 ed fe ff ff e8 67 90 2b ff <0f> 0b e9 00 ff ff ff e8 5b 90 2b ff 0f 0b e9 07 ff ff ff e8 4f 90
[   44.141368] RSP: 0018:ffffc900016dbc88 EFLAGS: 00010246
[   44.141985] RAX: 0000000000000000 RBX: ffff888005ec9c00 RCX: ffffffff81fe1957
[   44.142785] RDX: 0000000000000000 RSI: ffff88800e678000 RDI: 0000000000000002
[   44.143563] RBP: ffffc900016dbca8 R08: 0000000000000000 R09: 0000000000000000
[   44.144360] R10: ffffc900016dbc58 R11: 0000000000000000 R12: ffffffffffffffff
[   44.145159] R13: 0000000001000000 R14: 00000000017fffff R15: 0000000000000000
[   44.145932] FS:  0000000000000000(0000) GS:ffff88807dd00000(0000) knlGS:0000000000000000
[   44.146825] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   44.147479] CR2: 00007f3777cf0500 CR3: 0000000003c12001 CR4: 0000000000770ee0
[   44.148292] PKRU: 55555554
[   44.148625] Call Trace:
[   44.148941]  <TASK>
[   44.149196]  iopt_unmap_iova_range+0x1ef/0x2e0
[   44.149730]  iopt_unmap_all+0x2f/0x60
[   44.150173]  iommufd_ioas_destroy+0x2c/0x70
[   44.150687]  iommufd_fops_release+0xd4/0x170
[   44.151206]  ? iommufd_ctx_get+0x30/0x30
[   44.151678]  __fput+0x11f/0x450
[   44.152081]  ____fput+0x1e/0x30
[   44.152473]  task_work_run+0xb6/0x120
[   44.152946]  do_exit+0x521/0x1340
[   44.153355]  ? lock_release+0x202/0x2c0
[   44.153821]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   44.154395]  ? trace_hardirqs_on+0x3f/0x100
[   44.154901]  do_group_exit+0x5e/0xf0
[   44.155334]  __x64_sys_exit_group+0x25/0x30
[   44.155834]  do_syscall_64+0x3b/0x90
[   44.156271]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   44.156900] RIP: 0033:0x7f3777be6cf6
[   44.157330] Code: Unable to access opcode bytes at 0x7f3777be6ccc.
[   44.158028] RSP: 002b:00007ffd0d7278d8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
[   44.158897] RAX: ffffffffffffffda RBX: 00007f3777cf1490 RCX: 00007f3777be6cf6
[   44.159711] RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
[   44.160521] RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffff80
[   44.161366] R10: 0000000000000004 R11: 0000000000000246 R12: 00007f3777cf1490
[   44.162149] R13: 0000000000000001 R14: 00007f3777cf4e88 R15: 0000000000000000
[   44.162938]  </TASK>
[   44.163197] irq event stamp: 0
[   44.163541] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   44.164231] hardirqs last disabled at (0): [<ffffffff810fff0c>] copy_process+0x11cc/0x2b10
[   44.165159] softirqs last  enabled at (0): [<ffffffff810fff10>] copy_process+0x11d0/0x2b10
[   44.166070] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   44.166759] ---[ end trace 0000000000000000 ]---
[   44.297977] ------------[ cut here ]------------
[   44.298355] WARNING: CPU: 1 PID: 841 at drivers/iommu/iommufd/pages.c:294 __iopt_area_unfill_domain+0x152/0x560
[   44.299121] Modules linked in:
[   44.299350] CPU: 1 PID: 841 Comm: repro Tainted: G    B   W          6.1.0-a0a6c76cf2a5+ #1
[   44.299952] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   44.300817] RIP: 0010:__iopt_area_unfill_domain+0x152/0x560
[   44.301262] Code: a1 2b ff 44 8b 64 24 54 48 8b 44 24 48 31 ff 44 89 e6 48 89 44 24 38 e8 6c a2 2b ff 45 85 e4 0f 85 eb 01 00 00 e8 ee a0 2b ff <0f> 0b e8 e7 a0 2b ff 48 8b 44 24 38 89 5c 24 58 89 18 8b 44 24 54
[   44.302879] RSP: 0018:ffffc90001703ae0 EFLAGS: 00010246
[   44.303463] RAX: 0000000000000000 RBX: 00000000ffffffff RCX: ffffffff81fe0bd5
[   44.304392] RDX: 0000000000000000 RSI: ffff88800e67a980 RDI: 0000000000000002
[   44.305340] RBP: ffffc90001703d10 R08: 000000000003b5c5 R09: 000000000000000d
[   44.305969] R10: 000000000003b5a0 R11: 0000000000000024 R12: 0000000000000001
[   44.306761] R13: 0000000000000801 R14: 00000000000007ff R15: 0000000000000800
[   44.307538] FS:  00007f3777af9740(0000) GS:ffff88807dd00000(0000) knlGS:0000000000000000
[   44.308440] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   44.309136] CR2: 00007f3777c1e580 CR3: 000000000c988003 CR4: 0000000000770ee0
[   44.309941] PKRU: 55555554
[   44.310265] Call Trace:
[   44.310571]  <TASK>
[   44.310846]  ? rcu_read_lock_sched_held+0x29/0x80
[   44.311391]  ? lock_acquire+0x1a1/0x2f0
[   44.311849]  ? rcu_read_lock_held_common+0x12/0x50
[   44.312408]  ? rcu_read_lock_sched_held+0x29/0x80
[   44.313016]  ? __mutex_lock+0x13a/0xf30
[   44.313489]  ? write_comp_data+0x2f/0x90
[   44.313960]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   44.314534]  iopt_area_unfill_domain+0x32/0x40
[   44.315056]  iopt_table_remove_domain+0x23f/0x4c0
[   44.315621]  iommufd_device_selftest_detach+0x3a/0x90
[   44.316238]  iommufd_selftest_destroy+0x55/0x70
[   44.316814]  iommufd_object_destroy_user+0xce/0x130
[   44.317391]  iommufd_destroy+0xa2/0xc0
[   44.317854]  iommufd_fops_ioctl+0x1ef/0x310
[   44.318407]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   44.318984]  ? write_comp_data+0x2f/0x90
[   44.319445]  __x64_sys_ioctl+0x10e/0x160
[   44.319917]  ? iommufd_get_object.part.6+0x1c0/0x1c0
[   44.320495]  do_syscall_64+0x3b/0x90
[   44.320962]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   44.321572] RIP: 0033:0x7f3777c1e59d
[   44.322011] Code: 00 c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d d3 08 0d 00 f7 d8 64 89 01 48
[   44.324117] RSP: 002b:00007ffd0d727918 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   44.324987] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f3777c1e59d
[   44.325779] RDX: 0000000020000140 RSI: 0000000000003b80 RDI: 0000000000000003
[   44.326581] RBP: 00007ffd0d727930 R08: 00007ffd0d727930 R09: 00007ffd0d727930
[   44.327356] R10: 00007ffd0d727930 R11: 0000000000000213 R12: 0000000000401180
[   44.328142] R13: 00007ffd0d727a50 R14: 0000000000000000 R15: 0000000000000000
[   44.329025]  </TASK>
[   44.329298] irq event stamp: 0
[   44.329644] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   44.330332] hardirqs last disabled at (0): [<ffffffff810fff0c>] copy_process+0x11cc/0x2b10
[   44.331257] softirqs last  enabled at (0): [<ffffffff810fff10>] copy_process+0x11d0/0x2b10
[   44.332188] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   44.332936] ---[ end trace 0000000000000000 ]---
[   44.333587] ------------[ cut here ]------------
[   44.334189] WARNING: CPU: 1 PID: 841 at drivers/iommu/iommufd/pages.c:1290 __iopt_area_unfill_domain+0x54f/0x560
[   44.335262] Modules linked in:
[   44.335639] CPU: 1 PID: 841 Comm: repro Tainted: G    B   W          6.1.0-a0a6c76cf2a5+ #1
[   44.336570] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   44.337831] RIP: 0010:__iopt_area_unfill_domain+0x54f/0x560
[   44.338469] Code: e8 86 9e 2b ff 85 db 0f 85 35 fb ff ff e8 09 9d 2b ff 0f 0b e9 29 fb ff ff e8 fd 9c 2b ff 0f 0b e9 69 fe ff ff e8 f1 9c 2b ff <0f> 0b e9 58 ff ff ff e8 65 2d dc 00 0f 1f 44 00 00 0f 1f 44 00 00
[   44.340468] RSP: 0018:ffffc90001703ae0 EFLAGS: 00010246
[   44.341089] RAX: 0000000000000000 RBX: 00000000ffffffff RCX: ffffffff81fe0d26
[   44.341888] RDX: 0000000000000000 RSI: ffff88800e67a980 RDI: 0000000000000002
[   44.342687] RBP: ffffc90001703d10 R08: 000000000003b5c5 R09: 000000000000000d
[   44.343471] R10: 000000000003b5a0 R11: 0000000000000024 R12: 00000000000007ff
[   44.344256] R13: 0000000000000801 R14: 00000000000007ff R15: 0000000000000800
[   44.345081] FS:  00007f3777af9740(0000) GS:ffff88807dd00000(0000) knlGS:0000000000000000
[   44.345949] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   44.346620] CR2: 00007f3777c1e580 CR3: 000000000c988003 CR4: 0000000000770ee0
[   44.347413] PKRU: 55555554
[   44.347729] Call Trace:
[   44.348017]  <TASK>
[   44.348292]  ? rcu_read_lock_sched_held+0x29/0x80
[   44.348873]  ? lock_acquire+0x1a1/0x2f0
[   44.349331]  ? rcu_read_lock_held_common+0x12/0x50
[   44.349890]  ? rcu_read_lock_sched_held+0x29/0x80
[   44.350424]  ? __mutex_lock+0x13a/0xf30
[   44.350880]  ? write_comp_data+0x2f/0x90
[   44.351347]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   44.351886]  iopt_area_unfill_domain+0x32/0x40
[   44.352411]  iopt_table_remove_domain+0x23f/0x4c0
[   44.352993]  iommufd_device_selftest_detach+0x3a/0x90
[   44.353597]  iommufd_selftest_destroy+0x55/0x70
[   44.354136]  iommufd_object_destroy_user+0xce/0x130
[   44.354723]  iommufd_destroy+0xa2/0xc0
[   44.355160]  iommufd_fops_ioctl+0x1ef/0x310
[   44.355661]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   44.356215]  ? write_comp_data+0x2f/0x90
[   44.356718]  __x64_sys_ioctl+0x10e/0x160
[   44.357193]  ? iommufd_get_object.part.6+0x1c0/0x1c0
[   44.357756]  do_syscall_64+0x3b/0x90
[   44.358185]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   44.358772] RIP: 0033:0x7f3777c1e59d
[   44.359190] Code: 00 c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d d3 08 0d 00 f7 d8 64 89 01 48
[   44.361238] RSP: 002b:00007ffd0d727918 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   44.362068] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f3777c1e59d
[   44.362875] RDX: 0000000020000140 RSI: 0000000000003b80 RDI: 0000000000000003
[   44.363672] RBP: 00007ffd0d727930 R08: 00007ffd0d727930 R09: 00007ffd0d727930
[   44.364469] R10: 00007ffd0d727930 R11: 0000000000000213 R12: 0000000000401180
[   44.365540] R13: 00007ffd0d727a50 R14: 0000000000000000 R15: 0000000000000000
[   44.366343]  </TASK>
[   44.366615] irq event stamp: 0
[   44.366963] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   44.367694] hardirqs last disabled at (0): [<ffffffff810fff0c>] copy_process+0x11cc/0x2b10
[   44.368784] softirqs last  enabled at (0): [<ffffffff810fff10>] copy_process+0x11d0/0x2b10
[   44.369860] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   44.370691] ---[ end trace 0000000000000000 ]---
[   44.375510] ------------[ cut here ]------------
[   44.376099] WARNING: CPU: 1 PID: 841 at drivers/iommu/iommufd/pages.c:178 batch_unpin.isra.23+0x151/0x1a0
[   44.377163] Modules linked in:
[   44.377629] CPU: 1 PID: 841 Comm: repro Tainted: G    B   W          6.1.0-a0a6c76cf2a5+ #1
[   44.378567] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   44.379912] RIP: 0010:batch_unpin.isra.23+0x151/0x1a0
[   44.380527] Code: e8 c4 be 2b ff 48 8b 45 d0 48 85 c0 75 17 e8 26 bd 2b ff 48 8b 7d c8 48 89 de e8 fa bd 2b ff 48 39 5d c8 73 07 e8 0f bd 2b ff <0f> 0b e8 08 bd 2b ff 4d 29 e5 31 ff 41 83 c6 01 4c 89 ee 31 db e8
[   44.382820] RSP: 0018:ffffc900017039d8 EFLAGS: 00010246
[   44.383459] RAX: 0000000000000000 RBX: ffffffffffffffff RCX: ffffffff81fded8c
[   44.384308] RDX: 0000000000000000 RSI: ffff88800e67a980 RDI: 0000000000000002
[   44.385224] RBP: ffffc90001703a20 R08: 0000000000000000 R09: ffff88807dd3b890
[   44.386020] R10: 0000000000000cb2 R11: 0000000000000000 R12: 0000000000000001
[   44.386889] R13: 0000000000000001 R14: 0000000000000000 R15: ffff888005ec8c00
[   44.387754] FS:  0000000000000000(0000) GS:ffff88807dd00000(0000) knlGS:0000000000000000
[   44.388705] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   44.389492] CR2: 00007f3777cf0500 CR3: 0000000003c12002 CR4: 0000000000770ee0
[   44.390327] PKRU: 55555554
[   44.390659] Call Trace:
[   44.390998]  <TASK>
[   44.391291]  iopt_pages_unfill_xarray+0x39f/0x5c0
[   44.391853]  ? rcu_read_lock_sched_held+0x29/0x80
[   44.392574]  ? rcu_read_lock_held_common+0x12/0x50
[   44.393176]  ? write_comp_data+0x2f/0x90
[   44.393653]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   44.394191]  ? write_comp_data+0x2f/0x90
[   44.394728]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   44.395280]  ? interval_tree_remove+0x291/0x4e0
[   44.395838]  ? write_comp_data+0x2f/0x90
[   44.396497]  iopt_area_remove_access+0x108/0x120
[   44.397139]  iommufd_access_unpin_pages+0x177/0x210
[   44.397830]  iommufd_test_access_unmap+0xe0/0x130
[   44.398409]  ? iommufd_test_access_unmap+0x130/0x130
[   44.398974]  iommufd_test_staccess_release+0x39/0x60
[   44.399731]  __fput+0x11f/0x450
[   44.400240]  ____fput+0x1e/0x30
[   44.400729]  task_work_run+0xb6/0x120
[   44.401293]  do_exit+0x521/0x1340
[   44.401910]  ? lock_release+0x202/0x2c0
[   44.402508]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   44.403161]  ? trace_hardirqs_on+0x3f/0x100
[   44.403674]  do_group_exit+0x5e/0xf0
[   44.404125]  __x64_sys_exit_group+0x25/0x30
[   44.404771]  do_syscall_64+0x3b/0x90
[   44.405211]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   44.405791] RIP: 0033:0x7f3777be6cf6
[   44.406221] Code: Unable to access opcode bytes at 0x7f3777be6ccc.
[   44.406987] RSP: 002b:00007ffd0d7278d8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
[   44.407824] RAX: ffffffffffffffda RBX: 00007f3777cf1490 RCX: 00007f3777be6cf6
[   44.408770] RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
[   44.409562] RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffff80
[   44.410441] R10: 0000000000000004 R11: 0000000000000246 R12: 00007f3777cf1490
[   44.411218] R13: 0000000000000001 R14: 00007f3777cf4e88 R15: 0000000000000000
[   44.412165]  </TASK>
[   44.412432] irq event stamp: 0
[   44.412873] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   44.413587] hardirqs last disabled at (0): [<ffffffff810fff0c>] copy_process+0x11cc/0x2b10
[   44.414567] softirqs last  enabled at (0): [<ffffffff810fff10>] copy_process+0x11d0/0x2b10
[   44.415595] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   44.416545] ---[ end trace 0000000000000000 ]---
[   44.417346] ------------[ cut here ]------------
[   44.417859] WARNING: CPU: 1 PID: 841 at drivers/iommu/iommufd/pages.c:886 update_unpinned+0x75/0x80
[   44.418949] Modules linked in:
[   44.419310] CPU: 1 PID: 841 Comm: repro Tainted: G    B   W          6.1.0-a0a6c76cf2a5+ #1
[   44.420358] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   44.421758] RIP: 0010:update_unpinned+0x75/0x80
[   44.422292] Code: ac 2b ff 48 89 de 31 c9 31 d2 4c 29 e6 4c 89 ef e8 70 fb ff ff e8 bb ac 2b ff 5b 41 5c 41 5d 5d c3 cc cc cc cc e8 ab ac 2b ff <0f> 0b eb e7 0f 1f 80 00 00 00 00 0f 1f 44 00 00 55 48 89 e5 41 57
[   44.424252] RSP: 0018:ffffc90001703a08 EFLAGS: 00010246
[   44.424882] RAX: 0000000000000000 RBX: 0000000000000000 RCX: ffffffff81fdfdcf
[   44.425711] RDX: 0000000000000000 RSI: ffff88800e67a980 RDI: 0000000000000002
[   44.426532] RBP: ffffc90001703a20 R08: 0000000000000000 R09: ffff88807dd3b890
[   44.427290] R10: 0000000000000cb2 R11: 0000000000000000 R12: ffffffffffffffff
[   44.428068] R13: ffff888005ec8c00 R14: 0000000000000002 R15: 0000000000000002
[   44.428882] FS:  0000000000000000(0000) GS:ffff88807dd00000(0000) knlGS:0000000000000000
[   44.429771] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   44.430412] CR2: 00007f3777cf0500 CR3: 0000000003c12002 CR4: 0000000000770ee0
[   44.431196] PKRU: 55555554
[   44.431517] Call Trace:
[   44.431810]  <TASK>
[   44.432077]  iopt_pages_unfill_xarray+0x522/0x5c0
[   44.432625]  ? rcu_read_lock_sched_held+0x29/0x80
[   44.433227]  ? rcu_read_lock_held_common+0x12/0x50
[   44.433790]  ? write_comp_data+0x2f/0x90
[   44.434258]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   44.434811]  ? write_comp_data+0x2f/0x90
[   44.435267]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   44.435812]  ? interval_tree_remove+0x291/0x4e0
[   44.436343]  ? write_comp_data+0x2f/0x90
[   44.436852]  iopt_area_remove_access+0x108/0x120
[   44.437392]  iommufd_access_unpin_pages+0x177/0x210
[   44.437947]  iommufd_test_access_unmap+0xe0/0x130
[   44.438505]  ? iommufd_test_access_unmap+0x130/0x130
[   44.439081]  iommufd_test_staccess_release+0x39/0x60
[   44.439653]  __fput+0x11f/0x450
[   44.440048]  ____fput+0x1e/0x30
[   44.440430]  task_work_run+0xb6/0x120
[   44.440904]  do_exit+0x521/0x1340
[   44.441308]  ? lock_release+0x202/0x2c0
[   44.441778]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   44.442357]  ? trace_hardirqs_on+0x3f/0x100
[   44.442864]  do_group_exit+0x5e/0xf0
[   44.443304]  __x64_sys_exit_group+0x25/0x30
[   44.443795]  do_syscall_64+0x3b/0x90
[   44.444230]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   44.444876] RIP: 0033:0x7f3777be6cf6
[   44.445313] Code: Unable to access opcode bytes at 0x7f3777be6ccc.
[   44.446002] RSP: 002b:00007ffd0d7278d8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
[   44.446832] RAX: ffffffffffffffda RBX: 00007f3777cf1490 RCX: 00007f3777be6cf6
[   44.447599] RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
[   44.448373] RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffff80
[   44.449169] R10: 0000000000000004 R11: 0000000000000246 R12: 00007f3777cf1490
[   44.449941] R13: 0000000000000001 R14: 00007f3777cf4e88 R15: 0000000000000000
[   44.450759]  </TASK>
[   44.451018] irq event stamp: 0
[   44.451369] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   44.452075] hardirqs last disabled at (0): [<ffffffff810fff0c>] copy_process+0x11cc/0x2b10
[   44.453012] softirqs last  enabled at (0): [<ffffffff810fff10>] copy_process+0x11d0/0x2b10
[   44.453915] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   44.454626] ---[ end trace 0000000000000000 ]---
[   44.455409] ------------[ cut here ]------------
[   44.455941] WARNING: CPU: 1 PID: 841 at drivers/iommu/iommufd/pages.c:1181 iopt_release_pages+0x159/0x190
[   44.457121] Modules linked in:
[   44.457486] CPU: 1 PID: 841 Comm: repro Tainted: G    B   W          6.1.0-a0a6c76cf2a5+ #1
[   44.458418] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   44.459699] RIP: 0010:iopt_release_pages+0x159/0x190
[   44.460313] Code: b5 11 ff eb cb e8 87 90 2b ff be 03 00 00 00 4c 89 f7 e8 6a 8b ce ff eb b7 e8 73 90 2b ff 0f 0b e9 ed fe ff ff e8 67 90 2b ff <0f> 0b e9 00 ff ff ff e8 5b 90 2b ff 0f 0b e9 07 ff ff ff e8 4f 90
[   44.462401] RSP: 0018:ffffc90001703c88 EFLAGS: 00010246
[   44.463030] RAX: 0000000000000000 RBX: ffff888005ec8c00 RCX: ffffffff81fe1957
[   44.463841] RDX: 0000000000000000 RSI: ffff88800e67a980 RDI: 0000000000000002
[   44.464645] RBP: ffffc90001703ca8 R08: 0000000000000000 R09: 0000000000000000
[   44.465512] R10: ffffc90001703c58 R11: 0000000000000000 R12: ffffffffffffffff
[   44.466348] R13: 0000000001000000 R14: 00000000017fffff R15: 0000000000000000
[   44.467293] FS:  0000000000000000(0000) GS:ffff88807dd00000(0000) knlGS:0000000000000000
[   44.468274] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   44.468971] CR2: 00007f3777cf0500 CR3: 0000000003c12002 CR4: 0000000000770ee0
[   44.469813] PKRU: 55555554
[   44.470152] Call Trace:
[   44.470453]  <TASK>
[   44.470720]  iopt_unmap_iova_range+0x1ef/0x2e0
[   44.471252]  iopt_unmap_all+0x2f/0x60
[   44.471696]  iommufd_ioas_destroy+0x2c/0x70
[   44.472209]  iommufd_fops_release+0xd4/0x170
[   44.472757]  ? iommufd_ctx_get+0x30/0x30
[   44.473216]  __fput+0x11f/0x450
[   44.473608]  ____fput+0x1e/0x30
[   44.473993]  task_work_run+0xb6/0x120
[   44.474452]  do_exit+0x521/0x1340
[   44.474859]  ? lock_release+0x202/0x2c0
[   44.475315]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   44.475892]  ? trace_hardirqs_on+0x3f/0x100
[   44.476417]  do_group_exit+0x5e/0xf0
[   44.476885]  __x64_sys_exit_group+0x25/0x30
[   44.477374]  do_syscall_64+0x3b/0x90
[   44.477814]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   44.478392] RIP: 0033:0x7f3777be6cf6
[   44.478816] Code: Unable to access opcode bytes at 0x7f3777be6ccc.
[   44.479494] RSP: 002b:00007ffd0d7278d8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
[   44.480358] RAX: ffffffffffffffda RBX: 00007f3777cf1490 RCX: 00007f3777be6cf6
[   44.481215] RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
[   44.482016] RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffff80
[   44.482841] R10: 0000000000000004 R11: 0000000000000246 R12: 00007f3777cf1490
[   44.483662] R13: 0000000000000001 R14: 00007f3777cf4e88 R15: 0000000000000000
[   44.484482]  </TASK>
[   44.484792] irq event stamp: 0
[   44.485170] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   44.485902] hardirqs last disabled at (0): [<ffffffff810fff0c>] copy_process+0x11cc/0x2b10
[   44.486841] softirqs last  enabled at (0): [<ffffffff810fff10>] copy_process+0x11d0/0x2b10
[   44.487798] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   44.488509] ---[ end trace 0000000000000000 ]---
[   44.752787] ------------[ cut here ]------------
[   44.753383] WARNING: CPU: 1 PID: 849 at drivers/iommu/iommufd/pages.c:294 __iopt_area_unfill_domain+0x152/0x560
[   44.754563] Modules linked in:
[   44.754926] CPU: 1 PID: 849 Comm: repro Tainted: G    B   W          6.1.0-a0a6c76cf2a5+ #1
[   44.755888] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   44.757244] RIP: 0010:__iopt_area_unfill_domain+0x152/0x560
[   44.757926] Code: a1 2b ff 44 8b 64 24 54 48 8b 44 24 48 31 ff 44 89 e6 48 89 44 24 38 e8 6c a2 2b ff 45 85 e4 0f 85 eb 01 00 00 e8 ee a0 2b ff <0f> 0b e8 e7 a0 2b ff 48 8b 44 24 38 89 5c 24 58 89 18 8b 44 24 54
[   44.760220] RSP: 0018:ffffc90001743ae0 EFLAGS: 00010246
[   44.760899] RAX: 0000000000000000 RBX: 00000000ffffffff RCX: ffffffff81fe0bd5
[   44.761813] RDX: 0000000000000000 RSI: ffff88800e67a980 RDI: 0000000000000002
[   44.762631] RBP: ffffc90001743d10 R08: 000000000003b5c5 R09: 0000000000000012
[   44.763524] R10: 000000000003b5a0 R11: 0000000000000024 R12: 0000000000000001
[   44.764361] R13: 0000000000000801 R14: 00000000000007ff R15: 0000000000000800
[   44.765298] FS:  00007f3777af9740(0000) GS:ffff88807dd00000(0000) knlGS:0000000000000000
[   44.766208] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   44.766958] CR2: 00007f3777c1e580 CR3: 000000000d530006 CR4: 0000000000770ee0
[   44.767777] PKRU: 55555554
[   44.768167] Call Trace:
[   44.768532]  <TASK>
[   44.768851]  ? rcu_read_lock_sched_held+0x29/0x80
[   44.769421]  ? lock_acquire+0x1a1/0x2f0
[   44.769888]  ? rcu_read_lock_held_common+0x12/0x50
[   44.770588]  ? rcu_read_lock_sched_held+0x29/0x80
[   44.771148]  ? __mutex_lock+0x13a/0xf30
[   44.771632]  ? write_comp_data+0x2f/0x90
[   44.772242]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   44.772819]  iopt_area_unfill_domain+0x32/0x40
[   44.773356]  iopt_table_remove_domain+0x23f/0x4c0
[   44.773915]  iommufd_device_selftest_detach+0x3a/0x90
[   44.774684]  iommufd_selftest_destroy+0x55/0x70
[   44.775204]  iommufd_object_destroy_user+0xce/0x130
[   44.775805]  iommufd_destroy+0xa2/0xc0
[   44.776328]  iommufd_fops_ioctl+0x1ef/0x310
[   44.776853]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   44.777408]  ? write_comp_data+0x2f/0x90
[   44.777897]  __x64_sys_ioctl+0x10e/0x160
[   44.778436]  ? iommufd_get_object.part.6+0x1c0/0x1c0
[   44.779000]  do_syscall_64+0x3b/0x90
[   44.779483]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   44.780115] RIP: 0033:0x7f3777c1e59d
[   44.780546] Code: 00 c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d d3 08 0d 00 f7 d8 64 89 01 48
[   44.782667] RSP: 002b:00007ffd0d727918 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   44.783495] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f3777c1e59d
[   44.784296] RDX: 0000000020000140 RSI: 0000000000003b80 RDI: 0000000000000003
[   44.785094] RBP: 00007ffd0d727930 R08: 00007ffd0d727930 R09: 00007ffd0d727930
[   44.785886] R10: 00007ffd0d727930 R11: 0000000000000213 R12: 0000000000401180
[   44.786672] R13: 00007ffd0d727a50 R14: 0000000000000000 R15: 0000000000000000
[   44.787406]  </TASK>
[   44.787666] irq event stamp: 0
[   44.788023] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   44.788753] hardirqs last disabled at (0): [<ffffffff810fff0c>] copy_process+0x11cc/0x2b10
[   44.789713] softirqs last  enabled at (0): [<ffffffff810fff10>] copy_process+0x11d0/0x2b10
[   44.790654] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   44.791336] ---[ end trace 0000000000000000 ]---
[   44.792018] ------------[ cut here ]------------
[   44.792530] WARNING: CPU: 1 PID: 849 at drivers/iommu/iommufd/pages.c:1290 __iopt_area_unfill_domain+0x54f/0x560
[   44.793666] Modules linked in:
[   44.794037] CPU: 1 PID: 849 Comm: repro Tainted: G    B   W          6.1.0-a0a6c76cf2a5+ #1
[   44.794947] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   44.796216] RIP: 0010:__iopt_area_unfill_domain+0x54f/0x560
[   44.796913] Code: e8 86 9e 2b ff 85 db 0f 85 35 fb ff ff e8 09 9d 2b ff 0f 0b e9 29 fb ff ff e8 fd 9c 2b ff 0f 0b e9 69 fe ff ff e8 f1 9c 2b ff <0f> 0b e9 58 ff ff ff e8 65 2d dc 00 0f 1f 44 00 00 0f 1f 44 00 00
[   44.798981] RSP: 0018:ffffc90001743ae0 EFLAGS: 00010246
[   44.799585] RAX: 0000000000000000 RBX: 00000000ffffffff RCX: ffffffff81fe0d26
[   44.800405] RDX: 0000000000000000 RSI: ffff88800e67a980 RDI: 0000000000000002
[   44.801259] RBP: ffffc90001743d10 R08: 000000000003b5c5 R09: 0000000000000012
[   44.802072] R10: 000000000003b5a0 R11: 0000000000000024 R12: 00000000000007ff
[   44.802864] R13: 0000000000000801 R14: 00000000000007ff R15: 0000000000000800
[   44.803654] FS:  00007f3777af9740(0000) GS:ffff88807dd00000(0000) knlGS:0000000000000000
[   44.804546] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   44.805241] CR2: 00007f3777c1e580 CR3: 000000000d530006 CR4: 0000000000770ee0
[   44.806044] PKRU: 55555554
[   44.806375] Call Trace:
[   44.806664]  <TASK>
[   44.806921]  ? rcu_read_lock_sched_held+0x29/0x80
[   44.807458]  ? lock_acquire+0x1a1/0x2f0
[   44.807921]  ? rcu_read_lock_held_common+0x12/0x50
[   44.808460]  ? rcu_read_lock_sched_held+0x29/0x80
[   44.809027]  ? __mutex_lock+0x13a/0xf30
[   44.809493]  ? write_comp_data+0x2f/0x90
[   44.809944]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   44.810498]  iopt_area_unfill_domain+0x32/0x40
[   44.811019]  iopt_table_remove_domain+0x23f/0x4c0
[   44.811567]  iommufd_device_selftest_detach+0x3a/0x90
[   44.812166]  iommufd_selftest_destroy+0x55/0x70
[   44.812739]  iommufd_object_destroy_user+0xce/0x130
[   44.813328]  iommufd_destroy+0xa2/0xc0
[   44.813794]  iommufd_fops_ioctl+0x1ef/0x310
[   44.814286]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   44.814829]  ? write_comp_data+0x2f/0x90
[   44.815285]  __x64_sys_ioctl+0x10e/0x160
[   44.815759]  ? iommufd_get_object.part.6+0x1c0/0x1c0
[   44.816337]  do_syscall_64+0x3b/0x90
[   44.816799]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   44.817397] RIP: 0033:0x7f3777c1e59d
[   44.817816] Code: 00 c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d d3 08 0d 00 f7 d8 64 89 01 48
[   44.820083] RSP: 002b:00007ffd0d727918 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   44.821010] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f3777c1e59d
[   44.821823] RDX: 0000000020000140 RSI: 0000000000003b80 RDI: 0000000000000003
[   44.822681] RBP: 00007ffd0d727930 R08: 00007ffd0d727930 R09: 00007ffd0d727930
[   44.823485] R10: 00007ffd0d727930 R11: 0000000000000213 R12: 0000000000401180
[   44.824317] R13: 00007ffd0d727a50 R14: 0000000000000000 R15: 0000000000000000
[   44.825231]  </TASK>
[   44.825498] irq event stamp: 0
[   44.825857] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   44.826630] hardirqs last disabled at (0): [<ffffffff810fff0c>] copy_process+0x11cc/0x2b10
[   44.827576] softirqs last  enabled at (0): [<ffffffff810fff10>] copy_process+0x11d0/0x2b10
[   44.828554] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   44.829319] ---[ end trace 0000000000000000 ]---
[   44.834103] ------------[ cut here ]------------
[   44.834679] WARNING: CPU: 1 PID: 849 at drivers/iommu/iommufd/pages.c:178 batch_unpin.isra.23+0x151/0x1a0
[   44.835765] Modules linked in:
[   44.836138] CPU: 1 PID: 849 Comm: repro Tainted: G    B   W          6.1.0-a0a6c76cf2a5+ #1
[   44.837083] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   44.838415] RIP: 0010:batch_unpin.isra.23+0x151/0x1a0
[   44.839033] Code: e8 c4 be 2b ff 48 8b 45 d0 48 85 c0 75 17 e8 26 bd 2b ff 48 8b 7d c8 48 89 de e8 fa bd 2b ff 48 39 5d c8 73 07 e8 0f bd 2b ff <0f> 0b e8 08 bd 2b ff 4d 29 e5 31 ff 41 83 c6 01 4c 89 ee 31 db e8
[   44.841198] RSP: 0018:ffffc900017439d8 EFLAGS: 00010246
[   44.841837] RAX: 0000000000000000 RBX: ffffffffffffffff RCX: ffffffff81fded8c
[   44.842695] RDX: 0000000000000000 RSI: ffff88800e67a980 RDI: 0000000000000002
[   44.843526] RBP: ffffc90001743a20 R08: 0000000000000000 R09: ffff88807dd3b890
[   44.844380] R10: 0000000000000d3f R11: 0000000000000000 R12: 0000000000000001
[   44.845261] R13: 0000000000000001 R14: 0000000000000000 R15: ffff888005ec8c00
[   44.846132] FS:  0000000000000000(0000) GS:ffff88807dd00000(0000) knlGS:0000000000000000
[   44.847043] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   44.847728] CR2: 00007f3777cf0500 CR3: 0000000003c12003 CR4: 0000000000770ee0
[   44.848594] PKRU: 55555554
[   44.848968] Call Trace:
[   44.849280]  <TASK>
[   44.849563]  iopt_pages_unfill_xarray+0x39f/0x5c0
[   44.850150]  ? rcu_read_lock_sched_held+0x29/0x80
[   44.850759]  ? rcu_read_lock_held_common+0x12/0x50
[   44.851369]  ? write_comp_data+0x2f/0x90
[   44.851879]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   44.852479]  ? write_comp_data+0x2f/0x90
[   44.852998]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   44.853578]  ? interval_tree_remove+0x291/0x4e0
[   44.854162]  ? write_comp_data+0x2f/0x90
[   44.854656]  iopt_area_remove_access+0x108/0x120
[   44.855250]  iommufd_access_unpin_pages+0x177/0x210
[   44.855888]  iommufd_test_access_unmap+0xe0/0x130
[   44.856482]  ? iommufd_test_access_unmap+0x130/0x130
[   44.857155]  iommufd_test_staccess_release+0x39/0x60
[   44.857804]  __fput+0x11f/0x450
[   44.858222]  ____fput+0x1e/0x30
[   44.858629]  task_work_run+0xb6/0x120
[   44.859107]  do_exit+0x521/0x1340
[   44.859545]  ? lock_release+0x202/0x2c0
[   44.860050]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   44.860685]  ? trace_hardirqs_on+0x3f/0x100
[   44.861359]  do_group_exit+0x5e/0xf0
[   44.861971]  __x64_sys_exit_group+0x25/0x30
[   44.862516]  do_syscall_64+0x3b/0x90
[   44.862948]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   44.863547] RIP: 0033:0x7f3777be6cf6
[   44.863991] Code: Unable to access opcode bytes at 0x7f3777be6ccc.
[   44.864736] RSP: 002b:00007ffd0d7278d8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
[   44.865631] RAX: ffffffffffffffda RBX: 00007f3777cf1490 RCX: 00007f3777be6cf6
[   44.866439] RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
[   44.867248] RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffff80
[   44.868072] R10: 0000000000000004 R11: 0000000000000246 R12: 00007f3777cf1490
[   44.868932] R13: 0000000000000001 R14: 00007f3777cf4e88 R15: 0000000000000000
[   44.869765]  </TASK>
[   44.870041] irq event stamp: 0
[   44.870391] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   44.871108] hardirqs last disabled at (0): [<ffffffff810fff0c>] copy_process+0x11cc/0x2b10
[   44.872066] softirqs last  enabled at (0): [<ffffffff810fff10>] copy_process+0x11d0/0x2b10
[   44.873049] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   44.873745] ---[ end trace 0000000000000000 ]---
[   44.874424] ------------[ cut here ]------------
[   44.874962] WARNING: CPU: 1 PID: 849 at drivers/iommu/iommufd/pages.c:886 update_unpinned+0x75/0x80
[   44.875975] Modules linked in:
[   44.876332] CPU: 1 PID: 849 Comm: repro Tainted: G    B   W          6.1.0-a0a6c76cf2a5+ #1
[   44.877320] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   44.878556] RIP: 0010:update_unpinned+0x75/0x80
[   44.879087] Code: ac 2b ff 48 89 de 31 c9 31 d2 4c 29 e6 4c 89 ef e8 70 fb ff ff e8 bb ac 2b ff 5b 41 5c 41 5d 5d c3 cc cc cc cc e8 ab ac 2b ff <0f> 0b eb e7 0f 1f 80 00 00 00 00 0f 1f 44 00 00 55 48 89 e5 41 57
[   44.881130] RSP: 0018:ffffc90001743a08 EFLAGS: 00010246
[   44.881757] RAX: 0000000000000000 RBX: 0000000000000000 RCX: ffffffff81fdfdcf
[   44.882572] RDX: 0000000000000000 RSI: ffff88800e67a980 RDI: 0000000000000002
[   44.883356] RBP: ffffc90001743a20 R08: 0000000000000000 R09: ffff88807dd3b890
[   44.884148] R10: 0000000000000d3f R11: 0000000000000000 R12: ffffffffffffffff
[   44.884984] R13: ffff888005ec8c00 R14: 0000000000000002 R15: 0000000000000002
[   44.885779] FS:  0000000000000000(0000) GS:ffff88807dd00000(0000) knlGS:0000000000000000
[   44.886702] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   44.887387] CR2: 00007f3777cf0500 CR3: 0000000003c12003 CR4: 0000000000770ee0
[   44.888180] PKRU: 55555554
[   44.888502] Call Trace:
[   44.888829]  <TASK>
[   44.889100]  iopt_pages_unfill_xarray+0x522/0x5c0
[   44.889674]  ? rcu_read_lock_sched_held+0x29/0x80
[   44.890275]  ? rcu_read_lock_held_common+0x12/0x50
[   44.890862]  ? write_comp_data+0x2f/0x90
[   44.891344]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   44.891915]  ? write_comp_data+0x2f/0x90
[   44.892398]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   44.892995]  ? interval_tree_remove+0x291/0x4e0
[   44.893546]  ? write_comp_data+0x2f/0x90
[   44.894037]  iopt_area_remove_access+0x108/0x120
[   44.894599]  iommufd_access_unpin_pages+0x177/0x210
[   44.895189]  iommufd_test_access_unmap+0xe0/0x130
[   44.895760]  ? iommufd_test_access_unmap+0x130/0x130
[   44.896341]  iommufd_test_staccess_release+0x39/0x60
[   44.896969]  __fput+0x11f/0x450
[   44.897379]  ____fput+0x1e/0x30
[   44.897780]  task_work_run+0xb6/0x120
[   44.898252]  do_exit+0x521/0x1340
[   44.898670]  ? lock_release+0x202/0x2c0
[   44.899126]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   44.899698]  ? trace_hardirqs_on+0x3f/0x100
[   44.900227]  do_group_exit+0x5e/0xf0
[   44.900687]  __x64_sys_exit_group+0x25/0x30
[   44.901184]  do_syscall_64+0x3b/0x90
[   44.901620]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   44.902185] RIP: 0033:0x7f3777be6cf6
[   44.902596] Code: Unable to access opcode bytes at 0x7f3777be6ccc.
[   44.903255] RSP: 002b:00007ffd0d7278d8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
[   44.904107] RAX: ffffffffffffffda RBX: 00007f3777cf1490 RCX: 00007f3777be6cf6
[   44.904963] RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
[   44.905770] RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffff80
[   44.906592] R10: 0000000000000004 R11: 0000000000000246 R12: 00007f3777cf1490
[   44.907368] R13: 0000000000000001 R14: 00007f3777cf4e88 R15: 0000000000000000
[   44.908181]  </TASK>
[   44.908450] irq event stamp: 0
[   44.908845] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   44.909570] hardirqs last disabled at (0): [<ffffffff810fff0c>] copy_process+0x11cc/0x2b10
[   44.910529] softirqs last  enabled at (0): [<ffffffff810fff10>] copy_process+0x11d0/0x2b10
[   44.911430] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   44.912145] ---[ end trace 0000000000000000 ]---
[   44.912962] ------------[ cut here ]------------
[   44.913483] WARNING: CPU: 1 PID: 849 at drivers/iommu/iommufd/pages.c:1181 iopt_release_pages+0x159/0x190
[   44.914622] Modules linked in:
[   44.914973] CPU: 1 PID: 849 Comm: repro Tainted: G    B   W          6.1.0-a0a6c76cf2a5+ #1
[   44.915909] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   44.917170] RIP: 0010:iopt_release_pages+0x159/0x190
[   44.917718] Code: b5 11 ff eb cb e8 87 90 2b ff be 03 00 00 00 4c 89 f7 e8 6a 8b ce ff eb b7 e8 73 90 2b ff 0f 0b e9 ed fe ff ff e8 67 90 2b ff <0f> 0b e9 00 ff ff ff e8 5b 90 2b ff 0f 0b e9 07 ff ff ff e8 4f 90
[   44.919687] RSP: 0018:ffffc90001743c88 EFLAGS: 00010246
[   44.920294] RAX: 0000000000000000 RBX: ffff888005ec8c00 RCX: ffffffff81fe1957
[   44.921085] RDX: 0000000000000000 RSI: ffff88800e67a980 RDI: 0000000000000002
[   44.921883] RBP: ffffc90001743ca8 R08: 0000000000000000 R09: 0000000000000000
[   44.922692] R10: ffffc90001743c58 R11: 0000000000000000 R12: ffffffffffffffff
[   44.923476] R13: 0000000001000000 R14: 00000000017fffff R15: 0000000000000000
[   44.924291] FS:  0000000000000000(0000) GS:ffff88807dd00000(0000) knlGS:0000000000000000
[   44.925186] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   44.925842] CR2: 00007f3777cf0500 CR3: 0000000003c12003 CR4: 0000000000770ee0
[   44.926648] PKRU: 55555554
[   44.926948] Call Trace:
[   44.927222]  <TASK>
[   44.927472]  iopt_unmap_iova_range+0x1ef/0x2e0
[   44.927994]  iopt_unmap_all+0x2f/0x60
[   44.928415]  iommufd_ioas_destroy+0x2c/0x70
[   44.928925]  iommufd_fops_release+0xd4/0x170
[   44.929443]  ? iommufd_ctx_get+0x30/0x30
[   44.929913]  __fput+0x11f/0x450
[   44.930291]  ____fput+0x1e/0x30
[   44.930675]  task_work_run+0xb6/0x120
[   44.931112]  do_exit+0x521/0x1340
[   44.931501]  ? lock_release+0x202/0x2c0
[   44.931943]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   44.932475]  ? trace_hardirqs_on+0x3f/0x100
[   44.932988]  do_group_exit+0x5e/0xf0
[   44.933408]  __x64_sys_exit_group+0x25/0x30
[   44.933900]  do_syscall_64+0x3b/0x90
[   44.934315]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   44.934888] RIP: 0033:0x7f3777be6cf6
[   44.935319] Code: Unable to access opcode bytes at 0x7f3777be6ccc.
[   44.935988] RSP: 002b:00007ffd0d7278d8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
[   44.936841] RAX: ffffffffffffffda RBX: 00007f3777cf1490 RCX: 00007f3777be6cf6
[   44.937649] RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
[   44.938467] RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffff80
[   44.939254] R10: 0000000000000004 R11: 0000000000000246 R12: 00007f3777cf1490
[   44.940040] R13: 0000000000000001 R14: 00007f3777cf4e88 R15: 0000000000000000
[   44.940897]  </TASK>
[   44.941169] irq event stamp: 0
[   44.941533] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   44.942219] hardirqs last disabled at (0): [<ffffffff810fff0c>] copy_process+0x11cc/0x2b10
[   44.943167] softirqs last  enabled at (0): [<ffffffff810fff10>] copy_process+0x11d0/0x2b10
[   44.944125] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   44.944850] ---[ end trace 0000000000000000 ]---
[   45.348035] ------------[ cut here ]------------
[   45.348422] WARNING: CPU: 0 PID: 861 at drivers/iommu/iommufd/pages.c:178 batch_unpin.isra.23+0x151/0x1a0
[   45.349154] Modules linked in:
[   45.349386] CPU: 0 PID: 861 Comm: repro Tainted: G    B   W          6.1.0-a0a6c76cf2a5+ #1
[   45.349976] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   45.350789] RIP: 0010:batch_unpin.isra.23+0x151/0x1a0
[   45.351167] Code: e8 c4 be 2b ff 48 8b 45 d0 48 85 c0 75 17 e8 26 bd 2b ff 48 8b 7d c8 48 89 de e8 fa bd 2b ff 48 39 5d c8 73 07 e8 0f bd 2b ff <0f> 0b e8 08 bd 2b ff 4d 29 e5 31 ff 41 83 c6 01 4c 89 ee 31 db e8
[   45.352468] RSP: 0018:ffffc90001793a88 EFLAGS: 00010246
[   45.352859] RAX: 0000000000000000 RBX: ffffffffffffffff RCX: ffffffff81fded8c
[   45.353369] RDX: 0000000000000000 RSI: ffff8880135da980 RDI: 0000000000000002
[   45.353879] RBP: ffffc90001793ad0 R08: 000000000003b5c5 R09: 000000000000000c
[   45.354378] R10: 000000000003b5a0 R11: 0000000000000024 R12: 0000000000000004
[   45.354880] R13: 0000000000000004 R14: 0000000000000239 R15: ffff888009f84200
[   45.355406] FS:  00007f3777af9740(0000) GS:ffff88807dc00000(0000) knlGS:0000000000000000
[   45.355975] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   45.356390] CR2: 00007f3777c1e580 CR3: 000000000c99e001 CR4: 0000000000770ef0
[   45.356911] PKRU: 55555554
[   45.357117] Call Trace:
[   45.357301]  <TASK>
[   45.357467]  __iopt_area_unfill_domain+0x257/0x560
[   45.357831]  ? rcu_read_lock_sched_held+0x29/0x80
[   45.358182]  ? lock_acquire+0x1a1/0x2f0
[   45.358478]  ? rcu_read_lock_held_common+0x12/0x50
[   45.358830]  ? rcu_read_lock_sched_held+0x29/0x80
[   45.359182]  ? __mutex_lock+0x13a/0xf30
[   45.359486]  ? write_comp_data+0x2f/0x90
[   45.359794]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   45.360150]  iopt_area_unfill_domain+0x32/0x40
[   45.360486]  iopt_table_remove_domain+0x23f/0x4c0
[   45.360852]  iommufd_device_selftest_detach+0x3a/0x90
[   45.361243]  iommufd_selftest_destroy+0x55/0x70
[   45.361597]  iommufd_object_destroy_user+0xce/0x130
[   45.361961]  iommufd_destroy+0xa2/0xc0
[   45.362250]  iommufd_fops_ioctl+0x1ef/0x310
[   45.362582]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   45.362935]  ? write_comp_data+0x2f/0x90
[   45.363233]  __x64_sys_ioctl+0x10e/0x160
[   45.363542]  ? iommufd_get_object.part.6+0x1c0/0x1c0
[   45.363922]  do_syscall_64+0x3b/0x90
[   45.364199]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   45.364576] RIP: 0033:0x7f3777c1e59d
[   45.364859] Code: 00 c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d d3 08 0d 00 f7 d8 64 89 01 48
[   45.366154] RSP: 002b:00007ffd0d727918 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   45.366710] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f3777c1e59d
[   45.367217] RDX: 0000000020000140 RSI: 0000000000003b80 RDI: 0000000000000003
[   45.367722] RBP: 00007ffd0d727930 R08: 00007ffd0d727930 R09: 00007ffd0d727930
[   45.368227] R10: 00007ffd0d727930 R11: 0000000000000213 R12: 0000000000401180
[   45.368749] R13: 00007ffd0d727a50 R14: 0000000000000000 R15: 0000000000000000
[   45.369272]  </TASK>
[   45.369442] irq event stamp: 0
[   45.369674] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   45.370131] hardirqs last disabled at (0): [<ffffffff810fff0c>] copy_process+0x11cc/0x2b10
[   45.370732] softirqs last  enabled at (0): [<ffffffff810fff10>] copy_process+0x11d0/0x2b10
[   45.371321] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   45.371769] ---[ end trace 0000000000000000 ]---
[   45.372203] ------------[ cut here ]------------
[   45.372552] WARNING: CPU: 0 PID: 861 at drivers/iommu/iommufd/pages.c:294 __iopt_area_unfill_domain+0x152/0x560
[   45.373308] Modules linked in:
[   45.373549] CPU: 0 PID: 861 Comm: repro Tainted: G    B   W          6.1.0-a0a6c76cf2a5+ #1
[   45.374148] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   45.374951] RIP: 0010:__iopt_area_unfill_domain+0x152/0x560
[   45.375370] Code: a1 2b ff 44 8b 64 24 54 48 8b 44 24 48 31 ff 44 89 e6 48 89 44 24 38 e8 6c a2 2b ff 45 85 e4 0f 85 eb 01 00 00 e8 ee a0 2b ff <0f> 0b e8 e7 a0 2b ff 48 8b 44 24 38 89 5c 24 58 89 18 8b 44 24 54
[   45.376707] RSP: 0018:ffffc90001793ae0 EFLAGS: 00010246
[   45.377117] RAX: 0000000000000000 RBX: 00000000fffffffe RCX: ffffffff81fe0bd5
[   45.377656] RDX: 0000000000000000 RSI: ffff8880135da980 RDI: 0000000000000002
[   45.378163] RBP: ffffc90001793d10 R08: 000000000003b5c5 R09: 000000000000000c
[   45.378686] R10: 000000000003b5a0 R11: 0000000000000024 R12: 0000000000000014
[   45.379193] R13: 0000000000000802 R14: 00000000000007ff R15: 0000000000000800
[   45.379704] FS:  00007f3777af9740(0000) GS:ffff88807dc00000(0000) knlGS:0000000000000000
[   45.380270] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   45.380695] CR2: 00007f3777c1e580 CR3: 000000000c99e001 CR4: 0000000000770ef0
[   45.381206] PKRU: 55555554
[   45.381411] Call Trace:
[   45.381598]  <TASK>
[   45.381777]  ? rcu_read_lock_sched_held+0x29/0x80
[   45.382136]  ? lock_acquire+0x1a1/0x2f0
[   45.382432]  ? rcu_read_lock_held_common+0x12/0x50
[   45.382797]  ? rcu_read_lock_sched_held+0x29/0x80
[   45.383145]  ? __mutex_lock+0x13a/0xf30
[   45.383443]  ? write_comp_data+0x2f/0x90
[   45.383739]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   45.384097]  iopt_area_unfill_domain+0x32/0x40
[   45.384443]  iopt_table_remove_domain+0x23f/0x4c0
[   45.384822]  iommufd_device_selftest_detach+0x3a/0x90
[   45.385206]  iommufd_selftest_destroy+0x55/0x70
[   45.385552]  iommufd_object_destroy_user+0xce/0x130
[   45.385917]  iommufd_destroy+0xa2/0xc0
[   45.386200]  iommufd_fops_ioctl+0x1ef/0x310
[   45.386515]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   45.386870]  ? write_comp_data+0x2f/0x90
[   45.387178]  __x64_sys_ioctl+0x10e/0x160
[   45.387484]  ? iommufd_get_object.part.6+0x1c0/0x1c0
[   45.387861]  do_syscall_64+0x3b/0x90
[   45.388137]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   45.388515] RIP: 0033:0x7f3777c1e59d
[   45.388798] Code: 00 c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d d3 08 0d 00 f7 d8 64 89 01 48
[   45.390106] RSP: 002b:00007ffd0d727918 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   45.390662] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f3777c1e59d
[   45.391160] RDX: 0000000020000140 RSI: 0000000000003b80 RDI: 0000000000000003
[   45.391672] RBP: 00007ffd0d727930 R08: 00007ffd0d727930 R09: 00007ffd0d727930
[   45.392191] R10: 00007ffd0d727930 R11: 0000000000000213 R12: 0000000000401180
[   45.392711] R13: 00007ffd0d727a50 R14: 0000000000000000 R15: 0000000000000000
[   45.393236]  </TASK>
[   45.393406] irq event stamp: 0
[   45.393634] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   45.394079] hardirqs last disabled at (0): [<ffffffff810fff0c>] copy_process+0x11cc/0x2b10
[   45.394677] softirqs last  enabled at (0): [<ffffffff810fff10>] copy_process+0x11d0/0x2b10
[   45.395277] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   45.395745] ---[ end trace 0000000000000000 ]---
[   45.396172] ------------[ cut here ]------------
[   45.396504] WARNING: CPU: 0 PID: 861 at drivers/iommu/iommufd/pages.c:1290 __iopt_area_unfill_domain+0x54f/0x560
[   45.397246] Modules linked in:
[   45.397479] CPU: 0 PID: 861 Comm: repro Tainted: G    B   W          6.1.0-a0a6c76cf2a5+ #1
[   45.398078] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   45.398887] RIP: 0010:__iopt_area_unfill_domain+0x54f/0x560
[   45.399312] Code: e8 86 9e 2b ff 85 db 0f 85 35 fb ff ff e8 09 9d 2b ff 0f 0b e9 29 fb ff ff e8 fd 9c 2b ff 0f 0b e9 69 fe ff ff e8 f1 9c 2b ff <0f> 0b e9 58 ff ff ff e8 65 2d dc 00 0f 1f 44 00 00 0f 1f 44 00 00
[   45.400648] RSP: 0018:ffffc90001793ae0 EFLAGS: 00010246
[   45.401042] RAX: 0000000000000000 RBX: 00000000fffffffe RCX: ffffffff81fe0d26
[   45.401558] RDX: 0000000000000000 RSI: ffff8880135da980 RDI: 0000000000000002
[   45.402058] RBP: ffffc90001793d10 R08: 000000000003b5c5 R09: 000000000000000c
[   45.402557] R10: 000000000003b5a0 R11: 0000000000000024 R12: 00000000000007ff
[   45.403055] R13: 0000000000000802 R14: 00000000000007ff R15: 0000000000000800
[   45.403574] FS:  00007f3777af9740(0000) GS:ffff88807dc00000(0000) knlGS:0000000000000000
[   45.404150] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   45.404570] CR2: 00007f3777c1e580 CR3: 000000000c99e001 CR4: 0000000000770ef0
[   45.405110] PKRU: 55555554
[   45.405316] Call Trace:
[   45.405506]  <TASK>
[   45.405682]  ? rcu_read_lock_sched_held+0x29/0x80
[   45.406043]  ? lock_acquire+0x1a1/0x2f0
[   45.406343]  ? rcu_read_lock_held_common+0x12/0x50
[   45.406708]  ? rcu_read_lock_sched_held+0x29/0x80
[   45.407063]  ? __mutex_lock+0x13a/0xf30
[   45.407362]  ? write_comp_data+0x2f/0x90
[   45.407669]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   45.408029]  iopt_area_unfill_domain+0x32/0x40
[   45.408364]  iopt_table_remove_domain+0x23f/0x4c0
[   45.408727]  iommufd_device_selftest_detach+0x3a/0x90
[   45.409119]  iommufd_selftest_destroy+0x55/0x70
[   45.409465]  iommufd_object_destroy_user+0xce/0x130
[   45.409838]  iommufd_destroy+0xa2/0xc0
[   45.410128]  iommufd_fops_ioctl+0x1ef/0x310
[   45.410451]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   45.410818]  ? write_comp_data+0x2f/0x90
[   45.411108]  __x64_sys_ioctl+0x10e/0x160
[   45.411399]  ? iommufd_get_object.part.6+0x1c0/0x1c0
[   45.411760]  do_syscall_64+0x3b/0x90
[   45.412033]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   45.412411] RIP: 0033:0x7f3777c1e59d
[   45.412700] Code: 00 c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d d3 08 0d 00 f7 d8 64 89 01 48
[   45.414012] RSP: 002b:00007ffd0d727918 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   45.414569] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f3777c1e59d
[   45.415089] RDX: 0000000020000140 RSI: 0000000000003b80 RDI: 0000000000000003
[   45.415603] RBP: 00007ffd0d727930 R08: 00007ffd0d727930 R09: 00007ffd0d727930
[   45.416109] R10: 00007ffd0d727930 R11: 0000000000000213 R12: 0000000000401180
[   45.416615] R13: 00007ffd0d727a50 R14: 0000000000000000 R15: 0000000000000000
[   45.417168]  </TASK>
[   45.417340] irq event stamp: 0
[   45.417567] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   45.418009] hardirqs last disabled at (0): [<ffffffff810fff0c>] copy_process+0x11cc/0x2b10
[   45.418598] softirqs last  enabled at (0): [<ffffffff810fff10>] copy_process+0x11d0/0x2b10
[   45.419191] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   45.419640] ---[ end trace 0000000000000000 ]---
[   45.420078] ------------[ cut here ]------------
[   45.420420] WARNING: CPU: 0 PID: 861 at drivers/iommu/iommufd/pages.c:886 update_unpinned+0x75/0x80
[   45.421106] Modules linked in:
[   45.421340] CPU: 0 PID: 861 Comm: repro Tainted: G    B   W          6.1.0-a0a6c76cf2a5+ #1
[   45.421941] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   45.422758] RIP: 0010:update_unpinned+0x75/0x80
[   45.423108] Code: ac 2b ff 48 89 de 31 c9 31 d2 4c 29 e6 4c 89 ef e8 70 fb ff ff e8 bb ac 2b ff 5b 41 5c 41 5d 5d c3 cc cc cc cc e8 ab ac 2b ff <0f> 0b eb e7 0f 1f 80 00 00 00 00 0f 1f 44 00 00 55 48 89 e5 41 57
[   45.424420] RSP: 0018:ffffc90001793ab8 EFLAGS: 00010246
[   45.424815] RAX: 0000000000000000 RBX: 0000000000000800 RCX: ffffffff81fdfdcf
[   45.425331] RDX: 0000000000000000 RSI: ffff8880135da980 RDI: 0000000000000002
[   45.425844] RBP: ffffc90001793ad0 R08: 0000000000000000 R09: ffff88807dc3b920
[   45.426368] R10: 00000000000003ec R11: 0000000000000009 R12: ffffffffffffffff
[   45.426896] R13: ffff888009f84200 R14: 00000000000007ff R15: 0000000000000800
[   45.427416] FS:  00007f3777af9740(0000) GS:ffff88807dc00000(0000) knlGS:0000000000000000
[   45.427992] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   45.428411] CR2: 00007f3777c1e580 CR3: 000000000c99e001 CR4: 0000000000770ef0
[   45.428936] PKRU: 55555554
[   45.429148] Call Trace:
[   45.429335]  <TASK>
[   45.429506]  __iopt_area_unfill_domain+0x4e1/0x560
[   45.429884]  ? rcu_read_lock_sched_held+0x29/0x80
[   45.430258]  ? lock_acquire+0x1a1/0x2f0
[   45.430566]  ? rcu_read_lock_held_common+0x12/0x50
[   45.430929]  ? rcu_read_lock_sched_held+0x29/0x80
[   45.431291]  ? __mutex_lock+0x13a/0xf30
[   45.431595]  ? write_comp_data+0x2f/0x90
[   45.431905]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   45.432316]  iopt_area_unfill_domain+0x32/0x40
[   45.432670]  iopt_table_remove_domain+0x23f/0x4c0
[   45.433030]  iommufd_device_selftest_detach+0x3a/0x90
[   45.433428]  iommufd_selftest_destroy+0x55/0x70
[   45.433768]  iommufd_object_destroy_user+0xce/0x130
[   45.434136]  iommufd_destroy+0xa2/0xc0
[   45.434428]  iommufd_fops_ioctl+0x1ef/0x310
[   45.434749]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   45.435102]  ? write_comp_data+0x2f/0x90
[   45.435401]  __x64_sys_ioctl+0x10e/0x160
[   45.435707]  ? iommufd_get_object.part.6+0x1c0/0x1c0
[   45.436075]  do_syscall_64+0x3b/0x90
[   45.436359]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   45.436762] RIP: 0033:0x7f3777c1e59d
[   45.437036] Code: 00 c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d d3 08 0d 00 f7 d8 64 89 01 48
[   45.438349] RSP: 002b:00007ffd0d727918 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   45.438901] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f3777c1e59d
[   45.439411] RDX: 0000000020000140 RSI: 0000000000003b80 RDI: 0000000000000003
[   45.439917] RBP: 00007ffd0d727930 R08: 00007ffd0d727930 R09: 00007ffd0d727930
[   45.440420] R10: 00007ffd0d727930 R11: 0000000000000213 R12: 0000000000401180
[   45.440942] R13: 00007ffd0d727a50 R14: 0000000000000000 R15: 0000000000000000
[   45.441455]  </TASK>
[   45.441624] irq event stamp: 0
[   45.441860] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   45.442308] hardirqs last disabled at (0): [<ffffffff810fff0c>] copy_process+0x11cc/0x2b10
[   45.442909] softirqs last  enabled at (0): [<ffffffff810fff10>] copy_process+0x11d0/0x2b10
[   45.443515] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   45.443965] ---[ end trace 0000000000000000 ]---
[   45.446740] ------------[ cut here ]------------
[   45.447095] WARNING: CPU: 0 PID: 861 at drivers/iommu/iommufd/pages.c:178 batch_unpin.isra.23+0x151/0x1a0
[   45.447790] Modules linked in:
[   45.448027] CPU: 0 PID: 861 Comm: repro Tainted: G    B   W          6.1.0-a0a6c76cf2a5+ #1
[   45.448685] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   45.449502] RIP: 0010:batch_unpin.isra.23+0x151/0x1a0
[   45.449874] Code: e8 c4 be 2b ff 48 8b 45 d0 48 85 c0 75 17 e8 26 bd 2b ff 48 8b 7d c8 48 89 de e8 fa bd 2b ff 48 39 5d c8 73 07 e8 0f bd 2b ff <0f> 0b e8 08 bd 2b ff 4d 29 e5 31 ff 41 83 c6 01 4c 89 ee 31 db e8
[   45.451170] RSP: 0018:ffffc900017939d8 EFLAGS: 00010246
[   45.451562] RAX: 0000000000000000 RBX: fffffffffffffffe RCX: ffffffff81fdeda6
[   45.452077] RDX: 0000000000000000 RSI: ffff8880135da980 RDI: 0000000000000002
[   45.452585] RBP: ffffc90001793a20 R08: 0000000000000000 R09: ffff88807dc3b890
[   45.453103] R10: 0000000000000bed R11: 0000000000000000 R12: 0000000000000001
[   45.453613] R13: 0000000000000001 R14: 0000000000000000 R15: ffff888009f84200
[   45.454131] FS:  0000000000000000(0000) GS:ffff88807dc00000(0000) knlGS:0000000000000000
[   45.454719] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   45.455140] CR2: 00007f3777cf0500 CR3: 0000000003c12006 CR4: 0000000000770ef0
[   45.455661] PKRU: 55555554
[   45.455868] Call Trace:
[   45.456058]  <TASK>
[   45.456226]  iopt_pages_unfill_xarray+0x39f/0x5c0
[   45.456586]  ? rcu_read_lock_sched_held+0x29/0x80
[   45.456967]  ? rcu_read_lock_held_common+0x12/0x50
[   45.457327]  ? write_comp_data+0x2f/0x90
[   45.457628]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   45.457977]  ? write_comp_data+0x2f/0x90
[   45.458282]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   45.458647]  ? interval_tree_remove+0x291/0x4e0
[   45.458999]  ? write_comp_data+0x2f/0x90
[   45.459300]  iopt_area_remove_access+0x108/0x120
[   45.459648]  iommufd_access_unpin_pages+0x177/0x210
[   45.460027]  iommufd_test_access_unmap+0xe0/0x130
[   45.460378]  ? iommufd_test_access_unmap+0x130/0x130
[   45.460760]  iommufd_test_staccess_release+0x39/0x60
[   45.461147]  __fput+0x11f/0x450
[   45.461398]  ____fput+0x1e/0x30
[   45.461655]  task_work_run+0xb6/0x120
[   45.461949]  do_exit+0x521/0x1340
[   45.462210]  ? lock_release+0x202/0x2c0
[   45.462498]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   45.462862]  ? trace_hardirqs_on+0x3f/0x100
[   45.463188]  do_group_exit+0x5e/0xf0
[   45.463466]  __x64_sys_exit_group+0x25/0x30
[   45.463787]  do_syscall_64+0x3b/0x90
[   45.464063]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   45.464436] RIP: 0033:0x7f3777be6cf6
[   45.464719] Code: Unable to access opcode bytes at 0x7f3777be6ccc.
[   45.465157] RSP: 002b:00007ffd0d7278d8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
[   45.465717] RAX: ffffffffffffffda RBX: 00007f3777cf1490 RCX: 00007f3777be6cf6
[   45.466235] RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
[   45.466753] RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffff80
[   45.467261] R10: 0000000000000004 R11: 0000000000000246 R12: 00007f3777cf1490
[   45.467773] R13: 0000000000000001 R14: 00007f3777cf4e88 R15: 0000000000000000
[   45.468297]  </TASK>
[   45.468467] irq event stamp: 0
[   45.468728] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   45.469202] hardirqs last disabled at (0): [<ffffffff810fff0c>] copy_process+0x11cc/0x2b10
[   45.469807] softirqs last  enabled at (0): [<ffffffff810fff10>] copy_process+0x11d0/0x2b10
[   45.470420] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   45.470861] ---[ end trace 0000000000000000 ]---
[   45.471290] ------------[ cut here ]------------
[   45.471627] WARNING: CPU: 0 PID: 861 at drivers/iommu/iommufd/pages.c:886 update_unpinned+0x75/0x80
[   45.472302] Modules linked in:
[   45.472532] CPU: 0 PID: 861 Comm: repro Tainted: G    B   W          6.1.0-a0a6c76cf2a5+ #1
[   45.473141] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   45.473947] RIP: 0010:update_unpinned+0x75/0x80
[   45.474293] Code: ac 2b ff 48 89 de 31 c9 31 d2 4c 29 e6 4c 89 ef e8 70 fb ff ff e8 bb ac 2b ff 5b 41 5c 41 5d 5d c3 cc cc cc cc e8 ab ac 2b ff <0f> 0b eb e7 0f 1f 80 00 00 00 00 0f 1f 44 00 00 55 48 89 e5 41 57
[   45.475624] RSP: 0018:ffffc90001793a08 EFLAGS: 00010246
[   45.476009] RAX: 0000000000000000 RBX: 0000000000000800 RCX: ffffffff81fdfdcf
[   45.476524] RDX: 0000000000000000 RSI: ffff8880135da980 RDI: 0000000000000002
[   45.477044] RBP: ffffc90001793a20 R08: 0000000000000000 R09: ffff88807dc3b890
[   45.477560] R10: 0000000000000bed R11: 0000000000000000 R12: fffffffffffffffe
[   45.478080] R13: ffff888009f84200 R14: 0000000000000002 R15: 0000000000000002
[   45.478604] FS:  0000000000000000(0000) GS:ffff88807dc00000(0000) knlGS:0000000000000000
[   45.479185] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   45.479598] CR2: 00007f3777cf0500 CR3: 0000000003c12006 CR4: 0000000000770ef0
[   45.480122] PKRU: 55555554
[   45.480378] Call Trace:
[   45.480570]  <TASK>
[   45.480810]  iopt_pages_unfill_xarray+0x522/0x5c0
[   45.481166]  ? rcu_read_lock_sched_held+0x29/0x80
[   45.481530]  ? rcu_read_lock_held_common+0x12/0x50
[   45.481885]  ? write_comp_data+0x2f/0x90
[   45.482184]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   45.482553]  ? write_comp_data+0x2f/0x90
[   45.482855]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   45.483218]  ? interval_tree_remove+0x291/0x4e0
[   45.483564]  ? write_comp_data+0x2f/0x90
[   45.483867]  iopt_area_remove_access+0x108/0x120
[   45.484220]  iommufd_access_unpin_pages+0x177/0x210
[   45.484605]  iommufd_test_access_unmap+0xe0/0x130
[   45.484983]  ? iommufd_test_access_unmap+0x130/0x130
[   45.485367]  iommufd_test_staccess_release+0x39/0x60
[   45.485750]  __fput+0x11f/0x450
[   45.486002]  ____fput+0x1e/0x30
[   45.486252]  task_work_run+0xb6/0x120
[   45.486560]  do_exit+0x521/0x1340
[   45.486813]  ? lock_release+0x202/0x2c0
[   45.487108]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   45.487463]  ? trace_hardirqs_on+0x3f/0x100
[   45.487776]  do_group_exit+0x5e/0xf0
[   45.488047]  __x64_sys_exit_group+0x25/0x30
[   45.488345]  do_syscall_64+0x3b/0x90
[   45.488612]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   45.488992] RIP: 0033:0x7f3777be6cf6
[   45.489260] Code: Unable to access opcode bytes at 0x7f3777be6ccc.
[   45.489702] RSP: 002b:00007ffd0d7278d8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
[   45.490246] RAX: ffffffffffffffda RBX: 00007f3777cf1490 RCX: 00007f3777be6cf6
[   45.490756] RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
[   45.491282] RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffff80
[   45.491792] R10: 0000000000000004 R11: 0000000000000246 R12: 00007f3777cf1490
[   45.492296] R13: 0000000000000001 R14: 00007f3777cf4e88 R15: 0000000000000000
[   45.492829]  </TASK>
[   45.493003] irq event stamp: 0
[   45.493231] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   45.493690] hardirqs last disabled at (0): [<ffffffff810fff0c>] copy_process+0x11cc/0x2b10
[   45.494303] softirqs last  enabled at (0): [<ffffffff810fff10>] copy_process+0x11d0/0x2b10
[   45.494908] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   45.495369] ---[ end trace 0000000000000000 ]---
[   45.495836] ------------[ cut here ]------------
[   45.496180] WARNING: CPU: 0 PID: 861 at drivers/iommu/iommufd/pages.c:1181 iopt_release_pages+0x159/0x190
[   45.496894] Modules linked in:
[   45.497134] CPU: 0 PID: 861 Comm: repro Tainted: G    B   W          6.1.0-a0a6c76cf2a5+ #1
[   45.497733] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   45.498542] RIP: 0010:iopt_release_pages+0x159/0x190
[   45.498914] Code: b5 11 ff eb cb e8 87 90 2b ff be 03 00 00 00 4c 89 f7 e8 6a 8b ce ff eb b7 e8 73 90 2b ff 0f 0b e9 ed fe ff ff e8 67 90 2b ff <0f> 0b e9 00 ff ff ff e8 5b 90 2b ff 0f 0b e9 07 ff ff ff e8 4f 90
[   45.500231] RSP: 0018:ffffc90001793c88 EFLAGS: 00010246
[   45.500622] RAX: 0000000000000000 RBX: ffff888009f84200 RCX: ffffffff81fe1957
[   45.501148] RDX: 0000000000000000 RSI: ffff8880135da980 RDI: 0000000000000002
[   45.501670] RBP: ffffc90001793ca8 R08: 0000000000000000 R09: 0000000000000000
[   45.502187] R10: ffffc90001793c58 R11: 0000000000000000 R12: fffffffffffffffe
[   45.502703] R13: 0000000001000000 R14: 00000000017fffff R15: 0000000000000000
[   45.503209] FS:  0000000000000000(0000) GS:ffff88807dc00000(0000) knlGS:0000000000000000
[   45.503790] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   45.504219] CR2: 00007f3777cf0500 CR3: 0000000003c12006 CR4: 0000000000770ef0
[   45.504754] PKRU: 55555554
[   45.504968] Call Trace:
[   45.505159]  <TASK>
[   45.505322]  iopt_unmap_iova_range+0x1ef/0x2e0
[   45.505661]  iopt_unmap_all+0x2f/0x60
[   45.505939]  iommufd_ioas_destroy+0x2c/0x70
[   45.506252]  iommufd_fops_release+0xd4/0x170
[   45.506588]  ? iommufd_ctx_get+0x30/0x30
[   45.506887]  __fput+0x11f/0x450
[   45.507136]  ____fput+0x1e/0x30
[   45.507381]  task_work_run+0xb6/0x120
[   45.507675]  do_exit+0x521/0x1340
[   45.507933]  ? lock_release+0x202/0x2c0
[   45.508228]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   45.508592]  ? trace_hardirqs_on+0x3f/0x100
[   45.508927]  do_group_exit+0x5e/0xf0
[   45.509203]  __x64_sys_exit_group+0x25/0x30
[   45.509520]  do_syscall_64+0x3b/0x90
[   45.509799]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   45.510175] RIP: 0033:0x7f3777be6cf6
[   45.510448] Code: Unable to access opcode bytes at 0x7f3777be6ccc.
[   45.510911] RSP: 002b:00007ffd0d7278d8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
[   45.511451] RAX: ffffffffffffffda RBX: 00007f3777cf1490 RCX: 00007f3777be6cf6
[   45.511973] RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
[   45.512495] RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffff80
[   45.513027] R10: 0000000000000004 R11: 0000000000000246 R12: 00007f3777cf1490
[   45.513540] R13: 0000000000000001 R14: 00007f3777cf4e88 R15: 0000000000000000
[   45.514061]  </TASK>
[   45.514237] irq event stamp: 0
[   45.514501] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   45.514969] hardirqs last disabled at (0): [<ffffffff810fff0c>] copy_process+0x11cc/0x2b10
[   45.515587] softirqs last  enabled at (0): [<ffffffff810fff10>] copy_process+0x11d0/0x2b10
[   45.516187] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   45.516638] ---[ end trace 0000000000000000 ]---
[   45.673940] ------------[ cut here ]------------
[   45.674319] WARNING: CPU: 0 PID: 869 at drivers/iommu/iommufd/pages.c:178 batch_unpin.isra.23+0x151/0x1a0
[   45.675024] Modules linked in:
[   45.675259] CPU: 0 PID: 869 Comm: repro Tainted: G    B   W          6.1.0-a0a6c76cf2a5+ #1
[   45.675852] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   45.676686] RIP: 0010:batch_unpin.isra.23+0x151/0x1a0
[   45.677084] Code: e8 c4 be 2b ff 48 8b 45 d0 48 85 c0 75 17 e8 26 bd 2b ff 48 8b 7d c8 48 89 de e8 fa bd 2b ff 48 39 5d c8 73 07 e8 0f bd 2b ff <0f> 0b e8 08 bd 2b ff 4d 29 e5 31 ff 41 83 c6 01 4c 89 ee 31 db e8
[   45.678408] RSP: 0018:ffffc900017c3a88 EFLAGS: 00010246
[   45.678959] RAX: 0000000000000000 RBX: ffffffffffffffff RCX: ffffffff81fded8c
[   45.679617] RDX: 0000000000000000 RSI: ffff8880135da980 RDI: 0000000000000002
[   45.680129] RBP: ffffc900017c3ad0 R08: 000000000003b5c5 R09: 0000000000000012
[   45.680795] R10: 000000000003b5a0 R11: 0000000000000024 R12: 0000000000000004
[   45.681301] R13: 0000000000000004 R14: 0000000000000295 R15: ffff888009f84200
[   45.681821] FS:  00007f3777af9740(0000) GS:ffff88807dc00000(0000) knlGS:0000000000000000
[   45.682407] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   45.682829] CR2: 00007f3777c1e580 CR3: 000000000d530004 CR4: 0000000000770ef0
[   45.683335] PKRU: 55555554
[   45.683537] Call Trace:
[   45.683724]  <TASK>
[   45.683893]  __iopt_area_unfill_domain+0x257/0x560
[   45.684257]  ? rcu_read_lock_sched_held+0x29/0x80
[   45.684607]  ? lock_acquire+0x1a1/0x2f0
[   45.684916]  ? rcu_read_lock_held_common+0x12/0x50
[   45.685282]  ? rcu_read_lock_sched_held+0x29/0x80
[   45.685644]  ? __mutex_lock+0x13a/0xf30
[   45.685948]  ? write_comp_data+0x2f/0x90
[   45.686246]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   45.686608]  iopt_area_unfill_domain+0x32/0x40
[   45.686942]  iopt_table_remove_domain+0x23f/0x4c0
[   45.687294]  iommufd_device_selftest_detach+0x3a/0x90
[   45.687678]  iommufd_selftest_destroy+0x55/0x70
[   45.688020]  iommufd_object_destroy_user+0xce/0x130
[   45.688387]  iommufd_destroy+0xa2/0xc0
[   45.688686]  iommufd_fops_ioctl+0x1ef/0x310
[   45.689000]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   45.689353]  ? write_comp_data+0x2f/0x90
[   45.689651]  __x64_sys_ioctl+0x10e/0x160
[   45.689958]  ? iommufd_get_object.part.6+0x1c0/0x1c0
[   45.690338]  do_syscall_64+0x3b/0x90
[   45.690628]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   45.691016] RIP: 0033:0x7f3777c1e59d
[   45.691289] Code: 00 c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d d3 08 0d 00 f7 d8 64 89 01 48
[   45.692622] RSP: 002b:00007ffd0d727918 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   45.693190] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f3777c1e59d
[   45.693692] RDX: 0000000020000140 RSI: 0000000000003b80 RDI: 0000000000000003
[   45.694200] RBP: 00007ffd0d727930 R08: 00007ffd0d727930 R09: 00007ffd0d727930
[   45.694716] R10: 00007ffd0d727930 R11: 0000000000000213 R12: 0000000000401180
[   45.695229] R13: 00007ffd0d727a50 R14: 0000000000000000 R15: 0000000000000000
[   45.695745]  </TASK>
[   45.695914] irq event stamp: 0
[   45.696146] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   45.696597] hardirqs last disabled at (0): [<ffffffff810fff0c>] copy_process+0x11cc/0x2b10
[   45.697216] softirqs last  enabled at (0): [<ffffffff810fff10>] copy_process+0x11d0/0x2b10
[   45.697809] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   45.698258] ---[ end trace 0000000000000000 ]---
[   45.698692] ------------[ cut here ]------------
[   45.699024] WARNING: CPU: 0 PID: 869 at drivers/iommu/iommufd/pages.c:294 __iopt_area_unfill_domain+0x152/0x560
[   45.699753] Modules linked in:
[   45.699982] CPU: 0 PID: 869 Comm: repro Tainted: G    B   W          6.1.0-a0a6c76cf2a5+ #1
[   45.700582] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   45.701396] RIP: 0010:__iopt_area_unfill_domain+0x152/0x560
[   45.701806] Code: a1 2b ff 44 8b 64 24 54 48 8b 44 24 48 31 ff 44 89 e6 48 89 44 24 38 e8 6c a2 2b ff 45 85 e4 0f 85 eb 01 00 00 e8 ee a0 2b ff <0f> 0b e8 e7 a0 2b ff 48 8b 44 24 38 89 5c 24 58 89 18 8b 44 24 54
[   45.703120] RSP: 0018:ffffc900017c3ae0 EFLAGS: 00010246
[   45.703501] RAX: 0000000000000000 RBX: 00000000fffffffe RCX: ffffffff81fe0bd5
[   45.704011] RDX: 0000000000000000 RSI: ffff8880135da980 RDI: 0000000000000002
[   45.704533] RBP: ffffc900017c3d10 R08: 000000000003b5c5 R09: 0000000000000012
[   45.705061] R10: 000000000003b5a0 R11: 0000000000000024 R12: 0000000000000001
[   45.705574] R13: 0000000000000802 R14: 00000000000007ff R15: 0000000000000800
[   45.706082] FS:  00007f3777af9740(0000) GS:ffff88807dc00000(0000) knlGS:0000000000000000
[   45.706662] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   45.707080] CR2: 00007f3777c1e580 CR3: 000000000d530004 CR4: 0000000000770ef0
[   45.707612] PKRU: 55555554
[   45.707812] Call Trace:
[   45.707994]  <TASK>
[   45.708166]  ? rcu_read_lock_sched_held+0x29/0x80
[   45.708517]  ? lock_acquire+0x1a1/0x2f0
[   45.708823]  ? rcu_read_lock_held_common+0x12/0x50
[   45.709182]  ? rcu_read_lock_sched_held+0x29/0x80
[   45.709535]  ? __mutex_lock+0x13a/0xf30
[   45.709832]  ? write_comp_data+0x2f/0x90
[   45.710136]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   45.710524]  iopt_area_unfill_domain+0x32/0x40
[   45.710864]  iopt_table_remove_domain+0x23f/0x4c0
[   45.711214]  iommufd_device_selftest_detach+0x3a/0x90
[   45.711598]  iommufd_selftest_destroy+0x55/0x70
[   45.711946]  iommufd_object_destroy_user+0xce/0x130
[   45.712312]  iommufd_destroy+0xa2/0xc0
[   45.712600]  iommufd_fops_ioctl+0x1ef/0x310
[   45.712935]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   45.713294]  ? write_comp_data+0x2f/0x90
[   45.713600]  __x64_sys_ioctl+0x10e/0x160
[   45.713909]  ? iommufd_get_object.part.6+0x1c0/0x1c0
[   45.714286]  do_syscall_64+0x3b/0x90
[   45.714570]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   45.714943] RIP: 0033:0x7f3777c1e59d
[   45.715217] Code: 00 c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d d3 08 0d 00 f7 d8 64 89 01 48
[   45.716531] RSP: 002b:00007ffd0d727918 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   45.717094] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f3777c1e59d
[   45.717616] RDX: 0000000020000140 RSI: 0000000000003b80 RDI: 0000000000000003
[   45.718135] RBP: 00007ffd0d727930 R08: 00007ffd0d727930 R09: 00007ffd0d727930
[   45.718646] R10: 00007ffd0d727930 R11: 0000000000000213 R12: 0000000000401180
[   45.719150] R13: 00007ffd0d727a50 R14: 0000000000000000 R15: 0000000000000000
[   45.719674]  </TASK>
[   45.719850] irq event stamp: 0
[   45.720083] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   45.720544] hardirqs last disabled at (0): [<ffffffff810fff0c>] copy_process+0x11cc/0x2b10
[   45.721166] softirqs last  enabled at (0): [<ffffffff810fff10>] copy_process+0x11d0/0x2b10
[   45.721774] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   45.722233] ---[ end trace 0000000000000000 ]---
[   45.722682] ------------[ cut here ]------------
[   45.723023] WARNING: CPU: 0 PID: 869 at drivers/iommu/iommufd/pages.c:1290 __iopt_area_unfill_domain+0x54f/0x560
[   45.723755] Modules linked in:
[   45.723990] CPU: 0 PID: 869 Comm: repro Tainted: G    B   W          6.1.0-a0a6c76cf2a5+ #1
[   45.724615] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   45.725453] RIP: 0010:__iopt_area_unfill_domain+0x54f/0x560
[   45.725876] Code: e8 86 9e 2b ff 85 db 0f 85 35 fb ff ff e8 09 9d 2b ff 0f 0b e9 29 fb ff ff e8 fd 9c 2b ff 0f 0b e9 69 fe ff ff e8 f1 9c 2b ff <0f> 0b e9 58 ff ff ff e8 65 2d dc 00 0f 1f 44 00 00 0f 1f 44 00 00
[   45.727202] RSP: 0018:ffffc900017c3ae0 EFLAGS: 00010246
[   45.727595] RAX: 0000000000000000 RBX: 00000000fffffffe RCX: ffffffff81fe0d26
[   45.728115] RDX: 0000000000000000 RSI: ffff8880135da980 RDI: 0000000000000002
[   45.728636] RBP: ffffc900017c3d10 R08: 000000000003b5c5 R09: 0000000000000012
[   45.729163] R10: 000000000003b5a0 R11: 0000000000000024 R12: 00000000000007ff
[   45.729684] R13: 0000000000000802 R14: 00000000000007ff R15: 0000000000000800
[   45.730208] FS:  00007f3777af9740(0000) GS:ffff88807dc00000(0000) knlGS:0000000000000000
[   45.730792] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   45.731221] CR2: 00007f3777c1e580 CR3: 000000000d530004 CR4: 0000000000770ef0
[   45.731754] PKRU: 55555554
[   45.731957] Call Trace:
[   45.732145]  <TASK>
[   45.732329]  ? rcu_read_lock_sched_held+0x29/0x80
[   45.732706]  ? lock_acquire+0x1a1/0x2f0
[   45.733008]  ? rcu_read_lock_held_common+0x12/0x50
[   45.733384]  ? rcu_read_lock_sched_held+0x29/0x80
[   45.733750]  ? __mutex_lock+0x13a/0xf30
[   45.734047]  ? write_comp_data+0x2f/0x90
[   45.734356]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   45.734719]  iopt_area_unfill_domain+0x32/0x40
[   45.735062]  iopt_table_remove_domain+0x23f/0x4c0
[   45.735421]  iommufd_device_selftest_detach+0x3a/0x90
[   45.735813]  iommufd_selftest_destroy+0x55/0x70
[   45.736163]  iommufd_object_destroy_user+0xce/0x130
[   45.736532]  iommufd_destroy+0xa2/0xc0
[   45.736839]  iommufd_fops_ioctl+0x1ef/0x310
[   45.737166]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   45.737524]  ? write_comp_data+0x2f/0x90
[   45.737835]  __x64_sys_ioctl+0x10e/0x160
[   45.738147]  ? iommufd_get_object.part.6+0x1c0/0x1c0
[   45.738528]  do_syscall_64+0x3b/0x90
[   45.738796]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   45.739170] RIP: 0033:0x7f3777c1e59d
[   45.739451] Code: 00 c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d d3 08 0d 00 f7 d8 64 89 01 48
[   45.740785] RSP: 002b:00007ffd0d727918 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   45.741330] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f3777c1e59d
[   45.741848] RDX: 0000000020000140 RSI: 0000000000003b80 RDI: 0000000000000003
[   45.742373] RBP: 00007ffd0d727930 R08: 00007ffd0d727930 R09: 00007ffd0d727930
[   45.742884] R10: 00007ffd0d727930 R11: 0000000000000213 R12: 0000000000401180
[   45.743409] R13: 00007ffd0d727a50 R14: 0000000000000000 R15: 0000000000000000
[   45.743945]  </TASK>
[   45.744122] irq event stamp: 0
[   45.744359] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   45.744846] hardirqs last disabled at (0): [<ffffffff810fff0c>] copy_process+0x11cc/0x2b10
[   45.745467] softirqs last  enabled at (0): [<ffffffff810fff10>] copy_process+0x11d0/0x2b10
[   45.746084] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   45.746540] ---[ end trace 0000000000000000 ]---
[   45.746961] ------------[ cut here ]------------
[   45.747301] WARNING: CPU: 0 PID: 869 at drivers/iommu/iommufd/pages.c:886 update_unpinned+0x75/0x80
[   45.747972] Modules linked in:
[   45.748227] CPU: 0 PID: 869 Comm: repro Tainted: G    B   W          6.1.0-a0a6c76cf2a5+ #1
[   45.748876] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   45.749703] RIP: 0010:update_unpinned+0x75/0x80
[   45.750051] Code: ac 2b ff 48 89 de 31 c9 31 d2 4c 29 e6 4c 89 ef e8 70 fb ff ff e8 bb ac 2b ff 5b 41 5c 41 5d 5d c3 cc cc cc cc e8 ab ac 2b ff <0f> 0b eb e7 0f 1f 80 00 00 00 00 0f 1f 44 00 00 55 48 89 e5 41 57
[   45.751386] RSP: 0018:ffffc900017c3ab8 EFLAGS: 00010246
[   45.751786] RAX: 0000000000000000 RBX: 0000000000000800 RCX: ffffffff81fdfdcf
[   45.752315] RDX: 0000000000000000 RSI: ffff8880135da980 RDI: 0000000000000002
[   45.752850] RBP: ffffc900017c3ad0 R08: 0000000000000000 R09: ffff88807dc3b920
[   45.753369] R10: 000000000000044e R11: 0000000000000009 R12: ffffffffffffffff
[   45.753883] R13: ffff888009f84200 R14: 00000000000007ff R15: 0000000000000800
[   45.754403] FS:  00007f3777af9740(0000) GS:ffff88807dc00000(0000) knlGS:0000000000000000
[   45.754994] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   45.755421] CR2: 00007f3777c1e580 CR3: 000000000d530004 CR4: 0000000000770ef0
[   45.755947] PKRU: 55555554
[   45.756154] Call Trace:
[   45.756343]  <TASK>
[   45.756515]  __iopt_area_unfill_domain+0x4e1/0x560
[   45.756907]  ? rcu_read_lock_sched_held+0x29/0x80
[   45.757271]  ? lock_acquire+0x1a1/0x2f0
[   45.757570]  ? rcu_read_lock_held_common+0x12/0x50
[   45.757936]  ? rcu_read_lock_sched_held+0x29/0x80
[   45.758295]  ? __mutex_lock+0x13a/0xf30
[   45.758601]  ? write_comp_data+0x2f/0x90
[   45.758909]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   45.759276]  iopt_area_unfill_domain+0x32/0x40
[   45.759636]  iopt_table_remove_domain+0x23f/0x4c0
[   45.759996]  iommufd_device_selftest_detach+0x3a/0x90
[   45.760389]  iommufd_selftest_destroy+0x55/0x70
[   45.760755]  iommufd_object_destroy_user+0xce/0x130
[   45.761128]  iommufd_destroy+0xa2/0xc0
[   45.761414]  iommufd_fops_ioctl+0x1ef/0x310
[   45.761737]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   45.762093]  ? write_comp_data+0x2f/0x90
[   45.762404]  __x64_sys_ioctl+0x10e/0x160
[   45.762724]  ? iommufd_get_object.part.6+0x1c0/0x1c0
[   45.763101]  do_syscall_64+0x3b/0x90
[   45.763381]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   45.763766] RIP: 0033:0x7f3777c1e59d
[   45.764042] Code: 00 c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d d3 08 0d 00 f7 d8 64 89 01 48
[   45.765391] RSP: 002b:00007ffd0d727918 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   45.765945] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f3777c1e59d
[   45.766471] RDX: 0000000020000140 RSI: 0000000000003b80 RDI: 0000000000000003
[   45.766996] RBP: 00007ffd0d727930 R08: 00007ffd0d727930 R09: 00007ffd0d727930
[   45.767523] R10: 00007ffd0d727930 R11: 0000000000000213 R12: 0000000000401180
[   45.768040] R13: 00007ffd0d727a50 R14: 0000000000000000 R15: 0000000000000000
[   45.768576]  </TASK>
[   45.768765] irq event stamp: 0
[   45.769008] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   45.769476] hardirqs last disabled at (0): [<ffffffff810fff0c>] copy_process+0x11cc/0x2b10
[   45.770120] softirqs last  enabled at (0): [<ffffffff810fff10>] copy_process+0x11d0/0x2b10
[   45.770738] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   45.771192] ---[ end trace 0000000000000000 ]---
[   45.774365] ------------[ cut here ]------------
[   45.774861] WARNING: CPU: 0 PID: 869 at drivers/iommu/iommufd/pages.c:178 batch_unpin.isra.23+0x151/0x1a0
[   45.775567] Modules linked in:
[   45.775807] CPU: 0 PID: 869 Comm: repro Tainted: G    B   W          6.1.0-a0a6c76cf2a5+ #1
[   45.776580] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   45.777672] RIP: 0010:batch_unpin.isra.23+0x151/0x1a0
[   45.778065] Code: e8 c4 be 2b ff 48 8b 45 d0 48 85 c0 75 17 e8 26 bd 2b ff 48 8b 7d c8 48 89 de e8 fa bd 2b ff 48 39 5d c8 73 07 e8 0f bd 2b ff <0f> 0b e8 08 bd 2b ff 4d 29 e5 31 ff 41 83 c6 01 4c 89 ee 31 db e8
[   45.779537] RSP: 0018:ffffc900017c39d8 EFLAGS: 00010246
[   45.779963] RAX: 0000000000000000 RBX: fffffffffffffffe RCX: ffffffff81fdeda6
[   45.780616] RDX: 0000000000000000 RSI: ffff8880135da980 RDI: 0000000000000002
[   45.781149] RBP: ffffc900017c3a20 R08: 0000000000000000 R09: ffff88807dc3b890
[   45.781668] R10: 0000000000000c4f R11: 0000000000000000 R12: 0000000000000001
[   45.782174] R13: 0000000000000001 R14: 0000000000000000 R15: ffff888009f84200
[   45.782714] FS:  0000000000000000(0000) GS:ffff88807dc00000(0000) knlGS:0000000000000000
[   45.783436] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   45.783884] CR2: 00007f3777cf0500 CR3: 0000000003c12001 CR4: 0000000000770ef0
[   45.784478] PKRU: 55555554
[   45.784699] Call Trace:
[   45.784896]  <TASK>
[   45.785069]  iopt_pages_unfill_xarray+0x39f/0x5c0
[   45.785425]  ? rcu_read_lock_sched_held+0x29/0x80
[   45.785799]  ? rcu_read_lock_held_common+0x12/0x50
[   45.786328]  ? write_comp_data+0x2f/0x90
[   45.786648]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   45.787008]  ? write_comp_data+0x2f/0x90
[   45.787326]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   45.787780]  ? interval_tree_remove+0x291/0x4e0
[   45.788138]  ? write_comp_data+0x2f/0x90
[   45.788463]  iopt_area_remove_access+0x108/0x120
[   45.788985]  iommufd_access_unpin_pages+0x177/0x210
[   45.789374]  iommufd_test_access_unmap+0xe0/0x130
[   45.789748]  ? iommufd_test_access_unmap+0x130/0x130
[   45.790133]  iommufd_test_staccess_release+0x39/0x60
[   45.790546]  __fput+0x11f/0x450
[   45.790798]  ____fput+0x1e/0x30
[   45.791166]  task_work_run+0xb6/0x120
[   45.791463]  do_exit+0x521/0x1340
[   45.791724]  ? lock_release+0x202/0x2c0
[   45.792022]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   45.792559]  ? trace_hardirqs_on+0x3f/0x100
[   45.792916]  do_group_exit+0x5e/0xf0
[   45.793198]  __x64_sys_exit_group+0x25/0x30
[   45.793524]  do_syscall_64+0x3b/0x90
[   45.793809]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   45.794193] RIP: 0033:0x7f3777be6cf6
[   45.794501] Code: Unable to access opcode bytes at 0x7f3777be6ccc.
[   45.795058] RSP: 002b:00007ffd0d7278d8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
[   45.795622] RAX: ffffffffffffffda RBX: 00007f3777cf1490 RCX: 00007f3777be6cf6
[   45.796350] RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
[   45.796886] RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffff80
[   45.797412] R10: 0000000000000004 R11: 0000000000000246 R12: 00007f3777cf1490
[   45.797941] R13: 0000000000000001 R14: 00007f3777cf4e88 R15: 0000000000000000
[   45.798648]  </TASK>
[   45.798824] irq event stamp: 0
[   45.799054] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   45.799639] hardirqs last disabled at (0): [<ffffffff810fff0c>] copy_process+0x11cc/0x2b10
[   45.800254] softirqs last  enabled at (0): [<ffffffff810fff10>] copy_process+0x11d0/0x2b10
[   45.801004] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   45.801475] ---[ end trace 0000000000000000 ]---
[   45.801922] ------------[ cut here ]------------
[   45.802272] WARNING: CPU: 0 PID: 869 at drivers/iommu/iommufd/pages.c:886 update_unpinned+0x75/0x80
[   45.803052] Modules linked in:
[   45.803291] CPU: 0 PID: 869 Comm: repro Tainted: G    B   W          6.1.0-a0a6c76cf2a5+ #1
[   45.804053] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   45.804875] RIP: 0010:update_unpinned+0x75/0x80
[   45.805225] Code: ac 2b ff 48 89 de 31 c9 31 d2 4c 29 e6 4c 89 ef e8 70 fb ff ff e8 bb ac 2b ff 5b 41 5c 41 5d 5d c3 cc cc cc cc e8 ab ac 2b ff <0f> 0b eb e7 0f 1f 80 00 00 00 00 0f 1f 44 00 00 55 48 89 e5 41 57
[   45.806729] RSP: 0018:ffffc900017c3a08 EFLAGS: 00010246
[   45.807231] RAX: 0000000000000000 RBX: 0000000000000800 RCX: ffffffff81fdfdcf
[   45.807769] RDX: 0000000000000000 RSI: ffff8880135da980 RDI: 0000000000000002
[   45.808407] RBP: ffffc900017c3a20 R08: 0000000000000000 R09: ffff88807dc3b890
[   45.808934] R10: 0000000000000c4f R11: 0000000000000000 R12: fffffffffffffffe
[   45.809469] R13: ffff888009f84200 R14: 0000000000000002 R15: 0000000000000002
[   45.810008] FS:  0000000000000000(0000) GS:ffff88807dc00000(0000) knlGS:0000000000000000
[   45.810713] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   45.811171] CR2: 00007f3777cf0500 CR3: 0000000003c12001 CR4: 0000000000770ef0
[   45.811796] PKRU: 55555554
[   45.812005] Call Trace:
[   45.812203]  <TASK>
[   45.812405]  iopt_pages_unfill_xarray+0x522/0x5c0
[   45.812918]  ? rcu_read_lock_sched_held+0x29/0x80
[   45.813317]  ? rcu_read_lock_held_common+0x12/0x50
[   45.813682]  ? write_comp_data+0x2f/0x90
[   45.813996]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   45.814367]  ? write_comp_data+0x2f/0x90
[   45.814675]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   45.815133]  ? interval_tree_remove+0x291/0x4e0
[   45.815497]  ? write_comp_data+0x2f/0x90
[   45.815806]  iopt_area_remove_access+0x108/0x120
[   45.816321]  iommufd_access_unpin_pages+0x177/0x210
[   45.816726]  iommufd_test_access_unmap+0xe0/0x130
[   45.817090]  ? iommufd_test_access_unmap+0x130/0x130
[   45.817471]  iommufd_test_staccess_release+0x39/0x60
[   45.817853]  __fput+0x11f/0x450
[   45.818110]  ____fput+0x1e/0x30
[   45.818418]  task_work_run+0xb6/0x120
[   45.818798]  do_exit+0x521/0x1340
[   45.819063]  ? lock_release+0x202/0x2c0
[   45.819364]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   45.819848]  ? trace_hardirqs_on+0x3f/0x100
[   45.820186]  do_group_exit+0x5e/0xf0
[   45.820467]  __x64_sys_exit_group+0x25/0x30
[   45.820861]  do_syscall_64+0x3b/0x90
[   45.821186]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   45.821566] RIP: 0033:0x7f3777be6cf6
[   45.821850] Code: Unable to access opcode bytes at 0x7f3777be6ccc.
[   45.822332] RSP: 002b:00007ffd0d7278d8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
[   45.822899] RAX: ffffffffffffffda RBX: 00007f3777cf1490 RCX: 00007f3777be6cf6
[   45.823582] RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
[   45.824106] RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffff80
[   45.824719] R10: 0000000000000004 R11: 0000000000000246 R12: 00007f3777cf1490
[   45.825312] R13: 0000000000000001 R14: 00007f3777cf4e88 R15: 0000000000000000
[   45.825896]  </TASK>
[   45.826171] irq event stamp: 0
[   45.826416] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   45.826891] hardirqs last disabled at (0): [<ffffffff810fff0c>] copy_process+0x11cc/0x2b10
[   45.827655] softirqs last  enabled at (0): [<ffffffff810fff10>] copy_process+0x11d0/0x2b10
[   45.828324] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   45.828912] ---[ end trace 0000000000000000 ]---
[   45.829755] ------------[ cut here ]------------
[   45.830379] WARNING: CPU: 1 PID: 869 at drivers/iommu/iommufd/pages.c:1181 iopt_release_pages+0x159/0x190
[   45.831757] Modules linked in:
[   45.832244] CPU: 1 PID: 869 Comm: repro Tainted: G    B   W          6.1.0-a0a6c76cf2a5+ #1
[   45.833343] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   45.834856] RIP: 0010:iopt_release_pages+0x159/0x190
[   45.835565] Code: b5 11 ff eb cb e8 87 90 2b ff be 03 00 00 00 4c 89 f7 e8 6a 8b ce ff eb b7 e8 73 90 2b ff 0f 0b e9 ed fe ff ff e8 67 90 2b ff <0f> 0b e9 00 ff ff ff e8 5b 90 2b ff 0f 0b e9 07 ff ff ff e8 4f 90
[   45.838062] RSP: 0018:ffffc900017c3c88 EFLAGS: 00010246
[   45.838753] RAX: 0000000000000000 RBX: ffff888009f84200 RCX: ffffffff81fe1957
[   45.839680] RDX: 0000000000000000 RSI: ffff8880135da980 RDI: 0000000000000002
[   45.840596] RBP: ffffc900017c3ca8 R08: ffff88800950d9c0 R09: 000000008015000a
[   45.841595] R10: 0000000000000001 R11: 0000000000000000 R12: fffffffffffffffe
[   45.842457] R13: 0000000001000000 R14: 00000000017fffff R15: 0000000000000000
[   45.843381] FS:  0000000000000000(0000) GS:ffff88807dd00000(0000) knlGS:0000000000000000
[   45.844474] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   45.845236] CR2: 00007fa231ac0058 CR3: 0000000013558002 CR4: 0000000000770ee0
[   45.846130] PKRU: 55555554
[   45.846487] Call Trace:
[   45.846924]  <TASK>
[   45.847205]  iopt_unmap_iova_range+0x1ef/0x2e0
[   45.847935]  iopt_unmap_all+0x2f/0x60
[   45.848400]  iommufd_ioas_destroy+0x2c/0x70
[   45.849048]  iommufd_fops_release+0xd4/0x170
[   45.849586]  ? iommufd_ctx_get+0x30/0x30
[   45.850096]  __fput+0x11f/0x450
[   45.850631]  ____fput+0x1e/0x30
[   45.851036]  task_work_run+0xb6/0x120
[   45.851604]  do_exit+0x521/0x1340
[   45.852097]  ? lock_release+0x202/0x2c0
[   45.852608]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   45.853341]  ? trace_hardirqs_on+0x3f/0x100
[   45.853850]  do_group_exit+0x5e/0xf0
[   45.854360]  __x64_sys_exit_group+0x25/0x30
[   45.854889]  do_syscall_64+0x3b/0x90
[   45.855328]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   45.856025] RIP: 0033:0x7f3777be6cf6
[   45.856601] Code: Unable to access opcode bytes at 0x7f3777be6ccc.
[   45.857353] RSP: 002b:00007ffd0d7278d8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
[   45.858177] RAX: ffffffffffffffda RBX: 00007f3777cf1490 RCX: 00007f3777be6cf6
[   45.859076] RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
[   45.859914] RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffff80
[   45.860820] R10: 0000000000000004 R11: 0000000000000246 R12: 00007f3777cf1490
[   45.861785] R13: 0000000000000001 R14: 00007f3777cf4e88 R15: 0000000000000000
[   45.862627]  </TASK>
[   45.862954] irq event stamp: 0
[   45.863335] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   45.864219] hardirqs last disabled at (0): [<ffffffff810fff0c>] copy_process+0x11cc/0x2b10
[   45.865251] softirqs last  enabled at (0): [<ffffffff810fff10>] copy_process+0x11d0/0x2b10
[   45.866325] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   45.867080] ---[ end trace 0000000000000000 ]---
[   46.151790] ------------[ cut here ]------------
[   46.152164] WARNING: CPU: 1 PID: 880 at drivers/iommu/iommufd/pages.c:294 __iopt_area_unfill_domain+0x152/0x560
[   46.152940] Modules linked in:
[   46.153178] CPU: 1 PID: 880 Comm: repro Tainted: G    B   W          6.1.0-a0a6c76cf2a5+ #1
[   46.153811] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   46.154845] RIP: 0010:__iopt_area_unfill_domain+0x152/0x560
[   46.155265] Code: a1 2b ff 44 8b 64 24 54 48 8b 44 24 48 31 ff 44 89 e6 48 89 44 24 38 e8 6c a2 2b ff 45 85 e4 0f 85 eb 01 00 00 e8 ee a0 2b ff <0f> 0b e8 e7 a0 2b ff 48 8b 44 24 38 89 5c 24 58 89 18 8b 44 24 54
[   46.156783] RSP: 0018:ffffc9000180bae0 EFLAGS: 00010246
[   46.157193] RAX: 0000000000000000 RBX: 00000000ffffffff RCX: ffffffff81fe0bd5
[   46.157700] RDX: 0000000000000000 RSI: ffff88800e67d300 RDI: 0000000000000002
[   46.158337] RBP: ffffc9000180bd10 R08: 000000000003b5c5 R09: 000000000000000a
[   46.158936] R10: 000000000003b5a0 R11: 0000000000000024 R12: 0000000000000001
[   46.159480] R13: 0000000000000801 R14: 00000000000007ff R15: 0000000000000800
[   46.160000] FS:  00007f3777af9740(0000) GS:ffff88807dd00000(0000) knlGS:0000000000000000
[   46.160611] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   46.161058] CR2: 00007f3777c1e580 CR3: 0000000009f86006 CR4: 0000000000770ee0
[   46.161605] PKRU: 55555554
[   46.161814] Call Trace:
[   46.162003]  <TASK>
[   46.162183]  ? rcu_read_lock_sched_held+0x29/0x80
[   46.162592]  ? lock_acquire+0x1a1/0x2f0
[   46.162887]  ? rcu_read_lock_held_common+0x12/0x50
[   46.163246]  ? rcu_read_lock_sched_held+0x29/0x80
[   46.163632]  ? __mutex_lock+0x13a/0xf30
[   46.163932]  ? write_comp_data+0x2f/0x90
[   46.164235]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   46.164621]  iopt_area_unfill_domain+0x32/0x40
[   46.164983]  iopt_table_remove_domain+0x23f/0x4c0
[   46.165344]  iommufd_device_selftest_detach+0x3a/0x90
[   46.165768]  iommufd_selftest_destroy+0x55/0x70
[   46.166118]  iommufd_object_destroy_user+0xce/0x130
[   46.166499]  iommufd_destroy+0xa2/0xc0
[   46.166815]  iommufd_fops_ioctl+0x1ef/0x310
[   46.167138]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   46.167495]  ? write_comp_data+0x2f/0x90
[   46.167795]  __x64_sys_ioctl+0x10e/0x160
[   46.168133]  ? iommufd_get_object.part.6+0x1c0/0x1c0
[   46.168510]  do_syscall_64+0x3b/0x90
[   46.168805]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   46.169201] RIP: 0033:0x7f3777c1e59d
[   46.169475] Code: 00 c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d d3 08 0d 00 f7 d8 64 89 01 48
[   46.170827] RSP: 002b:00007ffd0d727918 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   46.171396] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f3777c1e59d
[   46.171915] RDX: 0000000020000140 RSI: 0000000000003b80 RDI: 0000000000000003
[   46.172470] RBP: 00007ffd0d727930 R08: 00007ffd0d727930 R09: 00007ffd0d727930
[   46.173006] R10: 00007ffd0d727930 R11: 0000000000000213 R12: 0000000000401180
[   46.173552] R13: 00007ffd0d727a50 R14: 0000000000000000 R15: 0000000000000000
[   46.174075]  </TASK>
[   46.174249] irq event stamp: 0
[   46.174520] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   46.174977] hardirqs last disabled at (0): [<ffffffff810fff0c>] copy_process+0x11cc/0x2b10
[   46.175618] softirqs last  enabled at (0): [<ffffffff810fff10>] copy_process+0x11d0/0x2b10
[   46.176228] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   46.176735] ---[ end trace 0000000000000000 ]---
[   46.177185] ------------[ cut here ]------------
[   46.177522] WARNING: CPU: 1 PID: 880 at drivers/iommu/iommufd/pages.c:1290 __iopt_area_unfill_domain+0x54f/0x560
[   46.178285] Modules linked in:
[   46.178531] CPU: 1 PID: 880 Comm: repro Tainted: G    B   W          6.1.0-a0a6c76cf2a5+ #1
[   46.179147] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   46.179982] RIP: 0010:__iopt_area_unfill_domain+0x54f/0x560
[   46.180405] Code: e8 86 9e 2b ff 85 db 0f 85 35 fb ff ff e8 09 9d 2b ff 0f 0b e9 29 fb ff ff e8 fd 9c 2b ff 0f 0b e9 69 fe ff ff e8 f1 9c 2b ff <0f> 0b e9 58 ff ff ff e8 65 2d dc 00 0f 1f 44 00 00 0f 1f 44 00 00
[   46.181764] RSP: 0018:ffffc9000180bae0 EFLAGS: 00010246
[   46.182184] RAX: 0000000000000000 RBX: 00000000ffffffff RCX: ffffffff81fe0d26
[   46.182711] RDX: 0000000000000000 RSI: ffff88800e67d300 RDI: 0000000000000002
[   46.183254] RBP: ffffc9000180bd10 R08: 000000000003b5c5 R09: 000000000000000a
[   46.183769] R10: 000000000003b5a0 R11: 0000000000000024 R12: 00000000000007ff
[   46.184313] R13: 0000000000000801 R14: 00000000000007ff R15: 0000000000000800
[   46.184843] FS:  00007f3777af9740(0000) GS:ffff88807dd00000(0000) knlGS:0000000000000000
[   46.185464] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   46.185886] CR2: 00007f3777c1e580 CR3: 0000000009f86006 CR4: 0000000000770ee0
[   46.186440] PKRU: 55555554
[   46.186653] Call Trace:
[   46.186836]  <TASK>
[   46.187013]  ? rcu_read_lock_sched_held+0x29/0x80
[   46.187366]  ? lock_acquire+0x1a1/0x2f0
[   46.187688]  ? rcu_read_lock_held_common+0x12/0x50
[   46.188083]  ? rcu_read_lock_sched_held+0x29/0x80
[   46.188441]  ? __mutex_lock+0x13a/0xf30
[   46.188805]  ? write_comp_data+0x2f/0x90
[   46.189274]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   46.189860]  iopt_area_unfill_domain+0x32/0x40
[   46.190293]  iopt_table_remove_domain+0x23f/0x4c0
[   46.190666]  iommufd_device_selftest_detach+0x3a/0x90
[   46.191053]  iommufd_selftest_destroy+0x55/0x70
[   46.191402]  iommufd_object_destroy_user+0xce/0x130
[   46.191765]  iommufd_destroy+0xa2/0xc0
[   46.192054]  iommufd_fops_ioctl+0x1ef/0x310
[   46.192386]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   46.192770]  ? write_comp_data+0x2f/0x90
[   46.193242]  __x64_sys_ioctl+0x10e/0x160
[   46.193697]  ? iommufd_get_object.part.6+0x1c0/0x1c0
[   46.194080]  do_syscall_64+0x3b/0x90
[   46.194375]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   46.194770] RIP: 0033:0x7f3777c1e59d
[   46.195042] Code: 00 c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d d3 08 0d 00 f7 d8 64 89 01 48
[   46.196353] RSP: 002b:00007ffd0d727918 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   46.196957] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f3777c1e59d
[   46.197733] RDX: 0000000020000140 RSI: 0000000000003b80 RDI: 0000000000000003
[   46.198243] RBP: 00007ffd0d727930 R08: 00007ffd0d727930 R09: 00007ffd0d727930
[   46.198839] R10: 00007ffd0d727930 R11: 0000000000000213 R12: 0000000000401180
[   46.199593] R13: 00007ffd0d727a50 R14: 0000000000000000 R15: 0000000000000000
[   46.200128]  </TASK>
[   46.200298] irq event stamp: 0
[   46.200523] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   46.201010] hardirqs last disabled at (0): [<ffffffff810fff0c>] copy_process+0x11cc/0x2b10
[   46.201910] softirqs last  enabled at (0): [<ffffffff810fff10>] copy_process+0x11d0/0x2b10
[   46.202538] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   46.202992] ---[ end trace 0000000000000000 ]---
[   46.205976] ------------[ cut here ]------------
[   46.206342] WARNING: CPU: 1 PID: 880 at drivers/iommu/iommufd/pages.c:178 batch_unpin.isra.23+0x151/0x1a0
[   46.207057] Modules linked in:
[   46.207292] CPU: 1 PID: 880 Comm: repro Tainted: G    B   W          6.1.0-a0a6c76cf2a5+ #1
[   46.207899] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   46.208742] RIP: 0010:batch_unpin.isra.23+0x151/0x1a0
[   46.209326] Code: e8 c4 be 2b ff 48 8b 45 d0 48 85 c0 75 17 e8 26 bd 2b ff 48 8b 7d c8 48 89 de e8 fa bd 2b ff 48 39 5d c8 73 07 e8 0f bd 2b ff <0f> 0b e8 08 bd 2b ff 4d 29 e5 31 ff 41 83 c6 01 4c 89 ee 31 db e8
[   46.210641] RSP: 0018:ffffc9000180b9d8 EFLAGS: 00010246
[   46.211034] RAX: 0000000000000000 RBX: ffffffffffffffff RCX: ffffffff81fded8c
[   46.211555] RDX: 0000000000000000 RSI: ffff88800e67d300 RDI: 0000000000000002
[   46.212069] RBP: ffffc9000180ba20 R08: 0000000000000000 R09: ffff88807dd3b890
[   46.212581] R10: 0000000000000de4 R11: 0000000000000000 R12: 0000000000000001
[   46.213140] R13: 0000000000000001 R14: 0000000000000000 R15: ffff888005ec8c00
[   46.213912] FS:  0000000000000000(0000) GS:ffff88807dd00000(0000) knlGS:0000000000000000
[   46.214518] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   46.214937] CR2: 00007f3777cf0500 CR3: 0000000003c12002 CR4: 0000000000770ee0
[   46.215459] PKRU: 55555554
[   46.215668] Call Trace:
[   46.215856]  <TASK>
[   46.216026]  iopt_pages_unfill_xarray+0x39f/0x5c0
[   46.216393]  ? rcu_read_lock_sched_held+0x29/0x80
[   46.216809]  ? rcu_read_lock_held_common+0x12/0x50
[   46.217365]  ? write_comp_data+0x2f/0x90
[   46.217797]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   46.218154]  ? write_comp_data+0x2f/0x90
[   46.218470]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   46.218843]  ? interval_tree_remove+0x291/0x4e0
[   46.219195]  ? write_comp_data+0x2f/0x90
[   46.219511]  iopt_area_remove_access+0x108/0x120
[   46.219866]  iommufd_access_unpin_pages+0x177/0x210
[   46.220246]  iommufd_test_access_unmap+0xe0/0x130
[   46.220617]  ? iommufd_test_access_unmap+0x130/0x130
[   46.221019]  iommufd_test_staccess_release+0x39/0x60
[   46.221609]  __fput+0x11f/0x450
[   46.222014]  ____fput+0x1e/0x30
[   46.222273]  task_work_run+0xb6/0x120
[   46.222586]  do_exit+0x521/0x1340
[   46.222840]  ? lock_release+0x202/0x2c0
[   46.223137]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   46.223498]  ? trace_hardirqs_on+0x3f/0x100
[   46.223828]  do_group_exit+0x5e/0xf0
[   46.224105]  __x64_sys_exit_group+0x25/0x30
[   46.224427]  do_syscall_64+0x3b/0x90
[   46.224740]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   46.225322] RIP: 0033:0x7f3777be6cf6
[   46.225749] Code: Unable to access opcode bytes at 0x7f3777be6ccc.
[   46.226199] RSP: 002b:00007ffd0d7278d8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
[   46.226766] RAX: ffffffffffffffda RBX: 00007f3777cf1490 RCX: 00007f3777be6cf6
[   46.227286] RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
[   46.227788] RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffff80
[   46.228309] R10: 0000000000000004 R11: 0000000000000246 R12: 00007f3777cf1490
[   46.228847] R13: 0000000000000001 R14: 00007f3777cf4e88 R15: 0000000000000000
[   46.229622]  </TASK>
[   46.229791] irq event stamp: 0
[   46.230035] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   46.230497] hardirqs last disabled at (0): [<ffffffff810fff0c>] copy_process+0x11cc/0x2b10
[   46.231109] softirqs last  enabled at (0): [<ffffffff810fff10>] copy_process+0x11d0/0x2b10
[   46.231709] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   46.232168] ---[ end trace 0000000000000000 ]---
[   46.232596] ------------[ cut here ]------------
[   46.232979] WARNING: CPU: 1 PID: 880 at drivers/iommu/iommufd/pages.c:886 update_unpinned+0x75/0x80
[   46.233954] Modules linked in:
[   46.234189] CPU: 1 PID: 880 Comm: repro Tainted: G    B   W          6.1.0-a0a6c76cf2a5+ #1
[   46.234812] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   46.235636] RIP: 0010:update_unpinned+0x75/0x80
[   46.235982] Code: ac 2b ff 48 89 de 31 c9 31 d2 4c 29 e6 4c 89 ef e8 70 fb ff ff e8 bb ac 2b ff 5b 41 5c 41 5d 5d c3 cc cc cc cc e8 ab ac 2b ff <0f> 0b eb e7 0f 1f 80 00 00 00 00 0f 1f 44 00 00 55 48 89 e5 41 57
[   46.237311] RSP: 0018:ffffc9000180ba08 EFLAGS: 00010246
[   46.237902] RAX: 0000000000000000 RBX: 0000000000000000 RCX: ffffffff81fdfdcf
[   46.238411] RDX: 0000000000000000 RSI: ffff88800e67d300 RDI: 0000000000000002
[   46.238944] RBP: ffffc9000180ba20 R08: 0000000000000000 R09: ffff88807dd3b890
[   46.239461] R10: 0000000000000de4 R11: 0000000000000000 R12: ffffffffffffffff
[   46.239992] R13: ffff888005ec8c00 R14: 0000000000000002 R15: 0000000000000002
[   46.240512] FS:  0000000000000000(0000) GS:ffff88807dd00000(0000) knlGS:0000000000000000
[   46.241118] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   46.241784] CR2: 00007f3777cf0500 CR3: 0000000003c12002 CR4: 0000000000770ee0
[   46.242302] PKRU: 55555554
[   46.242513] Call Trace:
[   46.242697]  <TASK>
[   46.242877]  iopt_pages_unfill_xarray+0x522/0x5c0
[   46.243232]  ? rcu_read_lock_sched_held+0x29/0x80
[   46.243596]  ? rcu_read_lock_held_common+0x12/0x50
[   46.243971]  ? write_comp_data+0x2f/0x90
[   46.244271]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   46.244624]  ? write_comp_data+0x2f/0x90
[   46.244953]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   46.245523]  ? interval_tree_remove+0x291/0x4e0
[   46.246077]  ? write_comp_data+0x2f/0x90
[   46.246379]  iopt_area_remove_access+0x108/0x120
[   46.246745]  iommufd_access_unpin_pages+0x177/0x210
[   46.247137]  iommufd_test_access_unmap+0xe0/0x130
[   46.247498]  ? iommufd_test_access_unmap+0x130/0x130
[   46.247875]  iommufd_test_staccess_release+0x39/0x60
[   46.248261]  __fput+0x11f/0x450
[   46.248512]  ____fput+0x1e/0x30
[   46.248794]  task_work_run+0xb6/0x120
[   46.249253]  do_exit+0x521/0x1340
[   46.249662]  ? lock_release+0x202/0x2c0
[   46.250003]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   46.250367]  ? trace_hardirqs_on+0x3f/0x100
[   46.250701]  do_group_exit+0x5e/0xf0
[   46.250973]  __x64_sys_exit_group+0x25/0x30
[   46.251285]  do_syscall_64+0x3b/0x90
[   46.251577]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   46.251954] RIP: 0033:0x7f3777be6cf6
[   46.252223] Code: Unable to access opcode bytes at 0x7f3777be6ccc.
[   46.252700] RSP: 002b:00007ffd0d7278d8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
[   46.253573] RAX: ffffffffffffffda RBX: 00007f3777cf1490 RCX: 00007f3777be6cf6
[   46.254089] RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
[   46.254620] RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffff80
[   46.255131] R10: 0000000000000004 R11: 0000000000000246 R12: 00007f3777cf1490
[   46.255652] R13: 0000000000000001 R14: 00007f3777cf4e88 R15: 0000000000000000
[   46.256162]  </TASK>
[   46.256335] irq event stamp: 0
[   46.256560] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   46.257046] hardirqs last disabled at (0): [<ffffffff810fff0c>] copy_process+0x11cc/0x2b10
[   46.257964] softirqs last  enabled at (0): [<ffffffff810fff10>] copy_process+0x11d0/0x2b10
[   46.258580] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   46.259048] ---[ end trace 0000000000000000 ]---
[   46.259519] ------------[ cut here ]------------
[   46.259864] WARNING: CPU: 1 PID: 880 at drivers/iommu/iommufd/pages.c:1181 iopt_release_pages+0x159/0x190
[   46.260563] Modules linked in:
[   46.260834] CPU: 1 PID: 880 Comm: repro Tainted: G    B   W          6.1.0-a0a6c76cf2a5+ #1
[   46.261695] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   46.262527] RIP: 0010:iopt_release_pages+0x159/0x190
[   46.262897] Code: b5 11 ff eb cb e8 87 90 2b ff be 03 00 00 00 4c 89 f7 e8 6a 8b ce ff eb b7 e8 73 90 2b ff 0f 0b e9 ed fe ff ff e8 67 90 2b ff <0f> 0b e9 00 ff ff ff e8 5b 90 2b ff 0f 0b e9 07 ff ff ff e8 4f 90
[   46.264231] RSP: 0018:ffffc9000180bc88 EFLAGS: 00010246
[   46.264615] RAX: 0000000000000000 RBX: ffff888005ec8c00 RCX: ffffffff81fe1957
[   46.265240] RDX: 0000000000000000 RSI: ffff88800e67d300 RDI: 0000000000000002
[   46.265949] RBP: ffffc9000180bca8 R08: 0000000000000000 R09: 0000000000000000
[   46.266488] R10: ffffc9000180bc58 R11: 0000000000000000 R12: ffffffffffffffff
[   46.267002] R13: 0000000001000000 R14: 00000000017fffff R15: 0000000000000000
[   46.267531] FS:  0000000000000000(0000) GS:ffff88807dd00000(0000) knlGS:0000000000000000
[   46.268102] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   46.268527] CR2: 00007f3777cf0500 CR3: 0000000003c12002 CR4: 0000000000770ee0
[   46.269069] PKRU: 55555554
[   46.269396] Call Trace:
[   46.269676]  <TASK>
[   46.269924]  iopt_unmap_iova_range+0x1ef/0x2e0
[   46.270438]  iopt_unmap_all+0x2f/0x60
[   46.270856]  iommufd_ioas_destroy+0x2c/0x70
[   46.271306]  iommufd_fops_release+0xd4/0x170
[   46.271755]  ? iommufd_ctx_get+0x30/0x30
[   46.272173]  __fput+0x11f/0x450
[   46.272542]  ____fput+0x1e/0x30
[   46.272916]  task_work_run+0xb6/0x120
[   46.273348]  do_exit+0x521/0x1340
[   46.273732]  ? lock_release+0x202/0x2c0
[   46.274169]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   46.274696]  ? trace_hardirqs_on+0x3f/0x100
[   46.275155]  do_group_exit+0x5e/0xf0
[   46.275551]  __x64_sys_exit_group+0x25/0x30
[   46.276016]  do_syscall_64+0x3b/0x90
[   46.276421]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   46.276972] RIP: 0033:0x7f3777be6cf6
[   46.277393] Code: Unable to access opcode bytes at 0x7f3777be6ccc.
[   46.278136] RSP: 002b:00007ffd0d7278d8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
[   46.279026] RAX: ffffffffffffffda RBX: 00007f3777cf1490 RCX: 00007f3777be6cf6
[   46.279863] RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
[   46.280692] RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffff80
[   46.281507] R10: 0000000000000004 R11: 0000000000000246 R12: 00007f3777cf1490
[   46.282360] R13: 0000000000000001 R14: 00007f3777cf4e88 R15: 0000000000000000
[   46.283202]  </TASK>
[   46.283478] irq event stamp: 0
[   46.283857] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   46.284619] hardirqs last disabled at (0): [<ffffffff810fff0c>] copy_process+0x11cc/0x2b10
[   46.285631] softirqs last  enabled at (0): [<ffffffff810fff10>] copy_process+0x11d0/0x2b10
[   46.286609] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   46.287323] ---[ end trace 0000000000000000 ]---
[   46.467305] ------------[ cut here ]------------
[   46.467671] WARNING: CPU: 1 PID: 889 at drivers/iommu/iommufd/pages.c:294 __iopt_area_unfill_domain+0x152/0x560
[   46.468423] Modules linked in:
[   46.468732] CPU: 1 PID: 889 Comm: repro Tainted: G    B   W          6.1.0-a0a6c76cf2a5+ #1
[   46.469650] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   46.470489] RIP: 0010:__iopt_area_unfill_domain+0x152/0x560
[   46.470890] Code: a1 2b ff 44 8b 64 24 54 48 8b 44 24 48 31 ff 44 89 e6 48 89 44 24 38 e8 6c a2 2b ff 45 85 e4 0f 85 eb 01 00 00 e8 ee a0 2b ff <0f> 0b e8 e7 a0 2b ff 48 8b 44 24 38 89 5c 24 58 89 18 8b 44 24 54
[   46.472211] RSP: 0018:ffffc9000183bae0 EFLAGS: 00010246
[   46.472603] RAX: 0000000000000000 RBX: 00000000ffffffff RCX: ffffffff81fe0bd5
[   46.473144] RDX: 0000000000000000 RSI: ffff88800e67d300 RDI: 0000000000000002
[   46.473865] RBP: ffffc9000183bd10 R08: 000000000003b5c5 R09: 000000000000000f
[   46.474383] R10: 000000000003b5a0 R11: 0000000000000024 R12: 0000000000000001
[   46.474910] R13: 0000000000000801 R14: 00000000000007ff R15: 0000000000000800
[   46.475426] FS:  00007f3777af9740(0000) GS:ffff88807dd00000(0000) knlGS:0000000000000000
[   46.476016] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   46.476436] CR2: 00007f3777c1e580 CR3: 0000000017326005 CR4: 0000000000770ee0
[   46.476995] PKRU: 55555554
[   46.477327] Call Trace:
[   46.477612]  <TASK>
[   46.477841]  ? rcu_read_lock_sched_held+0x29/0x80
[   46.478212]  ? lock_acquire+0x1a1/0x2f0
[   46.478517]  ? rcu_read_lock_held_common+0x12/0x50
[   46.478886]  ? rcu_read_lock_sched_held+0x29/0x80
[   46.479248]  ? __mutex_lock+0x13a/0xf30
[   46.479550]  ? write_comp_data+0x2f/0x90
[   46.479851]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   46.480218]  iopt_area_unfill_domain+0x32/0x40
[   46.480555]  iopt_table_remove_domain+0x23f/0x4c0
[   46.480937]  iommufd_device_selftest_detach+0x3a/0x90
[   46.481582]  iommufd_selftest_destroy+0x55/0x70
[   46.482048]  iommufd_object_destroy_user+0xce/0x130
[   46.482415]  iommufd_destroy+0xa2/0xc0
[   46.482712]  iommufd_fops_ioctl+0x1ef/0x310
[   46.483046]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   46.483403]  ? write_comp_data+0x2f/0x90
[   46.483703]  __x64_sys_ioctl+0x10e/0x160
[   46.484016]  ? iommufd_get_object.part.6+0x1c0/0x1c0
[   46.484388]  do_syscall_64+0x3b/0x90
[   46.484691]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   46.485314] RIP: 0033:0x7f3777c1e59d
[   46.485687] Code: 00 c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d d3 08 0d 00 f7 d8 64 89 01 48
[   46.487013] RSP: 002b:00007ffd0d727918 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   46.487563] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f3777c1e59d
[   46.488083] RDX: 0000000020000140 RSI: 0000000000003b80 RDI: 0000000000000003
[   46.488603] RBP: 00007ffd0d727930 R08: 00007ffd0d727930 R09: 00007ffd0d727930
[   46.489156] R10: 00007ffd0d727930 R11: 0000000000000213 R12: 0000000000401180
[   46.489888] R13: 00007ffd0d727a50 R14: 0000000000000000 R15: 0000000000000000
[   46.490422]  </TASK>
[   46.490608] irq event stamp: 0
[   46.490837] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   46.491293] hardirqs last disabled at (0): [<ffffffff810fff0c>] copy_process+0x11cc/0x2b10
[   46.491899] softirqs last  enabled at (0): [<ffffffff810fff10>] copy_process+0x11d0/0x2b10
[   46.492510] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   46.492998] ---[ end trace 0000000000000000 ]---
[   46.493680] ------------[ cut here ]------------
[   46.494062] WARNING: CPU: 1 PID: 889 at drivers/iommu/iommufd/pages.c:1290 __iopt_area_unfill_domain+0x54f/0x560
[   46.494806] Modules linked in:
[   46.495052] CPU: 1 PID: 889 Comm: repro Tainted: G    B   W          6.1.0-a0a6c76cf2a5+ #1
[   46.495638] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   46.496446] RIP: 0010:__iopt_area_unfill_domain+0x54f/0x560
[   46.496889] Code: e8 86 9e 2b ff 85 db 0f 85 35 fb ff ff e8 09 9d 2b ff 0f 0b e9 29 fb ff ff e8 fd 9c 2b ff 0f 0b e9 69 fe ff ff e8 f1 9c 2b ff <0f> 0b e9 58 ff ff ff e8 65 2d dc 00 0f 1f 44 00 00 0f 1f 44 00 00
[   46.498416] RSP: 0018:ffffc9000183bae0 EFLAGS: 00010246
[   46.498825] RAX: 0000000000000000 RBX: 00000000ffffffff RCX: ffffffff81fe0d26
[   46.499340] RDX: 0000000000000000 RSI: ffff88800e67d300 RDI: 0000000000000002
[   46.499864] RBP: ffffc9000183bd10 R08: 000000000003b5c5 R09: 000000000000000f
[   46.500375] R10: 000000000003b5a0 R11: 0000000000000024 R12: 00000000000007ff
[   46.500918] R13: 0000000000000801 R14: 00000000000007ff R15: 0000000000000800
[   46.501630] FS:  00007f3777af9740(0000) GS:ffff88807dd00000(0000) knlGS:0000000000000000
[   46.502222] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   46.502648] CR2: 00007f3777c1e580 CR3: 0000000017326005 CR4: 0000000000770ee0
[   46.503175] PKRU: 55555554
[   46.503381] Call Trace:
[   46.503567]  <TASK>
[   46.503742]  ? rcu_read_lock_sched_held+0x29/0x80
[   46.504121]  ? lock_acquire+0x1a1/0x2f0
[   46.504416]  ? rcu_read_lock_held_common+0x12/0x50
[   46.504806]  ? rcu_read_lock_sched_held+0x29/0x80
[   46.505381]  ? __mutex_lock+0x13a/0xf30
[   46.505837]  ? write_comp_data+0x2f/0x90
[   46.506153]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   46.506519]  iopt_area_unfill_domain+0x32/0x40
[   46.506851]  iopt_table_remove_domain+0x23f/0x4c0
[   46.507226]  iommufd_device_selftest_detach+0x3a/0x90
[   46.507612]  iommufd_selftest_destroy+0x55/0x70
[   46.507960]  iommufd_object_destroy_user+0xce/0x130
[   46.508342]  iommufd_destroy+0xa2/0xc0
[   46.508632]  iommufd_fops_ioctl+0x1ef/0x310
[   46.508977]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   46.509539]  ? write_comp_data+0x2f/0x90
[   46.510013]  __x64_sys_ioctl+0x10e/0x160
[   46.510335]  ? iommufd_get_object.part.6+0x1c0/0x1c0
[   46.510719]  do_syscall_64+0x3b/0x90
[   46.510998]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   46.511394] RIP: 0033:0x7f3777c1e59d
[   46.511666] Code: 00 c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d d3 08 0d 00 f7 d8 64 89 01 48
[   46.513015] RSP: 002b:00007ffd0d727918 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   46.513801] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f3777c1e59d
[   46.514310] RDX: 0000000020000140 RSI: 0000000000003b80 RDI: 0000000000000003
[   46.514847] RBP: 00007ffd0d727930 R08: 00007ffd0d727930 R09: 00007ffd0d727930
[   46.515348] R10: 00007ffd0d727930 R11: 0000000000000213 R12: 0000000000401180
[   46.515880] R13: 00007ffd0d727a50 R14: 0000000000000000 R15: 0000000000000000
[   46.516401]  </TASK>
[   46.516568] irq event stamp: 0
[   46.516821] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   46.517532] hardirqs last disabled at (0): [<ffffffff810fff0c>] copy_process+0x11cc/0x2b10
[   46.518164] softirqs last  enabled at (0): [<ffffffff810fff10>] copy_process+0x11d0/0x2b10
[   46.518764] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   46.519230] ---[ end trace 0000000000000000 ]---
[   46.522930] ------------[ cut here ]------------
[   46.523588] WARNING: CPU: 1 PID: 889 at drivers/iommu/iommufd/pages.c:178 batch_unpin.isra.23+0x151/0x1a0
[   46.524753] Modules linked in:
[   46.525176] CPU: 1 PID: 889 Comm: repro Tainted: G    B   W          6.1.0-a0a6c76cf2a5+ #1
[   46.526150] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   46.527392] RIP: 0010:batch_unpin.isra.23+0x151/0x1a0
[   46.528013] Code: e8 c4 be 2b ff 48 8b 45 d0 48 85 c0 75 17 e8 26 bd 2b ff 48 8b 7d c8 48 89 de e8 fa bd 2b ff 48 39 5d c8 73 07 e8 0f bd 2b ff <0f> 0b e8 08 bd 2b ff 4d 29 e5 31 ff 41 83 c6 01 4c 89 ee 31 db e8
[   46.530120] RSP: 0018:ffffc9000183b9d8 EFLAGS: 00010246
[   46.530743] RAX: 0000000000000000 RBX: ffffffffffffffff RCX: ffffffff81fded8c
[   46.531558] RDX: 0000000000000000 RSI: ffff88800e67d300 RDI: 0000000000000002
[   46.532395] RBP: ffffc9000183ba20 R08: 0000000000000000 R09: ffff88807dd3b890
[   46.533184] R10: 0000000000000e5d R11: 0000000000000000 R12: 0000000000000001
[   46.534027] R13: 0000000000000001 R14: 0000000000000000 R15: ffff888005ec9c00
[   46.534820] FS:  0000000000000000(0000) GS:ffff88807dd00000(0000) knlGS:0000000000000000
[   46.535753] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   46.536413] CR2: 00007f3777cf0500 CR3: 0000000003c12006 CR4: 0000000000770ee0
[   46.537299] PKRU: 55555554
[   46.537632] Call Trace:
[   46.537938]  <TASK>
[   46.538222]  iopt_pages_unfill_xarray+0x39f/0x5c0
[   46.538823]  ? rcu_read_lock_sched_held+0x29/0x80
[   46.539391]  ? rcu_read_lock_held_common+0x12/0x50
[   46.539978]  ? write_comp_data+0x2f/0x90
[   46.540466]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   46.540865]  ? write_comp_data+0x2f/0x90
[   46.541324]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   46.541794]  ? interval_tree_remove+0x291/0x4e0
[   46.542148]  ? write_comp_data+0x2f/0x90
[   46.542446]  iopt_area_remove_access+0x108/0x120
[   46.542815]  iommufd_access_unpin_pages+0x177/0x210
[   46.543188]  iommufd_test_access_unmap+0xe0/0x130
[   46.543535]  ? iommufd_test_access_unmap+0x130/0x130
[   46.543918]  iommufd_test_staccess_release+0x39/0x60
[   46.544289]  __fput+0x11f/0x450
[   46.544544]  ____fput+0x1e/0x30
[   46.544824]  task_work_run+0xb6/0x120
[   46.545289]  do_exit+0x521/0x1340
[   46.545703]  ? lock_release+0x202/0x2c0
[   46.546070]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   46.546427]  ? trace_hardirqs_on+0x3f/0x100
[   46.546761]  do_group_exit+0x5e/0xf0
[   46.547048]  __x64_sys_exit_group+0x25/0x30
[   46.547366]  do_syscall_64+0x3b/0x90
[   46.547642]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   46.548036] RIP: 0033:0x7f3777be6cf6
[   46.548310] Code: Unable to access opcode bytes at 0x7f3777be6ccc.
[   46.548788] RSP: 002b:00007ffd0d7278d8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
[   46.549642] RAX: ffffffffffffffda RBX: 00007f3777cf1490 RCX: 00007f3777be6cf6
[   46.550154] RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
[   46.550683] RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffff80
[   46.551192] R10: 0000000000000004 R11: 0000000000000246 R12: 00007f3777cf1490
[   46.551704] R13: 0000000000000001 R14: 00007f3777cf4e88 R15: 0000000000000000
[   46.552230]  </TASK>
[   46.552401] irq event stamp: 0
[   46.552631] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   46.553130] hardirqs last disabled at (0): [<ffffffff810fff0c>] copy_process+0x11cc/0x2b10
[   46.554025] softirqs last  enabled at (0): [<ffffffff810fff10>] copy_process+0x11d0/0x2b10
[   46.554636] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   46.555102] ---[ end trace 0000000000000000 ]---
[   46.555540] ------------[ cut here ]------------
[   46.555876] WARNING: CPU: 1 PID: 889 at drivers/iommu/iommufd/pages.c:886 update_unpinned+0x75/0x80
[   46.556537] Modules linked in:
[   46.556798] CPU: 1 PID: 889 Comm: repro Tainted: G    B   W          6.1.0-a0a6c76cf2a5+ #1
[   46.557659] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   46.558487] RIP: 0010:update_unpinned+0x75/0x80
[   46.558839] Code: ac 2b ff 48 89 de 31 c9 31 d2 4c 29 e6 4c 89 ef e8 70 fb ff ff e8 bb ac 2b ff 5b 41 5c 41 5d 5d c3 cc cc cc cc e8 ab ac 2b ff <0f> 0b eb e7 0f 1f 80 00 00 00 00 0f 1f 44 00 00 55 48 89 e5 41 57
[   46.560153] RSP: 0018:ffffc9000183ba08 EFLAGS: 00010246
[   46.560543] RAX: 0000000000000000 RBX: 0000000000000000 RCX: ffffffff81fdfdcf
[   46.561075] RDX: 0000000000000000 RSI: ffff88800e67d300 RDI: 0000000000000002
[   46.561796] RBP: ffffc9000183ba20 R08: 0000000000000000 R09: ffff88807dd3b890
[   46.562307] R10: 0000000000000e5d R11: 0000000000000000 R12: ffffffffffffffff
[   46.562826] R13: ffff888005ec9c00 R14: 0000000000000002 R15: 0000000000000002
[   46.563327] FS:  0000000000000000(0000) GS:ffff88807dd00000(0000) knlGS:0000000000000000
[   46.563911] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   46.564324] CR2: 00007f3777cf0500 CR3: 0000000003c12006 CR4: 0000000000770ee0
[   46.564874] PKRU: 55555554
[   46.565206] Call Trace:
[   46.565502]  <TASK>
[   46.565745]  iopt_pages_unfill_xarray+0x522/0x5c0
[   46.566099]  ? rcu_read_lock_sched_held+0x29/0x80
[   46.566488]  ? rcu_read_lock_held_common+0x12/0x50
[   46.566867]  ? write_comp_data+0x2f/0x90
[   46.567164]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   46.567519]  ? write_comp_data+0x2f/0x90
[   46.567827]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   46.568184]  ? interval_tree_remove+0x291/0x4e0
[   46.568530]  ? write_comp_data+0x2f/0x90
[   46.568874]  iopt_area_remove_access+0x108/0x120
[   46.569425]  iommufd_access_unpin_pages+0x177/0x210
[   46.569963]  iommufd_test_access_unmap+0xe0/0x130
[   46.570317]  ? iommufd_test_access_unmap+0x130/0x130
[   46.570700]  iommufd_test_staccess_release+0x39/0x60
[   46.571088]  __fput+0x11f/0x450
[   46.571339]  ____fput+0x1e/0x30
[   46.571580]  task_work_run+0xb6/0x120
[   46.571862]  do_exit+0x521/0x1340
[   46.572125]  ? lock_release+0x202/0x2c0
[   46.572411]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   46.572789]  ? trace_hardirqs_on+0x3f/0x100
[   46.573307]  do_group_exit+0x5e/0xf0
[   46.573749]  __x64_sys_exit_group+0x25/0x30
[   46.574067]  do_syscall_64+0x3b/0x90
[   46.574350]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   46.574736] RIP: 0033:0x7f3777be6cf6
[   46.575006] Code: Unable to access opcode bytes at 0x7f3777be6ccc.
[   46.575450] RSP: 002b:00007ffd0d7278d8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
[   46.575989] RAX: ffffffffffffffda RBX: 00007f3777cf1490 RCX: 00007f3777be6cf6
[   46.576502] RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
[   46.577028] RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffff80
[   46.577831] R10: 0000000000000004 R11: 0000000000000246 R12: 00007f3777cf1490
[   46.578353] R13: 0000000000000001 R14: 00007f3777cf4e88 R15: 0000000000000000
[   46.578872]  </TASK>
[   46.579042] irq event stamp: 0
[   46.579273] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   46.579732] hardirqs last disabled at (0): [<ffffffff810fff0c>] copy_process+0x11cc/0x2b10
[   46.580434] softirqs last  enabled at (0): [<ffffffff810fff10>] copy_process+0x11d0/0x2b10
[   46.581082] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   46.581804] ---[ end trace 0000000000000000 ]---
[   46.582336] ------------[ cut here ]------------
[   46.582694] WARNING: CPU: 1 PID: 889 at drivers/iommu/iommufd/pages.c:1181 iopt_release_pages+0x159/0x190
[   46.583396] Modules linked in:
[   46.583628] CPU: 1 PID: 889 Comm: repro Tainted: G    B   W          6.1.0-a0a6c76cf2a5+ #1
[   46.584230] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   46.585076] RIP: 0010:iopt_release_pages+0x159/0x190
[   46.585646] Code: b5 11 ff eb cb e8 87 90 2b ff be 03 00 00 00 4c 89 f7 e8 6a 8b ce ff eb b7 e8 73 90 2b ff 0f 0b e9 ed fe ff ff e8 67 90 2b ff <0f> 0b e9 00 ff ff ff e8 5b 90 2b ff 0f 0b e9 07 ff ff ff e8 4f 90
[   46.586969] RSP: 0018:ffffc9000183bc88 EFLAGS: 00010246
[   46.587352] RAX: 0000000000000000 RBX: ffff888005ec9c00 RCX: ffffffff81fe1957
[   46.587860] RDX: 0000000000000000 RSI: ffff88800e67d300 RDI: 0000000000000002
[   46.588387] RBP: ffffc9000183bca8 R08: 0000000000000000 R09: 0000000000000000
[   46.588928] R10: ffffc9000183bc58 R11: 0000000000000000 R12: ffffffffffffffff
[   46.589659] R13: 0000000001000000 R14: 00000000017fffff R15: 0000000000000000
[   46.590179] FS:  0000000000000000(0000) GS:ffff88807dd00000(0000) knlGS:0000000000000000
[   46.590778] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   46.591218] CR2: 00007f3777cf0500 CR3: 0000000003c12006 CR4: 0000000000770ee0
[   46.591766] PKRU: 55555554
[   46.591987] Call Trace:
[   46.592183]  <TASK>
[   46.592360]  iopt_unmap_iova_range+0x1ef/0x2e0
[   46.592735]  iopt_unmap_all+0x2f/0x60
[   46.593183]  iommufd_ioas_destroy+0x2c/0x70
[   46.593661]  iommufd_fops_release+0xd4/0x170
[   46.593987]  ? iommufd_ctx_get+0x30/0x30
[   46.594281]  __fput+0x11f/0x450
[   46.594552]  ____fput+0x1e/0x30
[   46.594803]  task_work_run+0xb6/0x120
[   46.595092]  do_exit+0x521/0x1340
[   46.595384]  ? lock_release+0x202/0x2c0
[   46.595709]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   46.596077]  ? trace_hardirqs_on+0x3f/0x100
[   46.596394]  do_group_exit+0x5e/0xf0
[   46.596682]  __x64_sys_exit_group+0x25/0x30
[   46.597009]  do_syscall_64+0x3b/0x90
[   46.597286]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   46.597656] RIP: 0033:0x7f3777be6cf6
[   46.597924] Code: Unable to access opcode bytes at 0x7f3777be6ccc.
[   46.598372] RSP: 002b:00007ffd0d7278d8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
[   46.598910] RAX: ffffffffffffffda RBX: 00007f3777cf1490 RCX: 00007f3777be6cf6
[   46.599436] RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
[   46.599940] RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffff80
[   46.600440] R10: 0000000000000004 R11: 0000000000000246 R12: 00007f3777cf1490
[   46.600960] R13: 0000000000000001 R14: 00007f3777cf4e88 R15: 0000000000000000
[   46.601493]  </TASK>
[   46.601660] irq event stamp: 0
[   46.601937] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   46.602388] hardirqs last disabled at (0): [<ffffffff810fff0c>] copy_process+0x11cc/0x2b10
[   46.603015] softirqs last  enabled at (0): [<ffffffff810fff10>] copy_process+0x11d0/0x2b10
[   46.603596] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   46.604036] ---[ end trace 0000000000000000 ]---
[   46.630326] ------------[ cut here ]------------
[   46.630718] WARNING: CPU: 1 PID: 890 at drivers/iommu/iommufd/pages.c:294 __iopt_area_unfill_domain+0x152/0x560
[   46.631490] Modules linked in:
[   46.631720] CPU: 1 PID: 890 Comm: repro Tainted: G    B   W          6.1.0-a0a6c76cf2a5+ #1
[   46.632346] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   46.633187] RIP: 0010:__iopt_area_unfill_domain+0x152/0x560
[   46.633594] Code: a1 2b ff 44 8b 64 24 54 48 8b 44 24 48 31 ff 44 89 e6 48 89 44 24 38 e8 6c a2 2b ff 45 85 e4 0f 85 eb 01 00 00 e8 ee a0 2b ff <0f> 0b e8 e7 a0 2b ff 48 8b 44 24 38 89 5c 24 58 89 18 8b 44 24 54
[   46.634882] RSP: 0018:ffffc90001843ae0 EFLAGS: 00010246
[   46.635272] RAX: 0000000000000000 RBX: 00000000ffffffff RCX: ffffffff81fe0bd5
[   46.635782] RDX: 0000000000000000 RSI: ffff88800e678000 RDI: 0000000000000002
[   46.636282] RBP: ffffc90001843d10 R08: 000000000003b5c5 R09: 0000000000000006
[   46.636812] R10: 000000000003b5a0 R11: 0000000000000024 R12: 0000000000000001
[   46.637329] R13: 0000000000000801 R14: 00000000000007ff R15: 0000000000000800
[   46.637843] FS:  00007f3777af9740(0000) GS:ffff88807dd00000(0000) knlGS:0000000000000000
[   46.638419] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   46.638844] CR2: 00007f3777c1e580 CR3: 000000000d504001 CR4: 0000000000770ee0
[   46.639354] PKRU: 55555554
[   46.639560] Call Trace:
[   46.639746]  <TASK>
[   46.639917]  ? rcu_read_lock_sched_held+0x29/0x80
[   46.640265]  ? lock_acquire+0x1a1/0x2f0
[   46.640552]  ? rcu_read_lock_held_common+0x12/0x50
[   46.640919]  ? rcu_read_lock_sched_held+0x29/0x80
[   46.641263]  ? __mutex_lock+0x13a/0xf30
[   46.641551]  ? write_comp_data+0x2f/0x90
[   46.641844]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   46.642193]  iopt_area_unfill_domain+0x32/0x40
[   46.642533]  iopt_table_remove_domain+0x23f/0x4c0
[   46.642882]  iommufd_device_selftest_detach+0x3a/0x90
[   46.643274]  iommufd_selftest_destroy+0x55/0x70
[   46.643615]  iommufd_object_destroy_user+0xce/0x130
[   46.643986]  iommufd_destroy+0xa2/0xc0
[   46.644268]  iommufd_fops_ioctl+0x1ef/0x310
[   46.644575]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   46.644936]  ? write_comp_data+0x2f/0x90
[   46.645232]  __x64_sys_ioctl+0x10e/0x160
[   46.645532]  ? iommufd_get_object.part.6+0x1c0/0x1c0
[   46.645896]  do_syscall_64+0x3b/0x90
[   46.646163]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   46.646545] RIP: 0033:0x7f3777c1e59d
[   46.646817] Code: 00 c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d d3 08 0d 00 f7 d8 64 89 01 48
[   46.648119] RSP: 002b:00007ffd0d727918 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   46.648668] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f3777c1e59d
[   46.649168] RDX: 0000000020000140 RSI: 0000000000003b80 RDI: 0000000000000003
[   46.649671] RBP: 00007ffd0d727930 R08: 00007ffd0d727930 R09: 00007ffd0d727930
[   46.650174] R10: 00007ffd0d727930 R11: 0000000000000213 R12: 0000000000401180
[   46.650685] R13: 00007ffd0d727a50 R14: 0000000000000000 R15: 0000000000000000
[   46.651210]  </TASK>
[   46.651377] irq event stamp: 0
[   46.651606] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   46.652367] hardirqs last disabled at (0): [<ffffffff810fff0c>] copy_process+0x11cc/0x2b10
[   46.652992] softirqs last  enabled at (0): [<ffffffff810fff10>] copy_process+0x11d0/0x2b10
[   46.653588] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   46.654037] ---[ end trace 0000000000000000 ]---
[   46.654465] ------------[ cut here ]------------
[   46.654820] WARNING: CPU: 1 PID: 890 at drivers/iommu/iommufd/pages.c:1290 __iopt_area_unfill_domain+0x54f/0x560
[   46.655532] Modules linked in:
[   46.655762] CPU: 1 PID: 890 Comm: repro Tainted: G    B   W          6.1.0-a0a6c76cf2a5+ #1
[   46.656341] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   46.657152] RIP: 0010:__iopt_area_unfill_domain+0x54f/0x560
[   46.657555] Code: e8 86 9e 2b ff 85 db 0f 85 35 fb ff ff e8 09 9d 2b ff 0f 0b e9 29 fb ff ff e8 fd 9c 2b ff 0f 0b e9 69 fe ff ff e8 f1 9c 2b ff <0f> 0b e9 58 ff ff ff e8 65 2d dc 00 0f 1f 44 00 00 0f 1f 44 00 00
[   46.658836] RSP: 0018:ffffc90001843ae0 EFLAGS: 00010246
[   46.659217] RAX: 0000000000000000 RBX: 00000000ffffffff RCX: ffffffff81fe0d26
[   46.659724] RDX: 0000000000000000 RSI: ffff88800e678000 RDI: 0000000000000002
[   46.660236] RBP: ffffc90001843d10 R08: 000000000003b5c5 R09: 0000000000000006
[   46.660754] R10: 000000000003b5a0 R11: 0000000000000024 R12: 00000000000007ff
[   46.661254] R13: 0000000000000801 R14: 00000000000007ff R15: 0000000000000800
[   46.661755] FS:  00007f3777af9740(0000) GS:ffff88807dd00000(0000) knlGS:0000000000000000
[   46.662317] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   46.662742] CR2: 00007f3777c1e580 CR3: 000000000d504001 CR4: 0000000000770ee0
[   46.663261] PKRU: 55555554
[   46.663477] Call Trace:
[   46.663661]  <TASK>
[   46.663861]  ? rcu_read_lock_sched_held+0x29/0x80
[   46.664212]  ? lock_acquire+0x1a1/0x2f0
[   46.664500]  ? rcu_read_lock_held_common+0x12/0x50
[   46.664876]  ? rcu_read_lock_sched_held+0x29/0x80
[   46.665227]  ? __mutex_lock+0x13a/0xf30
[   46.665523]  ? write_comp_data+0x2f/0x90
[   46.665823]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   46.666177]  iopt_area_unfill_domain+0x32/0x40
[   46.666520]  iopt_table_remove_domain+0x23f/0x4c0
[   46.666875]  iommufd_device_selftest_detach+0x3a/0x90
[   46.667264]  iommufd_selftest_destroy+0x55/0x70
[   46.667615]  iommufd_object_destroy_user+0xce/0x130
[   46.667989]  iommufd_destroy+0xa2/0xc0
[   46.668277]  iommufd_fops_ioctl+0x1ef/0x310
[   46.668591]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   46.668954]  ? write_comp_data+0x2f/0x90
[   46.669282]  __x64_sys_ioctl+0x10e/0x160
[   46.669583]  ? iommufd_get_object.part.6+0x1c0/0x1c0
[   46.669940]  do_syscall_64+0x3b/0x90
[   46.670220]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   46.670602] RIP: 0033:0x7f3777c1e59d
[   46.670885] Code: 00 c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d d3 08 0d 00 f7 d8 64 89 01 48
[   46.672177] RSP: 002b:00007ffd0d727918 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   46.672718] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f3777c1e59d
[   46.673241] RDX: 0000000020000140 RSI: 0000000000003b80 RDI: 0000000000000003
[   46.673759] RBP: 00007ffd0d727930 R08: 00007ffd0d727930 R09: 00007ffd0d727930
[   46.674260] R10: 00007ffd0d727930 R11: 0000000000000213 R12: 0000000000401180
[   46.674813] R13: 00007ffd0d727a50 R14: 0000000000000000 R15: 0000000000000000
[   46.675317]  </TASK>
[   46.675483] irq event stamp: 0
[   46.675706] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   46.676149] hardirqs last disabled at (0): [<ffffffff810fff0c>] copy_process+0x11cc/0x2b10
[   46.676747] softirqs last  enabled at (0): [<ffffffff810fff10>] copy_process+0x11d0/0x2b10
[   46.677332] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   46.677771] ---[ end trace 0000000000000000 ]---
[   46.680583] ------------[ cut here ]------------
[   46.680974] WARNING: CPU: 1 PID: 890 at drivers/iommu/iommufd/pages.c:178 batch_unpin.isra.23+0x151/0x1a0
[   46.681717] Modules linked in:
[   46.681954] CPU: 1 PID: 890 Comm: repro Tainted: G    B   W          6.1.0-a0a6c76cf2a5+ #1
[   46.682615] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   46.683412] RIP: 0010:batch_unpin.isra.23+0x151/0x1a0
[   46.683784] Code: e8 c4 be 2b ff 48 8b 45 d0 48 85 c0 75 17 e8 26 bd 2b ff 48 8b 7d c8 48 89 de e8 fa bd 2b ff 48 39 5d c8 73 07 e8 0f bd 2b ff <0f> 0b e8 08 bd 2b ff 4d 29 e5 31 ff 41 83 c6 01 4c 89 ee 31 db e8
[   46.685094] RSP: 0018:ffffc900018439d8 EFLAGS: 00010246
[   46.685478] RAX: 0000000000000000 RBX: ffffffffffffffff RCX: ffffffff81fded8c
[   46.685990] RDX: 0000000000000000 RSI: ffff88800e678000 RDI: 0000000000000002
[   46.686496] RBP: ffffc90001843a20 R08: 0000000000000000 R09: ffff88807dd3b890
[   46.687000] R10: 0000000000000e6d R11: 0000000000000000 R12: 0000000000000001
[   46.687499] R13: 0000000000000001 R14: 0000000000000000 R15: ffff888005ec9400
[   46.687997] FS:  0000000000000000(0000) GS:ffff88807dd00000(0000) knlGS:0000000000000000
[   46.688562] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   46.688983] CR2: 00007f3777cf0500 CR3: 0000000003c12006 CR4: 0000000000770ee0
[   46.689486] PKRU: 55555554
[   46.689689] Call Trace:
[   46.689871]  <TASK>
[   46.690044]  iopt_pages_unfill_xarray+0x39f/0x5c0
[   46.690391]  ? rcu_read_lock_sched_held+0x29/0x80
[   46.690763]  ? rcu_read_lock_held_common+0x12/0x50
[   46.691121]  ? write_comp_data+0x2f/0x90
[   46.691416]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   46.691769]  ? write_comp_data+0x2f/0x90
[   46.692062]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   46.692440]  ? interval_tree_remove+0x291/0x4e0
[   46.692800]  ? write_comp_data+0x2f/0x90
[   46.693096]  iopt_area_remove_access+0x108/0x120
[   46.693442]  iommufd_access_unpin_pages+0x177/0x210
[   46.693823]  iommufd_test_access_unmap+0xe0/0x130
[   46.694176]  ? iommufd_test_access_unmap+0x130/0x130
[   46.694547]  iommufd_test_staccess_release+0x39/0x60
[   46.694919]  __fput+0x11f/0x450
[   46.695172]  ____fput+0x1e/0x30
[   46.695414]  task_work_run+0xb6/0x120
[   46.695700]  do_exit+0x521/0x1340
[   46.695948]  ? lock_release+0x202/0x2c0
[   46.696237]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   46.696594]  ? trace_hardirqs_on+0x3f/0x100
[   46.696937]  do_group_exit+0x5e/0xf0
[   46.697216]  __x64_sys_exit_group+0x25/0x30
[   46.697533]  do_syscall_64+0x3b/0x90
[   46.697808]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   46.698176] RIP: 0033:0x7f3777be6cf6
[   46.698453] Code: Unable to access opcode bytes at 0x7f3777be6ccc.
[   46.698905] RSP: 002b:00007ffd0d7278d8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
[   46.699445] RAX: ffffffffffffffda RBX: 00007f3777cf1490 RCX: 00007f3777be6cf6
[   46.699940] RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
[   46.700436] RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffff80
[   46.700949] R10: 0000000000000004 R11: 0000000000000246 R12: 00007f3777cf1490
[   46.701446] R13: 0000000000000001 R14: 00007f3777cf4e88 R15: 0000000000000000
[   46.701949]  </TASK>
[   46.702122] irq event stamp: 0
[   46.702345] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   46.702802] hardirqs last disabled at (0): [<ffffffff810fff0c>] copy_process+0x11cc/0x2b10
[   46.703400] softirqs last  enabled at (0): [<ffffffff810fff10>] copy_process+0x11d0/0x2b10
[   46.703988] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   46.704427] ---[ end trace 0000000000000000 ]---
[   46.704868] ------------[ cut here ]------------
[   46.705197] WARNING: CPU: 1 PID: 890 at drivers/iommu/iommufd/pages.c:886 update_unpinned+0x75/0x80
[   46.705836] Modules linked in:
[   46.706065] CPU: 1 PID: 890 Comm: repro Tainted: G    B   W          6.1.0-a0a6c76cf2a5+ #1
[   46.706663] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   46.707479] RIP: 0010:update_unpinned+0x75/0x80
[   46.707815] Code: ac 2b ff 48 89 de 31 c9 31 d2 4c 29 e6 4c 89 ef e8 70 fb ff ff e8 bb ac 2b ff 5b 41 5c 41 5d 5d c3 cc cc cc cc e8 ab ac 2b ff <0f> 0b eb e7 0f 1f 80 00 00 00 00 0f 1f 44 00 00 55 48 89 e5 41 57
[   46.709097] RSP: 0018:ffffc90001843a08 EFLAGS: 00010246
[   46.709477] RAX: 0000000000000000 RBX: 0000000000000000 RCX: ffffffff81fdfdcf
[   46.709983] RDX: 0000000000000000 RSI: ffff88800e678000 RDI: 0000000000000002
[   46.710510] RBP: ffffc90001843a20 R08: 0000000000000000 R09: ffff88807dd3b890
[   46.711017] R10: 0000000000000e6d R11: 0000000000000000 R12: ffffffffffffffff
[   46.711532] R13: ffff888005ec9400 R14: 0000000000000002 R15: 0000000000000002
[   46.712032] FS:  0000000000000000(0000) GS:ffff88807dd00000(0000) knlGS:0000000000000000
[   46.712594] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   46.713013] CR2: 00007f3777cf0500 CR3: 0000000003c12006 CR4: 0000000000770ee0
[   46.713515] PKRU: 55555554
[   46.713717] Call Trace:
[   46.713901]  <TASK>
[   46.714064]  iopt_pages_unfill_xarray+0x522/0x5c0
[   46.714414]  ? rcu_read_lock_sched_held+0x29/0x80
[   46.714779]  ? rcu_read_lock_held_common+0x12/0x50
[   46.715139]  ? write_comp_data+0x2f/0x90
[   46.715438]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   46.715787]  ? write_comp_data+0x2f/0x90
[   46.716085]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   46.716433]  ? interval_tree_remove+0x291/0x4e0
[   46.716784]  ? write_comp_data+0x2f/0x90
[   46.717085]  iopt_area_remove_access+0x108/0x120
[   46.717429]  iommufd_access_unpin_pages+0x177/0x210
[   46.717796]  iommufd_test_access_unmap+0xe0/0x130
[   46.718142]  ? iommufd_test_access_unmap+0x130/0x130
[   46.718516]  iommufd_test_staccess_release+0x39/0x60
[   46.718890]  __fput+0x11f/0x450
[   46.719137]  ____fput+0x1e/0x30
[   46.719385]  task_work_run+0xb6/0x120
[   46.719668]  do_exit+0x521/0x1340
[   46.719928]  ? lock_release+0x202/0x2c0
[   46.720223]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   46.720570]  ? trace_hardirqs_on+0x3f/0x100
[   46.720900]  do_group_exit+0x5e/0xf0
[   46.721176]  __x64_sys_exit_group+0x25/0x30
[   46.721482]  do_syscall_64+0x3b/0x90
[   46.721750]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   46.722116] RIP: 0033:0x7f3777be6cf6
[   46.722383] Code: Unable to access opcode bytes at 0x7f3777be6ccc.
[   46.722835] RSP: 002b:00007ffd0d7278d8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
[   46.723391] RAX: ffffffffffffffda RBX: 00007f3777cf1490 RCX: 00007f3777be6cf6
[   46.723897] RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
[   46.724399] RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffff80
[   46.724944] R10: 0000000000000004 R11: 0000000000000246 R12: 00007f3777cf1490
[   46.725462] R13: 0000000000000001 R14: 00007f3777cf4e88 R15: 0000000000000000
[   46.725969]  </TASK>
[   46.726143] irq event stamp: 0
[   46.726366] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   46.726824] hardirqs last disabled at (0): [<ffffffff810fff0c>] copy_process+0x11cc/0x2b10
[   46.727411] softirqs last  enabled at (0): [<ffffffff810fff10>] copy_process+0x11d0/0x2b10
[   46.727989] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   46.728431] ---[ end trace 0000000000000000 ]---
[   46.728905] ------------[ cut here ]------------
[   46.729244] WARNING: CPU: 1 PID: 890 at drivers/iommu/iommufd/pages.c:1181 iopt_release_pages+0x159/0x190
[   46.729929] Modules linked in:
[   46.730155] CPU: 1 PID: 890 Comm: repro Tainted: G    B   W          6.1.0-a0a6c76cf2a5+ #1
[   46.730762] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   46.731572] RIP: 0010:iopt_release_pages+0x159/0x190
[   46.731938] Code: b5 11 ff eb cb e8 87 90 2b ff be 03 00 00 00 4c 89 f7 e8 6a 8b ce ff eb b7 e8 73 90 2b ff 0f 0b e9 ed fe ff ff e8 67 90 2b ff <0f> 0b e9 00 ff ff ff e8 5b 90 2b ff 0f 0b e9 07 ff ff ff e8 4f 90
[   46.733232] RSP: 0018:ffffc90001843c88 EFLAGS: 00010246
[   46.733612] RAX: 0000000000000000 RBX: ffff888005ec9400 RCX: ffffffff81fe1957
[   46.734121] RDX: 0000000000000000 RSI: ffff88800e678000 RDI: 0000000000000002
[   46.734627] RBP: ffffc90001843ca8 R08: 0000000000000000 R09: 0000000000000000
[   46.735143] R10: ffffc90001843c58 R11: 0000000000000000 R12: ffffffffffffffff
[   46.735653] R13: 0000000001000000 R14: 00000000017fffff R15: 0000000000000000
[   46.736159] FS:  0000000000000000(0000) GS:ffff88807dd00000(0000) knlGS:0000000000000000
[   46.736750] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   46.737162] CR2: 00007f3777cf0500 CR3: 0000000003c12006 CR4: 0000000000770ee0
[   46.737663] PKRU: 55555554
[   46.737865] Call Trace:
[   46.738050]  <TASK>
[   46.738214]  iopt_unmap_iova_range+0x1ef/0x2e0
[   46.738554]  iopt_unmap_all+0x2f/0x60
[   46.738826]  iommufd_ioas_destroy+0x2c/0x70
[   46.739137]  iommufd_fops_release+0xd4/0x170
[   46.739489]  ? iommufd_ctx_get+0x30/0x30
[   46.739781]  __fput+0x11f/0x450
[   46.740027]  ____fput+0x1e/0x30
[   46.740270]  task_work_run+0xb6/0x120
[   46.740558]  do_exit+0x521/0x1340
[   46.740824]  ? lock_release+0x202/0x2c0
[   46.741112]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   46.741460]  ? trace_hardirqs_on+0x3f/0x100
[   46.741777]  do_group_exit+0x5e/0xf0
[   46.742048]  __x64_sys_exit_group+0x25/0x30
[   46.742357]  do_syscall_64+0x3b/0x90
[   46.742644]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   46.743043] RIP: 0033:0x7f3777be6cf6
[   46.743307] Code: Unable to access opcode bytes at 0x7f3777be6ccc.
[   46.743748] RSP: 002b:00007ffd0d7278d8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
[   46.744279] RAX: ffffffffffffffda RBX: 00007f3777cf1490 RCX: 00007f3777be6cf6
[   46.744799] RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
[   46.745302] RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffff80
[   46.745821] R10: 0000000000000004 R11: 0000000000000246 R12: 00007f3777cf1490
[   46.746342] R13: 0000000000000001 R14: 00007f3777cf4e88 R15: 0000000000000000
[   46.746866]  </TASK>
[   46.747030] irq event stamp: 0
[   46.747256] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   46.747700] hardirqs last disabled at (0): [<ffffffff810fff0c>] copy_process+0x11cc/0x2b10
[   46.748286] softirqs last  enabled at (0): [<ffffffff810fff10>] copy_process+0x11d0/0x2b10
[   46.748883] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   46.749327] ---[ end trace 0000000000000000 ]---
[   46.796196] ------------[ cut here ]------------
[   46.796586] WARNING: CPU: 1 PID: 892 at drivers/iommu/iommufd/pages.c:178 batch_unpin.isra.23+0x151/0x1a0
[   46.797317] Modules linked in:
[   46.797658] CPU: 1 PID: 892 Comm: repro Tainted: G    B   W          6.1.0-a0a6c76cf2a5+ #1
[   46.798570] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   46.800020] RIP: 0010:batch_unpin.isra.23+0x151/0x1a0
[   46.800625] Code: e8 c4 be 2b ff 48 8b 45 d0 48 85 c0 75 17 e8 26 bd 2b ff 48 8b 7d c8 48 89 de e8 fa bd 2b ff 48 39 5d c8 73 07 e8 0f bd 2b ff <0f> 0b e8 08 bd 2b ff 4d 29 e5 31 ff 41 83 c6 01 4c 89 ee 31 db e8
[   46.802801] RSP: 0018:ffffc90001853a88 EFLAGS: 00010246
[   46.803403] RAX: 0000000000000000 RBX: ffffffffffffffff RCX: ffffffff81fded8c
[   46.804263] RDX: 0000000000000000 RSI: ffff88800e678000 RDI: 0000000000000002
[   46.805117] RBP: ffffc90001853ad0 R08: 000000000003b5c5 R09: 0000000000000009
[   46.805952] R10: 000000000003b5a0 R11: 0000000000000024 R12: 0000000000000002
[   46.806766] R13: 0000000000000002 R14: 000000000002d310 R15: ffff888005ec9400
[   46.807615] FS:  00007f3777af9740(0000) GS:ffff88807dd00000(0000) knlGS:0000000000000000
[   46.808530] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   46.809263] CR2: 00007f3777c1e580 CR3: 0000000009fa0003 CR4: 0000000000770ee0
[   46.810108] PKRU: 55555554
[   46.810435] Call Trace:
[   46.810755]  <TASK>
[   46.811011]  __iopt_area_unfill_domain+0x257/0x560
[   46.811583]  ? rcu_read_lock_sched_held+0x29/0x80
[   46.812178]  ? lock_acquire+0x1a1/0x2f0
[   46.812650]  ? rcu_read_lock_held_common+0x12/0x50
[   46.813271]  ? rcu_read_lock_sched_held+0x29/0x80
[   46.813845]  ? __mutex_lock+0x13a/0xf30
[   46.814353]  ? write_comp_data+0x2f/0x90
[   46.814830]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   46.815431]  iopt_area_unfill_domain+0x32/0x40
[   46.815977]  iopt_table_remove_domain+0x23f/0x4c0
[   46.816572]  iommufd_device_selftest_detach+0x3a/0x90
[   46.817235]  iommufd_selftest_destroy+0x55/0x70
[   46.817779]  iommufd_object_destroy_user+0xce/0x130
[   46.818356]  iommufd_destroy+0xa2/0xc0
[   46.818841]  iommufd_fops_ioctl+0x1ef/0x310
[   46.819336]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   46.819906]  ? write_comp_data+0x2f/0x90
[   46.820409]  __x64_sys_ioctl+0x10e/0x160
[   46.820928]  ? iommufd_get_object.part.6+0x1c0/0x1c0
[   46.821511]  do_syscall_64+0x3b/0x90
[   46.821973]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   46.822553] RIP: 0033:0x7f3777c1e59d
[   46.822977] Code: 00 c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d d3 08 0d 00 f7 d8 64 89 01 48
[   46.825115] RSP: 002b:00007ffd0d727918 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   46.826025] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f3777c1e59d
[   46.826887] RDX: 0000000020000140 RSI: 0000000000003b80 RDI: 0000000000000003
[   46.827711] RBP: 00007ffd0d727930 R08: 00007ffd0d727930 R09: 00007ffd0d727930
[   46.828548] R10: 00007ffd0d727930 R11: 0000000000000213 R12: 0000000000401180
[   46.829387] R13: 00007ffd0d727a50 R14: 0000000000000000 R15: 0000000000000000
[   46.830231]  </TASK>
[   46.830527] irq event stamp: 0
[   46.830897] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   46.831617] hardirqs last disabled at (0): [<ffffffff810fff0c>] copy_process+0x11cc/0x2b10
[   46.832603] softirqs last  enabled at (0): [<ffffffff810fff10>] copy_process+0x11d0/0x2b10
[   46.833621] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   46.834299] ---[ end trace 0000000000000000 ]---
[   46.834961] ------------[ cut here ]------------
[   46.835523] WARNING: CPU: 1 PID: 892 at drivers/iommu/iommufd/pages.c:294 __iopt_area_unfill_domain+0x152/0x560
[   46.836727] Modules linked in:
[   46.837120] CPU: 1 PID: 892 Comm: repro Tainted: G    B   W          6.1.0-a0a6c76cf2a5+ #1
[   46.838056] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   46.839365] RIP: 0010:__iopt_area_unfill_domain+0x152/0x560
[   46.840089] Code: a1 2b ff 44 8b 64 24 54 48 8b 44 24 48 31 ff 44 89 e6 48 89 44 24 38 e8 6c a2 2b ff 45 85 e4 0f 85 eb 01 00 00 e8 ee a0 2b ff <0f> 0b e8 e7 a0 2b ff 48 8b 44 24 38 89 5c 24 58 89 18 8b 44 24 54
[   46.842224] RSP: 0018:ffffc90001853ae0 EFLAGS: 00010246
[   46.842847] RAX: 0000000000000000 RBX: 00000000fffffffe RCX: ffffffff81fe0bd5
[   46.843702] RDX: 0000000000000000 RSI: ffff88800e678000 RDI: 0000000000000002
[   46.844584] RBP: ffffc90001853d10 R08: 000000000003b5c5 R09: 0000000000000009
[   46.845412] R10: 000000000003b5a0 R11: 0000000000000024 R12: 0000000000000001
[   46.846245] R13: 0000000000000802 R14: 00000000000007ff R15: 0000000000000800
[   46.847037] FS:  00007f3777af9740(0000) GS:ffff88807dd00000(0000) knlGS:0000000000000000
[   46.847975] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   46.848715] CR2: 00007f3777c1e580 CR3: 0000000009fa0003 CR4: 0000000000770ee0
[   46.849539] PKRU: 55555554
[   46.849877] Call Trace:
[   46.850183]  <TASK>
[   46.850533]  ? rcu_read_lock_sched_held+0x29/0x80
[   46.851123]  ? lock_acquire+0x1a1/0x2f0
[   46.851612]  ? rcu_read_lock_held_common+0x12/0x50
[   46.852236]  ? rcu_read_lock_sched_held+0x29/0x80
[   46.852833]  ? __mutex_lock+0x13a/0xf30
[   46.853348]  ? write_comp_data+0x2f/0x90
[   46.853841]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   46.854493]  iopt_area_unfill_domain+0x32/0x40
[   46.855026]  iopt_table_remove_domain+0x23f/0x4c0
[   46.855597]  iommufd_device_selftest_detach+0x3a/0x90
[   46.856221]  iommufd_selftest_destroy+0x55/0x70
[   46.856805]  iommufd_object_destroy_user+0xce/0x130
[   46.857429]  iommufd_destroy+0xa2/0xc0
[   46.857876]  iommufd_fops_ioctl+0x1ef/0x310
[   46.858360]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   46.858970]  ? write_comp_data+0x2f/0x90
[   46.859446]  __x64_sys_ioctl+0x10e/0x160
[   46.859940]  ? iommufd_get_object.part.6+0x1c0/0x1c0
[   46.860554]  do_syscall_64+0x3b/0x90
[   46.861010]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   46.861629] RIP: 0033:0x7f3777c1e59d
[   46.862079] Code: 00 c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d d3 08 0d 00 f7 d8 64 89 01 48
[   46.864115] RSP: 002b:00007ffd0d727918 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   46.865067] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f3777c1e59d
[   46.865878] RDX: 0000000020000140 RSI: 0000000000003b80 RDI: 0000000000000003
[   46.866759] RBP: 00007ffd0d727930 R08: 00007ffd0d727930 R09: 00007ffd0d727930
[   46.867540] R10: 00007ffd0d727930 R11: 0000000000000213 R12: 0000000000401180
[   46.868390] R13: 00007ffd0d727a50 R14: 0000000000000000 R15: 0000000000000000
[   46.869259]  </TASK>
[   46.869532] irq event stamp: 0
[   46.869906] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   46.870654] hardirqs last disabled at (0): [<ffffffff810fff0c>] copy_process+0x11cc/0x2b10
[   46.871655] softirqs last  enabled at (0): [<ffffffff810fff10>] copy_process+0x11d0/0x2b10
[   46.872692] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   46.873425] ---[ end trace 0000000000000000 ]---
[   46.874129] ------------[ cut here ]------------
[   46.874682] WARNING: CPU: 1 PID: 892 at drivers/iommu/iommufd/pages.c:1290 __iopt_area_unfill_domain+0x54f/0x560
[   46.875874] Modules linked in:
[   46.876248] CPU: 1 PID: 892 Comm: repro Tainted: G    B   W          6.1.0-a0a6c76cf2a5+ #1
[   46.877272] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   46.878591] RIP: 0010:__iopt_area_unfill_domain+0x54f/0x560
[   46.879240] Code: e8 86 9e 2b ff 85 db 0f 85 35 fb ff ff e8 09 9d 2b ff 0f 0b e9 29 fb ff ff e8 fd 9c 2b ff 0f 0b e9 69 fe ff ff e8 f1 9c 2b ff <0f> 0b e9 58 ff ff ff e8 65 2d dc 00 0f 1f 44 00 00 0f 1f 44 00 00
[   46.881228] RSP: 0018:ffffc90001853ae0 EFLAGS: 00010246
[   46.881831] RAX: 0000000000000000 RBX: 00000000fffffffe RCX: ffffffff81fe0d26
[   46.882543] RDX: 0000000000000000 RSI: ffff88800e678000 RDI: 0000000000000002
[   46.883116] RBP: ffffc90001853d10 R08: 000000000003b5c5 R09: 0000000000000009
[   46.883623] R10: 000000000003b5a0 R11: 0000000000000024 R12: 00000000000007ff
[   46.884139] R13: 0000000000000802 R14: 00000000000007ff R15: 0000000000000800
[   46.884646] FS:  00007f3777af9740(0000) GS:ffff88807dd00000(0000) knlGS:0000000000000000
[   46.885457] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   46.885870] CR2: 00007f3777c1e580 CR3: 0000000009fa0003 CR4: 0000000000770ee0
[   46.886395] PKRU: 55555554
[   46.886607] Call Trace:
[   46.886790]  <TASK>
[   46.886967]  ? rcu_read_lock_sched_held+0x29/0x80
[   46.887328]  ? lock_acquire+0x1a1/0x2f0
[   46.887631]  ? rcu_read_lock_held_common+0x12/0x50
[   46.887986]  ? rcu_read_lock_sched_held+0x29/0x80
[   46.888341]  ? __mutex_lock+0x13a/0xf30
[   46.888649]  ? write_comp_data+0x2f/0x90
[   46.889167]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   46.889744]  iopt_area_unfill_domain+0x32/0x40
[   46.890087]  iopt_table_remove_domain+0x23f/0x4c0
[   46.890435]  iommufd_device_selftest_detach+0x3a/0x90
[   46.890841]  iommufd_selftest_destroy+0x55/0x70
[   46.891182]  iommufd_object_destroy_user+0xce/0x130
[   46.891541]  iommufd_destroy+0xa2/0xc0
[   46.891828]  iommufd_fops_ioctl+0x1ef/0x310
[   46.892157]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   46.892512]  ? write_comp_data+0x2f/0x90
[   46.892844]  __x64_sys_ioctl+0x10e/0x160
[   46.893335]  ? iommufd_get_object.part.6+0x1c0/0x1c0
[   46.893894]  do_syscall_64+0x3b/0x90
[   46.894168]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   46.894548] RIP: 0033:0x7f3777c1e59d
[   46.894827] Code: 00 c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d d3 08 0d 00 f7 d8 64 89 01 48
[   46.896134] RSP: 002b:00007ffd0d727918 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   46.896695] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f3777c1e59d
[   46.897398] RDX: 0000000020000140 RSI: 0000000000003b80 RDI: 0000000000000003
[   46.897911] RBP: 00007ffd0d727930 R08: 00007ffd0d727930 R09: 00007ffd0d727930
[   46.898432] R10: 00007ffd0d727930 R11: 0000000000000213 R12: 0000000000401180
[   46.898946] R13: 00007ffd0d727a50 R14: 0000000000000000 R15: 0000000000000000
[   46.899474]  </TASK>
[   46.899645] irq event stamp: 0
[   46.899872] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   46.900333] hardirqs last disabled at (0): [<ffffffff810fff0c>] copy_process+0x11cc/0x2b10
[   46.900959] softirqs last  enabled at (0): [<ffffffff810fff10>] copy_process+0x11d0/0x2b10
[   46.901862] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   46.902327] ---[ end trace 0000000000000000 ]---
[   46.902773] ------------[ cut here ]------------
[   46.903113] WARNING: CPU: 1 PID: 892 at drivers/iommu/iommufd/pages.c:886 update_unpinned+0x75/0x80
[   46.903778] Modules linked in:
[   46.904014] CPU: 1 PID: 892 Comm: repro Tainted: G    B   W          6.1.0-a0a6c76cf2a5+ #1
[   46.904626] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   46.905457] RIP: 0010:update_unpinned+0x75/0x80
[   46.906002] Code: ac 2b ff 48 89 de 31 c9 31 d2 4c 29 e6 4c 89 ef e8 70 fb ff ff e8 bb ac 2b ff 5b 41 5c 41 5d 5d c3 cc cc cc cc e8 ab ac 2b ff <0f> 0b eb e7 0f 1f 80 00 00 00 00 0f 1f 44 00 00 55 48 89 e5 41 57
[   46.907453] RSP: 0018:ffffc90001853ab8 EFLAGS: 00010246
[   46.907863] RAX: 0000000000000000 RBX: 0000000000000800 RCX: ffffffff81fdfdcf
[   46.908387] RDX: 0000000000000000 RSI: ffff88800e678000 RDI: 0000000000000002
[   46.908933] RBP: ffffc90001853ad0 R08: 0000000000000000 R09: ffff88807dd3b920
[   46.909580] R10: 0000000000000683 R11: 0000000000000009 R12: ffffffffffffffff
[   46.910101] R13: ffff888005ec9400 R14: 00000000000007ff R15: 0000000000000800
[   46.910623] FS:  00007f3777af9740(0000) GS:ffff88807dd00000(0000) knlGS:0000000000000000
[   46.911211] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   46.911619] CR2: 00007f3777c1e580 CR3: 0000000009fa0003 CR4: 0000000000770ee0
[   46.912141] PKRU: 55555554
[   46.912347] Call Trace:
[   46.912530]  <TASK>
[   46.912719]  __iopt_area_unfill_domain+0x4e1/0x560
[   46.913314]  ? rcu_read_lock_sched_held+0x29/0x80
[   46.913787]  ? lock_acquire+0x1a1/0x2f0
[   46.914093]  ? rcu_read_lock_held_common+0x12/0x50
[   46.914449]  ? rcu_read_lock_sched_held+0x29/0x80
[   46.914810]  ? __mutex_lock+0x13a/0xf30
[   46.915112]  ? write_comp_data+0x2f/0x90
[   46.915411]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   46.915767]  iopt_area_unfill_domain+0x32/0x40
[   46.916101]  iopt_table_remove_domain+0x23f/0x4c0
[   46.916470]  iommufd_device_selftest_detach+0x3a/0x90
[   46.916888]  iommufd_selftest_destroy+0x55/0x70
[   46.917415]  iommufd_object_destroy_user+0xce/0x130
[   46.917944]  iommufd_destroy+0xa2/0xc0
[   46.918228]  iommufd_fops_ioctl+0x1ef/0x310
[   46.918569]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   46.918920]  ? write_comp_data+0x2f/0x90
[   46.919216]  __x64_sys_ioctl+0x10e/0x160
[   46.919532]  ? iommufd_get_object.part.6+0x1c0/0x1c0
[   46.919901]  do_syscall_64+0x3b/0x90
[   46.920179]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   46.920570] RIP: 0033:0x7f3777c1e59d
[   46.920872] Code: 00 c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d d3 08 0d 00 f7 d8 64 89 01 48
[   46.922533] RSP: 002b:00007ffd0d727918 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   46.923085] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f3777c1e59d
[   46.923588] RDX: 0000000020000140 RSI: 0000000000003b80 RDI: 0000000000000003
[   46.924114] RBP: 00007ffd0d727930 R08: 00007ffd0d727930 R09: 00007ffd0d727930
[   46.924633] R10: 00007ffd0d727930 R11: 0000000000000213 R12: 0000000000401180
[   46.925178] R13: 00007ffd0d727a50 R14: 0000000000000000 R15: 0000000000000000
[   46.925930]  </TASK>
[   46.926104] irq event stamp: 0
[   46.926335] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   46.926807] hardirqs last disabled at (0): [<ffffffff810fff0c>] copy_process+0x11cc/0x2b10
[   46.927406] softirqs last  enabled at (0): [<ffffffff810fff10>] copy_process+0x11d0/0x2b10
[   46.928015] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   46.928474] ---[ end trace 0000000000000000 ]---
[   46.931790] ------------[ cut here ]------------
[   46.932160] WARNING: CPU: 1 PID: 892 at drivers/iommu/iommufd/pages.c:178 batch_unpin.isra.23+0x151/0x1a0
[   46.932932] Modules linked in:
[   46.933297] CPU: 1 PID: 892 Comm: repro Tainted: G    B   W          6.1.0-a0a6c76cf2a5+ #1
[   46.933892] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   46.934712] RIP: 0010:batch_unpin.isra.23+0x151/0x1a0
[   46.935096] Code: e8 c4 be 2b ff 48 8b 45 d0 48 85 c0 75 17 e8 26 bd 2b ff 48 8b 7d c8 48 89 de e8 fa bd 2b ff 48 39 5d c8 73 07 e8 0f bd 2b ff <0f> 0b e8 08 bd 2b ff 4d 29 e5 31 ff 41 83 c6 01 4c 89 ee 31 db e8
[   46.936412] RSP: 0018:ffffc900018539d8 EFLAGS: 00010246
[   46.936833] RAX: 0000000000000000 RBX: fffffffffffffffe RCX: ffffffff81fdeda6
[   46.937548] RDX: 0000000000000000 RSI: ffff88800e678000 RDI: 0000000000000002
[   46.938055] RBP: ffffc90001853a20 R08: 0000000000000000 R09: ffff88807dd3b890
[   46.938586] R10: 0000000000000e8a R11: 0000000000000000 R12: 0000000000000001
[   46.939095] R13: 0000000000000001 R14: 0000000000000000 R15: ffff888005ec9400
[   46.939611] FS:  0000000000000000(0000) GS:ffff88807dd00000(0000) knlGS:0000000000000000
[   46.940195] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   46.940612] CR2: 00007f3777cf0500 CR3: 0000000003c12006 CR4: 0000000000770ee0
[   46.941158] PKRU: 55555554
[   46.941486] Call Trace:
[   46.941769]  <TASK>
[   46.942031]  iopt_pages_unfill_xarray+0x39f/0x5c0
[   46.942428]  ? rcu_read_lock_sched_held+0x29/0x80
[   46.942798]  ? rcu_read_lock_held_common+0x12/0x50
[   46.943165]  ? write_comp_data+0x2f/0x90
[   46.943461]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   46.943812]  ? write_comp_data+0x2f/0x90
[   46.944126]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   46.944478]  ? interval_tree_remove+0x291/0x4e0
[   46.944861]  ? write_comp_data+0x2f/0x90
[   46.945333]  iopt_area_remove_access+0x108/0x120
[   46.945821]  iommufd_access_unpin_pages+0x177/0x210
[   46.946213]  iommufd_test_access_unmap+0xe0/0x130
[   46.946580]  ? iommufd_test_access_unmap+0x130/0x130
[   46.946949]  iommufd_test_staccess_release+0x39/0x60
[   46.947330]  __fput+0x11f/0x450
[   46.947583]  ____fput+0x1e/0x30
[   46.947830]  task_work_run+0xb6/0x120
[   46.948118]  do_exit+0x521/0x1340
[   46.948381]  ? lock_release+0x202/0x2c0
[   46.948697]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   46.949268]  ? trace_hardirqs_on+0x3f/0x100
[   46.949753]  do_group_exit+0x5e/0xf0
[   46.950024]  __x64_sys_exit_group+0x25/0x30
[   46.950351]  do_syscall_64+0x3b/0x90
[   46.950637]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   46.951013] RIP: 0033:0x7f3777be6cf6
[   46.951280] Code: Unable to access opcode bytes at 0x7f3777be6ccc.
[   46.951729] RSP: 002b:00007ffd0d7278d8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
[   46.952273] RAX: ffffffffffffffda RBX: 00007f3777cf1490 RCX: 00007f3777be6cf6
[   46.952820] RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
[   46.953626] RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffff80
[   46.954139] R10: 0000000000000004 R11: 0000000000000246 R12: 00007f3777cf1490
[   46.954659] R13: 0000000000000001 R14: 00007f3777cf4e88 R15: 0000000000000000
[   46.955182]  </TASK>
[   46.955351] irq event stamp: 0
[   46.955579] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   46.956038] hardirqs last disabled at (0): [<ffffffff810fff0c>] copy_process+0x11cc/0x2b10
[   46.956637] softirqs last  enabled at (0): [<ffffffff810fff10>] copy_process+0x11d0/0x2b10
[   46.957533] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   46.957996] ---[ end trace 0000000000000000 ]---
[   46.958436] ------------[ cut here ]------------
[   46.958781] WARNING: CPU: 1 PID: 892 at drivers/iommu/iommufd/pages.c:886 update_unpinned+0x75/0x80
[   46.959437] Modules linked in:
[   46.959661] CPU: 1 PID: 892 Comm: repro Tainted: G    B   W          6.1.0-a0a6c76cf2a5+ #1
[   46.960261] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   46.961304] RIP: 0010:update_unpinned+0x75/0x80
[   46.961831] Code: ac 2b ff 48 89 de 31 c9 31 d2 4c 29 e6 4c 89 ef e8 70 fb ff ff e8 bb ac 2b ff 5b 41 5c 41 5d 5d c3 cc cc cc cc e8 ab ac 2b ff <0f> 0b eb e7 0f 1f 80 00 00 00 00 0f 1f 44 00 00 55 48 89 e5 41 57
[   46.963259] RSP: 0018:ffffc90001853a08 EFLAGS: 00010246
[   46.963655] RAX: 0000000000000000 RBX: 0000000000000800 RCX: ffffffff81fdfdcf
[   46.964158] RDX: 0000000000000000 RSI: ffff88800e678000 RDI: 0000000000000002
[   46.964703] RBP: ffffc90001853a20 R08: 0000000000000000 R09: ffff88807dd3b890
[   46.965348] R10: 0000000000000e8a R11: 0000000000000000 R12: fffffffffffffffe
[   46.965880] R13: ffff888005ec9400 R14: 0000000000000002 R15: 0000000000000002
[   46.966390] FS:  0000000000000000(0000) GS:ffff88807dd00000(0000) knlGS:0000000000000000
[   46.966989] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   46.967412] CR2: 00007f3777cf0500 CR3: 0000000003c12006 CR4: 0000000000770ee0
[   46.967930] PKRU: 55555554
[   46.968136] Call Trace:
[   46.968319]  <TASK>
[   46.968487]  iopt_pages_unfill_xarray+0x522/0x5c0
[   46.968885]  ? rcu_read_lock_sched_held+0x29/0x80
[   46.969471]  ? rcu_read_lock_held_common+0x12/0x50
[   46.969989]  ? write_comp_data+0x2f/0x90
[   46.970290]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   46.970652]  ? write_comp_data+0x2f/0x90
[   46.970990]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   46.971343]  ? interval_tree_remove+0x291/0x4e0
[   46.971682]  ? write_comp_data+0x2f/0x90
[   46.971991]  iopt_area_remove_access+0x108/0x120
[   46.972342]  iommufd_access_unpin_pages+0x177/0x210
[   46.972758]  iommufd_test_access_unmap+0xe0/0x130
[   46.973324]  ? iommufd_test_access_unmap+0x130/0x130
[   46.973827]  iommufd_test_staccess_release+0x39/0x60
[   46.974213]  __fput+0x11f/0x450
[   46.974463]  ____fput+0x1e/0x30
[   46.974720]  task_work_run+0xb6/0x120
[   46.975010]  do_exit+0x521/0x1340
[   46.975279]  ? lock_release+0x202/0x2c0
[   46.975565]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   46.975914]  ? trace_hardirqs_on+0x3f/0x100
[   46.976246]  do_group_exit+0x5e/0xf0
[   46.976519]  __x64_sys_exit_group+0x25/0x30
[   46.976859]  do_syscall_64+0x3b/0x90
[   46.977293]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   46.977879] RIP: 0033:0x7f3777be6cf6
[   46.978200] Code: Unable to access opcode bytes at 0x7f3777be6ccc.
[   46.978665] RSP: 002b:00007ffd0d7278d8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
[   46.979205] RAX: ffffffffffffffda RBX: 00007f3777cf1490 RCX: 00007f3777be6cf6
[   46.979722] RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
[   46.980228] RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffff80
[   46.980770] R10: 0000000000000004 R11: 0000000000000246 R12: 00007f3777cf1490
[   46.981509] R13: 0000000000000001 R14: 00007f3777cf4e88 R15: 0000000000000000
[   46.982021]  </TASK>
[   46.982191] irq event stamp: 0
[   46.982422] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   46.982878] hardirqs last disabled at (0): [<ffffffff810fff0c>] copy_process+0x11cc/0x2b10
[   46.983468] softirqs last  enabled at (0): [<ffffffff810fff10>] copy_process+0x11d0/0x2b10
[   46.984071] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   46.984517] ---[ end trace 0000000000000000 ]---
[   46.985098] ------------[ cut here ]------------
[   46.985664] WARNING: CPU: 1 PID: 892 at drivers/iommu/iommufd/pages.c:1181 iopt_release_pages+0x159/0x190
[   46.986366] Modules linked in:
[   46.986603] CPU: 1 PID: 892 Comm: repro Tainted: G    B   W          6.1.0-a0a6c76cf2a5+ #1
[   46.987221] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   46.988031] RIP: 0010:iopt_release_pages+0x159/0x190
[   46.988398] Code: b5 11 ff eb cb e8 87 90 2b ff be 03 00 00 00 4c 89 f7 e8 6a 8b ce ff eb b7 e8 73 90 2b ff 0f 0b e9 ed fe ff ff e8 67 90 2b ff <0f> 0b e9 00 ff ff ff e8 5b 90 2b ff 0f 0b e9 07 ff ff ff e8 4f 90
[   46.989736] RSP: 0018:ffffc90001853c88 EFLAGS: 00010246
[   46.990342] RAX: 0000000000000000 RBX: ffff888005ec9400 RCX: ffffffff81fe1957
[   46.990921] RDX: 0000000000000000 RSI: ffff88800e678000 RDI: 0000000000000002
[   46.991438] RBP: ffffc90001853ca8 R08: 0000000000000000 R09: 0000000000000000
[   46.991937] R10: ffffc90001853c58 R11: 0000000000000000 R12: fffffffffffffffe
[   46.992456] R13: 0000000001000000 R14: 00000000017fffff R15: 0000000000000000
[   46.993019] FS:  0000000000000000(0000) GS:ffff88807dd00000(0000) knlGS:0000000000000000
[   46.993772] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   46.994188] CR2: 00007f3777cf0500 CR3: 0000000003c12006 CR4: 0000000000770ee0
[   46.994725] PKRU: 55555554
[   46.994925] Call Trace:
[   46.995107]  <TASK>
[   46.995271]  iopt_unmap_iova_range+0x1ef/0x2e0
[   46.995619]  iopt_unmap_all+0x2f/0x60
[   46.995897]  iommufd_ioas_destroy+0x2c/0x70
[   46.996212]  iommufd_fops_release+0xd4/0x170
[   46.996560]  ? iommufd_ctx_get+0x30/0x30
[   46.996884]  __fput+0x11f/0x450
[   46.997275]  ____fput+0x1e/0x30
[   46.997665]  task_work_run+0xb6/0x120
[   46.998084]  do_exit+0x521/0x1340
[   46.998347]  ? lock_release+0x202/0x2c0
[   46.998655]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   46.999013]  ? trace_hardirqs_on+0x3f/0x100
[   46.999329]  do_group_exit+0x5e/0xf0
[   46.999610]  __x64_sys_exit_group+0x25/0x30
[   46.999926]  do_syscall_64+0x3b/0x90
[   47.000201]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   47.000577] RIP: 0033:0x7f3777be6cf6
[   47.000884] Code: Unable to access opcode bytes at 0x7f3777be6ccc.
[   47.001592] RSP: 002b:00007ffd0d7278d8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
[   47.002239] RAX: ffffffffffffffda RBX: 00007f3777cf1490 RCX: 00007f3777be6cf6
[   47.002747] RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
[   47.003264] RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffff80
[   47.003769] R10: 0000000000000004 R11: 0000000000000246 R12: 00007f3777cf1490
[   47.004284] R13: 0000000000000001 R14: 00007f3777cf4e88 R15: 0000000000000000
[   47.004844]  </TASK>
[   47.005107] irq event stamp: 0
[   47.005465] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   47.005916] hardirqs last disabled at (0): [<ffffffff810fff0c>] copy_process+0x11cc/0x2b10
[   47.006526] softirqs last  enabled at (0): [<ffffffff810fff10>] copy_process+0x11d0/0x2b10
[   47.007127] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   47.007576] ---[ end trace 0000000000000000 ]---
[   47.074953] ------------[ cut here ]------------
[   47.075338] WARNING: CPU: 1 PID: 895 at drivers/iommu/iommufd/pages.c:294 __iopt_area_unfill_domain+0x152/0x560
[   47.076145] Modules linked in:
[   47.076383] CPU: 1 PID: 895 Comm: repro Tainted: G    B   W          6.1.0-a0a6c76cf2a5+ #1
[   47.077032] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   47.078263] RIP: 0010:__iopt_area_unfill_domain+0x152/0x560
[   47.078991] Code: a1 2b ff 44 8b 64 24 54 48 8b 44 24 48 31 ff 44 89 e6 48 89 44 24 38 e8 6c a2 2b ff 45 85 e4 0f 85 eb 01 00 00 e8 ee a0 2b ff <0f> 0b e8 e7 a0 2b ff 48 8b 44 24 38 89 5c 24 58 89 18 8b 44 24 54
[   47.081110] RSP: 0018:ffffc9000186bae0 EFLAGS: 00010246
[   47.081752] RAX: 0000000000000000 RBX: 00000000ffffffff RCX: ffffffff81fe0bd5
[   47.082611] RDX: 0000000000000000 RSI: ffff88800e67d300 RDI: 0000000000000002
[   47.083389] RBP: ffffc9000186bd10 R08: 000000000003b5c5 R09: 0000000000000001
[   47.084246] R10: 000000000003b5a0 R11: 0000000000000024 R12: 0000000000000001
[   47.085091] R13: 0000000000000801 R14: 00000000000007ff R15: 0000000000000800
[   47.085926] FS:  00007f3777af9740(0000) GS:ffff88807dd00000(0000) knlGS:0000000000000000
[   47.086837] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   47.087487] CR2: 00007f3777c1e580 CR3: 000000000cac6006 CR4: 0000000000770ee0
[   47.088323] PKRU: 55555554
[   47.088684] Call Trace:
[   47.088996]  <TASK>
[   47.089275]  ? rcu_read_lock_sched_held+0x29/0x80
[   47.089819]  ? lock_acquire+0x1a1/0x2f0
[   47.090286]  ? rcu_read_lock_held_common+0x12/0x50
[   47.090936]  ? rcu_read_lock_sched_held+0x29/0x80
[   47.091505]  ? __mutex_lock+0x13a/0xf30
[   47.092035]  ? write_comp_data+0x2f/0x90
[   47.092519]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   47.093115]  iopt_area_unfill_domain+0x32/0x40
[   47.093709]  iopt_table_remove_domain+0x23f/0x4c0
[   47.094296]  iommufd_device_selftest_detach+0x3a/0x90
[   47.094899]  iommufd_selftest_destroy+0x55/0x70
[   47.095443]  iommufd_object_destroy_user+0xce/0x130
[   47.096089]  iommufd_destroy+0xa2/0xc0
[   47.096561]  iommufd_fops_ioctl+0x1ef/0x310
[   47.097092]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   47.097628]  ? write_comp_data+0x2f/0x90
[   47.098107]  __x64_sys_ioctl+0x10e/0x160
[   47.098609]  ? iommufd_get_object.part.6+0x1c0/0x1c0
[   47.099210]  do_syscall_64+0x3b/0x90
[   47.099656]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   47.100296] RIP: 0033:0x7f3777c1e59d
[   47.100747] Code: 00 c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d d3 08 0d 00 f7 d8 64 89 01 48
[   47.102822] RSP: 002b:00007ffd0d727918 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   47.103715] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f3777c1e59d
[   47.104530] RDX: 0000000020000140 RSI: 0000000000003b80 RDI: 0000000000000003
[   47.105415] RBP: 00007ffd0d727930 R08: 00007ffd0d727930 R09: 00007ffd0d727930
[   47.106263] R10: 00007ffd0d727930 R11: 0000000000000213 R12: 0000000000401180
[   47.107095] R13: 00007ffd0d727a50 R14: 0000000000000000 R15: 0000000000000000
[   47.107934]  </TASK>
[   47.108216] irq event stamp: 0
[   47.108596] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   47.109430] hardirqs last disabled at (0): [<ffffffff810fff0c>] copy_process+0x11cc/0x2b10
[   47.110433] softirqs last  enabled at (0): [<ffffffff810fff10>] copy_process+0x11d0/0x2b10
[   47.111406] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   47.112125] ---[ end trace 0000000000000000 ]---
[   47.112911] ------------[ cut here ]------------
[   47.113452] WARNING: CPU: 1 PID: 895 at drivers/iommu/iommufd/pages.c:1290 __iopt_area_unfill_domain+0x54f/0x560
[   47.114612] Modules linked in:
[   47.114999] CPU: 1 PID: 895 Comm: repro Tainted: G    B   W          6.1.0-a0a6c76cf2a5+ #1
[   47.116000] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   47.117362] RIP: 0010:__iopt_area_unfill_domain+0x54f/0x560
[   47.118028] Code: e8 86 9e 2b ff 85 db 0f 85 35 fb ff ff e8 09 9d 2b ff 0f 0b e9 29 fb ff ff e8 fd 9c 2b ff 0f 0b e9 69 fe ff ff e8 f1 9c 2b ff <0f> 0b e9 58 ff ff ff e8 65 2d dc 00 0f 1f 44 00 00 0f 1f 44 00 00
[   47.120068] RSP: 0018:ffffc9000186bae0 EFLAGS: 00010246
[   47.120681] RAX: 0000000000000000 RBX: 00000000ffffffff RCX: ffffffff81fe0d26
[   47.121494] RDX: 0000000000000000 RSI: ffff88800e67d300 RDI: 0000000000000002
[   47.122336] RBP: ffffc9000186bd10 R08: 000000000003b5c5 R09: 0000000000000001
[   47.123151] R10: 000000000003b5a0 R11: 0000000000000024 R12: 00000000000007ff
[   47.123955] R13: 0000000000000801 R14: 00000000000007ff R15: 0000000000000800
[   47.124798] FS:  00007f3777af9740(0000) GS:ffff88807dd00000(0000) knlGS:0000000000000000
[   47.125745] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   47.126437] CR2: 00007f3777c1e580 CR3: 000000000cac6006 CR4: 0000000000770ee0
[   47.127232] PKRU: 55555554
[   47.127582] Call Trace:
[   47.127879]  <TASK>
[   47.128162]  ? rcu_read_lock_sched_held+0x29/0x80
[   47.128783]  ? lock_acquire+0x1a1/0x2f0
[   47.129269]  ? rcu_read_lock_held_common+0x12/0x50
[   47.129853]  ? rcu_read_lock_sched_held+0x29/0x80
[   47.130392]  ? __mutex_lock+0x13a/0xf30
[   47.130802]  ? write_comp_data+0x2f/0x90
[   47.131125]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   47.131486]  iopt_area_unfill_domain+0x32/0x40
[   47.131833]  iopt_table_remove_domain+0x23f/0x4c0
[   47.132191]  iommufd_device_selftest_detach+0x3a/0x90
[   47.132572]  iommufd_selftest_destroy+0x55/0x70
[   47.132963]  iommufd_object_destroy_user+0xce/0x130
[   47.133549]  iommufd_destroy+0xa2/0xc0
[   47.134008]  iommufd_fops_ioctl+0x1ef/0x310
[   47.134325]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   47.134686]  ? write_comp_data+0x2f/0x90
[   47.134997]  __x64_sys_ioctl+0x10e/0x160
[   47.135316]  ? iommufd_get_object.part.6+0x1c0/0x1c0
[   47.135685]  do_syscall_64+0x3b/0x90
[   47.135960]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   47.136346] RIP: 0033:0x7f3777c1e59d
[   47.136615] Code: 00 c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d d3 08 0d 00 f7 d8 64 89 01 48
[   47.137957] RSP: 002b:00007ffd0d727918 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   47.138822] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f3777c1e59d
[   47.139339] RDX: 0000000020000140 RSI: 0000000000003b80 RDI: 0000000000000003
[   47.139841] RBP: 00007ffd0d727930 R08: 00007ffd0d727930 R09: 00007ffd0d727930
[   47.140355] R10: 00007ffd0d727930 R11: 0000000000000213 R12: 0000000000401180
[   47.140894] R13: 00007ffd0d727a50 R14: 0000000000000000 R15: 0000000000000000
[   47.141586]  </TASK>
[   47.141754] irq event stamp: 0
[   47.141981] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   47.142440] hardirqs last disabled at (0): [<ffffffff810fff0c>] copy_process+0x11cc/0x2b10
[   47.143046] softirqs last  enabled at (0): [<ffffffff810fff10>] copy_process+0x11d0/0x2b10
[   47.143644] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   47.144093] ---[ end trace 0000000000000000 ]---
[   47.147305] ------------[ cut here ]------------
[   47.147672] WARNING: CPU: 1 PID: 895 at drivers/iommu/iommufd/pages.c:178 batch_unpin.isra.23+0x151/0x1a0
[   47.148369] Modules linked in:
[   47.148611] CPU: 1 PID: 895 Comm: repro Tainted: G    B   W          6.1.0-a0a6c76cf2a5+ #1
[   47.149262] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   47.150236] RIP: 0010:batch_unpin.isra.23+0x151/0x1a0
[   47.150631] Code: e8 c4 be 2b ff 48 8b 45 d0 48 85 c0 75 17 e8 26 bd 2b ff 48 8b 7d c8 48 89 de e8 fa bd 2b ff 48 39 5d c8 73 07 e8 0f bd 2b ff <0f> 0b e8 08 bd 2b ff 4d 29 e5 31 ff 41 83 c6 01 4c 89 ee 31 db e8
[   47.151935] RSP: 0018:ffffc9000186b9d8 EFLAGS: 00010246
[   47.152320] RAX: 0000000000000000 RBX: ffffffffffffffff RCX: ffffffff81fded8c
[   47.152856] RDX: 0000000000000000 RSI: ffff88800e67d300 RDI: 0000000000000002
[   47.153549] RBP: ffffc9000186ba20 R08: 0000000000000000 R09: ffff88807dd3b890
[   47.154063] R10: 0000000000000ebb R11: 0000000000000000 R12: 0000000000000001
[   47.154571] R13: 0000000000000001 R14: 0000000000000000 R15: ffff888005ec9c00
[   47.155085] FS:  0000000000000000(0000) GS:ffff88807dd00000(0000) knlGS:0000000000000000
[   47.155659] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   47.156078] CR2: 00007f3777cf0500 CR3: 0000000003c12001 CR4: 0000000000770ee0
[   47.156581] PKRU: 55555554
[   47.156810] Call Trace:
[   47.157105]  <TASK>
[   47.157376]  iopt_pages_unfill_xarray+0x39f/0x5c0
[   47.157869]  ? rcu_read_lock_held_common+0x12/0x50
[   47.158233]  ? write_comp_data+0x2f/0x90
[   47.158535]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   47.158875]  ? write_comp_data+0x2f/0x90
[   47.159173]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   47.159510]  ? interval_tree_remove+0x291/0x4e0
[   47.159838]  ? write_comp_data+0x2f/0x90
[   47.160133]  iopt_area_remove_access+0x108/0x120
[   47.160473]  iommufd_access_unpin_pages+0x177/0x210
[   47.160861]  iommufd_test_access_unmap+0xe0/0x130
[   47.161430]  ? iommufd_test_access_unmap+0x130/0x130
[   47.161937]  iommufd_test_staccess_release+0x39/0x60
[   47.162305]  __fput+0x11f/0x450
[   47.162558]  ____fput+0x1e/0x30
[   47.162796]  task_work_run+0xb6/0x120
[   47.163073]  do_exit+0x521/0x1340
[   47.163326]  ? lock_release+0x202/0x2c0
[   47.163605]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   47.163946]  ? trace_hardirqs_on+0x3f/0x100
[   47.164253]  do_group_exit+0x5e/0xf0
[   47.164524]  __x64_sys_exit_group+0x25/0x30
[   47.164853]  do_syscall_64+0x3b/0x90
[   47.165279]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   47.165862] RIP: 0033:0x7f3777be6cf6
[   47.166130] Code: Unable to access opcode bytes at 0x7f3777be6ccc.
[   47.166570] RSP: 002b:00007ffd0d7278d8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
[   47.167107] RAX: ffffffffffffffda RBX: 00007f3777cf1490 RCX: 00007f3777be6cf6
[   47.167611] RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
[   47.168103] RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffff80
[   47.168608] R10: 0000000000000004 R11: 0000000000000246 R12: 00007f3777cf1490
[   47.169133] R13: 0000000000000001 R14: 00007f3777cf4e88 R15: 0000000000000000
[   47.169902]  </TASK>
[   47.170066] irq event stamp: 0
[   47.170285] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   47.170731] hardirqs last disabled at (0): [<ffffffff810fff0c>] copy_process+0x11cc/0x2b10
[   47.171323] softirqs last  enabled at (0): [<ffffffff810fff10>] copy_process+0x11d0/0x2b10
[   47.171908] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   47.172348] ---[ end trace 0000000000000000 ]---
[   47.172848] ------------[ cut here ]------------
[   47.173380] WARNING: CPU: 1 PID: 895 at drivers/iommu/iommufd/pages.c:886 update_unpinned+0x75/0x80
[   47.174038] Modules linked in:
[   47.174264] CPU: 1 PID: 895 Comm: repro Tainted: G    B   W          6.1.0-a0a6c76cf2a5+ #1
[   47.174832] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   47.175609] RIP: 0010:update_unpinned+0x75/0x80
[   47.175940] Code: ac 2b ff 48 89 de 31 c9 31 d2 4c 29 e6 4c 89 ef e8 70 fb ff ff e8 bb ac 2b ff 5b 41 5c 41 5d 5d c3 cc cc cc cc e8 ab ac 2b ff <0f> 0b eb e7 0f 1f 80 00 00 00 00 0f 1f 44 00 00 55 48 89 e5 41 57
[   47.177257] RSP: 0018:ffffc9000186ba08 EFLAGS: 00010246
[   47.177839] RAX: 0000000000000000 RBX: 0000000000000000 RCX: ffffffff81fdfdcf
[   47.178391] RDX: 0000000000000000 RSI: ffff88800e67d300 RDI: 0000000000000002
[   47.178901] RBP: ffffc9000186ba20 R08: 0000000000000000 R09: ffff88807dd3b890
[   47.179413] R10: 0000000000000ebb R11: 0000000000000000 R12: ffffffffffffffff
[   47.179899] R13: ffff888005ec9c00 R14: 0000000000000002 R15: 0000000000000002
[   47.180398] FS:  0000000000000000(0000) GS:ffff88807dd00000(0000) knlGS:0000000000000000
[   47.180973] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   47.181588] CR2: 00007f3777cf0500 CR3: 0000000003c12001 CR4: 0000000000770ee0
[   47.182082] PKRU: 55555554
[   47.182279] Call Trace:
[   47.182457]  <TASK>
[   47.182636]  iopt_pages_unfill_xarray+0x522/0x5c0
[   47.182998]  ? rcu_read_lock_held_common+0x12/0x50
[   47.183341]  ? write_comp_data+0x2f/0x90
[   47.183640]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   47.183979]  ? write_comp_data+0x2f/0x90
[   47.184267]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   47.184612]  ? interval_tree_remove+0x291/0x4e0
[   47.184990]  ? write_comp_data+0x2f/0x90
[   47.185457]  iopt_area_remove_access+0x108/0x120
[   47.185977]  iommufd_access_unpin_pages+0x177/0x210
[   47.186416]  iommufd_test_access_unmap+0xe0/0x130
[   47.186780]  ? iommufd_test_access_unmap+0x130/0x130
[   47.187139]  iommufd_test_staccess_release+0x39/0x60
[   47.187498]  __fput+0x11f/0x450
[   47.187746]  ____fput+0x1e/0x30
[   47.187995]  task_work_run+0xb6/0x120
[   47.188273]  do_exit+0x521/0x1340
[   47.188520]  ? lock_release+0x202/0x2c0
[   47.188825]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   47.189368]  ? trace_hardirqs_on+0x3f/0x100
[   47.189797]  do_group_exit+0x5e/0xf0
[   47.190079]  __x64_sys_exit_group+0x25/0x30
[   47.190378]  do_syscall_64+0x3b/0x90
[   47.190653]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   47.191027] RIP: 0033:0x7f3777be6cf6
[   47.191295] Code: Unable to access opcode bytes at 0x7f3777be6ccc.
[   47.191723] RSP: 002b:00007ffd0d7278d8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
[   47.192259] RAX: ffffffffffffffda RBX: 00007f3777cf1490 RCX: 00007f3777be6cf6
[   47.192772] RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
[   47.193558] RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffff80
[   47.194046] R10: 0000000000000004 R11: 0000000000000246 R12: 00007f3777cf1490
[   47.194565] R13: 0000000000000001 R14: 00007f3777cf4e88 R15: 0000000000000000
[   47.195069]  </TASK>
[   47.195238] irq event stamp: 0
[   47.195471] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   47.195906] hardirqs last disabled at (0): [<ffffffff810fff0c>] copy_process+0x11cc/0x2b10
[   47.196488] softirqs last  enabled at (0): [<ffffffff810fff10>] copy_process+0x11d0/0x2b10
[   47.197085] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   47.197768] ---[ end trace 0000000000000000 ]---
[   47.198290] ------------[ cut here ]------------
[   47.198635] WARNING: CPU: 1 PID: 895 at drivers/iommu/iommufd/pages.c:1181 iopt_release_pages+0x159/0x190
[   47.199297] Modules linked in:
[   47.199524] CPU: 1 PID: 895 Comm: repro Tainted: G    B   W          6.1.0-a0a6c76cf2a5+ #1
[   47.200100] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   47.200913] RIP: 0010:iopt_release_pages+0x159/0x190
[   47.201471] Code: b5 11 ff eb cb e8 87 90 2b ff be 03 00 00 00 4c 89 f7 e8 6a 8b ce ff eb b7 e8 73 90 2b ff 0f 0b e9 ed fe ff ff e8 67 90 2b ff <0f> 0b e9 00 ff ff ff e8 5b 90 2b ff 0f 0b e9 07 ff ff ff e8 4f 90
[   47.202734] RSP: 0018:ffffc9000186bc88 EFLAGS: 00010246
[   47.203128] RAX: 0000000000000000 RBX: ffff888005ec9c00 RCX: ffffffff81fe1957
[   47.203656] RDX: 0000000000000000 RSI: ffff88800e67d300 RDI: 0000000000000002
[   47.204195] RBP: ffffc9000186bca8 R08: 0000000000000000 R09: 0000000000000000
[   47.204754] R10: ffffc9000186bc58 R11: 0000000000000000 R12: ffffffffffffffff
[   47.205464] R13: 0000000001000000 R14: 00000000017fffff R15: 0000000000000000
[   47.206009] FS:  0000000000000000(0000) GS:ffff88807dd00000(0000) knlGS:0000000000000000
[   47.206614] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   47.207033] CR2: 00007f3777cf0500 CR3: 0000000003c12001 CR4: 0000000000770ee0
[   47.207564] PKRU: 55555554
[   47.207780] Call Trace:
[   47.207973]  <TASK>
[   47.208153]  iopt_unmap_iova_range+0x1ef/0x2e0
[   47.208499]  iopt_unmap_all+0x2f/0x60
[   47.208813]  iommufd_ioas_destroy+0x2c/0x70
[   47.209324]  iommufd_fops_release+0xd4/0x170
[   47.209811]  ? iommufd_ctx_get+0x30/0x30
[   47.210126]  __fput+0x11f/0x450
[   47.210389]  ____fput+0x1e/0x30
[   47.210645]  task_work_run+0xb6/0x120
[   47.210931]  do_exit+0x521/0x1340
[   47.211185]  ? lock_release+0x202/0x2c0
[   47.211490]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   47.211861]  ? trace_hardirqs_on+0x3f/0x100
[   47.212199]  do_group_exit+0x5e/0xf0
[   47.212489]  __x64_sys_exit_group+0x25/0x30
[   47.212841]  do_syscall_64+0x3b/0x90
[   47.213268]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   47.213842] RIP: 0033:0x7f3777be6cf6
[   47.214133] Code: Unable to access opcode bytes at 0x7f3777be6ccc.
[   47.214605] RSP: 002b:00007ffd0d7278d8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
[   47.215149] RAX: ffffffffffffffda RBX: 00007f3777cf1490 RCX: 00007f3777be6cf6
[   47.215682] RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
[   47.216222] RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffff80
[   47.216782] R10: 0000000000000004 R11: 0000000000000246 R12: 00007f3777cf1490
[   47.217511] R13: 0000000000000001 R14: 00007f3777cf4e88 R15: 0000000000000000
[   47.218051]  </TASK>
[   47.218227] irq event stamp: 0
[   47.218466] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   47.218932] hardirqs last disabled at (0): [<ffffffff810fff0c>] copy_process+0x11cc/0x2b10
[   47.219546] softirqs last  enabled at (0): [<ffffffff810fff10>] copy_process+0x11d0/0x2b10
[   47.220174] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   47.220637] ---[ end trace 0000000000000000 ]---
[   47.239148] ------------[ cut here ]------------
[   47.239509] WARNING: CPU: 1 PID: 896 at drivers/iommu/iommufd/pages.c:294 __iopt_area_unfill_domain+0x152/0x560
[   47.240222] Modules linked in:
[   47.240444] CPU: 1 PID: 896 Comm: repro Tainted: G    B   W          6.1.0-a0a6c76cf2a5+ #1
[   47.241057] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   47.242031] RIP: 0010:__iopt_area_unfill_domain+0x152/0x560
[   47.242433] Code: a1 2b ff 44 8b 64 24 54 48 8b 44 24 48 31 ff 44 89 e6 48 89 44 24 38 e8 6c a2 2b ff 45 85 e4 0f 85 eb 01 00 00 e8 ee a0 2b ff <0f> 0b e8 e7 a0 2b ff 48 8b 44 24 38 89 5c 24 58 89 18 8b 44 24 54
[   47.243695] RSP: 0018:ffffc90001873ae0 EFLAGS: 00010246
[   47.244073] RAX: 0000000000000000 RBX: 00000000ffffffff RCX: ffffffff81fe0bd5
[   47.244572] RDX: 0000000000000000 RSI: ffff88800e67a980 RDI: 0000000000000002
[   47.245108] RBP: ffffc90001873d10 R08: 000000000003b5c5 R09: 000000000000000c
[   47.245809] R10: 000000000003b5a0 R11: 0000000000000024 R12: 0000000000000002
[   47.246311] R13: 0000000000000801 R14: 00000000000007ff R15: 0000000000000800
[   47.246815] FS:  00007f3777af9740(0000) GS:ffff88807dd00000(0000) knlGS:0000000000000000
[   47.247380] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   47.247784] CR2: 00007f3777c1e580 CR3: 000000000cab8002 CR4: 0000000000770ee0
[   47.248283] PKRU: 55555554
[   47.248478] Call Trace:
[   47.248673]  <TASK>
[   47.248954]  ? rcu_read_lock_sched_held+0x29/0x80
[   47.249495]  ? lock_acquire+0x1a1/0x2f0
[   47.249780]  ? rcu_read_lock_held_common+0x12/0x50
[   47.250124]  ? rcu_read_lock_sched_held+0x29/0x80
[   47.250487]  ? __mutex_lock+0x13a/0xf30
[   47.250780]  ? write_comp_data+0x2f/0x90
[   47.251066]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   47.251417]  iopt_area_unfill_domain+0x32/0x40
[   47.251760]  iopt_table_remove_domain+0x23f/0x4c0
[   47.252101]  iommufd_device_selftest_detach+0x3a/0x90
[   47.252466]  iommufd_selftest_destroy+0x55/0x70
[   47.252832]  iommufd_object_destroy_user+0xce/0x130
[   47.253394]  iommufd_destroy+0xa2/0xc0
[   47.253830]  iommufd_fops_ioctl+0x1ef/0x310
[   47.254198]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   47.254554]  ? write_comp_data+0x2f/0x90
[   47.254862]  __x64_sys_ioctl+0x10e/0x160
[   47.255166]  ? iommufd_get_object.part.6+0x1c0/0x1c0
[   47.255531]  do_syscall_64+0x3b/0x90
[   47.255812]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   47.256174] RIP: 0033:0x7f3777c1e59d
[   47.256440] Code: 00 c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d d3 08 0d 00 f7 d8 64 89 01 48
[   47.257785] RSP: 002b:00007ffd0d727918 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   47.258606] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f3777c1e59d
[   47.259116] RDX: 0000000020000140 RSI: 0000000000003b80 RDI: 0000000000000003
[   47.259628] RBP: 00007ffd0d727930 R08: 00007ffd0d727930 R09: 00007ffd0d727930
[   47.260129] R10: 00007ffd0d727930 R11: 0000000000000213 R12: 0000000000401180
[   47.260622] R13: 00007ffd0d727a50 R14: 0000000000000000 R15: 0000000000000000
[   47.261155]  </TASK>
[   47.261419] irq event stamp: 0
[   47.261761] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   47.262213] hardirqs last disabled at (0): [<ffffffff810fff0c>] copy_process+0x11cc/0x2b10
[   47.262796] softirqs last  enabled at (0): [<ffffffff810fff10>] copy_process+0x11d0/0x2b10
[   47.263374] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   47.263812] ---[ end trace 0000000000000000 ]---
[   47.264250] ------------[ cut here ]------------
[   47.264575] WARNING: CPU: 1 PID: 896 at drivers/iommu/iommufd/pages.c:1290 __iopt_area_unfill_domain+0x54f/0x560
[   47.265331] Modules linked in:
[   47.265698] CPU: 1 PID: 896 Comm: repro Tainted: G    B   W          6.1.0-a0a6c76cf2a5+ #1
[   47.266455] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   47.267254] RIP: 0010:__iopt_area_unfill_domain+0x54f/0x560
[   47.267666] Code: e8 86 9e 2b ff 85 db 0f 85 35 fb ff ff e8 09 9d 2b ff 0f 0b e9 29 fb ff ff e8 fd 9c 2b ff 0f 0b e9 69 fe ff ff e8 f1 9c 2b ff <0f> 0b e9 58 ff ff ff e8 65 2d dc 00 0f 1f 44 00 00 0f 1f 44 00 00
[   47.268977] RSP: 0018:ffffc90001873ae0 EFLAGS: 00010246
[   47.269486] RAX: 0000000000000000 RBX: 00000000ffffffff RCX: ffffffff81fe0d26
[   47.269992] RDX: 0000000000000000 RSI: ffff88800e67a980 RDI: 0000000000000002
[   47.270488] RBP: ffffc90001873d10 R08: 000000000003b5c5 R09: 000000000000000c
[   47.271000] R10: 000000000003b5a0 R11: 0000000000000024 R12: 00000000000007ff
[   47.271506] R13: 0000000000000801 R14: 00000000000007ff R15: 0000000000000800
[   47.272014] FS:  00007f3777af9740(0000) GS:ffff88807dd00000(0000) knlGS:0000000000000000
[   47.272563] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   47.272999] CR2: 00007f3777c1e580 CR3: 000000000cab8002 CR4: 0000000000770ee0
[   47.273762] PKRU: 55555554
[   47.273974] Call Trace:
[   47.274156]  <TASK>
[   47.274327]  ? rcu_read_lock_sched_held+0x29/0x80
[   47.274683]  ? lock_acquire+0x1a1/0x2f0
[   47.274981]  ? rcu_read_lock_held_common+0x12/0x50
[   47.275331]  ? rcu_read_lock_sched_held+0x29/0x80
[   47.275676]  ? __mutex_lock+0x13a/0xf30
[   47.275976]  ? write_comp_data+0x2f/0x90
[   47.276262]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   47.276608]  iopt_area_unfill_domain+0x32/0x40
[   47.276963]  iopt_table_remove_domain+0x23f/0x4c0
[   47.277504]  iommufd_device_selftest_detach+0x3a/0x90
[   47.278092]  iommufd_selftest_destroy+0x55/0x70
[   47.278420]  iommufd_object_destroy_user+0xce/0x130
[   47.278793]  iommufd_destroy+0xa2/0xc0
[   47.279079]  iommufd_fops_ioctl+0x1ef/0x310
[   47.279405]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   47.279753]  ? write_comp_data+0x2f/0x90
[   47.280050]  __x64_sys_ioctl+0x10e/0x160
[   47.280366]  ? iommufd_get_object.part.6+0x1c0/0x1c0
[   47.280751]  do_syscall_64+0x3b/0x90
[   47.281178]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   47.281699] RIP: 0033:0x7f3777c1e59d
[   47.281960] Code: 00 c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d d3 08 0d 00 f7 d8 64 89 01 48
[   47.283248] RSP: 002b:00007ffd0d727918 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   47.283785] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f3777c1e59d
[   47.284277] RDX: 0000000020000140 RSI: 0000000000003b80 RDI: 0000000000000003
[   47.284815] RBP: 00007ffd0d727930 R08: 00007ffd0d727930 R09: 00007ffd0d727930
[   47.285549] R10: 00007ffd0d727930 R11: 0000000000000213 R12: 0000000000401180
[   47.286055] R13: 00007ffd0d727a50 R14: 0000000000000000 R15: 0000000000000000
[   47.286585]  </TASK>
[   47.286758] irq event stamp: 0
[   47.286990] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   47.287451] hardirqs last disabled at (0): [<ffffffff810fff0c>] copy_process+0x11cc/0x2b10
[   47.288064] softirqs last  enabled at (0): [<ffffffff810fff10>] copy_process+0x11d0/0x2b10
[   47.288650] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   47.289414] ---[ end trace 0000000000000000 ]---
[   47.292214] ------------[ cut here ]------------
[   47.292572] WARNING: CPU: 1 PID: 896 at drivers/iommu/iommufd/pages.c:178 batch_unpin.isra.23+0x151/0x1a0
[   47.293430] Modules linked in:
[   47.293791] CPU: 1 PID: 896 Comm: repro Tainted: G    B   W          6.1.0-a0a6c76cf2a5+ #1
[   47.294460] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   47.295321] RIP: 0010:batch_unpin.isra.23+0x151/0x1a0
[   47.295695] Code: e8 c4 be 2b ff 48 8b 45 d0 48 85 c0 75 17 e8 26 bd 2b ff 48 8b 7d c8 48 89 de e8 fa bd 2b ff 48 39 5d c8 73 07 e8 0f bd 2b ff <0f> 0b e8 08 bd 2b ff 4d 29 e5 31 ff 41 83 c6 01 4c 89 ee 31 db e8
[   47.297009] RSP: 0018:ffffc900018739d8 EFLAGS: 00010246
[   47.297537] RAX: 0000000000000000 RBX: ffffffffffffffff RCX: ffffffff81fded8c
[   47.298045] RDX: 0000000000000000 RSI: ffff88800e67a980 RDI: 0000000000000002
[   47.298582] RBP: ffffc90001873a20 R08: 0000000000000000 R09: ffff88807dd3b890
[   47.299103] R10: 0000000000000eb5 R11: 0000000000000000 R12: 0000000000000001
[   47.299628] R13: 0000000000000001 R14: 0000000000000000 R15: ffff888005ec9400
[   47.300136] FS:  0000000000000000(0000) GS:ffff88807dd00000(0000) knlGS:0000000000000000
[   47.300749] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   47.301404] CR2: 00007f3777cf0500 CR3: 0000000003c12001 CR4: 0000000000770ee0
[   47.301943] PKRU: 55555554
[   47.302152] Call Trace:
[   47.302339]  <TASK>
[   47.302518]  iopt_pages_unfill_xarray+0x39f/0x5c0
[   47.302901]  ? rcu_read_lock_held_common+0x12/0x50
[   47.303261]  ? write_comp_data+0x2f/0x90
[   47.303556]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   47.303929]  ? write_comp_data+0x2f/0x90
[   47.304226]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   47.304573]  ? interval_tree_remove+0x291/0x4e0
[   47.304947]  ? write_comp_data+0x2f/0x90
[   47.305428]  iopt_area_remove_access+0x108/0x120
[   47.306017]  iommufd_access_unpin_pages+0x177/0x210
[   47.306463]  iommufd_test_access_unmap+0xe0/0x130
[   47.306842]  ? iommufd_test_access_unmap+0x130/0x130
[   47.307216]  iommufd_test_staccess_release+0x39/0x60
[   47.307583]  __fput+0x11f/0x450
[   47.307832]  ____fput+0x1e/0x30
[   47.308090]  task_work_run+0xb6/0x120
[   47.308379]  do_exit+0x521/0x1340
[   47.308636]  ? lock_release+0x202/0x2c0
[   47.309112]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   47.309608]  ? trace_hardirqs_on+0x3f/0x100
[   47.309928]  do_group_exit+0x5e/0xf0
[   47.310215]  __x64_sys_exit_group+0x25/0x30
[   47.310534]  do_syscall_64+0x3b/0x90
[   47.310813]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   47.311206] RIP: 0033:0x7f3777be6cf6
[   47.311477] Code: Unable to access opcode bytes at 0x7f3777be6ccc.
[   47.311916] RSP: 002b:00007ffd0d7278d8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
[   47.312471] RAX: ffffffffffffffda RBX: 00007f3777cf1490 RCX: 00007f3777be6cf6
[   47.313014] RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
[   47.313817] RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffff80
[   47.314412] R10: 0000000000000004 R11: 0000000000000246 R12: 00007f3777cf1490
[   47.314933] R13: 0000000000000001 R14: 00007f3777cf4e88 R15: 0000000000000000
[   47.315459]  </TASK>
[   47.315632] irq event stamp: 0
[   47.315860] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   47.316308] hardirqs last disabled at (0): [<ffffffff810fff0c>] copy_process+0x11cc/0x2b10
[   47.316938] softirqs last  enabled at (0): [<ffffffff810fff10>] copy_process+0x11d0/0x2b10
[   47.317773] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   47.318228] ---[ end trace 0000000000000000 ]---
[   47.318690] ------------[ cut here ]------------
[   47.319021] WARNING: CPU: 1 PID: 896 at drivers/iommu/iommufd/pages.c:886 update_unpinned+0x75/0x80
[   47.319701] Modules linked in:
[   47.319936] CPU: 1 PID: 896 Comm: repro Tainted: G    B   W          6.1.0-a0a6c76cf2a5+ #1
[   47.320528] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   47.321357] RIP: 0010:update_unpinned+0x75/0x80
[   47.321897] Code: ac 2b ff 48 89 de 31 c9 31 d2 4c 29 e6 4c 89 ef e8 70 fb ff ff e8 bb ac 2b ff 5b 41 5c 41 5d 5d c3 cc cc cc cc e8 ab ac 2b ff <0f> 0b eb e7 0f 1f 80 00 00 00 00 0f 1f 44 00 00 55 48 89 e5 41 57
[   47.323324] RSP: 0018:ffffc90001873a08 EFLAGS: 00010246
[   47.323723] RAX: 0000000000000000 RBX: 0000000000000000 RCX: ffffffff81fdfdcf
[   47.324234] RDX: 0000000000000000 RSI: ffff88800e67a980 RDI: 0000000000000002
[   47.324772] RBP: ffffc90001873a20 R08: 0000000000000000 R09: ffff88807dd3b890
[   47.325448] R10: 0000000000000eb5 R11: 0000000000000000 R12: ffffffffffffffff
[   47.325959] R13: ffff888005ec9400 R14: 0000000000000002 R15: 0000000000000002
[   47.326490] FS:  0000000000000000(0000) GS:ffff88807dd00000(0000) knlGS:0000000000000000
[   47.327070] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   47.327503] CR2: 00007f3777cf0500 CR3: 0000000003c12001 CR4: 0000000000770ee0
[   47.328009] PKRU: 55555554
[   47.328223] Call Trace:
[   47.328411]  <TASK>
[   47.328578]  iopt_pages_unfill_xarray+0x522/0x5c0
[   47.328998]  ? rcu_read_lock_held_common+0x12/0x50
[   47.329568]  ? write_comp_data+0x2f/0x90
[   47.330008]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   47.330379]  ? write_comp_data+0x2f/0x90
[   47.330686]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   47.331038]  ? interval_tree_remove+0x291/0x4e0
[   47.331394]  ? write_comp_data+0x2f/0x90
[   47.331692]  iopt_area_remove_access+0x108/0x120
[   47.332043]  iommufd_access_unpin_pages+0x177/0x210
[   47.332426]  iommufd_test_access_unmap+0xe0/0x130
[   47.332815]  ? iommufd_test_access_unmap+0x130/0x130
[   47.333403]  iommufd_test_staccess_release+0x39/0x60
[   47.333891]  __fput+0x11f/0x450
[   47.334142]  ____fput+0x1e/0x30
[   47.334384]  task_work_run+0xb6/0x120
[   47.334693]  do_exit+0x521/0x1340
[   47.334955]  ? lock_release+0x202/0x2c0
[   47.335245]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   47.335602]  ? trace_hardirqs_on+0x3f/0x100
[   47.335944]  do_group_exit+0x5e/0xf0
[   47.336217]  __x64_sys_exit_group+0x25/0x30
[   47.336536]  do_syscall_64+0x3b/0x90
[   47.336839]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   47.337431] RIP: 0033:0x7f3777be6cf6
[   47.337856] Code: Unable to access opcode bytes at 0x7f3777be6ccc.
[   47.338529] RSP: 002b:00007ffd0d7278d8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
[   47.339413] RAX: ffffffffffffffda RBX: 00007f3777cf1490 RCX: 00007f3777be6cf6
[   47.340239] RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
[   47.341045] RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffff80
[   47.341888] R10: 0000000000000004 R11: 0000000000000246 R12: 00007f3777cf1490
[   47.342707] R13: 0000000000000001 R14: 00007f3777cf4e88 R15: 0000000000000000
[   47.343525]  </TASK>
[   47.343797] irq event stamp: 0
[   47.344207] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   47.344935] hardirqs last disabled at (0): [<ffffffff810fff0c>] copy_process+0x11cc/0x2b10
[   47.345882] softirqs last  enabled at (0): [<ffffffff810fff10>] copy_process+0x11d0/0x2b10
[   47.346810] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   47.347533] ---[ end trace 0000000000000000 ]---
[   47.348325] ------------[ cut here ]------------
[   47.348868] WARNING: CPU: 1 PID: 896 at drivers/iommu/iommufd/pages.c:1181 iopt_release_pages+0x159/0x190
[   47.349972] Modules linked in:
[   47.350330] CPU: 1 PID: 896 Comm: repro Tainted: G    B   W          6.1.0-a0a6c76cf2a5+ #1
[   47.351326] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   47.352613] RIP: 0010:iopt_release_pages+0x159/0x190
[   47.353248] Code: b5 11 ff eb cb e8 87 90 2b ff be 03 00 00 00 4c 89 f7 e8 6a 8b ce ff eb b7 e8 73 90 2b ff 0f 0b e9 ed fe ff ff e8 67 90 2b ff <0f> 0b e9 00 ff ff ff e8 5b 90 2b ff 0f 0b e9 07 ff ff ff e8 4f 90
[   47.355331] RSP: 0018:ffffc90001873c88 EFLAGS: 00010246
[   47.355948] RAX: 0000000000000000 RBX: ffff888005ec9400 RCX: ffffffff81fe1957
[   47.356744] RDX: 0000000000000000 RSI: ffff88800e67a980 RDI: 0000000000000002
[   47.357564] RBP: ffffc90001873ca8 R08: 0000000000000000 R09: 0000000000000000
[   47.358365] R10: ffffc90001873c58 R11: 0000000000000000 R12: ffffffffffffffff
[   47.359169] R13: 0000000001000000 R14: 00000000017fffff R15: 0000000000000000
[   47.360007] FS:  0000000000000000(0000) GS:ffff88807dd00000(0000) knlGS:0000000000000000
[   47.360947] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   47.361630] CR2: 00007f3777cf0500 CR3: 0000000003c12001 CR4: 0000000000770ee0
[   47.362495] PKRU: 55555554
[   47.362816] Call Trace:
[   47.363110]  <TASK>
[   47.363392]  iopt_unmap_iova_range+0x1ef/0x2e0
[   47.363935]  iopt_unmap_all+0x2f/0x60
[   47.364377]  iommufd_ioas_destroy+0x2c/0x70
[   47.364916]  iommufd_fops_release+0xd4/0x170
[   47.365437]  ? iommufd_ctx_get+0x30/0x30
[   47.365922]  __fput+0x11f/0x450
[   47.366328]  ____fput+0x1e/0x30
[   47.366769]  task_work_run+0xb6/0x120
[   47.367218]  do_exit+0x521/0x1340
[   47.367626]  ? lock_release+0x202/0x2c0
[   47.368120]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   47.368689]  ? trace_hardirqs_on+0x3f/0x100
[   47.369211]  do_group_exit+0x5e/0xf0
[   47.369656]  __x64_sys_exit_group+0x25/0x30
[   47.370211]  do_syscall_64+0x3b/0x90
[   47.370646]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   47.371242] RIP: 0033:0x7f3777be6cf6
[   47.371693] Code: Unable to access opcode bytes at 0x7f3777be6ccc.
[   47.372405] RSP: 002b:00007ffd0d7278d8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
[   47.373286] RAX: ffffffffffffffda RBX: 00007f3777cf1490 RCX: 00007f3777be6cf6
[   47.374106] RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
[   47.374953] RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffff80
[   47.375748] R10: 0000000000000004 R11: 0000000000000246 R12: 00007f3777cf1490
[   47.376558] R13: 0000000000000001 R14: 00007f3777cf4e88 R15: 0000000000000000
[   47.377401]  </TASK>
[   47.377674] irq event stamp: 0
[   47.378052] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   47.378782] hardirqs last disabled at (0): [<ffffffff810fff0c>] copy_process+0x11cc/0x2b10
[   47.379721] softirqs last  enabled at (0): [<ffffffff810fff10>] copy_process+0x11d0/0x2b10
[   47.380726] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   47.381454] ---[ end trace 0000000000000000 ]---
[   47.450129] ------------[ cut here ]------------
[   47.450517] WARNING: CPU: 1 PID: 899 at drivers/iommu/iommufd/pages.c:178 batch_unpin.isra.23+0x151/0x1a0
[   47.451227] Modules linked in:
[   47.451459] CPU: 1 PID: 899 Comm: repro Tainted: G    B   W          6.1.0-a0a6c76cf2a5+ #1
[   47.452051] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   47.452899] RIP: 0010:batch_unpin.isra.23+0x151/0x1a0
[   47.453448] Code: e8 c4 be 2b ff 48 8b 45 d0 48 85 c0 75 17 e8 26 bd 2b ff 48 8b 7d c8 48 89 de e8 fa bd 2b ff 48 39 5d c8 73 07 e8 0f bd 2b ff <0f> 0b e8 08 bd 2b ff 4d 29 e5 31 ff 41 83 c6 01 4c 89 ee 31 db e8
[   47.454851] RSP: 0018:ffffc9000188ba88 EFLAGS: 00010246
[   47.455242] RAX: 0000000000000000 RBX: ffffffffffffffff RCX: ffffffff81fded8c
[   47.455746] RDX: 0000000000000000 RSI: ffff88800e67d300 RDI: 0000000000000002
[   47.456265] RBP: ffffc9000188bad0 R08: 000000000003b5c5 R09: 0000000000000005
[   47.456796] R10: 000000000003b5a0 R11: 0000000000000024 R12: 0000000000000001
[   47.457497] R13: 0000000000000001 R14: 00000000000005ca R15: ffff888005ec9c00
[   47.458008] FS:  00007f3777af9740(0000) GS:ffff88807dd00000(0000) knlGS:0000000000000000
[   47.458601] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   47.459025] CR2: 00007f3777c1e580 CR3: 000000000caaa005 CR4: 0000000000770ee0
[   47.459566] PKRU: 55555554
[   47.459777] Call Trace:
[   47.459961]  <TASK>
[   47.460130]  __iopt_area_unfill_domain+0x257/0x560
[   47.460514]  ? rcu_read_lock_sched_held+0x29/0x80
[   47.460897]  ? lock_acquire+0x1a1/0x2f0
[   47.461365]  ? rcu_read_lock_held_common+0x12/0x50
[   47.461914]  ? rcu_read_lock_sched_held+0x29/0x80
[   47.462268]  ? __mutex_lock+0x13a/0xf30
[   47.462570]  ? write_comp_data+0x2f/0x90
[   47.462869]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   47.463239]  iopt_area_unfill_domain+0x32/0x40
[   47.463585]  iopt_table_remove_domain+0x23f/0x4c0
[   47.463946]  iommufd_device_selftest_detach+0x3a/0x90
[   47.464347]  iommufd_selftest_destroy+0x55/0x70
[   47.464719]  iommufd_object_destroy_user+0xce/0x130
[   47.465304]  iommufd_destroy+0xa2/0xc0
[   47.465702]  iommufd_fops_ioctl+0x1ef/0x310
[   47.466013]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   47.466359]  ? write_comp_data+0x2f/0x90
[   47.466685]  __x64_sys_ioctl+0x10e/0x160
[   47.466997]  ? iommufd_get_object.part.6+0x1c0/0x1c0
[   47.467369]  do_syscall_64+0x3b/0x90
[   47.467645]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   47.468033] RIP: 0033:0x7f3777c1e59d
[   47.468304] Code: 00 c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d d3 08 0d 00 f7 d8 64 89 01 48
[   47.469625] RSP: 002b:00007ffd0d727918 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   47.470492] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f3777c1e59d
[   47.471063] RDX: 0000000020000140 RSI: 0000000000003b80 RDI: 0000000000000003
[   47.471566] RBP: 00007ffd0d727930 R08: 00007ffd0d727930 R09: 00007ffd0d727930
[   47.472077] R10: 00007ffd0d727930 R11: 0000000000000213 R12: 0000000000401180
[   47.472574] R13: 00007ffd0d727a50 R14: 0000000000000000 R15: 0000000000000000
[   47.473127]  </TASK>
[   47.473399] irq event stamp: 0
[   47.473726] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   47.474184] hardirqs last disabled at (0): [<ffffffff810fff0c>] copy_process+0x11cc/0x2b10
[   47.474791] softirqs last  enabled at (0): [<ffffffff810fff10>] copy_process+0x11d0/0x2b10
[   47.475413] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   47.475864] ---[ end trace 0000000000000000 ]---
[   47.476302] ------------[ cut here ]------------
[   47.476632] WARNING: CPU: 1 PID: 899 at drivers/iommu/iommufd/pages.c:294 __iopt_area_unfill_domain+0x152/0x560
[   47.477625] Modules linked in:
[   47.477868] CPU: 1 PID: 899 Comm: repro Tainted: G    B   W          6.1.0-a0a6c76cf2a5+ #1
[   47.478487] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   47.479294] RIP: 0010:__iopt_area_unfill_domain+0x152/0x560
[   47.479708] Code: a1 2b ff 44 8b 64 24 54 48 8b 44 24 48 31 ff 44 89 e6 48 89 44 24 38 e8 6c a2 2b ff 45 85 e4 0f 85 eb 01 00 00 e8 ee a0 2b ff <0f> 0b e8 e7 a0 2b ff 48 8b 44 24 38 89 5c 24 58 89 18 8b 44 24 54
[   47.481138] RSP: 0018:ffffc9000188bae0 EFLAGS: 00010246
[   47.481699] RAX: 0000000000000000 RBX: 00000000fffffffe RCX: ffffffff81fe0bd5
[   47.482223] RDX: 0000000000000000 RSI: ffff88800e67d300 RDI: 0000000000000002
[   47.482748] RBP: ffffc9000188bd10 R08: 000000000003b5c5 R09: 0000000000000005
[   47.483251] R10: 000000000003b5a0 R11: 0000000000000024 R12: 0000000000000001
[   47.483768] R13: 0000000000000802 R14: 00000000000007ff R15: 0000000000000800
[   47.484269] FS:  00007f3777af9740(0000) GS:ffff88807dd00000(0000) knlGS:0000000000000000
[   47.484878] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   47.485515] CR2: 00007f3777c1e580 CR3: 000000000caaa005 CR4: 0000000000770ee0
[   47.486051] PKRU: 55555554
[   47.486258] Call Trace:
[   47.486442]  <TASK>
[   47.486648]  ? rcu_read_lock_sched_held+0x29/0x80
[   47.487005]  ? lock_acquire+0x1a1/0x2f0
[   47.487300]  ? rcu_read_lock_held_common+0x12/0x50
[   47.487662]  ? rcu_read_lock_sched_held+0x29/0x80
[   47.488032]  ? __mutex_lock+0x13a/0xf30
[   47.488329]  ? write_comp_data+0x2f/0x90
[   47.488628]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   47.489030]  iopt_area_unfill_domain+0x32/0x40
[   47.489565]  iopt_table_remove_domain+0x23f/0x4c0
[   47.490124]  iommufd_device_selftest_detach+0x3a/0x90
[   47.490574]  iommufd_selftest_destroy+0x55/0x70
[   47.490929]  iommufd_object_destroy_user+0xce/0x130
[   47.491300]  iommufd_destroy+0xa2/0xc0
[   47.491589]  iommufd_fops_ioctl+0x1ef/0x310
[   47.491902]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   47.492266]  ? write_comp_data+0x2f/0x90
[   47.492564]  __x64_sys_ioctl+0x10e/0x160
[   47.492895]  ? iommufd_get_object.part.6+0x1c0/0x1c0
[   47.493495]  do_syscall_64+0x3b/0x90
[   47.493848]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   47.494234] RIP: 0033:0x7f3777c1e59d
[   47.494513] Code: 00 c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d d3 08 0d 00 f7 d8 64 89 01 48
[   47.495825] RSP: 002b:00007ffd0d727918 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   47.496375] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f3777c1e59d
[   47.496909] RDX: 0000000020000140 RSI: 0000000000003b80 RDI: 0000000000000003
[   47.497633] RBP: 00007ffd0d727930 R08: 00007ffd0d727930 R09: 00007ffd0d727930
[   47.498134] R10: 00007ffd0d727930 R11: 0000000000000213 R12: 0000000000401180
[   47.498661] R13: 00007ffd0d727a50 R14: 0000000000000000 R15: 0000000000000000
[   47.499195]  </TASK>
[   47.499366] irq event stamp: 0
[   47.499603] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   47.500050] hardirqs last disabled at (0): [<ffffffff810fff0c>] copy_process+0x11cc/0x2b10
[   47.500650] softirqs last  enabled at (0): [<ffffffff810fff10>] copy_process+0x11d0/0x2b10
[   47.501583] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   47.502031] ---[ end trace 0000000000000000 ]---
[   47.502454] ------------[ cut here ]------------
[   47.502811] WARNING: CPU: 1 PID: 899 at drivers/iommu/iommufd/pages.c:1290 __iopt_area_unfill_domain+0x54f/0x560
[   47.503542] Modules linked in:
[   47.503786] CPU: 1 PID: 899 Comm: repro Tainted: G    B   W          6.1.0-a0a6c76cf2a5+ #1
[   47.504376] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   47.505250] RIP: 0010:__iopt_area_unfill_domain+0x54f/0x560
[   47.505894] Code: e8 86 9e 2b ff 85 db 0f 85 35 fb ff ff e8 09 9d 2b ff 0f 0b e9 29 fb ff ff e8 fd 9c 2b ff 0f 0b e9 69 fe ff ff e8 f1 9c 2b ff <0f> 0b e9 58 ff ff ff e8 65 2d dc 00 0f 1f 44 00 00 0f 1f 44 00 00
[   47.507303] RSP: 0018:ffffc9000188bae0 EFLAGS: 00010246
[   47.507683] RAX: 0000000000000000 RBX: 00000000fffffffe RCX: ffffffff81fe0d26
[   47.508200] RDX: 0000000000000000 RSI: ffff88800e67d300 RDI: 0000000000000002
[   47.508734] RBP: ffffc9000188bd10 R08: 000000000003b5c5 R09: 0000000000000005
[   47.509393] R10: 000000000003b5a0 R11: 0000000000000024 R12: 00000000000007ff
[   47.509901] R13: 0000000000000802 R14: 00000000000007ff R15: 0000000000000800
[   47.510420] FS:  00007f3777af9740(0000) GS:ffff88807dd00000(0000) knlGS:0000000000000000
[   47.511012] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   47.511441] CR2: 00007f3777c1e580 CR3: 000000000caaa005 CR4: 0000000000770ee0
[   47.511947] PKRU: 55555554
[   47.512150] Call Trace:
[   47.512348]  <TASK>
[   47.512521]  ? rcu_read_lock_sched_held+0x29/0x80
[   47.512905]  ? lock_acquire+0x1a1/0x2f0
[   47.513377]  ? rcu_read_lock_held_common+0x12/0x50
[   47.513922]  ? rcu_read_lock_sched_held+0x29/0x80
[   47.514279]  ? __mutex_lock+0x13a/0xf30
[   47.514599]  ? write_comp_data+0x2f/0x90
[   47.514901]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   47.515257]  iopt_area_unfill_domain+0x32/0x40
[   47.515616]  iopt_table_remove_domain+0x23f/0x4c0
[   47.515971]  iommufd_device_selftest_detach+0x3a/0x90
[   47.516353]  iommufd_selftest_destroy+0x55/0x70
[   47.516735]  iommufd_object_destroy_user+0xce/0x130
[   47.517324]  iommufd_destroy+0xa2/0xc0
[   47.517731]  iommufd_fops_ioctl+0x1ef/0x310
[   47.518046]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   47.518396]  ? write_comp_data+0x2f/0x90
[   47.518714]  __x64_sys_ioctl+0x10e/0x160
[   47.519019]  ? iommufd_get_object.part.6+0x1c0/0x1c0
[   47.519392]  do_syscall_64+0x3b/0x90
[   47.519677]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   47.520049] RIP: 0033:0x7f3777c1e59d
[   47.520322] Code: 00 c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d d3 08 0d 00 f7 d8 64 89 01 48
[   47.521641] RSP: 002b:00007ffd0d727918 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   47.522520] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f3777c1e59d
[   47.523105] RDX: 0000000020000140 RSI: 0000000000003b80 RDI: 0000000000000003
[   47.523615] RBP: 00007ffd0d727930 R08: 00007ffd0d727930 R09: 00007ffd0d727930
[   47.524133] R10: 00007ffd0d727930 R11: 0000000000000213 R12: 0000000000401180
[   47.524637] R13: 00007ffd0d727a50 R14: 0000000000000000 R15: 0000000000000000
[   47.525193]  </TASK>
[   47.525453] irq event stamp: 0
[   47.525784] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   47.526243] hardirqs last disabled at (0): [<ffffffff810fff0c>] copy_process+0x11cc/0x2b10
[   47.526849] softirqs last  enabled at (0): [<ffffffff810fff10>] copy_process+0x11d0/0x2b10
[   47.527488] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   47.527953] ---[ end trace 0000000000000000 ]---
[   47.528398] ------------[ cut here ]------------
[   47.528757] WARNING: CPU: 1 PID: 899 at drivers/iommu/iommufd/pages.c:886 update_unpinned+0x75/0x80
[   47.529644] Modules linked in:
[   47.529874] CPU: 1 PID: 899 Comm: repro Tainted: G    B   W          6.1.0-a0a6c76cf2a5+ #1
[   47.530488] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   47.531304] RIP: 0010:update_unpinned+0x75/0x80
[   47.531660] Code: ac 2b ff 48 89 de 31 c9 31 d2 4c 29 e6 4c 89 ef e8 70 fb ff ff e8 bb ac 2b ff 5b 41 5c 41 5d 5d c3 cc cc cc cc e8 ab ac 2b ff <0f> 0b eb e7 0f 1f 80 00 00 00 00 0f 1f 44 00 00 55 48 89 e5 41 57
[   47.533017] RSP: 0018:ffffc9000188bab8 EFLAGS: 00010246
[   47.533606] RAX: 0000000000000000 RBX: 0000000000000800 RCX: ffffffff81fdfdcf
[   47.534110] RDX: 0000000000000000 RSI: ffff88800e67d300 RDI: 0000000000000002
[   47.534631] RBP: ffffc9000188bad0 R08: 0000000000000000 R09: ffff88807dd3b920
[   47.535148] R10: 00000000000006f0 R11: 0000000000000009 R12: ffffffffffffffff
[   47.535642] R13: ffff888005ec9c00 R14: 00000000000007ff R15: 0000000000000800
[   47.536155] FS:  00007f3777af9740(0000) GS:ffff88807dd00000(0000) knlGS:0000000000000000
[   47.536769] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   47.537421] CR2: 00007f3777c1e580 CR3: 000000000caaa005 CR4: 0000000000770ee0
[   47.537938] PKRU: 55555554
[   47.538142] Call Trace:
[   47.538325]  <TASK>
[   47.538501]  __iopt_area_unfill_domain+0x4e1/0x560
[   47.538891]  ? rcu_read_lock_sched_held+0x29/0x80
[   47.539262]  ? lock_acquire+0x1a1/0x2f0
[   47.539553]  ? rcu_read_lock_held_common+0x12/0x50
[   47.539910]  ? rcu_read_lock_sched_held+0x29/0x80
[   47.540268]  ? __mutex_lock+0x13a/0xf30
[   47.540562]  ? write_comp_data+0x2f/0x90
[   47.540883]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   47.541449]  iopt_area_unfill_domain+0x32/0x40
[   47.541985]  iopt_table_remove_domain+0x23f/0x4c0
[   47.542406]  iommufd_device_selftest_detach+0x3a/0x90
[   47.542812]  iommufd_selftest_destroy+0x55/0x70
[   47.543179]  iommufd_object_destroy_user+0xce/0x130
[   47.543544]  iommufd_destroy+0xa2/0xc0
[   47.543830]  iommufd_fops_ioctl+0x1ef/0x310
[   47.544142]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   47.544511]  ? write_comp_data+0x2f/0x90
[   47.544853]  __x64_sys_ioctl+0x10e/0x160
[   47.545327]  ? iommufd_get_object.part.6+0x1c0/0x1c0
[   47.545824]  do_syscall_64+0x3b/0x90
[   47.546096]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   47.546493] RIP: 0033:0x7f3777c1e59d
[   47.546780] Code: 00 c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d d3 08 0d 00 f7 d8 64 89 01 48
[   47.548102] RSP: 002b:00007ffd0d727918 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   47.548650] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f3777c1e59d
[   47.549400] RDX: 0000000020000140 RSI: 0000000000003b80 RDI: 0000000000000003
[   47.549915] RBP: 00007ffd0d727930 R08: 00007ffd0d727930 R09: 00007ffd0d727930
[   47.550435] R10: 00007ffd0d727930 R11: 0000000000000213 R12: 0000000000401180
[   47.550982] R13: 00007ffd0d727a50 R14: 0000000000000000 R15: 0000000000000000
[   47.551501]  </TASK>
[   47.551678] irq event stamp: 0
[   47.551916] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   47.552363] hardirqs last disabled at (0): [<ffffffff810fff0c>] copy_process+0x11cc/0x2b10
[   47.553001] softirqs last  enabled at (0): [<ffffffff810fff10>] copy_process+0x11d0/0x2b10
[   47.553914] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   47.554360] ---[ end trace 0000000000000000 ]---
[   47.557646] ------------[ cut here ]------------
[   47.558009] WARNING: CPU: 0 PID: 899 at drivers/iommu/iommufd/pages.c:178 batch_unpin.isra.23+0x151/0x1a0
[   47.558744] Modules linked in:
[   47.558976] CPU: 0 PID: 899 Comm: repro Tainted: G    B   W          6.1.0-a0a6c76cf2a5+ #1
[   47.559578] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   47.560407] RIP: 0010:batch_unpin.isra.23+0x151/0x1a0
[   47.560819] Code: e8 c4 be 2b ff 48 8b 45 d0 48 85 c0 75 17 e8 26 bd 2b ff 48 8b 7d c8 48 89 de e8 fa bd 2b ff 48 39 5d c8 73 07 e8 0f bd 2b ff <0f> 0b e8 08 bd 2b ff 4d 29 e5 31 ff 41 83 c6 01 4c 89 ee 31 db e8
[   47.562377] RSP: 0018:ffffc9000188b9d8 EFLAGS: 00010246
[   47.562776] RAX: 0000000000000000 RBX: fffffffffffffffe RCX: ffffffff81fdeda6
[   47.563301] RDX: 0000000000000000 RSI: ffff88800e67d300 RDI: 0000000000000002
[   47.563819] RBP: ffffc9000188ba20 R08: 0000000000000000 R09: ffff88807dc3b890
[   47.564322] R10: 00000000000010b7 R11: 0000000000000000 R12: 0000000000000001
[   47.564908] R13: 0000000000000001 R14: 0000000000000000 R15: ffff888005ec9c00
[   47.565595] FS:  0000000000000000(0000) GS:ffff88807dc00000(0000) knlGS:0000000000000000
[   47.566187] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   47.566620] CR2: 00007f3777cf0500 CR3: 0000000003c12004 CR4: 0000000000770ef0
[   47.567151] PKRU: 55555554
[   47.567356] Call Trace:
[   47.567541]  <TASK>
[   47.567709]  iopt_pages_unfill_xarray+0x39f/0x5c0
[   47.568081]  ? rcu_read_lock_held_common+0x12/0x50
[   47.568435]  ? write_comp_data+0x2f/0x90
[   47.568759]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   47.569332]  ? write_comp_data+0x2f/0x90
[   47.569783]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   47.570149]  ? interval_tree_remove+0x291/0x4e0
[   47.570507]  ? write_comp_data+0x2f/0x90
[   47.570817]  iopt_area_remove_access+0x108/0x120
[   47.571177]  iommufd_access_unpin_pages+0x177/0x210
[   47.571556]  iommufd_test_access_unmap+0xe0/0x130
[   47.571925]  ? iommufd_test_access_unmap+0x130/0x130
[   47.572293]  iommufd_test_staccess_release+0x39/0x60
[   47.572690]  __fput+0x11f/0x450
[   47.573096]  ____fput+0x1e/0x30
[   47.573486]  task_work_run+0xb6/0x120
[   47.573846]  do_exit+0x521/0x1340
[   47.574114]  ? lock_release+0x202/0x2c0
[   47.574404]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   47.574775]  ? trace_hardirqs_on+0x3f/0x100
[   47.575109]  do_group_exit+0x5e/0xf0
[   47.575384]  __x64_sys_exit_group+0x25/0x30
[   47.575690]  do_syscall_64+0x3b/0x90
[   47.575964]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   47.576344] RIP: 0033:0x7f3777be6cf6
[   47.576613] Code: Unable to access opcode bytes at 0x7f3777be6ccc.
[   47.577084] RSP: 002b:00007ffd0d7278d8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
[   47.577947] RAX: ffffffffffffffda RBX: 00007f3777cf1490 RCX: 00007f3777be6cf6
[   47.578555] RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
[   47.579072] RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffff80
[   47.579597] R10: 0000000000000004 R11: 0000000000000246 R12: 00007f3777cf1490
[   47.580101] R13: 0000000000000001 R14: 00007f3777cf4e88 R15: 0000000000000000
[   47.580620]  </TASK>
[   47.580818] irq event stamp: 0
[   47.581190] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   47.581746] hardirqs last disabled at (0): [<ffffffff810fff0c>] copy_process+0x11cc/0x2b10
[   47.582334] softirqs last  enabled at (0): [<ffffffff810fff10>] copy_process+0x11d0/0x2b10
[   47.582955] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   47.583417] ---[ end trace 0000000000000000 ]---
[   47.583860] ------------[ cut here ]------------
[   47.584193] WARNING: CPU: 0 PID: 899 at drivers/iommu/iommufd/pages.c:886 update_unpinned+0x75/0x80
[   47.584876] Modules linked in:
[   47.585239] CPU: 0 PID: 899 Comm: repro Tainted: G    B   W          6.1.0-a0a6c76cf2a5+ #1
[   47.585995] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   47.586822] RIP: 0010:update_unpinned+0x75/0x80
[   47.587175] Code: ac 2b ff 48 89 de 31 c9 31 d2 4c 29 e6 4c 89 ef e8 70 fb ff ff e8 bb ac 2b ff 5b 41 5c 41 5d 5d c3 cc cc cc cc e8 ab ac 2b ff <0f> 0b eb e7 0f 1f 80 00 00 00 00 0f 1f 44 00 00 55 48 89 e5 41 57
[   47.588463] RSP: 0018:ffffc9000188ba08 EFLAGS: 00010246
[   47.588868] RAX: 0000000000000000 RBX: 0000000000000800 RCX: ffffffff81fdfdcf
[   47.589564] RDX: 0000000000000000 RSI: ffff88800e67d300 RDI: 0000000000000002
[   47.590083] RBP: ffffc9000188ba20 R08: 0000000000000000 R09: ffff88807dc3b890
[   47.590593] R10: 00000000000010b7 R11: 0000000000000000 R12: fffffffffffffffe
[   47.591122] R13: ffff888005ec9c00 R14: 0000000000000002 R15: 0000000000000002
[   47.591635] FS:  0000000000000000(0000) GS:ffff88807dc00000(0000) knlGS:0000000000000000
[   47.592214] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   47.592612] CR2: 00007f3777cf0500 CR3: 0000000003c12004 CR4: 0000000000770ef0
[   47.593151] PKRU: 55555554
[   47.593475] Call Trace:
[   47.593773]  <TASK>
[   47.594036]  iopt_pages_unfill_xarray+0x522/0x5c0
[   47.594427]  ? rcu_read_lock_held_common+0x12/0x50
[   47.594794]  ? write_comp_data+0x2f/0x90
[   47.595097]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   47.595478]  ? write_comp_data+0x2f/0x90
[   47.595788]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   47.596144]  ? interval_tree_remove+0x291/0x4e0
[   47.596497]  ? write_comp_data+0x2f/0x90
[   47.596827]  iopt_area_remove_access+0x108/0x120
[   47.597378]  iommufd_access_unpin_pages+0x177/0x210
[   47.597961]  iommufd_test_access_unmap+0xe0/0x130
[   47.598516]  ? iommufd_test_access_unmap+0x130/0x130
[   47.599265]  iommufd_test_staccess_release+0x39/0x60
[   47.599978]  __fput+0x11f/0x450
[   47.600384]  ____fput+0x1e/0x30
[   47.600934]  task_work_run+0xb6/0x120
[   47.601389]  do_exit+0x521/0x1340
[   47.601785]  ? lock_release+0x202/0x2c0
[   47.602328]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   47.602897]  ? trace_hardirqs_on+0x3f/0x100
[   47.603494]  do_group_exit+0x5e/0xf0
[   47.603941]  __x64_sys_exit_group+0x25/0x30
[   47.604560]  do_syscall_64+0x3b/0x90
[   47.605017]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   47.605716] RIP: 0033:0x7f3777be6cf6
[   47.606128] Code: Unable to access opcode bytes at 0x7f3777be6ccc.
[   47.606845] RSP: 002b:00007ffd0d7278d8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
[   47.607843] RAX: ffffffffffffffda RBX: 00007f3777cf1490 RCX: 00007f3777be6cf6
[   47.608628] RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
[   47.609454] RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffff80
[   47.610346] R10: 0000000000000004 R11: 0000000000000246 R12: 00007f3777cf1490
[   47.611177] R13: 0000000000000001 R14: 00007f3777cf4e88 R15: 0000000000000000
[   47.612049]  </TASK>
[   47.612332] irq event stamp: 0
[   47.612806] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   47.613525] hardirqs last disabled at (0): [<ffffffff810fff0c>] copy_process+0x11cc/0x2b10
[   47.614563] softirqs last  enabled at (0): [<ffffffff810fff10>] copy_process+0x11d0/0x2b10
[   47.615622] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   47.616346] ---[ end trace 0000000000000000 ]---
[   47.617218] ------------[ cut here ]------------
[   47.617746] WARNING: CPU: 0 PID: 899 at drivers/iommu/iommufd/pages.c:1181 iopt_release_pages+0x159/0x190
[   47.618881] Modules linked in:
[   47.619241] CPU: 0 PID: 899 Comm: repro Tainted: G    B   W          6.1.0-a0a6c76cf2a5+ #1
[   47.620309] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   47.621559] RIP: 0010:iopt_release_pages+0x159/0x190
[   47.622106] Code: b5 11 ff eb cb e8 87 90 2b ff be 03 00 00 00 4c 89 f7 e8 6a 8b ce ff eb b7 e8 73 90 2b ff 0f 0b e9 ed fe ff ff e8 67 90 2b ff <0f> 0b e9 00 ff ff ff e8 5b 90 2b ff 0f 0b e9 07 ff ff ff e8 4f 90
[   47.623433] RSP: 0018:ffffc9000188bc88 EFLAGS: 00010246
[   47.623826] RAX: 0000000000000000 RBX: ffff888005ec9c00 RCX: ffffffff81fe1957
[   47.624344] RDX: 0000000000000000 RSI: ffff88800e67d300 RDI: 0000000000000002
[   47.624889] RBP: ffffc9000188bca8 R08: ffff888006824540 R09: 0000000080150013
[   47.625590] R10: 0000000000000001 R11: 0000000000000000 R12: fffffffffffffffe
[   47.626118] R13: 0000000001000000 R14: 00000000017fffff R15: 0000000000000000
[   47.626652] FS:  0000000000000000(0000) GS:ffff88807dc00000(0000) knlGS:0000000000000000
[   47.627232] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   47.627659] CR2: 00007f3777cf0500 CR3: 0000000003c12004 CR4: 0000000000770ef0
[   47.628181] PKRU: 55555554
[   47.628386] Call Trace:
[   47.628589]  <TASK>
[   47.628793]  iopt_unmap_iova_range+0x1ef/0x2e0
[   47.629131]  iopt_unmap_all+0x2f/0x60
[   47.629415]  iommufd_ioas_destroy+0x2c/0x70
[   47.629735]  iommufd_fops_release+0xd4/0x170
[   47.630069]  ? iommufd_ctx_get+0x30/0x30
[   47.630367]  __fput+0x11f/0x450
[   47.630628]  ____fput+0x1e/0x30
[   47.630874]  task_work_run+0xb6/0x120
[   47.631166]  do_exit+0x521/0x1340
[   47.631422]  ? lock_release+0x202/0x2c0
[   47.631714]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   47.632068]  ? trace_hardirqs_on+0x3f/0x100
[   47.632402]  do_group_exit+0x5e/0xf0
[   47.632693]  __x64_sys_exit_group+0x25/0x30
[   47.633009]  do_syscall_64+0x3b/0x90
[   47.633282]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   47.633648] RIP: 0033:0x7f3777be6cf6
[   47.633928] Code: Unable to access opcode bytes at 0x7f3777be6ccc.
[   47.634357] RSP: 002b:00007ffd0d7278d8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
[   47.634919] RAX: ffffffffffffffda RBX: 00007f3777cf1490 RCX: 00007f3777be6cf6
[   47.635439] RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
[   47.635966] RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffff80
[   47.636463] R10: 0000000000000004 R11: 0000000000000246 R12: 00007f3777cf1490
[   47.636979] R13: 0000000000000001 R14: 00007f3777cf4e88 R15: 0000000000000000
[   47.637483]  </TASK>
[   47.637651] irq event stamp: 0
[   47.637875] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   47.638315] hardirqs last disabled at (0): [<ffffffff810fff0c>] copy_process+0x11cc/0x2b10
[   47.638921] softirqs last  enabled at (0): [<ffffffff810fff10>] copy_process+0x11d0/0x2b10
[   47.639520] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   47.639972] ---[ end trace 0000000000000000 ]---
[   49.377434] ------------[ cut here ]------------
[   49.378018] WARNING: CPU: 1 PID: 953 at drivers/iommu/iommufd/pages.c:294 __iopt_area_unfill_domain+0x152/0x560
[   49.379173] Modules linked in:
[   49.379531] CPU: 1 PID: 953 Comm: repro Tainted: G    B   W          6.1.0-a0a6c76cf2a5+ #1
[   49.380457] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   49.381736] RIP: 0010:__iopt_area_unfill_domain+0x152/0x560
[   49.382427] Code: a1 2b ff 44 8b 64 24 54 48 8b 44 24 48 31 ff 44 89 e6 48 89 44 24 38 e8 6c a2 2b ff 45 85 e4 0f 85 eb 01 00 00 e8 ee a0 2b ff <0f> 0b e8 e7 a0 2b ff 48 8b 44 24 38 89 5c 24 58 89 18 8b 44 24 54
[   49.384500] RSP: 0018:ffffc90001a13ae0 EFLAGS: 00010246
[   49.385155] RAX: 0000000000000000 RBX: 00000000ffffffff RCX: ffffffff81fe0bd5
[   49.386017] RDX: 0000000000000000 RSI: ffff88800e67d300 RDI: 0000000000000002
[   49.386862] RBP: ffffc90001a13d10 R08: 000000000003b5c5 R09: 0000000000000004
[   49.387688] R10: 000000000003b5a0 R11: 0000000000000024 R12: 0000000000000001
[   49.388529] R13: 0000000000000801 R14: 00000000000007ff R15: 0000000000000800
[   49.389406] FS:  00007f3777af9740(0000) GS:ffff88807dd00000(0000) knlGS:0000000000000000
[   49.390315] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   49.390983] CR2: 00007f3777c1e580 CR3: 0000000009d6c003 CR4: 0000000000770ee0
[   49.391835] PKRU: 55555554
[   49.392168] Call Trace:
[   49.392475]  <TASK>
[   49.392801]  ? rcu_read_lock_sched_held+0x29/0x80
[   49.393375]  ? lock_acquire+0x1a1/0x2f0
[   49.393853]  ? rcu_read_lock_held_common+0x12/0x50
[   49.394438]  ? rcu_read_lock_sched_held+0x29/0x80
[   49.395011]  ? __mutex_lock+0x13a/0xf30
[   49.395488]  ? write_comp_data+0x2f/0x90
[   49.395989]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   49.396579]  iopt_area_unfill_domain+0x32/0x40
[   49.397167]  iopt_table_remove_domain+0x23f/0x4c0
[   49.397743]  iommufd_device_selftest_detach+0x3a/0x90
[   49.398349]  iommufd_selftest_destroy+0x55/0x70
[   49.398953]  iommufd_object_destroy_user+0xce/0x130
[   49.399564]  iommufd_destroy+0xa2/0xc0
[   49.400051]  iommufd_fops_ioctl+0x1ef/0x310
[   49.400567]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   49.401161]  ? write_comp_data+0x2f/0x90
[   49.401653]  __x64_sys_ioctl+0x10e/0x160
[   49.402159]  ? iommufd_get_object.part.6+0x1c0/0x1c0
[   49.402770]  do_syscall_64+0x3b/0x90
[   49.403217]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   49.403829] RIP: 0033:0x7f3777c1e59d
[   49.404282] Code: 00 c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d d3 08 0d 00 f7 d8 64 89 01 48
[   49.406352] RSP: 002b:00007ffd0d727918 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   49.407246] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f3777c1e59d
[   49.408050] RDX: 0000000020000140 RSI: 0000000000003b80 RDI: 0000000000000003
[   49.408917] RBP: 00007ffd0d727930 R08: 00007ffd0d727930 R09: 00007ffd0d727930
[   49.409726] R10: 00007ffd0d727930 R11: 0000000000000213 R12: 0000000000401180
[   49.410548] R13: 00007ffd0d727a50 R14: 0000000000000000 R15: 0000000000000000
[   49.411406]  </TASK>
[   49.411686] irq event stamp: 0
[   49.412065] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   49.412844] hardirqs last disabled at (0): [<ffffffff810fff0c>] copy_process+0x11cc/0x2b10
[   49.413802] softirqs last  enabled at (0): [<ffffffff810fff10>] copy_process+0x11d0/0x2b10
[   49.414789] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   49.415540] ---[ end trace 0000000000000000 ]---
[   49.416242] ------------[ cut here ]------------
[   49.416828] WARNING: CPU: 1 PID: 953 at drivers/iommu/iommufd/pages.c:1290 __iopt_area_unfill_domain+0x54f/0x560
[   49.418021] Modules linked in:
[   49.418379] CPU: 1 PID: 953 Comm: repro Tainted: G    B   W          6.1.0-a0a6c76cf2a5+ #1
[   49.419295] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   49.420571] RIP: 0010:__iopt_area_unfill_domain+0x54f/0x560
[   49.421287] Code: e8 86 9e 2b ff 85 db 0f 85 35 fb ff ff e8 09 9d 2b ff 0f 0b e9 29 fb ff ff e8 fd 9c 2b ff 0f 0b e9 69 fe ff ff e8 f1 9c 2b ff <0f> 0b e9 58 ff ff ff e8 65 2d dc 00 0f 1f 44 00 00 0f 1f 44 00 00
[   49.423323] RSP: 0018:ffffc90001a13ae0 EFLAGS: 00010246
[   49.423932] RAX: 0000000000000000 RBX: 00000000ffffffff RCX: ffffffff81fe0d26
[   49.424782] RDX: 0000000000000000 RSI: ffff88800e67d300 RDI: 0000000000000002
[   49.425599] RBP: ffffc90001a13d10 R08: 000000000003b5c5 R09: 0000000000000004
[   49.426435] R10: 000000000003b5a0 R11: 0000000000000024 R12: 00000000000007ff
[   49.427269] R13: 0000000000000801 R14: 00000000000007ff R15: 0000000000000800
[   49.428095] FS:  00007f3777af9740(0000) GS:ffff88807dd00000(0000) knlGS:0000000000000000
[   49.429052] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   49.429721] CR2: 00007f3777c1e580 CR3: 0000000009d6c003 CR4: 0000000000770ee0
[   49.430610] PKRU: 55555554
[   49.430951] Call Trace:
[   49.431253]  <TASK>
[   49.431545]  ? rcu_read_lock_sched_held+0x29/0x80
[   49.432078]  ? lock_acquire+0x1a1/0x2f0
[   49.432551]  ? rcu_read_lock_held_common+0x12/0x50
[   49.433092]  ? rcu_read_lock_sched_held+0x29/0x80
[   49.433658]  ? __mutex_lock+0x13a/0xf30
[   49.434139]  ? write_comp_data+0x2f/0x90
[   49.434636]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   49.435156]  iopt_area_unfill_domain+0x32/0x40
[   49.435678]  iopt_table_remove_domain+0x23f/0x4c0
[   49.436240]  iommufd_device_selftest_detach+0x3a/0x90
[   49.436875]  iommufd_selftest_destroy+0x55/0x70
[   49.437427]  iommufd_object_destroy_user+0xce/0x130
[   49.438007]  iommufd_destroy+0xa2/0xc0
[   49.438459]  iommufd_fops_ioctl+0x1ef/0x310
[   49.438949]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   49.439502]  ? write_comp_data+0x2f/0x90
[   49.439986]  __x64_sys_ioctl+0x10e/0x160
[   49.440467]  ? iommufd_get_object.part.6+0x1c0/0x1c0
[   49.441086]  do_syscall_64+0x3b/0x90
[   49.441547]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   49.442171] RIP: 0033:0x7f3777c1e59d
[   49.442604] Code: 00 c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d d3 08 0d 00 f7 d8 64 89 01 48
[   49.444735] RSP: 002b:00007ffd0d727918 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   49.445618] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f3777c1e59d
[   49.446457] RDX: 0000000020000140 RSI: 0000000000003b80 RDI: 0000000000000003
[   49.447271] RBP: 00007ffd0d727930 R08: 00007ffd0d727930 R09: 00007ffd0d727930
[   49.448107] R10: 00007ffd0d727930 R11: 0000000000000213 R12: 0000000000401180
[   49.448987] R13: 00007ffd0d727a50 R14: 0000000000000000 R15: 0000000000000000
[   49.449847]  </TASK>
[   49.450125] irq event stamp: 0
[   49.450514] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   49.451231] hardirqs last disabled at (0): [<ffffffff810fff0c>] copy_process+0x11cc/0x2b10
[   49.452199] softirqs last  enabled at (0): [<ffffffff810fff10>] copy_process+0x11d0/0x2b10
[   49.453216] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   49.453961] ---[ end trace 0000000000000000 ]---
[   49.458830] ------------[ cut here ]------------
[   49.459382] WARNING: CPU: 1 PID: 953 at drivers/iommu/iommufd/pages.c:178 batch_unpin.isra.23+0x151/0x1a0
[   49.460458] Modules linked in:
[   49.460850] CPU: 1 PID: 953 Comm: repro Tainted: G    B   W          6.1.0-a0a6c76cf2a5+ #1
[   49.461802] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   49.463055] RIP: 0010:batch_unpin.isra.23+0x151/0x1a0
[   49.463712] Code: e8 c4 be 2b ff 48 8b 45 d0 48 85 c0 75 17 e8 26 bd 2b ff 48 8b 7d c8 48 89 de e8 fa bd 2b ff 48 39 5d c8 73 07 e8 0f bd 2b ff <0f> 0b e8 08 bd 2b ff 4d 29 e5 31 ff 41 83 c6 01 4c 89 ee 31 db e8
[   49.465852] RSP: 0018:ffffc90001a139d8 EFLAGS: 00010246
[   49.466456] RAX: 0000000000000000 RBX: ffffffffffffffff RCX: ffffffff81fded8c
[   49.467269] RDX: 0000000000000000 RSI: ffff88800e67d300 RDI: 0000000000000002
[   49.468094] RBP: ffffc90001a13a20 R08: 0000000000000000 R09: ffff88807dd3b890
[   49.468962] R10: 0000000000000d49 R11: 0000000000000000 R12: 0000000000000001
[   49.469773] R13: 0000000000000001 R14: 0000000000000000 R15: ffff888005ec9c00
[   49.470581] FS:  0000000000000000(0000) GS:ffff88807dd00000(0000) knlGS:0000000000000000
[   49.471454] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   49.472117] CR2: 00007f3777cf0500 CR3: 0000000003c12001 CR4: 0000000000770ee0
[   49.472965] PKRU: 55555554
[   49.473268] Call Trace:
[   49.473555]  <TASK>
[   49.473820]  iopt_pages_unfill_xarray+0x39f/0x5c0
[   49.474370]  ? rcu_read_lock_sched_held+0x29/0x80
[   49.474930]  ? rcu_read_lock_held_common+0x12/0x50
[   49.475490]  ? write_comp_data+0x2f/0x90
[   49.475974]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   49.476544]  ? write_comp_data+0x2f/0x90
[   49.477040]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   49.477608]  ? interval_tree_remove+0x291/0x4e0
[   49.478163]  ? write_comp_data+0x2f/0x90
[   49.478647]  iopt_area_remove_access+0x108/0x120
[   49.479184]  iommufd_access_unpin_pages+0x177/0x210
[   49.479783]  iommufd_test_access_unmap+0xe0/0x130
[   49.480354]  ? iommufd_test_access_unmap+0x130/0x130
[   49.480942]  iommufd_test_staccess_release+0x39/0x60
[   49.481521]  __fput+0x11f/0x450
[   49.481927]  ____fput+0x1e/0x30
[   49.482322]  task_work_run+0xb6/0x120
[   49.482777]  do_exit+0x521/0x1340
[   49.483171]  ? lock_release+0x202/0x2c0
[   49.483629]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   49.484191]  ? trace_hardirqs_on+0x3f/0x100
[   49.484703]  do_group_exit+0x5e/0xf0
[   49.485130]  __x64_sys_exit_group+0x25/0x30
[   49.485621]  do_syscall_64+0x3b/0x90
[   49.486061]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   49.486579] RIP: 0033:0x7f3777be6cf6
[   49.486925] Code: Unable to access opcode bytes at 0x7f3777be6ccc.
[   49.487613] RSP: 002b:00007ffd0d7278d8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
[   49.488502] RAX: ffffffffffffffda RBX: 00007f3777cf1490 RCX: 00007f3777be6cf6
[   49.489312] RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
[   49.490135] RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffff80
[   49.490958] R10: 0000000000000004 R11: 0000000000000246 R12: 00007f3777cf1490
[   49.491773] R13: 0000000000000001 R14: 00007f3777cf4e88 R15: 0000000000000000
[   49.492603]  </TASK>
[   49.492890] irq event stamp: 0
[   49.493260] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   49.493999] hardirqs last disabled at (0): [<ffffffff810fff0c>] copy_process+0x11cc/0x2b10
[   49.494969] softirqs last  enabled at (0): [<ffffffff810fff10>] copy_process+0x11d0/0x2b10
[   49.495653] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   49.496144] ---[ end trace 0000000000000000 ]---
[   49.496842] ------------[ cut here ]------------
[   49.497347] WARNING: CPU: 1 PID: 953 at drivers/iommu/iommufd/pages.c:886 update_unpinned+0x75/0x80
[   49.498395] Modules linked in:
[   49.498760] CPU: 1 PID: 953 Comm: repro Tainted: G    B   W          6.1.0-a0a6c76cf2a5+ #1
[   49.499700] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   49.501024] RIP: 0010:update_unpinned+0x75/0x80
[   49.501597] Code: ac 2b ff 48 89 de 31 c9 31 d2 4c 29 e6 4c 89 ef e8 70 fb ff ff e8 bb ac 2b ff 5b 41 5c 41 5d 5d c3 cc cc cc cc e8 ab ac 2b ff <0f> 0b eb e7 0f 1f 80 00 00 00 00 0f 1f 44 00 00 55 48 89 e5 41 57
[   49.503725] RSP: 0018:ffffc90001a13a08 EFLAGS: 00010246
[   49.504362] RAX: 0000000000000000 RBX: 0000000000000000 RCX: ffffffff81fdfdcf
[   49.505234] RDX: 0000000000000000 RSI: ffff88800e67d300 RDI: 0000000000000002
[   49.506085] RBP: ffffc90001a13a20 R08: 0000000000000000 R09: ffff88807dd3b890
[   49.506892] R10: 0000000000000d49 R11: 0000000000000000 R12: ffffffffffffffff
[   49.507718] R13: ffff888005ec9c00 R14: 0000000000000002 R15: 0000000000000002
[   49.508542] FS:  0000000000000000(0000) GS:ffff88807dd00000(0000) knlGS:0000000000000000
[   49.509493] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   49.510193] CR2: 00007f3777cf0500 CR3: 0000000003c12001 CR4: 0000000000770ee0
[   49.511022] PKRU: 55555554
[   49.511355] Call Trace:
[   49.511650]  <TASK>
[   49.511917]  iopt_pages_unfill_xarray+0x522/0x5c0
[   49.512486]  ? rcu_read_lock_sched_held+0x29/0x80
[   49.513103]  ? rcu_read_lock_held_common+0x12/0x50
[   49.513700]  ? write_comp_data+0x2f/0x90
[   49.514191]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   49.514749]  ? write_comp_data+0x2f/0x90
[   49.515239]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   49.515826]  ? interval_tree_remove+0x291/0x4e0
[   49.516395]  ? write_comp_data+0x2f/0x90
[   49.516913]  iopt_area_remove_access+0x108/0x120
[   49.517497]  iommufd_access_unpin_pages+0x177/0x210
[   49.518101]  iommufd_test_access_unmap+0xe0/0x130
[   49.518507]  ? iommufd_test_access_unmap+0x130/0x130
[   49.518883]  iommufd_test_staccess_release+0x39/0x60
[   49.519381]  __fput+0x11f/0x450
[   49.519783]  ____fput+0x1e/0x30
[   49.520184]  task_work_run+0xb6/0x120
[   49.520692]  do_exit+0x521/0x1340
[   49.521100]  ? lock_release+0x202/0x2c0
[   49.521536]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   49.522051]  ? trace_hardirqs_on+0x3f/0x100
[   49.522573]  do_group_exit+0x5e/0xf0
[   49.522998]  __x64_sys_exit_group+0x25/0x30
[   49.523470]  do_syscall_64+0x3b/0x90
[   49.523906]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   49.524511] RIP: 0033:0x7f3777be6cf6
[   49.524973] Code: Unable to access opcode bytes at 0x7f3777be6ccc.
[   49.525670] RSP: 002b:00007ffd0d7278d8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
[   49.526575] RAX: ffffffffffffffda RBX: 00007f3777cf1490 RCX: 00007f3777be6cf6
[   49.527402] RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
[   49.528228] RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffff80
[   49.529107] R10: 0000000000000004 R11: 0000000000000246 R12: 00007f3777cf1490
[   49.529956] R13: 0000000000000001 R14: 00007f3777cf4e88 R15: 0000000000000000
[   49.530788]  </TASK>
[   49.531060] irq event stamp: 0
[   49.531427] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   49.532181] hardirqs last disabled at (0): [<ffffffff810fff0c>] copy_process+0x11cc/0x2b10
[   49.533245] softirqs last  enabled at (0): [<ffffffff810fff10>] copy_process+0x11d0/0x2b10
[   49.534283] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   49.535056] ---[ end trace 0000000000000000 ]---
[   49.535782] ------------[ cut here ]------------
[   49.536319] WARNING: CPU: 1 PID: 953 at drivers/iommu/iommufd/pages.c:1181 iopt_release_pages+0x159/0x190
[   49.537466] Modules linked in:
[   49.537843] CPU: 1 PID: 953 Comm: repro Tainted: G    B   W          6.1.0-a0a6c76cf2a5+ #1
[   49.538807] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   49.540121] RIP: 0010:iopt_release_pages+0x159/0x190
[   49.540777] Code: b5 11 ff eb cb e8 87 90 2b ff be 03 00 00 00 4c 89 f7 e8 6a 8b ce ff eb b7 e8 73 90 2b ff 0f 0b e9 ed fe ff ff e8 67 90 2b ff <0f> 0b e9 00 ff ff ff e8 5b 90 2b ff 0f 0b e9 07 ff ff ff e8 4f 90
[   49.542843] RSP: 0018:ffffc90001a13c88 EFLAGS: 00010246
[   49.543465] RAX: 0000000000000000 RBX: ffff888005ec9c00 RCX: ffffffff81fe1957
[   49.544304] RDX: 0000000000000000 RSI: ffff88800e67d300 RDI: 0000000000000002
[   49.545142] RBP: ffffc90001a13ca8 R08: 0000000000000000 R09: 0000000000000000
[   49.545942] R10: ffffc90001a13c58 R11: 0000000000000000 R12: ffffffffffffffff
[   49.546807] R13: 0000000001000000 R14: 00000000017fffff R15: 0000000000000000
[   49.547680] FS:  0000000000000000(0000) GS:ffff88807dd00000(0000) knlGS:0000000000000000
[   49.548591] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   49.549282] CR2: 00007f3777cf0500 CR3: 0000000003c12001 CR4: 0000000000770ee0
[   49.550110] PKRU: 55555554
[   49.550445] Call Trace:
[   49.550742]  <TASK>
[   49.550994]  iopt_unmap_iova_range+0x1ef/0x2e0
[   49.551527]  iopt_unmap_all+0x2f/0x60
[   49.551967]  iommufd_ioas_destroy+0x2c/0x70
[   49.552443]  iommufd_fops_release+0xd4/0x170
[   49.552960]  ? iommufd_ctx_get+0x30/0x30
[   49.553431]  __fput+0x11f/0x450
[   49.553837]  ____fput+0x1e/0x30
[   49.554245]  task_work_run+0xb6/0x120
[   49.554731]  do_exit+0x521/0x1340
[   49.555157]  ? lock_release+0x202/0x2c0
[   49.555650]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   49.556238]  ? trace_hardirqs_on+0x3f/0x100
[   49.556767]  do_group_exit+0x5e/0xf0
[   49.557202]  __x64_sys_exit_group+0x25/0x30
[   49.557715]  do_syscall_64+0x3b/0x90
[   49.558164]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   49.558767] RIP: 0033:0x7f3777be6cf6
[   49.559190] Code: Unable to access opcode bytes at 0x7f3777be6ccc.
[   49.559909] RSP: 002b:00007ffd0d7278d8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
[   49.560835] RAX: ffffffffffffffda RBX: 00007f3777cf1490 RCX: 00007f3777be6cf6
[   49.561669] RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
[   49.562500] RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffff80
[   49.563280] R10: 0000000000000004 R11: 0000000000000246 R12: 00007f3777cf1490
[   49.564075] R13: 0000000000000001 R14: 00007f3777cf4e88 R15: 0000000000000000
[   49.564934]  </TASK>
[   49.565201] irq event stamp: 0
[   49.565549] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   49.566254] hardirqs last disabled at (0): [<ffffffff810fff0c>] copy_process+0x11cc/0x2b10
[   49.567165] softirqs last  enabled at (0): [<ffffffff810fff10>] copy_process+0x11d0/0x2b10
[   49.568085] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   49.568840] ---[ end trace 0000000000000000 ]---
[   49.972281] ------------[ cut here ]------------
[   49.972947] WARNING: CPU: 1 PID: 965 at drivers/iommu/iommufd/pages.c:294 __iopt_area_unfill_domain+0x152/0x560
[   49.974254] Modules linked in:
[   49.974635] CPU: 1 PID: 965 Comm: repro Tainted: G    B   W          6.1.0-a0a6c76cf2a5+ #1
[   49.975674] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   49.977058] RIP: 0010:__iopt_area_unfill_domain+0x152/0x560
[   49.977713] Code: a1 2b ff 44 8b 64 24 54 48 8b 44 24 48 31 ff 44 89 e6 48 89 44 24 38 e8 6c a2 2b ff 45 85 e4 0f 85 eb 01 00 00 e8 ee a0 2b ff <0f> 0b e8 e7 a0 2b ff 48 8b 44 24 38 89 5c 24 58 89 18 8b 44 24 54
[   49.979867] RSP: 0018:ffffc90001a73ae0 EFLAGS: 00010246
[   49.980494] RAX: 0000000000000000 RBX: 00000000ffffffff RCX: ffffffff81fe0bd5
[   49.981324] RDX: 0000000000000000 RSI: ffff88800e67d300 RDI: 0000000000000002
[   49.982092] RBP: ffffc90001a73d10 R08: 000000000003b5c5 R09: 000000000000000b
[   49.982867] R10: 000000000003b5a0 R11: 0000000000000024 R12: 0000000000000001
[   49.983601] R13: 0000000000000801 R14: 00000000000007ff R15: 0000000000000800
[   49.984381] FS:  00007f3777af9740(0000) GS:ffff88807dd00000(0000) knlGS:0000000000000000
[   49.985244] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   49.985865] CR2: 00007f3777c1e580 CR3: 000000000d506005 CR4: 0000000000770ee0
[   49.986638] PKRU: 55555554
[   49.986951] Call Trace:
[   49.987231]  <TASK>
[   49.987500]  ? rcu_read_lock_sched_held+0x29/0x80
[   49.988051]  ? lock_acquire+0x1a1/0x2f0
[   49.988498]  ? rcu_read_lock_held_common+0x12/0x50
[   49.989058]  ? rcu_read_lock_sched_held+0x29/0x80
[   49.989606]  ? __mutex_lock+0x13a/0xf30
[   49.990079]  ? write_comp_data+0x2f/0x90
[   49.990560]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   49.991099]  iopt_area_unfill_domain+0x32/0x40
[   49.991623]  iopt_table_remove_domain+0x23f/0x4c0
[   49.992186]  iommufd_device_selftest_detach+0x3a/0x90
[   49.992817]  iommufd_selftest_destroy+0x55/0x70
[   49.993359]  iommufd_object_destroy_user+0xce/0x130
[   49.993935]  iommufd_destroy+0xa2/0xc0
[   49.994374]  iommufd_fops_ioctl+0x1ef/0x310
[   49.994862]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   49.995422]  ? write_comp_data+0x2f/0x90
[   49.995910]  __x64_sys_ioctl+0x10e/0x160
[   49.996398]  ? iommufd_get_object.part.6+0x1c0/0x1c0
[   49.997006]  do_syscall_64+0x3b/0x90
[   49.997442]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   49.998033] RIP: 0033:0x7f3777c1e59d
[   49.998445] Code: 00 c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d d3 08 0d 00 f7 d8 64 89 01 48
[   50.000440] RSP: 002b:00007ffd0d727918 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   50.001296] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f3777c1e59d
[   50.002086] RDX: 0000000020000140 RSI: 0000000000003b80 RDI: 0000000000000003
[   50.002880] RBP: 00007ffd0d727930 R08: 00007ffd0d727930 R09: 00007ffd0d727930
[   50.003659] R10: 00007ffd0d727930 R11: 0000000000000213 R12: 0000000000401180
[   50.004473] R13: 00007ffd0d727a50 R14: 0000000000000000 R15: 0000000000000000
[   50.005358]  </TASK>
[   50.005642] irq event stamp: 0
[   50.006019] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   50.006751] hardirqs last disabled at (0): [<ffffffff810fff0c>] copy_process+0x11cc/0x2b10
[   50.007665] softirqs last  enabled at (0): [<ffffffff810fff10>] copy_process+0x11d0/0x2b10
[   50.008616] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   50.009360] ---[ end trace 0000000000000000 ]---
[   50.010061] ------------[ cut here ]------------
[   50.010590] WARNING: CPU: 1 PID: 965 at drivers/iommu/iommufd/pages.c:1290 __iopt_area_unfill_domain+0x54f/0x560
[   50.011728] Modules linked in:
[   50.012105] CPU: 1 PID: 965 Comm: repro Tainted: G    B   W          6.1.0-a0a6c76cf2a5+ #1
[   50.013115] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   50.014437] RIP: 0010:__iopt_area_unfill_domain+0x54f/0x560
[   50.015092] Code: e8 86 9e 2b ff 85 db 0f 85 35 fb ff ff e8 09 9d 2b ff 0f 0b e9 29 fb ff ff e8 fd 9c 2b ff 0f 0b e9 69 fe ff ff e8 f1 9c 2b ff <0f> 0b e9 58 ff ff ff e8 65 2d dc 00 0f 1f 44 00 00 0f 1f 44 00 00
[   50.017217] RSP: 0018:ffffc90001a73ae0 EFLAGS: 00010246
[   50.017837] RAX: 0000000000000000 RBX: 00000000ffffffff RCX: ffffffff81fe0d26
[   50.018673] RDX: 0000000000000000 RSI: ffff88800e67d300 RDI: 0000000000000002
[   50.019480] RBP: ffffc90001a73d10 R08: 000000000003b5c5 R09: 000000000000000b
[   50.020306] R10: 000000000003b5a0 R11: 0000000000000024 R12: 00000000000007ff
[   50.021151] R13: 0000000000000801 R14: 00000000000007ff R15: 0000000000000800
[   50.021981] FS:  00007f3777af9740(0000) GS:ffff88807dd00000(0000) knlGS:0000000000000000
[   50.022944] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   50.023604] CR2: 00007f3777c1e580 CR3: 000000000d506005 CR4: 0000000000770ee0
[   50.024439] PKRU: 55555554
[   50.024776] Call Trace:
[   50.025065]  <TASK>
[   50.025346]  ? rcu_read_lock_sched_held+0x29/0x80
[   50.025895]  ? lock_acquire+0x1a1/0x2f0
[   50.026359]  ? rcu_read_lock_held_common+0x12/0x50
[   50.026934]  ? rcu_read_lock_sched_held+0x29/0x80
[   50.027512]  ? __mutex_lock+0x13a/0xf30
[   50.027995]  ? write_comp_data+0x2f/0x90
[   50.028480]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   50.029085]  iopt_area_unfill_domain+0x32/0x40
[   50.029638]  iopt_table_remove_domain+0x23f/0x4c0
[   50.030218]  iommufd_device_selftest_detach+0x3a/0x90
[   50.030836]  iommufd_selftest_destroy+0x55/0x70
[   50.031374]  iommufd_object_destroy_user+0xce/0x130
[   50.031967]  iommufd_destroy+0xa2/0xc0
[   50.032417]  iommufd_fops_ioctl+0x1ef/0x310
[   50.032913]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   50.033468]  ? write_comp_data+0x2f/0x90
[   50.033946]  __x64_sys_ioctl+0x10e/0x160
[   50.034433]  ? iommufd_get_object.part.6+0x1c0/0x1c0
[   50.035001]  do_syscall_64+0x3b/0x90
[   50.035421]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   50.036012] RIP: 0033:0x7f3777c1e59d
[   50.036446] Code: 00 c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d d3 08 0d 00 f7 d8 64 89 01 48
[   50.038464] RSP: 002b:00007ffd0d727918 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   50.039324] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f3777c1e59d
[   50.040168] RDX: 0000000020000140 RSI: 0000000000003b80 RDI: 0000000000000003
[   50.041003] RBP: 00007ffd0d727930 R08: 00007ffd0d727930 R09: 00007ffd0d727930
[   50.041831] R10: 00007ffd0d727930 R11: 0000000000000213 R12: 0000000000401180
[   50.042692] R13: 00007ffd0d727a50 R14: 0000000000000000 R15: 0000000000000000
[   50.043533]  </TASK>
[   50.043819] irq event stamp: 0
[   50.044197] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   50.044966] hardirqs last disabled at (0): [<ffffffff810fff0c>] copy_process+0x11cc/0x2b10
[   50.045950] softirqs last  enabled at (0): [<ffffffff810fff10>] copy_process+0x11d0/0x2b10
[   50.046921] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   50.047640] ---[ end trace 0000000000000000 ]---
[   50.053302] ------------[ cut here ]------------
[   50.053875] WARNING: CPU: 0 PID: 965 at drivers/iommu/iommufd/pages.c:178 batch_unpin.isra.23+0x151/0x1a0
[   50.054945] Modules linked in:
[   50.055302] CPU: 0 PID: 965 Comm: repro Tainted: G    B   W          6.1.0-a0a6c76cf2a5+ #1
[   50.056222] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   50.057531] RIP: 0010:batch_unpin.isra.23+0x151/0x1a0
[   50.058127] Code: e8 c4 be 2b ff 48 8b 45 d0 48 85 c0 75 17 e8 26 bd 2b ff 48 8b 7d c8 48 89 de e8 fa bd 2b ff 48 39 5d c8 73 07 e8 0f bd 2b ff <0f> 0b e8 08 bd 2b ff 4d 29 e5 31 ff 41 83 c6 01 4c 89 ee 31 db e8
[   50.060126] RSP: 0018:ffffc90001a739d8 EFLAGS: 00010246
[   50.060776] RAX: 0000000000000000 RBX: ffffffffffffffff RCX: ffffffff81fded8c
[   50.061600] RDX: 0000000000000000 RSI: ffff88800e67d300 RDI: 0000000000000002
[   50.062400] RBP: ffffc90001a73a20 R08: 0000000000000000 R09: ffff88807dc3b890
[   50.063188] R10: 000000000000116e R11: 0000000000000000 R12: 0000000000000001
[   50.064005] R13: 0000000000000001 R14: 0000000000000000 R15: ffff888005ec9c00
[   50.064851] FS:  0000000000000000(0000) GS:ffff88807dc00000(0000) knlGS:0000000000000000
[   50.065749] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   50.066423] CR2: 00007f3777cf0500 CR3: 00000000099ce001 CR4: 0000000000770ef0
[   50.067216] PKRU: 55555554
[   50.067534] Call Trace:
[   50.067832]  <TASK>
[   50.068096]  iopt_pages_unfill_xarray+0x39f/0x5c0
[   50.068722]  ? rcu_read_lock_held_common+0x12/0x50
[   50.069311]  ? write_comp_data+0x2f/0x90
[   50.069784]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   50.070355]  ? write_comp_data+0x2f/0x90
[   50.070822]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   50.071368]  ? interval_tree_remove+0x291/0x4e0
[   50.071918]  ? write_comp_data+0x2f/0x90
[   50.072394]  iopt_area_remove_access+0x108/0x120
[   50.072986]  iommufd_access_unpin_pages+0x177/0x210
[   50.073588]  iommufd_test_access_unmap+0xe0/0x130
[   50.074173]  ? iommufd_test_access_unmap+0x130/0x130
[   50.074769]  iommufd_test_staccess_release+0x39/0x60
[   50.075327]  __fput+0x11f/0x450
[   50.075715]  ____fput+0x1e/0x30
[   50.076102]  task_work_run+0xb6/0x120
[   50.076558]  do_exit+0x521/0x1340
[   50.076998]  ? lock_release+0x202/0x2c0
[   50.077454]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   50.078011]  ? trace_hardirqs_on+0x3f/0x100
[   50.078516]  do_group_exit+0x5e/0xf0
[   50.078947]  __x64_sys_exit_group+0x25/0x30
[   50.079438]  do_syscall_64+0x3b/0x90
[   50.079868]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   50.080451] RIP: 0033:0x7f3777be6cf6
[   50.080896] Code: Unable to access opcode bytes at 0x7f3777be6ccc.
[   50.081576] RSP: 002b:00007ffd0d7278d8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
[   50.082437] RAX: ffffffffffffffda RBX: 00007f3777cf1490 RCX: 00007f3777be6cf6
[   50.083229] RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
[   50.084026] RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffff80
[   50.084871] R10: 0000000000000004 R11: 0000000000000246 R12: 00007f3777cf1490
[   50.085695] R13: 0000000000000001 R14: 00007f3777cf4e88 R15: 0000000000000000
[   50.086520]  </TASK>
[   50.086781] irq event stamp: 0
[   50.087135] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   50.087848] hardirqs last disabled at (0): [<ffffffff810fff0c>] copy_process+0x11cc/0x2b10
[   50.088840] softirqs last  enabled at (0): [<ffffffff810fff10>] copy_process+0x11d0/0x2b10
[   50.089785] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   50.090509] ---[ end trace 0000000000000000 ]---
[   50.091160] ------------[ cut here ]------------
[   50.091668] WARNING: CPU: 0 PID: 965 at drivers/iommu/iommufd/pages.c:886 update_unpinned+0x75/0x80
[   50.092725] Modules linked in:
[   50.093098] CPU: 0 PID: 965 Comm: repro Tainted: G    B   W          6.1.0-a0a6c76cf2a5+ #1
[   50.094026] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   50.095282] RIP: 0010:update_unpinned+0x75/0x80
[   50.095798] Code: ac 2b ff 48 89 de 31 c9 31 d2 4c 29 e6 4c 89 ef e8 70 fb ff ff e8 bb ac 2b ff 5b 41 5c 41 5d 5d c3 cc cc cc cc e8 ab ac 2b ff <0f> 0b eb e7 0f 1f 80 00 00 00 00 0f 1f 44 00 00 55 48 89 e5 41 57
[   50.097843] RSP: 0018:ffffc90001a73a08 EFLAGS: 00010246
[   50.098428] RAX: 0000000000000000 RBX: 0000000000000000 RCX: ffffffff81fdfdcf
[   50.099218] RDX: 0000000000000000 RSI: ffff88800e67d300 RDI: 0000000000000002
[   50.100000] RBP: ffffc90001a73a20 R08: 0000000000000000 R09: ffff88807dc3b890
[   50.100812] R10: 000000000000116e R11: 0000000000000000 R12: ffffffffffffffff
[   50.101624] R13: ffff888005ec9c00 R14: 0000000000000002 R15: 0000000000000002
[   50.102420] FS:  0000000000000000(0000) GS:ffff88807dc00000(0000) knlGS:0000000000000000
[   50.103307] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   50.103952] CR2: 00007f3777cf0500 CR3: 00000000099ce001 CR4: 0000000000770ef0
[   50.104787] PKRU: 55555554
[   50.105122] Call Trace:
[   50.105418]  <TASK>
[   50.105693]  iopt_pages_unfill_xarray+0x522/0x5c0
[   50.106260]  ? rcu_read_lock_held_common+0x12/0x50
[   50.106826]  ? write_comp_data+0x2f/0x90
[   50.107296]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   50.107844]  ? write_comp_data+0x2f/0x90
[   50.108309]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   50.108909]  ? interval_tree_remove+0x291/0x4e0
[   50.109462]  ? write_comp_data+0x2f/0x90
[   50.109941]  iopt_area_remove_access+0x108/0x120
[   50.110507]  iommufd_access_unpin_pages+0x177/0x210
[   50.111072]  iommufd_test_access_unmap+0xe0/0x130
[   50.111615]  ? iommufd_test_access_unmap+0x130/0x130
[   50.112202]  iommufd_test_staccess_release+0x39/0x60
[   50.112818]  __fput+0x11f/0x450
[   50.113232]  ____fput+0x1e/0x30
[   50.113629]  task_work_run+0xb6/0x120
[   50.114091]  do_exit+0x521/0x1340
[   50.114486]  ? lock_release+0x202/0x2c0
[   50.114934]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   50.115480]  ? trace_hardirqs_on+0x3f/0x100
[   50.115989]  do_group_exit+0x5e/0xf0
[   50.116434]  __x64_sys_exit_group+0x25/0x30
[   50.116973]  do_syscall_64+0x3b/0x90
[   50.117424]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   50.118032] RIP: 0033:0x7f3777be6cf6
[   50.118456] Code: Unable to access opcode bytes at 0x7f3777be6ccc.
[   50.119148] RSP: 002b:00007ffd0d7278d8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
[   50.120130] RAX: ffffffffffffffda RBX: 00007f3777cf1490 RCX: 00007f3777be6cf6
[   50.121049] RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
[   50.121874] RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffff80
[   50.122663] R10: 0000000000000004 R11: 0000000000000246 R12: 00007f3777cf1490
[   50.123485] R13: 0000000000000001 R14: 00007f3777cf4e88 R15: 0000000000000000
[   50.124308]  </TASK>
[   50.124577] irq event stamp: 0
[   50.124969] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   50.125699] hardirqs last disabled at (0): [<ffffffff810fff0c>] copy_process+0x11cc/0x2b10
[   50.126662] softirqs last  enabled at (0): [<ffffffff810fff10>] copy_process+0x11d0/0x2b10
[   50.127578] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   50.128309] ---[ end trace 0000000000000000 ]---
[   50.129139] ------------[ cut here ]------------
[   50.129687] WARNING: CPU: 0 PID: 965 at drivers/iommu/iommufd/pages.c:1181 iopt_release_pages+0x159/0x190
[   50.130785] Modules linked in:
[   50.131140] CPU: 0 PID: 965 Comm: repro Tainted: G    B   W          6.1.0-a0a6c76cf2a5+ #1
[   50.132072] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   50.133395] RIP: 0010:iopt_release_pages+0x159/0x190
[   50.133996] Code: b5 11 ff eb cb e8 87 90 2b ff be 03 00 00 00 4c 89 f7 e8 6a 8b ce ff eb b7 e8 73 90 2b ff 0f 0b e9 ed fe ff ff e8 67 90 2b ff <0f> 0b e9 00 ff ff ff e8 5b 90 2b ff 0f 0b e9 07 ff ff ff e8 4f 90
[   50.136014] RSP: 0018:ffffc90001a73c88 EFLAGS: 00010246
[   50.136628] RAX: 0000000000000000 RBX: ffff888005ec9c00 RCX: ffffffff81fe1957
[   50.137463] RDX: 0000000000000000 RSI: ffff88800e67d300 RDI: 0000000000000002
[   50.138302] RBP: ffffc90001a73ca8 R08: ffff888006824a80 R09: 0000000080150011
[   50.139099] R10: 0000000000000001 R11: 0000000000000000 R12: ffffffffffffffff
[   50.139909] R13: 0000000001000000 R14: 00000000017fffff R15: 0000000000000000
[   50.140755] FS:  0000000000000000(0000) GS:ffff88807dc00000(0000) knlGS:0000000000000000
[   50.141697] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   50.142375] CR2: 00007f3777cf0500 CR3: 00000000099ce001 CR4: 0000000000770ef0
[   50.143179] PKRU: 55555554
[   50.143505] Call Trace:
[   50.143808]  <TASK>
[   50.144081]  iopt_unmap_iova_range+0x1ef/0x2e0
[   50.144635]  iopt_unmap_all+0x2f/0x60
[   50.145135]  iommufd_ioas_destroy+0x2c/0x70
[   50.145660]  iommufd_fops_release+0xd4/0x170
[   50.146198]  ? iommufd_ctx_get+0x30/0x30
[   50.146677]  __fput+0x11f/0x450
[   50.147065]  ____fput+0x1e/0x30
[   50.147450]  task_work_run+0xb6/0x120
[   50.147904]  do_exit+0x521/0x1340
[   50.148317]  ? lock_release+0x202/0x2c0
[   50.148872]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   50.149453]  ? trace_hardirqs_on+0x3f/0x100
[   50.149971]  do_group_exit+0x5e/0xf0
[   50.150419]  __x64_sys_exit_group+0x25/0x30
[   50.150908]  do_syscall_64+0x3b/0x90
[   50.151338]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   50.151937] RIP: 0033:0x7f3777be6cf6
[   50.152373] Code: Unable to access opcode bytes at 0x7f3777be6ccc.
[   50.153111] RSP: 002b:00007ffd0d7278d8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
[   50.153993] RAX: ffffffffffffffda RBX: 00007f3777cf1490 RCX: 00007f3777be6cf6
[   50.154818] RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
[   50.155623] RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffff80
[   50.156459] R10: 0000000000000004 R11: 0000000000000246 R12: 00007f3777cf1490
[   50.157268] R13: 0000000000000001 R14: 00007f3777cf4e88 R15: 0000000000000000
[   50.158089]  </TASK>
[   50.158371] irq event stamp: 0
[   50.158737] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   50.159429] hardirqs last disabled at (0): [<ffffffff810fff0c>] copy_process+0x11cc/0x2b10
[   50.160395] softirqs last  enabled at (0): [<ffffffff810fff10>] copy_process+0x11d0/0x2b10
[   50.161336] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   50.162064] ---[ end trace 0000000000000000 ]---
[   51.633037] ------------[ cut here ]------------
[   51.633406] WARNING: CPU: 0 PID: 1018 at drivers/iommu/iommufd/pages.c:294 __iopt_area_unfill_domain+0x152/0x560
[   51.634148] Modules linked in:
[   51.634376] CPU: 0 PID: 1018 Comm: repro Tainted: G    B   W          6.1.0-a0a6c76cf2a5+ #1
[   51.634991] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   51.635795] RIP: 0010:__iopt_area_unfill_domain+0x152/0x560
[   51.636220] Code: a1 2b ff 44 8b 64 24 54 48 8b 44 24 48 31 ff 44 89 e6 48 89 44 24 38 e8 6c a2 2b ff 45 85 e4 0f 85 eb 01 00 00 e8 ee a0 2b ff <0f> 0b e8 e7 a0 2b ff 48 8b 44 24 38 89 5c 24 58 89 18 8b 44 24 54
[   51.637591] RSP: 0018:ffffc90001bebae0 EFLAGS: 00010246
[   51.638172] RAX: 0000000000000000 RBX: 00000000ffffffff RCX: ffffffff81fe0bd5
[   51.638803] RDX: 0000000000000000 RSI: ffff8880135d8000 RDI: 0000000000000002
[   51.639310] RBP: ffffc90001bebd10 R08: 000000000003b5c5 R09: 000000000000000b
[   51.639825] R10: 000000000003b5a0 R11: 0000000000000024 R12: 0000000000000002
[   51.640322] R13: 0000000000000801 R14: 00000000000007ff R15: 0000000000000800
[   51.640848] FS:  00007f3777af9740(0000) GS:ffff88807dc00000(0000) knlGS:0000000000000000
[   51.641574] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   51.641994] CR2: 00007f3777c1e580 CR3: 000000000c9a6003 CR4: 0000000000770ef0
[   51.642493] PKRU: 55555554
[   51.642684] Call Trace:
[   51.642860]  <TASK>
[   51.643027]  ? rcu_read_lock_sched_held+0x29/0x80
[   51.643370]  ? lock_acquire+0x1a1/0x2f0
[   51.643659]  ? rcu_read_lock_held_common+0x12/0x50
[   51.644013]  ? rcu_read_lock_sched_held+0x29/0x80
[   51.644355]  ? __mutex_lock+0x13a/0xf30
[   51.644641]  ? write_comp_data+0x2f/0x90
[   51.644957]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   51.645304]  iopt_area_unfill_domain+0x32/0x40
[   51.645625]  iopt_table_remove_domain+0x23f/0x4c0
[   51.645962]  iommufd_device_selftest_detach+0x3a/0x90
[   51.646329]  iommufd_selftest_destroy+0x55/0x70
[   51.646680]  iommufd_object_destroy_user+0xce/0x130
[   51.647046]  iommufd_destroy+0xa2/0xc0
[   51.647333]  iommufd_fops_ioctl+0x1ef/0x310
[   51.647645]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   51.647998]  ? write_comp_data+0x2f/0x90
[   51.648291]  __x64_sys_ioctl+0x10e/0x160
[   51.648587]  ? iommufd_get_object.part.6+0x1c0/0x1c0
[   51.648972]  do_syscall_64+0x3b/0x90
[   51.649243]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   51.649602] RIP: 0033:0x7f3777c1e59d
[   51.649881] Code: 00 c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d d3 08 0d 00 f7 d8 64 89 01 48
[   51.651156] RSP: 002b:00007ffd0d727918 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   51.651678] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f3777c1e59d
[   51.652169] RDX: 0000000020000140 RSI: 0000000000003b80 RDI: 0000000000000003
[   51.652690] RBP: 00007ffd0d727930 R08: 00007ffd0d727930 R09: 00007ffd0d727930
[   51.653185] R10: 00007ffd0d727930 R11: 0000000000000213 R12: 0000000000401180
[   51.653687] R13: 00007ffd0d727a50 R14: 0000000000000000 R15: 0000000000000000
[   51.654182]  </TASK>
[   51.654347] irq event stamp: 0
[   51.654577] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   51.655020] hardirqs last disabled at (0): [<ffffffff810fff0c>] copy_process+0x11cc/0x2b10
[   51.655595] softirqs last  enabled at (0): [<ffffffff810fff10>] copy_process+0x11d0/0x2b10
[   51.656172] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   51.656619] ---[ end trace 0000000000000000 ]---
[   51.657044] ------------[ cut here ]------------
[   51.657379] WARNING: CPU: 0 PID: 1018 at drivers/iommu/iommufd/pages.c:1290 __iopt_area_unfill_domain+0x54f/0x560
[   51.658108] Modules linked in:
[   51.658331] CPU: 0 PID: 1018 Comm: repro Tainted: G    B   W          6.1.0-a0a6c76cf2a5+ #1
[   51.658942] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   51.659726] RIP: 0010:__iopt_area_unfill_domain+0x54f/0x560
[   51.660133] Code: e8 86 9e 2b ff 85 db 0f 85 35 fb ff ff e8 09 9d 2b ff 0f 0b e9 29 fb ff ff e8 fd 9c 2b ff 0f 0b e9 69 fe ff ff e8 f1 9c 2b ff <0f> 0b e9 58 ff ff ff e8 65 2d dc 00 0f 1f 44 00 00 0f 1f 44 00 00
[   51.661421] RSP: 0018:ffffc90001bebae0 EFLAGS: 00010246
[   51.661795] RAX: 0000000000000000 RBX: 00000000ffffffff RCX: ffffffff81fe0d26
[   51.662300] RDX: 0000000000000000 RSI: ffff8880135d8000 RDI: 0000000000000002
[   51.662805] RBP: ffffc90001bebd10 R08: 000000000003b5c5 R09: 000000000000000b
[   51.663307] R10: 000000000003b5a0 R11: 0000000000000024 R12: 00000000000007ff
[   51.663809] R13: 0000000000000801 R14: 00000000000007ff R15: 0000000000000800
[   51.664299] FS:  00007f3777af9740(0000) GS:ffff88807dc00000(0000) knlGS:0000000000000000
[   51.664872] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   51.665293] CR2: 00007f3777c1e580 CR3: 000000000c9a6003 CR4: 0000000000770ef0
[   51.665789] PKRU: 55555554
[   51.665982] Call Trace:
[   51.666159]  <TASK>
[   51.666334]  ? rcu_read_lock_sched_held+0x29/0x80
[   51.666689]  ? lock_acquire+0x1a1/0x2f0
[   51.666981]  ? rcu_read_lock_held_common+0x12/0x50
[   51.667328]  ? rcu_read_lock_sched_held+0x29/0x80
[   51.667672]  ? __mutex_lock+0x13a/0xf30
[   51.667960]  ? write_comp_data+0x2f/0x90
[   51.668251]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   51.668589]  iopt_area_unfill_domain+0x32/0x40
[   51.668932]  iopt_table_remove_domain+0x23f/0x4c0
[   51.669294]  iommufd_device_selftest_detach+0x3a/0x90
[   51.669670]  iommufd_selftest_destroy+0x55/0x70
[   51.670002]  iommufd_object_destroy_user+0xce/0x130
[   51.670357]  iommufd_destroy+0xa2/0xc0
[   51.670637]  iommufd_fops_ioctl+0x1ef/0x310
[   51.670954]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   51.671342]  ? write_comp_data+0x2f/0x90
[   51.671635]  __x64_sys_ioctl+0x10e/0x160
[   51.671942]  ? iommufd_get_object.part.6+0x1c0/0x1c0
[   51.672305]  do_syscall_64+0x3b/0x90
[   51.672568]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   51.672941] RIP: 0033:0x7f3777c1e59d
[   51.673210] Code: 00 c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d d3 08 0d 00 f7 d8 64 89 01 48
[   51.674462] RSP: 002b:00007ffd0d727918 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   51.674988] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f3777c1e59d
[   51.675484] RDX: 0000000020000140 RSI: 0000000000003b80 RDI: 0000000000000003
[   51.676002] RBP: 00007ffd0d727930 R08: 00007ffd0d727930 R09: 00007ffd0d727930
[   51.676493] R10: 00007ffd0d727930 R11: 0000000000000213 R12: 0000000000401180
[   51.677003] R13: 00007ffd0d727a50 R14: 0000000000000000 R15: 0000000000000000
[   51.677500]  </TASK>
[   51.677665] irq event stamp: 0
[   51.677888] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   51.678341] hardirqs last disabled at (0): [<ffffffff810fff0c>] copy_process+0x11cc/0x2b10
[   51.678927] softirqs last  enabled at (0): [<ffffffff810fff10>] copy_process+0x11d0/0x2b10
[   51.679511] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   51.679947] ---[ end trace 0000000000000000 ]---
[   51.684597] ------------[ cut here ]------------
[   51.685183] WARNING: CPU: 1 PID: 1018 at drivers/iommu/iommufd/pages.c:178 batch_unpin.isra.23+0x151/0x1a0
[   51.686273] Modules linked in:
[   51.686640] CPU: 1 PID: 1018 Comm: repro Tainted: G    B   W          6.1.0-a0a6c76cf2a5+ #1
[   51.687555] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   51.688849] RIP: 0010:batch_unpin.isra.23+0x151/0x1a0
[   51.689454] Code: e8 c4 be 2b ff 48 8b 45 d0 48 85 c0 75 17 e8 26 bd 2b ff 48 8b 7d c8 48 89 de e8 fa bd 2b ff 48 39 5d c8 73 07 e8 0f bd 2b ff <0f> 0b e8 08 bd 2b ff 4d 29 e5 31 ff 41 83 c6 01 4c 89 ee 31 db e8
[   51.691416] RSP: 0018:ffffc90001beb9d8 EFLAGS: 00010246
[   51.692003] RAX: 0000000000000000 RBX: ffffffffffffffff RCX: ffffffff81fded8c
[   51.692814] RDX: 0000000000000000 RSI: ffff8880135d8000 RDI: 0000000000000002
[   51.693612] RBP: ffffc90001beba20 R08: 0000000000000000 R09: ffff88807dd3b890
[   51.694421] R10: 0000000000000ce5 R11: 0000000000000000 R12: 0000000000000001
[   51.695231] R13: 0000000000000001 R14: 0000000000000000 R15: ffff888009f85e00
[   51.696029] FS:  0000000000000000(0000) GS:ffff88807dd00000(0000) knlGS:0000000000000000
[   51.696933] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   51.697585] CR2: 00007f3777cf0500 CR3: 0000000013558003 CR4: 0000000000770ee0
[   51.698386] PKRU: 55555554
[   51.698703] Call Trace:
[   51.698982]  <TASK>
[   51.699247]  iopt_pages_unfill_xarray+0x39f/0x5c0
[   51.699819]  ? rcu_read_lock_held_common+0x12/0x50
[   51.700389]  ? write_comp_data+0x2f/0x90
[   51.700893]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   51.701454]  ? write_comp_data+0x2f/0x90
[   51.701932]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   51.702509]  ? interval_tree_remove+0x291/0x4e0
[   51.703038]  ? write_comp_data+0x2f/0x90
[   51.703516]  iopt_area_remove_access+0x108/0x120
[   51.704073]  iommufd_access_unpin_pages+0x177/0x210
[   51.704695]  iommufd_test_access_unmap+0xe0/0x130
[   51.705259]  ? iommufd_test_access_unmap+0x130/0x130
[   51.705856]  iommufd_test_staccess_release+0x39/0x60
[   51.706446]  __fput+0x11f/0x450
[   51.706835]  ____fput+0x1e/0x30
[   51.707223]  task_work_run+0xb6/0x120
[   51.707678]  do_exit+0x521/0x1340
[   51.708086]  ? lock_release+0x202/0x2c0
[   51.708548]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   51.709231]  ? trace_hardirqs_on+0x3f/0x100
[   51.709743]  do_group_exit+0x5e/0xf0
[   51.710181]  __x64_sys_exit_group+0x25/0x30
[   51.710685]  do_syscall_64+0x3b/0x90
[   51.711109]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   51.711696] RIP: 0033:0x7f3777be6cf6
[   51.712124] Code: Unable to access opcode bytes at 0x7f3777be6ccc.
[   51.712844] RSP: 002b:00007ffd0d7278d8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
[   51.713703] RAX: ffffffffffffffda RBX: 00007f3777cf1490 RCX: 00007f3777be6cf6
[   51.714529] RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
[   51.715314] RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffff80
[   51.716190] R10: 0000000000000004 R11: 0000000000000246 R12: 00007f3777cf1490
[   51.716971] R13: 0000000000000001 R14: 00007f3777cf4e88 R15: 0000000000000000
[   51.717738]  </TASK>
[   51.718005] irq event stamp: 0
[   51.718357] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   51.719071] hardirqs last disabled at (0): [<ffffffff810fff0c>] copy_process+0x11cc/0x2b10
[   51.720104] softirqs last  enabled at (0): [<ffffffff810fff10>] copy_process+0x11d0/0x2b10
[   51.721033] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   51.721739] ---[ end trace 0000000000000000 ]---
[   51.722395] ------------[ cut here ]------------
[   51.722969] WARNING: CPU: 1 PID: 1018 at drivers/iommu/iommufd/pages.c:886 update_unpinned+0x75/0x80
[   51.724016] Modules linked in:
[   51.724382] CPU: 1 PID: 1018 Comm: repro Tainted: G    B   W          6.1.0-a0a6c76cf2a5+ #1
[   51.725333] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   51.726570] RIP: 0010:update_unpinned+0x75/0x80
[   51.727075] Code: ac 2b ff 48 89 de 31 c9 31 d2 4c 29 e6 4c 89 ef e8 70 fb ff ff e8 bb ac 2b ff 5b 41 5c 41 5d 5d c3 cc cc cc cc e8 ab ac 2b ff <0f> 0b eb e7 0f 1f 80 00 00 00 00 0f 1f 44 00 00 55 48 89 e5 41 57
[   51.729057] RSP: 0018:ffffc90001beba08 EFLAGS: 00010246
[   51.729650] RAX: 0000000000000000 RBX: 0000000000000000 RCX: ffffffff81fdfdcf
[   51.730444] RDX: 0000000000000000 RSI: ffff8880135d8000 RDI: 0000000000000002
[   51.731225] RBP: ffffc90001beba20 R08: 0000000000000000 R09: ffff88807dd3b890
[   51.732012] R10: 0000000000000ce5 R11: 0000000000000000 R12: ffffffffffffffff
[   51.732819] R13: ffff888009f85e00 R14: 0000000000000002 R15: 0000000000000002
[   51.733586] FS:  0000000000000000(0000) GS:ffff88807dd00000(0000) knlGS:0000000000000000
[   51.734449] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   51.735094] CR2: 00007f3777cf0500 CR3: 0000000013558003 CR4: 0000000000770ee0
[   51.735770] PKRU: 55555554
[   51.736035] Call Trace:
[   51.736278]  <TASK>
[   51.736489]  iopt_pages_unfill_xarray+0x522/0x5c0
[   51.736981]  ? rcu_read_lock_held_common+0x12/0x50
[   51.737456]  ? write_comp_data+0x2f/0x90
[   51.737843]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   51.738302]  ? write_comp_data+0x2f/0x90
[   51.738699]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   51.739153]  ? interval_tree_remove+0x291/0x4e0
[   51.739574]  ? write_comp_data+0x2f/0x90
[   51.739868]  iopt_area_remove_access+0x108/0x120
[   51.740211]  iommufd_access_unpin_pages+0x177/0x210
[   51.740581]  iommufd_test_access_unmap+0xe0/0x130
[   51.740948]  ? iommufd_test_access_unmap+0x130/0x130
[   51.741320]  iommufd_test_staccess_release+0x39/0x60
[   51.741701]  __fput+0x11f/0x450
[   51.741966]  ____fput+0x1e/0x30
[   51.742215]  task_work_run+0xb6/0x120
[   51.742525]  do_exit+0x521/0x1340
[   51.742777]  ? lock_release+0x202/0x2c0
[   51.743064]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   51.743421]  ? trace_hardirqs_on+0x3f/0x100
[   51.743753]  do_group_exit+0x5e/0xf0
[   51.744042]  __x64_sys_exit_group+0x25/0x30
[   51.744449]  do_syscall_64+0x3b/0x90
[   51.744814]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   51.745306] RIP: 0033:0x7f3777be6cf6
[   51.745657] Code: Unable to access opcode bytes at 0x7f3777be6ccc.
[   51.746234] RSP: 002b:00007ffd0d7278d8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
[   51.746948] RAX: ffffffffffffffda RBX: 00007f3777cf1490 RCX: 00007f3777be6cf6
[   51.747621] RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
[   51.748286] RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffff80
[   51.748964] R10: 0000000000000004 R11: 0000000000000246 R12: 00007f3777cf1490
[   51.749634] R13: 0000000000000001 R14: 00007f3777cf4e88 R15: 0000000000000000
[   51.750315]  </TASK>
[   51.750541] irq event stamp: 0
[   51.750838] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   51.751439] hardirqs last disabled at (0): [<ffffffff810fff0c>] copy_process+0x11cc/0x2b10
[   51.752210] softirqs last  enabled at (0): [<ffffffff810fff10>] copy_process+0x11d0/0x2b10
[   51.753004] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   51.753599] ---[ end trace 0000000000000000 ]---
[   51.754257] ------------[ cut here ]------------
[   51.754723] WARNING: CPU: 1 PID: 1018 at drivers/iommu/iommufd/pages.c:1181 iopt_release_pages+0x159/0x190
[   51.755628] Modules linked in:
[   51.755931] CPU: 1 PID: 1018 Comm: repro Tainted: G    B   W          6.1.0-a0a6c76cf2a5+ #1
[   51.756754] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   51.757824] RIP: 0010:iopt_release_pages+0x159/0x190
[   51.758307] Code: b5 11 ff eb cb e8 87 90 2b ff be 03 00 00 00 4c 89 f7 e8 6a 8b ce ff eb b7 e8 73 90 2b ff 0f 0b e9 ed fe ff ff e8 67 90 2b ff <0f> 0b e9 00 ff ff ff e8 5b 90 2b ff 0f 0b e9 07 ff ff ff e8 4f 90
[   51.760030] RSP: 0018:ffffc90001bebc88 EFLAGS: 00010246
[   51.760526] RAX: 0000000000000000 RBX: ffff888009f85e00 RCX: ffffffff81fe1957
[   51.761210] RDX: 0000000000000000 RSI: ffff8880135d8000 RDI: 0000000000000002
[   51.761879] RBP: ffffc90001bebca8 R08: ffff88800950dd80 R09: 0000000080150012
[   51.762553] R10: 0000000000000001 R11: 0000000000000000 R12: ffffffffffffffff
[   51.763216] R13: 0000000001000000 R14: 00000000017fffff R15: 0000000000000000
[   51.763880] FS:  0000000000000000(0000) GS:ffff88807dd00000(0000) knlGS:0000000000000000
[   51.764632] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   51.765194] CR2: 00007f3777cf0500 CR3: 0000000013558003 CR4: 0000000000770ee0
[   51.765865] PKRU: 55555554
[   51.766131] Call Trace:
[   51.766372]  <TASK>
[   51.766591]  iopt_unmap_iova_range+0x1ef/0x2e0
[   51.767029]  iopt_unmap_all+0x2f/0x60
[   51.767389]  iommufd_ioas_destroy+0x2c/0x70
[   51.767797]  iommufd_fops_release+0xd4/0x170
[   51.768225]  ? iommufd_ctx_get+0x30/0x30
[   51.768610]  __fput+0x11f/0x450
[   51.768941]  ____fput+0x1e/0x30
[   51.769180]  task_work_run+0xb6/0x120
[   51.769466]  do_exit+0x521/0x1340
[   51.769729]  ? lock_release+0x202/0x2c0
[   51.770032]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   51.770397]  ? trace_hardirqs_on+0x3f/0x100
[   51.770724]  do_group_exit+0x5e/0xf0
[   51.770996]  __x64_sys_exit_group+0x25/0x30
[   51.771312]  do_syscall_64+0x3b/0x90
[   51.771592]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   51.771982] RIP: 0033:0x7f3777be6cf6
[   51.772263] Code: Unable to access opcode bytes at 0x7f3777be6ccc.
[   51.772732] RSP: 002b:00007ffd0d7278d8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
[   51.773305] RAX: ffffffffffffffda RBX: 00007f3777cf1490 RCX: 00007f3777be6cf6
[   51.773838] RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
[   51.774368] RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffff80
[   51.774885] R10: 0000000000000004 R11: 0000000000000246 R12: 00007f3777cf1490
[   51.775399] R13: 0000000000000001 R14: 00007f3777cf4e88 R15: 0000000000000000
[   51.775929]  </TASK>
[   51.776104] irq event stamp: 0
[   51.776342] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   51.776825] hardirqs last disabled at (0): [<ffffffff810fff0c>] copy_process+0x11cc/0x2b10
[   51.777444] softirqs last  enabled at (0): [<ffffffff810fff10>] copy_process+0x11d0/0x2b10
[   51.778066] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   51.778544] ---[ end trace 0000000000000000 ]---
[   53.606995] ------------[ cut here ]------------
[   53.607374] WARNING: CPU: 1 PID: 1103 at drivers/iommu/iommufd/pages.c:294 __iopt_area_unfill_domain+0x152/0x560
[   53.608139] Modules linked in:
[   53.608374] CPU: 1 PID: 1103 Comm: repro Tainted: G    B   W          6.1.0-a0a6c76cf2a5+ #1
[   53.609029] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   53.609847] RIP: 0010:__iopt_area_unfill_domain+0x152/0x560
[   53.610269] Code: a1 2b ff 44 8b 64 24 54 48 8b 44 24 48 31 ff 44 89 e6 48 89 44 24 38 e8 6c a2 2b ff 45 85 e4 0f 85 eb 01 00 00 e8 ee a0 2b ff <0f> 0b e8 e7 a0 2b ff 48 8b 44 24 38 89 5c 24 58 89 18 8b 44 24 54
[   53.611584] RSP: 0018:ffffc90001e5bae0 EFLAGS: 00010246
[   53.611966] RAX: 0000000000000000 RBX: 00000000ffffffff RCX: ffffffff81fe0bd5
[   53.612479] RDX: 0000000000000000 RSI: ffff88800e678000 RDI: 0000000000000002
[   53.613006] RBP: ffffc90001e5bd10 R08: 000000000003b5c5 R09: 0000000000000000
[   53.613518] R10: 000000000003b5a0 R11: 0000000000000024 R12: 0000000000000001
[   53.614037] R13: 0000000000000801 R14: 00000000000007ff R15: 0000000000000800
[   53.614562] FS:  00007f3777af9740(0000) GS:ffff88807dd00000(0000) knlGS:0000000000000000
[   53.615152] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   53.615623] CR2: 00007f3777c1e580 CR3: 0000000017488001 CR4: 0000000000770ee0
[   53.616142] PKRU: 55555554
[   53.616353] Call Trace:
[   53.616541]  <TASK>
[   53.616737]  ? rcu_read_lock_sched_held+0x29/0x80
[   53.617104]  ? lock_acquire+0x1a1/0x2f0
[   53.617404]  ? rcu_read_lock_held_common+0x12/0x50
[   53.617766]  ? rcu_read_lock_sched_held+0x29/0x80
[   53.618122]  ? __mutex_lock+0x13a/0xf30
[   53.618422]  ? write_comp_data+0x2f/0x90
[   53.618731]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   53.619100]  iopt_area_unfill_domain+0x32/0x40
[   53.619440]  iopt_table_remove_domain+0x23f/0x4c0
[   53.619800]  iommufd_device_selftest_detach+0x3a/0x90
[   53.620209]  iommufd_selftest_destroy+0x55/0x70
[   53.620562]  iommufd_object_destroy_user+0xce/0x130
[   53.620953]  iommufd_destroy+0xa2/0xc0
[   53.621244]  iommufd_fops_ioctl+0x1ef/0x310
[   53.621559]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   53.621939]  ? write_comp_data+0x2f/0x90
[   53.622242]  __x64_sys_ioctl+0x10e/0x160
[   53.622562]  ? iommufd_get_object.part.6+0x1c0/0x1c0
[   53.622933]  do_syscall_64+0x3b/0x90
[   53.623218]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   53.623617] RIP: 0033:0x7f3777c1e59d
[   53.623888] Code: 00 c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d d3 08 0d 00 f7 d8 64 89 01 48
[   53.625207] RSP: 002b:00007ffd0d727918 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   53.625754] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f3777c1e59d
[   53.626264] RDX: 0000000020000140 RSI: 0000000000003b80 RDI: 0000000000000003
[   53.626786] RBP: 00007ffd0d727930 R08: 00007ffd0d727930 R09: 00007ffd0d727930
[   53.627309] R10: 00007ffd0d727930 R11: 0000000000000213 R12: 0000000000401180
[   53.627820] R13: 00007ffd0d727a50 R14: 0000000000000000 R15: 0000000000000000
[   53.628346]  </TASK>
[   53.628521] irq event stamp: 0
[   53.628776] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   53.629234] hardirqs last disabled at (0): [<ffffffff810fff0c>] copy_process+0x11cc/0x2b10
[   53.629842] softirqs last  enabled at (0): [<ffffffff810fff10>] copy_process+0x11d0/0x2b10
[   53.630458] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   53.630922] ---[ end trace 0000000000000000 ]---
[   53.631360] ------------[ cut here ]------------
[   53.631696] WARNING: CPU: 1 PID: 1103 at drivers/iommu/iommufd/pages.c:1290 __iopt_area_unfill_domain+0x54f/0x560
[   53.632428] Modules linked in:
[   53.632679] CPU: 1 PID: 1103 Comm: repro Tainted: G    B   W          6.1.0-a0a6c76cf2a5+ #1
[   53.633286] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   53.634104] RIP: 0010:__iopt_area_unfill_domain+0x54f/0x560
[   53.634538] Code: e8 86 9e 2b ff 85 db 0f 85 35 fb ff ff e8 09 9d 2b ff 0f 0b e9 29 fb ff ff e8 fd 9c 2b ff 0f 0b e9 69 fe ff ff e8 f1 9c 2b ff <0f> 0b e9 58 ff ff ff e8 65 2d dc 00 0f 1f 44 00 00 0f 1f 44 00 00
[   53.635846] RSP: 0018:ffffc90001e5bae0 EFLAGS: 00010246
[   53.636228] RAX: 0000000000000000 RBX: 00000000ffffffff RCX: ffffffff81fe0d26
[   53.636763] RDX: 0000000000000000 RSI: ffff88800e678000 RDI: 0000000000000002
[   53.637280] RBP: ffffc90001e5bd10 R08: 000000000003b5c5 R09: 0000000000000000
[   53.637797] R10: 000000000003b5a0 R11: 0000000000000024 R12: 00000000000007ff
[   53.638312] R13: 0000000000000801 R14: 00000000000007ff R15: 0000000000000800
[   53.638839] FS:  00007f3777af9740(0000) GS:ffff88807dd00000(0000) knlGS:0000000000000000
[   53.639433] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   53.639854] CR2: 00007f3777c1e580 CR3: 0000000017488001 CR4: 0000000000770ee0
[   53.640374] PKRU: 55555554
[   53.640581] Call Trace:
[   53.640783]  <TASK>
[   53.640959]  ? rcu_read_lock_sched_held+0x29/0x80
[   53.641319]  ? lock_acquire+0x1a1/0x2f0
[   53.641615]  ? rcu_read_lock_held_common+0x12/0x50
[   53.641989]  ? rcu_read_lock_sched_held+0x29/0x80
[   53.642351]  ? __mutex_lock+0x13a/0xf30
[   53.642667]  ? write_comp_data+0x2f/0x90
[   53.642971]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   53.643330]  iopt_area_unfill_domain+0x32/0x40
[   53.643672]  iopt_table_remove_domain+0x23f/0x4c0
[   53.644029]  iommufd_device_selftest_detach+0x3a/0x90
[   53.644415]  iommufd_selftest_destroy+0x55/0x70
[   53.644783]  iommufd_object_destroy_user+0xce/0x130
[   53.645154]  iommufd_destroy+0xa2/0xc0
[   53.645443]  iommufd_fops_ioctl+0x1ef/0x310
[   53.645764]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   53.646124]  ? write_comp_data+0x2f/0x90
[   53.646427]  __x64_sys_ioctl+0x10e/0x160
[   53.646738]  ? iommufd_get_object.part.6+0x1c0/0x1c0
[   53.647108]  do_syscall_64+0x3b/0x90
[   53.647392]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   53.647770] RIP: 0033:0x7f3777c1e59d
[   53.648041] Code: 00 c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d d3 08 0d 00 f7 d8 64 89 01 48
[   53.649381] RSP: 002b:00007ffd0d727918 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   53.649935] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f3777c1e59d
[   53.650756] RDX: 0000000020000140 RSI: 0000000000003b80 RDI: 0000000000000003
[   53.651594] RBP: 00007ffd0d727930 R08: 00007ffd0d727930 R09: 00007ffd0d727930
[   53.652468] R10: 00007ffd0d727930 R11: 0000000000000213 R12: 0000000000401180
[   53.653371] R13: 00007ffd0d727a50 R14: 0000000000000000 R15: 0000000000000000
[   53.654245]  </TASK>
[   53.654543] irq event stamp: 0
[   53.654907] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   53.655649] hardirqs last disabled at (0): [<ffffffff810fff0c>] copy_process+0x11cc/0x2b10
[   53.656649] softirqs last  enabled at (0): [<ffffffff810fff10>] copy_process+0x11d0/0x2b10
[   53.657620] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   53.658350] ---[ end trace 0000000000000000 ]---
[   53.662086] ------------[ cut here ]------------
[   53.662460] WARNING: CPU: 1 PID: 1103 at drivers/iommu/iommufd/pages.c:178 batch_unpin.isra.23+0x151/0x1a0
[   53.663192] Modules linked in:
[   53.663429] CPU: 1 PID: 1103 Comm: repro Tainted: G    B   W          6.1.0-a0a6c76cf2a5+ #1
[   53.664046] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   53.664908] RIP: 0010:batch_unpin.isra.23+0x151/0x1a0
[   53.665298] Code: e8 c4 be 2b ff 48 8b 45 d0 48 85 c0 75 17 e8 26 bd 2b ff 48 8b 7d c8 48 89 de e8 fa bd 2b ff 48 39 5d c8 73 07 e8 0f bd 2b ff <0f> 0b e8 08 bd 2b ff 4d 29 e5 31 ff 41 83 c6 01 4c 89 ee 31 db e8
[   53.666644] RSP: 0018:ffffc90001e5b9d8 EFLAGS: 00010246
[   53.667046] RAX: 0000000000000000 RBX: ffffffffffffffff RCX: ffffffff81fded8c
[   53.667573] RDX: 0000000000000000 RSI: ffff88800e678000 RDI: 0000000000000002
[   53.668096] RBP: ffffc90001e5ba20 R08: 0000000000000000 R09: ffff88807dd3b890
[   53.668622] R10: 0000000000001052 R11: 0000000000000000 R12: 0000000000000001
[   53.669182] R13: 0000000000000001 R14: 0000000000000000 R15: ffff888005ec9c00
[   53.669705] FS:  0000000000000000(0000) GS:ffff88807dd00000(0000) knlGS:0000000000000000
[   53.670307] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   53.670741] CR2: 00007f3777cf0500 CR3: 0000000003c12002 CR4: 0000000000770ee0
[   53.671254] PKRU: 55555554
[   53.671456] Call Trace:
[   53.671647]  <TASK>
[   53.671818]  iopt_pages_unfill_xarray+0x39f/0x5c0
[   53.672199]  ? rcu_read_lock_held_common+0x12/0x50
[   53.672566]  ? write_comp_data+0x2f/0x90
[   53.672886]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   53.673246]  ? write_comp_data+0x2f/0x90
[   53.673551]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   53.673917]  ? interval_tree_remove+0x291/0x4e0
[   53.674269]  ? write_comp_data+0x2f/0x90
[   53.674581]  iopt_area_remove_access+0x108/0x120
[   53.674936]  iommufd_access_unpin_pages+0x177/0x210
[   53.675333]  iommufd_test_access_unmap+0xe0/0x130
[   53.675696]  ? iommufd_test_access_unmap+0x130/0x130
[   53.676075]  iommufd_test_staccess_release+0x39/0x60
[   53.676454]  __fput+0x11f/0x450
[   53.676722]  ____fput+0x1e/0x30
[   53.676974]  task_work_run+0xb6/0x120
[   53.677266]  do_exit+0x521/0x1340
[   53.677527]  ? lock_release+0x202/0x2c0
[   53.677823]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   53.678184]  ? trace_hardirqs_on+0x3f/0x100
[   53.678516]  do_group_exit+0x5e/0xf0
[   53.678794]  __x64_sys_exit_group+0x25/0x30
[   53.679121]  do_syscall_64+0x3b/0x90
[   53.679409]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   53.679793] RIP: 0033:0x7f3777be6cf6
[   53.680072] Code: Unable to access opcode bytes at 0x7f3777be6ccc.
[   53.680520] RSP: 002b:00007ffd0d7278d8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
[   53.681087] RAX: ffffffffffffffda RBX: 00007f3777cf1490 RCX: 00007f3777be6cf6
[   53.681612] RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
[   53.682132] RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffff80
[   53.682661] R10: 0000000000000004 R11: 0000000000000246 R12: 00007f3777cf1490
[   53.683181] R13: 0000000000000001 R14: 00007f3777cf4e88 R15: 0000000000000000
[   53.683713]  </TASK>
[   53.683886] irq event stamp: 0
[   53.684122] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   53.684586] hardirqs last disabled at (0): [<ffffffff810fff0c>] copy_process+0x11cc/0x2b10
[   53.685210] softirqs last  enabled at (0): [<ffffffff810fff10>] copy_process+0x11d0/0x2b10
[   53.685821] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   53.686278] ---[ end trace 0000000000000000 ]---
[   53.686718] ------------[ cut here ]------------
[   53.687061] WARNING: CPU: 1 PID: 1103 at drivers/iommu/iommufd/pages.c:886 update_unpinned+0x75/0x80
[   53.687736] Modules linked in:
[   53.687970] CPU: 1 PID: 1103 Comm: repro Tainted: G    B   W          6.1.0-a0a6c76cf2a5+ #1
[   53.688583] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   53.689416] RIP: 0010:update_unpinned+0x75/0x80
[   53.689763] Code: ac 2b ff 48 89 de 31 c9 31 d2 4c 29 e6 4c 89 ef e8 70 fb ff ff e8 bb ac 2b ff 5b 41 5c 41 5d 5d c3 cc cc cc cc e8 ab ac 2b ff <0f> 0b eb e7 0f 1f 80 00 00 00 00 0f 1f 44 00 00 55 48 89 e5 41 57
[   53.691090] RSP: 0018:ffffc90001e5ba08 EFLAGS: 00010246
[   53.691482] RAX: 0000000000000000 RBX: 0000000000000000 RCX: ffffffff81fdfdcf
[   53.692000] RDX: 0000000000000000 RSI: ffff88800e678000 RDI: 0000000000000002
[   53.692517] RBP: ffffc90001e5ba20 R08: 0000000000000000 R09: ffff88807dd3b890
[   53.693054] R10: 0000000000001052 R11: 0000000000000000 R12: ffffffffffffffff
[   53.693575] R13: ffff888005ec9c00 R14: 0000000000000002 R15: 0000000000000002
[   53.694093] FS:  0000000000000000(0000) GS:ffff88807dd00000(0000) knlGS:0000000000000000
[   53.694683] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   53.695116] CR2: 00007f3777cf0500 CR3: 0000000003c12002 CR4: 0000000000770ee0
[   53.695639] PKRU: 55555554
[   53.695853] Call Trace:
[   53.696043]  <TASK>
[   53.696210]  iopt_pages_unfill_xarray+0x522/0x5c0
[   53.696582]  ? rcu_read_lock_held_common+0x12/0x50
[   53.696961]  ? write_comp_data+0x2f/0x90
[   53.697269]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   53.697627]  ? write_comp_data+0x2f/0x90
[   53.697930]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   53.698290]  ? interval_tree_remove+0x291/0x4e0
[   53.698646]  ? write_comp_data+0x2f/0x90
[   53.698957]  iopt_area_remove_access+0x108/0x120
[   53.699320]  iommufd_access_unpin_pages+0x177/0x210
[   53.699706]  iommufd_test_access_unmap+0xe0/0x130
[   53.700066]  ? iommufd_test_access_unmap+0x130/0x130
[   53.700443]  iommufd_test_staccess_release+0x39/0x60
[   53.700838]  __fput+0x11f/0x450
[   53.701104]  ____fput+0x1e/0x30
[   53.701357]  task_work_run+0xb6/0x120
[   53.701649]  do_exit+0x521/0x1340
[   53.701908]  ? lock_release+0x202/0x2c0
[   53.702204]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   53.702572]  ? trace_hardirqs_on+0x3f/0x100
[   53.702899]  do_group_exit+0x5e/0xf0
[   53.703179]  __x64_sys_exit_group+0x25/0x30
[   53.703503]  do_syscall_64+0x3b/0x90
[   53.703782]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   53.704172] RIP: 0033:0x7f3777be6cf6
[   53.704451] Code: Unable to access opcode bytes at 0x7f3777be6ccc.
[   53.704913] RSP: 002b:00007ffd0d7278d8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
[   53.705465] RAX: ffffffffffffffda RBX: 00007f3777cf1490 RCX: 00007f3777be6cf6
[   53.705986] RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
[   53.706512] RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffff80
[   53.707035] R10: 0000000000000004 R11: 0000000000000246 R12: 00007f3777cf1490
[   53.707555] R13: 0000000000000001 R14: 00007f3777cf4e88 R15: 0000000000000000
[   53.708079]  </TASK>
[   53.708251] irq event stamp: 0
[   53.708485] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   53.708963] hardirqs last disabled at (0): [<ffffffff810fff0c>] copy_process+0x11cc/0x2b10
[   53.709572] softirqs last  enabled at (0): [<ffffffff810fff10>] copy_process+0x11d0/0x2b10
[   53.710182] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   53.710650] ---[ end trace 0000000000000000 ]---
[   53.711119] ------------[ cut here ]------------
[   53.711467] WARNING: CPU: 1 PID: 1103 at drivers/iommu/iommufd/pages.c:1181 iopt_release_pages+0x159/0x190
[   53.712172] Modules linked in:
[   53.712408] CPU: 1 PID: 1103 Comm: repro Tainted: G    B   W          6.1.0-a0a6c76cf2a5+ #1
[   53.713043] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   53.713863] RIP: 0010:iopt_release_pages+0x159/0x190
[   53.714241] Code: b5 11 ff eb cb e8 87 90 2b ff be 03 00 00 00 4c 89 f7 e8 6a 8b ce ff eb b7 e8 73 90 2b ff 0f 0b e9 ed fe ff ff e8 67 90 2b ff <0f> 0b e9 00 ff ff ff e8 5b 90 2b ff 0f 0b e9 07 ff ff ff e8 4f 90
[   53.715594] RSP: 0018:ffffc90001e5bc88 EFLAGS: 00010246
[   53.715985] RAX: 0000000000000000 RBX: ffff888005ec9c00 RCX: ffffffff81fe1957
[   53.716510] RDX: 0000000000000000 RSI: ffff88800e678000 RDI: 0000000000000002
[   53.717045] RBP: ffffc90001e5bca8 R08: 0000000000000000 R09: 0000000000000000
[   53.717567] R10: ffffc90001e5bc58 R11: 0000000000000000 R12: ffffffffffffffff
[   53.718087] R13: 0000000001000000 R14: 00000000017fffff R15: 0000000000000000
[   53.718612] FS:  0000000000000000(0000) GS:ffff88807dd00000(0000) knlGS:0000000000000000
[   53.719195] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   53.719616] CR2: 00007f3777cf0500 CR3: 0000000003c12002 CR4: 0000000000770ee0
[   53.720146] PKRU: 55555554
[   53.720356] Call Trace:
[   53.720543]  <TASK>
[   53.720725]  iopt_unmap_iova_range+0x1ef/0x2e0
[   53.721071]  iopt_unmap_all+0x2f/0x60
[   53.721368]  iommufd_ioas_destroy+0x2c/0x70
[   53.721688]  iommufd_fops_release+0xd4/0x170
[   53.722028]  ? iommufd_ctx_get+0x30/0x30
[   53.722327]  __fput+0x11f/0x450
[   53.722590]  ____fput+0x1e/0x30
[   53.722840]  task_work_run+0xb6/0x120
[   53.723130]  do_exit+0x521/0x1340
[   53.723393]  ? lock_release+0x202/0x2c0
[   53.723692]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   53.724050]  ? trace_hardirqs_on+0x3f/0x100
[   53.724372]  do_group_exit+0x5e/0xf0
[   53.724648]  __x64_sys_exit_group+0x25/0x30
[   53.724995]  do_syscall_64+0x3b/0x90
[   53.725272]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   53.725649] RIP: 0033:0x7f3777be6cf6
[   53.725927] Code: Unable to access opcode bytes at 0x7f3777be6ccc.
[   53.726379] RSP: 002b:00007ffd0d7278d8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
[   53.726933] RAX: ffffffffffffffda RBX: 00007f3777cf1490 RCX: 00007f3777be6cf6
[   53.727452] RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
[   53.727968] RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffff80
[   53.728486] R10: 0000000000000004 R11: 0000000000000246 R12: 00007f3777cf1490
[   53.729042] R13: 0000000000000001 R14: 00007f3777cf4e88 R15: 0000000000000000
[   53.729560]  </TASK>
[   53.729733] irq event stamp: 0
[   53.729965] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   53.730416] hardirqs last disabled at (0): [<ffffffff810fff0c>] copy_process+0x11cc/0x2b10
[   53.731032] softirqs last  enabled at (0): [<ffffffff810fff10>] copy_process+0x11d0/0x2b10
[   53.731646] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   53.732102] ---[ end trace 0000000000000000 ]---
[   53.808979] ------------[ cut here ]------------
[   53.809355] WARNING: CPU: 1 PID: 1107 at drivers/iommu/iommufd/pages.c:294 __iopt_area_unfill_domain+0x152/0x560
[   53.810089] Modules linked in:
[   53.810320] CPU: 1 PID: 1107 Comm: repro Tainted: G    B   W          6.1.0-a0a6c76cf2a5+ #1
[   53.810942] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   53.811733] RIP: 0010:__iopt_area_unfill_domain+0x152/0x560
[   53.812150] Code: a1 2b ff 44 8b 64 24 54 48 8b 44 24 48 31 ff 44 89 e6 48 89 44 24 38 e8 6c a2 2b ff 45 85 e4 0f 85 eb 01 00 00 e8 ee a0 2b ff <0f> 0b e8 e7 a0 2b ff 48 8b 44 24 38 89 5c 24 58 89 18 8b 44 24 54
[   53.813483] RSP: 0018:ffffc90001e73ae0 EFLAGS: 00010246
[   53.813861] RAX: 0000000000000000 RBX: 00000000ffffffff RCX: ffffffff81fe0bd5
[   53.814362] RDX: 0000000000000000 RSI: ffff88800e67a980 RDI: 0000000000000002
[   53.814871] RBP: ffffc90001e73d10 R08: 000000000003b5c5 R09: 0000000000000003
[   53.815391] R10: 000000000003b5a0 R11: 0000000000000024 R12: 0000000000000001
[   53.815904] R13: 0000000000000801 R14: 00000000000007ff R15: 0000000000000800
[   53.816419] FS:  00007f3777af9740(0000) GS:ffff88807dd00000(0000) knlGS:0000000000000000
[   53.817010] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   53.817429] CR2: 00007f3777c1e580 CR3: 000000001748e001 CR4: 0000000000770ee0
[   53.817946] PKRU: 55555554
[   53.818152] Call Trace:
[   53.818338]  <TASK>
[   53.818525]  ? rcu_read_lock_sched_held+0x29/0x80
[   53.818893]  ? lock_acquire+0x1a1/0x2f0
[   53.819191]  ? rcu_read_lock_held_common+0x12/0x50
[   53.819566]  ? rcu_read_lock_sched_held+0x29/0x80
[   53.819925]  ? __mutex_lock+0x13a/0xf30
[   53.820230]  ? write_comp_data+0x2f/0x90
[   53.820538]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   53.820913]  iopt_area_unfill_domain+0x32/0x40
[   53.821257]  iopt_table_remove_domain+0x23f/0x4c0
[   53.821614]  iommufd_device_selftest_detach+0x3a/0x90
[   53.822005]  iommufd_selftest_destroy+0x55/0x70
[   53.822355]  iommufd_object_destroy_user+0xce/0x130
[   53.822734]  iommufd_destroy+0xa2/0xc0
[   53.823026]  iommufd_fops_ioctl+0x1ef/0x310
[   53.823347]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   53.823703]  ? write_comp_data+0x2f/0x90
[   53.824010]  __x64_sys_ioctl+0x10e/0x160
[   53.824320]  ? iommufd_get_object.part.6+0x1c0/0x1c0
[   53.824710]  do_syscall_64+0x3b/0x90
[   53.824989]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   53.825366] RIP: 0033:0x7f3777c1e59d
[   53.825637] Code: 00 c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d d3 08 0d 00 f7 d8 64 89 01 48
[   53.826980] RSP: 002b:00007ffd0d727918 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   53.827539] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f3777c1e59d
[   53.828080] RDX: 0000000020000140 RSI: 0000000000003b80 RDI: 0000000000000003
[   53.828603] RBP: 00007ffd0d727930 R08: 00007ffd0d727930 R09: 00007ffd0d727930
[   53.829154] R10: 00007ffd0d727930 R11: 0000000000000213 R12: 0000000000401180
[   53.829917] R13: 00007ffd0d727a50 R14: 0000000000000000 R15: 0000000000000000
[   53.830437]  </TASK>
[   53.830620] irq event stamp: 0
[   53.830863] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   53.831329] hardirqs last disabled at (0): [<ffffffff810fff0c>] copy_process+0x11cc/0x2b10
[   53.831950] softirqs last  enabled at (0): [<ffffffff810fff10>] copy_process+0x11d0/0x2b10
[   53.832567] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   53.833064] ---[ end trace 0000000000000000 ]---
[   53.833771] ------------[ cut here ]------------
[   53.834140] WARNING: CPU: 1 PID: 1107 at drivers/iommu/iommufd/pages.c:1290 __iopt_area_unfill_domain+0x54f/0x560
[   53.834899] Modules linked in:
[   53.835149] CPU: 1 PID: 1107 Comm: repro Tainted: G    B   W          6.1.0-a0a6c76cf2a5+ #1
[   53.835784] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   53.836605] RIP: 0010:__iopt_area_unfill_domain+0x54f/0x560
[   53.837073] Code: e8 86 9e 2b ff 85 db 0f 85 35 fb ff ff e8 09 9d 2b ff 0f 0b e9 29 fb ff ff e8 fd 9c 2b ff 0f 0b e9 69 fe ff ff e8 f1 9c 2b ff <0f> 0b e9 58 ff ff ff e8 65 2d dc 00 0f 1f 44 00 00 0f 1f 44 00 00
[   53.838655] RSP: 0018:ffffc90001e73ae0 EFLAGS: 00010246
[   53.839047] RAX: 0000000000000000 RBX: 00000000ffffffff RCX: ffffffff81fe0d26
[   53.839585] RDX: 0000000000000000 RSI: ffff88800e67a980 RDI: 0000000000000002
[   53.840108] RBP: ffffc90001e73d10 R08: 000000000003b5c5 R09: 0000000000000003
[   53.840640] R10: 000000000003b5a0 R11: 0000000000000024 R12: 00000000000007ff
[   53.841361] R13: 0000000000000801 R14: 00000000000007ff R15: 0000000000000800
[   53.841898] FS:  00007f3777af9740(0000) GS:ffff88807dd00000(0000) knlGS:0000000000000000
[   53.842508] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   53.842946] CR2: 00007f3777c1e580 CR3: 000000001748e001 CR4: 0000000000770ee0
[   53.843491] PKRU: 55555554
[   53.843714] Call Trace:
[   53.843903]  <TASK>
[   53.844081]  ? rcu_read_lock_sched_held+0x29/0x80
[   53.844446]  ? lock_acquire+0x1a1/0x2f0
[   53.844781]  ? rcu_read_lock_held_common+0x12/0x50
[   53.845373]  ? rcu_read_lock_sched_held+0x29/0x80
[   53.845891]  ? __mutex_lock+0x13a/0xf30
[   53.846200]  ? write_comp_data+0x2f/0x90
[   53.846518]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   53.846893]  iopt_area_unfill_domain+0x32/0x40
[   53.847248]  iopt_table_remove_domain+0x23f/0x4c0
[   53.847617]  iommufd_device_selftest_detach+0x3a/0x90
[   53.848027]  iommufd_selftest_destroy+0x55/0x70
[   53.848385]  iommufd_object_destroy_user+0xce/0x130
[   53.848789]  iommufd_destroy+0xa2/0xc0
[   53.849282]  iommufd_fops_ioctl+0x1ef/0x310
[   53.849776]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   53.850150]  ? write_comp_data+0x2f/0x90
[   53.850463]  __x64_sys_ioctl+0x10e/0x160
[   53.850795]  ? iommufd_get_object.part.6+0x1c0/0x1c0
[   53.851188]  do_syscall_64+0x3b/0x90
[   53.851470]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   53.851852] RIP: 0033:0x7f3777c1e59d
[   53.852131] Code: 00 c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d d3 08 0d 00 f7 d8 64 89 01 48
[   53.853520] RSP: 002b:00007ffd0d727918 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   53.854393] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f3777c1e59d
[   53.854927] RDX: 0000000020000140 RSI: 0000000000003b80 RDI: 0000000000000003
[   53.855463] RBP: 00007ffd0d727930 R08: 00007ffd0d727930 R09: 00007ffd0d727930
[   53.855987] R10: 00007ffd0d727930 R11: 0000000000000213 R12: 0000000000401180
[   53.856527] R13: 00007ffd0d727a50 R14: 0000000000000000 R15: 0000000000000000
[   53.857090]  </TASK>
[   53.857376] irq event stamp: 0
[   53.857750] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   53.858212] hardirqs last disabled at (0): [<ffffffff810fff0c>] copy_process+0x11cc/0x2b10
[   53.858848] softirqs last  enabled at (0): [<ffffffff810fff10>] copy_process+0x11d0/0x2b10
[   53.859469] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   53.859945] ---[ end trace 0000000000000000 ]---
[   53.864855] ------------[ cut here ]------------
[   53.865474] WARNING: CPU: 1 PID: 1107 at drivers/iommu/iommufd/pages.c:178 batch_unpin.isra.23+0x151/0x1a0
[   53.866688] Modules linked in:
[   53.867131] CPU: 1 PID: 1107 Comm: repro Tainted: G    B   W          6.1.0-a0a6c76cf2a5+ #1
[   53.868159] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   53.869542] RIP: 0010:batch_unpin.isra.23+0x151/0x1a0
[   53.870227] Code: e8 c4 be 2b ff 48 8b 45 d0 48 85 c0 75 17 e8 26 bd 2b ff 48 8b 7d c8 48 89 de e8 fa bd 2b ff 48 39 5d c8 73 07 e8 0f bd 2b ff <0f> 0b e8 08 bd 2b ff 4d 29 e5 31 ff 41 83 c6 01 4c 89 ee 31 db e8
[   53.872387] RSP: 0018:ffffc90001e739d8 EFLAGS: 00010246
[   53.873042] RAX: 0000000000000000 RBX: ffffffffffffffff RCX: ffffffff81fded8c
[   53.873917] RDX: 0000000000000000 RSI: ffff88800e67a980 RDI: 0000000000000002
[   53.874726] RBP: ffffc90001e73a20 R08: 0000000000000000 R09: ffff88807dd3b890
[   53.875545] R10: 0000000000001080 R11: 0000000000000000 R12: 0000000000000001
[   53.876343] R13: 0000000000000001 R14: 0000000000000000 R15: ffff888005ec9c00
[   53.877218] FS:  0000000000000000(0000) GS:ffff88807dd00000(0000) knlGS:0000000000000000
[   53.878214] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   53.878878] CR2: 00007f3777cf0500 CR3: 000000000d51a002 CR4: 0000000000770ee0
[   53.879696] PKRU: 55555554
[   53.880072] Call Trace:
[   53.880367]  <TASK>
[   53.880635]  iopt_pages_unfill_xarray+0x39f/0x5c0
[   53.881291]  ? rcu_read_lock_held_common+0x12/0x50
[   53.881873]  ? write_comp_data+0x2f/0x90
[   53.882372]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   53.882947]  ? write_comp_data+0x2f/0x90
[   53.883465]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   53.884035]  ? interval_tree_remove+0x291/0x4e0
[   53.884627]  ? write_comp_data+0x2f/0x90
[   53.885154]  iopt_area_remove_access+0x108/0x120
[   53.885773]  iommufd_access_unpin_pages+0x177/0x210
[   53.886380]  iommufd_test_access_unmap+0xe0/0x130
[   53.886962]  ? iommufd_test_access_unmap+0x130/0x130
[   53.887595]  iommufd_test_staccess_release+0x39/0x60
[   53.888205]  __fput+0x11f/0x450
[   53.888624]  ____fput+0x1e/0x30
[   53.889037]  task_work_run+0xb6/0x120
[   53.889516]  do_exit+0x521/0x1340
[   53.889946]  ? lock_release+0x202/0x2c0
[   53.890443]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   53.891033]  ? trace_hardirqs_on+0x3f/0x100
[   53.891551]  do_group_exit+0x5e/0xf0
[   53.892035]  __x64_sys_exit_group+0x25/0x30
[   53.892535]  do_syscall_64+0x3b/0x90
[   53.893042]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   53.893660] RIP: 0033:0x7f3777be6cf6
[   53.894120] Code: Unable to access opcode bytes at 0x7f3777be6ccc.
[   53.894841] RSP: 002b:00007ffd0d7278d8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
[   53.895747] RAX: ffffffffffffffda RBX: 00007f3777cf1490 RCX: 00007f3777be6cf6
[   53.896559] RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
[   53.897416] RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffff80
[   53.898282] R10: 0000000000000004 R11: 0000000000000246 R12: 00007f3777cf1490
[   53.899076] R13: 0000000000000001 R14: 00007f3777cf4e88 R15: 0000000000000000
[   53.899935]  </TASK>
[   53.900216] irq event stamp: 0
[   53.900582] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   53.901344] hardirqs last disabled at (0): [<ffffffff810fff0c>] copy_process+0x11cc/0x2b10
[   53.902349] softirqs last  enabled at (0): [<ffffffff810fff10>] copy_process+0x11d0/0x2b10
[   53.903336] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   53.904060] ---[ end trace 0000000000000000 ]---
[   53.904822] ------------[ cut here ]------------
[   53.905382] WARNING: CPU: 1 PID: 1107 at drivers/iommu/iommufd/pages.c:886 update_unpinned+0x75/0x80
[   53.906457] Modules linked in:
[   53.906857] CPU: 1 PID: 1107 Comm: repro Tainted: G    B   W          6.1.0-a0a6c76cf2a5+ #1
[   53.907859] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   53.909242] RIP: 0010:update_unpinned+0x75/0x80
[   53.909822] Code: ac 2b ff 48 89 de 31 c9 31 d2 4c 29 e6 4c 89 ef e8 70 fb ff ff e8 bb ac 2b ff 5b 41 5c 41 5d 5d c3 cc cc cc cc e8 ab ac 2b ff <0f> 0b eb e7 0f 1f 80 00 00 00 00 0f 1f 44 00 00 55 48 89 e5 41 57
[   53.911315] RSP: 0018:ffffc90001e73a08 EFLAGS: 00010246
[   53.911703] RAX: 0000000000000000 RBX: 0000000000000000 RCX: ffffffff81fdfdcf
[   53.912240] RDX: 0000000000000000 RSI: ffff88800e67a980 RDI: 0000000000000002
[   53.912876] RBP: ffffc90001e73a20 R08: 0000000000000000 R09: ffff88807dd3b890
[   53.913536] R10: 0000000000001080 R11: 0000000000000000 R12: ffffffffffffffff
[   53.914061] R13: ffff888005ec9c00 R14: 0000000000000002 R15: 0000000000000002
[   53.914604] FS:  0000000000000000(0000) GS:ffff88807dd00000(0000) knlGS:0000000000000000
[   53.915192] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   53.915636] CR2: 00007f3777cf0500 CR3: 000000000d51a002 CR4: 0000000000770ee0
[   53.916160] PKRU: 55555554
[   53.916383] Call Trace:
[   53.916575]  <TASK>
[   53.916774]  iopt_pages_unfill_xarray+0x522/0x5c0
[   53.917384]  ? rcu_read_lock_held_common+0x12/0x50
[   53.917866]  ? write_comp_data+0x2f/0x90
[   53.918174]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   53.918557]  ? write_comp_data+0x2f/0x90
[   53.918858]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   53.919221]  ? interval_tree_remove+0x291/0x4e0
[   53.919599]  ? write_comp_data+0x2f/0x90
[   53.919907]  iopt_area_remove_access+0x108/0x120
[   53.920269]  iommufd_access_unpin_pages+0x177/0x210
[   53.920702]  iommufd_test_access_unmap+0xe0/0x130
[   53.921295]  ? iommufd_test_access_unmap+0x130/0x130
[   53.921808]  iommufd_test_staccess_release+0x39/0x60
[   53.922195]  __fput+0x11f/0x450
[   53.922455]  ____fput+0x1e/0x30
[   53.922719]  task_work_run+0xb6/0x120
[   53.923031]  do_exit+0x521/0x1340
[   53.923290]  ? lock_release+0x202/0x2c0
[   53.923589]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   53.923964]  ? trace_hardirqs_on+0x3f/0x100
[   53.924299]  do_group_exit+0x5e/0xf0
[   53.924581]  __x64_sys_exit_group+0x25/0x30
[   53.924941]  do_syscall_64+0x3b/0x90
[   53.925394]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   53.926007] RIP: 0033:0x7f3777be6cf6
[   53.926285] Code: Unable to access opcode bytes at 0x7f3777be6ccc.
[   53.926749] RSP: 002b:00007ffd0d7278d8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
[   53.927317] RAX: ffffffffffffffda RBX: 00007f3777cf1490 RCX: 00007f3777be6cf6
[   53.927844] RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
[   53.928374] RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffff80
[   53.928928] R10: 0000000000000004 R11: 0000000000000246 R12: 00007f3777cf1490
[   53.929695] R13: 0000000000000001 R14: 00007f3777cf4e88 R15: 0000000000000000
[   53.930244]  </TASK>
[   53.930416] irq event stamp: 0
[   53.930657] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   53.931113] hardirqs last disabled at (0): [<ffffffff810fff0c>] copy_process+0x11cc/0x2b10
[   53.931741] softirqs last  enabled at (0): [<ffffffff810fff10>] copy_process+0x11d0/0x2b10
[   53.932359] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   53.932857] ---[ end trace 0000000000000000 ]---
[   53.933597] ------------[ cut here ]------------
[   53.933948] WARNING: CPU: 1 PID: 1107 at drivers/iommu/iommufd/pages.c:1181 iopt_release_pages+0x159/0x190
[   53.934675] Modules linked in:
[   53.934914] CPU: 1 PID: 1107 Comm: repro Tainted: G    B   W          6.1.0-a0a6c76cf2a5+ #1
[   53.935550] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   53.936374] RIP: 0010:iopt_release_pages+0x159/0x190
[   53.936802] Code: b5 11 ff eb cb e8 87 90 2b ff be 03 00 00 00 4c 89 f7 e8 6a 8b ce ff eb b7 e8 73 90 2b ff 0f 0b e9 ed fe ff ff e8 67 90 2b ff <0f> 0b e9 00 ff ff ff e8 5b 90 2b ff 0f 0b e9 07 ff ff ff e8 4f 90
[   53.938410] RSP: 0018:ffffc90001e73c88 EFLAGS: 00010246
[   53.938820] RAX: 0000000000000000 RBX: ffff888005ec9c00 RCX: ffffffff81fe1957
[   53.939346] RDX: 0000000000000000 RSI: ffff88800e67a980 RDI: 0000000000000002
[   53.939882] RBP: ffffc90001e73ca8 R08: 0000000000000000 R09: 0000000000000000
[   53.940410] R10: ffffc90001e73c58 R11: 0000000000000000 R12: ffffffffffffffff
[   53.941036] R13: 0000000001000000 R14: 00000000017fffff R15: 0000000000000000
[   53.941757] FS:  0000000000000000(0000) GS:ffff88807dd00000(0000) knlGS:0000000000000000
[   53.942381] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   53.942892] CR2: 00007f3777cf0500 CR3: 000000000d51a002 CR4: 0000000000770ee0
[   53.943465] PKRU: 55555554
[   53.943677] Call Trace:
[   53.943868]  <TASK>
[   53.944039]  iopt_unmap_iova_range+0x1ef/0x2e0
[   53.944398]  iopt_unmap_all+0x2f/0x60
[   53.944715]  iommufd_ioas_destroy+0x2c/0x70
[   53.945230]  iommufd_fops_release+0xd4/0x170
[   53.945713]  ? iommufd_ctx_get+0x30/0x30
[   53.946031]  __fput+0x11f/0x450
[   53.946299]  ____fput+0x1e/0x30
[   53.946564]  task_work_run+0xb6/0x120
[   53.946857]  do_exit+0x521/0x1340
[   53.947117]  ? lock_release+0x202/0x2c0
[   53.947428]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   53.947792]  ? trace_hardirqs_on+0x3f/0x100
[   53.948124]  do_group_exit+0x5e/0xf0
[   53.948417]  __x64_sys_exit_group+0x25/0x30
[   53.948772]  do_syscall_64+0x3b/0x90
[   53.949223]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   53.949840] RIP: 0033:0x7f3777be6cf6
[   53.950127] Code: Unable to access opcode bytes at 0x7f3777be6ccc.
[   53.950600] RSP: 002b:00007ffd0d7278d8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
[   53.951177] RAX: ffffffffffffffda RBX: 00007f3777cf1490 RCX: 00007f3777be6cf6
[   53.951738] RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
[   53.952259] RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffff80
[   53.952914] R10: 0000000000000004 R11: 0000000000000246 R12: 00007f3777cf1490
[   53.953613] R13: 0000000000000001 R14: 00007f3777cf4e88 R15: 0000000000000000
[   53.954318]  </TASK>
[   53.954557] irq event stamp: 0
[   53.954863] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   53.955479] hardirqs last disabled at (0): [<ffffffff810fff0c>] copy_process+0x11cc/0x2b10
[   53.956133] softirqs last  enabled at (0): [<ffffffff810fff10>] copy_process+0x11d0/0x2b10
[   53.956750] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   53.957202] ---[ end trace 0000000000000000 ]---
[   53.997323] ------------[ cut here ]------------
[   53.997693] WARNING: CPU: 1 PID: 1109 at drivers/iommu/iommufd/pages.c:294 __iopt_area_unfill_domain+0x152/0x560
[   53.998421] Modules linked in:
[   53.998664] CPU: 1 PID: 1109 Comm: repro Tainted: G    B   W          6.1.0-a0a6c76cf2a5+ #1
[   53.999282] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   54.000095] RIP: 0010:__iopt_area_unfill_domain+0x152/0x560
[   54.000507] Code: a1 2b ff 44 8b 64 24 54 48 8b 44 24 48 31 ff 44 89 e6 48 89 44 24 38 e8 6c a2 2b ff 45 85 e4 0f 85 eb 01 00 00 e8 ee a0 2b ff <0f> 0b e8 e7 a0 2b ff 48 8b 44 24 38 89 5c 24 58 89 18 8b 44 24 54
[   54.001839] RSP: 0018:ffffc90001e83ae0 EFLAGS: 00010246
[   54.002230] RAX: 0000000000000000 RBX: 00000000ffffffff RCX: ffffffff81fe0bd5
[   54.002744] RDX: 0000000000000000 RSI: ffff88800e67a980 RDI: 0000000000000002
[   54.003255] RBP: ffffc90001e83d10 R08: 000000000003b5c5 R09: 0000000000000005
[   54.003763] R10: 000000000003b5a0 R11: 0000000000000024 R12: 0000000000000002
[   54.004271] R13: 0000000000000801 R14: 00000000000007ff R15: 0000000000000800
[   54.004798] FS:  00007f3777af9740(0000) GS:ffff88807dd00000(0000) knlGS:0000000000000000
[   54.005381] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   54.005801] CR2: 00007f3777c1e580 CR3: 0000000017492005 CR4: 0000000000770ee0
[   54.006320] PKRU: 55555554
[   54.006535] Call Trace:
[   54.006715]  <TASK>
[   54.006885]  ? rcu_read_lock_sched_held+0x29/0x80
[   54.007238]  ? lock_acquire+0x1a1/0x2f0
[   54.007529]  ? rcu_read_lock_held_common+0x12/0x50
[   54.007900]  ? rcu_read_lock_sched_held+0x29/0x80
[   54.008253]  ? __mutex_lock+0x13a/0xf30
[   54.008565]  ? write_comp_data+0x2f/0x90
[   54.008886]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   54.009244]  iopt_area_unfill_domain+0x32/0x40
[   54.009581]  iopt_table_remove_domain+0x23f/0x4c0
[   54.009936]  iommufd_device_selftest_detach+0x3a/0x90
[   54.010333]  iommufd_selftest_destroy+0x55/0x70
[   54.010688]  iommufd_object_destroy_user+0xce/0x130
[   54.011062]  iommufd_destroy+0xa2/0xc0
[   54.011353]  iommufd_fops_ioctl+0x1ef/0x310
[   54.011671]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   54.012030]  ? write_comp_data+0x2f/0x90
[   54.012334]  __x64_sys_ioctl+0x10e/0x160
[   54.012649]  ? iommufd_get_object.part.6+0x1c0/0x1c0
[   54.013054]  do_syscall_64+0x3b/0x90
[   54.013332]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   54.013719] RIP: 0033:0x7f3777c1e59d
[   54.013988] Code: 00 c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d d3 08 0d 00 f7 d8 64 89 01 48
[   54.015324] RSP: 002b:00007ffd0d727918 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   54.015888] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f3777c1e59d
[   54.016405] RDX: 0000000020000140 RSI: 0000000000003b80 RDI: 0000000000000003
[   54.016957] RBP: 00007ffd0d727930 R08: 00007ffd0d727930 R09: 00007ffd0d727930
[   54.017470] R10: 00007ffd0d727930 R11: 0000000000000213 R12: 0000000000401180
[   54.017985] R13: 00007ffd0d727a50 R14: 0000000000000000 R15: 0000000000000000
[   54.018510]  </TASK>
[   54.018681] irq event stamp: 0
[   54.018915] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   54.019376] hardirqs last disabled at (0): [<ffffffff810fff0c>] copy_process+0x11cc/0x2b10
[   54.019977] softirqs last  enabled at (0): [<ffffffff810fff10>] copy_process+0x11d0/0x2b10
[   54.020568] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   54.021060] ---[ end trace 0000000000000000 ]---
[   54.021718] ------------[ cut here ]------------
[   54.022144] WARNING: CPU: 1 PID: 1109 at drivers/iommu/iommufd/pages.c:1290 __iopt_area_unfill_domain+0x54f/0x560
[   54.022898] Modules linked in:
[   54.023134] CPU: 1 PID: 1109 Comm: repro Tainted: G    B   W          6.1.0-a0a6c76cf2a5+ #1
[   54.023750] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   54.024567] RIP: 0010:__iopt_area_unfill_domain+0x54f/0x560
[   54.025021] Code: e8 86 9e 2b ff 85 db 0f 85 35 fb ff ff e8 09 9d 2b ff 0f 0b e9 29 fb ff ff e8 fd 9c 2b ff 0f 0b e9 69 fe ff ff e8 f1 9c 2b ff <0f> 0b e9 58 ff ff ff e8 65 2d dc 00 0f 1f 44 00 00 0f 1f 44 00 00
[   54.026566] RSP: 0018:ffffc90001e83ae0 EFLAGS: 00010246
[   54.026954] RAX: 0000000000000000 RBX: 00000000ffffffff RCX: ffffffff81fe0d26
[   54.027523] RDX: 0000000000000000 RSI: ffff88800e67a980 RDI: 0000000000000002
[   54.028052] RBP: ffffc90001e83d10 R08: 000000000003b5c5 R09: 0000000000000005
[   54.028562] R10: 000000000003b5a0 R11: 0000000000000024 R12: 00000000000007ff
[   54.029119] R13: 0000000000000801 R14: 00000000000007ff R15: 0000000000000800
[   54.029856] FS:  00007f3777af9740(0000) GS:ffff88807dd00000(0000) knlGS:0000000000000000
[   54.030440] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   54.030881] CR2: 00007f3777c1e580 CR3: 0000000017492005 CR4: 0000000000770ee0
[   54.031409] PKRU: 55555554
[   54.031617] Call Trace:
[   54.031807]  <TASK>
[   54.031992]  ? rcu_read_lock_sched_held+0x29/0x80
[   54.032357]  ? lock_acquire+0x1a1/0x2f0
[   54.032679]  ? rcu_read_lock_held_common+0x12/0x50
[   54.033268]  ? rcu_read_lock_sched_held+0x29/0x80
[   54.033782]  ? __mutex_lock+0x13a/0xf30
[   54.034098]  ? write_comp_data+0x2f/0x90
[   54.034403]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   54.034780]  iopt_area_unfill_domain+0x32/0x40
[   54.035130]  iopt_table_remove_domain+0x23f/0x4c0
[   54.035481]  iommufd_device_selftest_detach+0x3a/0x90
[   54.035872]  iommufd_selftest_destroy+0x55/0x70
[   54.036228]  iommufd_object_destroy_user+0xce/0x130
[   54.036596]  iommufd_destroy+0xa2/0xc0
[   54.036918]  iommufd_fops_ioctl+0x1ef/0x310
[   54.037431]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   54.037966]  ? write_comp_data+0x2f/0x90
[   54.038284]  __x64_sys_ioctl+0x10e/0x160
[   54.038606]  ? iommufd_get_object.part.6+0x1c0/0x1c0
[   54.038984]  do_syscall_64+0x3b/0x90
[   54.039262]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   54.039652] RIP: 0033:0x7f3777c1e59d
[   54.039929] Code: 00 c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d d3 08 0d 00 f7 d8 64 89 01 48
[   54.041275] RSP: 002b:00007ffd0d727918 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   54.042105] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f3777c1e59d
[   54.042653] RDX: 0000000020000140 RSI: 0000000000003b80 RDI: 0000000000000003
[   54.043180] RBP: 00007ffd0d727930 R08: 00007ffd0d727930 R09: 00007ffd0d727930
[   54.043711] R10: 00007ffd0d727930 R11: 0000000000000213 R12: 0000000000401180
[   54.044227] R13: 00007ffd0d727a50 R14: 0000000000000000 R15: 0000000000000000
[   54.044804]  </TASK>
[   54.045068] irq event stamp: 0
[   54.045438] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   54.045924] hardirqs last disabled at (0): [<ffffffff810fff0c>] copy_process+0x11cc/0x2b10
[   54.046540] softirqs last  enabled at (0): [<ffffffff810fff10>] copy_process+0x11d0/0x2b10
[   54.047156] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   54.047613] ---[ end trace 0000000000000000 ]---
[   54.050737] ------------[ cut here ]------------
[   54.051107] WARNING: CPU: 1 PID: 1109 at drivers/iommu/iommufd/pages.c:178 batch_unpin.isra.23+0x151/0x1a0
[   54.051811] Modules linked in:
[   54.052044] CPU: 1 PID: 1109 Comm: repro Tainted: G    B   W          6.1.0-a0a6c76cf2a5+ #1
[   54.052685] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   54.053705] RIP: 0010:batch_unpin.isra.23+0x151/0x1a0
[   54.054086] Code: e8 c4 be 2b ff 48 8b 45 d0 48 85 c0 75 17 e8 26 bd 2b ff 48 8b 7d c8 48 89 de e8 fa bd 2b ff 48 39 5d c8 73 07 e8 0f bd 2b ff <0f> 0b e8 08 bd 2b ff 4d 29 e5 31 ff 41 83 c6 01 4c 89 ee 31 db e8
[   54.055440] RSP: 0018:ffffc90001e839d8 EFLAGS: 00010246
[   54.055843] RAX: 0000000000000000 RBX: ffffffffffffffff RCX: ffffffff81fded8c
[   54.056362] RDX: 0000000000000000 RSI: ffff88800e67a980 RDI: 0000000000000002
[   54.056909] RBP: ffffc90001e83a20 R08: 0000000000000000 R09: ffff88807dd3b890
[   54.057651] R10: 00000000000010a3 R11: 0000000000000000 R12: 0000000000000001
[   54.058167] R13: 0000000000000001 R14: 0000000000000000 R15: ffff888005ec9c00
[   54.058699] FS:  0000000000000000(0000) GS:ffff88807dd00000(0000) knlGS:0000000000000000
[   54.059284] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   54.059715] CR2: 00007f3777cf0500 CR3: 0000000003c12004 CR4: 0000000000770ee0
[   54.060227] PKRU: 55555554
[   54.060435] Call Trace:
[   54.060621]  <TASK>
[   54.060828]  iopt_pages_unfill_xarray+0x39f/0x5c0
[   54.061415]  ? rcu_read_lock_sched_held+0x29/0x80
[   54.061926]  ? rcu_read_lock_held_common+0x12/0x50
[   54.062285]  ? write_comp_data+0x2f/0x90
[   54.062598]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   54.062964]  ? write_comp_data+0x2f/0x90
[   54.063271]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   54.063629]  ? interval_tree_remove+0x291/0x4e0
[   54.064003]  ? write_comp_data+0x2f/0x90
[   54.064312]  iopt_area_remove_access+0x108/0x120
[   54.064702]  iommufd_access_unpin_pages+0x177/0x210
[   54.065288]  iommufd_test_access_unmap+0xe0/0x130
[   54.065788]  ? iommufd_test_access_unmap+0x130/0x130
[   54.066179]  iommufd_test_staccess_release+0x39/0x60
[   54.066568]  __fput+0x11f/0x450
[   54.066823]  ____fput+0x1e/0x30
[   54.067078]  task_work_run+0xb6/0x120
[   54.067387]  do_exit+0x521/0x1340
[   54.067644]  ? lock_release+0x202/0x2c0
[   54.067936]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   54.068304]  ? trace_hardirqs_on+0x3f/0x100
[   54.068629]  do_group_exit+0x5e/0xf0
[   54.068943]  __x64_sys_exit_group+0x25/0x30
[   54.069452]  do_syscall_64+0x3b/0x90
[   54.069899]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   54.070381] RIP: 0033:0x7f3777be6cf6
[   54.070668] Code: Unable to access opcode bytes at 0x7f3777be6ccc.
[   54.071118] RSP: 002b:00007ffd0d7278d8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
[   54.071675] RAX: ffffffffffffffda RBX: 00007f3777cf1490 RCX: 00007f3777be6cf6
[   54.072189] RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
[   54.072749] RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffff80
[   54.073482] R10: 0000000000000004 R11: 0000000000000246 R12: 00007f3777cf1490
[   54.074010] R13: 0000000000000001 R14: 00007f3777cf4e88 R15: 0000000000000000
[   54.074542]  </TASK>
[   54.074727] irq event stamp: 0
[   54.074965] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   54.075425] hardirqs last disabled at (0): [<ffffffff810fff0c>] copy_process+0x11cc/0x2b10
[   54.076034] softirqs last  enabled at (0): [<ffffffff810fff10>] copy_process+0x11d0/0x2b10
[   54.076637] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   54.077134] ---[ end trace 0000000000000000 ]---
[   54.077811] ------------[ cut here ]------------
[   54.078235] WARNING: CPU: 1 PID: 1109 at drivers/iommu/iommufd/pages.c:886 update_unpinned+0x75/0x80
[   54.078916] Modules linked in:
[   54.079149] CPU: 1 PID: 1109 Comm: repro Tainted: G    B   W          6.1.0-a0a6c76cf2a5+ #1
[   54.079757] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   54.080575] RIP: 0010:update_unpinned+0x75/0x80
[   54.080949] Code: ac 2b ff 48 89 de 31 c9 31 d2 4c 29 e6 4c 89 ef e8 70 fb ff ff e8 bb ac 2b ff 5b 41 5c 41 5d 5d c3 cc cc cc cc e8 ab ac 2b ff <0f> 0b eb e7 0f 1f 80 00 00 00 00 0f 1f 44 00 00 55 48 89 e5 41 57
[   54.082519] RSP: 0018:ffffc90001e83a08 EFLAGS: 00010246
[   54.082905] RAX: 0000000000000000 RBX: 0000000000000000 RCX: ffffffff81fdfdcf
[   54.083432] RDX: 0000000000000000 RSI: ffff88800e67a980 RDI: 0000000000000002
[   54.083953] RBP: ffffc90001e83a20 R08: 0000000000000000 R09: ffff88807dd3b890
[   54.084478] R10: 00000000000010a3 R11: 0000000000000000 R12: ffffffffffffffff
[   54.085020] R13: ffff888005ec9c00 R14: 0000000000000002 R15: 0000000000000002
[   54.085754] FS:  0000000000000000(0000) GS:ffff88807dd00000(0000) knlGS:0000000000000000
[   54.086342] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   54.086774] CR2: 00007f3777cf0500 CR3: 0000000003c12004 CR4: 0000000000770ee0
[   54.087297] PKRU: 55555554
[   54.087518] Call Trace:
[   54.087705]  <TASK>
[   54.087876]  iopt_pages_unfill_xarray+0x522/0x5c0
[   54.088243]  ? rcu_read_lock_sched_held+0x29/0x80
[   54.088626]  ? rcu_read_lock_held_common+0x12/0x50
[   54.089021]  ? write_comp_data+0x2f/0x90
[   54.089508]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   54.090051]  ? write_comp_data+0x2f/0x90
[   54.090358]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   54.090733]  ? interval_tree_remove+0x291/0x4e0
[   54.091087]  ? write_comp_data+0x2f/0x90
[   54.091396]  iopt_area_remove_access+0x108/0x120
[   54.091762]  iommufd_access_unpin_pages+0x177/0x210
[   54.092139]  iommufd_test_access_unmap+0xe0/0x130
[   54.092505]  ? iommufd_test_access_unmap+0x130/0x130
[   54.092915]  iommufd_test_staccess_release+0x39/0x60
[   54.093507]  __fput+0x11f/0x450
[   54.093893]  ____fput+0x1e/0x30
[   54.094141]  task_work_run+0xb6/0x120
[   54.094431]  do_exit+0x521/0x1340
[   54.094706]  ? lock_release+0x202/0x2c0
[   54.095010]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   54.095366]  ? trace_hardirqs_on+0x3f/0x100
[   54.095688]  do_group_exit+0x5e/0xf0
[   54.095977]  __x64_sys_exit_group+0x25/0x30
[   54.096292]  do_syscall_64+0x3b/0x90
[   54.096570]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   54.096983] RIP: 0033:0x7f3777be6cf6
[   54.097413] Code: Unable to access opcode bytes at 0x7f3777be6ccc.
[   54.098096] RSP: 002b:00007ffd0d7278d8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
[   54.098657] RAX: ffffffffffffffda RBX: 00007f3777cf1490 RCX: 00007f3777be6cf6
[   54.099197] RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
[   54.099715] RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffff80
[   54.100240] R10: 0000000000000004 R11: 0000000000000246 R12: 00007f3777cf1490
[   54.100789] R13: 0000000000000001 R14: 00007f3777cf4e88 R15: 0000000000000000
[   54.101543]  </TASK>
[   54.101717] irq event stamp: 0
[   54.101949] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   54.102422] hardirqs last disabled at (0): [<ffffffff810fff0c>] copy_process+0x11cc/0x2b10
[   54.103034] softirqs last  enabled at (0): [<ffffffff810fff10>] copy_process+0x11d0/0x2b10
[   54.103664] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   54.104119] ---[ end trace 0000000000000000 ]---
[   54.104605] ------------[ cut here ]------------
[   54.104971] WARNING: CPU: 1 PID: 1109 at drivers/iommu/iommufd/pages.c:1181 iopt_release_pages+0x159/0x190
[   54.105981] Modules linked in:
[   54.106218] CPU: 1 PID: 1109 Comm: repro Tainted: G    B   W          6.1.0-a0a6c76cf2a5+ #1
[   54.106854] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   54.107681] RIP: 0010:iopt_release_pages+0x159/0x190
[   54.108053] Code: b5 11 ff eb cb e8 87 90 2b ff be 03 00 00 00 4c 89 f7 e8 6a 8b ce ff eb b7 e8 73 90 2b ff 0f 0b e9 ed fe ff ff e8 67 90 2b ff <0f> 0b e9 00 ff ff ff e8 5b 90 2b ff 0f 0b e9 07 ff ff ff e8 4f 90
[   54.109416] RSP: 0018:ffffc90001e83c88 EFLAGS: 00010246
[   54.110012] RAX: 0000000000000000 RBX: ffff888005ec9c00 RCX: ffffffff81fe1957
[   54.110542] RDX: 0000000000000000 RSI: ffff88800e67a980 RDI: 0000000000000002
[   54.111070] RBP: ffffc90001e83ca8 R08: 0000000000000000 R09: 0000000000000000
[   54.111583] R10: ffffc90001e83c58 R11: 0000000000000000 R12: ffffffffffffffff
[   54.112106] R13: 0000000001000000 R14: 00000000017fffff R15: 0000000000000000
[   54.112619] FS:  0000000000000000(0000) GS:ffff88807dd00000(0000) knlGS:0000000000000000
[   54.113260] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   54.113916] CR2: 00007f3777cf0500 CR3: 0000000003c12004 CR4: 0000000000770ee0
[   54.114456] PKRU: 55555554
[   54.114673] Call Trace:
[   54.114863]  <TASK>
[   54.115027]  iopt_unmap_iova_range+0x1ef/0x2e0
[   54.115374]  iopt_unmap_all+0x2f/0x60
[   54.115655]  iommufd_ioas_destroy+0x2c/0x70
[   54.115977]  iommufd_fops_release+0xd4/0x170
[   54.116318]  ? iommufd_ctx_get+0x30/0x30
[   54.116617]  __fput+0x11f/0x450
[   54.116902]  ____fput+0x1e/0x30
[   54.117298]  task_work_run+0xb6/0x120
[   54.117751]  do_exit+0x521/0x1340
[   54.118126]  ? lock_release+0x202/0x2c0
[   54.118440]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   54.118814]  ? trace_hardirqs_on+0x3f/0x100
[   54.119151]  do_group_exit+0x5e/0xf0
[   54.119449]  __x64_sys_exit_group+0x25/0x30
[   54.119765]  do_syscall_64+0x3b/0x90
[   54.120044]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   54.120430] RIP: 0033:0x7f3777be6cf6
[   54.120730] Code: Unable to access opcode bytes at 0x7f3777be6ccc.
[   54.121445] RSP: 002b:00007ffd0d7278d8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
[   54.122326] RAX: ffffffffffffffda RBX: 00007f3777cf1490 RCX: 00007f3777be6cf6
[   54.123118] RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
[   54.123967] RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffff80
[   54.124866] R10: 0000000000000004 R11: 0000000000000246 R12: 00007f3777cf1490
[   54.125725] R13: 0000000000000001 R14: 00007f3777cf4e88 R15: 0000000000000000
[   54.126612]  </TASK>
[   54.126879] irq event stamp: 0
[   54.127314] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   54.128047] hardirqs last disabled at (0): [<ffffffff810fff0c>] copy_process+0x11cc/0x2b10
[   54.129082] softirqs last  enabled at (0): [<ffffffff810fff10>] copy_process+0x11d0/0x2b10
[   54.130055] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   54.130779] ---[ end trace 0000000000000000 ]---
[   54.166898] ------------[ cut here ]------------
[   54.167262] WARNING: CPU: 1 PID: 1110 at drivers/iommu/iommufd/pages.c:294 __iopt_area_unfill_domain+0x152/0x560
[   54.168054] Modules linked in:
[   54.168296] CPU: 1 PID: 1110 Comm: repro Tainted: G    B   W          6.1.0-a0a6c76cf2a5+ #1
[   54.168969] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   54.170022] RIP: 0010:__iopt_area_unfill_domain+0x152/0x560
[   54.170450] Code: a1 2b ff 44 8b 64 24 54 48 8b 44 24 48 31 ff 44 89 e6 48 89 44 24 38 e8 6c a2 2b ff 45 85 e4 0f 85 eb 01 00 00 e8 ee a0 2b ff <0f> 0b e8 e7 a0 2b ff 48 8b 44 24 38 89 5c 24 58 89 18 8b 44 24 54
[   54.171795] RSP: 0018:ffffc90001e8bae0 EFLAGS: 00010246
[   54.172189] RAX: 0000000000000000 RBX: 00000000ffffffff RCX: ffffffff81fe0bd5
[   54.172736] RDX: 0000000000000000 RSI: ffff88800e67d300 RDI: 0000000000000002
[   54.173439] RBP: ffffc90001e8bd10 R08: 000000000003b5c5 R09: 000000000000000b
[   54.173960] R10: 000000000003b5a0 R11: 0000000000000024 R12: 0000000000000001
[   54.174515] R13: 0000000000000801 R14: 00000000000007ff R15: 0000000000000800
[   54.175032] FS:  00007f3777af9740(0000) GS:ffff88807dd00000(0000) knlGS:0000000000000000
[   54.175633] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   54.176059] CR2: 00007f3777c1e580 CR3: 00000000174aa006 CR4: 0000000000770ee0
[   54.176590] PKRU: 55555554
[   54.176832] Call Trace:
[   54.177139]  <TASK>
[   54.177425]  ? rcu_read_lock_sched_held+0x29/0x80
[   54.177914]  ? lock_acquire+0x1a1/0x2f0
[   54.178214]  ? rcu_read_lock_held_common+0x12/0x50
[   54.178587]  ? rcu_read_lock_sched_held+0x29/0x80
[   54.178956]  ? __mutex_lock+0x13a/0xf30
[   54.179260]  ? write_comp_data+0x2f/0x90
[   54.179561]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   54.179933]  iopt_area_unfill_domain+0x32/0x40
[   54.180277]  iopt_table_remove_domain+0x23f/0x4c0
[   54.180636]  iommufd_device_selftest_detach+0x3a/0x90
[   54.181299]  iommufd_selftest_destroy+0x55/0x70
[   54.181771]  iommufd_object_destroy_user+0xce/0x130
[   54.182157]  iommufd_destroy+0xa2/0xc0
[   54.182449]  iommufd_fops_ioctl+0x1ef/0x310
[   54.182776]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   54.183153]  ? write_comp_data+0x2f/0x90
[   54.183462]  __x64_sys_ioctl+0x10e/0x160
[   54.183773]  ? iommufd_get_object.part.6+0x1c0/0x1c0
[   54.184162]  do_syscall_64+0x3b/0x90
[   54.184444]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   54.184872] RIP: 0033:0x7f3777c1e59d
[   54.185315] Code: 00 c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d d3 08 0d 00 f7 d8 64 89 01 48
[   54.186859] RSP: 002b:00007ffd0d727918 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   54.187443] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f3777c1e59d
[   54.187975] RDX: 0000000020000140 RSI: 0000000000003b80 RDI: 0000000000000003
[   54.188508] RBP: 00007ffd0d727930 R08: 00007ffd0d727930 R09: 00007ffd0d727930
[   54.189056] R10: 00007ffd0d727930 R11: 0000000000000213 R12: 0000000000401180
[   54.189767] R13: 00007ffd0d727a50 R14: 0000000000000000 R15: 0000000000000000
[   54.190292]  </TASK>
[   54.190466] irq event stamp: 0
[   54.190732] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   54.191191] hardirqs last disabled at (0): [<ffffffff810fff0c>] copy_process+0x11cc/0x2b10
[   54.191823] softirqs last  enabled at (0): [<ffffffff810fff10>] copy_process+0x11d0/0x2b10
[   54.192455] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   54.192987] ---[ end trace 0000000000000000 ]---
[   54.193686] ------------[ cut here ]------------
[   54.194046] WARNING: CPU: 1 PID: 1110 at drivers/iommu/iommufd/pages.c:1290 __iopt_area_unfill_domain+0x54f/0x560
[   54.194813] Modules linked in:
[   54.195052] CPU: 1 PID: 1110 Comm: repro Tainted: G    B   W          6.1.0-a0a6c76cf2a5+ #1
[   54.195676] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   54.196502] RIP: 0010:__iopt_area_unfill_domain+0x54f/0x560
[   54.196960] Code: e8 86 9e 2b ff 85 db 0f 85 35 fb ff ff e8 09 9d 2b ff 0f 0b e9 29 fb ff ff e8 fd 9c 2b ff 0f 0b e9 69 fe ff ff e8 f1 9c 2b ff <0f> 0b e9 58 ff ff ff e8 65 2d dc 00 0f 1f 44 00 00 0f 1f 44 00 00
[   54.198560] RSP: 0018:ffffc90001e8bae0 EFLAGS: 00010246
[   54.198951] RAX: 0000000000000000 RBX: 00000000ffffffff RCX: ffffffff81fe0d26
[   54.199483] RDX: 0000000000000000 RSI: ffff88800e67d300 RDI: 0000000000000002
[   54.200030] RBP: ffffc90001e8bd10 R08: 000000000003b5c5 R09: 000000000000000b
[   54.200559] R10: 000000000003b5a0 R11: 0000000000000024 R12: 00000000000007ff
[   54.201109] R13: 0000000000000801 R14: 00000000000007ff R15: 0000000000000800
[   54.201842] FS:  00007f3777af9740(0000) GS:ffff88807dd00000(0000) knlGS:0000000000000000
[   54.202440] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   54.202878] CR2: 00007f3777c1e580 CR3: 00000000174aa006 CR4: 0000000000770ee0
[   54.203424] PKRU: 55555554
[   54.203631] Call Trace:
[   54.203814]  <TASK>
[   54.203988]  ? rcu_read_lock_sched_held+0x29/0x80
[   54.204361]  ? lock_acquire+0x1a1/0x2f0
[   54.204698]  ? rcu_read_lock_held_common+0x12/0x50
[   54.205283]  ? rcu_read_lock_sched_held+0x29/0x80
[   54.205775]  ? __mutex_lock+0x13a/0xf30
[   54.206078]  ? write_comp_data+0x2f/0x90
[   54.206382]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   54.206766]  iopt_area_unfill_domain+0x32/0x40
[   54.207112]  iopt_table_remove_domain+0x23f/0x4c0
[   54.207473]  iommufd_device_selftest_detach+0x3a/0x90
[   54.207871]  iommufd_selftest_destroy+0x55/0x70
[   54.208220]  iommufd_object_destroy_user+0xce/0x130
[   54.208595]  iommufd_destroy+0xa2/0xc0
[   54.208925]  iommufd_fops_ioctl+0x1ef/0x310
[   54.209444]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   54.209985]  ? write_comp_data+0x2f/0x90
[   54.210306]  __x64_sys_ioctl+0x10e/0x160
[   54.210625]  ? iommufd_get_object.part.6+0x1c0/0x1c0
[   54.211001]  do_syscall_64+0x3b/0x90
[   54.211276]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   54.211651] RIP: 0033:0x7f3777c1e59d
[   54.211939] Code: 00 c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d d3 08 0d 00 f7 d8 64 89 01 48
[   54.213295] RSP: 002b:00007ffd0d727918 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   54.214131] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f3777c1e59d
[   54.214667] RDX: 0000000020000140 RSI: 0000000000003b80 RDI: 0000000000000003
[   54.215204] RBP: 00007ffd0d727930 R08: 00007ffd0d727930 R09: 00007ffd0d727930
[   54.215721] R10: 00007ffd0d727930 R11: 0000000000000213 R12: 0000000000401180
[   54.216256] R13: 00007ffd0d727a50 R14: 0000000000000000 R15: 0000000000000000
[   54.216822]  </TASK>
[   54.217104] irq event stamp: 0
[   54.217475] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   54.217935] hardirqs last disabled at (0): [<ffffffff810fff0c>] copy_process+0x11cc/0x2b10
[   54.218570] softirqs last  enabled at (0): [<ffffffff810fff10>] copy_process+0x11d0/0x2b10
[   54.219170] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   54.219645] ---[ end trace 0000000000000000 ]---
[   54.222869] ------------[ cut here ]------------
[   54.223227] WARNING: CPU: 1 PID: 1110 at drivers/iommu/iommufd/pages.c:178 batch_unpin.isra.23+0x151/0x1a0
[   54.223942] Modules linked in:
[   54.224181] CPU: 1 PID: 1110 Comm: repro Tainted: G    B   W          6.1.0-a0a6c76cf2a5+ #1
[   54.224833] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   54.225846] RIP: 0010:batch_unpin.isra.23+0x151/0x1a0
[   54.226234] Code: e8 c4 be 2b ff 48 8b 45 d0 48 85 c0 75 17 e8 26 bd 2b ff 48 8b 7d c8 48 89 de e8 fa bd 2b ff 48 39 5d c8 73 07 e8 0f bd 2b ff <0f> 0b e8 08 bd 2b ff 4d 29 e5 31 ff 41 83 c6 01 4c 89 ee 31 db e8
[   54.227584] RSP: 0018:ffffc90001e8b9d8 EFLAGS: 00010246
[   54.227986] RAX: 0000000000000000 RBX: ffffffffffffffff RCX: ffffffff81fded8c
[   54.228511] RDX: 0000000000000000 RSI: ffff88800e67d300 RDI: 0000000000000002
[   54.229067] RBP: ffffc90001e8ba20 R08: 0000000000000000 R09: ffff88807dd3b890
[   54.229807] R10: 00000000000010aa R11: 0000000000000000 R12: 0000000000000001
[   54.230339] R13: 0000000000000001 R14: 0000000000000000 R15: ffff888005ec9400
[   54.230873] FS:  0000000000000000(0000) GS:ffff88807dd00000(0000) knlGS:0000000000000000
[   54.231467] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   54.231890] CR2: 00007f3777cf0500 CR3: 0000000003c12004 CR4: 0000000000770ee0
[   54.232423] PKRU: 55555554
[   54.232637] Call Trace:
[   54.232857]  <TASK>
[   54.233133]  iopt_pages_unfill_xarray+0x39f/0x5c0
[   54.233698]  ? rcu_read_lock_sched_held+0x29/0x80
[   54.234079]  ? rcu_read_lock_held_common+0x12/0x50
[   54.234459]  ? write_comp_data+0x2f/0x90
[   54.234771]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   54.235135]  ? write_comp_data+0x2f/0x90
[   54.235458]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   54.235818]  ? interval_tree_remove+0x291/0x4e0
[   54.236172]  ? write_comp_data+0x2f/0x90
[   54.236489]  iopt_area_remove_access+0x108/0x120
[   54.236876]  iommufd_access_unpin_pages+0x177/0x210
[   54.237499]  iommufd_test_access_unmap+0xe0/0x130
[   54.238019]  ? iommufd_test_access_unmap+0x130/0x130
[   54.238397]  iommufd_test_staccess_release+0x39/0x60
[   54.238800]  __fput+0x11f/0x450
[   54.239062]  ____fput+0x1e/0x30
[   54.239313]  task_work_run+0xb6/0x120
[   54.239610]  do_exit+0x521/0x1340
[   54.239877]  ? lock_release+0x202/0x2c0
[   54.240174]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   54.240534]  ? trace_hardirqs_on+0x3f/0x100
[   54.240900]  do_group_exit+0x5e/0xf0
[   54.241357]  __x64_sys_exit_group+0x25/0x30
[   54.241885]  do_syscall_64+0x3b/0x90
[   54.242169]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   54.242559] RIP: 0033:0x7f3777be6cf6
[   54.242836] Code: Unable to access opcode bytes at 0x7f3777be6ccc.
[   54.243284] RSP: 002b:00007ffd0d7278d8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
[   54.243833] RAX: ffffffffffffffda RBX: 00007f3777cf1490 RCX: 00007f3777be6cf6
[   54.244362] RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
[   54.244909] RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffff80
[   54.245711] R10: 0000000000000004 R11: 0000000000000246 R12: 00007f3777cf1490
[   54.246245] R13: 0000000000000001 R14: 00007f3777cf4e88 R15: 0000000000000000
[   54.246791]  </TASK>
[   54.246965] irq event stamp: 0
[   54.247213] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   54.247665] hardirqs last disabled at (0): [<ffffffff810fff0c>] copy_process+0x11cc/0x2b10
[   54.248282] softirqs last  enabled at (0): [<ffffffff810fff10>] copy_process+0x11d0/0x2b10
[   54.248915] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   54.249649] ---[ end trace 0000000000000000 ]---
[   54.250093] ------------[ cut here ]------------
[   54.250449] WARNING: CPU: 1 PID: 1110 at drivers/iommu/iommufd/pages.c:886 update_unpinned+0x75/0x80
[   54.251128] Modules linked in:
[   54.251379] CPU: 1 PID: 1110 Comm: repro Tainted: G    B   W          6.1.0-a0a6c76cf2a5+ #1
[   54.252003] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   54.252872] RIP: 0010:update_unpinned+0x75/0x80
[   54.253449] Code: ac 2b ff 48 89 de 31 c9 31 d2 4c 29 e6 4c 89 ef e8 70 fb ff ff e8 bb ac 2b ff 5b 41 5c 41 5d 5d c3 cc cc cc cc e8 ab ac 2b ff <0f> 0b eb e7 0f 1f 80 00 00 00 00 0f 1f 44 00 00 55 48 89 e5 41 57
[   54.254850] RSP: 0018:ffffc90001e8ba08 EFLAGS: 00010246
[   54.255233] RAX: 0000000000000000 RBX: 0000000000000000 RCX: ffffffff81fdfdcf
[   54.255765] RDX: 0000000000000000 RSI: ffff88800e67d300 RDI: 0000000000000002
[   54.256280] RBP: ffffc90001e8ba20 R08: 0000000000000000 R09: ffff88807dd3b890
[   54.256837] R10: 00000000000010aa R11: 0000000000000000 R12: ffffffffffffffff
[   54.257536] R13: ffff888005ec9400 R14: 0000000000000002 R15: 0000000000000002
[   54.258071] FS:  0000000000000000(0000) GS:ffff88807dd00000(0000) knlGS:0000000000000000
[   54.258665] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   54.259105] CR2: 00007f3777cf0500 CR3: 0000000003c12004 CR4: 0000000000770ee0
[   54.259625] PKRU: 55555554
[   54.259850] Call Trace:
[   54.260054]  <TASK>
[   54.260226]  iopt_pages_unfill_xarray+0x522/0x5c0
[   54.260590]  ? rcu_read_lock_sched_held+0x29/0x80
[   54.261015]  ? rcu_read_lock_held_common+0x12/0x50
[   54.261602]  ? write_comp_data+0x2f/0x90
[   54.262066]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   54.262425]  ? write_comp_data+0x2f/0x90
[   54.262736]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   54.263108]  ? interval_tree_remove+0x291/0x4e0
[   54.263461]  ? write_comp_data+0x2f/0x90
[   54.263765]  iopt_area_remove_access+0x108/0x120
[   54.264132]  iommufd_access_unpin_pages+0x177/0x210
[   54.264533]  iommufd_test_access_unmap+0xe0/0x130
[   54.264932]  ? iommufd_test_access_unmap+0x130/0x130
[   54.265545]  iommufd_test_staccess_release+0x39/0x60
[   54.266037]  __fput+0x11f/0x450
[   54.266303]  ____fput+0x1e/0x30
[   54.266572]  task_work_run+0xb6/0x120
[   54.266859]  do_exit+0x521/0x1340
[   54.267118]  ? lock_release+0x202/0x2c0
[   54.267431]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   54.267796]  ? trace_hardirqs_on+0x3f/0x100
[   54.268125]  do_group_exit+0x5e/0xf0
[   54.268407]  __x64_sys_exit_group+0x25/0x30
[   54.268761]  do_syscall_64+0x3b/0x90
[   54.269216]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   54.269809] RIP: 0033:0x7f3777be6cf6
[   54.270093] Code: Unable to access opcode bytes at 0x7f3777be6ccc.
[   54.270593] RSP: 002b:00007ffd0d7278d8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
[   54.271153] RAX: ffffffffffffffda RBX: 00007f3777cf1490 RCX: 00007f3777be6cf6
[   54.271680] RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
[   54.272196] RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffff80
[   54.272738] R10: 0000000000000004 R11: 0000000000000246 R12: 00007f3777cf1490
[   54.273262] R13: 0000000000000001 R14: 00007f3777cf4e88 R15: 0000000000000000
[   54.273788]  </TASK>
[   54.273963] irq event stamp: 0
[   54.274197] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   54.274659] hardirqs last disabled at (0): [<ffffffff810fff0c>] copy_process+0x11cc/0x2b10
[   54.275267] softirqs last  enabled at (0): [<ffffffff810fff10>] copy_process+0x11d0/0x2b10
[   54.275869] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   54.276323] ---[ end trace 0000000000000000 ]---
[   54.276826] ------------[ cut here ]------------
[   54.277183] WARNING: CPU: 1 PID: 1110 at drivers/iommu/iommufd/pages.c:1181 iopt_release_pages+0x159/0x190
[   54.277893] Modules linked in:
[   54.278134] CPU: 1 PID: 1110 Comm: repro Tainted: G    B   W          6.1.0-a0a6c76cf2a5+ #1
[   54.278760] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   54.279580] RIP: 0010:iopt_release_pages+0x159/0x190
[   54.279964] Code: b5 11 ff eb cb e8 87 90 2b ff be 03 00 00 00 4c 89 f7 e8 6a 8b ce ff eb b7 e8 73 90 2b ff 0f 0b e9 ed fe ff ff e8 67 90 2b ff <0f> 0b e9 00 ff ff ff e8 5b 90 2b ff 0f 0b e9 07 ff ff ff e8 4f 90
[   54.281318] RSP: 0018:ffffc90001e8bc88 EFLAGS: 00010246
[   54.281711] RAX: 0000000000000000 RBX: ffff888005ec9400 RCX: ffffffff81fe1957
[   54.282238] RDX: 0000000000000000 RSI: ffff88800e67d300 RDI: 0000000000000002
[   54.282764] RBP: ffffc90001e8bca8 R08: 0000000000000000 R09: 0000000000000000
[   54.283295] R10: ffffc90001e8bc58 R11: 0000000000000000 R12: ffffffffffffffff
[   54.283825] R13: 0000000001000000 R14: 00000000017fffff R15: 0000000000000000
[   54.284353] FS:  0000000000000000(0000) GS:ffff88807dd00000(0000) knlGS:0000000000000000
[   54.284958] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   54.285382] CR2: 00007f3777cf0500 CR3: 0000000003c12004 CR4: 0000000000770ee0
[   54.285907] PKRU: 55555554
[   54.286117] Call Trace:
[   54.286306]  <TASK>
[   54.286484]  iopt_unmap_iova_range+0x1ef/0x2e0
[   54.286820]  iopt_unmap_all+0x2f/0x60
[   54.287107]  iommufd_ioas_destroy+0x2c/0x70
[   54.287428]  iommufd_fops_release+0xd4/0x170
[   54.287760]  ? iommufd_ctx_get+0x30/0x30
[   54.288066]  __fput+0x11f/0x450
[   54.288329]  ____fput+0x1e/0x30
[   54.288588]  task_work_run+0xb6/0x120
[   54.288902]  do_exit+0x521/0x1340
[   54.289161]  ? lock_release+0x202/0x2c0
[   54.289458]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   54.289819]  ? trace_hardirqs_on+0x3f/0x100
[   54.290149]  do_group_exit+0x5e/0xf0
[   54.290446]  __x64_sys_exit_group+0x25/0x30
[   54.290767]  do_syscall_64+0x3b/0x90
[   54.291044]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   54.291427] RIP: 0033:0x7f3777be6cf6
[   54.291706] Code: Unable to access opcode bytes at 0x7f3777be6ccc.
[   54.292156] RSP: 002b:00007ffd0d7278d8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
[   54.292729] RAX: ffffffffffffffda RBX: 00007f3777cf1490 RCX: 00007f3777be6cf6
[   54.293261] RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
[   54.293779] RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffff80
[   54.294299] R10: 0000000000000004 R11: 0000000000000246 R12: 00007f3777cf1490
[   54.294823] R13: 0000000000000001 R14: 00007f3777cf4e88 R15: 0000000000000000
[   54.295353]  </TASK>
[   54.295528] irq event stamp: 0
[   54.295762] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   54.296221] hardirqs last disabled at (0): [<ffffffff810fff0c>] copy_process+0x11cc/0x2b10
[   54.296871] softirqs last  enabled at (0): [<ffffffff810fff10>] copy_process+0x11d0/0x2b10
[   54.297479] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   54.297941] ---[ end trace 0000000000000000 ]---
[   54.379610] ------------[ cut here ]------------
[   54.379999] WARNING: CPU: 1 PID: 1114 at drivers/iommu/iommufd/pages.c:294 __iopt_area_unfill_domain+0x152/0x560
[   54.380769] Modules linked in:
[   54.381008] CPU: 1 PID: 1114 Comm: repro Tainted: G    B   W          6.1.0-a0a6c76cf2a5+ #1
[   54.381630] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   54.382767] RIP: 0010:__iopt_area_unfill_domain+0x152/0x560
[   54.383188] Code: a1 2b ff 44 8b 64 24 54 48 8b 44 24 48 31 ff 44 89 e6 48 89 44 24 38 e8 6c a2 2b ff 45 85 e4 0f 85 eb 01 00 00 e8 ee a0 2b ff <0f> 0b e8 e7 a0 2b ff 48 8b 44 24 38 89 5c 24 58 89 18 8b 44 24 54
[   54.384850] RSP: 0018:ffffc90001eabae0 EFLAGS: 00010246
[   54.385238] RAX: 0000000000000000 RBX: 00000000ffffffff RCX: ffffffff81fe0bd5
[   54.385861] RDX: 0000000000000000 RSI: ffff88800e678000 RDI: 0000000000000002
[   54.386428] RBP: ffffc90001eabd10 R08: 000000000003b5c5 R09: 000000000000000e
[   54.387096] R10: 000000000003b5a0 R11: 0000000000000024 R12: 0000000000000001
[   54.387610] R13: 0000000000000801 R14: 00000000000007ff R15: 0000000000000800
[   54.388298] FS:  00007f3777af9740(0000) GS:ffff88807dd00000(0000) knlGS:0000000000000000
[   54.388887] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   54.389308] CR2: 00007f3777c1e580 CR3: 00000000174a8004 CR4: 0000000000770ee0
[   54.389825] PKRU: 55555554
[   54.390110] Call Trace:
[   54.390345]  <TASK>
[   54.390544]  ? rcu_read_lock_sched_held+0x29/0x80
[   54.390904]  ? lock_acquire+0x1a1/0x2f0
[   54.391331]  ? rcu_read_lock_held_common+0x12/0x50
[   54.391764]  ? rcu_read_lock_sched_held+0x29/0x80
[   54.392118]  ? __mutex_lock+0x13a/0xf30
[   54.392421]  ? write_comp_data+0x2f/0x90
[   54.392752]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   54.393110]  iopt_area_unfill_domain+0x32/0x40
[   54.393661]  iopt_table_remove_domain+0x23f/0x4c0
[   54.394019]  iommufd_device_selftest_detach+0x3a/0x90
[   54.394409]  iommufd_selftest_destroy+0x55/0x70
[   54.394763]  iommufd_object_destroy_user+0xce/0x130
[   54.395214]  iommufd_destroy+0xa2/0xc0
[   54.395497]  iommufd_fops_ioctl+0x1ef/0x310
[   54.395822]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   54.396321]  ? write_comp_data+0x2f/0x90
[   54.396619]  __x64_sys_ioctl+0x10e/0x160
[   54.397042]  ? iommufd_get_object.part.6+0x1c0/0x1c0
[   54.397412]  do_syscall_64+0x3b/0x90
[   54.397692]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   54.398071] RIP: 0033:0x7f3777c1e59d
[   54.398339] Code: 00 c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d d3 08 0d 00 f7 d8 64 89 01 48
[   54.399898] RSP: 002b:00007ffd0d727918 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   54.400635] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f3777c1e59d
[   54.401213] RDX: 0000000020000140 RSI: 0000000000003b80 RDI: 0000000000000003
[   54.401898] RBP: 00007ffd0d727930 R08: 00007ffd0d727930 R09: 00007ffd0d727930
[   54.402412] R10: 00007ffd0d727930 R11: 0000000000000213 R12: 0000000000401180
[   54.403002] R13: 00007ffd0d727a50 R14: 0000000000000000 R15: 0000000000000000
[   54.403565]  </TASK>
[   54.403736] irq event stamp: 0
[   54.404125] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   54.404580] hardirqs last disabled at (0): [<ffffffff810fff0c>] copy_process+0x11cc/0x2b10
[   54.405362] softirqs last  enabled at (0): [<ffffffff810fff10>] copy_process+0x11d0/0x2b10
[   54.405963] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   54.406415] ---[ end trace 0000000000000000 ]---
[   54.406895] ------------[ cut here ]------------
[   54.407246] WARNING: CPU: 1 PID: 1114 at drivers/iommu/iommufd/pages.c:1290 __iopt_area_unfill_domain+0x54f/0x560
[   54.408117] Modules linked in:
[   54.408350] CPU: 1 PID: 1114 Comm: repro Tainted: G    B   W          6.1.0-a0a6c76cf2a5+ #1
[   54.409208] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   54.410021] RIP: 0010:__iopt_area_unfill_domain+0x54f/0x560
[   54.410464] Code: e8 86 9e 2b ff 85 db 0f 85 35 fb ff ff e8 09 9d 2b ff 0f 0b e9 29 fb ff ff e8 fd 9c 2b ff 0f 0b e9 69 fe ff ff e8 f1 9c 2b ff <0f> 0b e9 58 ff ff ff e8 65 2d dc 00 0f 1f 44 00 00 0f 1f 44 00 00
[   54.412028] RSP: 0018:ffffc90001eabae0 EFLAGS: 00010246
[   54.412422] RAX: 0000000000000000 RBX: 00000000ffffffff RCX: ffffffff81fe0d26
[   54.413087] RDX: 0000000000000000 RSI: ffff88800e678000 RDI: 0000000000000002
[   54.413600] RBP: ffffc90001eabd10 R08: 000000000003b5c5 R09: 000000000000000e
[   54.414195] R10: 000000000003b5a0 R11: 0000000000000024 R12: 00000000000007ff
[   54.414830] R13: 0000000000000801 R14: 00000000000007ff R15: 0000000000000800
[   54.415454] FS:  00007f3777af9740(0000) GS:ffff88807dd00000(0000) knlGS:0000000000000000
[   54.416033] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   54.416668] CR2: 00007f3777c1e580 CR3: 00000000174a8004 CR4: 0000000000770ee0
[   54.417218] PKRU: 55555554
[   54.417420] Call Trace:
[   54.417605]  <TASK>
[   54.417776]  ? rcu_read_lock_sched_held+0x29/0x80
[   54.418172]  ? lock_acquire+0x1a1/0x2f0
[   54.418577]  ? rcu_read_lock_held_common+0x12/0x50
[   54.418943]  ? rcu_read_lock_sched_held+0x29/0x80
[   54.419407]  ? __mutex_lock+0x13a/0xf30
[   54.419795]  ? write_comp_data+0x2f/0x90
[   54.420094]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   54.420587]  iopt_area_unfill_domain+0x32/0x40
[   54.420948]  iopt_table_remove_domain+0x23f/0x4c0
[   54.421306]  iommufd_device_selftest_detach+0x3a/0x90
[   54.421694]  iommufd_selftest_destroy+0x55/0x70
[   54.422041]  iommufd_object_destroy_user+0xce/0x130
[   54.422407]  iommufd_destroy+0xa2/0xc0
[   54.422724]  iommufd_fops_ioctl+0x1ef/0x310
[   54.423132]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   54.423491]  ? write_comp_data+0x2f/0x90
[   54.423898]  __x64_sys_ioctl+0x10e/0x160
[   54.424235]  ? iommufd_get_object.part.6+0x1c0/0x1c0
[   54.424612]  do_syscall_64+0x3b/0x90
[   54.424987]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   54.425370] RIP: 0033:0x7f3777c1e59d
[   54.425650] Code: 00 c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d d3 08 0d 00 f7 d8 64 89 01 48
[   54.427205] RSP: 002b:00007ffd0d727918 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   54.427767] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f3777c1e59d
[   54.428375] RDX: 0000000020000140 RSI: 0000000000003b80 RDI: 0000000000000003
[   54.428912] RBP: 00007ffd0d727930 R08: 00007ffd0d727930 R09: 00007ffd0d727930
[   54.429439] R10: 00007ffd0d727930 R11: 0000000000000213 R12: 0000000000401180
[   54.430137] R13: 00007ffd0d727a50 R14: 0000000000000000 R15: 0000000000000000
[   54.430680]  </TASK>
[   54.430929] irq event stamp: 0
[   54.431170] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   54.431634] hardirqs last disabled at (0): [<ffffffff810fff0c>] copy_process+0x11cc/0x2b10
[   54.432253] softirqs last  enabled at (0): [<ffffffff810fff10>] copy_process+0x11d0/0x2b10
[   54.432891] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   54.433362] ---[ end trace 0000000000000000 ]---
[   54.436316] ------------[ cut here ]------------
[   54.436724] WARNING: CPU: 1 PID: 1114 at drivers/iommu/iommufd/pages.c:178 batch_unpin.isra.23+0x151/0x1a0
[   54.437450] Modules linked in:
[   54.437691] CPU: 1 PID: 1114 Comm: repro Tainted: G    B   W          6.1.0-a0a6c76cf2a5+ #1
[   54.438316] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   54.439153] RIP: 0010:batch_unpin.isra.23+0x151/0x1a0
[   54.439543] Code: e8 c4 be 2b ff 48 8b 45 d0 48 85 c0 75 17 e8 26 bd 2b ff 48 8b 7d c8 48 89 de e8 fa bd 2b ff 48 39 5d c8 73 07 e8 0f bd 2b ff <0f> 0b e8 08 bd 2b ff 4d 29 e5 31 ff 41 83 c6 01 4c 89 ee 31 db e8
[   54.440906] RSP: 0018:ffffc90001eab9d8 EFLAGS: 00010246
[   54.441306] RAX: 0000000000000000 RBX: ffffffffffffffff RCX: ffffffff81fded8c
[   54.441836] RDX: 0000000000000000 RSI: ffff88800e678000 RDI: 0000000000000002
[   54.442365] RBP: ffffc90001eaba20 R08: 0000000000000000 R09: ffff88807dd3b890
[   54.442896] R10: 00000000000010d8 R11: 0000000000000000 R12: 0000000000000001
[   54.443422] R13: 0000000000000001 R14: 0000000000000000 R15: ffff888005ec9400
[   54.443949] FS:  0000000000000000(0000) GS:ffff88807dd00000(0000) knlGS:0000000000000000
[   54.444541] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   54.444989] CR2: 00007f3777cf0500 CR3: 0000000003c12005 CR4: 0000000000770ee0
[   54.445518] PKRU: 55555554
[   54.445730] Call Trace:
[   54.445924]  <TASK>
[   54.446098]  iopt_pages_unfill_xarray+0x39f/0x5c0
[   54.446463]  ? rcu_read_lock_sched_held+0x29/0x80
[   54.446858]  ? rcu_read_lock_held_common+0x12/0x50
[   54.447238]  ? write_comp_data+0x2f/0x90
[   54.447550]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   54.447911]  ? write_comp_data+0x2f/0x90
[   54.448220]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   54.448584]  ? interval_tree_remove+0x291/0x4e0
[   54.448959]  ? write_comp_data+0x2f/0x90
[   54.449272]  iopt_area_remove_access+0x108/0x120
[   54.449634]  iommufd_access_unpin_pages+0x177/0x210
[   54.450028]  iommufd_test_access_unmap+0xe0/0x130
[   54.450400]  ? iommufd_test_access_unmap+0x130/0x130
[   54.450787]  iommufd_test_staccess_release+0x39/0x60
[   54.451177]  __fput+0x11f/0x450
[   54.451438]  ____fput+0x1e/0x30
[   54.451692]  task_work_run+0xb6/0x120
[   54.451989]  do_exit+0x521/0x1340
[   54.452253]  ? lock_release+0x202/0x2c0
[   54.452556]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   54.452957]  ? trace_hardirqs_on+0x3f/0x100
[   54.453294]  do_group_exit+0x5e/0xf0
[   54.453580]  __x64_sys_exit_group+0x25/0x30
[   54.453906]  do_syscall_64+0x3b/0x90
[   54.454199]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   54.454595] RIP: 0033:0x7f3777be6cf6
[   54.454869] Code: Unable to access opcode bytes at 0x7f3777be6ccc.
[   54.455332] RSP: 002b:00007ffd0d7278d8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
[   54.455900] RAX: ffffffffffffffda RBX: 00007f3777cf1490 RCX: 00007f3777be6cf6
[   54.456428] RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
[   54.456973] RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffff80
[   54.457505] R10: 0000000000000004 R11: 0000000000000246 R12: 00007f3777cf1490
[   54.458037] R13: 0000000000000001 R14: 00007f3777cf4e88 R15: 0000000000000000
[   54.458577]  </TASK>
[   54.458748] irq event stamp: 0
[   54.458983] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   54.459449] hardirqs last disabled at (0): [<ffffffff810fff0c>] copy_process+0x11cc/0x2b10
[   54.460075] softirqs last  enabled at (0): [<ffffffff810fff10>] copy_process+0x11d0/0x2b10
[   54.460714] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   54.461173] ---[ end trace 0000000000000000 ]---
[   54.461604] ------------[ cut here ]------------
[   54.461944] WARNING: CPU: 1 PID: 1114 at drivers/iommu/iommufd/pages.c:886 update_unpinned+0x75/0x80
[   54.462610] Modules linked in:
[   54.462846] CPU: 1 PID: 1114 Comm: repro Tainted: G    B   W          6.1.0-a0a6c76cf2a5+ #1
[   54.463450] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   54.464247] RIP: 0010:update_unpinned+0x75/0x80
[   54.464589] Code: ac 2b ff 48 89 de 31 c9 31 d2 4c 29 e6 4c 89 ef e8 70 fb ff ff e8 bb ac 2b ff 5b 41 5c 41 5d 5d c3 cc cc cc cc e8 ab ac 2b ff <0f> 0b eb e7 0f 1f 80 00 00 00 00 0f 1f 44 00 00 55 48 89 e5 41 57
[   54.465919] RSP: 0018:ffffc90001eaba08 EFLAGS: 00010246
[   54.466311] RAX: 0000000000000000 RBX: 0000000000000000 RCX: ffffffff81fdfdcf
[   54.466841] RDX: 0000000000000000 RSI: ffff88800e678000 RDI: 0000000000000002
[   54.467350] RBP: ffffc90001eaba20 R08: 0000000000000000 R09: ffff88807dd3b890
[   54.467871] R10: 00000000000010d8 R11: 0000000000000000 R12: ffffffffffffffff
[   54.468384] R13: ffff888005ec9400 R14: 0000000000000002 R15: 0000000000000002
[   54.468915] FS:  0000000000000000(0000) GS:ffff88807dd00000(0000) knlGS:0000000000000000
[   54.469499] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   54.469920] CR2: 00007f3777cf0500 CR3: 0000000003c12005 CR4: 0000000000770ee0
[   54.470437] PKRU: 55555554
[   54.470650] Call Trace:
[   54.470831]  <TASK>
[   54.471000]  iopt_pages_unfill_xarray+0x522/0x5c0
[   54.471348]  ? rcu_read_lock_sched_held+0x29/0x80
[   54.471713]  ? rcu_read_lock_held_common+0x12/0x50
[   54.472077]  ? write_comp_data+0x2f/0x90
[   54.472378]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   54.472758]  ? write_comp_data+0x2f/0x90
[   54.473060]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   54.473418]  ? interval_tree_remove+0x291/0x4e0
[   54.473763]  ? write_comp_data+0x2f/0x90
[   54.474062]  iopt_area_remove_access+0x108/0x120
[   54.474415]  iommufd_access_unpin_pages+0x177/0x210
[   54.474801]  iommufd_test_access_unmap+0xe0/0x130
[   54.475165]  ? iommufd_test_access_unmap+0x130/0x130
[   54.475541]  iommufd_test_staccess_release+0x39/0x60
[   54.475916]  __fput+0x11f/0x450
[   54.476169]  ____fput+0x1e/0x30
[   54.476420]  task_work_run+0xb6/0x120
[   54.476728]  do_exit+0x521/0x1340
[   54.476989]  ? lock_release+0x202/0x2c0
[   54.477284]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   54.477643]  ? trace_hardirqs_on+0x3f/0x100
[   54.477969]  do_group_exit+0x5e/0xf0
[   54.478247]  __x64_sys_exit_group+0x25/0x30
[   54.478575]  do_syscall_64+0x3b/0x90
[   54.478847]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   54.479220] RIP: 0033:0x7f3777be6cf6
[   54.479487] Code: Unable to access opcode bytes at 0x7f3777be6ccc.
[   54.479930] RSP: 002b:00007ffd0d7278d8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
[   54.480481] RAX: ffffffffffffffda RBX: 00007f3777cf1490 RCX: 00007f3777be6cf6
[   54.481019] RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
[   54.481532] RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffff80
[   54.482047] R10: 0000000000000004 R11: 0000000000000246 R12: 00007f3777cf1490
[   54.482569] R13: 0000000000000001 R14: 00007f3777cf4e88 R15: 0000000000000000
[   54.483085]  </TASK>
[   54.483255] irq event stamp: 0
[   54.483482] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   54.483938] hardirqs last disabled at (0): [<ffffffff810fff0c>] copy_process+0x11cc/0x2b10
[   54.484541] softirqs last  enabled at (0): [<ffffffff810fff10>] copy_process+0x11d0/0x2b10
[   54.485175] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   54.485669] ---[ end trace 0000000000000000 ]---
[   54.486301] ------------[ cut here ]------------
[   54.486661] WARNING: CPU: 1 PID: 1114 at drivers/iommu/iommufd/pages.c:1181 iopt_release_pages+0x159/0x190
[   54.487365] Modules linked in:
[   54.487599] CPU: 1 PID: 1114 Comm: repro Tainted: G    B   W          6.1.0-a0a6c76cf2a5+ #1
[   54.488215] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   54.489062] RIP: 0010:iopt_release_pages+0x159/0x190
[   54.489441] Code: b5 11 ff eb cb e8 87 90 2b ff be 03 00 00 00 4c 89 f7 e8 6a 8b ce ff eb b7 e8 73 90 2b ff 0f 0b e9 ed fe ff ff e8 67 90 2b ff <0f> 0b e9 00 ff ff ff e8 5b 90 2b ff 0f 0b e9 07 ff ff ff e8 4f 90
[   54.490757] RSP: 0018:ffffc90001eabc88 EFLAGS: 00010246
[   54.491155] RAX: 0000000000000000 RBX: ffff888005ec9400 RCX: ffffffff81fe1957
[   54.491669] RDX: 0000000000000000 RSI: ffff88800e678000 RDI: 0000000000000002
[   54.492222] RBP: ffffc90001eabca8 R08: 0000000000000000 R09: 0000000000000000
[   54.492759] R10: ffffc90001eabc58 R11: 0000000000000000 R12: ffffffffffffffff
[   54.493274] R13: 0000000001000000 R14: 00000000017fffff R15: 0000000000000000
[   54.493792] FS:  0000000000000000(0000) GS:ffff88807dd00000(0000) knlGS:0000000000000000
[   54.494370] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   54.494798] CR2: 00007f3777cf0500 CR3: 0000000003c12005 CR4: 0000000000770ee0
[   54.495310] PKRU: 55555554
[   54.495517] Call Trace:
[   54.495705]  <TASK>
[   54.495873]  iopt_unmap_iova_range+0x1ef/0x2e0
[   54.496212]  iopt_unmap_all+0x2f/0x60
[   54.496493]  iommufd_ioas_destroy+0x2c/0x70
[   54.496832]  iommufd_fops_release+0xd4/0x170
[   54.497164]  ? iommufd_ctx_get+0x30/0x30
[   54.497467]  __fput+0x11f/0x450
[   54.497719]  ____fput+0x1e/0x30
[   54.497968]  task_work_run+0xb6/0x120
[   54.498261]  do_exit+0x521/0x1340
[   54.498524]  ? lock_release+0x202/0x2c0
[   54.498819]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   54.499175]  ? trace_hardirqs_on+0x3f/0x100
[   54.499497]  do_group_exit+0x5e/0xf0
[   54.499776]  __x64_sys_exit_group+0x25/0x30
[   54.500093]  do_syscall_64+0x3b/0x90
[   54.500372]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   54.500790] RIP: 0033:0x7f3777be6cf6
[   54.501072] Code: Unable to access opcode bytes at 0x7f3777be6ccc.
[   54.501509] RSP: 002b:00007ffd0d7278d8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
[   54.502058] RAX: ffffffffffffffda RBX: 00007f3777cf1490 RCX: 00007f3777be6cf6
[   54.502584] RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
[   54.503095] RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffff80
[   54.503607] R10: 0000000000000004 R11: 0000000000000246 R12: 00007f3777cf1490
[   54.504121] R13: 0000000000000001 R14: 00007f3777cf4e88 R15: 0000000000000000
[   54.504638]  </TASK>
[   54.504826] irq event stamp: 0
[   54.505060] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   54.505515] hardirqs last disabled at (0): [<ffffffff810fff0c>] copy_process+0x11cc/0x2b10
[   54.506117] softirqs last  enabled at (0): [<ffffffff810fff10>] copy_process+0x11d0/0x2b10
[   54.506728] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   54.507181] ---[ end trace 0000000000000000 ]---
[   54.588281] ------------[ cut here ]------------
[   54.588676] WARNING: CPU: 1 PID: 1118 at drivers/iommu/iommufd/pages.c:294 __iopt_area_unfill_domain+0x152/0x560
[   54.589417] Modules linked in:
[   54.589653] CPU: 1 PID: 1118 Comm: repro Tainted: G    B   W          6.1.0-a0a6c76cf2a5+ #1
[   54.590260] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   54.591092] RIP: 0010:__iopt_area_unfill_domain+0x152/0x560
[   54.591514] Code: a1 2b ff 44 8b 64 24 54 48 8b 44 24 48 31 ff 44 89 e6 48 89 44 24 38 e8 6c a2 2b ff 45 85 e4 0f 85 eb 01 00 00 e8 ee a0 2b ff <0f> 0b e8 e7 a0 2b ff 48 8b 44 24 38 89 5c 24 58 89 18 8b 44 24 54
[   54.592866] RSP: 0018:ffffc90001ecbae0 EFLAGS: 00010246
[   54.593256] RAX: 0000000000000000 RBX: 00000000ffffffff RCX: ffffffff81fe0bd5
[   54.593772] RDX: 0000000000000000 RSI: ffff88800e678000 RDI: 0000000000000002
[   54.594286] RBP: ffffc90001ecbd10 R08: 000000000003b5c5 R09: 0000000000000011
[   54.594803] R10: 000000000003b5a0 R11: 0000000000000024 R12: 0000000000000001
[   54.595313] R13: 0000000000000801 R14: 00000000000007ff R15: 0000000000000800
[   54.595824] FS:  00007f3777af9740(0000) GS:ffff88807dd00000(0000) knlGS:0000000000000000
[   54.596404] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   54.596840] CR2: 00007f3777c1e580 CR3: 00000000174a6003 CR4: 0000000000770ee0
[   54.597375] PKRU: 55555554
[   54.597587] Call Trace:
[   54.597770]  <TASK>
[   54.597938]  ? rcu_read_lock_sched_held+0x29/0x80
[   54.598310]  ? lock_acquire+0x1a1/0x2f0
[   54.598603]  ? rcu_read_lock_held_common+0x12/0x50
[   54.598964]  ? rcu_read_lock_sched_held+0x29/0x80
[   54.599318]  ? __mutex_lock+0x13a/0xf30
[   54.599617]  ? write_comp_data+0x2f/0x90
[   54.599920]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   54.600280]  iopt_area_unfill_domain+0x32/0x40
[   54.600622]  iopt_table_remove_domain+0x23f/0x4c0
[   54.600998]  iommufd_device_selftest_detach+0x3a/0x90
[   54.601397]  iommufd_selftest_destroy+0x55/0x70
[   54.601751]  iommufd_object_destroy_user+0xce/0x130
[   54.602114]  iommufd_destroy+0xa2/0xc0
[   54.602403]  iommufd_fops_ioctl+0x1ef/0x310
[   54.602732]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   54.603090]  ? write_comp_data+0x2f/0x90
[   54.603394]  __x64_sys_ioctl+0x10e/0x160
[   54.603724]  ? iommufd_get_object.part.6+0x1c0/0x1c0
[   54.604106]  do_syscall_64+0x3b/0x90
[   54.604384]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   54.604779] RIP: 0033:0x7f3777c1e59d
[   54.605056] Code: 00 c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d d3 08 0d 00 f7 d8 64 89 01 48
[   54.606362] RSP: 002b:00007ffd0d727918 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   54.606910] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f3777c1e59d
[   54.607423] RDX: 0000000020000140 RSI: 0000000000003b80 RDI: 0000000000000003
[   54.607936] RBP: 00007ffd0d727930 R08: 00007ffd0d727930 R09: 00007ffd0d727930
[   54.608451] R10: 00007ffd0d727930 R11: 0000000000000213 R12: 0000000000401180
[   54.608996] R13: 00007ffd0d727a50 R14: 0000000000000000 R15: 0000000000000000
[   54.609528]  </TASK>
[   54.609706] irq event stamp: 0
[   54.609943] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   54.610408] hardirqs last disabled at (0): [<ffffffff810fff0c>] copy_process+0x11cc/0x2b10
[   54.611060] softirqs last  enabled at (0): [<ffffffff810fff10>] copy_process+0x11d0/0x2b10
[   54.611685] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   54.612151] ---[ end trace 0000000000000000 ]---
[   54.612595] ------------[ cut here ]------------
[   54.612961] WARNING: CPU: 1 PID: 1118 at drivers/iommu/iommufd/pages.c:1290 __iopt_area_unfill_domain+0x54f/0x560
[   54.613724] Modules linked in:
[   54.613964] CPU: 1 PID: 1118 Comm: repro Tainted: G    B   W          6.1.0-a0a6c76cf2a5+ #1
[   54.614597] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   54.615440] RIP: 0010:__iopt_area_unfill_domain+0x54f/0x560
[   54.615871] Code: e8 86 9e 2b ff 85 db 0f 85 35 fb ff ff e8 09 9d 2b ff 0f 0b e9 29 fb ff ff e8 fd 9c 2b ff 0f 0b e9 69 fe ff ff e8 f1 9c 2b ff <0f> 0b e9 58 ff ff ff e8 65 2d dc 00 0f 1f 44 00 00 0f 1f 44 00 00
[   54.617231] RSP: 0018:ffffc90001ecbae0 EFLAGS: 00010246
[   54.617632] RAX: 0000000000000000 RBX: 00000000ffffffff RCX: ffffffff81fe0d26
[   54.618161] RDX: 0000000000000000 RSI: ffff88800e678000 RDI: 0000000000000002
[   54.618701] RBP: ffffc90001ecbd10 R08: 000000000003b5c5 R09: 0000000000000011
[   54.619241] R10: 000000000003b5a0 R11: 0000000000000024 R12: 00000000000007ff
[   54.619768] R13: 0000000000000801 R14: 00000000000007ff R15: 0000000000000800
[   54.620307] FS:  00007f3777af9740(0000) GS:ffff88807dd00000(0000) knlGS:0000000000000000
[   54.620919] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   54.621354] CR2: 00007f3777c1e580 CR3: 00000000174a6003 CR4: 0000000000770ee0
[   54.621890] PKRU: 55555554
[   54.622105] Call Trace:
[   54.622297]  <TASK>
[   54.622486]  ? rcu_read_lock_sched_held+0x29/0x80
[   54.622877]  ? lock_acquire+0x1a1/0x2f0
[   54.623186]  ? rcu_read_lock_held_common+0x12/0x50
[   54.623562]  ? rcu_read_lock_sched_held+0x29/0x80
[   54.623926]  ? __mutex_lock+0x13a/0xf30
[   54.624233]  ? write_comp_data+0x2f/0x90
[   54.624544]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   54.624932]  iopt_area_unfill_domain+0x32/0x40
[   54.625288]  iopt_table_remove_domain+0x23f/0x4c0
[   54.625657]  iommufd_device_selftest_detach+0x3a/0x90
[   54.626062]  iommufd_selftest_destroy+0x55/0x70
[   54.626422]  iommufd_object_destroy_user+0xce/0x130
[   54.626809]  iommufd_destroy+0xa2/0xc0
[   54.627111]  iommufd_fops_ioctl+0x1ef/0x310
[   54.627438]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   54.627804]  ? write_comp_data+0x2f/0x90
[   54.628119]  __x64_sys_ioctl+0x10e/0x160
[   54.628431]  ? iommufd_get_object.part.6+0x1c0/0x1c0
[   54.628829]  do_syscall_64+0x3b/0x90
[   54.629120]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   54.629514] RIP: 0033:0x7f3777c1e59d
[   54.629795] Code: 00 c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d d3 08 0d 00 f7 d8 64 89 01 48
[   54.631170] RSP: 002b:00007ffd0d727918 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   54.631740] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f3777c1e59d
[   54.632268] RDX: 0000000020000140 RSI: 0000000000003b80 RDI: 0000000000000003
[   54.632820] RBP: 00007ffd0d727930 R08: 00007ffd0d727930 R09: 00007ffd0d727930
[   54.633353] R10: 00007ffd0d727930 R11: 0000000000000213 R12: 0000000000401180
[   54.633882] R13: 00007ffd0d727a50 R14: 0000000000000000 R15: 0000000000000000
[   54.634418]  </TASK>
[   54.634601] irq event stamp: 0
[   54.634842] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   54.635320] hardirqs last disabled at (0): [<ffffffff810fff0c>] copy_process+0x11cc/0x2b10
[   54.635973] softirqs last  enabled at (0): [<ffffffff810fff10>] copy_process+0x11d0/0x2b10
[   54.636591] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   54.637079] ---[ end trace 0000000000000000 ]---
[   54.639964] ------------[ cut here ]------------
[   54.640330] WARNING: CPU: 1 PID: 1118 at drivers/iommu/iommufd/pages.c:178 batch_unpin.isra.23+0x151/0x1a0
[   54.641082] Modules linked in:
[   54.641325] CPU: 1 PID: 1118 Comm: repro Tainted: G    B   W          6.1.0-a0a6c76cf2a5+ #1
[   54.641950] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   54.642790] RIP: 0010:batch_unpin.isra.23+0x151/0x1a0
[   54.643439] Code: e8 c4 be 2b ff 48 8b 45 d0 48 85 c0 75 17 e8 26 bd 2b ff 48 8b 7d c8 48 89 de e8 fa bd 2b ff 48 39 5d c8 73 07 e8 0f bd 2b ff <0f> 0b e8 08 bd 2b ff 4d 29 e5 31 ff 41 83 c6 01 4c 89 ee 31 db e8
[   54.645064] RSP: 0018:ffffc90001ecb9d8 EFLAGS: 00010246
[   54.645465] RAX: 0000000000000000 RBX: ffffffffffffffff RCX: ffffffff81fded8c
[   54.646026] RDX: 0000000000000000 RSI: ffff88800e678000 RDI: 0000000000000002
[   54.646738] RBP: ffffc90001ecba20 R08: 0000000000000000 R09: ffff88807dd3b890
[   54.647274] R10: 000000000000112c R11: 0000000000000000 R12: 0000000000000001
[   54.647976] R13: 0000000000000001 R14: 0000000000000000 R15: ffff888005ec9400
[   54.648504] FS:  0000000000000000(0000) GS:ffff88807dd00000(0000) knlGS:0000000000000000
[   54.649115] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   54.649799] CR2: 00007f3777cf0500 CR3: 0000000003c12005 CR4: 0000000000770ee0
[   54.650327] PKRU: 55555554
[   54.650535] Call Trace:
[   54.650721]  <TASK>
[   54.650888]  iopt_pages_unfill_xarray+0x39f/0x5c0
[   54.651243]  ? rcu_read_lock_sched_held+0x29/0x80
[   54.651614]  ? rcu_read_lock_held_common+0x12/0x50
[   54.652148]  ? write_comp_data+0x2f/0x90
[   54.652583]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   54.652960]  ? write_comp_data+0x2f/0x90
[   54.653271]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   54.653632]  ? interval_tree_remove+0x291/0x4e0
[   54.653999]  ? write_comp_data+0x2f/0x90
[   54.654307]  iopt_area_remove_access+0x108/0x120
[   54.654675]  iommufd_access_unpin_pages+0x177/0x210
[   54.655060]  iommufd_test_access_unmap+0xe0/0x130
[   54.655523]  ? iommufd_test_access_unmap+0x130/0x130
[   54.655889]  iommufd_test_staccess_release+0x39/0x60
[   54.656262]  __fput+0x11f/0x450
[   54.656516]  ____fput+0x1e/0x30
[   54.656785]  task_work_run+0xb6/0x120
[   54.657077]  do_exit+0x521/0x1340
[   54.657367]  ? lock_release+0x202/0x2c0
[   54.657784]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   54.658135]  ? trace_hardirqs_on+0x3f/0x100
[   54.658459]  do_group_exit+0x5e/0xf0
[   54.658741]  __x64_sys_exit_group+0x25/0x30
[   54.659060]  do_syscall_64+0x3b/0x90
[   54.659337]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   54.659845] RIP: 0033:0x7f3777be6cf6
[   54.660125] Code: Unable to access opcode bytes at 0x7f3777be6ccc.
[   54.660569] RSP: 002b:00007ffd0d7278d8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
[   54.661244] RAX: ffffffffffffffda RBX: 00007f3777cf1490 RCX: 00007f3777be6cf6
[   54.661812] RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
[   54.662326] RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffff80
[   54.662842] R10: 0000000000000004 R11: 0000000000000246 R12: 00007f3777cf1490
[   54.663363] R13: 0000000000000001 R14: 00007f3777cf4e88 R15: 0000000000000000
[   54.663980]  </TASK>
[   54.664150] irq event stamp: 0
[   54.664379] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   54.664909] hardirqs last disabled at (0): [<ffffffff810fff0c>] copy_process+0x11cc/0x2b10
[   54.665649] softirqs last  enabled at (0): [<ffffffff810fff10>] copy_process+0x11d0/0x2b10
[   54.666246] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   54.666707] ---[ end trace 0000000000000000 ]---
[   54.667134] ------------[ cut here ]------------
[   54.667593] WARNING: CPU: 1 PID: 1118 at drivers/iommu/iommufd/pages.c:886 update_unpinned+0x75/0x80
[   54.668280] Modules linked in:
[   54.668516] CPU: 1 PID: 1118 Comm: repro Tainted: G    B   W          6.1.0-a0a6c76cf2a5+ #1
[   54.669366] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   54.670177] RIP: 0010:update_unpinned+0x75/0x80
[   54.670539] Code: ac 2b ff 48 89 de 31 c9 31 d2 4c 29 e6 4c 89 ef e8 70 fb ff ff e8 bb ac 2b ff 5b 41 5c 41 5d 5d c3 cc cc cc cc e8 ab ac 2b ff <0f> 0b eb e7 0f 1f 80 00 00 00 00 0f 1f 44 00 00 55 48 89 e5 41 57
[   54.671968] RSP: 0018:ffffc90001ecba08 EFLAGS: 00010246
[   54.672356] RAX: 0000000000000000 RBX: 0000000000000000 RCX: ffffffff81fdfdcf
[   54.672983] RDX: 0000000000000000 RSI: ffff88800e678000 RDI: 0000000000000002
[   54.673610] RBP: ffffc90001ecba20 R08: 0000000000000000 R09: ffff88807dd3b890
[   54.674133] R10: 000000000000112c R11: 0000000000000000 R12: ffffffffffffffff
[   54.674644] R13: ffff888005ec9400 R14: 0000000000000002 R15: 0000000000000002
[   54.675306] FS:  0000000000000000(0000) GS:ffff88807dd00000(0000) knlGS:0000000000000000
[   54.675884] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   54.676306] CR2: 00007f3777cf0500 CR3: 0000000003c12005 CR4: 0000000000770ee0
[   54.677098] PKRU: 55555554
[   54.677306] Call Trace:
[   54.677494]  <TASK>
[   54.677662]  iopt_pages_unfill_xarray+0x522/0x5c0
[   54.678020]  ? rcu_read_lock_sched_held+0x29/0x80
[   54.678390]  ? rcu_read_lock_held_common+0x12/0x50
[   54.678764]  ? write_comp_data+0x2f/0x90
[   54.679067]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   54.679561]  ? write_comp_data+0x2f/0x90
[   54.679862]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   54.680218]  ? interval_tree_remove+0x291/0x4e0
[   54.680567]  ? write_comp_data+0x2f/0x90
[   54.681046]  iopt_area_remove_access+0x108/0x120
[   54.681401]  iommufd_access_unpin_pages+0x177/0x210
[   54.681779]  iommufd_test_access_unmap+0xe0/0x130
[   54.682141]  ? iommufd_test_access_unmap+0x130/0x130
[   54.682527]  iommufd_test_staccess_release+0x39/0x60
[   54.682891]  __fput+0x11f/0x450
[   54.683143]  ____fput+0x1e/0x30
[   54.683433]  task_work_run+0xb6/0x120
[   54.683789]  do_exit+0x521/0x1340
[   54.684046]  ? lock_release+0x202/0x2c0
[   54.684355]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   54.684723]  ? trace_hardirqs_on+0x3f/0x100
[   54.685241]  do_group_exit+0x5e/0xf0
[   54.685519]  __x64_sys_exit_group+0x25/0x30
[   54.685834]  do_syscall_64+0x3b/0x90
[   54.686111]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   54.686497] RIP: 0033:0x7f3777be6cf6
[   54.686765] Code: Unable to access opcode bytes at 0x7f3777be6ccc.
[   54.687207] RSP: 002b:00007ffd0d7278d8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
[   54.687912] RAX: ffffffffffffffda RBX: 00007f3777cf1490 RCX: 00007f3777be6cf6
[   54.688423] RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
[   54.688947] RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffff80
[   54.689645] R10: 0000000000000004 R11: 0000000000000246 R12: 00007f3777cf1490
[   54.690155] R13: 0000000000000001 R14: 00007f3777cf4e88 R15: 0000000000000000
[   54.690681]  </TASK>
[   54.690856] irq event stamp: 0
[   54.691094] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   54.691668] hardirqs last disabled at (0): [<ffffffff810fff0c>] copy_process+0x11cc/0x2b10
[   54.692280] softirqs last  enabled at (0): [<ffffffff810fff10>] copy_process+0x11d0/0x2b10
[   54.692942] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   54.693562] ---[ end trace 0000000000000000 ]---
[   54.694035] ------------[ cut here ]------------
[   54.694373] WARNING: CPU: 1 PID: 1118 at drivers/iommu/iommufd/pages.c:1181 iopt_release_pages+0x159/0x190
[   54.695100] Modules linked in:
[   54.695364] CPU: 1 PID: 1118 Comm: repro Tainted: G    B   W          6.1.0-a0a6c76cf2a5+ #1
[   54.696053] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   54.697005] RIP: 0010:iopt_release_pages+0x159/0x190
[   54.697459] Code: b5 11 ff eb cb e8 87 90 2b ff be 03 00 00 00 4c 89 f7 e8 6a 8b ce ff eb b7 e8 73 90 2b ff 0f 0b e9 ed fe ff ff e8 67 90 2b ff <0f> 0b e9 00 ff ff ff e8 5b 90 2b ff 0f 0b e9 07 ff ff ff e8 4f 90
[   54.698776] RSP: 0018:ffffc90001ecbc88 EFLAGS: 00010246
[   54.699258] RAX: 0000000000000000 RBX: ffff888005ec9400 RCX: ffffffff81fe1957
[   54.699772] RDX: 0000000000000000 RSI: ffff88800e678000 RDI: 0000000000000002
[   54.700286] RBP: ffffc90001ecbca8 R08: 0000000000000000 R09: 0000000000000000
[   54.700987] R10: ffffc90001ecbc58 R11: 0000000000000000 R12: ffffffffffffffff
[   54.701507] R13: 0000000001000000 R14: 00000000017fffff R15: 0000000000000000
[   54.702019] FS:  0000000000000000(0000) GS:ffff88807dd00000(0000) knlGS:0000000000000000
[   54.702623] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   54.703126] CR2: 00007f3777cf0500 CR3: 0000000003c12005 CR4: 0000000000770ee0
[   54.703642] PKRU: 55555554
[   54.703847] Call Trace:
[   54.704109]  <TASK>
[   54.704305]  iopt_unmap_iova_range+0x1ef/0x2e0
[   54.704643]  iopt_unmap_all+0x2f/0x60
[   54.704953]  iommufd_ioas_destroy+0x2c/0x70
[   54.705279]  iommufd_fops_release+0xd4/0x170
[   54.705618]  ? iommufd_ctx_get+0x30/0x30
[   54.705923]  __fput+0x11f/0x450
[   54.706177]  ____fput+0x1e/0x30
[   54.706458]  task_work_run+0xb6/0x120
[   54.706822]  do_exit+0x521/0x1340
[   54.707075]  ? lock_release+0x202/0x2c0
[   54.707368]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   54.707759]  ? trace_hardirqs_on+0x3f/0x100
[   54.708242]  do_group_exit+0x5e/0xf0
[   54.708529]  __x64_sys_exit_group+0x25/0x30
[   54.708880]  do_syscall_64+0x3b/0x90
[   54.709169]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   54.709651] RIP: 0033:0x7f3777be6cf6
[   54.710046] Code: Unable to access opcode bytes at 0x7f3777be6ccc.
[   54.710532] RSP: 002b:00007ffd0d7278d8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
[   54.711144] RAX: ffffffffffffffda RBX: 00007f3777cf1490 RCX: 00007f3777be6cf6
[   54.711718] RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
[   54.712250] RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffff80
[   54.712879] R10: 0000000000000004 R11: 0000000000000246 R12: 00007f3777cf1490
[   54.713400] R13: 0000000000000001 R14: 00007f3777cf4e88 R15: 0000000000000000
[   54.714011]  </TASK>
[   54.714320] irq event stamp: 0
[   54.714569] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   54.715033] hardirqs last disabled at (0): [<ffffffff810fff0c>] copy_process+0x11cc/0x2b10
[   54.715789] softirqs last  enabled at (0): [<ffffffff810fff10>] copy_process+0x11d0/0x2b10
[   54.716421] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   54.716935] ---[ end trace 0000000000000000 ]---
[   54.760252] ------------[ cut here ]------------
[   54.760630] WARNING: CPU: 1 PID: 1120 at drivers/iommu/iommufd/pages.c:294 __iopt_area_unfill_domain+0x152/0x560
[   54.761419] Modules linked in:
[   54.761658] CPU: 1 PID: 1120 Comm: repro Tainted: G    B   W          6.1.0-a0a6c76cf2a5+ #1
[   54.762271] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   54.763091] RIP: 0010:__iopt_area_unfill_domain+0x152/0x560
[   54.763507] Code: a1 2b ff 44 8b 64 24 54 48 8b 44 24 48 31 ff 44 89 e6 48 89 44 24 38 e8 6c a2 2b ff 45 85 e4 0f 85 eb 01 00 00 e8 ee a0 2b ff <0f> 0b e8 e7 a0 2b ff 48 8b 44 24 38 89 5c 24 58 89 18 8b 44 24 54
[   54.764846] RSP: 0018:ffffc90001edbae0 EFLAGS: 00010246
[   54.765238] RAX: 0000000000000000 RBX: 00000000ffffffff RCX: ffffffff81fe0bd5
[   54.765752] RDX: 0000000000000000 RSI: ffff88800e678000 RDI: 0000000000000002
[   54.766268] RBP: ffffc90001edbd10 R08: 000000000003b5c5 R09: 0000000000000013
[   54.766786] R10: 000000000003b5a0 R11: 0000000000000024 R12: 0000000000000002
[   54.767293] R13: 0000000000000801 R14: 00000000000007ff R15: 0000000000000800
[   54.767802] FS:  00007f3777af9740(0000) GS:ffff88807dd00000(0000) knlGS:0000000000000000
[   54.768387] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   54.768820] CR2: 00007f3777c1e580 CR3: 000000001749e001 CR4: 0000000000770ee0
[   54.769340] PKRU: 55555554
[   54.769550] Call Trace:
[   54.769739]  <TASK>
[   54.769918]  ? rcu_read_lock_sched_held+0x29/0x80
[   54.770277]  ? lock_acquire+0x1a1/0x2f0
[   54.770579]  ? rcu_read_lock_held_common+0x12/0x50
[   54.770945]  ? rcu_read_lock_sched_held+0x29/0x80
[   54.771305]  ? __mutex_lock+0x13a/0xf30
[   54.771601]  ? write_comp_data+0x2f/0x90
[   54.771939]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   54.772302]  iopt_area_unfill_domain+0x32/0x40
[   54.772646]  iopt_table_remove_domain+0x23f/0x4c0
[   54.773031]  iommufd_device_selftest_detach+0x3a/0x90
[   54.773417]  iommufd_selftest_destroy+0x55/0x70
[   54.773767]  iommufd_object_destroy_user+0xce/0x130
[   54.774131]  iommufd_destroy+0xa2/0xc0
[   54.774447]  iommufd_fops_ioctl+0x1ef/0x310
[   54.774769]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   54.775130]  ? write_comp_data+0x2f/0x90
[   54.775427]  __x64_sys_ioctl+0x10e/0x160
[   54.775742]  ? iommufd_get_object.part.6+0x1c0/0x1c0
[   54.776113]  do_syscall_64+0x3b/0x90
[   54.776388]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   54.776787] RIP: 0033:0x7f3777c1e59d
[   54.777095] Code: 00 c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d d3 08 0d 00 f7 d8 64 89 01 48
[   54.778392] RSP: 002b:00007ffd0d727918 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   54.778952] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f3777c1e59d
[   54.779483] RDX: 0000000020000140 RSI: 0000000000003b80 RDI: 0000000000000003
[   54.779999] RBP: 00007ffd0d727930 R08: 00007ffd0d727930 R09: 00007ffd0d727930
[   54.780520] R10: 00007ffd0d727930 R11: 0000000000000213 R12: 0000000000401180
[   54.781057] R13: 00007ffd0d727a50 R14: 0000000000000000 R15: 0000000000000000
[   54.781595]  </TASK>
[   54.781767] irq event stamp: 0
[   54.781998] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   54.782461] hardirqs last disabled at (0): [<ffffffff810fff0c>] copy_process+0x11cc/0x2b10
[   54.783058] softirqs last  enabled at (0): [<ffffffff810fff10>] copy_process+0x11d0/0x2b10
[   54.783650] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   54.784102] ---[ end trace 0000000000000000 ]---
[   54.784532] ------------[ cut here ]------------
[   54.784885] WARNING: CPU: 1 PID: 1120 at drivers/iommu/iommufd/pages.c:1290 __iopt_area_unfill_domain+0x54f/0x560
[   54.785628] Modules linked in:
[   54.785862] CPU: 1 PID: 1120 Comm: repro Tainted: G    B   W          6.1.0-a0a6c76cf2a5+ #1
[   54.786470] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   54.787287] RIP: 0010:__iopt_area_unfill_domain+0x54f/0x560
[   54.787709] Code: e8 86 9e 2b ff 85 db 0f 85 35 fb ff ff e8 09 9d 2b ff 0f 0b e9 29 fb ff ff e8 fd 9c 2b ff 0f 0b e9 69 fe ff ff e8 f1 9c 2b ff <0f> 0b e9 58 ff ff ff e8 65 2d dc 00 0f 1f 44 00 00 0f 1f 44 00 00
[   54.789038] RSP: 0018:ffffc90001edbae0 EFLAGS: 00010246
[   54.789424] RAX: 0000000000000000 RBX: 00000000ffffffff RCX: ffffffff81fe0d26
[   54.789946] RDX: 0000000000000000 RSI: ffff88800e678000 RDI: 0000000000000002
[   54.790462] RBP: ffffc90001edbd10 R08: 000000000003b5c5 R09: 0000000000000013
[   54.790991] R10: 000000000003b5a0 R11: 0000000000000024 R12: 00000000000007ff
[   54.791501] R13: 0000000000000801 R14: 00000000000007ff R15: 0000000000000800
[   54.792015] FS:  00007f3777af9740(0000) GS:ffff88807dd00000(0000) knlGS:0000000000000000
[   54.792596] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   54.793035] CR2: 00007f3777c1e580 CR3: 000000001749e001 CR4: 0000000000770ee0
[   54.793551] PKRU: 55555554
[   54.793764] Call Trace:
[   54.793951]  <TASK>
[   54.794136]  ? rcu_read_lock_sched_held+0x29/0x80
[   54.794507]  ? lock_acquire+0x1a1/0x2f0
[   54.794805]  ? rcu_read_lock_held_common+0x12/0x50
[   54.795162]  ? rcu_read_lock_sched_held+0x29/0x80
[   54.795520]  ? __mutex_lock+0x13a/0xf30
[   54.795824]  ? write_comp_data+0x2f/0x90
[   54.796128]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   54.796491]  iopt_area_unfill_domain+0x32/0x40
[   54.796881]  iopt_table_remove_domain+0x23f/0x4c0
[   54.797248]  iommufd_device_selftest_detach+0x3a/0x90
[   54.797633]  iommufd_selftest_destroy+0x55/0x70
[   54.797981]  iommufd_object_destroy_user+0xce/0x130
[   54.798355]  iommufd_destroy+0xa2/0xc0
[   54.798646]  iommufd_fops_ioctl+0x1ef/0x310
[   54.798985]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   54.799340]  ? write_comp_data+0x2f/0x90
[   54.799640]  __x64_sys_ioctl+0x10e/0x160
[   54.799947]  ? iommufd_get_object.part.6+0x1c0/0x1c0
[   54.800319]  do_syscall_64+0x3b/0x90
[   54.800597]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   54.801011] RIP: 0033:0x7f3777c1e59d
[   54.801307] Code: 00 c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d d3 08 0d 00 f7 d8 64 89 01 48
[   54.802613] RSP: 002b:00007ffd0d727918 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   54.803141] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f3777c1e59d
[   54.803665] RDX: 0000000020000140 RSI: 0000000000003b80 RDI: 0000000000000003
[   54.804179] RBP: 00007ffd0d727930 R08: 00007ffd0d727930 R09: 00007ffd0d727930
[   54.804711] R10: 00007ffd0d727930 R11: 0000000000000213 R12: 0000000000401180
[   54.805240] R13: 00007ffd0d727a50 R14: 0000000000000000 R15: 0000000000000000
[   54.805757]  </TASK>
[   54.805924] irq event stamp: 0
[   54.806162] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   54.806641] hardirqs last disabled at (0): [<ffffffff810fff0c>] copy_process+0x11cc/0x2b10
[   54.807249] softirqs last  enabled at (0): [<ffffffff810fff10>] copy_process+0x11d0/0x2b10
[   54.807839] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   54.808291] ---[ end trace 0000000000000000 ]---
[   54.811262] ------------[ cut here ]------------
[   54.811610] WARNING: CPU: 1 PID: 1120 at drivers/iommu/iommufd/pages.c:178 batch_unpin.isra.23+0x151/0x1a0
[   54.812315] Modules linked in:
[   54.812548] CPU: 1 PID: 1120 Comm: repro Tainted: G    B   W          6.1.0-a0a6c76cf2a5+ #1
[   54.813188] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   54.814001] RIP: 0010:batch_unpin.isra.23+0x151/0x1a0
[   54.814379] Code: e8 c4 be 2b ff 48 8b 45 d0 48 85 c0 75 17 e8 26 bd 2b ff 48 8b 7d c8 48 89 de e8 fa bd 2b ff 48 39 5d c8 73 07 e8 0f bd 2b ff <0f> 0b e8 08 bd 2b ff 4d 29 e5 31 ff 41 83 c6 01 4c 89 ee 31 db e8
[   54.815694] RSP: 0018:ffffc90001edb9d8 EFLAGS: 00010246
[   54.816080] RAX: 0000000000000000 RBX: ffffffffffffffff RCX: ffffffff81fded8c
[   54.816595] RDX: 0000000000000000 RSI: ffff88800e678000 RDI: 0000000000000002
[   54.817124] RBP: ffffc90001edba20 R08: 0000000000000000 R09: ffff88807dd3b890
[   54.817640] R10: 000000000000114a R11: 0000000000000000 R12: 0000000000000001
[   54.818156] R13: 0000000000000001 R14: 0000000000000000 R15: ffff888005ec9400
[   54.818684] FS:  0000000000000000(0000) GS:ffff88807dd00000(0000) knlGS:0000000000000000
[   54.819287] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   54.819716] CR2: 00007f3777cf0500 CR3: 0000000003c12006 CR4: 0000000000770ee0
[   54.820232] PKRU: 55555554
[   54.820443] Call Trace:
[   54.820630]  <TASK>
[   54.820816]  iopt_pages_unfill_xarray+0x39f/0x5c0
[   54.821172]  ? rcu_read_lock_sched_held+0x29/0x80
[   54.821543]  ? rcu_read_lock_held_common+0x12/0x50
[   54.821905]  ? write_comp_data+0x2f/0x90
[   54.822211]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   54.822573]  ? write_comp_data+0x2f/0x90
[   54.822867]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   54.823227]  ? interval_tree_remove+0x291/0x4e0
[   54.823581]  ? write_comp_data+0x2f/0x90
[   54.823891]  iopt_area_remove_access+0x108/0x120
[   54.824253]  iommufd_access_unpin_pages+0x177/0x210
[   54.824638]  iommufd_test_access_unmap+0xe0/0x130
[   54.825028]  ? iommufd_test_access_unmap+0x130/0x130
[   54.825416]  iommufd_test_staccess_release+0x39/0x60
[   54.825805]  __fput+0x11f/0x450
[   54.826063]  ____fput+0x1e/0x30
[   54.826319]  task_work_run+0xb6/0x120
[   54.826616]  do_exit+0x521/0x1340
[   54.826881]  ? lock_release+0x202/0x2c0
[   54.827178]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   54.827537]  ? trace_hardirqs_on+0x3f/0x100
[   54.827871]  do_group_exit+0x5e/0xf0
[   54.828152]  __x64_sys_exit_group+0x25/0x30
[   54.828480]  do_syscall_64+0x3b/0x90
[   54.828784]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   54.829189] RIP: 0033:0x7f3777be6cf6
[   54.829467] Code: Unable to access opcode bytes at 0x7f3777be6ccc.
[   54.829924] RSP: 002b:00007ffd0d7278d8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
[   54.830491] RAX: ffffffffffffffda RBX: 00007f3777cf1490 RCX: 00007f3777be6cf6
[   54.831011] RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
[   54.831527] RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffff80
[   54.832051] R10: 0000000000000004 R11: 0000000000000246 R12: 00007f3777cf1490
[   54.832574] R13: 0000000000000001 R14: 00007f3777cf4e88 R15: 0000000000000000
[   54.833127]  </TASK>
[   54.833329] irq event stamp: 0
[   54.833566] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   54.834035] hardirqs last disabled at (0): [<ffffffff810fff0c>] copy_process+0x11cc/0x2b10
[   54.834690] softirqs last  enabled at (0): [<ffffffff810fff10>] copy_process+0x11d0/0x2b10
[   54.835325] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   54.835786] ---[ end trace 0000000000000000 ]---
[   54.836242] ------------[ cut here ]------------
[   54.836587] WARNING: CPU: 1 PID: 1120 at drivers/iommu/iommufd/pages.c:886 update_unpinned+0x75/0x80
[   54.837290] Modules linked in:
[   54.837534] CPU: 1 PID: 1120 Comm: repro Tainted: G    B   W          6.1.0-a0a6c76cf2a5+ #1
[   54.838159] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   54.838994] RIP: 0010:update_unpinned+0x75/0x80
[   54.839351] Code: ac 2b ff 48 89 de 31 c9 31 d2 4c 29 e6 4c 89 ef e8 70 fb ff ff e8 bb ac 2b ff 5b 41 5c 41 5d 5d c3 cc cc cc cc e8 ab ac 2b ff <0f> 0b eb e7 0f 1f 80 00 00 00 00 0f 1f 44 00 00 55 48 89 e5 41 57
[   54.840708] RSP: 0018:ffffc90001edba08 EFLAGS: 00010246
[   54.841109] RAX: 0000000000000000 RBX: 0000000000000000 RCX: ffffffff81fdfdcf
[   54.841635] RDX: 0000000000000000 RSI: ffff88800e678000 RDI: 0000000000000002
[   54.842162] RBP: ffffc90001edba20 R08: 0000000000000000 R09: ffff88807dd3b890
[   54.842691] R10: 000000000000114a R11: 0000000000000000 R12: ffffffffffffffff
[   54.843218] R13: ffff888005ec9400 R14: 0000000000000002 R15: 0000000000000002
[   54.843733] FS:  0000000000000000(0000) GS:ffff88807dd00000(0000) knlGS:0000000000000000
[   54.844328] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   54.844771] CR2: 00007f3777cf0500 CR3: 0000000003c12006 CR4: 0000000000770ee0
[   54.845306] PKRU: 55555554
[   54.845519] Call Trace:
[   54.845723]  <TASK>
[   54.845895]  iopt_pages_unfill_xarray+0x522/0x5c0
[   54.846264]  ? rcu_read_lock_sched_held+0x29/0x80
[   54.846657]  ? rcu_read_lock_held_common+0x12/0x50
[   54.847032]  ? write_comp_data+0x2f/0x90
[   54.847340]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   54.847705]  ? write_comp_data+0x2f/0x90
[   54.848015]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   54.848384]  ? interval_tree_remove+0x291/0x4e0
[   54.848753]  ? write_comp_data+0x2f/0x90
[   54.849065]  iopt_area_remove_access+0x108/0x120
[   54.849428]  iommufd_access_unpin_pages+0x177/0x210
[   54.849816]  iommufd_test_access_unmap+0xe0/0x130
[   54.850189]  ? iommufd_test_access_unmap+0x130/0x130
[   54.850582]  iommufd_test_staccess_release+0x39/0x60
[   54.850967]  __fput+0x11f/0x450
[   54.851230]  ____fput+0x1e/0x30
[   54.851485]  task_work_run+0xb6/0x120
[   54.851780]  do_exit+0x521/0x1340
[   54.852047]  ? lock_release+0x202/0x2c0
[   54.852350]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   54.852734]  ? trace_hardirqs_on+0x3f/0x100
[   54.853074]  do_group_exit+0x5e/0xf0
[   54.853357]  __x64_sys_exit_group+0x25/0x30
[   54.853682]  do_syscall_64+0x3b/0x90
[   54.853967]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   54.854356] RIP: 0033:0x7f3777be6cf6
[   54.854645] Code: Unable to access opcode bytes at 0x7f3777be6ccc.
[   54.855109] RSP: 002b:00007ffd0d7278d8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
[   54.855675] RAX: ffffffffffffffda RBX: 00007f3777cf1490 RCX: 00007f3777be6cf6
[   54.856204] RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
[   54.856746] RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffff80
[   54.857278] R10: 0000000000000004 R11: 0000000000000246 R12: 00007f3777cf1490
[   54.857802] R13: 0000000000000001 R14: 00007f3777cf4e88 R15: 0000000000000000
[   54.858334]  </TASK>
[   54.858514] irq event stamp: 0
[   54.858749] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   54.859224] hardirqs last disabled at (0): [<ffffffff810fff0c>] copy_process+0x11cc/0x2b10
[   54.859839] softirqs last  enabled at (0): [<ffffffff810fff10>] copy_process+0x11d0/0x2b10
[   54.860455] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   54.860943] ---[ end trace 0000000000000000 ]---
[   54.861422] ------------[ cut here ]------------
[   54.861773] WARNING: CPU: 1 PID: 1120 at drivers/iommu/iommufd/pages.c:1181 iopt_release_pages+0x159/0x190
[   54.862492] Modules linked in:
[   54.862735] CPU: 1 PID: 1120 Comm: repro Tainted: G    B   W          6.1.0-a0a6c76cf2a5+ #1
[   54.863370] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   54.864220] RIP: 0010:iopt_release_pages+0x159/0x190
[   54.864608] Code: b5 11 ff eb cb e8 87 90 2b ff be 03 00 00 00 4c 89 f7 e8 6a 8b ce ff eb b7 e8 73 90 2b ff 0f 0b e9 ed fe ff ff e8 67 90 2b ff <0f> 0b e9 00 ff ff ff e8 5b 90 2b ff 0f 0b e9 07 ff ff ff e8 4f 90
[   54.865959] RSP: 0018:ffffc90001edbc88 EFLAGS: 00010246
[   54.866354] RAX: 0000000000000000 RBX: ffff888005ec9400 RCX: ffffffff81fe1957
[   54.866886] RDX: 0000000000000000 RSI: ffff88800e678000 RDI: 0000000000000002
[   54.867409] RBP: ffffc90001edbca8 R08: 0000000000000000 R09: 0000000000000000
[   54.867939] R10: ffffc90001edbc58 R11: 0000000000000000 R12: ffffffffffffffff
[   54.868461] R13: 0000000001000000 R14: 00000000017fffff R15: 0000000000000000
[   54.868997] FS:  0000000000000000(0000) GS:ffff88807dd00000(0000) knlGS:0000000000000000
[   54.869594] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   54.870010] CR2: 00007f3777cf0500 CR3: 0000000003c12006 CR4: 0000000000770ee0
[   54.870543] PKRU: 55555554
[   54.870749] Call Trace:
[   54.870936]  <TASK>
[   54.871103]  iopt_unmap_iova_range+0x1ef/0x2e0
[   54.871440]  iopt_unmap_all+0x2f/0x60
[   54.871717]  iommufd_ioas_destroy+0x2c/0x70
[   54.872033]  iommufd_fops_release+0xd4/0x170
[   54.872357]  ? iommufd_ctx_get+0x30/0x30
[   54.872671]  __fput+0x11f/0x450
[   54.872922]  ____fput+0x1e/0x30
[   54.873176]  task_work_run+0xb6/0x120
[   54.873513]  do_exit+0x521/0x1340
[   54.873778]  ? lock_release+0x202/0x2c0
[   54.874069]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   54.874425]  ? trace_hardirqs_on+0x3f/0x100
[   54.874759]  do_group_exit+0x5e/0xf0
[   54.875027]  __x64_sys_exit_group+0x25/0x30
[   54.875342]  do_syscall_64+0x3b/0x90
[   54.875612]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   54.875987] RIP: 0033:0x7f3777be6cf6
[   54.876255] Code: Unable to access opcode bytes at 0x7f3777be6ccc.
[   54.876713] RSP: 002b:00007ffd0d7278d8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
[   54.877259] RAX: ffffffffffffffda RBX: 00007f3777cf1490 RCX: 00007f3777be6cf6
[   54.877768] RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
[   54.878278] RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffff80
[   54.878797] R10: 0000000000000004 R11: 0000000000000246 R12: 00007f3777cf1490
[   54.879316] R13: 0000000000000001 R14: 00007f3777cf4e88 R15: 0000000000000000
[   54.879833]  </TASK>
[   54.880004] irq event stamp: 0
[   54.880233] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   54.880698] hardirqs last disabled at (0): [<ffffffff810fff0c>] copy_process+0x11cc/0x2b10
[   54.881299] softirqs last  enabled at (0): [<ffffffff810fff10>] copy_process+0x11d0/0x2b10
[   54.881893] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   54.882394] ---[ end trace 0000000000000000 ]---
[   54.922928] ------------[ cut here ]------------
[   54.923307] WARNING: CPU: 1 PID: 1122 at drivers/iommu/iommufd/pages.c:294 __iopt_area_unfill_domain+0x152/0x560
[   54.924071] Modules linked in:
[   54.924305] CPU: 1 PID: 1122 Comm: repro Tainted: G    B   W          6.1.0-a0a6c76cf2a5+ #1
[   54.924937] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   54.925745] RIP: 0010:__iopt_area_unfill_domain+0x152/0x560
[   54.926153] Code: a1 2b ff 44 8b 64 24 54 48 8b 44 24 48 31 ff 44 89 e6 48 89 44 24 38 e8 6c a2 2b ff 45 85 e4 0f 85 eb 01 00 00 e8 ee a0 2b ff <0f> 0b e8 e7 a0 2b ff 48 8b 44 24 38 89 5c 24 58 89 18 8b 44 24 54
[   54.927853] RSP: 0018:ffffc90001eebae0 EFLAGS: 00010246
[   54.928251] RAX: 0000000000000000 RBX: 00000000ffffffff RCX: ffffffff81fe0bd5
[   54.929031] RDX: 0000000000000000 RSI: ffff88800e678000 RDI: 0000000000000002
[   54.929772] RBP: ffffc90001eebd10 R08: 000000000003b5c5 R09: 0000000000000000
[   54.930296] R10: 000000000003b5a0 R11: 0000000000000024 R12: 0000000000000001
[   54.930841] R13: 0000000000000801 R14: 00000000000007ff R15: 0000000000000800
[   54.931381] FS:  00007f3777af9740(0000) GS:ffff88807dd00000(0000) knlGS:0000000000000000
[   54.931974] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   54.932403] CR2: 00007f3777c1e580 CR3: 00000000174b6003 CR4: 0000000000770ee0
[   54.932946] PKRU: 55555554
[   54.933161] Call Trace:
[   54.933353]  <TASK>
[   54.933534]  ? rcu_read_lock_sched_held+0x29/0x80
[   54.933903]  ? lock_acquire+0x1a1/0x2f0
[   54.934206]  ? rcu_read_lock_held_common+0x12/0x50
[   54.934581]  ? rcu_read_lock_sched_held+0x29/0x80
[   54.934948]  ? __mutex_lock+0x13a/0xf30
[   54.935261]  ? write_comp_data+0x2f/0x90
[   54.935571]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   54.935970]  iopt_area_unfill_domain+0x32/0x40
[   54.936322]  iopt_table_remove_domain+0x23f/0x4c0
[   54.936815]  iommufd_device_selftest_detach+0x3a/0x90
[   54.937218]  iommufd_selftest_destroy+0x55/0x70
[   54.937578]  iommufd_object_destroy_user+0xce/0x130
[   54.937950]  iommufd_destroy+0xa2/0xc0
[   54.938250]  iommufd_fops_ioctl+0x1ef/0x310
[   54.938585]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   54.939069]  ? write_comp_data+0x2f/0x90
[   54.939528]  __x64_sys_ioctl+0x10e/0x160
[   54.939889]  ? iommufd_get_object.part.6+0x1c0/0x1c0
[   54.940271]  do_syscall_64+0x3b/0x90
[   54.940561]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   54.940962] RIP: 0033:0x7f3777c1e59d
[   54.941238] Code: 00 c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d d3 08 0d 00 f7 d8 64 89 01 48
[   54.942862] RSP: 002b:00007ffd0d727918 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   54.943484] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f3777c1e59d
[   54.944142] RDX: 0000000020000140 RSI: 0000000000003b80 RDI: 0000000000000003
[   54.944794] RBP: 00007ffd0d727930 R08: 00007ffd0d727930 R09: 00007ffd0d727930
[   54.945445] R10: 00007ffd0d727930 R11: 0000000000000213 R12: 0000000000401180
[   54.945987] R13: 00007ffd0d727a50 R14: 0000000000000000 R15: 0000000000000000
[   54.946528]  </TASK>
[   54.946712] irq event stamp: 0
[   54.947030] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   54.947498] hardirqs last disabled at (0): [<ffffffff810fff0c>] copy_process+0x11cc/0x2b10
[   54.948126] softirqs last  enabled at (0): [<ffffffff810fff10>] copy_process+0x11d0/0x2b10
[   54.948932] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   54.949396] ---[ end trace 0000000000000000 ]---
[   54.949845] ------------[ cut here ]------------
[   54.950377] WARNING: CPU: 1 PID: 1122 at drivers/iommu/iommufd/pages.c:1290 __iopt_area_unfill_domain+0x54f/0x560
[   54.951139] Modules linked in:
[   54.951380] CPU: 1 PID: 1122 Comm: repro Tainted: G    B   W          6.1.0-a0a6c76cf2a5+ #1
[   54.952002] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   54.952957] RIP: 0010:__iopt_area_unfill_domain+0x54f/0x560
[   54.953427] Code: e8 86 9e 2b ff 85 db 0f 85 35 fb ff ff e8 09 9d 2b ff 0f 0b e9 29 fb ff ff e8 fd 9c 2b ff 0f 0b e9 69 fe ff ff e8 f1 9c 2b ff <0f> 0b e9 58 ff ff ff e8 65 2d dc 00 0f 1f 44 00 00 0f 1f 44 00 00
[   54.954785] RSP: 0018:ffffc90001eebae0 EFLAGS: 00010246
[   54.955227] RAX: 0000000000000000 RBX: 00000000ffffffff RCX: ffffffff81fe0d26
[   54.955813] RDX: 0000000000000000 RSI: ffff88800e678000 RDI: 0000000000000002
[   54.956337] RBP: ffffc90001eebd10 R08: 000000000003b5c5 R09: 0000000000000000
[   54.956880] R10: 000000000003b5a0 R11: 0000000000000024 R12: 00000000000007ff
[   54.957588] R13: 0000000000000801 R14: 00000000000007ff R15: 0000000000000800
[   54.958112] FS:  00007f3777af9740(0000) GS:ffff88807dd00000(0000) knlGS:0000000000000000
[   54.958716] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   54.959168] CR2: 00007f3777c1e580 CR3: 00000000174b6003 CR4: 0000000000770ee0
[   54.959796] PKRU: 55555554
[   54.960014] Call Trace:
[   54.960206]  <TASK>
[   54.960386]  ? rcu_read_lock_sched_held+0x29/0x80
[   54.960859]  ? lock_acquire+0x1a1/0x2f0
[   54.961275]  ? rcu_read_lock_held_common+0x12/0x50
[   54.961646]  ? rcu_read_lock_sched_held+0x29/0x80
[   54.962011]  ? __mutex_lock+0x13a/0xf30
[   54.962318]  ? write_comp_data+0x2f/0x90
[   54.962640]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   54.963013]  iopt_area_unfill_domain+0x32/0x40
[   54.963361]  iopt_table_remove_domain+0x23f/0x4c0
[   54.963806]  iommufd_device_selftest_detach+0x3a/0x90
[   54.964303]  iommufd_selftest_destroy+0x55/0x70
[   54.964690]  iommufd_object_destroy_user+0xce/0x130
[   54.965062]  iommufd_destroy+0xa2/0xc0
[   54.965366]  iommufd_fops_ioctl+0x1ef/0x310
[   54.965715]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   54.966078]  ? write_comp_data+0x2f/0x90
[   54.966552]  __x64_sys_ioctl+0x10e/0x160
[   54.966868]  ? iommufd_get_object.part.6+0x1c0/0x1c0
[   54.967253]  do_syscall_64+0x3b/0x90
[   54.967534]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   54.968107] RIP: 0033:0x7f3777c1e59d
[   54.968390] Code: 00 c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d d3 08 0d 00 f7 d8 64 89 01 48
[   54.969884] RSP: 002b:00007ffd0d727918 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   54.970445] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f3777c1e59d
[   54.970980] RDX: 0000000020000140 RSI: 0000000000003b80 RDI: 0000000000000003
[   54.971550] RBP: 00007ffd0d727930 R08: 00007ffd0d727930 R09: 00007ffd0d727930
[   54.972317] R10: 00007ffd0d727930 R11: 0000000000000213 R12: 0000000000401180
[   54.972866] R13: 00007ffd0d727a50 R14: 0000000000000000 R15: 0000000000000000
[   54.973403]  </TASK>
[   54.973581] irq event stamp: 0
[   54.973818] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   54.974491] hardirqs last disabled at (0): [<ffffffff810fff0c>] copy_process+0x11cc/0x2b10
[   54.975097] softirqs last  enabled at (0): [<ffffffff810fff10>] copy_process+0x11d0/0x2b10
[   54.975796] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   54.976341] ---[ end trace 0000000000000000 ]---
[   54.979320] ------------[ cut here ]------------
[   54.979808] WARNING: CPU: 1 PID: 1122 at drivers/iommu/iommufd/pages.c:178 batch_unpin.isra.23+0x151/0x1a0
[   54.980532] Modules linked in:
[   54.980802] CPU: 1 PID: 1122 Comm: repro Tainted: G    B   W          6.1.0-a0a6c76cf2a5+ #1
[   54.981596] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   54.982428] RIP: 0010:batch_unpin.isra.23+0x151/0x1a0
[   54.982824] Code: e8 c4 be 2b ff 48 8b 45 d0 48 85 c0 75 17 e8 26 bd 2b ff 48 8b 7d c8 48 89 de e8 fa bd 2b ff 48 39 5d c8 73 07 e8 0f bd 2b ff <0f> 0b e8 08 bd 2b ff 4d 29 e5 31 ff 41 83 c6 01 4c 89 ee 31 db e8
[   54.984284] RSP: 0018:ffffc90001eeb9d8 EFLAGS: 00010246
[   54.984757] RAX: 0000000000000000 RBX: ffffffffffffffff RCX: ffffffff81fded8c
[   54.985333] RDX: 0000000000000000 RSI: ffff88800e678000 RDI: 0000000000000002
[   54.985855] RBP: ffffc90001eeba20 R08: 0000000000000000 R09: ffff88807dd3b890
[   54.986378] R10: 0000000000001169 R11: 0000000000000000 R12: 0000000000000001
[   54.987015] R13: 0000000000000001 R14: 0000000000000000 R15: ffff888005ec9400
[   54.987540] FS:  0000000000000000(0000) GS:ffff88807dd00000(0000) knlGS:0000000000000000
[   54.988287] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   54.988789] CR2: 00007f3777cf0500 CR3: 0000000003c12006 CR4: 0000000000770ee0
[   54.989317] PKRU: 55555554
[   54.989529] Call Trace:
[   54.989721]  <TASK>
[   54.989896]  iopt_pages_unfill_xarray+0x39f/0x5c0
[   54.990263]  ? rcu_read_lock_sched_held+0x29/0x80
[   54.990654]  ? rcu_read_lock_held_common+0x12/0x50
[   54.991113]  ? write_comp_data+0x2f/0x90
[   54.991430]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   54.991795]  ? write_comp_data+0x2f/0x90
[   54.992293]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   54.992731]  ? interval_tree_remove+0x291/0x4e0
[   54.993138]  ? write_comp_data+0x2f/0x90
[   54.993452]  iopt_area_remove_access+0x108/0x120
[   54.993816]  iommufd_access_unpin_pages+0x177/0x210
[   54.994206]  iommufd_test_access_unmap+0xe0/0x130
[   54.994584]  ? iommufd_test_access_unmap+0x130/0x130
[   54.994974]  iommufd_test_staccess_release+0x39/0x60
[   54.995397]  __fput+0x11f/0x450
[   54.995755]  ____fput+0x1e/0x30
[   54.996012]  task_work_run+0xb6/0x120
[   54.996310]  do_exit+0x521/0x1340
[   54.996576]  ? lock_release+0x202/0x2c0
[   54.996979]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   54.997435]  ? trace_hardirqs_on+0x3f/0x100
[   54.997770]  do_group_exit+0x5e/0xf0
[   54.998054]  __x64_sys_exit_group+0x25/0x30
[   54.998379]  do_syscall_64+0x3b/0x90
[   54.998675]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   54.999061] RIP: 0033:0x7f3777be6cf6
[   54.999340] Code: Unable to access opcode bytes at 0x7f3777be6ccc.
[   54.999879] RSP: 002b:00007ffd0d7278d8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
[   55.000564] RAX: ffffffffffffffda RBX: 00007f3777cf1490 RCX: 00007f3777be6cf6
[   55.001115] RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
[   55.001647] RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffff80
[   55.002177] R10: 0000000000000004 R11: 0000000000000246 R12: 00007f3777cf1490
[   55.002862] R13: 0000000000000001 R14: 00007f3777cf4e88 R15: 0000000000000000
[   55.003394]  </TASK>
[   55.003570] irq event stamp: 0
[   55.003839] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   55.004366] hardirqs last disabled at (0): [<ffffffff810fff0c>] copy_process+0x11cc/0x2b10
[   55.004985] softirqs last  enabled at (0): [<ffffffff810fff10>] copy_process+0x11d0/0x2b10
[   55.005594] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   55.006093] ---[ end trace 0000000000000000 ]---
[   55.006606] ------------[ cut here ]------------
[   55.006940] WARNING: CPU: 1 PID: 1122 at drivers/iommu/iommufd/pages.c:886 update_unpinned+0x75/0x80
[   55.007803] Modules linked in:
[   55.008069] CPU: 1 PID: 1122 Comm: repro Tainted: G    B   W          6.1.0-a0a6c76cf2a5+ #1
[   55.008693] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   55.009505] RIP: 0010:update_unpinned+0x75/0x80
[   55.009980] Code: ac 2b ff 48 89 de 31 c9 31 d2 4c 29 e6 4c 89 ef e8 70 fb ff ff e8 bb ac 2b ff 5b 41 5c 41 5d 5d c3 cc cc cc cc e8 ab ac 2b ff <0f> 0b eb e7 0f 1f 80 00 00 00 00 0f 1f 44 00 00 55 48 89 e5 41 57
[   55.011461] RSP: 0018:ffffc90001eeba08 EFLAGS: 00010246
[   55.011964] RAX: 0000000000000000 RBX: 0000000000000000 RCX: ffffffff81fdfdcf
[   55.012518] RDX: 0000000000000000 RSI: ffff88800e678000 RDI: 0000000000000002
[   55.013153] RBP: ffffc90001eeba20 R08: 0000000000000000 R09: ffff88807dd3b890
[   55.013666] R10: 0000000000001169 R11: 0000000000000000 R12: ffffffffffffffff
[   55.014183] R13: ffff888005ec9400 R14: 0000000000000002 R15: 0000000000000002
[   55.014710] FS:  0000000000000000(0000) GS:ffff88807dd00000(0000) knlGS:0000000000000000
[   55.015395] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   55.015815] CR2: 00007f3777cf0500 CR3: 0000000003c12006 CR4: 0000000000770ee0
[   55.016330] PKRU: 55555554
[   55.016586] Call Trace:
[   55.016875]  <TASK>
[   55.017140]  iopt_pages_unfill_xarray+0x522/0x5c0
[   55.017500]  ? rcu_read_lock_sched_held+0x29/0x80
[   55.017869]  ? rcu_read_lock_held_common+0x12/0x50
[   55.018231]  ? write_comp_data+0x2f/0x90
[   55.018540]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   55.018885]  ? write_comp_data+0x2f/0x90
[   55.019199]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   55.019708]  ? interval_tree_remove+0x291/0x4e0
[   55.020050]  ? write_comp_data+0x2f/0x90
[   55.020336]  iopt_area_remove_access+0x108/0x120
[   55.020678]  iommufd_access_unpin_pages+0x177/0x210
[   55.021046]  iommufd_test_access_unmap+0xe0/0x130
[   55.021391]  ? iommufd_test_access_unmap+0x130/0x130
[   55.021770]  iommufd_test_staccess_release+0x39/0x60
[   55.022262]  __fput+0x11f/0x450
[   55.022513]  ____fput+0x1e/0x30
[   55.022762]  task_work_run+0xb6/0x120
[   55.023054]  do_exit+0x521/0x1340
[   55.023353]  ? lock_release+0x202/0x2c0
[   55.023816]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   55.024178]  ? trace_hardirqs_on+0x3f/0x100
[   55.024494]  do_group_exit+0x5e/0xf0
[   55.024787]  __x64_sys_exit_group+0x25/0x30
[   55.025107]  do_syscall_64+0x3b/0x90
[   55.025391]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   55.025775] RIP: 0033:0x7f3777be6cf6
[   55.026060] Code: Unable to access opcode bytes at 0x7f3777be6ccc.
[   55.026599] RSP: 002b:00007ffd0d7278d8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
[   55.027166] RAX: ffffffffffffffda RBX: 00007f3777cf1490 RCX: 00007f3777be6cf6
[   55.027731] RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
[   55.028354] RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffff80
[   55.028884] R10: 0000000000000004 R11: 0000000000000246 R12: 00007f3777cf1490
[   55.029398] R13: 0000000000000001 R14: 00007f3777cf4e88 R15: 0000000000000000
[   55.029922]  </TASK>
[   55.030129] irq event stamp: 0
[   55.030522] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   55.030967] hardirqs last disabled at (0): [<ffffffff810fff0c>] copy_process+0x11cc/0x2b10
[   55.031567] softirqs last  enabled at (0): [<ffffffff810fff10>] copy_process+0x11d0/0x2b10
[   55.032383] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   55.032854] ---[ end trace 0000000000000000 ]---
[   55.033329] ------------[ cut here ]------------
[   55.033671] WARNING: CPU: 1 PID: 1122 at drivers/iommu/iommufd/pages.c:1181 iopt_release_pages+0x159/0x190
[   55.034370] Modules linked in:
[   55.034611] CPU: 1 PID: 1122 Comm: repro Tainted: G    B   W          6.1.0-a0a6c76cf2a5+ #1
[   55.035227] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   55.036030] RIP: 0010:iopt_release_pages+0x159/0x190
[   55.036402] Code: b5 11 ff eb cb e8 87 90 2b ff be 03 00 00 00 4c 89 f7 e8 6a 8b ce ff eb b7 e8 73 90 2b ff 0f 0b e9 ed fe ff ff e8 67 90 2b ff <0f> 0b e9 00 ff ff ff e8 5b 90 2b ff 0f 0b e9 07 ff ff ff e8 4f 90
[   55.037739] RSP: 0018:ffffc90001eebc88 EFLAGS: 00010246
[   55.038130] RAX: 0000000000000000 RBX: ffff888005ec9400 RCX: ffffffff81fe1957
[   55.038652] RDX: 0000000000000000 RSI: ffff88800e678000 RDI: 0000000000000002
[   55.039161] RBP: ffffc90001eebca8 R08: 0000000000000000 R09: 0000000000000000
[   55.039674] R10: ffffc90001eebc58 R11: 0000000000000000 R12: ffffffffffffffff
[   55.040189] R13: 0000000001000000 R14: 00000000017fffff R15: 0000000000000000
[   55.040733] FS:  0000000000000000(0000) GS:ffff88807dd00000(0000) knlGS:0000000000000000
[   55.041323] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   55.041753] CR2: 00007f3777cf0500 CR3: 0000000003c12006 CR4: 0000000000770ee0
[   55.042266] PKRU: 55555554
[   55.042477] Call Trace:
[   55.042664]  <TASK>
[   55.042826]  iopt_unmap_iova_range+0x1ef/0x2e0
[   55.043168]  iopt_unmap_all+0x2f/0x60
[   55.043445]  iommufd_ioas_destroy+0x2c/0x70
[   55.043761]  iommufd_fops_release+0xd4/0x170
[   55.044080]  ? iommufd_ctx_get+0x30/0x30
[   55.044378]  __fput+0x11f/0x450
[   55.044631]  ____fput+0x1e/0x30
[   55.044900]  task_work_run+0xb6/0x120
[   55.045196]  do_exit+0x521/0x1340
[   55.045459]  ? lock_release+0x202/0x2c0
[   55.045750]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   55.046108]  ? trace_hardirqs_on+0x3f/0x100
[   55.046435]  do_group_exit+0x5e/0xf0
[   55.046714]  __x64_sys_exit_group+0x25/0x30
[   55.047039]  do_syscall_64+0x3b/0x90
[   55.047317]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   55.047696] RIP: 0033:0x7f3777be6cf6
[   55.047970] Code: Unable to access opcode bytes at 0x7f3777be6ccc.
[   55.048418] RSP: 002b:00007ffd0d7278d8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
[   55.048982] RAX: ffffffffffffffda RBX: 00007f3777cf1490 RCX: 00007f3777be6cf6
[   55.049526] RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
[   55.050064] RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffff80
[   55.050581] R10: 0000000000000004 R11: 0000000000000246 R12: 00007f3777cf1490
[   55.051106] R13: 0000000000000001 R14: 00007f3777cf4e88 R15: 0000000000000000
[   55.051632]  </TASK>
[   55.051805] irq event stamp: 0
[   55.052039] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   55.052498] hardirqs last disabled at (0): [<ffffffff810fff0c>] copy_process+0x11cc/0x2b10
[   55.053124] softirqs last  enabled at (0): [<ffffffff810fff10>] copy_process+0x11d0/0x2b10
[   55.053733] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   55.054194] ---[ end trace 0000000000000000 ]---
[   55.135607] ------------[ cut here ]------------
[   55.136005] WARNING: CPU: 1 PID: 1126 at drivers/iommu/iommufd/pages.c:178 batch_unpin.isra.23+0x151/0x1a0
[   55.136729] Modules linked in:
[   55.136965] CPU: 1 PID: 1126 Comm: repro Tainted: G    B   W          6.1.0-a0a6c76cf2a5+ #1
[   55.137576] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   55.138398] RIP: 0010:batch_unpin.isra.23+0x151/0x1a0
[   55.138792] Code: e8 c4 be 2b ff 48 8b 45 d0 48 85 c0 75 17 e8 26 bd 2b ff 48 8b 7d c8 48 89 de e8 fa bd 2b ff 48 39 5d c8 73 07 e8 0f bd 2b ff <0f> 0b e8 08 bd 2b ff 4d 29 e5 31 ff 41 83 c6 01 4c 89 ee 31 db e8
[   55.140115] RSP: 0018:ffffc90001f0ba88 EFLAGS: 00010246
[   55.140503] RAX: 0000000000000000 RBX: ffffffffffffffff RCX: ffffffff81fded8c
[   55.141042] RDX: 0000000000000000 RSI: ffff88800e67a980 RDI: 0000000000000002
[   55.141563] RBP: ffffc90001f0bad0 R08: 000000000003b5c5 R09: 0000000000000002
[   55.142082] R10: 000000000003b5a0 R11: 0000000000000024 R12: 0000000000000001
[   55.142608] R13: 0000000000000001 R14: 000000000000076f R15: ffff888005ec9400
[   55.143126] FS:  00007f3777af9740(0000) GS:ffff88807dd00000(0000) knlGS:0000000000000000
[   55.143705] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   55.144127] CR2: 00007f3777c1e580 CR3: 00000000174bc002 CR4: 0000000000770ee0
[   55.144645] PKRU: 55555554
[   55.144873] Call Trace:
[   55.145067]  <TASK>
[   55.145239]  __iopt_area_unfill_domain+0x257/0x560
[   55.145615]  ? rcu_read_lock_sched_held+0x29/0x80
[   55.145979]  ? lock_acquire+0x1a1/0x2f0
[   55.146276]  ? rcu_read_lock_held_common+0x12/0x50
[   55.146654]  ? rcu_read_lock_sched_held+0x29/0x80
[   55.147012]  ? __mutex_lock+0x13a/0xf30
[   55.147313]  ? write_comp_data+0x2f/0x90
[   55.147616]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   55.147980]  iopt_area_unfill_domain+0x32/0x40
[   55.148337]  iopt_table_remove_domain+0x23f/0x4c0
[   55.148713]  iommufd_device_selftest_detach+0x3a/0x90
[   55.149110]  iommufd_selftest_destroy+0x55/0x70
[   55.149466]  iommufd_object_destroy_user+0xce/0x130
[   55.149838]  iommufd_destroy+0xa2/0xc0
[   55.150135]  iommufd_fops_ioctl+0x1ef/0x310
[   55.150454]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   55.150819]  ? write_comp_data+0x2f/0x90
[   55.151119]  __x64_sys_ioctl+0x10e/0x160
[   55.151436]  ? iommufd_get_object.part.6+0x1c0/0x1c0
[   55.151813]  do_syscall_64+0x3b/0x90
[   55.152092]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   55.152474] RIP: 0033:0x7f3777c1e59d
[   55.152767] Code: 00 c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d d3 08 0d 00 f7 d8 64 89 01 48
[   55.154086] RSP: 002b:00007ffd0d727918 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   55.154646] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f3777c1e59d
[   55.155164] RDX: 0000000020000140 RSI: 0000000000003b80 RDI: 0000000000000003
[   55.155674] RBP: 00007ffd0d727930 R08: 00007ffd0d727930 R09: 00007ffd0d727930
[   55.156190] R10: 00007ffd0d727930 R11: 0000000000000213 R12: 0000000000401180
[   55.156737] R13: 00007ffd0d727a50 R14: 0000000000000000 R15: 0000000000000000
[   55.157258]  </TASK>
[   55.157433] irq event stamp: 0
[   55.157665] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   55.158120] hardirqs last disabled at (0): [<ffffffff810fff0c>] copy_process+0x11cc/0x2b10
[   55.158735] softirqs last  enabled at (0): [<ffffffff810fff10>] copy_process+0x11d0/0x2b10
[   55.159344] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   55.159801] ---[ end trace 0000000000000000 ]---
[   55.160232] ------------[ cut here ]------------
[   55.160568] WARNING: CPU: 1 PID: 1126 at drivers/iommu/iommufd/pages.c:294 __iopt_area_unfill_domain+0x152/0x560
[   55.161316] Modules linked in:
[   55.161551] CPU: 1 PID: 1126 Comm: repro Tainted: G    B   W          6.1.0-a0a6c76cf2a5+ #1
[   55.162167] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   55.162986] RIP: 0010:__iopt_area_unfill_domain+0x152/0x560
[   55.163405] Code: a1 2b ff 44 8b 64 24 54 48 8b 44 24 48 31 ff 44 89 e6 48 89 44 24 38 e8 6c a2 2b ff 45 85 e4 0f 85 eb 01 00 00 e8 ee a0 2b ff <0f> 0b e8 e7 a0 2b ff 48 8b 44 24 38 89 5c 24 58 89 18 8b 44 24 54
[   55.164742] RSP: 0018:ffffc90001f0bae0 EFLAGS: 00010246
[   55.165130] RAX: 0000000000000000 RBX: 00000000fffffffe RCX: ffffffff81fe0bd5
[   55.165651] RDX: 0000000000000000 RSI: ffff88800e67a980 RDI: 0000000000000002
[   55.166168] RBP: ffffc90001f0bd10 R08: 000000000003b5c5 R09: 0000000000000002
[   55.166684] R10: 000000000003b5a0 R11: 0000000000000024 R12: 0000000000000001
[   55.167205] R13: 0000000000000802 R14: 00000000000007ff R15: 0000000000000800
[   55.167716] FS:  00007f3777af9740(0000) GS:ffff88807dd00000(0000) knlGS:0000000000000000
[   55.168309] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   55.168735] CR2: 00007f3777c1e580 CR3: 00000000174bc002 CR4: 0000000000770ee0
[   55.169260] PKRU: 55555554
[   55.169469] Call Trace:
[   55.169657]  <TASK>
[   55.169833]  ? rcu_read_lock_sched_held+0x29/0x80
[   55.170190]  ? lock_acquire+0x1a1/0x2f0
[   55.170498]  ? rcu_read_lock_held_common+0x12/0x50
[   55.170854]  ? rcu_read_lock_sched_held+0x29/0x80
[   55.171218]  ? __mutex_lock+0x13a/0xf30
[   55.171517]  ? write_comp_data+0x2f/0x90
[   55.171815]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   55.172176]  iopt_area_unfill_domain+0x32/0x40
[   55.172515]  iopt_table_remove_domain+0x23f/0x4c0
[   55.172885]  iommufd_device_selftest_detach+0x3a/0x90
[   55.173284]  iommufd_selftest_destroy+0x55/0x70
[   55.173628]  iommufd_object_destroy_user+0xce/0x130
[   55.173996]  iommufd_destroy+0xa2/0xc0
[   55.174290]  iommufd_fops_ioctl+0x1ef/0x310
[   55.174616]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   55.174975]  ? write_comp_data+0x2f/0x90
[   55.175275]  __x64_sys_ioctl+0x10e/0x160
[   55.175580]  ? iommufd_get_object.part.6+0x1c0/0x1c0
[   55.175955]  do_syscall_64+0x3b/0x90
[   55.176231]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   55.176610] RIP: 0033:0x7f3777c1e59d
[   55.176898] Code: 00 c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d d3 08 0d 00 f7 d8 64 89 01 48
[   55.178207] RSP: 002b:00007ffd0d727918 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   55.178764] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f3777c1e59d
[   55.179276] RDX: 0000000020000140 RSI: 0000000000003b80 RDI: 0000000000000003
[   55.179785] RBP: 00007ffd0d727930 R08: 00007ffd0d727930 R09: 00007ffd0d727930
[   55.180303] R10: 00007ffd0d727930 R11: 0000000000000213 R12: 0000000000401180
[   55.180834] R13: 00007ffd0d727a50 R14: 0000000000000000 R15: 0000000000000000
[   55.181358]  </TASK>
[   55.181539] irq event stamp: 0
[   55.181775] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   55.182236] hardirqs last disabled at (0): [<ffffffff810fff0c>] copy_process+0x11cc/0x2b10
[   55.183329] softirqs last  enabled at (0): [<ffffffff810fff10>] copy_process+0x11d0/0x2b10
[   55.184378] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   55.185094] ---[ end trace 0000000000000000 ]---
[   55.185825] ------------[ cut here ]------------
[   55.186357] WARNING: CPU: 1 PID: 1126 at drivers/iommu/iommufd/pages.c:1290 __iopt_area_unfill_domain+0x54f/0x560
[   55.187707] Modules linked in:
[   55.188067] CPU: 1 PID: 1126 Comm: repro Tainted: G    B   W          6.1.0-a0a6c76cf2a5+ #1
[   55.189150] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   55.190492] RIP: 0010:__iopt_area_unfill_domain+0x54f/0x560
[   55.191131] Code: e8 86 9e 2b ff 85 db 0f 85 35 fb ff ff e8 09 9d 2b ff 0f 0b e9 29 fb ff ff e8 fd 9c 2b ff 0f 0b e9 69 fe ff ff e8 f1 9c 2b ff <0f> 0b e9 58 ff ff ff e8 65 2d dc 00 0f 1f 44 00 00 0f 1f 44 00 00
[   55.193268] RSP: 0018:ffffc90001f0bae0 EFLAGS: 00010246
[   55.193843] RAX: 0000000000000000 RBX: 00000000fffffffe RCX: ffffffff81fe0d26
[   55.194792] RDX: 0000000000000000 RSI: ffff88800e67a980 RDI: 0000000000000002
[   55.195625] RBP: ffffc90001f0bd10 R08: 000000000003b5c5 R09: 0000000000000002
[   55.196589] R10: 000000000003b5a0 R11: 0000000000000024 R12: 00000000000007ff
[   55.197599] R13: 0000000000000802 R14: 00000000000007ff R15: 0000000000000800
[   55.198457] FS:  00007f3777af9740(0000) GS:ffff88807dd00000(0000) knlGS:0000000000000000
[   55.199382] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   55.200110] CR2: 00007f3777c1e580 CR3: 00000000174bc002 CR4: 0000000000770ee0
[   55.201080] PKRU: 55555554
[   55.201428] Call Trace:
[   55.201729]  <TASK>
[   55.202008]  ? rcu_read_lock_sched_held+0x29/0x80
[   55.202574]  ? lock_acquire+0x1a1/0x2f0
[   55.203126]  ? rcu_read_lock_held_common+0x12/0x50
[   55.203711]  ? rcu_read_lock_sched_held+0x29/0x80
[   55.204322]  ? __mutex_lock+0x13a/0xf30
[   55.204920]  ? write_comp_data+0x2f/0x90
[   55.205389]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   55.205959]  iopt_area_unfill_domain+0x32/0x40
[   55.206528]  iopt_table_remove_domain+0x23f/0x4c0
[   55.207163]  iommufd_device_selftest_detach+0x3a/0x90
[   55.207786]  iommufd_selftest_destroy+0x55/0x70
[   55.208459]  iommufd_object_destroy_user+0xce/0x130
[   55.209080]  iommufd_destroy+0xa2/0xc0
[   55.209533]  iommufd_fops_ioctl+0x1ef/0x310
[   55.210029]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   55.210713]  ? write_comp_data+0x2f/0x90
[   55.211173]  __x64_sys_ioctl+0x10e/0x160
[   55.211651]  ? iommufd_get_object.part.6+0x1c0/0x1c0
[   55.212407]  do_syscall_64+0x3b/0x90
[   55.212886]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   55.213478] RIP: 0033:0x7f3777c1e59d
[   55.213915] Code: 00 c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d d3 08 0d 00 f7 d8 64 89 01 48
[   55.216207] RSP: 002b:00007ffd0d727918 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   55.217293] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f3777c1e59d
[   55.218097] RDX: 0000000020000140 RSI: 0000000000003b80 RDI: 0000000000000003
[   55.218881] RBP: 00007ffd0d727930 R08: 00007ffd0d727930 R09: 00007ffd0d727930
[   55.219661] R10: 00007ffd0d727930 R11: 0000000000000213 R12: 0000000000401180
[   55.220481] R13: 00007ffd0d727a50 R14: 0000000000000000 R15: 0000000000000000
[   55.221339]  </TASK>
[   55.221612] irq event stamp: 0
[   55.221973] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   55.222652] hardirqs last disabled at (0): [<ffffffff810fff0c>] copy_process+0x11cc/0x2b10
[   55.223576] softirqs last  enabled at (0): [<ffffffff810fff10>] copy_process+0x11d0/0x2b10
[   55.224512] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   55.225246] ---[ end trace 0000000000000000 ]---
[   55.225932] ------------[ cut here ]------------
[   55.226465] WARNING: CPU: 1 PID: 1126 at drivers/iommu/iommufd/pages.c:886 update_unpinned+0x75/0x80
[   55.227488] Modules linked in:
[   55.227868] CPU: 1 PID: 1126 Comm: repro Tainted: G    B   W          6.1.0-a0a6c76cf2a5+ #1
[   55.228842] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   55.230082] RIP: 0010:update_unpinned+0x75/0x80
[   55.230633] Code: ac 2b ff 48 89 de 31 c9 31 d2 4c 29 e6 4c 89 ef e8 70 fb ff ff e8 bb ac 2b ff 5b 41 5c 41 5d 5d c3 cc cc cc cc e8 ab ac 2b ff <0f> 0b eb e7 0f 1f 80 00 00 00 00 0f 1f 44 00 00 55 48 89 e5 41 57
[   55.232625] RSP: 0018:ffffc90001f0bab8 EFLAGS: 00010246
[   55.233236] RAX: 0000000000000000 RBX: 0000000000000800 RCX: ffffffff81fdfdcf
[   55.234021] RDX: 0000000000000000 RSI: ffff88800e67a980 RDI: 0000000000000002
[   55.234833] RBP: ffffc90001f0bad0 R08: 0000000000000000 R09: ffff88807dd3b920
[   55.235630] R10: 0000000000000991 R11: 0000000000000009 R12: ffffffffffffffff
[   55.236420] R13: ffff888005ec9400 R14: 00000000000007ff R15: 0000000000000800
[   55.237193] FS:  00007f3777af9740(0000) GS:ffff88807dd00000(0000) knlGS:0000000000000000
[   55.238070] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   55.238711] CR2: 00007f3777c1e580 CR3: 00000000174bc002 CR4: 0000000000770ee0
[   55.239469] PKRU: 55555554
[   55.239781] Call Trace:
[   55.240065]  <TASK>
[   55.240332]  __iopt_area_unfill_domain+0x4e1/0x560
[   55.240940]  ? rcu_read_lock_sched_held+0x29/0x80
[   55.241507]  ? lock_acquire+0x1a1/0x2f0
[   55.241979]  ? rcu_read_lock_held_common+0x12/0x50
[   55.242621]  ? rcu_read_lock_sched_held+0x29/0x80
[   55.242987]  ? __mutex_lock+0x13a/0xf30
[   55.243289]  ? write_comp_data+0x2f/0x90
[   55.243590]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   55.243943]  iopt_area_unfill_domain+0x32/0x40
[   55.244283]  iopt_table_remove_domain+0x23f/0x4c0
[   55.244649]  iommufd_device_selftest_detach+0x3a/0x90
[   55.245064]  iommufd_selftest_destroy+0x55/0x70
[   55.245417]  iommufd_object_destroy_user+0xce/0x130
[   55.245783]  iommufd_destroy+0xa2/0xc0
[   55.246069]  iommufd_fops_ioctl+0x1ef/0x310
[   55.246385]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   55.246748]  ? write_comp_data+0x2f/0x90
[   55.247049]  __x64_sys_ioctl+0x10e/0x160
[   55.247352]  ? iommufd_get_object.part.6+0x1c0/0x1c0
[   55.247717]  do_syscall_64+0x3b/0x90
[   55.247991]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   55.248367] RIP: 0033:0x7f3777c1e59d
[   55.248638] Code: 00 c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d d3 08 0d 00 f7 d8 64 89 01 48
[   55.249959] RSP: 002b:00007ffd0d727918 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   55.250512] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f3777c1e59d
[   55.251019] RDX: 0000000020000140 RSI: 0000000000003b80 RDI: 0000000000000003
[   55.251524] RBP: 00007ffd0d727930 R08: 00007ffd0d727930 R09: 00007ffd0d727930
[   55.252032] R10: 00007ffd0d727930 R11: 0000000000000213 R12: 0000000000401180
[   55.252543] R13: 00007ffd0d727a50 R14: 0000000000000000 R15: 0000000000000000
[   55.253082]  </TASK>
[   55.253257] irq event stamp: 0
[   55.253493] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   55.253962] hardirqs last disabled at (0): [<ffffffff810fff0c>] copy_process+0x11cc/0x2b10
[   55.254571] softirqs last  enabled at (0): [<ffffffff810fff10>] copy_process+0x11d0/0x2b10
[   55.255163] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   55.255615] ---[ end trace 0000000000000000 ]---
[   55.258538] ------------[ cut here ]------------
[   55.258908] WARNING: CPU: 1 PID: 1126 at drivers/iommu/iommufd/pages.c:178 batch_unpin.isra.23+0x151/0x1a0
[   55.259617] Modules linked in:
[   55.259850] CPU: 1 PID: 1126 Comm: repro Tainted: G    B   W          6.1.0-a0a6c76cf2a5+ #1
[   55.260453] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   55.261345] RIP: 0010:batch_unpin.isra.23+0x151/0x1a0
[   55.261757] Code: e8 c4 be 2b ff 48 8b 45 d0 48 85 c0 75 17 e8 26 bd 2b ff 48 8b 7d c8 48 89 de e8 fa bd 2b ff 48 39 5d c8 73 07 e8 0f bd 2b ff <0f> 0b e8 08 bd 2b ff 4d 29 e5 31 ff 41 83 c6 01 4c 89 ee 31 db e8
[   55.263128] RSP: 0018:ffffc90001f0b9d8 EFLAGS: 00010246
[   55.263530] RAX: 0000000000000000 RBX: fffffffffffffffe RCX: ffffffff81fdeda6
[   55.264092] RDX: 0000000000000000 RSI: ffff88800e67a980 RDI: 0000000000000002
[   55.264627] RBP: ffffc90001f0ba20 R08: 0000000000000000 R09: ffff88807dd3b890
[   55.265169] R10: 00000000000011aa R11: 0000000000000000 R12: 0000000000000001
[   55.265692] R13: 0000000000000001 R14: 0000000000000000 R15: ffff888005ec9400
[   55.266205] FS:  0000000000000000(0000) GS:ffff88807dd00000(0000) knlGS:0000000000000000
[   55.266807] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   55.267253] CR2: 00007f3777cf0500 CR3: 0000000003c12001 CR4: 0000000000770ee0
[   55.267795] PKRU: 55555554
[   55.268016] Call Trace:
[   55.268215]  <TASK>
[   55.268393]  iopt_pages_unfill_xarray+0x39f/0x5c0
[   55.268786]  ? rcu_read_lock_sched_held+0x29/0x80
[   55.269181]  ? rcu_read_lock_held_common+0x12/0x50
[   55.269565]  ? write_comp_data+0x2f/0x90
[   55.269881]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   55.270260]  ? write_comp_data+0x2f/0x90
[   55.270598]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   55.270961]  ? interval_tree_remove+0x291/0x4e0
[   55.271318]  ? write_comp_data+0x2f/0x90
[   55.271634]  iopt_area_remove_access+0x108/0x120
[   55.272011]  iommufd_access_unpin_pages+0x177/0x210
[   55.272417]  iommufd_test_access_unmap+0xe0/0x130
[   55.272813]  ? iommufd_test_access_unmap+0x130/0x130
[   55.273213]  iommufd_test_staccess_release+0x39/0x60
[   55.273614]  __fput+0x11f/0x450
[   55.273894]  ____fput+0x1e/0x30
[   55.274157]  task_work_run+0xb6/0x120
[   55.274467]  do_exit+0x521/0x1340
[   55.274738]  ? lock_release+0x202/0x2c0
[   55.275036]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   55.275405]  ? trace_hardirqs_on+0x3f/0x100
[   55.275746]  do_group_exit+0x5e/0xf0
[   55.276040]  __x64_sys_exit_group+0x25/0x30
[   55.276371]  do_syscall_64+0x3b/0x90
[   55.276682]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   55.277088] RIP: 0033:0x7f3777be6cf6
[   55.277376] Code: Unable to access opcode bytes at 0x7f3777be6ccc.
[   55.277851] RSP: 002b:00007ffd0d7278d8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
[   55.278435] RAX: ffffffffffffffda RBX: 00007f3777cf1490 RCX: 00007f3777be6cf6
[   55.278964] RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
[   55.279498] RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffff80
[   55.280047] R10: 0000000000000004 R11: 0000000000000246 R12: 00007f3777cf1490
[   55.280597] R13: 0000000000000001 R14: 00007f3777cf4e88 R15: 0000000000000000
[   55.281164]  </TASK>
[   55.281346] irq event stamp: 0
[   55.281589] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   55.282064] hardirqs last disabled at (0): [<ffffffff810fff0c>] copy_process+0x11cc/0x2b10
[   55.282687] softirqs last  enabled at (0): [<ffffffff810fff10>] copy_process+0x11d0/0x2b10
[   55.283287] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   55.283754] ---[ end trace 0000000000000000 ]---
[   55.284196] ------------[ cut here ]------------
[   55.284549] WARNING: CPU: 1 PID: 1126 at drivers/iommu/iommufd/pages.c:886 update_unpinned+0x75/0x80
[   55.285246] Modules linked in:
[   55.285488] CPU: 1 PID: 1126 Comm: repro Tainted: G    B   W          6.1.0-a0a6c76cf2a5+ #1
[   55.286117] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   55.286941] RIP: 0010:update_unpinned+0x75/0x80
[   55.287336] Code: ac 2b ff 48 89 de 31 c9 31 d2 4c 29 e6 4c 89 ef e8 70 fb ff ff e8 bb ac 2b ff 5b 41 5c 41 5d 5d c3 cc cc cc cc e8 ab ac 2b ff <0f> 0b eb e7 0f 1f 80 00 00 00 00 0f 1f 44 00 00 55 48 89 e5 41 57
[   55.288694] RSP: 0018:ffffc90001f0ba08 EFLAGS: 00010246
[   55.289112] RAX: 0000000000000000 RBX: 0000000000000800 RCX: ffffffff81fdfdcf
[   55.289644] RDX: 0000000000000000 RSI: ffff88800e67a980 RDI: 0000000000000002
[   55.290176] RBP: ffffc90001f0ba20 R08: 0000000000000000 R09: ffff88807dd3b890
[   55.290710] R10: 00000000000011aa R11: 0000000000000000 R12: fffffffffffffffe
[   55.291223] R13: ffff888005ec9400 R14: 0000000000000002 R15: 0000000000000002
[   55.291756] FS:  0000000000000000(0000) GS:ffff88807dd00000(0000) knlGS:0000000000000000
[   55.292373] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   55.292825] CR2: 00007f3777cf0500 CR3: 0000000003c12001 CR4: 0000000000770ee0
[   55.293366] PKRU: 55555554
[   55.293583] Call Trace:
[   55.293777]  <TASK>
[   55.293949]  iopt_pages_unfill_xarray+0x522/0x5c0
[   55.294316]  ? rcu_read_lock_sched_held+0x29/0x80
[   55.294699]  ? rcu_read_lock_held_common+0x12/0x50
[   55.295059]  ? write_comp_data+0x2f/0x90
[   55.295364]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   55.295730]  ? write_comp_data+0x2f/0x90
[   55.296044]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   55.296415]  ? interval_tree_remove+0x291/0x4e0
[   55.296788]  ? write_comp_data+0x2f/0x90
[   55.297103]  iopt_area_remove_access+0x108/0x120
[   55.297473]  iommufd_access_unpin_pages+0x177/0x210
[   55.297865]  iommufd_test_access_unmap+0xe0/0x130
[   55.298215]  ? iommufd_test_access_unmap+0x130/0x130
[   55.298591]  iommufd_test_staccess_release+0x39/0x60
[   55.298957]  __fput+0x11f/0x450
[   55.299203]  ____fput+0x1e/0x30
[   55.299449]  task_work_run+0xb6/0x120
[   55.299747]  do_exit+0x521/0x1340
[   55.300011]  ? lock_release+0x202/0x2c0
[   55.300315]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   55.300699]  ? trace_hardirqs_on+0x3f/0x100
[   55.301038]  do_group_exit+0x5e/0xf0
[   55.301328]  __x64_sys_exit_group+0x25/0x30
[   55.301667]  do_syscall_64+0x3b/0x90
[   55.301952]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   55.302333] RIP: 0033:0x7f3777be6cf6
[   55.302616] Code: Unable to access opcode bytes at 0x7f3777be6ccc.
[   55.303055] RSP: 002b:00007ffd0d7278d8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
[   55.303612] RAX: ffffffffffffffda RBX: 00007f3777cf1490 RCX: 00007f3777be6cf6
[   55.304144] RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
[   55.304672] RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffff80
[   55.305169] R10: 0000000000000004 R11: 0000000000000246 R12: 00007f3777cf1490
[   55.305666] R13: 0000000000000001 R14: 00007f3777cf4e88 R15: 0000000000000000
[   55.306184]  </TASK>
[   55.306355] irq event stamp: 0
[   55.306633] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   55.307083] hardirqs last disabled at (0): [<ffffffff810fff0c>] copy_process+0x11cc/0x2b10
[   55.307655] softirqs last  enabled at (0): [<ffffffff810fff10>] copy_process+0x11d0/0x2b10
[   55.308233] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   55.308680] ---[ end trace 0000000000000000 ]---
[   55.309126] ------------[ cut here ]------------
[   55.309451] WARNING: CPU: 1 PID: 1126 at drivers/iommu/iommufd/pages.c:1181 iopt_release_pages+0x159/0x190
[   55.310123] Modules linked in:
[   55.310346] CPU: 1 PID: 1126 Comm: repro Tainted: G    B   W          6.1.0-a0a6c76cf2a5+ #1
[   55.310939] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   55.311722] RIP: 0010:iopt_release_pages+0x159/0x190
[   55.312082] Code: b5 11 ff eb cb e8 87 90 2b ff be 03 00 00 00 4c 89 f7 e8 6a 8b ce ff eb b7 e8 73 90 2b ff 0f 0b e9 ed fe ff ff e8 67 90 2b ff <0f> 0b e9 00 ff ff ff e8 5b 90 2b ff 0f 0b e9 07 ff ff ff e8 4f 90
[   55.313350] RSP: 0018:ffffc90001f0bc88 EFLAGS: 00010246
[   55.313717] RAX: 0000000000000000 RBX: ffff888005ec9400 RCX: ffffffff81fe1957
[   55.314204] RDX: 0000000000000000 RSI: ffff88800e67a980 RDI: 0000000000000002
[   55.314708] RBP: ffffc90001f0bca8 R08: 0000000000000000 R09: 0000000000000000
[   55.315200] R10: ffffc90001f0bc58 R11: 0000000000000000 R12: fffffffffffffffe
[   55.315703] R13: 0000000001000000 R14: 00000000017fffff R15: 0000000000000000
[   55.316197] FS:  0000000000000000(0000) GS:ffff88807dd00000(0000) knlGS:0000000000000000
[   55.316765] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   55.317168] CR2: 00007f3777cf0500 CR3: 0000000003c12001 CR4: 0000000000770ee0
[   55.317678] PKRU: 55555554
[   55.317874] Call Trace:
[   55.318057]  <TASK>
[   55.318216]  iopt_unmap_iova_range+0x1ef/0x2e0
[   55.318572]  iopt_unmap_all+0x2f/0x60
[   55.318847]  iommufd_ioas_destroy+0x2c/0x70
[   55.319159]  iommufd_fops_release+0xd4/0x170
[   55.319497]  ? iommufd_ctx_get+0x30/0x30
[   55.319785]  __fput+0x11f/0x450
[   55.320028]  ____fput+0x1e/0x30
[   55.320266]  task_work_run+0xb6/0x120
[   55.320548]  do_exit+0x521/0x1340
[   55.320808]  ? lock_release+0x202/0x2c0
[   55.321086]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   55.321427]  ? trace_hardirqs_on+0x3f/0x100
[   55.321737]  do_group_exit+0x5e/0xf0
[   55.322007]  __x64_sys_exit_group+0x25/0x30
[   55.322310]  do_syscall_64+0x3b/0x90
[   55.322584]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   55.322952] RIP: 0033:0x7f3777be6cf6
[   55.323217] Code: Unable to access opcode bytes at 0x7f3777be6ccc.
[   55.323647] RSP: 002b:00007ffd0d7278d8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
[   55.324171] RAX: ffffffffffffffda RBX: 00007f3777cf1490 RCX: 00007f3777be6cf6
[   55.324681] RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
[   55.325175] RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffff80
[   55.325671] R10: 0000000000000004 R11: 0000000000000246 R12: 00007f3777cf1490
[   55.326163] R13: 0000000000000001 R14: 00007f3777cf4e88 R15: 0000000000000000
[   55.326666]  </TASK>
[   55.326830] irq event stamp: 0
[   55.327058] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   55.327500] hardirqs last disabled at (0): [<ffffffff810fff0c>] copy_process+0x11cc/0x2b10
[   55.328082] softirqs last  enabled at (0): [<ffffffff810fff10>] copy_process+0x11d0/0x2b10
[   55.328675] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   55.329112] ---[ end trace 0000000000000000 ]---
[   57.402194] ------------[ cut here ]------------
[   57.402617] WARNING: CPU: 1 PID: 1206 at drivers/iommu/iommufd/pages.c:294 __iopt_area_unfill_domain+0x152/0x560
[   57.403578] Modules linked in:
[   57.403880] CPU: 1 PID: 1206 Comm: repro Tainted: G    B   W          6.1.0-a0a6c76cf2a5+ #1
[   57.404691] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   57.405753] RIP: 0010:__iopt_area_unfill_domain+0x152/0x560
[   57.406291] Code: a1 2b ff 44 8b 64 24 54 48 8b 44 24 48 31 ff 44 89 e6 48 89 44 24 38 e8 6c a2 2b ff 45 85 e4 0f 85 eb 01 00 00 e8 ee a0 2b ff <0f> 0b e8 e7 a0 2b ff 48 8b 44 24 38 89 5c 24 58 89 18 8b 44 24 54
[   57.408009] RSP: 0018:ffffc90002133ae0 EFLAGS: 00010246
[   57.408506] RAX: 0000000000000000 RBX: 00000000ffffffff RCX: ffffffff81fe0bd5
[   57.409217] RDX: 0000000000000000 RSI: ffff88800e678000 RDI: 0000000000000002
[   57.409910] RBP: ffffc90002133d10 R08: 000000000003b5c5 R09: 0000000000000004
[   57.410606] R10: 000000000003b5a0 R11: 0000000000000024 R12: 0000000000000001
[   57.411289] R13: 0000000000000801 R14: 00000000000007ff R15: 0000000000000800
[   57.411978] FS:  00007f3777af9740(0000) GS:ffff88807dd00000(0000) knlGS:0000000000000000
[   57.412765] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   57.413326] CR2: 00007f3777c1e580 CR3: 000000001750a004 CR4: 0000000000770ee0
[   57.414017] PKRU: 55555554
[   57.414290] Call Trace:
[   57.414547]  <TASK>
[   57.414775]  ? rcu_read_lock_sched_held+0x29/0x80
[   57.415249]  ? lock_acquire+0x1a1/0x2f0
[   57.415642]  ? rcu_read_lock_held_common+0x12/0x50
[   57.416127]  ? rcu_read_lock_sched_held+0x29/0x80
[   57.416598]  ? __mutex_lock+0x13a/0xf30
[   57.417005]  ? write_comp_data+0x2f/0x90
[   57.417405]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   57.417878]  iopt_area_unfill_domain+0x32/0x40
[   57.418328]  iopt_table_remove_domain+0x23f/0x4c0
[   57.418801]  iommufd_device_selftest_detach+0x3a/0x90
[   57.419313]  iommufd_selftest_destroy+0x55/0x70
[   57.419773]  iommufd_object_destroy_user+0xce/0x130
[   57.420263]  iommufd_destroy+0xa2/0xc0
[   57.420642]  iommufd_fops_ioctl+0x1ef/0x310
[   57.421100]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   57.421572]  ? write_comp_data+0x2f/0x90
[   57.421971]  __x64_sys_ioctl+0x10e/0x160
[   57.422375]  ? iommufd_get_object.part.6+0x1c0/0x1c0
[   57.422875]  do_syscall_64+0x3b/0x90
[   57.423241]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   57.423744] RIP: 0033:0x7f3777c1e59d
[   57.424104] Code: 00 c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d d3 08 0d 00 f7 d8 64 89 01 48
[   57.425892] RSP: 002b:00007ffd0d727918 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   57.426636] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f3777c1e59d
[   57.427324] RDX: 0000000020000140 RSI: 0000000000003b80 RDI: 0000000000000003
[   57.428013] RBP: 00007ffd0d727930 R08: 00007ffd0d727930 R09: 00007ffd0d727930
[   57.428719] R10: 00007ffd0d727930 R11: 0000000000000213 R12: 0000000000401180
[   57.429411] R13: 00007ffd0d727a50 R14: 0000000000000000 R15: 0000000000000000
[   57.430107]  </TASK>
[   57.430332] irq event stamp: 0
[   57.430641] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   57.431253] hardirqs last disabled at (0): [<ffffffff810fff0c>] copy_process+0x11cc/0x2b10
[   57.432055] softirqs last  enabled at (0): [<ffffffff810fff10>] copy_process+0x11d0/0x2b10
[   57.432871] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   57.433479] ---[ end trace 0000000000000000 ]---
[   57.434025] ------------[ cut here ]------------
[   57.434484] WARNING: CPU: 1 PID: 1206 at drivers/iommu/iommufd/pages.c:1290 __iopt_area_unfill_domain+0x54f/0x560
[   57.435468] Modules linked in:
[   57.435777] CPU: 1 PID: 1206 Comm: repro Tainted: G    B   W          6.1.0-a0a6c76cf2a5+ #1
[   57.436587] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   57.437679] RIP: 0010:__iopt_area_unfill_domain+0x54f/0x560
[   57.438234] Code: e8 86 9e 2b ff 85 db 0f 85 35 fb ff ff e8 09 9d 2b ff 0f 0b e9 29 fb ff ff e8 fd 9c 2b ff 0f 0b e9 69 fe ff ff e8 f1 9c 2b ff <0f> 0b e9 58 ff ff ff e8 65 2d dc 00 0f 1f 44 00 00 0f 1f 44 00 00
[   57.439998] RSP: 0018:ffffc90002133ae0 EFLAGS: 00010246
[   57.440511] RAX: 0000000000000000 RBX: 00000000ffffffff RCX: ffffffff81fe0d26
[   57.441219] RDX: 0000000000000000 RSI: ffff88800e678000 RDI: 0000000000000002
[   57.441911] RBP: ffffc90002133d10 R08: 000000000003b5c5 R09: 0000000000000004
[   57.442768] R10: 000000000003b5a0 R11: 0000000000000024 R12: 00000000000007ff
[   57.443466] R13: 0000000000000801 R14: 00000000000007ff R15: 0000000000000800
[   57.444229] FS:  00007f3777af9740(0000) GS:ffff88807dd00000(0000) knlGS:0000000000000000
[   57.445170] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   57.445782] CR2: 00007f3777c1e580 CR3: 000000001750a004 CR4: 0000000000770ee0
[   57.446567] PKRU: 55555554
[   57.446875] Call Trace:
[   57.447120]  <TASK>
[   57.447399]  ? rcu_read_lock_sched_held+0x29/0x80
[   57.447871]  ? lock_acquire+0x1a1/0x2f0
[   57.448261]  ? rcu_read_lock_held_common+0x12/0x50
[   57.448755]  ? rcu_read_lock_sched_held+0x29/0x80
[   57.449230]  ? __mutex_lock+0x13a/0xf30
[   57.449623]  ? write_comp_data+0x2f/0x90
[   57.450022]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   57.450503]  iopt_area_unfill_domain+0x32/0x40
[   57.450948]  iopt_table_remove_domain+0x23f/0x4c0
[   57.451421]  iommufd_device_selftest_detach+0x3a/0x90
[   57.451933]  iommufd_selftest_destroy+0x55/0x70
[   57.452390]  iommufd_object_destroy_user+0xce/0x130
[   57.452890]  iommufd_destroy+0xa2/0xc0
[   57.453273]  iommufd_fops_ioctl+0x1ef/0x310
[   57.453695]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   57.454165]  ? write_comp_data+0x2f/0x90
[   57.454569]  __x64_sys_ioctl+0x10e/0x160
[   57.454973]  ? iommufd_get_object.part.6+0x1c0/0x1c0
[   57.455469]  do_syscall_64+0x3b/0x90
[   57.455834]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   57.456329] RIP: 0033:0x7f3777c1e59d
[   57.456704] Code: 00 c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d d3 08 0d 00 f7 d8 64 89 01 48
[   57.458159] RSP: 002b:00007ffd0d727918 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   57.458748] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f3777c1e59d
[   57.459253] RDX: 0000000020000140 RSI: 0000000000003b80 RDI: 0000000000000003
[   57.459768] RBP: 00007ffd0d727930 R08: 00007ffd0d727930 R09: 00007ffd0d727930
[   57.460277] R10: 00007ffd0d727930 R11: 0000000000000213 R12: 0000000000401180
[   57.460815] R13: 00007ffd0d727a50 R14: 0000000000000000 R15: 0000000000000000
[   57.461344]  </TASK>
[   57.461521] irq event stamp: 0
[   57.461748] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   57.462207] hardirqs last disabled at (0): [<ffffffff810fff0c>] copy_process+0x11cc/0x2b10
[   57.462820] softirqs last  enabled at (0): [<ffffffff810fff10>] copy_process+0x11d0/0x2b10
[   57.463419] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   57.463864] ---[ end trace 0000000000000000 ]---
[   57.466667] ------------[ cut here ]------------
[   57.467034] WARNING: CPU: 1 PID: 1206 at drivers/iommu/iommufd/pages.c:178 batch_unpin.isra.23+0x151/0x1a0
[   57.467734] Modules linked in:
[   57.467966] CPU: 1 PID: 1206 Comm: repro Tainted: G    B   W          6.1.0-a0a6c76cf2a5+ #1
[   57.468571] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   57.469405] RIP: 0010:batch_unpin.isra.23+0x151/0x1a0
[   57.469795] Code: e8 c4 be 2b ff 48 8b 45 d0 48 85 c0 75 17 e8 26 bd 2b ff 48 8b 7d c8 48 89 de e8 fa bd 2b ff 48 39 5d c8 73 07 e8 0f bd 2b ff <0f> 0b e8 08 bd 2b ff 4d 29 e5 31 ff 41 83 c6 01 4c 89 ee 31 db e8
[   57.471114] RSP: 0018:ffffc900021339d8 EFLAGS: 00010246
[   57.471499] RAX: 0000000000000000 RBX: ffffffffffffffff RCX: ffffffff81fded8c
[   57.472012] RDX: 0000000000000000 RSI: ffff88800e678000 RDI: 0000000000000002
[   57.472524] RBP: ffffc90002133a20 R08: 0000000000000000 R09: ffff88807dd3b890
[   57.473058] R10: 00000000000016aa R11: 0000000000000000 R12: 0000000000000001
[   57.473573] R13: 0000000000000001 R14: 0000000000000000 R15: ffff888005ec9c00
[   57.474090] FS:  0000000000000000(0000) GS:ffff88807dd00000(0000) knlGS:0000000000000000
[   57.474668] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   57.475090] CR2: 00007f3777cf0500 CR3: 0000000003c12002 CR4: 0000000000770ee0
[   57.475615] PKRU: 55555554
[   57.475821] Call Trace:
[   57.476006]  <TASK>
[   57.476177]  iopt_pages_unfill_xarray+0x39f/0x5c0
[   57.476524]  ? rcu_read_lock_sched_held+0x29/0x80
[   57.476924]  ? rcu_read_lock_held_common+0x12/0x50
[   57.477290]  ? write_comp_data+0x2f/0x90
[   57.477590]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   57.477939]  ? write_comp_data+0x2f/0x90
[   57.478234]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   57.478594]  ? interval_tree_remove+0x291/0x4e0
[   57.478940]  ? write_comp_data+0x2f/0x90
[   57.479244]  iopt_area_remove_access+0x108/0x120
[   57.479595]  iommufd_access_unpin_pages+0x177/0x210
[   57.479966]  iommufd_test_access_unmap+0xe0/0x130
[   57.480319]  ? iommufd_test_access_unmap+0x130/0x130
[   57.480704]  iommufd_test_staccess_release+0x39/0x60
[   57.481077]  __fput+0x11f/0x450
[   57.481330]  ____fput+0x1e/0x30
[   57.481583]  task_work_run+0xb6/0x120
[   57.481872]  do_exit+0x521/0x1340
[   57.482132]  ? lock_release+0x202/0x2c0
[   57.482421]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   57.482784]  ? trace_hardirqs_on+0x3f/0x100
[   57.483110]  do_group_exit+0x5e/0xf0
[   57.483387]  __x64_sys_exit_group+0x25/0x30
[   57.483703]  do_syscall_64+0x3b/0x90
[   57.483980]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   57.484355] RIP: 0033:0x7f3777be6cf6
[   57.484627] Code: Unable to access opcode bytes at 0x7f3777be6ccc.
[   57.485083] RSP: 002b:00007ffd0d7278d8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
[   57.485645] RAX: ffffffffffffffda RBX: 00007f3777cf1490 RCX: 00007f3777be6cf6
[   57.486174] RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
[   57.486694] RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffff80
[   57.487201] R10: 0000000000000004 R11: 0000000000000246 R12: 00007f3777cf1490
[   57.487709] R13: 0000000000000001 R14: 00007f3777cf4e88 R15: 0000000000000000
[   57.488226]  </TASK>
[   57.488395] irq event stamp: 0
[   57.488626] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   57.489123] hardirqs last disabled at (0): [<ffffffff810fff0c>] copy_process+0x11cc/0x2b10
[   57.489718] softirqs last  enabled at (0): [<ffffffff810fff10>] copy_process+0x11d0/0x2b10
[   57.490319] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   57.490773] ---[ end trace 0000000000000000 ]---
[   57.491201] ------------[ cut here ]------------
[   57.491531] WARNING: CPU: 1 PID: 1206 at drivers/iommu/iommufd/pages.c:886 update_unpinned+0x75/0x80
[   57.492199] Modules linked in:
[   57.492433] CPU: 1 PID: 1206 Comm: repro Tainted: G    B   W          6.1.0-a0a6c76cf2a5+ #1
[   57.493047] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   57.493852] RIP: 0010:update_unpinned+0x75/0x80
[   57.494203] Code: ac 2b ff 48 89 de 31 c9 31 d2 4c 29 e6 4c 89 ef e8 70 fb ff ff e8 bb ac 2b ff 5b 41 5c 41 5d 5d c3 cc cc cc cc e8 ab ac 2b ff <0f> 0b eb e7 0f 1f 80 00 00 00 00 0f 1f 44 00 00 55 48 89 e5 41 57
[   57.495554] RSP: 0018:ffffc90002133a08 EFLAGS: 00010246
[   57.495946] RAX: 0000000000000000 RBX: 0000000000000000 RCX: ffffffff81fdfdcf
[   57.496459] RDX: 0000000000000000 RSI: ffff88800e678000 RDI: 0000000000000002
[   57.496993] RBP: ffffc90002133a20 R08: 0000000000000000 R09: ffff88807dd3b890
[   57.497502] R10: 00000000000016aa R11: 0000000000000000 R12: ffffffffffffffff
[   57.498010] R13: ffff888005ec9c00 R14: 0000000000000002 R15: 0000000000000002
[   57.498548] FS:  0000000000000000(0000) GS:ffff88807dd00000(0000) knlGS:0000000000000000
[   57.499120] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   57.499539] CR2: 00007f3777cf0500 CR3: 0000000003c12002 CR4: 0000000000770ee0
[   57.500073] PKRU: 55555554
[   57.500277] Call Trace:
[   57.500463]  <TASK>
[   57.500628]  iopt_pages_unfill_xarray+0x522/0x5c0
[   57.500995]  ? rcu_read_lock_sched_held+0x29/0x80
[   57.501361]  ? rcu_read_lock_held_common+0x12/0x50
[   57.501717]  ? write_comp_data+0x2f/0x90
[   57.502017]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   57.502367]  ? write_comp_data+0x2f/0x90
[   57.502671]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   57.503026]  ? interval_tree_remove+0x291/0x4e0
[   57.503374]  ? write_comp_data+0x2f/0x90
[   57.503678]  iopt_area_remove_access+0x108/0x120
[   57.504151]  iommufd_access_unpin_pages+0x177/0x210
[   57.504684]  iommufd_test_access_unmap+0xe0/0x130
[   57.505048]  ? iommufd_test_access_unmap+0x130/0x130
[   57.505417]  iommufd_test_staccess_release+0x39/0x60
[   57.505784]  __fput+0x11f/0x450
[   57.506032]  ____fput+0x1e/0x30
[   57.506278]  task_work_run+0xb6/0x120
[   57.506578]  do_exit+0x521/0x1340
[   57.506833]  ? lock_release+0x202/0x2c0
[   57.507124]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   57.507485]  ? trace_hardirqs_on+0x3f/0x100
[   57.507808]  do_group_exit+0x5e/0xf0
[   57.508081]  __x64_sys_exit_group+0x25/0x30
[   57.508396]  do_syscall_64+0x3b/0x90
[   57.508682]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   57.509060] RIP: 0033:0x7f3777be6cf6
[   57.509327] Code: Unable to access opcode bytes at 0x7f3777be6ccc.
[   57.509767] RSP: 002b:00007ffd0d7278d8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
[   57.510309] RAX: ffffffffffffffda RBX: 00007f3777cf1490 RCX: 00007f3777be6cf6
[   57.510841] RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
[   57.511345] RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffff80
[   57.511867] R10: 0000000000000004 R11: 0000000000000246 R12: 00007f3777cf1490
[   57.512388] R13: 0000000000000001 R14: 00007f3777cf4e88 R15: 0000000000000000
[   57.512927]  </TASK>
[   57.513100] irq event stamp: 0
[   57.513326] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   57.513771] hardirqs last disabled at (0): [<ffffffff810fff0c>] copy_process+0x11cc/0x2b10
[   57.514379] softirqs last  enabled at (0): [<ffffffff810fff10>] copy_process+0x11d0/0x2b10
[   57.514974] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   57.515421] ---[ end trace 0000000000000000 ]---
[   57.515890] ------------[ cut here ]------------
[   57.516225] WARNING: CPU: 1 PID: 1206 at drivers/iommu/iommufd/pages.c:1181 iopt_release_pages+0x159/0x190
[   57.516931] Modules linked in:
[   57.517163] CPU: 1 PID: 1206 Comm: repro Tainted: G    B   W          6.1.0-a0a6c76cf2a5+ #1
[   57.517761] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   57.518570] RIP: 0010:iopt_release_pages+0x159/0x190
[   57.518938] Code: b5 11 ff eb cb e8 87 90 2b ff be 03 00 00 00 4c 89 f7 e8 6a 8b ce ff eb b7 e8 73 90 2b ff 0f 0b e9 ed fe ff ff e8 67 90 2b ff <0f> 0b e9 00 ff ff ff e8 5b 90 2b ff 0f 0b e9 07 ff ff ff e8 4f 90
[   57.520290] RSP: 0018:ffffc90002133c88 EFLAGS: 00010246
[   57.520694] RAX: 0000000000000000 RBX: ffff888005ec9c00 RCX: ffffffff81fe1957
[   57.521201] RDX: 0000000000000000 RSI: ffff88800e678000 RDI: 0000000000000002
[   57.521709] RBP: ffffc90002133ca8 R08: 0000000000000000 R09: 0000000000000000
[   57.522220] R10: ffffc90002133c58 R11: 0000000000000000 R12: ffffffffffffffff
[   57.522744] R13: 0000000001000000 R14: 00000000017fffff R15: 0000000000000000
[   57.523248] FS:  0000000000000000(0000) GS:ffff88807dd00000(0000) knlGS:0000000000000000
[   57.523819] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   57.524232] CR2: 00007f3777cf0500 CR3: 0000000003c12002 CR4: 0000000000770ee0
[   57.524761] PKRU: 55555554
[   57.524964] Call Trace:
[   57.525148]  <TASK>
[   57.525310]  iopt_unmap_iova_range+0x1ef/0x2e0
[   57.525699]  iopt_unmap_all+0x2f/0x60
[   57.525985]  iommufd_ioas_destroy+0x2c/0x70
[   57.526310]  iommufd_fops_release+0xd4/0x170
[   57.526642]  ? iommufd_ctx_get+0x30/0x30
[   57.526948]  __fput+0x11f/0x450
[   57.527200]  ____fput+0x1e/0x30
[   57.527444]  task_work_run+0xb6/0x120
[   57.527732]  do_exit+0x521/0x1340
[   57.527989]  ? lock_release+0x202/0x2c0
[   57.528281]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   57.528641]  ? trace_hardirqs_on+0x3f/0x100
[   57.528993]  do_group_exit+0x5e/0xf0
[   57.529274]  __x64_sys_exit_group+0x25/0x30
[   57.529590]  do_syscall_64+0x3b/0x90
[   57.529883]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   57.530283] RIP: 0033:0x7f3777be6cf6
[   57.530562] Code: Unable to access opcode bytes at 0x7f3777be6ccc.
[   57.531002] RSP: 002b:00007ffd0d7278d8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
[   57.531552] RAX: ffffffffffffffda RBX: 00007f3777cf1490 RCX: 00007f3777be6cf6
[   57.532064] RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
[   57.532571] RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffff80
[   57.533116] R10: 0000000000000004 R11: 0000000000000246 R12: 00007f3777cf1490
[   57.533629] R13: 0000000000000001 R14: 00007f3777cf4e88 R15: 0000000000000000
[   57.534147]  </TASK>
[   57.534315] irq event stamp: 0
[   57.534555] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   57.535003] hardirqs last disabled at (0): [<ffffffff810fff0c>] copy_process+0x11cc/0x2b10
[   57.535622] softirqs last  enabled at (0): [<ffffffff810fff10>] copy_process+0x11d0/0x2b10
[   57.536216] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   57.536676] ---[ end trace 0000000000000000 ]---
[   57.658289] ------------[ cut here ]------------
[   57.658682] WARNING: CPU: 1 PID: 1212 at drivers/iommu/iommufd/pages.c:294 __iopt_area_unfill_domain+0x152/0x560
[   57.659417] Modules linked in:
[   57.659647] CPU: 1 PID: 1212 Comm: repro Tainted: G    B   W          6.1.0-a0a6c76cf2a5+ #1
[   57.660248] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   57.661063] RIP: 0010:__iopt_area_unfill_domain+0x152/0x560
[   57.661472] Code: a1 2b ff 44 8b 64 24 54 48 8b 44 24 48 31 ff 44 89 e6 48 89 44 24 38 e8 6c a2 2b ff 45 85 e4 0f 85 eb 01 00 00 e8 ee a0 2b ff <0f> 0b e8 e7 a0 2b ff 48 8b 44 24 38 89 5c 24 58 89 18 8b 44 24 54
[   57.662765] RSP: 0018:ffffc90002163ae0 EFLAGS: 00010246
[   57.663505] RAX: 0000000000000000 RBX: 00000000ffffffff RCX: ffffffff81fe0bd5
[   57.664025] RDX: 0000000000000000 RSI: ffff88800e678000 RDI: 0000000000000002
[   57.664726] RBP: ffffc90002163d10 R08: 000000000003b5c5 R09: 0000000000000008
[   57.665355] R10: 000000000003b5a0 R11: 0000000000000024 R12: 0000000000000002
[   57.666145] R13: 0000000000000801 R14: 00000000000007ff R15: 0000000000000800
[   57.666832] FS:  00007f3777af9740(0000) GS:ffff88807dd00000(0000) knlGS:0000000000000000
[   57.667690] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   57.668253] CR2: 00007f3777c1e580 CR3: 0000000017516005 CR4: 0000000000770ee0
[   57.669072] PKRU: 55555554
[   57.669347] Call Trace:
[   57.669594]  <TASK>
[   57.669823]  ? rcu_read_lock_sched_held+0x29/0x80
[   57.670426]  ? lock_acquire+0x1a1/0x2f0
[   57.670802]  ? rcu_read_lock_held_common+0x12/0x50
[   57.671168]  ? rcu_read_lock_sched_held+0x29/0x80
[   57.671533]  ? __mutex_lock+0x13a/0xf30
[   57.671826]  ? write_comp_data+0x2f/0x90
[   57.672141]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   57.672620]  iopt_area_unfill_domain+0x32/0x40
[   57.672968]  iopt_table_remove_domain+0x23f/0x4c0
[   57.673319]  iommufd_device_selftest_detach+0x3a/0x90
[   57.673718]  iommufd_selftest_destroy+0x55/0x70
[   57.674058]  iommufd_object_destroy_user+0xce/0x130
[   57.674416]  iommufd_destroy+0xa2/0xc0
[   57.674749]  iommufd_fops_ioctl+0x1ef/0x310
[   57.675112]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   57.675478]  ? write_comp_data+0x2f/0x90
[   57.675788]  __x64_sys_ioctl+0x10e/0x160
[   57.676092]  ? iommufd_get_object.part.6+0x1c0/0x1c0
[   57.676465]  do_syscall_64+0x3b/0x90
[   57.676752]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   57.677257] RIP: 0033:0x7f3777c1e59d
[   57.677546] Code: 00 c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d d3 08 0d 00 f7 d8 64 89 01 48
[   57.678853] RSP: 002b:00007ffd0d727918 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   57.679595] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f3777c1e59d
[   57.680101] RDX: 0000000020000140 RSI: 0000000000003b80 RDI: 0000000000000003
[   57.680607] RBP: 00007ffd0d727930 R08: 00007ffd0d727930 R09: 00007ffd0d727930
[   57.681280] R10: 00007ffd0d727930 R11: 0000000000000213 R12: 0000000000401180
[   57.681787] R13: 00007ffd0d727a50 R14: 0000000000000000 R15: 0000000000000000
[   57.682301]  </TASK>
[   57.682470] irq event stamp: 0
[   57.682713] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   57.683244] hardirqs last disabled at (0): [<ffffffff810fff0c>] copy_process+0x11cc/0x2b10
[   57.683841] softirqs last  enabled at (0): [<ffffffff810fff10>] copy_process+0x11d0/0x2b10
[   57.684558] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   57.685025] ---[ end trace 0000000000000000 ]---
[   57.685451] ------------[ cut here ]------------
[   57.685796] WARNING: CPU: 1 PID: 1212 at drivers/iommu/iommufd/pages.c:1290 __iopt_area_unfill_domain+0x54f/0x560
[   57.686568] Modules linked in:
[   57.686823] CPU: 1 PID: 1212 Comm: repro Tainted: G    B   W          6.1.0-a0a6c76cf2a5+ #1
[   57.687428] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   57.688347] RIP: 0010:__iopt_area_unfill_domain+0x54f/0x560
[   57.688771] Code: e8 86 9e 2b ff 85 db 0f 85 35 fb ff ff e8 09 9d 2b ff 0f 0b e9 29 fb ff ff e8 fd 9c 2b ff 0f 0b e9 69 fe ff ff e8 f1 9c 2b ff <0f> 0b e9 58 ff ff ff e8 65 2d dc 00 0f 1f 44 00 00 0f 1f 44 00 00
[   57.690238] RSP: 0018:ffffc90002163ae0 EFLAGS: 00010246
[   57.690625] RAX: 0000000000000000 RBX: 00000000ffffffff RCX: ffffffff81fe0d26
[   57.691177] RDX: 0000000000000000 RSI: ffff88800e678000 RDI: 0000000000000002
[   57.691809] RBP: ffffc90002163d10 R08: 000000000003b5c5 R09: 0000000000000008
[   57.692320] R10: 000000000003b5a0 R11: 0000000000000024 R12: 00000000000007ff
[   57.692927] R13: 0000000000000801 R14: 00000000000007ff R15: 0000000000000800
[   57.693450] FS:  00007f3777af9740(0000) GS:ffff88807dd00000(0000) knlGS:0000000000000000
[   57.694022] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   57.694443] CR2: 00007f3777c1e580 CR3: 0000000017516005 CR4: 0000000000770ee0
[   57.695065] PKRU: 55555554
[   57.695267] Call Trace:
[   57.695455]  <TASK>
[   57.695626]  ? rcu_read_lock_sched_held+0x29/0x80
[   57.696099]  ? lock_acquire+0x1a1/0x2f0
[   57.696389]  ? rcu_read_lock_held_common+0x12/0x50
[   57.696761]  ? rcu_read_lock_sched_held+0x29/0x80
[   57.697115]  ? __mutex_lock+0x13a/0xf30
[   57.697411]  ? write_comp_data+0x2f/0x90
[   57.697710]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   57.698063]  iopt_area_unfill_domain+0x32/0x40
[   57.698422]  iopt_table_remove_domain+0x23f/0x4c0
[   57.698855]  iommufd_device_selftest_detach+0x3a/0x90
[   57.699242]  iommufd_selftest_destroy+0x55/0x70
[   57.699659]  iommufd_object_destroy_user+0xce/0x130
[   57.700144]  iommufd_destroy+0xa2/0xc0
[   57.700498]  iommufd_fops_ioctl+0x1ef/0x310
[   57.700840]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   57.701195]  ? write_comp_data+0x2f/0x90
[   57.701492]  __x64_sys_ioctl+0x10e/0x160
[   57.701796]  ? iommufd_get_object.part.6+0x1c0/0x1c0
[   57.702294]  do_syscall_64+0x3b/0x90
[   57.702587]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   57.702961] RIP: 0033:0x7f3777c1e59d
[   57.703234] Code: 00 c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d d3 08 0d 00 f7 d8 64 89 01 48
[   57.704622] RSP: 002b:00007ffd0d727918 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   57.705299] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f3777c1e59d
[   57.705818] RDX: 0000000020000140 RSI: 0000000000003b80 RDI: 0000000000000003
[   57.706337] RBP: 00007ffd0d727930 R08: 00007ffd0d727930 R09: 00007ffd0d727930
[   57.706852] R10: 00007ffd0d727930 R11: 0000000000000213 R12: 0000000000401180
[   57.707474] R13: 00007ffd0d727a50 R14: 0000000000000000 R15: 0000000000000000
[   57.707990]  </TASK>
[   57.708157] irq event stamp: 0
[   57.708458] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   57.708941] hardirqs last disabled at (0): [<ffffffff810fff0c>] copy_process+0x11cc/0x2b10
[   57.709537] softirqs last  enabled at (0): [<ffffffff810fff10>] copy_process+0x11d0/0x2b10
[   57.710123] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   57.710697] ---[ end trace 0000000000000000 ]---
[   57.713602] ------------[ cut here ]------------
[   57.713960] WARNING: CPU: 1 PID: 1212 at drivers/iommu/iommufd/pages.c:178 batch_unpin.isra.23+0x151/0x1a0
[   57.714706] Modules linked in:
[   57.715008] CPU: 1 PID: 1212 Comm: repro Tainted: G    B   W          6.1.0-a0a6c76cf2a5+ #1
[   57.715616] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   57.716568] RIP: 0010:batch_unpin.isra.23+0x151/0x1a0
[   57.716981] Code: e8 c4 be 2b ff 48 8b 45 d0 48 85 c0 75 17 e8 26 bd 2b ff 48 8b 7d c8 48 89 de e8 fa bd 2b ff 48 39 5d c8 73 07 e8 0f bd 2b ff <0f> 0b e8 08 bd 2b ff 4d 29 e5 31 ff 41 83 c6 01 4c 89 ee 31 db e8
[   57.718280] RSP: 0018:ffffc900021639d8 EFLAGS: 00010246
[   57.718666] RAX: 0000000000000000 RBX: ffffffffffffffff RCX: ffffffff81fded8c
[   57.719178] RDX: 0000000000000000 RSI: ffff88800e678000 RDI: 0000000000000002
[   57.719707] RBP: ffffc90002163a20 R08: 0000000000000000 R09: ffff88807dd3b890
[   57.720214] R10: 000000000000170d R11: 0000000000000000 R12: 0000000000000001
[   57.720736] R13: 0000000000000001 R14: 0000000000000000 R15: ffff888005ec9c00
[   57.721236] FS:  0000000000000000(0000) GS:ffff88807dd00000(0000) knlGS:0000000000000000
[   57.721843] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   57.722255] CR2: 00007f3777cf0500 CR3: 0000000003c12003 CR4: 0000000000770ee0
[   57.722781] PKRU: 55555554
[   57.722991] Call Trace:
[   57.723183]  <TASK>
[   57.723347]  iopt_pages_unfill_xarray+0x39f/0x5c0
[   57.723707]  ? rcu_read_lock_sched_held+0x29/0x80
[   57.724074]  ? rcu_read_lock_held_common+0x12/0x50
[   57.724435]  ? write_comp_data+0x2f/0x90
[   57.724758]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   57.725110]  ? write_comp_data+0x2f/0x90
[   57.725441]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   57.725793]  ? interval_tree_remove+0x291/0x4e0
[   57.726138]  ? write_comp_data+0x2f/0x90
[   57.726436]  iopt_area_remove_access+0x108/0x120
[   57.726791]  iommufd_access_unpin_pages+0x177/0x210
[   57.727196]  iommufd_test_access_unmap+0xe0/0x130
[   57.727559]  ? iommufd_test_access_unmap+0x130/0x130
[   57.727931]  iommufd_test_staccess_release+0x39/0x60
[   57.728306]  __fput+0x11f/0x450
[   57.728562]  ____fput+0x1e/0x30
[   57.728843]  task_work_run+0xb6/0x120
[   57.729153]  do_exit+0x521/0x1340
[   57.729408]  ? lock_release+0x202/0x2c0
[   57.729701]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   57.730059]  ? trace_hardirqs_on+0x3f/0x100
[   57.730386]  do_group_exit+0x5e/0xf0
[   57.730663]  __x64_sys_exit_group+0x25/0x30
[   57.730973]  do_syscall_64+0x3b/0x90
[   57.731246]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   57.731616] RIP: 0033:0x7f3777be6cf6
[   57.731888] Code: Unable to access opcode bytes at 0x7f3777be6ccc.
[   57.732327] RSP: 002b:00007ffd0d7278d8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
[   57.732896] RAX: ffffffffffffffda RBX: 00007f3777cf1490 RCX: 00007f3777be6cf6
[   57.733415] RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
[   57.733936] RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffff80
[   57.734444] R10: 0000000000000004 R11: 0000000000000246 R12: 00007f3777cf1490
[   57.734961] R13: 0000000000000001 R14: 00007f3777cf4e88 R15: 0000000000000000
[   57.735494]  </TASK>
[   57.735666] irq event stamp: 0
[   57.735896] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   57.736354] hardirqs last disabled at (0): [<ffffffff810fff0c>] copy_process+0x11cc/0x2b10
[   57.736974] softirqs last  enabled at (0): [<ffffffff810fff10>] copy_process+0x11d0/0x2b10
[   57.737572] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   57.738023] ---[ end trace 0000000000000000 ]---
[   57.738463] ------------[ cut here ]------------
[   57.738808] WARNING: CPU: 1 PID: 1212 at drivers/iommu/iommufd/pages.c:886 update_unpinned+0x75/0x80
[   57.739474] Modules linked in:
[   57.739711] CPU: 1 PID: 1212 Comm: repro Tainted: G    B   W          6.1.0-a0a6c76cf2a5+ #1
[   57.740312] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   57.741124] RIP: 0010:update_unpinned+0x75/0x80
[   57.741467] Code: ac 2b ff 48 89 de 31 c9 31 d2 4c 29 e6 4c 89 ef e8 70 fb ff ff e8 bb ac 2b ff 5b 41 5c 41 5d 5d c3 cc cc cc cc e8 ab ac 2b ff <0f> 0b eb e7 0f 1f 80 00 00 00 00 0f 1f 44 00 00 55 48 89 e5 41 57
[   57.742794] RSP: 0018:ffffc90002163a08 EFLAGS: 00010246
[   57.743176] RAX: 0000000000000000 RBX: 0000000000000000 RCX: ffffffff81fdfdcf
[   57.743685] RDX: 0000000000000000 RSI: ffff88800e678000 RDI: 0000000000000002
[   57.744209] RBP: ffffc90002163a20 R08: 0000000000000000 R09: ffff88807dd3b890
[   57.744744] R10: 000000000000170d R11: 0000000000000000 R12: ffffffffffffffff
[   57.745253] R13: ffff888005ec9c00 R14: 0000000000000002 R15: 0000000000000002
[   57.745761] FS:  0000000000000000(0000) GS:ffff88807dd00000(0000) knlGS:0000000000000000
[   57.746340] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   57.746766] CR2: 00007f3777cf0500 CR3: 0000000003c12003 CR4: 0000000000770ee0
[   57.747287] PKRU: 55555554
[   57.747498] Call Trace:
[   57.747683]  <TASK>
[   57.747850]  iopt_pages_unfill_xarray+0x522/0x5c0
[   57.748204]  ? rcu_read_lock_sched_held+0x29/0x80
[   57.748576]  ? rcu_read_lock_held_common+0x12/0x50
[   57.748951]  ? write_comp_data+0x2f/0x90
[   57.749251]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   57.749607]  ? write_comp_data+0x2f/0x90
[   57.749904]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   57.750258]  ? interval_tree_remove+0x291/0x4e0
[   57.750611]  ? write_comp_data+0x2f/0x90
[   57.750911]  iopt_area_remove_access+0x108/0x120
[   57.751261]  iommufd_access_unpin_pages+0x177/0x210
[   57.751646]  iommufd_test_access_unmap+0xe0/0x130
[   57.752001]  ? iommufd_test_access_unmap+0x130/0x130
[   57.752373]  iommufd_test_staccess_release+0x39/0x60
[   57.752765]  __fput+0x11f/0x450
[   57.753015]  ____fput+0x1e/0x30
[   57.753261]  task_work_run+0xb6/0x120
[   57.753557]  do_exit+0x521/0x1340
[   57.753822]  ? lock_release+0x202/0x2c0
[   57.754117]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   57.754480]  ? trace_hardirqs_on+0x3f/0x100
[   57.754798]  do_group_exit+0x5e/0xf0
[   57.755071]  __x64_sys_exit_group+0x25/0x30
[   57.755382]  do_syscall_64+0x3b/0x90
[   57.755663]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   57.756048] RIP: 0033:0x7f3777be6cf6
[   57.756319] Code: Unable to access opcode bytes at 0x7f3777be6ccc.
[   57.756780] RSP: 002b:00007ffd0d7278d8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
[   57.757321] RAX: ffffffffffffffda RBX: 00007f3777cf1490 RCX: 00007f3777be6cf6
[   57.757832] RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
[   57.758341] RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffff80
[   57.758851] R10: 0000000000000004 R11: 0000000000000246 R12: 00007f3777cf1490
[   57.759368] R13: 0000000000000001 R14: 00007f3777cf4e88 R15: 0000000000000000
[   57.759890]  </TASK>
[   57.760058] irq event stamp: 0
[   57.760287] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   57.760763] hardirqs last disabled at (0): [<ffffffff810fff0c>] copy_process+0x11cc/0x2b10
[   57.761368] softirqs last  enabled at (0): [<ffffffff810fff10>] copy_process+0x11d0/0x2b10
[   57.761960] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   57.762416] ---[ end trace 0000000000000000 ]---
[   57.762880] ------------[ cut here ]------------
[   57.763223] WARNING: CPU: 1 PID: 1212 at drivers/iommu/iommufd/pages.c:1181 iopt_release_pages+0x159/0x190
[   57.763926] Modules linked in:
[   57.764155] CPU: 1 PID: 1212 Comm: repro Tainted: G    B   W          6.1.0-a0a6c76cf2a5+ #1
[   57.764784] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   57.765750] RIP: 0010:iopt_release_pages+0x159/0x190
[   57.766190] Code: b5 11 ff eb cb e8 87 90 2b ff be 03 00 00 00 4c 89 f7 e8 6a 8b ce ff eb b7 e8 73 90 2b ff 0f 0b e9 ed fe ff ff e8 67 90 2b ff <0f> 0b e9 00 ff ff ff e8 5b 90 2b ff 0f 0b e9 07 ff ff ff e8 4f 90
[   57.767550] RSP: 0018:ffffc90002163c88 EFLAGS: 00010246
[   57.767929] RAX: 0000000000000000 RBX: ffff888005ec9c00 RCX: ffffffff81fe1957
[   57.768434] RDX: 0000000000000000 RSI: ffff88800e678000 RDI: 0000000000000002
[   57.768963] RBP: ffffc90002163ca8 R08: 0000000000000000 R09: 0000000000000000
[   57.769470] R10: ffffc90002163c58 R11: 0000000000000000 R12: ffffffffffffffff
[   57.769976] R13: 0000000001000000 R14: 00000000017fffff R15: 0000000000000000
[   57.770493] FS:  0000000000000000(0000) GS:ffff88807dd00000(0000) knlGS:0000000000000000
[   57.771070] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   57.771491] CR2: 00007f3777cf0500 CR3: 0000000003c12003 CR4: 0000000000770ee0
[   57.772000] PKRU: 55555554
[   57.772205] Call Trace:
[   57.772390]  <TASK>
[   57.772553]  iopt_unmap_iova_range+0x1ef/0x2e0
[   57.772911]  iopt_unmap_all+0x2f/0x60
[   57.773187]  iommufd_ioas_destroy+0x2c/0x70
[   57.773497]  iommufd_fops_release+0xd4/0x170
[   57.773821]  ? iommufd_ctx_get+0x30/0x30
[   57.774120]  __fput+0x11f/0x450
[   57.774365]  ____fput+0x1e/0x30
[   57.774622]  task_work_run+0xb6/0x120
[   57.774912]  do_exit+0x521/0x1340
[   57.775173]  ? lock_release+0x202/0x2c0
[   57.775478]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   57.775853]  ? trace_hardirqs_on+0x3f/0x100
[   57.776198]  do_group_exit+0x5e/0xf0
[   57.776489]  __x64_sys_exit_group+0x25/0x30
[   57.776838]  do_syscall_64+0x3b/0x90
[   57.777137]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   57.777538] RIP: 0033:0x7f3777be6cf6
[   57.777828] Code: Unable to access opcode bytes at 0x7f3777be6ccc.
[   57.778304] RSP: 002b:00007ffd0d7278d8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
[   57.778871] RAX: ffffffffffffffda RBX: 00007f3777cf1490 RCX: 00007f3777be6cf6
[   57.779400] RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
[   57.779936] RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffff80
[   57.780478] R10: 0000000000000004 R11: 0000000000000246 R12: 00007f3777cf1490
[   57.781045] R13: 0000000000000001 R14: 00007f3777cf4e88 R15: 0000000000000000
[   57.781604]  </TASK>
[   57.781787] irq event stamp: 0
[   57.782037] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   57.782528] hardirqs last disabled at (0): [<ffffffff810fff0c>] copy_process+0x11cc/0x2b10
[   57.783135] softirqs last  enabled at (0): [<ffffffff810fff10>] copy_process+0x11d0/0x2b10
[   57.783771] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   57.784259] ---[ end trace 0000000000000000 ]---
[   57.805152] ------------[ cut here ]------------
[   57.805520] WARNING: CPU: 1 PID: 1213 at drivers/iommu/iommufd/pages.c:294 __iopt_area_unfill_domain+0x152/0x560
[   57.806276] Modules linked in:
[   57.806526] CPU: 1 PID: 1213 Comm: repro Tainted: G    B   W          6.1.0-a0a6c76cf2a5+ #1
[   57.807117] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   57.807929] RIP: 0010:__iopt_area_unfill_domain+0x152/0x560
[   57.808356] Code: a1 2b ff 44 8b 64 24 54 48 8b 44 24 48 31 ff 44 89 e6 48 89 44 24 38 e8 6c a2 2b ff 45 85 e4 0f 85 eb 01 00 00 e8 ee a0 2b ff <0f> 0b e8 e7 a0 2b ff 48 8b 44 24 38 89 5c 24 58 89 18 8b 44 24 54
[   57.809764] RSP: 0018:ffffc9000216bae0 EFLAGS: 00010246
[   57.810168] RAX: 0000000000000000 RBX: 00000000ffffffff RCX: ffffffff81fe0bd5
[   57.810695] RDX: 0000000000000000 RSI: ffff88800e67d300 RDI: 0000000000000002
[   57.811204] RBP: ffffc9000216bd10 R08: 000000000003b5c5 R09: 0000000000000014
[   57.811726] R10: 000000000003b5a0 R11: 0000000000000024 R12: 0000000000000001
[   57.812255] R13: 0000000000000801 R14: 00000000000007ff R15: 0000000000000800
[   57.812808] FS:  00007f3777af9740(0000) GS:ffff88807dd00000(0000) knlGS:0000000000000000
[   57.813383] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   57.813810] CR2: 00007f3777c1e580 CR3: 000000001752a006 CR4: 0000000000770ee0
[   57.814341] PKRU: 55555554
[   57.814556] Call Trace:
[   57.814746]  <TASK>
[   57.814925]  ? rcu_read_lock_sched_held+0x29/0x80
[   57.815293]  ? lock_acquire+0x1a1/0x2f0
[   57.815596]  ? rcu_read_lock_held_common+0x12/0x50
[   57.815963]  ? rcu_read_lock_sched_held+0x29/0x80
[   57.816327]  ? __mutex_lock+0x13a/0xf30
[   57.816634]  ? write_comp_data+0x2f/0x90
[   57.816967]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   57.817336]  iopt_area_unfill_domain+0x32/0x40
[   57.817692]  iopt_table_remove_domain+0x23f/0x4c0
[   57.818056]  iommufd_device_selftest_detach+0x3a/0x90
[   57.818456]  iommufd_selftest_destroy+0x55/0x70
[   57.818810]  iommufd_object_destroy_user+0xce/0x130
[   57.819169]  iommufd_destroy+0xa2/0xc0
[   57.819455]  iommufd_fops_ioctl+0x1ef/0x310
[   57.819781]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   57.820143]  ? write_comp_data+0x2f/0x90
[   57.820453]  __x64_sys_ioctl+0x10e/0x160
[   57.820779]  ? iommufd_get_object.part.6+0x1c0/0x1c0
[   57.821163]  do_syscall_64+0x3b/0x90
[   57.821453]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   57.821842] RIP: 0033:0x7f3777c1e59d
[   57.822124] Code: 00 c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d d3 08 0d 00 f7 d8 64 89 01 48
[   57.823448] RSP: 002b:00007ffd0d727918 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   57.824015] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f3777c1e59d
[   57.824543] RDX: 0000000020000140 RSI: 0000000000003b80 RDI: 0000000000000003
[   57.825083] RBP: 00007ffd0d727930 R08: 00007ffd0d727930 R09: 00007ffd0d727930
[   57.825611] R10: 00007ffd0d727930 R11: 0000000000000213 R12: 0000000000401180
[   57.826138] R13: 00007ffd0d727a50 R14: 0000000000000000 R15: 0000000000000000
[   57.826670]  </TASK>
[   57.826836] irq event stamp: 0
[   57.827063] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   57.827517] hardirqs last disabled at (0): [<ffffffff810fff0c>] copy_process+0x11cc/0x2b10
[   57.828140] softirqs last  enabled at (0): [<ffffffff810fff10>] copy_process+0x11d0/0x2b10
[   57.828764] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   57.829234] ---[ end trace 0000000000000000 ]---
[   57.829674] ------------[ cut here ]------------
[   57.830039] WARNING: CPU: 1 PID: 1213 at drivers/iommu/iommufd/pages.c:1290 __iopt_area_unfill_domain+0x54f/0x560
[   57.830791] Modules linked in:
[   57.831018] CPU: 1 PID: 1213 Comm: repro Tainted: G    B   W          6.1.0-a0a6c76cf2a5+ #1
[   57.831639] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   57.832469] RIP: 0010:__iopt_area_unfill_domain+0x54f/0x560
[   57.832907] Code: e8 86 9e 2b ff 85 db 0f 85 35 fb ff ff e8 09 9d 2b ff 0f 0b e9 29 fb ff ff e8 fd 9c 2b ff 0f 0b e9 69 fe ff ff e8 f1 9c 2b ff <0f> 0b e9 58 ff ff ff e8 65 2d dc 00 0f 1f 44 00 00 0f 1f 44 00 00
[   57.834259] RSP: 0018:ffffc9000216bae0 EFLAGS: 00010246
[   57.834652] RAX: 0000000000000000 RBX: 00000000ffffffff RCX: ffffffff81fe0d26
[   57.835158] RDX: 0000000000000000 RSI: ffff88800e67d300 RDI: 0000000000000002
[   57.835687] RBP: ffffc9000216bd10 R08: 000000000003b5c5 R09: 0000000000000014
[   57.836219] R10: 000000000003b5a0 R11: 0000000000000024 R12: 00000000000007ff
[   57.836761] R13: 0000000000000801 R14: 00000000000007ff R15: 0000000000000800
[   57.837289] FS:  00007f3777af9740(0000) GS:ffff88807dd00000(0000) knlGS:0000000000000000
[   57.837894] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   57.838330] CR2: 00007f3777c1e580 CR3: 000000001752a006 CR4: 0000000000770ee0
[   57.838856] PKRU: 55555554
[   57.839055] Call Trace:
[   57.839236]  <TASK>
[   57.839411]  ? rcu_read_lock_sched_held+0x29/0x80
[   57.839776]  ? lock_acquire+0x1a1/0x2f0
[   57.840076]  ? rcu_read_lock_held_common+0x12/0x50
[   57.840444]  ? rcu_read_lock_sched_held+0x29/0x80
[   57.840818]  ? __mutex_lock+0x13a/0xf30
[   57.841124]  ? write_comp_data+0x2f/0x90
[   57.841446]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   57.841811]  iopt_area_unfill_domain+0x32/0x40
[   57.842156]  iopt_table_remove_domain+0x23f/0x4c0
[   57.842528]  iommufd_device_selftest_detach+0x3a/0x90
[   57.842904]  iommufd_selftest_destroy+0x55/0x70
[   57.843259]  iommufd_object_destroy_user+0xce/0x130
[   57.843628]  iommufd_destroy+0xa2/0xc0
[   57.843923]  iommufd_fops_ioctl+0x1ef/0x310
[   57.844249]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   57.844612]  ? write_comp_data+0x2f/0x90
[   57.844935]  __x64_sys_ioctl+0x10e/0x160
[   57.845267]  ? iommufd_get_object.part.6+0x1c0/0x1c0
[   57.845647]  do_syscall_64+0x3b/0x90
[   57.845927]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   57.846312] RIP: 0033:0x7f3777c1e59d
[   57.846591] Code: 00 c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d d3 08 0d 00 f7 d8 64 89 01 48
[   57.847904] RSP: 002b:00007ffd0d727918 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   57.848462] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f3777c1e59d
[   57.849012] RDX: 0000000020000140 RSI: 0000000000003b80 RDI: 0000000000000003
[   57.849543] RBP: 00007ffd0d727930 R08: 00007ffd0d727930 R09: 00007ffd0d727930
[   57.850071] R10: 00007ffd0d727930 R11: 0000000000000213 R12: 0000000000401180
[   57.850597] R13: 00007ffd0d727a50 R14: 0000000000000000 R15: 0000000000000000
[   57.851124]  </TASK>
[   57.851296] irq event stamp: 0
[   57.851528] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   57.851993] hardirqs last disabled at (0): [<ffffffff810fff0c>] copy_process+0x11cc/0x2b10
[   57.852606] softirqs last  enabled at (0): [<ffffffff810fff10>] copy_process+0x11d0/0x2b10
[   57.853232] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   57.853724] ---[ end trace 0000000000000000 ]---
[   57.856542] ------------[ cut here ]------------
[   57.856932] WARNING: CPU: 1 PID: 1213 at drivers/iommu/iommufd/pages.c:178 batch_unpin.isra.23+0x151/0x1a0
[   57.857660] Modules linked in:
[   57.857901] CPU: 1 PID: 1213 Comm: repro Tainted: G    B   W          6.1.0-a0a6c76cf2a5+ #1
[   57.858538] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   57.859339] RIP: 0010:batch_unpin.isra.23+0x151/0x1a0
[   57.859728] Code: e8 c4 be 2b ff 48 8b 45 d0 48 85 c0 75 17 e8 26 bd 2b ff 48 8b 7d c8 48 89 de e8 fa bd 2b ff 48 39 5d c8 73 07 e8 0f bd 2b ff <0f> 0b e8 08 bd 2b ff 4d 29 e5 31 ff 41 83 c6 01 4c 89 ee 31 db e8
[   57.861136] RSP: 0018:ffffc9000216b9d8 EFLAGS: 00010246
[   57.861546] RAX: 0000000000000000 RBX: ffffffffffffffff RCX: ffffffff81fded8c
[   57.862072] RDX: 0000000000000000 RSI: ffff88800e67d300 RDI: 0000000000000002
[   57.862615] RBP: ffffc9000216ba20 R08: 0000000000000000 R09: ffff88807dd3b890
[   57.863117] R10: 000000000000171c R11: 0000000000000000 R12: 0000000000000001
[   57.863634] R13: 0000000000000001 R14: 0000000000000000 R15: ffff888005ec9400
[   57.864173] FS:  0000000000000000(0000) GS:ffff88807dd00000(0000) knlGS:0000000000000000
[   57.864788] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   57.865233] CR2: 00007f3777cf0500 CR3: 0000000003c12003 CR4: 0000000000770ee0
[   57.865772] PKRU: 55555554
[   57.865987] Call Trace:
[   57.866185]  <TASK>
[   57.866361]  iopt_pages_unfill_xarray+0x39f/0x5c0
[   57.866730]  ? rcu_read_lock_sched_held+0x29/0x80
[   57.867100]  ? rcu_read_lock_held_common+0x12/0x50
[   57.867472]  ? write_comp_data+0x2f/0x90
[   57.867786]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   57.868157]  ? write_comp_data+0x2f/0x90
[   57.868471]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   57.868861]  ? interval_tree_remove+0x291/0x4e0
[   57.869225]  ? write_comp_data+0x2f/0x90
[   57.869542]  iopt_area_remove_access+0x108/0x120
[   57.869928]  iommufd_access_unpin_pages+0x177/0x210
[   57.870329]  iommufd_test_access_unmap+0xe0/0x130
[   57.870695]  ? iommufd_test_access_unmap+0x130/0x130
[   57.871074]  iommufd_test_staccess_release+0x39/0x60
[   57.871457]  __fput+0x11f/0x450
[   57.871717]  ____fput+0x1e/0x30
[   57.871976]  task_work_run+0xb6/0x120
[   57.872284]  do_exit+0x521/0x1340
[   57.872558]  ? lock_release+0x202/0x2c0
[   57.872880]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   57.873253]  ? trace_hardirqs_on+0x3f/0x100
[   57.873590]  do_group_exit+0x5e/0xf0
[   57.873878]  __x64_sys_exit_group+0x25/0x30
[   57.874195]  do_syscall_64+0x3b/0x90
[   57.874478]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   57.874866] RIP: 0033:0x7f3777be6cf6
[   57.875147] Code: Unable to access opcode bytes at 0x7f3777be6ccc.
[   57.875619] RSP: 002b:00007ffd0d7278d8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
[   57.876184] RAX: ffffffffffffffda RBX: 00007f3777cf1490 RCX: 00007f3777be6cf6
[   57.876706] RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
[   57.877230] RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffff80
[   57.877766] R10: 0000000000000004 R11: 0000000000000246 R12: 00007f3777cf1490
[   57.878302] R13: 0000000000000001 R14: 00007f3777cf4e88 R15: 0000000000000000
[   57.878828]  </TASK>
[   57.878998] irq event stamp: 0
[   57.879226] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   57.879687] hardirqs last disabled at (0): [<ffffffff810fff0c>] copy_process+0x11cc/0x2b10
[   57.880317] softirqs last  enabled at (0): [<ffffffff810fff10>] copy_process+0x11d0/0x2b10
[   57.880959] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   57.881437] ---[ end trace 0000000000000000 ]---
[   57.881890] ------------[ cut here ]------------
[   57.882247] WARNING: CPU: 1 PID: 1213 at drivers/iommu/iommufd/pages.c:886 update_unpinned+0x75/0x80
[   57.882925] Modules linked in:
[   57.883161] CPU: 1 PID: 1213 Comm: repro Tainted: G    B   W          6.1.0-a0a6c76cf2a5+ #1
[   57.883792] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   57.884677] RIP: 0010:update_unpinned+0x75/0x80
[   57.885039] Code: ac 2b ff 48 89 de 31 c9 31 d2 4c 29 e6 4c 89 ef e8 70 fb ff ff e8 bb ac 2b ff 5b 41 5c 41 5d 5d c3 cc cc cc cc e8 ab ac 2b ff <0f> 0b eb e7 0f 1f 80 00 00 00 00 0f 1f 44 00 00 55 48 89 e5 41 57
[   57.886411] RSP: 0018:ffffc9000216ba08 EFLAGS: 00010246
[   57.886812] RAX: 0000000000000000 RBX: 0000000000000000 RCX: ffffffff81fdfdcf
[   57.887350] RDX: 0000000000000000 RSI: ffff88800e67d300 RDI: 0000000000000002
[   57.887888] RBP: ffffc9000216ba20 R08: 0000000000000000 R09: ffff88807dd3b890
[   57.888426] R10: 000000000000171c R11: 0000000000000000 R12: ffffffffffffffff
[   57.888957] R13: ffff888005ec9400 R14: 0000000000000002 R15: 0000000000000002
[   57.889489] FS:  0000000000000000(0000) GS:ffff88807dd00000(0000) knlGS:0000000000000000
[   57.890086] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   57.890546] CR2: 00007f3777cf0500 CR3: 0000000003c12003 CR4: 0000000000770ee0
[   57.891099] PKRU: 55555554
[   57.891315] Call Trace:
[   57.891515]  <TASK>
[   57.891681]  iopt_pages_unfill_xarray+0x522/0x5c0
[   57.892038]  ? rcu_read_lock_sched_held+0x29/0x80
[   57.892411]  ? rcu_read_lock_held_common+0x12/0x50
[   57.892803]  ? write_comp_data+0x2f/0x90
[   57.893132]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   57.893489]  ? write_comp_data+0x2f/0x90
[   57.893792]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   57.894161]  ? interval_tree_remove+0x291/0x4e0
[   57.894530]  ? write_comp_data+0x2f/0x90
[   57.894847]  iopt_area_remove_access+0x108/0x120
[   57.895216]  iommufd_access_unpin_pages+0x177/0x210
[   57.895618]  iommufd_test_access_unmap+0xe0/0x130
[   57.895986]  ? iommufd_test_access_unmap+0x130/0x130
[   57.896370]  iommufd_test_staccess_release+0x39/0x60
[   57.896767]  __fput+0x11f/0x450
[   57.897025]  ____fput+0x1e/0x30
[   57.897279]  task_work_run+0xb6/0x120
[   57.897576]  do_exit+0x521/0x1340
[   57.897839]  ? lock_release+0x202/0x2c0
[   57.898139]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   57.898515]  ? trace_hardirqs_on+0x3f/0x100
[   57.898826]  do_group_exit+0x5e/0xf0
[   57.899097]  __x64_sys_exit_group+0x25/0x30
[   57.899412]  do_syscall_64+0x3b/0x90
[   57.899692]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   57.900082] RIP: 0033:0x7f3777be6cf6
[   57.900357] Code: Unable to access opcode bytes at 0x7f3777be6ccc.
[   57.900840] RSP: 002b:00007ffd0d7278d8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
[   57.901404] RAX: ffffffffffffffda RBX: 00007f3777cf1490 RCX: 00007f3777be6cf6
[   57.901931] RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
[   57.902456] RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffff80
[   57.902890] R10: 0000000000000004 R11: 0000000000000246 R12: 00007f3777cf1490
[   57.903341] R13: 0000000000000001 R14: 00007f3777cf4e88 R15: 0000000000000000
[   57.903871]  </TASK>
[   57.904041] irq event stamp: 0
[   57.904296] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   57.904785] hardirqs last disabled at (0): [<ffffffff810fff0c>] copy_process+0x11cc/0x2b10
[   57.905421] softirqs last  enabled at (0): [<ffffffff810fff10>] copy_process+0x11d0/0x2b10
[   57.906038] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   57.906529] ---[ end trace 0000000000000000 ]---
[   57.906986] ------------[ cut here ]------------
[   57.907326] WARNING: CPU: 1 PID: 1213 at drivers/iommu/iommufd/pages.c:1181 iopt_release_pages+0x159/0x190
[   57.908066] Modules linked in:
[   57.908305] CPU: 1 PID: 1213 Comm: repro Tainted: G    B   W          6.1.0-a0a6c76cf2a5+ #1
[   57.908949] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   57.909718] RIP: 0010:iopt_release_pages+0x159/0x190
[   57.910074] Code: b5 11 ff eb cb e8 87 90 2b ff be 03 00 00 00 4c 89 f7 e8 6a 8b ce ff eb b7 e8 73 90 2b ff 0f 0b e9 ed fe ff ff e8 67 90 2b ff <0f> 0b e9 00 ff ff ff e8 5b 90 2b ff 0f 0b e9 07 ff ff ff e8 4f 90
[   57.911337] RSP: 0018:ffffc9000216bc88 EFLAGS: 00010246
[   57.911713] RAX: 0000000000000000 RBX: ffff888005ec9400 RCX: ffffffff81fe1957
[   57.912201] RDX: 0000000000000000 RSI: ffff88800e67d300 RDI: 0000000000000002
[   57.912701] RBP: ffffc9000216bca8 R08: 0000000000000000 R09: 0000000000000000
[   57.913192] R10: ffffc9000216bc58 R11: 0000000000000000 R12: ffffffffffffffff
[   57.913685] R13: 0000000001000000 R14: 00000000017fffff R15: 0000000000000000
[   57.914192] FS:  0000000000000000(0000) GS:ffff88807dd00000(0000) knlGS:0000000000000000
[   57.914757] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   57.915157] CR2: 00007f3777cf0500 CR3: 0000000003c12003 CR4: 0000000000770ee0
[   57.915663] PKRU: 55555554
[   57.915864] Call Trace:
[   57.916045]  <TASK>
[   57.916204]  iopt_unmap_iova_range+0x1ef/0x2e0
[   57.916532]  iopt_unmap_all+0x2f/0x60
[   57.916813]  iommufd_ioas_destroy+0x2c/0x70
[   57.917116]  iommufd_fops_release+0xd4/0x170
[   57.917427]  ? iommufd_ctx_get+0x30/0x30
[   57.917723]  __fput+0x11f/0x450
[   57.917973]  ____fput+0x1e/0x30
[   57.918206]  task_work_run+0xb6/0x120
[   57.918481]  do_exit+0x521/0x1340
[   57.918723]  ? lock_release+0x202/0x2c0
[   57.919008]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   57.919362]  ? trace_hardirqs_on+0x3f/0x100
[   57.919677]  do_group_exit+0x5e/0xf0
[   57.919941]  __x64_sys_exit_group+0x25/0x30
[   57.920242]  do_syscall_64+0x3b/0x90
[   57.920506]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   57.920909] RIP: 0033:0x7f3777be6cf6
[   57.921172] Code: Unable to access opcode bytes at 0x7f3777be6ccc.
[   57.921602] RSP: 002b:00007ffd0d7278d8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
[   57.922134] RAX: ffffffffffffffda RBX: 00007f3777cf1490 RCX: 00007f3777be6cf6
[   57.922632] RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
[   57.923242] RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffff80
[   57.923805] R10: 0000000000000004 R11: 0000000000000246 R12: 00007f3777cf1490
[   57.924404] R13: 0000000000000001 R14: 00007f3777cf4e88 R15: 0000000000000000
[   57.924952]  </TASK>
[   57.925118] irq event stamp: 0
[   57.925340] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   57.925796] hardirqs last disabled at (0): [<ffffffff810fff0c>] copy_process+0x11cc/0x2b10
[   57.926478] softirqs last  enabled at (0): [<ffffffff810fff10>] copy_process+0x11d0/0x2b10
[   57.927076] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   57.927638] ---[ end trace 0000000000000000 ]---
[   57.970840] ------------[ cut here ]------------
[   57.971186] WARNING: CPU: 1 PID: 1215 at drivers/iommu/iommufd/pages.c:294 __iopt_area_unfill_domain+0x152/0x560
[   57.971916] Modules linked in:
[   57.972139] CPU: 1 PID: 1215 Comm: repro Tainted: G    B   W          6.1.0-a0a6c76cf2a5+ #1
[   57.972741] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   57.973521] RIP: 0010:__iopt_area_unfill_domain+0x152/0x560
[   57.973925] Code: a1 2b ff 44 8b 64 24 54 48 8b 44 24 48 31 ff 44 89 e6 48 89 44 24 38 e8 6c a2 2b ff 45 85 e4 0f 85 eb 01 00 00 e8 ee a0 2b ff <0f> 0b e8 e7 a0 2b ff 48 8b 44 24 38 89 5c 24 58 89 18 8b 44 24 54
[   57.975211] RSP: 0018:ffffc900020c3ae0 EFLAGS: 00010246
[   57.975589] RAX: 0000000000000000 RBX: 00000000ffffffff RCX: ffffffff81fe0bd5
[   57.976083] RDX: 0000000000000000 RSI: ffff8880135dd300 RDI: 0000000000000002
[   57.976631] RBP: ffffc900020c3d10 R08: 000000000003b5c5 R09: 0000000000000001
[   57.977168] R10: 000000000003b5a0 R11: 0000000000000024 R12: 0000000000000002
[   57.977663] R13: 0000000000000801 R14: 00000000000007ff R15: 0000000000000800
[   57.978153] FS:  00007f3777af9740(0000) GS:ffff88807dd00000(0000) knlGS:0000000000000000
[   57.978723] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   57.979132] CR2: 00007f3777c1e580 CR3: 0000000017518005 CR4: 0000000000770ee0
[   57.979642] PKRU: 55555554
[   57.979842] Call Trace:
[   57.980025]  <TASK>
[   57.980202]  ? rcu_read_lock_sched_held+0x29/0x80
[   57.980556]  ? lock_acquire+0x1a1/0x2f0
[   57.980853]  ? rcu_read_lock_held_common+0x12/0x50
[   57.981210]  ? rcu_read_lock_sched_held+0x29/0x80
[   57.981565]  ? __mutex_lock+0x13a/0xf30
[   57.981852]  ? write_comp_data+0x2f/0x90
[   57.982144]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   57.982501]  iopt_area_unfill_domain+0x32/0x40
[   57.982829]  iopt_table_remove_domain+0x23f/0x4c0
[   57.983177]  iommufd_device_selftest_detach+0x3a/0x90
[   57.983575]  iommufd_selftest_destroy+0x55/0x70
[   57.983905]  iommufd_object_destroy_user+0xce/0x130
[   57.984259]  iommufd_destroy+0xa2/0xc0
[   57.984537]  iommufd_fops_ioctl+0x1ef/0x310
[   57.984856]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   57.985250]  ? write_comp_data+0x2f/0x90
[   57.985549]  __x64_sys_ioctl+0x10e/0x160
[   57.985849]  ? iommufd_get_object.part.6+0x1c0/0x1c0
[   57.986209]  do_syscall_64+0x3b/0x90
[   57.986478]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   57.986845] RIP: 0033:0x7f3777c1e59d
[   57.987106] Code: 00 c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d d3 08 0d 00 f7 d8 64 89 01 48
[   57.988362] RSP: 002b:00007ffd0d727918 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   57.988911] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f3777c1e59d
[   57.989415] RDX: 0000000020000140 RSI: 0000000000003b80 RDI: 0000000000000003
[   57.989910] RBP: 00007ffd0d727930 R08: 00007ffd0d727930 R09: 00007ffd0d727930
[   57.990409] R10: 00007ffd0d727930 R11: 0000000000000213 R12: 0000000000401180
[   57.990911] R13: 00007ffd0d727a50 R14: 0000000000000000 R15: 0000000000000000
[   57.991408]  </TASK>
[   57.991575] irq event stamp: 0
[   57.991797] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   57.992233] hardirqs last disabled at (0): [<ffffffff810fff0c>] copy_process+0x11cc/0x2b10
[   57.992818] softirqs last  enabled at (0): [<ffffffff810fff10>] copy_process+0x11d0/0x2b10
[   57.993401] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   57.993843] ---[ end trace 0000000000000000 ]---
[   57.994270] ------------[ cut here ]------------
[   57.994599] WARNING: CPU: 1 PID: 1215 at drivers/iommu/iommufd/pages.c:1290 __iopt_area_unfill_domain+0x54f/0x560
[   57.995319] Modules linked in:
[   57.995546] CPU: 1 PID: 1215 Comm: repro Tainted: G    B   W          6.1.0-a0a6c76cf2a5+ #1
[   57.996130] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   57.996929] RIP: 0010:__iopt_area_unfill_domain+0x54f/0x560
[   57.997340] Code: e8 86 9e 2b ff 85 db 0f 85 35 fb ff ff e8 09 9d 2b ff 0f 0b e9 29 fb ff ff e8 fd 9c 2b ff 0f 0b e9 69 fe ff ff e8 f1 9c 2b ff <0f> 0b e9 58 ff ff ff e8 65 2d dc 00 0f 1f 44 00 00 0f 1f 44 00 00
[   57.998611] RSP: 0018:ffffc900020c3ae0 EFLAGS: 00010246
[   57.998992] RAX: 0000000000000000 RBX: 00000000ffffffff RCX: ffffffff81fe0d26
[   57.999490] RDX: 0000000000000000 RSI: ffff8880135dd300 RDI: 0000000000000002
[   57.999983] RBP: ffffc900020c3d10 R08: 000000000003b5c5 R09: 0000000000000001
[   58.000471] R10: 000000000003b5a0 R11: 0000000000000024 R12: 00000000000007ff
[   58.000973] R13: 0000000000000801 R14: 00000000000007ff R15: 0000000000000800
[   58.001470] FS:  00007f3777af9740(0000) GS:ffff88807dd00000(0000) knlGS:0000000000000000
[   58.002022] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   58.002425] CR2: 00007f3777c1e580 CR3: 0000000017518005 CR4: 0000000000770ee0
[   58.002934] PKRU: 55555554
[   58.003129] Call Trace:
[   58.003309]  <TASK>
[   58.003474]  ? rcu_read_lock_sched_held+0x29/0x80
[   58.003815]  ? lock_acquire+0x1a1/0x2f0
[   58.004103]  ? rcu_read_lock_held_common+0x12/0x50
[   58.004448]  ? rcu_read_lock_sched_held+0x29/0x80
[   58.004799]  ? __mutex_lock+0x13a/0xf30
[   58.005086]  ? write_comp_data+0x2f/0x90
[   58.005379]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   58.005721]  iopt_area_unfill_domain+0x32/0x40
[   58.006050]  iopt_table_remove_domain+0x23f/0x4c0
[   58.006388]  iommufd_device_selftest_detach+0x3a/0x90
[   58.006772]  iommufd_selftest_destroy+0x55/0x70
[   58.007109]  iommufd_object_destroy_user+0xce/0x130
[   58.007466]  iommufd_destroy+0xa2/0xc0
[   58.007781]  iommufd_fops_ioctl+0x1ef/0x310
[   58.008103]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   58.008441]  ? write_comp_data+0x2f/0x90
[   58.008744]  __x64_sys_ioctl+0x10e/0x160
[   58.009044]  ? iommufd_get_object.part.6+0x1c0/0x1c0
[   58.009416]  do_syscall_64+0x3b/0x90
[   58.009693]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   58.010060] RIP: 0033:0x7f3777c1e59d
[   58.010327] Code: 00 c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d d3 08 0d 00 f7 d8 64 89 01 48
[   58.011624] RSP: 002b:00007ffd0d727918 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   58.012160] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f3777c1e59d
[   58.012669] RDX: 0000000020000140 RSI: 0000000000003b80 RDI: 0000000000000003
[   58.013161] RBP: 00007ffd0d727930 R08: 00007ffd0d727930 R09: 00007ffd0d727930
[   58.013659] R10: 00007ffd0d727930 R11: 0000000000000213 R12: 0000000000401180
[   58.014181] R13: 00007ffd0d727a50 R14: 0000000000000000 R15: 0000000000000000
[   58.014718]  </TASK>
[   58.014884] irq event stamp: 0
[   58.015108] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   58.015538] hardirqs last disabled at (0): [<ffffffff810fff0c>] copy_process+0x11cc/0x2b10
[   58.016124] softirqs last  enabled at (0): [<ffffffff810fff10>] copy_process+0x11d0/0x2b10
[   58.016733] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   58.017171] ---[ end trace 0000000000000000 ]---
[   58.019919] ------------[ cut here ]------------
[   58.020267] WARNING: CPU: 1 PID: 1215 at drivers/iommu/iommufd/pages.c:178 batch_unpin.isra.23+0x151/0x1a0
[   58.020990] Modules linked in:
[   58.021221] CPU: 1 PID: 1215 Comm: repro Tainted: G    B   W          6.1.0-a0a6c76cf2a5+ #1
[   58.021818] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   58.022614] RIP: 0010:batch_unpin.isra.23+0x151/0x1a0
[   58.022982] Code: e8 c4 be 2b ff 48 8b 45 d0 48 85 c0 75 17 e8 26 bd 2b ff 48 8b 7d c8 48 89 de e8 fa bd 2b ff 48 39 5d c8 73 07 e8 0f bd 2b ff <0f> 0b e8 08 bd 2b ff 4d 29 e5 31 ff 41 83 c6 01 4c 89 ee 31 db e8
[   58.024266] RSP: 0018:ffffc900020c39d8 EFLAGS: 00010246
[   58.024639] RAX: 0000000000000000 RBX: ffffffffffffffff RCX: ffffffff81fded8c
[   58.025176] RDX: 0000000000000000 RSI: ffff8880135dd300 RDI: 0000000000000002
[   58.025699] RBP: ffffc900020c3a20 R08: 0000000000000000 R09: ffff88807dd3b890
[   58.026234] R10: 0000000000001725 R11: 0000000000000000 R12: 0000000000000001
[   58.026743] R13: 0000000000000001 R14: 0000000000000000 R15: ffff888005ec9400
[   58.027238] FS:  0000000000000000(0000) GS:ffff88807dd00000(0000) knlGS:0000000000000000
[   58.027791] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   58.028210] CR2: 00007f3777cf0500 CR3: 0000000003c12006 CR4: 0000000000770ee0
[   58.028729] PKRU: 55555554
[   58.028931] Call Trace:
[   58.029112]  <TASK>
[   58.029278]  iopt_pages_unfill_xarray+0x39f/0x5c0
[   58.029627]  ? rcu_read_lock_sched_held+0x29/0x80
[   58.029991]  ? rcu_read_lock_held_common+0x12/0x50
[   58.030340]  ? write_comp_data+0x2f/0x90
[   58.030642]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   58.030988]  ? write_comp_data+0x2f/0x90
[   58.031277]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   58.031632]  ? interval_tree_remove+0x291/0x4e0
[   58.031976]  ? write_comp_data+0x2f/0x90
[   58.032263]  iopt_area_remove_access+0x108/0x120
[   58.032600]  iommufd_access_unpin_pages+0x177/0x210
[   58.032982]  iommufd_test_access_unmap+0xe0/0x130
[   58.033327]  ? iommufd_test_access_unmap+0x130/0x130
[   58.033694]  iommufd_test_staccess_release+0x39/0x60
[   58.034052]  __fput+0x11f/0x450
[   58.034295]  ____fput+0x1e/0x30
[   58.034540]  task_work_run+0xb6/0x120
[   58.034826]  do_exit+0x521/0x1340
[   58.035080]  ? lock_release+0x202/0x2c0
[   58.035369]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   58.035717]  ? trace_hardirqs_on+0x3f/0x100
[   58.036034]  do_group_exit+0x5e/0xf0
[   58.036294]  __x64_sys_exit_group+0x25/0x30
[   58.036599]  do_syscall_64+0x3b/0x90
[   58.036877]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   58.037247] RIP: 0033:0x7f3777be6cf6
[   58.037508] Code: Unable to access opcode bytes at 0x7f3777be6ccc.
[   58.037942] RSP: 002b:00007ffd0d7278d8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
[   58.038477] RAX: ffffffffffffffda RBX: 00007f3777cf1490 RCX: 00007f3777be6cf6
[   58.039011] RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
[   58.039504] RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffff80
[   58.040005] R10: 0000000000000004 R11: 0000000000000246 R12: 00007f3777cf1490
[   58.040509] R13: 0000000000000001 R14: 00007f3777cf4e88 R15: 0000000000000000
[   58.041032]  </TASK>
[   58.041197] irq event stamp: 0
[   58.041419] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   58.041865] hardirqs last disabled at (0): [<ffffffff810fff0c>] copy_process+0x11cc/0x2b10
[   58.042450] softirqs last  enabled at (0): [<ffffffff810fff10>] copy_process+0x11d0/0x2b10
[   58.043038] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   58.043476] ---[ end trace 0000000000000000 ]---
[   58.043899] ------------[ cut here ]------------
[   58.044242] WARNING: CPU: 1 PID: 1215 at drivers/iommu/iommufd/pages.c:886 update_unpinned+0x75/0x80
[   58.044896] Modules linked in:
[   58.045126] CPU: 1 PID: 1215 Comm: repro Tainted: G    B   W          6.1.0-a0a6c76cf2a5+ #1
[   58.045734] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   58.046530] RIP: 0010:update_unpinned+0x75/0x80
[   58.046872] Code: ac 2b ff 48 89 de 31 c9 31 d2 4c 29 e6 4c 89 ef e8 70 fb ff ff e8 bb ac 2b ff 5b 41 5c 41 5d 5d c3 cc cc cc cc e8 ab ac 2b ff <0f> 0b eb e7 0f 1f 80 00 00 00 00 0f 1f 44 00 00 55 48 89 e5 41 57
[   58.048138] RSP: 0018:ffffc900020c3a08 EFLAGS: 00010246
[   58.048507] RAX: 0000000000000000 RBX: 0000000000000000 RCX: ffffffff81fdfdcf
[   58.049009] RDX: 0000000000000000 RSI: ffff8880135dd300 RDI: 0000000000000002
[   58.049501] RBP: ffffc900020c3a20 R08: 0000000000000000 R09: ffff88807dd3b890
[   58.050004] R10: 0000000000001725 R11: 0000000000000000 R12: ffffffffffffffff
[   58.050517] R13: ffff888005ec9400 R14: 0000000000000002 R15: 0000000000000002
[   58.051010] FS:  0000000000000000(0000) GS:ffff88807dd00000(0000) knlGS:0000000000000000
[   58.051568] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   58.051982] CR2: 00007f3777cf0500 CR3: 0000000003c12006 CR4: 0000000000770ee0
[   58.052479] PKRU: 55555554
[   58.052688] Call Trace:
[   58.052873]  <TASK>
[   58.053034]  iopt_pages_unfill_xarray+0x522/0x5c0
[   58.053371]  ? rcu_read_lock_sched_held+0x29/0x80
[   58.053725]  ? rcu_read_lock_held_common+0x12/0x50
[   58.054075]  ? write_comp_data+0x2f/0x90
[   58.054361]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   58.054709]  ? write_comp_data+0x2f/0x90
[   58.054997]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   58.055344]  ? interval_tree_remove+0x291/0x4e0
[   58.055683]  ? write_comp_data+0x2f/0x90
[   58.055979]  iopt_area_remove_access+0x108/0x120
[   58.056323]  iommufd_access_unpin_pages+0x177/0x210
[   58.056714]  iommufd_test_access_unmap+0xe0/0x130
[   58.057073]  ? iommufd_test_access_unmap+0x130/0x130
[   58.057436]  iommufd_test_staccess_release+0x39/0x60
[   58.057804]  __fput+0x11f/0x450
[   58.058071]  ____fput+0x1e/0x30
[   58.058313]  task_work_run+0xb6/0x120
[   58.058611]  do_exit+0x521/0x1340
[   58.058874]  ? lock_release+0x202/0x2c0
[   58.059167]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   58.059519]  ? trace_hardirqs_on+0x3f/0x100
[   58.059837]  do_group_exit+0x5e/0xf0
[   58.060104]  __x64_sys_exit_group+0x25/0x30
[   58.060412]  do_syscall_64+0x3b/0x90
[   58.060698]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   58.061061] RIP: 0033:0x7f3777be6cf6
[   58.061319] Code: Unable to access opcode bytes at 0x7f3777be6ccc.
[   58.061751] RSP: 002b:00007ffd0d7278d8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
[   58.062303] RAX: ffffffffffffffda RBX: 00007f3777cf1490 RCX: 00007f3777be6cf6
[   58.062802] RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
[   58.063309] RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffff80
[   58.063815] R10: 0000000000000004 R11: 0000000000000246 R12: 00007f3777cf1490
[   58.064306] R13: 0000000000000001 R14: 00007f3777cf4e88 R15: 0000000000000000
[   58.064834]  </TASK>
[   58.065002] irq event stamp: 0
[   58.065223] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   58.065667] hardirqs last disabled at (0): [<ffffffff810fff0c>] copy_process+0x11cc/0x2b10
[   58.066250] softirqs last  enabled at (0): [<ffffffff810fff10>] copy_process+0x11d0/0x2b10
[   58.066829] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   58.067266] ---[ end trace 0000000000000000 ]---
[   58.067739] ------------[ cut here ]------------
[   58.068098] WARNING: CPU: 1 PID: 1215 at drivers/iommu/iommufd/pages.c:1181 iopt_release_pages+0x159/0x190
[   58.068824] Modules linked in:
[   58.069064] CPU: 1 PID: 1215 Comm: repro Tainted: G    B   W          6.1.0-a0a6c76cf2a5+ #1
[   58.069691] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   58.070529] RIP: 0010:iopt_release_pages+0x159/0x190
[   58.070890] Code: b5 11 ff eb cb e8 87 90 2b ff be 03 00 00 00 4c 89 f7 e8 6a 8b ce ff eb b7 e8 73 90 2b ff 0f 0b e9 ed fe ff ff e8 67 90 2b ff <0f> 0b e9 00 ff ff ff e8 5b 90 2b ff 0f 0b e9 07 ff ff ff e8 4f 90
[   58.072178] RSP: 0018:ffffc900020c3c88 EFLAGS: 00010246
[   58.072548] RAX: 0000000000000000 RBX: ffff888005ec9400 RCX: ffffffff81fe1957
[   58.073054] RDX: 0000000000000000 RSI: ffff8880135dd300 RDI: 0000000000000002
[   58.073549] RBP: ffffc900020c3ca8 R08: 0000000000000000 R09: 0000000000000000
[   58.074040] R10: ffffc900020c3c58 R11: 0000000000000000 R12: ffffffffffffffff
[   58.074538] R13: 0000000001000000 R14: 00000000017fffff R15: 0000000000000000
[   58.075027] FS:  0000000000000000(0000) GS:ffff88807dd00000(0000) knlGS:0000000000000000
[   58.075603] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   58.076006] CR2: 00007f3777cf0500 CR3: 0000000003c12006 CR4: 0000000000770ee0
[   58.076502] PKRU: 55555554
[   58.076719] Call Trace:
[   58.076899]  <TASK>
[   58.077059]  iopt_unmap_iova_range+0x1ef/0x2e0
[   58.077385]  iopt_unmap_all+0x2f/0x60
[   58.077652]  iommufd_ioas_destroy+0x2c/0x70
[   58.077953]  iommufd_fops_release+0xd4/0x170
[   58.078270]  ? iommufd_ctx_get+0x30/0x30
[   58.078565]  __fput+0x11f/0x450
[   58.078810]  ____fput+0x1e/0x30
[   58.079054]  task_work_run+0xb6/0x120
[   58.079344]  do_exit+0x521/0x1340
[   58.079600]  ? lock_release+0x202/0x2c0
[   58.079902]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   58.080272]  ? trace_hardirqs_on+0x3f/0x100
[   58.080605]  do_group_exit+0x5e/0xf0
[   58.080898]  __x64_sys_exit_group+0x25/0x30
[   58.081224]  do_syscall_64+0x3b/0x90
[   58.081506]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   58.081893] RIP: 0033:0x7f3777be6cf6
[   58.082168] Code: Unable to access opcode bytes at 0x7f3777be6ccc.
[   58.082625] RSP: 002b:00007ffd0d7278d8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
[   58.083164] RAX: ffffffffffffffda RBX: 00007f3777cf1490 RCX: 00007f3777be6cf6
[   58.083689] RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
[   58.084237] RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffff80
[   58.084784] R10: 0000000000000004 R11: 0000000000000246 R12: 00007f3777cf1490
[   58.085313] R13: 0000000000000001 R14: 00007f3777cf4e88 R15: 0000000000000000
[   58.085849]  </TASK>
[   58.086024] irq event stamp: 0
[   58.086257] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   58.086723] hardirqs last disabled at (0): [<ffffffff810fff0c>] copy_process+0x11cc/0x2b10
[   58.087319] softirqs last  enabled at (0): [<ffffffff810fff10>] copy_process+0x11d0/0x2b10
[   58.087934] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   58.088427] ---[ end trace 0000000000000000 ]---
[   58.188149] ------------[ cut here ]------------
[   58.188505] WARNING: CPU: 1 PID: 1220 at drivers/iommu/iommufd/pages.c:294 __iopt_area_unfill_domain+0x152/0x560
[   58.189235] Modules linked in:
[   58.189460] CPU: 1 PID: 1220 Comm: repro Tainted: G    B   W          6.1.0-a0a6c76cf2a5+ #1
[   58.190147] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   58.191093] RIP: 0010:__iopt_area_unfill_domain+0x152/0x560
[   58.191508] Code: a1 2b ff 44 8b 64 24 54 48 8b 44 24 48 31 ff 44 89 e6 48 89 44 24 38 e8 6c a2 2b ff 45 85 e4 0f 85 eb 01 00 00 e8 ee a0 2b ff <0f> 0b e8 e7 a0 2b ff 48 8b 44 24 38 89 5c 24 58 89 18 8b 44 24 54
[   58.192904] RSP: 0018:ffffc9000219bae0 EFLAGS: 00010246
[   58.193316] RAX: 0000000000000000 RBX: 00000000ffffffff RCX: ffffffff81fe0bd5
[   58.193851] RDX: 0000000000000000 RSI: ffff88800e67d300 RDI: 0000000000000002
[   58.194366] RBP: ffffc9000219bd10 R08: 000000000003b5c5 R09: 0000000000000003
[   58.194952] R10: 000000000003b5a0 R11: 0000000000000024 R12: 0000000000000001
[   58.195461] R13: 0000000000000801 R14: 00000000000007ff R15: 0000000000000800
[   58.195999] FS:  00007f3777af9740(0000) GS:ffff88807dd00000(0000) knlGS:0000000000000000
[   58.196636] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   58.197051] CR2: 00007f3777c1e580 CR3: 000000001752e005 CR4: 0000000000770ee0
[   58.197667] PKRU: 55555554
[   58.197873] Call Trace:
[   58.198056]  <TASK>
[   58.198226]  ? rcu_read_lock_sched_held+0x29/0x80
[   58.198581]  ? lock_acquire+0x1a1/0x2f0
[   58.198863]  ? rcu_read_lock_held_common+0x12/0x50
[   58.199225]  ? rcu_read_lock_sched_held+0x29/0x80
[   58.199689]  ? __mutex_lock+0x13a/0xf30
[   58.199976]  ? write_comp_data+0x2f/0x90
[   58.200264]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   58.200605]  iopt_area_unfill_domain+0x32/0x40
[   58.200937]  iopt_table_remove_domain+0x23f/0x4c0
[   58.201279]  iommufd_device_selftest_detach+0x3a/0x90
[   58.201651]  iommufd_selftest_destroy+0x55/0x70
[   58.202113]  iommufd_object_destroy_user+0xce/0x130
[   58.202463]  iommufd_destroy+0xa2/0xc0
[   58.202749]  iommufd_fops_ioctl+0x1ef/0x310
[   58.203058]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   58.203401]  ? write_comp_data+0x2f/0x90
[   58.203695]  __x64_sys_ioctl+0x10e/0x160
[   58.203990]  ? iommufd_get_object.part.6+0x1c0/0x1c0
[   58.204463]  do_syscall_64+0x3b/0x90
[   58.204741]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   58.205105] RIP: 0033:0x7f3777c1e59d
[   58.205366] Code: 00 c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d d3 08 0d 00 f7 d8 64 89 01 48
[   58.206740] RSP: 002b:00007ffd0d727918 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   58.207281] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f3777c1e59d
[   58.207779] RDX: 0000000020000140 RSI: 0000000000003b80 RDI: 0000000000000003
[   58.208327] RBP: 00007ffd0d727930 R08: 00007ffd0d727930 R09: 00007ffd0d727930
[   58.208934] R10: 00007ffd0d727930 R11: 0000000000000213 R12: 0000000000401180
[   58.209455] R13: 00007ffd0d727a50 R14: 0000000000000000 R15: 0000000000000000
[   58.209966]  </TASK>
[   58.210155] irq event stamp: 0
[   58.210626] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   58.211351] hardirqs last disabled at (0): [<ffffffff810fff0c>] copy_process+0x11cc/0x2b10
[   58.212457] softirqs last  enabled at (0): [<ffffffff810fff10>] copy_process+0x11d0/0x2b10
[   58.213553] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   58.214242] ---[ end trace 0000000000000000 ]---
[   58.214905] ------------[ cut here ]------------
[   58.215477] WARNING: CPU: 1 PID: 1220 at drivers/iommu/iommufd/pages.c:1290 __iopt_area_unfill_domain+0x54f/0x560
[   58.216629] Modules linked in:
[   58.217094] CPU: 1 PID: 1220 Comm: repro Tainted: G    B   W          6.1.0-a0a6c76cf2a5+ #1
[   58.218005] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   58.219322] RIP: 0010:__iopt_area_unfill_domain+0x54f/0x560
[   58.219988] Code: e8 86 9e 2b ff 85 db 0f 85 35 fb ff ff e8 09 9d 2b ff 0f 0b e9 29 fb ff ff e8 fd 9c 2b ff 0f 0b e9 69 fe ff ff e8 f1 9c 2b ff <0f> 0b e9 58 ff ff ff e8 65 2d dc 00 0f 1f 44 00 00 0f 1f 44 00 00
[   58.222228] RSP: 0018:ffffc9000219bae0 EFLAGS: 00010246
[   58.222841] RAX: 0000000000000000 RBX: 00000000ffffffff RCX: ffffffff81fe0d26
[   58.223766] RDX: 0000000000000000 RSI: ffff88800e67d300 RDI: 0000000000000002
[   58.224564] RBP: ffffc9000219bd10 R08: 000000000003b5c5 R09: 0000000000000003
[   58.225523] R10: 000000000003b5a0 R11: 0000000000000024 R12: 00000000000007ff
[   58.226314] R13: 0000000000000801 R14: 00000000000007ff R15: 0000000000000800
[   58.227216] FS:  00007f3777af9740(0000) GS:ffff88807dd00000(0000) knlGS:0000000000000000
[   58.228092] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   58.228889] CR2: 00007f3777c1e580 CR3: 000000001752e005 CR4: 0000000000770ee0
[   58.229664] PKRU: 55555554
[   58.229969] Call Trace:
[   58.230331]  <TASK>
[   58.230611]  ? rcu_read_lock_sched_held+0x29/0x80
[   58.231150]  ? lock_acquire+0x1a1/0x2f0
[   58.231712]  ? rcu_read_lock_held_common+0x12/0x50
[   58.232271]  ? rcu_read_lock_sched_held+0x29/0x80
[   58.232886]  ? __mutex_lock+0x13a/0xf30
[   58.233399]  ? write_comp_data+0x2f/0x90
[   58.233860]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   58.234411]  iopt_area_unfill_domain+0x32/0x40
[   58.234928]  iopt_table_remove_domain+0x23f/0x4c0
[   58.235589]  iommufd_device_selftest_detach+0x3a/0x90
[   58.236183]  iommufd_selftest_destroy+0x55/0x70
[   58.236857]  iommufd_object_destroy_user+0xce/0x130
[   58.237426]  iommufd_destroy+0xa2/0xc0
[   58.237873]  iommufd_fops_ioctl+0x1ef/0x310
[   58.238497]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   58.239061]  ? write_comp_data+0x2f/0x90
[   58.239642]  __x64_sys_ioctl+0x10e/0x160
[   58.240117]  ? iommufd_get_object.part.6+0x1c0/0x1c0
[   58.240863]  do_syscall_64+0x3b/0x90
[   58.241297]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   58.241877] RIP: 0033:0x7f3777c1e59d
[   58.242325] Code: 00 c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d d3 08 0d 00 f7 d8 64 89 01 48
[   58.244561] RSP: 002b:00007ffd0d727918 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   58.245498] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f3777c1e59d
[   58.246373] RDX: 0000000020000140 RSI: 0000000000003b80 RDI: 0000000000000003
[   58.247264] RBP: 00007ffd0d727930 R08: 00007ffd0d727930 R09: 00007ffd0d727930
[   58.248113] R10: 00007ffd0d727930 R11: 0000000000000213 R12: 0000000000401180
[   58.248975] R13: 00007ffd0d727a50 R14: 0000000000000000 R15: 0000000000000000
[   58.249902]  </TASK>
[   58.250180] irq event stamp: 0
[   58.250550] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   58.251210] hardirqs last disabled at (0): [<ffffffff810fff0c>] copy_process+0x11cc/0x2b10
[   58.252109] softirqs last  enabled at (0): [<ffffffff810fff10>] copy_process+0x11d0/0x2b10
[   58.253041] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   58.253724] ---[ end trace 0000000000000000 ]---
[   58.258539] ------------[ cut here ]------------
[   58.259062] WARNING: CPU: 1 PID: 1220 at drivers/iommu/iommufd/pages.c:178 batch_unpin.isra.23+0x151/0x1a0
[   58.260140] Modules linked in:
[   58.260498] CPU: 1 PID: 1220 Comm: repro Tainted: G    B   W          6.1.0-a0a6c76cf2a5+ #1
[   58.261508] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   58.262756] RIP: 0010:batch_unpin.isra.23+0x151/0x1a0
[   58.263328] Code: e8 c4 be 2b ff 48 8b 45 d0 48 85 c0 75 17 e8 26 bd 2b ff 48 8b 7d c8 48 89 de e8 fa bd 2b ff 48 39 5d c8 73 07 e8 0f bd 2b ff <0f> 0b e8 08 bd 2b ff 4d 29 e5 31 ff 41 83 c6 01 4c 89 ee 31 db e8
[   58.265319] RSP: 0018:ffffc9000219b9d8 EFLAGS: 00010246
[   58.265891] RAX: 0000000000000000 RBX: ffffffffffffffff RCX: ffffffff81fded8c
[   58.266674] RDX: 0000000000000000 RSI: ffff88800e67d300 RDI: 0000000000000002
[   58.267466] RBP: ffffc9000219ba20 R08: 0000000000000000 R09: ffff88807dd3b890
[   58.268251] R10: 0000000000001760 R11: 0000000000000000 R12: 0000000000000001
[   58.269058] R13: 0000000000000001 R14: 0000000000000000 R15: ffff888005ec9c00
[   58.269863] FS:  0000000000000000(0000) GS:ffff88807dd00000(0000) knlGS:0000000000000000
[   58.270768] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   58.271407] CR2: 00007f3777cf0500 CR3: 0000000003c12006 CR4: 0000000000770ee0
[   58.272192] PKRU: 55555554
[   58.272515] Call Trace:
[   58.272821]  <TASK>
[   58.273075]  iopt_pages_unfill_xarray+0x39f/0x5c0
[   58.273609]  ? rcu_read_lock_sched_held+0x29/0x80
[   58.274200]  ? rcu_read_lock_held_common+0x12/0x50
[   58.274759]  ? write_comp_data+0x2f/0x90
[   58.275208]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   58.275762]  ? write_comp_data+0x2f/0x90
[   58.276232]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   58.276784]  ? interval_tree_remove+0x291/0x4e0
[   58.277325]  ? write_comp_data+0x2f/0x90
[   58.277806]  iopt_area_remove_access+0x108/0x120
[   58.278350]  iommufd_access_unpin_pages+0x177/0x210
[   58.278942]  iommufd_test_access_unmap+0xe0/0x130
[   58.279515]  ? iommufd_test_access_unmap+0x130/0x130
[   58.280082]  iommufd_test_staccess_release+0x39/0x60
[   58.280684]  __fput+0x11f/0x450
[   58.281083]  ____fput+0x1e/0x30
[   58.281481]  task_work_run+0xb6/0x120
[   58.281941]  do_exit+0x521/0x1340
[   58.282345]  ? lock_release+0x202/0x2c0
[   58.282794]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   58.283335]  ? trace_hardirqs_on+0x3f/0x100
[   58.283829]  do_group_exit+0x5e/0xf0
[   58.284269]  __x64_sys_exit_group+0x25/0x30
[   58.284790]  do_syscall_64+0x3b/0x90
[   58.285228]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   58.285825] RIP: 0033:0x7f3777be6cf6
[   58.286257] Code: Unable to access opcode bytes at 0x7f3777be6ccc.
[   58.286944] RSP: 002b:00007ffd0d7278d8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
[   58.287801] RAX: ffffffffffffffda RBX: 00007f3777cf1490 RCX: 00007f3777be6cf6
[   58.288605] RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
[   58.289403] RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffff80
[   58.290202] R10: 0000000000000004 R11: 0000000000000246 R12: 00007f3777cf1490
[   58.290986] R13: 0000000000000001 R14: 00007f3777cf4e88 R15: 0000000000000000
[   58.291808]  </TASK>
[   58.292076] irq event stamp: 0
[   58.292432] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   58.293145] hardirqs last disabled at (0): [<ffffffff810fff0c>] copy_process+0x11cc/0x2b10
[   58.294056] softirqs last  enabled at (0): [<ffffffff810fff10>] copy_process+0x11d0/0x2b10
[   58.294971] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   58.295669] ---[ end trace 0000000000000000 ]---
[   58.296360] ------------[ cut here ]------------
[   58.296889] WARNING: CPU: 1 PID: 1220 at drivers/iommu/iommufd/pages.c:886 update_unpinned+0x75/0x80
[   58.297904] Modules linked in:
[   58.298276] CPU: 1 PID: 1220 Comm: repro Tainted: G    B   W          6.1.0-a0a6c76cf2a5+ #1
[   58.299212] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   58.300484] RIP: 0010:update_unpinned+0x75/0x80
[   58.301050] Code: ac 2b ff 48 89 de 31 c9 31 d2 4c 29 e6 4c 89 ef e8 70 fb ff ff e8 bb ac 2b ff 5b 41 5c 41 5d 5d c3 cc cc cc cc e8 ab ac 2b ff <0f> 0b eb e7 0f 1f 80 00 00 00 00 0f 1f 44 00 00 55 48 89 e5 41 57
[   58.303089] RSP: 0018:ffffc9000219ba08 EFLAGS: 00010246
[   58.303682] RAX: 0000000000000000 RBX: 0000000000000000 RCX: ffffffff81fdfdcf
[   58.304501] RDX: 0000000000000000 RSI: ffff88800e67d300 RDI: 0000000000000002
[   58.305343] RBP: ffffc9000219ba20 R08: 0000000000000000 R09: ffff88807dd3b890
[   58.306140] R10: 0000000000001760 R11: 0000000000000000 R12: ffffffffffffffff
[   58.306939] R13: ffff888005ec9c00 R14: 0000000000000002 R15: 0000000000000002
[   58.307749] FS:  0000000000000000(0000) GS:ffff88807dd00000(0000) knlGS:0000000000000000
[   58.308644] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   58.309298] CR2: 00007f3777cf0500 CR3: 0000000003c12006 CR4: 0000000000770ee0
[   58.310082] PKRU: 55555554
[   58.310403] Call Trace:
[   58.310686]  <TASK>
[   58.310943]  iopt_pages_unfill_xarray+0x522/0x5c0
[   58.311474]  ? rcu_read_lock_sched_held+0x29/0x80
[   58.312044]  ? rcu_read_lock_held_common+0x12/0x50
[   58.312614]  ? write_comp_data+0x2f/0x90
[   58.313119]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   58.313682]  ? write_comp_data+0x2f/0x90
[   58.314159]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   58.314717]  ? interval_tree_remove+0x291/0x4e0
[   58.315244]  ? write_comp_data+0x2f/0x90
[   58.315704]  iopt_area_remove_access+0x108/0x120
[   58.316261]  iommufd_access_unpin_pages+0x177/0x210
[   58.316885]  iommufd_test_access_unmap+0xe0/0x130
[   58.317460]  ? iommufd_test_access_unmap+0x130/0x130
[   58.318034]  iommufd_test_staccess_release+0x39/0x60
[   58.318626]  __fput+0x11f/0x450
[   58.319024]  ____fput+0x1e/0x30
[   58.319418]  task_work_run+0xb6/0x120
[   58.319875]  do_exit+0x521/0x1340
[   58.320281]  ? lock_release+0x202/0x2c0
[   58.320770]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   58.321337]  ? trace_hardirqs_on+0x3f/0x100
[   58.321844]  do_group_exit+0x5e/0xf0
[   58.322265]  __x64_sys_exit_group+0x25/0x30
[   58.322759]  do_syscall_64+0x3b/0x90
[   58.323191]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   58.323784] RIP: 0033:0x7f3777be6cf6
[   58.324212] Code: Unable to access opcode bytes at 0x7f3777be6ccc.
[   58.324902] RSP: 002b:00007ffd0d7278d8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
[   58.325751] RAX: ffffffffffffffda RBX: 00007f3777cf1490 RCX: 00007f3777be6cf6
[   58.326559] RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
[   58.327328] RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffff80
[   58.328131] R10: 0000000000000004 R11: 0000000000000246 R12: 00007f3777cf1490
[   58.328964] R13: 0000000000000001 R14: 00007f3777cf4e88 R15: 0000000000000000
[   58.329812]  </TASK>
[   58.330089] irq event stamp: 0
[   58.330460] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   58.331160] hardirqs last disabled at (0): [<ffffffff810fff0c>] copy_process+0x11cc/0x2b10
[   58.332124] softirqs last  enabled at (0): [<ffffffff810fff10>] copy_process+0x11d0/0x2b10
[   58.333117] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   58.333858] ---[ end trace 0000000000000000 ]---
[   58.334646] ------------[ cut here ]------------
[   58.335219] WARNING: CPU: 0 PID: 1220 at drivers/iommu/iommufd/pages.c:1181 iopt_release_pages+0x159/0x190
[   58.336359] Modules linked in:
[   58.336874] CPU: 0 PID: 1220 Comm: repro Tainted: G    B   W          6.1.0-a0a6c76cf2a5+ #1
[   58.337869] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   58.339182] RIP: 0010:iopt_release_pages+0x159/0x190
[   58.339790] Code: b5 11 ff eb cb e8 87 90 2b ff be 03 00 00 00 4c 89 f7 e8 6a 8b ce ff eb b7 e8 73 90 2b ff 0f 0b e9 ed fe ff ff e8 67 90 2b ff <0f> 0b e9 00 ff ff ff e8 5b 90 2b ff 0f 0b e9 07 ff ff ff e8 4f 90
[   58.341938] RSP: 0018:ffffc9000219bc88 EFLAGS: 00010246
[   58.342581] RAX: 0000000000000000 RBX: ffff888005ec9c00 RCX: ffffffff81fe1957
[   58.343392] RDX: 0000000000000000 RSI: ffff88800e67d300 RDI: 0000000000000002
[   58.344237] RBP: ffffc9000219bca8 R08: ffff888006824780 R09: 0000000080150011
[   58.345107] R10: 0000000000000001 R11: 0000000000000000 R12: ffffffffffffffff
[   58.345953] R13: 0000000001000000 R14: 00000000017fffff R15: 0000000000000000
[   58.346813] FS:  0000000000000000(0000) GS:ffff88807dc00000(0000) knlGS:0000000000000000
[   58.347744] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   58.348443] CR2: 00007fd6e4916000 CR3: 0000000013558002 CR4: 0000000000770ef0
[   58.349302] PKRU: 55555554
[   58.349634] Call Trace:
[   58.349934]  <TASK>
[   58.350203]  iopt_unmap_iova_range+0x1ef/0x2e0
[   58.350770]  iopt_unmap_all+0x2f/0x60
[   58.351239]  iommufd_ioas_destroy+0x2c/0x70
[   58.351825]  iommufd_fops_release+0xd4/0x170
[   58.352472]  ? iommufd_ctx_get+0x30/0x30
[   58.352988]  __fput+0x11f/0x450
[   58.353394]  ____fput+0x1e/0x30
[   58.353798]  task_work_run+0xb6/0x120
[   58.354266]  do_exit+0x521/0x1340
[   58.354687]  ? lock_release+0x202/0x2c0
[   58.355188]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   58.355829]  ? trace_hardirqs_on+0x3f/0x100
[   58.356363]  do_group_exit+0x5e/0xf0
[   58.356818]  __x64_sys_exit_group+0x25/0x30
[   58.357361]  do_syscall_64+0x3b/0x90
[   58.357813]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   58.358425] RIP: 0033:0x7f3777be6cf6
[   58.358860] Code: Unable to access opcode bytes at 0x7f3777be6ccc.
[   58.359569] RSP: 002b:00007ffd0d7278d8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
[   58.360451] RAX: ffffffffffffffda RBX: 00007f3777cf1490 RCX: 00007f3777be6cf6
[   58.361300] RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
[   58.362137] RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffff80
[   58.362975] R10: 0000000000000004 R11: 0000000000000246 R12: 00007f3777cf1490
[   58.363806] R13: 0000000000000001 R14: 00007f3777cf4e88 R15: 0000000000000000
[   58.364684]  </TASK>
[   58.364974] irq event stamp: 0
[   58.365363] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   58.366109] hardirqs last disabled at (0): [<ffffffff810fff0c>] copy_process+0x11cc/0x2b10
[   58.367070] softirqs last  enabled at (0): [<ffffffff810fff10>] copy_process+0x11d0/0x2b10
[   58.368061] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   58.368828] ---[ end trace 0000000000000000 ]---
[   58.709445] ------------[ cut here ]------------
[   58.709817] WARNING: CPU: 0 PID: 1232 at drivers/iommu/iommufd/pages.c:294 __iopt_area_unfill_domain+0x152/0x560
[   58.710603] Modules linked in:
[   58.710836] CPU: 0 PID: 1232 Comm: repro Tainted: G    B   W          6.1.0-a0a6c76cf2a5+ #1
[   58.711467] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   58.712311] RIP: 0010:__iopt_area_unfill_domain+0x152/0x560
[   58.712779] Code: a1 2b ff 44 8b 64 24 54 48 8b 44 24 48 31 ff 44 89 e6 48 89 44 24 38 e8 6c a2 2b ff 45 85 e4 0f 85 eb 01 00 00 e8 ee a0 2b ff <0f> 0b e8 e7 a0 2b ff 48 8b 44 24 38 89 5c 24 58 89 18 8b 44 24 54
[   58.714374] RSP: 0018:ffffc900021dbae0 EFLAGS: 00010246
[   58.714780] RAX: 0000000000000000 RBX: 00000000ffffffff RCX: ffffffff81fe0bd5
[   58.715297] RDX: 0000000000000000 RSI: ffff8880135da980 RDI: 0000000000000002
[   58.715838] RBP: ffffc900021dbd10 R08: 000000000003b5c5 R09: 0000000000000006
[   58.716371] R10: 000000000003b5a0 R11: 0000000000000024 R12: 0000000000000001
[   58.716965] R13: 0000000000000801 R14: 00000000000007ff R15: 0000000000000800
[   58.717674] FS:  00007f3777af9740(0000) GS:ffff88807dc00000(0000) knlGS:0000000000000000
[   58.718288] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   58.718723] CR2: 00007f3777c1e580 CR3: 0000000017510004 CR4: 0000000000770ef0
[   58.719251] PKRU: 55555554
[   58.719464] Call Trace:
[   58.719658]  <TASK>
[   58.719824]  ? rcu_read_lock_sched_held+0x29/0x80
[   58.720189]  ? lock_acquire+0x1a1/0x2f0
[   58.720482]  ? rcu_read_lock_held_common+0x12/0x50
[   58.720855]  ? rcu_read_lock_sched_held+0x29/0x80
[   58.721410]  ? __mutex_lock+0x13a/0xf30
[   58.721863]  ? write_comp_data+0x2f/0x90
[   58.722163]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   58.722519]  iopt_area_unfill_domain+0x32/0x40
[   58.722853]  iopt_table_remove_domain+0x23f/0x4c0
[   58.723220]  iommufd_device_selftest_detach+0x3a/0x90
[   58.723602]  iommufd_selftest_destroy+0x55/0x70
[   58.723957]  iommufd_object_destroy_user+0xce/0x130
[   58.724320]  iommufd_destroy+0xa2/0xc0
[   58.724606]  iommufd_fops_ioctl+0x1ef/0x310
[   58.724947]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   58.725499]  ? write_comp_data+0x2f/0x90
[   58.725939]  __x64_sys_ioctl+0x10e/0x160
[   58.726242]  ? iommufd_get_object.part.6+0x1c0/0x1c0
[   58.726618]  do_syscall_64+0x3b/0x90
[   58.726891]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   58.727277] RIP: 0033:0x7f3777c1e59d
[   58.727547] Code: 00 c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d d3 08 0d 00 f7 d8 64 89 01 48
[   58.728858] RSP: 002b:00007ffd0d727918 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   58.729631] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f3777c1e59d
[   58.730144] RDX: 0000000020000140 RSI: 0000000000003b80 RDI: 0000000000000003
[   58.730664] RBP: 00007ffd0d727930 R08: 00007ffd0d727930 R09: 00007ffd0d727930
[   58.731159] R10: 00007ffd0d727930 R11: 0000000000000213 R12: 0000000000401180
[   58.731681] R13: 00007ffd0d727a50 R14: 0000000000000000 R15: 0000000000000000
[   58.732191]  </TASK>
[   58.732358] irq event stamp: 0
[   58.732583] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   58.733056] hardirqs last disabled at (0): [<ffffffff810fff0c>] copy_process+0x11cc/0x2b10
[   58.733929] softirqs last  enabled at (0): [<ffffffff810fff10>] copy_process+0x11d0/0x2b10
[   58.734532] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   58.734984] ---[ end trace 0000000000000000 ]---
[   58.735397] ------------[ cut here ]------------
[   58.735721] WARNING: CPU: 0 PID: 1232 at drivers/iommu/iommufd/pages.c:1290 __iopt_area_unfill_domain+0x54f/0x560
[   58.736453] Modules linked in:
[   58.736699] CPU: 0 PID: 1232 Comm: repro Tainted: G    B   W          6.1.0-a0a6c76cf2a5+ #1
[   58.737524] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   58.738329] RIP: 0010:__iopt_area_unfill_domain+0x54f/0x560
[   58.738751] Code: e8 86 9e 2b ff 85 db 0f 85 35 fb ff ff e8 09 9d 2b ff 0f 0b e9 29 fb ff ff e8 fd 9c 2b ff 0f 0b e9 69 fe ff ff e8 f1 9c 2b ff <0f> 0b e9 58 ff ff ff e8 65 2d dc 00 0f 1f 44 00 00 0f 1f 44 00 00
[   58.740046] RSP: 0018:ffffc900021dbae0 EFLAGS: 00010246
[   58.740431] RAX: 0000000000000000 RBX: 00000000ffffffff RCX: ffffffff81fe0d26
[   58.740957] RDX: 0000000000000000 RSI: ffff8880135da980 RDI: 0000000000000002
[   58.741666] RBP: ffffc900021dbd10 R08: 000000000003b5c5 R09: 0000000000000006
[   58.742166] R10: 000000000003b5a0 R11: 0000000000000024 R12: 00000000000007ff
[   58.742692] R13: 0000000000000801 R14: 00000000000007ff R15: 0000000000000800
[   58.743202] FS:  00007f3777af9740(0000) GS:ffff88807dc00000(0000) knlGS:0000000000000000
[   58.743785] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   58.744198] CR2: 00007f3777c1e580 CR3: 0000000017510004 CR4: 0000000000770ef0
[   58.744737] PKRU: 55555554
[   58.745055] Call Trace:
[   58.745344]  <TASK>
[   58.745585]  ? rcu_read_lock_sched_held+0x29/0x80
[   58.745931]  ? lock_acquire+0x1a1/0x2f0
[   58.746220]  ? rcu_read_lock_held_common+0x12/0x50
[   58.746592]  ? rcu_read_lock_sched_held+0x29/0x80
[   58.746940]  ? __mutex_lock+0x13a/0xf30
[   58.747241]  ? write_comp_data+0x2f/0x90
[   58.747543]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   58.747907]  iopt_area_unfill_domain+0x32/0x40
[   58.748238]  iopt_table_remove_domain+0x23f/0x4c0
[   58.748587]  iommufd_device_selftest_detach+0x3a/0x90
[   58.749004]  iommufd_selftest_destroy+0x55/0x70
[   58.749540]  iommufd_object_destroy_user+0xce/0x130
[   58.750101]  iommufd_destroy+0xa2/0xc0
[   58.750382]  iommufd_fops_ioctl+0x1ef/0x310
[   58.750704]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   58.751062]  ? write_comp_data+0x2f/0x90
[   58.751358]  __x64_sys_ioctl+0x10e/0x160
[   58.751657]  ? iommufd_get_object.part.6+0x1c0/0x1c0
[   58.752042]  do_syscall_64+0x3b/0x90
[   58.752317]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   58.752721] RIP: 0033:0x7f3777c1e59d
[   58.753142] Code: 00 c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d d3 08 0d 00 f7 d8 64 89 01 48
[   58.754612] RSP: 002b:00007ffd0d727918 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   58.755158] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f3777c1e59d
[   58.755662] RDX: 0000000020000140 RSI: 0000000000003b80 RDI: 0000000000000003
[   58.756174] RBP: 00007ffd0d727930 R08: 00007ffd0d727930 R09: 00007ffd0d727930
[   58.756704] R10: 00007ffd0d727930 R11: 0000000000000213 R12: 0000000000401180
[   58.757391] R13: 00007ffd0d727a50 R14: 0000000000000000 R15: 0000000000000000
[   58.757903]  </TASK>
[   58.758075] irq event stamp: 0
[   58.758311] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   58.758764] hardirqs last disabled at (0): [<ffffffff810fff0c>] copy_process+0x11cc/0x2b10
[   58.759359] softirqs last  enabled at (0): [<ffffffff810fff10>] copy_process+0x11d0/0x2b10
[   58.759944] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   58.760399] ---[ end trace 0000000000000000 ]---
[   58.763422] ------------[ cut here ]------------
[   58.763790] WARNING: CPU: 0 PID: 1232 at drivers/iommu/iommufd/pages.c:178 batch_unpin.isra.23+0x151/0x1a0
[   58.764471] Modules linked in:
[   58.764749] CPU: 0 PID: 1232 Comm: repro Tainted: G    B   W          6.1.0-a0a6c76cf2a5+ #1
[   58.765507] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   58.766311] RIP: 0010:batch_unpin.isra.23+0x151/0x1a0
[   58.766693] Code: e8 c4 be 2b ff 48 8b 45 d0 48 85 c0 75 17 e8 26 bd 2b ff 48 8b 7d c8 48 89 de e8 fa bd 2b ff 48 39 5d c8 73 07 e8 0f bd 2b ff <0f> 0b e8 08 bd 2b ff 4d 29 e5 31 ff 41 83 c6 01 4c 89 ee 31 db e8
[   58.768003] RSP: 0018:ffffc900021db9d8 EFLAGS: 00010246
[   58.768370] RAX: 0000000000000000 RBX: ffffffffffffffff RCX: ffffffff81fded8c
[   58.768899] RDX: 0000000000000000 RSI: ffff8880135da980 RDI: 0000000000000002
[   58.769608] RBP: ffffc900021dba20 R08: 0000000000000000 R09: ffff88807dc3b890
[   58.770116] R10: 00000000000009fb R11: 0000000000000000 R12: 0000000000000001
[   58.770630] R13: 0000000000000001 R14: 0000000000000000 R15: ffff888009f85400
[   58.771149] FS:  0000000000000000(0000) GS:ffff88807dc00000(0000) knlGS:0000000000000000
[   58.771736] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   58.772141] CR2: 00007f3777cf0500 CR3: 0000000003c12003 CR4: 0000000000770ef0
[   58.772681] PKRU: 55555554
[   58.773004] Call Trace:
[   58.773298]  <TASK>
[   58.773530]  iopt_pages_unfill_xarray+0x39f/0x5c0
[   58.773893]  ? rcu_read_lock_held_common+0x12/0x50
[   58.774254]  ? write_comp_data+0x2f/0x90
[   58.774588]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   58.774924]  ? write_comp_data+0x2f/0x90
[   58.775205]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   58.775551]  ? interval_tree_remove+0x291/0x4e0
[   58.775880]  ? write_comp_data+0x2f/0x90
[   58.776178]  iopt_area_remove_access+0x108/0x120
[   58.776536]  iommufd_access_unpin_pages+0x177/0x210
[   58.776934]  iommufd_test_access_unmap+0xe0/0x130
[   58.777493]  ? iommufd_test_access_unmap+0x130/0x130
[   58.778022]  iommufd_test_staccess_release+0x39/0x60
[   58.778399]  __fput+0x11f/0x450
[   58.778670]  ____fput+0x1e/0x30
[   58.778922]  task_work_run+0xb6/0x120
[   58.779208]  do_exit+0x521/0x1340
[   58.779458]  ? lock_release+0x202/0x2c0
[   58.779759]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   58.780114]  ? trace_hardirqs_on+0x3f/0x100
[   58.780431]  do_group_exit+0x5e/0xf0
[   58.780734]  __x64_sys_exit_group+0x25/0x30
[   58.781233]  do_syscall_64+0x3b/0x90
[   58.781663]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   58.782064] RIP: 0033:0x7f3777be6cf6
[   58.782328] Code: Unable to access opcode bytes at 0x7f3777be6ccc.
[   58.782770] RSP: 002b:00007ffd0d7278d8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
[   58.783312] RAX: ffffffffffffffda RBX: 00007f3777cf1490 RCX: 00007f3777be6cf6
[   58.783819] RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
[   58.784328] RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffff80
[   58.784865] R10: 0000000000000004 R11: 0000000000000246 R12: 00007f3777cf1490
[   58.785627] R13: 0000000000000001 R14: 00007f3777cf4e88 R15: 0000000000000000
[   58.786136]  </TASK>
[   58.786306] irq event stamp: 0
[   58.786542] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   58.786987] hardirqs last disabled at (0): [<ffffffff810fff0c>] copy_process+0x11cc/0x2b10
[   58.787586] softirqs last  enabled at (0): [<ffffffff810fff10>] copy_process+0x11d0/0x2b10
[   58.788184] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   58.788620] ---[ end trace 0000000000000000 ]---
[   58.789126] ------------[ cut here ]------------
[   58.789665] WARNING: CPU: 0 PID: 1232 at drivers/iommu/iommufd/pages.c:886 update_unpinned+0x75/0x80
[   58.790396] Modules linked in:
[   58.790635] CPU: 0 PID: 1232 Comm: repro Tainted: G    B   W          6.1.0-a0a6c76cf2a5+ #1
[   58.791218] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   58.792015] RIP: 0010:update_unpinned+0x75/0x80
[   58.792355] Code: ac 2b ff 48 89 de 31 c9 31 d2 4c 29 e6 4c 89 ef e8 70 fb ff ff e8 bb ac 2b ff 5b 41 5c 41 5d 5d c3 cc cc cc cc e8 ab ac 2b ff <0f> 0b eb e7 0f 1f 80 00 00 00 00 0f 1f 44 00 00 55 48 89 e5 41 57
[   58.793703] RSP: 0018:ffffc900021dba08 EFLAGS: 00010246
[   58.794274] RAX: 0000000000000000 RBX: 0000000000000000 RCX: ffffffff81fdfdcf
[   58.794789] RDX: 0000000000000000 RSI: ffff8880135da980 RDI: 0000000000000002
[   58.795281] RBP: ffffc900021dba20 R08: 0000000000000000 R09: ffff88807dc3b890
[   58.795789] R10: 00000000000009fb R11: 0000000000000000 R12: ffffffffffffffff
[   58.796297] R13: ffff888009f85400 R14: 0000000000000002 R15: 0000000000000002
[   58.796813] FS:  0000000000000000(0000) GS:ffff88807dc00000(0000) knlGS:0000000000000000
[   58.797580] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   58.798004] CR2: 00007f3777cf0500 CR3: 0000000003c12003 CR4: 0000000000770ef0
[   58.798518] PKRU: 55555554
[   58.798714] Call Trace:
[   58.798907]  <TASK>
[   58.799072]  iopt_pages_unfill_xarray+0x522/0x5c0
[   58.799441]  ? rcu_read_lock_held_common+0x12/0x50
[   58.799793]  ? write_comp_data+0x2f/0x90
[   58.800098]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   58.800454]  ? write_comp_data+0x2f/0x90
[   58.800769]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   58.801305]  ? interval_tree_remove+0x291/0x4e0
[   58.801830]  ? write_comp_data+0x2f/0x90
[   58.802143]  iopt_area_remove_access+0x108/0x120
[   58.802506]  iommufd_access_unpin_pages+0x177/0x210
[   58.802874]  iommufd_test_access_unmap+0xe0/0x130
[   58.803233]  ? iommufd_test_access_unmap+0x130/0x130
[   58.803602]  iommufd_test_staccess_release+0x39/0x60
[   58.803966]  __fput+0x11f/0x450
[   58.804225]  ____fput+0x1e/0x30
[   58.804465]  task_work_run+0xb6/0x120
[   58.804782]  do_exit+0x521/0x1340
[   58.805172]  ? lock_release+0x202/0x2c0
[   58.805620]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   58.806060]  ? trace_hardirqs_on+0x3f/0x100
[   58.806387]  do_group_exit+0x5e/0xf0
[   58.806665]  __x64_sys_exit_group+0x25/0x30
[   58.806970]  do_syscall_64+0x3b/0x90
[   58.807238]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   58.807618] RIP: 0033:0x7f3777be6cf6
[   58.807883] Code: Unable to access opcode bytes at 0x7f3777be6ccc.
[   58.808327] RSP: 002b:00007ffd0d7278d8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
[   58.808893] RAX: ffffffffffffffda RBX: 00007f3777cf1490 RCX: 00007f3777be6cf6
[   58.809662] RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
[   58.810165] RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffff80
[   58.810688] R10: 0000000000000004 R11: 0000000000000246 R12: 00007f3777cf1490
[   58.811197] R13: 0000000000000001 R14: 00007f3777cf4e88 R15: 0000000000000000
[   58.811713]  </TASK>
[   58.811882] irq event stamp: 0
[   58.812100] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   58.812539] hardirqs last disabled at (0): [<ffffffff810fff0c>] copy_process+0x11cc/0x2b10
[   58.813179] softirqs last  enabled at (0): [<ffffffff810fff10>] copy_process+0x11d0/0x2b10
[   58.814057] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   58.814516] ---[ end trace 0000000000000000 ]---
[   58.814978] ------------[ cut here ]------------
[   58.815316] WARNING: CPU: 0 PID: 1232 at drivers/iommu/iommufd/pages.c:1181 iopt_release_pages+0x159/0x190
[   58.816015] Modules linked in:
[   58.816243] CPU: 0 PID: 1232 Comm: repro Tainted: G    B   W          6.1.0-a0a6c76cf2a5+ #1
[   58.816866] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   58.817889] RIP: 0010:iopt_release_pages+0x159/0x190
[   58.818265] Code: b5 11 ff eb cb e8 87 90 2b ff be 03 00 00 00 4c 89 f7 e8 6a 8b ce ff eb b7 e8 73 90 2b ff 0f 0b e9 ed fe ff ff e8 67 90 2b ff <0f> 0b e9 00 ff ff ff e8 5b 90 2b ff 0f 0b e9 07 ff ff ff e8 4f 90
[   58.819556] RSP: 0018:ffffc900021dbc88 EFLAGS: 00010246
[   58.819937] RAX: 0000000000000000 RBX: ffff888009f85400 RCX: ffffffff81fe1957
[   58.820445] RDX: 0000000000000000 RSI: ffff8880135da980 RDI: 0000000000000002
[   58.820970] RBP: ffffc900021dbca8 R08: 0000000000000000 R09: 0000000000000000
[   58.821670] R10: ffffc900021dbc58 R11: 0000000000000000 R12: ffffffffffffffff
[   58.822171] R13: 0000000001000000 R14: 00000000017fffff R15: 0000000000000000
[   58.822690] FS:  0000000000000000(0000) GS:ffff88807dc00000(0000) knlGS:0000000000000000
[   58.823268] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   58.823694] CR2: 00007f3777cf0500 CR3: 0000000003c12003 CR4: 0000000000770ef0
[   58.824197] PKRU: 55555554
[   58.824402] Call Trace:
[   58.824580]  <TASK>
[   58.824773]  iopt_unmap_iova_range+0x1ef/0x2e0
[   58.825295]  iopt_unmap_all+0x2f/0x60
[   58.825707]  iommufd_ioas_destroy+0x2c/0x70
[   58.826015]  iommufd_fops_release+0xd4/0x170
[   58.826333]  ? iommufd_ctx_get+0x30/0x30
[   58.826645]  __fput+0x11f/0x450
[   58.826897]  ____fput+0x1e/0x30
[   58.827140]  task_work_run+0xb6/0x120
[   58.827429]  do_exit+0x521/0x1340
[   58.827691]  ? lock_release+0x202/0x2c0
[   58.827978]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   58.828321]  ? trace_hardirqs_on+0x3f/0x100
[   58.828675]  do_group_exit+0x5e/0xf0
[   58.829101]  __x64_sys_exit_group+0x25/0x30
[   58.829588]  do_syscall_64+0x3b/0x90
[   58.829941]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   58.830303] RIP: 0033:0x7f3777be6cf6
[   58.830570] Code: Unable to access opcode bytes at 0x7f3777be6ccc.
[   58.831010] RSP: 002b:00007ffd0d7278d8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
[   58.831553] RAX: ffffffffffffffda RBX: 00007f3777cf1490 RCX: 00007f3777be6cf6
[   58.832073] RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
[   58.832586] RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffff80
[   58.833138] R10: 0000000000000004 R11: 0000000000000246 R12: 00007f3777cf1490
[   58.833907] R13: 0000000000000001 R14: 00007f3777cf4e88 R15: 0000000000000000
[   58.834423]  </TASK>
[   58.834600] irq event stamp: 0
[   58.834826] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   58.835285] hardirqs last disabled at (0): [<ffffffff810fff0c>] copy_process+0x11cc/0x2b10
[   58.835876] softirqs last  enabled at (0): [<ffffffff810fff10>] copy_process+0x11d0/0x2b10
[   58.836467] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   58.836947] ---[ end trace 0000000000000000 ]---
[   59.158292] ------------[ cut here ]------------
[   59.158665] WARNING: CPU: 0 PID: 1248 at drivers/iommu/iommufd/pages.c:294 __iopt_area_unfill_domain+0x152/0x560
[   59.159402] Modules linked in:
[   59.159637] CPU: 0 PID: 1248 Comm: repro Tainted: G    B   W          6.1.0-a0a6c76cf2a5+ #1
[   59.160241] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   59.161073] RIP: 0010:__iopt_area_unfill_domain+0x152/0x560
[   59.161689] Code: a1 2b ff 44 8b 64 24 54 48 8b 44 24 48 31 ff 44 89 e6 48 89 44 24 38 e8 6c a2 2b ff 45 85 e4 0f 85 eb 01 00 00 e8 ee a0 2b ff <0f> 0b e8 e7 a0 2b ff 48 8b 44 24 38 89 5c 24 58 89 18 8b 44 24 54
[   59.163076] RSP: 0018:ffffc900021bbae0 EFLAGS: 00010246
[   59.163451] RAX: 0000000000000000 RBX: 00000000ffffffff RCX: ffffffff81fe0bd5
[   59.163961] RDX: 0000000000000000 RSI: ffff88800e67a980 RDI: 0000000000000002
[   59.164483] RBP: ffffc900021bbd10 R08: 000000000003b5c5 R09: 000000000000000a
[   59.165018] R10: 000000000003b5a0 R11: 0000000000000024 R12: 0000000000000001
[   59.165690] R13: 0000000000000801 R14: 00000000000007ff R15: 0000000000000800
[   59.166190] FS:  00007f3777af9740(0000) GS:ffff88807dc00000(0000) knlGS:0000000000000000
[   59.166772] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   59.167188] CR2: 00007f3777c1e580 CR3: 00000000174ec005 CR4: 0000000000770ef0
[   59.167717] PKRU: 55555554
[   59.167919] Call Trace:
[   59.168104]  <TASK>
[   59.168277]  ? rcu_read_lock_sched_held+0x29/0x80
[   59.168627]  ? lock_acquire+0x1a1/0x2f0
[   59.168953]  ? rcu_read_lock_held_common+0x12/0x50
[   59.169509]  ? rcu_read_lock_sched_held+0x29/0x80
[   59.170012]  ? __mutex_lock+0x13a/0xf30
[   59.170308]  ? write_comp_data+0x2f/0x90
[   59.170615]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   59.170978]  iopt_area_unfill_domain+0x32/0x40
[   59.171322]  iopt_table_remove_domain+0x23f/0x4c0
[   59.171674]  iommufd_device_selftest_detach+0x3a/0x90
[   59.172078]  iommufd_selftest_destroy+0x55/0x70
[   59.172413]  iommufd_object_destroy_user+0xce/0x130
[   59.172797]  iommufd_destroy+0xa2/0xc0
[   59.173242]  iommufd_fops_ioctl+0x1ef/0x310
[   59.173728]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   59.174074]  ? write_comp_data+0x2f/0x90
[   59.174381]  __x64_sys_ioctl+0x10e/0x160
[   59.174693]  ? iommufd_get_object.part.6+0x1c0/0x1c0
[   59.175060]  do_syscall_64+0x3b/0x90
[   59.175347]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   59.175716] RIP: 0033:0x7f3777c1e59d
[   59.175984] Code: 00 c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d d3 08 0d 00 f7 d8 64 89 01 48
[   59.177288] RSP: 002b:00007ffd0d727918 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   59.178118] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f3777c1e59d
[   59.178645] RDX: 0000000020000140 RSI: 0000000000003b80 RDI: 0000000000000003
[   59.179155] RBP: 00007ffd0d727930 R08: 00007ffd0d727930 R09: 00007ffd0d727930
[   59.179679] R10: 00007ffd0d727930 R11: 0000000000000213 R12: 0000000000401180
[   59.180191] R13: 00007ffd0d727a50 R14: 0000000000000000 R15: 0000000000000000
[   59.180740]  </TASK>
[   59.181005] irq event stamp: 0
[   59.181363] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   59.181822] hardirqs last disabled at (0): [<ffffffff810fff0c>] copy_process+0x11cc/0x2b10
[   59.182415] softirqs last  enabled at (0): [<ffffffff810fff10>] copy_process+0x11d0/0x2b10
[   59.183025] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   59.183480] ---[ end trace 0000000000000000 ]---
[   59.183928] ------------[ cut here ]------------
[   59.184260] WARNING: CPU: 0 PID: 1248 at drivers/iommu/iommufd/pages.c:1290 __iopt_area_unfill_domain+0x54f/0x560
[   59.185024] Modules linked in:
[   59.185385] CPU: 0 PID: 1248 Comm: repro Tainted: G    B   W          6.1.0-a0a6c76cf2a5+ #1
[   59.186170] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   59.186983] RIP: 0010:__iopt_area_unfill_domain+0x54f/0x560
[   59.187403] Code: e8 86 9e 2b ff 85 db 0f 85 35 fb ff ff e8 09 9d 2b ff 0f 0b e9 29 fb ff ff e8 fd 9c 2b ff 0f 0b e9 69 fe ff ff e8 f1 9c 2b ff <0f> 0b e9 58 ff ff ff e8 65 2d dc 00 0f 1f 44 00 00 0f 1f 44 00 00
[   59.188724] RSP: 0018:ffffc900021bbae0 EFLAGS: 00010246
[   59.189245] RAX: 0000000000000000 RBX: 00000000ffffffff RCX: ffffffff81fe0d26
[   59.189757] RDX: 0000000000000000 RSI: ffff88800e67a980 RDI: 0000000000000002
[   59.190282] RBP: ffffc900021bbd10 R08: 000000000003b5c5 R09: 000000000000000a
[   59.190788] R10: 000000000003b5a0 R11: 0000000000000024 R12: 00000000000007ff
[   59.191309] R13: 0000000000000801 R14: 00000000000007ff R15: 0000000000000800
[   59.191810] FS:  00007f3777af9740(0000) GS:ffff88807dc00000(0000) knlGS:0000000000000000
[   59.192383] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   59.192821] CR2: 00007f3777c1e580 CR3: 00000000174ec005 CR4: 0000000000770ef0
[   59.193604] PKRU: 55555554
[   59.193808] Call Trace:
[   59.193994]  <TASK>
[   59.194168]  ? rcu_read_lock_sched_held+0x29/0x80
[   59.194545]  ? lock_acquire+0x1a1/0x2f0
[   59.194835]  ? rcu_read_lock_held_common+0x12/0x50
[   59.195192]  ? rcu_read_lock_sched_held+0x29/0x80
[   59.195556]  ? __mutex_lock+0x13a/0xf30
[   59.195851]  ? write_comp_data+0x2f/0x90
[   59.196149]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   59.196530]  iopt_area_unfill_domain+0x32/0x40
[   59.196889]  iopt_table_remove_domain+0x23f/0x4c0
[   59.197441]  iommufd_device_selftest_detach+0x3a/0x90
[   59.198029]  iommufd_selftest_destroy+0x55/0x70
[   59.198371]  iommufd_object_destroy_user+0xce/0x130
[   59.198754]  iommufd_destroy+0xa2/0xc0
[   59.199037]  iommufd_fops_ioctl+0x1ef/0x310
[   59.199354]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   59.199707]  ? write_comp_data+0x2f/0x90
[   59.200012]  __x64_sys_ioctl+0x10e/0x160
[   59.200317]  ? iommufd_get_object.part.6+0x1c0/0x1c0
[   59.200715]  do_syscall_64+0x3b/0x90
[   59.201146]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   59.201683] RIP: 0033:0x7f3777c1e59d
[   59.201961] Code: 00 c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d d3 08 0d 00 f7 d8 64 89 01 48
[   59.203263] RSP: 002b:00007ffd0d727918 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   59.203802] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f3777c1e59d
[   59.204317] RDX: 0000000020000140 RSI: 0000000000003b80 RDI: 0000000000000003
[   59.204854] RBP: 00007ffd0d727930 R08: 00007ffd0d727930 R09: 00007ffd0d727930
[   59.205561] R10: 00007ffd0d727930 R11: 0000000000000213 R12: 0000000000401180
[   59.206065] R13: 00007ffd0d727a50 R14: 0000000000000000 R15: 0000000000000000
[   59.206596]  </TASK>
[   59.206763] irq event stamp: 0
[   59.206995] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   59.207460] hardirqs last disabled at (0): [<ffffffff810fff0c>] copy_process+0x11cc/0x2b10
[   59.208046] softirqs last  enabled at (0): [<ffffffff810fff10>] copy_process+0x11d0/0x2b10
[   59.208634] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   59.209109] ---[ end trace 0000000000000000 ]---
[   59.212073] ------------[ cut here ]------------
[   59.212440] WARNING: CPU: 0 PID: 1248 at drivers/iommu/iommufd/pages.c:178 batch_unpin.isra.23+0x151/0x1a0
[   59.213175] Modules linked in:
[   59.213510] CPU: 0 PID: 1248 Comm: repro Tainted: G    B   W          6.1.0-a0a6c76cf2a5+ #1
[   59.214135] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   59.214949] RIP: 0010:batch_unpin.isra.23+0x151/0x1a0
[   59.215328] Code: e8 c4 be 2b ff 48 8b 45 d0 48 85 c0 75 17 e8 26 bd 2b ff 48 8b 7d c8 48 89 de e8 fa bd 2b ff 48 39 5d c8 73 07 e8 0f bd 2b ff <0f> 0b e8 08 bd 2b ff 4d 29 e5 31 ff 41 83 c6 01 4c 89 ee 31 db e8
[   59.216617] RSP: 0018:ffffc900021bb9d8 EFLAGS: 00010246
[   59.217035] RAX: 0000000000000000 RBX: ffffffffffffffff RCX: ffffffff81fded8c
[   59.217738] RDX: 0000000000000000 RSI: ffff88800e67a980 RDI: 0000000000000002
[   59.218244] RBP: ffffc900021bba20 R08: 0000000000000000 R09: ffff88807dc3b890
[   59.218750] R10: 0000000000000af4 R11: 0000000000000000 R12: 0000000000000001
[   59.219267] R13: 0000000000000001 R14: 0000000000000000 R15: ffff888009f85400
[   59.219760] FS:  0000000000000000(0000) GS:ffff88807dc00000(0000) knlGS:0000000000000000
[   59.220336] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   59.220773] CR2: 00007f3777cf0500 CR3: 0000000003c12006 CR4: 0000000000770ef0
[   59.221506] PKRU: 55555554
[   59.221711] Call Trace:
[   59.221897]  <TASK>
[   59.222062]  iopt_pages_unfill_xarray+0x39f/0x5c0
[   59.222425]  ? rcu_read_lock_sched_held+0x29/0x80
[   59.222800]  ? rcu_read_lock_held_common+0x12/0x50
[   59.223184]  ? write_comp_data+0x2f/0x90
[   59.223484]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   59.223840]  ? write_comp_data+0x2f/0x90
[   59.224135]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   59.224497]  ? interval_tree_remove+0x291/0x4e0
[   59.224871]  ? write_comp_data+0x2f/0x90
[   59.225341]  iopt_area_remove_access+0x108/0x120
[   59.225894]  iommufd_access_unpin_pages+0x177/0x210
[   59.226332]  iommufd_test_access_unmap+0xe0/0x130
[   59.226702]  ? iommufd_test_access_unmap+0x130/0x130
[   59.227075]  iommufd_test_staccess_release+0x39/0x60
[   59.227458]  __fput+0x11f/0x450
[   59.227706]  ____fput+0x1e/0x30
[   59.227951]  task_work_run+0xb6/0x120
[   59.228235]  do_exit+0x521/0x1340
[   59.228504]  ? lock_release+0x202/0x2c0
[   59.228819]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   59.229373]  ? trace_hardirqs_on+0x3f/0x100
[   59.229811]  do_group_exit+0x5e/0xf0
[   59.230084]  __x64_sys_exit_group+0x25/0x30
[   59.230391]  do_syscall_64+0x3b/0x90
[   59.230682]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   59.231055] RIP: 0033:0x7f3777be6cf6
[   59.231326] Code: Unable to access opcode bytes at 0x7f3777be6ccc.
[   59.231770] RSP: 002b:00007ffd0d7278d8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
[   59.232300] RAX: ffffffffffffffda RBX: 00007f3777cf1490 RCX: 00007f3777be6cf6
[   59.232844] RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
[   59.233642] RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffff80
[   59.234165] R10: 0000000000000004 R11: 0000000000000246 R12: 00007f3777cf1490
[   59.234683] R13: 0000000000000001 R14: 00007f3777cf4e88 R15: 0000000000000000
[   59.235202]  </TASK>
[   59.235381] irq event stamp: 0
[   59.235611] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   59.236066] hardirqs last disabled at (0): [<ffffffff810fff0c>] copy_process+0x11cc/0x2b10
[   59.236649] softirqs last  enabled at (0): [<ffffffff810fff10>] copy_process+0x11d0/0x2b10
[   59.237553] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   59.237996] ---[ end trace 0000000000000000 ]---
[   59.238430] ------------[ cut here ]------------
[   59.238763] WARNING: CPU: 0 PID: 1248 at drivers/iommu/iommufd/pages.c:886 update_unpinned+0x75/0x80
[   59.239423] Modules linked in:
[   59.239653] CPU: 0 PID: 1248 Comm: repro Tainted: G    B   W          6.1.0-a0a6c76cf2a5+ #1
[   59.240271] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   59.241115] RIP: 0010:update_unpinned+0x75/0x80
[   59.241649] Code: ac 2b ff 48 89 de 31 c9 31 d2 4c 29 e6 4c 89 ef e8 70 fb ff ff e8 bb ac 2b ff 5b 41 5c 41 5d 5d c3 cc cc cc cc e8 ab ac 2b ff <0f> 0b eb e7 0f 1f 80 00 00 00 00 0f 1f 44 00 00 55 48 89 e5 41 57
[   59.243044] RSP: 0018:ffffc900021bba08 EFLAGS: 00010246
[   59.243445] RAX: 0000000000000000 RBX: 0000000000000000 RCX: ffffffff81fdfdcf
[   59.243947] RDX: 0000000000000000 RSI: ffff88800e67a980 RDI: 0000000000000002
[   59.244443] RBP: ffffc900021bba20 R08: 0000000000000000 R09: ffff88807dc3b890
[   59.244976] R10: 0000000000000af4 R11: 0000000000000000 R12: ffffffffffffffff
[   59.245661] R13: ffff888009f85400 R14: 0000000000000002 R15: 0000000000000002
[   59.246170] FS:  0000000000000000(0000) GS:ffff88807dc00000(0000) knlGS:0000000000000000
[   59.246748] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   59.247157] CR2: 00007f3777cf0500 CR3: 0000000003c12006 CR4: 0000000000770ef0
[   59.247662] PKRU: 55555554
[   59.247872] Call Trace:
[   59.248052]  <TASK>
[   59.248212]  iopt_pages_unfill_xarray+0x522/0x5c0
[   59.248557]  ? rcu_read_lock_sched_held+0x29/0x80
[   59.248975]  ? rcu_read_lock_held_common+0x12/0x50
[   59.249529]  ? write_comp_data+0x2f/0x90
[   59.249959]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   59.250312]  ? write_comp_data+0x2f/0x90
[   59.250618]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   59.250978]  ? interval_tree_remove+0x291/0x4e0
[   59.251326]  ? write_comp_data+0x2f/0x90
[   59.251626]  iopt_area_remove_access+0x108/0x120
[   59.251982]  iommufd_access_unpin_pages+0x177/0x210
[   59.252357]  iommufd_test_access_unmap+0xe0/0x130
[   59.252735]  ? iommufd_test_access_unmap+0x130/0x130
[   59.253317]  iommufd_test_staccess_release+0x39/0x60
[   59.253798]  __fput+0x11f/0x450
[   59.254050]  ____fput+0x1e/0x30
[   59.254303]  task_work_run+0xb6/0x120
[   59.254598]  do_exit+0x521/0x1340
[   59.254849]  ? lock_release+0x202/0x2c0
[   59.255149]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   59.255500]  ? trace_hardirqs_on+0x3f/0x100
[   59.255808]  do_group_exit+0x5e/0xf0
[   59.256076]  __x64_sys_exit_group+0x25/0x30
[   59.256396]  do_syscall_64+0x3b/0x90
[   59.256697]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   59.257270] RIP: 0033:0x7f3777be6cf6
[   59.257681] Code: Unable to access opcode bytes at 0x7f3777be6ccc.
[   59.258113] RSP: 002b:00007ffd0d7278d8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
[   59.258652] RAX: ffffffffffffffda RBX: 00007f3777cf1490 RCX: 00007f3777be6cf6
[   59.259144] RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
[   59.259651] RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffff80
[   59.260146] R10: 0000000000000004 R11: 0000000000000246 R12: 00007f3777cf1490
[   59.260672] R13: 0000000000000001 R14: 00007f3777cf4e88 R15: 0000000000000000
[   59.261397]  </TASK>
[   59.261575] irq event stamp: 0
[   59.261799] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   59.262233] hardirqs last disabled at (0): [<ffffffff810fff0c>] copy_process+0x11cc/0x2b10
[   59.262821] softirqs last  enabled at (0): [<ffffffff810fff10>] copy_process+0x11d0/0x2b10
[   59.263402] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   59.263841] ---[ end trace 0000000000000000 ]---
[   59.264287] ------------[ cut here ]------------
[   59.264605] WARNING: CPU: 0 PID: 1248 at drivers/iommu/iommufd/pages.c:1181 iopt_release_pages+0x159/0x190
[   59.265421] Modules linked in:
[   59.265775] CPU: 0 PID: 1248 Comm: repro Tainted: G    B   W          6.1.0-a0a6c76cf2a5+ #1
[   59.266574] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   59.267359] RIP: 0010:iopt_release_pages+0x159/0x190
[   59.267720] Code: b5 11 ff eb cb e8 87 90 2b ff be 03 00 00 00 4c 89 f7 e8 6a 8b ce ff eb b7 e8 73 90 2b ff 0f 0b e9 ed fe ff ff e8 67 90 2b ff <0f> 0b e9 00 ff ff ff e8 5b 90 2b ff 0f 0b e9 07 ff ff ff e8 4f 90
[   59.268991] RSP: 0018:ffffc900021bbc88 EFLAGS: 00010246
[   59.269504] RAX: 0000000000000000 RBX: ffff888009f85400 RCX: ffffffff81fe1957
[   59.269999] RDX: 0000000000000000 RSI: ffff88800e67a980 RDI: 0000000000000002
[   59.270512] RBP: ffffc900021bbca8 R08: 0000000000000000 R09: 0000000000000000
[   59.270998] R10: ffffc900021bbc58 R11: 0000000000000000 R12: ffffffffffffffff
[   59.271503] R13: 0000000001000000 R14: 00000000017fffff R15: 0000000000000000
[   59.272007] FS:  0000000000000000(0000) GS:ffff88807dc00000(0000) knlGS:0000000000000000
[   59.272572] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   59.273002] CR2: 00007f3777cf0500 CR3: 0000000003c12006 CR4: 0000000000770ef0
[   59.273744] PKRU: 55555554
[   59.273940] Call Trace:
[   59.274116]  <TASK>
[   59.274276]  iopt_unmap_iova_range+0x1ef/0x2e0
[   59.274622]  iopt_unmap_all+0x2f/0x60
[   59.274889]  iommufd_ioas_destroy+0x2c/0x70
[   59.275197]  iommufd_fops_release+0xd4/0x170
[   59.275516]  ? iommufd_ctx_get+0x30/0x30
[   59.275807]  __fput+0x11f/0x450
[   59.276049]  ____fput+0x1e/0x30
[   59.276287]  task_work_run+0xb6/0x120
[   59.276565]  do_exit+0x521/0x1340
[   59.276842]  ? lock_release+0x202/0x2c0
[   59.277286]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   59.277826]  ? trace_hardirqs_on+0x3f/0x100
[   59.278238]  do_group_exit+0x5e/0xf0
[   59.278515]  __x64_sys_exit_group+0x25/0x30
[   59.278824]  do_syscall_64+0x3b/0x90
[   59.279089]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   59.279450] RIP: 0033:0x7f3777be6cf6
[   59.279708] Code: Unable to access opcode bytes at 0x7f3777be6ccc.
[   59.280143] RSP: 002b:00007ffd0d7278d8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
[   59.280693] RAX: ffffffffffffffda RBX: 00007f3777cf1490 RCX: 00007f3777be6cf6
[   59.281432] RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
[   59.281927] RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffff80
[   59.282440] R10: 0000000000000004 R11: 0000000000000246 R12: 00007f3777cf1490
[   59.282932] R13: 0000000000000001 R14: 00007f3777cf4e88 R15: 0000000000000000
[   59.283441]  </TASK>
[   59.283604] irq event stamp: 0
[   59.283820] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   59.284268] hardirqs last disabled at (0): [<ffffffff810fff0c>] copy_process+0x11cc/0x2b10
[   59.284857] softirqs last  enabled at (0): [<ffffffff810fff10>] copy_process+0x11d0/0x2b10
[   59.285707] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   59.286146] ---[ end trace 0000000000000000 ]---
[   59.525757] ------------[ cut here ]------------
[   59.526122] WARNING: CPU: 0 PID: 1261 at drivers/iommu/iommufd/pages.c:294 __iopt_area_unfill_domain+0x152/0x560
[   59.526850] Modules linked in:
[   59.527096] CPU: 0 PID: 1261 Comm: repro Tainted: G    B   W          6.1.0-a0a6c76cf2a5+ #1
[   59.527688] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   59.528481] RIP: 0010:__iopt_area_unfill_domain+0x152/0x560
[   59.528973] Code: a1 2b ff 44 8b 64 24 54 48 8b 44 24 48 31 ff 44 89 e6 48 89 44 24 38 e8 6c a2 2b ff 45 85 e4 0f 85 eb 01 00 00 e8 ee a0 2b ff <0f> 0b e8 e7 a0 2b ff 48 8b 44 24 38 89 5c 24 58 89 18 8b 44 24 54
[   59.531063] RSP: 0018:ffffc900022bbae0 EFLAGS: 00010246
[   59.531769] RAX: 0000000000000000 RBX: 00000000ffffffff RCX: ffffffff81fe0bd5
[   59.532701] RDX: 0000000000000000 RSI: ffff8880135dd300 RDI: 0000000000000002
[   59.533596] RBP: ffffc900022bbd10 R08: 000000000003b5c5 R09: 0000000000000007
[   59.534369] R10: 000000000003b5a0 R11: 0000000000000024 R12: 0000000000000001
[   59.535032] R13: 0000000000000801 R14: 00000000000007ff R15: 0000000000000800
[   59.535641] FS:  00007f3777af9740(0000) GS:ffff88807dc00000(0000) knlGS:0000000000000000
[   59.536232] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   59.536639] CR2: 00007f3777c1e580 CR3: 00000000174dc003 CR4: 0000000000770ef0
[   59.537171] PKRU: 55555554
[   59.537476] Call Trace:
[   59.537738]  <TASK>
[   59.537924]  ? rcu_read_lock_sched_held+0x29/0x80
[   59.538272]  ? lock_acquire+0x1a1/0x2f0
[   59.538567]  ? rcu_read_lock_held_common+0x12/0x50
[   59.538918]  ? rcu_read_lock_sched_held+0x29/0x80
[   59.539257]  ? __mutex_lock+0x13a/0xf30
[   59.539537]  ? write_comp_data+0x2f/0x90
[   59.539843]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   59.540210]  iopt_area_unfill_domain+0x32/0x40
[   59.540538]  iopt_table_remove_domain+0x23f/0x4c0
[   59.540904]  iommufd_device_selftest_detach+0x3a/0x90
[   59.541484]  iommufd_selftest_destroy+0x55/0x70
[   59.541966]  iommufd_object_destroy_user+0xce/0x130
[   59.542315]  iommufd_destroy+0xa2/0xc0
[   59.542617]  iommufd_fops_ioctl+0x1ef/0x310
[   59.542923]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   59.543274]  ? write_comp_data+0x2f/0x90
[   59.543556]  __x64_sys_ioctl+0x10e/0x160
[   59.543867]  ? iommufd_get_object.part.6+0x1c0/0x1c0
[   59.544237]  do_syscall_64+0x3b/0x90
[   59.544500]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   59.544886] RIP: 0033:0x7f3777c1e59d
[   59.545307] Code: 00 c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d d3 08 0d 00 f7 d8 64 89 01 48
[   59.546752] RSP: 002b:00007ffd0d727918 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   59.547276] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f3777c1e59d
[   59.547764] RDX: 0000000020000140 RSI: 0000000000003b80 RDI: 0000000000000003
[   59.548245] RBP: 00007ffd0d727930 R08: 00007ffd0d727930 R09: 00007ffd0d727930
[   59.548764] R10: 00007ffd0d727930 R11: 0000000000000213 R12: 0000000000401180
[   59.549436] R13: 00007ffd0d727a50 R14: 0000000000000000 R15: 0000000000000000
[   59.549938]  </TASK>
[   59.550107] irq event stamp: 0
[   59.550327] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   59.550781] hardirqs last disabled at (0): [<ffffffff810fff0c>] copy_process+0x11cc/0x2b10
[   59.551361] softirqs last  enabled at (0): [<ffffffff810fff10>] copy_process+0x11d0/0x2b10
[   59.551934] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   59.552362] ---[ end trace 0000000000000000 ]---
[   59.552863] ------------[ cut here ]------------
[   59.553365] WARNING: CPU: 0 PID: 1261 at drivers/iommu/iommufd/pages.c:1290 __iopt_area_unfill_domain+0x54f/0x560
[   59.554177] Modules linked in:
[   59.554403] CPU: 0 PID: 1261 Comm: repro Tainted: G    B   W          6.1.0-a0a6c76cf2a5+ #1
[   59.555003] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   59.555783] RIP: 0010:__iopt_area_unfill_domain+0x54f/0x560
[   59.556184] Code: e8 86 9e 2b ff 85 db 0f 85 35 fb ff ff e8 09 9d 2b ff 0f 0b e9 29 fb ff ff e8 fd 9c 2b ff 0f 0b e9 69 fe ff ff e8 f1 9c 2b ff <0f> 0b e9 58 ff ff ff e8 65 2d dc 00 0f 1f 44 00 00 0f 1f 44 00 00
[   59.557485] RSP: 0018:ffffc900022bbae0 EFLAGS: 00010246
[   59.558043] RAX: 0000000000000000 RBX: 00000000ffffffff RCX: ffffffff81fe0d26
[   59.558539] RDX: 0000000000000000 RSI: ffff8880135dd300 RDI: 0000000000000002
[   59.559029] RBP: ffffc900022bbd10 R08: 000000000003b5c5 R09: 0000000000000007
[   59.559552] R10: 000000000003b5a0 R11: 0000000000000024 R12: 00000000000007ff
[   59.560068] R13: 0000000000000801 R14: 00000000000007ff R15: 0000000000000800
[   59.560556] FS:  00007f3777af9740(0000) GS:ffff88807dc00000(0000) knlGS:0000000000000000
[   59.561166] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   59.561812] CR2: 00007f3777c1e580 CR3: 00000000174dc003 CR4: 0000000000770ef0
[   59.562324] PKRU: 55555554
[   59.562540] Call Trace:
[   59.562724]  <TASK>
[   59.562893]  ? rcu_read_lock_sched_held+0x29/0x80
[   59.563268]  ? lock_acquire+0x1a1/0x2f0
[   59.563561]  ? rcu_read_lock_held_common+0x12/0x50
[   59.563915]  ? rcu_read_lock_sched_held+0x29/0x80
[   59.564272]  ? __mutex_lock+0x13a/0xf30
[   59.564568]  ? write_comp_data+0x2f/0x90
[   59.564875]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   59.565429]  iopt_area_unfill_domain+0x32/0x40
[   59.565944]  iopt_table_remove_domain+0x23f/0x4c0
[   59.566282]  iommufd_device_selftest_detach+0x3a/0x90
[   59.566679]  iommufd_selftest_destroy+0x55/0x70
[   59.567017]  iommufd_object_destroy_user+0xce/0x130
[   59.567377]  iommufd_destroy+0xa2/0xc0
[   59.567680]  iommufd_fops_ioctl+0x1ef/0x310
[   59.568005]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   59.568351]  ? write_comp_data+0x2f/0x90
[   59.568684]  __x64_sys_ioctl+0x10e/0x160
[   59.569174]  ? iommufd_get_object.part.6+0x1c0/0x1c0
[   59.569704]  do_syscall_64+0x3b/0x90
[   59.569992]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   59.570369] RIP: 0033:0x7f3777c1e59d
[   59.570640] Code: 00 c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d d3 08 0d 00 f7 d8 64 89 01 48
[   59.571944] RSP: 002b:00007ffd0d727918 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   59.572477] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f3777c1e59d
[   59.573014] RDX: 0000000020000140 RSI: 0000000000003b80 RDI: 0000000000000003
[   59.573757] RBP: 00007ffd0d727930 R08: 00007ffd0d727930 R09: 00007ffd0d727930
[   59.574269] R10: 00007ffd0d727930 R11: 0000000000000213 R12: 0000000000401180
[   59.574779] R13: 00007ffd0d727a50 R14: 0000000000000000 R15: 0000000000000000
[   59.575307]  </TASK>
[   59.575473] irq event stamp: 0
[   59.575700] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   59.576152] hardirqs last disabled at (0): [<ffffffff810fff0c>] copy_process+0x11cc/0x2b10
[   59.576755] softirqs last  enabled at (0): [<ffffffff810fff10>] copy_process+0x11d0/0x2b10
[   59.577616] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   59.578065] ---[ end trace 0000000000000000 ]---
[   59.583967] ------------[ cut here ]------------
[   59.584524] WARNING: CPU: 0 PID: 1261 at drivers/iommu/iommufd/pages.c:178 batch_unpin.isra.23+0x151/0x1a0
[   59.585689] Modules linked in:
[   59.586142] CPU: 0 PID: 1261 Comm: repro Tainted: G    B   W          6.1.0-a0a6c76cf2a5+ #1
[   59.586927] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   59.587736] RIP: 0010:batch_unpin.isra.23+0x151/0x1a0
[   59.588107] Code: e8 c4 be 2b ff 48 8b 45 d0 48 85 c0 75 17 e8 26 bd 2b ff 48 8b 7d c8 48 89 de e8 fa bd 2b ff 48 39 5d c8 73 07 e8 0f bd 2b ff <0f> 0b e8 08 bd 2b ff 4d 29 e5 31 ff 41 83 c6 01 4c 89 ee 31 db e8
[   59.589430] RSP: 0018:ffffc900022bb9d8 EFLAGS: 00010246
[   59.589981] RAX: 0000000000000000 RBX: ffffffffffffffff RCX: ffffffff81fded8c
[   59.590500] RDX: 0000000000000000 RSI: ffff8880135dd300 RDI: 0000000000000002
[   59.591014] RBP: ffffc900022bba20 R08: 0000000000000000 R09: ffff88807dc3b890
[   59.591517] R10: 0000000000000bd9 R11: 0000000000000000 R12: 0000000000000001
[   59.592012] R13: 0000000000000001 R14: 0000000000000000 R15: ffff888009f84c00
[   59.592529] FS:  0000000000000000(0000) GS:ffff88807dc00000(0000) knlGS:0000000000000000
[   59.593129] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   59.593768] CR2: 00007f3777c1e580 CR3: 0000000013558004 CR4: 0000000000770ef0
[   59.594299] PKRU: 55555554
[   59.594512] Call Trace:
[   59.594696]  <TASK>
[   59.594863]  iopt_pages_unfill_xarray+0x39f/0x5c0
[   59.595224]  ? rcu_read_lock_sched_held+0x29/0x80
[   59.595608]  ? rcu_read_lock_held_common+0x12/0x50
[   59.595958]  ? write_comp_data+0x2f/0x90
[   59.596252]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   59.596611]  ? write_comp_data+0x2f/0x90
[   59.596938]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   59.597489]  ? interval_tree_remove+0x291/0x4e0
[   59.598005]  ? write_comp_data+0x2f/0x90
[   59.598300]  iopt_area_remove_access+0x108/0x120
[   59.598652]  iommufd_access_unpin_pages+0x177/0x210
[   59.599032]  iommufd_test_access_unmap+0xe0/0x130
[   59.599379]  ? iommufd_test_access_unmap+0x130/0x130
[   59.599746]  iommufd_test_staccess_release+0x39/0x60
[   59.600118]  __fput+0x11f/0x450
[   59.600363]  ____fput+0x1e/0x30
[   59.600606]  task_work_run+0xb6/0x120
[   59.600922]  do_exit+0x521/0x1340
[   59.601320]  ? lock_release+0x202/0x2c0
[   59.601761]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   59.602184]  ? trace_hardirqs_on+0x3f/0x100
[   59.602523]  do_group_exit+0x5e/0xf0
[   59.602796]  __x64_sys_exit_group+0x25/0x30
[   59.603106]  do_syscall_64+0x3b/0x90
[   59.603389]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   59.603759] RIP: 0033:0x7f3777be6cf6
[   59.604025] Code: Unable to access opcode bytes at 0x7f3777be6ccc.
[   59.604470] RSP: 002b:00007ffd0d7278d8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
[   59.605024] RAX: ffffffffffffffda RBX: 00007f3777cf1490 RCX: 00007f3777be6cf6
[   59.605813] RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
[   59.606318] RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffff80
[   59.606840] R10: 0000000000000004 R11: 0000000000000246 R12: 00007f3777cf1490
[   59.607356] R13: 0000000000000001 R14: 00007f3777cf4e88 R15: 0000000000000000
[   59.607884]  </TASK>
[   59.608051] irq event stamp: 0
[   59.608274] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   59.608752] hardirqs last disabled at (0): [<ffffffff810fff0c>] copy_process+0x11cc/0x2b10
[   59.609601] softirqs last  enabled at (0): [<ffffffff810fff10>] copy_process+0x11d0/0x2b10
[   59.610203] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   59.610658] ---[ end trace 0000000000000000 ]---
[   59.611096] ------------[ cut here ]------------
[   59.611438] WARNING: CPU: 0 PID: 1261 at drivers/iommu/iommufd/pages.c:886 update_unpinned+0x75/0x80
[   59.612107] Modules linked in:
[   59.612338] CPU: 0 PID: 1261 Comm: repro Tainted: G    B   W          6.1.0-a0a6c76cf2a5+ #1
[   59.612970] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   59.614042] RIP: 0010:update_unpinned+0x75/0x80
[   59.614379] Code: ac 2b ff 48 89 de 31 c9 31 d2 4c 29 e6 4c 89 ef e8 70 fb ff ff e8 bb ac 2b ff 5b 41 5c 41 5d 5d c3 cc cc cc cc e8 ab ac 2b ff <0f> 0b eb e7 0f 1f 80 00 00 00 00 0f 1f 44 00 00 55 48 89 e5 41 57
[   59.615695] RSP: 0018:ffffc900022bba08 EFLAGS: 00010246
[   59.616094] RAX: 0000000000000000 RBX: 0000000000000000 RCX: ffffffff81fdfdcf
[   59.616591] RDX: 0000000000000000 RSI: ffff8880135dd300 RDI: 0000000000000002
[   59.617132] RBP: ffffc900022bba20 R08: 0000000000000000 R09: ffff88807dc3b890
[   59.617833] R10: 0000000000000bd9 R11: 0000000000000000 R12: ffffffffffffffff
[   59.618350] R13: ffff888009f84c00 R14: 0000000000000002 R15: 0000000000000002
[   59.618867] FS:  0000000000000000(0000) GS:ffff88807dc00000(0000) knlGS:0000000000000000
[   59.619452] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   59.619864] CR2: 00007f3777c1e580 CR3: 0000000013558004 CR4: 0000000000770ef0
[   59.620370] PKRU: 55555554
[   59.620575] Call Trace:
[   59.620784]  <TASK>
[   59.621038]  iopt_pages_unfill_xarray+0x522/0x5c0
[   59.621583]  ? rcu_read_lock_sched_held+0x29/0x80
[   59.621953]  ? rcu_read_lock_held_common+0x12/0x50
[   59.622304]  ? write_comp_data+0x2f/0x90
[   59.622653]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   59.623024]  ? write_comp_data+0x2f/0x90
[   59.623326]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   59.623686]  ? interval_tree_remove+0x291/0x4e0
[   59.624031]  ? write_comp_data+0x2f/0x90
[   59.624332]  iopt_area_remove_access+0x108/0x120
[   59.624711]  iommufd_access_unpin_pages+0x177/0x210
[   59.625278]  iommufd_test_access_unmap+0xe0/0x130
[   59.625778]  ? iommufd_test_access_unmap+0x130/0x130
[   59.626156]  iommufd_test_staccess_release+0x39/0x60
[   59.626539]  __fput+0x11f/0x450
[   59.626801]  ____fput+0x1e/0x30
[   59.627046]  task_work_run+0xb6/0x120
[   59.627324]  do_exit+0x521/0x1340
[   59.627576]  ? lock_release+0x202/0x2c0
[   59.627876]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   59.628226]  ? trace_hardirqs_on+0x3f/0x100
[   59.628543]  do_group_exit+0x5e/0xf0
[   59.628836]  __x64_sys_exit_group+0x25/0x30
[   59.629311]  do_syscall_64+0x3b/0x90
[   59.629744]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   59.630212] RIP: 0033:0x7f3777be6cf6
[   59.630484] Code: Unable to access opcode bytes at 0x7f3777be6ccc.
[   59.630913] RSP: 002b:00007ffd0d7278d8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
[   59.631472] RAX: ffffffffffffffda RBX: 00007f3777cf1490 RCX: 00007f3777be6cf6
[   59.631975] RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
[   59.632496] RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffff80
[   59.633026] R10: 0000000000000004 R11: 0000000000000246 R12: 00007f3777cf1490
[   59.633759] R13: 0000000000000001 R14: 00007f3777cf4e88 R15: 0000000000000000
[   59.634290]  </TASK>
[   59.634458] irq event stamp: 0
[   59.634693] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   59.635138] hardirqs last disabled at (0): [<ffffffff810fff0c>] copy_process+0x11cc/0x2b10
[   59.635752] softirqs last  enabled at (0): [<ffffffff810fff10>] copy_process+0x11d0/0x2b10
[   59.636347] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   59.636813] ---[ end trace 0000000000000000 ]---
[   59.637945] ------------[ cut here ]------------
[   59.638564] WARNING: CPU: 0 PID: 1261 at drivers/iommu/iommufd/pages.c:1181 iopt_release_pages+0x159/0x190
[   59.639730] Modules linked in:
[   59.640199] CPU: 0 PID: 1261 Comm: repro Tainted: G    B   W          6.1.0-a0a6c76cf2a5+ #1
[   59.641302] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   59.642659] RIP: 0010:iopt_release_pages+0x159/0x190
[   59.643213] Code: b5 11 ff eb cb e8 87 90 2b ff be 03 00 00 00 4c 89 f7 e8 6a 8b ce ff eb b7 e8 73 90 2b ff 0f 0b e9 ed fe ff ff e8 67 90 2b ff <0f> 0b e9 00 ff ff ff e8 5b 90 2b ff 0f 0b e9 07 ff ff ff e8 4f 90
[   59.645017] RSP: 0018:ffffc900022bbc88 EFLAGS: 00010246
[   59.645612] RAX: 0000000000000000 RBX: ffff888009f84c00 RCX: ffffffff81fe1957
[   59.646242] RDX: 0000000000000000 RSI: ffff8880135dd300 RDI: 0000000000000002
[   59.646753] RBP: ffffc900022bbca8 R08: 0000000000000000 R09: 0000000000000000
[   59.647263] R10: ffffc900022bbc58 R11: 0000000000000000 R12: ffffffffffffffff
[   59.647776] R13: 0000000001000000 R14: 00000000017fffff R15: 0000000000000000
[   59.648272] FS:  0000000000000000(0000) GS:ffff88807dc00000(0000) knlGS:0000000000000000
[   59.648880] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   59.649540] CR2: 00007f3777c1e580 CR3: 0000000013558004 CR4: 0000000000770ef0
[   59.650049] PKRU: 55555554
[   59.650254] Call Trace:
[   59.650442]  <TASK>
[   59.650634]  iopt_unmap_iova_range+0x1ef/0x2e0
[   59.650979]  iopt_unmap_all+0x2f/0x60
[   59.651267]  iommufd_ioas_destroy+0x2c/0x70
[   59.651602]  iommufd_fops_release+0xd4/0x170
[   59.651927]  ? iommufd_ctx_get+0x30/0x30
[   59.652224]  __fput+0x11f/0x450
[   59.652478]  ____fput+0x1e/0x30
[   59.652769]  task_work_run+0xb6/0x120
[   59.653219]  do_exit+0x521/0x1340
[   59.653617]  ? lock_release+0x202/0x2c0
[   59.654065]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   59.654432]  ? trace_hardirqs_on+0x3f/0x100
[   59.654765]  do_group_exit+0x5e/0xf0
[   59.655054]  __x64_sys_exit_group+0x25/0x30
[   59.655382]  do_syscall_64+0x3b/0x90
[   59.655666]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   59.656061] RIP: 0033:0x7f3777be6cf6
[   59.656338] Code: Unable to access opcode bytes at 0x7f3777be6ccc.
[   59.656814] RSP: 002b:00007ffd0d7278d8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
[   59.657671] RAX: ffffffffffffffda RBX: 00007f3777cf1490 RCX: 00007f3777be6cf6
[   59.658202] RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
[   59.658724] RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffff80
[   59.659254] R10: 0000000000000004 R11: 0000000000000246 R12: 00007f3777cf1490
[   59.659784] R13: 0000000000000001 R14: 00007f3777cf4e88 R15: 0000000000000000
[   59.660319]  </TASK>
[   59.660493] irq event stamp: 0
[   59.660750] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   59.661501] hardirqs last disabled at (0): [<ffffffff810fff0c>] copy_process+0x11cc/0x2b10
[   59.662107] softirqs last  enabled at (0): [<ffffffff810fff10>] copy_process+0x11d0/0x2b10
[   59.662734] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   59.663200] ---[ end trace 0000000000000000 ]---
[   59.753823] ------------[ cut here ]------------
[   59.754207] WARNING: CPU: 0 PID: 1265 at drivers/iommu/iommufd/pages.c:294 __iopt_area_unfill_domain+0x152/0x560
[   59.754960] Modules linked in:
[   59.755196] CPU: 0 PID: 1265 Comm: repro Tainted: G    B   W          6.1.0-a0a6c76cf2a5+ #1
[   59.755816] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   59.756640] RIP: 0010:__iopt_area_unfill_domain+0x152/0x560
[   59.757315] Code: a1 2b ff 44 8b 64 24 54 48 8b 44 24 48 31 ff 44 89 e6 48 89 44 24 38 e8 6c a2 2b ff 45 85 e4 0f 85 eb 01 00 00 e8 ee a0 2b ff <0f> 0b e8 e7 a0 2b ff 48 8b 44 24 38 89 5c 24 58 89 18 8b 44 24 54
[   59.758728] RSP: 0018:ffffc900022dbae0 EFLAGS: 00010246
[   59.759109] RAX: 0000000000000000 RBX: 00000000ffffffff RCX: ffffffff81fe0bd5
[   59.759648] RDX: 0000000000000000 RSI: ffff8880135dd300 RDI: 0000000000000002
[   59.760170] RBP: ffffc900022dbd10 R08: 000000000003b5c5 R09: 000000000000000a
[   59.760726] R10: 000000000003b5a0 R11: 0000000000000024 R12: 0000000000000001
[   59.761404] R13: 0000000000000801 R14: 00000000000007ff R15: 0000000000000800
[   59.761939] FS:  00007f3777af9740(0000) GS:ffff88807dc00000(0000) knlGS:0000000000000000
[   59.762522] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   59.762957] CR2: 00007f3777c1e580 CR3: 00000000174d4004 CR4: 0000000000770ef0
[   59.763484] PKRU: 55555554
[   59.763693] Call Trace:
[   59.763894]  <TASK>
[   59.764076]  ? rcu_read_lock_sched_held+0x29/0x80
[   59.764438]  ? lock_acquire+0x1a1/0x2f0
[   59.764761]  ? rcu_read_lock_held_common+0x12/0x50
[   59.765341]  ? rcu_read_lock_sched_held+0x29/0x80
[   59.765854]  ? __mutex_lock+0x13a/0xf30
[   59.766155]  ? write_comp_data+0x2f/0x90
[   59.766457]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   59.766840]  iopt_area_unfill_domain+0x32/0x40
[   59.767193]  iopt_table_remove_domain+0x23f/0x4c0
[   59.767562]  iommufd_device_selftest_detach+0x3a/0x90
[   59.767967]  iommufd_selftest_destroy+0x55/0x70
[   59.768315]  iommufd_object_destroy_user+0xce/0x130
[   59.768710]  iommufd_destroy+0xa2/0xc0
[   59.769160]  iommufd_fops_ioctl+0x1ef/0x310
[   59.769656]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   59.770014]  ? write_comp_data+0x2f/0x90
[   59.770319]  __x64_sys_ioctl+0x10e/0x160
[   59.770639]  ? iommufd_get_object.part.6+0x1c0/0x1c0
[   59.771028]  do_syscall_64+0x3b/0x90
[   59.771305]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   59.771690] RIP: 0033:0x7f3777c1e59d
[   59.771978] Code: 00 c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d d3 08 0d 00 f7 d8 64 89 01 48
[   59.773337] RSP: 002b:00007ffd0d727918 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   59.774162] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f3777c1e59d
[   59.774681] RDX: 0000000020000140 RSI: 0000000000003b80 RDI: 0000000000000003
[   59.775199] RBP: 00007ffd0d727930 R08: 00007ffd0d727930 R09: 00007ffd0d727930
[   59.775704] R10: 00007ffd0d727930 R11: 0000000000000213 R12: 0000000000401180
[   59.776208] R13: 00007ffd0d727a50 R14: 0000000000000000 R15: 0000000000000000
[   59.776759]  </TASK>
[   59.777024] irq event stamp: 0
[   59.777382] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   59.777841] hardirqs last disabled at (0): [<ffffffff810fff0c>] copy_process+0x11cc/0x2b10
[   59.778447] softirqs last  enabled at (0): [<ffffffff810fff10>] copy_process+0x11d0/0x2b10
[   59.779052] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   59.779511] ---[ end trace 0000000000000000 ]---
[   59.779930] ------------[ cut here ]------------
[   59.780255] WARNING: CPU: 0 PID: 1265 at drivers/iommu/iommufd/pages.c:1290 __iopt_area_unfill_domain+0x54f/0x560
[   59.781027] Modules linked in:
[   59.781393] CPU: 0 PID: 1265 Comm: repro Tainted: G    B   W          6.1.0-a0a6c76cf2a5+ #1
[   59.782160] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   59.782978] RIP: 0010:__iopt_area_unfill_domain+0x54f/0x560
[   59.783390] Code: e8 86 9e 2b ff 85 db 0f 85 35 fb ff ff e8 09 9d 2b ff 0f 0b e9 29 fb ff ff e8 fd 9c 2b ff 0f 0b e9 69 fe ff ff e8 f1 9c 2b ff <0f> 0b e9 58 ff ff ff e8 65 2d dc 00 0f 1f 44 00 00 0f 1f 44 00 00
[   59.784711] RSP: 0018:ffffc900022dbae0 EFLAGS: 00010246
[   59.785297] RAX: 0000000000000000 RBX: 00000000ffffffff RCX: ffffffff81fe0d26
[   59.786279] RDX: 0000000000000000 RSI: ffff8880135dd300 RDI: 0000000000000002
[   59.787206] RBP: ffffc900022dbd10 R08: 000000000003b5c5 R09: 000000000000000a
[   59.788124] R10: 000000000003b5a0 R11: 0000000000000024 R12: 00000000000007ff
[   59.789056] R13: 0000000000000801 R14: 00000000000007ff R15: 0000000000000800
[   59.789840] FS:  00007f3777af9740(0000) GS:ffff88807dc00000(0000) knlGS:0000000000000000
[   59.790788] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   59.791444] CR2: 00007f3777c1e580 CR3: 00000000174d4004 CR4: 0000000000770ef0
[   59.792025] PKRU: 55555554
[   59.792228] Call Trace:
[   59.792412]  <TASK>
[   59.792600]  ? rcu_read_lock_sched_held+0x29/0x80
[   59.792989]  ? lock_acquire+0x1a1/0x2f0
[   59.793444]  ? rcu_read_lock_held_common+0x12/0x50
[   59.793958]  ? rcu_read_lock_sched_held+0x29/0x80
[   59.794319]  ? __mutex_lock+0x13a/0xf30
[   59.794635]  ? write_comp_data+0x2f/0x90
[   59.794930]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   59.795289]  iopt_area_unfill_domain+0x32/0x40
[   59.795624]  iopt_table_remove_domain+0x23f/0x4c0
[   59.795986]  iommufd_device_selftest_detach+0x3a/0x90
[   59.796371]  iommufd_selftest_destroy+0x55/0x70
[   59.796740]  iommufd_object_destroy_user+0xce/0x130
[   59.797305]  iommufd_destroy+0xa2/0xc0
[   59.797709]  iommufd_fops_ioctl+0x1ef/0x310
[   59.798046]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   59.798399]  ? write_comp_data+0x2f/0x90
[   59.798703]  __x64_sys_ioctl+0x10e/0x160
[   59.799017]  ? iommufd_get_object.part.6+0x1c0/0x1c0
[   59.799389]  do_syscall_64+0x3b/0x90
[   59.799669]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   59.800053] RIP: 0033:0x7f3777c1e59d
[   59.800319] Code: 00 c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d d3 08 0d 00 f7 d8 64 89 01 48
[   59.801622] RSP: 002b:00007ffd0d727918 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   59.802490] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f3777c1e59d
[   59.803012] RDX: 0000000020000140 RSI: 0000000000003b80 RDI: 0000000000000003
[   59.803527] RBP: 00007ffd0d727930 R08: 00007ffd0d727930 R09: 00007ffd0d727930
[   59.804022] R10: 00007ffd0d727930 R11: 0000000000000213 R12: 0000000000401180
[   59.804532] R13: 00007ffd0d727a50 R14: 0000000000000000 R15: 0000000000000000
[   59.805081]  </TASK>
[   59.805354] irq event stamp: 0
[   59.805710] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   59.806156] hardirqs last disabled at (0): [<ffffffff810fff0c>] copy_process+0x11cc/0x2b10
[   59.806766] softirqs last  enabled at (0): [<ffffffff810fff10>] copy_process+0x11d0/0x2b10
[   59.807357] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   59.807817] ---[ end trace 0000000000000000 ]---
[   59.812784] ------------[ cut here ]------------
[   59.813140] WARNING: CPU: 1 PID: 1265 at drivers/iommu/iommufd/pages.c:178 batch_unpin.isra.23+0x151/0x1a0
[   59.813851] Modules linked in:
[   59.814087] CPU: 1 PID: 1265 Comm: repro Tainted: G    B   W          6.1.0-a0a6c76cf2a5+ #1
[   59.814718] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   59.815558] RIP: 0010:batch_unpin.isra.23+0x151/0x1a0
[   59.815938] Code: e8 c4 be 2b ff 48 8b 45 d0 48 85 c0 75 17 e8 26 bd 2b ff 48 8b 7d c8 48 89 de e8 fa bd 2b ff 48 39 5d c8 73 07 e8 0f bd 2b ff <0f> 0b e8 08 bd 2b ff 4d 29 e5 31 ff 41 83 c6 01 4c 89 ee 31 db e8
[   59.817385] RSP: 0018:ffffc900022db9d8 EFLAGS: 00010246
[   59.817997] RAX: 0000000000000000 RBX: ffffffffffffffff RCX: ffffffff81fded8c
[   59.818607] RDX: 0000000000000000 RSI: ffff8880135dd300 RDI: 0000000000000002
[   59.819127] RBP: ffffc900022dba20 R08: 0000000000000000 R09: ffff88807dd3b890
[   59.819655] R10: 0000000000001afd R11: 0000000000000000 R12: 0000000000000001
[   59.820175] R13: 0000000000000001 R14: 0000000000000000 R15: ffff888009f84c00
[   59.820724] FS:  0000000000000000(0000) GS:ffff88807dd00000(0000) knlGS:0000000000000000
[   59.821517] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   59.821937] CR2: 00007fd6e4965000 CR3: 00000000099ce001 CR4: 0000000000770ee0
[   59.822453] PKRU: 55555554
[   59.822684] Call Trace:
[   59.822874]  <TASK>
[   59.823045]  iopt_pages_unfill_xarray+0x39f/0x5c0
[   59.823424]  ? rcu_read_lock_held_common+0x12/0x50
[   59.823801]  ? write_comp_data+0x2f/0x90
[   59.824098]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   59.824446]  ? write_comp_data+0x2f/0x90
[   59.824792]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   59.825341]  ? interval_tree_remove+0x291/0x4e0
[   59.825886]  ? write_comp_data+0x2f/0x90
[   59.826196]  iopt_area_remove_access+0x108/0x120
[   59.826565]  iommufd_access_unpin_pages+0x177/0x210
[   59.826950]  iommufd_test_access_unmap+0xe0/0x130
[   59.827315]  ? iommufd_test_access_unmap+0x130/0x130
[   59.827699]  iommufd_test_staccess_release+0x39/0x60
[   59.828093]  __fput+0x11f/0x450
[   59.828345]  ____fput+0x1e/0x30
[   59.828596]  task_work_run+0xb6/0x120
[   59.828929]  do_exit+0x521/0x1340
[   59.829331]  ? lock_release+0x202/0x2c0
[   59.829794]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   59.830240]  ? trace_hardirqs_on+0x3f/0x100
[   59.830577]  do_group_exit+0x5e/0xf0
[   59.830853]  __x64_sys_exit_group+0x25/0x30
[   59.831183]  do_syscall_64+0x3b/0x90
[   59.831472]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   59.831852] RIP: 0033:0x7f3777be6cf6
[   59.832134] Code: Unable to access opcode bytes at 0x7f3777be6ccc.
[   59.832587] RSP: 002b:00007ffd0d7278d8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
[   59.833173] RAX: ffffffffffffffda RBX: 00007f3777cf1490 RCX: 00007f3777be6cf6
[   59.833982] RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
[   59.834527] RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffff80
[   59.835039] R10: 0000000000000004 R11: 0000000000000246 R12: 00007f3777cf1490
[   59.835574] R13: 0000000000000001 R14: 00007f3777cf4e88 R15: 0000000000000000
[   59.836098]  </TASK>
[   59.836271] irq event stamp: 0
[   59.836513] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   59.836991] hardirqs last disabled at (0): [<ffffffff810fff0c>] copy_process+0x11cc/0x2b10
[   59.837862] softirqs last  enabled at (0): [<ffffffff810fff10>] copy_process+0x11d0/0x2b10
[   59.838472] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   59.838949] ---[ end trace 0000000000000000 ]---
[   59.839388] ------------[ cut here ]------------
[   59.839767] WARNING: CPU: 1 PID: 1265 at drivers/iommu/iommufd/pages.c:886 update_unpinned+0x75/0x80
[   59.840441] Modules linked in:
[   59.840724] CPU: 1 PID: 1265 Comm: repro Tainted: G    B   W          6.1.0-a0a6c76cf2a5+ #1
[   59.841328] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   59.842181] RIP: 0010:update_unpinned+0x75/0x80
[   59.842524] Code: ac 2b ff 48 89 de 31 c9 31 d2 4c 29 e6 4c 89 ef e8 70 fb ff ff e8 bb ac 2b ff 5b 41 5c 41 5d 5d c3 cc cc cc cc e8 ab ac 2b ff <0f> 0b eb e7 0f 1f 80 00 00 00 00 0f 1f 44 00 00 55 48 89 e5 41 57
[   59.843861] RSP: 0018:ffffc900022dba08 EFLAGS: 00010246
[   59.844273] RAX: 0000000000000000 RBX: 0000000000000000 RCX: ffffffff81fdfdcf
[   59.844806] RDX: 0000000000000000 RSI: ffff8880135dd300 RDI: 0000000000000002
[   59.845348] RBP: ffffc900022dba20 R08: 0000000000000000 R09: ffff88807dd3b890
[   59.845860] R10: 0000000000001afd R11: 0000000000000000 R12: ffffffffffffffff
[   59.846403] R13: ffff888009f84c00 R14: 0000000000000002 R15: 0000000000000002
[   59.846932] FS:  0000000000000000(0000) GS:ffff88807dd00000(0000) knlGS:0000000000000000
[   59.847541] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   59.847963] CR2: 00007fd6e4965000 CR3: 00000000099ce001 CR4: 0000000000770ee0
[   59.848504] PKRU: 55555554
[   59.848726] Call Trace:
[   59.848918]  <TASK>
[   59.849088]  iopt_pages_unfill_xarray+0x522/0x5c0
[   59.849497]  ? rcu_read_lock_held_common+0x12/0x50
[   59.849861]  ? write_comp_data+0x2f/0x90
[   59.850163]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   59.850574]  ? write_comp_data+0x2f/0x90
[   59.850877]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   59.851243]  ? interval_tree_remove+0x291/0x4e0
[   59.851609]  ? write_comp_data+0x2f/0x90
[   59.851936]  iopt_area_remove_access+0x108/0x120
[   59.852294]  iommufd_access_unpin_pages+0x177/0x210
[   59.852690]  iommufd_test_access_unmap+0xe0/0x130
[   59.853085]  ? iommufd_test_access_unmap+0x130/0x130
[   59.853463]  iommufd_test_staccess_release+0x39/0x60
[   59.853880]  __fput+0x11f/0x450
[   59.854137]  ____fput+0x1e/0x30
[   59.854388]  task_work_run+0xb6/0x120
[   59.854692]  do_exit+0x521/0x1340
[   59.854978]  ? lock_release+0x202/0x2c0
[   59.855274]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   59.855632]  ? trace_hardirqs_on+0x3f/0x100
[   59.855958]  do_group_exit+0x5e/0xf0
[   59.856260]  __x64_sys_exit_group+0x25/0x30
[   59.856585]  do_syscall_64+0x3b/0x90
[   59.856883]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   59.857286] RIP: 0033:0x7f3777be6cf6
[   59.857578] Code: Unable to access opcode bytes at 0x7f3777be6ccc.
[   59.858027] RSP: 002b:00007ffd0d7278d8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
[   59.858610] RAX: ffffffffffffffda RBX: 00007f3777cf1490 RCX: 00007f3777be6cf6
[   59.859120] RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
[   59.859662] RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffff80
[   59.860184] R10: 0000000000000004 R11: 0000000000000246 R12: 00007f3777cf1490
[   59.860737] R13: 0000000000000001 R14: 00007f3777cf4e88 R15: 0000000000000000
[   59.861254]  </TASK>
[   59.861435] irq event stamp: 0
[   59.861693] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   59.862163] hardirqs last disabled at (0): [<ffffffff810fff0c>] copy_process+0x11cc/0x2b10
[   59.862803] softirqs last  enabled at (0): [<ffffffff810fff10>] copy_process+0x11d0/0x2b10
[   59.863413] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   59.863896] ---[ end trace 0000000000000000 ]---
[   59.864534] ------------[ cut here ]------------
[   59.865112] WARNING: CPU: 0 PID: 1265 at drivers/iommu/iommufd/pages.c:1181 iopt_release_pages+0x159/0x190
[   59.866182] Modules linked in:
[   59.866560] CPU: 0 PID: 1265 Comm: repro Tainted: G    B   W          6.1.0-a0a6c76cf2a5+ #1
[   59.867477] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   59.868694] RIP: 0010:iopt_release_pages+0x159/0x190
[   59.869267] Code: b5 11 ff eb cb e8 87 90 2b ff be 03 00 00 00 4c 89 f7 e8 6a 8b ce ff eb b7 e8 73 90 2b ff 0f 0b e9 ed fe ff ff e8 67 90 2b ff <0f> 0b e9 00 ff ff ff e8 5b 90 2b ff 0f 0b e9 07 ff ff ff e8 4f 90
[   59.871292] RSP: 0018:ffffc900022dbc88 EFLAGS: 00010246
[   59.871891] RAX: 0000000000000000 RBX: ffff888009f84c00 RCX: ffffffff81fe1957
[   59.872729] RDX: 0000000000000000 RSI: ffff8880135dd300 RDI: 0000000000000002
[   59.873511] RBP: ffffc900022dbca8 R08: 0000000000000000 R09: 0000000000000000
[   59.874320] R10: ffffc900022dbc58 R11: 0000000000000000 R12: ffffffffffffffff
[   59.875147] R13: 0000000001000000 R14: 00000000017fffff R15: 0000000000000000
[   59.875952] FS:  0000000000000000(0000) GS:ffff88807dc00000(0000) knlGS:0000000000000000
[   59.876850] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   59.877501] CR2: 00007fd6e496d000 CR3: 0000000013558005 CR4: 0000000000770ef0
[   59.878300] PKRU: 55555554
[   59.878619] Call Trace:
[   59.878898]  <TASK>
[   59.879158]  iopt_unmap_iova_range+0x1ef/0x2e0
[   59.879683]  iopt_unmap_all+0x2f/0x60
[   59.880122]  iommufd_ioas_destroy+0x2c/0x70
[   59.880613]  iommufd_fops_release+0xd4/0x170
[   59.881153]  ? iommufd_ctx_get+0x30/0x30
[   59.881634]  __fput+0x11f/0x450
[   59.882028]  ____fput+0x1e/0x30
[   59.882407]  task_work_run+0xb6/0x120
[   59.882816]  do_exit+0x521/0x1340
[   59.883172]  ? lock_release+0x202/0x2c0
[   59.883606]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   59.884156]  ? trace_hardirqs_on+0x3f/0x100
[   59.884649]  do_group_exit+0x5e/0xf0
[   59.885117]  __x64_sys_exit_group+0x25/0x30
[   59.885620]  do_syscall_64+0x3b/0x90
[   59.886054]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   59.886642] RIP: 0033:0x7f3777be6cf6
[   59.887057] Code: Unable to access opcode bytes at 0x7f3777be6ccc.
[   59.887744] RSP: 002b:00007ffd0d7278d8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
[   59.888595] RAX: ffffffffffffffda RBX: 00007f3777cf1490 RCX: 00007f3777be6cf6
[   59.889412] RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
[   59.890224] RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffff80
[   59.891007] R10: 0000000000000004 R11: 0000000000000246 R12: 00007f3777cf1490
[   59.891803] R13: 0000000000000001 R14: 00007f3777cf4e88 R15: 0000000000000000
[   59.892622]  </TASK>
[   59.892917] irq event stamp: 0
[   59.893282] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   59.893992] hardirqs last disabled at (0): [<ffffffff810fff0c>] copy_process+0x11cc/0x2b10
[   59.894900] softirqs last  enabled at (0): [<ffffffff810fff10>] copy_process+0x11d0/0x2b10
[   59.895822] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   59.896534] ---[ end trace 0000000000000000 ]---
[   60.112994] ------------[ cut here ]------------
[   60.113366] WARNING: CPU: 0 PID: 1275 at drivers/iommu/iommufd/pages.c:294 __iopt_area_unfill_domain+0x152/0x560
[   60.114104] Modules linked in:
[   60.114346] CPU: 0 PID: 1275 Comm: repro Tainted: G    B   W          6.1.0-a0a6c76cf2a5+ #1
[   60.114951] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   60.115762] RIP: 0010:__iopt_area_unfill_domain+0x152/0x560
[   60.116171] Code: a1 2b ff 44 8b 64 24 54 48 8b 44 24 48 31 ff 44 89 e6 48 89 44 24 38 e8 6c a2 2b ff 45 85 e4 0f 85 eb 01 00 00 e8 ee a0 2b ff <0f> 0b e8 e7 a0 2b ff 48 8b 44 24 38 89 5c 24 58 89 18 8b 44 24 54
[   60.117592] RSP: 0018:ffffc9000232bae0 EFLAGS: 00010246
[   60.118181] RAX: 0000000000000000 RBX: 00000000ffffffff RCX: ffffffff81fe0bd5
[   60.118961] RDX: 0000000000000000 RSI: ffff8880135d8000 RDI: 0000000000000002
[   60.120002] RBP: ffffc9000232bd10 R08: 000000000003b5c5 R09: 000000000000000f
[   60.121082] R10: 000000000003b5a0 R11: 0000000000000024 R12: 0000000000000001
[   60.121878] R13: 0000000000000801 R14: 00000000000007ff R15: 0000000000000800
[   60.122661] FS:  00007f3777af9740(0000) GS:ffff88807dc00000(0000) knlGS:0000000000000000
[   60.123541] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   60.124176] CR2: 00007f3777c1e580 CR3: 000000001749a001 CR4: 0000000000770ef0
[   60.124977] PKRU: 55555554
[   60.125292] Call Trace:
[   60.125570]  <TASK>
[   60.125827]  ? rcu_read_lock_sched_held+0x29/0x80
[   60.126343]  ? lock_acquire+0x1a1/0x2f0
[   60.126781]  ? rcu_read_lock_held_common+0x12/0x50
[   60.127312]  ? rcu_read_lock_sched_held+0x29/0x80
[   60.127816]  ? __mutex_lock+0x13a/0xf30
[   60.128257]  ? write_comp_data+0x2f/0x90
[   60.128737]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   60.129295]  iopt_area_unfill_domain+0x32/0x40
[   60.129775]  iopt_table_remove_domain+0x23f/0x4c0
[   60.130285]  iommufd_device_selftest_detach+0x3a/0x90
[   60.130906]  iommufd_selftest_destroy+0x55/0x70
[   60.131446]  iommufd_object_destroy_user+0xce/0x130
[   60.131998]  iommufd_destroy+0xa2/0xc0
[   60.132449]  iommufd_fops_ioctl+0x1ef/0x310
[   60.132973]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   60.133530]  ? write_comp_data+0x2f/0x90
[   60.134005]  __x64_sys_ioctl+0x10e/0x160
[   60.134484]  ? iommufd_get_object.part.6+0x1c0/0x1c0
[   60.135058]  do_syscall_64+0x3b/0x90
[   60.135487]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   60.136070] RIP: 0033:0x7f3777c1e59d
[   60.136499] Code: 00 c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d d3 08 0d 00 f7 d8 64 89 01 48
[   60.138579] RSP: 002b:00007ffd0d727918 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   60.139418] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f3777c1e59d
[   60.140230] RDX: 0000000020000140 RSI: 0000000000003b80 RDI: 0000000000000003
[   60.141043] RBP: 00007ffd0d727930 R08: 00007ffd0d727930 R09: 00007ffd0d727930
[   60.141866] R10: 00007ffd0d727930 R11: 0000000000000213 R12: 0000000000401180
[   60.142645] R13: 00007ffd0d727a50 R14: 0000000000000000 R15: 0000000000000000
[   60.143450]  </TASK>
[   60.143727] irq event stamp: 0
[   60.144092] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   60.144842] hardirqs last disabled at (0): [<ffffffff810fff0c>] copy_process+0x11cc/0x2b10
[   60.145798] softirqs last  enabled at (0): [<ffffffff810fff10>] copy_process+0x11d0/0x2b10
[   60.146736] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   60.147424] ---[ end trace 0000000000000000 ]---
[   60.148103] ------------[ cut here ]------------
[   60.148632] WARNING: CPU: 0 PID: 1275 at drivers/iommu/iommufd/pages.c:1290 __iopt_area_unfill_domain+0x54f/0x560
[   60.149845] Modules linked in:
[   60.150209] CPU: 0 PID: 1275 Comm: repro Tainted: G    B   W          6.1.0-a0a6c76cf2a5+ #1
[   60.151135] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   60.152402] RIP: 0010:__iopt_area_unfill_domain+0x54f/0x560
[   60.153093] Code: e8 86 9e 2b ff 85 db 0f 85 35 fb ff ff e8 09 9d 2b ff 0f 0b e9 29 fb ff ff e8 fd 9c 2b ff 0f 0b e9 69 fe ff ff e8 f1 9c 2b ff <0f> 0b e9 58 ff ff ff e8 65 2d dc 00 0f 1f 44 00 00 0f 1f 44 00 00
[   60.155121] RSP: 0018:ffffc9000232bae0 EFLAGS: 00010246
[   60.155716] RAX: 0000000000000000 RBX: 00000000ffffffff RCX: ffffffff81fe0d26
[   60.156483] RDX: 0000000000000000 RSI: ffff8880135d8000 RDI: 0000000000000002
[   60.157297] RBP: ffffc9000232bd10 R08: 000000000003b5c5 R09: 000000000000000f
[   60.158106] R10: 000000000003b5a0 R11: 0000000000000024 R12: 00000000000007ff
[   60.158897] R13: 0000000000000801 R14: 00000000000007ff R15: 0000000000000800
[   60.159700] FS:  00007f3777af9740(0000) GS:ffff88807dc00000(0000) knlGS:0000000000000000
[   60.160617] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   60.161307] CR2: 00007f3777c1e580 CR3: 000000001749a001 CR4: 0000000000770ef0
[   60.162108] PKRU: 55555554
[   60.162432] Call Trace:
[   60.162724]  <TASK>
[   60.162990]  ? rcu_read_lock_sched_held+0x29/0x80
[   60.163548]  ? lock_acquire+0x1a1/0x2f0
[   60.164012]  ? rcu_read_lock_held_common+0x12/0x50
[   60.164582]  ? rcu_read_lock_sched_held+0x29/0x80
[   60.165167]  ? __mutex_lock+0x13a/0xf30
[   60.165640]  ? write_comp_data+0x2f/0x90
[   60.166102]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   60.166681]  iopt_area_unfill_domain+0x32/0x40
[   60.167204]  iopt_table_remove_domain+0x23f/0x4c0
[   60.167750]  iommufd_device_selftest_detach+0x3a/0x90
[   60.168344]  iommufd_selftest_destroy+0x55/0x70
[   60.168917]  iommufd_object_destroy_user+0xce/0x130
[   60.169487]  iommufd_destroy+0xa2/0xc0
[   60.169933]  iommufd_fops_ioctl+0x1ef/0x310
[   60.170427]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   60.170980]  ? write_comp_data+0x2f/0x90
[   60.171445]  __x64_sys_ioctl+0x10e/0x160
[   60.171927]  ? iommufd_get_object.part.6+0x1c0/0x1c0
[   60.172504]  do_syscall_64+0x3b/0x90
[   60.172971]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   60.173519] RIP: 0033:0x7f3777c1e59d
[   60.173939] Code: 00 c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d d3 08 0d 00 f7 d8 64 89 01 48
[   60.175974] RSP: 002b:00007ffd0d727918 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   60.176869] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f3777c1e59d
[   60.177643] RDX: 0000000020000140 RSI: 0000000000003b80 RDI: 0000000000000003
[   60.178419] RBP: 00007ffd0d727930 R08: 00007ffd0d727930 R09: 00007ffd0d727930
[   60.179187] R10: 00007ffd0d727930 R11: 0000000000000213 R12: 0000000000401180
[   60.179985] R13: 00007ffd0d727a50 R14: 0000000000000000 R15: 0000000000000000
[   60.180824]  </TASK>
[   60.181088] irq event stamp: 0
[   60.181435] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   60.182115] hardirqs last disabled at (0): [<ffffffff810fff0c>] copy_process+0x11cc/0x2b10
[   60.183035] softirqs last  enabled at (0): [<ffffffff810fff10>] copy_process+0x11d0/0x2b10
[   60.184041] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   60.184754] ---[ end trace 0000000000000000 ]---
[   60.189922] ------------[ cut here ]------------
[   60.190445] WARNING: CPU: 1 PID: 1275 at drivers/iommu/iommufd/pages.c:178 batch_unpin.isra.23+0x151/0x1a0
[   60.191556] Modules linked in:
[   60.191914] CPU: 1 PID: 1275 Comm: repro Tainted: G    B   W          6.1.0-a0a6c76cf2a5+ #1
[   60.192882] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   60.194142] RIP: 0010:batch_unpin.isra.23+0x151/0x1a0
[   60.194729] Code: e8 c4 be 2b ff 48 8b 45 d0 48 85 c0 75 17 e8 26 bd 2b ff 48 8b 7d c8 48 89 de e8 fa bd 2b ff 48 39 5d c8 73 07 e8 0f bd 2b ff <0f> 0b e8 08 bd 2b ff 4d 29 e5 31 ff 41 83 c6 01 4c 89 ee 31 db e8
[   60.196828] RSP: 0018:ffffc9000232b9d8 EFLAGS: 00010246
[   60.197449] RAX: 0000000000000000 RBX: ffffffffffffffff RCX: ffffffff81fded8c
[   60.198278] RDX: 0000000000000000 RSI: ffff8880135d8000 RDI: 0000000000000002
[   60.199090] RBP: ffffc9000232ba20 R08: 0000000000000000 R09: ffff88807dd3b890
[   60.199970] R10: 0000000000001ac2 R11: 0000000000000000 R12: 0000000000000001
[   60.200856] R13: 0000000000000001 R14: 0000000000000000 R15: ffff888009f84c00
[   60.201753] FS:  0000000000000000(0000) GS:ffff88807dd00000(0000) knlGS:0000000000000000
[   60.202744] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   60.203442] CR2: 00007f3777cf0500 CR3: 0000000013558001 CR4: 0000000000770ee0
[   60.204321] PKRU: 55555554
[   60.204675] Call Trace:
[   60.204967]  <TASK>
[   60.205328]  iopt_pages_unfill_xarray+0x39f/0x5c0
[   60.205930]  ? rcu_read_lock_held_common+0x12/0x50
[   60.206495]  ? write_comp_data+0x2f/0x90
[   60.207033]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   60.207578]  ? write_comp_data+0x2f/0x90
[   60.208126]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   60.208704]  ? interval_tree_remove+0x291/0x4e0
[   60.209288]  ? write_comp_data+0x2f/0x90
[   60.209895]  iopt_area_remove_access+0x108/0x120
[   60.210443]  iommufd_access_unpin_pages+0x177/0x210
[   60.211063]  iommufd_test_access_unmap+0xe0/0x130
[   60.211688]  ? iommufd_test_access_unmap+0x130/0x130
[   60.212282]  iommufd_test_staccess_release+0x39/0x60
[   60.212956]  __fput+0x11f/0x450
[   60.213415]  ____fput+0x1e/0x30
[   60.213837]  task_work_run+0xb6/0x120
[   60.214337]  do_exit+0x521/0x1340
[   60.214763]  ? lock_release+0x202/0x2c0
[   60.215235]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   60.215757]  ? trace_hardirqs_on+0x3f/0x100
[   60.216340]  do_group_exit+0x5e/0xf0
[   60.216770]  __x64_sys_exit_group+0x25/0x30
[   60.217357]  do_syscall_64+0x3b/0x90
[   60.217776]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   60.218449] RIP: 0033:0x7f3777be6cf6
[   60.218859] Code: Unable to access opcode bytes at 0x7f3777be6ccc.
[   60.219619] RSP: 002b:00007ffd0d7278d8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
[   60.220572] RAX: ffffffffffffffda RBX: 00007f3777cf1490 RCX: 00007f3777be6cf6
[   60.221427] RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
[   60.222299] RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffff80
[   60.223145] R10: 0000000000000004 R11: 0000000000000246 R12: 00007f3777cf1490
[   60.224032] R13: 0000000000000001 R14: 00007f3777cf4e88 R15: 0000000000000000
[   60.224853]  </TASK>
[   60.225111] irq event stamp: 0
[   60.225443] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   60.226124] hardirqs last disabled at (0): [<ffffffff810fff0c>] copy_process+0x11cc/0x2b10
[   60.226998] softirqs last  enabled at (0): [<ffffffff810fff10>] copy_process+0x11d0/0x2b10
[   60.227850] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   60.228526] ---[ end trace 0000000000000000 ]---
[   60.229204] ------------[ cut here ]------------
[   60.229718] WARNING: CPU: 1 PID: 1275 at drivers/iommu/iommufd/pages.c:886 update_unpinned+0x75/0x80
[   60.230750] Modules linked in:
[   60.231087] CPU: 1 PID: 1275 Comm: repro Tainted: G    B   W          6.1.0-a0a6c76cf2a5+ #1
[   60.232125] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   60.233489] RIP: 0010:update_unpinned+0x75/0x80
[   60.234021] Code: ac 2b ff 48 89 de 31 c9 31 d2 4c 29 e6 4c 89 ef e8 70 fb ff ff e8 bb ac 2b ff 5b 41 5c 41 5d 5d c3 cc cc cc cc e8 ab ac 2b ff <0f> 0b eb e7 0f 1f 80 00 00 00 00 0f 1f 44 00 00 55 48 89 e5 41 57
[   60.236040] RSP: 0018:ffffc9000232ba08 EFLAGS: 00010246
[   60.236678] RAX: 0000000000000000 RBX: 0000000000000000 RCX: ffffffff81fdfdcf
[   60.237473] RDX: 0000000000000000 RSI: ffff8880135d8000 RDI: 0000000000000002
[   60.238279] RBP: ffffc9000232ba20 R08: 0000000000000000 R09: ffff88807dd3b890
[   60.239056] R10: 0000000000001ac2 R11: 0000000000000000 R12: ffffffffffffffff
[   60.239855] R13: ffff888009f84c00 R14: 0000000000000002 R15: 0000000000000002
[   60.240689] FS:  0000000000000000(0000) GS:ffff88807dd00000(0000) knlGS:0000000000000000
[   60.241618] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   60.242373] CR2: 00007f3777cf0500 CR3: 0000000013558001 CR4: 0000000000770ee0
[   60.243185] PKRU: 55555554
[   60.243507] Call Trace:
[   60.243800]  <TASK>
[   60.244064]  iopt_pages_unfill_xarray+0x522/0x5c0
[   60.244644]  ? rcu_read_lock_held_common+0x12/0x50
[   60.245276]  ? write_comp_data+0x2f/0x90
[   60.245764]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   60.246330]  ? write_comp_data+0x2f/0x90
[   60.246805]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   60.247368]  ? interval_tree_remove+0x291/0x4e0
[   60.247928]  ? write_comp_data+0x2f/0x90
[   60.248418]  iopt_area_remove_access+0x108/0x120
[   60.248998]  iommufd_access_unpin_pages+0x177/0x210
[   60.249603]  iommufd_test_access_unmap+0xe0/0x130
[   60.250186]  ? iommufd_test_access_unmap+0x130/0x130
[   60.250816]  iommufd_test_staccess_release+0x39/0x60
[   60.251414]  __fput+0x11f/0x450
[   60.251823]  ____fput+0x1e/0x30
[   60.252210]  task_work_run+0xb6/0x120
[   60.252699]  do_exit+0x521/0x1340
[   60.253122]  ? lock_release+0x202/0x2c0
[   60.253582]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   60.254125]  ? trace_hardirqs_on+0x3f/0x100
[   60.254667]  do_group_exit+0x5e/0xf0
[   60.255122]  __x64_sys_exit_group+0x25/0x30
[   60.255655]  do_syscall_64+0x3b/0x90
[   60.256104]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   60.256739] RIP: 0033:0x7f3777be6cf6
[   60.257167] Code: Unable to access opcode bytes at 0x7f3777be6ccc.
[   60.257858] RSP: 002b:00007ffd0d7278d8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
[   60.258704] RAX: ffffffffffffffda RBX: 00007f3777cf1490 RCX: 00007f3777be6cf6
[   60.259495] RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
[   60.260290] RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffff80
[   60.261107] R10: 0000000000000004 R11: 0000000000000246 R12: 00007f3777cf1490
[   60.261927] R13: 0000000000000001 R14: 00007f3777cf4e88 R15: 0000000000000000
[   60.262762]  </TASK>
[   60.263039] irq event stamp: 0
[   60.263407] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   60.264147] hardirqs last disabled at (0): [<ffffffff810fff0c>] copy_process+0x11cc/0x2b10
[   60.265139] softirqs last  enabled at (0): [<ffffffff810fff10>] copy_process+0x11d0/0x2b10
[   60.266096] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   60.266813] ---[ end trace 0000000000000000 ]---
[   60.267580] ------------[ cut here ]------------
[   60.268097] WARNING: CPU: 1 PID: 1275 at drivers/iommu/iommufd/pages.c:1181 iopt_release_pages+0x159/0x190
[   60.269206] Modules linked in:
[   60.269576] CPU: 1 PID: 1275 Comm: repro Tainted: G    B   W          6.1.0-a0a6c76cf2a5+ #1
[   60.270539] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   60.271770] RIP: 0010:iopt_release_pages+0x159/0x190
[   60.272360] Code: b5 11 ff eb cb e8 87 90 2b ff be 03 00 00 00 4c 89 f7 e8 6a 8b ce ff eb b7 e8 73 90 2b ff 0f 0b e9 ed fe ff ff e8 67 90 2b ff <0f> 0b e9 00 ff ff ff e8 5b 90 2b ff 0f 0b e9 07 ff ff ff e8 4f 90
[   60.274428] RSP: 0018:ffffc9000232bc88 EFLAGS: 00010246
[   60.275029] RAX: 0000000000000000 RBX: ffff888009f84c00 RCX: ffffffff81fe1957
[   60.275800] RDX: 0000000000000000 RSI: ffff8880135d8000 RDI: 0000000000000002
[   60.276596] RBP: ffffc9000232bca8 R08: ffff88800950d900 R09: 000000008015000c
[   60.277446] R10: 0000000000000001 R11: 0000000000000000 R12: ffffffffffffffff
[   60.278253] R13: 0000000001000000 R14: 00000000017fffff R15: 0000000000000000
[   60.279035] FS:  0000000000000000(0000) GS:ffff88807dd00000(0000) knlGS:0000000000000000
[   60.279947] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   60.280591] CR2: 00007f3777cf0500 CR3: 0000000013558001 CR4: 0000000000770ee0
[   60.281414] PKRU: 55555554
[   60.281745] Call Trace:
[   60.282036]  <TASK>
[   60.282296]  iopt_unmap_iova_range+0x1ef/0x2e0
[   60.282836]  iopt_unmap_all+0x2f/0x60
[   60.283258]  iommufd_ioas_destroy+0x2c/0x70
[   60.283760]  iommufd_fops_release+0xd4/0x170
[   60.284260]  ? iommufd_ctx_get+0x30/0x30
[   60.284758]  __fput+0x11f/0x450
[   60.285159]  ____fput+0x1e/0x30
[   60.285553]  task_work_run+0xb6/0x120
[   60.286011]  do_exit+0x521/0x1340
[   60.286409]  ? lock_release+0x202/0x2c0
[   60.286772]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   60.287127]  ? trace_hardirqs_on+0x3f/0x100
[   60.287474]  do_group_exit+0x5e/0xf0
[   60.287757]  __x64_sys_exit_group+0x25/0x30
[   60.288065]  do_syscall_64+0x3b/0x90
[   60.288353]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   60.288740] RIP: 0033:0x7f3777be6cf6
[   60.289003] Code: Unable to access opcode bytes at 0x7f3777be6ccc.
[   60.289458] RSP: 002b:00007ffd0d7278d8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
[   60.289988] RAX: ffffffffffffffda RBX: 00007f3777cf1490 RCX: 00007f3777be6cf6
[   60.290500] RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
[   60.291013] RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffff80
[   60.291513] R10: 0000000000000004 R11: 0000000000000246 R12: 00007f3777cf1490
[   60.292030] R13: 0000000000000001 R14: 00007f3777cf4e88 R15: 0000000000000000
[   60.292558]  </TASK>
[   60.292763] irq event stamp: 0
[   60.292991] hardirqs last  enabled at (0): [<0000000000000000>] 0x0
[   60.293450] hardirqs last disabled at (0): [<ffffffff810fff0c>] copy_process+0x11cc/0x2b10
[   60.294067] softirqs last  enabled at (0): [<ffffffff810fff10>] copy_process+0x11d0/0x2b10
[   60.294665] softirqs last disabled at (0): [<0000000000000000>] 0x0
[   60.295134] ---[ end trace 0000000000000000 ]---
[   60.453862] general protection fault, probably for non-canonical address 0xffe20a05f5440008: 0000 [#1] PREEMPT SMP NOPTI
[   60.454678] CPU: 1 PID: 1283 Comm: repro Tainted: G    B   W          6.1.0-a0a6c76cf2a5+ #1
[   60.455286] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   60.456088] RIP: 0010:unpin_user_page_range_dirty_lock+0x121/0x2b0
[   60.456572] Code: 4c 03 65 d0 4c 89 f7 4c 89 e6 e8 3a 03 e0 ff 4d 39 e6 0f 86 54 01 00 00 e8 4c 02 e0 ff 4d 89 e5 31 ff 49 c1 e5 06 4c 03 6d c8 <49> 8b 45 08 48 89 c3 48 89 45 d0 83 e3 01 48 89 de e8 b9 03 e0 ff
[   60.457868] RSP: 0018:ffffc90002353a38 EFLAGS: 00010286
[   60.458247] RAX: 0000000000000000 RBX: 0000000000000000 RCX: ffffffff8149a796
[   60.458764] RDX: 0000000000000000 RSI: ffff88800e67a980 RDI: 0000000000000000
[   60.459296] RBP: ffffc90002353a78 R08: 000000000003b5c5 R09: 0000000000000004
[   60.459810] R10: 000000000003b5a0 R11: 0000000000000024 R12: 0000000000000000
[   60.460319] R13: ffe20a05f5440000 R14: 0000000000000001 R15: 0000000000000001
[   60.460826] FS:  00007f3777af9740(0000) GS:ffff88807dd00000(0000) knlGS:0000000000000000
[   60.461404] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   60.461836] CR2: 00007f3777c1e580 CR3: 00000000174ce005 CR4: 0000000000770ee0
[   60.462360] PKRU: 55555554
[   60.462575] Call Trace:
[   60.462764]  <TASK>
[   60.462928]  ? write_comp_data+0x2f/0x90
[   60.463228]  batch_unpin.isra.23+0xfa/0x1a0
[   60.463543]  __iopt_area_unfill_domain+0x257/0x560
[   60.463908]  ? rcu_read_lock_sched_held+0x29/0x80
[   60.464261]  ? lock_acquire+0x1a1/0x2f0
[   60.464570]  ? rcu_read_lock_held_common+0x12/0x50
[   60.464932]  ? rcu_read_lock_sched_held+0x29/0x80
[   60.465292]  ? __mutex_lock+0x13a/0xf30
[   60.465588]  ? write_comp_data+0x2f/0x90
[   60.465885]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   60.466242]  iopt_area_unfill_domain+0x32/0x40
[   60.466598]  iopt_table_remove_domain+0x23f/0x4c0
[   60.466952]  iommufd_device_selftest_detach+0x3a/0x90
[   60.467343]  iommufd_selftest_destroy+0x55/0x70
[   60.467687]  iommufd_object_destroy_user+0xce/0x130
[   60.468050]  iommufd_destroy+0xa2/0xc0
[   60.468335]  iommufd_fops_ioctl+0x1ef/0x310
[   60.468650]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   60.469001]  ? write_comp_data+0x2f/0x90
[   60.469301]  __x64_sys_ioctl+0x10e/0x160
[   60.469606]  ? iommufd_get_object.part.6+0x1c0/0x1c0
[   60.469973]  do_syscall_64+0x3b/0x90
[   60.470266]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   60.470650] RIP: 0033:0x7f3777c1e59d
[   60.470920] Code: 00 c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d d3 08 0d 00 f7 d8 64 89 01 48
[   60.472250] RSP: 002b:00007ffd0d727918 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   60.472826] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f3777c1e59d
[   60.473347] RDX: 0000000020000140 RSI: 0000000000003b80 RDI: 0000000000000003
[   60.473864] RBP: 00007ffd0d727930 R08: 00007ffd0d727930 R09: 00007ffd0d727930
[   60.474379] R10: 00007ffd0d727930 R11: 0000000000000213 R12: 0000000000401180
[   60.474911] R13: 00007ffd0d727a50 R14: 0000000000000000 R15: 0000000000000000
[   60.475447]  </TASK>
[   60.475635] Modules linked in:
[   60.475900] ---[ end trace 0000000000000000 ]---
[   60.476425] RIP: 0010:unpin_user_page_range_dirty_lock+0x121/0x2b0
[   60.477184] Code: 4c 03 65 d0 4c 89 f7 4c 89 e6 e8 3a 03 e0 ff 4d 39 e6 0f 86 54 01 00 00 e8 4c 02 e0 ff 4d 89 e5 31 ff 49 c1 e5 06 4c 03 6d c8 <49> 8b 45 08 48 89 c3 48 89 45 d0 83 e3 01 48 89 de e8 b9 03 e0 ff
[   60.479222] RSP: 0018:ffffc90002353a38 EFLAGS: 00010286
[   60.479827] RAX: 0000000000000000 RBX: 0000000000000000 RCX: ffffffff8149a796
[   60.480631] RDX: 0000000000000000 RSI: ffff88800e67a980 RDI: 0000000000000000
[   60.481361] RBP: ffffc90002353a78 R08: 000000000003b5c5 R09: 0000000000000004
[   60.481902] R10: 000000000003b5a0 R11: 0000000000000024 R12: 0000000000000000
[   60.482412] R13: ffe20a05f5440000 R14: 0000000000000001 R15: 0000000000000001
[   60.482943] FS:  00007f3777af9740(0000) GS:ffff88807dd00000(0000) knlGS:0000000000000000
[   60.483524] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   60.483957] CR2: 00007f3777c1e580 CR3: 00000000174ce005 CR4: 0000000000770ee0
[   60.484468] PKRU: 55555554
