c[?7l[2J[0mSeaBIOS (version rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org)


iPXE (http://ipxe.org) 00:03.0 CA00 PCI2.10 PnP PMM+7FF91000+7FEF1000 CA00
Press Ctrl-B to configure iPXE (PCI 00:03.0)...                                                                               


Booting from ROM...
c[?7l[2J[    0.000000] Linux version 6.1.0-rc3-e26eed4f623d+ (root@p-tglh01.sh.intel.com) (gcc (GCC) 8.5.0 20210514 (Red Hat 8.5.0-18), GNU ld version 2.36.1-2.el8) #1 SMP PREEMPT_DYNAMIC Tue Mar 14 19:22:30 CST 2023
[    0.000000] Command line: console=ttyS0 root=/dev/sda earlyprintk=serial net.ifnames=0
[    0.000000] KERNEL supported cpus:
[    0.000000]   Intel GenuineIntel
[    0.000000]   AMD AuthenticAMD
[    0.000000]   Hygon HygonGenuine
[    0.000000]   Centaur CentaurHauls
[    0.000000]   zhaoxin   Shanghai  
[    0.000000] x86/fpu: Supporting XSAVE feature 0x001: 'x87 floating point registers'
[    0.000000] x86/fpu: Supporting XSAVE feature 0x002: 'SSE registers'
[    0.000000] x86/fpu: Supporting XSAVE feature 0x004: 'AVX registers'
[    0.000000] x86/fpu: Supporting XSAVE feature 0x020: 'AVX-512 opmask'
[    0.000000] x86/fpu: Supporting XSAVE feature 0x040: 'AVX-512 Hi256'
[    0.000000] x86/fpu: Supporting XSAVE feature 0x080: 'AVX-512 ZMM_Hi256'
[    0.000000] x86/fpu: Supporting XSAVE feature 0x200: 'Protection Keys User registers'
[    0.000000] x86/fpu: xstate_offset[2]:  576, xstate_sizes[2]:  256
[    0.000000] x86/fpu: xstate_offset[5]:  832, xstate_sizes[5]:   64
[    0.000000] x86/fpu: xstate_offset[6]:  896, xstate_sizes[6]:  512
[    0.000000] x86/fpu: xstate_offset[7]: 1408, xstate_sizes[7]: 1024
[    0.000000] x86/fpu: xstate_offset[9]: 2432, xstate_sizes[9]:    8
[    0.000000] x86/fpu: Enabled xstate features 0x2e7, context size is 2440 bytes, using 'compacted' format.
[    0.000000] signal: max sigframe size: 3632
[    0.000000] BIOS-provided physical RAM map:
[    0.000000] BIOS-e820: [mem 0x0000000000000000-0x000000000009fbff] usable
[    0.000000] BIOS-e820: [mem 0x000000000009fc00-0x000000000009ffff] reserved
[    0.000000] BIOS-e820: [mem 0x00000000000f0000-0x00000000000fffff] reserved
[    0.000000] BIOS-e820: [mem 0x0000000000100000-0x000000007ffdffff] usable
[    0.000000] BIOS-e820: [mem 0x000000007ffe0000-0x000000007fffffff] reserved
[    0.000000] BIOS-e820: [mem 0x00000000feffc000-0x00000000feffffff] reserved
[    0.000000] BIOS-e820: [mem 0x00000000fffc0000-0x00000000ffffffff] reserved
[    0.000000] printk: bootconsole [earlyser0] enabled
[    0.000000] NX (Execute Disable) protection: active
[    0.000000] SMBIOS 2.8 present.
[    0.000000] DMI: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[    0.000000] Hypervisor detected: KVM
[    0.000000] kvm-clock: Using msrs 4b564d01 and 4b564d00
[    0.000007] kvm-clock: using sched offset of 649637510 cycles
[    0.000615] clocksource: kvm-clock: mask: 0xffffffffffffffff max_cycles: 0x1cd42e4dffb, max_idle_ns: 881590591483 ns
[    0.002380] tsc: Detected 3110.400 MHz processor
[    0.011845] last_pfn = 0x7ffe0 max_arch_pfn = 0x400000000
[    0.012544] x86/PAT: Configuration [0-7]: WB  WC  UC- UC  WB  WP  UC- WT  
[    0.025881] found SMP MP-table at [mem 0x000f5ba0-0x000f5baf]
[    0.026753] Using GB pages for direct mapping
[    0.029034] ACPI: Early table checksum verification disabled
[    0.029745] ACPI: RSDP 0x00000000000F59C0 000014 (v00 BOCHS )
[    0.030451] ACPI: RSDT 0x000000007FFE1951 000034 (v01 BOCHS  BXPC     00000001 BXPC 00000001)
[    0.031448] ACPI: FACP 0x000000007FFE17FD 000074 (v01 BOCHS  BXPC     00000001 BXPC 00000001)
[    0.032446] ACPI: DSDT 0x000000007FFE0040 0017BD (v01 BOCHS  BXPC     00000001 BXPC 00000001)
[    0.033410] ACPI: FACS 0x000000007FFE0000 000040
[    0.033955] ACPI: APIC 0x000000007FFE1871 000080 (v01 BOCHS  BXPC     00000001 BXPC 00000001)
[    0.034959] ACPI: HPET 0x000000007FFE18F1 000038 (v01 BOCHS  BXPC     00000001 BXPC 00000001)
[    0.035924] ACPI: WAET 0x000000007FFE1929 000028 (v01 BOCHS  BXPC     00000001 BXPC 00000001)
[    0.036932] ACPI: Reserving FACP table memory at [mem 0x7ffe17fd-0x7ffe1870]
[    0.037705] ACPI: Reserving DSDT table memory at [mem 0x7ffe0040-0x7ffe17fc]
[    0.038482] ACPI: Reserving FACS table memory at [mem 0x7ffe0000-0x7ffe003f]
[    0.039325] ACPI: Reserving APIC table memory at [mem 0x7ffe1871-0x7ffe18f0]
[    0.040139] ACPI: Reserving HPET table memory at [mem 0x7ffe18f1-0x7ffe1928]
[    0.040952] ACPI: Reserving WAET table memory at [mem 0x7ffe1929-0x7ffe1950]
[    0.043115] No NUMA configuration found
[    0.043551] Faking a node at [mem 0x0000000000000000-0x000000007ffdffff]
[    0.044430] NODE_DATA(0) allocated [mem 0x7ffb5000-0x7ffdffff]
[    0.049345] Zone ranges:
[    0.049650]   DMA      [mem 0x0000000000001000-0x0000000000ffffff]
[    0.050369]   DMA32    [mem 0x0000000001000000-0x000000007ffdffff]
[    0.051087]   Normal   empty
[    0.051406]   Device   empty
[    0.051735] Movable zone start for each node
[    0.052227] Early memory node ranges
[    0.052638]   node   0: [mem 0x0000000000001000-0x000000000009efff]
[    0.053360]   node   0: [mem 0x0000000000100000-0x000000007ffdffff]
[    0.054066] Initmem setup node 0 [mem 0x0000000000001000-0x000000007ffdffff]
[    0.452576] On node 0, zone DMA: 1 pages in unavailable ranges
[    0.452849] On node 0, zone DMA: 97 pages in unavailable ranges
[    0.489863] On node 0, zone DMA32: 32 pages in unavailable ranges
[    0.490915] ACPI: PM-Timer IO Port: 0x608
[    0.492198] ACPI: LAPIC_NMI (acpi_id[0xff] dfl dfl lint[0x1])
[    0.492971] IOAPIC[0]: apic_id 0, version 17, address 0xfec00000, GSI 0-23
[    0.493787] ACPI: INT_SRC_OVR (bus 0 bus_irq 0 global_irq 2 dfl dfl)
[    0.494495] ACPI: INT_SRC_OVR (bus 0 bus_irq 5 global_irq 5 high level)
[    0.495278] ACPI: INT_SRC_OVR (bus 0 bus_irq 9 global_irq 9 high level)
[    0.496054] ACPI: INT_SRC_OVR (bus 0 bus_irq 10 global_irq 10 high level)
[    0.496816] ACPI: INT_SRC_OVR (bus 0 bus_irq 11 global_irq 11 high level)
[    0.497585] ACPI: Using ACPI (MADT) for SMP configuration information
[    0.498376] ACPI: HPET id: 0x8086a201 base: 0xfed00000
[    0.499043] TSC deadline timer available
[    0.499486] smpboot: Allowing 2 CPUs, 0 hotplug CPUs
[    0.500187] kvm-guest: KVM setup pv remote TLB flush
[    0.500784] kvm-guest: setup PV sched yield
[    0.501377] PM: hibernation: Registered nosave memory: [mem 0x00000000-0x00000fff]
[    0.502239] PM: hibernation: Registered nosave memory: [mem 0x0009f000-0x0009ffff]
[    0.503133] PM: hibernation: Registered nosave memory: [mem 0x000a0000-0x000effff]
[    0.503975] PM: hibernation: Registered nosave memory: [mem 0x000f0000-0x000fffff]
[    0.504873] [mem 0x80000000-0xfeffbfff] available for PCI devices
[    0.505547] Booting paravirtualized kernel on KVM
[    0.506124] clocksource: refined-jiffies: mask: 0xffffffff max_cycles: 0xffffffff, max_idle_ns: 7645519600211568 ns
[    0.507333] setup_percpu: NR_CPUS:8192 nr_cpumask_bits:2 nr_cpu_ids:2 nr_node_ids:1
[    0.510855] percpu: Embedded 64 pages/cpu s225280 r8192 d28672 u1048576
[    0.511950] kvm-guest: PV spinlocks enabled
[    0.512487] PV qspinlock hash table entries: 256 (order: 0, 4096 bytes, linear)
[    0.513408] Fallback order for Node 0: 0 
[    0.513917] Built 1 zonelists, mobility grouping on.  Total pages: 515808
[    0.514720] Policy zone: DMA32
[    0.515080] Kernel command line: net.ifnames=0 console=ttyS0 root=/dev/sda earlyprintk=serial net.ifnames=0
[    0.519290] Dentry cache hash table entries: 262144 (order: 9, 2097152 bytes, linear)
[    0.520428] Inode-cache hash table entries: 131072 (order: 8, 1048576 bytes, linear)
[    0.521487] mem auto-init: stack:off, heap alloc:off, heap free:off
[    0.526566] Memory: 1985384K/2096632K available (32784K kernel code, 4691K rwdata, 7824K rodata, 3672K init, 22124K bss, 110992K reserved, 0K cma-reserved)
[    0.529739] SLUB: HWalign=64, Order=0-3, MinObjects=0, CPUs=2, Nodes=1
[    0.530449] kmemleak: Kernel memory leak detector disabled
[    0.531130] ftrace: allocating 67413 entries in 264 pages
[    0.572506] ftrace: allocated 264 pages with 2 groups
[    0.577969] Dynamic Preempt: voluntary
[    0.578779] Running RCU self tests
[    0.579175] rcu: Preemptible hierarchical RCU implementation.
[    0.579836] rcu: 	RCU lockdep checking is enabled.
[    0.580382] rcu: 	RCU restricting CPUs from NR_CPUS=8192 to nr_cpu_ids=2.
[    0.581193] 	Trampoline variant of Tasks RCU enabled.
[    0.581743] 	Rude variant of Tasks RCU enabled.
[    0.582260] 	Tracing variant of Tasks RCU enabled.
[    0.582779] rcu: RCU calculated value of scheduler-enlistment delay is 25 jiffies.
[    0.583611] rcu: Adjusting geometry for rcu_fanout_leaf=16, nr_cpu_ids=2
[    0.618874] NR_IRQS: 524544, nr_irqs: 440, preallocated irqs: 16
[    0.620101] rcu: srcu_init: Setting srcu_struct sizes based on contention.
[    0.630817] Console: colour VGA+ 80x25
[    0.631364] printk: console [ttyS0] enabled
[    0.631364] printk: console [ttyS0] enabled
[    0.632319] printk: bootconsole [earlyser0] disabled
[    0.632319] printk: bootconsole [earlyser0] disabled
[    0.633483] Lock dependency validator: Copyright (c) 2006 Red Hat, Inc., Ingo Molnar
[    0.634339] ... MAX_LOCKDEP_SUBCLASSES:  8
[    0.634843] ... MAX_LOCK_DEPTH:          48
[    0.635325] ... MAX_LOCKDEP_KEYS:        8192
[    0.635841] ... CLASSHASH_SIZE:          4096
[    0.636349] ... MAX_LOCKDEP_ENTRIES:     32768
[    0.636876] ... MAX_LOCKDEP_CHAINS:      65536
[    0.637370] ... CHAINHASH_SIZE:          32768
[    0.637905]  memory used by lock dependency info: 6365 kB
[    0.638524]  memory used for stack traces: 4224 kB
[    0.639107]  per task-struct memory footprint: 1920 bytes
[    0.639792] ACPI: Core revision 20220331
[    0.640642] clocksource: hpet: mask: 0xffffffff max_cycles: 0xffffffff, max_idle_ns: 19112604467 ns
[    0.641929] APIC: Switch to symmetric I/O mode setup
[    0.642794] x2apic enabled
[    0.643383] Switched APIC routing to physical x2apic.
[    0.643975] kvm-guest: setup PV IPIs
[    0.645628] ..TIMER: vector=0x30 apic1=0 pin1=2 apic2=-1 pin2=-1
[    0.646364] clocksource: tsc-early: mask: 0xffffffffffffffff max_cycles: 0x2cd5a8bb032, max_idle_ns: 440795365915 ns
[    0.647683] Calibrating delay loop (skipped) preset value.. 6220.80 BogoMIPS (lpj=12441600)
[    0.648665] pid_max: default: 32768 minimum: 301
[    0.649425] LSM: Security Framework initializing
[    0.651699] Yama: becoming mindful.
[    0.652500] Mount-cache hash table entries: 4096 (order: 3, 32768 bytes, linear)
[    0.653349] Mountpoint-cache hash table entries: 4096 (order: 3, 32768 bytes, linear)
[    0.659735] x86/cpu: User Mode Instruction Prevention (UMIP) activated
[    0.661146] Last level iTLB entries: 4KB 0, 2MB 0, 4MB 0
[    0.661830] Last level dTLB entries: 4KB 0, 2MB 0, 4MB 0, 1GB 0
[    0.662637] Spectre V1 : Mitigation: usercopy/swapgs barriers and __user pointer sanitization
[    0.663689] Spectre V2 : WARNING: Unprivileged eBPF is enabled with eIBRS on, data leaks possible via Spectre v2 BHB attacks!
[    0.664965] Spectre V2 : Mitigation: Enhanced IBRS
[    0.665507] Spectre V2 : Spectre v2 / SpectreRSB mitigation: Filling RSB on context switch
[    0.666421] Spectre V2 : Spectre v2 / PBRSB-eIBRS: Retire a single CALL on VMEXIT
[    0.667667] Spectre V2 : mitigation: Enabling conditional Indirect Branch Prediction Barrier
[    0.668631] Speculative Store Bypass: Mitigation: Speculative Store Bypass disabled via prctl
[    0.819940] Freeing SMP alternatives memory: 56K
[    0.821125] smpboot: CPU0: Genuine Intel(R) CPU 0000 @ 2.20GHz (family: 0x6, model: 0x8d, stepping: 0x0)
[    0.822933] cblist_init_generic: Setting adjustable number of callback queues.
[    0.823652] cblist_init_generic: Setting shift to 1 and lim to 1.
[    0.823652] cblist_init_generic: Setting shift to 1 and lim to 1.
[    0.823751] cblist_init_generic: Setting shift to 1 and lim to 1.
[    0.824497] Running RCU-tasks wait API self tests
[    0.927939] Performance Events: Icelake events, full-width counters, Intel PMU driver.
[    0.929510] ... version:                2
[    0.930142] ... bit width:              48
[    0.930786] ... generic registers:      8
[    0.931399] ... value mask:             0000ffffffffffff
[    0.931667] ... max period:             00007fffffffffff
[    0.932495] ... fixed-purpose events:   3
[    0.933124] ... event mask:             00000007000000ff
[    0.934903] rcu: Hierarchical SRCU implementation.
[    0.935662] rcu: 	Max phase no-delay instances is 1000.
[    0.940466] Callback from call_rcu_tasks_trace() invoked.
[    0.943498] smp: Bringing up secondary CPUs ...
[    0.946348] x86: Booting SMP configuration:
[    0.947058] .... node  #0, CPUs:      #1
[    0.948029] smp: Brought up 1 node, 2 CPUs
[    0.949111] smpboot: Max logical packages: 1
[    0.949780] smpboot: Total of 2 processors activated (12441.60 BogoMIPS)
[    0.957460] devtmpfs: initialized
[    0.957460] x86/mm: Memory block size: 128MB
[    0.964586] clocksource: jiffies: mask: 0xffffffff max_cycles: 0xffffffff, max_idle_ns: 7645041785100000 ns
[    0.967686] futex hash table entries: 512 (order: 4, 65536 bytes, linear)
[    0.969330] pinctrl core: initialized pinctrl subsystem
[    0.971509] 
[    0.971662] *************************************************************
[    0.972680] **     NOTICE NOTICE NOTICE NOTICE NOTICE NOTICE NOTICE    **
[    0.973692] **                                                         **
[    0.974713] **  IOMMU DebugFS SUPPORT HAS BEEN ENABLED IN THIS KERNEL  **
[    0.975665] **                                                         **
[    0.976727] ** This means that this kernel is built to expose internal **
[    0.977765] ** IOMMU data structures, which may compromise security on **
[    0.978752] ** your system.                                            **
[    0.979662] **                                                         **
[    0.980728] ** If you see this message and you are not debugging the   **
[    0.981751] ** kernel, report this immediately to your vendor!         **
[    0.982794] **                                                         **
[    0.983662] **     NOTICE NOTICE NOTICE NOTICE NOTICE NOTICE NOTICE    **
[    0.984701] *************************************************************
[    0.985860] PM: RTC time: 11:23:19, date: 2023-03-14
[    0.992843] NET: Registered PF_NETLINK/PF_ROUTE protocol family
[    0.994384] DMA: preallocated 256 KiB GFP_KERNEL pool for atomic allocations
[    0.995153] DMA: preallocated 256 KiB GFP_KERNEL|GFP_DMA pool for atomic allocations
[    0.995679] DMA: preallocated 256 KiB GFP_KERNEL|GFP_DMA32 pool for atomic allocations
[    0.996621] audit: initializing netlink subsys (disabled)
[    0.997289] audit: type=2000 audit(1678792999.621:1): state=initialized audit_enabled=0 res=1
[    0.997289] thermal_sys: Registered thermal governor 'fair_share'
[    0.997289] thermal_sys: Registered thermal governor 'bang_bang'
[    0.998172] thermal_sys: Registered thermal governor 'step_wise'
[    0.999075] thermal_sys: Registered thermal governor 'user_space'
[    0.999773] cpuidle: using governor ladder
[    1.000819] cpuidle: using governor menu
[    1.004081] acpiphp: ACPI Hot Plug PCI Controller Driver version: 0.5
[    1.005291] PCI: Using configuration type 1 for base access
[    1.027857] kprobes: kprobe jump-optimization is enabled. All kprobes are optimized if possible.
[    1.282042] Callback from call_rcu_tasks_rude() invoked.
[    1.282727] HugeTLB: registered 1.00 GiB page size, pre-allocated 0 pages
[    1.283469] HugeTLB: 16380 KiB vmemmap can be freed for a 1.00 GiB page
[    1.283722] HugeTLB: registered 2.00 MiB page size, pre-allocated 0 pages
[    1.284451] HugeTLB: 28 KiB vmemmap can be freed for a 2.00 MiB page
[    1.287883] ACPI: Added _OSI(Module Device)
[    1.288365] ACPI: Added _OSI(Processor Device)
[    1.288824] ACPI: Added _OSI(3.0 _SCP Extensions)
[    1.289318] ACPI: Added _OSI(Processor Aggregator Device)
[    1.299588] ACPI: 1 ACPI AML tables successfully acquired and loaded
[    1.303946] ACPI: Interpreter enabled
[    1.304467] ACPI: PM: (supports S0 S3 S4 S5)
[    1.304933] ACPI: Using IOAPIC for interrupt routing
[    1.305541] PCI: Using host bridge windows from ACPI; if necessary, use "pci=nocrs" and report a bug
[    1.306532] PCI: Using E820 reservations for host bridge windows
[    1.308061] ACPI: Enabled 2 GPEs in block 00 to 0F
[    1.330468] ACPI: PCI Root Bridge [PCI0] (domain 0000 [bus 00-ff])
[    1.331202] acpi PNP0A03:00: _OSC: OS supports [ASPM ClockPM Segments MSI EDR HPX-Type3]
[    1.331665] acpi PNP0A03:00: _OSC: not requesting OS control; OS requires [ExtendedConfig ASPM ClockPM MSI]
[    1.332760] acpi PNP0A03:00: fail to add MMCONFIG information, can't access extended PCI configuration space under this bridge.
[    1.337279] acpiphp: Slot [3] registered
[    1.337803] acpiphp: Slot [4] registered
[    1.338320] acpiphp: Slot [5] registered
[    1.338861] acpiphp: Slot [6] registered
[    1.339367] acpiphp: Slot [7] registered
[    1.339748] acpiphp: Slot [8] registered
[    1.340268] acpiphp: Slot [9] registered
[    1.340844] acpiphp: Slot [10] registered
[    1.341383] acpiphp: Slot [11] registered
[    1.341896] acpiphp: Slot [12] registered
[    1.342406] acpiphp: Slot [13] registered
[    1.342928] acpiphp: Slot [14] registered
[    1.343464] acpiphp: Slot [15] registered
[    1.343774] acpiphp: Slot [16] registered
[    1.344302] acpiphp: Slot [17] registered
[    1.344818] acpiphp: Slot [18] registered
[    1.345340] acpiphp: Slot [19] registered
[    1.345880] acpiphp: Slot [20] registered
[    1.346416] acpiphp: Slot [21] registered
[    1.346948] acpiphp: Slot [22] registered
[    1.347498] acpiphp: Slot [23] registered
[    1.347747] acpiphp: Slot [24] registered
[    1.348289] acpiphp: Slot [25] registered
[    1.348825] acpiphp: Slot [26] registered
[    1.349368] acpiphp: Slot [27] registered
[    1.349888] acpiphp: Slot [28] registered
[    1.350420] acpiphp: Slot [29] registered
[    1.350969] acpiphp: Slot [30] registered
[    1.351576] acpiphp: Slot [31] registered
[    1.351692] PCI host bridge to bus 0000:00
[    1.352140] pci_bus 0000:00: root bus resource [io  0x0000-0x0cf7 window]
[    1.352930] pci_bus 0000:00: root bus resource [io  0x0d00-0xffff window]
[    1.353642] pci_bus 0000:00: root bus resource [mem 0x000a0000-0x000bffff window]
[    1.354457] pci_bus 0000:00: root bus resource [mem 0x80000000-0xfebfffff window]
[    1.355252] pci_bus 0000:00: root bus resource [mem 0x100000000-0x17fffffff window]
[    1.355663] pci_bus 0000:00: root bus resource [bus 00-ff]
[    1.356441] pci 0000:00:00.0: [8086:1237] type 00 class 0x060000
[    1.361086] pci 0000:00:01.0: [8086:7000] type 00 class 0x060100
[    1.362678] pci 0000:00:01.1: [8086:7010] type 00 class 0x010180
[    1.364992] pci 0000:00:01.1: reg 0x20: [io  0xc040-0xc04f]
[    1.366454] pci 0000:00:01.1: legacy IDE quirk: reg 0x10: [io  0x01f0-0x01f7]
[    1.367235] pci 0000:00:01.1: legacy IDE quirk: reg 0x14: [io  0x03f6]
[    1.367669] pci 0000:00:01.1: legacy IDE quirk: reg 0x18: [io  0x0170-0x0177]
[    1.368398] pci 0000:00:01.1: legacy IDE quirk: reg 0x1c: [io  0x0376]
[    1.369503] pci 0000:00:01.3: [8086:7113] type 00 class 0x068000
[    1.370563] pci 0000:00:01.3: quirk: [io  0x0600-0x063f] claimed by PIIX4 ACPI
[    1.371336] pci 0000:00:01.3: quirk: [io  0x0700-0x070f] claimed by PIIX4 SMB
[    1.372037] pci 0000:00:02.0: [1234:1111] type 00 class 0x030000
[    1.376248] pci 0000:00:02.0: reg 0x10: [mem 0xfd000000-0xfdffffff pref]
[    1.379731] pci 0000:00:02.0: reg 0x18: [mem 0xfebf0000-0xfebf0fff]
[    1.386189] pci 0000:00:02.0: reg 0x30: [mem 0xfebe0000-0xfebeffff pref]
[    1.387554] Callback from call_rcu_tasks() invoked.
[    1.387860] pci 0000:00:02.0: Video device with shadowed ROM at [mem 0x000c0000-0x000dffff]
[    1.393030] pci 0000:00:03.0: [8086:100e] type 00 class 0x020000
[    1.394495] pci 0000:00:03.0: reg 0x10: [mem 0xfebc0000-0xfebdffff]
[    1.395662] pci 0000:00:03.0: reg 0x14: [io  0xc000-0xc03f]
[    1.399662] pci 0000:00:03.0: reg 0x30: [mem 0xfeb80000-0xfebbffff pref]
[    1.415626] ACPI: PCI: Interrupt link LNKA configured for IRQ 10
[    1.416187] ACPI: PCI: Interrupt link LNKB configured for IRQ 10
[    1.417302] ACPI: PCI: Interrupt link LNKC configured for IRQ 11
[    1.418445] ACPI: PCI: Interrupt link LNKD configured for IRQ 11
[    1.419342] ACPI: PCI: Interrupt link LNKS configured for IRQ 9
[    1.421628] iommu: Default domain type: Translated 
[    1.422189] iommu: DMA domain TLB invalidation policy: lazy mode 
[    1.424586] SCSI subsystem initialized
[    1.425494] ACPI: bus type USB registered
[    1.426085] usbcore: registered new interface driver usbfs
[    1.426738] usbcore: registered new interface driver hub
[    1.427365] usbcore: registered new device driver usb
[    1.427830] pps_core: LinuxPPS API ver. 1 registered
[    1.428357] pps_core: Software ver. 5.3.6 - Copyright 2005-2007 Rodolfo Giometti <giometti@linux.it>
[    1.429350] PTP clock support registered
[    1.429996] EDAC MC: Ver: 3.0.0
[    1.432417] NetLabel: Initializing
[    1.432796] NetLabel:  domain hash size = 128
[    1.433253] NetLabel:  protocols = UNLABELED CIPSOv4 CALIPSO
[    1.433953] NetLabel:  unlabeled traffic allowed by default
[    1.435074] PCI: Using ACPI for IRQ routing
[    1.435847] pci 0000:00:02.0: vgaarb: setting as boot VGA device
[    1.436515] pci 0000:00:02.0: vgaarb: bridge control possible
[    1.437141] pci 0000:00:02.0: vgaarb: VGA device added: decodes=io+mem,owns=io+mem,locks=none
[    1.438059] vgaarb: loaded
[    1.439128] hpet0: at MMIO 0xfed00000, IRQs 2, 8, 0
[    1.439661] hpet0: 3 comparators, 64-bit 100.000000 MHz counter
[    5.023288] clocksource: Switched to clocksource kvm-clock
[    5.078595] VFS: Disk quotas dquot_6.6.0
[    5.079123] VFS: Dquot-cache hash table entries: 512 (order 0, 4096 bytes)
[    5.080396] pnp: PnP ACPI init
[    5.083293] pnp: PnP ACPI: found 6 devices
[    5.098217] clocksource: acpi_pm: mask: 0xffffff max_cycles: 0xffffff, max_idle_ns: 2085701024 ns
[    5.099689] NET: Registered PF_INET protocol family
[    5.100593] IP idents hash table entries: 32768 (order: 6, 262144 bytes, linear)
[    5.102908] tcp_listen_portaddr_hash hash table entries: 1024 (order: 4, 73728 bytes, linear)
[    5.103944] Table-perturb hash table entries: 65536 (order: 6, 262144 bytes, linear)
[    5.104777] TCP established hash table entries: 16384 (order: 5, 131072 bytes, linear)
[    5.105978] TCP bind hash table entries: 16384 (order: 9, 2359296 bytes, linear)
[    5.110551] TCP: Hash tables configured (established 16384 bind 16384)
[    5.111628] UDP hash table entries: 1024 (order: 5, 163840 bytes, linear)
[    5.112647] UDP-Lite hash table entries: 1024 (order: 5, 163840 bytes, linear)
[    5.113892] NET: Registered PF_UNIX/PF_LOCAL protocol family
[    5.115441] RPC: Registered named UNIX socket transport module.
[    5.116127] RPC: Registered udp transport module.
[    5.116641] RPC: Registered tcp transport module.
[    5.117122] RPC: Registered tcp NFSv4.1 backchannel transport module.
[    5.117845] pci_bus 0000:00: resource 4 [io  0x0000-0x0cf7 window]
[    5.118539] pci_bus 0000:00: resource 5 [io  0x0d00-0xffff window]
[    5.119219] pci_bus 0000:00: resource 6 [mem 0x000a0000-0x000bffff window]
[    5.119951] pci_bus 0000:00: resource 7 [mem 0x80000000-0xfebfffff window]
[    5.120690] pci_bus 0000:00: resource 8 [mem 0x100000000-0x17fffffff window]
[    5.121757] pci 0000:00:01.0: PIIX3: Enabling Passive Release
[    5.122424] pci 0000:00:00.0: Limiting direct PCI/PCI transfers
[    5.123159] PCI: CLS 0 bytes, default 64
[    5.124166] ACPI: bus type thunderbolt registered
[    5.125183] clocksource: tsc: mask: 0xffffffffffffffff max_cycles: 0x2cd5a8bb032, max_idle_ns: 440795365915 ns
[    5.321192] Initialise system trusted keyrings
[    5.322120] Key type blacklist registered
[    5.323255] workingset: timestamp_bits=36 max_order=19 bucket_order=0
[    5.350013] zbud: loaded
[    5.355777] squashfs: version 4.0 (2009/01/31) Phillip Lougher
[    5.360084] NFS: Registering the id_resolver key type
[    5.360930] Key type id_resolver registered
[    5.361581] Key type id_legacy registered
[    5.362485] nfs4filelayout_init: NFSv4 File Layout Driver Registering...
[    5.363578] nfs4flexfilelayout_init: NFSv4 Flexfile Layout Driver Registering...
[    5.365043] fuse: init (API version 7.37)
[    5.366358] SGI XFS with ACLs, security attributes, realtime, quota, no debug enabled
[    5.372953] 9p: Installing v9fs 9p2000 file system support
[    5.391363] Key type asymmetric registered
[    5.392085] Asymmetric key parser 'x509' registered
[    5.395524] alg: self-tests for CTR-KDF (hmac(sha256)) passed
[    5.396681] Block layer SCSI generic (bsg) driver version 0.4 loaded (major 243)
[    5.398158] io scheduler mq-deadline registered
[    5.399221] io scheduler bfq registered
[    5.402090] shpchp: Standard Hot Plug PCI Controller Driver version: 0.4
[    5.404203] IPMI message handler: version 39.2
[    5.405010] ipmi device interface
[    5.409271] input: Power Button as /devices/LNXSYSTM:00/LNXPWRBN:00/input/input0
[    5.410924] ACPI: button: Power Button [PWRF]
[    5.413740] ERST DBG: ERST support is disabled.
[    5.415879] Serial: 8250/16550 driver, 32 ports, IRQ sharing enabled
[    5.417766] 00:04: ttyS0 at I/O 0x3f8 (irq = 4, base_baud = 115200) is a 16550A
[    5.439448] Linux agpgart interface v0.103
[    5.441751] ACPI: bus type drm_connector registered
[    5.470384] brd: module loaded
[    5.489645] loop: module loaded
[    5.499753] scsi host0: ata_piix
[    5.501806] scsi host1: ata_piix
[    5.502781] ata1: PATA max MWDMA2 cmd 0x1f0 ctl 0x3f6 bmdma 0xc040 irq 14
[    5.503889] ata2: PATA max MWDMA2 cmd 0x170 ctl 0x376 bmdma 0xc048 irq 15
[    5.507497] tun: Universal TUN/TAP device driver, 1.6
[    5.508676] e100: Intel(R) PRO/100 Network Driver
[    5.509417] e100: Copyright(c) 1999-2006 Intel Corporation
[    5.510434] e1000: Intel(R) PRO/1000 Network Driver
[    5.511213] e1000: Copyright (c) 1999-2006 Intel Corporation.
[    5.663976] ata1: found unknown device (class 0)
[    5.665695] ata1.00: ATA-7: QEMU HARDDISK, 2.5+, max UDMA/100
[    5.666654] ata1.00: 16777216 sectors, multi 16: LBA48 
[    5.667957] ata2: found unknown device (class 0)
[    5.669365] ata2.00: ATAPI: QEMU DVD-ROM, 2.5+, max UDMA/100
[    5.671974] scsi 0:0:0:0: Direct-Access     ATA      QEMU HARDDISK    2.5+ PQ: 0 ANSI: 5
[    5.675863] sd 0:0:0:0: [sda] 16777216 512-byte logical blocks: (8.59 GB/8.00 GiB)
[    5.676833] sd 0:0:0:0: [sda] Write Protect is off
[    5.677406] sd 0:0:0:0: [sda] Write cache: enabled, read cache: enabled, doesn't support DPO or FUA
[    5.678473] sd 0:0:0:0: [sda] Preferred minimum I/O size 512 bytes
[    5.679726] sd 0:0:0:0: Attached scsi generic sg0 type 0
[    5.682587] scsi 1:0:0:0: CD-ROM            QEMU     QEMU DVD-ROM     2.5+ PQ: 0 ANSI: 5
[    5.697643] sd 0:0:0:0: [sda] Attached SCSI disk
[    5.741351] scsi 1:0:0:0: Attached scsi generic sg1 type 5
[    5.884443] ACPI: \_SB_.LNKC: Enabled at IRQ 11
[    6.215619] e1000 0000:00:03.0 eth0: (PCI:33MHz:32-bit) 52:54:00:12:34:56
[    6.216420] e1000 0000:00:03.0 eth0: Intel(R) PRO/1000 Network Connection
[    6.217248] e1000e: Intel(R) PRO/1000 Network Driver
[    6.217758] e1000e: Copyright(c) 1999 - 2015 Intel Corporation.
[    6.218448] igb: Intel(R) Gigabit Ethernet Network Driver
[    6.218987] igb: Copyright (c) 2007-2014 Intel Corporation.
[    6.219731] PPP generic driver version 2.4.2
[    6.221081] VFIO - User Level meta-driver version: 0.3
[    6.222529] usbcore: registered new interface driver uas
[    6.223464] usbcore: registered new interface driver usb-storage
[    6.224695] i8042: PNP: PS/2 Controller [PNP0303:KBD,PNP0f13:MOU] at 0x60,0x64 irq 1,12
[    6.227079] serio: i8042 KBD port at 0x60,0x64 irq 1
[    6.227978] serio: i8042 AUX port at 0x60,0x64 irq 12
[    6.230440] mousedev: PS/2 mouse device common for all mice
[    6.233252] input: AT Translated Set 2 keyboard as /devices/platform/i8042/serio0/input/input1
[    6.235935] rtc_cmos 00:05: RTC can wake from S4
[    6.236672] input: VirtualPS/2 VMware VMMouse as /devices/platform/i8042/serio1/input/input4
[    6.237913] rtc_cmos 00:05: registered as rtc0
[    6.238691] rtc_cmos 00:05: setting system clock to 2023-03-14T11:23:24 UTC (1678793004)
[    6.239885] rtc_cmos 00:05: alarms up to one day, y3k, 242 bytes nvram, hpet irqs
[    6.240754] i2c_dev: i2c /dev entries driver
[    6.241288] device-mapper: core: CONFIG_IMA_DISABLE_HTABLE is disabled. Duplicate IMA measurements will not be recorded in the IMA log.
[    6.241561] input: VirtualPS/2 VMware VMMouse as /devices/platform/i8042/serio1/input/input3
[    6.242725] device-mapper: uevent: version 1.0.3
[    6.244773] device-mapper: ioctl: 4.47.0-ioctl (2022-07-28) initialised: dm-devel@redhat.com
[    6.245646] intel_pstate: CPU model not supported
[    6.246284] sdhci: Secure Digital Host Controller Interface driver
[    6.246927] sdhci: Copyright(c) Pierre Ossman
[    6.247513] sdhci-pltfm: SDHCI platform and OF driver helper
[    6.248190] ledtrig-cpu: registered to indicate activity on CPUs
[    6.249367] drop_monitor: Initializing network drop monitor service
[    6.250688] NET: Registered PF_INET6 protocol family
[    6.254352] Segment Routing with IPv6
[    6.254988] In-situ OAM (IOAM) with IPv6
[    6.255739] NET: Registered PF_PACKET protocol family
[    6.256905] 9pnet: Installing 9P2000 support
[    6.257445] Key type dns_resolver registered
[    6.259150] IPI shorthand broadcast: enabled
[    6.259722] sched_clock: Marking stable (6236911152, 22748365)->(6282091306, -22431789)
[    6.261421] registered taskstats version 1
[    6.262084] Loading compiled-in X.509 certificates
[    6.263242] zswap: loaded using pool lzo/zbud
[    6.264988] Key type .fscrypt registered
[    6.265601] Key type fscrypt-provisioning registered
[    6.268263] Key type encrypted registered
[    6.268757] ima: No TPM chip found, activating TPM-bypass!
[    6.269341] ima: Allocated hash algorithm: sha1
[    6.269872] ima: No architecture policies found
[    6.270411] evm: Initialising EVM extended attributes:
[    6.271052] evm: security.selinux
[    6.271397] evm: security.SMACK64
[    6.271773] evm: security.SMACK64EXEC
[    6.272153] evm: security.SMACK64TRANSMUTE
[    6.272589] evm: security.SMACK64MMAP
[    6.272950] evm: security.apparmor
[    6.273293] evm: security.ima
[    6.273616] evm: security.capability
[    6.273990] evm: HMAC attrs: 0x1
[    6.285550] PM:   Magic number: 15:22:378
[    6.286954] RAS: Correctable Errors collector initialized.
[    6.289063] md: Waiting for all devices to be available before autodetect
[    6.289549] md: If you don't use raid, use raid=noautodetect
[    6.289952] md: Autodetecting RAID arrays.
[    6.290268] md: autorun ...
[    6.290469] md: ... autorun DONE.
[    6.298189] EXT4-fs (sda): mounted filesystem with ordered data mode. Quota mode: none.
[    6.298844] VFS: Mounted root (ext4 filesystem) readonly on device 8:0.
[    6.302549] devtmpfs: mounted
[    6.323493] Freeing unused decrypted memory: 2036K
[    6.328203] Freeing unused kernel image (initmem) memory: 3672K
[    6.339832] Write protecting the kernel read-only data: 43008k
[    6.347013] Freeing unused kernel image (text/rodata gap) memory: 2028K
[    6.348602] Freeing unused kernel image (rodata/data gap) memory: 368K
[    6.516513] x86/mm: Checked W+X mappings: passed, no W+X pages found.
[    6.517380] Run /sbin/init as init process
[    6.867448] systemd[1]: RTC configured in localtime, applying delta of 0 minutes to system time.
[    6.928727] systemd[1]: systemd 239 (239-49.el8) running in system mode. (+PAM +AUDIT +SELINUX +IMA -APPARMOR +SMACK +SYSVINIT +UTMP +LIBCRYPTSETUP +GCRYPT +GNUTLS +ACL +XZ +LZ4 +SECCOMP +BLKID +ELFUTILS +KMOD +IDN2 -IDN +PCRE2 default-hierarchy=legacy)
[    6.931753] systemd[1]: Detected virtualization kvm.
[    6.932357] systemd[1]: Detected architecture x86-64.

Welcome to [0;31mCentOS Stream 8[0m!

[    7.004611] systemd[1]: Set hostname to <test>.
[    8.127955] random: crng init done
[    8.294899] systemd[1]: Listening on Process Core Dump Socket.
[[0;32m  OK  [0m] Listening on Process Core Dump Socket.
[    8.296640] systemd[1]: Listening on initctl Compatibility Named Pipe.
[[0;32m  OK  [0m] Listening on initctl Compatibility Named Pipe.
[    8.298148] systemd[1]: Listening on udev Control Socket.
[[0;32m  OK  [0m] Listening on udev Control Socket.
[    8.299577] systemd[1]: Listening on Journal Socket (/dev/log).
[[0;32m  OK  [0m] Listening on Journal Socket (/dev/log).
[    8.301194] systemd[1]: Listening on multipathd control socket.
[[0;32m  OK  [0m] Listening on multipathd control socket.
[    8.305765] systemd[1]: Created slice system-sshd\x2dkeygen.slice.
[[0;32m  OK  [0m] Created slice system-sshd\x2dkeygen.slice.
[[0;32m  OK  [0m] Listening on udev Kernel Socket.
[[0;32m  OK  [0m] Created slice system-serial\x2dgetty.slice.
[[0;32m  OK  [0m] Set up automount Arbitrary Executab…rmats File System Automount Point.
[[0;32m  OK  [0m] Listening on Device-mapper event daemon FIFOs.
[[0;32m  OK  [0m] Listening on RPCbind Server Activation Socket.
[[0;32m  OK  [0m] Reached target RPC Port Mapper.
[[0;32m  OK  [0m] Reached target Swap.
[[0;32m  OK  [0m] Listening on LVM2 poll daemon socket.
[[0;32m  OK  [0m] Created slice system-getty.slice.
[[0;32m  OK  [0m] Listening on Journal Socket.
         Starting Setup Virtual Console...
         Mounting POSIX Message Queue File System...
         Mounting Kernel Debug File System...
         Mounting Huge Pages File System...
         Starting Load Kernel Modules...
         Starting Journal Service...
         Starting Remount Root and Kernel File Systems...
         Starting udev Coldplug all Devices...
         Starting Monitoring of LVM2 mirrors…ng dmeventd or progress polling...
[[0;32m  OK  [0m] Created slice User and Session Slice.
[[0;32m  OK  [0m] Reached target Slices.
[[0;32m  OK  [0m] Started Forward Password Requests to Wall Directory Watch.
[[0;32m  OK  [0m] Mounted POSIX Message Queue File System.
[[0;32m  OK  [0m] Mounted Kernel Debug File System.
[[0;32m  OK  [0m] Mounted Huge Pages File System.
[[0;1;31mFAILED[0m] Failed to start Load Kernel Modules.
See 'systemctl status systemd-modules-load.service' for details.
         Mounting Kernel Configuration File System...
         Starting Apply Kernel Variables...
         Mounting FUSE Control File System...
[[0;32m  OK  [0m] Started Journal Service.
[[0;32m  OK  [0m] Mounted Kernel Configuration File System.
[[0;32m  OK  [0m] Started Apply Kernel Variables.
[    9.200788] EXT4-fs (sda): re-mounted. Quota mode: none.
[[0;32m  OK  [0m] Mounted FUSE Control File System.
[[0;32m  OK  [0m] Started Remount Root and Kernel File Systems.
         Starting Load/Save Random Seed...
         Starting Flush Journal to Persistent Storage...
         Starting Create Static Device Nodes in /dev...
[[0;32m  OK  [0m] Started Setup Virtual Console.
[[0;32m  OK  [0m] Started Load/Save Random Seed.
[[0;32m  OK  [0m] Started Flush Journal to Persistent Storage.
[[0;32m  OK  [0m] Started udev Coldplug all Devices.
         Starting udev Wait for Complete Device Initialization...
[[0;32m  OK  [0m] Started Create Static Device Nodes in /dev.
         Starting udev Kernel Device Manager...
[[0;32m  OK  [0m] Started udev Kernel Device Manager.
         Starting Show Plymouth Boot Screen...
[[0;32m  OK  [0m] Started Show Plymouth Boot Screen.
[[0;32m  OK  [0m] Reached target Local Encrypted Volumes.
[[0;32m  OK  [0m] Reached target Paths.
[[0;32m  OK  [0m] Started Forward Password Requests to Plymouth Directory Watch.
[[0;32m  OK  [0m] Found device /dev/ttyS0.
[[0;32m  OK  [0m] Started Monitoring of LVM2 mirrors,…sing dmeventd or progress polling.
[[0;32m  OK  [0m] Started udev Wait for Complete Device Initialization.
[[0;32m  OK  [0m] Listening on Load/Save RF Kill Switch Status /dev/rfkill Watch.
[[0;32m  OK  [0m] Reached target Local File Systems (Pre).
[[0;32m  OK  [0m] Reached target Local File Systems.
         Starting Restore /run/initramfs on shutdown...
         Starting Create Volatile Files and Directories...
         Starting Tell Plymouth To Write Out Runtime Data...
[[0;32m  OK  [0m] Started Restore /run/initramfs on shutdown.
[[0;32m  OK  [0m] Started Tell Plymouth To Write Out Runtime Data.
[[0;32m  OK  [0m] Started Create Volatile Files and Directories.
         Mounting RPC Pipe File System...
         Starting RPC Bind...
         Starting Security Auditing Service...
[[0;32m  OK  [0m] Mounted RPC Pipe File System.
[[0;32m  OK  [0m] Reached target rpc_pipefs.target.
[[0;32m  OK  [0m] Started RPC Bind.
[[0;32m  OK  [0m] Started Security Auditing Service.
         Starting Update UTMP about System Boot/Shutdown...
[[0;32m  OK  [0m] Started Update UTMP about System Boot/Shutdown.
[[0;32m  OK  [0m] Reached target System Initialization.
[[0;32m  OK  [0m] Started Daily Cleanup of Temporary Directories.
[[0;32m  OK  [0m] Listening on SSSD Kerberos Cache Manager responder socket.
[[0;32m  OK  [0m] Started dnf makecache --timer.
[[0;32m  OK  [0m] Started daily update of the root trust anchor for DNSSEC.
[[0;32m  OK  [0m] Reached target Timers.
[[0;32m  OK  [0m] Listening on D-Bus System Message Bus Socket.
[[0;32m  OK  [0m] Reached target Sockets.
[[0;32m  OK  [0m] Reached target Basic System.
[[0;32m  OK  [0m] Started Machine Check Exception Logging Daemon.
[[0;32m  OK  [0m] Started irqbalance daemon.
         Starting Self Monitoring and Reporting Technology (SMART) Daemon...
         Starting Login Service...
         Starting Auto-connect to subsystems…-NVME devices found during boot...
[[0;32m  OK  [0m] Started D-Bus System Message Bus.
         Starting Network Manager...
         Starting Authorization Manager...
[[0;32m  OK  [0m] Reached target sshd-keygen.target.
         Starting NTP client/server...
[[0;32m  OK  [0m] Started Self Monitoring and Reporting Technology (SMART) Daemon.
[[0;32m  OK  [0m] Started Auto-connect to subsystems …FC-NVME devices found during boot.
         Starting update of the root trust a…or DNSSEC validation in unbound...
[[0;32m  OK  [0m] Started Login Service.
[[0;32m  OK  [0m] Started Network Manager.
         Starting Network Manager Wait Online...
[[0;32m  OK  [0m] Reached target Network.
         Starting GSSAPI Proxy Daemon...
         Starting OpenSSH server daemon...
         Starting Dynamic System Tuning Daemon...
[[0;32m  OK  [0m] Started OpenSSH server daemon.
[[0;32m  OK  [0m] Started update of the root trust an… for DNSSEC validation in unbound.
[[0;32m  OK  [0m] Started NTP client/server.
[[0;32m  OK  [0m] Started GSSAPI Proxy Daemon.
[[0;32m  OK  [0m] Started Authorization Manager.
         Starting Hostname Service...
[[0;32m  OK  [0m] Reached target NFS client services.
[[0;32m  OK  [0m] Reached target Remote File Systems (Pre).
[[0;32m  OK  [0m] Reached target Remote File Systems.
         Starting Permit User Sessions...
[[0;32m  OK  [0m] Started Permit User Sessions.
         Starting Terminate Plymouth Boot Screen...
         Starting Hold until boot process finishes up...
[[0;32m  OK  [0m] Started Command Scheduler.
[[0;32m  OK  [0m] Started Terminate Plymouth Boot Screen.
[[0;32m  OK  [0m] Started Hold until boot process finishes up.
[   13.628859] e1000: eth0 NIC Link is Up 1000 Mbps Full Duplex, Flow Control: RX
[   13.630023] IPv6: ADDRCONF(NETDEV_CHANGE): eth0: link becomes ready
[   13.844302] Spectre V2 : WARNING: Unprivileged eBPF is enabled with eIBRS on, data leaks possible via Spectre v2 BHB attacks!
[   13.846073] Spectre V2 : WARNING: Unprivileged eBPF is enabled with eIBRS on, data leaks possible via Spectre v2 BHB attacks!

CentOS Stream 8
Kernel 6.1.0-rc3-e26eed4f623d+ on an x86_64

test login: [   31.937652] ------------[ cut here ]------------
[   31.938304] WARNING: CPU: 0 PID: 610 at drivers/iommu/iommufd/pages.c:1256 __iopt_area_unfill_domain+0x4ba/0x4d0
[   31.939412] Modules linked in:
[   31.940025] CPU: 0 PID: 610 Comm: repro Not tainted 6.1.0-rc3-e26eed4f623d+ #1
[   31.940799] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   31.941950] RIP: 0010:__iopt_area_unfill_domain+0x4ba/0x4d0
[   31.942564] Code: 70 e8 fa 24 db 00 31 ff 89 c3 89 c6 e8 1f 26 2d ff 85 db 0f 85 bc fb ff ff e8 a2 24 2d ff 0f 0b e9 b0 fb ff ff e8 96 24 2d ff <0f> 0b e9 64 ff ff ff e8 aa 20 db 00 66 2e 0f 1f 84 00 00 00 00 00
[   31.944492] RSP: 0018:ffffc90001117af0 EFLAGS: 00010246
[   31.945069] RAX: 0000000000000000 RBX: 00000000ffffffff RCX: ffffffff81fc6a3d
[   31.945805] RDX: 0000000000000000 RSI: ffff888013e95380 RDI: 0000000000000002
[   31.946563] RBP: ffffc90001117d10 R08: 000000000003b3e5 R09: 0000000000000004
[   31.947311] R10: 000000000003b3c0 R11: 0000000000000024 R12: 00000000000007ff
[   31.948072] R13: 0000000000000800 R14: 0000000000000801 R15: 00000000000007ff
[   31.948816] FS:  00007ff557436740(0000) GS:ffff88807dc00000(0000) knlGS:0000000000000000
[   31.949655] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   31.950274] CR2: 00007ff55755b580 CR3: 000000000f3a8003 CR4: 0000000000770ef0
[   31.951036] PKRU: 55555554
[   31.951341] Call Trace:
[   31.951613]  <TASK>
[   31.951936]  ? __this_cpu_preempt_check+0x20/0x30
[   31.952484]  ? lock_is_held_type+0xe6/0x140
[   31.952965]  ? rcu_read_lock_sched_held+0x57/0x80
[   31.953481]  ? __mutex_lock+0x13a/0xf30
[   31.953942]  ? write_comp_data+0x2f/0x90
[   31.954400]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   31.954930]  iopt_area_unfill_domain+0x32/0x40
[   31.955442]  iopt_table_remove_domain+0x23f/0x4b0
[   31.956028]  iommufd_device_selftest_detach+0x3a/0x90
[   31.956612]  iommufd_selftest_destroy+0x55/0x70
[   31.957129]  iommufd_object_destroy_user+0xce/0x130
[   31.957689]  iommufd_destroy+0xa2/0xc0
[   31.958133]  iommufd_fops_ioctl+0x1ef/0x310
[   31.958617]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   31.959140]  ? write_comp_data+0x2f/0x90
[   31.959578]  __x64_sys_ioctl+0x10e/0x160
[   31.960044]  ? iommufd_get_object.part.6+0x1c0/0x1c0
[   31.960612]  do_syscall_64+0x3b/0x90
[   31.961023]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   31.961572] RIP: 0033:0x7ff55755b59d
[   31.961974] Code: 00 c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d d3 08 0d 00 f7 d8 64 89 01 48
[   31.963932] RSP: 002b:00007fff1c422fb8 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   31.964801] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007ff55755b59d
[   31.965590] RDX: 0000000020000140 RSI: 0000000000003b80 RDI: 0000000000000003
[   31.966353] RBP: 00007fff1c422fd0 R08: 00007fff1c422fd0 R09: 00007fff1c422fd0
[   31.967119] R10: 00007fff1c422fd0 R11: 0000000000000213 R12: 0000000000401180
[   31.968002] R13: 00007fff1c4230f0 R14: 0000000000000000 R15: 0000000000000000
[   31.968844]  </TASK>
[   31.969109] irq event stamp: 18741
[   31.969488] hardirqs last  enabled at (18749): [<ffffffff811b8b21>] __up_console_sem+0x91/0xb0
[   31.970398] hardirqs last disabled at (18756): [<ffffffff811b8b06>] __up_console_sem+0x76/0xb0
[   31.971286] softirqs last  enabled at (18442): [<ffffffff83000329>] __do_softirq+0x329/0x490
[   31.972209] softirqs last disabled at (18437): [<ffffffff811123c2>] irq_exit_rcu+0xd2/0x100
[   31.973072] ---[ end trace 0000000000000000 ]---
[   31.980948] ------------[ cut here ]------------
[   31.981546] WARNING: CPU: 0 PID: 610 at drivers/iommu/iommufd/pages.c:864 update_unpinned+0x75/0x80
[   31.982521] Modules linked in:
[   31.982873] CPU: 0 PID: 610 Comm: repro Tainted: G        W          6.1.0-rc3-e26eed4f623d+ #1
[   31.983807] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   31.984971] RIP: 0010:update_unpinned+0x75/0x80
[   31.985471] Code: 33 2d ff 48 89 de 31 c9 31 d2 4c 29 e6 4c 89 ef e8 60 fb ff ff e8 7b 33 2d ff 5b 41 5c 41 5d 5d c3 cc cc cc cc e8 6b 33 2d ff <0f> 0b eb e7 0f 1f 80 00 00 00 00 0f 1f 44 00 00 55 48 89 e5 41 57
[   31.987335] RSP: 0018:ffffc90001117a28 EFLAGS: 00010246
[   31.987942] RAX: 0000000000000000 RBX: 0000000000000000 RCX: ffffffff81fc5bbf
[   31.988705] RDX: 0000000000000000 RSI: ffff888013e95380 RDI: 0000000000000002
[   31.989446] RBP: ffffc90001117a40 R08: 0000000000000001 R09: 0000000000000001
[   31.990213] R10: ffff88807dc3b2d0 R11: 0000000000000000 R12: ffffffffffffffff
[   31.990975] R13: ffff88800dae7200 R14: 0000000000000002 R15: 0000000000000002
[   31.991773] FS:  0000000000000000(0000) GS:ffff88807dc00000(0000) knlGS:0000000000000000
[   31.992640] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   31.993280] CR2: 00007ff55762d500 CR3: 0000000003a12002 CR4: 0000000000770ef0
[   31.994048] PKRU: 55555554
[   31.994368] Call Trace:
[   31.994667]  <TASK>
[   31.994927]  iopt_pages_unfill_xarray+0x522/0x5c0
[   31.995528]  ? write_comp_data+0x2f/0x90
[   31.996014]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   31.996557]  ? write_comp_data+0x2f/0x90
[   31.997006]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   31.997527]  ? interval_tree_remove+0x291/0x4e0
[   31.998036]  ? write_comp_data+0x2f/0x90
[   31.998480]  iopt_area_remove_access+0x108/0x120
[   31.999021]  iommufd_access_unpin_pages+0xf2/0x190
[   31.999605]  iommufd_test_access_unmap+0xe0/0x130
[   32.000166]  ? iommufd_test_access_unmap+0x130/0x130
[   32.000762]  iommufd_test_staccess_release+0x39/0x60
[   32.001310]  __fput+0x11f/0x450
[   32.001704]  ____fput+0x1e/0x30
[   32.002075]  task_work_run+0xb6/0x120
[   32.002513]  do_exit+0x547/0x1360
[   32.002916]  ? lockdep_hardirqs_on+0x8a/0x110
[   32.003419]  ? trace_hardirqs_on+0x3f/0xe0
[   32.003924]  do_group_exit+0x5e/0xf0
[   32.004362]  __x64_sys_exit_group+0x25/0x30
[   32.004839]  do_syscall_64+0x3b/0x90
[   32.005243]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   32.005802] RIP: 0033:0x7ff557523cf6
[   32.006213] Code: Unable to access opcode bytes at 0x7ff557523ccc.
[   32.006873] RSP: 002b:00007fff1c422f78 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
[   32.007732] RAX: ffffffffffffffda RBX: 00007ff55762e490 RCX: 00007ff557523cf6
[   32.008492] RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
[   32.009129] RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffff80
[   32.009632] R10: 0000000000000004 R11: 0000000000000246 R12: 00007ff55762e490
[   32.010169] R13: 0000000000000001 R14: 00007ff557631e88 R15: 0000000000000000
[   32.010685]  </TASK>
[   32.010858] irq event stamp: 24819
[   32.011130] hardirqs last  enabled at (24827): [<ffffffff811b8b21>] __up_console_sem+0x91/0xb0
[   32.011780] hardirqs last disabled at (24836): [<ffffffff811b8b06>] __up_console_sem+0x76/0xb0
[   32.012414] softirqs last  enabled at (24768): [<ffffffff83000329>] __do_softirq+0x329/0x490
[   32.013027] softirqs last disabled at (24763): [<ffffffff811123c2>] irq_exit_rcu+0xd2/0x100
[   32.013657] ---[ end trace 0000000000000000 ]---
[   32.014152] ------------[ cut here ]------------
[   32.014586] WARNING: CPU: 0 PID: 610 at drivers/iommu/iommufd/pages.c:1147 iopt_release_pages+0x159/0x190
[   32.015268] Modules linked in:
[   32.015522] CPU: 0 PID: 610 Comm: repro Tainted: G        W          6.1.0-rc3-e26eed4f623d+ #1
[   32.016158] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   32.016983] RIP: 0010:iopt_release_pages+0x159/0x190
[   32.017347] Code: 6d 13 ff eb cb e8 97 18 2d ff be 03 00 00 00 4c 89 f7 e8 da cd ce ff eb b7 e8 83 18 2d ff 0f 0b e9 ed fe ff ff e8 77 18 2d ff <0f> 0b e9 00 ff ff ff e8 6b 18 2d ff 0f 0b e9 07 ff ff ff e8 5f 18
[   32.018661] RSP: 0018:ffffc90001117c88 EFLAGS: 00010246
[   32.019032] RAX: 0000000000000000 RBX: ffff88800dae7200 RCX: ffffffff81fc75f7
[   32.019539] RDX: 0000000000000000 RSI: ffff888013e95380 RDI: 0000000000000002
[   32.020088] RBP: ffffc90001117ca8 R08: 000000000000001a R09: 0000000000000001
[   32.020595] R10: ffff888013e96130 R11: 0000000000000000 R12: ffffffffffffffff
[   32.021125] R13: 0000000001000000 R14: 00000000017fffff R15: 0000000000000000
[   32.021631] FS:  0000000000000000(0000) GS:ffff88807dc00000(0000) knlGS:0000000000000000
[   32.022232] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   32.022641] CR2: 00007ff55762d500 CR3: 0000000003a12002 CR4: 0000000000770ef0
[   32.023187] PKRU: 55555554
[   32.023390] Call Trace:
[   32.023570]  <TASK>
[   32.023756]  iopt_unmap_iova_range+0x1ef/0x2e0
[   32.024134]  iopt_unmap_all+0x2f/0x60
[   32.024411]  iommufd_ioas_destroy+0x2c/0x70
[   32.024732]  iommufd_fops_release+0xd4/0x170
[   32.025060]  ? iommufd_ctx_get+0x30/0x30
[   32.025373]  __fput+0x11f/0x450
[   32.025622]  ____fput+0x1e/0x30
[   32.025866]  task_work_run+0xb6/0x120
[   32.026153]  do_exit+0x547/0x1360
[   32.026445]  ? lockdep_hardirqs_on+0x8a/0x110
[   32.026778]  ? trace_hardirqs_on+0x3f/0xe0
[   32.027127]  do_group_exit+0x5e/0xf0
[   32.027433]  __x64_sys_exit_group+0x25/0x30
[   32.027772]  do_syscall_64+0x3b/0x90
[   32.028043]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   32.028408] RIP: 0033:0x7ff557523cf6
[   32.028695] Code: Unable to access opcode bytes at 0x7ff557523ccc.
[   32.029118] RSP: 002b:00007fff1c422f78 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
[   32.029656] RAX: ffffffffffffffda RBX: 00007ff55762e490 RCX: 00007ff557523cf6
[   32.030158] RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
[   32.030696] RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffff80
[   32.031203] R10: 0000000000000004 R11: 0000000000000246 R12: 00007ff55762e490
[   32.031743] R13: 0000000000000001 R14: 00007ff557631e88 R15: 0000000000000000
[   32.032259]  </TASK>
[   32.032426] irq event stamp: 25279
[   32.032678] hardirqs last  enabled at (25287): [<ffffffff811b8b21>] __up_console_sem+0x91/0xb0
[   32.033318] hardirqs last disabled at (25294): [<ffffffff811b8b06>] __up_console_sem+0x76/0xb0
[   32.033951] softirqs last  enabled at (24768): [<ffffffff83000329>] __do_softirq+0x329/0x490
[   32.034544] softirqs last disabled at (24763): [<ffffffff811123c2>] irq_exit_rcu+0xd2/0x100
[   32.035148] ---[ end trace 0000000000000000 ]---
[   32.101720] ------------[ cut here ]------------
[   32.102294] WARNING: CPU: 1 PID: 611 at drivers/iommu/iommufd/pages.c:1256 __iopt_area_unfill_domain+0x4ba/0x4d0
[   32.103430] Modules linked in:
[   32.103833] CPU: 1 PID: 611 Comm: repro Tainted: G        W          6.1.0-rc3-e26eed4f623d+ #1
[   32.104760] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   32.106010] RIP: 0010:__iopt_area_unfill_domain+0x4ba/0x4d0
[   32.106626] Code: 70 e8 fa 24 db 00 31 ff 89 c3 89 c6 e8 1f 26 2d ff 85 db 0f 85 bc fb ff ff e8 a2 24 2d ff 0f 0b e9 b0 fb ff ff e8 96 24 2d ff <0f> 0b e9 64 ff ff ff e8 aa 20 db 00 66 2e 0f 1f 84 00 00 00 00 00
[   32.108666] RSP: 0018:ffffc90000fc7af0 EFLAGS: 00010246
[   32.109243] RAX: 0000000000000000 RBX: 00000000fffffff7 RCX: ffffffff81fc6a3d
[   32.110029] RDX: 0000000000000000 RSI: ffff888013e88000 RDI: 0000000000000002
[   32.110819] RBP: ffffc90000fc7d10 R08: 000000000003b3e5 R09: 0000000000000013
[   32.111610] R10: 000000000003b3c0 R11: 0000000000000024 R12: 00000000000007ff
[   32.112436] R13: 0000000000000800 R14: 0000000000000809 R15: 00000000000007ff
[   32.113211] FS:  00007ff557436740(0000) GS:ffff88807dd00000(0000) knlGS:0000000000000000
[   32.114101] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   32.114740] CR2: 00007ff55755b580 CR3: 000000000f3a8004 CR4: 0000000000770ee0
[   32.115534] PKRU: 55555554
[   32.115894] Call Trace:
[   32.116177]  <TASK>
[   32.116477]  ? __this_cpu_preempt_check+0x20/0x30
[   32.117025]  ? lock_is_held_type+0xe6/0x140
[   32.117519]  ? rcu_read_lock_sched_held+0x57/0x80
[   32.118061]  ? __mutex_lock+0x13a/0xf30
[   32.118534]  ? write_comp_data+0x2f/0x90
[   32.119001]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   32.119560]  iopt_area_unfill_domain+0x32/0x40
[   32.120099]  iopt_table_remove_domain+0x23f/0x4b0
[   32.120654]  iommufd_device_selftest_detach+0x3a/0x90
[   32.121237]  iommufd_selftest_destroy+0x55/0x70
[   32.121769]  iommufd_object_destroy_user+0xce/0x130
[   32.122326]  iommufd_destroy+0xa2/0xc0
[   32.122778]  iommufd_fops_ioctl+0x1ef/0x310
[   32.123279]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   32.123865]  ? write_comp_data+0x2f/0x90
[   32.124330]  __x64_sys_ioctl+0x10e/0x160
[   32.124788]  ? iommufd_get_object.part.6+0x1c0/0x1c0
[   32.125371]  do_syscall_64+0x3b/0x90
[   32.125805]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   32.126375] RIP: 0033:0x7ff55755b59d
[   32.126773] Code: 00 c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d d3 08 0d 00 f7 d8 64 89 01 48
[   32.128748] RSP: 002b:00007fff1c422fb8 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   32.129549] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007ff55755b59d
[   32.130310] RDX: 0000000020000140 RSI: 0000000000003b80 RDI: 0000000000000003
[   32.131052] RBP: 00007fff1c422fd0 R08: 00007fff1c422fd0 R09: 00007fff1c422fd0
[   32.131858] R10: 00007fff1c422fd0 R11: 0000000000000213 R12: 0000000000401180
[   32.132598] R13: 00007fff1c4230f0 R14: 0000000000000000 R15: 0000000000000000
[   32.133378]  </TASK>
[   32.133635] irq event stamp: 19217
[   32.134021] hardirqs last  enabled at (19225): [<ffffffff811b8b21>] __up_console_sem+0x91/0xb0
[   32.134986] hardirqs last disabled at (19232): [<ffffffff811b8b06>] __up_console_sem+0x76/0xb0
[   32.135951] softirqs last  enabled at (18704): [<ffffffff83000329>] __do_softirq+0x329/0x490
[   32.136871] softirqs last disabled at (18699): [<ffffffff811123c2>] irq_exit_rcu+0xd2/0x100
[   32.137754] ---[ end trace 0000000000000000 ]---
[   32.138416] ------------[ cut here ]------------
[   32.138922] WARNING: CPU: 1 PID: 611 at drivers/iommu/iommufd/pages.c:864 update_unpinned+0x75/0x80
[   32.139959] Modules linked in:
[   32.140318] CPU: 1 PID: 611 Comm: repro Tainted: G        W          6.1.0-rc3-e26eed4f623d+ #1
[   32.141250] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   32.142477] RIP: 0010:update_unpinned+0x75/0x80
[   32.143011] Code: 33 2d ff 48 89 de 31 c9 31 d2 4c 29 e6 4c 89 ef e8 60 fb ff ff e8 7b 33 2d ff 5b 41 5c 41 5d 5d c3 cc cc cc cc e8 6b 33 2d ff <0f> 0b eb e7 0f 1f 80 00 00 00 00 0f 1f 44 00 00 55 48 89 e5 41 57
[   32.144990] RSP: 0018:ffffc90000fc7ac8 EFLAGS: 00010246
[   32.145549] RAX: 0000000000000000 RBX: 0000000000000800 RCX: ffffffff81fc5bbf
[   32.146333] RDX: 0000000000000000 RSI: ffff888013e88000 RDI: 0000000000000002
[   32.147115] RBP: ffffc90000fc7ae0 R08: 0000000000000001 R09: 0000000000000001
[   32.147932] R10: ffff88807dd3b360 R11: 0000000000000009 R12: fffffffffffffff8
[   32.148716] R13: ffff88800a71a000 R14: 0000000000000809 R15: 00000000000007ff
[   32.149463] FS:  00007ff557436740(0000) GS:ffff88807dd00000(0000) knlGS:0000000000000000
[   32.150357] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   32.150997] CR2: 00007ff55755b580 CR3: 000000000f3a8004 CR4: 0000000000770ee0
[   32.151802] PKRU: 55555554
[   32.152110] Call Trace:
[   32.152400]  <TASK>
[   32.152669]  __iopt_area_unfill_domain+0x458/0x4d0
[   32.153249]  ? __this_cpu_preempt_check+0x20/0x30
[   32.153809]  ? lock_is_held_type+0xe6/0x140
[   32.154319]  ? rcu_read_lock_sched_held+0x57/0x80
[   32.154846]  ? __mutex_lock+0x13a/0xf30
[   32.155286]  ? write_comp_data+0x2f/0x90
[   32.155764]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   32.156311]  iopt_area_unfill_domain+0x32/0x40
[   32.156840]  iopt_table_remove_domain+0x23f/0x4b0
[   32.157377]  iommufd_device_selftest_detach+0x3a/0x90
[   32.157968]  iommufd_selftest_destroy+0x55/0x70
[   32.158514]  iommufd_object_destroy_user+0xce/0x130
[   32.159073]  iommufd_destroy+0xa2/0xc0
[   32.159525]  iommufd_fops_ioctl+0x1ef/0x310
[   32.160063]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   32.160608]  ? write_comp_data+0x2f/0x90
[   32.161059]  __x64_sys_ioctl+0x10e/0x160
[   32.161500]  ? iommufd_get_object.part.6+0x1c0/0x1c0
[   32.162073]  do_syscall_64+0x3b/0x90
[   32.162497]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   32.163069] RIP: 0033:0x7ff55755b59d
[   32.163471] Code: 00 c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d d3 08 0d 00 f7 d8 64 89 01 48
[   32.165423] RSP: 002b:00007fff1c422fb8 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   32.166266] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007ff55755b59d
[   32.167047] RDX: 0000000020000140 RSI: 0000000000003b80 RDI: 0000000000000003
[   32.167863] RBP: 00007fff1c422fd0 R08: 00007fff1c422fd0 R09: 00007fff1c422fd0
[   32.168659] R10: 00007fff1c422fd0 R11: 0000000000000213 R12: 0000000000401180
[   32.169428] R13: 00007fff1c4230f0 R14: 0000000000000000 R15: 0000000000000000
[   32.170219]  </TASK>
[   32.170473] irq event stamp: 19705
[   32.170841] hardirqs last  enabled at (19713): [<ffffffff811b8b21>] __up_console_sem+0x91/0xb0
[   32.171817] hardirqs last disabled at (19722): [<ffffffff811b8b06>] __up_console_sem+0x76/0xb0
[   32.172774] softirqs last  enabled at (19638): [<ffffffff83000329>] __do_softirq+0x329/0x490
[   32.173685] softirqs last disabled at (19629): [<ffffffff811123c2>] irq_exit_rcu+0xd2/0x100
[   32.174601] ---[ end trace 0000000000000000 ]---
[   32.182748] ------------[ cut here ]------------
[   32.183328] WARNING: CPU: 1 PID: 611 at drivers/iommu/iommufd/pages.c:864 update_unpinned+0x75/0x80
[   32.184510] Modules linked in:
[   32.184897] CPU: 1 PID: 611 Comm: repro Tainted: G        W          6.1.0-rc3-e26eed4f623d+ #1
[   32.185847] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   32.187119] RIP: 0010:update_unpinned+0x75/0x80
[   32.187707] Code: 33 2d ff 48 89 de 31 c9 31 d2 4c 29 e6 4c 89 ef e8 60 fb ff ff e8 7b 33 2d ff 5b 41 5c 41 5d 5d c3 cc cc cc cc e8 6b 33 2d ff <0f> 0b eb e7 0f 1f 80 00 00 00 00 0f 1f 44 00 00 55 48 89 e5 41 57
[   32.189734] RSP: 0018:ffffc90000fc7a28 EFLAGS: 00010246
[   32.190345] RAX: 0000000000000000 RBX: 0000000000000800 RCX: ffffffff81fc5bbf
[   32.191156] RDX: 0000000000000000 RSI: ffff888013e88000 RDI: 0000000000000002
[   32.192000] RBP: ffffc90000fc7a40 R08: 0000000000000001 R09: 0000000000000001
[   32.192817] R10: ffff88807dd3b2d0 R11: 0000000000000000 R12: fffffffffffffff7
[   32.193780] R13: ffff88800a71a000 R14: 0000000000000002 R15: 0000000000000002
[   32.194700] FS:  0000000000000000(0000) GS:ffff88807dd00000(0000) knlGS:0000000000000000
[   32.195718] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   32.196376] CR2: 00007ff55762d500 CR3: 0000000003a12005 CR4: 0000000000770ee0
[   32.197229] PKRU: 55555554
[   32.197528] Call Trace:
[   32.197804]  <TASK>
[   32.198120]  iopt_pages_unfill_xarray+0x522/0x5c0
[   32.198729]  ? write_comp_data+0x2f/0x90
[   32.199210]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   32.199804]  ? write_comp_data+0x2f/0x90
[   32.200243]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   32.200877]  ? interval_tree_remove+0x291/0x4e0
[   32.201381]  ? write_comp_data+0x2f/0x90
[   32.201810]  iopt_area_remove_access+0x108/0x120
[   32.202351]  iommufd_access_unpin_pages+0xf2/0x190
[   32.203024]  iommufd_test_access_unmap+0xe0/0x130
[   32.203559]  ? iommufd_test_access_unmap+0x130/0x130
[   32.204146]  iommufd_test_staccess_release+0x39/0x60
[   32.204720]  __fput+0x11f/0x450
[   32.205294]  ____fput+0x1e/0x30
[   32.205684]  task_work_run+0xb6/0x120
[   32.206126]  do_exit+0x547/0x1360
[   32.206539]  ? lockdep_hardirqs_on+0x8a/0x110
[   32.207193]  ? trace_hardirqs_on+0x3f/0xe0
[   32.207724]  do_group_exit+0x5e/0xf0
[   32.208162]  __x64_sys_exit_group+0x25/0x30
[   32.208685]  do_syscall_64+0x3b/0x90
[   32.209158]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   32.209721] RIP: 0033:0x7ff557523cf6
[   32.210266] Code: Unable to access opcode bytes at 0x7ff557523ccc.
[   32.210943] RSP: 002b:00007fff1c422f78 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
[   32.211920] RAX: ffffffffffffffda RBX: 00007ff55762e490 RCX: 00007ff557523cf6
[   32.212707] RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
[   32.213555] RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffff80
[   32.214305] R10: 0000000000000004 R11: 0000000000000246 R12: 00007ff55762e490
[   32.215154] R13: 0000000000000001 R14: 00007ff557631e88 R15: 0000000000000000
[   32.216067]  </TASK>
[   32.216326] irq event stamp: 25803
[   32.216719] hardirqs last  enabled at (25811): [<ffffffff811b8b21>] __up_console_sem+0x91/0xb0
[   32.217799] hardirqs last disabled at (25818): [<ffffffff811b8b06>] __up_console_sem+0x76/0xb0
[   32.218715] softirqs last  enabled at (25686): [<ffffffff83000329>] __do_softirq+0x329/0x490
[   32.219763] softirqs last disabled at (25681): [<ffffffff811123c2>] irq_exit_rcu+0xd2/0x100
[   32.220775] ---[ end trace 0000000000000000 ]---
[   32.221506] ------------[ cut here ]------------
[   32.222154] WARNING: CPU: 1 PID: 611 at drivers/iommu/iommufd/pages.c:1147 iopt_release_pages+0x159/0x190
[   32.223278] Modules linked in:
[   32.223645] CPU: 1 PID: 611 Comm: repro Tainted: G        W          6.1.0-rc3-e26eed4f623d+ #1
[   32.224660] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   32.225949] RIP: 0010:iopt_release_pages+0x159/0x190
[   32.226634] Code: 6d 13 ff eb cb e8 97 18 2d ff be 03 00 00 00 4c 89 f7 e8 da cd ce ff eb b7 e8 83 18 2d ff 0f 0b e9 ed fe ff ff e8 77 18 2d ff <0f> 0b e9 00 ff ff ff e8 6b 18 2d ff 0f 0b e9 07 ff ff ff e8 5f 18
[   32.228725] RSP: 0018:ffffc90000fc7c88 EFLAGS: 00010246
[   32.229372] RAX: 0000000000000000 RBX: ffff88800a71a000 RCX: ffffffff81fc75f7
[   32.230145] RDX: 0000000000000000 RSI: ffff888013e88000 RDI: 0000000000000002
[   32.231028] RBP: ffffc90000fc7ca8 R08: 000000000000001a R09: 0000000000000001
[   32.231828] R10: ffff888013e88db0 R11: 0000000000000000 R12: fffffffffffffff7
[   32.232731] R13: 0000000001000000 R14: 00000000017fffff R15: 0000000000000000
[   32.233498] FS:  0000000000000000(0000) GS:ffff88807dd00000(0000) knlGS:0000000000000000
[   32.234415] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   32.235152] CR2: 00007ff55762d500 CR3: 0000000003a12005 CR4: 0000000000770ee0
[   32.235953] PKRU: 55555554
[   32.236357] Call Trace:
[   32.236652]  <TASK>
[   32.236884]  iopt_unmap_iova_range+0x1ef/0x2e0
[   32.237424]  iopt_unmap_all+0x2f/0x60
[   32.237845]  iommufd_ioas_destroy+0x2c/0x70
[   32.238431]  iommufd_fops_release+0xd4/0x170
[   32.238918]  ? iommufd_ctx_get+0x30/0x30
[   32.239409]  __fput+0x11f/0x450
[   32.239814]  ____fput+0x1e/0x30
[   32.240188]  task_work_run+0xb6/0x120
[   32.240707]  do_exit+0x547/0x1360
[   32.241130]  ? lockdep_hardirqs_on+0x8a/0x110
[   32.241641]  ? trace_hardirqs_on+0x3f/0xe0
[   32.242220]  do_group_exit+0x5e/0xf0
[   32.242656]  __x64_sys_exit_group+0x25/0x30
[   32.243157]  do_syscall_64+0x3b/0x90
[   32.243587]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   32.244224] RIP: 0033:0x7ff557523cf6
[   32.244653] Code: Unable to access opcode bytes at 0x7ff557523ccc.
[   32.245327] RSP: 002b:00007fff1c422f78 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
[   32.246160] RAX: ffffffffffffffda RBX: 00007ff55762e490 RCX: 00007ff557523cf6
[   32.246947] RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
[   32.247772] RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffff80
[   32.248576] R10: 0000000000000004 R11: 0000000000000246 R12: 00007ff55762e490
[   32.249348] R13: 0000000000000001 R14: 00007ff557631e88 R15: 0000000000000000
[   32.250142]  </TASK>
[   32.250405] irq event stamp: 26289
[   32.250797] hardirqs last  enabled at (26297): [<ffffffff811b8b21>] __up_console_sem+0x91/0xb0
[   32.251804] hardirqs last disabled at (26306): [<ffffffff811b8b06>] __up_console_sem+0x76/0xb0
[   32.252762] softirqs last  enabled at (26206): [<ffffffff83000329>] __do_softirq+0x329/0x490
[   32.253670] softirqs last disabled at (26191): [<ffffffff811123c2>] irq_exit_rcu+0xd2/0x100
[   32.254587] ---[ end trace 0000000000000000 ]---
[   33.260440] ------------[ cut here ]------------
[   33.260825] WARNING: CPU: 0 PID: 629 at drivers/iommu/iommufd/pages.c:1256 __iopt_area_unfill_domain+0x4ba/0x4d0
[   33.261573] Modules linked in:
[   33.261808] CPU: 0 PID: 629 Comm: repro Tainted: G        W          6.1.0-rc3-e26eed4f623d+ #1
[   33.262427] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   33.263243] RIP: 0010:__iopt_area_unfill_domain+0x4ba/0x4d0
[   33.263700] Code: 70 e8 fa 24 db 00 31 ff 89 c3 89 c6 e8 1f 26 2d ff 85 db 0f 85 bc fb ff ff e8 a2 24 2d ff 0f 0b e9 b0 fb ff ff e8 96 24 2d ff <0f> 0b e9 64 ff ff ff e8 aa 20 db 00 66 2e 0f 1f 84 00 00 00 00 00
[   33.265010] RSP: 0018:ffffc9000117faf0 EFLAGS: 00010246
[   33.265402] RAX: 0000000000000000 RBX: 00000000ffffffff RCX: ffffffff81fc6a3d
[   33.265912] RDX: 0000000000000000 RSI: ffff888013e929c0 RDI: 0000000000000002
[   33.266433] RBP: ffffc9000117fd10 R08: 000000000003b3e5 R09: 000000000000000d
[   33.266935] R10: 000000000003b3c0 R11: 0000000000000024 R12: 00000000000007ff
[   33.267447] R13: 0000000000000800 R14: 0000000000000801 R15: 00000000000007ff
[   33.267987] FS:  00007ff557436740(0000) GS:ffff88807dc00000(0000) knlGS:0000000000000000
[   33.268578] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   33.268998] CR2: 00007ff55755b580 CR3: 000000000dbce003 CR4: 0000000000770ef0
[   33.269520] PKRU: 55555554
[   33.269728] Call Trace:
[   33.269919]  <TASK>
[   33.270109]  ? __this_cpu_preempt_check+0x20/0x30
[   33.270484]  ? lock_is_held_type+0xe6/0x140
[   33.270806]  ? rcu_read_lock_sched_held+0x57/0x80
[   33.271159]  ? __mutex_lock+0x13a/0xf30
[   33.271458]  ? write_comp_data+0x2f/0x90
[   33.271780]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   33.272148]  iopt_area_unfill_domain+0x32/0x40
[   33.272490]  iopt_table_remove_domain+0x23f/0x4b0
[   33.272861]  iommufd_device_selftest_detach+0x3a/0x90
[   33.273241]  iommufd_selftest_destroy+0x55/0x70
[   33.273589]  iommufd_object_destroy_user+0xce/0x130
[   33.273961]  iommufd_destroy+0xa2/0xc0
[   33.274250]  iommufd_fops_ioctl+0x1ef/0x310
[   33.274568]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   33.274920]  ? write_comp_data+0x2f/0x90
[   33.275224]  __x64_sys_ioctl+0x10e/0x160
[   33.275522]  ? iommufd_get_object.part.6+0x1c0/0x1c0
[   33.275916]  do_syscall_64+0x3b/0x90
[   33.276191]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   33.276573] RIP: 0033:0x7ff55755b59d
[   33.276843] Code: 00 c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d d3 08 0d 00 f7 d8 64 89 01 48
[   33.278150] RSP: 002b:00007fff1c422fb8 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   33.278692] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007ff55755b59d
[   33.279208] RDX: 0000000020000140 RSI: 0000000000003b80 RDI: 0000000000000003
[   33.279740] RBP: 00007fff1c422fd0 R08: 00007fff1c422fd0 R09: 00007fff1c422fd0
[   33.280258] R10: 00007fff1c422fd0 R11: 0000000000000213 R12: 0000000000401180
[   33.280775] R13: 00007fff1c4230f0 R14: 0000000000000000 R15: 0000000000000000
[   33.281308]  </TASK>
[   33.281475] irq event stamp: 18743
[   33.281727] hardirqs last  enabled at (18751): [<ffffffff811b8b21>] __up_console_sem+0x91/0xb0
[   33.282336] hardirqs last disabled at (18758): [<ffffffff811b8b06>] __up_console_sem+0x76/0xb0
[   33.282943] softirqs last  enabled at (18456): [<ffffffff83000329>] __do_softirq+0x329/0x490
[   33.283568] softirqs last disabled at (18443): [<ffffffff811123c2>] irq_exit_rcu+0xd2/0x100
[   33.284205] ---[ end trace 0000000000000000 ]---
[   33.288567] ------------[ cut here ]------------
[   33.288927] WARNING: CPU: 0 PID: 629 at drivers/iommu/iommufd/pages.c:864 update_unpinned+0x75/0x80
[   33.289587] Modules linked in:
[   33.289823] CPU: 0 PID: 629 Comm: repro Tainted: G        W          6.1.0-rc3-e26eed4f623d+ #1
[   33.290459] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   33.291273] RIP: 0010:update_unpinned+0x75/0x80
[   33.291619] Code: 33 2d ff 48 89 de 31 c9 31 d2 4c 29 e6 4c 89 ef e8 60 fb ff ff e8 7b 33 2d ff 5b 41 5c 41 5d 5d c3 cc cc cc cc e8 6b 33 2d ff <0f> 0b eb e7 0f 1f 80 00 00 00 00 0f 1f 44 00 00 55 48 89 e5 41 57
[   33.292963] RSP: 0018:ffffc9000117fa28 EFLAGS: 00010246
[   33.293351] RAX: 0000000000000000 RBX: 0000000000000000 RCX: ffffffff81fc5bbf
[   33.293870] RDX: 0000000000000000 RSI: ffff888013e929c0 RDI: 0000000000000002
[   33.294397] RBP: ffffc9000117fa40 R08: 0000000000000001 R09: 0000000000000001
[   33.294897] R10: ffff88807dc3b2d0 R11: 0000000000000000 R12: ffffffffffffffff
[   33.295404] R13: ffff88800dae7a00 R14: 0000000000000002 R15: 0000000000000002
[   33.295945] FS:  0000000000000000(0000) GS:ffff88807dc00000(0000) knlGS:0000000000000000
[   33.296531] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   33.296957] CR2: 00007ff55762d500 CR3: 0000000003a12005 CR4: 0000000000770ef0
[   33.297476] PKRU: 55555554
[   33.297684] Call Trace:
[   33.297870]  <TASK>
[   33.298042]  iopt_pages_unfill_xarray+0x522/0x5c0
[   33.298433]  ? write_comp_data+0x2f/0x90
[   33.298749]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   33.299117]  ? write_comp_data+0x2f/0x90
[   33.299418]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   33.299796]  ? interval_tree_remove+0x291/0x4e0
[   33.300148]  ? write_comp_data+0x2f/0x90
[   33.300450]  iopt_area_remove_access+0x108/0x120
[   33.300809]  iommufd_access_unpin_pages+0xf2/0x190
[   33.301188]  iommufd_test_access_unmap+0xe0/0x130
[   33.301556]  ? iommufd_test_access_unmap+0x130/0x130
[   33.301931]  iommufd_test_staccess_release+0x39/0x60
[   33.302308]  __fput+0x11f/0x450
[   33.302563]  ____fput+0x1e/0x30
[   33.302814]  task_work_run+0xb6/0x120
[   33.303107]  do_exit+0x547/0x1360
[   33.303373]  ? lockdep_hardirqs_on+0x8a/0x110
[   33.303738]  ? trace_hardirqs_on+0x3f/0xe0
[   33.304071]  do_group_exit+0x5e/0xf0
[   33.304355]  __x64_sys_exit_group+0x25/0x30
[   33.304686]  do_syscall_64+0x3b/0x90
[   33.304965]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   33.305348] RIP: 0033:0x7ff557523cf6
[   33.305621] Code: Unable to access opcode bytes at 0x7ff557523ccc.
[   33.306060] RSP: 002b:00007fff1c422f78 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
[   33.306603] RAX: ffffffffffffffda RBX: 00007ff55762e490 RCX: 00007ff557523cf6
[   33.307122] RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
[   33.307637] RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffff80
[   33.308174] R10: 0000000000000004 R11: 0000000000000246 R12: 00007ff55762e490
[   33.308700] R13: 0000000000000001 R14: 00007ff557631e88 R15: 0000000000000000
[   33.309233]  </TASK>
[   33.309410] irq event stamp: 24805
[   33.309666] hardirqs last  enabled at (24813): [<ffffffff811b8b21>] __up_console_sem+0x91/0xb0
[   33.310296] hardirqs last disabled at (24820): [<ffffffff811b8b06>] __up_console_sem+0x76/0xb0
[   33.310910] softirqs last  enabled at (24438): [<ffffffff83000329>] __do_softirq+0x329/0x490
[   33.311546] softirqs last disabled at (24433): [<ffffffff811123c2>] irq_exit_rcu+0xd2/0x100
[   33.312166] ---[ end trace 0000000000000000 ]---
[   33.312658] ------------[ cut here ]------------
[   33.312999] WARNING: CPU: 0 PID: 629 at drivers/iommu/iommufd/pages.c:1147 iopt_release_pages+0x159/0x190
[   33.313700] Modules linked in:
[   33.313938] CPU: 0 PID: 629 Comm: repro Tainted: G        W          6.1.0-rc3-e26eed4f623d+ #1
[   33.314560] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   33.315377] RIP: 0010:iopt_release_pages+0x159/0x190
[   33.315768] Code: 6d 13 ff eb cb e8 97 18 2d ff be 03 00 00 00 4c 89 f7 e8 da cd ce ff eb b7 e8 83 18 2d ff 0f 0b e9 ed fe ff ff e8 77 18 2d ff <0f> 0b e9 00 ff ff ff e8 6b 18 2d ff 0f 0b e9 07 ff ff ff e8 5f 18
[   33.317064] RSP: 0018:ffffc9000117fc88 EFLAGS: 00010246
[   33.317436] RAX: 0000000000000000 RBX: ffff88800dae7a00 RCX: ffffffff81fc75f7
[   33.317945] RDX: 0000000000000000 RSI: ffff888013e929c0 RDI: 0000000000000002
[   33.318466] RBP: ffffc9000117fca8 R08: 000000000000001a R09: 0000000000000001
[   33.318973] R10: ffff888013e93770 R11: 0000000000000000 R12: ffffffffffffffff
[   33.319484] R13: 0000000001000000 R14: 00000000017fffff R15: 0000000000000000
[   33.320004] FS:  0000000000000000(0000) GS:ffff88807dc00000(0000) knlGS:0000000000000000
[   33.320578] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   33.320991] CR2: 00007ff55762d500 CR3: 0000000003a12005 CR4: 0000000000770ef0
[   33.321519] PKRU: 55555554
[   33.321729] Call Trace:
[   33.321917]  <TASK>
[   33.322086]  iopt_unmap_iova_range+0x1ef/0x2e0
[   33.322447]  iopt_unmap_all+0x2f/0x60
[   33.322727]  iommufd_ioas_destroy+0x2c/0x70
[   33.323043]  iommufd_fops_release+0xd4/0x170
[   33.323370]  ? iommufd_ctx_get+0x30/0x30
[   33.323685]  __fput+0x11f/0x450
[   33.323933]  ____fput+0x1e/0x30
[   33.324185]  task_work_run+0xb6/0x120
[   33.324479]  do_exit+0x547/0x1360
[   33.324751]  ? lockdep_hardirqs_on+0x8a/0x110
[   33.325092]  ? trace_hardirqs_on+0x3f/0xe0
[   33.325404]  do_group_exit+0x5e/0xf0
[   33.325693]  __x64_sys_exit_group+0x25/0x30
[   33.326020]  do_syscall_64+0x3b/0x90
[   33.326299]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   33.326676] RIP: 0033:0x7ff557523cf6
[   33.326944] Code: Unable to access opcode bytes at 0x7ff557523ccc.
[   33.327386] RSP: 002b:00007fff1c422f78 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
[   33.327947] RAX: ffffffffffffffda RBX: 00007ff55762e490 RCX: 00007ff557523cf6
[   33.328463] RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
[   33.328990] RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffff80
[   33.329488] R10: 0000000000000004 R11: 0000000000000246 R12: 00007ff55762e490
[   33.330010] R13: 0000000000000001 R14: 00007ff557631e88 R15: 0000000000000000
[   33.330535]  </TASK>
[   33.330709] irq event stamp: 25263
[   33.330963] hardirqs last  enabled at (25271): [<ffffffff811b8b21>] __up_console_sem+0x91/0xb0
[   33.331581] hardirqs last disabled at (25278): [<ffffffff811b8b06>] __up_console_sem+0x76/0xb0
[   33.332216] softirqs last  enabled at (24438): [<ffffffff83000329>] __do_softirq+0x329/0x490
[   33.332829] softirqs last disabled at (24433): [<ffffffff811123c2>] irq_exit_rcu+0xd2/0x100
[   33.333424] ---[ end trace 0000000000000000 ]---
[   33.773929] ------------[ cut here ]------------
[   33.774318] WARNING: CPU: 0 PID: 642 at drivers/iommu/iommufd/pages.c:1256 __iopt_area_unfill_domain+0x4ba/0x4d0
[   33.775054] Modules linked in:
[   33.775287] CPU: 0 PID: 642 Comm: repro Tainted: G        W          6.1.0-rc3-e26eed4f623d+ #1
[   33.775926] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   33.776725] RIP: 0010:__iopt_area_unfill_domain+0x4ba/0x4d0
[   33.777125] Code: 70 e8 fa 24 db 00 31 ff 89 c3 89 c6 e8 1f 26 2d ff 85 db 0f 85 bc fb ff ff e8 a2 24 2d ff 0f 0b e9 b0 fb ff ff e8 96 24 2d ff <0f> 0b e9 64 ff ff ff e8 aa 20 db 00 66 2e 0f 1f 84 00 00 00 00 00
[   33.778439] RSP: 0018:ffffc900011e7af0 EFLAGS: 00010246
[   33.778819] RAX: 0000000000000000 RBX: 00000000ffffffff RCX: ffffffff81fc6a3d
[   33.779332] RDX: 0000000000000000 RSI: ffff888013e95380 RDI: 0000000000000002
[   33.779856] RBP: ffffc900011e7d10 R08: 000000000003b3e5 R09: 000000000000000f
[   33.780368] R10: 000000000003b3c0 R11: 0000000000000024 R12: 00000000000007ff
[   33.780897] R13: 0000000000000800 R14: 0000000000000801 R15: 00000000000007ff
[   33.781411] FS:  00007ff557436740(0000) GS:ffff88807dc00000(0000) knlGS:0000000000000000
[   33.781989] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   33.782415] CR2: 00007ff55755b580 CR3: 000000000f3ac001 CR4: 0000000000770ef0
[   33.782919] PKRU: 55555554
[   33.783120] Call Trace:
[   33.783301]  <TASK>
[   33.783491]  ? __this_cpu_preempt_check+0x20/0x30
[   33.783872]  ? lock_is_held_type+0xe6/0x140
[   33.784197]  ? rcu_read_lock_sched_held+0x57/0x80
[   33.784557]  ? __mutex_lock+0x13a/0xf30
[   33.784854]  ? write_comp_data+0x2f/0x90
[   33.785152]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   33.785514]  iopt_area_unfill_domain+0x32/0x40
[   33.785853]  iopt_table_remove_domain+0x23f/0x4b0
[   33.786208]  iommufd_device_selftest_detach+0x3a/0x90
[   33.786592]  iommufd_selftest_destroy+0x55/0x70
[   33.786933]  iommufd_object_destroy_user+0xce/0x130
[   33.787303]  iommufd_destroy+0xa2/0xc0
[   33.787598]  iommufd_fops_ioctl+0x1ef/0x310
[   33.787965]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   33.788321]  ? write_comp_data+0x2f/0x90
[   33.788652]  __x64_sys_ioctl+0x10e/0x160
[   33.788948]  ? iommufd_get_object.part.6+0x1c0/0x1c0
[   33.789316]  do_syscall_64+0x3b/0x90
[   33.789602]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   33.789973] RIP: 0033:0x7ff55755b59d
[   33.790250] Code: 00 c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d d3 08 0d 00 f7 d8 64 89 01 48
[   33.791567] RSP: 002b:00007fff1c422fb8 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   33.792134] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007ff55755b59d
[   33.792654] RDX: 0000000020000140 RSI: 0000000000003b80 RDI: 0000000000000003
[   33.793151] RBP: 00007fff1c422fd0 R08: 00007fff1c422fd0 R09: 00007fff1c422fd0
[   33.793665] R10: 00007fff1c422fd0 R11: 0000000000000213 R12: 0000000000401180
[   33.794182] R13: 00007fff1c4230f0 R14: 0000000000000000 R15: 0000000000000000
[   33.794705]  </TASK>
[   33.794875] irq event stamp: 18727
[   33.795124] hardirqs last  enabled at (18735): [<ffffffff811b8b21>] __up_console_sem+0x91/0xb0
[   33.795776] hardirqs last disabled at (18750): [<ffffffff811b8b06>] __up_console_sem+0x76/0xb0
[   33.796452] softirqs last  enabled at (18748): [<ffffffff83000329>] __do_softirq+0x329/0x490
[   33.797277] softirqs last disabled at (18743): [<ffffffff811123c2>] irq_exit_rcu+0xd2/0x100
[   33.798080] ---[ end trace 0000000000000000 ]---
[   33.802966] ------------[ cut here ]------------
[   33.803447] WARNING: CPU: 0 PID: 642 at drivers/iommu/iommufd/pages.c:864 update_unpinned+0x75/0x80
[   33.804363] Modules linked in:
[   33.804687] CPU: 0 PID: 642 Comm: repro Tainted: G        W          6.1.0-rc3-e26eed4f623d+ #1
[   33.805513] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   33.806594] RIP: 0010:update_unpinned+0x75/0x80
[   33.807045] Code: 33 2d ff 48 89 de 31 c9 31 d2 4c 29 e6 4c 89 ef e8 60 fb ff ff e8 7b 33 2d ff 5b 41 5c 41 5d 5d c3 cc cc cc cc e8 6b 33 2d ff <0f> 0b eb e7 0f 1f 80 00 00 00 00 0f 1f 44 00 00 55 48 89 e5 41 57
[   33.808821] RSP: 0018:ffffc900011e7a28 EFLAGS: 00010246
[   33.809333] RAX: 0000000000000000 RBX: 0000000000000000 RCX: ffffffff81fc5bbf
[   33.810023] RDX: 0000000000000000 RSI: ffff888013e95380 RDI: 0000000000000002
[   33.810712] RBP: ffffc900011e7a40 R08: 0000000000000001 R09: 0000000000000001
[   33.811391] R10: ffff88807dc3b2d0 R11: 0000000000000000 R12: ffffffffffffffff
[   33.812094] R13: ffff88800dae7200 R14: 0000000000000002 R15: 0000000000000002
[   33.812785] FS:  0000000000000000(0000) GS:ffff88807dc00000(0000) knlGS:0000000000000000
[   33.813552] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   33.814105] CR2: 00007ff55762d500 CR3: 0000000003a12003 CR4: 0000000000770ef0
[   33.814790] PKRU: 55555554
[   33.815064] Call Trace:
[   33.815313]  <TASK>
[   33.815535]  iopt_pages_unfill_xarray+0x522/0x5c0
[   33.816059]  ? write_comp_data+0x2f/0x90
[   33.816460]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   33.816936]  ? write_comp_data+0x2f/0x90
[   33.817331]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   33.817807]  ? interval_tree_remove+0x291/0x4e0
[   33.818276]  ? write_comp_data+0x2f/0x90
[   33.818674]  iopt_area_remove_access+0x108/0x120
[   33.819144]  iommufd_access_unpin_pages+0xf2/0x190
[   33.819569]  iommufd_test_access_unmap+0xe0/0x130
[   33.820031]  ? iommufd_test_access_unmap+0x130/0x130
[   33.820412]  iommufd_test_staccess_release+0x39/0x60
[   33.820794]  __fput+0x11f/0x450
[   33.821058]  ____fput+0x1e/0x30
[   33.821310]  task_work_run+0xb6/0x120
[   33.821597]  do_exit+0x547/0x1360
[   33.821866]  ? lockdep_hardirqs_on+0x8a/0x110
[   33.822207]  ? trace_hardirqs_on+0x3f/0xe0
[   33.822524]  do_group_exit+0x5e/0xf0
[   33.822813]  __x64_sys_exit_group+0x25/0x30
[   33.823145]  do_syscall_64+0x3b/0x90
[   33.823423]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   33.823818] RIP: 0033:0x7ff557523cf6
[   33.824129] Code: Unable to access opcode bytes at 0x7ff557523ccc.
[   33.824601] RSP: 002b:00007fff1c422f78 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
[   33.825152] RAX: ffffffffffffffda RBX: 00007ff55762e490 RCX: 00007ff557523cf6
[   33.825662] RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
[   33.826175] RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffff80
[   33.826695] R10: 0000000000000004 R11: 0000000000000246 R12: 00007ff55762e490
[   33.827196] R13: 0000000000000001 R14: 00007ff557631e88 R15: 0000000000000000
[   33.827753]  </TASK>
[   33.827926] irq event stamp: 24835
[   33.828180] hardirqs last  enabled at (24843): [<ffffffff811b8b21>] __up_console_sem+0x91/0xb0
[   33.828809] hardirqs last disabled at (24850): [<ffffffff811b8b06>] __up_console_sem+0x76/0xb0
[   33.829423] softirqs last  enabled at (24654): [<ffffffff83000329>] __do_softirq+0x329/0x490
[   33.830035] softirqs last disabled at (24643): [<ffffffff811123c2>] irq_exit_rcu+0xd2/0x100
[   33.830639] ---[ end trace 0000000000000000 ]---
[   33.831116] ------------[ cut here ]------------
[   33.831460] WARNING: CPU: 0 PID: 642 at drivers/iommu/iommufd/pages.c:1147 iopt_release_pages+0x159/0x190
[   33.832163] Modules linked in:
[   33.832399] CPU: 0 PID: 642 Comm: repro Tainted: G        W          6.1.0-rc3-e26eed4f623d+ #1
[   33.833036] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   33.833845] RIP: 0010:iopt_release_pages+0x159/0x190
[   33.834216] Code: 6d 13 ff eb cb e8 97 18 2d ff be 03 00 00 00 4c 89 f7 e8 da cd ce ff eb b7 e8 83 18 2d ff 0f 0b e9 ed fe ff ff e8 77 18 2d ff <0f> 0b e9 00 ff ff ff e8 6b 18 2d ff 0f 0b e9 07 ff ff ff e8 5f 18
[   33.835516] RSP: 0018:ffffc900011e7c88 EFLAGS: 00010246
[   33.835909] RAX: 0000000000000000 RBX: ffff88800dae7200 RCX: ffffffff81fc75f7
[   33.836434] RDX: 0000000000000000 RSI: ffff888013e95380 RDI: 0000000000000002
[   33.836953] RBP: ffffc900011e7ca8 R08: 000000000000001a R09: 0000000000000001
[   33.837463] R10: ffff888013e96130 R11: 0000000000000000 R12: ffffffffffffffff
[   33.837976] R13: 0000000001000000 R14: 00000000017fffff R15: 0000000000000000
[   33.838526] FS:  0000000000000000(0000) GS:ffff88807dc00000(0000) knlGS:0000000000000000
[   33.839112] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   33.839537] CR2: 00007ff55762d500 CR3: 0000000003a12003 CR4: 0000000000770ef0
[   33.840064] PKRU: 55555554
[   33.840270] Call Trace:
[   33.840462]  <TASK>
[   33.840637]  iopt_unmap_iova_range+0x1ef/0x2e0
[   33.841000]  iopt_unmap_all+0x2f/0x60
[   33.841283]  iommufd_ioas_destroy+0x2c/0x70
[   33.841601]  iommufd_fops_release+0xd4/0x170
[   33.841931]  ? iommufd_ctx_get+0x30/0x30
[   33.842228]  __fput+0x11f/0x450
[   33.842486]  ____fput+0x1e/0x30
[   33.842740]  task_work_run+0xb6/0x120
[   33.843031]  do_exit+0x547/0x1360
[   33.843302]  ? lockdep_hardirqs_on+0x8a/0x110
[   33.843649]  ? trace_hardirqs_on+0x3f/0xe0
[   33.844004]  do_group_exit+0x5e/0xf0
[   33.844288]  __x64_sys_exit_group+0x25/0x30
[   33.844619]  do_syscall_64+0x3b/0x90
[   33.844901]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   33.845282] RIP: 0033:0x7ff557523cf6
[   33.845557] Code: Unable to access opcode bytes at 0x7ff557523ccc.
[   33.846005] RSP: 002b:00007fff1c422f78 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
[   33.846551] RAX: ffffffffffffffda RBX: 00007ff55762e490 RCX: 00007ff557523cf6
[   33.847065] RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
[   33.847579] RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffff80
[   33.848162] R10: 0000000000000004 R11: 0000000000000246 R12: 00007ff55762e490
[   33.848676] R13: 0000000000000001 R14: 00007ff557631e88 R15: 0000000000000000
[   33.849195]  </TASK>
[   33.849369] irq event stamp: 25387
[   33.849627] hardirqs last  enabled at (25395): [<ffffffff811b8b21>] __up_console_sem+0x91/0xb0
[   33.850256] hardirqs last disabled at (25402): [<ffffffff811b8b06>] __up_console_sem+0x76/0xb0
[   33.850850] softirqs last  enabled at (25360): [<ffffffff83000329>] __do_softirq+0x329/0x490
[   33.851473] softirqs last disabled at (25277): [<ffffffff811123c2>] irq_exit_rcu+0xd2/0x100
[   33.852097] ---[ end trace 0000000000000000 ]---
[   34.051179] ------------[ cut here ]------------
[   34.051564] WARNING: CPU: 0 PID: 648 at drivers/iommu/iommufd/pages.c:1256 __iopt_area_unfill_domain+0x4ba/0x4d0
[   34.052343] Modules linked in:
[   34.052589] CPU: 0 PID: 648 Comm: repro Tainted: G        W          6.1.0-rc3-e26eed4f623d+ #1
[   34.053243] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   34.054057] RIP: 0010:__iopt_area_unfill_domain+0x4ba/0x4d0
[   34.054680] Code: 70 e8 fa 24 db 00 31 ff 89 c3 89 c6 e8 1f 26 2d ff 85 db 0f 85 bc fb ff ff e8 a2 24 2d ff 0f 0b e9 b0 fb ff ff e8 96 24 2d ff <0f> 0b e9 64 ff ff ff e8 aa 20 db 00 66 2e 0f 1f 84 00 00 00 00 00
[   34.056189] RSP: 0018:ffffc90001217af0 EFLAGS: 00010246
[   34.056596] RAX: 0000000000000000 RBX: 00000000ffffffff RCX: ffffffff81fc6a3d
[   34.057104] RDX: 0000000000000000 RSI: ffff888013e90000 RDI: 0000000000000002
[   34.057615] RBP: ffffc90001217d10 R08: 000000000003b3e5 R09: 0000000000000013
[   34.058135] R10: 000000000003b3c0 R11: 0000000000000024 R12: 00000000000007ff
[   34.058651] R13: 0000000000000800 R14: 0000000000000801 R15: 00000000000007ff
[   34.059158] FS:  00007ff557436740(0000) GS:ffff88807dc00000(0000) knlGS:0000000000000000
[   34.059767] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   34.060169] CR2: 00007ff55755b580 CR3: 000000000f3bc003 CR4: 0000000000770ef0
[   34.060677] PKRU: 55555554
[   34.060880] Call Trace:
[   34.061063]  <TASK>
[   34.061259]  ? __this_cpu_preempt_check+0x20/0x30
[   34.061637]  ? lock_is_held_type+0xe6/0x140
[   34.061962]  ? rcu_read_lock_sched_held+0x57/0x80
[   34.062328]  ? __mutex_lock+0x13a/0xf30
[   34.062633]  ? write_comp_data+0x2f/0x90
[   34.062936]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   34.063295]  iopt_area_unfill_domain+0x32/0x40
[   34.063629]  iopt_table_remove_domain+0x23f/0x4b0
[   34.063999]  iommufd_device_selftest_detach+0x3a/0x90
[   34.064379]  iommufd_selftest_destroy+0x55/0x70
[   34.064733]  iommufd_object_destroy_user+0xce/0x130
[   34.065110]  iommufd_destroy+0xa2/0xc0
[   34.065399]  iommufd_fops_ioctl+0x1ef/0x310
[   34.065721]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   34.066079]  ? write_comp_data+0x2f/0x90
[   34.066383]  __x64_sys_ioctl+0x10e/0x160
[   34.066682]  ? iommufd_get_object.part.6+0x1c0/0x1c0
[   34.067053]  do_syscall_64+0x3b/0x90
[   34.067331]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   34.067717] RIP: 0033:0x7ff55755b59d
[   34.067988] Code: 00 c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d d3 08 0d 00 f7 d8 64 89 01 48
[   34.069301] RSP: 002b:00007fff1c422fb8 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   34.069837] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007ff55755b59d
[   34.070347] RDX: 0000000020000140 RSI: 0000000000003b80 RDI: 0000000000000003
[   34.070858] RBP: 00007fff1c422fd0 R08: 00007fff1c422fd0 R09: 00007fff1c422fd0
[   34.071364] R10: 00007fff1c422fd0 R11: 0000000000000213 R12: 0000000000401180
[   34.071892] R13: 00007fff1c4230f0 R14: 0000000000000000 R15: 0000000000000000
[   34.072425]  </TASK>
[   34.072609] irq event stamp: 18763
[   34.072858] hardirqs last  enabled at (18771): [<ffffffff811b8b21>] __up_console_sem+0x91/0xb0
[   34.073481] hardirqs last disabled at (18778): [<ffffffff811b8b06>] __up_console_sem+0x76/0xb0
[   34.074100] softirqs last  enabled at (18420): [<ffffffff83000329>] __do_softirq+0x329/0x490
[   34.074713] softirqs last disabled at (18407): [<ffffffff811123c2>] irq_exit_rcu+0xd2/0x100
[   34.075311] ---[ end trace 0000000000000000 ]---
[   34.080244] ------------[ cut here ]------------
[   34.080851] WARNING: CPU: 0 PID: 648 at drivers/iommu/iommufd/pages.c:864 update_unpinned+0x75/0x80
[   34.081539] Modules linked in:
[   34.081787] CPU: 0 PID: 648 Comm: repro Tainted: G        W          6.1.0-rc3-e26eed4f623d+ #1
[   34.082500] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   34.083488] RIP: 0010:update_unpinned+0x75/0x80
[   34.083882] Code: 33 2d ff 48 89 de 31 c9 31 d2 4c 29 e6 4c 89 ef e8 60 fb ff ff e8 7b 33 2d ff 5b 41 5c 41 5d 5d c3 cc cc cc cc e8 6b 33 2d ff <0f> 0b eb e7 0f 1f 80 00 00 00 00 0f 1f 44 00 00 55 48 89 e5 41 57
[   34.085442] RSP: 0018:ffffc90001217a28 EFLAGS: 00010246
[   34.085846] RAX: 0000000000000000 RBX: 0000000000000000 RCX: ffffffff81fc5bbf
[   34.086383] RDX: 0000000000000000 RSI: ffff888013e90000 RDI: 0000000000000002
[   34.086926] RBP: ffffc90001217a40 R08: 0000000000000001 R09: 0000000000000001
[   34.087463] R10: ffff88807dc3b2d0 R11: 0000000000000000 R12: ffffffffffffffff
[   34.088011] R13: ffff88800dae7200 R14: 0000000000000002 R15: 0000000000000002
[   34.088749] FS:  0000000000000000(0000) GS:ffff88807dc00000(0000) knlGS:0000000000000000
[   34.089353] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   34.089784] CR2: 00007ff55762d500 CR3: 0000000003a12004 CR4: 0000000000770ef0
[   34.090320] PKRU: 55555554
[   34.090539] Call Trace:
[   34.090787]  <TASK>
[   34.091130]  iopt_pages_unfill_xarray+0x522/0x5c0
[   34.091544]  ? write_comp_data+0x2f/0x90
[   34.091882]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   34.092249]  ? write_comp_data+0x2f/0x90
[   34.092569]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   34.092937]  ? interval_tree_remove+0x291/0x4e0
[   34.093300]  ? write_comp_data+0x2f/0x90
[   34.093620]  iopt_area_remove_access+0x108/0x120
[   34.094002]  iommufd_access_unpin_pages+0xf2/0x190
[   34.094396]  iommufd_test_access_unmap+0xe0/0x130
[   34.095010]  ? iommufd_test_access_unmap+0x130/0x130
[   34.095414]  iommufd_test_staccess_release+0x39/0x60
[   34.095832]  __fput+0x11f/0x450
[   34.096107]  ____fput+0x1e/0x30
[   34.096369]  task_work_run+0xb6/0x120
[   34.096680]  do_exit+0x547/0x1360
[   34.096960]  ? lockdep_hardirqs_on+0x8a/0x110
[   34.097313]  ? trace_hardirqs_on+0x3f/0xe0
[   34.097647]  do_group_exit+0x5e/0xf0
[   34.097950]  __x64_sys_exit_group+0x25/0x30
[   34.098536]  do_syscall_64+0x3b/0x90
[   34.098825]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   34.099217] RIP: 0033:0x7ff557523cf6
[   34.099500] Code: Unable to access opcode bytes at 0x7ff557523ccc.
[   34.099984] RSP: 002b:00007fff1c422f78 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
[   34.100569] RAX: ffffffffffffffda RBX: 00007ff55762e490 RCX: 00007ff557523cf6
[   34.101097] RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
[   34.101672] RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffff80
[   34.102384] R10: 0000000000000004 R11: 0000000000000246 R12: 00007ff55762e490
[   34.102926] R13: 0000000000000001 R14: 00007ff557631e88 R15: 0000000000000000
[   34.103500]  </TASK>
[   34.103858] irq event stamp: 25037
[   34.104130] hardirqs last  enabled at (25045): [<ffffffff811b8b21>] __up_console_sem+0x91/0xb0
[   34.104782] hardirqs last disabled at (25052): [<ffffffff811b8b06>] __up_console_sem+0x76/0xb0
[   34.105424] softirqs last  enabled at (25034): [<ffffffff83000329>] __do_softirq+0x329/0x490
[   34.106074] softirqs last disabled at (25023): [<ffffffff811123c2>] irq_exit_rcu+0xd2/0x100
[   34.106908] ---[ end trace 0000000000000000 ]---
[   34.107394] ------------[ cut here ]------------
[   34.107782] WARNING: CPU: 0 PID: 648 at drivers/iommu/iommufd/pages.c:1147 iopt_release_pages+0x159/0x190
[   34.108514] Modules linked in:
[   34.108761] CPU: 0 PID: 648 Comm: repro Tainted: G        W          6.1.0-rc3-e26eed4f623d+ #1
[   34.109416] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   34.110477] RIP: 0010:iopt_release_pages+0x159/0x190
[   34.110877] Code: 6d 13 ff eb cb e8 97 18 2d ff be 03 00 00 00 4c 89 f7 e8 da cd ce ff eb b7 e8 83 18 2d ff 0f 0b e9 ed fe ff ff e8 77 18 2d ff <0f> 0b e9 00 ff ff ff e8 6b 18 2d ff 0f 0b e9 07 ff ff ff e8 5f 18
[   34.112496] RSP: 0018:ffffc90001217c88 EFLAGS: 00010246
[   34.112900] RAX: 0000000000000000 RBX: ffff88800dae7200 RCX: ffffffff81fc75f7
[   34.113431] RDX: 0000000000000000 RSI: ffff888013e90000 RDI: 0000000000000002
[   34.113967] RBP: ffffc90001217ca8 R08: 000000000000001a R09: 0000000000000001
[   34.114563] R10: ffff888013e90db0 R11: 0000000000000000 R12: ffffffffffffffff
[   34.115209] R13: 0000000001000000 R14: 00000000017fffff R15: 0000000000000000
[   34.115771] FS:  0000000000000000(0000) GS:ffff88807dc00000(0000) knlGS:0000000000000000
[   34.116387] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   34.116830] CR2: 00007ff55762d500 CR3: 0000000003a12004 CR4: 0000000000770ef0
[   34.117358] PKRU: 55555554
[   34.117735] Call Trace:
[   34.117940]  <TASK>
[   34.118117]  iopt_unmap_iova_range+0x1ef/0x2e0
[   34.118487]  iopt_unmap_all+0x2f/0x60
[   34.118782]  iommufd_ioas_destroy+0x2c/0x70
[   34.119112]  iommufd_fops_release+0xd4/0x170
[   34.119563]  ? iommufd_ctx_get+0x30/0x30
[   34.120003]  __fput+0x11f/0x450
[   34.120277]  ____fput+0x1e/0x30
[   34.120541]  task_work_run+0xb6/0x120
[   34.120845]  do_exit+0x547/0x1360
[   34.121120]  ? lockdep_hardirqs_on+0x8a/0x110
[   34.121470]  ? trace_hardirqs_on+0x3f/0xe0
[   34.121799]  do_group_exit+0x5e/0xf0
[   34.122095]  __x64_sys_exit_group+0x25/0x30
[   34.122437]  do_syscall_64+0x3b/0x90
[   34.122726]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   34.123120] RIP: 0033:0x7ff557523cf6
[   34.123405] Code: Unable to access opcode bytes at 0x7ff557523ccc.
[   34.124129] RSP: 002b:00007fff1c422f78 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
[   34.124697] RAX: ffffffffffffffda RBX: 00007ff55762e490 RCX: 00007ff557523cf6
[   34.125212] RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
[   34.125742] RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffff80
[   34.126276] R10: 0000000000000004 R11: 0000000000000246 R12: 00007ff55762e490
[   34.127025] R13: 0000000000000001 R14: 00007ff557631e88 R15: 0000000000000000
[   34.127572]  </TASK>
[   34.127768] irq event stamp: 25615
[   34.128023] hardirqs last  enabled at (25623): [<ffffffff811b8b21>] __up_console_sem+0x91/0xb0
[   34.128658] hardirqs last disabled at (25630): [<ffffffff811b8b06>] __up_console_sem+0x76/0xb0
[   34.129292] softirqs last  enabled at (25594): [<ffffffff83000329>] __do_softirq+0x329/0x490
[   34.130131] softirqs last disabled at (25647): [<ffffffff811123c2>] irq_exit_rcu+0xd2/0x100
[   34.130806] ---[ end trace 0000000000000000 ]---
[   36.165313] ------------[ cut here ]------------
[   36.165905] WARNING: CPU: 0 PID: 683 at drivers/iommu/iommufd/pages.c:1256 __iopt_area_unfill_domain+0x4ba/0x4d0
[   36.167079] Modules linked in:
[   36.167432] CPU: 0 PID: 683 Comm: repro Tainted: G        W          6.1.0-rc3-e26eed4f623d+ #1
[   36.168446] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   36.169684] RIP: 0010:__iopt_area_unfill_domain+0x4ba/0x4d0
[   36.170332] Code: 70 e8 fa 24 db 00 31 ff 89 c3 89 c6 e8 1f 26 2d ff 85 db 0f 85 bc fb ff ff e8 a2 24 2d ff 0f 0b e9 b0 fb ff ff e8 96 24 2d ff <0f> 0b e9 64 ff ff ff e8 aa 20 db 00 66 2e 0f 1f 84 00 00 00 00 00
[   36.172342] RSP: 0018:ffffc90001327af0 EFLAGS: 00010246
[   36.172963] RAX: 0000000000000000 RBX: 00000000ffffffff RCX: ffffffff81fc6a3d
[   36.173756] RDX: 0000000000000000 RSI: ffff888013e95380 RDI: 0000000000000002
[   36.174526] RBP: ffffc90001327d10 R08: 000000000003b3e5 R09: 0000000000000011
[   36.175319] R10: 000000000003b3c0 R11: 0000000000000024 R12: 00000000000007ff
[   36.176186] R13: 0000000000000800 R14: 0000000000000801 R15: 00000000000007ff
[   36.176993] FS:  00007ff557436740(0000) GS:ffff88807dc00000(0000) knlGS:0000000000000000
[   36.177912] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   36.178586] CR2: 00007ff55755b580 CR3: 0000000017448003 CR4: 0000000000770ef0
[   36.179399] PKRU: 55555554
[   36.179747] Call Trace:
[   36.180028]  <TASK>
[   36.180326]  ? __this_cpu_preempt_check+0x20/0x30
[   36.180886]  ? lock_is_held_type+0xe6/0x140
[   36.181394]  ? rcu_read_lock_sched_held+0x57/0x80
[   36.181950]  ? __mutex_lock+0x13a/0xf30
[   36.182431]  ? write_comp_data+0x2f/0x90
[   36.182909]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   36.183444]  iopt_area_unfill_domain+0x32/0x40
[   36.184003]  iopt_table_remove_domain+0x23f/0x4b0
[   36.184584]  iommufd_device_selftest_detach+0x3a/0x90
[   36.185170]  iommufd_selftest_destroy+0x55/0x70
[   36.185725]  iommufd_object_destroy_user+0xce/0x130
[   36.186316]  iommufd_destroy+0xa2/0xc0
[   36.186783]  iommufd_fops_ioctl+0x1ef/0x310
[   36.187300]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   36.187873]  ? write_comp_data+0x2f/0x90
[   36.188358]  __x64_sys_ioctl+0x10e/0x160
[   36.188828]  ? iommufd_get_object.part.6+0x1c0/0x1c0
[   36.189420]  do_syscall_64+0x3b/0x90
[   36.189858]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   36.190449] RIP: 0033:0x7ff55755b59d
[   36.190865] Code: 00 c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d d3 08 0d 00 f7 d8 64 89 01 48
[   36.192877] RSP: 002b:00007fff1c422fb8 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   36.193706] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007ff55755b59d
[   36.194512] RDX: 0000000020000140 RSI: 0000000000003b80 RDI: 0000000000000003
[   36.195282] RBP: 00007fff1c422fd0 R08: 00007fff1c422fd0 R09: 00007fff1c422fd0
[   36.196083] R10: 00007fff1c422fd0 R11: 0000000000000213 R12: 0000000000401180
[   36.196870] R13: 00007fff1c4230f0 R14: 0000000000000000 R15: 0000000000000000
[   36.197669]  </TASK>
[   36.197929] irq event stamp: 18735
[   36.198337] hardirqs last  enabled at (18743): [<ffffffff811b8b21>] __up_console_sem+0x91/0xb0
[   36.199261] hardirqs last disabled at (18750): [<ffffffff811b8b06>] __up_console_sem+0x76/0xb0
[   36.200237] softirqs last  enabled at (18436): [<ffffffff83000329>] __do_softirq+0x329/0x490
[   36.201159] softirqs last disabled at (18427): [<ffffffff811123c2>] irq_exit_rcu+0xd2/0x100
[   36.202083] ---[ end trace 0000000000000000 ]---
[   36.210483] ------------[ cut here ]------------
[   36.211041] WARNING: CPU: 0 PID: 683 at drivers/iommu/iommufd/pages.c:864 update_unpinned+0x75/0x80
[   36.212112] Modules linked in:
[   36.212481] CPU: 0 PID: 683 Comm: repro Tainted: G        W          6.1.0-rc3-e26eed4f623d+ #1
[   36.213431] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   36.214639] RIP: 0010:update_unpinned+0x75/0x80
[   36.215165] Code: 33 2d ff 48 89 de 31 c9 31 d2 4c 29 e6 4c 89 ef e8 60 fb ff ff e8 7b 33 2d ff 5b 41 5c 41 5d 5d c3 cc cc cc cc e8 6b 33 2d ff <0f> 0b eb e7 0f 1f 80 00 00 00 00 0f 1f 44 00 00 55 48 89 e5 41 57
[   36.217216] RSP: 0018:ffffc90001327a28 EFLAGS: 00010246
[   36.217806] RAX: 0000000000000000 RBX: 0000000000000000 RCX: ffffffff81fc5bbf
[   36.218608] RDX: 0000000000000000 RSI: ffff888013e95380 RDI: 0000000000000002
[   36.219412] RBP: ffffc90001327a40 R08: 0000000000000001 R09: 0000000000000001
[   36.220242] R10: ffff88807dc3b2d0 R11: 0000000000000000 R12: ffffffffffffffff
[   36.221006] R13: ffff88800dae7a00 R14: 0000000000000002 R15: 0000000000000002
[   36.221772] FS:  0000000000000000(0000) GS:ffff88807dc00000(0000) knlGS:0000000000000000
[   36.222639] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   36.223291] CR2: 00007ff55762d500 CR3: 0000000003a12004 CR4: 0000000000770ef0
[   36.224079] PKRU: 55555554
[   36.224393] Call Trace:
[   36.224689]  <TASK>
[   36.224957]  iopt_pages_unfill_xarray+0x522/0x5c0
[   36.225577]  ? write_comp_data+0x2f/0x90
[   36.226023]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   36.226574]  ? write_comp_data+0x2f/0x90
[   36.227049]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   36.227605]  ? interval_tree_remove+0x291/0x4e0
[   36.228170]  ? write_comp_data+0x2f/0x90
[   36.228646]  iopt_area_remove_access+0x108/0x120
[   36.229194]  iommufd_access_unpin_pages+0xf2/0x190
[   36.229788]  iommufd_test_access_unmap+0xe0/0x130
[   36.230376]  ? iommufd_test_access_unmap+0x130/0x130
[   36.230970]  iommufd_test_staccess_release+0x39/0x60
[   36.231576]  __fput+0x11f/0x450
[   36.232032]  ____fput+0x1e/0x30
[   36.232424]  task_work_run+0xb6/0x120
[   36.232880]  do_exit+0x547/0x1360
[   36.233292]  ? lockdep_hardirqs_on+0x8a/0x110
[   36.233826]  ? trace_hardirqs_on+0x3f/0xe0
[   36.234326]  do_group_exit+0x5e/0xf0
[   36.234785]  __x64_sys_exit_group+0x25/0x30
[   36.235281]  do_syscall_64+0x3b/0x90
[   36.235758]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   36.236384] RIP: 0033:0x7ff557523cf6
[   36.236826] Code: Unable to access opcode bytes at 0x7ff557523ccc.
[   36.237515] RSP: 002b:00007fff1c422f78 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
[   36.238387] RAX: ffffffffffffffda RBX: 00007ff55762e490 RCX: 00007ff557523cf6
[   36.239178] RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
[   36.240094] RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffff80
[   36.240957] R10: 0000000000000004 R11: 0000000000000246 R12: 00007ff55762e490
[   36.241733] R13: 0000000000000001 R14: 00007ff557631e88 R15: 0000000000000000
[   36.242536]  </TASK>
[   36.242802] irq event stamp: 24801
[   36.243189] hardirqs last  enabled at (24809): [<ffffffff811b8b21>] __up_console_sem+0x91/0xb0
[   36.244185] hardirqs last disabled at (24818): [<ffffffff811b8b06>] __up_console_sem+0x76/0xb0
[   36.245130] softirqs last  enabled at (24644): [<ffffffff83000329>] __do_softirq+0x329/0x490
[   36.246073] softirqs last disabled at (24639): [<ffffffff811123c2>] irq_exit_rcu+0xd2/0x100
[   36.246977] ---[ end trace 0000000000000000 ]---
[   36.247794] ------------[ cut here ]------------
[   36.248327] WARNING: CPU: 0 PID: 683 at drivers/iommu/iommufd/pages.c:1147 iopt_release_pages+0x159/0x190
[   36.249375] Modules linked in:
[   36.249729] CPU: 0 PID: 683 Comm: repro Tainted: G        W          6.1.0-rc3-e26eed4f623d+ #1
[   36.250704] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   36.252001] RIP: 0010:iopt_release_pages+0x159/0x190
[   36.252600] Code: 6d 13 ff eb cb e8 97 18 2d ff be 03 00 00 00 4c 89 f7 e8 da cd ce ff eb b7 e8 83 18 2d ff 0f 0b e9 ed fe ff ff e8 77 18 2d ff <0f> 0b e9 00 ff ff ff e8 6b 18 2d ff 0f 0b e9 07 ff ff ff e8 5f 18
[   36.254613] RSP: 0018:ffffc90001327c88 EFLAGS: 00010246
[   36.255202] RAX: 0000000000000000 RBX: ffff88800dae7a00 RCX: ffffffff81fc75f7
[   36.256025] RDX: 0000000000000000 RSI: ffff888013e95380 RDI: 0000000000000002
[   36.256835] RBP: ffffc90001327ca8 R08: 000000000000001a R09: 0000000000000001
[   36.257620] R10: ffff888013e96130 R11: 0000000000000000 R12: ffffffffffffffff
[   36.258424] R13: 0000000001000000 R14: 00000000017fffff R15: 0000000000000000
[   36.259214] FS:  0000000000000000(0000) GS:ffff88807dc00000(0000) knlGS:0000000000000000
[   36.260143] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   36.260804] CR2: 00007ff55762d500 CR3: 0000000003a12004 CR4: 0000000000770ef0
[   36.261583] PKRU: 55555554
[   36.261901] Call Trace:
[   36.262199]  <TASK>
[   36.262475]  iopt_unmap_iova_range+0x1ef/0x2e0
[   36.263046]  iopt_unmap_all+0x2f/0x60
[   36.263493]  iommufd_ioas_destroy+0x2c/0x70
[   36.264041]  iommufd_fops_release+0xd4/0x170
[   36.264543]  ? iommufd_ctx_get+0x30/0x30
[   36.265017]  __fput+0x11f/0x450
[   36.265428]  ____fput+0x1e/0x30
[   36.265825]  task_work_run+0xb6/0x120
[   36.266293]  do_exit+0x547/0x1360
[   36.266722]  ? lockdep_hardirqs_on+0x8a/0x110
[   36.267256]  ? trace_hardirqs_on+0x3f/0xe0
[   36.267797]  do_group_exit+0x5e/0xf0
[   36.268250]  __x64_sys_exit_group+0x25/0x30
[   36.268763]  do_syscall_64+0x3b/0x90
[   36.269169]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   36.269739] RIP: 0033:0x7ff557523cf6
[   36.270166] Code: Unable to access opcode bytes at 0x7ff557523ccc.
[   36.270869] RSP: 002b:00007fff1c422f78 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
[   36.271770] RAX: ffffffffffffffda RBX: 00007ff55762e490 RCX: 00007ff557523cf6
[   36.272586] RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
[   36.273362] RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffff80
[   36.274158] R10: 0000000000000004 R11: 0000000000000246 R12: 00007ff55762e490
[   36.274912] R13: 0000000000000001 R14: 00007ff557631e88 R15: 0000000000000000
[   36.275761]  </TASK>
[   36.276035] irq event stamp: 25279
[   36.276440] hardirqs last  enabled at (25287): [<ffffffff811b8b21>] __up_console_sem+0x91/0xb0
[   36.277375] hardirqs last disabled at (25294): [<ffffffff811b8b06>] __up_console_sem+0x76/0xb0
[   36.278312] softirqs last  enabled at (24948): [<ffffffff83000329>] __do_softirq+0x329/0x490
[   36.279265] softirqs last disabled at (24943): [<ffffffff811123c2>] irq_exit_rcu+0xd2/0x100
[   36.280264] ---[ end trace 0000000000000000 ]---
[   37.011684] ------------[ cut here ]------------
[   37.012158] WARNING: CPU: 0 PID: 699 at drivers/iommu/iommufd/pages.c:1256 __iopt_area_unfill_domain+0x4ba/0x4d0
[   37.013125] Modules linked in:
[   37.013426] CPU: 0 PID: 699 Comm: repro Tainted: G        W          6.1.0-rc3-e26eed4f623d+ #1
[   37.014238] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   37.015050] RIP: 0010:__iopt_area_unfill_domain+0x4ba/0x4d0
[   37.015458] Code: 70 e8 fa 24 db 00 31 ff 89 c3 89 c6 e8 1f 26 2d ff 85 db 0f 85 bc fb ff ff e8 a2 24 2d ff 0f 0b e9 b0 fb ff ff e8 96 24 2d ff <0f> 0b e9 64 ff ff ff e8 aa 20 db 00 66 2e 0f 1f 84 00 00 00 00 00
[   37.016804] RSP: 0018:ffffc900013a7af0 EFLAGS: 00010246
[   37.017188] RAX: 0000000000000000 RBX: 00000000ffffffff RCX: ffffffff81fc6a3d
[   37.017699] RDX: 0000000000000000 RSI: ffff888013e929c0 RDI: 0000000000000002
[   37.018236] RBP: ffffc900013a7d10 R08: 000000000003b3e5 R09: 0000000000000011
[   37.018745] R10: 000000000003b3c0 R11: 0000000000000024 R12: 00000000000007ff
[   37.019244] R13: 0000000000000800 R14: 0000000000000801 R15: 00000000000007ff
[   37.019784] FS:  00007ff557436740(0000) GS:ffff88807dc00000(0000) knlGS:0000000000000000
[   37.020381] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   37.020800] CR2: 00007ff55755b580 CR3: 000000001746a004 CR4: 0000000000770ef0
[   37.021304] PKRU: 55555554
[   37.021505] Call Trace:
[   37.021696]  <TASK>
[   37.021886]  ? __this_cpu_preempt_check+0x20/0x30
[   37.022245]  ? lock_is_held_type+0xe6/0x140
[   37.022568]  ? rcu_read_lock_sched_held+0x57/0x80
[   37.022913]  ? __mutex_lock+0x13a/0xf30
[   37.023208]  ? write_comp_data+0x2f/0x90
[   37.023502]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   37.023885]  iopt_area_unfill_domain+0x32/0x40
[   37.024224]  iopt_table_remove_domain+0x23f/0x4b0
[   37.024591]  iommufd_device_selftest_detach+0x3a/0x90
[   37.024975]  iommufd_selftest_destroy+0x55/0x70
[   37.025325]  iommufd_object_destroy_user+0xce/0x130
[   37.025696]  iommufd_destroy+0xa2/0xc0
[   37.025988]  iommufd_fops_ioctl+0x1ef/0x310
[   37.026304]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   37.026650]  ? write_comp_data+0x2f/0x90
[   37.026947]  __x64_sys_ioctl+0x10e/0x160
[   37.027241]  ? iommufd_get_object.part.6+0x1c0/0x1c0
[   37.027610]  do_syscall_64+0x3b/0x90
[   37.027905]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   37.028279] RIP: 0033:0x7ff55755b59d
[   37.028560] Code: 00 c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d d3 08 0d 00 f7 d8 64 89 01 48
[   37.029874] RSP: 002b:00007fff1c422fb8 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   37.030446] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007ff55755b59d
[   37.030998] RDX: 0000000020000140 RSI: 0000000000003b80 RDI: 0000000000000003
[   37.031516] RBP: 00007fff1c422fd0 R08: 00007fff1c422fd0 R09: 00007fff1c422fd0
[   37.032053] R10: 00007fff1c422fd0 R11: 0000000000000213 R12: 0000000000401180
[   37.032577] R13: 00007fff1c4230f0 R14: 0000000000000000 R15: 0000000000000000
[   37.033099]  </TASK>
[   37.033302] irq event stamp: 18757
[   37.033558] hardirqs last  enabled at (18765): [<ffffffff811b8b21>] __up_console_sem+0x91/0xb0
[   37.034178] hardirqs last disabled at (18772): [<ffffffff811b8b06>] __up_console_sem+0x76/0xb0
[   37.034788] softirqs last  enabled at (18730): [<ffffffff83000329>] __do_softirq+0x329/0x490
[   37.035392] softirqs last disabled at (18725): [<ffffffff811123c2>] irq_exit_rcu+0xd2/0x100
[   37.036031] ---[ end trace 0000000000000000 ]---
[   37.040487] ------------[ cut here ]------------
[   37.040867] WARNING: CPU: 0 PID: 699 at drivers/iommu/iommufd/pages.c:864 update_unpinned+0x75/0x80
[   37.041527] Modules linked in:
[   37.041761] CPU: 0 PID: 699 Comm: repro Tainted: G        W          6.1.0-rc3-e26eed4f623d+ #1
[   37.042398] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   37.043200] RIP: 0010:update_unpinned+0x75/0x80
[   37.043543] Code: 33 2d ff 48 89 de 31 c9 31 d2 4c 29 e6 4c 89 ef e8 60 fb ff ff e8 7b 33 2d ff 5b 41 5c 41 5d 5d c3 cc cc cc cc e8 6b 33 2d ff <0f> 0b eb e7 0f 1f 80 00 00 00 00 0f 1f 44 00 00 55 48 89 e5 41 57
[   37.044908] RSP: 0018:ffffc900013a7a28 EFLAGS: 00010246
[   37.045295] RAX: 0000000000000000 RBX: 0000000000000000 RCX: ffffffff81fc5bbf
[   37.045808] RDX: 0000000000000000 RSI: ffff888013e929c0 RDI: 0000000000000002
[   37.046324] RBP: ffffc900013a7a40 R08: 0000000000000001 R09: 0000000000000001
[   37.046837] R10: ffff88807dc3b2d0 R11: 0000000000000000 R12: ffffffffffffffff
[   37.047369] R13: ffff88800dae7a00 R14: 0000000000000002 R15: 0000000000000002
[   37.047902] FS:  0000000000000000(0000) GS:ffff88807dc00000(0000) knlGS:0000000000000000
[   37.048472] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   37.048897] CR2: 00007ff55762d500 CR3: 0000000003a12006 CR4: 0000000000770ef0
[   37.049415] PKRU: 55555554
[   37.049619] Call Trace:
[   37.049804]  <TASK>
[   37.049973]  iopt_pages_unfill_xarray+0x522/0x5c0
[   37.050365]  ? write_comp_data+0x2f/0x90
[   37.050667]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   37.051016]  ? write_comp_data+0x2f/0x90
[   37.051311]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   37.051704]  ? interval_tree_remove+0x291/0x4e0
[   37.052052]  ? write_comp_data+0x2f/0x90
[   37.052353]  iopt_area_remove_access+0x108/0x120
[   37.052715]  iommufd_access_unpin_pages+0xf2/0x190
[   37.053090]  iommufd_test_access_unmap+0xe0/0x130
[   37.053444]  ? iommufd_test_access_unmap+0x130/0x130
[   37.053815]  iommufd_test_staccess_release+0x39/0x60
[   37.054187]  __fput+0x11f/0x450
[   37.054445]  ____fput+0x1e/0x30
[   37.054694]  task_work_run+0xb6/0x120
[   37.054981]  do_exit+0x547/0x1360
[   37.055245]  ? lockdep_hardirqs_on+0x8a/0x110
[   37.055583]  ? trace_hardirqs_on+0x3f/0xe0
[   37.055915]  do_group_exit+0x5e/0xf0
[   37.056204]  __x64_sys_exit_group+0x25/0x30
[   37.056530]  do_syscall_64+0x3b/0x90
[   37.056808]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   37.057202] RIP: 0033:0x7ff557523cf6
[   37.057524] Code: Unable to access opcode bytes at 0x7ff557523ccc.
[   37.058036] RSP: 002b:00007fff1c422f78 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
[   37.058603] RAX: ffffffffffffffda RBX: 00007ff55762e490 RCX: 00007ff557523cf6
[   37.059109] RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
[   37.059632] RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffff80
[   37.060166] R10: 0000000000000004 R11: 0000000000000246 R12: 00007ff55762e490
[   37.060687] R13: 0000000000000001 R14: 00007ff557631e88 R15: 0000000000000000
[   37.061213]  </TASK>
[   37.061383] irq event stamp: 24921
[   37.061639] hardirqs last  enabled at (24929): [<ffffffff811b8b21>] __up_console_sem+0x91/0xb0
[   37.062253] hardirqs last disabled at (24936): [<ffffffff811b8b06>] __up_console_sem+0x76/0xb0
[   37.062869] softirqs last  enabled at (24554): [<ffffffff83000329>] __do_softirq+0x329/0x490
[   37.063493] softirqs last disabled at (24471): [<ffffffff811123c2>] irq_exit_rcu+0xd2/0x100
[   37.064117] ---[ end trace 0000000000000000 ]---
[   37.064599] ------------[ cut here ]------------
[   37.064936] WARNING: CPU: 0 PID: 699 at drivers/iommu/iommufd/pages.c:1147 iopt_release_pages+0x159/0x190
[   37.065623] Modules linked in:
[   37.065855] CPU: 0 PID: 699 Comm: repro Tainted: G        W          6.1.0-rc3-e26eed4f623d+ #1
[   37.066476] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   37.067288] RIP: 0010:iopt_release_pages+0x159/0x190
[   37.067730] Code: 6d 13 ff eb cb e8 97 18 2d ff be 03 00 00 00 4c 89 f7 e8 da cd ce ff eb b7 e8 83 18 2d ff 0f 0b e9 ed fe ff ff e8 77 18 2d ff <0f> 0b e9 00 ff ff ff e8 6b 18 2d ff 0f 0b e9 07 ff ff ff e8 5f 18
[   37.069038] RSP: 0018:ffffc900013a7c88 EFLAGS: 00010246
[   37.069413] RAX: 0000000000000000 RBX: ffff88800dae7a00 RCX: ffffffff81fc75f7
[   37.069919] RDX: 0000000000000000 RSI: ffff888013e929c0 RDI: 0000000000000002
[   37.070445] RBP: ffffc900013a7ca8 R08: 000000000000001a R09: 0000000000000001
[   37.071016] R10: ffff888013e93770 R11: 0000000000000000 R12: ffffffffffffffff
[   37.071529] R13: 0000000001000000 R14: 00000000017fffff R15: 0000000000000000
[   37.072053] FS:  0000000000000000(0000) GS:ffff88807dc00000(0000) knlGS:0000000000000000
[   37.072638] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   37.073051] CR2: 00007ff55762d500 CR3: 0000000003a12006 CR4: 0000000000770ef0
[   37.073584] PKRU: 55555554
[   37.073790] Call Trace:
[   37.073982]  <TASK>
[   37.074153]  iopt_unmap_iova_range+0x1ef/0x2e0
[   37.074506]  iopt_unmap_all+0x2f/0x60
[   37.074782]  iommufd_ioas_destroy+0x2c/0x70
[   37.075095]  iommufd_fops_release+0xd4/0x170
[   37.075418]  ? iommufd_ctx_get+0x30/0x30
[   37.075733]  __fput+0x11f/0x450
[   37.075987]  ____fput+0x1e/0x30
[   37.076235]  task_work_run+0xb6/0x120
[   37.076523]  do_exit+0x547/0x1360
[   37.076824]  ? lockdep_hardirqs_on+0x8a/0x110
[   37.077158]  ? trace_hardirqs_on+0x3f/0xe0
[   37.077471]  do_group_exit+0x5e/0xf0
[   37.077754]  __x64_sys_exit_group+0x25/0x30
[   37.078082]  do_syscall_64+0x3b/0x90
[   37.078355]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   37.078726] RIP: 0033:0x7ff557523cf6
[   37.078992] Code: Unable to access opcode bytes at 0x7ff557523ccc.
[   37.079427] RSP: 002b:00007fff1c422f78 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
[   37.079984] RAX: ffffffffffffffda RBX: 00007ff55762e490 RCX: 00007ff557523cf6
[   37.080560] RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
[   37.081076] RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffff80
[   37.081585] R10: 0000000000000004 R11: 0000000000000246 R12: 00007ff55762e490
[   37.082089] R13: 0000000000000001 R14: 00007ff557631e88 R15: 0000000000000000
[   37.082607]  </TASK>
[   37.082778] irq event stamp: 25375
[   37.083026] hardirqs last  enabled at (25383): [<ffffffff811b8b21>] __up_console_sem+0x91/0xb0
[   37.083644] hardirqs last disabled at (25390): [<ffffffff811b8b06>] __up_console_sem+0x76/0xb0
[   37.084291] softirqs last  enabled at (25404): [<ffffffff83000329>] __do_softirq+0x329/0x490
[   37.084918] softirqs last disabled at (25395): [<ffffffff811123c2>] irq_exit_rcu+0xd2/0x100
[   37.085518] ---[ end trace 0000000000000000 ]---
[   37.183964] ------------[ cut here ]------------
[   37.184345] WARNING: CPU: 0 PID: 702 at drivers/iommu/iommufd/pages.c:1256 __iopt_area_unfill_domain+0x4ba/0x4d0
[   37.185080] Modules linked in:
[   37.185343] CPU: 0 PID: 702 Comm: repro Tainted: G        W          6.1.0-rc3-e26eed4f623d+ #1
[   37.185966] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   37.186798] RIP: 0010:__iopt_area_unfill_domain+0x4ba/0x4d0
[   37.187239] Code: 70 e8 fa 24 db 00 31 ff 89 c3 89 c6 e8 1f 26 2d ff 85 db 0f 85 bc fb ff ff e8 a2 24 2d ff 0f 0b e9 b0 fb ff ff e8 96 24 2d ff <0f> 0b e9 64 ff ff ff e8 aa 20 db 00 66 2e 0f 1f 84 00 00 00 00 00
[   37.188628] RSP: 0018:ffffc900013bfaf0 EFLAGS: 00010246
[   37.189214] RAX: 0000000000000000 RBX: 00000000ffffffff RCX: ffffffff81fc6a3d
[   37.190005] RDX: 0000000000000000 RSI: ffff888013e95380 RDI: 0000000000000002
[   37.190531] RBP: ffffc900013bfd10 R08: 000000000003b3e5 R09: 0000000000000009
[   37.191037] R10: 000000000003b3c0 R11: 0000000000000024 R12: 00000000000007ff
[   37.191572] R13: 0000000000000800 R14: 0000000000000801 R15: 00000000000007ff
[   37.192121] FS:  00007ff557436740(0000) GS:ffff88807dc00000(0000) knlGS:0000000000000000
[   37.192948] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   37.193384] CR2: 00007ff55755b580 CR3: 000000000f3cc002 CR4: 0000000000770ef0
[   37.193900] PKRU: 55555554
[   37.194101] Call Trace:
[   37.194285]  <TASK>
[   37.194495]  ? __this_cpu_preempt_check+0x20/0x30
[   37.194860]  ? lock_is_held_type+0xe6/0x140
[   37.195180]  ? rcu_read_lock_sched_held+0x57/0x80
[   37.195551]  ? __mutex_lock+0x13a/0xf30
[   37.195897]  ? write_comp_data+0x2f/0x90
[   37.196346]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   37.196888]  iopt_area_unfill_domain+0x32/0x40
[   37.197409]  iopt_table_remove_domain+0x23f/0x4b0
[   37.197811]  iommufd_device_selftest_detach+0x3a/0x90
[   37.198196]  iommufd_selftest_destroy+0x55/0x70
[   37.198542]  iommufd_object_destroy_user+0xce/0x130
[   37.198924]  iommufd_destroy+0xa2/0xc0
[   37.199213]  iommufd_fops_ioctl+0x1ef/0x310
[   37.199530]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   37.199917]  ? write_comp_data+0x2f/0x90
[   37.200377]  __x64_sys_ioctl+0x10e/0x160
[   37.200858]  ? iommufd_get_object.part.6+0x1c0/0x1c0
[   37.201368]  do_syscall_64+0x3b/0x90
[   37.201649]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   37.202035] RIP: 0033:0x7ff55755b59d
[   37.202311] Code: 00 c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d d3 08 0d 00 f7 d8 64 89 01 48
[   37.203619] RSP: 002b:00007fff1c422fb8 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   37.204228] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007ff55755b59d
[   37.205001] RDX: 0000000020000140 RSI: 0000000000003b80 RDI: 0000000000000003
[   37.205542] RBP: 00007fff1c422fd0 R08: 00007fff1c422fd0 R09: 00007fff1c422fd0
[   37.206054] R10: 00007fff1c422fd0 R11: 0000000000000213 R12: 0000000000401180
[   37.206578] R13: 00007fff1c4230f0 R14: 0000000000000000 R15: 0000000000000000
[   37.207098]  </TASK>
[   37.207287] irq event stamp: 18731
[   37.207540] hardirqs last  enabled at (18739): [<ffffffff811b8b21>] __up_console_sem+0x91/0xb0
[   37.208213] hardirqs last disabled at (18748): [<ffffffff811b8b06>] __up_console_sem+0x76/0xb0
[   37.209171] softirqs last  enabled at (18388): [<ffffffff83000329>] __do_softirq+0x329/0x490
[   37.209866] softirqs last disabled at (18375): [<ffffffff811123c2>] irq_exit_rcu+0xd2/0x100
[   37.210489] ---[ end trace 0000000000000000 ]---
[   37.215231] ------------[ cut here ]------------
[   37.215605] WARNING: CPU: 0 PID: 702 at drivers/iommu/iommufd/pages.c:864 update_unpinned+0x75/0x80
[   37.216321] Modules linked in:
[   37.216692] CPU: 0 PID: 702 Comm: repro Tainted: G        W          6.1.0-rc3-e26eed4f623d+ #1
[   37.217415] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   37.218230] RIP: 0010:update_unpinned+0x75/0x80
[   37.218572] Code: 33 2d ff 48 89 de 31 c9 31 d2 4c 29 e6 4c 89 ef e8 60 fb ff ff e8 7b 33 2d ff 5b 41 5c 41 5d 5d c3 cc cc cc cc e8 6b 33 2d ff <0f> 0b eb e7 0f 1f 80 00 00 00 00 0f 1f 44 00 00 55 48 89 e5 41 57
[   37.219910] RSP: 0018:ffffc900013bfa28 EFLAGS: 00010246
[   37.220506] RAX: 0000000000000000 RBX: 0000000000000000 RCX: ffffffff81fc5bbf
[   37.221043] RDX: 0000000000000000 RSI: ffff888013e95380 RDI: 0000000000000002
[   37.221568] RBP: ffffc900013bfa40 R08: 0000000000000001 R09: 0000000000000001
[   37.222075] R10: ffff88807dc3b2d0 R11: 0000000000000000 R12: ffffffffffffffff
[   37.222595] R13: ffff88800dae7200 R14: 0000000000000002 R15: 0000000000000002
[   37.223100] FS:  0000000000000000(0000) GS:ffff88807dc00000(0000) knlGS:0000000000000000
[   37.223732] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   37.224386] CR2: 00007ff55762d500 CR3: 0000000003a12001 CR4: 0000000000770ef0
[   37.225051] PKRU: 55555554
[   37.225256] Call Trace:
[   37.225444]  <TASK>
[   37.225629]  iopt_pages_unfill_xarray+0x522/0x5c0
[   37.226023]  ? write_comp_data+0x2f/0x90
[   37.226339]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   37.226710]  ? write_comp_data+0x2f/0x90
[   37.227011]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   37.227360]  ? interval_tree_remove+0x291/0x4e0
[   37.227750]  ? write_comp_data+0x2f/0x90
[   37.228234]  iopt_area_remove_access+0x108/0x120
[   37.228794]  iommufd_access_unpin_pages+0xf2/0x190
[   37.229343]  iommufd_test_access_unmap+0xe0/0x130
[   37.229704]  ? iommufd_test_access_unmap+0x130/0x130
[   37.230091]  iommufd_test_staccess_release+0x39/0x60
[   37.230474]  __fput+0x11f/0x450
[   37.230730]  ____fput+0x1e/0x30
[   37.230995]  task_work_run+0xb6/0x120
[   37.231285]  do_exit+0x547/0x1360
[   37.231548]  ? lockdep_hardirqs_on+0x8a/0x110
[   37.231926]  ? trace_hardirqs_on+0x3f/0xe0
[   37.232428]  do_group_exit+0x5e/0xf0
[   37.232878]  __x64_sys_exit_group+0x25/0x30
[   37.233384]  do_syscall_64+0x3b/0x90
[   37.233663]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   37.234047] RIP: 0033:0x7ff557523cf6
[   37.234338] Code: Unable to access opcode bytes at 0x7ff557523ccc.
[   37.234777] RSP: 002b:00007fff1c422f78 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
[   37.235333] RAX: ffffffffffffffda RBX: 00007ff55762e490 RCX: 00007ff557523cf6
[   37.235874] RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
[   37.236680] RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffff80
[   37.237267] R10: 0000000000000004 R11: 0000000000000246 R12: 00007ff55762e490
[   37.237800] R13: 0000000000000001 R14: 00007ff557631e88 R15: 0000000000000000
[   37.238375]  </TASK>
[   37.238573] irq event stamp: 24817
[   37.238841] hardirqs last  enabled at (24825): [<ffffffff811b8b21>] __up_console_sem+0x91/0xb0
[   37.239534] hardirqs last disabled at (24832): [<ffffffff811b8b06>] __up_console_sem+0x76/0xb0
[   37.240262] softirqs last  enabled at (24402): [<ffffffff83000329>] __do_softirq+0x329/0x490
[   37.241185] softirqs last disabled at (24393): [<ffffffff811123c2>] irq_exit_rcu+0xd2/0x100
[   37.241816] ---[ end trace 0000000000000000 ]---
[   37.242323] ------------[ cut here ]------------
[   37.242693] WARNING: CPU: 0 PID: 702 at drivers/iommu/iommufd/pages.c:1147 iopt_release_pages+0x159/0x190
[   37.243455] Modules linked in:
[   37.243734] CPU: 0 PID: 702 Comm: repro Tainted: G        W          6.1.0-rc3-e26eed4f623d+ #1
[   37.244649] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   37.245470] RIP: 0010:iopt_release_pages+0x159/0x190
[   37.245860] Code: 6d 13 ff eb cb e8 97 18 2d ff be 03 00 00 00 4c 89 f7 e8 da cd ce ff eb b7 e8 83 18 2d ff 0f 0b e9 ed fe ff ff e8 77 18 2d ff <0f> 0b e9 00 ff ff ff e8 6b 18 2d ff 0f 0b e9 07 ff ff ff e8 5f 18
[   37.247186] RSP: 0018:ffffc900013bfc88 EFLAGS: 00010246
[   37.247572] RAX: 0000000000000000 RBX: ffff88800dae7200 RCX: ffffffff81fc75f7
[   37.248137] RDX: 0000000000000000 RSI: ffff888013e95380 RDI: 0000000000000002
[   37.248934] RBP: ffffc900013bfca8 R08: 000000000000001a R09: 0000000000000001
[   37.249465] R10: ffff888013e96130 R11: 0000000000000000 R12: ffffffffffffffff
[   37.249984] R13: 0000000001000000 R14: 00000000017fffff R15: 0000000000000000
[   37.250511] FS:  0000000000000000(0000) GS:ffff88807dc00000(0000) knlGS:0000000000000000
[   37.251088] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   37.251515] CR2: 00007ff55762d500 CR3: 0000000003a12001 CR4: 0000000000770ef0
[   37.252052] PKRU: 55555554
[   37.252374] Call Trace:
[   37.252671]  <TASK>
[   37.252928]  iopt_unmap_iova_range+0x1ef/0x2e0
[   37.253427]  iopt_unmap_all+0x2f/0x60
[   37.253725]  iommufd_ioas_destroy+0x2c/0x70
[   37.254041]  iommufd_fops_release+0xd4/0x170
[   37.254367]  ? iommufd_ctx_get+0x30/0x30
[   37.254685]  __fput+0x11f/0x450
[   37.254943]  ____fput+0x1e/0x30
[   37.255191]  task_work_run+0xb6/0x120
[   37.255481]  do_exit+0x547/0x1360
[   37.255799]  ? lockdep_hardirqs_on+0x8a/0x110
[   37.256340]  ? trace_hardirqs_on+0x3f/0xe0
[   37.256839]  do_group_exit+0x5e/0xf0
[   37.257246]  __x64_sys_exit_group+0x25/0x30
[   37.257571]  do_syscall_64+0x3b/0x90
[   37.257869]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   37.258249] RIP: 0033:0x7ff557523cf6
[   37.258520] Code: Unable to access opcode bytes at 0x7ff557523ccc.
[   37.258989] RSP: 002b:00007fff1c422f78 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
[   37.259528] RAX: ffffffffffffffda RBX: 00007ff55762e490 RCX: 00007ff557523cf6
[   37.260080] RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
[   37.260876] RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffff80
[   37.261525] R10: 0000000000000004 R11: 0000000000000246 R12: 00007ff55762e490
[   37.262035] R13: 0000000000000001 R14: 00007ff557631e88 R15: 0000000000000000
[   37.262581]  </TASK>
[   37.262754] irq event stamp: 25277
[   37.263009] hardirqs last  enabled at (25285): [<ffffffff811b8b21>] __up_console_sem+0x91/0xb0
[   37.263640] hardirqs last disabled at (25292): [<ffffffff811b8b06>] __up_console_sem+0x76/0xb0
[   37.264599] softirqs last  enabled at (25306): [<ffffffff83000329>] __do_softirq+0x329/0x490
[   37.265212] softirqs last disabled at (25297): [<ffffffff811123c2>] irq_exit_rcu+0xd2/0x100
[   37.265839] ---[ end trace 0000000000000000 ]---
[   37.392435] ------------[ cut here ]------------
[   37.392844] WARNING: CPU: 0 PID: 705 at drivers/iommu/iommufd/pages.c:1256 __iopt_area_unfill_domain+0x4ba/0x4d0
[   37.393571] Modules linked in:
[   37.393822] CPU: 0 PID: 705 Comm: repro Tainted: G        W          6.1.0-rc3-e26eed4f623d+ #1
[   37.394441] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   37.395258] RIP: 0010:__iopt_area_unfill_domain+0x4ba/0x4d0
[   37.395716] Code: 70 e8 fa 24 db 00 31 ff 89 c3 89 c6 e8 1f 26 2d ff 85 db 0f 85 bc fb ff ff e8 a2 24 2d ff 0f 0b e9 b0 fb ff ff e8 96 24 2d ff <0f> 0b e9 64 ff ff ff e8 aa 20 db 00 66 2e 0f 1f 84 00 00 00 00 00
[   37.397399] RSP: 0018:ffffc900013d7af0 EFLAGS: 00010246
[   37.397785] RAX: 0000000000000000 RBX: 00000000ffffffff RCX: ffffffff81fc6a3d
[   37.398311] RDX: 0000000000000000 RSI: ffff888013e929c0 RDI: 0000000000000002
[   37.398820] RBP: ffffc900013d7d10 R08: 000000000003b3e5 R09: 0000000000000001
[   37.399350] R10: 000000000003b3c0 R11: 0000000000000024 R12: 00000000000007ff
[   37.399908] R13: 0000000000000800 R14: 0000000000000801 R15: 00000000000007ff
[   37.400721] FS:  00007ff557436740(0000) GS:ffff88807dc00000(0000) knlGS:0000000000000000
[   37.401285] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   37.401698] CR2: 00007ff55755b580 CR3: 000000001746c005 CR4: 0000000000770ef0
[   37.402228] PKRU: 55555554
[   37.402440] Call Trace:
[   37.402627]  <TASK>
[   37.402820]  ? __this_cpu_preempt_check+0x20/0x30
[   37.403203]  ? lock_is_held_type+0xe6/0x140
[   37.403531]  ? rcu_read_lock_sched_held+0x57/0x80
[   37.403918]  ? __mutex_lock+0x13a/0xf30
[   37.404383]  ? write_comp_data+0x2f/0x90
[   37.404868]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   37.405406]  iopt_area_unfill_domain+0x32/0x40
[   37.405741]  iopt_table_remove_domain+0x23f/0x4b0
[   37.406100]  iommufd_device_selftest_detach+0x3a/0x90
[   37.406503]  iommufd_selftest_destroy+0x55/0x70
[   37.406846]  iommufd_object_destroy_user+0xce/0x130
[   37.407212]  iommufd_destroy+0xa2/0xc0
[   37.407499]  iommufd_fops_ioctl+0x1ef/0x310
[   37.407896]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   37.408459]  ? write_comp_data+0x2f/0x90
[   37.408951]  __x64_sys_ioctl+0x10e/0x160
[   37.409335]  ? iommufd_get_object.part.6+0x1c0/0x1c0
[   37.409712]  do_syscall_64+0x3b/0x90
[   37.409991]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   37.410383] RIP: 0033:0x7ff55755b59d
[   37.410657] Code: 00 c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d d3 08 0d 00 f7 d8 64 89 01 48
[   37.412016] RSP: 002b:00007fff1c422fb8 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   37.412869] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007ff55755b59d
[   37.413370] RDX: 0000000020000140 RSI: 0000000000003b80 RDI: 0000000000000003
[   37.413901] RBP: 00007fff1c422fd0 R08: 00007fff1c422fd0 R09: 00007fff1c422fd0
[   37.414412] R10: 00007fff1c422fd0 R11: 0000000000000213 R12: 0000000000401180
[   37.414944] R13: 00007fff1c4230f0 R14: 0000000000000000 R15: 0000000000000000
[   37.415472]  </TASK>
[   37.415702] irq event stamp: 18729
[   37.416114] hardirqs last  enabled at (18737): [<ffffffff811b8b21>] __up_console_sem+0x91/0xb0
[   37.416952] hardirqs last disabled at (18744): [<ffffffff811b8b06>] __up_console_sem+0x76/0xb0
[   37.417571] softirqs last  enabled at (18314): [<ffffffff83000329>] __do_softirq+0x329/0x490
[   37.418193] softirqs last disabled at (18299): [<ffffffff811123c2>] irq_exit_rcu+0xd2/0x100
[   37.418794] ---[ end trace 0000000000000000 ]---
[   37.423756] ------------[ cut here ]------------
[   37.424112] WARNING: CPU: 0 PID: 705 at drivers/iommu/iommufd/pages.c:864 update_unpinned+0x75/0x80
[   37.424799] Modules linked in:
[   37.425034] CPU: 0 PID: 705 Comm: repro Tainted: G        W          6.1.0-rc3-e26eed4f623d+ #1
[   37.425676] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   37.426492] RIP: 0010:update_unpinned+0x75/0x80
[   37.426838] Code: 33 2d ff 48 89 de 31 c9 31 d2 4c 29 e6 4c 89 ef e8 60 fb ff ff e8 7b 33 2d ff 5b 41 5c 41 5d 5d c3 cc cc cc cc e8 6b 33 2d ff <0f> 0b eb e7 0f 1f 80 00 00 00 00 0f 1f 44 00 00 55 48 89 e5 41 57
[   37.428198] RSP: 0018:ffffc900013d7a28 EFLAGS: 00010246
[   37.428779] RAX: 0000000000000000 RBX: 0000000000000000 RCX: ffffffff81fc5bbf
[   37.429531] RDX: 0000000000000000 RSI: ffff888013e929c0 RDI: 0000000000000002
[   37.430063] RBP: ffffc900013d7a40 R08: 0000000000000001 R09: 0000000000000001
[   37.430573] R10: ffff88807dc3b2d0 R11: 0000000000000000 R12: ffffffffffffffff
[   37.431095] R13: ffff88800dae7a00 R14: 0000000000000002 R15: 0000000000000002
[   37.431599] FS:  0000000000000000(0000) GS:ffff88807dc00000(0000) knlGS:0000000000000000
[   37.432207] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   37.432629] CR2: 00007ff55762d500 CR3: 0000000003a12001 CR4: 0000000000770ef0
[   37.433144] PKRU: 55555554
[   37.433349] Call Trace:
[   37.433539]  <TASK>
[   37.433710]  iopt_pages_unfill_xarray+0x522/0x5c0
[   37.434102]  ? write_comp_data+0x2f/0x90
[   37.434406]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   37.434763]  ? write_comp_data+0x2f/0x90
[   37.435061]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   37.435412]  ? interval_tree_remove+0x291/0x4e0
[   37.435773]  ? write_comp_data+0x2f/0x90
[   37.436081]  iopt_area_remove_access+0x108/0x120
[   37.436457]  iommufd_access_unpin_pages+0xf2/0x190
[   37.436846]  iommufd_test_access_unmap+0xe0/0x130
[   37.437203]  ? iommufd_test_access_unmap+0x130/0x130
[   37.437575]  iommufd_test_staccess_release+0x39/0x60
[   37.437945]  __fput+0x11f/0x450
[   37.438204]  ____fput+0x1e/0x30
[   37.438464]  task_work_run+0xb6/0x120
[   37.438753]  do_exit+0x547/0x1360
[   37.439018]  ? lockdep_hardirqs_on+0x8a/0x110
[   37.439347]  ? trace_hardirqs_on+0x3f/0xe0
[   37.439680]  do_group_exit+0x5e/0xf0
[   37.439965]  __x64_sys_exit_group+0x25/0x30
[   37.440286]  do_syscall_64+0x3b/0x90
[   37.440566]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   37.440940] RIP: 0033:0x7ff557523cf6
[   37.441210] Code: Unable to access opcode bytes at 0x7ff557523ccc.
[   37.441643] RSP: 002b:00007fff1c422f78 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
[   37.442186] RAX: ffffffffffffffda RBX: 00007ff55762e490 RCX: 00007ff557523cf6
[   37.442687] RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
[   37.443195] RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffff80
[   37.443719] R10: 0000000000000004 R11: 0000000000000246 R12: 00007ff55762e490
[   37.444226] R13: 0000000000000001 R14: 00007ff557631e88 R15: 0000000000000000
[   37.444758]  </TASK>
[   37.444924] irq event stamp: 24831
[   37.445178] hardirqs last  enabled at (24839): [<ffffffff811b8b21>] __up_console_sem+0x91/0xb0
[   37.445806] hardirqs last disabled at (24846): [<ffffffff811b8b06>] __up_console_sem+0x76/0xb0
[   37.446426] softirqs last  enabled at (24464): [<ffffffff83000329>] __do_softirq+0x329/0x490
[   37.447033] softirqs last disabled at (24445): [<ffffffff811123c2>] irq_exit_rcu+0xd2/0x100
[   37.447624] ---[ end trace 0000000000000000 ]---
[   37.448120] ------------[ cut here ]------------
[   37.448465] WARNING: CPU: 0 PID: 705 at drivers/iommu/iommufd/pages.c:1147 iopt_release_pages+0x159/0x190
[   37.449164] Modules linked in:
[   37.449396] CPU: 0 PID: 705 Comm: repro Tainted: G        W          6.1.0-rc3-e26eed4f623d+ #1
[   37.450010] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   37.450814] RIP: 0010:iopt_release_pages+0x159/0x190
[   37.451179] Code: 6d 13 ff eb cb e8 97 18 2d ff be 03 00 00 00 4c 89 f7 e8 da cd ce ff eb b7 e8 83 18 2d ff 0f 0b e9 ed fe ff ff e8 77 18 2d ff <0f> 0b e9 00 ff ff ff e8 6b 18 2d ff 0f 0b e9 07 ff ff ff e8 5f 18
[   37.452500] RSP: 0018:ffffc900013d7c88 EFLAGS: 00010246
[   37.452888] RAX: 0000000000000000 RBX: ffff88800dae7a00 RCX: ffffffff81fc75f7
[   37.453401] RDX: 0000000000000000 RSI: ffff888013e929c0 RDI: 0000000000000002
[   37.453917] RBP: ffffc900013d7ca8 R08: 000000000000001a R09: 0000000000000001
[   37.454427] R10: ffff888013e93770 R11: 0000000000000000 R12: ffffffffffffffff
[   37.454937] R13: 0000000001000000 R14: 00000000017fffff R15: 0000000000000000
[   37.455443] FS:  0000000000000000(0000) GS:ffff88807dc00000(0000) knlGS:0000000000000000
[   37.456031] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   37.456456] CR2: 00007ff55762d500 CR3: 0000000003a12001 CR4: 0000000000770ef0
[   37.456969] PKRU: 55555554
[   37.457174] Call Trace:
[   37.457362]  <TASK>
[   37.457525]  iopt_unmap_iova_range+0x1ef/0x2e0
[   37.457871]  iopt_unmap_all+0x2f/0x60
[   37.458148]  iommufd_ioas_destroy+0x2c/0x70
[   37.458463]  iommufd_fops_release+0xd4/0x170
[   37.458788]  ? iommufd_ctx_get+0x30/0x30
[   37.459090]  __fput+0x11f/0x450
[   37.459348]  ____fput+0x1e/0x30
[   37.459598]  task_work_run+0xb6/0x120
[   37.459905]  do_exit+0x547/0x1360
[   37.460170]  ? lockdep_hardirqs_on+0x8a/0x110
[   37.460505]  ? trace_hardirqs_on+0x3f/0xe0
[   37.460825]  do_group_exit+0x5e/0xf0
[   37.461111]  __x64_sys_exit_group+0x25/0x30
[   37.461432]  do_syscall_64+0x3b/0x90
[   37.461709]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   37.462081] RIP: 0033:0x7ff557523cf6
[   37.462350] Code: Unable to access opcode bytes at 0x7ff557523ccc.
[   37.462797] RSP: 002b:00007fff1c422f78 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
[   37.463337] RAX: ffffffffffffffda RBX: 00007ff55762e490 RCX: 00007ff557523cf6
[   37.463861] RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
[   37.464368] RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffff80
[   37.464881] R10: 0000000000000004 R11: 0000000000000246 R12: 00007ff55762e490
[   37.465387] R13: 0000000000000001 R14: 00007ff557631e88 R15: 0000000000000000
[   37.465919]  </TASK>
[   37.466088] irq event stamp: 25295
[   37.466340] hardirqs last  enabled at (25303): [<ffffffff811b8b21>] __up_console_sem+0x91/0xb0
[   37.466954] hardirqs last disabled at (25310): [<ffffffff811b8b06>] __up_console_sem+0x76/0xb0
[   37.467568] softirqs last  enabled at (24986): [<ffffffff83000329>] __do_softirq+0x329/0x490
[   37.468193] softirqs last disabled at (24981): [<ffffffff811123c2>] irq_exit_rcu+0xd2/0x100
[   37.468787] ---[ end trace 0000000000000000 ]---
[   37.500116] ------------[ cut here ]------------
[   37.500496] WARNING: CPU: 0 PID: 706 at drivers/iommu/iommufd/pages.c:1256 __iopt_area_unfill_domain+0x4ba/0x4d0
[   37.501237] Modules linked in:
[   37.501474] CPU: 0 PID: 706 Comm: repro Tainted: G        W          6.1.0-rc3-e26eed4f623d+ #1
[   37.502092] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   37.502903] RIP: 0010:__iopt_area_unfill_domain+0x4ba/0x4d0
[   37.503314] Code: 70 e8 fa 24 db 00 31 ff 89 c3 89 c6 e8 1f 26 2d ff 85 db 0f 85 bc fb ff ff e8 a2 24 2d ff 0f 0b e9 b0 fb ff ff e8 96 24 2d ff <0f> 0b e9 64 ff ff ff e8 aa 20 db 00 66 2e 0f 1f 84 00 00 00 00 00
[   37.504635] RSP: 0018:ffffc900013dfaf0 EFLAGS: 00010246
[   37.505017] RAX: 0000000000000000 RBX: 00000000ffffffff RCX: ffffffff81fc6a3d
[   37.505537] RDX: 0000000000000000 RSI: ffff888013e95380 RDI: 0000000000000002
[   37.506040] RBP: ffffc900013dfd10 R08: 000000000003b3e5 R09: 000000000000000b
[   37.506546] R10: 000000000003b3c0 R11: 0000000000000024 R12: 00000000000007ff
[   37.507051] R13: 0000000000000800 R14: 0000000000000801 R15: 00000000000007ff
[   37.507569] FS:  00007ff557436740(0000) GS:ffff88807dc00000(0000) knlGS:0000000000000000
[   37.508157] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   37.508582] CR2: 00007ff55755b580 CR3: 000000001747c006 CR4: 0000000000770ef0
[   37.509090] PKRU: 55555554
[   37.509297] Call Trace:
[   37.509486]  <TASK>
[   37.509678]  ? __this_cpu_preempt_check+0x20/0x30
[   37.510039]  ? lock_is_held_type+0xe6/0x140
[   37.510361]  ? rcu_read_lock_sched_held+0x57/0x80
[   37.510709]  ? __mutex_lock+0x13a/0xf30
[   37.511029]  ? write_comp_data+0x2f/0x90
[   37.511327]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   37.511704]  iopt_area_unfill_domain+0x32/0x40
[   37.512040]  iopt_table_remove_domain+0x23f/0x4b0
[   37.512387]  iommufd_device_selftest_detach+0x3a/0x90
[   37.512774]  iommufd_selftest_destroy+0x55/0x70
[   37.513121]  iommufd_object_destroy_user+0xce/0x130
[   37.513476]  iommufd_destroy+0xa2/0xc0
[   37.513759]  iommufd_fops_ioctl+0x1ef/0x310
[   37.514073]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   37.514421]  ? write_comp_data+0x2f/0x90
[   37.514719]  __x64_sys_ioctl+0x10e/0x160
[   37.515016]  ? iommufd_get_object.part.6+0x1c0/0x1c0
[   37.515422]  do_syscall_64+0x3b/0x90
[   37.515719]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   37.516090] RIP: 0033:0x7ff55755b59d
[   37.516360] Code: 00 c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d d3 08 0d 00 f7 d8 64 89 01 48
[   37.517690] RSP: 002b:00007fff1c422fb8 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   37.518232] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007ff55755b59d
[   37.518737] RDX: 0000000020000140 RSI: 0000000000003b80 RDI: 0000000000000003
[   37.519234] RBP: 00007fff1c422fd0 R08: 00007fff1c422fd0 R09: 00007fff1c422fd0
[   37.519756] R10: 00007fff1c422fd0 R11: 0000000000000213 R12: 0000000000401180
[   37.520264] R13: 00007fff1c4230f0 R14: 0000000000000000 R15: 0000000000000000
[   37.520794]  </TASK>
[   37.520965] irq event stamp: 18565
[   37.521225] hardirqs last  enabled at (18573): [<ffffffff811b8b21>] __up_console_sem+0x91/0xb0
[   37.521838] hardirqs last disabled at (18580): [<ffffffff811b8b06>] __up_console_sem+0x76/0xb0
[   37.522448] softirqs last  enabled at (18376): [<ffffffff83000329>] __do_softirq+0x329/0x490
[   37.523051] softirqs last disabled at (18371): [<ffffffff811123c2>] irq_exit_rcu+0xd2/0x100
[   37.523642] ---[ end trace 0000000000000000 ]---
[   37.528158] ------------[ cut here ]------------
[   37.528528] WARNING: CPU: 0 PID: 706 at drivers/iommu/iommufd/pages.c:864 update_unpinned+0x75/0x80
[   37.529197] Modules linked in:
[   37.529435] CPU: 0 PID: 706 Comm: repro Tainted: G        W          6.1.0-rc3-e26eed4f623d+ #1
[   37.530056] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   37.530864] RIP: 0010:update_unpinned+0x75/0x80
[   37.531210] Code: 33 2d ff 48 89 de 31 c9 31 d2 4c 29 e6 4c 89 ef e8 60 fb ff ff e8 7b 33 2d ff 5b 41 5c 41 5d 5d c3 cc cc cc cc e8 6b 33 2d ff <0f> 0b eb e7 0f 1f 80 00 00 00 00 0f 1f 44 00 00 55 48 89 e5 41 57
[   37.532555] RSP: 0018:ffffc900013dfa28 EFLAGS: 00010246
[   37.532944] RAX: 0000000000000000 RBX: 0000000000000000 RCX: ffffffff81fc5bbf
[   37.533481] RDX: 0000000000000000 RSI: ffff888013e95380 RDI: 0000000000000002
[   37.533987] RBP: ffffc900013dfa40 R08: 0000000000000001 R09: 0000000000000001
[   37.534491] R10: ffff88807dc3b2d0 R11: 0000000000000000 R12: ffffffffffffffff
[   37.535008] R13: ffff88800dae7200 R14: 0000000000000002 R15: 0000000000000002
[   37.535519] FS:  0000000000000000(0000) GS:ffff88807dc00000(0000) knlGS:0000000000000000
[   37.536136] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   37.536563] CR2: 00007ff55762d500 CR3: 0000000003a12001 CR4: 0000000000770ef0
[   37.537072] PKRU: 55555554
[   37.537275] Call Trace:
[   37.537460]  <TASK>
[   37.537633]  iopt_pages_unfill_xarray+0x522/0x5c0
[   37.538022]  ? write_comp_data+0x2f/0x90
[   37.538324]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   37.538677]  ? write_comp_data+0x2f/0x90
[   37.538981]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   37.539335]  ? interval_tree_remove+0x291/0x4e0
[   37.539700]  ? write_comp_data+0x2f/0x90
[   37.540005]  iopt_area_remove_access+0x108/0x120
[   37.540359]  iommufd_access_unpin_pages+0xf2/0x190
[   37.540736]  iommufd_test_access_unmap+0xe0/0x130
[   37.541092]  ? iommufd_test_access_unmap+0x130/0x130
[   37.541472]  iommufd_test_staccess_release+0x39/0x60
[   37.541845]  __fput+0x11f/0x450
[   37.542114]  ____fput+0x1e/0x30
[   37.542366]  task_work_run+0xb6/0x120
[   37.542654]  do_exit+0x547/0x1360
[   37.542920]  ? lockdep_hardirqs_on+0x8a/0x110
[   37.543256]  ? trace_hardirqs_on+0x3f/0xe0
[   37.543578]  do_group_exit+0x5e/0xf0
[   37.543881]  __x64_sys_exit_group+0x25/0x30
[   37.544211]  do_syscall_64+0x3b/0x90
[   37.544483]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   37.544860] RIP: 0033:0x7ff557523cf6
[   37.545136] Code: Unable to access opcode bytes at 0x7ff557523ccc.
[   37.545576] RSP: 002b:00007fff1c422f78 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
[   37.546116] RAX: ffffffffffffffda RBX: 00007ff55762e490 RCX: 00007ff557523cf6
[   37.546620] RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
[   37.547129] RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffff80
[   37.547642] R10: 0000000000000004 R11: 0000000000000246 R12: 00007ff55762e490
[   37.548175] R13: 0000000000000001 R14: 00007ff557631e88 R15: 0000000000000000
[   37.548705]  </TASK>
[   37.548880] irq event stamp: 24629
[   37.549128] hardirqs last  enabled at (24637): [<ffffffff811b8b21>] __up_console_sem+0x91/0xb0
[   37.549737] hardirqs last disabled at (24644): [<ffffffff811b8b06>] __up_console_sem+0x76/0xb0
[   37.550351] softirqs last  enabled at (23944): [<ffffffff83000329>] __do_softirq+0x329/0x490
[   37.550953] softirqs last disabled at (23935): [<ffffffff811123c2>] irq_exit_rcu+0xd2/0x100
[   37.551548] ---[ end trace 0000000000000000 ]---
[   37.552061] ------------[ cut here ]------------
[   37.552404] WARNING: CPU: 0 PID: 706 at drivers/iommu/iommufd/pages.c:1147 iopt_release_pages+0x159/0x190
[   37.553098] Modules linked in:
[   37.553331] CPU: 0 PID: 706 Comm: repro Tainted: G        W          6.1.0-rc3-e26eed4f623d+ #1
[   37.553955] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   37.554847] RIP: 0010:iopt_release_pages+0x159/0x190
[   37.555225] Code: 6d 13 ff eb cb e8 97 18 2d ff be 03 00 00 00 4c 89 f7 e8 da cd ce ff eb b7 e8 83 18 2d ff 0f 0b e9 ed fe ff ff e8 77 18 2d ff <0f> 0b e9 00 ff ff ff e8 6b 18 2d ff 0f 0b e9 07 ff ff ff e8 5f 18
[   37.556577] RSP: 0018:ffffc900013dfc88 EFLAGS: 00010246
[   37.556967] RAX: 0000000000000000 RBX: ffff88800dae7200 RCX: ffffffff81fc75f7
[   37.557484] RDX: 0000000000000000 RSI: ffff888013e95380 RDI: 0000000000000002
[   37.558000] RBP: ffffc900013dfca8 R08: 000000000000001a R09: 0000000000000001
[   37.558511] R10: ffff888013e96130 R11: 0000000000000000 R12: ffffffffffffffff
[   37.559049] R13: 0000000001000000 R14: 00000000017fffff R15: 0000000000000000
[   37.559566] FS:  0000000000000000(0000) GS:ffff88807dc00000(0000) knlGS:0000000000000000
[   37.560161] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   37.560592] CR2: 00007ff55762d500 CR3: 0000000003a12001 CR4: 0000000000770ef0
[   37.561102] PKRU: 55555554
[   37.561308] Call Trace:
[   37.561490]  <TASK>
[   37.561661]  iopt_unmap_iova_range+0x1ef/0x2e0
[   37.562024]  iopt_unmap_all+0x2f/0x60
[   37.562303]  iommufd_ioas_destroy+0x2c/0x70
[   37.562621]  iommufd_fops_release+0xd4/0x170
[   37.562947]  ? iommufd_ctx_get+0x30/0x30
[   37.563242]  __fput+0x11f/0x450
[   37.563495]  ____fput+0x1e/0x30
[   37.563765]  task_work_run+0xb6/0x120
[   37.564057]  do_exit+0x547/0x1360
[   37.564320]  ? lockdep_hardirqs_on+0x8a/0x110
[   37.564668]  ? trace_hardirqs_on+0x3f/0xe0
[   37.564986]  do_group_exit+0x5e/0xf0
[   37.565266]  __x64_sys_exit_group+0x25/0x30
[   37.565591]  do_syscall_64+0x3b/0x90
[   37.565870]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   37.566248] RIP: 0033:0x7ff557523cf6
[   37.566515] Code: Unable to access opcode bytes at 0x7ff557523ccc.
[   37.566962] RSP: 002b:00007fff1c422f78 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
[   37.567516] RAX: ffffffffffffffda RBX: 00007ff55762e490 RCX: 00007ff557523cf6
[   37.568048] RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
[   37.568576] RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffff80
[   37.569086] R10: 0000000000000004 R11: 0000000000000246 R12: 00007ff55762e490
[   37.569590] R13: 0000000000000001 R14: 00007ff557631e88 R15: 0000000000000000
[   37.570123]  </TASK>
[   37.570296] irq event stamp: 25087
[   37.570551] hardirqs last  enabled at (25095): [<ffffffff811b8b21>] __up_console_sem+0x91/0xb0
[   37.571169] hardirqs last disabled at (25102): [<ffffffff811b8b06>] __up_console_sem+0x76/0xb0
[   37.571816] softirqs last  enabled at (25116): [<ffffffff83000329>] __do_softirq+0x329/0x490
[   37.572786] softirqs last disabled at (25111): [<ffffffff811123c2>] irq_exit_rcu+0xd2/0x100
[   37.573451] ---[ end trace 0000000000000000 ]---
[   38.370456] ------------[ cut here ]------------
[   38.370836] WARNING: CPU: 1 PID: 727 at drivers/iommu/iommufd/pages.c:1256 __iopt_area_unfill_domain+0x4ba/0x4d0
[   38.371597] Modules linked in:
[   38.371892] CPU: 1 PID: 727 Comm: repro Tainted: G        W          6.1.0-rc3-e26eed4f623d+ #1
[   38.372747] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   38.373567] RIP: 0010:__iopt_area_unfill_domain+0x4ba/0x4d0
[   38.374011] Code: 70 e8 fa 24 db 00 31 ff 89 c3 89 c6 e8 1f 26 2d ff 85 db 0f 85 bc fb ff ff e8 a2 24 2d ff 0f 0b e9 b0 fb ff ff e8 96 24 2d ff <0f> 0b e9 64 ff ff ff e8 aa 20 db 00 66 2e 0f 1f 84 00 00 00 00 00
[   38.375361] RSP: 0018:ffffc9000146faf0 EFLAGS: 00010246
[   38.375804] RAX: 0000000000000000 RBX: 00000000ffffffff RCX: ffffffff81fc6a3d
[   38.376583] RDX: 0000000000000000 RSI: ffff888013c58000 RDI: 0000000000000002
[   38.377115] RBP: ffffc9000146fd10 R08: 000000000003b3e5 R09: 0000000000000008
[   38.377652] R10: 000000000003b3c0 R11: 0000000000000024 R12: 00000000000007ff
[   38.378183] R13: 0000000000000800 R14: 0000000000000801 R15: 00000000000007ff
[   38.378719] FS:  00007ff557436740(0000) GS:ffff88807dd00000(0000) knlGS:0000000000000000
[   38.379308] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   38.379767] CR2: 00007ff55755b580 CR3: 000000001745e002 CR4: 0000000000770ee0
[   38.380542] PKRU: 55555554
[   38.380864] Call Trace:
[   38.381059]  <TASK>
[   38.381252]  ? __this_cpu_preempt_check+0x20/0x30
[   38.381625]  ? lock_is_held_type+0xe6/0x140
[   38.381965]  ? rcu_read_lock_sched_held+0x57/0x80
[   38.382329]  ? __mutex_lock+0x13a/0xf30
[   38.382629]  ? write_comp_data+0x2f/0x90
[   38.382933]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   38.383316]  iopt_area_unfill_domain+0x32/0x40
[   38.383712]  iopt_table_remove_domain+0x23f/0x4b0
[   38.384263]  iommufd_device_selftest_detach+0x3a/0x90
[   38.384873]  iommufd_selftest_destroy+0x55/0x70
[   38.385353]  iommufd_object_destroy_user+0xce/0x130
[   38.385732]  iommufd_destroy+0xa2/0xc0
[   38.386033]  iommufd_fops_ioctl+0x1ef/0x310
[   38.386379]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   38.386738]  ? write_comp_data+0x2f/0x90
[   38.387040]  __x64_sys_ioctl+0x10e/0x160
[   38.387353]  ? iommufd_get_object.part.6+0x1c0/0x1c0
[   38.387777]  do_syscall_64+0x3b/0x90
[   38.388226]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   38.388822] RIP: 0033:0x7ff55755b59d
[   38.389196] Code: 00 c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d d3 08 0d 00 f7 d8 64 89 01 48
[   38.390560] RSP: 002b:00007fff1c422fb8 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   38.391107] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007ff55755b59d
[   38.391646] RDX: 0000000020000140 RSI: 0000000000003b80 RDI: 0000000000000003
[   38.392454] RBP: 00007fff1c422fd0 R08: 00007fff1c422fd0 R09: 00007fff1c422fd0
[   38.392969] R10: 00007fff1c422fd0 R11: 0000000000000213 R12: 0000000000401180
[   38.393499] R13: 00007fff1c4230f0 R14: 0000000000000000 R15: 0000000000000000
[   38.394047]  </TASK>
[   38.394223] irq event stamp: 18655
[   38.394502] hardirqs last  enabled at (18663): [<ffffffff811b8b21>] __up_console_sem+0x91/0xb0
[   38.395133] hardirqs last disabled at (18670): [<ffffffff811b8b06>] __up_console_sem+0x76/0xb0
[   38.395875] softirqs last  enabled at (18730): [<ffffffff83000329>] __do_softirq+0x329/0x490
[   38.396847] softirqs last disabled at (18679): [<ffffffff811123c2>] irq_exit_rcu+0xd2/0x100
[   38.397492] ---[ end trace 0000000000000000 ]---
[   38.402223] ------------[ cut here ]------------
[   38.402617] WARNING: CPU: 1 PID: 727 at drivers/iommu/iommufd/pages.c:864 update_unpinned+0x75/0x80
[   38.403287] Modules linked in:
[   38.403545] CPU: 1 PID: 727 Comm: repro Tainted: G        W          6.1.0-rc3-e26eed4f623d+ #1
[   38.404338] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   38.405398] RIP: 0010:update_unpinned+0x75/0x80
[   38.405753] Code: 33 2d ff 48 89 de 31 c9 31 d2 4c 29 e6 4c 89 ef e8 60 fb ff ff e8 7b 33 2d ff 5b 41 5c 41 5d 5d c3 cc cc cc cc e8 6b 33 2d ff <0f> 0b eb e7 0f 1f 80 00 00 00 00 0f 1f 44 00 00 55 48 89 e5 41 57
[   38.407088] RSP: 0018:ffffc9000146fa28 EFLAGS: 00010246
[   38.407493] RAX: 0000000000000000 RBX: 0000000000000000 RCX: ffffffff81fc5bbf
[   38.408055] RDX: 0000000000000000 RSI: ffff888013c58000 RDI: 0000000000000002
[   38.408823] RBP: ffffc9000146fa40 R08: 0000000000000001 R09: 0000000000000001
[   38.409340] R10: ffff88807dd3b2d0 R11: 0000000000000000 R12: ffffffffffffffff
[   38.409878] R13: ffff88800a71a000 R14: 0000000000000002 R15: 0000000000000002
[   38.410397] FS:  0000000000000000(0000) GS:ffff88807dd00000(0000) knlGS:0000000000000000
[   38.410994] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   38.411416] CR2: 00007ff55762d500 CR3: 0000000003a12005 CR4: 0000000000770ee0
[   38.411979] PKRU: 55555554
[   38.412310] Call Trace:
[   38.412617]  <TASK>
[   38.412875]  iopt_pages_unfill_xarray+0x522/0x5c0
[   38.413416]  ? write_comp_data+0x2f/0x90
[   38.413728]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   38.414086]  ? write_comp_data+0x2f/0x90
[   38.414407]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   38.414763]  ? interval_tree_remove+0x291/0x4e0
[   38.415113]  ? write_comp_data+0x2f/0x90
[   38.415436]  iopt_area_remove_access+0x108/0x120
[   38.415838]  iommufd_access_unpin_pages+0xf2/0x190
[   38.416451]  iommufd_test_access_unmap+0xe0/0x130
[   38.417005]  ? iommufd_test_access_unmap+0x130/0x130
[   38.417404]  iommufd_test_staccess_release+0x39/0x60
[   38.417787]  __fput+0x11f/0x450
[   38.418050]  ____fput+0x1e/0x30
[   38.418305]  task_work_run+0xb6/0x120
[   38.418617]  do_exit+0x547/0x1360
[   38.418891]  ? lockdep_hardirqs_on+0x8a/0x110
[   38.419224]  ? trace_hardirqs_on+0x3f/0xe0
[   38.419555]  do_group_exit+0x5e/0xf0
[   38.419890]  __x64_sys_exit_group+0x25/0x30
[   38.420411]  do_syscall_64+0x3b/0x90
[   38.420853]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   38.421442] RIP: 0033:0x7ff557523cf6
[   38.421740] Code: Unable to access opcode bytes at 0x7ff557523ccc.
[   38.422196] RSP: 002b:00007fff1c422f78 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
[   38.422746] RAX: ffffffffffffffda RBX: 00007ff55762e490 RCX: 00007ff557523cf6
[   38.423275] RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
[   38.423822] RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffff80
[   38.424647] R10: 0000000000000004 R11: 0000000000000246 R12: 00007ff55762e490
[   38.425194] R13: 0000000000000001 R14: 00007ff557631e88 R15: 0000000000000000
[   38.425729]  </TASK>
[   38.425903] irq event stamp: 24869
[   38.426185] hardirqs last  enabled at (24877): [<ffffffff811b8b21>] __up_console_sem+0x91/0xb0
[   38.426823] hardirqs last disabled at (24884): [<ffffffff811b8b06>] __up_console_sem+0x76/0xb0
[   38.427459] softirqs last  enabled at (24476): [<ffffffff83000329>] __do_softirq+0x329/0x490
[   38.428118] softirqs last disabled at (24391): [<ffffffff811123c2>] irq_exit_rcu+0xd2/0x100
[   38.429060] ---[ end trace 0000000000000000 ]---
[   38.429632] ------------[ cut here ]------------
[   38.429983] WARNING: CPU: 1 PID: 727 at drivers/iommu/iommufd/pages.c:1147 iopt_release_pages+0x159/0x190
[   38.430698] Modules linked in:
[   38.430937] CPU: 1 PID: 727 Comm: repro Tainted: G        W          6.1.0-rc3-e26eed4f623d+ #1
[   38.431583] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   38.432456] RIP: 0010:iopt_release_pages+0x159/0x190
[   38.433036] Code: 6d 13 ff eb cb e8 97 18 2d ff be 03 00 00 00 4c 89 f7 e8 da cd ce ff eb b7 e8 83 18 2d ff 0f 0b e9 ed fe ff ff e8 77 18 2d ff <0f> 0b e9 00 ff ff ff e8 6b 18 2d ff 0f 0b e9 07 ff ff ff e8 5f 18
[   38.434492] RSP: 0018:ffffc9000146fc88 EFLAGS: 00010246
[   38.434904] RAX: 0000000000000000 RBX: ffff88800a71a000 RCX: ffffffff81fc75f7
[   38.435425] RDX: 0000000000000000 RSI: ffff888013c58000 RDI: 0000000000000002
[   38.435984] RBP: ffffc9000146fca8 R08: 000000000000001a R09: 0000000000000001
[   38.436702] R10: ffff888013c58db0 R11: 0000000000000000 R12: ffffffffffffffff
[   38.437249] R13: 0000000001000000 R14: 00000000017fffff R15: 0000000000000000
[   38.437769] FS:  0000000000000000(0000) GS:ffff88807dd00000(0000) knlGS:0000000000000000
[   38.438360] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   38.438786] CR2: 00007ff55762d500 CR3: 0000000003a12005 CR4: 0000000000770ee0
[   38.439318] PKRU: 55555554
[   38.439525] Call Trace:
[   38.439752]  <TASK>
[   38.440024]  iopt_unmap_iova_range+0x1ef/0x2e0
[   38.440616]  iopt_unmap_all+0x2f/0x60
[   38.441049]  iommufd_ioas_destroy+0x2c/0x70
[   38.441389]  iommufd_fops_release+0xd4/0x170
[   38.441712]  ? iommufd_ctx_get+0x30/0x30
[   38.442001]  __fput+0x11f/0x450
[   38.442278]  ____fput+0x1e/0x30
[   38.442530]  task_work_run+0xb6/0x120
[   38.442826]  do_exit+0x547/0x1360
[   38.443089]  ? lockdep_hardirqs_on+0x8a/0x110
[   38.443448]  ? trace_hardirqs_on+0x3f/0xe0
[   38.443869]  do_group_exit+0x5e/0xf0
[   38.444308]  __x64_sys_exit_group+0x25/0x30
[   38.444816]  do_syscall_64+0x3b/0x90
[   38.445244]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   38.445744] RIP: 0033:0x7ff557523cf6
[   38.446027] Code: Unable to access opcode bytes at 0x7ff557523ccc.
[   38.446496] RSP: 002b:00007fff1c422f78 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
[   38.447044] RAX: ffffffffffffffda RBX: 00007ff55762e490 RCX: 00007ff557523cf6
[   38.447590] RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
[   38.448158] RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffff80
[   38.448960] R10: 0000000000000004 R11: 0000000000000246 R12: 00007ff55762e490
[   38.449492] R13: 0000000000000001 R14: 00007ff557631e88 R15: 0000000000000000
[   38.450049]  </TASK>
[   38.450227] irq event stamp: 25331
[   38.450490] hardirqs last  enabled at (25339): [<ffffffff811b8b21>] __up_console_sem+0x91/0xb0
[   38.451135] hardirqs last disabled at (25346): [<ffffffff811b8b06>] __up_console_sem+0x76/0xb0
[   38.451800] softirqs last  enabled at (25004): [<ffffffff83000329>] __do_softirq+0x329/0x490
[   38.452755] softirqs last disabled at (24999): [<ffffffff811123c2>] irq_exit_rcu+0xd2/0x100
[   38.453364] ---[ end trace 0000000000000000 ]---
[   38.588055] ------------[ cut here ]------------
[   38.588476] WARNING: CPU: 1 PID: 731 at drivers/iommu/iommufd/pages.c:1256 __iopt_area_unfill_domain+0x4ba/0x4d0
[   38.589250] Modules linked in:
[   38.589503] CPU: 1 PID: 731 Comm: repro Tainted: G        W          6.1.0-rc3-e26eed4f623d+ #1
[   38.590128] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   38.590959] RIP: 0010:__iopt_area_unfill_domain+0x4ba/0x4d0
[   38.591393] Code: 70 e8 fa 24 db 00 31 ff 89 c3 89 c6 e8 1f 26 2d ff 85 db 0f 85 bc fb ff ff e8 a2 24 2d ff 0f 0b e9 b0 fb ff ff e8 96 24 2d ff <0f> 0b e9 64 ff ff ff e8 aa 20 db 00 66 2e 0f 1f 84 00 00 00 00 00
[   38.592980] RSP: 0018:ffffc9000148faf0 EFLAGS: 00010246
[   38.593564] RAX: 0000000000000000 RBX: 00000000ffffffff RCX: ffffffff81fc6a3d
[   38.594293] RDX: 0000000000000000 RSI: ffff888013c58000 RDI: 0000000000000002
[   38.594825] RBP: ffffc9000148fd10 R08: 000000000003b3e5 R09: 0000000000000002
[   38.595335] R10: 000000000003b3c0 R11: 0000000000000024 R12: 00000000000007ff
[   38.595916] R13: 0000000000000800 R14: 0000000000000801 R15: 00000000000007ff
[   38.596643] FS:  00007ff557436740(0000) GS:ffff88807dd00000(0000) knlGS:0000000000000000
[   38.597234] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   38.597665] CR2: 00007ff55755b580 CR3: 0000000017458001 CR4: 0000000000770ee0
[   38.598211] PKRU: 55555554
[   38.598421] Call Trace:
[   38.598614]  <TASK>
[   38.598811]  ? __this_cpu_preempt_check+0x20/0x30
[   38.599216]  ? lock_is_held_type+0xe6/0x140
[   38.599547]  ? rcu_read_lock_sched_held+0x57/0x80
[   38.599968]  ? __mutex_lock+0x13a/0xf30
[   38.600428]  ? write_comp_data+0x2f/0x90
[   38.600901]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   38.601445]  iopt_area_unfill_domain+0x32/0x40
[   38.601861]  iopt_table_remove_domain+0x23f/0x4b0
[   38.602243]  iommufd_device_selftest_detach+0x3a/0x90
[   38.602639]  iommufd_selftest_destroy+0x55/0x70
[   38.602991]  iommufd_object_destroy_user+0xce/0x130
[   38.603383]  iommufd_destroy+0xa2/0xc0
[   38.603732]  iommufd_fops_ioctl+0x1ef/0x310
[   38.604226]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   38.604730]  ? write_comp_data+0x2f/0x90
[   38.605041]  __x64_sys_ioctl+0x10e/0x160
[   38.605349]  ? iommufd_get_object.part.6+0x1c0/0x1c0
[   38.605745]  do_syscall_64+0x3b/0x90
[   38.606022]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   38.606401] RIP: 0033:0x7ff55755b59d
[   38.606696] Code: 00 c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d d3 08 0d 00 f7 d8 64 89 01 48
[   38.608101] RSP: 002b:00007fff1c422fb8 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   38.608996] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007ff55755b59d
[   38.609632] RDX: 0000000020000140 RSI: 0000000000003b80 RDI: 0000000000000003
[   38.610169] RBP: 00007fff1c422fd0 R08: 00007fff1c422fd0 R09: 00007fff1c422fd0
[   38.610688] R10: 00007fff1c422fd0 R11: 0000000000000213 R12: 0000000000401180
[   38.611222] R13: 00007fff1c4230f0 R14: 0000000000000000 R15: 0000000000000000
[   38.611816]  </TASK>
[   38.612096] irq event stamp: 18725
[   38.612482] hardirqs last  enabled at (18733): [<ffffffff811b8b21>] __up_console_sem+0x91/0xb0
[   38.613216] hardirqs last disabled at (18740): [<ffffffff811b8b06>] __up_console_sem+0x76/0xb0
[   38.613856] softirqs last  enabled at (18714): [<ffffffff83000329>] __do_softirq+0x329/0x490
[   38.614501] softirqs last disabled at (18709): [<ffffffff811123c2>] irq_exit_rcu+0xd2/0x100
[   38.615113] ---[ end trace 0000000000000000 ]---
[   38.620051] ------------[ cut here ]------------
[   38.620431] WARNING: CPU: 1 PID: 731 at drivers/iommu/iommufd/pages.c:864 update_unpinned+0x75/0x80
[   38.621123] Modules linked in:
[   38.621362] CPU: 1 PID: 731 Comm: repro Tainted: G        W          6.1.0-rc3-e26eed4f623d+ #1
[   38.622022] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   38.622864] RIP: 0010:update_unpinned+0x75/0x80
[   38.623216] Code: 33 2d ff 48 89 de 31 c9 31 d2 4c 29 e6 4c 89 ef e8 60 fb ff ff e8 7b 33 2d ff 5b 41 5c 41 5d 5d c3 cc cc cc cc e8 6b 33 2d ff <0f> 0b eb e7 0f 1f 80 00 00 00 00 0f 1f 44 00 00 55 48 89 e5 41 57
[   38.624607] RSP: 0018:ffffc9000148fa28 EFLAGS: 00010246
[   38.625178] RAX: 0000000000000000 RBX: 0000000000000000 RCX: ffffffff81fc5bbf
[   38.625977] RDX: 0000000000000000 RSI: ffff888013c58000 RDI: 0000000000000002
[   38.626763] RBP: ffffc9000148fa40 R08: 0000000000000001 R09: 0000000000000001
[   38.627693] R10: ffff88807dd3b2d0 R11: 0000000000000000 R12: ffffffffffffffff
[   38.628504] R13: ffff88800a71a000 R14: 0000000000000002 R15: 0000000000000002
[   38.629370] FS:  0000000000000000(0000) GS:ffff88807dd00000(0000) knlGS:0000000000000000
[   38.630298] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   38.631068] CR2: 00007ff55762d500 CR3: 0000000003a12006 CR4: 0000000000770ee0
[   38.631882] PKRU: 55555554
[   38.632215] Call Trace:
[   38.632533]  <TASK>
[   38.632879]  iopt_pages_unfill_xarray+0x522/0x5c0
[   38.633527]  ? write_comp_data+0x2f/0x90
[   38.634040]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   38.634686]  ? write_comp_data+0x2f/0x90
[   38.635177]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   38.635772]  ? interval_tree_remove+0x291/0x4e0
[   38.636341]  ? write_comp_data+0x2f/0x90
[   38.636835]  iopt_area_remove_access+0x108/0x120
[   38.637408]  iommufd_access_unpin_pages+0xf2/0x190
[   38.638029]  iommufd_test_access_unmap+0xe0/0x130
[   38.638695]  ? iommufd_test_access_unmap+0x130/0x130
[   38.639322]  iommufd_test_staccess_release+0x39/0x60
[   38.639954]  __fput+0x11f/0x450
[   38.640367]  ____fput+0x1e/0x30
[   38.640772]  task_work_run+0xb6/0x120
[   38.641228]  do_exit+0x547/0x1360
[   38.641649]  ? lockdep_hardirqs_on+0x8a/0x110
[   38.642218]  ? trace_hardirqs_on+0x3f/0xe0
[   38.642725]  do_group_exit+0x5e/0xf0
[   38.643206]  __x64_sys_exit_group+0x25/0x30
[   38.643774]  do_syscall_64+0x3b/0x90
[   38.644242]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   38.644871] RIP: 0033:0x7ff557523cf6
[   38.645289] Code: Unable to access opcode bytes at 0x7ff557523ccc.
[   38.646004] RSP: 002b:00007fff1c422f78 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
[   38.646895] RAX: ffffffffffffffda RBX: 00007ff55762e490 RCX: 00007ff557523cf6
[   38.647830] RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
[   38.648657] RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffff80
[   38.649456] R10: 0000000000000004 R11: 0000000000000246 R12: 00007ff55762e490
[   38.650374] R13: 0000000000000001 R14: 00007ff557631e88 R15: 0000000000000000
[   38.651245]  </TASK>
[   38.651528] irq event stamp: 24907
[   38.652010] hardirqs last  enabled at (24917): [<ffffffff811b8b21>] __up_console_sem+0x91/0xb0
[   38.653013] hardirqs last disabled at (24924): [<ffffffff811b8b06>] __up_console_sem+0x76/0xb0
[   38.654011] softirqs last  enabled at (24230): [<ffffffff83000329>] __do_softirq+0x329/0x490
[   38.655115] softirqs last disabled at (24135): [<ffffffff811123c2>] irq_exit_rcu+0xd2/0x100
[   38.656128] ---[ end trace 0000000000000000 ]---
[   38.656871] ------------[ cut here ]------------
[   38.657456] WARNING: CPU: 1 PID: 731 at drivers/iommu/iommufd/pages.c:1147 iopt_release_pages+0x159/0x190
[   38.658575] Modules linked in:
[   38.658963] CPU: 1 PID: 731 Comm: repro Tainted: G        W          6.1.0-rc3-e26eed4f623d+ #1
[   38.660049] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   38.661336] RIP: 0010:iopt_release_pages+0x159/0x190
[   38.661950] Code: 6d 13 ff eb cb e8 97 18 2d ff be 03 00 00 00 4c 89 f7 e8 da cd ce ff eb b7 e8 83 18 2d ff 0f 0b e9 ed fe ff ff e8 77 18 2d ff <0f> 0b e9 00 ff ff ff e8 6b 18 2d ff 0f 0b e9 07 ff ff ff e8 5f 18
[   38.664166] RSP: 0018:ffffc9000148fc88 EFLAGS: 00010246
[   38.664773] RAX: 0000000000000000 RBX: ffff88800a71a000 RCX: ffffffff81fc75f7
[   38.665575] RDX: 0000000000000000 RSI: ffff888013c58000 RDI: 0000000000000002
[   38.666455] RBP: ffffc9000148fca8 R08: 000000000000001a R09: 0000000000000001
[   38.667258] R10: ffff888013c58db0 R11: 0000000000000000 R12: ffffffffffffffff
[   38.668139] R13: 0000000001000000 R14: 00000000017fffff R15: 0000000000000000
[   38.669008] FS:  0000000000000000(0000) GS:ffff88807dd00000(0000) knlGS:0000000000000000
[   38.669928] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   38.670622] CR2: 00007ff55762d500 CR3: 0000000003a12006 CR4: 0000000000770ee0
[   38.671524] PKRU: 55555554
[   38.671914] Call Trace:
[   38.672223]  <TASK>
[   38.672507]  iopt_unmap_iova_range+0x1ef/0x2e0
[   38.673082]  iopt_unmap_all+0x2f/0x60
[   38.673531]  iommufd_ioas_destroy+0x2c/0x70
[   38.674129]  iommufd_fops_release+0xd4/0x170
[   38.674661]  ? iommufd_ctx_get+0x30/0x30
[   38.675163]  __fput+0x11f/0x450
[   38.675597]  ____fput+0x1e/0x30
[   38.676076]  task_work_run+0xb6/0x120
[   38.676541]  do_exit+0x547/0x1360
[   38.676995]  ? lockdep_hardirqs_on+0x8a/0x110
[   38.677551]  ? trace_hardirqs_on+0x3f/0xe0
[   38.678069]  do_group_exit+0x5e/0xf0
[   38.678525]  __x64_sys_exit_group+0x25/0x30
[   38.679112]  do_syscall_64+0x3b/0x90
[   38.679542]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   38.680187] RIP: 0033:0x7ff557523cf6
[   38.680640] Code: Unable to access opcode bytes at 0x7ff557523ccc.
[   38.681369] RSP: 002b:00007fff1c422f78 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
[   38.682279] RAX: ffffffffffffffda RBX: 00007ff55762e490 RCX: 00007ff557523cf6
[   38.683111] RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
[   38.683988] RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffff80
[   38.684821] R10: 0000000000000004 R11: 0000000000000246 R12: 00007ff55762e490
[   38.685668] R13: 0000000000000001 R14: 00007ff557631e88 R15: 0000000000000000
[   38.686640]  </TASK>
[   38.686922] irq event stamp: 25389
[   38.687335] hardirqs last  enabled at (25397): [<ffffffff811b8b21>] __up_console_sem+0x91/0xb0
[   38.688422] hardirqs last disabled at (25406): [<ffffffff811b8b06>] __up_console_sem+0x76/0xb0
[   38.689368] softirqs last  enabled at (25166): [<ffffffff83000329>] __do_softirq+0x329/0x490
[   38.690323] softirqs last disabled at (25159): [<ffffffff811123c2>] irq_exit_rcu+0xd2/0x100
[   38.691269] ---[ end trace 0000000000000000 ]---
[   38.760611] ------------[ cut here ]------------
[   38.760984] WARNING: CPU: 1 PID: 733 at drivers/iommu/iommufd/pages.c:1256 __iopt_area_unfill_domain+0x4ba/0x4d0
[   38.761763] Modules linked in:
[   38.761995] CPU: 1 PID: 733 Comm: repro Tainted: G        W          6.1.0-rc3-e26eed4f623d+ #1
[   38.762628] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   38.763462] RIP: 0010:__iopt_area_unfill_domain+0x4ba/0x4d0
[   38.764123] Code: 70 e8 fa 24 db 00 31 ff 89 c3 89 c6 e8 1f 26 2d ff 85 db 0f 85 bc fb ff ff e8 a2 24 2d ff 0f 0b e9 b0 fb ff ff e8 96 24 2d ff <0f> 0b e9 64 ff ff ff e8 aa 20 db 00 66 2e 0f 1f 84 00 00 00 00 00
[   38.765779] RSP: 0018:ffffc9000149faf0 EFLAGS: 00010246
[   38.766194] RAX: 0000000000000000 RBX: 00000000ffffffff RCX: ffffffff81fc6a3d
[   38.766714] RDX: 0000000000000000 RSI: ffff888013c58000 RDI: 0000000000000002
[   38.767248] RBP: ffffc9000149fd10 R08: 000000000003b3e5 R09: 0000000000000004
[   38.767810] R10: 000000000003b3c0 R11: 0000000000000024 R12: 00000000000007ff
[   38.768597] R13: 0000000000000800 R14: 0000000000000801 R15: 00000000000007ff
[   38.769126] FS:  00007ff557436740(0000) GS:ffff88807dd00000(0000) knlGS:0000000000000000
[   38.769731] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   38.770157] CR2: 00007ff55755b580 CR3: 0000000017450003 CR4: 0000000000770ee0
[   38.770701] PKRU: 55555554
[   38.770912] Call Trace:
[   38.771106]  <TASK>
[   38.771305]  ? __this_cpu_preempt_check+0x20/0x30
[   38.771730]  ? lock_is_held_type+0xe6/0x140
[   38.772263]  ? rcu_read_lock_sched_held+0x57/0x80
[   38.772835]  ? __mutex_lock+0x13a/0xf30
[   38.773251]  ? write_comp_data+0x2f/0x90
[   38.773561]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   38.773927]  iopt_area_unfill_domain+0x32/0x40
[   38.774296]  iopt_table_remove_domain+0x23f/0x4b0
[   38.774665]  iommufd_device_selftest_detach+0x3a/0x90
[   38.775060]  iommufd_selftest_destroy+0x55/0x70
[   38.775424]  iommufd_object_destroy_user+0xce/0x130
[   38.775835]  iommufd_destroy+0xa2/0xc0
[   38.776301]  iommufd_fops_ioctl+0x1ef/0x310
[   38.776836]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   38.777309]  ? write_comp_data+0x2f/0x90
[   38.777622]  __x64_sys_ioctl+0x10e/0x160
[   38.777943]  ? iommufd_get_object.part.6+0x1c0/0x1c0
[   38.778350]  do_syscall_64+0x3b/0x90
[   38.778640]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   38.779028] RIP: 0033:0x7ff55755b59d
[   38.779339] Code: 00 c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d d3 08 0d 00 f7 d8 64 89 01 48
[   38.780772] RSP: 002b:00007fff1c422fb8 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   38.781590] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007ff55755b59d
[   38.782228] RDX: 0000000020000140 RSI: 0000000000003b80 RDI: 0000000000000003
[   38.782763] RBP: 00007fff1c422fd0 R08: 00007fff1c422fd0 R09: 00007fff1c422fd0
[   38.783283] R10: 00007fff1c422fd0 R11: 0000000000000213 R12: 0000000000401180
[   38.783868] R13: 00007fff1c4230f0 R14: 0000000000000000 R15: 0000000000000000
[   38.784650]  </TASK>
[   38.784828] irq event stamp: 18697
[   38.785090] hardirqs last  enabled at (18705): [<ffffffff811b8b21>] __up_console_sem+0x91/0xb0
[   38.785743] hardirqs last disabled at (18712): [<ffffffff811b8b06>] __up_console_sem+0x76/0xb0
[   38.786380] softirqs last  enabled at (18344): [<ffffffff83000329>] __do_softirq+0x329/0x490
[   38.787016] softirqs last disabled at (18117): [<ffffffff811123c2>] irq_exit_rcu+0xd2/0x100
[   38.787632] ---[ end trace 0000000000000000 ]---
[   38.792650] ------------[ cut here ]------------
[   38.793007] WARNING: CPU: 1 PID: 733 at drivers/iommu/iommufd/pages.c:864 update_unpinned+0x75/0x80
[   38.793696] Modules linked in:
[   38.793939] CPU: 1 PID: 733 Comm: repro Tainted: G        W          6.1.0-rc3-e26eed4f623d+ #1
[   38.794594] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   38.795424] RIP: 0010:update_unpinned+0x75/0x80
[   38.795950] Code: 33 2d ff 48 89 de 31 c9 31 d2 4c 29 e6 4c 89 ef e8 60 fb ff ff e8 7b 33 2d ff 5b 41 5c 41 5d 5d c3 cc cc cc cc e8 6b 33 2d ff <0f> 0b eb e7 0f 1f 80 00 00 00 00 0f 1f 44 00 00 55 48 89 e5 41 57
[   38.797643] RSP: 0018:ffffc9000149fa28 EFLAGS: 00010246
[   38.798037] RAX: 0000000000000000 RBX: 0000000000000000 RCX: ffffffff81fc5bbf
[   38.798578] RDX: 0000000000000000 RSI: ffff888013c58000 RDI: 0000000000000002
[   38.799133] RBP: ffffc9000149fa40 R08: 0000000000000001 R09: 0000000000000001
[   38.799709] R10: ffff88807dd3b2d0 R11: 0000000000000000 R12: ffffffffffffffff
[   38.800487] R13: ffff88800a71a000 R14: 0000000000000002 R15: 0000000000000002
[   38.801043] FS:  0000000000000000(0000) GS:ffff88807dd00000(0000) knlGS:0000000000000000
[   38.801647] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   38.802112] CR2: 00007ff55762d500 CR3: 0000000003a12006 CR4: 0000000000770ee0
[   38.802659] PKRU: 55555554
[   38.802879] Call Trace:
[   38.803097]  <TASK>
[   38.803276]  iopt_pages_unfill_xarray+0x522/0x5c0
[   38.803765]  ? write_comp_data+0x2f/0x90
[   38.804270]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   38.804862]  ? write_comp_data+0x2f/0x90
[   38.805301]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   38.805683]  ? interval_tree_remove+0x291/0x4e0
[   38.806048]  ? write_comp_data+0x2f/0x90
[   38.806387]  iopt_area_remove_access+0x108/0x120
[   38.806764]  iommufd_access_unpin_pages+0xf2/0x190
[   38.807159]  iommufd_test_access_unmap+0xe0/0x130
[   38.807557]  ? iommufd_test_access_unmap+0x130/0x130
[   38.808170]  iommufd_test_staccess_release+0x39/0x60
[   38.808793]  __fput+0x11f/0x450
[   38.809210]  ____fput+0x1e/0x30
[   38.809556]  task_work_run+0xb6/0x120
[   38.809861]  do_exit+0x547/0x1360
[   38.810141]  ? lockdep_hardirqs_on+0x8a/0x110
[   38.810515]  ? trace_hardirqs_on+0x3f/0xe0
[   38.810852]  do_group_exit+0x5e/0xf0
[   38.811155]  __x64_sys_exit_group+0x25/0x30
[   38.811503]  do_syscall_64+0x3b/0x90
[   38.811845]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   38.812451] RIP: 0033:0x7ff557523cf6
[   38.812889] Code: Unable to access opcode bytes at 0x7ff557523ccc.
[   38.813447] RSP: 002b:00007fff1c422f78 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
[   38.814047] RAX: ffffffffffffffda RBX: 00007ff55762e490 RCX: 00007ff557523cf6
[   38.814592] RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
[   38.815151] RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffff80
[   38.815738] R10: 0000000000000004 R11: 0000000000000246 R12: 00007ff55762e490
[   38.816538] R13: 0000000000000001 R14: 00007ff557631e88 R15: 0000000000000000
[   38.817121]  </TASK>
[   38.817303] irq event stamp: 24965
[   38.817570] hardirqs last  enabled at (24973): [<ffffffff811b8b21>] __up_console_sem+0x91/0xb0
[   38.818249] hardirqs last disabled at (24980): [<ffffffff811b8b06>] __up_console_sem+0x76/0xb0
[   38.818918] softirqs last  enabled at (24792): [<ffffffff83000329>] __do_softirq+0x329/0x490
[   38.819583] softirqs last disabled at (24693): [<ffffffff811123c2>] irq_exit_rcu+0xd2/0x100
[   38.820277] ---[ end trace 0000000000000000 ]---
[   38.821063] ------------[ cut here ]------------
[   38.821572] WARNING: CPU: 1 PID: 733 at drivers/iommu/iommufd/pages.c:1147 iopt_release_pages+0x159/0x190
[   38.822308] Modules linked in:
[   38.822572] CPU: 1 PID: 733 Comm: repro Tainted: G        W          6.1.0-rc3-e26eed4f623d+ #1
[   38.823233] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   38.824151] RIP: 0010:iopt_release_pages+0x159/0x190
[   38.824769] Code: 6d 13 ff eb cb e8 97 18 2d ff be 03 00 00 00 4c 89 f7 e8 da cd ce ff eb b7 e8 83 18 2d ff 0f 0b e9 ed fe ff ff e8 77 18 2d ff <0f> 0b e9 00 ff ff ff e8 6b 18 2d ff 0f 0b e9 07 ff ff ff e8 5f 18
[   38.826230] RSP: 0018:ffffc9000149fc88 EFLAGS: 00010246
[   38.826648] RAX: 0000000000000000 RBX: ffff88800a71a000 RCX: ffffffff81fc75f7
[   38.827196] RDX: 0000000000000000 RSI: ffff888013c58000 RDI: 0000000000000002
[   38.827853] RBP: ffffc9000149fca8 R08: 000000000000001a R09: 0000000000000001
[   38.828603] R10: ffff888013c58db0 R11: 0000000000000000 R12: ffffffffffffffff
[   38.829153] R13: 0000000001000000 R14: 00000000017fffff R15: 0000000000000000
[   38.829686] FS:  0000000000000000(0000) GS:ffff88807dd00000(0000) knlGS:0000000000000000
[   38.830303] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   38.830739] CR2: 00007ff55762d500 CR3: 0000000003a12006 CR4: 0000000000770ee0
[   38.831286] PKRU: 55555554
[   38.831503] Call Trace:
[   38.831743]  <TASK>
[   38.832027]  iopt_unmap_iova_range+0x1ef/0x2e0
[   38.832614]  iopt_unmap_all+0x2f/0x60
[   38.833059]  iommufd_ioas_destroy+0x2c/0x70
[   38.833453]  iommufd_fops_release+0xd4/0x170
[   38.833786]  ? iommufd_ctx_get+0x30/0x30
[   38.834095]  __fput+0x11f/0x450
[   38.834381]  ____fput+0x1e/0x30
[   38.834639]  task_work_run+0xb6/0x120
[   38.834941]  do_exit+0x547/0x1360
[   38.835218]  ? lockdep_hardirqs_on+0x8a/0x110
[   38.835579]  ? trace_hardirqs_on+0x3f/0xe0
[   38.835946]  do_group_exit+0x5e/0xf0
[   38.836395]  __x64_sys_exit_group+0x25/0x30
[   38.836911]  do_syscall_64+0x3b/0x90
[   38.837359]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   38.837773] RIP: 0033:0x7ff557523cf6
[   38.838055] Code: Unable to access opcode bytes at 0x7ff557523ccc.
[   38.838531] RSP: 002b:00007fff1c422f78 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
[   38.839087] RAX: ffffffffffffffda RBX: 00007ff55762e490 RCX: 00007ff557523cf6
[   38.839622] RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
[   38.840187] RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffff80
[   38.840994] R10: 0000000000000004 R11: 0000000000000246 R12: 00007ff55762e490
[   38.841606] R13: 0000000000000001 R14: 00007ff557631e88 R15: 0000000000000000
[   38.842163]  </TASK>
[   38.842340] irq event stamp: 25431
[   38.842607] hardirqs last  enabled at (25439): [<ffffffff811b8b21>] __up_console_sem+0x91/0xb0
[   38.843265] hardirqs last disabled at (25446): [<ffffffff811b8b06>] __up_console_sem+0x76/0xb0
[   38.843953] softirqs last  enabled at (25010): [<ffffffff83000329>] __do_softirq+0x329/0x490
[   38.844872] softirqs last disabled at (25005): [<ffffffff811123c2>] irq_exit_rcu+0xd2/0x100
[   38.845506] ---[ end trace 0000000000000000 ]---
[   39.434188] ------------[ cut here ]------------
[   39.434567] WARNING: CPU: 1 PID: 750 at drivers/iommu/iommufd/pages.c:1256 __iopt_area_unfill_domain+0x4ba/0x4d0
[   39.435325] Modules linked in:
[   39.435564] CPU: 1 PID: 750 Comm: repro Tainted: G        W          6.1.0-rc3-e26eed4f623d+ #1
[   39.436219] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   39.437049] RIP: 0010:__iopt_area_unfill_domain+0x4ba/0x4d0
[   39.437477] Code: 70 e8 fa 24 db 00 31 ff 89 c3 89 c6 e8 1f 26 2d ff 85 db 0f 85 bc fb ff ff e8 a2 24 2d ff 0f 0b e9 b0 fb ff ff e8 96 24 2d ff <0f> 0b e9 64 ff ff ff e8 aa 20 db 00 66 2e 0f 1f 84 00 00 00 00 00
[   39.438804] RSP: 0018:ffffc9000151faf0 EFLAGS: 00010246
[   39.439200] RAX: 0000000000000000 RBX: 00000000ffffffff RCX: ffffffff81fc6a3d
[   39.439739] RDX: 0000000000000000 RSI: ffff888013e88000 RDI: 0000000000000002
[   39.440255] RBP: ffffc9000151fd10 R08: 000000000003b3e5 R09: 0000000000000003
[   39.440777] R10: 000000000003b3c0 R11: 0000000000000024 R12: 00000000000007ff
[   39.441297] R13: 0000000000000800 R14: 0000000000000801 R15: 00000000000007ff
[   39.441829] FS:  00007ff557436740(0000) GS:ffff88807dd00000(0000) knlGS:0000000000000000
[   39.442410] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   39.442834] CR2: 00007ff55755b580 CR3: 0000000017432001 CR4: 0000000000770ee0
[   39.443354] PKRU: 55555554
[   39.443568] Call Trace:
[   39.443780]  <TASK>
[   39.443979]  ? __this_cpu_preempt_check+0x20/0x30
[   39.444355]  ? lock_is_held_type+0xe6/0x140
[   39.444695]  ? rcu_read_lock_sched_held+0x57/0x80
[   39.445049]  ? __mutex_lock+0x13a/0xf30
[   39.445353]  ? write_comp_data+0x2f/0x90
[   39.445662]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   39.446025]  iopt_area_unfill_domain+0x32/0x40
[   39.446373]  iopt_table_remove_domain+0x23f/0x4b0
[   39.446742]  iommufd_device_selftest_detach+0x3a/0x90
[   39.447137]  iommufd_selftest_destroy+0x55/0x70
[   39.447486]  iommufd_object_destroy_user+0xce/0x130
[   39.447882]  iommufd_destroy+0xa2/0xc0
[   39.448173]  iommufd_fops_ioctl+0x1ef/0x310
[   39.448494]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   39.448852]  ? write_comp_data+0x2f/0x90
[   39.449158]  __x64_sys_ioctl+0x10e/0x160
[   39.449459]  ? iommufd_get_object.part.6+0x1c0/0x1c0
[   39.449831]  do_syscall_64+0x3b/0x90
[   39.450107]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   39.450483] RIP: 0033:0x7ff55755b59d
[   39.450756] Code: 00 c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d d3 08 0d 00 f7 d8 64 89 01 48
[   39.452076] RSP: 002b:00007fff1c422fb8 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   39.452633] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007ff55755b59d
[   39.453152] RDX: 0000000020000140 RSI: 0000000000003b80 RDI: 0000000000000003
[   39.453670] RBP: 00007fff1c422fd0 R08: 00007fff1c422fd0 R09: 00007fff1c422fd0
[   39.454178] R10: 00007fff1c422fd0 R11: 0000000000000213 R12: 0000000000401180
[   39.454689] R13: 00007fff1c4230f0 R14: 0000000000000000 R15: 0000000000000000
[   39.455219]  </TASK>
[   39.455394] irq event stamp: 18691
[   39.455671] hardirqs last  enabled at (18701): [<ffffffff811b8b21>] __up_console_sem+0x91/0xb0
[   39.456290] hardirqs last disabled at (18708): [<ffffffff811b8b06>] __up_console_sem+0x76/0xb0
[   39.456927] softirqs last  enabled at (18324): [<ffffffff83000329>] __do_softirq+0x329/0x490
[   39.457546] softirqs last disabled at (18319): [<ffffffff811123c2>] irq_exit_rcu+0xd2/0x100
[   39.458146] ---[ end trace 0000000000000000 ]---
[   39.462526] ------------[ cut here ]------------
[   39.462900] WARNING: CPU: 1 PID: 750 at drivers/iommu/iommufd/pages.c:864 update_unpinned+0x75/0x80
[   39.463561] Modules linked in:
[   39.463835] CPU: 1 PID: 750 Comm: repro Tainted: G        W          6.1.0-rc3-e26eed4f623d+ #1
[   39.464478] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   39.465313] RIP: 0010:update_unpinned+0x75/0x80
[   39.465665] Code: 33 2d ff 48 89 de 31 c9 31 d2 4c 29 e6 4c 89 ef e8 60 fb ff ff e8 7b 33 2d ff 5b 41 5c 41 5d 5d c3 cc cc cc cc e8 6b 33 2d ff <0f> 0b eb e7 0f 1f 80 00 00 00 00 0f 1f 44 00 00 55 48 89 e5 41 57
[   39.466996] RSP: 0018:ffffc9000151fa28 EFLAGS: 00010246
[   39.467389] RAX: 0000000000000000 RBX: 0000000000000000 RCX: ffffffff81fc5bbf
[   39.468024] RDX: 0000000000000000 RSI: ffff888013e88000 RDI: 0000000000000002
[   39.468555] RBP: ffffc9000151fa40 R08: 0000000000000001 R09: 0000000000000001
[   39.469074] R10: ffff88807dd3b2d0 R11: 0000000000000000 R12: ffffffffffffffff
[   39.469594] R13: ffff88800a71ac00 R14: 0000000000000002 R15: 0000000000000002
[   39.470124] FS:  0000000000000000(0000) GS:ffff88807dd00000(0000) knlGS:0000000000000000
[   39.470704] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   39.471136] CR2: 00007ff55762d500 CR3: 0000000003a12003 CR4: 0000000000770ee0
[   39.471687] PKRU: 55555554
[   39.471895] Call Trace:
[   39.472092]  <TASK>
[   39.472260]  iopt_pages_unfill_xarray+0x522/0x5c0
[   39.472657]  ? write_comp_data+0x2f/0x90
[   39.472963]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   39.473324]  ? write_comp_data+0x2f/0x90
[   39.473629]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   39.473993]  ? interval_tree_remove+0x291/0x4e0
[   39.474344]  ? write_comp_data+0x2f/0x90
[   39.474683]  iopt_area_remove_access+0x108/0x120
[   39.475064]  iommufd_access_unpin_pages+0xf2/0x190
[   39.475465]  iommufd_test_access_unmap+0xe0/0x130
[   39.475851]  ? iommufd_test_access_unmap+0x130/0x130
[   39.476239]  iommufd_test_staccess_release+0x39/0x60
[   39.476627]  __fput+0x11f/0x450
[   39.476888]  ____fput+0x1e/0x30
[   39.477147]  task_work_run+0xb6/0x120
[   39.477442]  do_exit+0x547/0x1360
[   39.477718]  ? lockdep_hardirqs_on+0x8a/0x110
[   39.478067]  ? trace_hardirqs_on+0x3f/0xe0
[   39.478384]  do_group_exit+0x5e/0xf0
[   39.478670]  __x64_sys_exit_group+0x25/0x30
[   39.478997]  do_syscall_64+0x3b/0x90
[   39.479273]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   39.479676] RIP: 0033:0x7ff557523cf6
[   39.479951] Code: Unable to access opcode bytes at 0x7ff557523ccc.
[   39.480406] RSP: 002b:00007fff1c422f78 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
[   39.480971] RAX: ffffffffffffffda RBX: 00007ff55762e490 RCX: 00007ff557523cf6
[   39.481494] RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
[   39.482011] RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffff80
[   39.482527] R10: 0000000000000004 R11: 0000000000000246 R12: 00007ff55762e490
[   39.483043] R13: 0000000000000001 R14: 00007ff557631e88 R15: 0000000000000000
[   39.483570]  </TASK>
[   39.483832] irq event stamp: 24969
[   39.484093] hardirqs last  enabled at (24977): [<ffffffff811b8b21>] __up_console_sem+0x91/0xb0
[   39.484739] hardirqs last disabled at (24984): [<ffffffff811b8b06>] __up_console_sem+0x76/0xb0
[   39.485361] softirqs last  enabled at (24966): [<ffffffff83000329>] __do_softirq+0x329/0x490
[   39.485978] softirqs last disabled at (24815): [<ffffffff811123c2>] irq_exit_rcu+0xd2/0x100
[   39.486587] ---[ end trace 0000000000000000 ]---
[   39.487057] ------------[ cut here ]------------
[   39.487400] WARNING: CPU: 1 PID: 750 at drivers/iommu/iommufd/pages.c:1147 iopt_release_pages+0x159/0x190
[   39.488112] Modules linked in:
[   39.488349] CPU: 1 PID: 750 Comm: repro Tainted: G        W          6.1.0-rc3-e26eed4f623d+ #1
[   39.488979] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   39.489797] RIP: 0010:iopt_release_pages+0x159/0x190
[   39.490181] Code: 6d 13 ff eb cb e8 97 18 2d ff be 03 00 00 00 4c 89 f7 e8 da cd ce ff eb b7 e8 83 18 2d ff 0f 0b e9 ed fe ff ff e8 77 18 2d ff <0f> 0b e9 00 ff ff ff e8 6b 18 2d ff 0f 0b e9 07 ff ff ff e8 5f 18
[   39.491497] RSP: 0018:ffffc9000151fc88 EFLAGS: 00010246
[   39.491916] RAX: 0000000000000000 RBX: ffff88800a71ac00 RCX: ffffffff81fc75f7
[   39.492436] RDX: 0000000000000000 RSI: ffff888013e88000 RDI: 0000000000000002
[   39.492963] RBP: ffffc9000151fca8 R08: 000000000000001a R09: 0000000000000001
[   39.493476] R10: ffff888013e88db0 R11: 0000000000000000 R12: ffffffffffffffff
[   39.493993] R13: 0000000001000000 R14: 00000000017fffff R15: 0000000000000000
[   39.494507] FS:  0000000000000000(0000) GS:ffff88807dd00000(0000) knlGS:0000000000000000
[   39.495099] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   39.495514] CR2: 00007ff55762d500 CR3: 0000000003a12003 CR4: 0000000000770ee0
[   39.496045] PKRU: 55555554
[   39.496253] Call Trace:
[   39.496439]  <TASK>
[   39.496614]  iopt_unmap_iova_range+0x1ef/0x2e0
[   39.496965]  iopt_unmap_all+0x2f/0x60
[   39.497249]  iommufd_ioas_destroy+0x2c/0x70
[   39.497568]  iommufd_fops_release+0xd4/0x170
[   39.497896]  ? iommufd_ctx_get+0x30/0x30
[   39.498221]  __fput+0x11f/0x450
[   39.498483]  ____fput+0x1e/0x30
[   39.498739]  task_work_run+0xb6/0x120
[   39.499031]  do_exit+0x547/0x1360
[   39.499301]  ? lockdep_hardirqs_on+0x8a/0x110
[   39.499638]  ? trace_hardirqs_on+0x3f/0xe0
[   39.499987]  do_group_exit+0x5e/0xf0
[   39.500280]  __x64_sys_exit_group+0x25/0x30
[   39.500606]  do_syscall_64+0x3b/0x90
[   39.500882]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   39.501272] RIP: 0033:0x7ff557523cf6
[   39.501560] Code: Unable to access opcode bytes at 0x7ff557523ccc.
[   39.502013] RSP: 002b:00007fff1c422f78 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
[   39.502581] RAX: ffffffffffffffda RBX: 00007ff55762e490 RCX: 00007ff557523cf6
[   39.503096] RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
[   39.503610] RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffff80
[   39.504143] R10: 0000000000000004 R11: 0000000000000246 R12: 00007ff55762e490
[   39.504674] R13: 0000000000000001 R14: 00007ff557631e88 R15: 0000000000000000
[   39.505208]  </TASK>
[   39.505381] irq event stamp: 25439
[   39.505633] hardirqs last  enabled at (25447): [<ffffffff811b8b21>] __up_console_sem+0x91/0xb0
[   39.506258] hardirqs last disabled at (25454): [<ffffffff811b8b06>] __up_console_sem+0x76/0xb0
[   39.506881] softirqs last  enabled at (25412): [<ffffffff83000329>] __do_softirq+0x329/0x490
[   39.507499] softirqs last disabled at (25407): [<ffffffff811123c2>] irq_exit_rcu+0xd2/0x100
[   39.508127] ---[ end trace 0000000000000000 ]---
[   39.573915] ------------[ cut here ]------------
[   39.574300] WARNING: CPU: 1 PID: 752 at drivers/iommu/iommufd/pages.c:1256 __iopt_area_unfill_domain+0x4ba/0x4d0
[   39.575054] Modules linked in:
[   39.575292] CPU: 1 PID: 752 Comm: repro Tainted: G        W          6.1.0-rc3-e26eed4f623d+ #1
[   39.575956] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   39.577065] RIP: 0010:__iopt_area_unfill_domain+0x4ba/0x4d0
[   39.577501] Code: 70 e8 fa 24 db 00 31 ff 89 c3 89 c6 e8 1f 26 2d ff 85 db 0f 85 bc fb ff ff e8 a2 24 2d ff 0f 0b e9 b0 fb ff ff e8 96 24 2d ff <0f> 0b e9 64 ff ff ff e8 aa 20 db 00 66 2e 0f 1f 84 00 00 00 00 00
[   39.578840] RSP: 0018:ffffc9000152faf0 EFLAGS: 00010246
[   39.579244] RAX: 0000000000000000 RBX: 00000000ffffffff RCX: ffffffff81fc6a3d
[   39.579811] RDX: 0000000000000000 RSI: ffff888013e88000 RDI: 0000000000000002
[   39.580595] RBP: ffffc9000152fd10 R08: 000000000003b3e5 R09: 0000000000000002
[   39.581109] R10: 000000000003b3c0 R11: 0000000000000024 R12: 00000000000007ff
[   39.581634] R13: 0000000000000800 R14: 0000000000000801 R15: 00000000000007ff
[   39.582157] FS:  00007ff557436740(0000) GS:ffff88807dd00000(0000) knlGS:0000000000000000
[   39.582764] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   39.583187] CR2: 00007ff55755b580 CR3: 000000000d9b8003 CR4: 0000000000770ee0
[   39.583756] PKRU: 55555554
[   39.584081] Call Trace:
[   39.584377]  <TASK>
[   39.584695]  ? __this_cpu_preempt_check+0x20/0x30
[   39.585194]  ? lock_is_held_type+0xe6/0x140
[   39.585534]  ? rcu_read_lock_sched_held+0x57/0x80
[   39.585909]  ? __mutex_lock+0x13a/0xf30
[   39.586220]  ? write_comp_data+0x2f/0x90
[   39.586520]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   39.586896]  iopt_area_unfill_domain+0x32/0x40
[   39.587237]  iopt_table_remove_domain+0x23f/0x4b0
[   39.587594]  iommufd_device_selftest_detach+0x3a/0x90
[   39.588048]  iommufd_selftest_destroy+0x55/0x70
[   39.588601]  iommufd_object_destroy_user+0xce/0x130
[   39.589159]  iommufd_destroy+0xa2/0xc0
[   39.589574]  iommufd_fops_ioctl+0x1ef/0x310
[   39.589898]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   39.590273]  ? write_comp_data+0x2f/0x90
[   39.590579]  __x64_sys_ioctl+0x10e/0x160
[   39.590878]  ? iommufd_get_object.part.6+0x1c0/0x1c0
[   39.591270]  do_syscall_64+0x3b/0x90
[   39.591549]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   39.591966] RIP: 0033:0x7ff55755b59d
[   39.592399] Code: 00 c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d d3 08 0d 00 f7 d8 64 89 01 48
[   39.593986] RSP: 002b:00007fff1c422fb8 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   39.594550] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007ff55755b59d
[   39.595063] RDX: 0000000020000140 RSI: 0000000000003b80 RDI: 0000000000000003
[   39.595601] RBP: 00007fff1c422fd0 R08: 00007fff1c422fd0 R09: 00007fff1c422fd0
[   39.596227] R10: 00007fff1c422fd0 R11: 0000000000000213 R12: 0000000000401180
[   39.596982] R13: 00007fff1c4230f0 R14: 0000000000000000 R15: 0000000000000000
[   39.597523]  </TASK>
[   39.597714] irq event stamp: 18703
[   39.597970] hardirqs last  enabled at (18711): [<ffffffff811b8b21>] __up_console_sem+0x91/0xb0
[   39.598600] hardirqs last disabled at (18718): [<ffffffff811b8b06>] __up_console_sem+0x76/0xb0
[   39.599233] softirqs last  enabled at (18238): [<ffffffff83000329>] __do_softirq+0x329/0x490
[   39.599890] softirqs last disabled at (18233): [<ffffffff811123c2>] irq_exit_rcu+0xd2/0x100
[   39.600827] ---[ end trace 0000000000000000 ]---
[   39.605456] ------------[ cut here ]------------
[   39.605832] WARNING: CPU: 1 PID: 752 at drivers/iommu/iommufd/pages.c:864 update_unpinned+0x75/0x80
[   39.606510] Modules linked in:
[   39.606744] CPU: 1 PID: 752 Comm: repro Tainted: G        W          6.1.0-rc3-e26eed4f623d+ #1
[   39.607392] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   39.608230] RIP: 0010:update_unpinned+0x75/0x80
[   39.608781] Code: 33 2d ff 48 89 de 31 c9 31 d2 4c 29 e6 4c 89 ef e8 60 fb ff ff e8 7b 33 2d ff 5b 41 5c 41 5d 5d c3 cc cc cc cc e8 6b 33 2d ff <0f> 0b eb e7 0f 1f 80 00 00 00 00 0f 1f 44 00 00 55 48 89 e5 41 57
[   39.610265] RSP: 0018:ffffc9000152fa28 EFLAGS: 00010246
[   39.610671] RAX: 0000000000000000 RBX: 0000000000000000 RCX: ffffffff81fc5bbf
[   39.611193] RDX: 0000000000000000 RSI: ffff888013e88000 RDI: 0000000000000002
[   39.611765] RBP: ffffc9000152fa40 R08: 0000000000000001 R09: 0000000000000001
[   39.612485] R10: ffff88807dd3b2d0 R11: 0000000000000000 R12: ffffffffffffffff
[   39.613026] R13: ffff88800a71ac00 R14: 0000000000000002 R15: 0000000000000002
[   39.613548] FS:  0000000000000000(0000) GS:ffff88807dd00000(0000) knlGS:0000000000000000
[   39.614157] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   39.614584] CR2: 00007ff55762d500 CR3: 0000000003a12004 CR4: 0000000000770ee0
[   39.615119] PKRU: 55555554
[   39.615332] Call Trace:
[   39.615523]  <TASK>
[   39.615738]  iopt_pages_unfill_xarray+0x522/0x5c0
[   39.616363]  ? write_comp_data+0x2f/0x90
[   39.616847]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   39.617330]  ? write_comp_data+0x2f/0x90
[   39.617638]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   39.617995]  ? interval_tree_remove+0x291/0x4e0
[   39.618362]  ? write_comp_data+0x2f/0x90
[   39.618669]  iopt_area_remove_access+0x108/0x120
[   39.619030]  iommufd_access_unpin_pages+0xf2/0x190
[   39.619426]  iommufd_test_access_unmap+0xe0/0x130
[   39.619829]  ? iommufd_test_access_unmap+0x130/0x130
[   39.620424]  iommufd_test_staccess_release+0x39/0x60
[   39.620990]  __fput+0x11f/0x450
[   39.621269]  ____fput+0x1e/0x30
[   39.621531]  task_work_run+0xb6/0x120
[   39.621826]  do_exit+0x547/0x1360
[   39.622099]  ? lockdep_hardirqs_on+0x8a/0x110
[   39.622459]  ? trace_hardirqs_on+0x3f/0xe0
[   39.622780]  do_group_exit+0x5e/0xf0
[   39.623066]  __x64_sys_exit_group+0x25/0x30
[   39.623395]  do_syscall_64+0x3b/0x90
[   39.623727]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   39.624320] RIP: 0033:0x7ff557523cf6
[   39.624750] Code: Unable to access opcode bytes at 0x7ff557523ccc.
[   39.625371] RSP: 002b:00007fff1c422f78 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
[   39.625953] RAX: ffffffffffffffda RBX: 00007ff55762e490 RCX: 00007ff557523cf6
[   39.626466] RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
[   39.626993] RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffff80
[   39.627508] R10: 0000000000000004 R11: 0000000000000246 R12: 00007ff55762e490
[   39.628061] R13: 0000000000000001 R14: 00007ff557631e88 R15: 0000000000000000
[   39.628893]  </TASK>
[   39.629077] irq event stamp: 24765
[   39.629340] hardirqs last  enabled at (24773): [<ffffffff811b8b21>] __up_console_sem+0x91/0xb0
[   39.629982] hardirqs last disabled at (24780): [<ffffffff811b8b06>] __up_console_sem+0x76/0xb0
[   39.630604] softirqs last  enabled at (23470): [<ffffffff83000329>] __do_softirq+0x329/0x490
[   39.631230] softirqs last disabled at (23465): [<ffffffff811123c2>] irq_exit_rcu+0xd2/0x100
[   39.631874] ---[ end trace 0000000000000000 ]---
[   39.632619] ------------[ cut here ]------------
[   39.633094] WARNING: CPU: 1 PID: 752 at drivers/iommu/iommufd/pages.c:1147 iopt_release_pages+0x159/0x190
[   39.633791] Modules linked in:
[   39.634026] CPU: 1 PID: 752 Comm: repro Tainted: G        W          6.1.0-rc3-e26eed4f623d+ #1
[   39.634676] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   39.635509] RIP: 0010:iopt_release_pages+0x159/0x190
[   39.635919] Code: 6d 13 ff eb cb e8 97 18 2d ff be 03 00 00 00 4c 89 f7 e8 da cd ce ff eb b7 e8 83 18 2d ff 0f 0b e9 ed fe ff ff e8 77 18 2d ff <0f> 0b e9 00 ff ff ff e8 6b 18 2d ff 0f 0b e9 07 ff ff ff e8 5f 18
[   39.637545] RSP: 0018:ffffc9000152fc88 EFLAGS: 00010246
[   39.637936] RAX: 0000000000000000 RBX: ffff88800a71ac00 RCX: ffffffff81fc75f7
[   39.638473] RDX: 0000000000000000 RSI: ffff888013e88000 RDI: 0000000000000002
[   39.638984] RBP: ffffc9000152fca8 R08: 000000000000001a R09: 0000000000000001
[   39.639493] R10: ffff888013e88db0 R11: 0000000000000000 R12: ffffffffffffffff
[   39.640063] R13: 0000000001000000 R14: 00000000017fffff R15: 0000000000000000
[   39.640855] FS:  0000000000000000(0000) GS:ffff88807dd00000(0000) knlGS:0000000000000000
[   39.641468] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   39.641910] CR2: 00007ff55762d500 CR3: 0000000003a12004 CR4: 0000000000770ee0
[   39.642425] PKRU: 55555554
[   39.642631] Call Trace:
[   39.642835]  <TASK>
[   39.643008]  iopt_unmap_iova_range+0x1ef/0x2e0
[   39.643399]  iopt_unmap_all+0x2f/0x60
[   39.643719]  iommufd_ioas_destroy+0x2c/0x70
[   39.644210]  iommufd_fops_release+0xd4/0x170
[   39.644734]  ? iommufd_ctx_get+0x30/0x30
[   39.645182]  __fput+0x11f/0x450
[   39.645446]  ____fput+0x1e/0x30
[   39.645700]  task_work_run+0xb6/0x120
[   39.646003]  do_exit+0x547/0x1360
[   39.646276]  ? lockdep_hardirqs_on+0x8a/0x110
[   39.646615]  ? trace_hardirqs_on+0x3f/0xe0
[   39.646942]  do_group_exit+0x5e/0xf0
[   39.647246]  __x64_sys_exit_group+0x25/0x30
[   39.647568]  do_syscall_64+0x3b/0x90
[   39.647889]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   39.648478] RIP: 0033:0x7ff557523cf6
[   39.648901] Code: Unable to access opcode bytes at 0x7ff557523ccc.
[   39.649535] RSP: 002b:00007fff1c422f78 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
[   39.650092] RAX: ffffffffffffffda RBX: 00007ff55762e490 RCX: 00007ff557523cf6
[   39.650626] RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
[   39.651145] RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffff80
[   39.651719] R10: 0000000000000004 R11: 0000000000000246 R12: 00007ff55762e490
[   39.652489] R13: 0000000000000001 R14: 00007ff557631e88 R15: 0000000000000000
[   39.653027]  </TASK>
[   39.653204] irq event stamp: 25237
[   39.653462] hardirqs last  enabled at (25245): [<ffffffff811b8b21>] __up_console_sem+0x91/0xb0
[   39.654111] hardirqs last disabled at (25252): [<ffffffff811b8b06>] __up_console_sem+0x76/0xb0
[   39.654748] softirqs last  enabled at (25210): [<ffffffff83000329>] __do_softirq+0x329/0x490
[   39.655367] softirqs last disabled at (25199): [<ffffffff811123c2>] irq_exit_rcu+0xd2/0x100
[   39.656020] ---[ end trace 0000000000000000 ]---
[   41.504833] ------------[ cut here ]------------
[   41.505375] WARNING: CPU: 1 PID: 795 at drivers/iommu/iommufd/pages.c:1256 __iopt_area_unfill_domain+0x4ba/0x4d0
[   41.506517] Modules linked in:
[   41.506877] CPU: 1 PID: 795 Comm: repro Tainted: G        W          6.1.0-rc3-e26eed4f623d+ #1
[   41.507928] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   41.509174] RIP: 0010:__iopt_area_unfill_domain+0x4ba/0x4d0
[   41.509819] Code: 70 e8 fa 24 db 00 31 ff 89 c3 89 c6 e8 1f 26 2d ff 85 db 0f 85 bc fb ff ff e8 a2 24 2d ff 0f 0b e9 b0 fb ff ff e8 96 24 2d ff <0f> 0b e9 64 ff ff ff e8 aa 20 db 00 66 2e 0f 1f 84 00 00 00 00 00
[   41.511926] RSP: 0018:ffffc90001657af0 EFLAGS: 00010246
[   41.512539] RAX: 0000000000000000 RBX: 00000000ffffffff RCX: ffffffff81fc6a3d
[   41.513379] RDX: 0000000000000000 RSI: ffff888013c58000 RDI: 0000000000000002
[   41.514200] RBP: ffffc90001657d10 R08: 000000000003b3e5 R09: 000000000000000b
[   41.515034] R10: 000000000003b3c0 R11: 0000000000000024 R12: 00000000000007ff
[   41.515902] R13: 0000000000000800 R14: 0000000000000801 R15: 00000000000007ff
[   41.516744] FS:  00007ff557436740(0000) GS:ffff88807dd00000(0000) knlGS:0000000000000000
[   41.517641] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   41.518286] CR2: 00007ff55755b580 CR3: 0000000017466004 CR4: 0000000000770ee0
[   41.519078] PKRU: 55555554
[   41.519412] Call Trace:
[   41.519741]  <TASK>
[   41.520049]  ? __this_cpu_preempt_check+0x20/0x30
[   41.520623]  ? lock_is_held_type+0xe6/0x140
[   41.521165]  ? rcu_read_lock_sched_held+0x57/0x80
[   41.521741]  ? __mutex_lock+0x13a/0xf30
[   41.522223]  ? write_comp_data+0x2f/0x90
[   41.522683]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   41.523242]  iopt_area_unfill_domain+0x32/0x40
[   41.523834]  iopt_table_remove_domain+0x23f/0x4b0
[   41.524392]  iommufd_device_selftest_detach+0x3a/0x90
[   41.524998]  iommufd_selftest_destroy+0x55/0x70
[   41.525553]  iommufd_object_destroy_user+0xce/0x130
[   41.526153]  iommufd_destroy+0xa2/0xc0
[   41.526619]  iommufd_fops_ioctl+0x1ef/0x310
[   41.527114]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   41.527705]  ? write_comp_data+0x2f/0x90
[   41.528210]  __x64_sys_ioctl+0x10e/0x160
[   41.528673]  ? iommufd_get_object.part.6+0x1c0/0x1c0
[   41.529237]  do_syscall_64+0x3b/0x90
[   41.529672]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   41.530274] RIP: 0033:0x7ff55755b59d
[   41.530717] Code: 00 c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d d3 08 0d 00 f7 d8 64 89 01 48
[   41.532785] RSP: 002b:00007fff1c422fb8 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   41.533623] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007ff55755b59d
[   41.534444] RDX: 0000000020000140 RSI: 0000000000003b80 RDI: 0000000000000003
[   41.535215] RBP: 00007fff1c422fd0 R08: 00007fff1c422fd0 R09: 00007fff1c422fd0
[   41.536061] R10: 00007fff1c422fd0 R11: 0000000000000213 R12: 0000000000401180
[   41.536873] R13: 00007fff1c4230f0 R14: 0000000000000000 R15: 0000000000000000
[   41.537698]  </TASK>
[   41.537977] irq event stamp: 18785
[   41.538382] hardirqs last  enabled at (18793): [<ffffffff811b8b21>] __up_console_sem+0x91/0xb0
[   41.539368] hardirqs last disabled at (18800): [<ffffffff811b8b06>] __up_console_sem+0x76/0xb0
[   41.540326] softirqs last  enabled at (18438): [<ffffffff83000329>] __do_softirq+0x329/0x490
[   41.541295] softirqs last disabled at (18433): [<ffffffff811123c2>] irq_exit_rcu+0xd2/0x100
[   41.542242] ---[ end trace 0000000000000000 ]---
[   41.550777] ------------[ cut here ]------------
[   41.551305] WARNING: CPU: 1 PID: 795 at drivers/iommu/iommufd/pages.c:864 update_unpinned+0x75/0x80
[   41.552340] Modules linked in:
[   41.552718] CPU: 1 PID: 795 Comm: repro Tainted: G        W          6.1.0-rc3-e26eed4f623d+ #1
[   41.553722] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   41.554996] RIP: 0010:update_unpinned+0x75/0x80
[   41.555546] Code: 33 2d ff 48 89 de 31 c9 31 d2 4c 29 e6 4c 89 ef e8 60 fb ff ff e8 7b 33 2d ff 5b 41 5c 41 5d 5d c3 cc cc cc cc e8 6b 33 2d ff <0f> 0b eb e7 0f 1f 80 00 00 00 00 0f 1f 44 00 00 55 48 89 e5 41 57
[   41.557591] RSP: 0018:ffffc90001657a28 EFLAGS: 00010246
[   41.558192] RAX: 0000000000000000 RBX: 0000000000000000 RCX: ffffffff81fc5bbf
[   41.558972] RDX: 0000000000000000 RSI: ffff888013c58000 RDI: 0000000000000002
[   41.559798] RBP: ffffc90001657a40 R08: 0000000000000001 R09: 0000000000000001
[   41.560619] R10: ffff88807dd3b2d0 R11: 0000000000000000 R12: ffffffffffffffff
[   41.561443] R13: ffff88800a71ac00 R14: 0000000000000002 R15: 0000000000000002
[   41.562254] FS:  0000000000000000(0000) GS:ffff88807dd00000(0000) knlGS:0000000000000000
[   41.563176] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   41.563841] CR2: 00007ff55762d500 CR3: 0000000003a12005 CR4: 0000000000770ee0
[   41.564663] PKRU: 55555554
[   41.565001] Call Trace:
[   41.565280]  <TASK>
[   41.565533]  iopt_pages_unfill_xarray+0x522/0x5c0
[   41.566141]  ? write_comp_data+0x2f/0x90
[   41.566642]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   41.567191]  ? write_comp_data+0x2f/0x90
[   41.567687]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   41.568272]  ? interval_tree_remove+0x291/0x4e0
[   41.568836]  ? write_comp_data+0x2f/0x90
[   41.569320]  iopt_area_remove_access+0x108/0x120
[   41.569893]  iommufd_access_unpin_pages+0xf2/0x190
[   41.570507]  iommufd_test_access_unmap+0xe0/0x130
[   41.571079]  ? iommufd_test_access_unmap+0x130/0x130
[   41.571733]  iommufd_test_staccess_release+0x39/0x60
[   41.572298]  __fput+0x11f/0x450
[   41.572699]  ____fput+0x1e/0x30
[   41.573081]  task_work_run+0xb6/0x120
[   41.573706]  do_exit+0x547/0x1360
[   41.574179]  ? lockdep_hardirqs_on+0x8a/0x110
[   41.574725]  ? trace_hardirqs_on+0x3f/0xe0
[   41.575223]  do_group_exit+0x5e/0xf0
[   41.575704]  __x64_sys_exit_group+0x25/0x30
[   41.576216]  do_syscall_64+0x3b/0x90
[   41.576695]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   41.577299] RIP: 0033:0x7ff557523cf6
[   41.577701] Code: Unable to access opcode bytes at 0x7ff557523ccc.
[   41.578379] RSP: 002b:00007fff1c422f78 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
[   41.579274] RAX: ffffffffffffffda RBX: 00007ff55762e490 RCX: 00007ff557523cf6
[   41.580114] RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
[   41.580926] RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffff80
[   41.581764] R10: 0000000000000004 R11: 0000000000000246 R12: 00007ff55762e490
[   41.582794] R13: 0000000000000001 R14: 00007ff557631e88 R15: 0000000000000000
[   41.583739]  </TASK>
[   41.584034] irq event stamp: 24865
[   41.584462] hardirqs last  enabled at (24873): [<ffffffff811b8b21>] __up_console_sem+0x91/0xb0
[   41.585531] hardirqs last disabled at (24880): [<ffffffff811b8b06>] __up_console_sem+0x76/0xb0
[   41.586520] softirqs last  enabled at (24690): [<ffffffff83000329>] __do_softirq+0x329/0x490
[   41.587492] softirqs last disabled at (24677): [<ffffffff811123c2>] irq_exit_rcu+0xd2/0x100
[   41.588508] ---[ end trace 0000000000000000 ]---
[   41.589313] ------------[ cut here ]------------
[   41.589879] WARNING: CPU: 1 PID: 795 at drivers/iommu/iommufd/pages.c:1147 iopt_release_pages+0x159/0x190
[   41.591060] Modules linked in:
[   41.591447] CPU: 1 PID: 795 Comm: repro Tainted: G        W          6.1.0-rc3-e26eed4f623d+ #1
[   41.592518] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   41.593849] RIP: 0010:iopt_release_pages+0x159/0x190
[   41.594477] Code: 6d 13 ff eb cb e8 97 18 2d ff be 03 00 00 00 4c 89 f7 e8 da cd ce ff eb b7 e8 83 18 2d ff 0f 0b e9 ed fe ff ff e8 77 18 2d ff <0f> 0b e9 00 ff ff ff e8 6b 18 2d ff 0f 0b e9 07 ff ff ff e8 5f 18
[   41.596739] RSP: 0018:ffffc90001657c88 EFLAGS: 00010246
[   41.597389] RAX: 0000000000000000 RBX: ffff88800a71ac00 RCX: ffffffff81fc75f7
[   41.598406] RDX: 0000000000000000 RSI: ffff888013c58000 RDI: 0000000000000002
[   41.599321] RBP: ffffc90001657ca8 R08: 000000000000001a R09: 0000000000000001
[   41.600239] R10: ffff888013c58db0 R11: 0000000000000000 R12: ffffffffffffffff
[   41.601069] R13: 0000000001000000 R14: 00000000017fffff R15: 0000000000000000
[   41.602030] FS:  0000000000000000(0000) GS:ffff88807dd00000(0000) knlGS:0000000000000000
[   41.603021] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   41.603762] CR2: 00007ff55762d500 CR3: 0000000003a12005 CR4: 0000000000770ee0
[   41.604635] PKRU: 55555554
[   41.604970] Call Trace:
[   41.605264]  <TASK>
[   41.605529]  iopt_unmap_iova_range+0x1ef/0x2e0
[   41.606106]  iopt_unmap_all+0x2f/0x60
[   41.606567]  iommufd_ioas_destroy+0x2c/0x70
[   41.607220]  iommufd_fops_release+0xd4/0x170
[   41.607793]  ? iommufd_ctx_get+0x30/0x30
[   41.608287]  __fput+0x11f/0x450
[   41.608721]  ____fput+0x1e/0x30
[   41.609127]  task_work_run+0xb6/0x120
[   41.609601]  do_exit+0x547/0x1360
[   41.610046]  ? lockdep_hardirqs_on+0x8a/0x110
[   41.610764]  ? trace_hardirqs_on+0x3f/0xe0
[   41.611266]  do_group_exit+0x5e/0xf0
[   41.611746]  __x64_sys_exit_group+0x25/0x30
[   41.612254]  do_syscall_64+0x3b/0x90
[   41.612709]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   41.613352] RIP: 0033:0x7ff557523cf6
[   41.613926] Code: Unable to access opcode bytes at 0x7ff557523ccc.
[   41.614690] RSP: 002b:00007fff1c422f78 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
[   41.615687] RAX: ffffffffffffffda RBX: 00007ff55762e490 RCX: 00007ff557523cf6
[   41.616492] RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
[   41.617349] RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffff80
[   41.618261] R10: 0000000000000004 R11: 0000000000000246 R12: 00007ff55762e490
[   41.619085] R13: 0000000000000001 R14: 00007ff557631e88 R15: 0000000000000000
[   41.620144]  </TASK>
[   41.620427] irq event stamp: 25355
[   41.620848] hardirqs last  enabled at (25363): [<ffffffff811b8b21>] __up_console_sem+0x91/0xb0
[   41.621873] hardirqs last disabled at (25370): [<ffffffff811b8b06>] __up_console_sem+0x76/0xb0
[   41.623029] softirqs last  enabled at (25040): [<ffffffff83000329>] __do_softirq+0x329/0x490
[   41.624005] softirqs last disabled at (25029): [<ffffffff811123c2>] irq_exit_rcu+0xd2/0x100
[   41.624972] ---[ end trace 0000000000000000 ]---
[   42.118727] ------------[ cut here ]------------
[   42.119153] WARNING: CPU: 1 PID: 808 at drivers/iommu/iommufd/pages.c:1256 __iopt_area_unfill_domain+0x4ba/0x4d0
[   42.119940] Modules linked in:
[   42.120198] CPU: 1 PID: 808 Comm: repro Tainted: G        W          6.1.0-rc3-e26eed4f623d+ #1
[   42.120841] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   42.121669] RIP: 0010:__iopt_area_unfill_domain+0x4ba/0x4d0
[   42.122094] Code: 70 e8 fa 24 db 00 31 ff 89 c3 89 c6 e8 1f 26 2d ff 85 db 0f 85 bc fb ff ff e8 a2 24 2d ff 0f 0b e9 b0 fb ff ff e8 96 24 2d ff <0f> 0b e9 64 ff ff ff e8 aa 20 db 00 66 2e 0f 1f 84 00 00 00 00 00
[   42.123452] RSP: 0018:ffffc900016b7af0 EFLAGS: 00010246
[   42.123860] RAX: 0000000000000000 RBX: 00000000ffffffff RCX: ffffffff81fc6a3d
[   42.124407] RDX: 0000000000000000 RSI: ffff888013e88000 RDI: 0000000000000002
[   42.124928] RBP: ffffc900016b7d10 R08: 000000000003b3e5 R09: 0000000000000008
[   42.125474] R10: 000000000003b3c0 R11: 0000000000000024 R12: 00000000000007ff
[   42.125989] R13: 0000000000000800 R14: 0000000000000801 R15: 00000000000007ff
[   42.126528] FS:  00007ff557436740(0000) GS:ffff88807dd00000(0000) knlGS:0000000000000000
[   42.127110] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   42.127546] CR2: 00007ff55755b580 CR3: 000000000f3ce003 CR4: 0000000000770ee0
[   42.128098] PKRU: 55555554
[   42.128307] Call Trace:
[   42.128498]  <TASK>
[   42.128724]  ? __this_cpu_preempt_check+0x20/0x30
[   42.129097]  ? lock_is_held_type+0xe6/0x140
[   42.129420]  ? rcu_read_lock_sched_held+0x57/0x80
[   42.129809]  ? __mutex_lock+0x13a/0xf30
[   42.130104]  ? write_comp_data+0x2f/0x90
[   42.130404]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   42.130764]  iopt_area_unfill_domain+0x32/0x40
[   42.131137]  iopt_table_remove_domain+0x23f/0x4b0
[   42.131499]  iommufd_device_selftest_detach+0x3a/0x90
[   42.131934]  iommufd_selftest_destroy+0x55/0x70
[   42.132286]  iommufd_object_destroy_user+0xce/0x130
[   42.132663]  iommufd_destroy+0xa2/0xc0
[   42.132950]  iommufd_fops_ioctl+0x1ef/0x310
[   42.133303]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   42.133672]  ? write_comp_data+0x2f/0x90
[   42.133983]  __x64_sys_ioctl+0x10e/0x160
[   42.134321]  ? iommufd_get_object.part.6+0x1c0/0x1c0
[   42.134698]  do_syscall_64+0x3b/0x90
[   42.134976]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   42.135382] RIP: 0033:0x7ff55755b59d
[   42.135676] Code: 00 c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d d3 08 0d 00 f7 d8 64 89 01 48
[   42.137020] RSP: 002b:00007fff1c422fb8 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   42.137597] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007ff55755b59d
[   42.138112] RDX: 0000000020000140 RSI: 0000000000003b80 RDI: 0000000000000003
[   42.138657] RBP: 00007fff1c422fd0 R08: 00007fff1c422fd0 R09: 00007fff1c422fd0
[   42.139155] R10: 00007fff1c422fd0 R11: 0000000000000213 R12: 0000000000401180
[   42.139715] R13: 00007fff1c4230f0 R14: 0000000000000000 R15: 0000000000000000
[   42.140267]  </TASK>
[   42.140434] irq event stamp: 18699
[   42.140721] hardirqs last  enabled at (18707): [<ffffffff811b8b21>] __up_console_sem+0x91/0xb0
[   42.141344] hardirqs last disabled at (18714): [<ffffffff811b8b06>] __up_console_sem+0x76/0xb0
[   42.141991] softirqs last  enabled at (18308): [<ffffffff83000329>] __do_softirq+0x329/0x490
[   42.142608] softirqs last disabled at (18303): [<ffffffff811123c2>] irq_exit_rcu+0xd2/0x100
[   42.143242] ---[ end trace 0000000000000000 ]---
[   42.147812] ------------[ cut here ]------------
[   42.148185] WARNING: CPU: 1 PID: 808 at drivers/iommu/iommufd/pages.c:864 update_unpinned+0x75/0x80
[   42.148900] Modules linked in:
[   42.149145] CPU: 1 PID: 808 Comm: repro Tainted: G        W          6.1.0-rc3-e26eed4f623d+ #1
[   42.149800] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   42.150635] RIP: 0010:update_unpinned+0x75/0x80
[   42.150982] Code: 33 2d ff 48 89 de 31 c9 31 d2 4c 29 e6 4c 89 ef e8 60 fb ff ff e8 7b 33 2d ff 5b 41 5c 41 5d 5d c3 cc cc cc cc e8 6b 33 2d ff <0f> 0b eb e7 0f 1f 80 00 00 00 00 0f 1f 44 00 00 55 48 89 e5 41 57
[   42.152352] RSP: 0018:ffffc900016b7a28 EFLAGS: 00010246
[   42.152769] RAX: 0000000000000000 RBX: 0000000000000000 RCX: ffffffff81fc5bbf
[   42.153287] RDX: 0000000000000000 RSI: ffff888013e88000 RDI: 0000000000000002
[   42.153831] RBP: ffffc900016b7a40 R08: 0000000000000001 R09: 0000000000000001
[   42.154349] R10: ffff88807dd3b2d0 R11: 0000000000000000 R12: ffffffffffffffff
[   42.154892] R13: ffff88800a71a000 R14: 0000000000000002 R15: 0000000000000002
[   42.155406] FS:  0000000000000000(0000) GS:ffff88807dd00000(0000) knlGS:0000000000000000
[   42.156036] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   42.156463] CR2: 00007ff55762d500 CR3: 0000000003a12004 CR4: 0000000000770ee0
[   42.157011] PKRU: 55555554
[   42.157219] Call Trace:
[   42.157407]  <TASK>
[   42.157577]  iopt_pages_unfill_xarray+0x522/0x5c0
[   42.157969]  ? write_comp_data+0x2f/0x90
[   42.158294]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   42.158647]  ? write_comp_data+0x2f/0x90
[   42.158943]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   42.159328]  ? interval_tree_remove+0x291/0x4e0
[   42.159701]  ? write_comp_data+0x2f/0x90
[   42.160009]  iopt_area_remove_access+0x108/0x120
[   42.160397]  iommufd_access_unpin_pages+0xf2/0x190
[   42.160782]  iommufd_test_access_unmap+0xe0/0x130
[   42.161144]  ? iommufd_test_access_unmap+0x130/0x130
[   42.161551]  iommufd_test_staccess_release+0x39/0x60
[   42.161925]  __fput+0x11f/0x450
[   42.162185]  ____fput+0x1e/0x30
[   42.162467]  task_work_run+0xb6/0x120
[   42.162761]  do_exit+0x547/0x1360
[   42.163031]  ? lockdep_hardirqs_on+0x8a/0x110
[   42.163371]  ? trace_hardirqs_on+0x3f/0xe0
[   42.163749]  do_group_exit+0x5e/0xf0
[   42.164041]  __x64_sys_exit_group+0x25/0x30
[   42.164363]  do_syscall_64+0x3b/0x90
[   42.164678]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   42.165055] RIP: 0033:0x7ff557523cf6
[   42.165324] Code: Unable to access opcode bytes at 0x7ff557523ccc.
[   42.165827] RSP: 002b:00007fff1c422f78 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
[   42.166381] RAX: ffffffffffffffda RBX: 00007ff55762e490 RCX: 00007ff557523cf6
[   42.166929] RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
[   42.167441] RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffff80
[   42.168025] R10: 0000000000000004 R11: 0000000000000246 R12: 00007ff55762e490
[   42.168556] R13: 0000000000000001 R14: 00007ff557631e88 R15: 0000000000000000
[   42.169111]  </TASK>
[   42.169285] irq event stamp: 24811
[   42.169535] hardirqs last  enabled at (24819): [<ffffffff811b8b21>] __up_console_sem+0x91/0xb0
[   42.170186] hardirqs last disabled at (24826): [<ffffffff811b8b06>] __up_console_sem+0x76/0xb0
[   42.170803] softirqs last  enabled at (24696): [<ffffffff83000329>] __do_softirq+0x329/0x490
[   42.171436] softirqs last disabled at (24691): [<ffffffff811123c2>] irq_exit_rcu+0xd2/0x100
[   42.172062] ---[ end trace 0000000000000000 ]---
[   42.172572] ------------[ cut here ]------------
[   42.172915] WARNING: CPU: 1 PID: 808 at drivers/iommu/iommufd/pages.c:1147 iopt_release_pages+0x159/0x190
[   42.173632] Modules linked in:
[   42.173863] CPU: 1 PID: 808 Comm: repro Tainted: G        W          6.1.0-rc3-e26eed4f623d+ #1
[   42.174521] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   42.175330] RIP: 0010:iopt_release_pages+0x159/0x190
[   42.175753] Code: 6d 13 ff eb cb e8 97 18 2d ff be 03 00 00 00 4c 89 f7 e8 da cd ce ff eb b7 e8 83 18 2d ff 0f 0b e9 ed fe ff ff e8 77 18 2d ff <0f> 0b e9 00 ff ff ff e8 6b 18 2d ff 0f 0b e9 07 ff ff ff e8 5f 18
[   42.177108] RSP: 0018:ffffc900016b7c88 EFLAGS: 00010246
[   42.177490] RAX: 0000000000000000 RBX: ffff88800a71a000 RCX: ffffffff81fc75f7
[   42.178033] RDX: 0000000000000000 RSI: ffff888013e88000 RDI: 0000000000000002
[   42.178546] RBP: ffffc900016b7ca8 R08: 000000000000001a R09: 0000000000000001
[   42.179084] R10: ffff888013e88db0 R11: 0000000000000000 R12: ffffffffffffffff
[   42.179597] R13: 0000000001000000 R14: 00000000017fffff R15: 0000000000000000
[   42.180165] FS:  0000000000000000(0000) GS:ffff88807dd00000(0000) knlGS:0000000000000000
[   42.180743] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   42.181186] CR2: 00007ff55762d500 CR3: 0000000003a12004 CR4: 0000000000770ee0
[   42.181707] PKRU: 55555554
[   42.181919] Call Trace:
[   42.182137]  <TASK>
[   42.182307]  iopt_unmap_iova_range+0x1ef/0x2e0
[   42.182668]  iopt_unmap_all+0x2f/0x60
[   42.182964]  iommufd_ioas_destroy+0x2c/0x70
[   42.183308]  iommufd_fops_release+0xd4/0x170
[   42.183636]  ? iommufd_ctx_get+0x30/0x30
[   42.183976]  __fput+0x11f/0x450
[   42.184272]  ____fput+0x1e/0x30
[   42.184522]  task_work_run+0xb6/0x120
[   42.184818]  do_exit+0x547/0x1360
[   42.185078]  ? lockdep_hardirqs_on+0x8a/0x110
[   42.185432]  ? trace_hardirqs_on+0x3f/0xe0
[   42.185746]  do_group_exit+0x5e/0xf0
[   42.186032]  __x64_sys_exit_group+0x25/0x30
[   42.186363]  do_syscall_64+0x3b/0x90
[   42.186656]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   42.187042] RIP: 0033:0x7ff557523cf6
[   42.187321] Code: Unable to access opcode bytes at 0x7ff557523ccc.
[   42.187815] RSP: 002b:00007fff1c422f78 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
[   42.188362] RAX: ffffffffffffffda RBX: 00007ff55762e490 RCX: 00007ff557523cf6
[   42.188913] RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
[   42.189420] RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffff80
[   42.189958] R10: 0000000000000004 R11: 0000000000000246 R12: 00007ff55762e490
[   42.190480] R13: 0000000000000001 R14: 00007ff557631e88 R15: 0000000000000000
[   42.191043]  </TASK>
[   42.191217] irq event stamp: 25269
[   42.191468] hardirqs last  enabled at (25277): [<ffffffff811b8b21>] __up_console_sem+0x91/0xb0
[   42.192138] hardirqs last disabled at (25286): [<ffffffff811b8b06>] __up_console_sem+0x76/0xb0
[   42.192762] softirqs last  enabled at (24696): [<ffffffff83000329>] __do_softirq+0x329/0x490
[   42.193392] softirqs last disabled at (24691): [<ffffffff811123c2>] irq_exit_rcu+0xd2/0x100
[   42.194017] ---[ end trace 0000000000000000 ]---
[   43.109773] general protection fault, probably for non-canonical address 0xf8c4000206908: 0000 [#1] PREEMPT SMP NOPTI
[   43.110586] CPU: 1 PID: 825 Comm: repro Tainted: G        W          6.1.0-rc3-e26eed4f623d+ #1
[   43.111221] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   43.112039] RIP: 0010:unpin_user_page_range_dirty_lock+0x121/0x2b0
[   43.112523] Code: 4c 03 65 d0 4c 89 f7 4c 89 e6 e8 4a 8b e0 ff 4d 39 e6 0f 86 54 01 00 00 e8 5c 8a e0 ff 4d 89 e5 31 ff 49 c1 e5 06 4c 03 6d c8 <49> 8b 45 08 48 89 c3 48 89 45 d0 83 e3 01 48 89 de e8 c9 8b e0 ff
[   43.113799] RSP: 0018:ffffc9000171fa50 EFLAGS: 00010206
[   43.114180] RAX: 0000000000000000 RBX: 0000000000000000 RCX: ffffffff81490436
[   43.114701] RDX: 0000000000000000 RSI: ffff888013e88000 RDI: 0000000000000000
[   43.115199] RBP: ffffc9000171fa90 R08: 000000000003b3e5 R09: 0000000000000005
[   43.115716] R10: 000000000003b3c0 R11: 0000000000000024 R12: 0000000000000000
[   43.116229] R13: 000f8c4000206900 R14: 0000000000000001 R15: 0000000000000001
[   43.116760] FS:  00007ff557436740(0000) GS:ffff88807dd00000(0000) knlGS:0000000000000000
[   43.117340] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   43.117774] CR2: 00007ff55755b580 CR3: 0000000017464003 CR4: 0000000000770ee0
[   43.118291] PKRU: 55555554
[   43.118499] Call Trace:
[   43.118692]  <TASK>
[   43.118855]  ? write_comp_data+0x2f/0x90
[   43.119154]  batch_unpin.isra.23+0xff/0x140
[   43.119475]  ? iopt_area_unmap_domain_range+0xc8/0xf0
[   43.119871]  __iopt_area_unfill_domain+0x2c5/0x4d0
[   43.120237]  ? __this_cpu_preempt_check+0x20/0x30
[   43.120600]  ? lock_is_held_type+0xe6/0x140
[   43.120927]  ? rcu_read_lock_sched_held+0x57/0x80
[   43.121282]  ? __mutex_lock+0x13a/0xf30
[   43.121581]  ? write_comp_data+0x2f/0x90
[   43.121890]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   43.122239]  iopt_area_unfill_domain+0x32/0x40
[   43.122571]  iopt_table_remove_domain+0x23f/0x4b0
[   43.122934]  iommufd_device_selftest_detach+0x3a/0x90
[   43.123313]  iommufd_selftest_destroy+0x55/0x70
[   43.123651]  iommufd_object_destroy_user+0xce/0x130
[   43.124040]  iommufd_destroy+0xa2/0xc0
[   43.124328]  iommufd_fops_ioctl+0x1ef/0x310
[   43.124652]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   43.125005]  ? write_comp_data+0x2f/0x90
[   43.125304]  __x64_sys_ioctl+0x10e/0x160
[   43.125607]  ? iommufd_get_object.part.6+0x1c0/0x1c0
[   43.125982]  do_syscall_64+0x3b/0x90
[   43.126264]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[   43.126637] RIP: 0033:0x7ff55755b59d
[   43.126906] Code: 00 c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d d3 08 0d 00 f7 d8 64 89 01 48
[   43.128229] RSP: 002b:00007fff1c422fb8 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   43.128768] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007ff55755b59d
[   43.129285] RDX: 0000000020000140 RSI: 0000000000003b80 RDI: 0000000000000003
[   43.129805] RBP: 00007fff1c422fd0 R08: 00007fff1c422fd0 R09: 00007fff1c422fd0
[   43.130324] R10: 00007fff1c422fd0 R11: 0000000000000213 R12: 0000000000401180
[   43.130838] R13: 00007fff1c4230f0 R14: 0000000000000000 R15: 0000000000000000
[   43.131361]  </TASK>
[   43.131532] Modules linked in:
[   43.131806] ---[ end trace 0000000000000000 ]---
[   43.132280] RIP: 0010:unpin_user_page_range_dirty_lock+0x121/0x2b0
[   43.132950] Code: 4c 03 65 d0 4c 89 f7 4c 89 e6 e8 4a 8b e0 ff 4d 39 e6 0f 86 54 01 00 00 e8 5c 8a e0 ff 4d 89 e5 31 ff 49 c1 e5 06 4c 03 6d c8 <49> 8b 45 08 48 89 c3 48 89 45 d0 83 e3 01 48 89 de e8 c9 8b e0 ff
[   43.134796] RSP: 0018:ffffc9000171fa50 EFLAGS: 00010206
[   43.135387] RAX: 0000000000000000 RBX: 0000000000000000 RCX: ffffffff81490436
[   43.136192] RDX: 0000000000000000 RSI: ffff888013e88000 RDI: 0000000000000000
[   43.136998] RBP: ffffc9000171fa90 R08: 000000000003b3e5 R09: 0000000000000005
[   43.137754] R10: 000000000003b3c0 R11: 0000000000000024 R12: 0000000000000000
[   43.138587] R13: 000f8c4000206900 R14: 0000000000000001 R15: 0000000000000001
[   43.139329] FS:  00007ff557436740(0000) GS:ffff88807dd00000(0000) knlGS:0000000000000000
[   43.139980] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   43.140476] CR2: 00007ff55755b580 CR3: 0000000017464003 CR4: 0000000000770ee0
[   43.140998] PKRU: 55555554
