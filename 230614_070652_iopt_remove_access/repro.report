------------[ cut here ]------------
WARNING: CPU: 1 PID: 544 at drivers/iommu/iommufd/io_pagetable.c:1158 iopt_remove_access+0xb5/0xd0 drivers/iommu/iommufd/io_pagetable.c:1157
Modules linked in:
CPU: 1 PID: 544 Comm: syz-executor321 Not tainted 6.4.0-rc6-5ca8bbe2b782+ #1
Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
RIP: 0010:iopt_remove_access+0xb5/0xd0 drivers/iommu/iommufd/io_pagetable.c:1157
Code: 45 85 e4 75 29 e8 4b 2d 0b fe 4c 89 ef e8 33 eb e8 fd 48 89 df e8 2b eb e8 fd 5b 41 5c 41 5d 5d c3 cc cc cc cc e8 2b 2d 0b fe <0f> 0b eb b9 e8 22 2d 0b fe 0f 0b eb ce e8 b9 1d 67 fe eb 90 0f 1f
RSP: 0018:ffff888013d0fbb8 EFLAGS: 00010246
RAX: 0000000000000000 RBX: ffff88801884f0a8 RCX: 0000000000000000
RDX: 0000000000000000 RSI: ffff88800bc72500 RDI: 0000000000000002
RBP: ffff888013d0fbd0 R08: ffffed1003109e33 R09: ffffed1003109e33
R10: ffff88801884f193 R11: ffffed1003109e32 R12: ffff88800f8c0000
R13: ffff88801884f1e8 R14: ffffffff835430e0 R15: ffff888013d0fe68
FS:  0000000001a0a3c0(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
CR2: 0000000020000140 CR3: 0000000016ff0000 CR4: 0000000000750ee0
PKRU: 55555554
Call Trace:
 <TASK>
 __iommufd_access_detach+0x1c2/0x2b0 drivers/iommu/iommufd/device.c:971
 iommufd_access_change_pt+0x149/0x270 drivers/iommu/iommufd/device.c:1006
 iommufd_access_replace+0xb4/0x120 drivers/iommu/iommufd/device.c:1042
 iommufd_test_access_replace_ioas drivers/iommu/iommufd/selftest.c:1025 [inline]
 iommufd_test+0x103d/0x3f00 drivers/iommu/iommufd/selftest.c:1252
 iommufd_fops_ioctl+0x37d/0x510 drivers/iommu/iommufd/main.c:378
 vfs_ioctl fs/ioctl.c:51 [inline]
 __do_sys_ioctl fs/ioctl.c:870 [inline]
 __se_sys_ioctl fs/ioctl.c:856 [inline]
 __x64_sys_ioctl+0x1a3/0x230 fs/ioctl.c:856
 do_syscall_x64 arch/x86/entry/common.c:50 [inline]
 do_syscall_64+0x3b/0x90 arch/x86/entry/common.c:80
 entry_SYSCALL_64_after_hwframe+0x72/0xdc
RIP: 0033:0x44ff3d
Code: db 48 89 d8 5b 5d 41 5c 41 5d 41 5e c3 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 c7 c1 a8 ff ff ff f7 d8 64 89 01 48
RSP: 002b:00007fff8410fc18 EFLAGS: 00000246 ORIG_RAX: 0000000000000010
RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 000000000044ff3d
RDX: 0000000020000000 RSI: 0000000000003ba0 RDI: 0000000000000003
RBP: 0000000000000001 R08: 0000000000411b40 R09: 0000000000411b40
R10: 0000000000411b40 R11: 0000000000000246 R12: 0000000000000001
R13: 0000000000000000 R14: 00000000004004e8 R15: 0000000000000000
 </TASK>
irq event stamp: 4699
hardirqs last  enabled at (4707): [<ffffffff81400f11>] __up_console_sem+0x91/0xb0 kernel/printk/printk.c:347
hardirqs last disabled at (4714): [<ffffffff81400ef6>] __up_console_sem+0x76/0xb0 kernel/printk/printk.c:345
softirqs last  enabled at (4688): [<ffffffff853e82b5>] softirq_handle_end kernel/softirq.c:414 [inline]
softirqs last  enabled at (4688): [<ffffffff853e82b5>] __do_softirq+0x4f5/0x77c kernel/softirq.c:600
softirqs last disabled at (4683): [<ffffffff81253215>] invoke_softirq kernel/softirq.c:445 [inline]
softirqs last disabled at (4683): [<ffffffff81253215>] __irq_exit_rcu kernel/softirq.c:650 [inline]
softirqs last disabled at (4683): [<ffffffff81253215>] irq_exit_rcu+0xe5/0x130 kernel/softirq.c:662
---[ end trace 0000000000000000 ]---
==================================================================
BUG: KASAN: slab-use-after-free in iopt_calculate_iova_alignment+0x3d4/0x410 drivers/iommu/iommufd/io_pagetable.c:919
Read of size 8 at addr ffff88800f8c0160 by task syz-executor321/544

CPU: 1 PID: 544 Comm: syz-executor321 Tainted: G        W          6.4.0-rc6-5ca8bbe2b782+ #1
Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
Call Trace:
 <TASK>
 __dump_stack lib/dump_stack.c:88 [inline]
 dump_stack_lvl+0xa9/0x110 lib/dump_stack.c:106
 print_address_description mm/kasan/report.c:351 [inline]
 print_report+0xd1/0x620 mm/kasan/report.c:462
 kasan_report+0x9e/0xd0 mm/kasan/report.c:572
 __asan_report_load8_noabort+0x18/0x20 mm/kasan/report_generic.c:381
 iopt_calculate_iova_alignment+0x3d4/0x410 drivers/iommu/iommufd/io_pagetable.c:919
 iopt_remove_access+0x7f/0xd0 drivers/iommu/iommufd/io_pagetable.c:1159
 iommufd_access_destroy_object+0x65/0x170 drivers/iommu/iommufd/device.c:875
 iommufd_object_destroy_user+0x18e/0x220 drivers/iommu/iommufd/main.c:163
 iommufd_access_destroy+0x43/0x70 drivers/iommu/iommufd/device.c:938
 iommufd_test_staccess_release+0x8d/0xd0 drivers/iommu/iommufd/selftest.c:918
 __fput+0x26d/0xa40 fs/file_table.c:321
 ____fput+0x1e/0x30 fs/file_table.c:349
 task_work_run+0x1a4/0x2d0 kernel/task_work.c:179
 exit_task_work include/linux/task_work.h:38 [inline]
 do_exit+0xaf3/0x2f60 kernel/exit.c:874
 do_group_exit+0xe0/0x2b0 kernel/exit.c:1024
 __do_sys_exit_group kernel/exit.c:1035 [inline]
 __se_sys_exit_group kernel/exit.c:1033 [inline]
 __x64_sys_exit_group+0x47/0x50 kernel/exit.c:1033
 do_syscall_x64 arch/x86/entry/common.c:50 [inline]
 do_syscall_64+0x3b/0x90 arch/x86/entry/common.c:80
 entry_SYSCALL_64_after_hwframe+0x72/0xdc
RIP: 0033:0x44de86
Code: Unable to access opcode bytes at 0x44de5c.
RSP: 002b:00007fff8410fbc8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
RAX: ffffffffffffffda RBX: 00000000004e5410 RCX: 000000000044de86
RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffffa8
R10: 0000000000411b40 R11: 0000000000000246 R12: 00000000004e5410
R13: 0000000000000001 R14: 0000000000000000 R15: 0000000000000001
 </TASK>

Allocated by task 544:
 kasan_save_stack+0x2a/0x50 mm/kasan/common.c:45
 kasan_set_track+0x29/0x40 mm/kasan/common.c:52
 kasan_save_alloc_info+0x22/0x30 mm/kasan/generic.c:510
 ____kasan_kmalloc mm/kasan/common.c:374 [inline]
 __kasan_kmalloc+0x86/0xa0 mm/kasan/common.c:383
 kasan_kmalloc include/linux/kasan.h:196 [inline]
 __do_kmalloc_node mm/slab_common.c:966 [inline]
 __kmalloc+0x66/0x170 mm/slab_common.c:979
 kmalloc include/linux/slab.h:563 [inline]
 kzalloc include/linux/slab.h:680 [inline]
 _iommufd_object_alloc+0x34/0x1a0 drivers/iommu/iommufd/main.c:43
 iommufd_access_create+0x39/0x2d0 drivers/iommu/iommufd/device.c:905
 iommufd_test_create_access drivers/iommu/iommufd/selftest.c:983 [inline]
 iommufd_test+0x181b/0x3f00 drivers/iommu/iommufd/selftest.c:1249
 iommufd_fops_ioctl+0x37d/0x510 drivers/iommu/iommufd/main.c:378
 vfs_ioctl fs/ioctl.c:51 [inline]
 __do_sys_ioctl fs/ioctl.c:870 [inline]
 __se_sys_ioctl fs/ioctl.c:856 [inline]
 __x64_sys_ioctl+0x1a3/0x230 fs/ioctl.c:856
 do_syscall_x64 arch/x86/entry/common.c:50 [inline]
 do_syscall_64+0x3b/0x90 arch/x86/entry/common.c:80
 entry_SYSCALL_64_after_hwframe+0x72/0xdc

Freed by task 544:
 kasan_save_stack+0x2a/0x50 mm/kasan/common.c:45
 kasan_set_track+0x29/0x40 mm/kasan/common.c:52
 kasan_save_free_info+0x32/0x50 mm/kasan/generic.c:521
 ____kasan_slab_free mm/kasan/common.c:236 [inline]
 ____kasan_slab_free mm/kasan/common.c:200 [inline]
 __kasan_slab_free+0x10b/0x1a0 mm/kasan/common.c:244
 kasan_slab_free include/linux/kasan.h:162 [inline]
 slab_free_hook mm/slub.c:1781 [inline]
 slab_free_freelist_hook mm/slub.c:1807 [inline]
 slab_free mm/slub.c:3786 [inline]
 __kmem_cache_free+0x1e8/0x430 mm/slub.c:3799
 kfree+0x93/0x140 mm/slab_common.c:1015
 iommufd_object_destroy_user+0x199/0x220 drivers/iommu/iommufd/main.c:164
 iommufd_access_destroy+0x43/0x70 drivers/iommu/iommufd/device.c:938
 iommufd_test_staccess_release+0x8d/0xd0 drivers/iommu/iommufd/selftest.c:918
 __fput+0x26d/0xa40 fs/file_table.c:321
 ____fput+0x1e/0x30 fs/file_table.c:349
 task_work_run+0x1a4/0x2d0 kernel/task_work.c:179
 exit_task_work include/linux/task_work.h:38 [inline]
 do_exit+0xaf3/0x2f60 kernel/exit.c:874
 do_group_exit+0xe0/0x2b0 kernel/exit.c:1024
 __do_sys_exit_group kernel/exit.c:1035 [inline]
 __se_sys_exit_group kernel/exit.c:1033 [inline]
 __x64_sys_exit_group+0x47/0x50 kernel/exit.c:1033
 do_syscall_x64 arch/x86/entry/common.c:50 [inline]
 do_syscall_64+0x3b/0x90 arch/x86/entry/common.c:80
 entry_SYSCALL_64_after_hwframe+0x72/0xdc

The buggy address belongs to the object at ffff88800f8c0000
 which belongs to the cache kmalloc-cg-512 of size 512
The buggy address is located 352 bytes inside of
 freed 512-byte region [ffff88800f8c0000, ffff88800f8c0200)

The buggy address belongs to the physical page:
page:00000000a661a671 refcount:1 mapcount:0 mapping:0000000000000000 index:0x0 pfn:0xf8c0
head:00000000a661a671 order:2 entire_mapcount:0 nr_pages_mapped:0 pincount:0
memcg:ffff88800f413c01
anon flags: 0xfffffc0010200(slab|head|node=0|zone=1|lastcpupid=0x1fffff)
page_type: 0xffffffff()
raw: 000fffffc0010200 ffff88800a44f140 0000000000000000 dead000000000001
raw: 0000000000000000 0000000080100010 00000001ffffffff ffff88800f413c01
page dumped because: kasan: bad access detected

Memory state around the buggy address:
 ffff88800f8c0000: fa fb fb fb fb fb fb fb fb fb fb fb fb fb fb fb
 ffff88800f8c0080: fb fb fb fb fb fb fb fb fb fb fb fb fb fb fb fb
>ffff88800f8c0100: fb fb fb fb fb fb fb fb fb fb fb fb fb fb fb fb
                                                       ^
 ffff88800f8c0180: fb fb fb fb fb fb fb fb fb fb fb fb fb fb fb fb
 ffff88800f8c0200: fc fc fc fc fc fc fc fc fc fc fc fc fc fc fc fc
==================================================================
------------[ cut here ]------------
WARNING: CPU: 1 PID: 544 at drivers/iommu/iommufd/io_pagetable.c:1158 iopt_remove_access+0xb5/0xd0 drivers/iommu/iommufd/io_pagetable.c:1157
Modules linked in:
CPU: 1 PID: 544 Comm: syz-executor321 Tainted: G    B   W          6.4.0-rc6-5ca8bbe2b782+ #1
Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
RIP: 0010:iopt_remove_access+0xb5/0xd0 drivers/iommu/iommufd/io_pagetable.c:1157
Code: 45 85 e4 75 29 e8 4b 2d 0b fe 4c 89 ef e8 33 eb e8 fd 48 89 df e8 2b eb e8 fd 5b 41 5c 41 5d 5d c3 cc cc cc cc e8 2b 2d 0b fe <0f> 0b eb b9 e8 22 2d 0b fe 0f 0b eb ce e8 b9 1d 67 fe eb 90 0f 1f
RSP: 0018:ffff888013d0fbd0 EFLAGS: 00010246
RAX: 0000000000000000 RBX: ffff88801884f0a8 RCX: 0000000000000000
RDX: 0000000000000000 RSI: ffff88800bc72500 RDI: 0000000000000002
RBP: ffff888013d0fbe8 R08: ffffed1003109e33 R09: ffffed1003109e33
R10: ffff88801884f193 R11: ffffed1003109e32 R12: ffff888019d62000
R13: ffff88801884f1e8 R14: ffff88800eae4c00 R15: 0000000000000000
FS:  0000000000000000(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
CR2: 00000000004e5420 CR3: 000000001499a000 CR4: 0000000000750ee0
PKRU: 55555554
Call Trace:
 <TASK>
 iommufd_access_destroy_object+0x65/0x170 drivers/iommu/iommufd/device.c:875
 iommufd_object_destroy_user+0x18e/0x220 drivers/iommu/iommufd/main.c:163
 iommufd_access_destroy+0x43/0x70 drivers/iommu/iommufd/device.c:938
 iommufd_test_staccess_release+0x8d/0xd0 drivers/iommu/iommufd/selftest.c:918
 __fput+0x26d/0xa40 fs/file_table.c:321
 ____fput+0x1e/0x30 fs/file_table.c:349
 task_work_run+0x1a4/0x2d0 kernel/task_work.c:179
 exit_task_work include/linux/task_work.h:38 [inline]
 do_exit+0xaf3/0x2f60 kernel/exit.c:874
 do_group_exit+0xe0/0x2b0 kernel/exit.c:1024
 __do_sys_exit_group kernel/exit.c:1035 [inline]
 __se_sys_exit_group kernel/exit.c:1033 [inline]
 __x64_sys_exit_group+0x47/0x50 kernel/exit.c:1033
 do_syscall_x64 arch/x86/entry/common.c:50 [inline]
 do_syscall_64+0x3b/0x90 arch/x86/entry/common.c:80
 entry_SYSCALL_64_after_hwframe+0x72/0xdc
RIP: 0033:0x44de86
Code: Unable to access opcode bytes at 0x44de5c.
RSP: 002b:00007fff8410fbc8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
RAX: ffffffffffffffda RBX: 00000000004e5410 RCX: 000000000044de86
RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffffa8
R10: 0000000000411b40 R11: 0000000000000246 R12: 00000000004e5410
R13: 0000000000000001 R14: 0000000000000000 R15: 0000000000000001
 </TASK>
irq event stamp: 5615
hardirqs last  enabled at (5615): [<ffffffff853a4b3e>] irqentry_exit+0x3e/0xa0 kernel/entry/common.c:436
hardirqs last disabled at (5614): [<ffffffff853e83df>] __do_softirq+0x61f/0x77c kernel/softirq.c:587
softirqs last  enabled at (5126): [<ffffffff853e82b5>] softirq_handle_end kernel/softirq.c:414 [inline]
softirqs last  enabled at (5126): [<ffffffff853e82b5>] __do_softirq+0x4f5/0x77c kernel/softirq.c:600
softirqs last disabled at (5117): [<ffffffff81253215>] invoke_softirq kernel/softirq.c:445 [inline]
softirqs last disabled at (5117): [<ffffffff81253215>] __irq_exit_rcu kernel/softirq.c:650 [inline]
softirqs last disabled at (5117): [<ffffffff81253215>] irq_exit_rcu+0xe5/0x130 kernel/softirq.c:662
---[ end trace 0000000000000000 ]---
------------[ cut here ]------------
WARNING: CPU: 1 PID: 544 at drivers/iommu/iommufd/io_pagetable.c:663 iopt_destroy_table+0x15f/0x1b0 drivers/iommu/iommufd/io_pagetable.c:663
Modules linked in:
CPU: 1 PID: 544 Comm: syz-executor321 Tainted: G    B   W          6.4.0-rc6-5ca8bbe2b782+ #1
Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
RIP: 0010:iopt_destroy_table+0x15f/0x1b0 drivers/iommu/iommufd/io_pagetable.c:663
Code: 5b 41 5c 41 5d 41 5e 5d c3 cc cc cc cc e8 c9 53 0b fe 0f 0b e9 51 ff ff ff e8 bd 53 0b fe 0f 0b e9 76 ff ff ff e8 b1 53 0b fe <0f> 0b eb 9e e8 a8 53 0b fe 0f 0b e8 a1 53 0b fe 5b 41 5c 41 5d 41
RSP: 0018:ffff888013d0fb78 EFLAGS: 00010246
RAX: 0000000000000000 RBX: 0000000000000000 RCX: 0000000000000000
RDX: 0000000000000000 RSI: ffff88800bc72500 RDI: 0000000000000002
RBP: ffff888013d0fb98 R08: ffffed1003109e3e R09: ffffed1003109e3e
R10: ffff88801884f1ef R11: ffffed1003109e3d R12: ffff88801884f290
R13: ffff88801884f0a8 R14: ffffffffffffffff R15: ffff888013d0fc60
FS:  0000000000000000(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
CR2: 00000000004e5420 CR3: 000000001499a000 CR4: 0000000000750ee0
PKRU: 55555554
Call Trace:
 <TASK>
 iommufd_ioas_destroy+0x53/0x70 drivers/iommu/iommufd/ioas.c:19
 iommufd_fops_release+0x1f7/0x370 drivers/iommu/iommufd/main.c:231
 __fput+0x26d/0xa40 fs/file_table.c:321
 ____fput+0x1e/0x30 fs/file_table.c:349
 task_work_run+0x1a4/0x2d0 kernel/task_work.c:179
 exit_task_work include/linux/task_work.h:38 [inline]
 do_exit+0xaf3/0x2f60 kernel/exit.c:874
 do_group_exit+0xe0/0x2b0 kernel/exit.c:1024
 __do_sys_exit_group kernel/exit.c:1035 [inline]
 __se_sys_exit_group kernel/exit.c:1033 [inline]
 __x64_sys_exit_group+0x47/0x50 kernel/exit.c:1033
 do_syscall_x64 arch/x86/entry/common.c:50 [inline]
 do_syscall_64+0x3b/0x90 arch/x86/entry/common.c:80
 entry_SYSCALL_64_after_hwframe+0x72/0xdc
RIP: 0033:0x44de86
Code: Unable to access opcode bytes at 0x44de5c.
RSP: 002b:00007fff8410fbc8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
RAX: ffffffffffffffda RBX: 00000000004e5410 RCX: 000000000044de86
RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffffa8
R10: 0000000000411b40 R11: 0000000000000246 R12: 00000000004e5410
R13: 0000000000000001 R14: 0000000000000000 R15: 0000000000000001
 </TASK>
irq event stamp: 5615
hardirqs last  enabled at (5615): [<ffffffff853a4b3e>] irqentry_exit+0x3e/0xa0 kernel/entry/common.c:436
hardirqs last disabled at (5614): [<ffffffff853e83df>] __do_softirq+0x61f/0x77c kernel/softirq.c:587
softirqs last  enabled at (5126): [<ffffffff853e82b5>] softirq_handle_end kernel/softirq.c:414 [inline]
softirqs last  enabled at (5126): [<ffffffff853e82b5>] __do_softirq+0x4f5/0x77c kernel/softirq.c:600
softirqs last disabled at (5117): [<ffffffff81253215>] invoke_softirq kernel/softirq.c:445 [inline]
softirqs last disabled at (5117): [<ffffffff81253215>] __irq_exit_rcu kernel/softirq.c:650 [inline]
softirqs last disabled at (5117): [<ffffffff81253215>] irq_exit_rcu+0xe5/0x130 kernel/softirq.c:662
---[ end trace 0000000000000000 ]---
------------[ cut here ]------------
WARNING: CPU: 1 PID: 545 at drivers/iommu/iommufd/io_pagetable.c:1158 iopt_remove_access+0xb5/0xd0 drivers/iommu/iommufd/io_pagetable.c:1157
Modules linked in:
CPU: 1 PID: 545 Comm: syz-executor321 Tainted: G    B   W          6.4.0-rc6-5ca8bbe2b782+ #1
Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
RIP: 0010:iopt_remove_access+0xb5/0xd0 drivers/iommu/iommufd/io_pagetable.c:1157
Code: 45 85 e4 75 29 e8 4b 2d 0b fe 4c 89 ef e8 33 eb e8 fd 48 89 df e8 2b eb e8 fd 5b 41 5c 41 5d 5d c3 cc cc cc cc e8 2b 2d 0b fe <0f> 0b eb b9 e8 22 2d 0b fe 0f 0b eb ce e8 b9 1d 67 fe eb 90 0f 1f
RSP: 0018:ffff888011ba7bb8 EFLAGS: 00010246
RAX: 0000000000000000 RBX: ffff888012a5f8a8 RCX: 0000000000000000
RDX: 0000000000000000 RSI: ffff888015194a00 RDI: 0000000000000002
RBP: ffff888011ba7bd0 R08: ffffed100254bf33 R09: ffffed100254bf33
R10: ffff888012a5f993 R11: ffffed100254bf32 R12: ffff888019d3d400
R13: ffff888012a5f9e8 R14: ffffffff835430e0 R15: ffff888011ba7e68
FS:  0000000001a0a3c0(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
CR2: 0000000020000140 CR3: 0000000013c64000 CR4: 0000000000750ee0
PKRU: 55555554
Call Trace:
 <TASK>
 __iommufd_access_detach+0x1c2/0x2b0 drivers/iommu/iommufd/device.c:971
 iommufd_access_change_pt+0x149/0x270 drivers/iommu/iommufd/device.c:1006
 iommufd_access_replace+0xb4/0x120 drivers/iommu/iommufd/device.c:1042
 iommufd_test_access_replace_ioas drivers/iommu/iommufd/selftest.c:1025 [inline]
 iommufd_test+0x103d/0x3f00 drivers/iommu/iommufd/selftest.c:1252
 iommufd_fops_ioctl+0x37d/0x510 drivers/iommu/iommufd/main.c:378
 vfs_ioctl fs/ioctl.c:51 [inline]
 __do_sys_ioctl fs/ioctl.c:870 [inline]
 __se_sys_ioctl fs/ioctl.c:856 [inline]
 __x64_sys_ioctl+0x1a3/0x230 fs/ioctl.c:856
 do_syscall_x64 arch/x86/entry/common.c:50 [inline]
 do_syscall_64+0x3b/0x90 arch/x86/entry/common.c:80
 entry_SYSCALL_64_after_hwframe+0x72/0xdc
RIP: 0033:0x44ff3d
Code: db 48 89 d8 5b 5d 41 5c 41 5d 41 5e c3 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 c7 c1 a8 ff ff ff f7 d8 64 89 01 48
RSP: 002b:00007fff8410fc18 EFLAGS: 00000246 ORIG_RAX: 0000000000000010
RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 000000000044ff3d
RDX: 0000000020000000 RSI: 0000000000003ba0 RDI: 0000000000000003
RBP: 0000000000000001 R08: 0000000000411b40 R09: 0000000000411b40
R10: 0000000000411b40 R11: 0000000000000246 R12: 0000000000000001
R13: 0000000000000000 R14: 00000000004004e8 R15: 0000000000000000
 </TASK>
irq event stamp: 0
hardirqs last  enabled at (0): [<0000000000000000>] 0x0
hardirqs last disabled at (0): [<ffffffff8122d29a>] copy_process+0x256a/0x7650 kernel/fork.c:2448
softirqs last  enabled at (0): [<ffffffff8122d2e2>] copy_process+0x25b2/0x7650 kernel/fork.c:2452
softirqs last disabled at (0): [<0000000000000000>] 0x0
---[ end trace 0000000000000000 ]---
------------[ cut here ]------------
WARNING: CPU: 1 PID: 545 at drivers/iommu/iommufd/io_pagetable.c:1158 iopt_remove_access+0xb5/0xd0 drivers/iommu/iommufd/io_pagetable.c:1157
Modules linked in:
CPU: 1 PID: 545 Comm: syz-executor321 Tainted: G    B   W          6.4.0-rc6-5ca8bbe2b782+ #1
Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
RIP: 0010:iopt_remove_access+0xb5/0xd0 drivers/iommu/iommufd/io_pagetable.c:1157
Code: 45 85 e4 75 29 e8 4b 2d 0b fe 4c 89 ef e8 33 eb e8 fd 48 89 df e8 2b eb e8 fd 5b 41 5c 41 5d 5d c3 cc cc cc cc e8 2b 2d 0b fe <0f> 0b eb b9 e8 22 2d 0b fe 0f 0b eb ce e8 b9 1d 67 fe eb 90 0f 1f
RSP: 0018:ffff888011ba7bd0 EFLAGS: 00010246
RAX: 0000000000000000 RBX: ffff888012a5f8a8 RCX: 0000000000000000
RDX: 0000000000000000 RSI: ffff888015194a00 RDI: 0000000000000002
RBP: ffff888011ba7be8 R08: ffffed100254bf33 R09: ffffed100254bf33
R10: ffff888012a5f993 R11: ffffed100254bf32 R12: ffff88800f8c3800
R13: ffff888012a5f9e8 R14: ffff888019f42400 R15: 0000000000000000
FS:  0000000000000000(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
CR2: 00000000004e5420 CR3: 000000000667e000 CR4: 0000000000750ee0
PKRU: 55555554
Call Trace:
 <TASK>
 iommufd_access_destroy_object+0x65/0x170 drivers/iommu/iommufd/device.c:875
 iommufd_object_destroy_user+0x18e/0x220 drivers/iommu/iommufd/main.c:163
 iommufd_access_destroy+0x43/0x70 drivers/iommu/iommufd/device.c:938
 iommufd_test_staccess_release+0x8d/0xd0 drivers/iommu/iommufd/selftest.c:918
 __fput+0x26d/0xa40 fs/file_table.c:321
 ____fput+0x1e/0x30 fs/file_table.c:349
 task_work_run+0x1a4/0x2d0 kernel/task_work.c:179
 exit_task_work include/linux/task_work.h:38 [inline]
 do_exit+0xaf3/0x2f60 kernel/exit.c:874
 do_group_exit+0xe0/0x2b0 kernel/exit.c:1024
 __do_sys_exit_group kernel/exit.c:1035 [inline]
 __se_sys_exit_group kernel/exit.c:1033 [inline]
 __x64_sys_exit_group+0x47/0x50 kernel/exit.c:1033
 do_syscall_x64 arch/x86/entry/common.c:50 [inline]
 do_syscall_64+0x3b/0x90 arch/x86/entry/common.c:80
 entry_SYSCALL_64_after_hwframe+0x72/0xdc
RIP: 0033:0x44de86
Code: Unable to access opcode bytes at 0x44de5c.
RSP: 002b:00007fff8410fbc8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
RAX: ffffffffffffffda RBX: 00000000004e5410 RCX: 000000000044de86
RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffffa8
R10: 0000000000411b40 R11: 0000000000000246 R12: 00000000004e5410
R13: 0000000000000001 R14: 0000000000000000 R15: 0000000000000001
 </TASK>
irq event stamp: 0
hardirqs last  enabled at (0): [<0000000000000000>] 0x0
hardirqs last disabled at (0): [<ffffffff8122d29a>] copy_process+0x256a/0x7650 kernel/fork.c:2448
softirqs last  enabled at (0): [<ffffffff8122d2e2>] copy_process+0x25b2/0x7650 kernel/fork.c:2452
softirqs last disabled at (0): [<0000000000000000>] 0x0
---[ end trace 0000000000000000 ]---
------------[ cut here ]------------
WARNING: CPU: 1 PID: 545 at drivers/iommu/iommufd/io_pagetable.c:663 iopt_destroy_table+0x15f/0x1b0 drivers/iommu/iommufd/io_pagetable.c:663
Modules linked in:
CPU: 1 PID: 545 Comm: syz-executor321 Tainted: G    B   W          6.4.0-rc6-5ca8bbe2b782+ #1
Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
RIP: 0010:iopt_destroy_table+0x15f/0x1b0 drivers/iommu/iommufd/io_pagetable.c:663
Code: 5b 41 5c 41 5d 41 5e 5d c3 cc cc cc cc e8 c9 53 0b fe 0f 0b e9 51 ff ff ff e8 bd 53 0b fe 0f 0b e9 76 ff ff ff e8 b1 53 0b fe <0f> 0b eb 9e e8 a8 53 0b fe 0f 0b e8 a1 53 0b fe 5b 41 5c 41 5d 41
RSP: 0018:ffff888011ba7b78 EFLAGS: 00010246
RAX: 0000000000000000 RBX: 0000000000000000 RCX: 0000000000000000
RDX: 0000000000000000 RSI: ffff888015194a00 RDI: 0000000000000002
RBP: ffff888011ba7b98 R08: ffffed100254bf3e R09: ffffed100254bf3e
R10: ffff888012a5f9ef R11: ffffed100254bf3d R12: ffff888012a5fa90
R13: ffff888012a5f8a8 R14: ffffffffffffffff R15: ffff888011ba7c60
FS:  0000000000000000(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
CR2: 00000000004e5420 CR3: 000000000667e000 CR4: 0000000000750ee0
PKRU: 55555554
Call Trace:
 <TASK>
 iommufd_ioas_destroy+0x53/0x70 drivers/iommu/iommufd/ioas.c:19
 iommufd_fops_release+0x1f7/0x370 drivers/iommu/iommufd/main.c:231
 __fput+0x26d/0xa40 fs/file_table.c:321
 ____fput+0x1e/0x30 fs/file_table.c:349
 task_work_run+0x1a4/0x2d0 kernel/task_work.c:179
 exit_task_work include/linux/task_work.h:38 [inline]
 do_exit+0xaf3/0x2f60 kernel/exit.c:874
 do_group_exit+0xe0/0x2b0 kernel/exit.c:1024
 __do_sys_exit_group kernel/exit.c:1035 [inline]
 __se_sys_exit_group kernel/exit.c:1033 [inline]
 __x64_sys_exit_group+0x47/0x50 kernel/exit.c:1033
 do_syscall_x64 arch/x86/entry/common.c:50 [inline]
 do_syscall_64+0x3b/0x90 arch/x86/entry/common.c:80
 entry_SYSCALL_64_after_hwframe+0x72/0xdc
RIP: 0033:0x44de86
Code: Unable to access opcode bytes at 0x44de5c.
RSP: 002b:00007fff8410fbc8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
RAX: ffffffffffffffda RBX: 00000000004e5410 RCX: 000000000044de86
RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffffa8
R10: 0000000000411b40 R11: 0000000000000246 R12: 00000000004e5410
R13: 0000000000000001 R14: 0000000000000000 R15: 0000000000000001
 </TASK>
irq event stamp: 0
hardirqs last  enabled at (0): [<0000000000000000>] 0x0
hardirqs last disabled at (0): [<ffffffff8122d29a>] copy_process+0x256a/0x7650 kernel/fork.c:2448
softirqs last  enabled at (0): [<ffffffff8122d2e2>] copy_process+0x25b2/0x7650 kernel/fork.c:2452
softirqs last disabled at (0): [<0000000000000000>] 0x0
---[ end trace 0000000000000000 ]---
------------[ cut here ]------------
WARNING: CPU: 1 PID: 546 at drivers/iommu/iommufd/io_pagetable.c:1158 iopt_remove_access+0xb5/0xd0 drivers/iommu/iommufd/io_pagetable.c:1157
Modules linked in:
CPU: 1 PID: 546 Comm: syz-executor321 Tainted: G    B   W          6.4.0-rc6-5ca8bbe2b782+ #1
Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
RIP: 0010:iopt_remove_access+0xb5/0xd0 drivers/iommu/iommufd/io_pagetable.c:1157
Code: 45 85 e4 75 29 e8 4b 2d 0b fe 4c 89 ef e8 33 eb e8 fd 48 89 df e8 2b eb e8 fd 5b 41 5c 41 5d 5d c3 cc cc cc cc e8 2b 2d 0b fe <0f> 0b eb b9 e8 22 2d 0b fe 0f 0b eb ce e8 b9 1d 67 fe eb 90 0f 1f
RSP: 0018:ffff88800b777bb8 EFLAGS: 00010246
RAX: 0000000000000000 RBX: ffff88800fe3e0a8 RCX: 0000000000000000
RDX: 0000000000000000 RSI: ffff888015190000 RDI: 0000000000000002
RBP: ffff88800b777bd0 R08: ffffed1001fc7c33 R09: ffffed1001fc7c33
R10: ffff88800fe3e193 R11: ffffed1001fc7c32 R12: ffff888011fee800
R13: ffff88800fe3e1e8 R14: ffffffff835430e0 R15: ffff88800b777e68
FS:  0000000001a0a3c0(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
CR2: 0000000020000140 CR3: 000000000acd2000 CR4: 0000000000750ee0
PKRU: 55555554
Call Trace:
 <TASK>
 __iommufd_access_detach+0x1c2/0x2b0 drivers/iommu/iommufd/device.c:971
 iommufd_access_change_pt+0x149/0x270 drivers/iommu/iommufd/device.c:1006
 iommufd_access_replace+0xb4/0x120 drivers/iommu/iommufd/device.c:1042
 iommufd_test_access_replace_ioas drivers/iommu/iommufd/selftest.c:1025 [inline]
 iommufd_test+0x103d/0x3f00 drivers/iommu/iommufd/selftest.c:1252
 iommufd_fops_ioctl+0x37d/0x510 drivers/iommu/iommufd/main.c:378
 vfs_ioctl fs/ioctl.c:51 [inline]
 __do_sys_ioctl fs/ioctl.c:870 [inline]
 __se_sys_ioctl fs/ioctl.c:856 [inline]
 __x64_sys_ioctl+0x1a3/0x230 fs/ioctl.c:856
 do_syscall_x64 arch/x86/entry/common.c:50 [inline]
 do_syscall_64+0x3b/0x90 arch/x86/entry/common.c:80
 entry_SYSCALL_64_after_hwframe+0x72/0xdc
RIP: 0033:0x44ff3d
Code: db 48 89 d8 5b 5d 41 5c 41 5d 41 5e c3 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 c7 c1 a8 ff ff ff f7 d8 64 89 01 48
RSP: 002b:00007fff8410fc18 EFLAGS: 00000246 ORIG_RAX: 0000000000000010
RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 000000000044ff3d
RDX: 0000000020000000 RSI: 0000000000003ba0 RDI: 0000000000000003
RBP: 0000000000000001 R08: 0000000000411b40 R09: 0000000000411b40
R10: 0000000000411b40 R11: 0000000000000246 R12: 0000000000000001
R13: 0000000000000000 R14: 00000000004004e8 R15: 0000000000000000
 </TASK>
irq event stamp: 0
hardirqs last  enabled at (0): [<0000000000000000>] 0x0
hardirqs last disabled at (0): [<ffffffff8122d29a>] copy_process+0x256a/0x7650 kernel/fork.c:2448
softirqs last  enabled at (0): [<ffffffff8122d2e2>] copy_process+0x25b2/0x7650 kernel/fork.c:2452
softirqs last disabled at (0): [<0000000000000000>] 0x0
---[ end trace 0000000000000000 ]---
------------[ cut here ]------------
WARNING: CPU: 1 PID: 546 at drivers/iommu/iommufd/io_pagetable.c:1158 iopt_remove_access+0xb5/0xd0 drivers/iommu/iommufd/io_pagetable.c:1157
Modules linked in:
CPU: 1 PID: 546 Comm: syz-executor321 Tainted: G    B   W          6.4.0-rc6-5ca8bbe2b782+ #1
Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
RIP: 0010:iopt_remove_access+0xb5/0xd0 drivers/iommu/iommufd/io_pagetable.c:1157
Code: 45 85 e4 75 29 e8 4b 2d 0b fe 4c 89 ef e8 33 eb e8 fd 48 89 df e8 2b eb e8 fd 5b 41 5c 41 5d 5d c3 cc cc cc cc e8 2b 2d 0b fe <0f> 0b eb b9 e8 22 2d 0b fe 0f 0b eb ce e8 b9 1d 67 fe eb 90 0f 1f
RSP: 0018:ffff88800b777bd0 EFLAGS: 00010246
RAX: 0000000000000000 RBX: ffff88800fe3e0a8 RCX: 0000000000000000
RDX: 0000000000000000 RSI: ffff888015190000 RDI: 0000000000000002
RBP: ffff88800b777be8 R08: ffffed1001fc7c33 R09: ffffed1001fc7c33
R10: ffff88800fe3e193 R11: ffffed1001fc7c32 R12: ffff888019d3dc00
R13: ffff88800fe3e1e8 R14: ffff8880104aa600 R15: 0000000000000000
FS:  0000000000000000(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
CR2: 00000000004e5420 CR3: 000000000667e000 CR4: 0000000000750ee0
PKRU: 55555554
Call Trace:
 <TASK>
 iommufd_access_destroy_object+0x65/0x170 drivers/iommu/iommufd/device.c:875
 iommufd_object_destroy_user+0x18e/0x220 drivers/iommu/iommufd/main.c:163
 iommufd_access_destroy+0x43/0x70 drivers/iommu/iommufd/device.c:938
 iommufd_test_staccess_release+0x8d/0xd0 drivers/iommu/iommufd/selftest.c:918
 __fput+0x26d/0xa40 fs/file_table.c:321
 ____fput+0x1e/0x30 fs/file_table.c:349
 task_work_run+0x1a4/0x2d0 kernel/task_work.c:179
 exit_task_work include/linux/task_work.h:38 [inline]
 do_exit+0xaf3/0x2f60 kernel/exit.c:874
 do_group_exit+0xe0/0x2b0 kernel/exit.c:1024
 __do_sys_exit_group kernel/exit.c:1035 [inline]
 __se_sys_exit_group kernel/exit.c:1033 [inline]
 __x64_sys_exit_group+0x47/0x50 kernel/exit.c:1033
 do_syscall_x64 arch/x86/entry/common.c:50 [inline]
 do_syscall_64+0x3b/0x90 arch/x86/entry/common.c:80
 entry_SYSCALL_64_after_hwframe+0x72/0xdc
RIP: 0033:0x44de86
Code: Unable to access opcode bytes at 0x44de5c.
RSP: 002b:00007fff8410fbc8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
RAX: ffffffffffffffda RBX: 00000000004e5410 RCX: 000000000044de86
RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffffa8
R10: 0000000000411b40 R11: 0000000000000246 R12: 00000000004e5410
R13: 0000000000000001 R14: 0000000000000000 R15: 0000000000000001
 </TASK>
irq event stamp: 0
hardirqs last  enabled at (0): [<0000000000000000>] 0x0
hardirqs last disabled at (0): [<ffffffff8122d29a>] copy_process+0x256a/0x7650 kernel/fork.c:2448
softirqs last  enabled at (0): [<ffffffff8122d2e2>] copy_process+0x25b2/0x7650 kernel/fork.c:2452
softirqs last disabled at (0): [<0000000000000000>] 0x0
---[ end trace 0000000000000000 ]---
------------[ cut here ]------------
WARNING: CPU: 1 PID: 546 at drivers/iommu/iommufd/io_pagetable.c:663 iopt_destroy_table+0x15f/0x1b0 drivers/iommu/iommufd/io_pagetable.c:663
Modules linked in:
CPU: 1 PID: 546 Comm: syz-executor321 Tainted: G    B   W          6.4.0-rc6-5ca8bbe2b782+ #1
Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
RIP: 0010:iopt_destroy_table+0x15f/0x1b0 drivers/iommu/iommufd/io_pagetable.c:663
Code: 5b 41 5c 41 5d 41 5e 5d c3 cc cc cc cc e8 c9 53 0b fe 0f 0b e9 51 ff ff ff e8 bd 53 0b fe 0f 0b e9 76 ff ff ff e8 b1 53 0b fe <0f> 0b eb 9e e8 a8 53 0b fe 0f 0b e8 a1 53 0b fe 5b 41 5c 41 5d 41
RSP: 0018:ffff88800b777b78 EFLAGS: 00010246
RAX: 0000000000000000 RBX: 0000000000000000 RCX: 0000000000000000
RDX: 0000000000000000 RSI: ffff888015190000 RDI: 0000000000000002
RBP: ffff88800b777b98 R08: ffffed1001fc7c3e R09: ffffed1001fc7c3e
R10: ffff88800fe3e1ef R11: ffffed1001fc7c3d R12: ffff88800fe3e290
R13: ffff88800fe3e0a8 R14: ffffffffffffffff R15: ffff88800b777c60
FS:  0000000000000000(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
CR2: 00000000004e5420 CR3: 000000000667e000 CR4: 0000000000750ee0
PKRU: 55555554
Call Trace:
 <TASK>
 iommufd_ioas_destroy+0x53/0x70 drivers/iommu/iommufd/ioas.c:19
 iommufd_fops_release+0x1f7/0x370 drivers/iommu/iommufd/main.c:231
 __fput+0x26d/0xa40 fs/file_table.c:321
 ____fput+0x1e/0x30 fs/file_table.c:349
 task_work_run+0x1a4/0x2d0 kernel/task_work.c:179
 exit_task_work include/linux/task_work.h:38 [inline]
 do_exit+0xaf3/0x2f60 kernel/exit.c:874
 do_group_exit+0xe0/0x2b0 kernel/exit.c:1024
 __do_sys_exit_group kernel/exit.c:1035 [inline]
 __se_sys_exit_group kernel/exit.c:1033 [inline]
 __x64_sys_exit_group+0x47/0x50 kernel/exit.c:1033
 do_syscall_x64 arch/x86/entry/common.c:50 [inline]
 do_syscall_64+0x3b/0x90 arch/x86/entry/common.c:80
 entry_SYSCALL_64_after_hwframe+0x72/0xdc
RIP: 0033:0x44de86
Code: Unable to access opcode bytes at 0x44de5c.
RSP: 002b:00007fff8410fbc8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
RAX: ffffffffffffffda RBX: 00000000004e5410 RCX: 000000000044de86
RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffffa8
R10: 0000000000411b40 R11: 0000000000000246 R12: 00000000004e5410
R13: 0000000000000001 R14: 0000000000000000 R15: 0000000000000001
 </TASK>
irq event stamp: 0
hardirqs last  enabled at (0): [<0000000000000000>] 0x0
hardirqs last disabled at (0): [<ffffffff8122d29a>] copy_process+0x256a/0x7650 kernel/fork.c:2448
softirqs last  enabled at (0): [<ffffffff8122d2e2>] copy_process+0x25b2/0x7650 kernel/fork.c:2452
softirqs last disabled at (0): [<0000000000000000>] 0x0
---[ end trace 0000000000000000 ]---
------------[ cut here ]------------
WARNING: CPU: 1 PID: 547 at drivers/iommu/iommufd/io_pagetable.c:1158 iopt_remove_access+0xb5/0xd0 drivers/iommu/iommufd/io_pagetable.c:1157
Modules linked in:
CPU: 1 PID: 547 Comm: syz-executor321 Tainted: G    B   W          6.4.0-rc6-5ca8bbe2b782+ #1
Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
RIP: 0010:iopt_remove_access+0xb5/0xd0 drivers/iommu/iommufd/io_pagetable.c:1157
Code: 45 85 e4 75 29 e8 4b 2d 0b fe 4c 89 ef e8 33 eb e8 fd 48 89 df e8 2b eb e8 fd 5b 41 5c 41 5d 5d c3 cc cc cc cc e8 2b 2d 0b fe <0f> 0b eb b9 e8 22 2d 0b fe 0f 0b eb ce e8 b9 1d 67 fe eb 90 0f 1f
RSP: 0018:ffff888011ba7bb8 EFLAGS: 00010246
RAX: 0000000000000000 RBX: ffff8880148040a8 RCX: 0000000000000000
RDX: 0000000000000000 RSI: ffff88800b7f0000 RDI: 0000000000000002
RBP: ffff888011ba7bd0 R08: ffffed1002900833 R09: ffffed1002900833
R10: ffff888014804193 R11: ffffed1002900832 R12: ffff888019d64000
R13: ffff8880148041e8 R14: ffffffff835430e0 R15: ffff888011ba7e68
FS:  0000000001a0a3c0(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
CR2: 0000000020000140 CR3: 000000000acd2000 CR4: 0000000000750ee0
PKRU: 55555554
Call Trace:
 <TASK>
 __iommufd_access_detach+0x1c2/0x2b0 drivers/iommu/iommufd/device.c:971
 iommufd_access_change_pt+0x149/0x270 drivers/iommu/iommufd/device.c:1006
 iommufd_access_replace+0xb4/0x120 drivers/iommu/iommufd/device.c:1042
 iommufd_test_access_replace_ioas drivers/iommu/iommufd/selftest.c:1025 [inline]
 iommufd_test+0x103d/0x3f00 drivers/iommu/iommufd/selftest.c:1252
 iommufd_fops_ioctl+0x37d/0x510 drivers/iommu/iommufd/main.c:378
 vfs_ioctl fs/ioctl.c:51 [inline]
 __do_sys_ioctl fs/ioctl.c:870 [inline]
 __se_sys_ioctl fs/ioctl.c:856 [inline]
 __x64_sys_ioctl+0x1a3/0x230 fs/ioctl.c:856
 do_syscall_x64 arch/x86/entry/common.c:50 [inline]
 do_syscall_64+0x3b/0x90 arch/x86/entry/common.c:80
 entry_SYSCALL_64_after_hwframe+0x72/0xdc
RIP: 0033:0x44ff3d
Code: db 48 89 d8 5b 5d 41 5c 41 5d 41 5e c3 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 c7 c1 a8 ff ff ff f7 d8 64 89 01 48
RSP: 002b:00007fff8410fc18 EFLAGS: 00000246 ORIG_RAX: 0000000000000010
RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 000000000044ff3d
RDX: 0000000020000000 RSI: 0000000000003ba0 RDI: 0000000000000003
RBP: 0000000000000001 R08: 0000000000411b40 R09: 0000000000411b40
R10: 0000000000411b40 R11: 0000000000000246 R12: 0000000000000001
R13: 0000000000000000 R14: 00000000004004e8 R15: 0000000000000000
 </TASK>
irq event stamp: 0
hardirqs last  enabled at (0): [<0000000000000000>] 0x0
hardirqs last disabled at (0): [<ffffffff8122d29a>] copy_process+0x256a/0x7650 kernel/fork.c:2448
softirqs last  enabled at (0): [<ffffffff8122d2e2>] copy_process+0x25b2/0x7650 kernel/fork.c:2452
softirqs last disabled at (0): [<0000000000000000>] 0x0
---[ end trace 0000000000000000 ]---
------------[ cut here ]------------
WARNING: CPU: 1 PID: 547 at drivers/iommu/iommufd/io_pagetable.c:1158 iopt_remove_access+0xb5/0xd0 drivers/iommu/iommufd/io_pagetable.c:1157
Modules linked in:
CPU: 1 PID: 547 Comm: syz-executor321 Tainted: G    B   W          6.4.0-rc6-5ca8bbe2b782+ #1
Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
RIP: 0010:iopt_remove_access+0xb5/0xd0 drivers/iommu/iommufd/io_pagetable.c:1157
Code: 45 85 e4 75 29 e8 4b 2d 0b fe 4c 89 ef e8 33 eb e8 fd 48 89 df e8 2b eb e8 fd 5b 41 5c 41 5d 5d c3 cc cc cc cc e8 2b 2d 0b fe <0f> 0b eb b9 e8 22 2d 0b fe 0f 0b eb ce e8 b9 1d 67 fe eb 90 0f 1f
RSP: 0018:ffff888011ba7bd0 EFLAGS: 00010246
RAX: 0000000000000000 RBX: ffff8880148040a8 RCX: 0000000000000000
RDX: 0000000000000000 RSI: ffff88800b7f0000 RDI: 0000000000000002
RBP: ffff888011ba7be8 R08: ffffed1002900833 R09: ffffed1002900833
R10: ffff888014804193 R11: ffffed1002900832 R12: ffff888011fef800
R13: ffff8880148041e8 R14: ffff88801263b500 R15: 0000000000000000
FS:  0000000000000000(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
CR2: 00000000004e5420 CR3: 000000000667e000 CR4: 0000000000750ee0
PKRU: 55555554
Call Trace:
 <TASK>
 iommufd_access_destroy_object+0x65/0x170 drivers/iommu/iommufd/device.c:875
 iommufd_object_destroy_user+0x18e/0x220 drivers/iommu/iommufd/main.c:163
 iommufd_access_destroy+0x43/0x70 drivers/iommu/iommufd/device.c:938
 iommufd_test_staccess_release+0x8d/0xd0 drivers/iommu/iommufd/selftest.c:918
 __fput+0x26d/0xa40 fs/file_table.c:321
 ____fput+0x1e/0x30 fs/file_table.c:349
 task_work_run+0x1a4/0x2d0 kernel/task_work.c:179
 exit_task_work include/linux/task_work.h:38 [inline]
 do_exit+0xaf3/0x2f60 kernel/exit.c:874
 do_group_exit+0xe0/0x2b0 kernel/exit.c:1024
 __do_sys_exit_group kernel/exit.c:1035 [inline]
 __se_sys_exit_group kernel/exit.c:1033 [inline]
 __x64_sys_exit_group+0x47/0x50 kernel/exit.c:1033
 do_syscall_x64 arch/x86/entry/common.c:50 [inline]
 do_syscall_64+0x3b/0x90 arch/x86/entry/common.c:80
 entry_SYSCALL_64_after_hwframe+0x72/0xdc
RIP: 0033:0x44de86
Code: Unable to access opcode bytes at 0x44de5c.
RSP: 002b:00007fff8410fbc8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
RAX: ffffffffffffffda RBX: 00000000004e5410 RCX: 000000000044de86
RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffffa8
R10: 0000000000411b40 R11: 0000000000000246 R12: 00000000004e5410
R13: 0000000000000001 R14: 0000000000000000 R15: 0000000000000001
 </TASK>
irq event stamp: 0
hardirqs last  enabled at (0): [<0000000000000000>] 0x0
hardirqs last disabled at (0): [<ffffffff8122d29a>] copy_process+0x256a/0x7650 kernel/fork.c:2448
softirqs last  enabled at (0): [<ffffffff8122d2e2>] copy_process+0x25b2/0x7650 kernel/fork.c:2452
softirqs last disabled at (0): [<0000000000000000>] 0x0
---[ end trace 0000000000000000 ]---
------------[ cut here ]------------
WARNING: CPU: 1 PID: 547 at drivers/iommu/iommufd/io_pagetable.c:663 iopt_destroy_table+0x15f/0x1b0 drivers/iommu/iommufd/io_pagetable.c:663
Modules linked in:
CPU: 1 PID: 547 Comm: syz-executor321 Tainted: G    B   W          6.4.0-rc6-5ca8bbe2b782+ #1
Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
RIP: 0010:iopt_destroy_table+0x15f/0x1b0 drivers/iommu/iommufd/io_pagetable.c:663
Code: 5b 41 5c 41 5d 41 5e 5d c3 cc cc cc cc e8 c9 53 0b fe 0f 0b e9 51 ff ff ff e8 bd 53 0b fe 0f 0b e9 76 ff ff ff e8 b1 53 0b fe <0f> 0b eb 9e e8 a8 53 0b fe 0f 0b e8 a1 53 0b fe 5b 41 5c 41 5d 41
RSP: 0018:ffff888011ba7b78 EFLAGS: 00010246
RAX: 0000000000000000 RBX: 0000000000000000 RCX: 0000000000000000
RDX: 0000000000000000 RSI: ffff88800b7f0000 RDI: 0000000000000002
RBP: ffff888011ba7b98 R08: ffffed100290083e R09: ffffed100290083e
R10: ffff8880148041ef R11: ffffed100290083d R12: ffff888014804290
R13: ffff8880148040a8 R14: ffffffffffffffff R15: ffff888011ba7c60
FS:  0000000000000000(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
CR2: 00000000004e5420 CR3: 000000000667e000 CR4: 0000000000750ee0
PKRU: 55555554
Call Trace:
 <TASK>
 iommufd_ioas_destroy+0x53/0x70 drivers/iommu/iommufd/ioas.c:19
 iommufd_fops_release+0x1f7/0x370 drivers/iommu/iommufd/main.c:231
 __fput+0x26d/0xa40 fs/file_table.c:321
 ____fput+0x1e/0x30 fs/file_table.c:349
 task_work_run+0x1a4/0x2d0 kernel/task_work.c:179
 exit_task_work include/linux/task_work.h:38 [inline]
 do_exit+0xaf3/0x2f60 kernel/exit.c:874
 do_group_exit+0xe0/0x2b0 kernel/exit.c:1024
 __do_sys_exit_group kernel/exit.c:1035 [inline]
 __se_sys_exit_group kernel/exit.c:1033 [inline]
 __x64_sys_exit_group+0x47/0x50 kernel/exit.c:1033
 do_syscall_x64 arch/x86/entry/common.c:50 [inline]
 do_syscall_64+0x3b/0x90 arch/x86/entry/common.c:80
 entry_SYSCALL_64_after_hwframe+0x72/0xdc
RIP: 0033:0x44de86
Code: Unable to access opcode bytes at 0x44de5c.
RSP: 002b:00007fff8410fbc8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
RAX: ffffffffffffffda RBX: 00000000004e5410 RCX: 000000000044de86
RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffffa8
R10: 0000000000411b40 R11: 0000000000000246 R12: 00000000004e5410
R13: 0000000000000001 R14: 0000000000000000 R15: 0000000000000001
 </TASK>
irq event stamp: 0
hardirqs last  enabled at (0): [<0000000000000000>] 0x0
hardirqs last disabled at (0): [<ffffffff8122d29a>] copy_process+0x256a/0x7650 kernel/fork.c:2448
softirqs last  enabled at (0): [<ffffffff8122d2e2>] copy_process+0x25b2/0x7650 kernel/fork.c:2452
softirqs last disabled at (0): [<0000000000000000>] 0x0
---[ end trace 0000000000000000 ]---
------------[ cut here ]------------
WARNING: CPU: 0 PID: 548 at drivers/iommu/iommufd/io_pagetable.c:1158 iopt_remove_access+0xb5/0xd0 drivers/iommu/iommufd/io_pagetable.c:1157
Modules linked in:
CPU: 0 PID: 548 Comm: syz-executor321 Tainted: G    B   W          6.4.0-rc6-5ca8bbe2b782+ #1
Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
RIP: 0010:iopt_remove_access+0xb5/0xd0 drivers/iommu/iommufd/io_pagetable.c:1157
Code: 45 85 e4 75 29 e8 4b 2d 0b fe 4c 89 ef e8 33 eb e8 fd 48 89 df e8 2b eb e8 fd 5b 41 5c 41 5d 5d c3 cc cc cc cc e8 2b 2d 0b fe <0f> 0b eb b9 e8 22 2d 0b fe 0f 0b eb ce e8 b9 1d 67 fe eb 90 0f 1f
RSP: 0018:ffff8880104bfbb8 EFLAGS: 00010246
RAX: 0000000000000000 RBX: ffff88800fe980a8 RCX: 0000000000000000
RDX: 0000000000000000 RSI: ffff888015192500 RDI: 0000000000000002
RBP: ffff8880104bfbd0 R08: ffffed1001fd3033 R09: ffffed1001fd3033
R10: ffff88800fe98193 R11: ffffed1001fd3032 R12: ffff888019d27400
R13: ffff88800fe981e8 R14: ffffffff835430e0 R15: ffff8880104bfe68
FS:  0000000001a0a3c0(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
CR2: 0000000020000140 CR3: 0000000013fd2000 CR4: 0000000000750ef0
PKRU: 55555554
Call Trace:
 <TASK>
 __iommufd_access_detach+0x1c2/0x2b0 drivers/iommu/iommufd/device.c:971
 iommufd_access_change_pt+0x149/0x270 drivers/iommu/iommufd/device.c:1006
 iommufd_access_replace+0xb4/0x120 drivers/iommu/iommufd/device.c:1042
 iommufd_test_access_replace_ioas drivers/iommu/iommufd/selftest.c:1025 [inline]
 iommufd_test+0x103d/0x3f00 drivers/iommu/iommufd/selftest.c:1252
 iommufd_fops_ioctl+0x37d/0x510 drivers/iommu/iommufd/main.c:378
 vfs_ioctl fs/ioctl.c:51 [inline]
 __do_sys_ioctl fs/ioctl.c:870 [inline]
 __se_sys_ioctl fs/ioctl.c:856 [inline]
 __x64_sys_ioctl+0x1a3/0x230 fs/ioctl.c:856
 do_syscall_x64 arch/x86/entry/common.c:50 [inline]
 do_syscall_64+0x3b/0x90 arch/x86/entry/common.c:80
 entry_SYSCALL_64_after_hwframe+0x72/0xdc
RIP: 0033:0x44ff3d
Code: db 48 89 d8 5b 5d 41 5c 41 5d 41 5e c3 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 c7 c1 a8 ff ff ff f7 d8 64 89 01 48
RSP: 002b:00007fff8410fc18 EFLAGS: 00000246 ORIG_RAX: 0000000000000010
RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 000000000044ff3d
RDX: 0000000020000000 RSI: 0000000000003ba0 RDI: 0000000000000003
RBP: 0000000000000001 R08: 0000000000411b40 R09: 0000000000411b40
R10: 0000000000411b40 R11: 0000000000000246 R12: 0000000000000001
R13: 0000000000000000 R14: 00000000004004e8 R15: 0000000000000000
 </TASK>
irq event stamp: 0
hardirqs last  enabled at (0): [<0000000000000000>] 0x0
hardirqs last disabled at (0): [<ffffffff8122d29a>] copy_process+0x256a/0x7650 kernel/fork.c:2448
softirqs last  enabled at (0): [<ffffffff8122d2e2>] copy_process+0x25b2/0x7650 kernel/fork.c:2452
softirqs last disabled at (0): [<0000000000000000>] 0x0
---[ end trace 0000000000000000 ]---
------------[ cut here ]------------
WARNING: CPU: 0 PID: 548 at drivers/iommu/iommufd/io_pagetable.c:1158 iopt_remove_access+0xb5/0xd0 drivers/iommu/iommufd/io_pagetable.c:1157
Modules linked in:
CPU: 0 PID: 548 Comm: syz-executor321 Tainted: G    B   W          6.4.0-rc6-5ca8bbe2b782+ #1
Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
RIP: 0010:iopt_remove_access+0xb5/0xd0 drivers/iommu/iommufd/io_pagetable.c:1157
Code: 45 85 e4 75 29 e8 4b 2d 0b fe 4c 89 ef e8 33 eb e8 fd 48 89 df e8 2b eb e8 fd 5b 41 5c 41 5d 5d c3 cc cc cc cc e8 2b 2d 0b fe <0f> 0b eb b9 e8 22 2d 0b fe 0f 0b eb ce e8 b9 1d 67 fe eb 90 0f 1f
RSP: 0018:ffff8880104bfbd0 EFLAGS: 00010246
RAX: 0000000000000000 RBX: ffff88800fe980a8 RCX: 0000000000000000
RDX: 0000000000000000 RSI: ffff888015192500 RDI: 0000000000000002
RBP: ffff8880104bfbe8 R08: ffffed1001fd3033 R09: ffffed1001fd3033
R10: ffff88800fe98193 R11: ffffed1001fd3032 R12: ffff888019ddb400
R13: ffff88800fe981e8 R14: ffff888012476200 R15: 0000000000000000
FS:  0000000000000000(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
CR2: 00000000004e5420 CR3: 000000000667e000 CR4: 0000000000750ef0
PKRU: 55555554
Call Trace:
 <TASK>
 iommufd_access_destroy_object+0x65/0x170 drivers/iommu/iommufd/device.c:875
 iommufd_object_destroy_user+0x18e/0x220 drivers/iommu/iommufd/main.c:163
 iommufd_access_destroy+0x43/0x70 drivers/iommu/iommufd/device.c:938
 iommufd_test_staccess_release+0x8d/0xd0 drivers/iommu/iommufd/selftest.c:918
 __fput+0x26d/0xa40 fs/file_table.c:321
 ____fput+0x1e/0x30 fs/file_table.c:349
 task_work_run+0x1a4/0x2d0 kernel/task_work.c:179
 exit_task_work include/linux/task_work.h:38 [inline]
 do_exit+0xaf3/0x2f60 kernel/exit.c:874
 do_group_exit+0xe0/0x2b0 kernel/exit.c:1024
 __do_sys_exit_group kernel/exit.c:1035 [inline]
 __se_sys_exit_group kernel/exit.c:1033 [inline]
 __x64_sys_exit_group+0x47/0x50 kernel/exit.c:1033
 do_syscall_x64 arch/x86/entry/common.c:50 [inline]
 do_syscall_64+0x3b/0x90 arch/x86/entry/common.c:80
 entry_SYSCALL_64_after_hwframe+0x72/0xdc
RIP: 0033:0x44de86
Code: Unable to access opcode bytes at 0x44de5c.
RSP: 002b:00007fff8410fbc8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
RAX: ffffffffffffffda RBX: 00000000004e5410 RCX: 000000000044de86
RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffffa8
R10: 0000000000411b40 R11: 0000000000000246 R12: 00000000004e5410
R13: 0000000000000001 R14: 0000000000000000 R15: 0000000000000001
 </TASK>
irq event stamp: 0
hardirqs last  enabled at (0): [<0000000000000000>] 0x0
hardirqs last disabled at (0): [<ffffffff8122d29a>] copy_process+0x256a/0x7650 kernel/fork.c:2448
softirqs last  enabled at (0): [<ffffffff8122d2e2>] copy_process+0x25b2/0x7650 kernel/fork.c:2452
softirqs last disabled at (0): [<0000000000000000>] 0x0
---[ end trace 0000000000000000 ]---
------------[ cut here ]------------
WARNING: CPU: 0 PID: 548 at drivers/iommu/iommufd/io_pagetable.c:663 iopt_destroy_table+0x15f/0x1b0 drivers/iommu/iommufd/io_pagetable.c:663
Modules linked in:
CPU: 0 PID: 548 Comm: syz-executor321 Tainted: G    B   W          6.4.0-rc6-5ca8bbe2b782+ #1
Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
RIP: 0010:iopt_destroy_table+0x15f/0x1b0 drivers/iommu/iommufd/io_pagetable.c:663
Code: 5b 41 5c 41 5d 41 5e 5d c3 cc cc cc cc e8 c9 53 0b fe 0f 0b e9 51 ff ff ff e8 bd 53 0b fe 0f 0b e9 76 ff ff ff e8 b1 53 0b fe <0f> 0b eb 9e e8 a8 53 0b fe 0f 0b e8 a1 53 0b fe 5b 41 5c 41 5d 41
RSP: 0018:ffff8880104bfb78 EFLAGS: 00010246
RAX: 0000000000000000 RBX: 0000000000000000 RCX: 0000000000000000
RDX: 0000000000000000 RSI: ffff888015192500 RDI: 0000000000000002
RBP: ffff8880104bfb98 R08: ffffed1001fd303e R09: ffffed1001fd303e
R10: ffff88800fe981ef R11: ffffed1001fd303d R12: ffff88800fe98290
R13: ffff88800fe980a8 R14: ffffffffffffffff R15: ffff8880104bfc60
FS:  0000000000000000(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
CR2: 00000000004e5420 CR3: 000000000667e000 CR4: 0000000000750ef0
PKRU: 55555554
Call Trace:
 <TASK>
 iommufd_ioas_destroy+0x53/0x70 drivers/iommu/iommufd/ioas.c:19
 iommufd_fops_release+0x1f7/0x370 drivers/iommu/iommufd/main.c:231
 __fput+0x26d/0xa40 fs/file_table.c:321
 ____fput+0x1e/0x30 fs/file_table.c:349
 task_work_run+0x1a4/0x2d0 kernel/task_work.c:179
 exit_task_work include/linux/task_work.h:38 [inline]
 do_exit+0xaf3/0x2f60 kernel/exit.c:874
 do_group_exit+0xe0/0x2b0 kernel/exit.c:1024
 __do_sys_exit_group kernel/exit.c:1035 [inline]
 __se_sys_exit_group kernel/exit.c:1033 [inline]
 __x64_sys_exit_group+0x47/0x50 kernel/exit.c:1033
 do_syscall_x64 arch/x86/entry/common.c:50 [inline]
 do_syscall_64+0x3b/0x90 arch/x86/entry/common.c:80
 entry_SYSCALL_64_after_hwframe+0x72/0xdc
RIP: 0033:0x44de86
Code: Unable to access opcode bytes at 0x44de5c.
RSP: 002b:00007fff8410fbc8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
RAX: ffffffffffffffda RBX: 00000000004e5410 RCX: 000000000044de86
RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffffa8
R10: 0000000000411b40 R11: 0000000000000246 R12: 00000000004e5410
R13: 0000000000000001 R14: 0000000000000000 R15: 0000000000000001
 </TASK>
irq event stamp: 0
hardirqs last  enabled at (0): [<0000000000000000>] 0x0
hardirqs last disabled at (0): [<ffffffff8122d29a>] copy_process+0x256a/0x7650 kernel/fork.c:2448
softirqs last  enabled at (0): [<ffffffff8122d2e2>] copy_process+0x25b2/0x7650 kernel/fork.c:2452
softirqs last disabled at (0): [<0000000000000000>] 0x0
---[ end trace 0000000000000000 ]---
------------[ cut here ]------------
WARNING: CPU: 0 PID: 549 at drivers/iommu/iommufd/io_pagetable.c:1158 iopt_remove_access+0xb5/0xd0 drivers/iommu/iommufd/io_pagetable.c:1157
Modules linked in:
CPU: 0 PID: 549 Comm: syz-executor321 Tainted: G    B   W          6.4.0-rc6-5ca8bbe2b782+ #1
Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
RIP: 0010:iopt_remove_access+0xb5/0xd0 drivers/iommu/iommufd/io_pagetable.c:1157
Code: 45 85 e4 75 29 e8 4b 2d 0b fe 4c 89 ef e8 33 eb e8 fd 48 89 df e8 2b eb e8 fd 5b 41 5c 41 5d 5d c3 cc cc cc cc e8 2b 2d 0b fe <0f> 0b eb b9 e8 22 2d 0b fe 0f 0b eb ce e8 b9 1d 67 fe eb 90 0f 1f
RSP: 0018:ffff88801650fbb8 EFLAGS: 00010246
RAX: 0000000000000000 RBX: ffff88801149c8a8 RCX: 0000000000000000
RDX: 0000000000000000 RSI: ffff88800b7f4a00 RDI: 0000000000000002
RBP: ffff88801650fbd0 R08: ffffed1002293933 R09: ffffed1002293933
R10: ffff88801149c993 R11: ffffed1002293932 R12: ffff8880167f9000
R13: ffff88801149c9e8 R14: ffffffff835430e0 R15: ffff88801650fe68
FS:  0000000001a0a3c0(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
CR2: 0000000020000140 CR3: 00000000148d8000 CR4: 0000000000750ef0
PKRU: 55555554
Call Trace:
 <TASK>
 __iommufd_access_detach+0x1c2/0x2b0 drivers/iommu/iommufd/device.c:971
 iommufd_access_change_pt+0x149/0x270 drivers/iommu/iommufd/device.c:1006
 iommufd_access_replace+0xb4/0x120 drivers/iommu/iommufd/device.c:1042
 iommufd_test_access_replace_ioas drivers/iommu/iommufd/selftest.c:1025 [inline]
 iommufd_test+0x103d/0x3f00 drivers/iommu/iommufd/selftest.c:1252
 iommufd_fops_ioctl+0x37d/0x510 drivers/iommu/iommufd/main.c:378
 vfs_ioctl fs/ioctl.c:51 [inline]
 __do_sys_ioctl fs/ioctl.c:870 [inline]
 __se_sys_ioctl fs/ioctl.c:856 [inline]
 __x64_sys_ioctl+0x1a3/0x230 fs/ioctl.c:856
 do_syscall_x64 arch/x86/entry/common.c:50 [inline]
 do_syscall_64+0x3b/0x90 arch/x86/entry/common.c:80
 entry_SYSCALL_64_after_hwframe+0x72/0xdc
RIP: 0033:0x44ff3d
Code: db 48 89 d8 5b 5d 41 5c 41 5d 41 5e c3 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 c7 c1 a8 ff ff ff f7 d8 64 89 01 48
RSP: 002b:00007fff8410fc18 EFLAGS: 00000246 ORIG_RAX: 0000000000000010
RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 000000000044ff3d
RDX: 0000000020000000 RSI: 0000000000003ba0 RDI: 0000000000000003
RBP: 0000000000000001 R08: 0000000000411b40 R09: 0000000000411b40
R10: 0000000000411b40 R11: 0000000000000246 R12: 0000000000000001
R13: 0000000000000000 R14: 00000000004004e8 R15: 0000000000000000
 </TASK>
irq event stamp: 0
hardirqs last  enabled at (0): [<0000000000000000>] 0x0
hardirqs last disabled at (0): [<ffffffff8122d29a>] copy_process+0x256a/0x7650 kernel/fork.c:2448
softirqs last  enabled at (0): [<ffffffff8122d2e2>] copy_process+0x25b2/0x7650 kernel/fork.c:2452
softirqs last disabled at (0): [<0000000000000000>] 0x0
---[ end trace 0000000000000000 ]---
------------[ cut here ]------------
WARNING: CPU: 0 PID: 549 at drivers/iommu/iommufd/io_pagetable.c:1158 iopt_remove_access+0xb5/0xd0 drivers/iommu/iommufd/io_pagetable.c:1157
Modules linked in:
CPU: 0 PID: 549 Comm: syz-executor321 Tainted: G    B   W          6.4.0-rc6-5ca8bbe2b782+ #1
Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
RIP: 0010:iopt_remove_access+0xb5/0xd0 drivers/iommu/iommufd/io_pagetable.c:1157
Code: 45 85 e4 75 29 e8 4b 2d 0b fe 4c 89 ef e8 33 eb e8 fd 48 89 df e8 2b eb e8 fd 5b 41 5c 41 5d 5d c3 cc cc cc cc e8 2b 2d 0b fe <0f> 0b eb b9 e8 22 2d 0b fe 0f 0b eb ce e8 b9 1d 67 fe eb 90 0f 1f
RSP: 0018:ffff88801650fbd0 EFLAGS: 00010246
RAX: 0000000000000000 RBX: ffff88801149c8a8 RCX: 0000000000000000
RDX: 0000000000000000 RSI: ffff88800b7f4a00 RDI: 0000000000000002
RBP: ffff88801650fbe8 R08: ffffed1002293933 R09: ffffed1002293933
R10: ffff88801149c993 R11: ffffed1002293932 R12: ffff888019d27000
R13: ffff88801149c9e8 R14: ffff888012671000 R15: 0000000000000000
FS:  0000000000000000(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
CR2: 00000000004e5420 CR3: 000000000667e000 CR4: 0000000000750ef0
PKRU: 55555554
Call Trace:
 <TASK>
 iommufd_access_destroy_object+0x65/0x170 drivers/iommu/iommufd/device.c:875
 iommufd_object_destroy_user+0x18e/0x220 drivers/iommu/iommufd/main.c:163
 iommufd_access_destroy+0x43/0x70 drivers/iommu/iommufd/device.c:938
 iommufd_test_staccess_release+0x8d/0xd0 drivers/iommu/iommufd/selftest.c:918
 __fput+0x26d/0xa40 fs/file_table.c:321
 ____fput+0x1e/0x30 fs/file_table.c:349
 task_work_run+0x1a4/0x2d0 kernel/task_work.c:179
 exit_task_work include/linux/task_work.h:38 [inline]
 do_exit+0xaf3/0x2f60 kernel/exit.c:874
 do_group_exit+0xe0/0x2b0 kernel/exit.c:1024
 __do_sys_exit_group kernel/exit.c:1035 [inline]
 __se_sys_exit_group kernel/exit.c:1033 [inline]
 __x64_sys_exit_group+0x47/0x50 kernel/exit.c:1033
 do_syscall_x64 arch/x86/entry/common.c:50 [inline]
 do_syscall_64+0x3b/0x90 arch/x86/entry/common.c:80
 entry_SYSCALL_64_after_hwframe+0x72/0xdc
RIP: 0033:0x44de86
Code: Unable to access opcode bytes at 0x44de5c.
RSP: 002b:00007fff8410fbc8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
RAX: ffffffffffffffda RBX: 00000000004e5410 RCX: 000000000044de86
RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffffa8
R10: 0000000000411b40 R11: 0000000000000246 R12: 00000000004e5410
R13: 0000000000000001 R14: 0000000000000000 R15: 0000000000000001
 </TASK>
irq event stamp: 0
hardirqs last  enabled at (0): [<0000000000000000>] 0x0
hardirqs last disabled at (0): [<ffffffff8122d29a>] copy_process+0x256a/0x7650 kernel/fork.c:2448
softirqs last  enabled at (0): [<ffffffff8122d2e2>] copy_process+0x25b2/0x7650 kernel/fork.c:2452
softirqs last disabled at (0): [<0000000000000000>] 0x0
---[ end trace 0000000000000000 ]---
------------[ cut here ]------------
WARNING: CPU: 0 PID: 549 at drivers/iommu/iommufd/io_pagetable.c:663 iopt_destroy_table+0x15f/0x1b0 drivers/iommu/iommufd/io_pagetable.c:663
Modules linked in:
CPU: 0 PID: 549 Comm: syz-executor321 Tainted: G    B   W          6.4.0-rc6-5ca8bbe2b782+ #1
Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
RIP: 0010:iopt_destroy_table+0x15f/0x1b0 drivers/iommu/iommufd/io_pagetable.c:663
Code: 5b 41 5c 41 5d 41 5e 5d c3 cc cc cc cc e8 c9 53 0b fe 0f 0b e9 51 ff ff ff e8 bd 53 0b fe 0f 0b e9 76 ff ff ff e8 b1 53 0b fe <0f> 0b eb 9e e8 a8 53 0b fe 0f 0b e8 a1 53 0b fe 5b 41 5c 41 5d 41
RSP: 0018:ffff88801650fb78 EFLAGS: 00010246
RAX: 0000000000000000 RBX: 0000000000000000 RCX: 0000000000000000
RDX: 0000000000000000 RSI: ffff88800b7f4a00 RDI: 0000000000000002
RBP: ffff88801650fb98 R08: ffffed100229393e R09: ffffed100229393e
R10: ffff88801149c9ef R11: ffffed100229393d R12: ffff88801149ca90
R13: ffff88801149c8a8 R14: ffffffffffffffff R15: ffff88801650fc60
FS:  0000000000000000(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
CR2: 00000000004e5420 CR3: 000000000667e000 CR4: 0000000000750ef0
PKRU: 55555554
Call Trace:
 <TASK>
 iommufd_ioas_destroy+0x53/0x70 drivers/iommu/iommufd/ioas.c:19
 iommufd_fops_release+0x1f7/0x370 drivers/iommu/iommufd/main.c:231
 __fput+0x26d/0xa40 fs/file_table.c:321
 ____fput+0x1e/0x30 fs/file_table.c:349
 task_work_run+0x1a4/0x2d0 kernel/task_work.c:179
 exit_task_work include/linux/task_work.h:38 [inline]
 do_exit+0xaf3/0x2f60 kernel/exit.c:874
 do_group_exit+0xe0/0x2b0 kernel/exit.c:1024
 __do_sys_exit_group kernel/exit.c:1035 [inline]
 __se_sys_exit_group kernel/exit.c:1033 [inline]
 __x64_sys_exit_group+0x47/0x50 kernel/exit.c:1033
 do_syscall_x64 arch/x86/entry/common.c:50 [inline]
 do_syscall_64+0x3b/0x90 arch/x86/entry/common.c:80
 entry_SYSCALL_64_after_hwframe+0x72/0xdc
RIP: 0033:0x44de86
Code: Unable to access opcode bytes at 0x44de5c.
RSP: 002b:00007fff8410fbc8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
RAX: ffffffffffffffda RBX: 00000000004e5410 RCX: 000000000044de86
RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffffa8
R10: 0000000000411b40 R11: 0000000000000246 R12: 00000000004e5410
R13: 0000000000000001 R14: 0000000000000000 R15: 0000000000000001
 </TASK>
irq event stamp: 0
hardirqs last  enabled at (0): [<0000000000000000>] 0x0
hardirqs last disabled at (0): [<ffffffff8122d29a>] copy_process+0x256a/0x7650 kernel/fork.c:2448
softirqs last  enabled at (0): [<ffffffff8122d2e2>] copy_process+0x25b2/0x7650 kernel/fork.c:2452
softirqs last disabled at (0): [<0000000000000000>] 0x0
---[ end trace 0000000000000000 ]---
------------[ cut here ]------------
WARNING: CPU: 0 PID: 550 at drivers/iommu/iommufd/io_pagetable.c:1158 iopt_remove_access+0xb5/0xd0 drivers/iommu/iommufd/io_pagetable.c:1157
Modules linked in:
CPU: 0 PID: 550 Comm: syz-executor321 Tainted: G    B   W          6.4.0-rc6-5ca8bbe2b782+ #1
Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
RIP: 0010:iopt_remove_access+0xb5/0xd0 drivers/iommu/iommufd/io_pagetable.c:1157
Code: 45 85 e4 75 29 e8 4b 2d 0b fe 4c 89 ef e8 33 eb e8 fd 48 89 df e8 2b eb e8 fd 5b 41 5c 41 5d 5d c3 cc cc cc cc e8 2b 2d 0b fe <0f> 0b eb b9 e8 22 2d 0b fe 0f 0b eb ce e8 b9 1d 67 fe eb 90 0f 1f
RSP: 0018:ffff8880103bfbb8 EFLAGS: 00010246
RAX: 0000000000000000 RBX: ffff888015a920a8 RCX: 0000000000000000
RDX: 0000000000000000 RSI: ffff88800f1e4a00 RDI: 0000000000000002
RBP: ffff8880103bfbd0 R08: ffffed1002b52433 R09: ffffed1002b52433
R10: ffff888015a92193 R11: ffffed1002b52432 R12: ffff888019e7e000
R13: ffff888015a921e8 R14: ffffffff835430e0 R15: ffff8880103bfe68
FS:  0000000001a0a3c0(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
CR2: 0000000020000140 CR3: 0000000021008000 CR4: 0000000000750ef0
PKRU: 55555554
Call Trace:
 <TASK>
 __iommufd_access_detach+0x1c2/0x2b0 drivers/iommu/iommufd/device.c:971
 iommufd_access_change_pt+0x149/0x270 drivers/iommu/iommufd/device.c:1006
 iommufd_access_replace+0xb4/0x120 drivers/iommu/iommufd/device.c:1042
 iommufd_test_access_replace_ioas drivers/iommu/iommufd/selftest.c:1025 [inline]
 iommufd_test+0x103d/0x3f00 drivers/iommu/iommufd/selftest.c:1252
 iommufd_fops_ioctl+0x37d/0x510 drivers/iommu/iommufd/main.c:378
 vfs_ioctl fs/ioctl.c:51 [inline]
 __do_sys_ioctl fs/ioctl.c:870 [inline]
 __se_sys_ioctl fs/ioctl.c:856 [inline]
 __x64_sys_ioctl+0x1a3/0x230 fs/ioctl.c:856
 do_syscall_x64 arch/x86/entry/common.c:50 [inline]
 do_syscall_64+0x3b/0x90 arch/x86/entry/common.c:80
 entry_SYSCALL_64_after_hwframe+0x72/0xdc
RIP: 0033:0x44ff3d
Code: db 48 89 d8 5b 5d 41 5c 41 5d 41 5e c3 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 c7 c1 a8 ff ff ff f7 d8 64 89 01 48
RSP: 002b:00007fff8410fc18 EFLAGS: 00000246 ORIG_RAX: 0000000000000010
RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 000000000044ff3d
RDX: 0000000020000000 RSI: 0000000000003ba0 RDI: 0000000000000003
RBP: 0000000000000001 R08: 0000000000411b40 R09: 0000000000411b40
R10: 0000000000411b40 R11: 0000000000000246 R12: 0000000000000001
R13: 0000000000000000 R14: 00000000004004e8 R15: 0000000000000000
 </TASK>
irq event stamp: 0
hardirqs last  enabled at (0): [<0000000000000000>] 0x0
hardirqs last disabled at (0): [<ffffffff8122d29a>] copy_process+0x256a/0x7650 kernel/fork.c:2448
softirqs last  enabled at (0): [<ffffffff8122d2e2>] copy_process+0x25b2/0x7650 kernel/fork.c:2452
softirqs last disabled at (0): [<0000000000000000>] 0x0
---[ end trace 0000000000000000 ]---
------------[ cut here ]------------
WARNING: CPU: 0 PID: 550 at drivers/iommu/iommufd/io_pagetable.c:1158 iopt_remove_access+0xb5/0xd0 drivers/iommu/iommufd/io_pagetable.c:1157
Modules linked in:
CPU: 0 PID: 550 Comm: syz-executor321 Tainted: G    B   W          6.4.0-rc6-5ca8bbe2b782+ #1
Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
RIP: 0010:iopt_remove_access+0xb5/0xd0 drivers/iommu/iommufd/io_pagetable.c:1157
Code: 45 85 e4 75 29 e8 4b 2d 0b fe 4c 89 ef e8 33 eb e8 fd 48 89 df e8 2b eb e8 fd 5b 41 5c 41 5d 5d c3 cc cc cc cc e8 2b 2d 0b fe <0f> 0b eb b9 e8 22 2d 0b fe 0f 0b eb ce e8 b9 1d 67 fe eb 90 0f 1f
RSP: 0018:ffff8880103bfbd0 EFLAGS: 00010246
RAX: 0000000000000000 RBX: ffff888015a920a8 RCX: 0000000000000000
RDX: 0000000000000000 RSI: ffff88800f1e4a00 RDI: 0000000000000002
RBP: ffff8880103bfbe8 R08: ffffed1002b52433 R09: ffffed1002b52433
R10: ffff888015a92193 R11: ffffed1002b52432 R12: ffff888012518c00
R13: ffff888015a921e8 R14: ffff88801392a900 R15: 0000000000000000
FS:  0000000000000000(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
CR2: 00000000004e5420 CR3: 000000000667e000 CR4: 0000000000750ef0
PKRU: 55555554
Call Trace:
 <TASK>
 iommufd_access_destroy_object+0x65/0x170 drivers/iommu/iommufd/device.c:875
 iommufd_object_destroy_user+0x18e/0x220 drivers/iommu/iommufd/main.c:163
 iommufd_access_destroy+0x43/0x70 drivers/iommu/iommufd/device.c:938
 iommufd_test_staccess_release+0x8d/0xd0 drivers/iommu/iommufd/selftest.c:918
 __fput+0x26d/0xa40 fs/file_table.c:321
 ____fput+0x1e/0x30 fs/file_table.c:349
 task_work_run+0x1a4/0x2d0 kernel/task_work.c:179
 exit_task_work include/linux/task_work.h:38 [inline]
 do_exit+0xaf3/0x2f60 kernel/exit.c:874
 do_group_exit+0xe0/0x2b0 kernel/exit.c:1024
 __do_sys_exit_group kernel/exit.c:1035 [inline]
 __se_sys_exit_group kernel/exit.c:1033 [inline]
 __x64_sys_exit_group+0x47/0x50 kernel/exit.c:1033
 do_syscall_x64 arch/x86/entry/common.c:50 [inline]
 do_syscall_64+0x3b/0x90 arch/x86/entry/common.c:80
 entry_SYSCALL_64_after_hwframe+0x72/0xdc
RIP: 0033:0x44de86
Code: Unable to access opcode bytes at 0x44de5c.
RSP: 002b:00007fff8410fbc8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
RAX: ffffffffffffffda RBX: 00000000004e5410 RCX: 000000000044de86
RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffffa8
R10: 0000000000411b40 R11: 0000000000000246 R12: 00000000004e5410
R13: 0000000000000001 R14: 0000000000000000 R15: 0000000000000001
 </TASK>
irq event stamp: 0
hardirqs last  enabled at (0): [<0000000000000000>] 0x0
hardirqs last disabled at (0): [<ffffffff8122d29a>] copy_process+0x256a/0x7650 kernel/fork.c:2448
softirqs last  enabled at (0): [<ffffffff8122d2e2>] copy_process+0x25b2/0x7650 kernel/fork.c:2452
softirqs last disabled at (0): [<0000000000000000>] 0x0
---[ end trace 0000000000000000 ]---
------------[ cut here ]------------
WARNING: CPU: 0 PID: 550 at drivers/iommu/iommufd/io_pagetable.c:663 iopt_destroy_table+0x15f/0x1b0 drivers/iommu/iommufd/io_pagetable.c:663
Modules linked in:
CPU: 0 PID: 550 Comm: syz-executor321 Tainted: G    B   W          6.4.0-rc6-5ca8bbe2b782+ #1
Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
RIP: 0010:iopt_destroy_table+0x15f/0x1b0 drivers/iommu/iommufd/io_pagetable.c:663
Code: 5b 41 5c 41 5d 41 5e 5d c3 cc cc cc cc e8 c9 53 0b fe 0f 0b e9 51 ff ff ff e8 bd 53 0b fe 0f 0b e9 76 ff ff ff e8 b1 53 0b fe <0f> 0b eb 9e e8 a8 53 0b fe 0f 0b e8 a1 53 0b fe 5b 41 5c 41 5d 41
RSP: 0018:ffff8880103bfb78 EFLAGS: 00010246
RAX: 0000000000000000 RBX: 0000000000000000 RCX: 0000000000000000
RDX: 0000000000000000 RSI: ffff88800f1e4a00 RDI: 0000000000000002
RBP: ffff8880103bfb98 R08: ffffed1002b5243e R09: ffffed1002b5243e
R10: ffff888015a921ef R11: ffffed1002b5243d R12: ffff888015a92290
R13: ffff888015a920a8 R14: ffffffffffffffff R15: ffff8880103bfc60
FS:  0000000000000000(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
CR2: 00000000004e5420 CR3: 000000000667e000 CR4: 0000000000750ef0
PKRU: 55555554
Call Trace:
 <TASK>
 iommufd_ioas_destroy+0x53/0x70 drivers/iommu/iommufd/ioas.c:19
 iommufd_fops_release+0x1f7/0x370 drivers/iommu/iommufd/main.c:231
 __fput+0x26d/0xa40 fs/file_table.c:321
 ____fput+0x1e/0x30 fs/file_table.c:349
 task_work_run+0x1a4/0x2d0 kernel/task_work.c:179
 exit_task_work include/linux/task_work.h:38 [inline]
 do_exit+0xaf3/0x2f60 kernel/exit.c:874
 do_group_exit+0xe0/0x2b0 kernel/exit.c:1024
 __do_sys_exit_group kernel/exit.c:1035 [inline]
 __se_sys_exit_group kernel/exit.c:1033 [inline]
 __x64_sys_exit_group+0x47/0x50 kernel/exit.c:1033
 do_syscall_x64 arch/x86/entry/common.c:50 [inline]
 do_syscall_64+0x3b/0x90 arch/x86/entry/common.c:80
 entry_SYSCALL_64_after_hwframe+0x72/0xdc
RIP: 0033:0x44de86
Code: Unable to access opcode bytes at 0x44de5c.
RSP: 002b:00007fff8410fbc8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
RAX: ffffffffffffffda RBX: 00000000004e5410 RCX: 000000000044de86
RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffffa8
R10: 0000000000411b40 R11: 0000000000000246 R12: 00000000004e5410
R13: 0000000000000001 R14: 0000000000000000 R15: 0000000000000001
 </TASK>
irq event stamp: 0
hardirqs last  enabled at (0): [<0000000000000000>] 0x0
hardirqs last disabled at (0): [<ffffffff8122d29a>] copy_process+0x256a/0x7650 kernel/fork.c:2448
softirqs last  enabled at (0): [<ffffffff8122d2e2>] copy_process+0x25b2/0x7650 kernel/fork.c:2452
softirqs last disabled at (0): [<0000000000000000>] 0x0
---[ end trace 0000000000000000 ]---
------------[ cut here ]------------
WARNING: CPU: 1 PID: 551 at drivers/iommu/iommufd/io_pagetable.c:1158 iopt_remove_access+0xb5/0xd0 drivers/iommu/iommufd/io_pagetable.c:1157
Modules linked in:
CPU: 1 PID: 551 Comm: syz-executor321 Tainted: G    B   W          6.4.0-rc6-5ca8bbe2b782+ #1
Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
RIP: 0010:iopt_remove_access+0xb5/0xd0 drivers/iommu/iommufd/io_pagetable.c:1157
Code: 45 85 e4 75 29 e8 4b 2d 0b fe 4c 89 ef e8 33 eb e8 fd 48 89 df e8 2b eb e8 fd 5b 41 5c 41 5d 5d c3 cc cc cc cc e8 2b 2d 0b fe <0f> 0b eb b9 e8 22 2d 0b fe 0f 0b eb ce e8 b9 1d 67 fe eb 90 0f 1f
RSP: 0018:ffff88801650fbb8 EFLAGS: 00010246
RAX: 0000000000000000 RBX: ffff888012daf0a8 RCX: 0000000000000000
RDX: 0000000000000000 RSI: ffff888016758000 RDI: 0000000000000002
RBP: ffff88801650fbd0 R08: ffffed10025b5e33 R09: ffffed10025b5e33
R10: ffff888012daf193 R11: ffffed10025b5e32 R12: ffff888019e43000
R13: ffff888012daf1e8 R14: ffffffff835430e0 R15: ffff88801650fe68
FS:  0000000001a0a3c0(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
CR2: 0000000020000140 CR3: 0000000021008000 CR4: 0000000000750ee0
PKRU: 55555554
Call Trace:
 <TASK>
 __iommufd_access_detach+0x1c2/0x2b0 drivers/iommu/iommufd/device.c:971
 iommufd_access_change_pt+0x149/0x270 drivers/iommu/iommufd/device.c:1006
 iommufd_access_replace+0xb4/0x120 drivers/iommu/iommufd/device.c:1042
 iommufd_test_access_replace_ioas drivers/iommu/iommufd/selftest.c:1025 [inline]
 iommufd_test+0x103d/0x3f00 drivers/iommu/iommufd/selftest.c:1252
 iommufd_fops_ioctl+0x37d/0x510 drivers/iommu/iommufd/main.c:378
 vfs_ioctl fs/ioctl.c:51 [inline]
 __do_sys_ioctl fs/ioctl.c:870 [inline]
 __se_sys_ioctl fs/ioctl.c:856 [inline]
 __x64_sys_ioctl+0x1a3/0x230 fs/ioctl.c:856
 do_syscall_x64 arch/x86/entry/common.c:50 [inline]
 do_syscall_64+0x3b/0x90 arch/x86/entry/common.c:80
 entry_SYSCALL_64_after_hwframe+0x72/0xdc
RIP: 0033:0x44ff3d
Code: db 48 89 d8 5b 5d 41 5c 41 5d 41 5e c3 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 c7 c1 a8 ff ff ff f7 d8 64 89 01 48
RSP: 002b:00007fff8410fc18 EFLAGS: 00000246 ORIG_RAX: 0000000000000010
RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 000000000044ff3d
RDX: 0000000020000000 RSI: 0000000000003ba0 RDI: 0000000000000003
RBP: 0000000000000001 R08: 0000000000411b40 R09: 0000000000411b40
R10: 0000000000411b40 R11: 0000000000000246 R12: 0000000000000001
R13: 0000000000000000 R14: 00000000004004e8 R15: 0000000000000000
 </TASK>
irq event stamp: 0
hardirqs last  enabled at (0): [<0000000000000000>] 0x0
hardirqs last disabled at (0): [<ffffffff8122d29a>] copy_process+0x256a/0x7650 kernel/fork.c:2448
softirqs last  enabled at (0): [<ffffffff8122d2e2>] copy_process+0x25b2/0x7650 kernel/fork.c:2452
softirqs last disabled at (0): [<0000000000000000>] 0x0
---[ end trace 0000000000000000 ]---
------------[ cut here ]------------
WARNING: CPU: 1 PID: 551 at drivers/iommu/iommufd/io_pagetable.c:1158 iopt_remove_access+0xb5/0xd0 drivers/iommu/iommufd/io_pagetable.c:1157
Modules linked in:
CPU: 1 PID: 551 Comm: syz-executor321 Tainted: G    B   W          6.4.0-rc6-5ca8bbe2b782+ #1
Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
RIP: 0010:iopt_remove_access+0xb5/0xd0 drivers/iommu/iommufd/io_pagetable.c:1157
Code: 45 85 e4 75 29 e8 4b 2d 0b fe 4c 89 ef e8 33 eb e8 fd 48 89 df e8 2b eb e8 fd 5b 41 5c 41 5d 5d c3 cc cc cc cc e8 2b 2d 0b fe <0f> 0b eb b9 e8 22 2d 0b fe 0f 0b eb ce e8 b9 1d 67 fe eb 90 0f 1f
RSP: 0018:ffff88801650fbd0 EFLAGS: 00010246
RAX: 0000000000000000 RBX: ffff888012daf0a8 RCX: 0000000000000000
RDX: 0000000000000000 RSI: ffff888016758000 RDI: 0000000000000002
RBP: ffff88801650fbe8 R08: ffffed10025b5e33 R09: ffffed10025b5e33
R10: ffff888012daf193 R11: ffffed10025b5e32 R12: ffff88800a727c00
R13: ffff888012daf1e8 R14: ffff888022d27a00 R15: 0000000000000000
FS:  0000000000000000(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
CR2: 00000000004e5420 CR3: 00000000158b0000 CR4: 0000000000750ee0
PKRU: 55555554
Call Trace:
 <TASK>
 iommufd_access_destroy_object+0x65/0x170 drivers/iommu/iommufd/device.c:875
 iommufd_object_destroy_user+0x18e/0x220 drivers/iommu/iommufd/main.c:163
 iommufd_access_destroy+0x43/0x70 drivers/iommu/iommufd/device.c:938
 iommufd_test_staccess_release+0x8d/0xd0 drivers/iommu/iommufd/selftest.c:918
 __fput+0x26d/0xa40 fs/file_table.c:321
 ____fput+0x1e/0x30 fs/file_table.c:349
 task_work_run+0x1a4/0x2d0 kernel/task_work.c:179
 exit_task_work include/linux/task_work.h:38 [inline]
 do_exit+0xaf3/0x2f60 kernel/exit.c:874
 do_group_exit+0xe0/0x2b0 kernel/exit.c:1024
 __do_sys_exit_group kernel/exit.c:1035 [inline]
 __se_sys_exit_group kernel/exit.c:1033 [inline]
 __x64_sys_exit_group+0x47/0x50 kernel/exit.c:1033
 do_syscall_x64 arch/x86/entry/common.c:50 [inline]
 do_syscall_64+0x3b/0x90 arch/x86/entry/common.c:80
 entry_SYSCALL_64_after_hwframe+0x72/0xdc
RIP: 0033:0x44de86
Code: Unable to access opcode bytes at 0x44de5c.
RSP: 002b:00007fff8410fbc8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
RAX: ffffffffffffffda RBX: 00000000004e5410 RCX: 000000000044de86
RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffffa8
R10: 0000000000411b40 R11: 0000000000000246 R12: 00000000004e5410
R13: 0000000000000001 R14: 0000000000000000 R15: 0000000000000001
 </TASK>
irq event stamp: 0
hardirqs last  enabled at (0): [<0000000000000000>] 0x0
hardirqs last disabled at (0): [<ffffffff8122d29a>] copy_process+0x256a/0x7650 kernel/fork.c:2448
softirqs last  enabled at (0): [<ffffffff8122d2e2>] copy_process+0x25b2/0x7650 kernel/fork.c:2452
softirqs last disabled at (0): [<0000000000000000>] 0x0
---[ end trace 0000000000000000 ]---
------------[ cut here ]------------
WARNING: CPU: 1 PID: 551 at drivers/iommu/iommufd/io_pagetable.c:663 iopt_destroy_table+0x15f/0x1b0 drivers/iommu/iommufd/io_pagetable.c:663
Modules linked in:
CPU: 1 PID: 551 Comm: syz-executor321 Tainted: G    B   W          6.4.0-rc6-5ca8bbe2b782+ #1
Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
RIP: 0010:iopt_destroy_table+0x15f/0x1b0 drivers/iommu/iommufd/io_pagetable.c:663
Code: 5b 41 5c 41 5d 41 5e 5d c3 cc cc cc cc e8 c9 53 0b fe 0f 0b e9 51 ff ff ff e8 bd 53 0b fe 0f 0b e9 76 ff ff ff e8 b1 53 0b fe <0f> 0b eb 9e e8 a8 53 0b fe 0f 0b e8 a1 53 0b fe 5b 41 5c 41 5d 41
RSP: 0018:ffff88801650fb78 EFLAGS: 00010246
RAX: 0000000000000000 RBX: 0000000000000000 RCX: 0000000000000000
RDX: 0000000000000000 RSI: ffff888016758000 RDI: 0000000000000002
RBP: ffff88801650fb98 R08: ffffed10025b5e3e R09: ffffed10025b5e3e
R10: ffff888012daf1ef R11: ffffed10025b5e3d R12: ffff888012daf290
R13: ffff888012daf0a8 R14: ffffffffffffffff R15: ffff88801650fc60
FS:  0000000000000000(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
CR2: 00007f86d400d008 CR3: 00000000158b0000 CR4: 0000000000750ee0
PKRU: 55555554
Call Trace:
 <TASK>
 iommufd_ioas_destroy+0x53/0x70 drivers/iommu/iommufd/ioas.c:19
 iommufd_fops_release+0x1f7/0x370 drivers/iommu/iommufd/main.c:231
 __fput+0x26d/0xa40 fs/file_table.c:321
 ____fput+0x1e/0x30 fs/file_table.c:349
 task_work_run+0x1a4/0x2d0 kernel/task_work.c:179
 exit_task_work include/linux/task_work.h:38 [inline]
 do_exit+0xaf3/0x2f60 kernel/exit.c:874
 do_group_exit+0xe0/0x2b0 kernel/exit.c:1024
 __do_sys_exit_group kernel/exit.c:1035 [inline]
 __se_sys_exit_group kernel/exit.c:1033 [inline]
 __x64_sys_exit_group+0x47/0x50 kernel/exit.c:1033
 do_syscall_x64 arch/x86/entry/common.c:50 [inline]
 do_syscall_64+0x3b/0x90 arch/x86/entry/common.c:80
 entry_SYSCALL_64_after_hwframe+0x72/0xdc
RIP: 0033:0x44de86
Code: Unable to access opcode bytes at 0x44de5c.
RSP: 002b:00007fff8410fbc8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
RAX: ffffffffffffffda RBX: 00000000004e5410 RCX: 000000000044de86
RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffffa8
R10: 0000000000411b40 R11: 0000000000000246 R12: 00000000004e5410
R13: 0000000000000001 R14: 0000000000000000 R15: 0000000000000001
 </TASK>
irq event stamp: 0
hardirqs last  enabled at (0): [<0000000000000000>] 0x0
hardirqs last disabled at (0): [<ffffffff8122d29a>] copy_process+0x256a/0x7650 kernel/fork.c:2448
softirqs last  enabled at (0): [<ffffffff8122d2e2>] copy_process+0x25b2/0x7650 kernel/fork.c:2452
softirqs last disabled at (0): [<0000000000000000>] 0x0
---[ end trace 0000000000000000 ]---
------------[ cut here ]------------
WARNING: CPU: 1 PID: 552 at drivers/iommu/iommufd/io_pagetable.c:1158 iopt_remove_access+0xb5/0xd0 drivers/iommu/iommufd/io_pagetable.c:1157
Modules linked in:
CPU: 1 PID: 552 Comm: syz-executor321 Tainted: G    B   W          6.4.0-rc6-5ca8bbe2b782+ #1
Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
RIP: 0010:iopt_remove_access+0xb5/0xd0 drivers/iommu/iommufd/io_pagetable.c:1157
Code: 45 85 e4 75 29 e8 4b 2d 0b fe 4c 89 ef e8 33 eb e8 fd 48 89 df e8 2b eb e8 fd 5b 41 5c 41 5d 5d c3 cc cc cc cc e8 2b 2d 0b fe <0f> 0b eb b9 e8 22 2d 0b fe 0f 0b eb ce e8 b9 1d 67 fe eb 90 0f 1f
RSP: 0018:ffff88800c6b7bb8 EFLAGS: 00010246
RAX: 0000000000000000 RBX: ffff8880108af0a8 RCX: 0000000000000000
RDX: 0000000000000000 RSI: ffff888016f54a00 RDI: 0000000000000002
RBP: ffff88800c6b7bd0 R08: ffffed1002115e33 R09: ffffed1002115e33
R10: ffff8880108af193 R11: ffffed1002115e32 R12: ffff888019d6b800
R13: ffff8880108af1e8 R14: ffffffff835430e0 R15: ffff88800c6b7e68
FS:  0000000001a0a3c0(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
CR2: 0000000020000140 CR3: 0000000013b5e000 CR4: 0000000000750ee0
PKRU: 55555554
Call Trace:
 <TASK>
 __iommufd_access_detach+0x1c2/0x2b0 drivers/iommu/iommufd/device.c:971
 iommufd_access_change_pt+0x149/0x270 drivers/iommu/iommufd/device.c:1006
 iommufd_access_replace+0xb4/0x120 drivers/iommu/iommufd/device.c:1042
 iommufd_test_access_replace_ioas drivers/iommu/iommufd/selftest.c:1025 [inline]
 iommufd_test+0x103d/0x3f00 drivers/iommu/iommufd/selftest.c:1252
 iommufd_fops_ioctl+0x37d/0x510 drivers/iommu/iommufd/main.c:378
 vfs_ioctl fs/ioctl.c:51 [inline]
 __do_sys_ioctl fs/ioctl.c:870 [inline]
 __se_sys_ioctl fs/ioctl.c:856 [inline]
 __x64_sys_ioctl+0x1a3/0x230 fs/ioctl.c:856
 do_syscall_x64 arch/x86/entry/common.c:50 [inline]
 do_syscall_64+0x3b/0x90 arch/x86/entry/common.c:80
 entry_SYSCALL_64_after_hwframe+0x72/0xdc
RIP: 0033:0x44ff3d
Code: db 48 89 d8 5b 5d 41 5c 41 5d 41 5e c3 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 c7 c1 a8 ff ff ff f7 d8 64 89 01 48
RSP: 002b:00007fff8410fc18 EFLAGS: 00000246 ORIG_RAX: 0000000000000010
RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 000000000044ff3d
RDX: 0000000020000000 RSI: 0000000000003ba0 RDI: 0000000000000003
RBP: 0000000000000001 R08: 0000000000411b40 R09: 0000000000411b40
R10: 0000000000411b40 R11: 0000000000000246 R12: 0000000000000001
R13: 0000000000000000 R14: 00000000004004e8 R15: 0000000000000000
 </TASK>
irq event stamp: 0
hardirqs last  enabled at (0): [<0000000000000000>] 0x0
hardirqs last disabled at (0): [<ffffffff8122d29a>] copy_process+0x256a/0x7650 kernel/fork.c:2448
softirqs last  enabled at (0): [<ffffffff8122d2e2>] copy_process+0x25b2/0x7650 kernel/fork.c:2452
softirqs last disabled at (0): [<0000000000000000>] 0x0
---[ end trace 0000000000000000 ]---
------------[ cut here ]------------
WARNING: CPU: 1 PID: 552 at drivers/iommu/iommufd/io_pagetable.c:1158 iopt_remove_access+0xb5/0xd0 drivers/iommu/iommufd/io_pagetable.c:1157
Modules linked in:
CPU: 1 PID: 552 Comm: syz-executor321 Tainted: G    B   W          6.4.0-rc6-5ca8bbe2b782+ #1
Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
RIP: 0010:iopt_remove_access+0xb5/0xd0 drivers/iommu/iommufd/io_pagetable.c:1157
Code: 45 85 e4 75 29 e8 4b 2d 0b fe 4c 89 ef e8 33 eb e8 fd 48 89 df e8 2b eb e8 fd 5b 41 5c 41 5d 5d c3 cc cc cc cc e8 2b 2d 0b fe <0f> 0b eb b9 e8 22 2d 0b fe 0f 0b eb ce e8 b9 1d 67 fe eb 90 0f 1f
RSP: 0018:ffff88800c6b7bd0 EFLAGS: 00010246
RAX: 0000000000000000 RBX: ffff8880108af0a8 RCX: 0000000000000000
RDX: 0000000000000000 RSI: ffff888016f54a00 RDI: 0000000000000002
RBP: ffff88800c6b7be8 R08: ffffed1002115e33 R09: ffffed1002115e33
R10: ffff8880108af193 R11: ffffed1002115e32 R12: ffff888019e41000
R13: ffff8880108af1e8 R14: ffff88801a0ef100 R15: 0000000000000000
FS:  0000000000000000(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
CR2: 00000000004e5420 CR3: 000000000667e000 CR4: 0000000000750ee0
PKRU: 55555554
Call Trace:
 <TASK>
 iommufd_access_destroy_object+0x65/0x170 drivers/iommu/iommufd/device.c:875
 iommufd_object_destroy_user+0x18e/0x220 drivers/iommu/iommufd/main.c:163
 iommufd_access_destroy+0x43/0x70 drivers/iommu/iommufd/device.c:938
 iommufd_test_staccess_release+0x8d/0xd0 drivers/iommu/iommufd/selftest.c:918
 __fput+0x26d/0xa40 fs/file_table.c:321
 ____fput+0x1e/0x30 fs/file_table.c:349
 task_work_run+0x1a4/0x2d0 kernel/task_work.c:179
 exit_task_work include/linux/task_work.h:38 [inline]
 do_exit+0xaf3/0x2f60 kernel/exit.c:874
 do_group_exit+0xe0/0x2b0 kernel/exit.c:1024
 __do_sys_exit_group kernel/exit.c:1035 [inline]
 __se_sys_exit_group kernel/exit.c:1033 [inline]
 __x64_sys_exit_group+0x47/0x50 kernel/exit.c:1033
 do_syscall_x64 arch/x86/entry/common.c:50 [inline]
 do_syscall_64+0x3b/0x90 arch/x86/entry/common.c:80
 entry_SYSCALL_64_after_hwframe+0x72/0xdc
RIP: 0033:0x44de86
Code: Unable to access opcode bytes at 0x44de5c.
RSP: 002b:00007fff8410fbc8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
RAX: ffffffffffffffda RBX: 00000000004e5410 RCX: 000000000044de86
RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffffa8
R10: 0000000000411b40 R11: 0000000000000246 R12: 00000000004e5410
R13: 0000000000000001 R14: 0000000000000000 R15: 0000000000000001
 </TASK>
irq event stamp: 0
hardirqs last  enabled at (0): [<0000000000000000>] 0x0
hardirqs last disabled at (0): [<ffffffff8122d29a>] copy_process+0x256a/0x7650 kernel/fork.c:2448
softirqs last  enabled at (0): [<ffffffff8122d2e2>] copy_process+0x25b2/0x7650 kernel/fork.c:2452
softirqs last disabled at (0): [<0000000000000000>] 0x0
---[ end trace 0000000000000000 ]---
------------[ cut here ]------------
WARNING: CPU: 1 PID: 552 at drivers/iommu/iommufd/io_pagetable.c:663 iopt_destroy_table+0x15f/0x1b0 drivers/iommu/iommufd/io_pagetable.c:663
Modules linked in:
CPU: 1 PID: 552 Comm: syz-executor321 Tainted: G    B   W          6.4.0-rc6-5ca8bbe2b782+ #1
Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
RIP: 0010:iopt_destroy_table+0x15f/0x1b0 drivers/iommu/iommufd/io_pagetable.c:663
Code: 5b 41 5c 41 5d 41 5e 5d c3 cc cc cc cc e8 c9 53 0b fe 0f 0b e9 51 ff ff ff e8 bd 53 0b fe 0f 0b e9 76 ff ff ff e8 b1 53 0b fe <0f> 0b eb 9e e8 a8 53 0b fe 0f 0b e8 a1 53 0b fe 5b 41 5c 41 5d 41
RSP: 0018:ffff88800c6b7b78 EFLAGS: 00010246
RAX: 0000000000000000 RBX: 0000000000000000 RCX: 0000000000000000
RDX: 0000000000000000 RSI: ffff888016f54a00 RDI: 0000000000000002
RBP: ffff88800c6b7b98 R08: ffffed1002115e3e R09: ffffed1002115e3e
R10: ffff8880108af1ef R11: ffffed1002115e3d R12: ffff8880108af290
R13: ffff8880108af0a8 R14: ffffffffffffffff R15: ffff88800c6b7c60
FS:  0000000000000000(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
CR2: 00000000004e5420 CR3: 000000000667e000 CR4: 0000000000750ee0
PKRU: 55555554
Call Trace:
 <TASK>
 iommufd_ioas_destroy+0x53/0x70 drivers/iommu/iommufd/ioas.c:19
 iommufd_fops_release+0x1f7/0x370 drivers/iommu/iommufd/main.c:231
 __fput+0x26d/0xa40 fs/file_table.c:321
 ____fput+0x1e/0x30 fs/file_table.c:349
 task_work_run+0x1a4/0x2d0 kernel/task_work.c:179
 exit_task_work include/linux/task_work.h:38 [inline]
 do_exit+0xaf3/0x2f60 kernel/exit.c:874
 do_group_exit+0xe0/0x2b0 kernel/exit.c:1024
 __do_sys_exit_group kernel/exit.c:1035 [inline]
 __se_sys_exit_group kernel/exit.c:1033 [inline]
 __x64_sys_exit_group+0x47/0x50 kernel/exit.c:1033
 do_syscall_x64 arch/x86/entry/common.c:50 [inline]
 do_syscall_64+0x3b/0x90 arch/x86/entry/common.c:80
 entry_SYSCALL_64_after_hwframe+0x72/0xdc
RIP: 0033:0x44de86
Code: Unable to access opcode bytes at 0x44de5c.
RSP: 002b:00007fff8410fbc8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
RAX: ffffffffffffffda RBX: 00000000004e5410 RCX: 000000000044de86
RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffffa8
R10: 0000000000411b40 R11: 0000000000000246 R12: 00000000004e5410
R13: 0000000000000001 R14: 0000000000000000 R15: 0000000000000001
 </TASK>
irq event stamp: 0
hardirqs last  enabled at (0): [<0000000000000000>] 0x0
hardirqs last disabled at (0): [<ffffffff8122d29a>] copy_process+0x256a/0x7650 kernel/fork.c:2448
softirqs last  enabled at (0): [<ffffffff8122d2e2>] copy_process+0x25b2/0x7650 kernel/fork.c:2452
softirqs last disabled at (0): [<0000000000000000>] 0x0
---[ end trace 0000000000000000 ]---
------------[ cut here ]------------
WARNING: CPU: 1 PID: 553 at drivers/iommu/iommufd/io_pagetable.c:1158 iopt_remove_access+0xb5/0xd0 drivers/iommu/iommufd/io_pagetable.c:1157
Modules linked in:
CPU: 1 PID: 553 Comm: syz-executor321 Tainted: G    B   W          6.4.0-rc6-5ca8bbe2b782+ #1
Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
RIP: 0010:iopt_remove_access+0xb5/0xd0 drivers/iommu/iommufd/io_pagetable.c:1157
Code: 45 85 e4 75 29 e8 4b 2d 0b fe 4c 89 ef e8 33 eb e8 fd 48 89 df e8 2b eb e8 fd 5b 41 5c 41 5d 5d c3 cc cc cc cc e8 2b 2d 0b fe <0f> 0b eb b9 e8 22 2d 0b fe 0f 0b eb ce e8 b9 1d 67 fe eb 90 0f 1f
RSP: 0018:ffff888018affbb8 EFLAGS: 00010246
RAX: 0000000000000000 RBX: ffff8880127d20a8 RCX: 0000000000000000
RDX: 0000000000000000 RSI: ffff88801535ca00 RDI: 0000000000000002
RBP: ffff888018affbd0 R08: ffffed10024fa433 R09: ffffed10024fa433
R10: ffff8880127d2193 R11: ffffed10024fa432 R12: ffff888019d79c00
R13: ffff8880127d21e8 R14: ffffffff835430e0 R15: ffff888018affe68
FS:  0000000001a0a3c0(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
CR2: 0000000020000140 CR3: 00000000115ee000 CR4: 0000000000750ee0
PKRU: 55555554
Call Trace:
 <TASK>
 __iommufd_access_detach+0x1c2/0x2b0 drivers/iommu/iommufd/device.c:971
 iommufd_access_change_pt+0x149/0x270 drivers/iommu/iommufd/device.c:1006
 iommufd_access_replace+0xb4/0x120 drivers/iommu/iommufd/device.c:1042
 iommufd_test_access_replace_ioas drivers/iommu/iommufd/selftest.c:1025 [inline]
 iommufd_test+0x103d/0x3f00 drivers/iommu/iommufd/selftest.c:1252
 iommufd_fops_ioctl+0x37d/0x510 drivers/iommu/iommufd/main.c:378
 vfs_ioctl fs/ioctl.c:51 [inline]
 __do_sys_ioctl fs/ioctl.c:870 [inline]
 __se_sys_ioctl fs/ioctl.c:856 [inline]
 __x64_sys_ioctl+0x1a3/0x230 fs/ioctl.c:856
 do_syscall_x64 arch/x86/entry/common.c:50 [inline]
 do_syscall_64+0x3b/0x90 arch/x86/entry/common.c:80
 entry_SYSCALL_64_after_hwframe+0x72/0xdc
RIP: 0033:0x44ff3d
Code: db 48 89 d8 5b 5d 41 5c 41 5d 41 5e c3 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 c7 c1 a8 ff ff ff f7 d8 64 89 01 48
RSP: 002b:00007fff8410fc18 EFLAGS: 00000246 ORIG_RAX: 0000000000000010
RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 000000000044ff3d
RDX: 0000000020000000 RSI: 0000000000003ba0 RDI: 0000000000000003
RBP: 0000000000000001 R08: 0000000000411b40 R09: 0000000000411b40
R10: 0000000000411b40 R11: 0000000000000246 R12: 0000000000000001
R13: 0000000000000000 R14: 00000000004004e8 R15: 0000000000000000
 </TASK>
irq event stamp: 0
hardirqs last  enabled at (0): [<0000000000000000>] 0x0
hardirqs last disabled at (0): [<ffffffff8122d29a>] copy_process+0x256a/0x7650 kernel/fork.c:2448
softirqs last  enabled at (0): [<ffffffff8122d2e2>] copy_process+0x25b2/0x7650 kernel/fork.c:2452
softirqs last disabled at (0): [<0000000000000000>] 0x0
---[ end trace 0000000000000000 ]---
------------[ cut here ]------------
WARNING: CPU: 1 PID: 553 at drivers/iommu/iommufd/io_pagetable.c:1158 iopt_remove_access+0xb5/0xd0 drivers/iommu/iommufd/io_pagetable.c:1157
Modules linked in:
CPU: 1 PID: 553 Comm: syz-executor321 Tainted: G    B   W          6.4.0-rc6-5ca8bbe2b782+ #1
Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
RIP: 0010:iopt_remove_access+0xb5/0xd0 drivers/iommu/iommufd/io_pagetable.c:1157
Code: 45 85 e4 75 29 e8 4b 2d 0b fe 4c 89 ef e8 33 eb e8 fd 48 89 df e8 2b eb e8 fd 5b 41 5c 41 5d 5d c3 cc cc cc cc e8 2b 2d 0b fe <0f> 0b eb b9 e8 22 2d 0b fe 0f 0b eb ce e8 b9 1d 67 fe eb 90 0f 1f
RSP: 0018:ffff888018affbd0 EFLAGS: 00010246
RAX: 0000000000000000 RBX: ffff8880127d20a8 RCX: 0000000000000000
RDX: 0000000000000000 RSI: ffff88801535ca00 RDI: 0000000000000002
RBP: ffff888018affbe8 R08: ffffed10024fa433 R09: ffffed10024fa433
R10: ffff8880127d2193 R11: ffffed10024fa432 R12: ffff888019d68000
R13: ffff8880127d21e8 R14: ffff888013dcdd00 R15: 0000000000000000
FS:  0000000000000000(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
CR2: 00000000004e5420 CR3: 000000000667e000 CR4: 0000000000750ee0
PKRU: 55555554
Call Trace:
 <TASK>
 iommufd_access_destroy_object+0x65/0x170 drivers/iommu/iommufd/device.c:875
 iommufd_object_destroy_user+0x18e/0x220 drivers/iommu/iommufd/main.c:163
 iommufd_access_destroy+0x43/0x70 drivers/iommu/iommufd/device.c:938
 iommufd_test_staccess_release+0x8d/0xd0 drivers/iommu/iommufd/selftest.c:918
 __fput+0x26d/0xa40 fs/file_table.c:321
 ____fput+0x1e/0x30 fs/file_table.c:349
 task_work_run+0x1a4/0x2d0 kernel/task_work.c:179
 exit_task_work include/linux/task_work.h:38 [inline]
 do_exit+0xaf3/0x2f60 kernel/exit.c:874
 do_group_exit+0xe0/0x2b0 kernel/exit.c:1024
 __do_sys_exit_group kernel/exit.c:1035 [inline]
 __se_sys_exit_group kernel/exit.c:1033 [inline]
 __x64_sys_exit_group+0x47/0x50 kernel/exit.c:1033
 do_syscall_x64 arch/x86/entry/common.c:50 [inline]
 do_syscall_64+0x3b/0x90 arch/x86/entry/common.c:80
 entry_SYSCALL_64_after_hwframe+0x72/0xdc
RIP: 0033:0x44de86
Code: Unable to access opcode bytes at 0x44de5c.
RSP: 002b:00007fff8410fbc8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
RAX: ffffffffffffffda RBX: 00000000004e5410 RCX: 000000000044de86
RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffffa8
R10: 0000000000411b40 R11: 0000000000000246 R12: 00000000004e5410
R13: 0000000000000001 R14: 0000000000000000 R15: 0000000000000001
 </TASK>
irq event stamp: 0
hardirqs last  enabled at (0): [<0000000000000000>] 0x0
hardirqs last disabled at (0): [<ffffffff8122d29a>] copy_process+0x256a/0x7650 kernel/fork.c:2448
softirqs last  enabled at (0): [<ffffffff8122d2e2>] copy_process+0x25b2/0x7650 kernel/fork.c:2452
softirqs last disabled at (0): [<0000000000000000>] 0x0
---[ end trace 0000000000000000 ]---
------------[ cut here ]------------
WARNING: CPU: 1 PID: 553 at drivers/iommu/iommufd/io_pagetable.c:663 iopt_destroy_table+0x15f/0x1b0 drivers/iommu/iommufd/io_pagetable.c:663
Modules linked in:
CPU: 1 PID: 553 Comm: syz-executor321 Tainted: G    B   W          6.4.0-rc6-5ca8bbe2b782+ #1
Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
RIP: 0010:iopt_destroy_table+0x15f/0x1b0 drivers/iommu/iommufd/io_pagetable.c:663
Code: 5b 41 5c 41 5d 41 5e 5d c3 cc cc cc cc e8 c9 53 0b fe 0f 0b e9 51 ff ff ff e8 bd 53 0b fe 0f 0b e9 76 ff ff ff e8 b1 53 0b fe <0f> 0b eb 9e e8 a8 53 0b fe 0f 0b e8 a1 53 0b fe 5b 41 5c 41 5d 41
RSP: 0018:ffff888018affb78 EFLAGS: 00010246
RAX: 0000000000000000 RBX: 0000000000000000 RCX: 0000000000000000
RDX: 0000000000000000 RSI: ffff88801535ca00 RDI: 0000000000000002
RBP: ffff888018affb98 R08: ffffed10024fa43e R09: ffffed10024fa43e
R10: ffff8880127d21ef R11: ffffed10024fa43d R12: ffff8880127d2290
R13: ffff8880127d20a8 R14: ffffffffffffffff R15: ffff888018affc60
FS:  0000000000000000(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
CR2: 00000000004e5420 CR3: 000000000667e000 CR4: 0000000000750ee0
PKRU: 55555554
Call Trace:
 <TASK>
 iommufd_ioas_destroy+0x53/0x70 drivers/iommu/iommufd/ioas.c:19
 iommufd_fops_release+0x1f7/0x370 drivers/iommu/iommufd/main.c:231
 __fput+0x26d/0xa40 fs/file_table.c:321
 ____fput+0x1e/0x30 fs/file_table.c:349
 task_work_run+0x1a4/0x2d0 kernel/task_work.c:179
 exit_task_work include/linux/task_work.h:38 [inline]
 do_exit+0xaf3/0x2f60 kernel/exit.c:874
 do_group_exit+0xe0/0x2b0 kernel/exit.c:1024
 __do_sys_exit_group kernel/exit.c:1035 [inline]
 __se_sys_exit_group kernel/exit.c:1033 [inline]
 __x64_sys_exit_group+0x47/0x50 kernel/exit.c:1033
 do_syscall_x64 arch/x86/entry/common.c:50 [inline]
 do_syscall_64+0x3b/0x90 arch/x86/entry/common.c:80
 entry_SYSCALL_64_after_hwframe+0x72/0xdc
RIP: 0033:0x44de86
Code: Unable to access opcode bytes at 0x44de5c.
RSP: 002b:00007fff8410fbc8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
RAX: ffffffffffffffda RBX: 00000000004e5410 RCX: 000000000044de86
RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffffa8
R10: 0000000000411b40 R11: 0000000000000246 R12: 00000000004e5410
R13: 0000000000000001 R14: 0000000000000000 R15: 0000000000000001
 </TASK>
irq event stamp: 0
hardirqs last  enabled at (0): [<0000000000000000>] 0x0
hardirqs last disabled at (0): [<ffffffff8122d29a>] copy_process+0x256a/0x7650 kernel/fork.c:2448
softirqs last  enabled at (0): [<ffffffff8122d2e2>] copy_process+0x25b2/0x7650 kernel/fork.c:2452
softirqs last disabled at (0): [<0000000000000000>] 0x0
---[ end trace 0000000000000000 ]---
------------[ cut here ]------------
WARNING: CPU: 1 PID: 554 at drivers/iommu/iommufd/io_pagetable.c:1158 iopt_remove_access+0xb5/0xd0 drivers/iommu/iommufd/io_pagetable.c:1157
Modules linked in:
CPU: 1 PID: 554 Comm: syz-executor321 Tainted: G    B   W          6.4.0-rc6-5ca8bbe2b782+ #1
Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
RIP: 0010:iopt_remove_access+0xb5/0xd0 drivers/iommu/iommufd/io_pagetable.c:1157
Code: 45 85 e4 75 29 e8 4b 2d 0b fe 4c 89 ef e8 33 eb e8 fd 48 89 df e8 2b eb e8 fd 5b 41 5c 41 5d 5d c3 cc cc cc cc e8 2b 2d 0b fe <0f> 0b eb b9 e8 22 2d 0b fe 0f 0b eb ce e8 b9 1d 67 fe eb 90 0f 1f
RSP: 0018:ffff8880107afbb8 EFLAGS: 00010246
RAX: 0000000000000000 RBX: ffff888016fa40a8 RCX: 0000000000000000
RDX: 0000000000000000 RSI: ffff888015358000 RDI: 0000000000000002
RBP: ffff8880107afbd0 R08: ffffed1002df4833 R09: ffffed1002df4833
R10: ffff888016fa4193 R11: ffffed1002df4832 R12: ffff888019d8e400
R13: ffff888016fa41e8 R14: ffffffff835430e0 R15: ffff8880107afe68
FS:  0000000001a0a3c0(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
CR2: 0000000020000140 CR3: 0000000014650000 CR4: 0000000000750ee0
PKRU: 55555554
Call Trace:
 <TASK>
 __iommufd_access_detach+0x1c2/0x2b0 drivers/iommu/iommufd/device.c:971
 iommufd_access_change_pt+0x149/0x270 drivers/iommu/iommufd/device.c:1006
 iommufd_access_replace+0xb4/0x120 drivers/iommu/iommufd/device.c:1042
 iommufd_test_access_replace_ioas drivers/iommu/iommufd/selftest.c:1025 [inline]
 iommufd_test+0x103d/0x3f00 drivers/iommu/iommufd/selftest.c:1252
 iommufd_fops_ioctl+0x37d/0x510 drivers/iommu/iommufd/main.c:378
 vfs_ioctl fs/ioctl.c:51 [inline]
 __do_sys_ioctl fs/ioctl.c:870 [inline]
 __se_sys_ioctl fs/ioctl.c:856 [inline]
 __x64_sys_ioctl+0x1a3/0x230 fs/ioctl.c:856
 do_syscall_x64 arch/x86/entry/common.c:50 [inline]
 do_syscall_64+0x3b/0x90 arch/x86/entry/common.c:80
 entry_SYSCALL_64_after_hwframe+0x72/0xdc
RIP: 0033:0x44ff3d
Code: db 48 89 d8 5b 5d 41 5c 41 5d 41 5e c3 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 c7 c1 a8 ff ff ff f7 d8 64 89 01 48
RSP: 002b:00007fff8410fc18 EFLAGS: 00000246 ORIG_RAX: 0000000000000010
RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 000000000044ff3d
RDX: 0000000020000000 RSI: 0000000000003ba0 RDI: 0000000000000003
RBP: 0000000000000001 R08: 0000000000411b40 R09: 0000000000411b40
R10: 0000000000411b40 R11: 0000000000000246 R12: 0000000000000001
R13: 0000000000000000 R14: 00000000004004e8 R15: 0000000000000000
 </TASK>
irq event stamp: 0
hardirqs last  enabled at (0): [<0000000000000000>] 0x0
hardirqs last disabled at (0): [<ffffffff8122d29a>] copy_process+0x256a/0x7650 kernel/fork.c:2448
softirqs last  enabled at (0): [<ffffffff8122d2e2>] copy_process+0x25b2/0x7650 kernel/fork.c:2452
softirqs last disabled at (0): [<0000000000000000>] 0x0
---[ end trace 0000000000000000 ]---
------------[ cut here ]------------
WARNING: CPU: 1 PID: 554 at drivers/iommu/iommufd/io_pagetable.c:1158 iopt_remove_access+0xb5/0xd0 drivers/iommu/iommufd/io_pagetable.c:1157
Modules linked in:
CPU: 1 PID: 554 Comm: syz-executor321 Tainted: G    B   W          6.4.0-rc6-5ca8bbe2b782+ #1
Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
RIP: 0010:iopt_remove_access+0xb5/0xd0 drivers/iommu/iommufd/io_pagetable.c:1157
Code: 45 85 e4 75 29 e8 4b 2d 0b fe 4c 89 ef e8 33 eb e8 fd 48 89 df e8 2b eb e8 fd 5b 41 5c 41 5d 5d c3 cc cc cc cc e8 2b 2d 0b fe <0f> 0b eb b9 e8 22 2d 0b fe 0f 0b eb ce e8 b9 1d 67 fe eb 90 0f 1f
RSP: 0018:ffff8880107afbd0 EFLAGS: 00010246
RAX: 0000000000000000 RBX: ffff888016fa40a8 RCX: 0000000000000000
RDX: 0000000000000000 RSI: ffff888015358000 RDI: 0000000000000002
RBP: ffff8880107afbe8 R08: ffffed1002df4833 R09: ffffed1002df4833
R10: ffff888016fa4193 R11: ffffed1002df4832 R12: ffff888019d78c00
R13: ffff888016fa41e8 R14: ffff88802115cf00 R15: 0000000000000000
FS:  0000000000000000(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
CR2: 00000000004e5420 CR3: 000000000667e000 CR4: 0000000000750ee0
PKRU: 55555554
Call Trace:
 <TASK>
 iommufd_access_destroy_object+0x65/0x170 drivers/iommu/iommufd/device.c:875
 iommufd_object_destroy_user+0x18e/0x220 drivers/iommu/iommufd/main.c:163
 iommufd_access_destroy+0x43/0x70 drivers/iommu/iommufd/device.c:938
 iommufd_test_staccess_release+0x8d/0xd0 drivers/iommu/iommufd/selftest.c:918
 __fput+0x26d/0xa40 fs/file_table.c:321
 ____fput+0x1e/0x30 fs/file_table.c:349
 task_work_run+0x1a4/0x2d0 kernel/task_work.c:179
 exit_task_work include/linux/task_work.h:38 [inline]
 do_exit+0xaf3/0x2f60 kernel/exit.c:874
 do_group_exit+0xe0/0x2b0 kernel/exit.c:1024
 __do_sys_exit_group kernel/exit.c:1035 [inline]
 __se_sys_exit_group kernel/exit.c:1033 [inline]
 __x64_sys_exit_group+0x47/0x50 kernel/exit.c:1033
 do_syscall_x64 arch/x86/entry/common.c:50 [inline]
 do_syscall_64+0x3b/0x90 arch/x86/entry/common.c:80
 entry_SYSCALL_64_after_hwframe+0x72/0xdc
RIP: 0033:0x44de86
Code: Unable to access opcode bytes at 0x44de5c.
RSP: 002b:00007fff8410fbc8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
RAX: ffffffffffffffda RBX: 00000000004e5410 RCX: 000000000044de86
RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffffa8
R10: 0000000000411b40 R11: 0000000000000246 R12: 00000000004e5410
R13: 0000000000000001 R14: 0000000000000000 R15: 0000000000000001
 </TASK>
irq event stamp: 0
hardirqs last  enabled at (0): [<0000000000000000>] 0x0
hardirqs last disabled at (0): [<ffffffff8122d29a>] copy_process+0x256a/0x7650 kernel/fork.c:2448
softirqs last  enabled at (0): [<ffffffff8122d2e2>] copy_process+0x25b2/0x7650 kernel/fork.c:2452
softirqs last disabled at (0): [<0000000000000000>] 0x0
---[ end trace 0000000000000000 ]---
------------[ cut here ]------------
WARNING: CPU: 1 PID: 554 at drivers/iommu/iommufd/io_pagetable.c:663 iopt_destroy_table+0x15f/0x1b0 drivers/iommu/iommufd/io_pagetable.c:663
Modules linked in:
CPU: 1 PID: 554 Comm: syz-executor321 Tainted: G    B   W          6.4.0-rc6-5ca8bbe2b782+ #1
Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
RIP: 0010:iopt_destroy_table+0x15f/0x1b0 drivers/iommu/iommufd/io_pagetable.c:663
Code: 5b 41 5c 41 5d 41 5e 5d c3 cc cc cc cc e8 c9 53 0b fe 0f 0b e9 51 ff ff ff e8 bd 53 0b fe 0f 0b e9 76 ff ff ff e8 b1 53 0b fe <0f> 0b eb 9e e8 a8 53 0b fe 0f 0b e8 a1 53 0b fe 5b 41 5c 41 5d 41
RSP: 0018:ffff8880107afb78 EFLAGS: 00010246
RAX: 0000000000000000 RBX: 0000000000000000 RCX: 0000000000000000
RDX: 0000000000000000 RSI: ffff888015358000 RDI: 0000000000000002
RBP: ffff8880107afb98 R08: ffffed1002df483e R09: ffffed1002df483e
R10: ffff888016fa41ef R11: ffffed1002df483d R12: ffff888016fa4290
R13: ffff888016fa40a8 R14: ffffffffffffffff R15: ffff8880107afc60
FS:  0000000000000000(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
CR2: 00000000004e5420 CR3: 000000000667e000 CR4: 0000000000750ee0
PKRU: 55555554
Call Trace:
 <TASK>
 iommufd_ioas_destroy+0x53/0x70 drivers/iommu/iommufd/ioas.c:19
 iommufd_fops_release+0x1f7/0x370 drivers/iommu/iommufd/main.c:231
 __fput+0x26d/0xa40 fs/file_table.c:321
systemd-journald[137]: Data hash table of /run/log/journal/6ee5b4ede6d941feba9def5bf10a6d8d/system.journal has a fill level at 75.0 (5461 of 7281 items, 4194304 file size, 768 bytes per hash table item), suggesting rotation.
 ____fput+0x1e/0x30 fs/file_table.c:349
systemd-journald[137]: /run/log/journal/6ee5b4ede6d941feba9def5bf10a6d8d/system.journal: Journal header limits reached or header out-of-date, rotating.
 task_work_run+0x1a4/0x2d0 kernel/task_work.c:179
 exit_task_work include/linux/task_work.h:38 [inline]
 do_exit+0xaf3/0x2f60 kernel/exit.c:874
 do_group_exit+0xe0/0x2b0 kernel/exit.c:1024
 __do_sys_exit_group kernel/exit.c:1035 [inline]
 __se_sys_exit_group kernel/exit.c:1033 [inline]
 __x64_sys_exit_group+0x47/0x50 kernel/exit.c:1033
 do_syscall_x64 arch/x86/entry/common.c:50 [inline]
 do_syscall_64+0x3b/0x90 arch/x86/entry/common.c:80
 entry_SYSCALL_64_after_hwframe+0x72/0xdc
RIP: 0033:0x44de86
Code: Unable to access opcode bytes at 0x44de5c.
RSP: 002b:00007fff8410fbc8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
RAX: ffffffffffffffda RBX: 00000000004e5410 RCX: 000000000044de86
RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffffa8
R10: 0000000000411b40 R11: 0000000000000246 R12: 00000000004e5410
R13: 0000000000000001 R14: 0000000000000000 R15: 0000000000000001
 </TASK>
irq event stamp: 0
hardirqs last  enabled at (0): [<0000000000000000>] 0x0
hardirqs last disabled at (0): [<ffffffff8122d29a>] copy_process+0x256a/0x7650 kernel/fork.c:2448
softirqs last  enabled at (0): [<ffffffff8122d2e2>] copy_process+0x25b2/0x7650 kernel/fork.c:2452
softirqs last disabled at (0): [<0000000000000000>] 0x0
---[ end trace 0000000000000000 ]---
------------[ cut here ]------------
WARNING: CPU: 1 PID: 556 at drivers/iommu/iommufd/io_pagetable.c:1158 iopt_remove_access+0xb5/0xd0 drivers/iommu/iommufd/io_pagetable.c:1157
Modules linked in:
CPU: 1 PID: 556 Comm: syz-executor321 Tainted: G    B   W          6.4.0-rc6-5ca8bbe2b782+ #1
Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
RIP: 0010:iopt_remove_access+0xb5/0xd0 drivers/iommu/iommufd/io_pagetable.c:1157
Code: 45 85 e4 75 29 e8 4b 2d 0b fe 4c 89 ef e8 33 eb e8 fd 48 89 df e8 2b eb e8 fd 5b 41 5c 41 5d 5d c3 cc cc cc cc e8 2b 2d 0b fe <0f> 0b eb b9 e8 22 2d 0b fe 0f 0b eb ce e8 b9 1d 67 fe eb 90 0f 1f
RSP: 0018:ffff88801647fbb8 EFLAGS: 00010246
RAX: 0000000000000000 RBX: ffff8880150e58a8 RCX: 0000000000000000
RDX: 0000000000000000 RSI: ffff88801675ca00 RDI: 0000000000000002
RBP: ffff88801647fbd0 R08: ffffed1002a1cb33 R09: ffffed1002a1cb33
R10: ffff8880150e5993 R11: ffffed1002a1cb32 R12: ffff888019d92400
R13: ffff8880150e59e8 R14: ffffffff835430e0 R15: ffff88801647fe68
FS:  0000000001a0a3c0(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
CR2: 0000000020000140 CR3: 00000000111e0000 CR4: 0000000000750ee0
PKRU: 55555554
Call Trace:
 <TASK>
 __iommufd_access_detach+0x1c2/0x2b0 drivers/iommu/iommufd/device.c:971
 iommufd_access_change_pt+0x149/0x270 drivers/iommu/iommufd/device.c:1006
 iommufd_access_replace+0xb4/0x120 drivers/iommu/iommufd/device.c:1042
 iommufd_test_access_replace_ioas drivers/iommu/iommufd/selftest.c:1025 [inline]
 iommufd_test+0x103d/0x3f00 drivers/iommu/iommufd/selftest.c:1252
 iommufd_fops_ioctl+0x37d/0x510 drivers/iommu/iommufd/main.c:378
 vfs_ioctl fs/ioctl.c:51 [inline]
 __do_sys_ioctl fs/ioctl.c:870 [inline]
 __se_sys_ioctl fs/ioctl.c:856 [inline]
 __x64_sys_ioctl+0x1a3/0x230 fs/ioctl.c:856
 do_syscall_x64 arch/x86/entry/common.c:50 [inline]
 do_syscall_64+0x3b/0x90 arch/x86/entry/common.c:80
 entry_SYSCALL_64_after_hwframe+0x72/0xdc
RIP: 0033:0x44ff3d
Code: db 48 89 d8 5b 5d 41 5c 41 5d 41 5e c3 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 c7 c1 a8 ff ff ff f7 d8 64 89 01 48
RSP: 002b:00007fff8410fc18 EFLAGS: 00000246 ORIG_RAX: 0000000000000010
RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 000000000044ff3d
RDX: 0000000020000000 RSI: 0000000000003ba0 RDI: 0000000000000003
RBP: 0000000000000001 R08: 0000000000411b40 R09: 0000000000411b40
R10: 0000000000411b40 R11: 0000000000000246 R12: 0000000000000001
R13: 0000000000000000 R14: 00000000004004e8 R15: 0000000000000000
 </TASK>
irq event stamp: 0
hardirqs last  enabled at (0): [<0000000000000000>] 0x0
hardirqs last disabled at (0): [<ffffffff8122d29a>] copy_process+0x256a/0x7650 kernel/fork.c:2448
softirqs last  enabled at (0): [<ffffffff8122d2e2>] copy_process+0x25b2/0x7650 kernel/fork.c:2452
softirqs last disabled at (0): [<0000000000000000>] 0x0
---[ end trace 0000000000000000 ]---
------------[ cut here ]------------
WARNING: CPU: 1 PID: 556 at drivers/iommu/iommufd/io_pagetable.c:1158 iopt_remove_access+0xb5/0xd0 drivers/iommu/iommufd/io_pagetable.c:1157
Modules linked in:
CPU: 1 PID: 556 Comm: syz-executor321 Tainted: G    B   W          6.4.0-rc6-5ca8bbe2b782+ #1
Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
RIP: 0010:iopt_remove_access+0xb5/0xd0 drivers/iommu/iommufd/io_pagetable.c:1157
Code: 45 85 e4 75 29 e8 4b 2d 0b fe 4c 89 ef e8 33 eb e8 fd 48 89 df e8 2b eb e8 fd 5b 41 5c 41 5d 5d c3 cc cc cc cc e8 2b 2d 0b fe <0f> 0b eb b9 e8 22 2d 0b fe 0f 0b eb ce e8 b9 1d 67 fe eb 90 0f 1f
RSP: 0018:ffff88801647fbd0 EFLAGS: 00010246
RAX: 0000000000000000 RBX: ffff8880150e58a8 RCX: 0000000000000000
RDX: 0000000000000000 RSI: ffff88801675ca00 RDI: 0000000000000002
RBP: ffff88801647fbe8 R08: ffffed1002a1cb33 R09: ffffed1002a1cb33
R10: ffff8880150e5993 R11: ffffed1002a1cb32 R12: ffff888019d8fc00
R13: ffff8880150e59e8 R14: ffff888013c08800 R15: 0000000000000000
FS:  0000000000000000(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
CR2: 00000000004e5420 CR3: 0000000014616000 CR4: 0000000000750ee0
PKRU: 55555554
Call Trace:
 <TASK>
 iommufd_access_destroy_object+0x65/0x170 drivers/iommu/iommufd/device.c:875
 iommufd_object_destroy_user+0x18e/0x220 drivers/iommu/iommufd/main.c:163
 iommufd_access_destroy+0x43/0x70 drivers/iommu/iommufd/device.c:938
 iommufd_test_staccess_release+0x8d/0xd0 drivers/iommu/iommufd/selftest.c:918
 __fput+0x26d/0xa40 fs/file_table.c:321
 ____fput+0x1e/0x30 fs/file_table.c:349
 task_work_run+0x1a4/0x2d0 kernel/task_work.c:179
 exit_task_work include/linux/task_work.h:38 [inline]
 do_exit+0xaf3/0x2f60 kernel/exit.c:874
 do_group_exit+0xe0/0x2b0 kernel/exit.c:1024
 __do_sys_exit_group kernel/exit.c:1035 [inline]
 __se_sys_exit_group kernel/exit.c:1033 [inline]
 __x64_sys_exit_group+0x47/0x50 kernel/exit.c:1033
 do_syscall_x64 arch/x86/entry/common.c:50 [inline]
 do_syscall_64+0x3b/0x90 arch/x86/entry/common.c:80
 entry_SYSCALL_64_after_hwframe+0x72/0xdc
RIP: 0033:0x44de86
Code: Unable to access opcode bytes at 0x44de5c.
RSP: 002b:00007fff8410fbc8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
RAX: ffffffffffffffda RBX: 00000000004e5410 RCX: 000000000044de86
RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffffa8
R10: 0000000000411b40 R11: 0000000000000246 R12: 00000000004e5410
R13: 0000000000000001 R14: 0000000000000000 R15: 0000000000000001
 </TASK>
irq event stamp: 0
hardirqs last  enabled at (0): [<0000000000000000>] 0x0
hardirqs last disabled at (0): [<ffffffff8122d29a>] copy_process+0x256a/0x7650 kernel/fork.c:2448
softirqs last  enabled at (0): [<ffffffff8122d2e2>] copy_process+0x25b2/0x7650 kernel/fork.c:2452
softirqs last disabled at (0): [<0000000000000000>] 0x0
---[ end trace 0000000000000000 ]---
------------[ cut here ]------------
WARNING: CPU: 1 PID: 556 at drivers/iommu/iommufd/io_pagetable.c:663 iopt_destroy_table+0x15f/0x1b0 drivers/iommu/iommufd/io_pagetable.c:663
Modules linked in:
CPU: 1 PID: 556 Comm: syz-executor321 Tainted: G    B   W          6.4.0-rc6-5ca8bbe2b782+ #1
Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
RIP: 0010:iopt_destroy_table+0x15f/0x1b0 drivers/iommu/iommufd/io_pagetable.c:663
Code: 5b 41 5c 41 5d 41 5e 5d c3 cc cc cc cc e8 c9 53 0b fe 0f 0b e9 51 ff ff ff e8 bd 53 0b fe 0f 0b e9 76 ff ff ff e8 b1 53 0b fe <0f> 0b eb 9e e8 a8 53 0b fe 0f 0b e8 a1 53 0b fe 5b 41 5c 41 5d 41
RSP: 0018:ffff88801647fb78 EFLAGS: 00010246
RAX: 0000000000000000 RBX: 0000000000000000 RCX: 0000000000000000
RDX: 0000000000000000 RSI: ffff88801675ca00 RDI: 0000000000000002
RBP: ffff88801647fb98 R08: ffffed1002a1cb3e R09: ffffed1002a1cb3e
R10: ffff8880150e59ef R11: ffffed1002a1cb3d R12: ffff8880150e5a90
R13: ffff8880150e58a8 R14: ffffffffffffffff R15: ffff88801647fc60
FS:  0000000000000000(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
CR2: 00000000004e5420 CR3: 0000000014616000 CR4: 0000000000750ee0
PKRU: 55555554
Call Trace:
 <TASK>
 iommufd_ioas_destroy+0x53/0x70 drivers/iommu/iommufd/ioas.c:19
 iommufd_fops_release+0x1f7/0x370 drivers/iommu/iommufd/main.c:231
 __fput+0x26d/0xa40 fs/file_table.c:321
 ____fput+0x1e/0x30 fs/file_table.c:349
 task_work_run+0x1a4/0x2d0 kernel/task_work.c:179
 exit_task_work include/linux/task_work.h:38 [inline]
 do_exit+0xaf3/0x2f60 kernel/exit.c:874
 do_group_exit+0xe0/0x2b0 kernel/exit.c:1024
 __do_sys_exit_group kernel/exit.c:1035 [inline]
 __se_sys_exit_group kernel/exit.c:1033 [inline]
 __x64_sys_exit_group+0x47/0x50 kernel/exit.c:1033
 do_syscall_x64 arch/x86/entry/common.c:50 [inline]
 do_syscall_64+0x3b/0x90 arch/x86/entry/common.c:80
 entry_SYSCALL_64_after_hwframe+0x72/0xdc
RIP: 0033:0x44de86
Code: Unable to access opcode bytes at 0x44de5c.
RSP: 002b:00007fff8410fbc8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
RAX: ffffffffffffffda RBX: 00000000004e5410 RCX: 000000000044de86
RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffffa8
R10: 0000000000411b40 R11: 0000000000000246 R12: 00000000004e5410
R13: 0000000000000001 R14: 0000000000000000 R15: 0000000000000001
 </TASK>
irq event stamp: 0
hardirqs last  enabled at (0): [<0000000000000000>] 0x0
hardirqs last disabled at (0): [<ffffffff8122d29a>] copy_process+0x256a/0x7650 kernel/fork.c:2448
softirqs last  enabled at (0): [<ffffffff8122d2e2>] copy_process+0x25b2/0x7650 kernel/fork.c:2452
softirqs last disabled at (0): [<0000000000000000>] 0x0
---[ end trace 0000000000000000 ]---
------------[ cut here ]------------
WARNING: CPU: 1 PID: 557 at drivers/iommu/iommufd/io_pagetable.c:1158 iopt_remove_access+0xb5/0xd0 drivers/iommu/iommufd/io_pagetable.c:1157
Modules linked in:
CPU: 1 PID: 557 Comm: syz-executor321 Tainted: G    B   W          6.4.0-rc6-5ca8bbe2b782+ #1
Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
RIP: 0010:iopt_remove_access+0xb5/0xd0 drivers/iommu/iommufd/io_pagetable.c:1157
Code: 45 85 e4 75 29 e8 4b 2d 0b fe 4c 89 ef e8 33 eb e8 fd 48 89 df e8 2b eb e8 fd 5b 41 5c 41 5d 5d c3 cc cc cc cc e8 2b 2d 0b fe <0f> 0b eb b9 e8 22 2d 0b fe 0f 0b eb ce e8 b9 1d 67 fe eb 90 0f 1f
RSP: 0018:ffff88800f077bb8 EFLAGS: 00010246
RAX: 0000000000000000 RBX: ffff88800e81c8a8 RCX: 0000000000000000
RDX: 0000000000000000 RSI: ffff8880129b8000 RDI: 0000000000000002
RBP: ffff88800f077bd0 R08: ffffed1001d03933 R09: ffffed1001d03933
R10: ffff88800e81c993 R11: ffffed1001d03932 R12: ffff888019dd3000
R13: ffff88800e81c9e8 R14: ffffffff835430e0 R15: ffff88800f077e68
FS:  0000000001a0a3c0(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
CR2: 0000000020000140 CR3: 0000000015100000 CR4: 0000000000750ee0
PKRU: 55555554
Call Trace:
 <TASK>
 __iommufd_access_detach+0x1c2/0x2b0 drivers/iommu/iommufd/device.c:971
 iommufd_access_change_pt+0x149/0x270 drivers/iommu/iommufd/device.c:1006
 iommufd_access_replace+0xb4/0x120 drivers/iommu/iommufd/device.c:1042
 iommufd_test_access_replace_ioas drivers/iommu/iommufd/selftest.c:1025 [inline]
 iommufd_test+0x103d/0x3f00 drivers/iommu/iommufd/selftest.c:1252
 iommufd_fops_ioctl+0x37d/0x510 drivers/iommu/iommufd/main.c:378
 vfs_ioctl fs/ioctl.c:51 [inline]
 __do_sys_ioctl fs/ioctl.c:870 [inline]
 __se_sys_ioctl fs/ioctl.c:856 [inline]
 __x64_sys_ioctl+0x1a3/0x230 fs/ioctl.c:856
 do_syscall_x64 arch/x86/entry/common.c:50 [inline]
 do_syscall_64+0x3b/0x90 arch/x86/entry/common.c:80
 entry_SYSCALL_64_after_hwframe+0x72/0xdc
RIP: 0033:0x44ff3d
Code: db 48 89 d8 5b 5d 41 5c 41 5d 41 5e c3 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 c7 c1 a8 ff ff ff f7 d8 64 89 01 48
RSP: 002b:00007fff8410fc18 EFLAGS: 00000246 ORIG_RAX: 0000000000000010
RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 000000000044ff3d
RDX: 0000000020000000 RSI: 0000000000003ba0 RDI: 0000000000000003
RBP: 0000000000000001 R08: 0000000000411b40 R09: 0000000000411b40
R10: 0000000000411b40 R11: 0000000000000246 R12: 0000000000000001
R13: 0000000000000000 R14: 00000000004004e8 R15: 0000000000000000
 </TASK>
irq event stamp: 0
hardirqs last  enabled at (0): [<0000000000000000>] 0x0
hardirqs last disabled at (0): [<ffffffff8122d29a>] copy_process+0x256a/0x7650 kernel/fork.c:2448
softirqs last  enabled at (0): [<ffffffff8122d2e2>] copy_process+0x25b2/0x7650 kernel/fork.c:2452
softirqs last disabled at (0): [<0000000000000000>] 0x0
---[ end trace 0000000000000000 ]---
------------[ cut here ]------------
WARNING: CPU: 1 PID: 557 at drivers/iommu/iommufd/io_pagetable.c:1158 iopt_remove_access+0xb5/0xd0 drivers/iommu/iommufd/io_pagetable.c:1157
Modules linked in:
CPU: 1 PID: 557 Comm: syz-executor321 Tainted: G    B   W          6.4.0-rc6-5ca8bbe2b782+ #1
Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
RIP: 0010:iopt_remove_access+0xb5/0xd0 drivers/iommu/iommufd/io_pagetable.c:1157
Code: 45 85 e4 75 29 e8 4b 2d 0b fe 4c 89 ef e8 33 eb e8 fd 48 89 df e8 2b eb e8 fd 5b 41 5c 41 5d 5d c3 cc cc cc cc e8 2b 2d 0b fe <0f> 0b eb b9 e8 22 2d 0b fe 0f 0b eb ce e8 b9 1d 67 fe eb 90 0f 1f
RSP: 0018:ffff88800f077bd0 EFLAGS: 00010246
RAX: 0000000000000000 RBX: ffff88800e81c8a8 RCX: 0000000000000000
RDX: 0000000000000000 RSI: ffff8880129b8000 RDI: 0000000000000002
RBP: ffff88800f077be8 R08: ffffed1001d03933 R09: ffffed1001d03933
R10: ffff88800e81c993 R11: ffffed1001d03932 R12: ffff888019d93c00
R13: ffff88800e81c9e8 R14: ffff88800ff3b800 R15: 0000000000000000
FS:  0000000000000000(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
CR2: 00000000004e5420 CR3: 000000000667e000 CR4: 0000000000750ee0
PKRU: 55555554
Call Trace:
 <TASK>
 iommufd_access_destroy_object+0x65/0x170 drivers/iommu/iommufd/device.c:875
 iommufd_object_destroy_user+0x18e/0x220 drivers/iommu/iommufd/main.c:163
 iommufd_access_destroy+0x43/0x70 drivers/iommu/iommufd/device.c:938
 iommufd_test_staccess_release+0x8d/0xd0 drivers/iommu/iommufd/selftest.c:918
 __fput+0x26d/0xa40 fs/file_table.c:321
 ____fput+0x1e/0x30 fs/file_table.c:349
 task_work_run+0x1a4/0x2d0 kernel/task_work.c:179
 exit_task_work include/linux/task_work.h:38 [inline]
 do_exit+0xaf3/0x2f60 kernel/exit.c:874
 do_group_exit+0xe0/0x2b0 kernel/exit.c:1024
 __do_sys_exit_group kernel/exit.c:1035 [inline]
 __se_sys_exit_group kernel/exit.c:1033 [inline]
 __x64_sys_exit_group+0x47/0x50 kernel/exit.c:1033
 do_syscall_x64 arch/x86/entry/common.c:50 [inline]
 do_syscall_64+0x3b/0x90 arch/x86/entry/common.c:80
 entry_SYSCALL_64_after_hwframe+0x72/0xdc
RIP: 0033:0x44de86
Code: Unable to access opcode bytes at 0x44de5c.
RSP: 002b:00007fff8410fbc8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
RAX: ffffffffffffffda RBX: 00000000004e5410 RCX: 000000000044de86
RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffffa8
R10: 0000000000411b40 R11: 0000000000000246 R12: 00000000004e5410
R13: 0000000000000001 R14: 0000000000000000 R15: 0000000000000001
 </TASK>
irq event stamp: 0
hardirqs last  enabled at (0): [<0000000000000000>] 0x0
hardirqs last disabled at (0): [<ffffffff8122d29a>] copy_process+0x256a/0x7650 kernel/fork.c:2448
softirqs last  enabled at (0): [<ffffffff8122d2e2>] copy_process+0x25b2/0x7650 kernel/fork.c:2452
softirqs last disabled at (0): [<0000000000000000>] 0x0
---[ end trace 0000000000000000 ]---
------------[ cut here ]------------
WARNING: CPU: 1 PID: 557 at drivers/iommu/iommufd/io_pagetable.c:663 iopt_destroy_table+0x15f/0x1b0 drivers/iommu/iommufd/io_pagetable.c:663
Modules linked in:
CPU: 1 PID: 557 Comm: syz-executor321 Tainted: G    B   W          6.4.0-rc6-5ca8bbe2b782+ #1
Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
RIP: 0010:iopt_destroy_table+0x15f/0x1b0 drivers/iommu/iommufd/io_pagetable.c:663
Code: 5b 41 5c 41 5d 41 5e 5d c3 cc cc cc cc e8 c9 53 0b fe 0f 0b e9 51 ff ff ff e8 bd 53 0b fe 0f 0b e9 76 ff ff ff e8 b1 53 0b fe <0f> 0b eb 9e e8 a8 53 0b fe 0f 0b e8 a1 53 0b fe 5b 41 5c 41 5d 41
RSP: 0018:ffff88800f077b78 EFLAGS: 00010246
RAX: 0000000000000000 RBX: 0000000000000000 RCX: 0000000000000000
RDX: 0000000000000000 RSI: ffff8880129b8000 RDI: 0000000000000002
RBP: ffff88800f077b98 R08: ffffed1001d0393e R09: ffffed1001d0393e
R10: ffff88800e81c9ef R11: ffffed1001d0393d R12: ffff88800e81ca90
R13: ffff88800e81c8a8 R14: ffffffffffffffff R15: ffff88800f077c60
FS:  0000000000000000(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
CR2: 00000000004e5420 CR3: 000000000667e000 CR4: 0000000000750ee0
PKRU: 55555554
Call Trace:
 <TASK>
 iommufd_ioas_destroy+0x53/0x70 drivers/iommu/iommufd/ioas.c:19
 iommufd_fops_release+0x1f7/0x370 drivers/iommu/iommufd/main.c:231
 __fput+0x26d/0xa40 fs/file_table.c:321
 ____fput+0x1e/0x30 fs/file_table.c:349
 task_work_run+0x1a4/0x2d0 kernel/task_work.c:179
 exit_task_work include/linux/task_work.h:38 [inline]
 do_exit+0xaf3/0x2f60 kernel/exit.c:874
 do_group_exit+0xe0/0x2b0 kernel/exit.c:1024
 __do_sys_exit_group kernel/exit.c:1035 [inline]
 __se_sys_exit_group kernel/exit.c:1033 [inline]
 __x64_sys_exit_group+0x47/0x50 kernel/exit.c:1033
 do_syscall_x64 arch/x86/entry/common.c:50 [inline]
 do_syscall_64+0x3b/0x90 arch/x86/entry/common.c:80
 entry_SYSCALL_64_after_hwframe+0x72/0xdc
RIP: 0033:0x44de86
Code: Unable to access opcode bytes at 0x44de5c.
RSP: 002b:00007fff8410fbc8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
RAX: ffffffffffffffda RBX: 00000000004e5410 RCX: 000000000044de86
RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffffa8
R10: 0000000000411b40 R11: 0000000000000246 R12: 00000000004e5410
R13: 0000000000000001 R14: 0000000000000000 R15: 0000000000000001
 </TASK>
irq event stamp: 0
hardirqs last  enabled at (0): [<0000000000000000>] 0x0
hardirqs last disabled at (0): [<ffffffff8122d29a>] copy_process+0x256a/0x7650 kernel/fork.c:2448
softirqs last  enabled at (0): [<ffffffff8122d2e2>] copy_process+0x25b2/0x7650 kernel/fork.c:2452
softirqs last disabled at (0): [<0000000000000000>] 0x0
---[ end trace 0000000000000000 ]---
------------[ cut here ]------------
WARNING: CPU: 1 PID: 558 at drivers/iommu/iommufd/io_pagetable.c:1158 iopt_remove_access+0xb5/0xd0 drivers/iommu/iommufd/io_pagetable.c:1157
Modules linked in:
CPU: 1 PID: 558 Comm: syz-executor321 Tainted: G    B   W          6.4.0-rc6-5ca8bbe2b782+ #1
Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
RIP: 0010:iopt_remove_access+0xb5/0xd0 drivers/iommu/iommufd/io_pagetable.c:1157
Code: 45 85 e4 75 29 e8 4b 2d 0b fe 4c 89 ef e8 33 eb e8 fd 48 89 df e8 2b eb e8 fd 5b 41 5c 41 5d 5d c3 cc cc cc cc e8 2b 2d 0b fe <0f> 0b eb b9 e8 22 2d 0b fe 0f 0b eb ce e8 b9 1d 67 fe eb 90 0f 1f
RSP: 0018:ffff888022c17bb8 EFLAGS: 00010246
RAX: 0000000000000000 RBX: ffff88800ec240a8 RCX: 0000000000000000
RDX: 0000000000000000 RSI: ffff8880146cca00 RDI: 0000000000000002
RBP: ffff888022c17bd0 R08: ffffed1001d84833 R09: ffffed1001d84833
R10: ffff88800ec24193 R11: ffffed1001d84832 R12: ffff888019d61c00
R13: ffff88800ec241e8 R14: ffffffff835430e0 R15: ffff888022c17e68
FS:  0000000001a0a3c0(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
CR2: 0000000020000140 CR3: 0000000021fc6000 CR4: 0000000000750ee0
PKRU: 55555554
Call Trace:
 <TASK>
 __iommufd_access_detach+0x1c2/0x2b0 drivers/iommu/iommufd/device.c:971
 iommufd_access_change_pt+0x149/0x270 drivers/iommu/iommufd/device.c:1006
 iommufd_access_replace+0xb4/0x120 drivers/iommu/iommufd/device.c:1042
 iommufd_test_access_replace_ioas drivers/iommu/iommufd/selftest.c:1025 [inline]
 iommufd_test+0x103d/0x3f00 drivers/iommu/iommufd/selftest.c:1252
 iommufd_fops_ioctl+0x37d/0x510 drivers/iommu/iommufd/main.c:378
 vfs_ioctl fs/ioctl.c:51 [inline]
 __do_sys_ioctl fs/ioctl.c:870 [inline]
 __se_sys_ioctl fs/ioctl.c:856 [inline]
 __x64_sys_ioctl+0x1a3/0x230 fs/ioctl.c:856
 do_syscall_x64 arch/x86/entry/common.c:50 [inline]
 do_syscall_64+0x3b/0x90 arch/x86/entry/common.c:80
 entry_SYSCALL_64_after_hwframe+0x72/0xdc
RIP: 0033:0x44ff3d
Code: db 48 89 d8 5b 5d 41 5c 41 5d 41 5e c3 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 c7 c1 a8 ff ff ff f7 d8 64 89 01 48
RSP: 002b:00007fff8410fc18 EFLAGS: 00000246 ORIG_RAX: 0000000000000010
RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 000000000044ff3d
RDX: 0000000020000000 RSI: 0000000000003ba0 RDI: 0000000000000003
RBP: 0000000000000001 R08: 0000000000411b40 R09: 0000000000411b40
R10: 0000000000411b40 R11: 0000000000000246 R12: 0000000000000001
R13: 0000000000000000 R14: 00000000004004e8 R15: 0000000000000000
 </TASK>
irq event stamp: 0
hardirqs last  enabled at (0): [<0000000000000000>] 0x0
hardirqs last disabled at (0): [<ffffffff8122d29a>] copy_process+0x256a/0x7650 kernel/fork.c:2448
softirqs last  enabled at (0): [<ffffffff8122d2e2>] copy_process+0x25b2/0x7650 kernel/fork.c:2452
softirqs last disabled at (0): [<0000000000000000>] 0x0
---[ end trace 0000000000000000 ]---
------------[ cut here ]------------
WARNING: CPU: 1 PID: 558 at drivers/iommu/iommufd/io_pagetable.c:1158 iopt_remove_access+0xb5/0xd0 drivers/iommu/iommufd/io_pagetable.c:1157
Modules linked in:
CPU: 1 PID: 558 Comm: syz-executor321 Tainted: G    B   W          6.4.0-rc6-5ca8bbe2b782+ #1
Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
RIP: 0010:iopt_remove_access+0xb5/0xd0 drivers/iommu/iommufd/io_pagetable.c:1157
Code: 45 85 e4 75 29 e8 4b 2d 0b fe 4c 89 ef e8 33 eb e8 fd 48 89 df e8 2b eb e8 fd 5b 41 5c 41 5d 5d c3 cc cc cc cc e8 2b 2d 0b fe <0f> 0b eb b9 e8 22 2d 0b fe 0f 0b eb ce e8 b9 1d 67 fe eb 90 0f 1f
RSP: 0018:ffff888022c17bd0 EFLAGS: 00010246
RAX: 0000000000000000 RBX: ffff88800ec240a8 RCX: 0000000000000000
RDX: 0000000000000000 RSI: ffff8880146cca00 RDI: 0000000000000002
RBP: ffff888022c17be8 R08: ffffed1001d84833 R09: ffffed1001d84833
R10: ffff88800ec24193 R11: ffffed1001d84832 R12: ffff888019dd1000
R13: ffff88800ec241e8 R14: ffff88801094b700 R15: 0000000000000000
FS:  0000000000000000(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
CR2: 00000000004e5420 CR3: 000000000667e000 CR4: 0000000000750ee0
PKRU: 55555554
Call Trace:
 <TASK>
 iommufd_access_destroy_object+0x65/0x170 drivers/iommu/iommufd/device.c:875
 iommufd_object_destroy_user+0x18e/0x220 drivers/iommu/iommufd/main.c:163
 iommufd_access_destroy+0x43/0x70 drivers/iommu/iommufd/device.c:938
 iommufd_test_staccess_release+0x8d/0xd0 drivers/iommu/iommufd/selftest.c:918
 __fput+0x26d/0xa40 fs/file_table.c:321
 ____fput+0x1e/0x30 fs/file_table.c:349
 task_work_run+0x1a4/0x2d0 kernel/task_work.c:179
 exit_task_work include/linux/task_work.h:38 [inline]
 do_exit+0xaf3/0x2f60 kernel/exit.c:874
 do_group_exit+0xe0/0x2b0 kernel/exit.c:1024
 __do_sys_exit_group kernel/exit.c:1035 [inline]
 __se_sys_exit_group kernel/exit.c:1033 [inline]
 __x64_sys_exit_group+0x47/0x50 kernel/exit.c:1033
 do_syscall_x64 arch/x86/entry/common.c:50 [inline]
 do_syscall_64+0x3b/0x90 arch/x86/entry/common.c:80
 entry_SYSCALL_64_after_hwframe+0x72/0xdc
RIP: 0033:0x44de86
Code: Unable to access opcode bytes at 0x44de5c.
RSP: 002b:00007fff8410fbc8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
RAX: ffffffffffffffda RBX: 00000000004e5410 RCX: 000000000044de86
RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffffa8
R10: 0000000000411b40 R11: 0000000000000246 R12: 00000000004e5410
R13: 0000000000000001 R14: 0000000000000000 R15: 0000000000000001
 </TASK>
irq event stamp: 0
hardirqs last  enabled at (0): [<0000000000000000>] 0x0
hardirqs last disabled at (0): [<ffffffff8122d29a>] copy_process+0x256a/0x7650 kernel/fork.c:2448
softirqs last  enabled at (0): [<ffffffff8122d2e2>] copy_process+0x25b2/0x7650 kernel/fork.c:2452
softirqs last disabled at (0): [<0000000000000000>] 0x0
---[ end trace 0000000000000000 ]---
------------[ cut here ]------------
WARNING: CPU: 1 PID: 558 at drivers/iommu/iommufd/io_pagetable.c:663 iopt_destroy_table+0x15f/0x1b0 drivers/iommu/iommufd/io_pagetable.c:663
Modules linked in:
CPU: 1 PID: 558 Comm: syz-executor321 Tainted: G    B   W          6.4.0-rc6-5ca8bbe2b782+ #1
Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
RIP: 0010:iopt_destroy_table+0x15f/0x1b0 drivers/iommu/iommufd/io_pagetable.c:663
Code: 5b 41 5c 41 5d 41 5e 5d c3 cc cc cc cc e8 c9 53 0b fe 0f 0b e9 51 ff ff ff e8 bd 53 0b fe 0f 0b e9 76 ff ff ff e8 b1 53 0b fe <0f> 0b eb 9e e8 a8 53 0b fe 0f 0b e8 a1 53 0b fe 5b 41 5c 41 5d 41
RSP: 0018:ffff888022c17b78 EFLAGS: 00010246
RAX: 0000000000000000 RBX: 0000000000000000 RCX: 0000000000000000
RDX: 0000000000000000 RSI: ffff8880146cca00 RDI: 0000000000000002
RBP: ffff888022c17b98 R08: ffffed1001d8483e R09: ffffed1001d8483e
R10: ffff88800ec241ef R11: ffffed1001d8483d R12: ffff88800ec24290
R13: ffff88800ec240a8 R14: ffffffffffffffff R15: ffff888022c17c60
FS:  0000000000000000(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
CR2: 00000000004e5420 CR3: 000000000667e000 CR4: 0000000000750ee0
PKRU: 55555554
Call Trace:
 <TASK>
 iommufd_ioas_destroy+0x53/0x70 drivers/iommu/iommufd/ioas.c:19
 iommufd_fops_release+0x1f7/0x370 drivers/iommu/iommufd/main.c:231
 __fput+0x26d/0xa40 fs/file_table.c:321
 ____fput+0x1e/0x30 fs/file_table.c:349
 task_work_run+0x1a4/0x2d0 kernel/task_work.c:179
 exit_task_work include/linux/task_work.h:38 [inline]
 do_exit+0xaf3/0x2f60 kernel/exit.c:874
 do_group_exit+0xe0/0x2b0 kernel/exit.c:1024
 __do_sys_exit_group kernel/exit.c:1035 [inline]
 __se_sys_exit_group kernel/exit.c:1033 [inline]
 __x64_sys_exit_group+0x47/0x50 kernel/exit.c:1033
 do_syscall_x64 arch/x86/entry/common.c:50 [inline]
 do_syscall_64+0x3b/0x90 arch/x86/entry/common.c:80
 entry_SYSCALL_64_after_hwframe+0x72/0xdc
RIP: 0033:0x44de86
Code: Unable to access opcode bytes at 0x44de5c.
RSP: 002b:00007fff8410fbc8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
RAX: ffffffffffffffda RBX: 00000000004e5410 RCX: 000000000044de86
RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffffa8
R10: 0000000000411b40 R11: 0000000000000246 R12: 00000000004e5410
R13: 0000000000000001 R14: 0000000000000000 R15: 0000000000000001
 </TASK>
irq event stamp: 0
hardirqs last  enabled at (0): [<0000000000000000>] 0x0
hardirqs last disabled at (0): [<ffffffff8122d29a>] copy_process+0x256a/0x7650 kernel/fork.c:2448
softirqs last  enabled at (0): [<ffffffff8122d2e2>] copy_process+0x25b2/0x7650 kernel/fork.c:2452
softirqs last disabled at (0): [<0000000000000000>] 0x0
---[ end trace 0000000000000000 ]---
------------[ cut here ]------------
WARNING: CPU: 1 PID: 559 at drivers/iommu/iommufd/io_pagetable.c:1158 iopt_remove_access+0xb5/0xd0 drivers/iommu/iommufd/io_pagetable.c:1157
Modules linked in:
CPU: 1 PID: 559 Comm: syz-executor321 Tainted: G    B   W          6.4.0-rc6-5ca8bbe2b782+ #1
Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
RIP: 0010:iopt_remove_access+0xb5/0xd0 drivers/iommu/iommufd/io_pagetable.c:1157
Code: 45 85 e4 75 29 e8 4b 2d 0b fe 4c 89 ef e8 33 eb e8 fd 48 89 df e8 2b eb e8 fd 5b 41 5c 41 5d 5d c3 cc cc cc cc e8 2b 2d 0b fe <0f> 0b eb b9 e8 22 2d 0b fe 0f 0b eb ce e8 b9 1d 67 fe eb 90 0f 1f
RSP: 0018:ffff888018bdfbb8 EFLAGS: 00010246
RAX: 0000000000000000 RBX: ffff88800bcdd8a8 RCX: 0000000000000000
RDX: 0000000000000000 RSI: ffff888014ffa500 RDI: 0000000000000002
RBP: ffff888018bdfbd0 R08: ffffed100179bb33 R09: ffffed100179bb33
R10: ffff88800bcdd993 R11: ffffed100179bb32 R12: ffff888019d9cc00
R13: ffff88800bcdd9e8 R14: ffffffff835430e0 R15: ffff888018bdfe68
FS:  0000000001a0a3c0(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
CR2: 0000000020000140 CR3: 000000001a3ce000 CR4: 0000000000750ee0
PKRU: 55555554
Call Trace:
 <TASK>
 __iommufd_access_detach+0x1c2/0x2b0 drivers/iommu/iommufd/device.c:971
 iommufd_access_change_pt+0x149/0x270 drivers/iommu/iommufd/device.c:1006
 iommufd_access_replace+0xb4/0x120 drivers/iommu/iommufd/device.c:1042
 iommufd_test_access_replace_ioas drivers/iommu/iommufd/selftest.c:1025 [inline]
 iommufd_test+0x103d/0x3f00 drivers/iommu/iommufd/selftest.c:1252
 iommufd_fops_ioctl+0x37d/0x510 drivers/iommu/iommufd/main.c:378
 vfs_ioctl fs/ioctl.c:51 [inline]
 __do_sys_ioctl fs/ioctl.c:870 [inline]
 __se_sys_ioctl fs/ioctl.c:856 [inline]
 __x64_sys_ioctl+0x1a3/0x230 fs/ioctl.c:856
 do_syscall_x64 arch/x86/entry/common.c:50 [inline]
 do_syscall_64+0x3b/0x90 arch/x86/entry/common.c:80
 entry_SYSCALL_64_after_hwframe+0x72/0xdc
RIP: 0033:0x44ff3d
Code: db 48 89 d8 5b 5d 41 5c 41 5d 41 5e c3 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 c7 c1 a8 ff ff ff f7 d8 64 89 01 48
RSP: 002b:00007fff8410fc18 EFLAGS: 00000246 ORIG_RAX: 0000000000000010
RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 000000000044ff3d
RBP: 0000000000000001 R08: 0000000000411b40 R09: 0000000000411b40
R10: 0000000000411b40 R11: 0000000000000246 R12: 0000000000000001
R13: 0000000000000000 R14: 00000000004004e8 R15: 0000000000000000
 </TASK>
irq event stamp: 0
hardirqs last  enabled at (0): [<0000000000000000>] 0x0
hardirqs last disabled at (0): [<ffffffff8122d29a>] copy_process+0x256a/0x7650 kernel/fork.c:2448
softirqs last  enabled at (0): [<ffffffff8122d2e2>] copy_process+0x25b2/0x7650 kernel/fork.c:2452
softirqs last disabled at (0): [<0000000000000000>] 0x0
---[ end trace 0000000000000000 ]---
------------[ cut here ]------------
WARNING: CPU: 1 PID: 559 at drivers/iommu/iommufd/io_pagetable.c:1158 iopt_remove_access+0xb5/0xd0 drivers/iommu/iommufd/io_pagetable.c:1157
Modules linked in:
CPU: 1 PID: 559 Comm: syz-executor321 Tainted: G    B   W          6.4.0-rc6-5ca8bbe2b782+ #1
Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
RIP: 0010:iopt_remove_access+0xb5/0xd0 drivers/iommu/iommufd/io_pagetable.c:1157
Code: 45 85 e4 75 29 e8 4b 2d 0b fe 4c 89 ef e8 33 eb e8 fd 48 89 df e8 2b eb e8 fd 5b 41 5c 41 5d 5d c3 cc cc cc cc e8 2b 2d 0b fe <0f> 0b eb b9 e8 22 2d 0b fe 0f 0b eb ce e8 b9 1d 67 fe eb 90 0f 1f
RSP: 0018:ffff888018bdfbd0 EFLAGS: 00010246
RAX: 0000000000000000 RBX: ffff88800bcdd8a8 RCX: 0000000000000000
RDX: 0000000000000000 RSI: ffff888014ffa500 RDI: 0000000000000002
RBP: ffff888018bdfbe8 R08: ffffed100179bb33 R09: ffffed100179bb33
R10: ffff88800bcdd993 R11: ffffed100179bb32 R12: ffff888019d61400
R13: ffff88800bcdd9e8 R14: ffff88802117db00 R15: 0000000000000000
FS:  0000000000000000(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
CR2: 00000000004e5420 CR3: 000000000667e000 CR4: 0000000000750ee0
PKRU: 55555554
Call Trace:
 <TASK>
 iommufd_access_destroy_object+0x65/0x170 drivers/iommu/iommufd/device.c:875
 iommufd_object_destroy_user+0x18e/0x220 drivers/iommu/iommufd/main.c:163
 iommufd_access_destroy+0x43/0x70 drivers/iommu/iommufd/device.c:938
 iommufd_test_staccess_release+0x8d/0xd0 drivers/iommu/iommufd/selftest.c:918
 __fput+0x26d/0xa40 fs/file_table.c:321
 ____fput+0x1e/0x30 fs/file_table.c:349
 task_work_run+0x1a4/0x2d0 kernel/task_work.c:179
 exit_task_work include/linux/task_work.h:38 [inline]
 do_exit+0xaf3/0x2f60 kernel/exit.c:874
 do_group_exit+0xe0/0x2b0 kernel/exit.c:1024
 __do_sys_exit_group kernel/exit.c:1035 [inline]
 __se_sys_exit_group kernel/exit.c:1033 [inline]
 __x64_sys_exit_group+0x47/0x50 kernel/exit.c:1033
 do_syscall_x64 arch/x86/entry/common.c:50 [inline]
 do_syscall_64+0x3b/0x90 arch/x86/entry/common.c:80
 entry_SYSCALL_64_after_hwframe+0x72/0xdc
RIP: 0033:0x44de86
Code: Unable to access opcode bytes at 0x44de5c.
RSP: 002b:00007fff8410fbc8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
RAX: ffffffffffffffda RBX: 00000000004e5410 RCX: 000000000044de86
RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffffa8
R10: 0000000000411b40 R11: 0000000000000246 R12: 00000000004e5410
R13: 0000000000000001 R14: 0000000000000000 R15: 0000000000000001
 </TASK>
irq event stamp: 0
hardirqs last  enabled at (0): [<0000000000000000>] 0x0
hardirqs last disabled at (0): [<ffffffff8122d29a>] copy_process+0x256a/0x7650 kernel/fork.c:2448
softirqs last  enabled at (0): [<ffffffff8122d2e2>] copy_process+0x25b2/0x7650 kernel/fork.c:2452
softirqs last disabled at (0): [<0000000000000000>] 0x0
---[ end trace 0000000000000000 ]---
------------[ cut here ]------------
WARNING: CPU: 1 PID: 559 at drivers/iommu/iommufd/io_pagetable.c:663 iopt_destroy_table+0x15f/0x1b0 drivers/iommu/iommufd/io_pagetable.c:663
Modules linked in:
CPU: 1 PID: 559 Comm: syz-executor321 Tainted: G    B   W          6.4.0-rc6-5ca8bbe2b782+ #1
Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
RIP: 0010:iopt_destroy_table+0x15f/0x1b0 drivers/iommu/iommufd/io_pagetable.c:663
Code: 5b 41 5c 41 5d 41 5e 5d c3 cc cc cc cc e8 c9 53 0b fe 0f 0b e9 51 ff ff ff e8 bd 53 0b fe 0f 0b e9 76 ff ff ff e8 b1 53 0b fe <0f> 0b eb 9e e8 a8 53 0b fe 0f 0b e8 a1 53 0b fe 5b 41 5c 41 5d 41
RSP: 0018:ffff888018bdfb78 EFLAGS: 00010246
RAX: 0000000000000000 RBX: 0000000000000000 RCX: 0000000000000000
RDX: 0000000000000000 RSI: ffff888014ffa500 RDI: 0000000000000002
RBP: ffff888018bdfb98 R08: ffffed100179bb3e R09: ffffed100179bb3e
R10: ffff88800bcdd9ef R11: ffffed100179bb3d R12: ffff88800bcdda90
R13: ffff88800bcdd8a8 R14: ffffffffffffffff R15: ffff888018bdfc60
FS:  0000000000000000(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
CR2: 00000000004e5420 CR3: 000000000667e000 CR4: 0000000000750ee0
PKRU: 55555554
Call Trace:
 <TASK>
 iommufd_ioas_destroy+0x53/0x70 drivers/iommu/iommufd/ioas.c:19
 iommufd_fops_release+0x1f7/0x370 drivers/iommu/iommufd/main.c:231
 __fput+0x26d/0xa40 fs/file_table.c:321
 ____fput+0x1e/0x30 fs/file_table.c:349
 task_work_run+0x1a4/0x2d0 kernel/task_work.c:179
 exit_task_work include/linux/task_work.h:38 [inline]
 do_exit+0xaf3/0x2f60 kernel/exit.c:874
 do_group_exit+0xe0/0x2b0 kernel/exit.c:1024
 __do_sys_exit_group kernel/exit.c:1035 [inline]
 __se_sys_exit_group kernel/exit.c:1033 [inline]
 __x64_sys_exit_group+0x47/0x50 kernel/exit.c:1033
 do_syscall_x64 arch/x86/entry/common.c:50 [inline]
 do_syscall_64+0x3b/0x90 arch/x86/entry/common.c:80
 entry_SYSCALL_64_after_hwframe+0x72/0xdc
RIP: 0033:0x44de86
Code: Unable to access opcode bytes at 0x44de5c.
RSP: 002b:00007fff8410fbc8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
RAX: ffffffffffffffda RBX: 00000000004e5410 RCX: 000000000044de86
RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffffa8
R10: 0000000000411b40 R11: 0000000000000246 R12: 00000000004e5410
R13: 0000000000000001 R14: 0000000000000000 R15: 0000000000000001
 </TASK>
irq event stamp: 0
hardirqs last  enabled at (0): [<0000000000000000>] 0x0
hardirqs last disabled at (0): [<ffffffff8122d29a>] copy_process+0x256a/0x7650 kernel/fork.c:2448
softirqs last  enabled at (0): [<ffffffff8122d2e2>] copy_process+0x25b2/0x7650 kernel/fork.c:2452
softirqs last disabled at (0): [<0000000000000000>] 0x0
---[ end trace 0000000000000000 ]---
------------[ cut here ]------------
WARNING: CPU: 1 PID: 560 at drivers/iommu/iommufd/io_pagetable.c:1158 iopt_remove_access+0xb5/0xd0 drivers/iommu/iommufd/io_pagetable.c:1157
Modules linked in:
CPU: 1 PID: 560 Comm: syz-executor321 Tainted: G    B   W          6.4.0-rc6-5ca8bbe2b782+ #1
Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
RIP: 0010:iopt_remove_access+0xb5/0xd0 drivers/iommu/iommufd/io_pagetable.c:1157
Code: 45 85 e4 75 29 e8 4b 2d 0b fe 4c 89 ef e8 33 eb e8 fd 48 89 df e8 2b eb e8 fd 5b 41 5c 41 5d 5d c3 cc cc cc cc e8 2b 2d 0b fe <0f> 0b eb b9 e8 22 2d 0b fe 0f 0b eb ce e8 b9 1d 67 fe eb 90 0f 1f
RSP: 0018:ffff88800f077bb8 EFLAGS: 00010246
RAX: 0000000000000000 RBX: ffff88800f4578a8 RCX: 0000000000000000
RDX: 0000000000000000 RSI: ffff88801195a500 RDI: 0000000000000002
RBP: ffff88800f077bd0 R08: ffffed1001e8af33 R09: ffffed1001e8af33
R10: ffff88800f457993 R11: ffffed1001e8af32 R12: ffff888019dac800
R13: ffff88800f4579e8 R14: ffffffff835430e0 R15: ffff88800f077e68
FS:  0000000001a0a3c0(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
CR2: 0000000020000140 CR3: 000000001a3ce000 CR4: 0000000000750ee0
PKRU: 55555554
Call Trace:
 <TASK>
 __iommufd_access_detach+0x1c2/0x2b0 drivers/iommu/iommufd/device.c:971
 iommufd_access_change_pt+0x149/0x270 drivers/iommu/iommufd/device.c:1006
 iommufd_access_replace+0xb4/0x120 drivers/iommu/iommufd/device.c:1042
 iommufd_test_access_replace_ioas drivers/iommu/iommufd/selftest.c:1025 [inline]
 iommufd_test+0x103d/0x3f00 drivers/iommu/iommufd/selftest.c:1252
 iommufd_fops_ioctl+0x37d/0x510 drivers/iommu/iommufd/main.c:378
 vfs_ioctl fs/ioctl.c:51 [inline]
 __do_sys_ioctl fs/ioctl.c:870 [inline]
 __se_sys_ioctl fs/ioctl.c:856 [inline]
 __x64_sys_ioctl+0x1a3/0x230 fs/ioctl.c:856
 do_syscall_x64 arch/x86/entry/common.c:50 [inline]
 do_syscall_64+0x3b/0x90 arch/x86/entry/common.c:80
 entry_SYSCALL_64_after_hwframe+0x72/0xdc
RIP: 0033:0x44ff3d
Code: db 48 89 d8 5b 5d 41 5c 41 5d 41 5e c3 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 c7 c1 a8 ff ff ff f7 d8 64 89 01 48
RSP: 002b:00007fff8410fc18 EFLAGS: 00000246 ORIG_RAX: 0000000000000010
RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 000000000044ff3d
RDX: 0000000020000000 RSI: 0000000000003ba0 RDI: 0000000000000003
RBP: 0000000000000001 R08: 0000000000411b40 R09: 0000000000411b40
R10: 0000000000411b40 R11: 0000000000000246 R12: 0000000000000001
R13: 0000000000000000 R14: 00000000004004e8 R15: 0000000000000000
 </TASK>
irq event stamp: 0
hardirqs last  enabled at (0): [<0000000000000000>] 0x0
hardirqs last disabled at (0): [<ffffffff8122d29a>] copy_process+0x256a/0x7650 kernel/fork.c:2448
softirqs last  enabled at (0): [<ffffffff8122d2e2>] copy_process+0x25b2/0x7650 kernel/fork.c:2452
softirqs last disabled at (0): [<0000000000000000>] 0x0
---[ end trace 0000000000000000 ]---
------------[ cut here ]------------
WARNING: CPU: 1 PID: 560 at drivers/iommu/iommufd/io_pagetable.c:1158 iopt_remove_access+0xb5/0xd0 drivers/iommu/iommufd/io_pagetable.c:1157
Modules linked in:
CPU: 1 PID: 560 Comm: syz-executor321 Tainted: G    B   W          6.4.0-rc6-5ca8bbe2b782+ #1
Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
RIP: 0010:iopt_remove_access+0xb5/0xd0 drivers/iommu/iommufd/io_pagetable.c:1157
Code: 45 85 e4 75 29 e8 4b 2d 0b fe 4c 89 ef e8 33 eb e8 fd 48 89 df e8 2b eb e8 fd 5b 41 5c 41 5d 5d c3 cc cc cc cc e8 2b 2d 0b fe <0f> 0b eb b9 e8 22 2d 0b fe 0f 0b eb ce e8 b9 1d 67 fe eb 90 0f 1f
RSP: 0018:ffff88800f077bd0 EFLAGS: 00010246
RAX: 0000000000000000 RBX: ffff88800f4578a8 RCX: 0000000000000000
RDX: 0000000000000000 RSI: ffff88801195a500 RDI: 0000000000000002
RBP: ffff88800f077be8 R08: ffffed1001e8af33 R09: ffffed1001e8af33
R10: ffff88800f457993 R11: ffffed1001e8af32 R12: ffff888019d9ec00
R13: ffff88800f4579e8 R14: ffff88801a35c100 R15: 0000000000000000
FS:  0000000000000000(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
CR2: 00000000004e5420 CR3: 000000001503a000 CR4: 0000000000750ee0
PKRU: 55555554
Call Trace:
 <TASK>
 iommufd_access_destroy_object+0x65/0x170 drivers/iommu/iommufd/device.c:875
 iommufd_object_destroy_user+0x18e/0x220 drivers/iommu/iommufd/main.c:163
 iommufd_access_destroy+0x43/0x70 drivers/iommu/iommufd/device.c:938
 iommufd_test_staccess_release+0x8d/0xd0 drivers/iommu/iommufd/selftest.c:918
 __fput+0x26d/0xa40 fs/file_table.c:321
 ____fput+0x1e/0x30 fs/file_table.c:349
 task_work_run+0x1a4/0x2d0 kernel/task_work.c:179
 exit_task_work include/linux/task_work.h:38 [inline]
 do_exit+0xaf3/0x2f60 kernel/exit.c:874
 do_group_exit+0xe0/0x2b0 kernel/exit.c:1024
 __do_sys_exit_group kernel/exit.c:1035 [inline]
 __se_sys_exit_group kernel/exit.c:1033 [inline]
 __x64_sys_exit_group+0x47/0x50 kernel/exit.c:1033
 do_syscall_x64 arch/x86/entry/common.c:50 [inline]
 do_syscall_64+0x3b/0x90 arch/x86/entry/common.c:80
 entry_SYSCALL_64_after_hwframe+0x72/0xdc
RIP: 0033:0x44de86
Code: Unable to access opcode bytes at 0x44de5c.
RSP: 002b:00007fff8410fbc8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
RAX: ffffffffffffffda RBX: 00000000004e5410 RCX: 000000000044de86
RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffffa8
R10: 0000000000411b40 R11: 0000000000000246 R12: 00000000004e5410
R13: 0000000000000001 R14: 0000000000000000 R15: 0000000000000001
 </TASK>
irq event stamp: 0
hardirqs last  enabled at (0): [<0000000000000000>] 0x0
hardirqs last disabled at (0): [<ffffffff8122d29a>] copy_process+0x256a/0x7650 kernel/fork.c:2448
softirqs last  enabled at (0): [<ffffffff8122d2e2>] copy_process+0x25b2/0x7650 kernel/fork.c:2452
softirqs last disabled at (0): [<0000000000000000>] 0x0
---[ end trace 0000000000000000 ]---
------------[ cut here ]------------
WARNING: CPU: 1 PID: 560 at drivers/iommu/iommufd/io_pagetable.c:663 iopt_destroy_table+0x15f/0x1b0 drivers/iommu/iommufd/io_pagetable.c:663
Modules linked in:
CPU: 1 PID: 560 Comm: syz-executor321 Tainted: G    B   W          6.4.0-rc6-5ca8bbe2b782+ #1
Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
RIP: 0010:iopt_destroy_table+0x15f/0x1b0 drivers/iommu/iommufd/io_pagetable.c:663
Code: 5b 41 5c 41 5d 41 5e 5d c3 cc cc cc cc e8 c9 53 0b fe 0f 0b e9 51 ff ff ff e8 bd 53 0b fe 0f 0b e9 76 ff ff ff e8 b1 53 0b fe <0f> 0b eb 9e e8 a8 53 0b fe 0f 0b e8 a1 53 0b fe 5b 41 5c 41 5d 41
RSP: 0018:ffff88800f077b78 EFLAGS: 00010246
RAX: 0000000000000000 RBX: 0000000000000000 RCX: 0000000000000000
RDX: 0000000000000000 RSI: ffff88801195a500 RDI: 0000000000000002
RBP: ffff88800f077b98 R08: ffffed1001e8af3e R09: ffffed1001e8af3e
R10: ffff88800f4579ef R11: ffffed1001e8af3d R12: ffff88800f457a90
R13: ffff88800f4578a8 R14: ffffffffffffffff R15: ffff88800f077c60
FS:  0000000000000000(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
CR2: 00000000004e5420 CR3: 000000001503a000 CR4: 0000000000750ee0
PKRU: 55555554
Call Trace:
 <TASK>
 iommufd_ioas_destroy+0x53/0x70 drivers/iommu/iommufd/ioas.c:19
 iommufd_fops_release+0x1f7/0x370 drivers/iommu/iommufd/main.c:231
 __fput+0x26d/0xa40 fs/file_table.c:321
 ____fput+0x1e/0x30 fs/file_table.c:349
 task_work_run+0x1a4/0x2d0 kernel/task_work.c:179
 exit_task_work include/linux/task_work.h:38 [inline]
 do_exit+0xaf3/0x2f60 kernel/exit.c:874
 do_group_exit+0xe0/0x2b0 kernel/exit.c:1024
 __do_sys_exit_group kernel/exit.c:1035 [inline]
 __se_sys_exit_group kernel/exit.c:1033 [inline]
 __x64_sys_exit_group+0x47/0x50 kernel/exit.c:1033
 do_syscall_x64 arch/x86/entry/common.c:50 [inline]
 do_syscall_64+0x3b/0x90 arch/x86/entry/common.c:80
 entry_SYSCALL_64_after_hwframe+0x72/0xdc
RIP: 0033:0x44de86
Code: Unable to access opcode bytes at 0x44de5c.
RSP: 002b:00007fff8410fbc8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
RAX: ffffffffffffffda RBX: 00000000004e5410 RCX: 000000000044de86
RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffffa8
R10: 0000000000411b40 R11: 0000000000000246 R12: 00000000004e5410
R13: 0000000000000001 R14: 0000000000000000 R15: 0000000000000001
 </TASK>
irq event stamp: 0
hardirqs last  enabled at (0): [<0000000000000000>] 0x0
hardirqs last disabled at (0): [<ffffffff8122d29a>] copy_process+0x256a/0x7650 kernel/fork.c:2448
softirqs last  enabled at (0): [<ffffffff8122d2e2>] copy_process+0x25b2/0x7650 kernel/fork.c:2452
softirqs last disabled at (0): [<0000000000000000>] 0x0
---[ end trace 0000000000000000 ]---
------------[ cut here ]------------
WARNING: CPU: 1 PID: 561 at drivers/iommu/iommufd/io_pagetable.c:1158 iopt_remove_access+0xb5/0xd0 drivers/iommu/iommufd/io_pagetable.c:1157
Modules linked in:
CPU: 1 PID: 561 Comm: syz-executor321 Tainted: G    B   W          6.4.0-rc6-5ca8bbe2b782+ #1
Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
RIP: 0010:iopt_remove_access+0xb5/0xd0 drivers/iommu/iommufd/io_pagetable.c:1157
Code: 45 85 e4 75 29 e8 4b 2d 0b fe 4c 89 ef e8 33 eb e8 fd 48 89 df e8 2b eb e8 fd 5b 41 5c 41 5d 5d c3 cc cc cc cc e8 2b 2d 0b fe <0f> 0b eb b9 e8 22 2d 0b fe 0f 0b eb ce e8 b9 1d 67 fe eb 90 0f 1f
RSP: 0018:ffff88801681fbb8 EFLAGS: 00010246
RAX: 0000000000000000 RBX: ffff8880168210a8 RCX: 0000000000000000
RDX: 0000000000000000 RSI: ffff888012e52500 RDI: 0000000000000002
RBP: ffff88801681fbd0 R08: ffffed1002d04233 R09: ffffed1002d04233
R10: ffff888016821193 R11: ffffed1002d04232 R12: ffff888019dbdc00
R13: ffff8880168211e8 R14: ffffffff835430e0 R15: ffff88801681fe68
FS:  0000000001a0a3c0(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
CR2: 0000000020000140 CR3: 0000000012fee000 CR4: 0000000000750ee0
PKRU: 55555554
Call Trace:
 <TASK>
 __iommufd_access_detach+0x1c2/0x2b0 drivers/iommu/iommufd/device.c:971
 iommufd_access_change_pt+0x149/0x270 drivers/iommu/iommufd/device.c:1006
 iommufd_access_replace+0xb4/0x120 drivers/iommu/iommufd/device.c:1042
 iommufd_test_access_replace_ioas drivers/iommu/iommufd/selftest.c:1025 [inline]
 iommufd_test+0x103d/0x3f00 drivers/iommu/iommufd/selftest.c:1252
 iommufd_fops_ioctl+0x37d/0x510 drivers/iommu/iommufd/main.c:378
 vfs_ioctl fs/ioctl.c:51 [inline]
 __do_sys_ioctl fs/ioctl.c:870 [inline]
 __se_sys_ioctl fs/ioctl.c:856 [inline]
 __x64_sys_ioctl+0x1a3/0x230 fs/ioctl.c:856
 do_syscall_x64 arch/x86/entry/common.c:50 [inline]
 do_syscall_64+0x3b/0x90 arch/x86/entry/common.c:80
 entry_SYSCALL_64_after_hwframe+0x72/0xdc
RIP: 0033:0x44ff3d
Code: db 48 89 d8 5b 5d 41 5c 41 5d 41 5e c3 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 c7 c1 a8 ff ff ff f7 d8 64 89 01 48
RSP: 002b:00007fff8410fc18 EFLAGS: 00000246 ORIG_RAX: 0000000000000010
RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 000000000044ff3d
RDX: 0000000020000000 RSI: 0000000000003ba0 RDI: 0000000000000003
RBP: 0000000000000001 R08: 0000000000411b40 R09: 0000000000411b40
R10: 0000000000411b40 R11: 0000000000000246 R12: 0000000000000001
R13: 0000000000000000 R14: 00000000004004e8 R15: 0000000000000000
 </TASK>
irq event stamp: 0
hardirqs last  enabled at (0): [<0000000000000000>] 0x0
hardirqs last disabled at (0): [<ffffffff8122d29a>] copy_process+0x256a/0x7650 kernel/fork.c:2448
softirqs last  enabled at (0): [<ffffffff8122d2e2>] copy_process+0x25b2/0x7650 kernel/fork.c:2452
softirqs last disabled at (0): [<0000000000000000>] 0x0
---[ end trace 0000000000000000 ]---
------------[ cut here ]------------
WARNING: CPU: 1 PID: 561 at drivers/iommu/iommufd/io_pagetable.c:1158 iopt_remove_access+0xb5/0xd0 drivers/iommu/iommufd/io_pagetable.c:1157
Modules linked in:
CPU: 1 PID: 561 Comm: syz-executor321 Tainted: G    B   W          6.4.0-rc6-5ca8bbe2b782+ #1
Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
RIP: 0010:iopt_remove_access+0xb5/0xd0 drivers/iommu/iommufd/io_pagetable.c:1157
Code: 45 85 e4 75 29 e8 4b 2d 0b fe 4c 89 ef e8 33 eb e8 fd 48 89 df e8 2b eb e8 fd 5b 41 5c 41 5d 5d c3 cc cc cc cc e8 2b 2d 0b fe <0f> 0b eb b9 e8 22 2d 0b fe 0f 0b eb ce e8 b9 1d 67 fe eb 90 0f 1f
RSP: 0018:ffff88801681fbd0 EFLAGS: 00010246
RAX: 0000000000000000 RBX: ffff8880168210a8 RCX: 0000000000000000
RDX: 0000000000000000 RSI: ffff888012e52500 RDI: 0000000000000002
RBP: ffff88801681fbe8 R08: ffffed1002d04233 R09: ffffed1002d04233
R10: ffff888016821193 R11: ffffed1002d04232 R12: ffff888019dae400
R13: ffff8880168211e8 R14: ffff88801a0b4200 R15: 0000000000000000
FS:  0000000000000000(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
CR2: 00000000004e5420 CR3: 000000000667e000 CR4: 0000000000750ee0
PKRU: 55555554
Call Trace:
 <TASK>
 iommufd_access_destroy_object+0x65/0x170 drivers/iommu/iommufd/device.c:875
 iommufd_object_destroy_user+0x18e/0x220 drivers/iommu/iommufd/main.c:163
 iommufd_access_destroy+0x43/0x70 drivers/iommu/iommufd/device.c:938
 iommufd_test_staccess_release+0x8d/0xd0 drivers/iommu/iommufd/selftest.c:918
 __fput+0x26d/0xa40 fs/file_table.c:321
 ____fput+0x1e/0x30 fs/file_table.c:349
 task_work_run+0x1a4/0x2d0 kernel/task_work.c:179
 exit_task_work include/linux/task_work.h:38 [inline]
 do_exit+0xaf3/0x2f60 kernel/exit.c:874
 do_group_exit+0xe0/0x2b0 kernel/exit.c:1024
 __do_sys_exit_group kernel/exit.c:1035 [inline]
 __se_sys_exit_group kernel/exit.c:1033 [inline]
 __x64_sys_exit_group+0x47/0x50 kernel/exit.c:1033
 do_syscall_x64 arch/x86/entry/common.c:50 [inline]
 do_syscall_64+0x3b/0x90 arch/x86/entry/common.c:80
 entry_SYSCALL_64_after_hwframe+0x72/0xdc
RIP: 0033:0x44de86
Code: Unable to access opcode bytes at 0x44de5c.
RSP: 002b:00007fff8410fbc8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
RAX: ffffffffffffffda RBX: 00000000004e5410 RCX: 000000000044de86
RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffffa8
R10: 0000000000411b40 R11: 0000000000000246 R12: 00000000004e5410
R13: 0000000000000001 R14: 0000000000000000 R15: 0000000000000001
 </TASK>
irq event stamp: 0
hardirqs last  enabled at (0): [<0000000000000000>] 0x0
hardirqs last disabled at (0): [<ffffffff8122d29a>] copy_process+0x256a/0x7650 kernel/fork.c:2448
softirqs last  enabled at (0): [<ffffffff8122d2e2>] copy_process+0x25b2/0x7650 kernel/fork.c:2452
softirqs last disabled at (0): [<0000000000000000>] 0x0
---[ end trace 0000000000000000 ]---
------------[ cut here ]------------
WARNING: CPU: 1 PID: 561 at drivers/iommu/iommufd/io_pagetable.c:663 iopt_destroy_table+0x15f/0x1b0 drivers/iommu/iommufd/io_pagetable.c:663
Modules linked in:
CPU: 1 PID: 561 Comm: syz-executor321 Tainted: G    B   W          6.4.0-rc6-5ca8bbe2b782+ #1
Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
RIP: 0010:iopt_destroy_table+0x15f/0x1b0 drivers/iommu/iommufd/io_pagetable.c:663
Code: 5b 41 5c 41 5d 41 5e 5d c3 cc cc cc cc e8 c9 53 0b fe 0f 0b e9 51 ff ff ff e8 bd 53 0b fe 0f 0b e9 76 ff ff ff e8 b1 53 0b fe <0f> 0b eb 9e e8 a8 53 0b fe 0f 0b e8 a1 53 0b fe 5b 41 5c 41 5d 41
RSP: 0018:ffff88801681fb78 EFLAGS: 00010246
RAX: 0000000000000000 RBX: 0000000000000000 RCX: 0000000000000000
RDX: 0000000000000000 RSI: ffff888012e52500 RDI: 0000000000000002
RBP: ffff88801681fb98 R08: ffffed1002d0423e R09: ffffed1002d0423e
R10: ffff8880168211ef R11: ffffed1002d0423d R12: ffff888016821290
R13: ffff8880168210a8 R14: ffffffffffffffff R15: ffff88801681fc60
FS:  0000000000000000(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
CR2: 00000000004e5420 CR3: 000000000667e000 CR4: 0000000000750ee0
PKRU: 55555554
Call Trace:
 <TASK>
 iommufd_ioas_destroy+0x53/0x70 drivers/iommu/iommufd/ioas.c:19
 iommufd_fops_release+0x1f7/0x370 drivers/iommu/iommufd/main.c:231
 __fput+0x26d/0xa40 fs/file_table.c:321
 ____fput+0x1e/0x30 fs/file_table.c:349
 task_work_run+0x1a4/0x2d0 kernel/task_work.c:179
 exit_task_work include/linux/task_work.h:38 [inline]
 do_exit+0xaf3/0x2f60 kernel/exit.c:874
 do_group_exit+0xe0/0x2b0 kernel/exit.c:1024
 __do_sys_exit_group kernel/exit.c:1035 [inline]
 __se_sys_exit_group kernel/exit.c:1033 [inline]
 __x64_sys_exit_group+0x47/0x50 kernel/exit.c:1033
 do_syscall_x64 arch/x86/entry/common.c:50 [inline]
 do_syscall_64+0x3b/0x90 arch/x86/entry/common.c:80
 entry_SYSCALL_64_after_hwframe+0x72/0xdc
RIP: 0033:0x44de86
Code: Unable to access opcode bytes at 0x44de5c.
RSP: 002b:00007fff8410fbc8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
RAX: ffffffffffffffda RBX: 00000000004e5410 RCX: 000000000044de86
RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffffa8
R10: 0000000000411b40 R11: 0000000000000246 R12: 00000000004e5410
R13: 0000000000000001 R14: 0000000000000000 R15: 0000000000000001
 </TASK>
irq event stamp: 0
hardirqs last  enabled at (0): [<0000000000000000>] 0x0
hardirqs last disabled at (0): [<ffffffff8122d29a>] copy_process+0x256a/0x7650 kernel/fork.c:2448
softirqs last  enabled at (0): [<ffffffff8122d2e2>] copy_process+0x25b2/0x7650 kernel/fork.c:2452
softirqs last disabled at (0): [<0000000000000000>] 0x0
---[ end trace 0000000000000000 ]---
------------[ cut here ]------------
WARNING: CPU: 1 PID: 562 at drivers/iommu/iommufd/io_pagetable.c:1158 iopt_remove_access+0xb5/0xd0 drivers/iommu/iommufd/io_pagetable.c:1157
Modules linked in:
CPU: 1 PID: 562 Comm: syz-executor321 Tainted: G    B   W          6.4.0-rc6-5ca8bbe2b782+ #1
Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
RIP: 0010:iopt_remove_access+0xb5/0xd0 drivers/iommu/iommufd/io_pagetable.c:1157
Code: 45 85 e4 75 29 e8 4b 2d 0b fe 4c 89 ef e8 33 eb e8 fd 48 89 df e8 2b eb e8 fd 5b 41 5c 41 5d 5d c3 cc cc cc cc e8 2b 2d 0b fe <0f> 0b eb b9 e8 22 2d 0b fe 0f 0b eb ce e8 b9 1d 67 fe eb 90 0f 1f
RSP: 0018:ffff88800bc77bb8 EFLAGS: 00010246
RAX: 0000000000000000 RBX: ffff88801884b0a8 RCX: 0000000000000000
RDX: 0000000000000000 RSI: ffff888012e54a00 RDI: 0000000000000002
RBP: ffff88800bc77bd0 R08: ffffed1003109633 R09: ffffed1003109633
R10: ffff88801884b193 R11: ffffed1003109632 R12: ffff888019fec000
R13: ffff88801884b1e8 R14: ffffffff835430e0 R15: ffff88800bc77e68
FS:  0000000001a0a3c0(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
CR2: 0000000020000140 CR3: 0000000014bd4000 CR4: 0000000000750ee0
PKRU: 55555554
Call Trace:
 <TASK>
 __iommufd_access_detach+0x1c2/0x2b0 drivers/iommu/iommufd/device.c:971
 iommufd_access_change_pt+0x149/0x270 drivers/iommu/iommufd/device.c:1006
 iommufd_access_replace+0xb4/0x120 drivers/iommu/iommufd/device.c:1042
 iommufd_test_access_replace_ioas drivers/iommu/iommufd/selftest.c:1025 [inline]
 iommufd_test+0x103d/0x3f00 drivers/iommu/iommufd/selftest.c:1252
 iommufd_fops_ioctl+0x37d/0x510 drivers/iommu/iommufd/main.c:378
 vfs_ioctl fs/ioctl.c:51 [inline]
 __do_sys_ioctl fs/ioctl.c:870 [inline]
 __se_sys_ioctl fs/ioctl.c:856 [inline]
 __x64_sys_ioctl+0x1a3/0x230 fs/ioctl.c:856
 do_syscall_x64 arch/x86/entry/common.c:50 [inline]
 do_syscall_64+0x3b/0x90 arch/x86/entry/common.c:80
 entry_SYSCALL_64_after_hwframe+0x72/0xdc
RIP: 0033:0x44ff3d
Code: db 48 89 d8 5b 5d 41 5c 41 5d 41 5e c3 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 c7 c1 a8 ff ff ff f7 d8 64 89 01 48
RSP: 002b:00007fff8410fc18 EFLAGS: 00000246 ORIG_RAX: 0000000000000010
RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 000000000044ff3d
RDX: 0000000020000000 RSI: 0000000000003ba0 RDI: 0000000000000003
RBP: 0000000000000001 R08: 0000000000411b40 R09: 0000000000411b40
R10: 0000000000411b40 R11: 0000000000000246 R12: 0000000000000001
R13: 0000000000000000 R14: 00000000004004e8 R15: 0000000000000000
 </TASK>
irq event stamp: 0
hardirqs last  enabled at (0): [<0000000000000000>] 0x0
hardirqs last disabled at (0): [<ffffffff8122d29a>] copy_process+0x256a/0x7650 kernel/fork.c:2448
softirqs last  enabled at (0): [<ffffffff8122d2e2>] copy_process+0x25b2/0x7650 kernel/fork.c:2452
softirqs last disabled at (0): [<0000000000000000>] 0x0
---[ end trace 0000000000000000 ]---
------------[ cut here ]------------
WARNING: CPU: 1 PID: 562 at drivers/iommu/iommufd/io_pagetable.c:1158 iopt_remove_access+0xb5/0xd0 drivers/iommu/iommufd/io_pagetable.c:1157
Modules linked in:
CPU: 1 PID: 562 Comm: syz-executor321 Tainted: G    B   W          6.4.0-rc6-5ca8bbe2b782+ #1
Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
RIP: 0010:iopt_remove_access+0xb5/0xd0 drivers/iommu/iommufd/io_pagetable.c:1157
Code: 45 85 e4 75 29 e8 4b 2d 0b fe 4c 89 ef e8 33 eb e8 fd 48 89 df e8 2b eb e8 fd 5b 41 5c 41 5d 5d c3 cc cc cc cc e8 2b 2d 0b fe <0f> 0b eb b9 e8 22 2d 0b fe 0f 0b eb ce e8 b9 1d 67 fe eb 90 0f 1f
RSP: 0018:ffff88800bc77bd0 EFLAGS: 00010246
RAX: 0000000000000000 RBX: ffff88801884b0a8 RCX: 0000000000000000
RDX: 0000000000000000 RSI: ffff888012e54a00 RDI: 0000000000000002
RBP: ffff88800bc77be8 R08: ffffed1003109633 R09: ffffed1003109633
R10: ffff88801884b193 R11: ffffed1003109632 R12: ffff888019dbcc00
R13: ffff88801884b1e8 R14: ffff88801a0a0600 R15: 0000000000000000
FS:  0000000000000000(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
CR2: 00000000004e5420 CR3: 000000000667e000 CR4: 0000000000750ee0
PKRU: 55555554
Call Trace:
 <TASK>
 iommufd_access_destroy_object+0x65/0x170 drivers/iommu/iommufd/device.c:875
 iommufd_object_destroy_user+0x18e/0x220 drivers/iommu/iommufd/main.c:163
 iommufd_access_destroy+0x43/0x70 drivers/iommu/iommufd/device.c:938
 iommufd_test_staccess_release+0x8d/0xd0 drivers/iommu/iommufd/selftest.c:918
 __fput+0x26d/0xa40 fs/file_table.c:321
 ____fput+0x1e/0x30 fs/file_table.c:349
 task_work_run+0x1a4/0x2d0 kernel/task_work.c:179
 exit_task_work include/linux/task_work.h:38 [inline]
 do_exit+0xaf3/0x2f60 kernel/exit.c:874
 do_group_exit+0xe0/0x2b0 kernel/exit.c:1024
 __do_sys_exit_group kernel/exit.c:1035 [inline]
 __se_sys_exit_group kernel/exit.c:1033 [inline]
 __x64_sys_exit_group+0x47/0x50 kernel/exit.c:1033
 do_syscall_x64 arch/x86/entry/common.c:50 [inline]
 do_syscall_64+0x3b/0x90 arch/x86/entry/common.c:80
 entry_SYSCALL_64_after_hwframe+0x72/0xdc
RIP: 0033:0x44de86
Code: Unable to access opcode bytes at 0x44de5c.
RSP: 002b:00007fff8410fbc8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
RAX: ffffffffffffffda RBX: 00000000004e5410 RCX: 000000000044de86
RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffffa8
R13: 0000000000000001 R14: 0000000000000000 R15: 0000000000000001
 </TASK>
irq event stamp: 0
hardirqs last  enabled at (0): [<0000000000000000>] 0x0
hardirqs last disabled at (0): [<ffffffff8122d29a>] copy_process+0x256a/0x7650 kernel/fork.c:2448
softirqs last  enabled at (0): [<ffffffff8122d2e2>] copy_process+0x25b2/0x7650 kernel/fork.c:2452
softirqs last disabled at (0): [<0000000000000000>] 0x0
---[ end trace 0000000000000000 ]---
------------[ cut here ]------------
WARNING: CPU: 1 PID: 562 at drivers/iommu/iommufd/io_pagetable.c:663 iopt_destroy_table+0x15f/0x1b0 drivers/iommu/iommufd/io_pagetable.c:663
Modules linked in:
CPU: 1 PID: 562 Comm: syz-executor321 Tainted: G    B   W          6.4.0-rc6-5ca8bbe2b782+ #1
Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
RIP: 0010:iopt_destroy_table+0x15f/0x1b0 drivers/iommu/iommufd/io_pagetable.c:663
Code: 5b 41 5c 41 5d 41 5e 5d c3 cc cc cc cc e8 c9 53 0b fe 0f 0b e9 51 ff ff ff e8 bd 53 0b fe 0f 0b e9 76 ff ff ff e8 b1 53 0b fe <0f> 0b eb 9e e8 a8 53 0b fe 0f 0b e8 a1 53 0b fe 5b 41 5c 41 5d 41
RSP: 0018:ffff88800bc77b78 EFLAGS: 00010246
RAX: 0000000000000000 RBX: 0000000000000000 RCX: 0000000000000000
RDX: 0000000000000000 RSI: ffff888012e54a00 RDI: 0000000000000002
RBP: ffff88800bc77b98 R08: ffffed100310963e R09: ffffed100310963e
R10: ffff88801884b1ef R11: ffffed100310963d R12: ffff88801884b290
R13: ffff88801884b0a8 R14: ffffffffffffffff R15: ffff88800bc77c60
FS:  0000000000000000(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
CR2: 00000000004e5420 CR3: 0000000014616000 CR4: 0000000000750ee0
PKRU: 55555554
Call Trace:
 <TASK>
 iommufd_ioas_destroy+0x53/0x70 drivers/iommu/iommufd/ioas.c:19
 iommufd_fops_release+0x1f7/0x370 drivers/iommu/iommufd/main.c:231
 __fput+0x26d/0xa40 fs/file_table.c:321
 ____fput+0x1e/0x30 fs/file_table.c:349
 task_work_run+0x1a4/0x2d0 kernel/task_work.c:179
 exit_task_work include/linux/task_work.h:38 [inline]
 do_exit+0xaf3/0x2f60 kernel/exit.c:874
 do_group_exit+0xe0/0x2b0 kernel/exit.c:1024
 __do_sys_exit_group kernel/exit.c:1035 [inline]
 __se_sys_exit_group kernel/exit.c:1033 [inline]
 __x64_sys_exit_group+0x47/0x50 kernel/exit.c:1033
 do_syscall_x64 arch/x86/entry/common.c:50 [inline]
 do_syscall_64+0x3b/0x90 arch/x86/entry/common.c:80
 entry_SYSCALL_64_after_hwframe+0x72/0xdc
RIP: 0033:0x44de86
Code: Unable to access opcode bytes at 0x44de5c.
RSP: 002b:00007fff8410fbc8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
RAX: ffffffffffffffda RBX: 00000000004e5410 RCX: 000000000044de86
RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffffa8
R10: 0000000000411b40 R11: 0000000000000246 R12: 00000000004e5410
R13: 0000000000000001 R14: 0000000000000000 R15: 0000000000000001
 </TASK>
irq event stamp: 0
hardirqs last  enabled at (0): [<0000000000000000>] 0x0
hardirqs last disabled at (0): [<ffffffff8122d29a>] copy_process+0x256a/0x7650 kernel/fork.c:2448
softirqs last  enabled at (0): [<ffffffff8122d2e2>] copy_process+0x25b2/0x7650 kernel/fork.c:2452
softirqs last disabled at (0): [<0000000000000000>] 0x0
---[ end trace 0000000000000000 ]---
------------[ cut here ]------------
WARNING: CPU: 1 PID: 563 at drivers/iommu/iommufd/io_pagetable.c:1158 iopt_remove_access+0xb5/0xd0 drivers/iommu/iommufd/io_pagetable.c:1157
Modules linked in:
CPU: 1 PID: 563 Comm: syz-executor321 Tainted: G    B   W          6.4.0-rc6-5ca8bbe2b782+ #1
Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
RIP: 0010:iopt_remove_access+0xb5/0xd0 drivers/iommu/iommufd/io_pagetable.c:1157
Code: 45 85 e4 75 29 e8 4b 2d 0b fe 4c 89 ef e8 33 eb e8 fd 48 89 df e8 2b eb e8 fd 5b 41 5c 41 5d 5d c3 cc cc cc cc e8 2b 2d 0b fe <0f> 0b eb b9 e8 22 2d 0b fe 0f 0b eb ce e8 b9 1d 67 fe eb 90 0f 1f
RSP: 0018:ffff888013c9fbb8 EFLAGS: 00010246
RAX: 0000000000000000 RBX: ffff8880119270a8 RCX: 0000000000000000
RDX: 0000000000000000 RSI: ffff888011958000 RDI: 0000000000000002
RBP: ffff888013c9fbd0 R08: ffffed1002324e33 R09: ffffed1002324e33
R10: ffff888011927193 R11: ffffed1002324e32 R12: ffff888019e10400
R13: ffff8880119271e8 R14: ffffffff835430e0 R15: ffff888013c9fe68
FS:  0000000001a0a3c0(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
CR2: 0000000020000140 CR3: 0000000014bd4000 CR4: 0000000000750ee0
PKRU: 55555554
Call Trace:
 <TASK>
 __iommufd_access_detach+0x1c2/0x2b0 drivers/iommu/iommufd/device.c:971
 iommufd_access_change_pt+0x149/0x270 drivers/iommu/iommufd/device.c:1006
 iommufd_access_replace+0xb4/0x120 drivers/iommu/iommufd/device.c:1042
 iommufd_test_access_replace_ioas drivers/iommu/iommufd/selftest.c:1025 [inline]
 iommufd_test+0x103d/0x3f00 drivers/iommu/iommufd/selftest.c:1252
 iommufd_fops_ioctl+0x37d/0x510 drivers/iommu/iommufd/main.c:378
 vfs_ioctl fs/ioctl.c:51 [inline]
 __do_sys_ioctl fs/ioctl.c:870 [inline]
 __se_sys_ioctl fs/ioctl.c:856 [inline]
 __x64_sys_ioctl+0x1a3/0x230 fs/ioctl.c:856
 do_syscall_x64 arch/x86/entry/common.c:50 [inline]
 do_syscall_64+0x3b/0x90 arch/x86/entry/common.c:80
 entry_SYSCALL_64_after_hwframe+0x72/0xdc
RIP: 0033:0x44ff3d
Code: db 48 89 d8 5b 5d 41 5c 41 5d 41 5e c3 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 c7 c1 a8 ff ff ff f7 d8 64 89 01 48
RSP: 002b:00007fff8410fc18 EFLAGS: 00000246 ORIG_RAX: 0000000000000010
RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 000000000044ff3d
RDX: 0000000020000000 RSI: 0000000000003ba0 RDI: 0000000000000003
RBP: 0000000000000001 R08: 0000000000411b40 R09: 0000000000411b40
R10: 0000000000411b40 R11: 0000000000000246 R12: 0000000000000001
R13: 0000000000000000 R14: 00000000004004e8 R15: 0000000000000000
 </TASK>
irq event stamp: 0
hardirqs last  enabled at (0): [<0000000000000000>] 0x0
hardirqs last disabled at (0): [<ffffffff8122d29a>] copy_process+0x256a/0x7650 kernel/fork.c:2448
softirqs last  enabled at (0): [<ffffffff8122d2e2>] copy_process+0x25b2/0x7650 kernel/fork.c:2452
softirqs last disabled at (0): [<0000000000000000>] 0x0
---[ end trace 0000000000000000 ]---
------------[ cut here ]------------
WARNING: CPU: 1 PID: 563 at drivers/iommu/iommufd/io_pagetable.c:1158 iopt_remove_access+0xb5/0xd0 drivers/iommu/iommufd/io_pagetable.c:1157
Modules linked in:
CPU: 1 PID: 563 Comm: syz-executor321 Tainted: G    B   W          6.4.0-rc6-5ca8bbe2b782+ #1
Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
RIP: 0010:iopt_remove_access+0xb5/0xd0 drivers/iommu/iommufd/io_pagetable.c:1157
Code: 45 85 e4 75 29 e8 4b 2d 0b fe 4c 89 ef e8 33 eb e8 fd 48 89 df e8 2b eb e8 fd 5b 41 5c 41 5d 5d c3 cc cc cc cc e8 2b 2d 0b fe <0f> 0b eb b9 e8 22 2d 0b fe 0f 0b eb ce e8 b9 1d 67 fe eb 90 0f 1f
RSP: 0018:ffff888013c9fbd0 EFLAGS: 00010246
RAX: 0000000000000000 RBX: ffff8880119270a8 RCX: 0000000000000000
RDX: 0000000000000000 RSI: ffff888011958000 RDI: 0000000000000002
RBP: ffff888013c9fbe8 R08: ffffed1002324e33 R09: ffffed1002324e33
R10: ffff888011927193 R11: ffffed1002324e32 R12: ffff888019d3d000
R13: ffff8880119271e8 R14: ffff8880104aaa00 R15: 0000000000000000
FS:  0000000000000000(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
CR2: 00000000004e5420 CR3: 000000000667e000 CR4: 0000000000750ee0
PKRU: 55555554
Call Trace:
 <TASK>
 iommufd_access_destroy_object+0x65/0x170 drivers/iommu/iommufd/device.c:875
 iommufd_object_destroy_user+0x18e/0x220 drivers/iommu/iommufd/main.c:163
 iommufd_access_destroy+0x43/0x70 drivers/iommu/iommufd/device.c:938
 iommufd_test_staccess_release+0x8d/0xd0 drivers/iommu/iommufd/selftest.c:918
 __fput+0x26d/0xa40 fs/file_table.c:321
 ____fput+0x1e/0x30 fs/file_table.c:349
 task_work_run+0x1a4/0x2d0 kernel/task_work.c:179
 exit_task_work include/linux/task_work.h:38 [inline]
 do_exit+0xaf3/0x2f60 kernel/exit.c:874
 do_group_exit+0xe0/0x2b0 kernel/exit.c:1024
 __do_sys_exit_group kernel/exit.c:1035 [inline]
 __se_sys_exit_group kernel/exit.c:1033 [inline]
 __x64_sys_exit_group+0x47/0x50 kernel/exit.c:1033
 do_syscall_x64 arch/x86/entry/common.c:50 [inline]
 do_syscall_64+0x3b/0x90 arch/x86/entry/common.c:80
 entry_SYSCALL_64_after_hwframe+0x72/0xdc
RIP: 0033:0x44de86
Code: Unable to access opcode bytes at 0x44de5c.
RSP: 002b:00007fff8410fbc8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
RAX: ffffffffffffffda RBX: 00000000004e5410 RCX: 000000000044de86
RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffffa8
R10: 0000000000411b40 R11: 0000000000000246 R12: 00000000004e5410
R13: 0000000000000001 R14: 0000000000000000 R15: 0000000000000001
 </TASK>
irq event stamp: 0
hardirqs last  enabled at (0): [<0000000000000000>] 0x0
hardirqs last disabled at (0): [<ffffffff8122d29a>] copy_process+0x256a/0x7650 kernel/fork.c:2448
softirqs last  enabled at (0): [<ffffffff8122d2e2>] copy_process+0x25b2/0x7650 kernel/fork.c:2452
softirqs last disabled at (0): [<0000000000000000>] 0x0
---[ end trace 0000000000000000 ]---
------------[ cut here ]------------
WARNING: CPU: 1 PID: 563 at drivers/iommu/iommufd/io_pagetable.c:663 iopt_destroy_table+0x15f/0x1b0 drivers/iommu/iommufd/io_pagetable.c:663
Modules linked in:
CPU: 1 PID: 563 Comm: syz-executor321 Tainted: G    B   W          6.4.0-rc6-5ca8bbe2b782+ #1
Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
RIP: 0010:iopt_destroy_table+0x15f/0x1b0 drivers/iommu/iommufd/io_pagetable.c:663
Code: 5b 41 5c 41 5d 41 5e 5d c3 cc cc cc cc e8 c9 53 0b fe 0f 0b e9 51 ff ff ff e8 bd 53 0b fe 0f 0b e9 76 ff ff ff e8 b1 53 0b fe <0f> 0b eb 9e e8 a8 53 0b fe 0f 0b e8 a1 53 0b fe 5b 41 5c 41 5d 41
RSP: 0018:ffff888013c9fb78 EFLAGS: 00010246
RAX: 0000000000000000 RBX: 0000000000000000 RCX: 0000000000000000
RDX: 0000000000000000 RSI: ffff888011958000 RDI: 0000000000000002
RBP: ffff888013c9fb98 R08: ffffed1002324e3e R09: ffffed1002324e3e
R10: ffff8880119271ef R11: ffffed1002324e3d R12: ffff888011927290
R13: ffff8880119270a8 R14: ffffffffffffffff R15: ffff888013c9fc60
FS:  0000000000000000(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
CR2: 00000000004e5420 CR3: 000000000667e000 CR4: 0000000000750ee0
PKRU: 55555554
Call Trace:
 <TASK>
 iommufd_ioas_destroy+0x53/0x70 drivers/iommu/iommufd/ioas.c:19
 iommufd_fops_release+0x1f7/0x370 drivers/iommu/iommufd/main.c:231
 __fput+0x26d/0xa40 fs/file_table.c:321
 ____fput+0x1e/0x30 fs/file_table.c:349
 task_work_run+0x1a4/0x2d0 kernel/task_work.c:179
 exit_task_work include/linux/task_work.h:38 [inline]
 do_exit+0xaf3/0x2f60 kernel/exit.c:874
 do_group_exit+0xe0/0x2b0 kernel/exit.c:1024
 __do_sys_exit_group kernel/exit.c:1035 [inline]
 __se_sys_exit_group kernel/exit.c:1033 [inline]
 __x64_sys_exit_group+0x47/0x50 kernel/exit.c:1033
 do_syscall_x64 arch/x86/entry/common.c:50 [inline]
 do_syscall_64+0x3b/0x90 arch/x86/entry/common.c:80
 entry_SYSCALL_64_after_hwframe+0x72/0xdc
RIP: 0033:0x44de86
Code: Unable to access opcode bytes at 0x44de5c.
RSP: 002b:00007fff8410fbc8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
RAX: ffffffffffffffda RBX: 00000000004e5410 RCX: 000000000044de86
RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffffa8
R10: 0000000000411b40 R11: 0000000000000246 R12: 00000000004e5410
R13: 0000000000000001 R14: 0000000000000000 R15: 0000000000000001
 </TASK>
irq event stamp: 0
hardirqs last  enabled at (0): [<0000000000000000>] 0x0
hardirqs last disabled at (0): [<ffffffff8122d29a>] copy_process+0x256a/0x7650 kernel/fork.c:2448
softirqs last  enabled at (0): [<ffffffff8122d2e2>] copy_process+0x25b2/0x7650 kernel/fork.c:2452
softirqs last disabled at (0): [<0000000000000000>] 0x0
---[ end trace 0000000000000000 ]---
------------[ cut here ]------------
WARNING: CPU: 1 PID: 564 at drivers/iommu/iommufd/io_pagetable.c:1158 iopt_remove_access+0xb5/0xd0 drivers/iommu/iommufd/io_pagetable.c:1157
Modules linked in:
CPU: 1 PID: 564 Comm: syz-executor321 Tainted: G    B   W          6.4.0-rc6-5ca8bbe2b782+ #1
Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
RIP: 0010:iopt_remove_access+0xb5/0xd0 drivers/iommu/iommufd/io_pagetable.c:1157
Code: 45 85 e4 75 29 e8 4b 2d 0b fe 4c 89 ef e8 33 eb e8 fd 48 89 df e8 2b eb e8 fd 5b 41 5c 41 5d 5d c3 cc cc cc cc e8 2b 2d 0b fe <0f> 0b eb b9 e8 22 2d 0b fe 0f 0b eb ce e8 b9 1d 67 fe eb 90 0f 1f
RSP: 0018:ffff888012befbb8 EFLAGS: 00010246
RAX: 0000000000000000 RBX: ffff888012a5f8a8 RCX: 0000000000000000
RDX: 0000000000000000 RSI: ffff888015190000 RDI: 0000000000000002
RBP: ffff888012befbd0 R08: ffffed100254bf33 R09: ffffed100254bf33
R10: ffff888012a5f993 R11: ffffed100254bf32 R12: ffff888019d53000
R13: ffff888012a5f9e8 R14: ffffffff835430e0 R15: ffff888012befe68
FS:  0000000001a0a3c0(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
CR2: 0000000020000140 CR3: 0000000013cd0000 CR4: 0000000000750ee0
PKRU: 55555554
Call Trace:
 <TASK>
 __iommufd_access_detach+0x1c2/0x2b0 drivers/iommu/iommufd/device.c:971
 iommufd_access_change_pt+0x149/0x270 drivers/iommu/iommufd/device.c:1006
 iommufd_access_replace+0xb4/0x120 drivers/iommu/iommufd/device.c:1042
 iommufd_test_access_replace_ioas drivers/iommu/iommufd/selftest.c:1025 [inline]
 iommufd_test+0x103d/0x3f00 drivers/iommu/iommufd/selftest.c:1252
 iommufd_fops_ioctl+0x37d/0x510 drivers/iommu/iommufd/main.c:378
 vfs_ioctl fs/ioctl.c:51 [inline]
 __do_sys_ioctl fs/ioctl.c:870 [inline]
 __se_sys_ioctl fs/ioctl.c:856 [inline]
 __x64_sys_ioctl+0x1a3/0x230 fs/ioctl.c:856
 do_syscall_x64 arch/x86/entry/common.c:50 [inline]
 do_syscall_64+0x3b/0x90 arch/x86/entry/common.c:80
 entry_SYSCALL_64_after_hwframe+0x72/0xdc
RIP: 0033:0x44ff3d
Code: db 48 89 d8 5b 5d 41 5c 41 5d 41 5e c3 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 c7 c1 a8 ff ff ff f7 d8 64 89 01 48
RSP: 002b:00007fff8410fc18 EFLAGS: 00000246 ORIG_RAX: 0000000000000010
RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 000000000044ff3d
RDX: 0000000020000000 RSI: 0000000000003ba0 RDI: 0000000000000003
RBP: 0000000000000001 R08: 0000000000411b40 R09: 0000000000411b40
R10: 0000000000411b40 R11: 0000000000000246 R12: 0000000000000001
R13: 0000000000000000 R14: 00000000004004e8 R15: 0000000000000000
 </TASK>
irq event stamp: 0
hardirqs last  enabled at (0): [<0000000000000000>] 0x0
hardirqs last disabled at (0): [<ffffffff8122d29a>] copy_process+0x256a/0x7650 kernel/fork.c:2448
softirqs last  enabled at (0): [<ffffffff8122d2e2>] copy_process+0x25b2/0x7650 kernel/fork.c:2452
softirqs last disabled at (0): [<0000000000000000>] 0x0
---[ end trace 0000000000000000 ]---
------------[ cut here ]------------
WARNING: CPU: 1 PID: 564 at drivers/iommu/iommufd/io_pagetable.c:1158 iopt_remove_access+0xb5/0xd0 drivers/iommu/iommufd/io_pagetable.c:1157
Modules linked in:
CPU: 1 PID: 564 Comm: syz-executor321 Tainted: G    B   W          6.4.0-rc6-5ca8bbe2b782+ #1
Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
RIP: 0010:iopt_remove_access+0xb5/0xd0 drivers/iommu/iommufd/io_pagetable.c:1157
Code: 45 85 e4 75 29 e8 4b 2d 0b fe 4c 89 ef e8 33 eb e8 fd 48 89 df e8 2b eb e8 fd 5b 41 5c 41 5d 5d c3 cc cc cc cc e8 2b 2d 0b fe <0f> 0b eb b9 e8 22 2d 0b fe 0f 0b eb ce e8 b9 1d 67 fe eb 90 0f 1f
RSP: 0018:ffff888012befbd0 EFLAGS: 00010246
RAX: 0000000000000000 RBX: ffff888012a5f8a8 RCX: 0000000000000000
RDX: 0000000000000000 RSI: ffff888015190000 RDI: 0000000000000002
RBP: ffff888012befbe8 R08: ffffed100254bf33 R09: ffffed100254bf33
R10: ffff888012a5f993 R11: ffffed100254bf32 R12: ffff888019e13400
R13: ffff888012a5f9e8 R14: ffff888016fda800 R15: 0000000000000000
FS:  0000000000000000(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
CR2: 00000000004e5420 CR3: 000000000667e000 CR4: 0000000000750ee0
PKRU: 55555554
Call Trace:
 <TASK>
 iommufd_access_destroy_object+0x65/0x170 drivers/iommu/iommufd/device.c:875
 iommufd_object_destroy_user+0x18e/0x220 drivers/iommu/iommufd/main.c:163
 iommufd_access_destroy+0x43/0x70 drivers/iommu/iommufd/device.c:938
 iommufd_test_staccess_release+0x8d/0xd0 drivers/iommu/iommufd/selftest.c:918
 __fput+0x26d/0xa40 fs/file_table.c:321
 ____fput+0x1e/0x30 fs/file_table.c:349
 task_work_run+0x1a4/0x2d0 kernel/task_work.c:179
 exit_task_work include/linux/task_work.h:38 [inline]
 do_exit+0xaf3/0x2f60 kernel/exit.c:874
 do_group_exit+0xe0/0x2b0 kernel/exit.c:1024
 __do_sys_exit_group kernel/exit.c:1035 [inline]
 __se_sys_exit_group kernel/exit.c:1033 [inline]
 __x64_sys_exit_group+0x47/0x50 kernel/exit.c:1033
 do_syscall_x64 arch/x86/entry/common.c:50 [inline]
 do_syscall_64+0x3b/0x90 arch/x86/entry/common.c:80
 entry_SYSCALL_64_after_hwframe+0x72/0xdc
RIP: 0033:0x44de86
Code: Unable to access opcode bytes at 0x44de5c.
RSP: 002b:00007fff8410fbc8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
RAX: ffffffffffffffda RBX: 00000000004e5410 RCX: 000000000044de86
RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffffa8
R10: 0000000000411b40 R11: 0000000000000246 R12: 00000000004e5410
R13: 0000000000000001 R14: 0000000000000000 R15: 0000000000000001
 </TASK>
irq event stamp: 0
hardirqs last  enabled at (0): [<0000000000000000>] 0x0
hardirqs last disabled at (0): [<ffffffff8122d29a>] copy_process+0x256a/0x7650 kernel/fork.c:2448
softirqs last  enabled at (0): [<ffffffff8122d2e2>] copy_process+0x25b2/0x7650 kernel/fork.c:2452
softirqs last disabled at (0): [<0000000000000000>] 0x0
---[ end trace 0000000000000000 ]---
------------[ cut here ]------------
WARNING: CPU: 1 PID: 564 at drivers/iommu/iommufd/io_pagetable.c:663 iopt_destroy_table+0x15f/0x1b0 drivers/iommu/iommufd/io_pagetable.c:663
Modules linked in:
CPU: 1 PID: 564 Comm: syz-executor321 Tainted: G    B   W          6.4.0-rc6-5ca8bbe2b782+ #1
Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
RIP: 0010:iopt_destroy_table+0x15f/0x1b0 drivers/iommu/iommufd/io_pagetable.c:663
Code: 5b 41 5c 41 5d 41 5e 5d c3 cc cc cc cc e8 c9 53 0b fe 0f 0b e9 51 ff ff ff e8 bd 53 0b fe 0f 0b e9 76 ff ff ff e8 b1 53 0b fe <0f> 0b eb 9e e8 a8 53 0b fe 0f 0b e8 a1 53 0b fe 5b 41 5c 41 5d 41
RSP: 0018:ffff888012befb78 EFLAGS: 00010246
RAX: 0000000000000000 RBX: 0000000000000000 RCX: 0000000000000000
RDX: 0000000000000000 RSI: ffff888015190000 RDI: 0000000000000002
RBP: ffff888012befb98 R08: ffffed100254bf3e R09: ffffed100254bf3e
R10: ffff888012a5f9ef R11: ffffed100254bf3d R12: ffff888012a5fa90
R13: ffff888012a5f8a8 R14: ffffffffffffffff R15: ffff888012befc60
FS:  0000000000000000(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
CR2: 00000000004e5420 CR3: 000000000667e000 CR4: 0000000000750ee0
PKRU: 55555554
Call Trace:
 <TASK>
 iommufd_ioas_destroy+0x53/0x70 drivers/iommu/iommufd/ioas.c:19
 iommufd_fops_release+0x1f7/0x370 drivers/iommu/iommufd/main.c:231
 __fput+0x26d/0xa40 fs/file_table.c:321
 ____fput+0x1e/0x30 fs/file_table.c:349
 task_work_run+0x1a4/0x2d0 kernel/task_work.c:179
 exit_task_work include/linux/task_work.h:38 [inline]
 do_exit+0xaf3/0x2f60 kernel/exit.c:874
 do_group_exit+0xe0/0x2b0 kernel/exit.c:1024
 __do_sys_exit_group kernel/exit.c:1035 [inline]
 __se_sys_exit_group kernel/exit.c:1033 [inline]
 __x64_sys_exit_group+0x47/0x50 kernel/exit.c:1033
 do_syscall_x64 arch/x86/entry/common.c:50 [inline]
 do_syscall_64+0x3b/0x90 arch/x86/entry/common.c:80
 entry_SYSCALL_64_after_hwframe+0x72/0xdc
RIP: 0033:0x44de86
Code: Unable to access opcode bytes at 0x44de5c.
RSP: 002b:00007fff8410fbc8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
RAX: ffffffffffffffda RBX: 00000000004e5410 RCX: 000000000044de86
RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffffa8
R10: 0000000000411b40 R11: 0000000000000246 R12: 00000000004e5410
R13: 0000000000000001 R14: 0000000000000000 R15: 0000000000000001
 </TASK>
irq event stamp: 0
hardirqs last  enabled at (0): [<0000000000000000>] 0x0
hardirqs last disabled at (0): [<ffffffff8122d29a>] copy_process+0x256a/0x7650 kernel/fork.c:2448
softirqs last  enabled at (0): [<ffffffff8122d2e2>] copy_process+0x25b2/0x7650 kernel/fork.c:2452
softirqs last disabled at (0): [<0000000000000000>] 0x0
---[ end trace 0000000000000000 ]---
------------[ cut here ]------------
WARNING: CPU: 1 PID: 565 at drivers/iommu/iommufd/io_pagetable.c:1158 iopt_remove_access+0xb5/0xd0 drivers/iommu/iommufd/io_pagetable.c:1157
Modules linked in:
CPU: 1 PID: 565 Comm: syz-executor321 Tainted: G    B   W          6.4.0-rc6-5ca8bbe2b782+ #1
Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
RIP: 0010:iopt_remove_access+0xb5/0xd0 drivers/iommu/iommufd/io_pagetable.c:1157
Code: 45 85 e4 75 29 e8 4b 2d 0b fe 4c 89 ef e8 33 eb e8 fd 48 89 df e8 2b eb e8 fd 5b 41 5c 41 5d 5d c3 cc cc cc cc e8 2b 2d 0b fe <0f> 0b eb b9 e8 22 2d 0b fe 0f 0b eb ce e8 b9 1d 67 fe eb 90 0f 1f
RSP: 0018:ffff88800be57bb8 EFLAGS: 00010246
RAX: 0000000000000000 RBX: ffff8880111d10a8 RCX: 0000000000000000
RDX: 0000000000000000 RSI: ffff888015192500 RDI: 0000000000000002
RBP: ffff88800be57bd0 R08: ffffed100223a233 R09: ffffed100223a233
R10: ffff8880111d1193 R11: ffffed100223a232 R12: ffff888019d3cc00
R13: ffff8880111d11e8 R14: ffffffff835430e0 R15: ffff88800be57e68
FS:  0000000001a0a3c0(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
CR2: 0000000020000140 CR3: 00000000138a2000 CR4: 0000000000750ee0
PKRU: 55555554
Call Trace:
 <TASK>
 __iommufd_access_detach+0x1c2/0x2b0 drivers/iommu/iommufd/device.c:971
 iommufd_access_change_pt+0x149/0x270 drivers/iommu/iommufd/device.c:1006
 iommufd_access_replace+0xb4/0x120 drivers/iommu/iommufd/device.c:1042
 iommufd_test_access_replace_ioas drivers/iommu/iommufd/selftest.c:1025 [inline]
 iommufd_test+0x103d/0x3f00 drivers/iommu/iommufd/selftest.c:1252
 iommufd_fops_ioctl+0x37d/0x510 drivers/iommu/iommufd/main.c:378
 vfs_ioctl fs/ioctl.c:51 [inline]
 __do_sys_ioctl fs/ioctl.c:870 [inline]
 __se_sys_ioctl fs/ioctl.c:856 [inline]
 __x64_sys_ioctl+0x1a3/0x230 fs/ioctl.c:856
 do_syscall_x64 arch/x86/entry/common.c:50 [inline]
 do_syscall_64+0x3b/0x90 arch/x86/entry/common.c:80
 entry_SYSCALL_64_after_hwframe+0x72/0xdc
RIP: 0033:0x44ff3d
Code: db 48 89 d8 5b 5d 41 5c 41 5d 41 5e c3 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 c7 c1 a8 ff ff ff f7 d8 64 89 01 48
RSP: 002b:00007fff8410fc18 EFLAGS: 00000246 ORIG_RAX: 0000000000000010
RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 000000000044ff3d
RDX: 0000000020000000 RSI: 0000000000003ba0 RDI: 0000000000000003
RBP: 0000000000000001 R08: 0000000000411b40 R09: 0000000000411b40
R10: 0000000000411b40 R11: 0000000000000246 R12: 0000000000000001
R13: 0000000000000000 R14: 00000000004004e8 R15: 0000000000000000
 </TASK>
irq event stamp: 0
hardirqs last  enabled at (0): [<0000000000000000>] 0x0
hardirqs last disabled at (0): [<ffffffff8122d29a>] copy_process+0x256a/0x7650 kernel/fork.c:2448
softirqs last  enabled at (0): [<ffffffff8122d2e2>] copy_process+0x25b2/0x7650 kernel/fork.c:2452
softirqs last disabled at (0): [<0000000000000000>] 0x0
---[ end trace 0000000000000000 ]---
------------[ cut here ]------------
WARNING: CPU: 1 PID: 565 at drivers/iommu/iommufd/io_pagetable.c:1158 iopt_remove_access+0xb5/0xd0 drivers/iommu/iommufd/io_pagetable.c:1157
Modules linked in:
CPU: 1 PID: 565 Comm: syz-executor321 Tainted: G    B   W          6.4.0-rc6-5ca8bbe2b782+ #1
Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
RIP: 0010:iopt_remove_access+0xb5/0xd0 drivers/iommu/iommufd/io_pagetable.c:1157
Code: 45 85 e4 75 29 e8 4b 2d 0b fe 4c 89 ef e8 33 eb e8 fd 48 89 df e8 2b eb e8 fd 5b 41 5c 41 5d 5d c3 cc cc cc cc e8 2b 2d 0b fe <0f> 0b eb b9 e8 22 2d 0b fe 0f 0b eb ce e8 b9 1d 67 fe eb 90 0f 1f
RSP: 0018:ffff88800be57bd0 EFLAGS: 00010246
RAX: 0000000000000000 RBX: ffff8880111d10a8 RCX: 0000000000000000
RDX: 0000000000000000 RSI: ffff888015192500 RDI: 0000000000000002
RBP: ffff88800be57be8 R08: ffffed100223a233 R09: ffffed100223a233
R10: ffff8880111d1193 R11: ffffed100223a232 R12: ffff888019d51000
R13: ffff8880111d11e8 R14: ffff88801a1f8800 R15: 0000000000000000
FS:  0000000000000000(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
CR2: 00000000004e5420 CR3: 000000000667e000 CR4: 0000000000750ee0
PKRU: 55555554
Call Trace:
 <TASK>
 iommufd_access_destroy_object+0x65/0x170 drivers/iommu/iommufd/device.c:875
 iommufd_object_destroy_user+0x18e/0x220 drivers/iommu/iommufd/main.c:163
 iommufd_access_destroy+0x43/0x70 drivers/iommu/iommufd/device.c:938
 iommufd_test_staccess_release+0x8d/0xd0 drivers/iommu/iommufd/selftest.c:918
 __fput+0x26d/0xa40 fs/file_table.c:321
 ____fput+0x1e/0x30 fs/file_table.c:349
 task_work_run+0x1a4/0x2d0 kernel/task_work.c:179
 exit_task_work include/linux/task_work.h:38 [inline]
 do_exit+0xaf3/0x2f60 kernel/exit.c:874
 do_group_exit+0xe0/0x2b0 kernel/exit.c:1024
 __do_sys_exit_group kernel/exit.c:1035 [inline]
 __se_sys_exit_group kernel/exit.c:1033 [inline]
 __x64_sys_exit_group+0x47/0x50 kernel/exit.c:1033
 do_syscall_x64 arch/x86/entry/common.c:50 [inline]
 do_syscall_64+0x3b/0x90 arch/x86/entry/common.c:80
 entry_SYSCALL_64_after_hwframe+0x72/0xdc
RIP: 0033:0x44de86
Code: Unable to access opcode bytes at 0x44de5c.
RSP: 002b:00007fff8410fbc8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
RAX: ffffffffffffffda RBX: 00000000004e5410 RCX: 000000000044de86
RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffffa8
R10: 0000000000411b40 R11: 0000000000000246 R12: 00000000004e5410
R13: 0000000000000001 R14: 0000000000000000 R15: 0000000000000001
 </TASK>
irq event stamp: 0
hardirqs last  enabled at (0): [<0000000000000000>] 0x0
hardirqs last disabled at (0): [<ffffffff8122d29a>] copy_process+0x256a/0x7650 kernel/fork.c:2448
softirqs last  enabled at (0): [<ffffffff8122d2e2>] copy_process+0x25b2/0x7650 kernel/fork.c:2452
softirqs last disabled at (0): [<0000000000000000>] 0x0
---[ end trace 0000000000000000 ]---
------------[ cut here ]------------
WARNING: CPU: 1 PID: 565 at drivers/iommu/iommufd/io_pagetable.c:663 iopt_destroy_table+0x15f/0x1b0 drivers/iommu/iommufd/io_pagetable.c:663
Modules linked in:
CPU: 1 PID: 565 Comm: syz-executor321 Tainted: G    B   W          6.4.0-rc6-5ca8bbe2b782+ #1
Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
RIP: 0010:iopt_destroy_table+0x15f/0x1b0 drivers/iommu/iommufd/io_pagetable.c:663
Code: 5b 41 5c 41 5d 41 5e 5d c3 cc cc cc cc e8 c9 53 0b fe 0f 0b e9 51 ff ff ff e8 bd 53 0b fe 0f 0b e9 76 ff ff ff e8 b1 53 0b fe <0f> 0b eb 9e e8 a8 53 0b fe 0f 0b e8 a1 53 0b fe 5b 41 5c 41 5d 41
RSP: 0018:ffff88800be57b78 EFLAGS: 00010246
RAX: 0000000000000000 RBX: 0000000000000000 RCX: 0000000000000000
RDX: 0000000000000000 RSI: ffff888015192500 RDI: 0000000000000002
RBP: ffff88800be57b98 R08: ffffed100223a23e R09: ffffed100223a23e
R10: ffff8880111d11ef R11: ffffed100223a23d R12: ffff8880111d1290
R13: ffff8880111d10a8 R14: ffffffffffffffff R15: ffff88800be57c60
FS:  0000000000000000(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
CR2: 00000000004e5420 CR3: 000000000667e000 CR4: 0000000000750ee0
PKRU: 55555554
Call Trace:
 <TASK>
 iommufd_ioas_destroy+0x53/0x70 drivers/iommu/iommufd/ioas.c:19
 iommufd_fops_release+0x1f7/0x370 drivers/iommu/iommufd/main.c:231
 __fput+0x26d/0xa40 fs/file_table.c:321
 ____fput+0x1e/0x30 fs/file_table.c:349
 task_work_run+0x1a4/0x2d0 kernel/task_work.c:179
 exit_task_work include/linux/task_work.h:38 [inline]
 do_exit+0xaf3/0x2f60 kernel/exit.c:874
 do_group_exit+0xe0/0x2b0 kernel/exit.c:1024
 __do_sys_exit_group kernel/exit.c:1035 [inline]
 __se_sys_exit_group kernel/exit.c:1033 [inline]
 __x64_sys_exit_group+0x47/0x50 kernel/exit.c:1033
 do_syscall_x64 arch/x86/entry/common.c:50 [inline]
 do_syscall_64+0x3b/0x90 arch/x86/entry/common.c:80
 entry_SYSCALL_64_after_hwframe+0x72/0xdc
RIP: 0033:0x44de86
Code: Unable to access opcode bytes at 0x44de5c.
RSP: 002b:00007fff8410fbc8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
RAX: ffffffffffffffda RBX: 00000000004e5410 RCX: 000000000044de86
RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffffa8
R10: 0000000000411b40 R11: 0000000000000246 R12: 00000000004e5410
R13: 0000000000000001 R14: 0000000000000000 R15: 0000000000000001
 </TASK>
irq event stamp: 0
hardirqs last  enabled at (0): [<0000000000000000>] 0x0
hardirqs last disabled at (0): [<ffffffff8122d29a>] copy_process+0x256a/0x7650 kernel/fork.c:2448
softirqs last  enabled at (0): [<ffffffff8122d2e2>] copy_process+0x25b2/0x7650 kernel/fork.c:2452
softirqs last disabled at (0): [<0000000000000000>] 0x0
---[ end trace 0000000000000000 ]---
------------[ cut here ]------------
WARNING: CPU: 1 PID: 566 at drivers/iommu/iommufd/io_pagetable.c:1158 iopt_remove_access+0xb5/0xd0 drivers/iommu/iommufd/io_pagetable.c:1157
Modules linked in:
CPU: 1 PID: 566 Comm: syz-executor321 Tainted: G    B   W          6.4.0-rc6-5ca8bbe2b782+ #1
Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
RIP: 0010:iopt_remove_access+0xb5/0xd0 drivers/iommu/iommufd/io_pagetable.c:1157
Code: 45 85 e4 75 29 e8 4b 2d 0b fe 4c 89 ef e8 33 eb e8 fd 48 89 df e8 2b eb e8 fd 5b 41 5c 41 5d 5d c3 cc cc cc cc e8 2b 2d 0b fe <0f> 0b eb b9 e8 22 2d 0b fe 0f 0b eb ce e8 b9 1d 67 fe eb 90 0f 1f
RSP: 0018:ffff88800f657bb8 EFLAGS: 00010246
RAX: 0000000000000000 RBX: ffff888012bb88a8 RCX: 0000000000000000
RDX: 0000000000000000 RSI: ffff888015194a00 RDI: 0000000000000002
RBP: ffff88800f657bd0 R08: ffffed1002577133 R09: ffffed1002577133
R10: ffff888012bb8993 R11: ffffed1002577132 R12: ffff888010333800
R13: ffff888012bb89e8 R14: ffffffff835430e0 R15: ffff88800f657e68
FS:  0000000001a0a3c0(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
CR2: 0000000020000140 CR3: 00000000212ba000 CR4: 0000000000750ee0
PKRU: 55555554
Call Trace:
 <TASK>
 __iommufd_access_detach+0x1c2/0x2b0 drivers/iommu/iommufd/device.c:971
 iommufd_access_change_pt+0x149/0x270 drivers/iommu/iommufd/device.c:1006
 iommufd_access_replace+0xb4/0x120 drivers/iommu/iommufd/device.c:1042
 iommufd_test_access_replace_ioas drivers/iommu/iommufd/selftest.c:1025 [inline]
 iommufd_test+0x103d/0x3f00 drivers/iommu/iommufd/selftest.c:1252
 iommufd_fops_ioctl+0x37d/0x510 drivers/iommu/iommufd/main.c:378
 vfs_ioctl fs/ioctl.c:51 [inline]
 __do_sys_ioctl fs/ioctl.c:870 [inline]
 __se_sys_ioctl fs/ioctl.c:856 [inline]
 __x64_sys_ioctl+0x1a3/0x230 fs/ioctl.c:856
 do_syscall_x64 arch/x86/entry/common.c:50 [inline]
 do_syscall_64+0x3b/0x90 arch/x86/entry/common.c:80
 entry_SYSCALL_64_after_hwframe+0x72/0xdc
RIP: 0033:0x44ff3d
Code: db 48 89 d8 5b 5d 41 5c 41 5d 41 5e c3 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 c7 c1 a8 ff ff ff f7 d8 64 89 01 48
RSP: 002b:00007fff8410fc18 EFLAGS: 00000246 ORIG_RAX: 0000000000000010
RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 000000000044ff3d
RDX: 0000000020000000 RSI: 0000000000003ba0 RDI: 0000000000000003
RBP: 0000000000000001 R08: 0000000000411b40 R09: 0000000000411b40
R10: 0000000000411b40 R11: 0000000000000246 R12: 0000000000000001
R13: 0000000000000000 R14: 00000000004004e8 R15: 0000000000000000
 </TASK>
irq event stamp: 0
hardirqs last  enabled at (0): [<0000000000000000>] 0x0
hardirqs last disabled at (0): [<ffffffff8122d29a>] copy_process+0x256a/0x7650 kernel/fork.c:2448
softirqs last  enabled at (0): [<ffffffff8122d2e2>] copy_process+0x25b2/0x7650 kernel/fork.c:2452
softirqs last disabled at (0): [<0000000000000000>] 0x0
---[ end trace 0000000000000000 ]---
------------[ cut here ]------------
WARNING: CPU: 1 PID: 566 at drivers/iommu/iommufd/io_pagetable.c:1158 iopt_remove_access+0xb5/0xd0 drivers/iommu/iommufd/io_pagetable.c:1157
Modules linked in:
CPU: 1 PID: 566 Comm: syz-executor321 Tainted: G    B   W          6.4.0-rc6-5ca8bbe2b782+ #1
Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
RIP: 0010:iopt_remove_access+0xb5/0xd0 drivers/iommu/iommufd/io_pagetable.c:1157
Code: 45 85 e4 75 29 e8 4b 2d 0b fe 4c 89 ef e8 33 eb e8 fd 48 89 df e8 2b eb e8 fd 5b 41 5c 41 5d 5d c3 cc cc cc cc e8 2b 2d 0b fe <0f> 0b eb b9 e8 22 2d 0b fe 0f 0b eb ce e8 b9 1d 67 fe eb 90 0f 1f
RSP: 0018:ffff88800f657bd0 EFLAGS: 00010246
RAX: 0000000000000000 RBX: ffff888012bb88a8 RCX: 0000000000000000
RDX: 0000000000000000 RSI: ffff888015194a00 RDI: 0000000000000002
RBP: ffff88800f657be8 R08: ffffed1002577133 R09: ffffed1002577133
R10: ffff888012bb8993 R11: ffffed1002577132 R12: ffff888019d3ec00
R13: ffff888012bb89e8 R14: ffff8880153a4600 R15: 0000000000000000
FS:  0000000000000000(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
CR2: 00000000004e5420 CR3: 000000000667e000 CR4: 0000000000750ee0
PKRU: 55555554
Call Trace:
 <TASK>
 iommufd_access_destroy_object+0x65/0x170 drivers/iommu/iommufd/device.c:875
 iommufd_object_destroy_user+0x18e/0x220 drivers/iommu/iommufd/main.c:163
 iommufd_access_destroy+0x43/0x70 drivers/iommu/iommufd/device.c:938
 iommufd_test_staccess_release+0x8d/0xd0 drivers/iommu/iommufd/selftest.c:918
 __fput+0x26d/0xa40 fs/file_table.c:321
 ____fput+0x1e/0x30 fs/file_table.c:349
 task_work_run+0x1a4/0x2d0 kernel/task_work.c:179
 exit_task_work include/linux/task_work.h:38 [inline]
 do_exit+0xaf3/0x2f60 kernel/exit.c:874
 do_group_exit+0xe0/0x2b0 kernel/exit.c:1024
 __do_sys_exit_group kernel/exit.c:1035 [inline]
 __se_sys_exit_group kernel/exit.c:1033 [inline]
 __x64_sys_exit_group+0x47/0x50 kernel/exit.c:1033
 do_syscall_x64 arch/x86/entry/common.c:50 [inline]
 do_syscall_64+0x3b/0x90 arch/x86/entry/common.c:80
 entry_SYSCALL_64_after_hwframe+0x72/0xdc
RIP: 0033:0x44de86
Code: Unable to access opcode bytes at 0x44de5c.
RSP: 002b:00007fff8410fbc8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
RAX: ffffffffffffffda RBX: 00000000004e5410 RCX: 000000000044de86
RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffffa8
R10: 0000000000411b40 R11: 0000000000000246 R12: 00000000004e5410
R13: 0000000000000001 R14: 0000000000000000 R15: 0000000000000001
 </TASK>
irq event stamp: 0
hardirqs last  enabled at (0): [<0000000000000000>] 0x0
hardirqs last disabled at (0): [<ffffffff8122d29a>] copy_process+0x256a/0x7650 kernel/fork.c:2448
softirqs last  enabled at (0): [<ffffffff8122d2e2>] copy_process+0x25b2/0x7650 kernel/fork.c:2452
softirqs last disabled at (0): [<0000000000000000>] 0x0
---[ end trace 0000000000000000 ]---
------------[ cut here ]------------
WARNING: CPU: 1 PID: 566 at drivers/iommu/iommufd/io_pagetable.c:663 iopt_destroy_table+0x15f/0x1b0 drivers/iommu/iommufd/io_pagetable.c:663
Modules linked in:
CPU: 1 PID: 566 Comm: syz-executor321 Tainted: G    B   W          6.4.0-rc6-5ca8bbe2b782+ #1
Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
RIP: 0010:iopt_destroy_table+0x15f/0x1b0 drivers/iommu/iommufd/io_pagetable.c:663
Code: 5b 41 5c 41 5d 41 5e 5d c3 cc cc cc cc e8 c9 53 0b fe 0f 0b e9 51 ff ff ff e8 bd 53 0b fe 0f 0b e9 76 ff ff ff e8 b1 53 0b fe <0f> 0b eb 9e e8 a8 53 0b fe 0f 0b e8 a1 53 0b fe 5b 41 5c 41 5d 41
RSP: 0018:ffff88800f657b78 EFLAGS: 00010246
RAX: 0000000000000000 RBX: 0000000000000000 RCX: 0000000000000000
RDX: 0000000000000000 RSI: ffff888015194a00 RDI: 0000000000000002
RBP: ffff88800f657b98 R08: ffffed100257713e R09: ffffed100257713e
R10: ffff888012bb89ef R11: ffffed100257713d R12: ffff888012bb8a90
R13: ffff888012bb88a8 R14: ffffffffffffffff R15: ffff88800f657c60
FS:  0000000000000000(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
CR2: 00000000004e5420 CR3: 000000000667e000 CR4: 0000000000750ee0
PKRU: 55555554
Call Trace:
 <TASK>
 iommufd_ioas_destroy+0x53/0x70 drivers/iommu/iommufd/ioas.c:19
 iommufd_fops_release+0x1f7/0x370 drivers/iommu/iommufd/main.c:231
 __fput+0x26d/0xa40 fs/file_table.c:321
 ____fput+0x1e/0x30 fs/file_table.c:349
 task_work_run+0x1a4/0x2d0 kernel/task_work.c:179
 exit_task_work include/linux/task_work.h:38 [inline]
 do_exit+0xaf3/0x2f60 kernel/exit.c:874
 do_group_exit+0xe0/0x2b0 kernel/exit.c:1024
 __do_sys_exit_group kernel/exit.c:1035 [inline]
 __se_sys_exit_group kernel/exit.c:1033 [inline]
 __x64_sys_exit_group+0x47/0x50 kernel/exit.c:1033
 do_syscall_x64 arch/x86/entry/common.c:50 [inline]
 do_syscall_64+0x3b/0x90 arch/x86/entry/common.c:80
 entry_SYSCALL_64_after_hwframe+0x72/0xdc
RIP: 0033:0x44de86
Code: Unable to access opcode bytes at 0x44de5c.
RSP: 002b:00007fff8410fbc8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
RAX: ffffffffffffffda RBX: 00000000004e5410 RCX: 000000000044de86
RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffffa8
R10: 0000000000411b40 R11: 0000000000000246 R12: 00000000004e5410
R13: 0000000000000001 R14: 0000000000000000 R15: 0000000000000001
 </TASK>
irq event stamp: 0
hardirqs last  enabled at (0): [<0000000000000000>] 0x0
hardirqs last disabled at (0): [<ffffffff8122d29a>] copy_process+0x256a/0x7650 kernel/fork.c:2448
softirqs last  enabled at (0): [<ffffffff8122d2e2>] copy_process+0x25b2/0x7650 kernel/fork.c:2452
softirqs last disabled at (0): [<0000000000000000>] 0x0
---[ end trace 0000000000000000 ]---
------------[ cut here ]------------
WARNING: CPU: 1 PID: 567 at drivers/iommu/iommufd/io_pagetable.c:1158 iopt_remove_access+0xb5/0xd0 drivers/iommu/iommufd/io_pagetable.c:1157
Modules linked in:
CPU: 1 PID: 567 Comm: syz-executor321 Tainted: G    B   W          6.4.0-rc6-5ca8bbe2b782+ #1
Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
RIP: 0010:iopt_remove_access+0xb5/0xd0 drivers/iommu/iommufd/io_pagetable.c:1157
Code: 45 85 e4 75 29 e8 4b 2d 0b fe 4c 89 ef e8 33 eb e8 fd 48 89 df e8 2b eb e8 fd 5b 41 5c 41 5d 5d c3 cc cc cc cc e8 2b 2d 0b fe <0f> 0b eb b9 e8 22 2d 0b fe 0f 0b eb ce e8 b9 1d 67 fe eb 90 0f 1f
RSP: 0018:ffff888016af7bb8 EFLAGS: 00010246
RAX: 0000000000000000 RBX: ffff888015bd88a8 RCX: 0000000000000000
RDX: 0000000000000000 RSI: ffff88800b7f4a00 RDI: 0000000000000002
RBP: ffff888016af7bd0 R08: ffffed1002b7b133 R09: ffffed1002b7b133
R10: ffff888015bd8993 R11: ffffed1002b7b132 R12: ffff888019fcf800
R13: ffff888015bd89e8 R14: ffffffff835430e0 R15: ffff888016af7e68
FS:  0000000001a0a3c0(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
CR2: 0000000020000140 CR3: 000000001a2f0000 CR4: 0000000000750ee0
PKRU: 55555554
Call Trace:
 <TASK>
 __iommufd_access_detach+0x1c2/0x2b0 drivers/iommu/iommufd/device.c:971
 iommufd_access_change_pt+0x149/0x270 drivers/iommu/iommufd/device.c:1006
 iommufd_access_replace+0xb4/0x120 drivers/iommu/iommufd/device.c:1042
 iommufd_test_access_replace_ioas drivers/iommu/iommufd/selftest.c:1025 [inline]
 iommufd_test+0x103d/0x3f00 drivers/iommu/iommufd/selftest.c:1252
 iommufd_fops_ioctl+0x37d/0x510 drivers/iommu/iommufd/main.c:378
 vfs_ioctl fs/ioctl.c:51 [inline]
 __do_sys_ioctl fs/ioctl.c:870 [inline]
 __se_sys_ioctl fs/ioctl.c:856 [inline]
 __x64_sys_ioctl+0x1a3/0x230 fs/ioctl.c:856
 do_syscall_x64 arch/x86/entry/common.c:50 [inline]
 do_syscall_64+0x3b/0x90 arch/x86/entry/common.c:80
 entry_SYSCALL_64_after_hwframe+0x72/0xdc
RIP: 0033:0x44ff3d
Code: db 48 89 d8 5b 5d 41 5c 41 5d 41 5e c3 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 c7 c1 a8 ff ff ff f7 d8 64 89 01 48
RSP: 002b:00007fff8410fc18 EFLAGS: 00000246 ORIG_RAX: 0000000000000010
RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 000000000044ff3d
RDX: 0000000020000000 RSI: 0000000000003ba0 RDI: 0000000000000003
RBP: 0000000000000001 R08: 0000000000411b40 R09: 0000000000411b40
R10: 0000000000411b40 R11: 0000000000000246 R12: 0000000000000001
R13: 0000000000000000 R14: 00000000004004e8 R15: 0000000000000000
 </TASK>
irq event stamp: 0
hardirqs last  enabled at (0): [<0000000000000000>] 0x0
hardirqs last disabled at (0): [<ffffffff8122d29a>] copy_process+0x256a/0x7650 kernel/fork.c:2448
softirqs last  enabled at (0): [<ffffffff8122d2e2>] copy_process+0x25b2/0x7650 kernel/fork.c:2452
softirqs last disabled at (0): [<0000000000000000>] 0x0
---[ end trace 0000000000000000 ]---
------------[ cut here ]------------
WARNING: CPU: 1 PID: 567 at drivers/iommu/iommufd/io_pagetable.c:1158 iopt_remove_access+0xb5/0xd0 drivers/iommu/iommufd/io_pagetable.c:1157
Modules linked in:
CPU: 1 PID: 567 Comm: syz-executor321 Tainted: G    B   W          6.4.0-rc6-5ca8bbe2b782+ #1
Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
RIP: 0010:iopt_remove_access+0xb5/0xd0 drivers/iommu/iommufd/io_pagetable.c:1157
Code: 45 85 e4 75 29 e8 4b 2d 0b fe 4c 89 ef e8 33 eb e8 fd 48 89 df e8 2b eb e8 fd 5b 41 5c 41 5d 5d c3 cc cc cc cc e8 2b 2d 0b fe <0f> 0b eb b9 e8 22 2d 0b fe 0f 0b eb ce e8 b9 1d 67 fe eb 90 0f 1f
RSP: 0018:ffff888016af7bd0 EFLAGS: 00010246
RAX: 0000000000000000 RBX: ffff888015bd88a8 RCX: 0000000000000000
RDX: 0000000000000000 RSI: ffff88800b7f4a00 RDI: 0000000000000002
RBP: ffff888016af7be8 R08: ffffed1002b7b133 R09: ffffed1002b7b133
R10: ffff888015bd8993 R11: ffffed1002b7b132 R12: ffff888010330000
R13: ffff888015bd89e8 R14: ffff888016f8e100 R15: 0000000000000000
FS:  0000000000000000(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
CR2: 00000000004e5420 CR3: 000000000667e000 CR4: 0000000000750ee0
PKRU: 55555554
Call Trace:
 <TASK>
 iommufd_access_destroy_object+0x65/0x170 drivers/iommu/iommufd/device.c:875
 iommufd_object_destroy_user+0x18e/0x220 drivers/iommu/iommufd/main.c:163
 iommufd_access_destroy+0x43/0x70 drivers/iommu/iommufd/device.c:938
 iommufd_test_staccess_release+0x8d/0xd0 drivers/iommu/iommufd/selftest.c:918
 __fput+0x26d/0xa40 fs/file_table.c:321
 ____fput+0x1e/0x30 fs/file_table.c:349
 task_work_run+0x1a4/0x2d0 kernel/task_work.c:179
 exit_task_work include/linux/task_work.h:38 [inline]
 do_exit+0xaf3/0x2f60 kernel/exit.c:874
 do_group_exit+0xe0/0x2b0 kernel/exit.c:1024
 __do_sys_exit_group kernel/exit.c:1035 [inline]
 __se_sys_exit_group kernel/exit.c:1033 [inline]
 __x64_sys_exit_group+0x47/0x50 kernel/exit.c:1033
 do_syscall_x64 arch/x86/entry/common.c:50 [inline]
 do_syscall_64+0x3b/0x90 arch/x86/entry/common.c:80
 entry_SYSCALL_64_after_hwframe+0x72/0xdc
RIP: 0033:0x44de86
Code: Unable to access opcode bytes at 0x44de5c.
RSP: 002b:00007fff8410fbc8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
RAX: ffffffffffffffda RBX: 00000000004e5410 RCX: 000000000044de86
RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffffa8
R10: 0000000000411b40 R11: 0000000000000246 R12: 00000000004e5410
R13: 0000000000000001 R14: 0000000000000000 R15: 0000000000000001
 </TASK>
irq event stamp: 0
hardirqs last  enabled at (0): [<0000000000000000>] 0x0
hardirqs last disabled at (0): [<ffffffff8122d29a>] copy_process+0x256a/0x7650 kernel/fork.c:2448
softirqs last  enabled at (0): [<ffffffff8122d2e2>] copy_process+0x25b2/0x7650 kernel/fork.c:2452
softirqs last disabled at (0): [<0000000000000000>] 0x0
---[ end trace 0000000000000000 ]---
------------[ cut here ]------------
WARNING: CPU: 1 PID: 567 at drivers/iommu/iommufd/io_pagetable.c:663 iopt_destroy_table+0x15f/0x1b0 drivers/iommu/iommufd/io_pagetable.c:663
Modules linked in:
CPU: 1 PID: 567 Comm: syz-executor321 Tainted: G    B   W          6.4.0-rc6-5ca8bbe2b782+ #1
Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
RIP: 0010:iopt_destroy_table+0x15f/0x1b0 drivers/iommu/iommufd/io_pagetable.c:663
Code: 5b 41 5c 41 5d 41 5e 5d c3 cc cc cc cc e8 c9 53 0b fe 0f 0b e9 51 ff ff ff e8 bd 53 0b fe 0f 0b e9 76 ff ff ff e8 b1 53 0b fe <0f> 0b eb 9e e8 a8 53 0b fe 0f 0b e8 a1 53 0b fe 5b 41 5c 41 5d 41
RSP: 0018:ffff888016af7b78 EFLAGS: 00010246
RAX: 0000000000000000 RBX: 0000000000000000 RCX: 0000000000000000
RDX: 0000000000000000 RSI: ffff88800b7f4a00 RDI: 0000000000000002
RBP: ffff888016af7b98 R08: ffffed1002b7b13e R09: ffffed1002b7b13e
R10: ffff888015bd89ef R11: ffffed1002b7b13d R12: ffff888015bd8a90
R13: ffff888015bd88a8 R14: ffffffffffffffff R15: ffff888016af7c60
FS:  0000000000000000(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
CR2: 00007f97c0516000 CR3: 0000000014616000 CR4: 0000000000750ee0
PKRU: 55555554
Call Trace:
 <TASK>
 iommufd_ioas_destroy+0x53/0x70 drivers/iommu/iommufd/ioas.c:19
 iommufd_fops_release+0x1f7/0x370 drivers/iommu/iommufd/main.c:231
 __fput+0x26d/0xa40 fs/file_table.c:321
 ____fput+0x1e/0x30 fs/file_table.c:349
 task_work_run+0x1a4/0x2d0 kernel/task_work.c:179
 exit_task_work include/linux/task_work.h:38 [inline]
 do_exit+0xaf3/0x2f60 kernel/exit.c:874
 do_group_exit+0xe0/0x2b0 kernel/exit.c:1024
 __do_sys_exit_group kernel/exit.c:1035 [inline]
 __se_sys_exit_group kernel/exit.c:1033 [inline]
 __x64_sys_exit_group+0x47/0x50 kernel/exit.c:1033
 do_syscall_x64 arch/x86/entry/common.c:50 [inline]
 do_syscall_64+0x3b/0x90 arch/x86/entry/common.c:80
 entry_SYSCALL_64_after_hwframe+0x72/0xdc
RIP: 0033:0x44de86
Code: Unable to access opcode bytes at 0x44de5c.
RSP: 002b:00007fff8410fbc8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
RAX: ffffffffffffffda RBX: 00000000004e5410 RCX: 000000000044de86
RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffffa8
R10: 0000000000411b40 R11: 0000000000000246 R12: 00000000004e5410
R13: 0000000000000001 R14: 0000000000000000 R15: 0000000000000001
 </TASK>
irq event stamp: 0
hardirqs last  enabled at (0): [<0000000000000000>] 0x0
hardirqs last disabled at (0): [<ffffffff8122d29a>] copy_process+0x256a/0x7650 kernel/fork.c:2448
softirqs last  enabled at (0): [<ffffffff8122d2e2>] copy_process+0x25b2/0x7650 kernel/fork.c:2452
softirqs last disabled at (0): [<0000000000000000>] 0x0
---[ end trace 0000000000000000 ]---
------------[ cut here ]------------
WARNING: CPU: 1 PID: 568 at drivers/iommu/iommufd/io_pagetable.c:1158 iopt_remove_access+0xb5/0xd0 drivers/iommu/iommufd/io_pagetable.c:1157
Modules linked in:
CPU: 1 PID: 568 Comm: syz-executor321 Tainted: G    B   W          6.4.0-rc6-5ca8bbe2b782+ #1
Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
RIP: 0010:iopt_remove_access+0xb5/0xd0 drivers/iommu/iommufd/io_pagetable.c:1157
Code: 45 85 e4 75 29 e8 4b 2d 0b fe 4c 89 ef e8 33 eb e8 fd 48 89 df e8 2b eb e8 fd 5b 41 5c 41 5d 5d c3 cc cc cc cc e8 2b 2d 0b fe <0f> 0b eb b9 e8 22 2d 0b fe 0f 0b eb ce e8 b9 1d 67 fe eb 90 0f 1f
RSP: 0018:ffff88801175fbb8 EFLAGS: 00010246
RAX: 0000000000000000 RBX: ffff88801108e0a8 RCX: 0000000000000000
RDX: 0000000000000000 RSI: ffff88800b7f0000 RDI: 0000000000000002
RBP: ffff88801175fbd0 R08: ffffed1002211c33 R09: ffffed1002211c33
R10: ffff88801108e193 R11: ffffed1002211c32 R12: ffff888019e23400
R13: ffff88801108e1e8 R14: ffffffff835430e0 R15: ffff88801175fe68
FS:  0000000001a0a3c0(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
CR2: 0000000020000140 CR3: 0000000013f22000 CR4: 0000000000750ee0
PKRU: 55555554
Call Trace:
 <TASK>
 __iommufd_access_detach+0x1c2/0x2b0 drivers/iommu/iommufd/device.c:971
 iommufd_access_change_pt+0x149/0x270 drivers/iommu/iommufd/device.c:1006
 iommufd_access_replace+0xb4/0x120 drivers/iommu/iommufd/device.c:1042
 iommufd_test_access_replace_ioas drivers/iommu/iommufd/selftest.c:1025 [inline]
 iommufd_test+0x103d/0x3f00 drivers/iommu/iommufd/selftest.c:1252
 iommufd_fops_ioctl+0x37d/0x510 drivers/iommu/iommufd/main.c:378
 vfs_ioctl fs/ioctl.c:51 [inline]
 __do_sys_ioctl fs/ioctl.c:870 [inline]
 __se_sys_ioctl fs/ioctl.c:856 [inline]
 __x64_sys_ioctl+0x1a3/0x230 fs/ioctl.c:856
 do_syscall_x64 arch/x86/entry/common.c:50 [inline]
 do_syscall_64+0x3b/0x90 arch/x86/entry/common.c:80
 entry_SYSCALL_64_after_hwframe+0x72/0xdc
RIP: 0033:0x44ff3d
Code: db 48 89 d8 5b 5d 41 5c 41 5d 41 5e c3 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 c7 c1 a8 ff ff ff f7 d8 64 89 01 48
RSP: 002b:00007fff8410fc18 EFLAGS: 00000246 ORIG_RAX: 0000000000000010
RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 000000000044ff3d
RDX: 0000000020000000 RSI: 0000000000003ba0 RDI: 0000000000000003
RBP: 0000000000000001 R08: 0000000000411b40 R09: 0000000000411b40
R10: 0000000000411b40 R11: 0000000000000246 R12: 0000000000000001
R13: 0000000000000000 R14: 00000000004004e8 R15: 0000000000000000
 </TASK>
irq event stamp: 0
hardirqs last  enabled at (0): [<0000000000000000>] 0x0
hardirqs last disabled at (0): [<ffffffff8122d29a>] copy_process+0x256a/0x7650 kernel/fork.c:2448
softirqs last  enabled at (0): [<ffffffff8122d2e2>] copy_process+0x25b2/0x7650 kernel/fork.c:2452
softirqs last disabled at (0): [<0000000000000000>] 0x0
---[ end trace 0000000000000000 ]---
------------[ cut here ]------------
WARNING: CPU: 1 PID: 568 at drivers/iommu/iommufd/io_pagetable.c:1158 iopt_remove_access+0xb5/0xd0 drivers/iommu/iommufd/io_pagetable.c:1157
Modules linked in:
CPU: 1 PID: 568 Comm: syz-executor321 Tainted: G    B   W          6.4.0-rc6-5ca8bbe2b782+ #1
Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
RIP: 0010:iopt_remove_access+0xb5/0xd0 drivers/iommu/iommufd/io_pagetable.c:1157
Code: 45 85 e4 75 29 e8 4b 2d 0b fe 4c 89 ef e8 33 eb e8 fd 48 89 df e8 2b eb e8 fd 5b 41 5c 41 5d 5d c3 cc cc cc cc e8 2b 2d 0b fe <0f> 0b eb b9 e8 22 2d 0b fe 0f 0b eb ce e8 b9 1d 67 fe eb 90 0f 1f
RSP: 0018:ffff88801175fbd0 EFLAGS: 00010246
RAX: 0000000000000000 RBX: ffff88801108e0a8 RCX: 0000000000000000
RDX: 0000000000000000 RSI: ffff88800b7f0000 RDI: 0000000000000002
RBP: ffff88801175fbe8 R08: ffffed1002211c33 R09: ffffed1002211c33
R10: ffff88801108e193 R11: ffffed1002211c32 R12: ffff888019fcfc00
R13: ffff88801108e1e8 R14: ffff88801500eb00 R15: 0000000000000000
FS:  0000000000000000(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
CR2: 00000000004e5420 CR3: 000000000667e000 CR4: 0000000000750ee0
PKRU: 55555554
Call Trace:
 <TASK>
 iommufd_access_destroy_object+0x65/0x170 drivers/iommu/iommufd/device.c:875
 iommufd_object_destroy_user+0x18e/0x220 drivers/iommu/iommufd/main.c:163
 iommufd_access_destroy+0x43/0x70 drivers/iommu/iommufd/device.c:938
 iommufd_test_staccess_release+0x8d/0xd0 drivers/iommu/iommufd/selftest.c:918
 __fput+0x26d/0xa40 fs/file_table.c:321
 ____fput+0x1e/0x30 fs/file_table.c:349
 task_work_run+0x1a4/0x2d0 kernel/task_work.c:179
 exit_task_work include/linux/task_work.h:38 [inline]
 do_exit+0xaf3/0x2f60 kernel/exit.c:874
 do_group_exit+0xe0/0x2b0 kernel/exit.c:1024
 __do_sys_exit_group kernel/exit.c:1035 [inline]
 __se_sys_exit_group kernel/exit.c:1033 [inline]
 __x64_sys_exit_group+0x47/0x50 kernel/exit.c:1033
 do_syscall_x64 arch/x86/entry/common.c:50 [inline]
 do_syscall_64+0x3b/0x90 arch/x86/entry/common.c:80
 entry_SYSCALL_64_after_hwframe+0x72/0xdc
RIP: 0033:0x44de86
Code: Unable to access opcode bytes at 0x44de5c.
RSP: 002b:00007fff8410fbc8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
RAX: ffffffffffffffda RBX: 00000000004e5410 RCX: 000000000044de86
RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffffa8
R10: 0000000000411b40 R11: 0000000000000246 R12: 00000000004e5410
R13: 0000000000000001 R14: 0000000000000000 R15: 0000000000000001
 </TASK>
irq event stamp: 0
hardirqs last  enabled at (0): [<0000000000000000>] 0x0
hardirqs last disabled at (0): [<ffffffff8122d29a>] copy_process+0x256a/0x7650 kernel/fork.c:2448
softirqs last  enabled at (0): [<ffffffff8122d2e2>] copy_process+0x25b2/0x7650 kernel/fork.c:2452
softirqs last disabled at (0): [<0000000000000000>] 0x0
---[ end trace 0000000000000000 ]---
------------[ cut here ]------------
WARNING: CPU: 1 PID: 568 at drivers/iommu/iommufd/io_pagetable.c:663 iopt_destroy_table+0x15f/0x1b0 drivers/iommu/iommufd/io_pagetable.c:663
Modules linked in:
CPU: 1 PID: 568 Comm: syz-executor321 Tainted: G    B   W          6.4.0-rc6-5ca8bbe2b782+ #1
Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
RIP: 0010:iopt_destroy_table+0x15f/0x1b0 drivers/iommu/iommufd/io_pagetable.c:663
Code: 5b 41 5c 41 5d 41 5e 5d c3 cc cc cc cc e8 c9 53 0b fe 0f 0b e9 51 ff ff ff e8 bd 53 0b fe 0f 0b e9 76 ff ff ff e8 b1 53 0b fe <0f> 0b eb 9e e8 a8 53 0b fe 0f 0b e8 a1 53 0b fe 5b 41 5c 41 5d 41
RSP: 0018:ffff88801175fb78 EFLAGS: 00010246
RAX: 0000000000000000 RBX: 0000000000000000 RCX: 0000000000000000
RDX: 0000000000000000 RSI: ffff88800b7f0000 RDI: 0000000000000002
RBP: ffff88801175fb98 R08: ffffed1002211c3e R09: ffffed1002211c3e
R10: ffff88801108e1ef R11: ffffed1002211c3d R12: ffff88801108e290
R13: ffff88801108e0a8 R14: ffffffffffffffff R15: ffff88801175fc60
FS:  0000000000000000(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
CR2: 00000000004e5420 CR3: 000000000667e000 CR4: 0000000000750ee0
PKRU: 55555554
Call Trace:
 <TASK>
 iommufd_ioas_destroy+0x53/0x70 drivers/iommu/iommufd/ioas.c:19
 iommufd_fops_release+0x1f7/0x370 drivers/iommu/iommufd/main.c:231
 __fput+0x26d/0xa40 fs/file_table.c:321
 ____fput+0x1e/0x30 fs/file_table.c:349
 task_work_run+0x1a4/0x2d0 kernel/task_work.c:179
 exit_task_work include/linux/task_work.h:38 [inline]
 do_exit+0xaf3/0x2f60 kernel/exit.c:874
 do_group_exit+0xe0/0x2b0 kernel/exit.c:1024
 __do_sys_exit_group kernel/exit.c:1035 [inline]
 __se_sys_exit_group kernel/exit.c:1033 [inline]
 __x64_sys_exit_group+0x47/0x50 kernel/exit.c:1033
 do_syscall_x64 arch/x86/entry/common.c:50 [inline]
 do_syscall_64+0x3b/0x90 arch/x86/entry/common.c:80
 entry_SYSCALL_64_after_hwframe+0x72/0xdc
RIP: 0033:0x44de86
Code: Unable to access opcode bytes at 0x44de5c.
RSP: 002b:00007fff8410fbc8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
RAX: ffffffffffffffda RBX: 00000000004e5410 RCX: 000000000044de86
RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffffa8
R10: 0000000000411b40 R11: 0000000000000246 R12: 00000000004e5410
R13: 0000000000000001 R14: 0000000000000000 R15: 0000000000000001
 </TASK>
irq event stamp: 0
hardirqs last  enabled at (0): [<0000000000000000>] 0x0
hardirqs last disabled at (0): [<ffffffff8122d29a>] copy_process+0x256a/0x7650 kernel/fork.c:2448
softirqs last  enabled at (0): [<ffffffff8122d2e2>] copy_process+0x25b2/0x7650 kernel/fork.c:2452
softirqs last disabled at (0): [<0000000000000000>] 0x0
---[ end trace 0000000000000000 ]---
------------[ cut here ]------------
WARNING: CPU: 1 PID: 569 at drivers/iommu/iommufd/io_pagetable.c:1158 iopt_remove_access+0xb5/0xd0 drivers/iommu/iommufd/io_pagetable.c:1157
Modules linked in:
CPU: 1 PID: 569 Comm: syz-executor321 Tainted: G    B   W          6.4.0-rc6-5ca8bbe2b782+ #1
Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
RIP: 0010:iopt_remove_access+0xb5/0xd0 drivers/iommu/iommufd/io_pagetable.c:1157
Code: 45 85 e4 75 29 e8 4b 2d 0b fe 4c 89 ef e8 33 eb e8 fd 48 89 df e8 2b eb e8 fd 5b 41 5c 41 5d 5d c3 cc cc cc cc e8 2b 2d 0b fe <0f> 0b eb b9 e8 22 2d 0b fe 0f 0b eb ce e8 b9 1d 67 fe eb 90 0f 1f
RSP: 0018:ffff888021eafbb8 EFLAGS: 00010246
RAX: 0000000000000000 RBX: ffff88801143e0a8 RCX: 0000000000000000
RDX: 0000000000000000 RSI: ffff88800b7f2500 RDI: 0000000000000002
RBP: ffff888021eafbd0 R08: ffffed1002287c33 R09: ffffed1002287c33
R10: ffff88801143e193 R11: ffffed1002287c32 R12: ffff88800a727400
R13: ffff88801143e1e8 R14: ffffffff835430e0 R15: ffff888021eafe68
FS:  0000000001a0a3c0(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
CR2: 0000000020000140 CR3: 00000000144a0000 CR4: 0000000000750ee0
PKRU: 55555554
Call Trace:
 <TASK>
 __iommufd_access_detach+0x1c2/0x2b0 drivers/iommu/iommufd/device.c:971
 iommufd_access_change_pt+0x149/0x270 drivers/iommu/iommufd/device.c:1006
 iommufd_access_replace+0xb4/0x120 drivers/iommu/iommufd/device.c:1042
 iommufd_test_access_replace_ioas drivers/iommu/iommufd/selftest.c:1025 [inline]
 iommufd_test+0x103d/0x3f00 drivers/iommu/iommufd/selftest.c:1252
 iommufd_fops_ioctl+0x37d/0x510 drivers/iommu/iommufd/main.c:378
 vfs_ioctl fs/ioctl.c:51 [inline]
 __do_sys_ioctl fs/ioctl.c:870 [inline]
 __se_sys_ioctl fs/ioctl.c:856 [inline]
 __x64_sys_ioctl+0x1a3/0x230 fs/ioctl.c:856
 do_syscall_x64 arch/x86/entry/common.c:50 [inline]
 do_syscall_64+0x3b/0x90 arch/x86/entry/common.c:80
 entry_SYSCALL_64_after_hwframe+0x72/0xdc
RIP: 0033:0x44ff3d
Code: db 48 89 d8 5b 5d 41 5c 41 5d 41 5e c3 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 c7 c1 a8 ff ff ff f7 d8 64 89 01 48
RSP: 002b:00007fff8410fc18 EFLAGS: 00000246 ORIG_RAX: 0000000000000010
RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 000000000044ff3d
RDX: 0000000020000000 RSI: 0000000000003ba0 RDI: 0000000000000003
RBP: 0000000000000001 R08: 0000000000411b40 R09: 0000000000411b40
R10: 0000000000411b40 R11: 0000000000000246 R12: 0000000000000001
R13: 0000000000000000 R14: 00000000004004e8 R15: 0000000000000000
 </TASK>
irq event stamp: 0
hardirqs last  enabled at (0): [<0000000000000000>] 0x0
hardirqs last disabled at (0): [<ffffffff8122d29a>] copy_process+0x256a/0x7650 kernel/fork.c:2448
softirqs last  enabled at (0): [<ffffffff8122d2e2>] copy_process+0x25b2/0x7650 kernel/fork.c:2452
softirqs last disabled at (0): [<0000000000000000>] 0x0
---[ end trace 0000000000000000 ]---
------------[ cut here ]------------
WARNING: CPU: 1 PID: 569 at drivers/iommu/iommufd/io_pagetable.c:1158 iopt_remove_access+0xb5/0xd0 drivers/iommu/iommufd/io_pagetable.c:1157
Modules linked in:
CPU: 1 PID: 569 Comm: syz-executor321 Tainted: G    B   W          6.4.0-rc6-5ca8bbe2b782+ #1
Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
RIP: 0010:iopt_remove_access+0xb5/0xd0 drivers/iommu/iommufd/io_pagetable.c:1157
Code: 45 85 e4 75 29 e8 4b 2d 0b fe 4c 89 ef e8 33 eb e8 fd 48 89 df e8 2b eb e8 fd 5b 41 5c 41 5d 5d c3 cc cc cc cc e8 2b 2d 0b fe <0f> 0b eb b9 e8 22 2d 0b fe 0f 0b eb ce e8 b9 1d 67 fe eb 90 0f 1f
RSP: 0018:ffff888021eafbd0 EFLAGS: 00010246
RAX: 0000000000000000 RBX: ffff88801143e0a8 RCX: 0000000000000000
RDX: 0000000000000000 RSI: ffff88800b7f2500 RDI: 0000000000000002
RBP: ffff888021eafbe8 R08: ffffed1002287c33 R09: ffffed1002287c33
R10: ffff88801143e193 R11: ffffed1002287c32 R12: ffff888019e23000
R13: ffff88801143e1e8 R14: ffff888016fde200 R15: 0000000000000000
FS:  0000000000000000(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
CR2: 00000000004e5420 CR3: 000000000667e000 CR4: 0000000000750ee0
PKRU: 55555554
Call Trace:
 <TASK>
 iommufd_access_destroy_object+0x65/0x170 drivers/iommu/iommufd/device.c:875
 iommufd_object_destroy_user+0x18e/0x220 drivers/iommu/iommufd/main.c:163
 iommufd_access_destroy+0x43/0x70 drivers/iommu/iommufd/device.c:938
 iommufd_test_staccess_release+0x8d/0xd0 drivers/iommu/iommufd/selftest.c:918
 __fput+0x26d/0xa40 fs/file_table.c:321
 ____fput+0x1e/0x30 fs/file_table.c:349
 task_work_run+0x1a4/0x2d0 kernel/task_work.c:179
 exit_task_work include/linux/task_work.h:38 [inline]
 do_exit+0xaf3/0x2f60 kernel/exit.c:874
 do_group_exit+0xe0/0x2b0 kernel/exit.c:1024
 __do_sys_exit_group kernel/exit.c:1035 [inline]
 __se_sys_exit_group kernel/exit.c:1033 [inline]
 __x64_sys_exit_group+0x47/0x50 kernel/exit.c:1033
 do_syscall_x64 arch/x86/entry/common.c:50 [inline]
 do_syscall_64+0x3b/0x90 arch/x86/entry/common.c:80
 entry_SYSCALL_64_after_hwframe+0x72/0xdc
RIP: 0033:0x44de86
Code: Unable to access opcode bytes at 0x44de5c.
RSP: 002b:00007fff8410fbc8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
RAX: ffffffffffffffda RBX: 00000000004e5410 RCX: 000000000044de86
RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffffa8
R10: 0000000000411b40 R11: 0000000000000246 R12: 00000000004e5410
R13: 0000000000000001 R14: 0000000000000000 R15: 0000000000000001
 </TASK>
irq event stamp: 0
hardirqs last  enabled at (0): [<0000000000000000>] 0x0
hardirqs last disabled at (0): [<ffffffff8122d29a>] copy_process+0x256a/0x7650 kernel/fork.c:2448
softirqs last  enabled at (0): [<ffffffff8122d2e2>] copy_process+0x25b2/0x7650 kernel/fork.c:2452
softirqs last disabled at (0): [<0000000000000000>] 0x0
---[ end trace 0000000000000000 ]---
------------[ cut here ]------------
WARNING: CPU: 1 PID: 569 at drivers/iommu/iommufd/io_pagetable.c:663 iopt_destroy_table+0x15f/0x1b0 drivers/iommu/iommufd/io_pagetable.c:663
Modules linked in:
CPU: 1 PID: 569 Comm: syz-executor321 Tainted: G    B   W          6.4.0-rc6-5ca8bbe2b782+ #1
Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
RIP: 0010:iopt_destroy_table+0x15f/0x1b0 drivers/iommu/iommufd/io_pagetable.c:663
Code: 5b 41 5c 41 5d 41 5e 5d c3 cc cc cc cc e8 c9 53 0b fe 0f 0b e9 51 ff ff ff e8 bd 53 0b fe 0f 0b e9 76 ff ff ff e8 b1 53 0b fe <0f> 0b eb 9e e8 a8 53 0b fe 0f 0b e8 a1 53 0b fe 5b 41 5c 41 5d 41
RSP: 0018:ffff888021eafb78 EFLAGS: 00010246
RAX: 0000000000000000 RBX: 0000000000000000 RCX: 0000000000000000
RDX: 0000000000000000 RSI: ffff88800b7f2500 RDI: 0000000000000002
RBP: ffff888021eafb98 R08: ffffed1002287c3e R09: ffffed1002287c3e
R10: ffff88801143e1ef R11: ffffed1002287c3d R12: ffff88801143e290
R13: ffff88801143e0a8 R14: ffffffffffffffff R15: ffff888021eafc60
FS:  0000000000000000(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
CR2: 00000000004e5420 CR3: 000000000667e000 CR4: 0000000000750ee0
PKRU: 55555554
Call Trace:
 <TASK>
 iommufd_ioas_destroy+0x53/0x70 drivers/iommu/iommufd/ioas.c:19
 iommufd_fops_release+0x1f7/0x370 drivers/iommu/iommufd/main.c:231
 __fput+0x26d/0xa40 fs/file_table.c:321
 ____fput+0x1e/0x30 fs/file_table.c:349
 task_work_run+0x1a4/0x2d0 kernel/task_work.c:179
 exit_task_work include/linux/task_work.h:38 [inline]
 do_exit+0xaf3/0x2f60 kernel/exit.c:874
 do_group_exit+0xe0/0x2b0 kernel/exit.c:1024
 __do_sys_exit_group kernel/exit.c:1035 [inline]
 __se_sys_exit_group kernel/exit.c:1033 [inline]
 __x64_sys_exit_group+0x47/0x50 kernel/exit.c:1033
 do_syscall_x64 arch/x86/entry/common.c:50 [inline]
 do_syscall_64+0x3b/0x90 arch/x86/entry/common.c:80
 entry_SYSCALL_64_after_hwframe+0x72/0xdc
RIP: 0033:0x44de86
Code: Unable to access opcode bytes at 0x44de5c.
RSP: 002b:00007fff8410fbc8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
RAX: ffffffffffffffda RBX: 00000000004e5410 RCX: 000000000044de86
RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffffa8
R10: 0000000000411b40 R11: 0000000000000246 R12: 00000000004e5410
R13: 0000000000000001 R14: 0000000000000000 R15: 0000000000000001
 </TASK>
irq event stamp: 0
hardirqs last  enabled at (0): [<0000000000000000>] 0x0
hardirqs last disabled at (0): [<ffffffff8122d29a>] copy_process+0x256a/0x7650 kernel/fork.c:2448
softirqs last  enabled at (0): [<ffffffff8122d2e2>] copy_process+0x25b2/0x7650 kernel/fork.c:2452
softirqs last disabled at (0): [<0000000000000000>] 0x0
---[ end trace 0000000000000000 ]---
------------[ cut here ]------------
WARNING: CPU: 1 PID: 570 at drivers/iommu/iommufd/io_pagetable.c:1158 iopt_remove_access+0xb5/0xd0 drivers/iommu/iommufd/io_pagetable.c:1157
Modules linked in:
CPU: 1 PID: 570 Comm: syz-executor321 Tainted: G    B   W          6.4.0-rc6-5ca8bbe2b782+ #1
Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
RIP: 0010:iopt_remove_access+0xb5/0xd0 drivers/iommu/iommufd/io_pagetable.c:1157
Code: 45 85 e4 75 29 e8 4b 2d 0b fe 4c 89 ef e8 33 eb e8 fd 48 89 df e8 2b eb e8 fd 5b 41 5c 41 5d 5d c3 cc cc cc cc e8 2b 2d 0b fe <0f> 0b eb b9 e8 22 2d 0b fe 0f 0b eb ce e8 b9 1d 67 fe eb 90 0f 1f
RSP: 0018:ffff8880112d7bb8 EFLAGS: 00010246
RAX: 0000000000000000 RBX: ffff8880164bc0a8 RCX: 0000000000000000
RDX: 0000000000000000 RSI: ffff88801535ca00 RDI: 0000000000000002
RBP: ffff8880112d7bd0 R08: ffffed1002c97833 R09: ffffed1002c97833
R10: ffff8880164bc193 R11: ffffed1002c97832 R12: ffff88801177e800
R13: ffff8880164bc1e8 R14: ffffffff835430e0 R15: ffff8880112d7e68
FS:  0000000001a0a3c0(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
CR2: 0000000020000140 CR3: 0000000011100000 CR4: 0000000000750ee0
PKRU: 55555554
Call Trace:
 <TASK>
 __iommufd_access_detach+0x1c2/0x2b0 drivers/iommu/iommufd/device.c:971
 iommufd_access_change_pt+0x149/0x270 drivers/iommu/iommufd/device.c:1006
 iommufd_access_replace+0xb4/0x120 drivers/iommu/iommufd/device.c:1042
 iommufd_test_access_replace_ioas drivers/iommu/iommufd/selftest.c:1025 [inline]
 iommufd_test+0x103d/0x3f00 drivers/iommu/iommufd/selftest.c:1252
 iommufd_fops_ioctl+0x37d/0x510 drivers/iommu/iommufd/main.c:378
 vfs_ioctl fs/ioctl.c:51 [inline]
 __do_sys_ioctl fs/ioctl.c:870 [inline]
 __se_sys_ioctl fs/ioctl.c:856 [inline]
 __x64_sys_ioctl+0x1a3/0x230 fs/ioctl.c:856
 do_syscall_x64 arch/x86/entry/common.c:50 [inline]
 do_syscall_64+0x3b/0x90 arch/x86/entry/common.c:80
 entry_SYSCALL_64_after_hwframe+0x72/0xdc
RIP: 0033:0x44ff3d
Code: db 48 89 d8 5b 5d 41 5c 41 5d 41 5e c3 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 c7 c1 a8 ff ff ff f7 d8 64 89 01 48
RSP: 002b:00007fff8410fc18 EFLAGS: 00000246 ORIG_RAX: 0000000000000010
RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 000000000044ff3d
RDX: 0000000020000000 RSI: 0000000000003ba0 RDI: 0000000000000003
RBP: 0000000000000001 R08: 0000000000411b40 R09: 0000000000411b40
R10: 0000000000411b40 R11: 0000000000000246 R12: 0000000000000001
R13: 0000000000000000 R14: 00000000004004e8 R15: 0000000000000000
 </TASK>
irq event stamp: 0
hardirqs last  enabled at (0): [<0000000000000000>] 0x0
hardirqs last disabled at (0): [<ffffffff8122d29a>] copy_process+0x256a/0x7650 kernel/fork.c:2448
softirqs last  enabled at (0): [<ffffffff8122d2e2>] copy_process+0x25b2/0x7650 kernel/fork.c:2452
softirqs last disabled at (0): [<0000000000000000>] 0x0
---[ end trace 0000000000000000 ]---
------------[ cut here ]------------
WARNING: CPU: 1 PID: 570 at drivers/iommu/iommufd/io_pagetable.c:1158 iopt_remove_access+0xb5/0xd0 drivers/iommu/iommufd/io_pagetable.c:1157
Modules linked in:
CPU: 1 PID: 570 Comm: syz-executor321 Tainted: G    B   W          6.4.0-rc6-5ca8bbe2b782+ #1
Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
RIP: 0010:iopt_remove_access+0xb5/0xd0 drivers/iommu/iommufd/io_pagetable.c:1157
Code: 45 85 e4 75 29 e8 4b 2d 0b fe 4c 89 ef e8 33 eb e8 fd 48 89 df e8 2b eb e8 fd 5b 41 5c 41 5d 5d c3 cc cc cc cc e8 2b 2d 0b fe <0f> 0b eb b9 e8 22 2d 0b fe 0f 0b eb ce e8 b9 1d 67 fe eb 90 0f 1f
RSP: 0018:ffff8880112d7bd0 EFLAGS: 00010246
RAX: 0000000000000000 RBX: ffff8880164bc0a8 RCX: 0000000000000000
RBP: ffff8880112d7be8 R08: ffffed1002c97833 R09: ffffed1002c97833
R10: ffff8880164bc193 R11: ffffed1002c97832 R12: ffff888019d78800
R13: ffff8880164bc1e8 R14: ffff88801a0ef800 R15: 0000000000000000
FS:  0000000000000000(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
CR2: 00000000004e5420 CR3: 000000000667e000 CR4: 0000000000750ee0
PKRU: 55555554
Call Trace:
 <TASK>
 iommufd_access_destroy_object+0x65/0x170 drivers/iommu/iommufd/device.c:875
 iommufd_object_destroy_user+0x18e/0x220 drivers/iommu/iommufd/main.c:163
 iommufd_access_destroy+0x43/0x70 drivers/iommu/iommufd/device.c:938
 iommufd_test_staccess_release+0x8d/0xd0 drivers/iommu/iommufd/selftest.c:918
 __fput+0x26d/0xa40 fs/file_table.c:321
 ____fput+0x1e/0x30 fs/file_table.c:349
 task_work_run+0x1a4/0x2d0 kernel/task_work.c:179
 exit_task_work include/linux/task_work.h:38 [inline]
 do_exit+0xaf3/0x2f60 kernel/exit.c:874
 do_group_exit+0xe0/0x2b0 kernel/exit.c:1024
 __do_sys_exit_group kernel/exit.c:1035 [inline]
 __se_sys_exit_group kernel/exit.c:1033 [inline]
 __x64_sys_exit_group+0x47/0x50 kernel/exit.c:1033
 do_syscall_x64 arch/x86/entry/common.c:50 [inline]
 do_syscall_64+0x3b/0x90 arch/x86/entry/common.c:80
 entry_SYSCALL_64_after_hwframe+0x72/0xdc
RIP: 0033:0x44de86
Code: Unable to access opcode bytes at 0x44de5c.
RSP: 002b:00007fff8410fbc8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
RAX: ffffffffffffffda RBX: 00000000004e5410 RCX: 000000000044de86
RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffffa8
R10: 0000000000411b40 R11: 0000000000000246 R12: 00000000004e5410
R13: 0000000000000001 R14: 0000000000000000 R15: 0000000000000001
 </TASK>
irq event stamp: 0
hardirqs last  enabled at (0): [<0000000000000000>] 0x0
hardirqs last disabled at (0): [<ffffffff8122d29a>] copy_process+0x256a/0x7650 kernel/fork.c:2448
softirqs last  enabled at (0): [<ffffffff8122d2e2>] copy_process+0x25b2/0x7650 kernel/fork.c:2452
softirqs last disabled at (0): [<0000000000000000>] 0x0
---[ end trace 0000000000000000 ]---
------------[ cut here ]------------
WARNING: CPU: 1 PID: 570 at drivers/iommu/iommufd/io_pagetable.c:663 iopt_destroy_table+0x15f/0x1b0 drivers/iommu/iommufd/io_pagetable.c:663
Modules linked in:
CPU: 1 PID: 570 Comm: syz-executor321 Tainted: G    B   W          6.4.0-rc6-5ca8bbe2b782+ #1
Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
RIP: 0010:iopt_destroy_table+0x15f/0x1b0 drivers/iommu/iommufd/io_pagetable.c:663
Code: 5b 41 5c 41 5d 41 5e 5d c3 cc cc cc cc e8 c9 53 0b fe 0f 0b e9 51 ff ff ff e8 bd 53 0b fe 0f 0b e9 76 ff ff ff e8 b1 53 0b fe <0f> 0b eb 9e e8 a8 53 0b fe 0f 0b e8 a1 53 0b fe 5b 41 5c 41 5d 41
RSP: 0018:ffff8880112d7b78 EFLAGS: 00010246
RAX: 0000000000000000 RBX: 0000000000000000 RCX: 0000000000000000
RDX: 0000000000000000 RSI: ffff88801535ca00 RDI: 0000000000000002
RBP: ffff8880112d7b98 R08: ffffed1002c9783e R09: ffffed1002c9783e
R10: ffff8880164bc1ef R11: ffffed1002c9783d R12: ffff8880164bc290
R13: ffff8880164bc0a8 R14: ffffffffffffffff R15: ffff8880112d7c60
FS:  0000000000000000(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
CR2: 00000000004e5420 CR3: 000000000667e000 CR4: 0000000000750ee0
PKRU: 55555554
Call Trace:
 <TASK>
 iommufd_ioas_destroy+0x53/0x70 drivers/iommu/iommufd/ioas.c:19
 iommufd_fops_release+0x1f7/0x370 drivers/iommu/iommufd/main.c:231
 __fput+0x26d/0xa40 fs/file_table.c:321
 ____fput+0x1e/0x30 fs/file_table.c:349
 task_work_run+0x1a4/0x2d0 kernel/task_work.c:179
 exit_task_work include/linux/task_work.h:38 [inline]
 do_exit+0xaf3/0x2f60 kernel/exit.c:874
 do_group_exit+0xe0/0x2b0 kernel/exit.c:1024
 __do_sys_exit_group kernel/exit.c:1035 [inline]
 __se_sys_exit_group kernel/exit.c:1033 [inline]
 __x64_sys_exit_group+0x47/0x50 kernel/exit.c:1033
 do_syscall_x64 arch/x86/entry/common.c:50 [inline]
 do_syscall_64+0x3b/0x90 arch/x86/entry/common.c:80
 entry_SYSCALL_64_after_hwframe+0x72/0xdc
RIP: 0033:0x44de86
Code: Unable to access opcode bytes at 0x44de5c.
RSP: 002b:00007fff8410fbc8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
RAX: ffffffffffffffda RBX: 00000000004e5410 RCX: 000000000044de86
RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffffa8
R10: 0000000000411b40 R11: 0000000000000246 R12: 00000000004e5410
R13: 0000000000000001 R14: 0000000000000000 R15: 0000000000000001
 </TASK>
irq event stamp: 0
hardirqs last  enabled at (0): [<0000000000000000>] 0x0
hardirqs last disabled at (0): [<ffffffff8122d29a>] copy_process+0x256a/0x7650 kernel/fork.c:2448
softirqs last  enabled at (0): [<ffffffff8122d2e2>] copy_process+0x25b2/0x7650 kernel/fork.c:2452
softirqs last disabled at (0): [<0000000000000000>] 0x0
---[ end trace 0000000000000000 ]---
------------[ cut here ]------------
WARNING: CPU: 1 PID: 571 at drivers/iommu/iommufd/io_pagetable.c:1158 iopt_remove_access+0xb5/0xd0 drivers/iommu/iommufd/io_pagetable.c:1157
Modules linked in:
CPU: 1 PID: 571 Comm: syz-executor321 Tainted: G    B   W          6.4.0-rc6-5ca8bbe2b782+ #1
Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
RIP: 0010:iopt_remove_access+0xb5/0xd0 drivers/iommu/iommufd/io_pagetable.c:1157
Code: 45 85 e4 75 29 e8 4b 2d 0b fe 4c 89 ef e8 33 eb e8 fd 48 89 df e8 2b eb e8 fd 5b 41 5c 41 5d 5d c3 cc cc cc cc e8 2b 2d 0b fe <0f> 0b eb b9 e8 22 2d 0b fe 0f 0b eb ce e8 b9 1d 67 fe eb 90 0f 1f
RSP: 0018:ffff88801295fbb8 EFLAGS: 00010246
RAX: 0000000000000000 RBX: ffff888014cca8a8 RCX: 0000000000000000
RDX: 0000000000000000 RSI: ffff888015358000 RDI: 0000000000000002
RBP: ffff88801295fbd0 R08: ffffed1002999533 R09: ffffed1002999533
R10: ffff888014cca993 R11: ffffed1002999532 R12: ffff888016859c00
R13: ffff888014cca9e8 R14: ffffffff835430e0 R15: ffff88801295fe68
FS:  0000000001a0a3c0(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
CR2: 0000000020000140 CR3: 000000000f378000 CR4: 0000000000750ee0
PKRU: 55555554
Call Trace:
 <TASK>
 __iommufd_access_detach+0x1c2/0x2b0 drivers/iommu/iommufd/device.c:971
 iommufd_access_change_pt+0x149/0x270 drivers/iommu/iommufd/device.c:1006
 iommufd_access_replace+0xb4/0x120 drivers/iommu/iommufd/device.c:1042
 iommufd_test_access_replace_ioas drivers/iommu/iommufd/selftest.c:1025 [inline]
 iommufd_test+0x103d/0x3f00 drivers/iommu/iommufd/selftest.c:1252
 iommufd_fops_ioctl+0x37d/0x510 drivers/iommu/iommufd/main.c:378
 vfs_ioctl fs/ioctl.c:51 [inline]
 __do_sys_ioctl fs/ioctl.c:870 [inline]
 __se_sys_ioctl fs/ioctl.c:856 [inline]
 __x64_sys_ioctl+0x1a3/0x230 fs/ioctl.c:856
 do_syscall_x64 arch/x86/entry/common.c:50 [inline]
 do_syscall_64+0x3b/0x90 arch/x86/entry/common.c:80
 entry_SYSCALL_64_after_hwframe+0x72/0xdc
RIP: 0033:0x44ff3d
Code: db 48 89 d8 5b 5d 41 5c 41 5d 41 5e c3 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 c7 c1 a8 ff ff ff f7 d8 64 89 01 48
RSP: 002b:00007fff8410fc18 EFLAGS: 00000246 ORIG_RAX: 0000000000000010
RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 000000000044ff3d
RDX: 0000000020000000 RSI: 0000000000003ba0 RDI: 0000000000000003
RBP: 0000000000000001 R08: 0000000000411b40 R09: 0000000000411b40
R10: 0000000000411b40 R11: 0000000000000246 R12: 0000000000000001
R13: 0000000000000000 R14: 00000000004004e8 R15: 0000000000000000
 </TASK>
irq event stamp: 0
hardirqs last  enabled at (0): [<0000000000000000>] 0x0
hardirqs last disabled at (0): [<ffffffff8122d29a>] copy_process+0x256a/0x7650 kernel/fork.c:2448
softirqs last  enabled at (0): [<ffffffff8122d2e2>] copy_process+0x25b2/0x7650 kernel/fork.c:2452
softirqs last disabled at (0): [<0000000000000000>] 0x0
---[ end trace 0000000000000000 ]---
------------[ cut here ]------------
WARNING: CPU: 1 PID: 571 at drivers/iommu/iommufd/io_pagetable.c:1158 iopt_remove_access+0xb5/0xd0 drivers/iommu/iommufd/io_pagetable.c:1157
Modules linked in:
CPU: 1 PID: 571 Comm: syz-executor321 Tainted: G    B   W          6.4.0-rc6-5ca8bbe2b782+ #1
Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
RIP: 0010:iopt_remove_access+0xb5/0xd0 drivers/iommu/iommufd/io_pagetable.c:1157
Code: 45 85 e4 75 29 e8 4b 2d 0b fe 4c 89 ef e8 33 eb e8 fd 48 89 df e8 2b eb e8 fd 5b 41 5c 41 5d 5d c3 cc cc cc cc e8 2b 2d 0b fe <0f> 0b eb b9 e8 22 2d 0b fe 0f 0b eb ce e8 b9 1d 67 fe eb 90 0f 1f
RSP: 0018:ffff88801295fbd0 EFLAGS: 00010246
RAX: 0000000000000000 RBX: ffff888014cca8a8 RCX: 0000000000000000
RDX: 0000000000000000 RSI: ffff888015358000 RDI: 0000000000000002
RBP: ffff88801295fbe8 R08: ffffed1002999533 R09: ffffed1002999533
R10: ffff888014cca993 R11: ffffed1002999532 R12: ffff88801177f800
R13: ffff888014cca9e8 R14: ffff88801509cf00 R15: 0000000000000000
FS:  0000000000000000(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
CR2: 00000000004e5420 CR3: 000000000667e000 CR4: 0000000000750ee0
PKRU: 55555554
Call Trace:
 <TASK>
 iommufd_access_destroy_object+0x65/0x170 drivers/iommu/iommufd/device.c:875
 iommufd_object_destroy_user+0x18e/0x220 drivers/iommu/iommufd/main.c:163
 iommufd_access_destroy+0x43/0x70 drivers/iommu/iommufd/device.c:938
 iommufd_test_staccess_release+0x8d/0xd0 drivers/iommu/iommufd/selftest.c:918
 __fput+0x26d/0xa40 fs/file_table.c:321
 ____fput+0x1e/0x30 fs/file_table.c:349
 task_work_run+0x1a4/0x2d0 kernel/task_work.c:179
 exit_task_work include/linux/task_work.h:38 [inline]
 do_exit+0xaf3/0x2f60 kernel/exit.c:874
 do_group_exit+0xe0/0x2b0 kernel/exit.c:1024
 __do_sys_exit_group kernel/exit.c:1035 [inline]
 __se_sys_exit_group kernel/exit.c:1033 [inline]
 __x64_sys_exit_group+0x47/0x50 kernel/exit.c:1033
 do_syscall_x64 arch/x86/entry/common.c:50 [inline]
 do_syscall_64+0x3b/0x90 arch/x86/entry/common.c:80
 entry_SYSCALL_64_after_hwframe+0x72/0xdc
RIP: 0033:0x44de86
Code: Unable to access opcode bytes at 0x44de5c.
RSP: 002b:00007fff8410fbc8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
RAX: ffffffffffffffda RBX: 00000000004e5410 RCX: 000000000044de86
RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffffa8
R10: 0000000000411b40 R11: 0000000000000246 R12: 00000000004e5410
R13: 0000000000000001 R14: 0000000000000000 R15: 0000000000000001
 </TASK>
irq event stamp: 0
hardirqs last  enabled at (0): [<0000000000000000>] 0x0
hardirqs last disabled at (0): [<ffffffff8122d29a>] copy_process+0x256a/0x7650 kernel/fork.c:2448
softirqs last  enabled at (0): [<ffffffff8122d2e2>] copy_process+0x25b2/0x7650 kernel/fork.c:2452
softirqs last disabled at (0): [<0000000000000000>] 0x0
---[ end trace 0000000000000000 ]---
------------[ cut here ]------------
WARNING: CPU: 1 PID: 571 at drivers/iommu/iommufd/io_pagetable.c:663 iopt_destroy_table+0x15f/0x1b0 drivers/iommu/iommufd/io_pagetable.c:663
Modules linked in:
CPU: 1 PID: 571 Comm: syz-executor321 Tainted: G    B   W          6.4.0-rc6-5ca8bbe2b782+ #1
Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
RIP: 0010:iopt_destroy_table+0x15f/0x1b0 drivers/iommu/iommufd/io_pagetable.c:663
Code: 5b 41 5c 41 5d 41 5e 5d c3 cc cc cc cc e8 c9 53 0b fe 0f 0b e9 51 ff ff ff e8 bd 53 0b fe 0f 0b e9 76 ff ff ff e8 b1 53 0b fe <0f> 0b eb 9e e8 a8 53 0b fe 0f 0b e8 a1 53 0b fe 5b 41 5c 41 5d 41
RSP: 0018:ffff88801295fb78 EFLAGS: 00010246
RAX: 0000000000000000 RBX: 0000000000000000 RCX: 0000000000000000
RDX: 0000000000000000 RSI: ffff888015358000 RDI: 0000000000000002
RBP: ffff88801295fb98 R08: ffffed100299953e R09: ffffed100299953e
R10: ffff888014cca9ef R11: ffffed100299953d R12: ffff888014ccaa90
R13: ffff888014cca8a8 R14: ffffffffffffffff R15: ffff88801295fc60
FS:  0000000000000000(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
CR2: 00007f97c057e018 CR3: 0000000014616000 CR4: 0000000000750ee0
PKRU: 55555554
Call Trace:
 <TASK>
 iommufd_ioas_destroy+0x53/0x70 drivers/iommu/iommufd/ioas.c:19
 iommufd_fops_release+0x1f7/0x370 drivers/iommu/iommufd/main.c:231
 __fput+0x26d/0xa40 fs/file_table.c:321
 ____fput+0x1e/0x30 fs/file_table.c:349
 task_work_run+0x1a4/0x2d0 kernel/task_work.c:179
 exit_task_work include/linux/task_work.h:38 [inline]
 do_exit+0xaf3/0x2f60 kernel/exit.c:874
 do_group_exit+0xe0/0x2b0 kernel/exit.c:1024
 __do_sys_exit_group kernel/exit.c:1035 [inline]
 __se_sys_exit_group kernel/exit.c:1033 [inline]
 __x64_sys_exit_group+0x47/0x50 kernel/exit.c:1033
 do_syscall_x64 arch/x86/entry/common.c:50 [inline]
 do_syscall_64+0x3b/0x90 arch/x86/entry/common.c:80
 entry_SYSCALL_64_after_hwframe+0x72/0xdc
RIP: 0033:0x44de86
Code: Unable to access opcode bytes at 0x44de5c.
RSP: 002b:00007fff8410fbc8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
RAX: ffffffffffffffda RBX: 00000000004e5410 RCX: 000000000044de86
RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffffa8
R10: 0000000000411b40 R11: 0000000000000246 R12: 00000000004e5410
R13: 0000000000000001 R14: 0000000000000000 R15: 0000000000000001
 </TASK>
irq event stamp: 0
hardirqs last  enabled at (0): [<0000000000000000>] 0x0
hardirqs last disabled at (0): [<ffffffff8122d29a>] copy_process+0x256a/0x7650 kernel/fork.c:2448
softirqs last  enabled at (0): [<ffffffff8122d2e2>] copy_process+0x25b2/0x7650 kernel/fork.c:2452
softirqs last disabled at (0): [<0000000000000000>] 0x0
---[ end trace 0000000000000000 ]---
------------[ cut here ]------------
WARNING: CPU: 1 PID: 572 at drivers/iommu/iommufd/io_pagetable.c:1158 iopt_remove_access+0xb5/0xd0 drivers/iommu/iommufd/io_pagetable.c:1157
Modules linked in:
CPU: 1 PID: 572 Comm: syz-executor321 Tainted: G    B   W          6.4.0-rc6-5ca8bbe2b782+ #1
Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
RIP: 0010:iopt_remove_access+0xb5/0xd0 drivers/iommu/iommufd/io_pagetable.c:1157
Code: 45 85 e4 75 29 e8 4b 2d 0b fe 4c 89 ef e8 33 eb e8 fd 48 89 df e8 2b eb e8 fd 5b 41 5c 41 5d 5d c3 cc cc cc cc e8 2b 2d 0b fe <0f> 0b eb b9 e8 22 2d 0b fe 0f 0b eb ce e8 b9 1d 67 fe eb 90 0f 1f
RSP: 0018:ffff88800f65fbb8 EFLAGS: 00010246
RAX: 0000000000000000 RBX: ffff888022dd40a8 RCX: 0000000000000000
RDX: 0000000000000000 RSI: ffff88800ba3a500 RDI: 0000000000000002
RBP: ffff88800f65fbd0 R08: ffffed10045ba833 R09: ffffed10045ba833
R10: ffff888022dd4193 R11: ffffed10045ba832 R12: ffff888019d83c00
R13: ffff888022dd41e8 R14: ffffffff835430e0 R15: ffff88800f65fe68
FS:  0000000001a0a3c0(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
CR2: 0000000020000140 CR3: 0000000016b42000 CR4: 0000000000750ee0
PKRU: 55555554
Call Trace:
 <TASK>
 __iommufd_access_detach+0x1c2/0x2b0 drivers/iommu/iommufd/device.c:971
 iommufd_access_change_pt+0x149/0x270 drivers/iommu/iommufd/device.c:1006
 iommufd_access_replace+0xb4/0x120 drivers/iommu/iommufd/device.c:1042
 iommufd_test_access_replace_ioas drivers/iommu/iommufd/selftest.c:1025 [inline]
 iommufd_test+0x103d/0x3f00 drivers/iommu/iommufd/selftest.c:1252
 iommufd_fops_ioctl+0x37d/0x510 drivers/iommu/iommufd/main.c:378
 vfs_ioctl fs/ioctl.c:51 [inline]
 __do_sys_ioctl fs/ioctl.c:870 [inline]
 __se_sys_ioctl fs/ioctl.c:856 [inline]
 __x64_sys_ioctl+0x1a3/0x230 fs/ioctl.c:856
 do_syscall_x64 arch/x86/entry/common.c:50 [inline]
 do_syscall_64+0x3b/0x90 arch/x86/entry/common.c:80
 entry_SYSCALL_64_after_hwframe+0x72/0xdc
RIP: 0033:0x44ff3d
Code: db 48 89 d8 5b 5d 41 5c 41 5d 41 5e c3 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 c7 c1 a8 ff ff ff f7 d8 64 89 01 48
RSP: 002b:00007fff8410fc18 EFLAGS: 00000246 ORIG_RAX: 0000000000000010
RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 000000000044ff3d
RDX: 0000000020000000 RSI: 0000000000003ba0 RDI: 0000000000000003
RBP: 0000000000000001 R08: 0000000000411b40 R09: 0000000000411b40
R10: 0000000000411b40 R11: 0000000000000246 R12: 0000000000000001
R13: 0000000000000000 R14: 00000000004004e8 R15: 0000000000000000
 </TASK>
irq event stamp: 0
hardirqs last  enabled at (0): [<0000000000000000>] 0x0
hardirqs last disabled at (0): [<ffffffff8122d29a>] copy_process+0x256a/0x7650 kernel/fork.c:2448
softirqs last  enabled at (0): [<ffffffff8122d2e2>] copy_process+0x25b2/0x7650 kernel/fork.c:2452
softirqs last disabled at (0): [<0000000000000000>] 0x0
---[ end trace 0000000000000000 ]---
------------[ cut here ]------------
WARNING: CPU: 1 PID: 572 at drivers/iommu/iommufd/io_pagetable.c:1158 iopt_remove_access+0xb5/0xd0 drivers/iommu/iommufd/io_pagetable.c:1157
Modules linked in:
CPU: 1 PID: 572 Comm: syz-executor321 Tainted: G    B   W          6.4.0-rc6-5ca8bbe2b782+ #1
Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
RIP: 0010:iopt_remove_access+0xb5/0xd0 drivers/iommu/iommufd/io_pagetable.c:1157
Code: 45 85 e4 75 29 e8 4b 2d 0b fe 4c 89 ef e8 33 eb e8 fd 48 89 df e8 2b eb e8 fd 5b 41 5c 41 5d 5d c3 cc cc cc cc e8 2b 2d 0b fe <0f> 0b eb b9 e8 22 2d 0b fe 0f 0b eb ce e8 b9 1d 67 fe eb 90 0f 1f
RSP: 0018:ffff88800f65fbd0 EFLAGS: 00010246
RAX: 0000000000000000 RBX: ffff888022dd40a8 RCX: 0000000000000000
RDX: 0000000000000000 RSI: ffff88800ba3a500 RDI: 0000000000000002
RBP: ffff88800f65fbe8 R08: ffffed10045ba833 R09: ffffed10045ba833
R10: ffff888022dd4193 R11: ffffed10045ba832 R12: ffff888016858c00
R13: ffff888022dd41e8 R14: ffff88800ed50c00 R15: 0000000000000000
FS:  0000000000000000(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
CR2: 00000000004e5420 CR3: 000000000667e000 CR4: 0000000000750ee0
PKRU: 55555554
Call Trace:
 <TASK>
 iommufd_access_destroy_object+0x65/0x170 drivers/iommu/iommufd/device.c:875
 iommufd_object_destroy_user+0x18e/0x220 drivers/iommu/iommufd/main.c:163
 iommufd_access_destroy+0x43/0x70 drivers/iommu/iommufd/device.c:938
 iommufd_test_staccess_release+0x8d/0xd0 drivers/iommu/iommufd/selftest.c:918
 __fput+0x26d/0xa40 fs/file_table.c:321
 ____fput+0x1e/0x30 fs/file_table.c:349
 task_work_run+0x1a4/0x2d0 kernel/task_work.c:179
 exit_task_work include/linux/task_work.h:38 [inline]
 do_exit+0xaf3/0x2f60 kernel/exit.c:874
 do_group_exit+0xe0/0x2b0 kernel/exit.c:1024
 __do_sys_exit_group kernel/exit.c:1035 [inline]
 __se_sys_exit_group kernel/exit.c:1033 [inline]
 __x64_sys_exit_group+0x47/0x50 kernel/exit.c:1033
 do_syscall_x64 arch/x86/entry/common.c:50 [inline]
 do_syscall_64+0x3b/0x90 arch/x86/entry/common.c:80
 entry_SYSCALL_64_after_hwframe+0x72/0xdc
RIP: 0033:0x44de86
Code: Unable to access opcode bytes at 0x44de5c.
RSP: 002b:00007fff8410fbc8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
RAX: ffffffffffffffda RBX: 00000000004e5410 RCX: 000000000044de86
RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffffa8
R10: 0000000000411b40 R11: 0000000000000246 R12: 00000000004e5410
R13: 0000000000000001 R14: 0000000000000000 R15: 0000000000000001
 </TASK>
irq event stamp: 0
hardirqs last  enabled at (0): [<0000000000000000>] 0x0
hardirqs last disabled at (0): [<ffffffff8122d29a>] copy_process+0x256a/0x7650 kernel/fork.c:2448
softirqs last  enabled at (0): [<ffffffff8122d2e2>] copy_process+0x25b2/0x7650 kernel/fork.c:2452
softirqs last disabled at (0): [<0000000000000000>] 0x0
---[ end trace 0000000000000000 ]---
------------[ cut here ]------------
WARNING: CPU: 1 PID: 572 at drivers/iommu/iommufd/io_pagetable.c:663 iopt_destroy_table+0x15f/0x1b0 drivers/iommu/iommufd/io_pagetable.c:663
Modules linked in:
CPU: 1 PID: 572 Comm: syz-executor321 Tainted: G    B   W          6.4.0-rc6-5ca8bbe2b782+ #1
Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
RIP: 0010:iopt_destroy_table+0x15f/0x1b0 drivers/iommu/iommufd/io_pagetable.c:663
Code: 5b 41 5c 41 5d 41 5e 5d c3 cc cc cc cc e8 c9 53 0b fe 0f 0b e9 51 ff ff ff e8 bd 53 0b fe 0f 0b e9 76 ff ff ff e8 b1 53 0b fe <0f> 0b eb 9e e8 a8 53 0b fe 0f 0b e8 a1 53 0b fe 5b 41 5c 41 5d 41
RSP: 0018:ffff88800f65fb78 EFLAGS: 00010246
RAX: 0000000000000000 RBX: 0000000000000000 RCX: 0000000000000000
RDX: 0000000000000000 RSI: ffff88800ba3a500 RDI: 0000000000000002
RBP: ffff88800f65fb98 R08: ffffed10045ba83e R09: ffffed10045ba83e
R10: ffff888022dd41ef R11: ffffed10045ba83d R12: ffff888022dd4290
R13: ffff888022dd40a8 R14: ffffffffffffffff R15: ffff88800f65fc60
FS:  0000000000000000(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
CR2: 00007f97c058a000 CR3: 0000000014616000 CR4: 0000000000750ee0
PKRU: 55555554
Call Trace:
 <TASK>
 iommufd_ioas_destroy+0x53/0x70 drivers/iommu/iommufd/ioas.c:19
 iommufd_fops_release+0x1f7/0x370 drivers/iommu/iommufd/main.c:231
 __fput+0x26d/0xa40 fs/file_table.c:321
 ____fput+0x1e/0x30 fs/file_table.c:349
 task_work_run+0x1a4/0x2d0 kernel/task_work.c:179
 exit_task_work include/linux/task_work.h:38 [inline]
 do_exit+0xaf3/0x2f60 kernel/exit.c:874
 do_group_exit+0xe0/0x2b0 kernel/exit.c:1024
 __do_sys_exit_group kernel/exit.c:1035 [inline]
 __se_sys_exit_group kernel/exit.c:1033 [inline]
 __x64_sys_exit_group+0x47/0x50 kernel/exit.c:1033
 do_syscall_x64 arch/x86/entry/common.c:50 [inline]
 do_syscall_64+0x3b/0x90 arch/x86/entry/common.c:80
 entry_SYSCALL_64_after_hwframe+0x72/0xdc
RIP: 0033:0x44de86
Code: Unable to access opcode bytes at 0x44de5c.
RSP: 002b:00007fff8410fbc8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
RAX: ffffffffffffffda RBX: 00000000004e5410 RCX: 000000000044de86
RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffffa8
R10: 0000000000411b40 R11: 0000000000000246 R12: 00000000004e5410
R13: 0000000000000001 R14: 0000000000000000 R15: 0000000000000001
 </TASK>
irq event stamp: 0
hardirqs last  enabled at (0): [<0000000000000000>] 0x0
hardirqs last disabled at (0): [<ffffffff8122d29a>] copy_process+0x256a/0x7650 kernel/fork.c:2448
softirqs last  enabled at (0): [<ffffffff8122d2e2>] copy_process+0x25b2/0x7650 kernel/fork.c:2452
softirqs last disabled at (0): [<0000000000000000>] 0x0
---[ end trace 0000000000000000 ]---
------------[ cut here ]------------
WARNING: CPU: 1 PID: 573 at drivers/iommu/iommufd/io_pagetable.c:1158 iopt_remove_access+0xb5/0xd0 drivers/iommu/iommufd/io_pagetable.c:1157
Modules linked in:
CPU: 1 PID: 573 Comm: syz-executor321 Tainted: G    B   W          6.4.0-rc6-5ca8bbe2b782+ #1
Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
RIP: 0010:iopt_remove_access+0xb5/0xd0 drivers/iommu/iommufd/io_pagetable.c:1157
Code: 45 85 e4 75 29 e8 4b 2d 0b fe 4c 89 ef e8 33 eb e8 fd 48 89 df e8 2b eb e8 fd 5b 41 5c 41 5d 5d c3 cc cc cc cc e8 2b 2d 0b fe <0f> 0b eb b9 e8 22 2d 0b fe 0f 0b eb ce e8 b9 1d 67 fe eb 90 0f 1f
RSP: 0018:ffff888019fafbb8 EFLAGS: 00010246
RAX: 0000000000000000 RBX: ffff8880127f80a8 RCX: 0000000000000000
RDX: 0000000000000000 RSI: ffff8880129b8000 RDI: 0000000000000002
RBP: ffff888019fafbd0 R08: ffffed10024ff033 R09: ffffed10024ff033
R10: ffff8880127f8193 R11: ffffed10024ff032 R12: ffff888011778400
R13: ffff8880127f81e8 R14: ffffffff835430e0 R15: ffff888019fafe68
FS:  0000000001a0a3c0(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
CR2: 0000000020000140 CR3: 000000000eb56000 CR4: 0000000000750ee0
PKRU: 55555554
Call Trace:
 <TASK>
 __iommufd_access_detach+0x1c2/0x2b0 drivers/iommu/iommufd/device.c:971
 iommufd_access_change_pt+0x149/0x270 drivers/iommu/iommufd/device.c:1006
 iommufd_access_replace+0xb4/0x120 drivers/iommu/iommufd/device.c:1042
 iommufd_test_access_replace_ioas drivers/iommu/iommufd/selftest.c:1025 [inline]
 iommufd_test+0x103d/0x3f00 drivers/iommu/iommufd/selftest.c:1252
 iommufd_fops_ioctl+0x37d/0x510 drivers/iommu/iommufd/main.c:378
 vfs_ioctl fs/ioctl.c:51 [inline]
 __do_sys_ioctl fs/ioctl.c:870 [inline]
 __se_sys_ioctl fs/ioctl.c:856 [inline]
 __x64_sys_ioctl+0x1a3/0x230 fs/ioctl.c:856
 do_syscall_x64 arch/x86/entry/common.c:50 [inline]
 do_syscall_64+0x3b/0x90 arch/x86/entry/common.c:80
 entry_SYSCALL_64_after_hwframe+0x72/0xdc
RIP: 0033:0x44ff3d
Code: db 48 89 d8 5b 5d 41 5c 41 5d 41 5e c3 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 c7 c1 a8 ff ff ff f7 d8 64 89 01 48
RSP: 002b:00007fff8410fc18 EFLAGS: 00000246 ORIG_RAX: 0000000000000010
RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 000000000044ff3d
RDX: 0000000020000000 RSI: 0000000000003ba0 RDI: 0000000000000003
RBP: 0000000000000001 R08: 0000000000411b40 R09: 0000000000411b40
R10: 0000000000411b40 R11: 0000000000000246 R12: 0000000000000001
R13: 0000000000000000 R14: 00000000004004e8 R15: 0000000000000000
 </TASK>
irq event stamp: 0
hardirqs last  enabled at (0): [<0000000000000000>] 0x0
hardirqs last disabled at (0): [<ffffffff8122d29a>] copy_process+0x256a/0x7650 kernel/fork.c:2448
softirqs last  enabled at (0): [<ffffffff8122d2e2>] copy_process+0x25b2/0x7650 kernel/fork.c:2452
softirqs last disabled at (0): [<0000000000000000>] 0x0
---[ end trace 0000000000000000 ]---
------------[ cut here ]------------
WARNING: CPU: 1 PID: 573 at drivers/iommu/iommufd/io_pagetable.c:1158 iopt_remove_access+0xb5/0xd0 drivers/iommu/iommufd/io_pagetable.c:1157
Modules linked in:
CPU: 1 PID: 573 Comm: syz-executor321 Tainted: G    B   W          6.4.0-rc6-5ca8bbe2b782+ #1
Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
RIP: 0010:iopt_remove_access+0xb5/0xd0 drivers/iommu/iommufd/io_pagetable.c:1157
Code: 45 85 e4 75 29 e8 4b 2d 0b fe 4c 89 ef e8 33 eb e8 fd 48 89 df e8 2b eb e8 fd 5b 41 5c 41 5d 5d c3 cc cc cc cc e8 2b 2d 0b fe <0f> 0b eb b9 e8 22 2d 0b fe 0f 0b eb ce e8 b9 1d 67 fe eb 90 0f 1f
RSP: 0018:ffff888019fafbd0 EFLAGS: 00010246
RAX: 0000000000000000 RBX: ffff8880127f80a8 RCX: 0000000000000000
RDX: 0000000000000000 RSI: ffff8880129b8000 RDI: 0000000000000002
RBP: ffff888019fafbe8 R08: ffffed10024ff033 R09: ffffed10024ff033
R10: ffff8880127f8193 R11: ffffed10024ff032 R12: ffff888019d93c00
R13: ffff8880127f81e8 R14: ffff888013c08500 R15: 0000000000000000
FS:  0000000000000000(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
CR2: 00000000004e5420 CR3: 000000000667e000 CR4: 0000000000750ee0
PKRU: 55555554
Call Trace:
 <TASK>
 iommufd_access_destroy_object+0x65/0x170 drivers/iommu/iommufd/device.c:875
 iommufd_object_destroy_user+0x18e/0x220 drivers/iommu/iommufd/main.c:163
 iommufd_access_destroy+0x43/0x70 drivers/iommu/iommufd/device.c:938
 iommufd_test_staccess_release+0x8d/0xd0 drivers/iommu/iommufd/selftest.c:918
 __fput+0x26d/0xa40 fs/file_table.c:321
 ____fput+0x1e/0x30 fs/file_table.c:349
 task_work_run+0x1a4/0x2d0 kernel/task_work.c:179
 exit_task_work include/linux/task_work.h:38 [inline]
 do_exit+0xaf3/0x2f60 kernel/exit.c:874
 do_group_exit+0xe0/0x2b0 kernel/exit.c:1024
 __do_sys_exit_group kernel/exit.c:1035 [inline]
 __se_sys_exit_group kernel/exit.c:1033 [inline]
 __x64_sys_exit_group+0x47/0x50 kernel/exit.c:1033
 do_syscall_x64 arch/x86/entry/common.c:50 [inline]
 do_syscall_64+0x3b/0x90 arch/x86/entry/common.c:80
 entry_SYSCALL_64_after_hwframe+0x72/0xdc
RIP: 0033:0x44de86
Code: Unable to access opcode bytes at 0x44de5c.
RSP: 002b:00007fff8410fbc8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
RAX: ffffffffffffffda RBX: 00000000004e5410 RCX: 000000000044de86
RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffffa8
R10: 0000000000411b40 R11: 0000000000000246 R12: 00000000004e5410
R13: 0000000000000001 R14: 0000000000000000 R15: 0000000000000001
 </TASK>
irq event stamp: 0
hardirqs last  enabled at (0): [<0000000000000000>] 0x0
hardirqs last disabled at (0): [<ffffffff8122d29a>] copy_process+0x256a/0x7650 kernel/fork.c:2448
softirqs last  enabled at (0): [<ffffffff8122d2e2>] copy_process+0x25b2/0x7650 kernel/fork.c:2452
softirqs last disabled at (0): [<0000000000000000>] 0x0
---[ end trace 0000000000000000 ]---
------------[ cut here ]------------
WARNING: CPU: 1 PID: 573 at drivers/iommu/iommufd/io_pagetable.c:663 iopt_destroy_table+0x15f/0x1b0 drivers/iommu/iommufd/io_pagetable.c:663
Modules linked in:
CPU: 1 PID: 573 Comm: syz-executor321 Tainted: G    B   W          6.4.0-rc6-5ca8bbe2b782+ #1
Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
RIP: 0010:iopt_destroy_table+0x15f/0x1b0 drivers/iommu/iommufd/io_pagetable.c:663
Code: 5b 41 5c 41 5d 41 5e 5d c3 cc cc cc cc e8 c9 53 0b fe 0f 0b e9 51 ff ff ff e8 bd 53 0b fe 0f 0b e9 76 ff ff ff e8 b1 53 0b fe <0f> 0b eb 9e e8 a8 53 0b fe 0f 0b e8 a1 53 0b fe 5b 41 5c 41 5d 41
RSP: 0018:ffff888019fafb78 EFLAGS: 00010246
RAX: 0000000000000000 RBX: 0000000000000000 RCX: 0000000000000000
RDX: 0000000000000000 RSI: ffff8880129b8000 RDI: 0000000000000002
RBP: ffff888019fafb98 R08: ffffed10024ff03e R09: ffffed10024ff03e
R10: ffff8880127f81ef R11: ffffed10024ff03d R12: ffff8880127f8290
R13: ffff8880127f80a8 R14: ffffffffffffffff R15: ffff888019fafc60
FS:  0000000000000000(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
CR2: 00000000004e5420 CR3: 000000001503a000 CR4: 0000000000750ee0
PKRU: 55555554
Call Trace:
 <TASK>
 iommufd_ioas_destroy+0x53/0x70 drivers/iommu/iommufd/ioas.c:19
 iommufd_fops_release+0x1f7/0x370 drivers/iommu/iommufd/main.c:231
 __fput+0x26d/0xa40 fs/file_table.c:321
 ____fput+0x1e/0x30 fs/file_table.c:349
 task_work_run+0x1a4/0x2d0 kernel/task_work.c:179
 exit_task_work include/linux/task_work.h:38 [inline]
 do_exit+0xaf3/0x2f60 kernel/exit.c:874
 do_group_exit+0xe0/0x2b0 kernel/exit.c:1024
 __do_sys_exit_group kernel/exit.c:1035 [inline]
 __se_sys_exit_group kernel/exit.c:1033 [inline]
 __x64_sys_exit_group+0x47/0x50 kernel/exit.c:1033
 do_syscall_x64 arch/x86/entry/common.c:50 [inline]
 do_syscall_64+0x3b/0x90 arch/x86/entry/common.c:80
 entry_SYSCALL_64_after_hwframe+0x72/0xdc
RIP: 0033:0x44de86
Code: Unable to access opcode bytes at 0x44de5c.
RSP: 002b:00007fff8410fbc8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
RAX: ffffffffffffffda RBX: 00000000004e5410 RCX: 000000000044de86
RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffffa8
R10: 0000000000411b40 R11: 0000000000000246 R12: 00000000004e5410
R13: 0000000000000001 R14: 0000000000000000 R15: 0000000000000001
 </TASK>
irq event stamp: 0
hardirqs last  enabled at (0): [<0000000000000000>] 0x0
hardirqs last disabled at (0): [<ffffffff8122d29a>] copy_process+0x256a/0x7650 kernel/fork.c:2448
softirqs last  enabled at (0): [<ffffffff8122d2e2>] copy_process+0x25b2/0x7650 kernel/fork.c:2452
softirqs last disabled at (0): [<0000000000000000>] 0x0
---[ end trace 0000000000000000 ]---
------------[ cut here ]------------
WARNING: CPU: 1 PID: 574 at drivers/iommu/iommufd/io_pagetable.c:1158 iopt_remove_access+0xb5/0xd0 drivers/iommu/iommufd/io_pagetable.c:1157
Modules linked in:
CPU: 1 PID: 574 Comm: syz-executor321 Tainted: G    B   W          6.4.0-rc6-5ca8bbe2b782+ #1
Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
RIP: 0010:iopt_remove_access+0xb5/0xd0 drivers/iommu/iommufd/io_pagetable.c:1157
Code: 45 85 e4 75 29 e8 4b 2d 0b fe 4c 89 ef e8 33 eb e8 fd 48 89 df e8 2b eb e8 fd 5b 41 5c 41 5d 5d c3 cc cc cc cc e8 2b 2d 0b fe <0f> 0b eb b9 e8 22 2d 0b fe 0f 0b eb ce e8 b9 1d 67 fe eb 90 0f 1f
RSP: 0018:ffff888015bd7bb8 EFLAGS: 00010246
RAX: 0000000000000000 RBX: ffff888022d150a8 RCX: 0000000000000000
RDX: 0000000000000000 RSI: ffff88800f1e4a00 RDI: 0000000000000002
RBP: ffff888015bd7bd0 R08: ffffed10045a2a33 R09: ffffed10045a2a33
R10: ffff888022d15193 R11: ffffed10045a2a32 R12: ffff888019d63000
R13: ffff888022d151e8 R14: ffffffff835430e0 R15: ffff888015bd7e68
FS:  0000000001a0a3c0(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
CR2: 0000000020000140 CR3: 0000000012b00000 CR4: 0000000000750ee0
PKRU: 55555554
Call Trace:
 <TASK>
 __iommufd_access_detach+0x1c2/0x2b0 drivers/iommu/iommufd/device.c:971
 iommufd_access_change_pt+0x149/0x270 drivers/iommu/iommufd/device.c:1006
 iommufd_access_replace+0xb4/0x120 drivers/iommu/iommufd/device.c:1042
 iommufd_test_access_replace_ioas drivers/iommu/iommufd/selftest.c:1025 [inline]
 iommufd_test+0x103d/0x3f00 drivers/iommu/iommufd/selftest.c:1252
 iommufd_fops_ioctl+0x37d/0x510 drivers/iommu/iommufd/main.c:378
 vfs_ioctl fs/ioctl.c:51 [inline]
 __do_sys_ioctl fs/ioctl.c:870 [inline]
 __se_sys_ioctl fs/ioctl.c:856 [inline]
 __x64_sys_ioctl+0x1a3/0x230 fs/ioctl.c:856
 do_syscall_x64 arch/x86/entry/common.c:50 [inline]
 do_syscall_64+0x3b/0x90 arch/x86/entry/common.c:80
 entry_SYSCALL_64_after_hwframe+0x72/0xdc
RIP: 0033:0x44ff3d
Code: db 48 89 d8 5b 5d 41 5c 41 5d 41 5e c3 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 c7 c1 a8 ff ff ff f7 d8 64 89 01 48
RSP: 002b:00007fff8410fc18 EFLAGS: 00000246 ORIG_RAX: 0000000000000010
RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 000000000044ff3d
RDX: 0000000020000000 RSI: 0000000000003ba0 RDI: 0000000000000003
RBP: 0000000000000001 R08: 0000000000411b40 R09: 0000000000411b40
R10: 0000000000411b40 R11: 0000000000000246 R12: 0000000000000001
R13: 0000000000000000 R14: 00000000004004e8 R15: 0000000000000000
 </TASK>
irq event stamp: 0
hardirqs last  enabled at (0): [<0000000000000000>] 0x0
hardirqs last disabled at (0): [<ffffffff8122d29a>] copy_process+0x256a/0x7650 kernel/fork.c:2448
softirqs last  enabled at (0): [<ffffffff8122d2e2>] copy_process+0x25b2/0x7650 kernel/fork.c:2452
softirqs last disabled at (0): [<0000000000000000>] 0x0
---[ end trace 0000000000000000 ]---
------------[ cut here ]------------
WARNING: CPU: 1 PID: 574 at drivers/iommu/iommufd/io_pagetable.c:1158 iopt_remove_access+0xb5/0xd0 drivers/iommu/iommufd/io_pagetable.c:1157
Modules linked in:
CPU: 1 PID: 574 Comm: syz-executor321 Tainted: G    B   W          6.4.0-rc6-5ca8bbe2b782+ #1
Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
RIP: 0010:iopt_remove_access+0xb5/0xd0 drivers/iommu/iommufd/io_pagetable.c:1157
Code: 45 85 e4 75 29 e8 4b 2d 0b fe 4c 89 ef e8 33 eb e8 fd 48 89 df e8 2b eb e8 fd 5b 41 5c 41 5d 5d c3 cc cc cc cc e8 2b 2d 0b fe <0f> 0b eb b9 e8 22 2d 0b fe 0f 0b eb ce e8 b9 1d 67 fe eb 90 0f 1f
RSP: 0018:ffff888015bd7bd0 EFLAGS: 00010246
RAX: 0000000000000000 RBX: ffff888022d150a8 RCX: 0000000000000000
RDX: 0000000000000000 RSI: ffff88800f1e4a00 RDI: 0000000000000002
RBP: ffff888015bd7be8 R08: ffffed10045a2a33 R09: ffffed10045a2a33
R10: ffff888022d15193 R11: ffffed10045a2a32 R12: ffff888011779800
R13: ffff888022d151e8 R14: ffff888014d5ff00 R15: 0000000000000000
FS:  0000000000000000(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
CR2: 00000000004e5420 CR3: 000000000667e000 CR4: 0000000000750ee0
PKRU: 55555554
Call Trace:
 <TASK>
 iommufd_access_destroy_object+0x65/0x170 drivers/iommu/iommufd/device.c:875
 iommufd_object_destroy_user+0x18e/0x220 drivers/iommu/iommufd/main.c:163
 iommufd_access_destroy+0x43/0x70 drivers/iommu/iommufd/device.c:938
 iommufd_test_staccess_release+0x8d/0xd0 drivers/iommu/iommufd/selftest.c:918
 __fput+0x26d/0xa40 fs/file_table.c:321
 ____fput+0x1e/0x30 fs/file_table.c:349
 task_work_run+0x1a4/0x2d0 kernel/task_work.c:179
 exit_task_work include/linux/task_work.h:38 [inline]
 do_exit+0xaf3/0x2f60 kernel/exit.c:874
 do_group_exit+0xe0/0x2b0 kernel/exit.c:1024
 __do_sys_exit_group kernel/exit.c:1035 [inline]
 __se_sys_exit_group kernel/exit.c:1033 [inline]
 __x64_sys_exit_group+0x47/0x50 kernel/exit.c:1033
 do_syscall_x64 arch/x86/entry/common.c:50 [inline]
 do_syscall_64+0x3b/0x90 arch/x86/entry/common.c:80
 entry_SYSCALL_64_after_hwframe+0x72/0xdc
RIP: 0033:0x44de86
Code: Unable to access opcode bytes at 0x44de5c.
RSP: 002b:00007fff8410fbc8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
RAX: ffffffffffffffda RBX: 00000000004e5410 RCX: 000000000044de86
RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffffa8
R10: 0000000000411b40 R11: 0000000000000246 R12: 00000000004e5410
R13: 0000000000000001 R14: 0000000000000000 R15: 0000000000000001
 </TASK>
irq event stamp: 0
hardirqs last  enabled at (0): [<0000000000000000>] 0x0
hardirqs last disabled at (0): [<ffffffff8122d29a>] copy_process+0x256a/0x7650 kernel/fork.c:2448
softirqs last  enabled at (0): [<ffffffff8122d2e2>] copy_process+0x25b2/0x7650 kernel/fork.c:2452
softirqs last disabled at (0): [<0000000000000000>] 0x0
---[ end trace 0000000000000000 ]---
------------[ cut here ]------------
WARNING: CPU: 1 PID: 574 at drivers/iommu/iommufd/io_pagetable.c:663 iopt_destroy_table+0x15f/0x1b0 drivers/iommu/iommufd/io_pagetable.c:663
Modules linked in:
CPU: 1 PID: 574 Comm: syz-executor321 Tainted: G    B   W          6.4.0-rc6-5ca8bbe2b782+ #1
Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
RIP: 0010:iopt_destroy_table+0x15f/0x1b0 drivers/iommu/iommufd/io_pagetable.c:663
Code: 5b 41 5c 41 5d 41 5e 5d c3 cc cc cc cc e8 c9 53 0b fe 0f 0b e9 51 ff ff ff e8 bd 53 0b fe 0f 0b e9 76 ff ff ff e8 b1 53 0b fe <0f> 0b eb 9e e8 a8 53 0b fe 0f 0b e8 a1 53 0b fe 5b 41 5c 41 5d 41
RSP: 0018:ffff888015bd7b78 EFLAGS: 00010246
RAX: 0000000000000000 RBX: 0000000000000000 RCX: 0000000000000000
RDX: 0000000000000000 RSI: ffff88800f1e4a00 RDI: 0000000000000002
RBP: ffff888015bd7b98 R08: ffffed10045a2a3e R09: ffffed10045a2a3e
R10: ffff888022d151ef R11: ffffed10045a2a3d R12: ffff888022d15290
R13: ffff888022d150a8 R14: ffffffffffffffff R15: ffff888015bd7c60
FS:  0000000000000000(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
CR2: 00000000004e5420 CR3: 000000000667e000 CR4: 0000000000750ee0
PKRU: 55555554
Call Trace:
 <TASK>
 iommufd_ioas_destroy+0x53/0x70 drivers/iommu/iommufd/ioas.c:19
 iommufd_fops_release+0x1f7/0x370 drivers/iommu/iommufd/main.c:231
 __fput+0x26d/0xa40 fs/file_table.c:321
 ____fput+0x1e/0x30 fs/file_table.c:349
 task_work_run+0x1a4/0x2d0 kernel/task_work.c:179
 exit_task_work include/linux/task_work.h:38 [inline]
 do_exit+0xaf3/0x2f60 kernel/exit.c:874
 do_group_exit+0xe0/0x2b0 kernel/exit.c:1024
 __do_sys_exit_group kernel/exit.c:1035 [inline]
 __se_sys_exit_group kernel/exit.c:1033 [inline]
 __x64_sys_exit_group+0x47/0x50 kernel/exit.c:1033
 do_syscall_x64 arch/x86/entry/common.c:50 [inline]
 do_syscall_64+0x3b/0x90 arch/x86/entry/common.c:80
 entry_SYSCALL_64_after_hwframe+0x72/0xdc
RIP: 0033:0x44de86
Code: Unable to access opcode bytes at 0x44de5c.
RSP: 002b:00007fff8410fbc8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
RAX: ffffffffffffffda RBX: 00000000004e5410 RCX: 000000000044de86
RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffffa8
R10: 0000000000411b40 R11: 0000000000000246 R12: 00000000004e5410
R13: 0000000000000001 R14: 0000000000000000 R15: 0000000000000001
 </TASK>
irq event stamp: 0
hardirqs last  enabled at (0): [<0000000000000000>] 0x0
hardirqs last disabled at (0): [<ffffffff8122d29a>] copy_process+0x256a/0x7650 kernel/fork.c:2448
softirqs last  enabled at (0): [<ffffffff8122d2e2>] copy_process+0x25b2/0x7650 kernel/fork.c:2452
softirqs last disabled at (0): [<0000000000000000>] 0x0
---[ end trace 0000000000000000 ]---
------------[ cut here ]------------
WARNING: CPU: 0 PID: 575 at drivers/iommu/iommufd/io_pagetable.c:1158 iopt_remove_access+0xb5/0xd0 drivers/iommu/iommufd/io_pagetable.c:1157
Modules linked in:
CPU: 0 PID: 575 Comm: syz-executor321 Tainted: G    B   W          6.4.0-rc6-5ca8bbe2b782+ #1
Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
RIP: 0010:iopt_remove_access+0xb5/0xd0 drivers/iommu/iommufd/io_pagetable.c:1157
Code: 45 85 e4 75 29 e8 4b 2d 0b fe 4c 89 ef e8 33 eb e8 fd 48 89 df e8 2b eb e8 fd 5b 41 5c 41 5d 5d c3 cc cc cc cc e8 2b 2d 0b fe <0f> 0b eb b9 e8 22 2d 0b fe 0f 0b eb ce e8 b9 1d 67 fe eb 90 0f 1f
RSP: 0018:ffff88801a01fbb8 EFLAGS: 00010246
RAX: 0000000000000000 RBX: ffff888010ad08a8 RCX: 0000000000000000
RDX: 0000000000000000 RSI: ffff888011de4a00 RDI: 0000000000000002
RBP: ffff88801a01fbd0 R08: ffffed100215a133 R09: ffffed100215a133
R10: ffff888010ad0993 R11: ffffed100215a132 R12: ffff888019d99800
R13: ffff888010ad09e8 R14: ffffffff835430e0 R15: ffff88801a01fe68
FS:  0000000001a0a3c0(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
CR2: 0000000020000140 CR3: 000000001464e000 CR4: 0000000000750ef0
PKRU: 55555554
Call Trace:
 <TASK>
 __iommufd_access_detach+0x1c2/0x2b0 drivers/iommu/iommufd/device.c:971
 iommufd_access_change_pt+0x149/0x270 drivers/iommu/iommufd/device.c:1006
 iommufd_access_replace+0xb4/0x120 drivers/iommu/iommufd/device.c:1042
 iommufd_test_access_replace_ioas drivers/iommu/iommufd/selftest.c:1025 [inline]
 iommufd_test+0x103d/0x3f00 drivers/iommu/iommufd/selftest.c:1252
 iommufd_fops_ioctl+0x37d/0x510 drivers/iommu/iommufd/main.c:378
 vfs_ioctl fs/ioctl.c:51 [inline]
 __do_sys_ioctl fs/ioctl.c:870 [inline]
 __se_sys_ioctl fs/ioctl.c:856 [inline]
 __x64_sys_ioctl+0x1a3/0x230 fs/ioctl.c:856
 do_syscall_x64 arch/x86/entry/common.c:50 [inline]
 do_syscall_64+0x3b/0x90 arch/x86/entry/common.c:80
 entry_SYSCALL_64_after_hwframe+0x72/0xdc
RIP: 0033:0x44ff3d
Code: db 48 89 d8 5b 5d 41 5c 41 5d 41 5e c3 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 c7 c1 a8 ff ff ff f7 d8 64 89 01 48
RSP: 002b:00007fff8410fc18 EFLAGS: 00000246 ORIG_RAX: 0000000000000010
RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 000000000044ff3d
RDX: 0000000020000000 RSI: 0000000000003ba0 RDI: 0000000000000003
RBP: 0000000000000001 R08: 0000000000411b40 R09: 0000000000411b40
R10: 0000000000411b40 R11: 0000000000000246 R12: 0000000000000001
R13: 0000000000000000 R14: 00000000004004e8 R15: 0000000000000000
 </TASK>
irq event stamp: 0
hardirqs last  enabled at (0): [<0000000000000000>] 0x0
hardirqs last disabled at (0): [<ffffffff8122d29a>] copy_process+0x256a/0x7650 kernel/fork.c:2448
softirqs last  enabled at (0): [<ffffffff8122d2e2>] copy_process+0x25b2/0x7650 kernel/fork.c:2452
softirqs last disabled at (0): [<0000000000000000>] 0x0
---[ end trace 0000000000000000 ]---
------------[ cut here ]------------
WARNING: CPU: 0 PID: 575 at drivers/iommu/iommufd/io_pagetable.c:1158 iopt_remove_access+0xb5/0xd0 drivers/iommu/iommufd/io_pagetable.c:1157
Modules linked in:
CPU: 0 PID: 575 Comm: syz-executor321 Tainted: G    B   W          6.4.0-rc6-5ca8bbe2b782+ #1
Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
RIP: 0010:iopt_remove_access+0xb5/0xd0 drivers/iommu/iommufd/io_pagetable.c:1157
Code: 45 85 e4 75 29 e8 4b 2d 0b fe 4c 89 ef e8 33 eb e8 fd 48 89 df e8 2b eb e8 fd 5b 41 5c 41 5d 5d c3 cc cc cc cc e8 2b 2d 0b fe <0f> 0b eb b9 e8 22 2d 0b fe 0f 0b eb ce e8 b9 1d 67 fe eb 90 0f 1f
RSP: 0018:ffff88801a01fbd0 EFLAGS: 00010246
RAX: 0000000000000000 RBX: ffff888010ad08a8 RCX: 0000000000000000
RDX: 0000000000000000 RSI: ffff888011de4a00 RDI: 0000000000000002
RBP: ffff88801a01fbe8 R08: ffffed100215a133 R09: ffffed100215a133
R10: ffff888010ad0993 R11: ffffed100215a132 R12: ffff888019e7c800
R13: ffff888010ad09e8 R14: ffff88800fe93100 R15: 0000000000000000
FS:  0000000000000000(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
CR2: 00000000004e5420 CR3: 00000000158b0000 CR4: 0000000000750ef0
PKRU: 55555554
Call Trace:
 <TASK>
 iommufd_access_destroy_object+0x65/0x170 drivers/iommu/iommufd/device.c:875
 iommufd_object_destroy_user+0x18e/0x220 drivers/iommu/iommufd/main.c:163
 iommufd_access_destroy+0x43/0x70 drivers/iommu/iommufd/device.c:938
 iommufd_test_staccess_release+0x8d/0xd0 drivers/iommu/iommufd/selftest.c:918
 __fput+0x26d/0xa40 fs/file_table.c:321
 ____fput+0x1e/0x30 fs/file_table.c:349
 task_work_run+0x1a4/0x2d0 kernel/task_work.c:179
 exit_task_work include/linux/task_work.h:38 [inline]
 do_exit+0xaf3/0x2f60 kernel/exit.c:874
 do_group_exit+0xe0/0x2b0 kernel/exit.c:1024
 __do_sys_exit_group kernel/exit.c:1035 [inline]
 __se_sys_exit_group kernel/exit.c:1033 [inline]
 __x64_sys_exit_group+0x47/0x50 kernel/exit.c:1033
 do_syscall_x64 arch/x86/entry/common.c:50 [inline]
 do_syscall_64+0x3b/0x90 arch/x86/entry/common.c:80
 entry_SYSCALL_64_after_hwframe+0x72/0xdc
RIP: 0033:0x44de86
Code: Unable to access opcode bytes at 0x44de5c.
RSP: 002b:00007fff8410fbc8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
RAX: ffffffffffffffda RBX: 00000000004e5410 RCX: 000000000044de86
RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffffa8
R10: 0000000000411b40 R11: 0000000000000246 R12: 00000000004e5410
R13: 0000000000000001 R14: 0000000000000000 R15: 0000000000000001
 </TASK>
irq event stamp: 0
hardirqs last  enabled at (0): [<0000000000000000>] 0x0
hardirqs last disabled at (0): [<ffffffff8122d29a>] copy_process+0x256a/0x7650 kernel/fork.c:2448
softirqs last  enabled at (0): [<ffffffff8122d2e2>] copy_process+0x25b2/0x7650 kernel/fork.c:2452
softirqs last disabled at (0): [<0000000000000000>] 0x0
---[ end trace 0000000000000000 ]---
------------[ cut here ]------------
WARNING: CPU: 0 PID: 575 at drivers/iommu/iommufd/io_pagetable.c:663 iopt_destroy_table+0x15f/0x1b0 drivers/iommu/iommufd/io_pagetable.c:663
Modules linked in:
CPU: 0 PID: 575 Comm: syz-executor321 Tainted: G    B   W          6.4.0-rc6-5ca8bbe2b782+ #1
Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
RIP: 0010:iopt_destroy_table+0x15f/0x1b0 drivers/iommu/iommufd/io_pagetable.c:663
Code: 5b 41 5c 41 5d 41 5e 5d c3 cc cc cc cc e8 c9 53 0b fe 0f 0b e9 51 ff ff ff e8 bd 53 0b fe 0f 0b e9 76 ff ff ff e8 b1 53 0b fe <0f> 0b eb 9e e8 a8 53 0b fe 0f 0b e8 a1 53 0b fe 5b 41 5c 41 5d 41
RSP: 0018:ffff88801a01fb78 EFLAGS: 00010246
RAX: 0000000000000000 RBX: 0000000000000000 RCX: 0000000000000000
RDX: 0000000000000000 RSI: ffff888011de4a00 RDI: 0000000000000002
RBP: ffff88801a01fb98 R08: ffffed100215a13e R09: ffffed100215a13e
R10: ffff888010ad09ef R11: ffffed100215a13d R12: ffff888010ad0a90
R13: ffff888010ad08a8 R14: ffffffffffffffff R15: ffff88801a01fc60
FS:  0000000000000000(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
CR2: 00000000004e5420 CR3: 00000000158b0000 CR4: 0000000000750ef0
PKRU: 55555554
Call Trace:
 <TASK>
 iommufd_ioas_destroy+0x53/0x70 drivers/iommu/iommufd/ioas.c:19
 iommufd_fops_release+0x1f7/0x370 drivers/iommu/iommufd/main.c:231
 __fput+0x26d/0xa40 fs/file_table.c:321
 ____fput+0x1e/0x30 fs/file_table.c:349
 task_work_run+0x1a4/0x2d0 kernel/task_work.c:179
 exit_task_work include/linux/task_work.h:38 [inline]
 do_exit+0xaf3/0x2f60 kernel/exit.c:874
 do_group_exit+0xe0/0x2b0 kernel/exit.c:1024
 __do_sys_exit_group kernel/exit.c:1035 [inline]
 __se_sys_exit_group kernel/exit.c:1033 [inline]
 __x64_sys_exit_group+0x47/0x50 kernel/exit.c:1033
 do_syscall_x64 arch/x86/entry/common.c:50 [inline]
 do_syscall_64+0x3b/0x90 arch/x86/entry/common.c:80
 entry_SYSCALL_64_after_hwframe+0x72/0xdc
RIP: 0033:0x44de86
Code: Unable to access opcode bytes at 0x44de5c.
RSP: 002b:00007fff8410fbc8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
RAX: ffffffffffffffda RBX: 00000000004e5410 RCX: 000000000044de86
RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffffa8
R10: 0000000000411b40 R11: 0000000000000246 R12: 00000000004e5410
R13: 0000000000000001 R14: 0000000000000000 R15: 0000000000000001
 </TASK>
irq event stamp: 0
hardirqs last  enabled at (0): [<0000000000000000>] 0x0
hardirqs last disabled at (0): [<ffffffff8122d29a>] copy_process+0x256a/0x7650 kernel/fork.c:2448
softirqs last  enabled at (0): [<ffffffff8122d2e2>] copy_process+0x25b2/0x7650 kernel/fork.c:2452
softirqs last disabled at (0): [<0000000000000000>] 0x0
---[ end trace 0000000000000000 ]---
------------[ cut here ]------------
WARNING: CPU: 0 PID: 576 at drivers/iommu/iommufd/io_pagetable.c:1158 iopt_remove_access+0xb5/0xd0 drivers/iommu/iommufd/io_pagetable.c:1157
Modules linked in:
CPU: 0 PID: 576 Comm: syz-executor321 Tainted: G    B   W          6.4.0-rc6-5ca8bbe2b782+ #1
Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
RIP: 0010:iopt_remove_access+0xb5/0xd0 drivers/iommu/iommufd/io_pagetable.c:1157
Code: 45 85 e4 75 29 e8 4b 2d 0b fe 4c 89 ef e8 33 eb e8 fd 48 89 df e8 2b eb e8 fd 5b 41 5c 41 5d 5d c3 cc cc cc cc e8 2b 2d 0b fe <0f> 0b eb b9 e8 22 2d 0b fe 0f 0b eb ce e8 b9 1d 67 fe eb 90 0f 1f
RSP: 0018:ffff8880168afbb8 EFLAGS: 00010246
RAX: 0000000000000000 RBX: ffff888014cea8a8 RCX: 0000000000000000
RDX: 0000000000000000 RSI: ffff88801195ca00 RDI: 0000000000000002
RBP: ffff8880168afbd0 R08: ffffed100299d533 R09: ffffed100299d533
R10: ffff888014cea993 R11: ffffed100299d532 R12: ffff888019da7000
R13: ffff888014cea9e8 R14: ffffffff835430e0 R15: ffff8880168afe68
FS:  0000000001a0a3c0(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
CR2: 0000000020000140 CR3: 0000000014e6e000 CR4: 0000000000750ef0
PKRU: 55555554
Call Trace:
 <TASK>
 __iommufd_access_detach+0x1c2/0x2b0 drivers/iommu/iommufd/device.c:971
 iommufd_access_change_pt+0x149/0x270 drivers/iommu/iommufd/device.c:1006
 iommufd_access_replace+0xb4/0x120 drivers/iommu/iommufd/device.c:1042
 iommufd_test_access_replace_ioas drivers/iommu/iommufd/selftest.c:1025 [inline]
 iommufd_test+0x103d/0x3f00 drivers/iommu/iommufd/selftest.c:1252
 iommufd_fops_ioctl+0x37d/0x510 drivers/iommu/iommufd/main.c:378
 vfs_ioctl fs/ioctl.c:51 [inline]
 __do_sys_ioctl fs/ioctl.c:870 [inline]
 __se_sys_ioctl fs/ioctl.c:856 [inline]
 __x64_sys_ioctl+0x1a3/0x230 fs/ioctl.c:856
 do_syscall_x64 arch/x86/entry/common.c:50 [inline]
 do_syscall_64+0x3b/0x90 arch/x86/entry/common.c:80
 entry_SYSCALL_64_after_hwframe+0x72/0xdc
RIP: 0033:0x44ff3d
Code: db 48 89 d8 5b 5d 41 5c 41 5d 41 5e c3 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 c7 c1 a8 ff ff ff f7 d8 64 89 01 48
RSP: 002b:00007fff8410fc18 EFLAGS: 00000246 ORIG_RAX: 0000000000000010
RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 000000000044ff3d
RDX: 0000000020000000 RSI: 0000000000003ba0 RDI: 0000000000000003
RBP: 0000000000000001 R08: 0000000000411b40 R09: 0000000000411b40
R10: 0000000000411b40 R11: 0000000000000246 R12: 0000000000000001
R13: 0000000000000000 R14: 00000000004004e8 R15: 0000000000000000
 </TASK>
irq event stamp: 0
hardirqs last  enabled at (0): [<0000000000000000>] 0x0
hardirqs last disabled at (0): [<ffffffff8122d29a>] copy_process+0x256a/0x7650 kernel/fork.c:2448
softirqs last  enabled at (0): [<ffffffff8122d2e2>] copy_process+0x25b2/0x7650 kernel/fork.c:2452
softirqs last disabled at (0): [<0000000000000000>] 0x0
---[ end trace 0000000000000000 ]---
------------[ cut here ]------------
WARNING: CPU: 0 PID: 576 at drivers/iommu/iommufd/io_pagetable.c:1158 iopt_remove_access+0xb5/0xd0 drivers/iommu/iommufd/io_pagetable.c:1157
Modules linked in:
CPU: 0 PID: 576 Comm: syz-executor321 Tainted: G    B   W          6.4.0-rc6-5ca8bbe2b782+ #1
Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
RIP: 0010:iopt_remove_access+0xb5/0xd0 drivers/iommu/iommufd/io_pagetable.c:1157
Code: 45 85 e4 75 29 e8 4b 2d 0b fe 4c 89 ef e8 33 eb e8 fd 48 89 df e8 2b eb e8 fd 5b 41 5c 41 5d 5d c3 cc cc cc cc e8 2b 2d 0b fe <0f> 0b eb b9 e8 22 2d 0b fe 0f 0b eb ce e8 b9 1d 67 fe eb 90 0f 1f
RSP: 0018:ffff8880168afbd0 EFLAGS: 00010246
RAX: 0000000000000000 RBX: ffff888014cea8a8 RCX: 0000000000000000
RDX: 0000000000000000 RSI: ffff88801195ca00 RDI: 0000000000000002
RBP: ffff8880168afbe8 R08: ffffed100299d533 R09: ffffed100299d533
R10: ffff888014cea993 R11: ffffed100299d532 R12: ffff888019d98400
R13: ffff888014cea9e8 R14: ffff88800fe1cd00 R15: 0000000000000000
FS:  0000000000000000(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
CR2: 00000000004e5420 CR3: 0000000014616000 CR4: 0000000000750ef0
PKRU: 55555554
Call Trace:
 <TASK>
 iommufd_access_destroy_object+0x65/0x170 drivers/iommu/iommufd/device.c:875
 iommufd_object_destroy_user+0x18e/0x220 drivers/iommu/iommufd/main.c:163
 iommufd_access_destroy+0x43/0x70 drivers/iommu/iommufd/device.c:938
 iommufd_test_staccess_release+0x8d/0xd0 drivers/iommu/iommufd/selftest.c:918
 __fput+0x26d/0xa40 fs/file_table.c:321
 ____fput+0x1e/0x30 fs/file_table.c:349
 task_work_run+0x1a4/0x2d0 kernel/task_work.c:179
 exit_task_work include/linux/task_work.h:38 [inline]
 do_exit+0xaf3/0x2f60 kernel/exit.c:874
 do_group_exit+0xe0/0x2b0 kernel/exit.c:1024
 __do_sys_exit_group kernel/exit.c:1035 [inline]
 __se_sys_exit_group kernel/exit.c:1033 [inline]
 __x64_sys_exit_group+0x47/0x50 kernel/exit.c:1033
 do_syscall_x64 arch/x86/entry/common.c:50 [inline]
 do_syscall_64+0x3b/0x90 arch/x86/entry/common.c:80
 entry_SYSCALL_64_after_hwframe+0x72/0xdc
RIP: 0033:0x44de86
Code: Unable to access opcode bytes at 0x44de5c.
RSP: 002b:00007fff8410fbc8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
RAX: ffffffffffffffda RBX: 00000000004e5410 RCX: 000000000044de86
RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffffa8
R10: 0000000000411b40 R11: 0000000000000246 R12: 00000000004e5410
R13: 0000000000000001 R14: 0000000000000000 R15: 0000000000000001
 </TASK>
irq event stamp: 0
hardirqs last  enabled at (0): [<0000000000000000>] 0x0
hardirqs last disabled at (0): [<ffffffff8122d29a>] copy_process+0x256a/0x7650 kernel/fork.c:2448
softirqs last  enabled at (0): [<ffffffff8122d2e2>] copy_process+0x25b2/0x7650 kernel/fork.c:2452
softirqs last disabled at (0): [<0000000000000000>] 0x0
---[ end trace 0000000000000000 ]---
------------[ cut here ]------------
WARNING: CPU: 0 PID: 576 at drivers/iommu/iommufd/io_pagetable.c:663 iopt_destroy_table+0x15f/0x1b0 drivers/iommu/iommufd/io_pagetable.c:663
Modules linked in:
CPU: 0 PID: 576 Comm: syz-executor321 Tainted: G    B   W          6.4.0-rc6-5ca8bbe2b782+ #1
Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
RIP: 0010:iopt_destroy_table+0x15f/0x1b0 drivers/iommu/iommufd/io_pagetable.c:663
Code: 5b 41 5c 41 5d 41 5e 5d c3 cc cc cc cc e8 c9 53 0b fe 0f 0b e9 51 ff ff ff e8 bd 53 0b fe 0f 0b e9 76 ff ff ff e8 b1 53 0b fe <0f> 0b eb 9e e8 a8 53 0b fe 0f 0b e8 a1 53 0b fe 5b 41 5c 41 5d 41
RSP: 0018:ffff8880168afb78 EFLAGS: 00010246
RAX: 0000000000000000 RBX: 0000000000000000 RCX: 0000000000000000
RDX: 0000000000000000 RSI: ffff88801195ca00 RDI: 0000000000000002
RBP: ffff8880168afb98 R08: ffffed100299d53e R09: ffffed100299d53e
R10: ffff888014cea9ef R11: ffffed100299d53d R12: ffff888014ceaa90
R13: ffff888014cea8a8 R14: ffffffffffffffff R15: ffff8880168afc60
FS:  0000000000000000(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
CR2: 00007f97c05ba000 CR3: 0000000014616000 CR4: 0000000000750ef0
PKRU: 55555554
Call Trace:
 <TASK>
 iommufd_ioas_destroy+0x53/0x70 drivers/iommu/iommufd/ioas.c:19
 iommufd_fops_release+0x1f7/0x370 drivers/iommu/iommufd/main.c:231
 __fput+0x26d/0xa40 fs/file_table.c:321
 ____fput+0x1e/0x30 fs/file_table.c:349
 task_work_run+0x1a4/0x2d0 kernel/task_work.c:179
 exit_task_work include/linux/task_work.h:38 [inline]
 do_exit+0xaf3/0x2f60 kernel/exit.c:874
 do_group_exit+0xe0/0x2b0 kernel/exit.c:1024
 __do_sys_exit_group kernel/exit.c:1035 [inline]
 __se_sys_exit_group kernel/exit.c:1033 [inline]
 __x64_sys_exit_group+0x47/0x50 kernel/exit.c:1033
 do_syscall_x64 arch/x86/entry/common.c:50 [inline]
 do_syscall_64+0x3b/0x90 arch/x86/entry/common.c:80
 entry_SYSCALL_64_after_hwframe+0x72/0xdc
RIP: 0033:0x44de86
Code: Unable to access opcode bytes at 0x44de5c.
RSP: 002b:00007fff8410fbc8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
RAX: ffffffffffffffda RBX: 00000000004e5410 RCX: 000000000044de86
RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffffa8
R10: 0000000000411b40 R11: 0000000000000246 R12: 00000000004e5410
R13: 0000000000000001 R14: 0000000000000000 R15: 0000000000000001
 </TASK>
irq event stamp: 0
hardirqs last  enabled at (0): [<0000000000000000>] 0x0
hardirqs last disabled at (0): [<ffffffff8122d29a>] copy_process+0x256a/0x7650 kernel/fork.c:2448
softirqs last  enabled at (0): [<ffffffff8122d2e2>] copy_process+0x25b2/0x7650 kernel/fork.c:2452
softirqs last disabled at (0): [<0000000000000000>] 0x0
---[ end trace 0000000000000000 ]---
------------[ cut here ]------------
WARNING: CPU: 0 PID: 577 at drivers/iommu/iommufd/io_pagetable.c:1158 iopt_remove_access+0xb5/0xd0 drivers/iommu/iommufd/io_pagetable.c:1157
Modules linked in:
CPU: 0 PID: 577 Comm: syz-executor321 Tainted: G    B   W          6.4.0-rc6-5ca8bbe2b782+ #1
Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
RIP: 0010:iopt_remove_access+0xb5/0xd0 drivers/iommu/iommufd/io_pagetable.c:1157
Code: 45 85 e4 75 29 e8 4b 2d 0b fe 4c 89 ef e8 33 eb e8 fd 48 89 df e8 2b eb e8 fd 5b 41 5c 41 5d 5d c3 cc cc cc cc e8 2b 2d 0b fe <0f> 0b eb b9 e8 22 2d 0b fe 0f 0b eb ce e8 b9 1d 67 fe eb 90 0f 1f
RSP: 0018:ffff88800f147bb8 EFLAGS: 00010246
RAX: 0000000000000000 RBX: ffff888019f9c8a8 RCX: 0000000000000000
RDX: 0000000000000000 RSI: ffff88801195a500 RDI: 0000000000000002
RBP: ffff88800f147bd0 R08: ffffed10033f3933 R09: ffffed10033f3933
R10: ffff888019f9c993 R11: ffffed10033f3932 R12: ffff888019d8e400
R13: ffff888019f9c9e8 R14: ffffffff835430e0 R15: ffff88800f147e68
FS:  0000000001a0a3c0(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
CR2: 0000000020000140 CR3: 0000000012b00000 CR4: 0000000000750ef0
PKRU: 55555554
Call Trace:
 <TASK>
 __iommufd_access_detach+0x1c2/0x2b0 drivers/iommu/iommufd/device.c:971
 iommufd_access_change_pt+0x149/0x270 drivers/iommu/iommufd/device.c:1006
 iommufd_access_replace+0xb4/0x120 drivers/iommu/iommufd/device.c:1042
 iommufd_test_access_replace_ioas drivers/iommu/iommufd/selftest.c:1025 [inline]
 iommufd_test+0x103d/0x3f00 drivers/iommu/iommufd/selftest.c:1252
 iommufd_fops_ioctl+0x37d/0x510 drivers/iommu/iommufd/main.c:378
 vfs_ioctl fs/ioctl.c:51 [inline]
 __do_sys_ioctl fs/ioctl.c:870 [inline]
 __se_sys_ioctl fs/ioctl.c:856 [inline]
 __x64_sys_ioctl+0x1a3/0x230 fs/ioctl.c:856
 do_syscall_x64 arch/x86/entry/common.c:50 [inline]
 do_syscall_64+0x3b/0x90 arch/x86/entry/common.c:80
 entry_SYSCALL_64_after_hwframe+0x72/0xdc
RIP: 0033:0x44ff3d
Code: db 48 89 d8 5b 5d 41 5c 41 5d 41 5e c3 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 c7 c1 a8 ff ff ff f7 d8 64 89 01 48
RSP: 002b:00007fff8410fc18 EFLAGS: 00000246 ORIG_RAX: 0000000000000010
RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 000000000044ff3d
RDX: 0000000020000000 RSI: 0000000000003ba0 RDI: 0000000000000003
RBP: 0000000000000001 R08: 0000000000411b40 R09: 0000000000411b40
R10: 0000000000411b40 R11: 0000000000000246 R12: 0000000000000001
R13: 0000000000000000 R14: 00000000004004e8 R15: 0000000000000000
 </TASK>
irq event stamp: 0
hardirqs last  enabled at (0): [<0000000000000000>] 0x0
hardirqs last disabled at (0): [<ffffffff8122d29a>] copy_process+0x256a/0x7650 kernel/fork.c:2448
softirqs last  enabled at (0): [<ffffffff8122d2e2>] copy_process+0x25b2/0x7650 kernel/fork.c:2452
softirqs last disabled at (0): [<0000000000000000>] 0x0
---[ end trace 0000000000000000 ]---
------------[ cut here ]------------
WARNING: CPU: 0 PID: 577 at drivers/iommu/iommufd/io_pagetable.c:1158 iopt_remove_access+0xb5/0xd0 drivers/iommu/iommufd/io_pagetable.c:1157
Modules linked in:
CPU: 0 PID: 577 Comm: syz-executor321 Tainted: G    B   W          6.4.0-rc6-5ca8bbe2b782+ #1
Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
RIP: 0010:iopt_remove_access+0xb5/0xd0 drivers/iommu/iommufd/io_pagetable.c:1157
Code: 45 85 e4 75 29 e8 4b 2d 0b fe 4c 89 ef e8 33 eb e8 fd 48 89 df e8 2b eb e8 fd 5b 41 5c 41 5d 5d c3 cc cc cc cc e8 2b 2d 0b fe <0f> 0b eb b9 e8 22 2d 0b fe 0f 0b eb ce e8 b9 1d 67 fe eb 90 0f 1f
RSP: 0018:ffff88800f147bd0 EFLAGS: 00010246
RAX: 0000000000000000 RBX: ffff888019f9c8a8 RCX: 0000000000000000
RDX: 0000000000000000 RSI: ffff88801195a500 RDI: 0000000000000002
RBP: ffff88800f147be8 R08: ffffed10033f3933 R09: ffffed10033f3933
R10: ffff888019f9c993 R11: ffffed10033f3932 R12: ffff888019da5000
R13: ffff888019f9c9e8 R14: ffff88801a06c100 R15: 0000000000000000
FS:  0000000000000000(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
CR2: 00000000004e5420 CR3: 000000000667e000 CR4: 0000000000750ef0
PKRU: 55555554
Call Trace:
 <TASK>
 iommufd_access_destroy_object+0x65/0x170 drivers/iommu/iommufd/device.c:875
 iommufd_object_destroy_user+0x18e/0x220 drivers/iommu/iommufd/main.c:163
 iommufd_access_destroy+0x43/0x70 drivers/iommu/iommufd/device.c:938
 iommufd_test_staccess_release+0x8d/0xd0 drivers/iommu/iommufd/selftest.c:918
 __fput+0x26d/0xa40 fs/file_table.c:321
 ____fput+0x1e/0x30 fs/file_table.c:349
 task_work_run+0x1a4/0x2d0 kernel/task_work.c:179
 exit_task_work include/linux/task_work.h:38 [inline]
 do_exit+0xaf3/0x2f60 kernel/exit.c:874
 do_group_exit+0xe0/0x2b0 kernel/exit.c:1024
 __do_sys_exit_group kernel/exit.c:1035 [inline]
 __se_sys_exit_group kernel/exit.c:1033 [inline]
 __x64_sys_exit_group+0x47/0x50 kernel/exit.c:1033
 do_syscall_x64 arch/x86/entry/common.c:50 [inline]
 do_syscall_64+0x3b/0x90 arch/x86/entry/common.c:80
 entry_SYSCALL_64_after_hwframe+0x72/0xdc
RIP: 0033:0x44de86
Code: Unable to access opcode bytes at 0x44de5c.
RSP: 002b:00007fff8410fbc8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
RAX: ffffffffffffffda RBX: 00000000004e5410 RCX: 000000000044de86
RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffffa8
R10: 0000000000411b40 R11: 0000000000000246 R12: 00000000004e5410
R13: 0000000000000001 R14: 0000000000000000 R15: 0000000000000001
 </TASK>
irq event stamp: 0
hardirqs last  enabled at (0): [<0000000000000000>] 0x0
hardirqs last disabled at (0): [<ffffffff8122d29a>] copy_process+0x256a/0x7650 kernel/fork.c:2448
softirqs last  enabled at (0): [<ffffffff8122d2e2>] copy_process+0x25b2/0x7650 kernel/fork.c:2452
softirqs last disabled at (0): [<0000000000000000>] 0x0
---[ end trace 0000000000000000 ]---
------------[ cut here ]------------
WARNING: CPU: 0 PID: 577 at drivers/iommu/iommufd/io_pagetable.c:663 iopt_destroy_table+0x15f/0x1b0 drivers/iommu/iommufd/io_pagetable.c:663
Modules linked in:
CPU: 0 PID: 577 Comm: syz-executor321 Tainted: G    B   W          6.4.0-rc6-5ca8bbe2b782+ #1
Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
RIP: 0010:iopt_destroy_table+0x15f/0x1b0 drivers/iommu/iommufd/io_pagetable.c:663
Code: 5b 41 5c 41 5d 41 5e 5d c3 cc cc cc cc e8 c9 53 0b fe 0f 0b e9 51 ff ff ff e8 bd 53 0b fe 0f 0b e9 76 ff ff ff e8 b1 53 0b fe <0f> 0b eb 9e e8 a8 53 0b fe 0f 0b e8 a1 53 0b fe 5b 41 5c 41 5d 41
RSP: 0018:ffff88800f147b78 EFLAGS: 00010246
RAX: 0000000000000000 RBX: 0000000000000000 RCX: 0000000000000000
RDX: 0000000000000000 RSI: ffff88801195a500 RDI: 0000000000000002
RBP: ffff88800f147b98 R08: ffffed10033f393e R09: ffffed10033f393e
R10: ffff888019f9c9ef R11: ffffed10033f393d R12: ffff888019f9ca90
R13: ffff888019f9c8a8 R14: ffffffffffffffff R15: ffff88800f147c60
FS:  0000000000000000(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
CR2: 00000000004e5420 CR3: 000000000667e000 CR4: 0000000000750ef0
PKRU: 55555554
Call Trace:
 <TASK>
 iommufd_ioas_destroy+0x53/0x70 drivers/iommu/iommufd/ioas.c:19
 iommufd_fops_release+0x1f7/0x370 drivers/iommu/iommufd/main.c:231
 __fput+0x26d/0xa40 fs/file_table.c:321
 ____fput+0x1e/0x30 fs/file_table.c:349
 task_work_run+0x1a4/0x2d0 kernel/task_work.c:179
 exit_task_work include/linux/task_work.h:38 [inline]
 do_exit+0xaf3/0x2f60 kernel/exit.c:874
 do_group_exit+0xe0/0x2b0 kernel/exit.c:1024
 __do_sys_exit_group kernel/exit.c:1035 [inline]
 __se_sys_exit_group kernel/exit.c:1033 [inline]
 __x64_sys_exit_group+0x47/0x50 kernel/exit.c:1033
 do_syscall_x64 arch/x86/entry/common.c:50 [inline]
 do_syscall_64+0x3b/0x90 arch/x86/entry/common.c:80
 entry_SYSCALL_64_after_hwframe+0x72/0xdc
RIP: 0033:0x44de86
Code: Unable to access opcode bytes at 0x44de5c.
RSP: 002b:00007fff8410fbc8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
RAX: ffffffffffffffda RBX: 00000000004e5410 RCX: 000000000044de86
RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffffa8
R10: 0000000000411b40 R11: 0000000000000246 R12: 00000000004e5410
R13: 0000000000000001 R14: 0000000000000000 R15: 0000000000000001
 </TASK>
irq event stamp: 0
hardirqs last  enabled at (0): [<0000000000000000>] 0x0
hardirqs last disabled at (0): [<ffffffff8122d29a>] copy_process+0x256a/0x7650 kernel/fork.c:2448
softirqs last  enabled at (0): [<ffffffff8122d2e2>] copy_process+0x25b2/0x7650 kernel/fork.c:2452
softirqs last disabled at (0): [<0000000000000000>] 0x0
---[ end trace 0000000000000000 ]---
------------[ cut here ]------------
WARNING: CPU: 0 PID: 578 at drivers/iommu/iommufd/io_pagetable.c:1158 iopt_remove_access+0xb5/0xd0 drivers/iommu/iommufd/io_pagetable.c:1157
Modules linked in:
CPU: 0 PID: 578 Comm: syz-executor321 Tainted: G    B   W          6.4.0-rc6-5ca8bbe2b782+ #1
Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
RIP: 0010:iopt_remove_access+0xb5/0xd0 drivers/iommu/iommufd/io_pagetable.c:1157
Code: 45 85 e4 75 29 e8 4b 2d 0b fe 4c 89 ef e8 33 eb e8 fd 48 89 df e8 2b eb e8 fd 5b 41 5c 41 5d 5d c3 cc cc cc cc e8 2b 2d 0b fe <0f> 0b eb b9 e8 22 2d 0b fe 0f 0b eb ce e8 b9 1d 67 fe eb 90 0f 1f
RSP: 0018:ffff8880169d7bb8 EFLAGS: 00010246
RAX: 0000000000000000 RBX: ffff8880126338a8 RCX: 0000000000000000
RDX: 0000000000000000 RSI: ffff888012e52500 RDI: 0000000000000002
RBP: ffff8880169d7bd0 R08: ffffed10024c6733 R09: ffffed10024c6733
R10: ffff888012633993 R11: ffffed10024c6732 R12: ffff88800f8c1400
R13: ffff8880126339e8 R14: ffffffff835430e0 R15: ffff8880169d7e68
FS:  0000000001a0a3c0(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
CR2: 0000000020000140 CR3: 000000000eb56000 CR4: 0000000000750ef0
PKRU: 55555554
Call Trace:
 <TASK>
 __iommufd_access_detach+0x1c2/0x2b0 drivers/iommu/iommufd/device.c:971
 iommufd_access_change_pt+0x149/0x270 drivers/iommu/iommufd/device.c:1006
 iommufd_access_replace+0xb4/0x120 drivers/iommu/iommufd/device.c:1042
 iommufd_test_access_replace_ioas drivers/iommu/iommufd/selftest.c:1025 [inline]
 iommufd_test+0x103d/0x3f00 drivers/iommu/iommufd/selftest.c:1252
 iommufd_fops_ioctl+0x37d/0x510 drivers/iommu/iommufd/main.c:378
 vfs_ioctl fs/ioctl.c:51 [inline]
 __do_sys_ioctl fs/ioctl.c:870 [inline]
 __se_sys_ioctl fs/ioctl.c:856 [inline]
 __x64_sys_ioctl+0x1a3/0x230 fs/ioctl.c:856
 do_syscall_x64 arch/x86/entry/common.c:50 [inline]
 do_syscall_64+0x3b/0x90 arch/x86/entry/common.c:80
 entry_SYSCALL_64_after_hwframe+0x72/0xdc
RIP: 0033:0x44ff3d
Code: db 48 89 d8 5b 5d 41 5c 41 5d 41 5e c3 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 c7 c1 a8 ff ff ff f7 d8 64 89 01 48
RSP: 002b:00007fff8410fc18 EFLAGS: 00000246 ORIG_RAX: 0000000000000010
RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 000000000044ff3d
RDX: 0000000020000000 RSI: 0000000000003ba0 RDI: 0000000000000003
RBP: 0000000000000001 R08: 0000000000411b40 R09: 0000000000411b40
R10: 0000000000411b40 R11: 0000000000000246 R12: 0000000000000001
R13: 0000000000000000 R14: 00000000004004e8 R15: 0000000000000000
 </TASK>
irq event stamp: 0
hardirqs last  enabled at (0): [<0000000000000000>] 0x0
hardirqs last disabled at (0): [<ffffffff8122d29a>] copy_process+0x256a/0x7650 kernel/fork.c:2448
softirqs last  enabled at (0): [<ffffffff8122d2e2>] copy_process+0x25b2/0x7650 kernel/fork.c:2452
softirqs last disabled at (0): [<0000000000000000>] 0x0
---[ end trace 0000000000000000 ]---
------------[ cut here ]------------
WARNING: CPU: 0 PID: 578 at drivers/iommu/iommufd/io_pagetable.c:1158 iopt_remove_access+0xb5/0xd0 drivers/iommu/iommufd/io_pagetable.c:1157
Modules linked in:
CPU: 0 PID: 578 Comm: syz-executor321 Tainted: G    B   W          6.4.0-rc6-5ca8bbe2b782+ #1
Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
RIP: 0010:iopt_remove_access+0xb5/0xd0 drivers/iommu/iommufd/io_pagetable.c:1157
Code: 45 85 e4 75 29 e8 4b 2d 0b fe 4c 89 ef e8 33 eb e8 fd 48 89 df e8 2b eb e8 fd 5b 41 5c 41 5d 5d c3 cc cc cc cc e8 2b 2d 0b fe <0f> 0b eb b9 e8 22 2d 0b fe 0f 0b eb ce e8 b9 1d 67 fe eb 90 0f 1f
RSP: 0018:ffff8880169d7bd0 EFLAGS: 00010246
RAX: 0000000000000000 RBX: ffff8880126338a8 RCX: 0000000000000000
RDX: 0000000000000000 RSI: ffff888012e52500 RDI: 0000000000000002
RBP: ffff8880169d7be8 R08: ffffed10024c6733 R09: ffffed10024c6733
R10: ffff888012633993 R11: ffffed10024c6732 R12: ffff888019d8fc00
R13: ffff8880126339e8 R14: ffff888021200700 R15: 0000000000000000
FS:  0000000000000000(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
CR2: 00000000004e5420 CR3: 000000000667e000 CR4: 0000000000750ef0
PKRU: 55555554
Call Trace:
 <TASK>
 iommufd_access_destroy_object+0x65/0x170 drivers/iommu/iommufd/device.c:875
 iommufd_object_destroy_user+0x18e/0x220 drivers/iommu/iommufd/main.c:163
 iommufd_access_destroy+0x43/0x70 drivers/iommu/iommufd/device.c:938
 iommufd_test_staccess_release+0x8d/0xd0 drivers/iommu/iommufd/selftest.c:918
 __fput+0x26d/0xa40 fs/file_table.c:321
 ____fput+0x1e/0x30 fs/file_table.c:349
 task_work_run+0x1a4/0x2d0 kernel/task_work.c:179
 exit_task_work include/linux/task_work.h:38 [inline]
 do_exit+0xaf3/0x2f60 kernel/exit.c:874
 do_group_exit+0xe0/0x2b0 kernel/exit.c:1024
 __do_sys_exit_group kernel/exit.c:1035 [inline]
 __se_sys_exit_group kernel/exit.c:1033 [inline]
 __x64_sys_exit_group+0x47/0x50 kernel/exit.c:1033
 do_syscall_x64 arch/x86/entry/common.c:50 [inline]
 do_syscall_64+0x3b/0x90 arch/x86/entry/common.c:80
 entry_SYSCALL_64_after_hwframe+0x72/0xdc
RIP: 0033:0x44de86
Code: Unable to access opcode bytes at 0x44de5c.
RSP: 002b:00007fff8410fbc8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
RAX: ffffffffffffffda RBX: 00000000004e5410 RCX: 000000000044de86
RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffffa8
R10: 0000000000411b40 R11: 0000000000000246 R12: 00000000004e5410
R13: 0000000000000001 R14: 0000000000000000 R15: 0000000000000001
 </TASK>
irq event stamp: 0
hardirqs last  enabled at (0): [<0000000000000000>] 0x0
hardirqs last disabled at (0): [<ffffffff8122d29a>] copy_process+0x256a/0x7650 kernel/fork.c:2448
softirqs last  enabled at (0): [<ffffffff8122d2e2>] copy_process+0x25b2/0x7650 kernel/fork.c:2452
softirqs last disabled at (0): [<0000000000000000>] 0x0
---[ end trace 0000000000000000 ]---
------------[ cut here ]------------
WARNING: CPU: 0 PID: 578 at drivers/iommu/iommufd/io_pagetable.c:663 iopt_destroy_table+0x15f/0x1b0 drivers/iommu/iommufd/io_pagetable.c:663
Modules linked in:
CPU: 0 PID: 578 Comm: syz-executor321 Tainted: G    B   W          6.4.0-rc6-5ca8bbe2b782+ #1
Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
RIP: 0010:iopt_destroy_table+0x15f/0x1b0 drivers/iommu/iommufd/io_pagetable.c:663
Code: 5b 41 5c 41 5d 41 5e 5d c3 cc cc cc cc e8 c9 53 0b fe 0f 0b e9 51 ff ff ff e8 bd 53 0b fe 0f 0b e9 76 ff ff ff e8 b1 53 0b fe <0f> 0b eb 9e e8 a8 53 0b fe 0f 0b e8 a1 53 0b fe 5b 41 5c 41 5d 41
RSP: 0018:ffff8880169d7b78 EFLAGS: 00010246
RAX: 0000000000000000 RBX: 0000000000000000 RCX: 0000000000000000
RDX: 0000000000000000 RSI: ffff888012e52500 RDI: 0000000000000002
RBP: ffff8880169d7b98 R08: ffffed10024c673e R09: ffffed10024c673e
R10: ffff8880126339ef R11: ffffed10024c673d R12: ffff888012633a90
R13: ffff8880126338a8 R14: ffffffffffffffff R15: ffff8880169d7c60
FS:  0000000000000000(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
CR2: 00000000004e5420 CR3: 000000000667e000 CR4: 0000000000750ef0
PKRU: 55555554
Call Trace:
 <TASK>
 iommufd_ioas_destroy+0x53/0x70 drivers/iommu/iommufd/ioas.c:19
 iommufd_fops_release+0x1f7/0x370 drivers/iommu/iommufd/main.c:231
 __fput+0x26d/0xa40 fs/file_table.c:321
 ____fput+0x1e/0x30 fs/file_table.c:349
 task_work_run+0x1a4/0x2d0 kernel/task_work.c:179
 exit_task_work include/linux/task_work.h:38 [inline]
 do_exit+0xaf3/0x2f60 kernel/exit.c:874
 do_group_exit+0xe0/0x2b0 kernel/exit.c:1024
 __do_sys_exit_group kernel/exit.c:1035 [inline]
 __se_sys_exit_group kernel/exit.c:1033 [inline]
 __x64_sys_exit_group+0x47/0x50 kernel/exit.c:1033
 do_syscall_x64 arch/x86/entry/common.c:50 [inline]
 do_syscall_64+0x3b/0x90 arch/x86/entry/common.c:80
 entry_SYSCALL_64_after_hwframe+0x72/0xdc
RIP: 0033:0x44de86
Code: Unable to access opcode bytes at 0x44de5c.
RSP: 002b:00007fff8410fbc8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
RAX: ffffffffffffffda RBX: 00000000004e5410 RCX: 000000000044de86
RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffffa8
R10: 0000000000411b40 R11: 0000000000000246 R12: 00000000004e5410
R13: 0000000000000001 R14: 0000000000000000 R15: 0000000000000001
 </TASK>
irq event stamp: 0
hardirqs last  enabled at (0): [<0000000000000000>] 0x0
hardirqs last disabled at (0): [<ffffffff8122d29a>] copy_process+0x256a/0x7650 kernel/fork.c:2448
softirqs last  enabled at (0): [<ffffffff8122d2e2>] copy_process+0x25b2/0x7650 kernel/fork.c:2452
softirqs last disabled at (0): [<0000000000000000>] 0x0
---[ end trace 0000000000000000 ]---
------------[ cut here ]------------
WARNING: CPU: 0 PID: 579 at drivers/iommu/iommufd/io_pagetable.c:1158 iopt_remove_access+0xb5/0xd0 drivers/iommu/iommufd/io_pagetable.c:1157
Modules linked in:
CPU: 0 PID: 579 Comm: syz-executor321 Tainted: G    B   W          6.4.0-rc6-5ca8bbe2b782+ #1
Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
RIP: 0010:iopt_remove_access+0xb5/0xd0 drivers/iommu/iommufd/io_pagetable.c:1157
Code: 45 85 e4 75 29 e8 4b 2d 0b fe 4c 89 ef e8 33 eb e8 fd 48 89 df e8 2b eb e8 fd 5b 41 5c 41 5d 5d c3 cc cc cc cc e8 2b 2d 0b fe <0f> 0b eb b9 e8 22 2d 0b fe 0f 0b eb ce e8 b9 1d 67 fe eb 90 0f 1f
RSP: 0018:ffff88800ec5fbb8 EFLAGS: 00010246
RAX: 0000000000000000 RBX: ffff88800f5810a8 RCX: 0000000000000000
RDX: 0000000000000000 RSI: ffff888012e54a00 RDI: 0000000000000002
RBP: ffff88800ec5fbd0 R08: ffffed1001eb0233 R09: ffffed1001eb0233
R10: ffff88800f581193 R11: ffffed1001eb0232 R12: ffff888019d75c00
R13: ffff88800f5811e8 R14: ffffffff835430e0 R15: ffff88800ec5fe68
FS:  0000000001a0a3c0(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
CR2: 0000000020000140 CR3: 0000000016b42000 CR4: 0000000000750ef0
PKRU: 55555554
Call Trace:
 <TASK>
 __iommufd_access_detach+0x1c2/0x2b0 drivers/iommu/iommufd/device.c:971
 iommufd_access_change_pt+0x149/0x270 drivers/iommu/iommufd/device.c:1006
 iommufd_access_replace+0xb4/0x120 drivers/iommu/iommufd/device.c:1042
 iommufd_test_access_replace_ioas drivers/iommu/iommufd/selftest.c:1025 [inline]
 iommufd_test+0x103d/0x3f00 drivers/iommu/iommufd/selftest.c:1252
 iommufd_fops_ioctl+0x37d/0x510 drivers/iommu/iommufd/main.c:378
 vfs_ioctl fs/ioctl.c:51 [inline]
 __do_sys_ioctl fs/ioctl.c:870 [inline]
 __se_sys_ioctl fs/ioctl.c:856 [inline]
 __x64_sys_ioctl+0x1a3/0x230 fs/ioctl.c:856
 do_syscall_x64 arch/x86/entry/common.c:50 [inline]
 do_syscall_64+0x3b/0x90 arch/x86/entry/common.c:80
 entry_SYSCALL_64_after_hwframe+0x72/0xdc
RIP: 0033:0x44ff3d
Code: db 48 89 d8 5b 5d 41 5c 41 5d 41 5e c3 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 c7 c1 a8 ff ff ff f7 d8 64 89 01 48
RSP: 002b:00007fff8410fc18 EFLAGS: 00000246 ORIG_RAX: 0000000000000010
RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 000000000044ff3d
RDX: 0000000020000000 RSI: 0000000000003ba0 RDI: 0000000000000003
RBP: 0000000000000001 R08: 0000000000411b40 R09: 0000000000411b40
R10: 0000000000411b40 R11: 0000000000000246 R12: 0000000000000001
R13: 0000000000000000 R14: 00000000004004e8 R15: 0000000000000000
 </TASK>
irq event stamp: 0
hardirqs last  enabled at (0): [<0000000000000000>] 0x0
hardirqs last disabled at (0): [<ffffffff8122d29a>] copy_process+0x256a/0x7650 kernel/fork.c:2448
softirqs last  enabled at (0): [<ffffffff8122d2e2>] copy_process+0x25b2/0x7650 kernel/fork.c:2452
softirqs last disabled at (0): [<0000000000000000>] 0x0
---[ end trace 0000000000000000 ]---
------------[ cut here ]------------
WARNING: CPU: 0 PID: 579 at drivers/iommu/iommufd/io_pagetable.c:1158 iopt_remove_access+0xb5/0xd0 drivers/iommu/iommufd/io_pagetable.c:1157
Modules linked in:
CPU: 0 PID: 579 Comm: syz-executor321 Tainted: G    B   W          6.4.0-rc6-5ca8bbe2b782+ #1
Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
RIP: 0010:iopt_remove_access+0xb5/0xd0 drivers/iommu/iommufd/io_pagetable.c:1157
Code: 45 85 e4 75 29 e8 4b 2d 0b fe 4c 89 ef e8 33 eb e8 fd 48 89 df e8 2b eb e8 fd 5b 41 5c 41 5d 5d c3 cc cc cc cc e8 2b 2d 0b fe <0f> 0b eb b9 e8 22 2d 0b fe 0f 0b eb ce e8 b9 1d 67 fe eb 90 0f 1f
RSP: 0018:ffff88800ec5fbd0 EFLAGS: 00010246
RAX: 0000000000000000 RBX: ffff88800f5810a8 RCX: 0000000000000000
RDX: 0000000000000000 RSI: ffff888012e54a00 RDI: 0000000000000002
RBP: ffff88800ec5fbe8 R08: ffffed1001eb0233 R09: ffffed1001eb0233
R10: ffff88800f581193 R11: ffffed1001eb0232 R12: ffff88800f8c0000
R13: ffff88800f5811e8 R14: ffff88801479bd00 R15: 0000000000000000
FS:  0000000000000000(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
CR2: 00000000004e5420 CR3: 000000000667e000 CR4: 0000000000750ef0
PKRU: 55555554
Call Trace:
 <TASK>
 iommufd_access_destroy_object+0x65/0x170 drivers/iommu/iommufd/device.c:875
 iommufd_object_destroy_user+0x18e/0x220 drivers/iommu/iommufd/main.c:163
 iommufd_access_destroy+0x43/0x70 drivers/iommu/iommufd/device.c:938
 iommufd_test_staccess_release+0x8d/0xd0 drivers/iommu/iommufd/selftest.c:918
 __fput+0x26d/0xa40 fs/file_table.c:321
 ____fput+0x1e/0x30 fs/file_table.c:349
 task_work_run+0x1a4/0x2d0 kernel/task_work.c:179
 exit_task_work include/linux/task_work.h:38 [inline]
 do_exit+0xaf3/0x2f60 kernel/exit.c:874
 do_group_exit+0xe0/0x2b0 kernel/exit.c:1024
 __do_sys_exit_group kernel/exit.c:1035 [inline]
 __se_sys_exit_group kernel/exit.c:1033 [inline]
 __x64_sys_exit_group+0x47/0x50 kernel/exit.c:1033
 do_syscall_x64 arch/x86/entry/common.c:50 [inline]
 do_syscall_64+0x3b/0x90 arch/x86/entry/common.c:80
 entry_SYSCALL_64_after_hwframe+0x72/0xdc
RIP: 0033:0x44de86
Code: Unable to access opcode bytes at 0x44de5c.
RSP: 002b:00007fff8410fbc8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
RAX: ffffffffffffffda RBX: 00000000004e5410 RCX: 000000000044de86
RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffffa8
R10: 0000000000411b40 R11: 0000000000000246 R12: 00000000004e5410
R13: 0000000000000001 R14: 0000000000000000 R15: 0000000000000001
 </TASK>
irq event stamp: 0
hardirqs last  enabled at (0): [<0000000000000000>] 0x0
hardirqs last disabled at (0): [<ffffffff8122d29a>] copy_process+0x256a/0x7650 kernel/fork.c:2448
softirqs last  enabled at (0): [<ffffffff8122d2e2>] copy_process+0x25b2/0x7650 kernel/fork.c:2452
softirqs last disabled at (0): [<0000000000000000>] 0x0
---[ end trace 0000000000000000 ]---
------------[ cut here ]------------
WARNING: CPU: 0 PID: 579 at drivers/iommu/iommufd/io_pagetable.c:663 iopt_destroy_table+0x15f/0x1b0 drivers/iommu/iommufd/io_pagetable.c:663
Modules linked in:
CPU: 0 PID: 579 Comm: syz-executor321 Tainted: G    B   W          6.4.0-rc6-5ca8bbe2b782+ #1
Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
RIP: 0010:iopt_destroy_table+0x15f/0x1b0 drivers/iommu/iommufd/io_pagetable.c:663
Code: 5b 41 5c 41 5d 41 5e 5d c3 cc cc cc cc e8 c9 53 0b fe 0f 0b e9 51 ff ff ff e8 bd 53 0b fe 0f 0b e9 76 ff ff ff e8 b1 53 0b fe <0f> 0b eb 9e e8 a8 53 0b fe 0f 0b e8 a1 53 0b fe 5b 41 5c 41 5d 41
RSP: 0018:ffff88800ec5fb78 EFLAGS: 00010246
RAX: 0000000000000000 RBX: 0000000000000000 RCX: 0000000000000000
RDX: 0000000000000000 RSI: ffff888012e54a00 RDI: 0000000000000002
RBP: ffff88800ec5fb98 R08: ffffed1001eb023e R09: ffffed1001eb023e
R10: ffff88800f5811ef R11: ffffed1001eb023d R12: ffff88800f581290
R13: ffff88800f5810a8 R14: ffffffffffffffff R15: ffff88800ec5fc60
FS:  0000000000000000(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
CR2: 00000000004e5420 CR3: 000000000667e000 CR4: 0000000000750ef0
PKRU: 55555554
Call Trace:
 <TASK>
 iommufd_ioas_destroy+0x53/0x70 drivers/iommu/iommufd/ioas.c:19
 iommufd_fops_release+0x1f7/0x370 drivers/iommu/iommufd/main.c:231
 __fput+0x26d/0xa40 fs/file_table.c:321
 ____fput+0x1e/0x30 fs/file_table.c:349
 task_work_run+0x1a4/0x2d0 kernel/task_work.c:179
 exit_task_work include/linux/task_work.h:38 [inline]
 do_exit+0xaf3/0x2f60 kernel/exit.c:874
 do_group_exit+0xe0/0x2b0 kernel/exit.c:1024
 __do_sys_exit_group kernel/exit.c:1035 [inline]
 __se_sys_exit_group kernel/exit.c:1033 [inline]
 __x64_sys_exit_group+0x47/0x50 kernel/exit.c:1033
 do_syscall_x64 arch/x86/entry/common.c:50 [inline]
 do_syscall_64+0x3b/0x90 arch/x86/entry/common.c:80
 entry_SYSCALL_64_after_hwframe+0x72/0xdc
RIP: 0033:0x44de86
Code: Unable to access opcode bytes at 0x44de5c.
RSP: 002b:00007fff8410fbc8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
RAX: ffffffffffffffda RBX: 00000000004e5410 RCX: 000000000044de86
RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffffa8
R10: 0000000000411b40 R11: 0000000000000246 R12: 00000000004e5410
R13: 0000000000000001 R14: 0000000000000000 R15: 0000000000000001
 </TASK>
irq event stamp: 0
hardirqs last  enabled at (0): [<0000000000000000>] 0x0
hardirqs last disabled at (0): [<ffffffff8122d29a>] copy_process+0x256a/0x7650 kernel/fork.c:2448
softirqs last  enabled at (0): [<ffffffff8122d2e2>] copy_process+0x25b2/0x7650 kernel/fork.c:2452
softirqs last disabled at (0): [<0000000000000000>] 0x0
---[ end trace 0000000000000000 ]---
------------[ cut here ]------------
WARNING: CPU: 0 PID: 580 at drivers/iommu/iommufd/io_pagetable.c:1158 iopt_remove_access+0xb5/0xd0 drivers/iommu/iommufd/io_pagetable.c:1157
Modules linked in:
CPU: 0 PID: 580 Comm: syz-executor321 Tainted: G    B   W          6.4.0-rc6-5ca8bbe2b782+ #1
Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
RIP: 0010:iopt_remove_access+0xb5/0xd0 drivers/iommu/iommufd/io_pagetable.c:1157
Code: 45 85 e4 75 29 e8 4b 2d 0b fe 4c 89 ef e8 33 eb e8 fd 48 89 df e8 2b eb e8 fd 5b 41 5c 41 5d 5d c3 cc cc cc cc e8 2b 2d 0b fe <0f> 0b eb b9 e8 22 2d 0b fe 0f 0b eb ce e8 b9 1d 67 fe eb 90 0f 1f
RSP: 0018:ffff888016a07bb8 EFLAGS: 00010246
RAX: 0000000000000000 RBX: ffff888015ac40a8 RCX: 0000000000000000
RDX: 0000000000000000 RSI: ffff888011958000 RDI: 0000000000000002
RBP: ffff888016a07bd0 R08: ffffed1002b58833 R09: ffffed1002b58833
R10: ffff888015ac4193 R11: ffffed1002b58832 R12: ffff888019d3f800
R13: ffff888015ac41e8 R14: ffffffff835430e0 R15: ffff888016a07e68
systemd-journald[137]: Data hash table of /run/log/journal/6ee5b4ede6d941feba9def5bf10a6d8d/system.journal has a fill level at 75.0 (5462 of 7281 items, 4194304 file size, 767 bytes per hash table item), suggesting rotation.
FS:  0000000001a0a3c0(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
systemd-journald[137]: /run/log/journal/6ee5b4ede6d941feba9def5bf10a6d8d/system.journal: Journal header limits reached or header out-of-date, rotating.
CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
CR2: 0000000020000140 CR3: 000000000f378000 CR4: 0000000000750ef0
PKRU: 55555554
Call Trace:
 <TASK>
 __iommufd_access_detach+0x1c2/0x2b0 drivers/iommu/iommufd/device.c:971
 iommufd_access_change_pt+0x149/0x270 drivers/iommu/iommufd/device.c:1006
 iommufd_access_replace+0xb4/0x120 drivers/iommu/iommufd/device.c:1042
 iommufd_test_access_replace_ioas drivers/iommu/iommufd/selftest.c:1025 [inline]
 iommufd_test+0x103d/0x3f00 drivers/iommu/iommufd/selftest.c:1252
 iommufd_fops_ioctl+0x37d/0x510 drivers/iommu/iommufd/main.c:378
 vfs_ioctl fs/ioctl.c:51 [inline]
 __do_sys_ioctl fs/ioctl.c:870 [inline]
 __se_sys_ioctl fs/ioctl.c:856 [inline]
 __x64_sys_ioctl+0x1a3/0x230 fs/ioctl.c:856
 do_syscall_x64 arch/x86/entry/common.c:50 [inline]
 do_syscall_64+0x3b/0x90 arch/x86/entry/common.c:80
 entry_SYSCALL_64_after_hwframe+0x72/0xdc
RIP: 0033:0x44ff3d
Code: db 48 89 d8 5b 5d 41 5c 41 5d 41 5e c3 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 c7 c1 a8 ff ff ff f7 d8 64 89 01 48
RSP: 002b:00007fff8410fc18 EFLAGS: 00000246 ORIG_RAX: 0000000000000010
RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 000000000044ff3d
RDX: 0000000020000000 RSI: 0000000000003ba0 RDI: 0000000000000003
RBP: 0000000000000001 R08: 0000000000411b40 R09: 0000000000411b40
R10: 0000000000411b40 R11: 0000000000000246 R12: 0000000000000001
R13: 0000000000000000 R14: 00000000004004e8 R15: 0000000000000000
 </TASK>
irq event stamp: 0
hardirqs last  enabled at (0): [<0000000000000000>] 0x0
hardirqs last disabled at (0): [<ffffffff8122d29a>] copy_process+0x256a/0x7650 kernel/fork.c:2448
softirqs last  enabled at (0): [<ffffffff8122d2e2>] copy_process+0x25b2/0x7650 kernel/fork.c:2452
softirqs last disabled at (0): [<0000000000000000>] 0x0
---[ end trace 0000000000000000 ]---
------------[ cut here ]------------
WARNING: CPU: 0 PID: 580 at drivers/iommu/iommufd/io_pagetable.c:1158 iopt_remove_access+0xb5/0xd0 drivers/iommu/iommufd/io_pagetable.c:1157
Modules linked in:
CPU: 0 PID: 580 Comm: syz-executor321 Tainted: G    B   W          6.4.0-rc6-5ca8bbe2b782+ #1
Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
RIP: 0010:iopt_remove_access+0xb5/0xd0 drivers/iommu/iommufd/io_pagetable.c:1157
Code: 45 85 e4 75 29 e8 4b 2d 0b fe 4c 89 ef e8 33 eb e8 fd 48 89 df e8 2b eb e8 fd 5b 41 5c 41 5d 5d c3 cc cc cc cc e8 2b 2d 0b fe <0f> 0b eb b9 e8 22 2d 0b fe 0f 0b eb ce e8 b9 1d 67 fe eb 90 0f 1f
RSP: 0018:ffff888016a07bd0 EFLAGS: 00010246
RAX: 0000000000000000 RBX: ffff888015ac40a8 RCX: 0000000000000000
RDX: 0000000000000000 RSI: ffff888011958000 RDI: 0000000000000002
RBP: ffff888016a07be8 R08: ffffed1002b58833 R09: ffffed1002b58833
R10: ffff888015ac4193 R11: ffffed1002b58832 R12: ffff888019d74c00
R13: ffff888015ac41e8 R14: ffff888019eb8c00 R15: 0000000000000000
FS:  0000000000000000(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
CR2: 00000000004e5420 CR3: 000000000667e000 CR4: 0000000000750ef0
PKRU: 55555554
Call Trace:
 <TASK>
 iommufd_access_destroy_object+0x65/0x170 drivers/iommu/iommufd/device.c:875
 iommufd_object_destroy_user+0x18e/0x220 drivers/iommu/iommufd/main.c:163
 iommufd_access_destroy+0x43/0x70 drivers/iommu/iommufd/device.c:938
 iommufd_test_staccess_release+0x8d/0xd0 drivers/iommu/iommufd/selftest.c:918
 __fput+0x26d/0xa40 fs/file_table.c:321
 ____fput+0x1e/0x30 fs/file_table.c:349
 task_work_run+0x1a4/0x2d0 kernel/task_work.c:179
 exit_task_work include/linux/task_work.h:38 [inline]
 do_exit+0xaf3/0x2f60 kernel/exit.c:874
 do_group_exit+0xe0/0x2b0 kernel/exit.c:1024
 __do_sys_exit_group kernel/exit.c:1035 [inline]
 __se_sys_exit_group kernel/exit.c:1033 [inline]
 __x64_sys_exit_group+0x47/0x50 kernel/exit.c:1033
 do_syscall_x64 arch/x86/entry/common.c:50 [inline]
 do_syscall_64+0x3b/0x90 arch/x86/entry/common.c:80
 entry_SYSCALL_64_after_hwframe+0x72/0xdc
RIP: 0033:0x44de86
Code: Unable to access opcode bytes at 0x44de5c.
RSP: 002b:00007fff8410fbc8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
RAX: ffffffffffffffda RBX: 00000000004e5410 RCX: 000000000044de86
RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffffa8
R10: 0000000000411b40 R11: 0000000000000246 R12: 00000000004e5410
R13: 0000000000000001 R14: 0000000000000000 R15: 0000000000000001
 </TASK>
irq event stamp: 0
hardirqs last  enabled at (0): [<0000000000000000>] 0x0
hardirqs last disabled at (0): [<ffffffff8122d29a>] copy_process+0x256a/0x7650 kernel/fork.c:2448
softirqs last  enabled at (0): [<ffffffff8122d2e2>] copy_process+0x25b2/0x7650 kernel/fork.c:2452
softirqs last disabled at (0): [<0000000000000000>] 0x0
---[ end trace 0000000000000000 ]---
------------[ cut here ]------------
WARNING: CPU: 0 PID: 580 at drivers/iommu/iommufd/io_pagetable.c:663 iopt_destroy_table+0x15f/0x1b0 drivers/iommu/iommufd/io_pagetable.c:663
Modules linked in:
CPU: 0 PID: 580 Comm: syz-executor321 Tainted: G    B   W          6.4.0-rc6-5ca8bbe2b782+ #1
Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
RIP: 0010:iopt_destroy_table+0x15f/0x1b0 drivers/iommu/iommufd/io_pagetable.c:663
Code: 5b 41 5c 41 5d 41 5e 5d c3 cc cc cc cc e8 c9 53 0b fe 0f 0b e9 51 ff ff ff e8 bd 53 0b fe 0f 0b e9 76 ff ff ff e8 b1 53 0b fe <0f> 0b eb 9e e8 a8 53 0b fe 0f 0b e8 a1 53 0b fe 5b 41 5c 41 5d 41
RSP: 0018:ffff888016a07b78 EFLAGS: 00010246
RAX: 0000000000000000 RBX: 0000000000000000 RCX: 0000000000000000
RDX: 0000000000000000 RSI: ffff888011958000 RDI: 0000000000000002
RBP: ffff888016a07b98 R08: ffffed1002b5883e R09: ffffed1002b5883e
R10: ffff888015ac41ef R11: ffffed1002b5883d R12: ffff888015ac4290
R13: ffff888015ac40a8 R14: ffffffffffffffff R15: ffff888016a07c60
FS:  0000000000000000(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
CR2: 00000000004e5420 CR3: 000000000667e000 CR4: 0000000000750ef0
PKRU: 55555554
Call Trace:
 <TASK>
 iommufd_ioas_destroy+0x53/0x70 drivers/iommu/iommufd/ioas.c:19
 iommufd_fops_release+0x1f7/0x370 drivers/iommu/iommufd/main.c:231
 __fput+0x26d/0xa40 fs/file_table.c:321
 ____fput+0x1e/0x30 fs/file_table.c:349
 task_work_run+0x1a4/0x2d0 kernel/task_work.c:179
 exit_task_work include/linux/task_work.h:38 [inline]
 do_exit+0xaf3/0x2f60 kernel/exit.c:874
 do_group_exit+0xe0/0x2b0 kernel/exit.c:1024
 __do_sys_exit_group kernel/exit.c:1035 [inline]
 __se_sys_exit_group kernel/exit.c:1033 [inline]
 __x64_sys_exit_group+0x47/0x50 kernel/exit.c:1033
 do_syscall_x64 arch/x86/entry/common.c:50 [inline]
 do_syscall_64+0x3b/0x90 arch/x86/entry/common.c:80
 entry_SYSCALL_64_after_hwframe+0x72/0xdc
RIP: 0033:0x44de86
Code: Unable to access opcode bytes at 0x44de5c.
RSP: 002b:00007fff8410fbc8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
RAX: ffffffffffffffda RBX: 00000000004e5410 RCX: 000000000044de86
RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffffa8
R10: 0000000000411b40 R11: 0000000000000246 R12: 00000000004e5410
R13: 0000000000000001 R14: 0000000000000000 R15: 0000000000000001
 </TASK>
irq event stamp: 0
hardirqs last  enabled at (0): [<0000000000000000>] 0x0
hardirqs last disabled at (0): [<ffffffff8122d29a>] copy_process+0x256a/0x7650 kernel/fork.c:2448
softirqs last  enabled at (0): [<ffffffff8122d2e2>] copy_process+0x25b2/0x7650 kernel/fork.c:2452
softirqs last disabled at (0): [<0000000000000000>] 0x0
---[ end trace 0000000000000000 ]---
------------[ cut here ]------------
WARNING: CPU: 0 PID: 582 at drivers/iommu/iommufd/io_pagetable.c:1158 iopt_remove_access+0xb5/0xd0 drivers/iommu/iommufd/io_pagetable.c:1157
Modules linked in:
CPU: 0 PID: 582 Comm: syz-executor321 Tainted: G    B   W          6.4.0-rc6-5ca8bbe2b782+ #1
Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
RIP: 0010:iopt_remove_access+0xb5/0xd0 drivers/iommu/iommufd/io_pagetable.c:1157
Code: 45 85 e4 75 29 e8 4b 2d 0b fe 4c 89 ef e8 33 eb e8 fd 48 89 df e8 2b eb e8 fd 5b 41 5c 41 5d 5d c3 cc cc cc cc e8 2b 2d 0b fe <0f> 0b eb b9 e8 22 2d 0b fe 0f 0b eb ce e8 b9 1d 67 fe eb 90 0f 1f
RSP: 0018:ffff88800b8cfbb8 EFLAGS: 00010246
RAX: 0000000000000000 RBX: ffff888013b3b0a8 RCX: 0000000000000000
RDX: 0000000000000000 RSI: ffff888015194a00 RDI: 0000000000000002
RBP: ffff88800b8cfbd0 R08: ffffed1002767633 R09: ffffed1002767633
R10: ffff888013b3b193 R11: ffffed1002767632 R12: ffff888011c82400
R13: ffff888013b3b1e8 R14: ffffffff835430e0 R15: ffff88800b8cfe68
FS:  0000000001a0a3c0(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
CR2: 0000000020000140 CR3: 0000000011100000 CR4: 0000000000750ef0
PKRU: 55555554
Call Trace:
 <TASK>
 __iommufd_access_detach+0x1c2/0x2b0 drivers/iommu/iommufd/device.c:971
 iommufd_access_change_pt+0x149/0x270 drivers/iommu/iommufd/device.c:1006
 iommufd_access_replace+0xb4/0x120 drivers/iommu/iommufd/device.c:1042
 iommufd_test_access_replace_ioas drivers/iommu/iommufd/selftest.c:1025 [inline]
 iommufd_test+0x103d/0x3f00 drivers/iommu/iommufd/selftest.c:1252
 iommufd_fops_ioctl+0x37d/0x510 drivers/iommu/iommufd/main.c:378
 vfs_ioctl fs/ioctl.c:51 [inline]
 __do_sys_ioctl fs/ioctl.c:870 [inline]
 __se_sys_ioctl fs/ioctl.c:856 [inline]
 __x64_sys_ioctl+0x1a3/0x230 fs/ioctl.c:856
 do_syscall_x64 arch/x86/entry/common.c:50 [inline]
 do_syscall_64+0x3b/0x90 arch/x86/entry/common.c:80
 entry_SYSCALL_64_after_hwframe+0x72/0xdc
RIP: 0033:0x44ff3d
Code: db 48 89 d8 5b 5d 41 5c 41 5d 41 5e c3 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 c7 c1 a8 ff ff ff f7 d8 64 89 01 48
RSP: 002b:00007fff8410fc18 EFLAGS: 00000246 ORIG_RAX: 0000000000000010
RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 000000000044ff3d
RDX: 0000000020000000 RSI: 0000000000003ba0 RDI: 0000000000000003
RBP: 0000000000000001 R08: 0000000000411b40 R09: 0000000000411b40
R10: 0000000000411b40 R11: 0000000000000246 R12: 0000000000000001
R13: 0000000000000000 R14: 00000000004004e8 R15: 0000000000000000
 </TASK>
irq event stamp: 0
hardirqs last  enabled at (0): [<0000000000000000>] 0x0
hardirqs last disabled at (0): [<ffffffff8122d29a>] copy_process+0x256a/0x7650 kernel/fork.c:2448
softirqs last  enabled at (0): [<ffffffff8122d2e2>] copy_process+0x25b2/0x7650 kernel/fork.c:2452
softirqs last disabled at (0): [<0000000000000000>] 0x0
---[ end trace 0000000000000000 ]---
------------[ cut here ]------------
WARNING: CPU: 0 PID: 582 at drivers/iommu/iommufd/io_pagetable.c:1158 iopt_remove_access+0xb5/0xd0 drivers/iommu/iommufd/io_pagetable.c:1157
Modules linked in:
CPU: 0 PID: 582 Comm: syz-executor321 Tainted: G    B   W          6.4.0-rc6-5ca8bbe2b782+ #1
Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
RIP: 0010:iopt_remove_access+0xb5/0xd0 drivers/iommu/iommufd/io_pagetable.c:1157
Code: 45 85 e4 75 29 e8 4b 2d 0b fe 4c 89 ef e8 33 eb e8 fd 48 89 df e8 2b eb e8 fd 5b 41 5c 41 5d 5d c3 cc cc cc cc e8 2b 2d 0b fe <0f> 0b eb b9 e8 22 2d 0b fe 0f 0b eb ce e8 b9 1d 67 fe eb 90 0f 1f
RSP: 0018:ffff88800b8cfbd0 EFLAGS: 00010246
RAX: 0000000000000000 RBX: ffff888013b3b0a8 RCX: 0000000000000000
RDX: 0000000000000000 RSI: ffff888015194a00 RDI: 0000000000000002
RBP: ffff88800b8cfbe8 R08: ffffed1002767633 R09: ffffed1002767633
R10: ffff888013b3b193 R11: ffffed1002767632 R12: ffff888019d3c000
R13: ffff888013b3b1e8 R14: ffff88800f601e00 R15: 0000000000000000
FS:  0000000000000000(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
CR2: 00000000004e5420 CR3: 000000000667e000 CR4: 0000000000750ef0
PKRU: 55555554
Call Trace:
 <TASK>
 iommufd_access_destroy_object+0x65/0x170 drivers/iommu/iommufd/device.c:875
 iommufd_object_destroy_user+0x18e/0x220 drivers/iommu/iommufd/main.c:163
 iommufd_access_destroy+0x43/0x70 drivers/iommu/iommufd/device.c:938
 iommufd_test_staccess_release+0x8d/0xd0 drivers/iommu/iommufd/selftest.c:918
 __fput+0x26d/0xa40 fs/file_table.c:321
 ____fput+0x1e/0x30 fs/file_table.c:349
 task_work_run+0x1a4/0x2d0 kernel/task_work.c:179
 exit_task_work include/linux/task_work.h:38 [inline]
 do_exit+0xaf3/0x2f60 kernel/exit.c:874
 do_group_exit+0xe0/0x2b0 kernel/exit.c:1024
 __do_sys_exit_group kernel/exit.c:1035 [inline]
 __se_sys_exit_group kernel/exit.c:1033 [inline]
 __x64_sys_exit_group+0x47/0x50 kernel/exit.c:1033
 do_syscall_x64 arch/x86/entry/common.c:50 [inline]
 do_syscall_64+0x3b/0x90 arch/x86/entry/common.c:80
 entry_SYSCALL_64_after_hwframe+0x72/0xdc
RIP: 0033:0x44de86
Code: Unable to access opcode bytes at 0x44de5c.
RSP: 002b:00007fff8410fbc8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
RAX: ffffffffffffffda RBX: 00000000004e5410 RCX: 000000000044de86
RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffffa8
R10: 0000000000411b40 R11: 0000000000000246 R12: 00000000004e5410
R13: 0000000000000001 R14: 0000000000000000 R15: 0000000000000001
 </TASK>
irq event stamp: 0
hardirqs last  enabled at (0): [<0000000000000000>] 0x0
hardirqs last disabled at (0): [<ffffffff8122d29a>] copy_process+0x256a/0x7650 kernel/fork.c:2448
softirqs last  enabled at (0): [<ffffffff8122d2e2>] copy_process+0x25b2/0x7650 kernel/fork.c:2452
softirqs last disabled at (0): [<0000000000000000>] 0x0
---[ end trace 0000000000000000 ]---
------------[ cut here ]------------
WARNING: CPU: 0 PID: 582 at drivers/iommu/iommufd/io_pagetable.c:663 iopt_destroy_table+0x15f/0x1b0 drivers/iommu/iommufd/io_pagetable.c:663
Modules linked in:
CPU: 0 PID: 582 Comm: syz-executor321 Tainted: G    B   W          6.4.0-rc6-5ca8bbe2b782+ #1
Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
RIP: 0010:iopt_destroy_table+0x15f/0x1b0 drivers/iommu/iommufd/io_pagetable.c:663
Code: 5b 41 5c 41 5d 41 5e 5d c3 cc cc cc cc e8 c9 53 0b fe 0f 0b e9 51 ff ff ff e8 bd 53 0b fe 0f 0b e9 76 ff ff ff e8 b1 53 0b fe <0f> 0b eb 9e e8 a8 53 0b fe 0f 0b e8 a1 53 0b fe 5b 41 5c 41 5d 41
RSP: 0018:ffff88800b8cfb78 EFLAGS: 00010246
RAX: 0000000000000000 RBX: 0000000000000000 RCX: 0000000000000000
RDX: 0000000000000000 RSI: ffff888015194a00 RDI: 0000000000000002
RBP: ffff88800b8cfb98 R08: ffffed100276763e R09: ffffed100276763e
R10: ffff888013b3b1ef R11: ffffed100276763d R12: ffff888013b3b290
R13: ffff888013b3b0a8 R14: ffffffffffffffff R15: ffff88800b8cfc60
FS:  0000000000000000(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
CR2: 00000000004e5420 CR3: 000000000667e000 CR4: 0000000000750ef0
PKRU: 55555554
Call Trace:
 <TASK>
 iommufd_ioas_destroy+0x53/0x70 drivers/iommu/iommufd/ioas.c:19
 iommufd_fops_release+0x1f7/0x370 drivers/iommu/iommufd/main.c:231
 __fput+0x26d/0xa40 fs/file_table.c:321
 ____fput+0x1e/0x30 fs/file_table.c:349
 task_work_run+0x1a4/0x2d0 kernel/task_work.c:179
 exit_task_work include/linux/task_work.h:38 [inline]
 do_exit+0xaf3/0x2f60 kernel/exit.c:874
 do_group_exit+0xe0/0x2b0 kernel/exit.c:1024
 __do_sys_exit_group kernel/exit.c:1035 [inline]
 __se_sys_exit_group kernel/exit.c:1033 [inline]
 __x64_sys_exit_group+0x47/0x50 kernel/exit.c:1033
 do_syscall_x64 arch/x86/entry/common.c:50 [inline]
 do_syscall_64+0x3b/0x90 arch/x86/entry/common.c:80
 entry_SYSCALL_64_after_hwframe+0x72/0xdc
RIP: 0033:0x44de86
Code: Unable to access opcode bytes at 0x44de5c.
RSP: 002b:00007fff8410fbc8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
RAX: ffffffffffffffda RBX: 00000000004e5410 RCX: 000000000044de86
RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffffa8
R10: 0000000000411b40 R11: 0000000000000246 R12: 00000000004e5410
R13: 0000000000000001 R14: 0000000000000000 R15: 0000000000000001
 </TASK>
irq event stamp: 0
hardirqs last  enabled at (0): [<0000000000000000>] 0x0
hardirqs last disabled at (0): [<ffffffff8122d29a>] copy_process+0x256a/0x7650 kernel/fork.c:2448
softirqs last  enabled at (0): [<ffffffff8122d2e2>] copy_process+0x25b2/0x7650 kernel/fork.c:2452
softirqs last disabled at (0): [<0000000000000000>] 0x0
---[ end trace 0000000000000000 ]---
------------[ cut here ]------------
WARNING: CPU: 0 PID: 583 at drivers/iommu/iommufd/io_pagetable.c:1158 iopt_remove_access+0xb5/0xd0 drivers/iommu/iommufd/io_pagetable.c:1157
Modules linked in:
CPU: 0 PID: 583 Comm: syz-executor321 Tainted: G    B   W          6.4.0-rc6-5ca8bbe2b782+ #1
Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
RIP: 0010:iopt_remove_access+0xb5/0xd0 drivers/iommu/iommufd/io_pagetable.c:1157
Code: 45 85 e4 75 29 e8 4b 2d 0b fe 4c 89 ef e8 33 eb e8 fd 48 89 df e8 2b eb e8 fd 5b 41 5c 41 5d 5d c3 cc cc cc cc e8 2b 2d 0b fe <0f> 0b eb b9 e8 22 2d 0b fe 0f 0b eb ce e8 b9 1d 67 fe eb 90 0f 1f
RSP: 0018:ffff888022dffbb8 EFLAGS: 00010246
RAX: 0000000000000000 RBX: ffff888010c8b0a8 RCX: 0000000000000000
RDX: 0000000000000000 RSI: ffff888015190000 RDI: 0000000000000002
RBP: ffff888022dffbd0 R08: ffffed1002191633 R09: ffffed1002191633
R10: ffff888010c8b193 R11: ffffed1002191632 R12: ffff888010330000
R13: ffff888010c8b1e8 R14: ffffffff835430e0 R15: ffff888022dffe68
FS:  0000000001a0a3c0(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
CR2: 0000000020000140 CR3: 00000000144a0000 CR4: 0000000000750ef0
PKRU: 55555554
Call Trace:
 <TASK>
 __iommufd_access_detach+0x1c2/0x2b0 drivers/iommu/iommufd/device.c:971
 iommufd_access_change_pt+0x149/0x270 drivers/iommu/iommufd/device.c:1006
 iommufd_access_replace+0xb4/0x120 drivers/iommu/iommufd/device.c:1042
 iommufd_test_access_replace_ioas drivers/iommu/iommufd/selftest.c:1025 [inline]
 iommufd_test+0x103d/0x3f00 drivers/iommu/iommufd/selftest.c:1252
 iommufd_fops_ioctl+0x37d/0x510 drivers/iommu/iommufd/main.c:378
 vfs_ioctl fs/ioctl.c:51 [inline]
 __do_sys_ioctl fs/ioctl.c:870 [inline]
 __se_sys_ioctl fs/ioctl.c:856 [inline]
 __x64_sys_ioctl+0x1a3/0x230 fs/ioctl.c:856
 do_syscall_x64 arch/x86/entry/common.c:50 [inline]
 do_syscall_64+0x3b/0x90 arch/x86/entry/common.c:80
 entry_SYSCALL_64_after_hwframe+0x72/0xdc
RIP: 0033:0x44ff3d
Code: db 48 89 d8 5b 5d 41 5c 41 5d 41 5e c3 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 c7 c1 a8 ff ff ff f7 d8 64 89 01 48
RSP: 002b:00007fff8410fc18 EFLAGS: 00000246 ORIG_RAX: 0000000000000010
RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 000000000044ff3d
RDX: 0000000020000000 RSI: 0000000000003ba0 RDI: 0000000000000003
RBP: 0000000000000001 R08: 0000000000411b40 R09: 0000000000411b40
R10: 0000000000411b40 R11: 0000000000000246 R12: 0000000000000001
R13: 0000000000000000 R14: 00000000004004e8 R15: 0000000000000000
 </TASK>
irq event stamp: 0
hardirqs last  enabled at (0): [<0000000000000000>] 0x0
hardirqs last disabled at (0): [<ffffffff8122d29a>] copy_process+0x256a/0x7650 kernel/fork.c:2448
softirqs last  enabled at (0): [<ffffffff8122d2e2>] copy_process+0x25b2/0x7650 kernel/fork.c:2452
softirqs last disabled at (0): [<0000000000000000>] 0x0
---[ end trace 0000000000000000 ]---
------------[ cut here ]------------
WARNING: CPU: 0 PID: 583 at drivers/iommu/iommufd/io_pagetable.c:1158 iopt_remove_access+0xb5/0xd0 drivers/iommu/iommufd/io_pagetable.c:1157
Modules linked in:
CPU: 0 PID: 583 Comm: syz-executor321 Tainted: G    B   W          6.4.0-rc6-5ca8bbe2b782+ #1
Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
RIP: 0010:iopt_remove_access+0xb5/0xd0 drivers/iommu/iommufd/io_pagetable.c:1157
Code: 45 85 e4 75 29 e8 4b 2d 0b fe 4c 89 ef e8 33 eb e8 fd 48 89 df e8 2b eb e8 fd 5b 41 5c 41 5d 5d c3 cc cc cc cc e8 2b 2d 0b fe <0f> 0b eb b9 e8 22 2d 0b fe 0f 0b eb ce e8 b9 1d 67 fe eb 90 0f 1f
RSP: 0018:ffff888022dffbd0 EFLAGS: 00010246
RAX: 0000000000000000 RBX: ffff888010c8b0a8 RCX: 0000000000000000
RDX: 0000000000000000 RSI: ffff888015190000 RDI: 0000000000000002
RBP: ffff888022dffbe8 R08: ffffed1002191633 R09: ffffed1002191633
R10: ffff888010c8b193 R11: ffffed1002191632 R12: ffff888011c83c00
R13: ffff888010c8b1e8 R14: ffff888016fdad00 R15: 0000000000000000
FS:  0000000000000000(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
CR2: 00000000004e5420 CR3: 000000000667e000 CR4: 0000000000750ef0
PKRU: 55555554
Call Trace:
 <TASK>
 iommufd_access_destroy_object+0x65/0x170 drivers/iommu/iommufd/device.c:875
 iommufd_object_destroy_user+0x18e/0x220 drivers/iommu/iommufd/main.c:163
 iommufd_access_destroy+0x43/0x70 drivers/iommu/iommufd/device.c:938
 iommufd_test_staccess_release+0x8d/0xd0 drivers/iommu/iommufd/selftest.c:918
 __fput+0x26d/0xa40 fs/file_table.c:321
 ____fput+0x1e/0x30 fs/file_table.c:349
 task_work_run+0x1a4/0x2d0 kernel/task_work.c:179
 exit_task_work include/linux/task_work.h:38 [inline]
 do_exit+0xaf3/0x2f60 kernel/exit.c:874
 do_group_exit+0xe0/0x2b0 kernel/exit.c:1024
 __do_sys_exit_group kernel/exit.c:1035 [inline]
 __se_sys_exit_group kernel/exit.c:1033 [inline]
 __x64_sys_exit_group+0x47/0x50 kernel/exit.c:1033
 do_syscall_x64 arch/x86/entry/common.c:50 [inline]
 do_syscall_64+0x3b/0x90 arch/x86/entry/common.c:80
 entry_SYSCALL_64_after_hwframe+0x72/0xdc
RIP: 0033:0x44de86
Code: Unable to access opcode bytes at 0x44de5c.
RSP: 002b:00007fff8410fbc8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
RAX: ffffffffffffffda RBX: 00000000004e5410 RCX: 000000000044de86
RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffffa8
R10: 0000000000411b40 R11: 0000000000000246 R12: 00000000004e5410
R13: 0000000000000001 R14: 0000000000000000 R15: 0000000000000001
 </TASK>
irq event stamp: 0
hardirqs last  enabled at (0): [<0000000000000000>] 0x0
hardirqs last disabled at (0): [<ffffffff8122d29a>] copy_process+0x256a/0x7650 kernel/fork.c:2448
softirqs last  enabled at (0): [<ffffffff8122d2e2>] copy_process+0x25b2/0x7650 kernel/fork.c:2452
softirqs last disabled at (0): [<0000000000000000>] 0x0
---[ end trace 0000000000000000 ]---
------------[ cut here ]------------
WARNING: CPU: 0 PID: 583 at drivers/iommu/iommufd/io_pagetable.c:663 iopt_destroy_table+0x15f/0x1b0 drivers/iommu/iommufd/io_pagetable.c:663
Modules linked in:
CPU: 0 PID: 583 Comm: syz-executor321 Tainted: G    B   W          6.4.0-rc6-5ca8bbe2b782+ #1
Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
RIP: 0010:iopt_destroy_table+0x15f/0x1b0 drivers/iommu/iommufd/io_pagetable.c:663
Code: 5b 41 5c 41 5d 41 5e 5d c3 cc cc cc cc e8 c9 53 0b fe 0f 0b e9 51 ff ff ff e8 bd 53 0b fe 0f 0b e9 76 ff ff ff e8 b1 53 0b fe <0f> 0b eb 9e e8 a8 53 0b fe 0f 0b e8 a1 53 0b fe 5b 41 5c 41 5d 41
RSP: 0018:ffff888022dffb78 EFLAGS: 00010246
RAX: 0000000000000000 RBX: 0000000000000000 RCX: 0000000000000000
RDX: 0000000000000000 RSI: ffff888015190000 RDI: 0000000000000002
RBP: ffff888022dffb98 R08: ffffed100219163e R09: ffffed100219163e
R10: ffff888010c8b1ef R11: ffffed100219163d R12: ffff888010c8b290
R13: ffff888010c8b0a8 R14: ffffffffffffffff R15: ffff888022dffc60
FS:  0000000000000000(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
CR2: 00000000004e5420 CR3: 000000000667e000 CR4: 0000000000750ef0
PKRU: 55555554
Call Trace:
 <TASK>
 iommufd_ioas_destroy+0x53/0x70 drivers/iommu/iommufd/ioas.c:19
 iommufd_fops_release+0x1f7/0x370 drivers/iommu/iommufd/main.c:231
 __fput+0x26d/0xa40 fs/file_table.c:321
 ____fput+0x1e/0x30 fs/file_table.c:349
 task_work_run+0x1a4/0x2d0 kernel/task_work.c:179
 exit_task_work include/linux/task_work.h:38 [inline]
 do_exit+0xaf3/0x2f60 kernel/exit.c:874
 do_group_exit+0xe0/0x2b0 kernel/exit.c:1024
 __do_sys_exit_group kernel/exit.c:1035 [inline]
 __se_sys_exit_group kernel/exit.c:1033 [inline]
 __x64_sys_exit_group+0x47/0x50 kernel/exit.c:1033
 do_syscall_x64 arch/x86/entry/common.c:50 [inline]
 do_syscall_64+0x3b/0x90 arch/x86/entry/common.c:80
 entry_SYSCALL_64_after_hwframe+0x72/0xdc
RIP: 0033:0x44de86
Code: Unable to access opcode bytes at 0x44de5c.
RSP: 002b:00007fff8410fbc8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
RAX: ffffffffffffffda RBX: 00000000004e5410 RCX: 000000000044de86
RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffffa8
R10: 0000000000411b40 R11: 0000000000000246 R12: 00000000004e5410
R13: 0000000000000001 R14: 0000000000000000 R15: 0000000000000001
 </TASK>
irq event stamp: 0
hardirqs last  enabled at (0): [<0000000000000000>] 0x0
hardirqs last disabled at (0): [<ffffffff8122d29a>] copy_process+0x256a/0x7650 kernel/fork.c:2448
softirqs last  enabled at (0): [<ffffffff8122d2e2>] copy_process+0x25b2/0x7650 kernel/fork.c:2452
softirqs last disabled at (0): [<0000000000000000>] 0x0
---[ end trace 0000000000000000 ]---
------------[ cut here ]------------
WARNING: CPU: 0 PID: 584 at drivers/iommu/iommufd/io_pagetable.c:1158 iopt_remove_access+0xb5/0xd0 drivers/iommu/iommufd/io_pagetable.c:1157
Modules linked in:
CPU: 0 PID: 584 Comm: syz-executor321 Tainted: G    B   W          6.4.0-rc6-5ca8bbe2b782+ #1
Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
RIP: 0010:iopt_remove_access+0xb5/0xd0 drivers/iommu/iommufd/io_pagetable.c:1157
Code: 45 85 e4 75 29 e8 4b 2d 0b fe 4c 89 ef e8 33 eb e8 fd 48 89 df e8 2b eb e8 fd 5b 41 5c 41 5d 5d c3 cc cc cc cc e8 2b 2d 0b fe <0f> 0b eb b9 e8 22 2d 0b fe 0f 0b eb ce e8 b9 1d 67 fe eb 90 0f 1f
RSP: 0018:ffff88800f0c7bb8 EFLAGS: 00010246
RAX: 0000000000000000 RBX: ffff8880114af0a8 RCX: 0000000000000000
RDX: 0000000000000000 RSI: ffff8880127f4a00 RDI: 0000000000000002
RBP: ffff88800f0c7bd0 R08: ffffed1002295e33 R09: ffffed1002295e33
R10: ffff8880114af193 R11: ffffed1002295e32 R12: ffff8880115d5800
R13: ffff8880114af1e8 R14: ffffffff835430e0 R15: ffff88800f0c7e68
FS:  0000000001a0a3c0(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
CR2: 0000000020000140 CR3: 0000000013f22000 CR4: 0000000000750ef0
PKRU: 55555554
Call Trace:
 <TASK>
 __iommufd_access_detach+0x1c2/0x2b0 drivers/iommu/iommufd/device.c:971
 iommufd_access_change_pt+0x149/0x270 drivers/iommu/iommufd/device.c:1006
 iommufd_access_replace+0xb4/0x120 drivers/iommu/iommufd/device.c:1042
 iommufd_test_access_replace_ioas drivers/iommu/iommufd/selftest.c:1025 [inline]
 iommufd_test+0x103d/0x3f00 drivers/iommu/iommufd/selftest.c:1252
 iommufd_fops_ioctl+0x37d/0x510 drivers/iommu/iommufd/main.c:378
 vfs_ioctl fs/ioctl.c:51 [inline]
 __do_sys_ioctl fs/ioctl.c:870 [inline]
 __se_sys_ioctl fs/ioctl.c:856 [inline]
 __x64_sys_ioctl+0x1a3/0x230 fs/ioctl.c:856
 do_syscall_x64 arch/x86/entry/common.c:50 [inline]
 do_syscall_64+0x3b/0x90 arch/x86/entry/common.c:80
 entry_SYSCALL_64_after_hwframe+0x72/0xdc
RIP: 0033:0x44ff3d
Code: db 48 89 d8 5b 5d 41 5c 41 5d 41 5e c3 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 c7 c1 a8 ff ff ff f7 d8 64 89 01 48
RSP: 002b:00007fff8410fc18 EFLAGS: 00000246 ORIG_RAX: 0000000000000010
RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 000000000044ff3d
RDX: 0000000020000000 RSI: 0000000000003ba0 RDI: 0000000000000003
RBP: 0000000000000001 R08: 0000000000411b40 R09: 0000000000411b40
R10: 0000000000411b40 R11: 0000000000000246 R12: 0000000000000001
R13: 0000000000000000 R14: 00000000004004e8 R15: 0000000000000000
 </TASK>
irq event stamp: 0
hardirqs last  enabled at (0): [<0000000000000000>] 0x0
hardirqs last disabled at (0): [<ffffffff8122d29a>] copy_process+0x256a/0x7650 kernel/fork.c:2448
softirqs last  enabled at (0): [<ffffffff8122d2e2>] copy_process+0x25b2/0x7650 kernel/fork.c:2452
softirqs last disabled at (0): [<0000000000000000>] 0x0
---[ end trace 0000000000000000 ]---
------------[ cut here ]------------
WARNING: CPU: 0 PID: 584 at drivers/iommu/iommufd/io_pagetable.c:1158 iopt_remove_access+0xb5/0xd0 drivers/iommu/iommufd/io_pagetable.c:1157
Modules linked in:
CPU: 0 PID: 584 Comm: syz-executor321 Tainted: G    B   W          6.4.0-rc6-5ca8bbe2b782+ #1
Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
RIP: 0010:iopt_remove_access+0xb5/0xd0 drivers/iommu/iommufd/io_pagetable.c:1157
Code: 45 85 e4 75 29 e8 4b 2d 0b fe 4c 89 ef e8 33 eb e8 fd 48 89 df e8 2b eb e8 fd 5b 41 5c 41 5d 5d c3 cc cc cc cc e8 2b 2d 0b fe <0f> 0b eb b9 e8 22 2d 0b fe 0f 0b eb ce e8 b9 1d 67 fe eb 90 0f 1f
RSP: 0018:ffff88800f0c7bd0 EFLAGS: 00010246
RAX: 0000000000000000 RBX: ffff8880114af0a8 RCX: 0000000000000000
RDX: 0000000000000000 RSI: ffff8880127f4a00 RDI: 0000000000000002
RBP: ffff88800f0c7be8 R08: ffffed1002295e33 R09: ffffed1002295e33
R10: ffff8880114af193 R11: ffffed1002295e32 R12: ffff888010330800
R13: ffff8880114af1e8 R14: ffff888010082300 R15: 0000000000000000
FS:  0000000000000000(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
CR2: 00000000004e5420 CR3: 000000000667e000 CR4: 0000000000750ef0
PKRU: 55555554
Call Trace:
 <TASK>
 iommufd_access_destroy_object+0x65/0x170 drivers/iommu/iommufd/device.c:875
 iommufd_object_destroy_user+0x18e/0x220 drivers/iommu/iommufd/main.c:163
 iommufd_access_destroy+0x43/0x70 drivers/iommu/iommufd/device.c:938
 iommufd_test_staccess_release+0x8d/0xd0 drivers/iommu/iommufd/selftest.c:918
 __fput+0x26d/0xa40 fs/file_table.c:321
 ____fput+0x1e/0x30 fs/file_table.c:349
 task_work_run+0x1a4/0x2d0 kernel/task_work.c:179
 exit_task_work include/linux/task_work.h:38 [inline]
 do_exit+0xaf3/0x2f60 kernel/exit.c:874
 do_group_exit+0xe0/0x2b0 kernel/exit.c:1024
 __do_sys_exit_group kernel/exit.c:1035 [inline]
 __se_sys_exit_group kernel/exit.c:1033 [inline]
 __x64_sys_exit_group+0x47/0x50 kernel/exit.c:1033
 do_syscall_x64 arch/x86/entry/common.c:50 [inline]
 do_syscall_64+0x3b/0x90 arch/x86/entry/common.c:80
 entry_SYSCALL_64_after_hwframe+0x72/0xdc
RIP: 0033:0x44de86
Code: Unable to access opcode bytes at 0x44de5c.
RSP: 002b:00007fff8410fbc8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
RAX: ffffffffffffffda RBX: 00000000004e5410 RCX: 000000000044de86
RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffffa8
R10: 0000000000411b40 R11: 0000000000000246 R12: 00000000004e5410
R13: 0000000000000001 R14: 0000000000000000 R15: 0000000000000001
 </TASK>
irq event stamp: 0
hardirqs last  enabled at (0): [<0000000000000000>] 0x0
hardirqs last disabled at (0): [<ffffffff8122d29a>] copy_process+0x256a/0x7650 kernel/fork.c:2448
softirqs last  enabled at (0): [<ffffffff8122d2e2>] copy_process+0x25b2/0x7650 kernel/fork.c:2452
softirqs last disabled at (0): [<0000000000000000>] 0x0
---[ end trace 0000000000000000 ]---
------------[ cut here ]------------
WARNING: CPU: 0 PID: 584 at drivers/iommu/iommufd/io_pagetable.c:663 iopt_destroy_table+0x15f/0x1b0 drivers/iommu/iommufd/io_pagetable.c:663
Modules linked in:
CPU: 0 PID: 584 Comm: syz-executor321 Tainted: G    B   W          6.4.0-rc6-5ca8bbe2b782+ #1
Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
RIP: 0010:iopt_destroy_table+0x15f/0x1b0 drivers/iommu/iommufd/io_pagetable.c:663
Code: 5b 41 5c 41 5d 41 5e 5d c3 cc cc cc cc e8 c9 53 0b fe 0f 0b e9 51 ff ff ff e8 bd 53 0b fe 0f 0b e9 76 ff ff ff e8 b1 53 0b fe <0f> 0b eb 9e e8 a8 53 0b fe 0f 0b e8 a1 53 0b fe 5b 41 5c 41 5d 41
RSP: 0018:ffff88800f0c7b78 EFLAGS: 00010246
RAX: 0000000000000000 RBX: 0000000000000000 RCX: 0000000000000000
RDX: 0000000000000000 RSI: ffff8880127f4a00 RDI: 0000000000000002
RBP: ffff88800f0c7b98 R08: ffffed1002295e3e R09: ffffed1002295e3e
R10: ffff8880114af1ef R11: ffffed1002295e3d R12: ffff8880114af290
R13: ffff8880114af0a8 R14: ffffffffffffffff R15: ffff88800f0c7c60
FS:  0000000000000000(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
CR2: 00000000004e5420 CR3: 000000000667e000 CR4: 0000000000750ef0
PKRU: 55555554
Call Trace:
 <TASK>
 iommufd_ioas_destroy+0x53/0x70 drivers/iommu/iommufd/ioas.c:19
 iommufd_fops_release+0x1f7/0x370 drivers/iommu/iommufd/main.c:231
 __fput+0x26d/0xa40 fs/file_table.c:321
 ____fput+0x1e/0x30 fs/file_table.c:349
 task_work_run+0x1a4/0x2d0 kernel/task_work.c:179
 exit_task_work include/linux/task_work.h:38 [inline]
 do_exit+0xaf3/0x2f60 kernel/exit.c:874
 do_group_exit+0xe0/0x2b0 kernel/exit.c:1024
 __do_sys_exit_group kernel/exit.c:1035 [inline]
 __se_sys_exit_group kernel/exit.c:1033 [inline]
 __x64_sys_exit_group+0x47/0x50 kernel/exit.c:1033
 do_syscall_x64 arch/x86/entry/common.c:50 [inline]
 do_syscall_64+0x3b/0x90 arch/x86/entry/common.c:80
 entry_SYSCALL_64_after_hwframe+0x72/0xdc
RIP: 0033:0x44de86
Code: Unable to access opcode bytes at 0x44de5c.
RSP: 002b:00007fff8410fbc8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
RAX: ffffffffffffffda RBX: 00000000004e5410 RCX: 000000000044de86
RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffffa8
R10: 0000000000411b40 R11: 0000000000000246 R12: 00000000004e5410
R13: 0000000000000001 R14: 0000000000000000 R15: 0000000000000001
 </TASK>
irq event stamp: 0
hardirqs last  enabled at (0): [<0000000000000000>] 0x0
hardirqs last disabled at (0): [<ffffffff8122d29a>] copy_process+0x256a/0x7650 kernel/fork.c:2448
softirqs last  enabled at (0): [<ffffffff8122d2e2>] copy_process+0x25b2/0x7650 kernel/fork.c:2452
softirqs last disabled at (0): [<0000000000000000>] 0x0
---[ end trace 0000000000000000 ]---
------------[ cut here ]------------
WARNING: CPU: 0 PID: 585 at drivers/iommu/iommufd/io_pagetable.c:1158 iopt_remove_access+0xb5/0xd0 drivers/iommu/iommufd/io_pagetable.c:1157
Modules linked in:
CPU: 0 PID: 585 Comm: syz-executor321 Tainted: G    B   W          6.4.0-rc6-5ca8bbe2b782+ #1
Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
RIP: 0010:iopt_remove_access+0xb5/0xd0 drivers/iommu/iommufd/io_pagetable.c:1157
Code: 45 85 e4 75 29 e8 4b 2d 0b fe 4c 89 ef e8 33 eb e8 fd 48 89 df e8 2b eb e8 fd 5b 41 5c 41 5d 5d c3 cc cc cc cc e8 2b 2d 0b fe <0f> 0b eb b9 e8 22 2d 0b fe 0f 0b eb ce e8 b9 1d 67 fe eb 90 0f 1f
RSP: 0018:ffff8880112e7bb8 EFLAGS: 00010246
RAX: 0000000000000000 RBX: ffff888022dff8a8 RCX: 0000000000000000
RDX: 0000000000000000 RSI: ffff88801535ca00 RDI: 0000000000000002
RBP: ffff8880112e7bd0 R08: ffffed10045bff33 R09: ffffed10045bff33
R10: ffff888022dff993 R11: ffffed10045bff32 R12: ffff888011778800
R13: ffff888022dff9e8 R14: ffffffff835430e0 R15: ffff8880112e7e68
FS:  0000000001a0a3c0(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
CR2: 0000000020000140 CR3: 00000000100b8000 CR4: 0000000000750ef0
PKRU: 55555554
Call Trace:
 <TASK>
 __iommufd_access_detach+0x1c2/0x2b0 drivers/iommu/iommufd/device.c:971
 iommufd_access_change_pt+0x149/0x270 drivers/iommu/iommufd/device.c:1006
 iommufd_access_replace+0xb4/0x120 drivers/iommu/iommufd/device.c:1042
 iommufd_test_access_replace_ioas drivers/iommu/iommufd/selftest.c:1025 [inline]
 iommufd_test+0x103d/0x3f00 drivers/iommu/iommufd/selftest.c:1252
 iommufd_fops_ioctl+0x37d/0x510 drivers/iommu/iommufd/main.c:378
 vfs_ioctl fs/ioctl.c:51 [inline]
 __do_sys_ioctl fs/ioctl.c:870 [inline]
 __se_sys_ioctl fs/ioctl.c:856 [inline]
 __x64_sys_ioctl+0x1a3/0x230 fs/ioctl.c:856
 do_syscall_x64 arch/x86/entry/common.c:50 [inline]
 do_syscall_64+0x3b/0x90 arch/x86/entry/common.c:80
 entry_SYSCALL_64_after_hwframe+0x72/0xdc
RIP: 0033:0x44ff3d
Code: db 48 89 d8 5b 5d 41 5c 41 5d 41 5e c3 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 c7 c1 a8 ff ff ff f7 d8 64 89 01 48
RSP: 002b:00007fff8410fc18 EFLAGS: 00000246 ORIG_RAX: 0000000000000010
RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 000000000044ff3d
RDX: 0000000020000000 RSI: 0000000000003ba0 RDI: 0000000000000003
RBP: 0000000000000001 R08: 0000000000411b40 R09: 0000000000411b40
R10: 0000000000411b40 R11: 0000000000000246 R12: 0000000000000001
R13: 0000000000000000 R14: 00000000004004e8 R15: 0000000000000000
 </TASK>
irq event stamp: 0
hardirqs last  enabled at (0): [<0000000000000000>] 0x0
hardirqs last disabled at (0): [<ffffffff8122d29a>] copy_process+0x256a/0x7650 kernel/fork.c:2448
softirqs last  enabled at (0): [<ffffffff8122d2e2>] copy_process+0x25b2/0x7650 kernel/fork.c:2452
softirqs last disabled at (0): [<0000000000000000>] 0x0
---[ end trace 0000000000000000 ]---
------------[ cut here ]------------
WARNING: CPU: 0 PID: 585 at drivers/iommu/iommufd/io_pagetable.c:1158 iopt_remove_access+0xb5/0xd0 drivers/iommu/iommufd/io_pagetable.c:1157
Modules linked in:
CPU: 0 PID: 585 Comm: syz-executor321 Tainted: G    B   W          6.4.0-rc6-5ca8bbe2b782+ #1
Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
RIP: 0010:iopt_remove_access+0xb5/0xd0 drivers/iommu/iommufd/io_pagetable.c:1157
Code: 45 85 e4 75 29 e8 4b 2d 0b fe 4c 89 ef e8 33 eb e8 fd 48 89 df e8 2b eb e8 fd 5b 41 5c 41 5d 5d c3 cc cc cc cc e8 2b 2d 0b fe <0f> 0b eb b9 e8 22 2d 0b fe 0f 0b eb ce e8 b9 1d 67 fe eb 90 0f 1f
RSP: 0018:ffff8880112e7bd0 EFLAGS: 00010246
RAX: 0000000000000000 RBX: ffff888022dff8a8 RCX: 0000000000000000
RDX: 0000000000000000 RSI: ffff88801535ca00 RDI: 0000000000000002
RBP: ffff8880112e7be8 R08: ffffed10045bff33 R09: ffffed10045bff33
R10: ffff888022dff993 R11: ffffed10045bff32 R12: ffff8880115d7400
R13: ffff888022dff9e8 R14: ffff888021123600 R15: 0000000000000000
FS:  0000000000000000(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
CR2: 00000000004e5420 CR3: 000000000667e000 CR4: 0000000000750ef0
PKRU: 55555554
Call Trace:
 <TASK>
 iommufd_access_destroy_object+0x65/0x170 drivers/iommu/iommufd/device.c:875
 iommufd_object_destroy_user+0x18e/0x220 drivers/iommu/iommufd/main.c:163
 iommufd_access_destroy+0x43/0x70 drivers/iommu/iommufd/device.c:938
 iommufd_test_staccess_release+0x8d/0xd0 drivers/iommu/iommufd/selftest.c:918
 __fput+0x26d/0xa40 fs/file_table.c:321
 ____fput+0x1e/0x30 fs/file_table.c:349
 task_work_run+0x1a4/0x2d0 kernel/task_work.c:179
 exit_task_work include/linux/task_work.h:38 [inline]
 do_exit+0xaf3/0x2f60 kernel/exit.c:874
 do_group_exit+0xe0/0x2b0 kernel/exit.c:1024
 __do_sys_exit_group kernel/exit.c:1035 [inline]
 __se_sys_exit_group kernel/exit.c:1033 [inline]
 __x64_sys_exit_group+0x47/0x50 kernel/exit.c:1033
 do_syscall_x64 arch/x86/entry/common.c:50 [inline]
 do_syscall_64+0x3b/0x90 arch/x86/entry/common.c:80
 entry_SYSCALL_64_after_hwframe+0x72/0xdc
RIP: 0033:0x44de86
Code: Unable to access opcode bytes at 0x44de5c.
RSP: 002b:00007fff8410fbc8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
RAX: ffffffffffffffda RBX: 00000000004e5410 RCX: 000000000044de86
RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffffa8
R10: 0000000000411b40 R11: 0000000000000246 R12: 00000000004e5410
R13: 0000000000000001 R14: 0000000000000000 R15: 0000000000000001
 </TASK>
irq event stamp: 0
hardirqs last  enabled at (0): [<0000000000000000>] 0x0
hardirqs last disabled at (0): [<ffffffff8122d29a>] copy_process+0x256a/0x7650 kernel/fork.c:2448
softirqs last  enabled at (0): [<ffffffff8122d2e2>] copy_process+0x25b2/0x7650 kernel/fork.c:2452
softirqs last disabled at (0): [<0000000000000000>] 0x0
---[ end trace 0000000000000000 ]---
------------[ cut here ]------------
WARNING: CPU: 0 PID: 585 at drivers/iommu/iommufd/io_pagetable.c:663 iopt_destroy_table+0x15f/0x1b0 drivers/iommu/iommufd/io_pagetable.c:663
Modules linked in:
CPU: 0 PID: 585 Comm: syz-executor321 Tainted: G    B   W          6.4.0-rc6-5ca8bbe2b782+ #1
Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
RIP: 0010:iopt_destroy_table+0x15f/0x1b0 drivers/iommu/iommufd/io_pagetable.c:663
Code: 5b 41 5c 41 5d 41 5e 5d c3 cc cc cc cc e8 c9 53 0b fe 0f 0b e9 51 ff ff ff e8 bd 53 0b fe 0f 0b e9 76 ff ff ff e8 b1 53 0b fe <0f> 0b eb 9e e8 a8 53 0b fe 0f 0b e8 a1 53 0b fe 5b 41 5c 41 5d 41
RSP: 0018:ffff8880112e7b78 EFLAGS: 00010246
RAX: 0000000000000000 RBX: 0000000000000000 RCX: 0000000000000000
RDX: 0000000000000000 RSI: ffff88801535ca00 RDI: 0000000000000002
RBP: ffff8880112e7b98 R08: ffffed10045bff3e R09: ffffed10045bff3e
R10: ffff888022dff9ef R11: ffffed10045bff3d R12: ffff888022dffa90
R13: ffff888022dff8a8 R14: ffffffffffffffff R15: ffff8880112e7c60
FS:  0000000000000000(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
CR2: 00000000004e5420 CR3: 000000000667e000 CR4: 0000000000750ef0
PKRU: 55555554
Call Trace:
 <TASK>
 iommufd_ioas_destroy+0x53/0x70 drivers/iommu/iommufd/ioas.c:19
 iommufd_fops_release+0x1f7/0x370 drivers/iommu/iommufd/main.c:231
 __fput+0x26d/0xa40 fs/file_table.c:321
 ____fput+0x1e/0x30 fs/file_table.c:349
 task_work_run+0x1a4/0x2d0 kernel/task_work.c:179
 exit_task_work include/linux/task_work.h:38 [inline]
 do_exit+0xaf3/0x2f60 kernel/exit.c:874
 do_group_exit+0xe0/0x2b0 kernel/exit.c:1024
 __do_sys_exit_group kernel/exit.c:1035 [inline]
 __se_sys_exit_group kernel/exit.c:1033 [inline]
 __x64_sys_exit_group+0x47/0x50 kernel/exit.c:1033
 do_syscall_x64 arch/x86/entry/common.c:50 [inline]
 do_syscall_64+0x3b/0x90 arch/x86/entry/common.c:80
 entry_SYSCALL_64_after_hwframe+0x72/0xdc
RIP: 0033:0x44de86
Code: Unable to access opcode bytes at 0x44de5c.
RSP: 002b:00007fff8410fbc8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
RAX: ffffffffffffffda RBX: 00000000004e5410 RCX: 000000000044de86
RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffffa8
R10: 0000000000411b40 R11: 0000000000000246 R12: 00000000004e5410
R13: 0000000000000001 R14: 0000000000000000 R15: 0000000000000001
 </TASK>
irq event stamp: 0
hardirqs last  enabled at (0): [<0000000000000000>] 0x0
hardirqs last disabled at (0): [<ffffffff8122d29a>] copy_process+0x256a/0x7650 kernel/fork.c:2448
softirqs last  enabled at (0): [<ffffffff8122d2e2>] copy_process+0x25b2/0x7650 kernel/fork.c:2452
softirqs last disabled at (0): [<0000000000000000>] 0x0
---[ end trace 0000000000000000 ]---
------------[ cut here ]------------
WARNING: CPU: 0 PID: 586 at drivers/iommu/iommufd/io_pagetable.c:1158 iopt_remove_access+0xb5/0xd0 drivers/iommu/iommufd/io_pagetable.c:1157
Modules linked in:
CPU: 0 PID: 586 Comm: syz-executor321 Tainted: G    B   W          6.4.0-rc6-5ca8bbe2b782+ #1
Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
RIP: 0010:iopt_remove_access+0xb5/0xd0 drivers/iommu/iommufd/io_pagetable.c:1157
Code: 45 85 e4 75 29 e8 4b 2d 0b fe 4c 89 ef e8 33 eb e8 fd 48 89 df e8 2b eb e8 fd 5b 41 5c 41 5d 5d c3 cc cc cc cc e8 2b 2d 0b fe <0f> 0b eb b9 e8 22 2d 0b fe 0f 0b eb ce e8 b9 1d 67 fe eb 90 0f 1f
RSP: 0018:ffff8880188d7bb8 EFLAGS: 00010246
RAX: 0000000000000000 RBX: ffff888021dcd8a8 RCX: 0000000000000000
RDX: 0000000000000000 RSI: ffff888015358000 RDI: 0000000000000002
RBP: ffff8880188d7bd0 R08: ffffed10043b9b33 R09: ffffed10043b9b33
R10: ffff888021dcd993 R11: ffffed10043b9b32 R12: ffff88801685b800
R13: ffff888021dcd9e8 R14: ffffffff835430e0 R15: ffff8880188d7e68
FS:  0000000001a0a3c0(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
CR2: 0000000020000140 CR3: 000000001a2f0000 CR4: 0000000000750ef0
PKRU: 55555554
Call Trace:
 <TASK>
 __iommufd_access_detach+0x1c2/0x2b0 drivers/iommu/iommufd/device.c:971
 iommufd_access_change_pt+0x149/0x270 drivers/iommu/iommufd/device.c:1006
 iommufd_access_replace+0xb4/0x120 drivers/iommu/iommufd/device.c:1042
 iommufd_test_access_replace_ioas drivers/iommu/iommufd/selftest.c:1025 [inline]
 iommufd_test+0x103d/0x3f00 drivers/iommu/iommufd/selftest.c:1252
 iommufd_fops_ioctl+0x37d/0x510 drivers/iommu/iommufd/main.c:378
 vfs_ioctl fs/ioctl.c:51 [inline]
 __do_sys_ioctl fs/ioctl.c:870 [inline]
 __se_sys_ioctl fs/ioctl.c:856 [inline]
 __x64_sys_ioctl+0x1a3/0x230 fs/ioctl.c:856
 do_syscall_x64 arch/x86/entry/common.c:50 [inline]
 do_syscall_64+0x3b/0x90 arch/x86/entry/common.c:80
 entry_SYSCALL_64_after_hwframe+0x72/0xdc
RIP: 0033:0x44ff3d
Code: db 48 89 d8 5b 5d 41 5c 41 5d 41 5e c3 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 c7 c1 a8 ff ff ff f7 d8 64 89 01 48
RSP: 002b:00007fff8410fc18 EFLAGS: 00000246 ORIG_RAX: 0000000000000010
RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 000000000044ff3d
RDX: 0000000020000000 RSI: 0000000000003ba0 RDI: 0000000000000003
RBP: 0000000000000001 R08: 0000000000411b40 R09: 0000000000411b40
R10: 0000000000411b40 R11: 0000000000000246 R12: 0000000000000001
R13: 0000000000000000 R14: 00000000004004e8 R15: 0000000000000000
 </TASK>
irq event stamp: 0
hardirqs last  enabled at (0): [<0000000000000000>] 0x0
hardirqs last disabled at (0): [<ffffffff8122d29a>] copy_process+0x256a/0x7650 kernel/fork.c:2448
softirqs last  enabled at (0): [<ffffffff8122d2e2>] copy_process+0x25b2/0x7650 kernel/fork.c:2452
softirqs last disabled at (0): [<0000000000000000>] 0x0
---[ end trace 0000000000000000 ]---
------------[ cut here ]------------
WARNING: CPU: 0 PID: 586 at drivers/iommu/iommufd/io_pagetable.c:1158 iopt_remove_access+0xb5/0xd0 drivers/iommu/iommufd/io_pagetable.c:1157
Modules linked in:
CPU: 0 PID: 586 Comm: syz-executor321 Tainted: G    B   W          6.4.0-rc6-5ca8bbe2b782+ #1
Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
RIP: 0010:iopt_remove_access+0xb5/0xd0 drivers/iommu/iommufd/io_pagetable.c:1157
Code: 45 85 e4 75 29 e8 4b 2d 0b fe 4c 89 ef e8 33 eb e8 fd 48 89 df e8 2b eb e8 fd 5b 41 5c 41 5d 5d c3 cc cc cc cc e8 2b 2d 0b fe <0f> 0b eb b9 e8 22 2d 0b fe 0f 0b eb ce e8 b9 1d 67 fe eb 90 0f 1f
RSP: 0018:ffff8880188d7bd0 EFLAGS: 00010246
RAX: 0000000000000000 RBX: ffff888021dcd8a8 RCX: 0000000000000000
RDX: 0000000000000000 RSI: ffff888015358000 RDI: 0000000000000002
RBP: ffff8880188d7be8 R08: ffffed10043b9b33 R09: ffffed10043b9b33
R10: ffff888021dcd993 R11: ffffed10043b9b32 R12: ffff888011778000
R13: ffff888021dcd9e8 R14: ffff888013dcd700 R15: 0000000000000000
FS:  0000000000000000(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
CR2: 00000000004e5420 CR3: 000000000667e000 CR4: 0000000000750ef0
PKRU: 55555554
Call Trace:
 <TASK>
 iommufd_access_destroy_object+0x65/0x170 drivers/iommu/iommufd/device.c:875
 iommufd_object_destroy_user+0x18e/0x220 drivers/iommu/iommufd/main.c:163
 iommufd_access_destroy+0x43/0x70 drivers/iommu/iommufd/device.c:938
 iommufd_test_staccess_release+0x8d/0xd0 drivers/iommu/iommufd/selftest.c:918
 __fput+0x26d/0xa40 fs/file_table.c:321
 ____fput+0x1e/0x30 fs/file_table.c:349
 task_work_run+0x1a4/0x2d0 kernel/task_work.c:179
 exit_task_work include/linux/task_work.h:38 [inline]
 do_exit+0xaf3/0x2f60 kernel/exit.c:874
 do_group_exit+0xe0/0x2b0 kernel/exit.c:1024
 __do_sys_exit_group kernel/exit.c:1035 [inline]
 __se_sys_exit_group kernel/exit.c:1033 [inline]
 __x64_sys_exit_group+0x47/0x50 kernel/exit.c:1033
 do_syscall_x64 arch/x86/entry/common.c:50 [inline]
 do_syscall_64+0x3b/0x90 arch/x86/entry/common.c:80
 entry_SYSCALL_64_after_hwframe+0x72/0xdc
RIP: 0033:0x44de86
Code: Unable to access opcode bytes at 0x44de5c.
RSP: 002b:00007fff8410fbc8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
RAX: ffffffffffffffda RBX: 00000000004e5410 RCX: 000000000044de86
RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffffa8
R10: 0000000000411b40 R11: 0000000000000246 R12: 00000000004e5410
R13: 0000000000000001 R14: 0000000000000000 R15: 0000000000000001
 </TASK>
irq event stamp: 0
hardirqs last  enabled at (0): [<0000000000000000>] 0x0
hardirqs last disabled at (0): [<ffffffff8122d29a>] copy_process+0x256a/0x7650 kernel/fork.c:2448
softirqs last  enabled at (0): [<ffffffff8122d2e2>] copy_process+0x25b2/0x7650 kernel/fork.c:2452
softirqs last disabled at (0): [<0000000000000000>] 0x0
---[ end trace 0000000000000000 ]---
------------[ cut here ]------------
WARNING: CPU: 0 PID: 586 at drivers/iommu/iommufd/io_pagetable.c:663 iopt_destroy_table+0x15f/0x1b0 drivers/iommu/iommufd/io_pagetable.c:663
Modules linked in:
CPU: 0 PID: 586 Comm: syz-executor321 Tainted: G    B   W          6.4.0-rc6-5ca8bbe2b782+ #1
Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
RIP: 0010:iopt_destroy_table+0x15f/0x1b0 drivers/iommu/iommufd/io_pagetable.c:663
Code: 5b 41 5c 41 5d 41 5e 5d c3 cc cc cc cc e8 c9 53 0b fe 0f 0b e9 51 ff ff ff e8 bd 53 0b fe 0f 0b e9 76 ff ff ff e8 b1 53 0b fe <0f> 0b eb 9e e8 a8 53 0b fe 0f 0b e8 a1 53 0b fe 5b 41 5c 41 5d 41
RSP: 0018:ffff8880188d7b78 EFLAGS: 00010246
RAX: 0000000000000000 RBX: 0000000000000000 RCX: 0000000000000000
RDX: 0000000000000000 RSI: ffff888015358000 RDI: 0000000000000002
RBP: ffff8880188d7b98 R08: ffffed10043b9b3e R09: ffffed10043b9b3e
R10: ffff888021dcd9ef R11: ffffed10043b9b3d R12: ffff888021dcda90
R13: ffff888021dcd8a8 R14: ffffffffffffffff R15: ffff8880188d7c60
FS:  0000000000000000(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
CR2: 00000000004e5420 CR3: 000000000667e000 CR4: 0000000000750ef0
PKRU: 55555554
Call Trace:
 <TASK>
 iommufd_ioas_destroy+0x53/0x70 drivers/iommu/iommufd/ioas.c:19
 iommufd_fops_release+0x1f7/0x370 drivers/iommu/iommufd/main.c:231
 __fput+0x26d/0xa40 fs/file_table.c:321
 ____fput+0x1e/0x30 fs/file_table.c:349
 task_work_run+0x1a4/0x2d0 kernel/task_work.c:179
 exit_task_work include/linux/task_work.h:38 [inline]
 do_exit+0xaf3/0x2f60 kernel/exit.c:874
 do_group_exit+0xe0/0x2b0 kernel/exit.c:1024
 __do_sys_exit_group kernel/exit.c:1035 [inline]
 __se_sys_exit_group kernel/exit.c:1033 [inline]
 __x64_sys_exit_group+0x47/0x50 kernel/exit.c:1033
 do_syscall_x64 arch/x86/entry/common.c:50 [inline]
 do_syscall_64+0x3b/0x90 arch/x86/entry/common.c:80
 entry_SYSCALL_64_after_hwframe+0x72/0xdc
RIP: 0033:0x44de86
Code: Unable to access opcode bytes at 0x44de5c.
RSP: 002b:00007fff8410fbc8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
RAX: ffffffffffffffda RBX: 00000000004e5410 RCX: 000000000044de86
RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffffa8
R10: 0000000000411b40 R11: 0000000000000246 R12: 00000000004e5410
R13: 0000000000000001 R14: 0000000000000000 R15: 0000000000000001
 </TASK>
irq event stamp: 0
hardirqs last  enabled at (0): [<0000000000000000>] 0x0
hardirqs last disabled at (0): [<ffffffff8122d29a>] copy_process+0x256a/0x7650 kernel/fork.c:2448
softirqs last  enabled at (0): [<ffffffff8122d2e2>] copy_process+0x25b2/0x7650 kernel/fork.c:2452
softirqs last disabled at (0): [<0000000000000000>] 0x0
---[ end trace 0000000000000000 ]---
------------[ cut here ]------------
WARNING: CPU: 0 PID: 587 at drivers/iommu/iommufd/io_pagetable.c:1158 iopt_remove_access+0xb5/0xd0 drivers/iommu/iommufd/io_pagetable.c:1157
Modules linked in:
CPU: 0 PID: 587 Comm: syz-executor321 Tainted: G    B   W          6.4.0-rc6-5ca8bbe2b782+ #1
Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
RIP: 0010:iopt_remove_access+0xb5/0xd0 drivers/iommu/iommufd/io_pagetable.c:1157
Code: 45 85 e4 75 29 e8 4b 2d 0b fe 4c 89 ef e8 33 eb e8 fd 48 89 df e8 2b eb e8 fd 5b 41 5c 41 5d 5d c3 cc cc cc cc e8 2b 2d 0b fe <0f> 0b eb b9 e8 22 2d 0b fe 0f 0b eb ce e8 b9 1d 67 fe eb 90 0f 1f
RSP: 0018:ffff888012fffbb8 EFLAGS: 00010246
RAX: 0000000000000000 RBX: ffff888013ce38a8 RCX: 0000000000000000
RDX: 0000000000000000 RSI: ffff8880167b8000 RDI: 0000000000000002
RBP: ffff888012fffbd0 R08: ffffed100279c733 R09: ffffed100279c733
R10: ffff888013ce3993 R11: ffffed100279c732 R12: ffff888019d55800
R13: ffff888013ce39e8 R14: ffffffff835430e0 R15: ffff888012fffe68
FS:  0000000001a0a3c0(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
CR2: 0000000020000140 CR3: 0000000014bb4000 CR4: 0000000000750ef0
PKRU: 55555554
Call Trace:
 <TASK>
 __iommufd_access_detach+0x1c2/0x2b0 drivers/iommu/iommufd/device.c:971
 iommufd_access_change_pt+0x149/0x270 drivers/iommu/iommufd/device.c:1006
 iommufd_access_replace+0xb4/0x120 drivers/iommu/iommufd/device.c:1042
 iommufd_test_access_replace_ioas drivers/iommu/iommufd/selftest.c:1025 [inline]
 iommufd_test+0x103d/0x3f00 drivers/iommu/iommufd/selftest.c:1252
 iommufd_fops_ioctl+0x37d/0x510 drivers/iommu/iommufd/main.c:378
 vfs_ioctl fs/ioctl.c:51 [inline]
 __do_sys_ioctl fs/ioctl.c:870 [inline]
 __se_sys_ioctl fs/ioctl.c:856 [inline]
 __x64_sys_ioctl+0x1a3/0x230 fs/ioctl.c:856
 do_syscall_x64 arch/x86/entry/common.c:50 [inline]
 do_syscall_64+0x3b/0x90 arch/x86/entry/common.c:80
 entry_SYSCALL_64_after_hwframe+0x72/0xdc
RIP: 0033:0x44ff3d
Code: db 48 89 d8 5b 5d 41 5c 41 5d 41 5e c3 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 c7 c1 a8 ff ff ff f7 d8 64 89 01 48
RSP: 002b:00007fff8410fc18 EFLAGS: 00000246 ORIG_RAX: 0000000000000010
RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 000000000044ff3d
RDX: 0000000020000000 RSI: 0000000000003ba0 RDI: 0000000000000003
RBP: 0000000000000001 R08: 0000000000411b40 R09: 0000000000411b40
R10: 0000000000411b40 R11: 0000000000000246 R12: 0000000000000001
R13: 0000000000000000 R14: 00000000004004e8 R15: 0000000000000000
 </TASK>
irq event stamp: 0
hardirqs last  enabled at (0): [<0000000000000000>] 0x0
hardirqs last disabled at (0): [<ffffffff8122d29a>] copy_process+0x256a/0x7650 kernel/fork.c:2448
softirqs last  enabled at (0): [<ffffffff8122d2e2>] copy_process+0x25b2/0x7650 kernel/fork.c:2452
softirqs last disabled at (0): [<0000000000000000>] 0x0
---[ end trace 0000000000000000 ]---
------------[ cut here ]------------
WARNING: CPU: 0 PID: 587 at drivers/iommu/iommufd/io_pagetable.c:1158 iopt_remove_access+0xb5/0xd0 drivers/iommu/iommufd/io_pagetable.c:1157
Modules linked in:
CPU: 0 PID: 587 Comm: syz-executor321 Tainted: G    B   W          6.4.0-rc6-5ca8bbe2b782+ #1
Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
RIP: 0010:iopt_remove_access+0xb5/0xd0 drivers/iommu/iommufd/io_pagetable.c:1157
Code: 45 85 e4 75 29 e8 4b 2d 0b fe 4c 89 ef e8 33 eb e8 fd 48 89 df e8 2b eb e8 fd 5b 41 5c 41 5d 5d c3 cc cc cc cc e8 2b 2d 0b fe <0f> 0b eb b9 e8 22 2d 0b fe 0f 0b eb ce e8 b9 1d 67 fe eb 90 0f 1f
RSP: 0018:ffff888012fffbd0 EFLAGS: 00010246
RAX: 0000000000000000 RBX: ffff888013ce38a8 RCX: 0000000000000000
RDX: 0000000000000000 RSI: ffff8880167b8000 RDI: 0000000000000002
RBP: ffff888012fffbe8 R08: ffffed100279c733 R09: ffffed100279c733
R10: ffff888013ce3993 R11: ffffed100279c732 R12: ffff888016858000
R13: ffff888013ce39e8 R14: ffff888011386900 R15: 0000000000000000
FS:  0000000000000000(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
CR2: 00000000004e5420 CR3: 000000000667e000 CR4: 0000000000750ef0
PKRU: 55555554
Call Trace:
 <TASK>
 iommufd_access_destroy_object+0x65/0x170 drivers/iommu/iommufd/device.c:875
 iommufd_object_destroy_user+0x18e/0x220 drivers/iommu/iommufd/main.c:163
 iommufd_access_destroy+0x43/0x70 drivers/iommu/iommufd/device.c:938
 iommufd_test_staccess_release+0x8d/0xd0 drivers/iommu/iommufd/selftest.c:918
 __fput+0x26d/0xa40 fs/file_table.c:321
 ____fput+0x1e/0x30 fs/file_table.c:349
 task_work_run+0x1a4/0x2d0 kernel/task_work.c:179
 exit_task_work include/linux/task_work.h:38 [inline]
 do_exit+0xaf3/0x2f60 kernel/exit.c:874
 do_group_exit+0xe0/0x2b0 kernel/exit.c:1024
 __do_sys_exit_group kernel/exit.c:1035 [inline]
 __se_sys_exit_group kernel/exit.c:1033 [inline]
 __x64_sys_exit_group+0x47/0x50 kernel/exit.c:1033
 do_syscall_x64 arch/x86/entry/common.c:50 [inline]
 do_syscall_64+0x3b/0x90 arch/x86/entry/common.c:80
 entry_SYSCALL_64_after_hwframe+0x72/0xdc
RIP: 0033:0x44de86
Code: Unable to access opcode bytes at 0x44de5c.
RSP: 002b:00007fff8410fbc8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
RAX: ffffffffffffffda RBX: 00000000004e5410 RCX: 000000000044de86
RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffffa8
R10: 0000000000411b40 R11: 0000000000000246 R12: 00000000004e5410
R13: 0000000000000001 R14: 0000000000000000 R15: 0000000000000001
 </TASK>
irq event stamp: 0
hardirqs last  enabled at (0): [<0000000000000000>] 0x0
hardirqs last disabled at (0): [<ffffffff8122d29a>] copy_process+0x256a/0x7650 kernel/fork.c:2448
softirqs last  enabled at (0): [<ffffffff8122d2e2>] copy_process+0x25b2/0x7650 kernel/fork.c:2452
softirqs last disabled at (0): [<0000000000000000>] 0x0
---[ end trace 0000000000000000 ]---
------------[ cut here ]------------
WARNING: CPU: 0 PID: 587 at drivers/iommu/iommufd/io_pagetable.c:663 iopt_destroy_table+0x15f/0x1b0 drivers/iommu/iommufd/io_pagetable.c:663
Modules linked in:
CPU: 0 PID: 587 Comm: syz-executor321 Tainted: G    B   W          6.4.0-rc6-5ca8bbe2b782+ #1
Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
RIP: 0010:iopt_destroy_table+0x15f/0x1b0 drivers/iommu/iommufd/io_pagetable.c:663
Code: 5b 41 5c 41 5d 41 5e 5d c3 cc cc cc cc e8 c9 53 0b fe 0f 0b e9 51 ff ff ff e8 bd 53 0b fe 0f 0b e9 76 ff ff ff e8 b1 53 0b fe <0f> 0b eb 9e e8 a8 53 0b fe 0f 0b e8 a1 53 0b fe 5b 41 5c 41 5d 41
RSP: 0018:ffff888012fffb78 EFLAGS: 00010246
RAX: 0000000000000000 RBX: 0000000000000000 RCX: 0000000000000000
RDX: 0000000000000000 RSI: ffff8880167b8000 RDI: 0000000000000002
RBP: ffff888012fffb98 R08: ffffed100279c73e R09: ffffed100279c73e
R10: ffff888013ce39ef R11: ffffed100279c73d R12: ffff888013ce3a90
R13: ffff888013ce38a8 R14: ffffffffffffffff R15: ffff888012fffc60
FS:  0000000000000000(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
CR2: 00007f97c08da008 CR3: 0000000014616000 CR4: 0000000000750ef0
PKRU: 55555554
Call Trace:
 <TASK>
 iommufd_ioas_destroy+0x53/0x70 drivers/iommu/iommufd/ioas.c:19
 iommufd_fops_release+0x1f7/0x370 drivers/iommu/iommufd/main.c:231
 __fput+0x26d/0xa40 fs/file_table.c:321
 ____fput+0x1e/0x30 fs/file_table.c:349
 task_work_run+0x1a4/0x2d0 kernel/task_work.c:179
 exit_task_work include/linux/task_work.h:38 [inline]
 do_exit+0xaf3/0x2f60 kernel/exit.c:874
 do_group_exit+0xe0/0x2b0 kernel/exit.c:1024
 __do_sys_exit_group kernel/exit.c:1035 [inline]
 __se_sys_exit_group kernel/exit.c:1033 [inline]
 __x64_sys_exit_group+0x47/0x50 kernel/exit.c:1033
 do_syscall_x64 arch/x86/entry/common.c:50 [inline]
 do_syscall_64+0x3b/0x90 arch/x86/entry/common.c:80
 entry_SYSCALL_64_after_hwframe+0x72/0xdc
RIP: 0033:0x44de86
Code: Unable to access opcode bytes at 0x44de5c.
RSP: 002b:00007fff8410fbc8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
RAX: ffffffffffffffda RBX: 00000000004e5410 RCX: 000000000044de86
RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffffa8
R10: 0000000000411b40 R11: 0000000000000246 R12: 00000000004e5410
R13: 0000000000000001 R14: 0000000000000000 R15: 0000000000000001
 </TASK>
irq event stamp: 0
hardirqs last  enabled at (0): [<0000000000000000>] 0x0
hardirqs last disabled at (0): [<ffffffff8122d29a>] copy_process+0x256a/0x7650 kernel/fork.c:2448
softirqs last  enabled at (0): [<ffffffff8122d2e2>] copy_process+0x25b2/0x7650 kernel/fork.c:2452
softirqs last disabled at (0): [<0000000000000000>] 0x0
---[ end trace 0000000000000000 ]---
------------[ cut here ]------------
WARNING: CPU: 0 PID: 588 at drivers/iommu/iommufd/io_pagetable.c:1158 iopt_remove_access+0xb5/0xd0 drivers/iommu/iommufd/io_pagetable.c:1157
Modules linked in:
CPU: 0 PID: 588 Comm: syz-executor321 Tainted: G    B   W          6.4.0-rc6-5ca8bbe2b782+ #1
Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
RIP: 0010:iopt_remove_access+0xb5/0xd0 drivers/iommu/iommufd/io_pagetable.c:1157
Code: 45 85 e4 75 29 e8 4b 2d 0b fe 4c 89 ef e8 33 eb e8 fd 48 89 df e8 2b eb e8 fd 5b 41 5c 41 5d 5d c3 cc cc cc cc e8 2b 2d 0b fe <0f> 0b eb b9 e8 22 2d 0b fe 0f 0b eb ce e8 b9 1d 67 fe eb 90 0f 1f
RSP: 0018:ffff888016537bb8 EFLAGS: 00010246
RAX: 0000000000000000 RBX: ffff888011ac70a8 RCX: 0000000000000000
RDX: 0000000000000000 RSI: ffff8880167ba500 RDI: 0000000000000002
RBP: ffff888016537bd0 R08: ffffed1002358e33 R09: ffffed1002358e33
R10: ffff888011ac7193 R11: ffffed1002358e32 R12: ffff88801177a400
R13: ffff888011ac71e8 R14: ffffffff835430e0 R15: ffff888016537e68
FS:  0000000001a0a3c0(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
CR2: 0000000020000140 CR3: 00000000158a0000 CR4: 0000000000750ef0
PKRU: 55555554
Call Trace:
 <TASK>
 __iommufd_access_detach+0x1c2/0x2b0 drivers/iommu/iommufd/device.c:971
 iommufd_access_change_pt+0x149/0x270 drivers/iommu/iommufd/device.c:1006
 iommufd_access_replace+0xb4/0x120 drivers/iommu/iommufd/device.c:1042
 iommufd_test_access_replace_ioas drivers/iommu/iommufd/selftest.c:1025 [inline]
 iommufd_test+0x103d/0x3f00 drivers/iommu/iommufd/selftest.c:1252
 iommufd_fops_ioctl+0x37d/0x510 drivers/iommu/iommufd/main.c:378
 vfs_ioctl fs/ioctl.c:51 [inline]
 __do_sys_ioctl fs/ioctl.c:870 [inline]
 __se_sys_ioctl fs/ioctl.c:856 [inline]
 __x64_sys_ioctl+0x1a3/0x230 fs/ioctl.c:856
 do_syscall_x64 arch/x86/entry/common.c:50 [inline]
 do_syscall_64+0x3b/0x90 arch/x86/entry/common.c:80
 entry_SYSCALL_64_after_hwframe+0x72/0xdc
RIP: 0033:0x44ff3d
Code: db 48 89 d8 5b 5d 41 5c 41 5d 41 5e c3 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 c7 c1 a8 ff ff ff f7 d8 64 89 01 48
RSP: 002b:00007fff8410fc18 EFLAGS: 00000246 ORIG_RAX: 0000000000000010
RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 000000000044ff3d
RDX: 0000000020000000 RSI: 0000000000003ba0 RDI: 0000000000000003
RBP: 0000000000000001 R08: 0000000000411b40 R09: 0000000000411b40
R10: 0000000000411b40 R11: 0000000000000246 R12: 0000000000000001
R13: 0000000000000000 R14: 00000000004004e8 R15: 0000000000000000
 </TASK>
irq event stamp: 0
hardirqs last  enabled at (0): [<0000000000000000>] 0x0
hardirqs last disabled at (0): [<ffffffff8122d29a>] copy_process+0x256a/0x7650 kernel/fork.c:2448
softirqs last  enabled at (0): [<ffffffff8122d2e2>] copy_process+0x25b2/0x7650 kernel/fork.c:2452
softirqs last disabled at (0): [<0000000000000000>] 0x0
---[ end trace 0000000000000000 ]---
------------[ cut here ]------------
WARNING: CPU: 0 PID: 588 at drivers/iommu/iommufd/io_pagetable.c:1158 iopt_remove_access+0xb5/0xd0 drivers/iommu/iommufd/io_pagetable.c:1157
Modules linked in:
CPU: 0 PID: 588 Comm: syz-executor321 Tainted: G    B   W          6.4.0-rc6-5ca8bbe2b782+ #1
Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
RIP: 0010:iopt_remove_access+0xb5/0xd0 drivers/iommu/iommufd/io_pagetable.c:1157
Code: 45 85 e4 75 29 e8 4b 2d 0b fe 4c 89 ef e8 33 eb e8 fd 48 89 df e8 2b eb e8 fd 5b 41 5c 41 5d 5d c3 cc cc cc cc e8 2b 2d 0b fe <0f> 0b eb b9 e8 22 2d 0b fe 0f 0b eb ce e8 b9 1d 67 fe eb 90 0f 1f
RSP: 0018:ffff888016537bd0 EFLAGS: 00010246
RAX: 0000000000000000 RBX: ffff888011ac70a8 RCX: 0000000000000000
RDX: 0000000000000000 RSI: ffff8880167ba500 RDI: 0000000000000002
RBP: ffff888016537be8 R08: ffffed1002358e33 R09: ffffed1002358e33
R10: ffff888011ac7193 R11: ffffed1002358e32 R12: ffff888019d54400
R13: ffff888011ac71e8 R14: ffff88800ed50c00 R15: 0000000000000000
FS:  0000000000000000(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
CR2: 00000000004e5420 CR3: 000000000667e000 CR4: 0000000000750ef0
PKRU: 55555554
Call Trace:
 <TASK>
 iommufd_access_destroy_object+0x65/0x170 drivers/iommu/iommufd/device.c:875
 iommufd_object_destroy_user+0x18e/0x220 drivers/iommu/iommufd/main.c:163
 iommufd_access_destroy+0x43/0x70 drivers/iommu/iommufd/device.c:938
 iommufd_test_staccess_release+0x8d/0xd0 drivers/iommu/iommufd/selftest.c:918
 __fput+0x26d/0xa40 fs/file_table.c:321
 ____fput+0x1e/0x30 fs/file_table.c:349
 task_work_run+0x1a4/0x2d0 kernel/task_work.c:179
 exit_task_work include/linux/task_work.h:38 [inline]
 do_exit+0xaf3/0x2f60 kernel/exit.c:874
 do_group_exit+0xe0/0x2b0 kernel/exit.c:1024
 __do_sys_exit_group kernel/exit.c:1035 [inline]
 __se_sys_exit_group kernel/exit.c:1033 [inline]
 __x64_sys_exit_group+0x47/0x50 kernel/exit.c:1033
 do_syscall_x64 arch/x86/entry/common.c:50 [inline]
 do_syscall_64+0x3b/0x90 arch/x86/entry/common.c:80
 entry_SYSCALL_64_after_hwframe+0x72/0xdc
RIP: 0033:0x44de86
Code: Unable to access opcode bytes at 0x44de5c.
RSP: 002b:00007fff8410fbc8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
RAX: ffffffffffffffda RBX: 00000000004e5410 RCX: 000000000044de86
RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffffa8
R10: 0000000000411b40 R11: 0000000000000246 R12: 00000000004e5410
R13: 0000000000000001 R14: 0000000000000000 R15: 0000000000000001
 </TASK>
irq event stamp: 0
hardirqs last  enabled at (0): [<0000000000000000>] 0x0
hardirqs last disabled at (0): [<ffffffff8122d29a>] copy_process+0x256a/0x7650 kernel/fork.c:2448
softirqs last  enabled at (0): [<ffffffff8122d2e2>] copy_process+0x25b2/0x7650 kernel/fork.c:2452
softirqs last disabled at (0): [<0000000000000000>] 0x0
---[ end trace 0000000000000000 ]---
------------[ cut here ]------------
WARNING: CPU: 0 PID: 588 at drivers/iommu/iommufd/io_pagetable.c:663 iopt_destroy_table+0x15f/0x1b0 drivers/iommu/iommufd/io_pagetable.c:663
Modules linked in:
CPU: 0 PID: 588 Comm: syz-executor321 Tainted: G    B   W          6.4.0-rc6-5ca8bbe2b782+ #1
Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
RIP: 0010:iopt_destroy_table+0x15f/0x1b0 drivers/iommu/iommufd/io_pagetable.c:663
Code: 5b 41 5c 41 5d 41 5e 5d c3 cc cc cc cc e8 c9 53 0b fe 0f 0b e9 51 ff ff ff e8 bd 53 0b fe 0f 0b e9 76 ff ff ff e8 b1 53 0b fe <0f> 0b eb 9e e8 a8 53 0b fe 0f 0b e8 a1 53 0b fe 5b 41 5c 41 5d 41
RSP: 0018:ffff888016537b78 EFLAGS: 00010246
RAX: 0000000000000000 RBX: 0000000000000000 RCX: 0000000000000000
RDX: 0000000000000000 RSI: ffff8880167ba500 RDI: 0000000000000002
RBP: ffff888016537b98 R08: ffffed1002358e3e R09: ffffed1002358e3e
R10: ffff888011ac71ef R11: ffffed1002358e3d R12: ffff888011ac7290
R13: ffff888011ac70a8 R14: ffffffffffffffff R15: ffff888016537c60
FS:  0000000000000000(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
CR2: 00000000004e5420 CR3: 000000000667e000 CR4: 0000000000750ef0
PKRU: 55555554
Call Trace:
 <TASK>
 iommufd_ioas_destroy+0x53/0x70 drivers/iommu/iommufd/ioas.c:19
 iommufd_fops_release+0x1f7/0x370 drivers/iommu/iommufd/main.c:231
 __fput+0x26d/0xa40 fs/file_table.c:321
 ____fput+0x1e/0x30 fs/file_table.c:349
 task_work_run+0x1a4/0x2d0 kernel/task_work.c:179
 exit_task_work include/linux/task_work.h:38 [inline]
 do_exit+0xaf3/0x2f60 kernel/exit.c:874
 do_group_exit+0xe0/0x2b0 kernel/exit.c:1024
 __do_sys_exit_group kernel/exit.c:1035 [inline]
 __se_sys_exit_group kernel/exit.c:1033 [inline]
 __x64_sys_exit_group+0x47/0x50 kernel/exit.c:1033
 do_syscall_x64 arch/x86/entry/common.c:50 [inline]
 do_syscall_64+0x3b/0x90 arch/x86/entry/common.c:80
 entry_SYSCALL_64_after_hwframe+0x72/0xdc
RIP: 0033:0x44de86
Code: Unable to access opcode bytes at 0x44de5c.
RSP: 002b:00007fff8410fbc8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
RAX: ffffffffffffffda RBX: 00000000004e5410 RCX: 000000000044de86
RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffffa8
R10: 0000000000411b40 R11: 0000000000000246 R12: 00000000004e5410
R13: 0000000000000001 R14: 0000000000000000 R15: 0000000000000001
 </TASK>
irq event stamp: 0
hardirqs last  enabled at (0): [<0000000000000000>] 0x0
hardirqs last disabled at (0): [<ffffffff8122d29a>] copy_process+0x256a/0x7650 kernel/fork.c:2448
softirqs last  enabled at (0): [<ffffffff8122d2e2>] copy_process+0x25b2/0x7650 kernel/fork.c:2452
softirqs last disabled at (0): [<0000000000000000>] 0x0
---[ end trace 0000000000000000 ]---
------------[ cut here ]------------
WARNING: CPU: 0 PID: 589 at drivers/iommu/iommufd/io_pagetable.c:1158 iopt_remove_access+0xb5/0xd0 drivers/iommu/iommufd/io_pagetable.c:1157
Modules linked in:
CPU: 0 PID: 589 Comm: syz-executor321 Tainted: G    B   W          6.4.0-rc6-5ca8bbe2b782+ #1
Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
RIP: 0010:iopt_remove_access+0xb5/0xd0 drivers/iommu/iommufd/io_pagetable.c:1157
Code: 45 85 e4 75 29 e8 4b 2d 0b fe 4c 89 ef e8 33 eb e8 fd 48 89 df e8 2b eb e8 fd 5b 41 5c 41 5d 5d c3 cc cc cc cc e8 2b 2d 0b fe <0f> 0b eb b9 e8 22 2d 0b fe 0f 0b eb ce e8 b9 1d 67 fe eb 90 0f 1f
RSP: 0018:ffff888011957bb8 EFLAGS: 00010246
RAX: 0000000000000000 RBX: ffff88801181b0a8 RCX: 0000000000000000
RDX: 0000000000000000 RSI: ffff88800f1e4a00 RDI: 0000000000000002
RBP: ffff888011957bd0 R08: ffffed1002303633 R09: ffffed1002303633
R10: ffff88801181b193 R11: ffffed1002303632 R12: ffff888019fe9c00
R13: ffff88801181b1e8 R14: ffffffff835430e0 R15: ffff888011957e68
FS:  0000000001a0a3c0(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
CR2: 0000000020000140 CR3: 000000001529a000 CR4: 0000000000750ef0
PKRU: 55555554
Call Trace:
 <TASK>
 __iommufd_access_detach+0x1c2/0x2b0 drivers/iommu/iommufd/device.c:971
 iommufd_access_change_pt+0x149/0x270 drivers/iommu/iommufd/device.c:1006
 iommufd_access_replace+0xb4/0x120 drivers/iommu/iommufd/device.c:1042
 iommufd_test_access_replace_ioas drivers/iommu/iommufd/selftest.c:1025 [inline]
 iommufd_test+0x103d/0x3f00 drivers/iommu/iommufd/selftest.c:1252
 iommufd_fops_ioctl+0x37d/0x510 drivers/iommu/iommufd/main.c:378
 vfs_ioctl fs/ioctl.c:51 [inline]
 __do_sys_ioctl fs/ioctl.c:870 [inline]
 __se_sys_ioctl fs/ioctl.c:856 [inline]
 __x64_sys_ioctl+0x1a3/0x230 fs/ioctl.c:856
 do_syscall_x64 arch/x86/entry/common.c:50 [inline]
 do_syscall_64+0x3b/0x90 arch/x86/entry/common.c:80
 entry_SYSCALL_64_after_hwframe+0x72/0xdc
RIP: 0033:0x44ff3d
Code: db 48 89 d8 5b 5d 41 5c 41 5d 41 5e c3 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 c7 c1 a8 ff ff ff f7 d8 64 89 01 48
RSP: 002b:00007fff8410fc18 EFLAGS: 00000246 ORIG_RAX: 0000000000000010
RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 000000000044ff3d
RDX: 0000000020000000 RSI: 0000000000003ba0 RDI: 0000000000000003
RBP: 0000000000000001 R08: 0000000000411b40 R09: 0000000000411b40
R10: 0000000000411b40 R11: 0000000000000246 R12: 0000000000000001
R13: 0000000000000000 R14: 00000000004004e8 R15: 0000000000000000
 </TASK>
irq event stamp: 0
hardirqs last  enabled at (0): [<0000000000000000>] 0x0
hardirqs last disabled at (0): [<ffffffff8122d29a>] copy_process+0x256a/0x7650 kernel/fork.c:2448
softirqs last  enabled at (0): [<ffffffff8122d2e2>] copy_process+0x25b2/0x7650 kernel/fork.c:2452
softirqs last disabled at (0): [<0000000000000000>] 0x0
---[ end trace 0000000000000000 ]---
------------[ cut here ]------------
WARNING: CPU: 0 PID: 589 at drivers/iommu/iommufd/io_pagetable.c:1158 iopt_remove_access+0xb5/0xd0 drivers/iommu/iommufd/io_pagetable.c:1157
Modules linked in:
CPU: 0 PID: 589 Comm: syz-executor321 Tainted: G    B   W          6.4.0-rc6-5ca8bbe2b782+ #1
Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
RIP: 0010:iopt_remove_access+0xb5/0xd0 drivers/iommu/iommufd/io_pagetable.c:1157
Code: 45 85 e4 75 29 e8 4b 2d 0b fe 4c 89 ef e8 33 eb e8 fd 48 89 df e8 2b eb e8 fd 5b 41 5c 41 5d 5d c3 cc cc cc cc e8 2b 2d 0b fe <0f> 0b eb b9 e8 22 2d 0b fe 0f 0b eb ce e8 b9 1d 67 fe eb 90 0f 1f
RSP: 0018:ffff888011957bd0 EFLAGS: 00010246
RAX: 0000000000000000 RBX: ffff88801181b0a8 RCX: 0000000000000000
RDX: 0000000000000000 RSI: ffff88800f1e4a00 RDI: 0000000000000002
RBP: ffff888011957be8 R08: ffffed1002303633 R09: ffffed1002303633
R10: ffff88801181b193 R11: ffffed1002303632 R12: ffff88801177b000
R13: ffff88801181b1e8 R14: ffff88801a097e00 R15: 0000000000000000
FS:  0000000000000000(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
CR2: 00000000004e5420 CR3: 000000000667e000 CR4: 0000000000750ef0
PKRU: 55555554
Call Trace:
 <TASK>
 iommufd_access_destroy_object+0x65/0x170 drivers/iommu/iommufd/device.c:875
 iommufd_object_destroy_user+0x18e/0x220 drivers/iommu/iommufd/main.c:163
 iommufd_access_destroy+0x43/0x70 drivers/iommu/iommufd/device.c:938
 iommufd_test_staccess_release+0x8d/0xd0 drivers/iommu/iommufd/selftest.c:918
 __fput+0x26d/0xa40 fs/file_table.c:321
 ____fput+0x1e/0x30 fs/file_table.c:349
 task_work_run+0x1a4/0x2d0 kernel/task_work.c:179
 exit_task_work include/linux/task_work.h:38 [inline]
 do_exit+0xaf3/0x2f60 kernel/exit.c:874
 do_group_exit+0xe0/0x2b0 kernel/exit.c:1024
 __do_sys_exit_group kernel/exit.c:1035 [inline]
 __se_sys_exit_group kernel/exit.c:1033 [inline]
 __x64_sys_exit_group+0x47/0x50 kernel/exit.c:1033
 do_syscall_x64 arch/x86/entry/common.c:50 [inline]
 do_syscall_64+0x3b/0x90 arch/x86/entry/common.c:80
 entry_SYSCALL_64_after_hwframe+0x72/0xdc
RIP: 0033:0x44de86
Code: Unable to access opcode bytes at 0x44de5c.
RSP: 002b:00007fff8410fbc8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
RAX: ffffffffffffffda RBX: 00000000004e5410 RCX: 000000000044de86
RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffffa8
R10: 0000000000411b40 R11: 0000000000000246 R12: 00000000004e5410
R13: 0000000000000001 R14: 0000000000000000 R15: 0000000000000001
 </TASK>
irq event stamp: 0
hardirqs last  enabled at (0): [<0000000000000000>] 0x0
hardirqs last disabled at (0): [<ffffffff8122d29a>] copy_process+0x256a/0x7650 kernel/fork.c:2448
softirqs last  enabled at (0): [<ffffffff8122d2e2>] copy_process+0x25b2/0x7650 kernel/fork.c:2452
softirqs last disabled at (0): [<0000000000000000>] 0x0
---[ end trace 0000000000000000 ]---
------------[ cut here ]------------
WARNING: CPU: 0 PID: 589 at drivers/iommu/iommufd/io_pagetable.c:663 iopt_destroy_table+0x15f/0x1b0 drivers/iommu/iommufd/io_pagetable.c:663
Modules linked in:
CPU: 0 PID: 589 Comm: syz-executor321 Tainted: G    B   W          6.4.0-rc6-5ca8bbe2b782+ #1
Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
RIP: 0010:iopt_destroy_table+0x15f/0x1b0 drivers/iommu/iommufd/io_pagetable.c:663
Code: 5b 41 5c 41 5d 41 5e 5d c3 cc cc cc cc e8 c9 53 0b fe 0f 0b e9 51 ff ff ff e8 bd 53 0b fe 0f 0b e9 76 ff ff ff e8 b1 53 0b fe <0f> 0b eb 9e e8 a8 53 0b fe 0f 0b e8 a1 53 0b fe 5b 41 5c 41 5d 41
RSP: 0018:ffff888011957b78 EFLAGS: 00010246
RAX: 0000000000000000 RBX: 0000000000000000 RCX: 0000000000000000
RDX: 0000000000000000 RSI: ffff88800f1e4a00 RDI: 0000000000000002
RBP: ffff888011957b98 R08: ffffed100230363e R09: ffffed100230363e
R10: ffff88801181b1ef R11: ffffed100230363d R12: ffff88801181b290
R13: ffff88801181b0a8 R14: ffffffffffffffff R15: ffff888011957c60
FS:  0000000000000000(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
CR2: 00000000004e5420 CR3: 000000000667e000 CR4: 0000000000750ef0
PKRU: 55555554
Call Trace:
 <TASK>
 iommufd_ioas_destroy+0x53/0x70 drivers/iommu/iommufd/ioas.c:19
 iommufd_fops_release+0x1f7/0x370 drivers/iommu/iommufd/main.c:231
 __fput+0x26d/0xa40 fs/file_table.c:321
 ____fput+0x1e/0x30 fs/file_table.c:349
 task_work_run+0x1a4/0x2d0 kernel/task_work.c:179
 exit_task_work include/linux/task_work.h:38 [inline]
 do_exit+0xaf3/0x2f60 kernel/exit.c:874
 do_group_exit+0xe0/0x2b0 kernel/exit.c:1024
 __do_sys_exit_group kernel/exit.c:1035 [inline]
 __se_sys_exit_group kernel/exit.c:1033 [inline]
 __x64_sys_exit_group+0x47/0x50 kernel/exit.c:1033
 do_syscall_x64 arch/x86/entry/common.c:50 [inline]
 do_syscall_64+0x3b/0x90 arch/x86/entry/common.c:80
 entry_SYSCALL_64_after_hwframe+0x72/0xdc
RIP: 0033:0x44de86
Code: Unable to access opcode bytes at 0x44de5c.
RSP: 002b:00007fff8410fbc8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
RAX: ffffffffffffffda RBX: 00000000004e5410 RCX: 000000000044de86
RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffffa8
R10: 0000000000411b40 R11: 0000000000000246 R12: 00000000004e5410
R13: 0000000000000001 R14: 0000000000000000 R15: 0000000000000001
 </TASK>
irq event stamp: 0
hardirqs last  enabled at (0): [<0000000000000000>] 0x0
hardirqs last disabled at (0): [<ffffffff8122d29a>] copy_process+0x256a/0x7650 kernel/fork.c:2448
softirqs last  enabled at (0): [<ffffffff8122d2e2>] copy_process+0x25b2/0x7650 kernel/fork.c:2452
softirqs last disabled at (0): [<0000000000000000>] 0x0
---[ end trace 0000000000000000 ]---
------------[ cut here ]------------
WARNING: CPU: 0 PID: 590 at drivers/iommu/iommufd/io_pagetable.c:1158 iopt_remove_access+0xb5/0xd0 drivers/iommu/iommufd/io_pagetable.c:1157
Modules linked in:
CPU: 0 PID: 590 Comm: syz-executor321 Tainted: G    B   W          6.4.0-rc6-5ca8bbe2b782+ #1
Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
RIP: 0010:iopt_remove_access+0xb5/0xd0 drivers/iommu/iommufd/io_pagetable.c:1157
Code: 45 85 e4 75 29 e8 4b 2d 0b fe 4c 89 ef e8 33 eb e8 fd 48 89 df e8 2b eb e8 fd 5b 41 5c 41 5d 5d c3 cc cc cc cc e8 2b 2d 0b fe <0f> 0b eb b9 e8 22 2d 0b fe 0f 0b eb ce e8 b9 1d 67 fe eb 90 0f 1f
RSP: 0018:ffff8880212a7bb8 EFLAGS: 00010246
RAX: 0000000000000000 RBX: ffff88801693f0a8 RCX: 0000000000000000
RDX: 0000000000000000 RSI: ffff8880129b8000 RDI: 0000000000000002
RBP: ffff8880212a7bd0 R08: ffffed1002d27e33 R09: ffffed1002d27e33
R10: ffff88801693f193 R11: ffffed1002d27e32 R12: ffff888019d8e400
R13: ffff88801693f1e8 R14: ffffffff835430e0 R15: ffff8880212a7e68
FS:  0000000001a0a3c0(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
CR2: 0000000020000140 CR3: 0000000013900000 CR4: 0000000000750ef0
PKRU: 55555554
Call Trace:
 <TASK>
 __iommufd_access_detach+0x1c2/0x2b0 drivers/iommu/iommufd/device.c:971
 iommufd_access_change_pt+0x149/0x270 drivers/iommu/iommufd/device.c:1006
 iommufd_access_replace+0xb4/0x120 drivers/iommu/iommufd/device.c:1042
 iommufd_test_access_replace_ioas drivers/iommu/iommufd/selftest.c:1025 [inline]
 iommufd_test+0x103d/0x3f00 drivers/iommu/iommufd/selftest.c:1252
 iommufd_fops_ioctl+0x37d/0x510 drivers/iommu/iommufd/main.c:378
 vfs_ioctl fs/ioctl.c:51 [inline]
 __do_sys_ioctl fs/ioctl.c:870 [inline]
 __se_sys_ioctl fs/ioctl.c:856 [inline]
 __x64_sys_ioctl+0x1a3/0x230 fs/ioctl.c:856
 do_syscall_x64 arch/x86/entry/common.c:50 [inline]
 do_syscall_64+0x3b/0x90 arch/x86/entry/common.c:80
 entry_SYSCALL_64_after_hwframe+0x72/0xdc
RIP: 0033:0x44ff3d
Code: db 48 89 d8 5b 5d 41 5c 41 5d 41 5e c3 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 c7 c1 a8 ff ff ff f7 d8 64 89 01 48
RSP: 002b:00007fff8410fc18 EFLAGS: 00000246 ORIG_RAX: 0000000000000010
RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 000000000044ff3d
RDX: 0000000020000000 RSI: 0000000000003ba0 RDI: 0000000000000003
RBP: 0000000000000001 R08: 0000000000411b40 R09: 0000000000411b40
R10: 0000000000411b40 R11: 0000000000000246 R12: 0000000000000001
R13: 0000000000000000 R14: 00000000004004e8 R15: 0000000000000000
 </TASK>
irq event stamp: 0
hardirqs last  enabled at (0): [<0000000000000000>] 0x0
hardirqs last disabled at (0): [<ffffffff8122d29a>] copy_process+0x256a/0x7650 kernel/fork.c:2448
softirqs last  enabled at (0): [<ffffffff8122d2e2>] copy_process+0x25b2/0x7650 kernel/fork.c:2452
softirqs last disabled at (0): [<0000000000000000>] 0x0
---[ end trace 0000000000000000 ]---
------------[ cut here ]------------
WARNING: CPU: 0 PID: 590 at drivers/iommu/iommufd/io_pagetable.c:1158 iopt_remove_access+0xb5/0xd0 drivers/iommu/iommufd/io_pagetable.c:1157
Modules linked in:
CPU: 0 PID: 590 Comm: syz-executor321 Tainted: G    B   W          6.4.0-rc6-5ca8bbe2b782+ #1
Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
RIP: 0010:iopt_remove_access+0xb5/0xd0 drivers/iommu/iommufd/io_pagetable.c:1157
Code: 45 85 e4 75 29 e8 4b 2d 0b fe 4c 89 ef e8 33 eb e8 fd 48 89 df e8 2b eb e8 fd 5b 41 5c 41 5d 5d c3 cc cc cc cc e8 2b 2d 0b fe <0f> 0b eb b9 e8 22 2d 0b fe 0f 0b eb ce e8 b9 1d 67 fe eb 90 0f 1f
RSP: 0018:ffff8880212a7bd0 EFLAGS: 00010246
RAX: 0000000000000000 RBX: ffff88801693f0a8 RCX: 0000000000000000
RDX: 0000000000000000 RSI: ffff8880129b8000 RDI: 0000000000000002
RBP: ffff8880212a7be8 R08: ffffed1002d27e33 R09: ffffed1002d27e33
R10: ffff88801693f193 R11: ffffed1002d27e32 R12: ffff888011607c00
R13: ffff88801693f1e8 R14: ffff88800fe1cc00 R15: 0000000000000000
FS:  0000000000000000(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
CR2: 00000000004e5420 CR3: 000000000667e000 CR4: 0000000000750ef0
PKRU: 55555554
Call Trace:
 <TASK>
 iommufd_access_destroy_object+0x65/0x170 drivers/iommu/iommufd/device.c:875
 iommufd_object_destroy_user+0x18e/0x220 drivers/iommu/iommufd/main.c:163
 iommufd_access_destroy+0x43/0x70 drivers/iommu/iommufd/device.c:938
 iommufd_test_staccess_release+0x8d/0xd0 drivers/iommu/iommufd/selftest.c:918
 __fput+0x26d/0xa40 fs/file_table.c:321
 ____fput+0x1e/0x30 fs/file_table.c:349
 task_work_run+0x1a4/0x2d0 kernel/task_work.c:179
 exit_task_work include/linux/task_work.h:38 [inline]
 do_exit+0xaf3/0x2f60 kernel/exit.c:874
 do_group_exit+0xe0/0x2b0 kernel/exit.c:1024
 __do_sys_exit_group kernel/exit.c:1035 [inline]
 __se_sys_exit_group kernel/exit.c:1033 [inline]
 __x64_sys_exit_group+0x47/0x50 kernel/exit.c:1033
 do_syscall_x64 arch/x86/entry/common.c:50 [inline]
 do_syscall_64+0x3b/0x90 arch/x86/entry/common.c:80
 entry_SYSCALL_64_after_hwframe+0x72/0xdc
RIP: 0033:0x44de86
Code: Unable to access opcode bytes at 0x44de5c.
RSP: 002b:00007fff8410fbc8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
RAX: ffffffffffffffda RBX: 00000000004e5410 RCX: 000000000044de86
RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffffa8
R10: 0000000000411b40 R11: 0000000000000246 R12: 00000000004e5410
R13: 0000000000000001 R14: 0000000000000000 R15: 0000000000000001
 </TASK>
irq event stamp: 0
hardirqs last  enabled at (0): [<0000000000000000>] 0x0
hardirqs last disabled at (0): [<ffffffff8122d29a>] copy_process+0x256a/0x7650 kernel/fork.c:2448
softirqs last  enabled at (0): [<ffffffff8122d2e2>] copy_process+0x25b2/0x7650 kernel/fork.c:2452
softirqs last disabled at (0): [<0000000000000000>] 0x0
---[ end trace 0000000000000000 ]---
------------[ cut here ]------------
WARNING: CPU: 0 PID: 590 at drivers/iommu/iommufd/io_pagetable.c:663 iopt_destroy_table+0x15f/0x1b0 drivers/iommu/iommufd/io_pagetable.c:663
Modules linked in:
CPU: 0 PID: 590 Comm: syz-executor321 Tainted: G    B   W          6.4.0-rc6-5ca8bbe2b782+ #1
Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
RIP: 0010:iopt_destroy_table+0x15f/0x1b0 drivers/iommu/iommufd/io_pagetable.c:663
Code: 5b 41 5c 41 5d 41 5e 5d c3 cc cc cc cc e8 c9 53 0b fe 0f 0b e9 51 ff ff ff e8 bd 53 0b fe 0f 0b e9 76 ff ff ff e8 b1 53 0b fe <0f> 0b eb 9e e8 a8 53 0b fe 0f 0b e8 a1 53 0b fe 5b 41 5c 41 5d 41
RSP: 0018:ffff8880212a7b78 EFLAGS: 00010246
RAX: 0000000000000000 RBX: 0000000000000000 RCX: 0000000000000000
RDX: 0000000000000000 RSI: ffff8880129b8000 RDI: 0000000000000002
RBP: ffff8880212a7b98 R08: ffffed1002d27e3e R09: ffffed1002d27e3e
R10: ffff88801693f1ef R11: ffffed1002d27e3d R12: ffff88801693f290
R13: ffff88801693f0a8 R14: ffffffffffffffff R15: ffff8880212a7c60
FS:  0000000000000000(0000) GS:ffff88806ca00000(0000) knlGS:0000000000000000
CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
CR2: 00007f97c08c3000 CR3: 0000000014616000 CR4: 0000000000750ef0
PKRU: 55555554
Call Trace:
 <TASK>
 iommufd_ioas_destroy+0x53/0x70 drivers/iommu/iommufd/ioas.c:19
 iommufd_fops_release+0x1f7/0x370 drivers/iommu/iommufd/main.c:231
 __fput+0x26d/0xa40 fs/file_table.c:321
 ____fput+0x1e/0x30 fs/file_table.c:349
 task_work_run+0x1a4/0x2d0 kernel/task_work.c:179
 exit_task_work include/linux/task_work.h:38 [inline]
 do_exit+0xaf3/0x2f60 kernel/exit.c:874
 do_group_exit+0xe0/0x2b0 kernel/exit.c:1024
 __do_sys_exit_group kernel/exit.c:1035 [inline]
 __se_sys_exit_group kernel/exit.c:1033 [inline]
 __x64_sys_exit_group+0x47/0x50 kernel/exit.c:1033
 do_syscall_x64 arch/x86/entry/common.c:50 [inline]
 do_syscall_64+0x3b/0x90 arch/x86/entry/common.c:80
 entry_SYSCALL_64_after_hwframe+0x72/0xdc
RIP: 0033:0x44de86
Code: Unable to access opcode bytes at 0x44de5c.
RSP: 002b:00007fff8410fbc8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
RAX: ffffffffffffffda RBX: 00000000004e5410 RCX: 000000000044de86
RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffffa8
R10: 0000000000411b40 R11: 0000000000000246 R12: 00000000004e5410
R13: 0000000000000001 R14: 0000000000000000 R15: 0000000000000001
 </TASK>
irq event stamp: 0
hardirqs last  enabled at (0): [<0000000000000000>] 0x0
hardirqs last disabled at (0): [<ffffffff8122d29a>] copy_process+0x256a/0x7650 kernel/fork.c:2448
softirqs last  enabled at (0): [<ffffffff8122d2e2>] copy_process+0x25b2/0x7650 kernel/fork.c:2452
softirqs last disabled at (0): [<0000000000000000>] 0x0
---[ end trace 0000000000000000 ]---
------------[ cut here ]------------
WARNING: CPU: 1 PID: 591 at drivers/iommu/iommufd/io_pagetable.c:1158 iopt_remove_access+0xb5/0xd0 drivers/iommu/iommufd/io_pagetable.c:1157
Modules linked in:
CPU: 1 PID: 591 Comm: syz-executor321 Tainted: G    B   W          6.4.0-rc6-5ca8bbe2b782+ #1
Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
RIP: 0010:iopt_remove_access+0xb5/0xd0 drivers/iommu/iommufd/io_pagetable.c:1157
Code: 45 85 e4 75 29 e8 4b 2d 0b fe 4c 89 ef e8 33 eb e8 fd 48 89 df e8 2b eb e8 fd 5b 41 5c 41 5d 5d c3 cc cc cc cc e8 2b 2d 0b fe <0f> 0b eb b9 e8 22 2d 0b fe 0f 0b eb ce e8 b9 1d 67 fe eb 90 0f 1f
RSP: 0018:ffff88800f1c7bb8 EFLAGS: 00010246
RAX: 0000000000000000 RBX: ffff88801267a8a8 RCX: 0000000000000000
RDX: 0000000000000000 RSI: ffff888012e52500 RDI: 0000000000000002
RBP: ffff88800f1c7bd0 R08: ffffed10024cf533 R09: ffffed10024cf533
R10: ffff88801267a993 R11: ffffed10024cf532 R12: ffff888019fd3000
R13: ffff88801267a9e8 R14: ffffffff835430e0 R15: ffff88800f1c7e68
FS:  0000000001a0a3c0(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
CR2: 0000000020000140 CR3: 00000000212ba000 CR4: 0000000000750ee0
PKRU: 55555554
Call Trace:
 <TASK>
 __iommufd_access_detach+0x1c2/0x2b0 drivers/iommu/iommufd/device.c:971
 iommufd_access_change_pt+0x149/0x270 drivers/iommu/iommufd/device.c:1006
 iommufd_access_replace+0xb4/0x120 drivers/iommu/iommufd/device.c:1042
 iommufd_test_access_replace_ioas drivers/iommu/iommufd/selftest.c:1025 [inline]
 iommufd_test+0x103d/0x3f00 drivers/iommu/iommufd/selftest.c:1252
 iommufd_fops_ioctl+0x37d/0x510 drivers/iommu/iommufd/main.c:378
 vfs_ioctl fs/ioctl.c:51 [inline]
 __do_sys_ioctl fs/ioctl.c:870 [inline]
 __se_sys_ioctl fs/ioctl.c:856 [inline]
 __x64_sys_ioctl+0x1a3/0x230 fs/ioctl.c:856
 do_syscall_x64 arch/x86/entry/common.c:50 [inline]
 do_syscall_64+0x3b/0x90 arch/x86/entry/common.c:80
 entry_SYSCALL_64_after_hwframe+0x72/0xdc
RIP: 0033:0x44ff3d
Code: db 48 89 d8 5b 5d 41 5c 41 5d 41 5e c3 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 c7 c1 a8 ff ff ff f7 d8 64 89 01 48
RSP: 002b:00007fff8410fc18 EFLAGS: 00000246 ORIG_RAX: 0000000000000010
RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 000000000044ff3d
RDX: 0000000020000000 RSI: 0000000000003ba0 RDI: 0000000000000003
RBP: 0000000000000001 R08: 0000000000411b40 R09: 0000000000411b40
R10: 0000000000411b40 R11: 0000000000000246 R12: 0000000000000001
R13: 0000000000000000 R14: 00000000004004e8 R15: 0000000000000000
 </TASK>
irq event stamp: 0
hardirqs last  enabled at (0): [<0000000000000000>] 0x0
hardirqs last disabled at (0): [<ffffffff8122d29a>] copy_process+0x256a/0x7650 kernel/fork.c:2448
softirqs last  enabled at (0): [<ffffffff8122d2e2>] copy_process+0x25b2/0x7650 kernel/fork.c:2452
softirqs last disabled at (0): [<0000000000000000>] 0x0
---[ end trace 0000000000000000 ]---
------------[ cut here ]------------
WARNING: CPU: 1 PID: 591 at drivers/iommu/iommufd/io_pagetable.c:1158 iopt_remove_access+0xb5/0xd0 drivers/iommu/iommufd/io_pagetable.c:1157
Modules linked in:
CPU: 1 PID: 591 Comm: syz-executor321 Tainted: G    B   W          6.4.0-rc6-5ca8bbe2b782+ #1
Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
RIP: 0010:iopt_remove_access+0xb5/0xd0 drivers/iommu/iommufd/io_pagetable.c:1157
Code: 45 85 e4 75 29 e8 4b 2d 0b fe 4c 89 ef e8 33 eb e8 fd 48 89 df e8 2b eb e8 fd 5b 41 5c 41 5d 5d c3 cc cc cc cc e8 2b 2d 0b fe <0f> 0b eb b9 e8 22 2d 0b fe 0f 0b eb ce e8 b9 1d 67 fe eb 90 0f 1f
RSP: 0018:ffff88800f1c7bd0 EFLAGS: 00010246
RAX: 0000000000000000 RBX: ffff88801267a8a8 RCX: 0000000000000000
RDX: 0000000000000000 RSI: ffff888012e52500 RDI: 0000000000000002
RBP: ffff88800f1c7be8 R08: ffffed10024cf533 R09: ffffed10024cf533
R10: ffff88801267a993 R11: ffffed10024cf532 R12: ffff888019d61400
R13: ffff88801267a9e8 R14: ffff888022de3a00 R15: 0000000000000000
FS:  0000000000000000(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
CR2: 00000000004e5420 CR3: 000000001503a000 CR4: 0000000000750ee0
PKRU: 55555554
Call Trace:
 <TASK>
 iommufd_access_destroy_object+0x65/0x170 drivers/iommu/iommufd/device.c:875
 iommufd_object_destroy_user+0x18e/0x220 drivers/iommu/iommufd/main.c:163
 iommufd_access_destroy+0x43/0x70 drivers/iommu/iommufd/device.c:938
 iommufd_test_staccess_release+0x8d/0xd0 drivers/iommu/iommufd/selftest.c:918
 __fput+0x26d/0xa40 fs/file_table.c:321
 ____fput+0x1e/0x30 fs/file_table.c:349
 task_work_run+0x1a4/0x2d0 kernel/task_work.c:179
 exit_task_work include/linux/task_work.h:38 [inline]
 do_exit+0xaf3/0x2f60 kernel/exit.c:874
 do_group_exit+0xe0/0x2b0 kernel/exit.c:1024
 __do_sys_exit_group kernel/exit.c:1035 [inline]
 __se_sys_exit_group kernel/exit.c:1033 [inline]
 __x64_sys_exit_group+0x47/0x50 kernel/exit.c:1033
 do_syscall_x64 arch/x86/entry/common.c:50 [inline]
 do_syscall_64+0x3b/0x90 arch/x86/entry/common.c:80
 entry_SYSCALL_64_after_hwframe+0x72/0xdc
RIP: 0033:0x44de86
Code: Unable to access opcode bytes at 0x44de5c.
RSP: 002b:00007fff8410fbc8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
RAX: ffffffffffffffda RBX: 00000000004e5410 RCX: 000000000044de86
RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffffa8
R10: 0000000000411b40 R11: 0000000000000246 R12: 00000000004e5410
R13: 0000000000000001 R14: 0000000000000000 R15: 0000000000000001
 </TASK>
irq event stamp: 0
hardirqs last  enabled at (0): [<0000000000000000>] 0x0
hardirqs last disabled at (0): [<ffffffff8122d29a>] copy_process+0x256a/0x7650 kernel/fork.c:2448
softirqs last  enabled at (0): [<ffffffff8122d2e2>] copy_process+0x25b2/0x7650 kernel/fork.c:2452
softirqs last disabled at (0): [<0000000000000000>] 0x0
---[ end trace 0000000000000000 ]---
------------[ cut here ]------------
WARNING: CPU: 1 PID: 591 at drivers/iommu/iommufd/io_pagetable.c:663 iopt_destroy_table+0x15f/0x1b0 drivers/iommu/iommufd/io_pagetable.c:663
Modules linked in:
CPU: 1 PID: 591 Comm: syz-executor321 Tainted: G    B   W          6.4.0-rc6-5ca8bbe2b782+ #1
Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
RIP: 0010:iopt_destroy_table+0x15f/0x1b0 drivers/iommu/iommufd/io_pagetable.c:663
Code: 5b 41 5c 41 5d 41 5e 5d c3 cc cc cc cc e8 c9 53 0b fe 0f 0b e9 51 ff ff ff e8 bd 53 0b fe 0f 0b e9 76 ff ff ff e8 b1 53 0b fe <0f> 0b eb 9e e8 a8 53 0b fe 0f 0b e8 a1 53 0b fe 5b 41 5c 41 5d 41
RSP: 0018:ffff88800f1c7b78 EFLAGS: 00010246
RAX: 0000000000000000 RBX: 0000000000000000 RCX: 0000000000000000
RDX: 0000000000000000 RSI: ffff888012e52500 RDI: 0000000000000002
RBP: ffff88800f1c7b98 R08: ffffed10024cf53e R09: ffffed10024cf53e
R10: ffff88801267a9ef R11: ffffed10024cf53d R12: ffff88801267aa90
R13: ffff88801267a8a8 R14: ffffffffffffffff R15: ffff88800f1c7c60
FS:  0000000000000000(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
CR2: 00000000004e5420 CR3: 000000001503a000 CR4: 0000000000750ee0
PKRU: 55555554
Call Trace:
 <TASK>
 iommufd_ioas_destroy+0x53/0x70 drivers/iommu/iommufd/ioas.c:19
 iommufd_fops_release+0x1f7/0x370 drivers/iommu/iommufd/main.c:231
 __fput+0x26d/0xa40 fs/file_table.c:321
 ____fput+0x1e/0x30 fs/file_table.c:349
 task_work_run+0x1a4/0x2d0 kernel/task_work.c:179
 exit_task_work include/linux/task_work.h:38 [inline]
 do_exit+0xaf3/0x2f60 kernel/exit.c:874
 do_group_exit+0xe0/0x2b0 kernel/exit.c:1024
 __do_sys_exit_group kernel/exit.c:1035 [inline]
 __se_sys_exit_group kernel/exit.c:1033 [inline]
 __x64_sys_exit_group+0x47/0x50 kernel/exit.c:1033
 do_syscall_x64 arch/x86/entry/common.c:50 [inline]
 do_syscall_64+0x3b/0x90 arch/x86/entry/common.c:80
 entry_SYSCALL_64_after_hwframe+0x72/0xdc
RIP: 0033:0x44de86
Code: Unable to access opcode bytes at 0x44de5c.
RSP: 002b:00007fff8410fbc8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
RAX: ffffffffffffffda RBX: 00000000004e5410 RCX: 000000000044de86
RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffffa8
R10: 0000000000411b40 R11: 0000000000000246 R12: 00000000004e5410
R13: 0000000000000001 R14: 0000000000000000 R15: 0000000000000001
 </TASK>
irq event stamp: 0
hardirqs last  enabled at (0): [<0000000000000000>] 0x0
hardirqs last disabled at (0): [<ffffffff8122d29a>] copy_process+0x256a/0x7650 kernel/fork.c:2448
softirqs last  enabled at (0): [<ffffffff8122d2e2>] copy_process+0x25b2/0x7650 kernel/fork.c:2452
softirqs last disabled at (0): [<0000000000000000>] 0x0
---[ end trace 0000000000000000 ]---
------------[ cut here ]------------
WARNING: CPU: 1 PID: 592 at drivers/iommu/iommufd/io_pagetable.c:1158 iopt_remove_access+0xb5/0xd0 drivers/iommu/iommufd/io_pagetable.c:1157
Modules linked in:
CPU: 1 PID: 592 Comm: syz-executor321 Tainted: G    B   W          6.4.0-rc6-5ca8bbe2b782+ #1
Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
RIP: 0010:iopt_remove_access+0xb5/0xd0 drivers/iommu/iommufd/io_pagetable.c:1157
Code: 45 85 e4 75 29 e8 4b 2d 0b fe 4c 89 ef e8 33 eb e8 fd 48 89 df e8 2b eb e8 fd 5b 41 5c 41 5d 5d c3 cc cc cc cc e8 2b 2d 0b fe <0f> 0b eb b9 e8 22 2d 0b fe 0f 0b eb ce e8 b9 1d 67 fe eb 90 0f 1f
RSP: 0018:ffff88801480fbb8 EFLAGS: 00010246
RAX: 0000000000000000 RBX: ffff888011fc48a8 RCX: 0000000000000000
RDX: 0000000000000000 RSI: ffff888011de4a00 RDI: 0000000000000002
RBP: ffff88801480fbd0 R08: ffffed10023f8933 R09: ffffed10023f8933
R10: ffff888011fc4993 R11: ffffed10023f8932 R12: ffff888019db3000
R13: ffff888011fc49e8 R14: ffffffff835430e0 R15: ffff88801480fe68
FS:  0000000001a0a3c0(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
CR2: 0000000020000140 CR3: 0000000015082000 CR4: 0000000000750ee0
PKRU: 55555554
Call Trace:
 <TASK>
 __iommufd_access_detach+0x1c2/0x2b0 drivers/iommu/iommufd/device.c:971
 iommufd_access_change_pt+0x149/0x270 drivers/iommu/iommufd/device.c:1006
 iommufd_access_replace+0xb4/0x120 drivers/iommu/iommufd/device.c:1042
 iommufd_test_access_replace_ioas drivers/iommu/iommufd/selftest.c:1025 [inline]
 iommufd_test+0x103d/0x3f00 drivers/iommu/iommufd/selftest.c:1252
 iommufd_fops_ioctl+0x37d/0x510 drivers/iommu/iommufd/main.c:378
 vfs_ioctl fs/ioctl.c:51 [inline]
 __do_sys_ioctl fs/ioctl.c:870 [inline]
 __se_sys_ioctl fs/ioctl.c:856 [inline]
 __x64_sys_ioctl+0x1a3/0x230 fs/ioctl.c:856
 do_syscall_x64 arch/x86/entry/common.c:50 [inline]
 do_syscall_64+0x3b/0x90 arch/x86/entry/common.c:80
 entry_SYSCALL_64_after_hwframe+0x72/0xdc
RIP: 0033:0x44ff3d
Code: db 48 89 d8 5b 5d 41 5c 41 5d 41 5e c3 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 c7 c1 a8 ff ff ff f7 d8 64 89 01 48
RSP: 002b:00007fff8410fc18 EFLAGS: 00000246 ORIG_RAX: 0000000000000010
RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 000000000044ff3d
RDX: 0000000020000000 RSI: 0000000000003ba0 RDI: 0000000000000003
RBP: 0000000000000001 R08: 0000000000411b40 R09: 0000000000411b40
R10: 0000000000411b40 R11: 0000000000000246 R12: 0000000000000001
R13: 0000000000000000 R14: 00000000004004e8 R15: 0000000000000000
 </TASK>
irq event stamp: 0
hardirqs last  enabled at (0): [<0000000000000000>] 0x0
hardirqs last disabled at (0): [<ffffffff8122d29a>] copy_process+0x256a/0x7650 kernel/fork.c:2448
softirqs last  enabled at (0): [<ffffffff8122d2e2>] copy_process+0x25b2/0x7650 kernel/fork.c:2452
softirqs last disabled at (0): [<0000000000000000>] 0x0
---[ end trace 0000000000000000 ]---
------------[ cut here ]------------
WARNING: CPU: 1 PID: 592 at drivers/iommu/iommufd/io_pagetable.c:1158 iopt_remove_access+0xb5/0xd0 drivers/iommu/iommufd/io_pagetable.c:1157
Modules linked in:
CPU: 1 PID: 592 Comm: syz-executor321 Tainted: G    B   W          6.4.0-rc6-5ca8bbe2b782+ #1
Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
RIP: 0010:iopt_remove_access+0xb5/0xd0 drivers/iommu/iommufd/io_pagetable.c:1157
Code: 45 85 e4 75 29 e8 4b 2d 0b fe 4c 89 ef e8 33 eb e8 fd 48 89 df e8 2b eb e8 fd 5b 41 5c 41 5d 5d c3 cc cc cc cc e8 2b 2d 0b fe <0f> 0b eb b9 e8 22 2d 0b fe 0f 0b eb ce e8 b9 1d 67 fe eb 90 0f 1f
RSP: 0018:ffff88801480fbd0 EFLAGS: 00010246
RAX: 0000000000000000 RBX: ffff888011fc48a8 RCX: 0000000000000000
RDX: 0000000000000000 RSI: ffff888011de4a00 RDI: 0000000000000002
RBP: ffff88801480fbe8 R08: ffffed10023f8933 R09: ffffed10023f8933
R10: ffff888011fc4993 R11: ffffed10023f8932 R12: ffff888019fd1000
R13: ffff888011fc49e8 R14: ffff88801a0b4700 R15: 0000000000000000
FS:  0000000000000000(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
CR2: 00000000004e5420 CR3: 000000000667e000 CR4: 0000000000750ee0
PKRU: 55555554
Call Trace:
 <TASK>
 iommufd_access_destroy_object+0x65/0x170 drivers/iommu/iommufd/device.c:875
 iommufd_object_destroy_user+0x18e/0x220 drivers/iommu/iommufd/main.c:163
 iommufd_access_destroy+0x43/0x70 drivers/iommu/iommufd/device.c:938
 iommufd_test_staccess_release+0x8d/0xd0 drivers/iommu/iommufd/selftest.c:918
 __fput+0x26d/0xa40 fs/file_table.c:321
 ____fput+0x1e/0x30 fs/file_table.c:349
 task_work_run+0x1a4/0x2d0 kernel/task_work.c:179
 exit_task_work include/linux/task_work.h:38 [inline]
 do_exit+0xaf3/0x2f60 kernel/exit.c:874
 do_group_exit+0xe0/0x2b0 kernel/exit.c:1024
 __do_sys_exit_group kernel/exit.c:1035 [inline]
 __se_sys_exit_group kernel/exit.c:1033 [inline]
 __x64_sys_exit_group+0x47/0x50 kernel/exit.c:1033
 do_syscall_x64 arch/x86/entry/common.c:50 [inline]
 do_syscall_64+0x3b/0x90 arch/x86/entry/common.c:80
 entry_SYSCALL_64_after_hwframe+0x72/0xdc
RIP: 0033:0x44de86
Code: Unable to access opcode bytes at 0x44de5c.
RSP: 002b:00007fff8410fbc8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
RAX: ffffffffffffffda RBX: 00000000004e5410 RCX: 000000000044de86
RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffffa8
R10: 0000000000411b40 R11: 0000000000000246 R12: 00000000004e5410
R13: 0000000000000001 R14: 0000000000000000 R15: 0000000000000001
 </TASK>
irq event stamp: 0
hardirqs last  enabled at (0): [<0000000000000000>] 0x0
hardirqs last disabled at (0): [<ffffffff8122d29a>] copy_process+0x256a/0x7650 kernel/fork.c:2448
softirqs last  enabled at (0): [<ffffffff8122d2e2>] copy_process+0x25b2/0x7650 kernel/fork.c:2452
softirqs last disabled at (0): [<0000000000000000>] 0x0
---[ end trace 0000000000000000 ]---
------------[ cut here ]------------
WARNING: CPU: 1 PID: 592 at drivers/iommu/iommufd/io_pagetable.c:663 iopt_destroy_table+0x15f/0x1b0 drivers/iommu/iommufd/io_pagetable.c:663
Modules linked in:
CPU: 1 PID: 592 Comm: syz-executor321 Tainted: G    B   W          6.4.0-rc6-5ca8bbe2b782+ #1
Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
RIP: 0010:iopt_destroy_table+0x15f/0x1b0 drivers/iommu/iommufd/io_pagetable.c:663
Code: 5b 41 5c 41 5d 41 5e 5d c3 cc cc cc cc e8 c9 53 0b fe 0f 0b e9 51 ff ff ff e8 bd 53 0b fe 0f 0b e9 76 ff ff ff e8 b1 53 0b fe <0f> 0b eb 9e e8 a8 53 0b fe 0f 0b e8 a1 53 0b fe 5b 41 5c 41 5d 41
RSP: 0018:ffff88801480fb78 EFLAGS: 00010246
RAX: 0000000000000000 RBX: 0000000000000000 RCX: 0000000000000000
RDX: 0000000000000000 RSI: ffff888011de4a00 RDI: 0000000000000002
RBP: ffff88801480fb98 R08: ffffed10023f893e R09: ffffed10023f893e
R10: ffff888011fc49ef R11: ffffed10023f893d R12: ffff888011fc4a90
R13: ffff888011fc48a8 R14: ffffffffffffffff R15: ffff88801480fc60
FS:  0000000000000000(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
CR2: 00000000004e5420 CR3: 000000000667e000 CR4: 0000000000750ee0
PKRU: 55555554
Call Trace:
 <TASK>
 iommufd_ioas_destroy+0x53/0x70 drivers/iommu/iommufd/ioas.c:19
 iommufd_fops_release+0x1f7/0x370 drivers/iommu/iommufd/main.c:231
 __fput+0x26d/0xa40 fs/file_table.c:321
 ____fput+0x1e/0x30 fs/file_table.c:349
 task_work_run+0x1a4/0x2d0 kernel/task_work.c:179
 exit_task_work include/linux/task_work.h:38 [inline]
 do_exit+0xaf3/0x2f60 kernel/exit.c:874
 do_group_exit+0xe0/0x2b0 kernel/exit.c:1024
 __do_sys_exit_group kernel/exit.c:1035 [inline]
 __se_sys_exit_group kernel/exit.c:1033 [inline]
 __x64_sys_exit_group+0x47/0x50 kernel/exit.c:1033
 do_syscall_x64 arch/x86/entry/common.c:50 [inline]
 do_syscall_64+0x3b/0x90 arch/x86/entry/common.c:80
 entry_SYSCALL_64_after_hwframe+0x72/0xdc
RIP: 0033:0x44de86
Code: Unable to access opcode bytes at 0x44de5c.
RSP: 002b:00007fff8410fbc8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
RAX: ffffffffffffffda RBX: 00000000004e5410 RCX: 000000000044de86
RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffffa8
R10: 0000000000411b40 R11: 0000000000000246 R12: 00000000004e5410
R13: 0000000000000001 R14: 0000000000000000 R15: 0000000000000001
 </TASK>
irq event stamp: 0
hardirqs last  enabled at (0): [<0000000000000000>] 0x0
hardirqs last disabled at (0): [<ffffffff8122d29a>] copy_process+0x256a/0x7650 kernel/fork.c:2448
softirqs last  enabled at (0): [<ffffffff8122d2e2>] copy_process+0x25b2/0x7650 kernel/fork.c:2452
softirqs last disabled at (0): [<0000000000000000>] 0x0
---[ end trace 0000000000000000 ]---
------------[ cut here ]------------
WARNING: CPU: 1 PID: 593 at drivers/iommu/iommufd/io_pagetable.c:1158 iopt_remove_access+0xb5/0xd0 drivers/iommu/iommufd/io_pagetable.c:1157
Modules linked in:
CPU: 1 PID: 593 Comm: syz-executor321 Tainted: G    B   W          6.4.0-rc6-5ca8bbe2b782+ #1
Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
RIP: 0010:iopt_remove_access+0xb5/0xd0 drivers/iommu/iommufd/io_pagetable.c:1157
Code: 45 85 e4 75 29 e8 4b 2d 0b fe 4c 89 ef e8 33 eb e8 fd 48 89 df e8 2b eb e8 fd 5b 41 5c 41 5d 5d c3 cc cc cc cc e8 2b 2d 0b fe <0f> 0b eb b9 e8 22 2d 0b fe 0f 0b eb ce e8 b9 1d 67 fe eb 90 0f 1f
RSP: 0018:ffff888016bdfbb8 EFLAGS: 00010246
RAX: 0000000000000000 RBX: ffff888011ba40a8 RCX: 0000000000000000
RDX: 0000000000000000 RSI: ffff888015192500 RDI: 0000000000000002
RBP: ffff888016bdfbd0 R08: ffffed1002374833 R09: ffffed1002374833
R10: ffff888011ba4193 R11: ffffed1002374832 R12: ffff888019da1000
R13: ffff888011ba41e8 R14: ffffffff835430e0 R15: ffff888016bdfe68
FS:  0000000001a0a3c0(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
CR2: 0000000020000140 CR3: 0000000013c74000 CR4: 0000000000750ee0
PKRU: 55555554
Call Trace:
 <TASK>
 __iommufd_access_detach+0x1c2/0x2b0 drivers/iommu/iommufd/device.c:971
 iommufd_access_change_pt+0x149/0x270 drivers/iommu/iommufd/device.c:1006
 iommufd_access_replace+0xb4/0x120 drivers/iommu/iommufd/device.c:1042
 iommufd_test_access_replace_ioas drivers/iommu/iommufd/selftest.c:1025 [inline]
 iommufd_test+0x103d/0x3f00 drivers/iommu/iommufd/selftest.c:1252
 iommufd_fops_ioctl+0x37d/0x510 drivers/iommu/iommufd/main.c:378
 vfs_ioctl fs/ioctl.c:51 [inline]
 __do_sys_ioctl fs/ioctl.c:870 [inline]
 __se_sys_ioctl fs/ioctl.c:856 [inline]
 __x64_sys_ioctl+0x1a3/0x230 fs/ioctl.c:856
 do_syscall_x64 arch/x86/entry/common.c:50 [inline]
 do_syscall_64+0x3b/0x90 arch/x86/entry/common.c:80
 entry_SYSCALL_64_after_hwframe+0x72/0xdc
RIP: 0033:0x44ff3d
Code: db 48 89 d8 5b 5d 41 5c 41 5d 41 5e c3 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 c7 c1 a8 ff ff ff f7 d8 64 89 01 48
RSP: 002b:00007fff8410fc18 EFLAGS: 00000246 ORIG_RAX: 0000000000000010
RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 000000000044ff3d
RDX: 0000000020000000 RSI: 0000000000003ba0 RDI: 0000000000000003
RBP: 0000000000000001 R08: 0000000000411b40 R09: 0000000000411b40
R10: 0000000000411b40 R11: 0000000000000246 R12: 0000000000000001
R13: 0000000000000000 R14: 00000000004004e8 R15: 0000000000000000
 </TASK>
irq event stamp: 0
hardirqs last  enabled at (0): [<0000000000000000>] 0x0
hardirqs last disabled at (0): [<ffffffff8122d29a>] copy_process+0x256a/0x7650 kernel/fork.c:2448
softirqs last  enabled at (0): [<ffffffff8122d2e2>] copy_process+0x25b2/0x7650 kernel/fork.c:2452
softirqs last disabled at (0): [<0000000000000000>] 0x0
---[ end trace 0000000000000000 ]---
------------[ cut here ]------------
WARNING: CPU: 1 PID: 593 at drivers/iommu/iommufd/io_pagetable.c:1158 iopt_remove_access+0xb5/0xd0 drivers/iommu/iommufd/io_pagetable.c:1157
Modules linked in:
CPU: 1 PID: 593 Comm: syz-executor321 Tainted: G    B   W          6.4.0-rc6-5ca8bbe2b782+ #1
Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
RIP: 0010:iopt_remove_access+0xb5/0xd0 drivers/iommu/iommufd/io_pagetable.c:1157
Code: 45 85 e4 75 29 e8 4b 2d 0b fe 4c 89 ef e8 33 eb e8 fd 48 89 df e8 2b eb e8 fd 5b 41 5c 41 5d 5d c3 cc cc cc cc e8 2b 2d 0b fe <0f> 0b eb b9 e8 22 2d 0b fe 0f 0b eb ce e8 b9 1d 67 fe eb 90 0f 1f
RSP: 0018:ffff888016bdfbd0 EFLAGS: 00010246
RAX: 0000000000000000 RBX: ffff888011ba40a8 RCX: 0000000000000000
RDX: 0000000000000000 RSI: ffff888015192500 RDI: 0000000000000002
RBP: ffff888016bdfbe8 R08: ffffed1002374833 R09: ffffed1002374833
R10: ffff888011ba4193 R11: ffffed1002374832 R12: ffff888019db1000
R13: ffff888011ba41e8 R14: ffff888022c2ed00 R15: 0000000000000000
FS:  0000000000000000(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
CR2: 00000000004e5420 CR3: 000000000667e000 CR4: 0000000000750ee0
PKRU: 55555554
Call Trace:
 <TASK>
 iommufd_access_destroy_object+0x65/0x170 drivers/iommu/iommufd/device.c:875
 iommufd_object_destroy_user+0x18e/0x220 drivers/iommu/iommufd/main.c:163
 iommufd_access_destroy+0x43/0x70 drivers/iommu/iommufd/device.c:938
 iommufd_test_staccess_release+0x8d/0xd0 drivers/iommu/iommufd/selftest.c:918
 __fput+0x26d/0xa40 fs/file_table.c:321
 ____fput+0x1e/0x30 fs/file_table.c:349
 task_work_run+0x1a4/0x2d0 kernel/task_work.c:179
 exit_task_work include/linux/task_work.h:38 [inline]
 do_exit+0xaf3/0x2f60 kernel/exit.c:874
 do_group_exit+0xe0/0x2b0 kernel/exit.c:1024
 __do_sys_exit_group kernel/exit.c:1035 [inline]
 __se_sys_exit_group kernel/exit.c:1033 [inline]
 __x64_sys_exit_group+0x47/0x50 kernel/exit.c:1033
 do_syscall_x64 arch/x86/entry/common.c:50 [inline]
 do_syscall_64+0x3b/0x90 arch/x86/entry/common.c:80
 entry_SYSCALL_64_after_hwframe+0x72/0xdc
RIP: 0033:0x44de86
Code: Unable to access opcode bytes at 0x44de5c.
RSP: 002b:00007fff8410fbc8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
RAX: ffffffffffffffda RBX: 00000000004e5410 RCX: 000000000044de86
RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffffa8
R10: 0000000000411b40 R11: 0000000000000246 R12: 00000000004e5410
R13: 0000000000000001 R14: 0000000000000000 R15: 0000000000000001
 </TASK>
irq event stamp: 0
hardirqs last  enabled at (0): [<0000000000000000>] 0x0
hardirqs last disabled at (0): [<ffffffff8122d29a>] copy_process+0x256a/0x7650 kernel/fork.c:2448
softirqs last  enabled at (0): [<ffffffff8122d2e2>] copy_process+0x25b2/0x7650 kernel/fork.c:2452
softirqs last disabled at (0): [<0000000000000000>] 0x0
---[ end trace 0000000000000000 ]---
------------[ cut here ]------------
WARNING: CPU: 1 PID: 593 at drivers/iommu/iommufd/io_pagetable.c:663 iopt_destroy_table+0x15f/0x1b0 drivers/iommu/iommufd/io_pagetable.c:663
Modules linked in:
CPU: 1 PID: 593 Comm: syz-executor321 Tainted: G    B   W          6.4.0-rc6-5ca8bbe2b782+ #1
Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
RIP: 0010:iopt_destroy_table+0x15f/0x1b0 drivers/iommu/iommufd/io_pagetable.c:663
Code: 5b 41 5c 41 5d 41 5e 5d c3 cc cc cc cc e8 c9 53 0b fe 0f 0b e9 51 ff ff ff e8 bd 53 0b fe 0f 0b e9 76 ff ff ff e8 b1 53 0b fe <0f> 0b eb 9e e8 a8 53 0b fe 0f 0b e8 a1 53 0b fe 5b 41 5c 41 5d 41
RSP: 0018:ffff888016bdfb78 EFLAGS: 00010246
RAX: 0000000000000000 RBX: 0000000000000000 RCX: 0000000000000000
RDX: 0000000000000000 RSI: ffff888015192500 RDI: 0000000000000002
RBP: ffff888016bdfb98 R08: ffffed100237483e R09: ffffed100237483e
R10: ffff888011ba41ef R11: ffffed100237483d R12: ffff888011ba4290
R13: ffff888011ba40a8 R14: ffffffffffffffff R15: ffff888016bdfc60
FS:  0000000000000000(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
CR2: 00000000004e5420 CR3: 0000000014ab6000 CR4: 0000000000750ee0
PKRU: 55555554
Call Trace:
 <TASK>
 iommufd_ioas_destroy+0x53/0x70 drivers/iommu/iommufd/ioas.c:19
 iommufd_fops_release+0x1f7/0x370 drivers/iommu/iommufd/main.c:231
 __fput+0x26d/0xa40 fs/file_table.c:321
 ____fput+0x1e/0x30 fs/file_table.c:349
 task_work_run+0x1a4/0x2d0 kernel/task_work.c:179
 exit_task_work include/linux/task_work.h:38 [inline]
 do_exit+0xaf3/0x2f60 kernel/exit.c:874
 do_group_exit+0xe0/0x2b0 kernel/exit.c:1024
 __do_sys_exit_group kernel/exit.c:1035 [inline]
 __se_sys_exit_group kernel/exit.c:1033 [inline]
 __x64_sys_exit_group+0x47/0x50 kernel/exit.c:1033
 do_syscall_x64 arch/x86/entry/common.c:50 [inline]
 do_syscall_64+0x3b/0x90 arch/x86/entry/common.c:80
 entry_SYSCALL_64_after_hwframe+0x72/0xdc
RIP: 0033:0x44de86
Code: Unable to access opcode bytes at 0x44de5c.
RSP: 002b:00007fff8410fbc8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
RAX: ffffffffffffffda RBX: 00000000004e5410 RCX: 000000000044de86
RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffffa8
R10: 0000000000411b40 R11: 0000000000000246 R12: 00000000004e5410
R13: 0000000000000001 R14: 0000000000000000 R15: 0000000000000001
 </TASK>
irq event stamp: 0
hardirqs last  enabled at (0): [<0000000000000000>] 0x0
hardirqs last disabled at (0): [<ffffffff8122d29a>] copy_process+0x256a/0x7650 kernel/fork.c:2448
softirqs last  enabled at (0): [<ffffffff8122d2e2>] copy_process+0x25b2/0x7650 kernel/fork.c:2452
softirqs last disabled at (0): [<0000000000000000>] 0x0
---[ end trace 0000000000000000 ]---
------------[ cut here ]------------
WARNING: CPU: 1 PID: 594 at drivers/iommu/iommufd/io_pagetable.c:1158 iopt_remove_access+0xb5/0xd0 drivers/iommu/iommufd/io_pagetable.c:1157
Modules linked in:
CPU: 1 PID: 594 Comm: syz-executor321 Tainted: G    B   W          6.4.0-rc6-5ca8bbe2b782+ #1
Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
RIP: 0010:iopt_remove_access+0xb5/0xd0 drivers/iommu/iommufd/io_pagetable.c:1157
Code: 45 85 e4 75 29 e8 4b 2d 0b fe 4c 89 ef e8 33 eb e8 fd 48 89 df e8 2b eb e8 fd 5b 41 5c 41 5d 5d c3 cc cc cc cc e8 2b 2d 0b fe <0f> 0b eb b9 e8 22 2d 0b fe 0f 0b eb ce e8 b9 1d 67 fe eb 90 0f 1f
RSP: 0018:ffff8880111d7bb8 EFLAGS: 00010246
RAX: 0000000000000000 RBX: ffff888016d7e8a8 RCX: 0000000000000000
RDX: 0000000000000000 RSI: ffff888011958000 RDI: 0000000000000002
RBP: ffff8880111d7bd0 R08: ffffed1002dafd33 R09: ffffed1002dafd33
R10: ffff888016d7e993 R11: ffffed1002dafd32 R12: ffff888011c81000
R13: ffff888016d7e9e8 R14: ffffffff835430e0 R15: ffff8880111d7e68
FS:  0000000001a0a3c0(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
CR2: 0000000020000140 CR3: 0000000016d00000 CR4: 0000000000750ee0
PKRU: 55555554
Call Trace:
 <TASK>
 __iommufd_access_detach+0x1c2/0x2b0 drivers/iommu/iommufd/device.c:971
 iommufd_access_change_pt+0x149/0x270 drivers/iommu/iommufd/device.c:1006
 iommufd_access_replace+0xb4/0x120 drivers/iommu/iommufd/device.c:1042
 iommufd_test_access_replace_ioas drivers/iommu/iommufd/selftest.c:1025 [inline]
 iommufd_test+0x103d/0x3f00 drivers/iommu/iommufd/selftest.c:1252
 iommufd_fops_ioctl+0x37d/0x510 drivers/iommu/iommufd/main.c:378
 vfs_ioctl fs/ioctl.c:51 [inline]
 __do_sys_ioctl fs/ioctl.c:870 [inline]
 __se_sys_ioctl fs/ioctl.c:856 [inline]
 __x64_sys_ioctl+0x1a3/0x230 fs/ioctl.c:856
 do_syscall_x64 arch/x86/entry/common.c:50 [inline]
 do_syscall_64+0x3b/0x90 arch/x86/entry/common.c:80
 entry_SYSCALL_64_after_hwframe+0x72/0xdc
RIP: 0033:0x44ff3d
Code: db 48 89 d8 5b 5d 41 5c 41 5d 41 5e c3 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 c7 c1 a8 ff ff ff f7 d8 64 89 01 48
RSP: 002b:00007fff8410fc18 EFLAGS: 00000246 ORIG_RAX: 0000000000000010
RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 000000000044ff3d
RDX: 0000000020000000 RSI: 0000000000003ba0 RDI: 0000000000000003
RBP: 0000000000000001 R08: 0000000000411b40 R09: 0000000000411b40
R10: 0000000000411b40 R11: 0000000000000246 R12: 0000000000000001
R13: 0000000000000000 R14: 00000000004004e8 R15: 0000000000000000
 </TASK>
irq event stamp: 0
hardirqs last  enabled at (0): [<0000000000000000>] 0x0
hardirqs last disabled at (0): [<ffffffff8122d29a>] copy_process+0x256a/0x7650 kernel/fork.c:2448
softirqs last  enabled at (0): [<ffffffff8122d2e2>] copy_process+0x25b2/0x7650 kernel/fork.c:2452
softirqs last disabled at (0): [<0000000000000000>] 0x0
---[ end trace 0000000000000000 ]---
------------[ cut here ]------------
WARNING: CPU: 1 PID: 594 at drivers/iommu/iommufd/io_pagetable.c:1158 iopt_remove_access+0xb5/0xd0 drivers/iommu/iommufd/io_pagetable.c:1157
Modules linked in:
CPU: 1 PID: 594 Comm: syz-executor321 Tainted: G    B   W          6.4.0-rc6-5ca8bbe2b782+ #1
Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
RIP: 0010:iopt_remove_access+0xb5/0xd0 drivers/iommu/iommufd/io_pagetable.c:1157
Code: 45 85 e4 75 29 e8 4b 2d 0b fe 4c 89 ef e8 33 eb e8 fd 48 89 df e8 2b eb e8 fd 5b 41 5c 41 5d 5d c3 cc cc cc cc e8 2b 2d 0b fe <0f> 0b eb b9 e8 22 2d 0b fe 0f 0b eb ce e8 b9 1d 67 fe eb 90 0f 1f
RSP: 0018:ffff8880111d7bd0 EFLAGS: 00010246
RAX: 0000000000000000 RBX: ffff888016d7e8a8 RCX: 0000000000000000
RDX: 0000000000000000 RSI: ffff888011958000 RDI: 0000000000000002
RBP: ffff8880111d7be8 R08: ffffed1002dafd33 R09: ffffed1002dafd33
R10: ffff888016d7e993 R11: ffffed1002dafd32 R12: ffff888019da2800
R13: ffff888016d7e9e8 R14: ffff88800ff9e600 R15: 0000000000000000
FS:  0000000000000000(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
CR2: 00000000004e5420 CR3: 000000000667e000 CR4: 0000000000750ee0
PKRU: 55555554
Call Trace:
 <TASK>
 iommufd_access_destroy_object+0x65/0x170 drivers/iommu/iommufd/device.c:875
 iommufd_object_destroy_user+0x18e/0x220 drivers/iommu/iommufd/main.c:163
 iommufd_access_destroy+0x43/0x70 drivers/iommu/iommufd/device.c:938
 iommufd_test_staccess_release+0x8d/0xd0 drivers/iommu/iommufd/selftest.c:918
 __fput+0x26d/0xa40 fs/file_table.c:321
 ____fput+0x1e/0x30 fs/file_table.c:349
 task_work_run+0x1a4/0x2d0 kernel/task_work.c:179
 exit_task_work include/linux/task_work.h:38 [inline]
 do_exit+0xaf3/0x2f60 kernel/exit.c:874
 do_group_exit+0xe0/0x2b0 kernel/exit.c:1024
 __do_sys_exit_group kernel/exit.c:1035 [inline]
 __se_sys_exit_group kernel/exit.c:1033 [inline]
 __x64_sys_exit_group+0x47/0x50 kernel/exit.c:1033
 do_syscall_x64 arch/x86/entry/common.c:50 [inline]
 do_syscall_64+0x3b/0x90 arch/x86/entry/common.c:80
 entry_SYSCALL_64_after_hwframe+0x72/0xdc
RIP: 0033:0x44de86
Code: Unable to access opcode bytes at 0x44de5c.
RSP: 002b:00007fff8410fbc8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
RAX: ffffffffffffffda RBX: 00000000004e5410 RCX: 000000000044de86
RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffffa8
R10: 0000000000411b40 R11: 0000000000000246 R12: 00000000004e5410
R13: 0000000000000001 R14: 0000000000000000 R15: 0000000000000001
 </TASK>
irq event stamp: 0
hardirqs last  enabled at (0): [<0000000000000000>] 0x0
hardirqs last disabled at (0): [<ffffffff8122d29a>] copy_process+0x256a/0x7650 kernel/fork.c:2448
softirqs last  enabled at (0): [<ffffffff8122d2e2>] copy_process+0x25b2/0x7650 kernel/fork.c:2452
softirqs last disabled at (0): [<0000000000000000>] 0x0
---[ end trace 0000000000000000 ]---
------------[ cut here ]------------
WARNING: CPU: 1 PID: 594 at drivers/iommu/iommufd/io_pagetable.c:663 iopt_destroy_table+0x15f/0x1b0 drivers/iommu/iommufd/io_pagetable.c:663
Modules linked in:
CPU: 1 PID: 594 Comm: syz-executor321 Tainted: G    B   W          6.4.0-rc6-5ca8bbe2b782+ #1
Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
RIP: 0010:iopt_destroy_table+0x15f/0x1b0 drivers/iommu/iommufd/io_pagetable.c:663
Code: 5b 41 5c 41 5d 41 5e 5d c3 cc cc cc cc e8 c9 53 0b fe 0f 0b e9 51 ff ff ff e8 bd 53 0b fe 0f 0b e9 76 ff ff ff e8 b1 53 0b fe <0f> 0b eb 9e e8 a8 53 0b fe 0f 0b e8 a1 53 0b fe 5b 41 5c 41 5d 41
RSP: 0018:ffff8880111d7b78 EFLAGS: 00010246
RAX: 0000000000000000 RBX: 0000000000000000 RCX: 0000000000000000
RDX: 0000000000000000 RSI: ffff888011958000 RDI: 0000000000000002
RBP: ffff8880111d7b98 R08: ffffed1002dafd3e R09: ffffed1002dafd3e
R10: ffff888016d7e9ef R11: ffffed1002dafd3d R12: ffff888016d7ea90
R13: ffff888016d7e8a8 R14: ffffffffffffffff R15: ffff8880111d7c60
FS:  0000000000000000(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
CR2: 00000000004e5420 CR3: 000000000667e000 CR4: 0000000000750ee0
PKRU: 55555554
Call Trace:
 <TASK>
 iommufd_ioas_destroy+0x53/0x70 drivers/iommu/iommufd/ioas.c:19
 iommufd_fops_release+0x1f7/0x370 drivers/iommu/iommufd/main.c:231
 __fput+0x26d/0xa40 fs/file_table.c:321
 ____fput+0x1e/0x30 fs/file_table.c:349
 task_work_run+0x1a4/0x2d0 kernel/task_work.c:179
 exit_task_work include/linux/task_work.h:38 [inline]
 do_exit+0xaf3/0x2f60 kernel/exit.c:874
 do_group_exit+0xe0/0x2b0 kernel/exit.c:1024
 __do_sys_exit_group kernel/exit.c:1035 [inline]
 __se_sys_exit_group kernel/exit.c:1033 [inline]
 __x64_sys_exit_group+0x47/0x50 kernel/exit.c:1033
 do_syscall_x64 arch/x86/entry/common.c:50 [inline]
 do_syscall_64+0x3b/0x90 arch/x86/entry/common.c:80
 entry_SYSCALL_64_after_hwframe+0x72/0xdc
RIP: 0033:0x44de86
Code: Unable to access opcode bytes at 0x44de5c.
RSP: 002b:00007fff8410fbc8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
RAX: ffffffffffffffda RBX: 00000000004e5410 RCX: 000000000044de86
RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffffa8
R10: 0000000000411b40 R11: 0000000000000246 R12: 00000000004e5410
R13: 0000000000000001 R14: 0000000000000000 R15: 0000000000000001
 </TASK>
irq event stamp: 0
hardirqs last  enabled at (0): [<0000000000000000>] 0x0
hardirqs last disabled at (0): [<ffffffff8122d29a>] copy_process+0x256a/0x7650 kernel/fork.c:2448
softirqs last  enabled at (0): [<ffffffff8122d2e2>] copy_process+0x25b2/0x7650 kernel/fork.c:2452
softirqs last disabled at (0): [<0000000000000000>] 0x0
---[ end trace 0000000000000000 ]---
------------[ cut here ]------------
WARNING: CPU: 1 PID: 595 at drivers/iommu/iommufd/io_pagetable.c:1158 iopt_remove_access+0xb5/0xd0 drivers/iommu/iommufd/io_pagetable.c:1157
Modules linked in:
CPU: 1 PID: 595 Comm: syz-executor321 Tainted: G    B   W          6.4.0-rc6-5ca8bbe2b782+ #1
Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
RIP: 0010:iopt_remove_access+0xb5/0xd0 drivers/iommu/iommufd/io_pagetable.c:1157
Code: 45 85 e4 75 29 e8 4b 2d 0b fe 4c 89 ef e8 33 eb e8 fd 48 89 df e8 2b eb e8 fd 5b 41 5c 41 5d 5d c3 cc cc cc cc e8 2b 2d 0b fe <0f> 0b eb b9 e8 22 2d 0b fe 0f 0b eb ce e8 b9 1d 67 fe eb 90 0f 1f
RSP: 0018:ffff8880110efbb8 EFLAGS: 00010246
RAX: 0000000000000000 RBX: ffff8880128580a8 RCX: 0000000000000000
RDX: 0000000000000000 RSI: ffff88801195a500 RDI: 0000000000000002
RBP: ffff8880110efbd0 R08: ffffed100250b033 R09: ffffed100250b033
R10: ffff888012858193 R11: ffffed100250b032 R12: ffff888011359c00
R13: ffff8880128581e8 R14: ffffffff835430e0 R15: ffff8880110efe68
FS:  0000000001a0a3c0(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
CR2: 0000000020000140 CR3: 0000000014510000 CR4: 0000000000750ee0
PKRU: 55555554
Call Trace:
 <TASK>
 __iommufd_access_detach+0x1c2/0x2b0 drivers/iommu/iommufd/device.c:971
 iommufd_access_change_pt+0x149/0x270 drivers/iommu/iommufd/device.c:1006
 iommufd_access_replace+0xb4/0x120 drivers/iommu/iommufd/device.c:1042
 iommufd_test_access_replace_ioas drivers/iommu/iommufd/selftest.c:1025 [inline]
 iommufd_test+0x103d/0x3f00 drivers/iommu/iommufd/selftest.c:1252
 iommufd_fops_ioctl+0x37d/0x510 drivers/iommu/iommufd/main.c:378
 vfs_ioctl fs/ioctl.c:51 [inline]
 __do_sys_ioctl fs/ioctl.c:870 [inline]
 __se_sys_ioctl fs/ioctl.c:856 [inline]
 __x64_sys_ioctl+0x1a3/0x230 fs/ioctl.c:856
 do_syscall_x64 arch/x86/entry/common.c:50 [inline]
 do_syscall_64+0x3b/0x90 arch/x86/entry/common.c:80
 entry_SYSCALL_64_after_hwframe+0x72/0xdc
RIP: 0033:0x44ff3d
Code: db 48 89 d8 5b 5d 41 5c 41 5d 41 5e c3 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 c7 c1 a8 ff ff ff f7 d8 64 89 01 48
RSP: 002b:00007fff8410fc18 EFLAGS: 00000246 ORIG_RAX: 0000000000000010
RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 000000000044ff3d
RDX: 0000000020000000 RSI: 0000000000003ba0 RDI: 0000000000000003
RBP: 0000000000000001 R08: 0000000000411b40 R09: 0000000000411b40
R10: 0000000000411b40 R11: 0000000000000246 R12: 0000000000000001
R13: 0000000000000000 R14: 00000000004004e8 R15: 0000000000000000
 </TASK>
irq event stamp: 0
hardirqs last  enabled at (0): [<0000000000000000>] 0x0
hardirqs last disabled at (0): [<ffffffff8122d29a>] copy_process+0x256a/0x7650 kernel/fork.c:2448
softirqs last  enabled at (0): [<ffffffff8122d2e2>] copy_process+0x25b2/0x7650 kernel/fork.c:2452
softirqs last disabled at (0): [<0000000000000000>] 0x0
---[ end trace 0000000000000000 ]---
------------[ cut here ]------------
WARNING: CPU: 1 PID: 595 at drivers/iommu/iommufd/io_pagetable.c:1158 iopt_remove_access+0xb5/0xd0 drivers/iommu/iommufd/io_pagetable.c:1157
Modules linked in:
CPU: 1 PID: 595 Comm: syz-executor321 Tainted: G    B   W          6.4.0-rc6-5ca8bbe2b782+ #1
Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
RIP: 0010:iopt_remove_access+0xb5/0xd0 drivers/iommu/iommufd/io_pagetable.c:1157
Code: 45 85 e4 75 29 e8 4b 2d 0b fe 4c 89 ef e8 33 eb e8 fd 48 89 df e8 2b eb e8 fd 5b 41 5c 41 5d 5d c3 cc cc cc cc e8 2b 2d 0b fe <0f> 0b eb b9 e8 22 2d 0b fe 0f 0b eb ce e8 b9 1d 67 fe eb 90 0f 1f
RSP: 0018:ffff8880110efbd0 EFLAGS: 00010246
RAX: 0000000000000000 RBX: ffff8880128580a8 RCX: 0000000000000000
RDX: 0000000000000000 RSI: ffff88801195a500 RDI: 0000000000000002
RBP: ffff8880110efbe8 R08: ffffed100250b033 R09: ffffed100250b033
R10: ffff888012858193 R11: ffffed100250b032 R12: ffff888011c82800
R13: ffff8880128581e8 R14: ffff888014767200 R15: 0000000000000000
FS:  0000000000000000(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
CR2: 00000000004e5420 CR3: 000000000667e000 CR4: 0000000000750ee0
PKRU: 55555554
Call Trace:
 <TASK>
 iommufd_access_destroy_object+0x65/0x170 drivers/iommu/iommufd/device.c:875
 iommufd_object_destroy_user+0x18e/0x220 drivers/iommu/iommufd/main.c:163
 iommufd_access_destroy+0x43/0x70 drivers/iommu/iommufd/device.c:938
 iommufd_test_staccess_release+0x8d/0xd0 drivers/iommu/iommufd/selftest.c:918
 __fput+0x26d/0xa40 fs/file_table.c:321
 ____fput+0x1e/0x30 fs/file_table.c:349
 task_work_run+0x1a4/0x2d0 kernel/task_work.c:179
 exit_task_work include/linux/task_work.h:38 [inline]
 do_exit+0xaf3/0x2f60 kernel/exit.c:874
 do_group_exit+0xe0/0x2b0 kernel/exit.c:1024
 __do_sys_exit_group kernel/exit.c:1035 [inline]
 __se_sys_exit_group kernel/exit.c:1033 [inline]
 __x64_sys_exit_group+0x47/0x50 kernel/exit.c:1033
 do_syscall_x64 arch/x86/entry/common.c:50 [inline]
 do_syscall_64+0x3b/0x90 arch/x86/entry/common.c:80
 entry_SYSCALL_64_after_hwframe+0x72/0xdc
RIP: 0033:0x44de86
Code: Unable to access opcode bytes at 0x44de5c.
RSP: 002b:00007fff8410fbc8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
RAX: ffffffffffffffda RBX: 00000000004e5410 RCX: 000000000044de86
RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffffa8
R10: 0000000000411b40 R11: 0000000000000246 R12: 00000000004e5410
R13: 0000000000000001 R14: 0000000000000000 R15: 0000000000000001
 </TASK>
irq event stamp: 0
hardirqs last  enabled at (0): [<0000000000000000>] 0x0
hardirqs last disabled at (0): [<ffffffff8122d29a>] copy_process+0x256a/0x7650 kernel/fork.c:2448
softirqs last  enabled at (0): [<ffffffff8122d2e2>] copy_process+0x25b2/0x7650 kernel/fork.c:2452
softirqs last disabled at (0): [<0000000000000000>] 0x0
---[ end trace 0000000000000000 ]---
------------[ cut here ]------------
WARNING: CPU: 1 PID: 595 at drivers/iommu/iommufd/io_pagetable.c:663 iopt_destroy_table+0x15f/0x1b0 drivers/iommu/iommufd/io_pagetable.c:663
Modules linked in:
CPU: 1 PID: 595 Comm: syz-executor321 Tainted: G    B   W          6.4.0-rc6-5ca8bbe2b782+ #1
Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
RIP: 0010:iopt_destroy_table+0x15f/0x1b0 drivers/iommu/iommufd/io_pagetable.c:663
Code: 5b 41 5c 41 5d 41 5e 5d c3 cc cc cc cc e8 c9 53 0b fe 0f 0b e9 51 ff ff ff e8 bd 53 0b fe 0f 0b e9 76 ff ff ff e8 b1 53 0b fe <0f> 0b eb 9e e8 a8 53 0b fe 0f 0b e8 a1 53 0b fe 5b 41 5c 41 5d 41
RSP: 0018:ffff8880110efb78 EFLAGS: 00010246
RAX: 0000000000000000 RBX: 0000000000000000 RCX: 0000000000000000
RDX: 0000000000000000 RSI: ffff88801195a500 RDI: 0000000000000002
RBP: ffff8880110efb98 R08: ffffed100250b03e R09: ffffed100250b03e
R10: ffff8880128581ef R11: ffffed100250b03d R12: ffff888012858290
R13: ffff8880128580a8 R14: ffffffffffffffff R15: ffff8880110efc60
FS:  0000000000000000(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
CR2: 00000000004e5420 CR3: 000000000667e000 CR4: 0000000000750ee0
PKRU: 55555554
Call Trace:
 <TASK>
 iommufd_ioas_destroy+0x53/0x70 drivers/iommu/iommufd/ioas.c:19
 iommufd_fops_release+0x1f7/0x370 drivers/iommu/iommufd/main.c:231
 __fput+0x26d/0xa40 fs/file_table.c:321
 ____fput+0x1e/0x30 fs/file_table.c:349
 task_work_run+0x1a4/0x2d0 kernel/task_work.c:179
 exit_task_work include/linux/task_work.h:38 [inline]
 do_exit+0xaf3/0x2f60 kernel/exit.c:874
 do_group_exit+0xe0/0x2b0 kernel/exit.c:1024
 __do_sys_exit_group kernel/exit.c:1035 [inline]
 __se_sys_exit_group kernel/exit.c:1033 [inline]
 __x64_sys_exit_group+0x47/0x50 kernel/exit.c:1033
 do_syscall_x64 arch/x86/entry/common.c:50 [inline]
 do_syscall_64+0x3b/0x90 arch/x86/entry/common.c:80
 entry_SYSCALL_64_after_hwframe+0x72/0xdc
RIP: 0033:0x44de86
Code: Unable to access opcode bytes at 0x44de5c.
RSP: 002b:00007fff8410fbc8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
RAX: ffffffffffffffda RBX: 00000000004e5410 RCX: 000000000044de86
RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffffa8
R10: 0000000000411b40 R11: 0000000000000246 R12: 00000000004e5410
R13: 0000000000000001 R14: 0000000000000000 R15: 0000000000000001
 </TASK>
irq event stamp: 0
hardirqs last  enabled at (0): [<0000000000000000>] 0x0
hardirqs last disabled at (0): [<ffffffff8122d29a>] copy_process+0x256a/0x7650 kernel/fork.c:2448
softirqs last  enabled at (0): [<ffffffff8122d2e2>] copy_process+0x25b2/0x7650 kernel/fork.c:2452
softirqs last disabled at (0): [<0000000000000000>] 0x0
---[ end trace 0000000000000000 ]---
------------[ cut here ]------------
WARNING: CPU: 1 PID: 596 at drivers/iommu/iommufd/io_pagetable.c:1158 iopt_remove_access+0xb5/0xd0 drivers/iommu/iommufd/io_pagetable.c:1157
Modules linked in:
CPU: 1 PID: 596 Comm: syz-executor321 Tainted: G    B   W          6.4.0-rc6-5ca8bbe2b782+ #1
Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
RIP: 0010:iopt_remove_access+0xb5/0xd0 drivers/iommu/iommufd/io_pagetable.c:1157
Code: 45 85 e4 75 29 e8 4b 2d 0b fe 4c 89 ef e8 33 eb e8 fd 48 89 df e8 2b eb e8 fd 5b 41 5c 41 5d 5d c3 cc cc cc cc e8 2b 2d 0b fe <0f> 0b eb b9 e8 22 2d 0b fe 0f 0b eb ce e8 b9 1d 67 fe eb 90 0f 1f
RSP: 0018:ffff8880167cfbb8 EFLAGS: 00010246
RAX: 0000000000000000 RBX: ffff8880114aa8a8 RCX: 0000000000000000
RDX: 0000000000000000 RSI: ffff88801195ca00 RDI: 0000000000000002
RBP: ffff8880167cfbd0 R08: ffffed1002295533 R09: ffffed1002295533
R10: ffff8880114aa993 R11: ffffed1002295532 R12: ffff888019fed800
R13: ffff8880114aa9e8 R14: ffffffff835430e0 R15: ffff8880167cfe68
FS:  0000000001a0a3c0(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
CR2: 0000000020000140 CR3: 000000001589e000 CR4: 0000000000750ee0
PKRU: 55555554
Call Trace:
 <TASK>
 __iommufd_access_detach+0x1c2/0x2b0 drivers/iommu/iommufd/device.c:971
 iommufd_access_change_pt+0x149/0x270 drivers/iommu/iommufd/device.c:1006
 iommufd_access_replace+0xb4/0x120 drivers/iommu/iommufd/device.c:1042
 iommufd_test_access_replace_ioas drivers/iommu/iommufd/selftest.c:1025 [inline]
 iommufd_test+0x103d/0x3f00 drivers/iommu/iommufd/selftest.c:1252
 iommufd_fops_ioctl+0x37d/0x510 drivers/iommu/iommufd/main.c:378
 vfs_ioctl fs/ioctl.c:51 [inline]
 __do_sys_ioctl fs/ioctl.c:870 [inline]
 __se_sys_ioctl fs/ioctl.c:856 [inline]
 __x64_sys_ioctl+0x1a3/0x230 fs/ioctl.c:856
 do_syscall_x64 arch/x86/entry/common.c:50 [inline]
 do_syscall_64+0x3b/0x90 arch/x86/entry/common.c:80
 entry_SYSCALL_64_after_hwframe+0x72/0xdc
RIP: 0033:0x44ff3d
Code: db 48 89 d8 5b 5d 41 5c 41 5d 41 5e c3 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 c7 c1 a8 ff ff ff f7 d8 64 89 01 48
RSP: 002b:00007fff8410fc18 EFLAGS: 00000246 ORIG_RAX: 0000000000000010
RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 000000000044ff3d
RDX: 0000000020000000 RSI: 0000000000003ba0 RDI: 0000000000000003
RBP: 0000000000000001 R08: 0000000000411b40 R09: 0000000000411b40
R10: 0000000000411b40 R11: 0000000000000246 R12: 0000000000000001
R13: 0000000000000000 R14: 00000000004004e8 R15: 0000000000000000
 </TASK>
irq event stamp: 0
hardirqs last  enabled at (0): [<0000000000000000>] 0x0
hardirqs last disabled at (0): [<ffffffff8122d29a>] copy_process+0x256a/0x7650 kernel/fork.c:2448
softirqs last  enabled at (0): [<ffffffff8122d2e2>] copy_process+0x25b2/0x7650 kernel/fork.c:2452
softirqs last disabled at (0): [<0000000000000000>] 0x0
---[ end trace 0000000000000000 ]---
------------[ cut here ]------------
WARNING: CPU: 1 PID: 596 at drivers/iommu/iommufd/io_pagetable.c:1158 iopt_remove_access+0xb5/0xd0 drivers/iommu/iommufd/io_pagetable.c:1157
Modules linked in:
CPU: 1 PID: 596 Comm: syz-executor321 Tainted: G    B   W          6.4.0-rc6-5ca8bbe2b782+ #1
Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
RIP: 0010:iopt_remove_access+0xb5/0xd0 drivers/iommu/iommufd/io_pagetable.c:1157
Code: 45 85 e4 75 29 e8 4b 2d 0b fe 4c 89 ef e8 33 eb e8 fd 48 89 df e8 2b eb e8 fd 5b 41 5c 41 5d 5d c3 cc cc cc cc e8 2b 2d 0b fe <0f> 0b eb b9 e8 22 2d 0b fe 0f 0b eb ce e8 b9 1d 67 fe eb 90 0f 1f
RSP: 0018:ffff8880167cfbd0 EFLAGS: 00010246
RAX: 0000000000000000 RBX: ffff8880114aa8a8 RCX: 0000000000000000
RDX: 0000000000000000 RSI: ffff88801195ca00 RDI: 0000000000000002
RBP: ffff8880167cfbe8 R08: ffffed1002295533 R09: ffffed1002295533
R10: ffff8880114aa993 R11: ffffed1002295532 R12: ffff888011358c00
R13: ffff8880114aa9e8 R14: ffff88800f601b00 R15: 0000000000000000
FS:  0000000000000000(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
CR2: 00000000004e5420 CR3: 000000000667e000 CR4: 0000000000750ee0
PKRU: 55555554
Call Trace:
 <TASK>
 iommufd_access_destroy_object+0x65/0x170 drivers/iommu/iommufd/device.c:875
 iommufd_object_destroy_user+0x18e/0x220 drivers/iommu/iommufd/main.c:163
 iommufd_access_destroy+0x43/0x70 drivers/iommu/iommufd/device.c:938
 iommufd_test_staccess_release+0x8d/0xd0 drivers/iommu/iommufd/selftest.c:918
 __fput+0x26d/0xa40 fs/file_table.c:321
 ____fput+0x1e/0x30 fs/file_table.c:349
 task_work_run+0x1a4/0x2d0 kernel/task_work.c:179
 exit_task_work include/linux/task_work.h:38 [inline]
 do_exit+0xaf3/0x2f60 kernel/exit.c:874
 do_group_exit+0xe0/0x2b0 kernel/exit.c:1024
 __do_sys_exit_group kernel/exit.c:1035 [inline]
 __se_sys_exit_group kernel/exit.c:1033 [inline]
 __x64_sys_exit_group+0x47/0x50 kernel/exit.c:1033
 do_syscall_x64 arch/x86/entry/common.c:50 [inline]
 do_syscall_64+0x3b/0x90 arch/x86/entry/common.c:80
 entry_SYSCALL_64_after_hwframe+0x72/0xdc
RIP: 0033:0x44de86
Code: Unable to access opcode bytes at 0x44de5c.
RSP: 002b:00007fff8410fbc8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
RAX: ffffffffffffffda RBX: 00000000004e5410 RCX: 000000000044de86
RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffffa8
R10: 0000000000411b40 R11: 0000000000000246 R12: 00000000004e5410
R13: 0000000000000001 R14: 0000000000000000 R15: 0000000000000001
 </TASK>
irq event stamp: 0
hardirqs last  enabled at (0): [<0000000000000000>] 0x0
hardirqs last disabled at (0): [<ffffffff8122d29a>] copy_process+0x256a/0x7650 kernel/fork.c:2448
softirqs last  enabled at (0): [<ffffffff8122d2e2>] copy_process+0x25b2/0x7650 kernel/fork.c:2452
softirqs last disabled at (0): [<0000000000000000>] 0x0
---[ end trace 0000000000000000 ]---
------------[ cut here ]------------
WARNING: CPU: 1 PID: 596 at drivers/iommu/iommufd/io_pagetable.c:663 iopt_destroy_table+0x15f/0x1b0 drivers/iommu/iommufd/io_pagetable.c:663
Modules linked in:
CPU: 1 PID: 596 Comm: syz-executor321 Tainted: G    B   W          6.4.0-rc6-5ca8bbe2b782+ #1
Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
RIP: 0010:iopt_destroy_table+0x15f/0x1b0 drivers/iommu/iommufd/io_pagetable.c:663
Code: 5b 41 5c 41 5d 41 5e 5d c3 cc cc cc cc e8 c9 53 0b fe 0f 0b e9 51 ff ff ff e8 bd 53 0b fe 0f 0b e9 76 ff ff ff e8 b1 53 0b fe <0f> 0b eb 9e e8 a8 53 0b fe 0f 0b e8 a1 53 0b fe 5b 41 5c 41 5d 41
RSP: 0018:ffff8880167cfb78 EFLAGS: 00010246
RAX: 0000000000000000 RBX: 0000000000000000 RCX: 0000000000000000
RDX: 0000000000000000 RSI: ffff88801195ca00 RDI: 0000000000000002
RBP: ffff8880167cfb98 R08: ffffed100229553e R09: ffffed100229553e
R10: ffff8880114aa9ef R11: ffffed100229553d R12: ffff8880114aaa90
R13: ffff8880114aa8a8 R14: ffffffffffffffff R15: ffff8880167cfc60
FS:  0000000000000000(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
CR2: 00000000004e5420 CR3: 000000000667e000 CR4: 0000000000750ee0
PKRU: 55555554
Call Trace:
 <TASK>
 iommufd_ioas_destroy+0x53/0x70 drivers/iommu/iommufd/ioas.c:19
 iommufd_fops_release+0x1f7/0x370 drivers/iommu/iommufd/main.c:231
 __fput+0x26d/0xa40 fs/file_table.c:321
 ____fput+0x1e/0x30 fs/file_table.c:349
 task_work_run+0x1a4/0x2d0 kernel/task_work.c:179
 exit_task_work include/linux/task_work.h:38 [inline]
 do_exit+0xaf3/0x2f60 kernel/exit.c:874
 do_group_exit+0xe0/0x2b0 kernel/exit.c:1024
 __do_sys_exit_group kernel/exit.c:1035 [inline]
 __se_sys_exit_group kernel/exit.c:1033 [inline]
 __x64_sys_exit_group+0x47/0x50 kernel/exit.c:1033
 do_syscall_x64 arch/x86/entry/common.c:50 [inline]
 do_syscall_64+0x3b/0x90 arch/x86/entry/common.c:80
 entry_SYSCALL_64_after_hwframe+0x72/0xdc
RIP: 0033:0x44de86
Code: Unable to access opcode bytes at 0x44de5c.
RSP: 002b:00007fff8410fbc8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
RAX: ffffffffffffffda RBX: 00000000004e5410 RCX: 000000000044de86
RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffffa8
R10: 0000000000411b40 R11: 0000000000000246 R12: 00000000004e5410
R13: 0000000000000001 R14: 0000000000000000 R15: 0000000000000001
 </TASK>
irq event stamp: 0
hardirqs last  enabled at (0): [<0000000000000000>] 0x0
hardirqs last disabled at (0): [<ffffffff8122d29a>] copy_process+0x256a/0x7650 kernel/fork.c:2448
softirqs last  enabled at (0): [<ffffffff8122d2e2>] copy_process+0x25b2/0x7650 kernel/fork.c:2452
softirqs last disabled at (0): [<0000000000000000>] 0x0
---[ end trace 0000000000000000 ]---
------------[ cut here ]------------
WARNING: CPU: 1 PID: 597 at drivers/iommu/iommufd/io_pagetable.c:1158 iopt_remove_access+0xb5/0xd0 drivers/iommu/iommufd/io_pagetable.c:1157
Modules linked in:
CPU: 1 PID: 597 Comm: syz-executor321 Tainted: G    B   W          6.4.0-rc6-5ca8bbe2b782+ #1
Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
RIP: 0010:iopt_remove_access+0xb5/0xd0 drivers/iommu/iommufd/io_pagetable.c:1157
Code: 45 85 e4 75 29 e8 4b 2d 0b fe 4c 89 ef e8 33 eb e8 fd 48 89 df e8 2b eb e8 fd 5b 41 5c 41 5d 5d c3 cc cc cc cc e8 2b 2d 0b fe <0f> 0b eb b9 e8 22 2d 0b fe 0f 0b eb ce e8 b9 1d 67 fe eb 90 0f 1f
RSP: 0018:ffff8880188a7bb8 EFLAGS: 00010246
RAX: 0000000000000000 RBX: ffff8880110e98a8 RCX: 0000000000000000
RDX: 0000000000000000 RSI: ffff8880127f4a00 RDI: 0000000000000002
RBP: ffff8880188a7bd0 R08: ffffed100221d333 R09: ffffed100221d333
R10: ffff8880110e9993 R11: ffffed100221d332 R12: ffff888019e33400
R13: ffff8880110e99e8 R14: ffffffff835430e0 R15: ffff8880188a7e68
FS:  0000000001a0a3c0(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
CR2: 0000000020000140 CR3: 0000000016d3c000 CR4: 0000000000750ee0
PKRU: 55555554
Call Trace:
 <TASK>
 __iommufd_access_detach+0x1c2/0x2b0 drivers/iommu/iommufd/device.c:971
 iommufd_access_change_pt+0x149/0x270 drivers/iommu/iommufd/device.c:1006
 iommufd_access_replace+0xb4/0x120 drivers/iommu/iommufd/device.c:1042
 iommufd_test_access_replace_ioas drivers/iommu/iommufd/selftest.c:1025 [inline]
 iommufd_test+0x103d/0x3f00 drivers/iommu/iommufd/selftest.c:1252
 iommufd_fops_ioctl+0x37d/0x510 drivers/iommu/iommufd/main.c:378
 vfs_ioctl fs/ioctl.c:51 [inline]
 __do_sys_ioctl fs/ioctl.c:870 [inline]
 __se_sys_ioctl fs/ioctl.c:856 [inline]
 __x64_sys_ioctl+0x1a3/0x230 fs/ioctl.c:856
 do_syscall_x64 arch/x86/entry/common.c:50 [inline]
 do_syscall_64+0x3b/0x90 arch/x86/entry/common.c:80
 entry_SYSCALL_64_after_hwframe+0x72/0xdc
RIP: 0033:0x44ff3d
Code: db 48 89 d8 5b 5d 41 5c 41 5d 41 5e c3 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 c7 c1 a8 ff ff ff f7 d8 64 89 01 48
RSP: 002b:00007fff8410fc18 EFLAGS: 00000246 ORIG_RAX: 0000000000000010
RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 000000000044ff3d
RDX: 0000000020000000 RSI: 0000000000003ba0 RDI: 0000000000000003
RBP: 0000000000000001 R08: 0000000000411b40 R09: 0000000000411b40
R10: 0000000000411b40 R11: 0000000000000246 R12: 0000000000000001
R13: 0000000000000000 R14: 00000000004004e8 R15: 0000000000000000
 </TASK>
irq event stamp: 0
hardirqs last  enabled at (0): [<0000000000000000>] 0x0
hardirqs last disabled at (0): [<ffffffff8122d29a>] copy_process+0x256a/0x7650 kernel/fork.c:2448
softirqs last  enabled at (0): [<ffffffff8122d2e2>] copy_process+0x25b2/0x7650 kernel/fork.c:2452
softirqs last disabled at (0): [<0000000000000000>] 0x0
---[ end trace 0000000000000000 ]---
------------[ cut here ]------------
WARNING: CPU: 1 PID: 597 at drivers/iommu/iommufd/io_pagetable.c:1158 iopt_remove_access+0xb5/0xd0 drivers/iommu/iommufd/io_pagetable.c:1157
Modules linked in:
CPU: 1 PID: 597 Comm: syz-executor321 Tainted: G    B   W          6.4.0-rc6-5ca8bbe2b782+ #1
Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
RIP: 0010:iopt_remove_access+0xb5/0xd0 drivers/iommu/iommufd/io_pagetable.c:1157
Code: 45 85 e4 75 29 e8 4b 2d 0b fe 4c 89 ef e8 33 eb e8 fd 48 89 df e8 2b eb e8 fd 5b 41 5c 41 5d 5d c3 cc cc cc cc e8 2b 2d 0b fe <0f> 0b eb b9 e8 22 2d 0b fe 0f 0b eb ce e8 b9 1d 67 fe eb 90 0f 1f
RSP: 0018:ffff8880188a7bd0 EFLAGS: 00010246
RAX: 0000000000000000 RBX: ffff8880110e98a8 RCX: 0000000000000000
RDX: 0000000000000000 RSI: ffff8880127f4a00 RDI: 0000000000000002
RBP: ffff8880188a7be8 R08: ffffed100221d333 R09: ffffed100221d333
R10: ffff8880110e9993 R11: ffffed100221d332 R12: ffff888019fec400
R13: ffff8880110e99e8 R14: ffff8880152fc700 R15: 0000000000000000
FS:  0000000000000000(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
CR2: 00000000004e5420 CR3: 000000000667e000 CR4: 0000000000750ee0
PKRU: 55555554
Call Trace:
 <TASK>
 iommufd_access_destroy_object+0x65/0x170 drivers/iommu/iommufd/device.c:875
 iommufd_object_destroy_user+0x18e/0x220 drivers/iommu/iommufd/main.c:163
 iommufd_access_destroy+0x43/0x70 drivers/iommu/iommufd/device.c:938
 iommufd_test_staccess_release+0x8d/0xd0 drivers/iommu/iommufd/selftest.c:918
 __fput+0x26d/0xa40 fs/file_table.c:321
 ____fput+0x1e/0x30 fs/file_table.c:349
 task_work_run+0x1a4/0x2d0 kernel/task_work.c:179
 exit_task_work include/linux/task_work.h:38 [inline]
 do_exit+0xaf3/0x2f60 kernel/exit.c:874
 do_group_exit+0xe0/0x2b0 kernel/exit.c:1024
 __do_sys_exit_group kernel/exit.c:1035 [inline]
 __se_sys_exit_group kernel/exit.c:1033 [inline]
 __x64_sys_exit_group+0x47/0x50 kernel/exit.c:1033
 do_syscall_x64 arch/x86/entry/common.c:50 [inline]
 do_syscall_64+0x3b/0x90 arch/x86/entry/common.c:80
 entry_SYSCALL_64_after_hwframe+0x72/0xdc
RIP: 0033:0x44de86
Code: Unable to access opcode bytes at 0x44de5c.
RSP: 002b:00007fff8410fbc8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
RAX: ffffffffffffffda RBX: 00000000004e5410 RCX: 000000000044de86
RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffffa8
R10: 0000000000411b40 R11: 0000000000000246 R12: 00000000004e5410
R13: 0000000000000001 R14: 0000000000000000 R15: 0000000000000001
 </TASK>
irq event stamp: 0
hardirqs last  enabled at (0): [<0000000000000000>] 0x0
hardirqs last disabled at (0): [<ffffffff8122d29a>] copy_process+0x256a/0x7650 kernel/fork.c:2448
softirqs last  enabled at (0): [<ffffffff8122d2e2>] copy_process+0x25b2/0x7650 kernel/fork.c:2452
softirqs last disabled at (0): [<0000000000000000>] 0x0
---[ end trace 0000000000000000 ]---
------------[ cut here ]------------
WARNING: CPU: 1 PID: 597 at drivers/iommu/iommufd/io_pagetable.c:663 iopt_destroy_table+0x15f/0x1b0 drivers/iommu/iommufd/io_pagetable.c:663
Modules linked in:
CPU: 1 PID: 597 Comm: syz-executor321 Tainted: G    B   W          6.4.0-rc6-5ca8bbe2b782+ #1
Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
RIP: 0010:iopt_destroy_table+0x15f/0x1b0 drivers/iommu/iommufd/io_pagetable.c:663
Code: 5b 41 5c 41 5d 41 5e 5d c3 cc cc cc cc e8 c9 53 0b fe 0f 0b e9 51 ff ff ff e8 bd 53 0b fe 0f 0b e9 76 ff ff ff e8 b1 53 0b fe <0f> 0b eb 9e e8 a8 53 0b fe 0f 0b e8 a1 53 0b fe 5b 41 5c 41 5d 41
RSP: 0018:ffff8880188a7b78 EFLAGS: 00010246
RAX: 0000000000000000 RBX: 0000000000000000 RCX: 0000000000000000
RDX: 0000000000000000 RSI: ffff8880127f4a00 RDI: 0000000000000002
RBP: ffff8880188a7b98 R08: ffffed100221d33e R09: ffffed100221d33e
R10: ffff8880110e99ef R11: ffffed100221d33d R12: ffff8880110e9a90
R13: ffff8880110e98a8 R14: ffffffffffffffff R15: ffff8880188a7c60
FS:  0000000000000000(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
CR2: 00007f97c0987000 CR3: 0000000014616000 CR4: 0000000000750ee0
PKRU: 55555554
Call Trace:
 <TASK>
 iommufd_ioas_destroy+0x53/0x70 drivers/iommu/iommufd/ioas.c:19
 iommufd_fops_release+0x1f7/0x370 drivers/iommu/iommufd/main.c:231
 __fput+0x26d/0xa40 fs/file_table.c:321
 ____fput+0x1e/0x30 fs/file_table.c:349
 task_work_run+0x1a4/0x2d0 kernel/task_work.c:179
 exit_task_work include/linux/task_work.h:38 [inline]
 do_exit+0xaf3/0x2f60 kernel/exit.c:874
 do_group_exit+0xe0/0x2b0 kernel/exit.c:1024
 __do_sys_exit_group kernel/exit.c:1035 [inline]
 __se_sys_exit_group kernel/exit.c:1033 [inline]
 __x64_sys_exit_group+0x47/0x50 kernel/exit.c:1033
 do_syscall_x64 arch/x86/entry/common.c:50 [inline]
 do_syscall_64+0x3b/0x90 arch/x86/entry/common.c:80
 entry_SYSCALL_64_after_hwframe+0x72/0xdc
RIP: 0033:0x44de86
Code: Unable to access opcode bytes at 0x44de5c.
RSP: 002b:00007fff8410fbc8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
RAX: ffffffffffffffda RBX: 00000000004e5410 RCX: 000000000044de86
RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffffa8
R10: 0000000000411b40 R11: 0000000000000246 R12: 00000000004e5410
R13: 0000000000000001 R14: 0000000000000000 R15: 0000000000000001
 </TASK>
irq event stamp: 0
hardirqs last  enabled at (0): [<0000000000000000>] 0x0
hardirqs last disabled at (0): [<ffffffff8122d29a>] copy_process+0x256a/0x7650 kernel/fork.c:2448
softirqs last  enabled at (0): [<ffffffff8122d2e2>] copy_process+0x25b2/0x7650 kernel/fork.c:2452
softirqs last disabled at (0): [<0000000000000000>] 0x0
---[ end trace 0000000000000000 ]---
------------[ cut here ]------------
WARNING: CPU: 1 PID: 598 at drivers/iommu/iommufd/io_pagetable.c:1158 iopt_remove_access+0xb5/0xd0 drivers/iommu/iommufd/io_pagetable.c:1157
Modules linked in:
CPU: 1 PID: 598 Comm: syz-executor321 Tainted: G    B   W          6.4.0-rc6-5ca8bbe2b782+ #1
Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
RIP: 0010:iopt_remove_access+0xb5/0xd0 drivers/iommu/iommufd/io_pagetable.c:1157
Code: 45 85 e4 75 29 e8 4b 2d 0b fe 4c 89 ef e8 33 eb e8 fd 48 89 df e8 2b eb e8 fd 5b 41 5c 41 5d 5d c3 cc cc cc cc e8 2b 2d 0b fe <0f> 0b eb b9 e8 22 2d 0b fe 0f 0b eb ce e8 b9 1d 67 fe eb 90 0f 1f
RSP: 0018:ffff888021dcfbb8 EFLAGS: 00010246
RAX: 0000000000000000 RBX: ffff888016af68a8 RCX: 0000000000000000
RDX: 0000000000000000 RSI: ffff88801535ca00 RDI: 0000000000000002
RBP: ffff888021dcfbd0 R08: ffffed1002d5ed33 R09: ffffed1002d5ed33
R10: ffff888016af6993 R11: ffffed1002d5ed32 R12: ffff888019e51800
R13: ffff888016af69e8 R14: ffffffff835430e0 R15: ffff888021dcfe68
FS:  0000000001a0a3c0(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
CR2: 0000000020000140 CR3: 000000001473a000 CR4: 0000000000750ee0
PKRU: 55555554
Call Trace:
 <TASK>
 __iommufd_access_detach+0x1c2/0x2b0 drivers/iommu/iommufd/device.c:971
 iommufd_access_change_pt+0x149/0x270 drivers/iommu/iommufd/device.c:1006
 iommufd_access_replace+0xb4/0x120 drivers/iommu/iommufd/device.c:1042
 iommufd_test_access_replace_ioas drivers/iommu/iommufd/selftest.c:1025 [inline]
 iommufd_test+0x103d/0x3f00 drivers/iommu/iommufd/selftest.c:1252
 iommufd_fops_ioctl+0x37d/0x510 drivers/iommu/iommufd/main.c:378
 vfs_ioctl fs/ioctl.c:51 [inline]
 __do_sys_ioctl fs/ioctl.c:870 [inline]
 __se_sys_ioctl fs/ioctl.c:856 [inline]
 __x64_sys_ioctl+0x1a3/0x230 fs/ioctl.c:856
 do_syscall_x64 arch/x86/entry/common.c:50 [inline]
 do_syscall_64+0x3b/0x90 arch/x86/entry/common.c:80
 entry_SYSCALL_64_after_hwframe+0x72/0xdc
RIP: 0033:0x44ff3d
Code: db 48 89 d8 5b 5d 41 5c 41 5d 41 5e c3 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 c7 c1 a8 ff ff ff f7 d8 64 89 01 48
RSP: 002b:00007fff8410fc18 EFLAGS: 00000246 ORIG_RAX: 0000000000000010
RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 000000000044ff3d
RDX: 0000000020000000 RSI: 0000000000003ba0 RDI: 0000000000000003
RBP: 0000000000000001 R08: 0000000000411b40 R09: 0000000000411b40
R10: 0000000000411b40 R11: 0000000000000246 R12: 0000000000000001
R13: 0000000000000000 R14: 00000000004004e8 R15: 0000000000000000
 </TASK>
irq event stamp: 0
hardirqs last  enabled at (0): [<0000000000000000>] 0x0
hardirqs last disabled at (0): [<ffffffff8122d29a>] copy_process+0x256a/0x7650 kernel/fork.c:2448
softirqs last  enabled at (0): [<ffffffff8122d2e2>] copy_process+0x25b2/0x7650 kernel/fork.c:2452
softirqs last disabled at (0): [<0000000000000000>] 0x0
---[ end trace 0000000000000000 ]---
------------[ cut here ]------------
WARNING: CPU: 1 PID: 598 at drivers/iommu/iommufd/io_pagetable.c:1158 iopt_remove_access+0xb5/0xd0 drivers/iommu/iommufd/io_pagetable.c:1157
Modules linked in:
CPU: 1 PID: 598 Comm: syz-executor321 Tainted: G    B   W          6.4.0-rc6-5ca8bbe2b782+ #1
Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
RIP: 0010:iopt_remove_access+0xb5/0xd0 drivers/iommu/iommufd/io_pagetable.c:1157
Code: 45 85 e4 75 29 e8 4b 2d 0b fe 4c 89 ef e8 33 eb e8 fd 48 89 df e8 2b eb e8 fd 5b 41 5c 41 5d 5d c3 cc cc cc cc e8 2b 2d 0b fe <0f> 0b eb b9 e8 22 2d 0b fe 0f 0b eb ce e8 b9 1d 67 fe eb 90 0f 1f
RSP: 0018:ffff888021dcfbd0 EFLAGS: 00010246
RAX: 0000000000000000 RBX: ffff888016af68a8 RCX: 0000000000000000
RDX: 0000000000000000 RSI: ffff88801535ca00 RDI: 0000000000000002
RBP: ffff888021dcfbe8 R08: ffffed1002d5ed33 R09: ffffed1002d5ed33
R10: ffff888016af6993 R11: ffffed1002d5ed32 R12: ffff888019e33000
R13: ffff888016af69e8 R14: ffff888010329a00 R15: 0000000000000000
FS:  0000000000000000(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
CR2: 00000000004e5420 CR3: 000000000667e000 CR4: 0000000000750ee0
PKRU: 55555554
Call Trace:
 <TASK>
 iommufd_access_destroy_object+0x65/0x170 drivers/iommu/iommufd/device.c:875
 iommufd_object_destroy_user+0x18e/0x220 drivers/iommu/iommufd/main.c:163
 iommufd_access_destroy+0x43/0x70 drivers/iommu/iommufd/device.c:938
 iommufd_test_staccess_release+0x8d/0xd0 drivers/iommu/iommufd/selftest.c:918
 __fput+0x26d/0xa40 fs/file_table.c:321
 ____fput+0x1e/0x30 fs/file_table.c:349
 task_work_run+0x1a4/0x2d0 kernel/task_work.c:179
 exit_task_work include/linux/task_work.h:38 [inline]
 do_exit+0xaf3/0x2f60 kernel/exit.c:874
 do_group_exit+0xe0/0x2b0 kernel/exit.c:1024
 __do_sys_exit_group kernel/exit.c:1035 [inline]
 __se_sys_exit_group kernel/exit.c:1033 [inline]
 __x64_sys_exit_group+0x47/0x50 kernel/exit.c:1033
 do_syscall_x64 arch/x86/entry/common.c:50 [inline]
 do_syscall_64+0x3b/0x90 arch/x86/entry/common.c:80
 entry_SYSCALL_64_after_hwframe+0x72/0xdc
RIP: 0033:0x44de86
Code: Unable to access opcode bytes at 0x44de5c.
RSP: 002b:00007fff8410fbc8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
RAX: ffffffffffffffda RBX: 00000000004e5410 RCX: 000000000044de86
RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffffa8
R10: 0000000000411b40 R11: 0000000000000246 R12: 00000000004e5410
R13: 0000000000000001 R14: 0000000000000000 R15: 0000000000000001
 </TASK>
irq event stamp: 0
hardirqs last  enabled at (0): [<0000000000000000>] 0x0
hardirqs last disabled at (0): [<ffffffff8122d29a>] copy_process+0x256a/0x7650 kernel/fork.c:2448
softirqs last  enabled at (0): [<ffffffff8122d2e2>] copy_process+0x25b2/0x7650 kernel/fork.c:2452
softirqs last disabled at (0): [<0000000000000000>] 0x0
---[ end trace 0000000000000000 ]---
------------[ cut here ]------------
WARNING: CPU: 1 PID: 598 at drivers/iommu/iommufd/io_pagetable.c:663 iopt_destroy_table+0x15f/0x1b0 drivers/iommu/iommufd/io_pagetable.c:663
Modules linked in:
CPU: 1 PID: 598 Comm: syz-executor321 Tainted: G    B   W          6.4.0-rc6-5ca8bbe2b782+ #1
Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
RIP: 0010:iopt_destroy_table+0x15f/0x1b0 drivers/iommu/iommufd/io_pagetable.c:663
Code: 5b 41 5c 41 5d 41 5e 5d c3 cc cc cc cc e8 c9 53 0b fe 0f 0b e9 51 ff ff ff e8 bd 53 0b fe 0f 0b e9 76 ff ff ff e8 b1 53 0b fe <0f> 0b eb 9e e8 a8 53 0b fe 0f 0b e8 a1 53 0b fe 5b 41 5c 41 5d 41
RSP: 0018:ffff888021dcfb78 EFLAGS: 00010246
RAX: 0000000000000000 RBX: 0000000000000000 RCX: 0000000000000000
RDX: 0000000000000000 RSI: ffff88801535ca00 RDI: 0000000000000002
RBP: ffff888021dcfb98 R08: ffffed1002d5ed3e R09: ffffed1002d5ed3e
R10: ffff888016af69ef R11: ffffed1002d5ed3d R12: ffff888016af6a90
R13: ffff888016af68a8 R14: ffffffffffffffff R15: ffff888021dcfc60
FS:  0000000000000000(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
CR2: 00007f97c096b000 CR3: 0000000014616000 CR4: 0000000000750ee0
PKRU: 55555554
Call Trace:
 <TASK>
 iommufd_ioas_destroy+0x53/0x70 drivers/iommu/iommufd/ioas.c:19
 iommufd_fops_release+0x1f7/0x370 drivers/iommu/iommufd/main.c:231
 __fput+0x26d/0xa40 fs/file_table.c:321
 ____fput+0x1e/0x30 fs/file_table.c:349
 task_work_run+0x1a4/0x2d0 kernel/task_work.c:179
 exit_task_work include/linux/task_work.h:38 [inline]
 do_exit+0xaf3/0x2f60 kernel/exit.c:874
 do_group_exit+0xe0/0x2b0 kernel/exit.c:1024
 __do_sys_exit_group kernel/exit.c:1035 [inline]
 __se_sys_exit_group kernel/exit.c:1033 [inline]
 __x64_sys_exit_group+0x47/0x50 kernel/exit.c:1033
 do_syscall_x64 arch/x86/entry/common.c:50 [inline]
 do_syscall_64+0x3b/0x90 arch/x86/entry/common.c:80
 entry_SYSCALL_64_after_hwframe+0x72/0xdc
RIP: 0033:0x44de86
Code: Unable to access opcode bytes at 0x44de5c.
RSP: 002b:00007fff8410fbc8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
RAX: ffffffffffffffda RBX: 00000000004e5410 RCX: 000000000044de86
RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffffa8
R10: 0000000000411b40 R11: 0000000000000246 R12: 00000000004e5410
R13: 0000000000000001 R14: 0000000000000000 R15: 0000000000000001
 </TASK>
irq event stamp: 0
hardirqs last  enabled at (0): [<0000000000000000>] 0x0
hardirqs last disabled at (0): [<ffffffff8122d29a>] copy_process+0x256a/0x7650 kernel/fork.c:2448
softirqs last  enabled at (0): [<ffffffff8122d2e2>] copy_process+0x25b2/0x7650 kernel/fork.c:2452
softirqs last disabled at (0): [<0000000000000000>] 0x0
---[ end trace 0000000000000000 ]---
------------[ cut here ]------------
WARNING: CPU: 1 PID: 599 at drivers/iommu/iommufd/io_pagetable.c:1158 iopt_remove_access+0xb5/0xd0 drivers/iommu/iommufd/io_pagetable.c:1157
Modules linked in:
CPU: 1 PID: 599 Comm: syz-executor321 Tainted: G    B   W          6.4.0-rc6-5ca8bbe2b782+ #1
Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
RIP: 0010:iopt_remove_access+0xb5/0xd0 drivers/iommu/iommufd/io_pagetable.c:1157
Code: 45 85 e4 75 29 e8 4b 2d 0b fe 4c 89 ef e8 33 eb e8 fd 48 89 df e8 2b eb e8 fd 5b 41 5c 41 5d 5d c3 cc cc cc cc e8 2b 2d 0b fe <0f> 0b eb b9 e8 22 2d 0b fe 0f 0b eb ce e8 b9 1d 67 fe eb 90 0f 1f
RSP: 0018:ffff888021007bb8 EFLAGS: 00010246
RAX: 0000000000000000 RBX: ffff8880144b80a8 RCX: 0000000000000000
RDX: 0000000000000000 RSI: ffff888012e54a00 RDI: 0000000000000002
RBP: ffff888021007bd0 R08: ffffed1002897033 R09: ffffed1002897033
R10: ffff8880144b8193 R11: ffffed1002897032 R12: ffff888011d6b000
R13: ffff8880144b81e8 R14: ffffffff835430e0 R15: ffff888021007e68
FS:  0000000001a0a3c0(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
CR2: 0000000020000140 CR3: 000000001473a000 CR4: 0000000000750ee0
PKRU: 55555554
Call Trace:
 <TASK>
 __iommufd_access_detach+0x1c2/0x2b0 drivers/iommu/iommufd/device.c:971
 iommufd_access_change_pt+0x149/0x270 drivers/iommu/iommufd/device.c:1006
 iommufd_access_replace+0xb4/0x120 drivers/iommu/iommufd/device.c:1042
 iommufd_test_access_replace_ioas drivers/iommu/iommufd/selftest.c:1025 [inline]
 iommufd_test+0x103d/0x3f00 drivers/iommu/iommufd/selftest.c:1252
 iommufd_fops_ioctl+0x37d/0x510 drivers/iommu/iommufd/main.c:378
 vfs_ioctl fs/ioctl.c:51 [inline]
 __do_sys_ioctl fs/ioctl.c:870 [inline]
 __se_sys_ioctl fs/ioctl.c:856 [inline]
 __x64_sys_ioctl+0x1a3/0x230 fs/ioctl.c:856
 do_syscall_x64 arch/x86/entry/common.c:50 [inline]
 do_syscall_64+0x3b/0x90 arch/x86/entry/common.c:80
 entry_SYSCALL_64_after_hwframe+0x72/0xdc
RIP: 0033:0x44ff3d
Code: db 48 89 d8 5b 5d 41 5c 41 5d 41 5e c3 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 c7 c1 a8 ff ff ff f7 d8 64 89 01 48
RSP: 002b:00007fff8410fc18 EFLAGS: 00000246 ORIG_RAX: 0000000000000010
RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 000000000044ff3d
RDX: 0000000020000000 RSI: 0000000000003ba0 RDI: 0000000000000003
RBP: 0000000000000001 R08: 0000000000411b40 R09: 0000000000411b40
R10: 0000000000411b40 R11: 0000000000000246 R12: 0000000000000001
R13: 0000000000000000 R14: 00000000004004e8 R15: 0000000000000000
 </TASK>
irq event stamp: 0
hardirqs last  enabled at (0): [<0000000000000000>] 0x0
hardirqs last disabled at (0): [<ffffffff8122d29a>] copy_process+0x256a/0x7650 kernel/fork.c:2448
softirqs last  enabled at (0): [<ffffffff8122d2e2>] copy_process+0x25b2/0x7650 kernel/fork.c:2452
softirqs last disabled at (0): [<0000000000000000>] 0x0
---[ end trace 0000000000000000 ]---
------------[ cut here ]------------
WARNING: CPU: 1 PID: 599 at drivers/iommu/iommufd/io_pagetable.c:1158 iopt_remove_access+0xb5/0xd0 drivers/iommu/iommufd/io_pagetable.c:1157
Modules linked in:
CPU: 1 PID: 599 Comm: syz-executor321 Tainted: G    B   W          6.4.0-rc6-5ca8bbe2b782+ #1
Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
RIP: 0010:iopt_remove_access+0xb5/0xd0 drivers/iommu/iommufd/io_pagetable.c:1157
Code: 45 85 e4 75 29 e8 4b 2d 0b fe 4c 89 ef e8 33 eb e8 fd 48 89 df e8 2b eb e8 fd 5b 41 5c 41 5d 5d c3 cc cc cc cc e8 2b 2d 0b fe <0f> 0b eb b9 e8 22 2d 0b fe 0f 0b eb ce e8 b9 1d 67 fe eb 90 0f 1f
RSP: 0018:ffff888021007bd0 EFLAGS: 00010246
RAX: 0000000000000000 RBX: ffff8880144b80a8 RCX: 0000000000000000
RDX: 0000000000000000 RSI: ffff888012e54a00 RDI: 0000000000000002
RBP: ffff888021007be8 R08: ffffed1002897033 R09: ffffed1002897033
R10: ffff8880144b8193 R11: ffffed1002897032 R12: ffff888019e52c00
R13: ffff8880144b81e8 R14: ffff88801509c800 R15: 0000000000000000
FS:  0000000000000000(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
CR2: 00000000004e5420 CR3: 000000000667e000 CR4: 0000000000750ee0
PKRU: 55555554
Call Trace:
 <TASK>
 iommufd_access_destroy_object+0x65/0x170 drivers/iommu/iommufd/device.c:875
 iommufd_object_destroy_user+0x18e/0x220 drivers/iommu/iommufd/main.c:163
 iommufd_access_destroy+0x43/0x70 drivers/iommu/iommufd/device.c:938
 iommufd_test_staccess_release+0x8d/0xd0 drivers/iommu/iommufd/selftest.c:918
 __fput+0x26d/0xa40 fs/file_table.c:321
 ____fput+0x1e/0x30 fs/file_table.c:349
 task_work_run+0x1a4/0x2d0 kernel/task_work.c:179
 exit_task_work include/linux/task_work.h:38 [inline]
 do_exit+0xaf3/0x2f60 kernel/exit.c:874
 do_group_exit+0xe0/0x2b0 kernel/exit.c:1024
 __do_sys_exit_group kernel/exit.c:1035 [inline]
 __se_sys_exit_group kernel/exit.c:1033 [inline]
 __x64_sys_exit_group+0x47/0x50 kernel/exit.c:1033
 do_syscall_x64 arch/x86/entry/common.c:50 [inline]
 do_syscall_64+0x3b/0x90 arch/x86/entry/common.c:80
 entry_SYSCALL_64_after_hwframe+0x72/0xdc
RIP: 0033:0x44de86
Code: Unable to access opcode bytes at 0x44de5c.
RSP: 002b:00007fff8410fbc8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
RAX: ffffffffffffffda RBX: 00000000004e5410 RCX: 000000000044de86
RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffffa8
R10: 0000000000411b40 R11: 0000000000000246 R12: 00000000004e5410
R13: 0000000000000001 R14: 0000000000000000 R15: 0000000000000001
 </TASK>
irq event stamp: 0
hardirqs last  enabled at (0): [<0000000000000000>] 0x0
hardirqs last disabled at (0): [<ffffffff8122d29a>] copy_process+0x256a/0x7650 kernel/fork.c:2448
softirqs last  enabled at (0): [<ffffffff8122d2e2>] copy_process+0x25b2/0x7650 kernel/fork.c:2452
softirqs last disabled at (0): [<0000000000000000>] 0x0
---[ end trace 0000000000000000 ]---
------------[ cut here ]------------
WARNING: CPU: 1 PID: 599 at drivers/iommu/iommufd/io_pagetable.c:663 iopt_destroy_table+0x15f/0x1b0 drivers/iommu/iommufd/io_pagetable.c:663
Modules linked in:
CPU: 1 PID: 599 Comm: syz-executor321 Tainted: G    B   W          6.4.0-rc6-5ca8bbe2b782+ #1
Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
RIP: 0010:iopt_destroy_table+0x15f/0x1b0 drivers/iommu/iommufd/io_pagetable.c:663
Code: 5b 41 5c 41 5d 41 5e 5d c3 cc cc cc cc e8 c9 53 0b fe 0f 0b e9 51 ff ff ff e8 bd 53 0b fe 0f 0b e9 76 ff ff ff e8 b1 53 0b fe <0f> 0b eb 9e e8 a8 53 0b fe 0f 0b e8 a1 53 0b fe 5b 41 5c 41 5d 41
RSP: 0018:ffff888021007b78 EFLAGS: 00010246
RAX: 0000000000000000 RBX: 0000000000000000 RCX: 0000000000000000
RDX: 0000000000000000 RSI: ffff888012e54a00 RDI: 0000000000000002
RBP: ffff888021007b98 R08: ffffed100289703e R09: ffffed100289703e
R10: ffff8880144b81ef R11: ffffed100289703d R12: ffff8880144b8290
R13: ffff8880144b80a8 R14: ffffffffffffffff R15: ffff888021007c60
FS:  0000000000000000(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
CR2: 00000000004e5420 CR3: 000000000667e000 CR4: 0000000000750ee0
PKRU: 55555554
Call Trace:
 <TASK>
 iommufd_ioas_destroy+0x53/0x70 drivers/iommu/iommufd/ioas.c:19
 iommufd_fops_release+0x1f7/0x370 drivers/iommu/iommufd/main.c:231
 __fput+0x26d/0xa40 fs/file_table.c:321
 ____fput+0x1e/0x30 fs/file_table.c:349
 task_work_run+0x1a4/0x2d0 kernel/task_work.c:179
 exit_task_work include/linux/task_work.h:38 [inline]
 do_exit+0xaf3/0x2f60 kernel/exit.c:874
 do_group_exit+0xe0/0x2b0 kernel/exit.c:1024
 __do_sys_exit_group kernel/exit.c:1035 [inline]
 __se_sys_exit_group kernel/exit.c:1033 [inline]
 __x64_sys_exit_group+0x47/0x50 kernel/exit.c:1033
 do_syscall_x64 arch/x86/entry/common.c:50 [inline]
 do_syscall_64+0x3b/0x90 arch/x86/entry/common.c:80
 entry_SYSCALL_64_after_hwframe+0x72/0xdc
RIP: 0033:0x44de86
Code: Unable to access opcode bytes at 0x44de5c.
RSP: 002b:00007fff8410fbc8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
RAX: ffffffffffffffda RBX: 00000000004e5410 RCX: 000000000044de86
RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffffa8
R10: 0000000000411b40 R11: 0000000000000246 R12: 00000000004e5410
R13: 0000000000000001 R14: 0000000000000000 R15: 0000000000000001
 </TASK>
irq event stamp: 0
hardirqs last  enabled at (0): [<0000000000000000>] 0x0
hardirqs last disabled at (0): [<ffffffff8122d29a>] copy_process+0x256a/0x7650 kernel/fork.c:2448
softirqs last  enabled at (0): [<ffffffff8122d2e2>] copy_process+0x25b2/0x7650 kernel/fork.c:2452
softirqs last disabled at (0): [<0000000000000000>] 0x0
---[ end trace 0000000000000000 ]---
------------[ cut here ]------------
WARNING: CPU: 1 PID: 600 at drivers/iommu/iommufd/io_pagetable.c:1158 iopt_remove_access+0xb5/0xd0 drivers/iommu/iommufd/io_pagetable.c:1157
Modules linked in:
CPU: 1 PID: 600 Comm: syz-executor321 Tainted: G    B   W          6.4.0-rc6-5ca8bbe2b782+ #1
Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
RIP: 0010:iopt_remove_access+0xb5/0xd0 drivers/iommu/iommufd/io_pagetable.c:1157
Code: 45 85 e4 75 29 e8 4b 2d 0b fe 4c 89 ef e8 33 eb e8 fd 48 89 df e8 2b eb e8 fd 5b 41 5c 41 5d 5d c3 cc cc cc cc e8 2b 2d 0b fe <0f> 0b eb b9 e8 22 2d 0b fe 0f 0b eb ce e8 b9 1d 67 fe eb 90 0f 1f
RSP: 0018:ffff888016e7fbb8 EFLAGS: 00010246
RAX: 0000000000000000 RBX: ffff888013ce08a8 RCX: 0000000000000000
RDX: 0000000000000000 RSI: ffff888015358000 RDI: 0000000000000002
RBP: ffff888016e7fbd0 R08: ffffed100279c133 R09: ffffed100279c133
R10: ffff888013ce0993 R11: ffffed100279c132 R12: ffff888011ee9400
R13: ffff888013ce09e8 R14: ffffffff835430e0 R15: ffff888016e7fe68
FS:  0000000001a0a3c0(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
CR2: 0000000020000140 CR3: 00000000139ec000 CR4: 0000000000750ee0
PKRU: 55555554
Call Trace:
 <TASK>
 __iommufd_access_detach+0x1c2/0x2b0 drivers/iommu/iommufd/device.c:971
 iommufd_access_change_pt+0x149/0x270 drivers/iommu/iommufd/device.c:1006
 iommufd_access_replace+0xb4/0x120 drivers/iommu/iommufd/device.c:1042
 iommufd_test_access_replace_ioas drivers/iommu/iommufd/selftest.c:1025 [inline]
 iommufd_test+0x103d/0x3f00 drivers/iommu/iommufd/selftest.c:1252
 iommufd_fops_ioctl+0x37d/0x510 drivers/iommu/iommufd/main.c:378
 vfs_ioctl fs/ioctl.c:51 [inline]
 __do_sys_ioctl fs/ioctl.c:870 [inline]
 __se_sys_ioctl fs/ioctl.c:856 [inline]
 __x64_sys_ioctl+0x1a3/0x230 fs/ioctl.c:856
 do_syscall_x64 arch/x86/entry/common.c:50 [inline]
 do_syscall_64+0x3b/0x90 arch/x86/entry/common.c:80
 entry_SYSCALL_64_after_hwframe+0x72/0xdc
RIP: 0033:0x44ff3d
Code: db 48 89 d8 5b 5d 41 5c 41 5d 41 5e c3 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 c7 c1 a8 ff ff ff f7 d8 64 89 01 48
RSP: 002b:00007fff8410fc18 EFLAGS: 00000246 ORIG_RAX: 0000000000000010
RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 000000000044ff3d
RDX: 0000000020000000 RSI: 0000000000003ba0 RDI: 0000000000000003
RBP: 0000000000000001 R08: 0000000000411b40 R09: 0000000000411b40
R10: 0000000000411b40 R11: 0000000000000246 R12: 0000000000000001
R13: 0000000000000000 R14: 00000000004004e8 R15: 0000000000000000
 </TASK>
irq event stamp: 0
hardirqs last  enabled at (0): [<0000000000000000>] 0x0
hardirqs last disabled at (0): [<ffffffff8122d29a>] copy_process+0x256a/0x7650 kernel/fork.c:2448
softirqs last  enabled at (0): [<ffffffff8122d2e2>] copy_process+0x25b2/0x7650 kernel/fork.c:2452
softirqs last disabled at (0): [<0000000000000000>] 0x0
---[ end trace 0000000000000000 ]---
------------[ cut here ]------------
WARNING: CPU: 1 PID: 600 at drivers/iommu/iommufd/io_pagetable.c:1158 iopt_remove_access+0xb5/0xd0 drivers/iommu/iommufd/io_pagetable.c:1157
Modules linked in:
CPU: 1 PID: 600 Comm: syz-executor321 Tainted: G    B   W          6.4.0-rc6-5ca8bbe2b782+ #1
Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
RIP: 0010:iopt_remove_access+0xb5/0xd0 drivers/iommu/iommufd/io_pagetable.c:1157
Code: 45 85 e4 75 29 e8 4b 2d 0b fe 4c 89 ef e8 33 eb e8 fd 48 89 df e8 2b eb e8 fd 5b 41 5c 41 5d 5d c3 cc cc cc cc e8 2b 2d 0b fe <0f> 0b eb b9 e8 22 2d 0b fe 0f 0b eb ce e8 b9 1d 67 fe eb 90 0f 1f
RSP: 0018:ffff888016e7fbd0 EFLAGS: 00010246
RAX: 0000000000000000 RBX: ffff888013ce08a8 RCX: 0000000000000000
RDX: 0000000000000000 RSI: ffff888015358000 RDI: 0000000000000002
RBP: ffff888016e7fbe8 R08: ffffed100279c133 R09: ffffed100279c133
R10: ffff888013ce0993 R11: ffffed100279c132 R12: ffff888011d6b400
R13: ffff888013ce09e8 R14: ffff888012645c00 R15: 0000000000000000
FS:  0000000000000000(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
CR2: 00000000004e5420 CR3: 000000000667e000 CR4: 0000000000750ee0
PKRU: 55555554
Call Trace:
 <TASK>
 iommufd_access_destroy_object+0x65/0x170 drivers/iommu/iommufd/device.c:875
 iommufd_object_destroy_user+0x18e/0x220 drivers/iommu/iommufd/main.c:163
 iommufd_access_destroy+0x43/0x70 drivers/iommu/iommufd/device.c:938
 iommufd_test_staccess_release+0x8d/0xd0 drivers/iommu/iommufd/selftest.c:918
 __fput+0x26d/0xa40 fs/file_table.c:321
 ____fput+0x1e/0x30 fs/file_table.c:349
 task_work_run+0x1a4/0x2d0 kernel/task_work.c:179
 exit_task_work include/linux/task_work.h:38 [inline]
 do_exit+0xaf3/0x2f60 kernel/exit.c:874
 do_group_exit+0xe0/0x2b0 kernel/exit.c:1024
 __do_sys_exit_group kernel/exit.c:1035 [inline]
 __se_sys_exit_group kernel/exit.c:1033 [inline]
 __x64_sys_exit_group+0x47/0x50 kernel/exit.c:1033
 do_syscall_x64 arch/x86/entry/common.c:50 [inline]
 do_syscall_64+0x3b/0x90 arch/x86/entry/common.c:80
 entry_SYSCALL_64_after_hwframe+0x72/0xdc
RIP: 0033:0x44de86
Code: Unable to access opcode bytes at 0x44de5c.
RSP: 002b:00007fff8410fbc8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
RAX: ffffffffffffffda RBX: 00000000004e5410 RCX: 000000000044de86
RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffffa8
R10: 0000000000411b40 R11: 0000000000000246 R12: 00000000004e5410
R13: 0000000000000001 R14: 0000000000000000 R15: 0000000000000001
 </TASK>
irq event stamp: 0
hardirqs last  enabled at (0): [<0000000000000000>] 0x0
hardirqs last disabled at (0): [<ffffffff8122d29a>] copy_process+0x256a/0x7650 kernel/fork.c:2448
softirqs last  enabled at (0): [<ffffffff8122d2e2>] copy_process+0x25b2/0x7650 kernel/fork.c:2452
softirqs last disabled at (0): [<0000000000000000>] 0x0
---[ end trace 0000000000000000 ]---
------------[ cut here ]------------
WARNING: CPU: 1 PID: 600 at drivers/iommu/iommufd/io_pagetable.c:663 iopt_destroy_table+0x15f/0x1b0 drivers/iommu/iommufd/io_pagetable.c:663
Modules linked in:
CPU: 1 PID: 600 Comm: syz-executor321 Tainted: G    B   W          6.4.0-rc6-5ca8bbe2b782+ #1
Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
RIP: 0010:iopt_destroy_table+0x15f/0x1b0 drivers/iommu/iommufd/io_pagetable.c:663
Code: 5b 41 5c 41 5d 41 5e 5d c3 cc cc cc cc e8 c9 53 0b fe 0f 0b e9 51 ff ff ff e8 bd 53 0b fe 0f 0b e9 76 ff ff ff e8 b1 53 0b fe <0f> 0b eb 9e e8 a8 53 0b fe 0f 0b e8 a1 53 0b fe 5b 41 5c 41 5d 41
RSP: 0018:ffff888016e7fb78 EFLAGS: 00010246
RAX: 0000000000000000 RBX: 0000000000000000 RCX: 0000000000000000
RDX: 0000000000000000 RSI: ffff888015358000 RDI: 0000000000000002
RBP: ffff888016e7fb98 R08: ffffed100279c13e R09: ffffed100279c13e
R10: ffff888013ce09ef R11: ffffed100279c13d R12: ffff888013ce0a90
R13: ffff888013ce08a8 R14: ffffffffffffffff R15: ffff888016e7fc60
FS:  0000000000000000(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
CR2: 00000000004e5420 CR3: 000000000667e000 CR4: 0000000000750ee0
PKRU: 55555554
Call Trace:
 <TASK>
 iommufd_ioas_destroy+0x53/0x70 drivers/iommu/iommufd/ioas.c:19
 iommufd_fops_release+0x1f7/0x370 drivers/iommu/iommufd/main.c:231
 __fput+0x26d/0xa40 fs/file_table.c:321
 ____fput+0x1e/0x30 fs/file_table.c:349
 task_work_run+0x1a4/0x2d0 kernel/task_work.c:179
 exit_task_work include/linux/task_work.h:38 [inline]
 do_exit+0xaf3/0x2f60 kernel/exit.c:874
 do_group_exit+0xe0/0x2b0 kernel/exit.c:1024
 __do_sys_exit_group kernel/exit.c:1035 [inline]
 __se_sys_exit_group kernel/exit.c:1033 [inline]
 __x64_sys_exit_group+0x47/0x50 kernel/exit.c:1033
 do_syscall_x64 arch/x86/entry/common.c:50 [inline]
 do_syscall_64+0x3b/0x90 arch/x86/entry/common.c:80
 entry_SYSCALL_64_after_hwframe+0x72/0xdc
RIP: 0033:0x44de86
Code: Unable to access opcode bytes at 0x44de5c.
RSP: 002b:00007fff8410fbc8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
RAX: ffffffffffffffda RBX: 00000000004e5410 RCX: 000000000044de86
RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffffa8
R10: 0000000000411b40 R11: 0000000000000246 R12: 00000000004e5410
R13: 0000000000000001 R14: 0000000000000000 R15: 0000000000000001
 </TASK>
irq event stamp: 0
hardirqs last  enabled at (0): [<0000000000000000>] 0x0
hardirqs last disabled at (0): [<ffffffff8122d29a>] copy_process+0x256a/0x7650 kernel/fork.c:2448
softirqs last  enabled at (0): [<ffffffff8122d2e2>] copy_process+0x25b2/0x7650 kernel/fork.c:2452
softirqs last disabled at (0): [<0000000000000000>] 0x0
---[ end trace 0000000000000000 ]---
------------[ cut here ]------------
WARNING: CPU: 1 PID: 601 at drivers/iommu/iommufd/io_pagetable.c:1158 iopt_remove_access+0xb5/0xd0 drivers/iommu/iommufd/io_pagetable.c:1157
Modules linked in:
CPU: 1 PID: 601 Comm: syz-executor321 Tainted: G    B   W          6.4.0-rc6-5ca8bbe2b782+ #1
Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
RIP: 0010:iopt_remove_access+0xb5/0xd0 drivers/iommu/iommufd/io_pagetable.c:1157
Code: 45 85 e4 75 29 e8 4b 2d 0b fe 4c 89 ef e8 33 eb e8 fd 48 89 df e8 2b eb e8 fd 5b 41 5c 41 5d 5d c3 cc cc cc cc e8 2b 2d 0b fe <0f> 0b eb b9 e8 22 2d 0b fe 0f 0b eb ce e8 b9 1d 67 fe eb 90 0f 1f
RSP: 0018:ffff888010f17bb8 EFLAGS: 00010246
RAX: 0000000000000000 RBX: ffff8880116b80a8 RCX: 0000000000000000
RDX: 0000000000000000 RSI: ffff8880167ba500 RDI: 0000000000000002
RBP: ffff888010f17bd0 R08: ffffed10022d7033 R09: ffffed10022d7033
R10: ffff8880116b8193 R11: ffffed10022d7032 R12: ffff888014c6e400
R13: ffff8880116b81e8 R14: ffffffff835430e0 R15: ffff888010f17e68
FS:  0000000001a0a3c0(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
CR2: 0000000020000140 CR3: 0000000015030000 CR4: 0000000000750ee0
PKRU: 55555554
Call Trace:
 <TASK>
 __iommufd_access_detach+0x1c2/0x2b0 drivers/iommu/iommufd/device.c:971
 iommufd_access_change_pt+0x149/0x270 drivers/iommu/iommufd/device.c:1006
 iommufd_access_replace+0xb4/0x120 drivers/iommu/iommufd/device.c:1042
 iommufd_test_access_replace_ioas drivers/iommu/iommufd/selftest.c:1025 [inline]
 iommufd_test+0x103d/0x3f00 drivers/iommu/iommufd/selftest.c:1252
 iommufd_fops_ioctl+0x37d/0x510 drivers/iommu/iommufd/main.c:378
 vfs_ioctl fs/ioctl.c:51 [inline]
 __do_sys_ioctl fs/ioctl.c:870 [inline]
 __se_sys_ioctl fs/ioctl.c:856 [inline]
 __x64_sys_ioctl+0x1a3/0x230 fs/ioctl.c:856
 do_syscall_x64 arch/x86/entry/common.c:50 [inline]
 do_syscall_64+0x3b/0x90 arch/x86/entry/common.c:80
 entry_SYSCALL_64_after_hwframe+0x72/0xdc
RIP: 0033:0x44ff3d
Code: db 48 89 d8 5b 5d 41 5c 41 5d 41 5e c3 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 c7 c1 a8 ff ff ff f7 d8 64 89 01 48
RSP: 002b:00007fff8410fc18 EFLAGS: 00000246 ORIG_RAX: 0000000000000010
RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 000000000044ff3d
RDX: 0000000020000000 RSI: 0000000000003ba0 RDI: 0000000000000003
RBP: 0000000000000001 R08: 0000000000411b40 R09: 0000000000411b40
R10: 0000000000411b40 R11: 0000000000000246 R12: 0000000000000001
R13: 0000000000000000 R14: 00000000004004e8 R15: 0000000000000000
 </TASK>
irq event stamp: 0
hardirqs last  enabled at (0): [<0000000000000000>] 0x0
hardirqs last disabled at (0): [<ffffffff8122d29a>] copy_process+0x256a/0x7650 kernel/fork.c:2448
softirqs last  enabled at (0): [<ffffffff8122d2e2>] copy_process+0x25b2/0x7650 kernel/fork.c:2452
softirqs last disabled at (0): [<0000000000000000>] 0x0
---[ end trace 0000000000000000 ]---
------------[ cut here ]------------
WARNING: CPU: 1 PID: 601 at drivers/iommu/iommufd/io_pagetable.c:1158 iopt_remove_access+0xb5/0xd0 drivers/iommu/iommufd/io_pagetable.c:1157
Modules linked in:
CPU: 1 PID: 601 Comm: syz-executor321 Tainted: G    B   W          6.4.0-rc6-5ca8bbe2b782+ #1
Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
RIP: 0010:iopt_remove_access+0xb5/0xd0 drivers/iommu/iommufd/io_pagetable.c:1157
Code: 45 85 e4 75 29 e8 4b 2d 0b fe 4c 89 ef e8 33 eb e8 fd 48 89 df e8 2b eb e8 fd 5b 41 5c 41 5d 5d c3 cc cc cc cc e8 2b 2d 0b fe <0f> 0b eb b9 e8 22 2d 0b fe 0f 0b eb ce e8 b9 1d 67 fe eb 90 0f 1f
RSP: 0018:ffff888010f17bd0 EFLAGS: 00010246
RAX: 0000000000000000 RBX: ffff8880116b80a8 RCX: 0000000000000000
RDX: 0000000000000000 RSI: ffff8880167ba500 RDI: 0000000000000002
RBP: ffff888010f17be8 R08: ffffed10022d7033 R09: ffffed10022d7033
R10: ffff8880116b8193 R11: ffffed10022d7032 R12: ffff888011ee9c00
R13: ffff8880116b81e8 R14: ffff88801a08eb00 R15: 0000000000000000
FS:  0000000000000000(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
CR2: 00000000004e5420 CR3: 000000000667e000 CR4: 0000000000750ee0
PKRU: 55555554
Call Trace:
 <TASK>
 iommufd_access_destroy_object+0x65/0x170 drivers/iommu/iommufd/device.c:875
 iommufd_object_destroy_user+0x18e/0x220 drivers/iommu/iommufd/main.c:163
 iommufd_access_destroy+0x43/0x70 drivers/iommu/iommufd/device.c:938
 iommufd_test_staccess_release+0x8d/0xd0 drivers/iommu/iommufd/selftest.c:918
 __fput+0x26d/0xa40 fs/file_table.c:321
 ____fput+0x1e/0x30 fs/file_table.c:349
 task_work_run+0x1a4/0x2d0 kernel/task_work.c:179
 exit_task_work include/linux/task_work.h:38 [inline]
 do_exit+0xaf3/0x2f60 kernel/exit.c:874
 do_group_exit+0xe0/0x2b0 kernel/exit.c:1024
 __do_sys_exit_group kernel/exit.c:1035 [inline]
 __se_sys_exit_group kernel/exit.c:1033 [inline]
 __x64_sys_exit_group+0x47/0x50 kernel/exit.c:1033
 do_syscall_x64 arch/x86/entry/common.c:50 [inline]
 do_syscall_64+0x3b/0x90 arch/x86/entry/common.c:80
 entry_SYSCALL_64_after_hwframe+0x72/0xdc
RIP: 0033:0x44de86
Code: Unable to access opcode bytes at 0x44de5c.
RSP: 002b:00007fff8410fbc8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
RAX: ffffffffffffffda RBX: 00000000004e5410 RCX: 000000000044de86
RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffffa8
R10: 0000000000411b40 R11: 0000000000000246 R12: 00000000004e5410
R13: 0000000000000001 R14: 0000000000000000 R15: 0000000000000001
 </TASK>
irq event stamp: 0
hardirqs last  enabled at (0): [<0000000000000000>] 0x0
hardirqs last disabled at (0): [<ffffffff8122d29a>] copy_process+0x256a/0x7650 kernel/fork.c:2448
softirqs last  enabled at (0): [<ffffffff8122d2e2>] copy_process+0x25b2/0x7650 kernel/fork.c:2452
softirqs last disabled at (0): [<0000000000000000>] 0x0
---[ end trace 0000000000000000 ]---
------------[ cut here ]------------
WARNING: CPU: 1 PID: 601 at drivers/iommu/iommufd/io_pagetable.c:663 iopt_destroy_table+0x15f/0x1b0 drivers/iommu/iommufd/io_pagetable.c:663
Modules linked in:
CPU: 1 PID: 601 Comm: syz-executor321 Tainted: G    B   W          6.4.0-rc6-5ca8bbe2b782+ #1
Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
RIP: 0010:iopt_destroy_table+0x15f/0x1b0 drivers/iommu/iommufd/io_pagetable.c:663
Code: 5b 41 5c 41 5d 41 5e 5d c3 cc cc cc cc e8 c9 53 0b fe 0f 0b e9 51 ff ff ff e8 bd 53 0b fe 0f 0b e9 76 ff ff ff e8 b1 53 0b fe <0f> 0b eb 9e e8 a8 53 0b fe 0f 0b e8 a1 53 0b fe 5b 41 5c 41 5d 41
RSP: 0018:ffff888010f17b78 EFLAGS: 00010246
RAX: 0000000000000000 RBX: 0000000000000000 RCX: 0000000000000000
RDX: 0000000000000000 RSI: ffff8880167ba500 RDI: 0000000000000002
RBP: ffff888010f17b98 R08: ffffed10022d703e R09: ffffed10022d703e
R10: ffff8880116b81ef R11: ffffed10022d703d R12: ffff8880116b8290
R13: ffff8880116b80a8 R14: ffffffffffffffff R15: ffff888010f17c60
FS:  0000000000000000(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
CR2: 00000000004e5420 CR3: 0000000011a04000 CR4: 0000000000750ee0
PKRU: 55555554
Call Trace:
 <TASK>
 iommufd_ioas_destroy+0x53/0x70 drivers/iommu/iommufd/ioas.c:19
 iommufd_fops_release+0x1f7/0x370 drivers/iommu/iommufd/main.c:231
 __fput+0x26d/0xa40 fs/file_table.c:321
 ____fput+0x1e/0x30 fs/file_table.c:349
 task_work_run+0x1a4/0x2d0 kernel/task_work.c:179
 exit_task_work include/linux/task_work.h:38 [inline]
 do_exit+0xaf3/0x2f60 kernel/exit.c:874
 do_group_exit+0xe0/0x2b0 kernel/exit.c:1024
 __do_sys_exit_group kernel/exit.c:1035 [inline]
 __se_sys_exit_group kernel/exit.c:1033 [inline]
 __x64_sys_exit_group+0x47/0x50 kernel/exit.c:1033
 do_syscall_x64 arch/x86/entry/common.c:50 [inline]
 do_syscall_64+0x3b/0x90 arch/x86/entry/common.c:80
 entry_SYSCALL_64_after_hwframe+0x72/0xdc
RIP: 0033:0x44de86
Code: Unable to access opcode bytes at 0x44de5c.
RSP: 002b:00007fff8410fbc8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
RAX: ffffffffffffffda RBX: 00000000004e5410 RCX: 000000000044de86
RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffffa8
R10: 0000000000411b40 R11: 0000000000000246 R12: 00000000004e5410
R13: 0000000000000001 R14: 0000000000000000 R15: 0000000000000001
 </TASK>
irq event stamp: 0
hardirqs last  enabled at (0): [<0000000000000000>] 0x0
hardirqs last disabled at (0): [<ffffffff8122d29a>] copy_process+0x256a/0x7650 kernel/fork.c:2448
softirqs last  enabled at (0): [<ffffffff8122d2e2>] copy_process+0x25b2/0x7650 kernel/fork.c:2452
softirqs last disabled at (0): [<0000000000000000>] 0x0
---[ end trace 0000000000000000 ]---
------------[ cut here ]------------
WARNING: CPU: 1 PID: 602 at drivers/iommu/iommufd/io_pagetable.c:1158 iopt_remove_access+0xb5/0xd0 drivers/iommu/iommufd/io_pagetable.c:1157
Modules linked in:
CPU: 1 PID: 602 Comm: syz-executor321 Tainted: G    B   W          6.4.0-rc6-5ca8bbe2b782+ #1
Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
RIP: 0010:iopt_remove_access+0xb5/0xd0 drivers/iommu/iommufd/io_pagetable.c:1157
Code: 45 85 e4 75 29 e8 4b 2d 0b fe 4c 89 ef e8 33 eb e8 fd 48 89 df e8 2b eb e8 fd 5b 41 5c 41 5d 5d c3 cc cc cc cc e8 2b 2d 0b fe <0f> 0b eb b9 e8 22 2d 0b fe 0f 0b eb ce e8 b9 1d 67 fe eb 90 0f 1f
RSP: 0018:ffff8880139f7bb8 EFLAGS: 00010246
RAX: 0000000000000000 RBX: ffff8880118198a8 RCX: 0000000000000000
RDX: 0000000000000000 RSI: ffff8880167b8000 RDI: 0000000000000002
RBP: ffff8880139f7bd0 R08: ffffed1002303333 R09: ffffed1002303333
R10: ffff888011819993 R11: ffffed1002303332 R12: ffff888019d5d800
R13: ffff8880118199e8 R14: ffffffff835430e0 R15: ffff8880139f7e68
FS:  0000000001a0a3c0(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
CR2: 0000000020000140 CR3: 0000000013bb2000 CR4: 0000000000750ee0
PKRU: 55555554
Call Trace:
 <TASK>
 __iommufd_access_detach+0x1c2/0x2b0 drivers/iommu/iommufd/device.c:971
 iommufd_access_change_pt+0x149/0x270 drivers/iommu/iommufd/device.c:1006
 iommufd_access_replace+0xb4/0x120 drivers/iommu/iommufd/device.c:1042
 iommufd_test_access_replace_ioas drivers/iommu/iommufd/selftest.c:1025 [inline]
 iommufd_test+0x103d/0x3f00 drivers/iommu/iommufd/selftest.c:1252
 iommufd_fops_ioctl+0x37d/0x510 drivers/iommu/iommufd/main.c:378
 vfs_ioctl fs/ioctl.c:51 [inline]
 __do_sys_ioctl fs/ioctl.c:870 [inline]
 __se_sys_ioctl fs/ioctl.c:856 [inline]
 __x64_sys_ioctl+0x1a3/0x230 fs/ioctl.c:856
 do_syscall_x64 arch/x86/entry/common.c:50 [inline]
 do_syscall_64+0x3b/0x90 arch/x86/entry/common.c:80
 entry_SYSCALL_64_after_hwframe+0x72/0xdc
RIP: 0033:0x44ff3d
Code: db 48 89 d8 5b 5d 41 5c 41 5d 41 5e c3 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 c7 c1 a8 ff ff ff f7 d8 64 89 01 48
RSP: 002b:00007fff8410fc18 EFLAGS: 00000246 ORIG_RAX: 0000000000000010
RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 000000000044ff3d
RDX: 0000000020000000 RSI: 0000000000003ba0 RDI: 0000000000000003
RBP: 0000000000000001 R08: 0000000000411b40 R09: 0000000000411b40
R10: 0000000000411b40 R11: 0000000000000246 R12: 0000000000000001
R13: 0000000000000000 R14: 00000000004004e8 R15: 0000000000000000
 </TASK>
irq event stamp: 0
hardirqs last  enabled at (0): [<0000000000000000>] 0x0
hardirqs last disabled at (0): [<ffffffff8122d29a>] copy_process+0x256a/0x7650 kernel/fork.c:2448
softirqs last  enabled at (0): [<ffffffff8122d2e2>] copy_process+0x25b2/0x7650 kernel/fork.c:2452
softirqs last disabled at (0): [<0000000000000000>] 0x0
---[ end trace 0000000000000000 ]---
------------[ cut here ]------------
WARNING: CPU: 1 PID: 602 at drivers/iommu/iommufd/io_pagetable.c:1158 iopt_remove_access+0xb5/0xd0 drivers/iommu/iommufd/io_pagetable.c:1157
Modules linked in:
CPU: 1 PID: 602 Comm: syz-executor321 Tainted: G    B   W          6.4.0-rc6-5ca8bbe2b782+ #1
Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
RIP: 0010:iopt_remove_access+0xb5/0xd0 drivers/iommu/iommufd/io_pagetable.c:1157
Code: 45 85 e4 75 29 e8 4b 2d 0b fe 4c 89 ef e8 33 eb e8 fd 48 89 df e8 2b eb e8 fd 5b 41 5c 41 5d 5d c3 cc cc cc cc e8 2b 2d 0b fe <0f> 0b eb b9 e8 22 2d 0b fe 0f 0b eb ce e8 b9 1d 67 fe eb 90 0f 1f
RSP: 0018:ffff8880139f7bd0 EFLAGS: 00010246
RAX: 0000000000000000 RBX: ffff8880118198a8 RCX: 0000000000000000
RDX: 0000000000000000 RSI: ffff8880167b8000 RDI: 0000000000000002
RBP: ffff8880139f7be8 R08: ffffed1002303333 R09: ffffed1002303333
R10: ffff888011819993 R11: ffffed1002303332 R12: ffff888014c6fc00
FS:  0000000000000000(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
CR2: 00000000004e5420 CR3: 000000000667e000 CR4: 0000000000750ee0
PKRU: 55555554
Call Trace:
 <TASK>
 iommufd_access_destroy_object+0x65/0x170 drivers/iommu/iommufd/device.c:875
 iommufd_object_destroy_user+0x18e/0x220 drivers/iommu/iommufd/main.c:163
 iommufd_access_destroy+0x43/0x70 drivers/iommu/iommufd/device.c:938
 iommufd_test_staccess_release+0x8d/0xd0 drivers/iommu/iommufd/selftest.c:918
 __fput+0x26d/0xa40 fs/file_table.c:321
 ____fput+0x1e/0x30 fs/file_table.c:349
 task_work_run+0x1a4/0x2d0 kernel/task_work.c:179
 exit_task_work include/linux/task_work.h:38 [inline]
 do_exit+0xaf3/0x2f60 kernel/exit.c:874
 do_group_exit+0xe0/0x2b0 kernel/exit.c:1024
 __do_sys_exit_group kernel/exit.c:1035 [inline]
 __se_sys_exit_group kernel/exit.c:1033 [inline]
 __x64_sys_exit_group+0x47/0x50 kernel/exit.c:1033
 do_syscall_x64 arch/x86/entry/common.c:50 [inline]
 do_syscall_64+0x3b/0x90 arch/x86/entry/common.c:80
 entry_SYSCALL_64_after_hwframe+0x72/0xdc
RIP: 0033:0x44de86
Code: Unable to access opcode bytes at 0x44de5c.
RSP: 002b:00007fff8410fbc8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
RAX: ffffffffffffffda RBX: 00000000004e5410 RCX: 000000000044de86
RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffffa8
R10: 0000000000411b40 R11: 0000000000000246 R12: 00000000004e5410
R13: 0000000000000001 R14: 0000000000000000 R15: 0000000000000001
 </TASK>
irq event stamp: 0
hardirqs last  enabled at (0): [<0000000000000000>] 0x0
hardirqs last disabled at (0): [<ffffffff8122d29a>] copy_process+0x256a/0x7650 kernel/fork.c:2448
softirqs last  enabled at (0): [<ffffffff8122d2e2>] copy_process+0x25b2/0x7650 kernel/fork.c:2452
softirqs last disabled at (0): [<0000000000000000>] 0x0
---[ end trace 0000000000000000 ]---
------------[ cut here ]------------
WARNING: CPU: 1 PID: 602 at drivers/iommu/iommufd/io_pagetable.c:663 iopt_destroy_table+0x15f/0x1b0 drivers/iommu/iommufd/io_pagetable.c:663
Modules linked in:
CPU: 1 PID: 602 Comm: syz-executor321 Tainted: G    B   W          6.4.0-rc6-5ca8bbe2b782+ #1
Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
RIP: 0010:iopt_destroy_table+0x15f/0x1b0 drivers/iommu/iommufd/io_pagetable.c:663
Code: 5b 41 5c 41 5d 41 5e 5d c3 cc cc cc cc e8 c9 53 0b fe 0f 0b e9 51 ff ff ff e8 bd 53 0b fe 0f 0b e9 76 ff ff ff e8 b1 53 0b fe <0f> 0b eb 9e e8 a8 53 0b fe 0f 0b e8 a1 53 0b fe 5b 41 5c 41 5d 41
RSP: 0018:ffff8880139f7b78 EFLAGS: 00010246
RAX: 0000000000000000 RBX: 0000000000000000 RCX: 0000000000000000
RDX: 0000000000000000 RSI: ffff8880167b8000 RDI: 0000000000000002
RBP: ffff8880139f7b98 R08: ffffed100230333e R09: ffffed100230333e
R10: ffff8880118199ef R11: ffffed100230333d R12: ffff888011819a90
R13: ffff8880118198a8 R14: ffffffffffffffff R15: ffff8880139f7c60
FS:  0000000000000000(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
CR2: 00000000004e5420 CR3: 000000000667e000 CR4: 0000000000750ee0
PKRU: 55555554
Call Trace:
 <TASK>
 iommufd_ioas_destroy+0x53/0x70 drivers/iommu/iommufd/ioas.c:19
 iommufd_fops_release+0x1f7/0x370 drivers/iommu/iommufd/main.c:231
 __fput+0x26d/0xa40 fs/file_table.c:321
 ____fput+0x1e/0x30 fs/file_table.c:349
 task_work_run+0x1a4/0x2d0 kernel/task_work.c:179
 exit_task_work include/linux/task_work.h:38 [inline]
 do_exit+0xaf3/0x2f60 kernel/exit.c:874
 do_group_exit+0xe0/0x2b0 kernel/exit.c:1024
 __do_sys_exit_group kernel/exit.c:1035 [inline]
 __se_sys_exit_group kernel/exit.c:1033 [inline]
 __x64_sys_exit_group+0x47/0x50 kernel/exit.c:1033
 do_syscall_x64 arch/x86/entry/common.c:50 [inline]
 do_syscall_64+0x3b/0x90 arch/x86/entry/common.c:80
 entry_SYSCALL_64_after_hwframe+0x72/0xdc
RIP: 0033:0x44de86
Code: Unable to access opcode bytes at 0x44de5c.
RSP: 002b:00007fff8410fbc8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
RAX: ffffffffffffffda RBX: 00000000004e5410 RCX: 000000000044de86
RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffffa8
R10: 0000000000411b40 R11: 0000000000000246 R12: 00000000004e5410
R13: 0000000000000001 R14: 0000000000000000 R15: 0000000000000001
 </TASK>
irq event stamp: 0
hardirqs last  enabled at (0): [<0000000000000000>] 0x0
hardirqs last disabled at (0): [<ffffffff8122d29a>] copy_process+0x256a/0x7650 kernel/fork.c:2448
softirqs last  enabled at (0): [<ffffffff8122d2e2>] copy_process+0x25b2/0x7650 kernel/fork.c:2452
softirqs last disabled at (0): [<0000000000000000>] 0x0
---[ end trace 0000000000000000 ]---
------------[ cut here ]------------
WARNING: CPU: 1 PID: 603 at drivers/iommu/iommufd/io_pagetable.c:1158 iopt_remove_access+0xb5/0xd0 drivers/iommu/iommufd/io_pagetable.c:1157
Modules linked in:
CPU: 1 PID: 603 Comm: syz-executor321 Tainted: G    B   W          6.4.0-rc6-5ca8bbe2b782+ #1
Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
RIP: 0010:iopt_remove_access+0xb5/0xd0 drivers/iommu/iommufd/io_pagetable.c:1157
Code: 45 85 e4 75 29 e8 4b 2d 0b fe 4c 89 ef e8 33 eb e8 fd 48 89 df e8 2b eb e8 fd 5b 41 5c 41 5d 5d c3 cc cc cc cc e8 2b 2d 0b fe <0f> 0b eb b9 e8 22 2d 0b fe 0f 0b eb ce e8 b9 1d 67 fe eb 90 0f 1f
RSP: 0018:ffff888012ecfbb8 EFLAGS: 00010246
RAX: 0000000000000000 RBX: ffff8880168e00a8 RCX: 0000000000000000
RDX: 0000000000000000 RSI: ffff88800f1e4a00 RDI: 0000000000000002
RBP: ffff888012ecfbd0 R08: ffffed1002d1c033 R09: ffffed1002d1c033
R10: ffff8880168e0193 R11: ffffed1002d1c032 R12: ffff888019e7dc00
R13: ffff8880168e01e8 R14: ffffffff835430e0 R15: ffff888012ecfe68
FS:  0000000001a0a3c0(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
CR2: 0000000020000140 CR3: 0000000011066000 CR4: 0000000000750ee0
PKRU: 55555554
Call Trace:
 <TASK>
 __iommufd_access_detach+0x1c2/0x2b0 drivers/iommu/iommufd/device.c:971
 iommufd_access_change_pt+0x149/0x270 drivers/iommu/iommufd/device.c:1006
 iommufd_access_replace+0xb4/0x120 drivers/iommu/iommufd/device.c:1042
 iommufd_test_access_replace_ioas drivers/iommu/iommufd/selftest.c:1025 [inline]
 iommufd_test+0x103d/0x3f00 drivers/iommu/iommufd/selftest.c:1252
 iommufd_fops_ioctl+0x37d/0x510 drivers/iommu/iommufd/main.c:378
 vfs_ioctl fs/ioctl.c:51 [inline]
 __do_sys_ioctl fs/ioctl.c:870 [inline]
 __se_sys_ioctl fs/ioctl.c:856 [inline]
 __x64_sys_ioctl+0x1a3/0x230 fs/ioctl.c:856
 do_syscall_x64 arch/x86/entry/common.c:50 [inline]
 do_syscall_64+0x3b/0x90 arch/x86/entry/common.c:80
 entry_SYSCALL_64_after_hwframe+0x72/0xdc
RIP: 0033:0x44ff3d
Code: db 48 89 d8 5b 5d 41 5c 41 5d 41 5e c3 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 c7 c1 a8 ff ff ff f7 d8 64 89 01 48
RSP: 002b:00007fff8410fc18 EFLAGS: 00000246 ORIG_RAX: 0000000000000010
RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 000000000044ff3d
RDX: 0000000020000000 RSI: 0000000000003ba0 RDI: 0000000000000003
RBP: 0000000000000001 R08: 0000000000411b40 R09: 0000000000411b40
R10: 0000000000411b40 R11: 0000000000000246 R12: 0000000000000001
R13: 0000000000000000 R14: 00000000004004e8 R15: 0000000000000000
 </TASK>
irq event stamp: 0
hardirqs last  enabled at (0): [<0000000000000000>] 0x0
hardirqs last disabled at (0): [<ffffffff8122d29a>] copy_process+0x256a/0x7650 kernel/fork.c:2448
softirqs last  enabled at (0): [<ffffffff8122d2e2>] copy_process+0x25b2/0x7650 kernel/fork.c:2452
softirqs last disabled at (0): [<0000000000000000>] 0x0
---[ end trace 0000000000000000 ]---
------------[ cut here ]------------
WARNING: CPU: 1 PID: 603 at drivers/iommu/iommufd/io_pagetable.c:1158 iopt_remove_access+0xb5/0xd0 drivers/iommu/iommufd/io_pagetable.c:1157
Modules linked in:
CPU: 1 PID: 603 Comm: syz-executor321 Tainted: G    B   W          6.4.0-rc6-5ca8bbe2b782+ #1
Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
RIP: 0010:iopt_remove_access+0xb5/0xd0 drivers/iommu/iommufd/io_pagetable.c:1157
Code: 45 85 e4 75 29 e8 4b 2d 0b fe 4c 89 ef e8 33 eb e8 fd 48 89 df e8 2b eb e8 fd 5b 41 5c 41 5d 5d c3 cc cc cc cc e8 2b 2d 0b fe <0f> 0b eb b9 e8 22 2d 0b fe 0f 0b eb ce e8 b9 1d 67 fe eb 90 0f 1f
RSP: 0018:ffff888012ecfbd0 EFLAGS: 00010246
RAX: 0000000000000000 RBX: ffff8880168e00a8 RCX: 0000000000000000
RDX: 0000000000000000 RSI: ffff88800f1e4a00 RDI: 0000000000000002
RBP: ffff888012ecfbe8 R08: ffffed1002d1c033 R09: ffffed1002d1c033
R10: ffff8880168e0193 R11: ffffed1002d1c032 R12: ffff888019d5ec00
R13: ffff8880168e01e8 R14: ffff8880213ad700 R15: 0000000000000000
FS:  0000000000000000(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
CR2: 00000000004e5420 CR3: 000000000667e000 CR4: 0000000000750ee0
PKRU: 55555554
Call Trace:
 <TASK>
 iommufd_access_destroy_object+0x65/0x170 drivers/iommu/iommufd/device.c:875
 iommufd_object_destroy_user+0x18e/0x220 drivers/iommu/iommufd/main.c:163
 iommufd_access_destroy+0x43/0x70 drivers/iommu/iommufd/device.c:938
 iommufd_test_staccess_release+0x8d/0xd0 drivers/iommu/iommufd/selftest.c:918
 __fput+0x26d/0xa40 fs/file_table.c:321
 ____fput+0x1e/0x30 fs/file_table.c:349
 task_work_run+0x1a4/0x2d0 kernel/task_work.c:179
 exit_task_work include/linux/task_work.h:38 [inline]
 do_exit+0xaf3/0x2f60 kernel/exit.c:874
 do_group_exit+0xe0/0x2b0 kernel/exit.c:1024
 __do_sys_exit_group kernel/exit.c:1035 [inline]
 __se_sys_exit_group kernel/exit.c:1033 [inline]
 __x64_sys_exit_group+0x47/0x50 kernel/exit.c:1033
 do_syscall_x64 arch/x86/entry/common.c:50 [inline]
 do_syscall_64+0x3b/0x90 arch/x86/entry/common.c:80
 entry_SYSCALL_64_after_hwframe+0x72/0xdc
RIP: 0033:0x44de86
Code: Unable to access opcode bytes at 0x44de5c.
RSP: 002b:00007fff8410fbc8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
RAX: ffffffffffffffda RBX: 00000000004e5410 RCX: 000000000044de86
RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffffa8
R10: 0000000000411b40 R11: 0000000000000246 R12: 00000000004e5410
R13: 0000000000000001 R14: 0000000000000000 R15: 0000000000000001
 </TASK>
irq event stamp: 0
hardirqs last  enabled at (0): [<0000000000000000>] 0x0
hardirqs last disabled at (0): [<ffffffff8122d29a>] copy_process+0x256a/0x7650 kernel/fork.c:2448
softirqs last  enabled at (0): [<ffffffff8122d2e2>] copy_process+0x25b2/0x7650 kernel/fork.c:2452
softirqs last disabled at (0): [<0000000000000000>] 0x0
---[ end trace 0000000000000000 ]---
------------[ cut here ]------------
WARNING: CPU: 1 PID: 603 at drivers/iommu/iommufd/io_pagetable.c:663 iopt_destroy_table+0x15f/0x1b0 drivers/iommu/iommufd/io_pagetable.c:663
Modules linked in:
CPU: 1 PID: 603 Comm: syz-executor321 Tainted: G    B   W          6.4.0-rc6-5ca8bbe2b782+ #1
Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
RIP: 0010:iopt_destroy_table+0x15f/0x1b0 drivers/iommu/iommufd/io_pagetable.c:663
Code: 5b 41 5c 41 5d 41 5e 5d c3 cc cc cc cc e8 c9 53 0b fe 0f 0b e9 51 ff ff ff e8 bd 53 0b fe 0f 0b e9 76 ff ff ff e8 b1 53 0b fe <0f> 0b eb 9e e8 a8 53 0b fe 0f 0b e8 a1 53 0b fe 5b 41 5c 41 5d 41
RSP: 0018:ffff888012ecfb78 EFLAGS: 00010246
RAX: 0000000000000000 RBX: 0000000000000000 RCX: 0000000000000000
RDX: 0000000000000000 RSI: ffff88800f1e4a00 RDI: 0000000000000002
RBP: ffff888012ecfb98 R08: ffffed1002d1c03e R09: ffffed1002d1c03e
R10: ffff8880168e01ef R11: ffffed1002d1c03d R12: ffff8880168e0290
R13: ffff8880168e00a8 R14: ffffffffffffffff R15: ffff888012ecfc60
FS:  0000000000000000(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
CR2: 00000000004e5420 CR3: 000000000667e000 CR4: 0000000000750ee0
PKRU: 55555554
Call Trace:
 <TASK>
 iommufd_ioas_destroy+0x53/0x70 drivers/iommu/iommufd/ioas.c:19
 iommufd_fops_release+0x1f7/0x370 drivers/iommu/iommufd/main.c:231
 __fput+0x26d/0xa40 fs/file_table.c:321
 ____fput+0x1e/0x30 fs/file_table.c:349
 task_work_run+0x1a4/0x2d0 kernel/task_work.c:179
 exit_task_work include/linux/task_work.h:38 [inline]
 do_exit+0xaf3/0x2f60 kernel/exit.c:874
 do_group_exit+0xe0/0x2b0 kernel/exit.c:1024
 __do_sys_exit_group kernel/exit.c:1035 [inline]
 __se_sys_exit_group kernel/exit.c:1033 [inline]
 __x64_sys_exit_group+0x47/0x50 kernel/exit.c:1033
 do_syscall_x64 arch/x86/entry/common.c:50 [inline]
 do_syscall_64+0x3b/0x90 arch/x86/entry/common.c:80
 entry_SYSCALL_64_after_hwframe+0x72/0xdc
RIP: 0033:0x44de86
Code: Unable to access opcode bytes at 0x44de5c.
RSP: 002b:00007fff8410fbc8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
RAX: ffffffffffffffda RBX: 00000000004e5410 RCX: 000000000044de86
RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffffa8
R10: 0000000000411b40 R11: 0000000000000246 R12: 00000000004e5410
R13: 0000000000000001 R14: 0000000000000000 R15: 0000000000000001
 </TASK>
irq event stamp: 0
hardirqs last  enabled at (0): [<0000000000000000>] 0x0
hardirqs last disabled at (0): [<ffffffff8122d29a>] copy_process+0x256a/0x7650 kernel/fork.c:2448
softirqs last  enabled at (0): [<ffffffff8122d2e2>] copy_process+0x25b2/0x7650 kernel/fork.c:2452
softirqs last disabled at (0): [<0000000000000000>] 0x0
---[ end trace 0000000000000000 ]---
------------[ cut here ]------------
WARNING: CPU: 1 PID: 604 at drivers/iommu/iommufd/io_pagetable.c:1158 iopt_remove_access+0xb5/0xd0 drivers/iommu/iommufd/io_pagetable.c:1157
Modules linked in:
CPU: 1 PID: 604 Comm: syz-executor321 Tainted: G    B   W          6.4.0-rc6-5ca8bbe2b782+ #1
Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
RIP: 0010:iopt_remove_access+0xb5/0xd0 drivers/iommu/iommufd/io_pagetable.c:1157
Code: 45 85 e4 75 29 e8 4b 2d 0b fe 4c 89 ef e8 33 eb e8 fd 48 89 df e8 2b eb e8 fd 5b 41 5c 41 5d 5d c3 cc cc cc cc e8 2b 2d 0b fe <0f> 0b eb b9 e8 22 2d 0b fe 0f 0b eb ce e8 b9 1d 67 fe eb 90 0f 1f
RSP: 0018:ffff88801893fbb8 EFLAGS: 00010246
RAX: 0000000000000000 RBX: ffff888019f9f8a8 RCX: 0000000000000000
RDX: 0000000000000000 RSI: ffff8880129b8000 RDI: 0000000000000002
RBP: ffff88801893fbd0 R08: ffffed10033f3f33 R09: ffffed10033f3f33
R10: ffff888019f9f993 R11: ffffed10033f3f32 R12: ffff888019dd0800
R13: ffff888019f9f9e8 R14: ffffffff835430e0 R15: ffff88801893fe68
FS:  0000000001a0a3c0(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
CR2: 0000000020000140 CR3: 0000000014adc000 CR4: 0000000000750ee0
PKRU: 55555554
Call Trace:
 <TASK>
 __iommufd_access_detach+0x1c2/0x2b0 drivers/iommu/iommufd/device.c:971
 iommufd_access_change_pt+0x149/0x270 drivers/iommu/iommufd/device.c:1006
 iommufd_access_replace+0xb4/0x120 drivers/iommu/iommufd/device.c:1042
 iommufd_test_access_replace_ioas drivers/iommu/iommufd/selftest.c:1025 [inline]
 iommufd_test+0x103d/0x3f00 drivers/iommu/iommufd/selftest.c:1252
 iommufd_fops_ioctl+0x37d/0x510 drivers/iommu/iommufd/main.c:378
 vfs_ioctl fs/ioctl.c:51 [inline]
 __do_sys_ioctl fs/ioctl.c:870 [inline]
 __se_sys_ioctl fs/ioctl.c:856 [inline]
 __x64_sys_ioctl+0x1a3/0x230 fs/ioctl.c:856
 do_syscall_x64 arch/x86/entry/common.c:50 [inline]
 do_syscall_64+0x3b/0x90 arch/x86/entry/common.c:80
 entry_SYSCALL_64_after_hwframe+0x72/0xdc
RIP: 0033:0x44ff3d
Code: db 48 89 d8 5b 5d 41 5c 41 5d 41 5e c3 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 c7 c1 a8 ff ff ff f7 d8 64 89 01 48
RSP: 002b:00007fff8410fc18 EFLAGS: 00000246 ORIG_RAX: 0000000000000010
RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 000000000044ff3d
RDX: 0000000020000000 RSI: 0000000000003ba0 RDI: 0000000000000003
RBP: 0000000000000001 R08: 0000000000411b40 R09: 0000000000411b40
R10: 0000000000411b40 R11: 0000000000000246 R12: 0000000000000001
R13: 0000000000000000 R14: 00000000004004e8 R15: 0000000000000000
 </TASK>
irq event stamp: 0
hardirqs last  enabled at (0): [<0000000000000000>] 0x0
hardirqs last disabled at (0): [<ffffffff8122d29a>] copy_process+0x256a/0x7650 kernel/fork.c:2448
softirqs last  enabled at (0): [<ffffffff8122d2e2>] copy_process+0x25b2/0x7650 kernel/fork.c:2452
softirqs last disabled at (0): [<0000000000000000>] 0x0
---[ end trace 0000000000000000 ]---
------------[ cut here ]------------
WARNING: CPU: 1 PID: 604 at drivers/iommu/iommufd/io_pagetable.c:1158 iopt_remove_access+0xb5/0xd0 drivers/iommu/iommufd/io_pagetable.c:1157
Modules linked in:
CPU: 1 PID: 604 Comm: syz-executor321 Tainted: G    B   W          6.4.0-rc6-5ca8bbe2b782+ #1
Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
RIP: 0010:iopt_remove_access+0xb5/0xd0 drivers/iommu/iommufd/io_pagetable.c:1157
Code: 45 85 e4 75 29 e8 4b 2d 0b fe 4c 89 ef e8 33 eb e8 fd 48 89 df e8 2b eb e8 fd 5b 41 5c 41 5d 5d c3 cc cc cc cc e8 2b 2d 0b fe <0f> 0b eb b9 e8 22 2d 0b fe 0f 0b eb ce e8 b9 1d 67 fe eb 90 0f 1f
RSP: 0018:ffff88801893fbd0 EFLAGS: 00010246
RAX: 0000000000000000 RBX: ffff888019f9f8a8 RCX: 0000000000000000
RDX: 0000000000000000 RSI: ffff8880129b8000 RDI: 0000000000000002
RBP: ffff88801893fbe8 R08: ffffed10033f3f33 R09: ffffed10033f3f33
R10: ffff888019f9f993 R11: ffffed10033f3f32 R12: ffff888019e7e000
R13: ffff888019f9f9e8 R14: ffff88801a0d5f00 R15: 0000000000000000
FS:  0000000000000000(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
CR2: 00000000004e5420 CR3: 000000000667e000 CR4: 0000000000750ee0
PKRU: 55555554
Call Trace:
 <TASK>
 iommufd_access_destroy_object+0x65/0x170 drivers/iommu/iommufd/device.c:875
 iommufd_object_destroy_user+0x18e/0x220 drivers/iommu/iommufd/main.c:163
 iommufd_access_destroy+0x43/0x70 drivers/iommu/iommufd/device.c:938
 iommufd_test_staccess_release+0x8d/0xd0 drivers/iommu/iommufd/selftest.c:918
 __fput+0x26d/0xa40 fs/file_table.c:321
 ____fput+0x1e/0x30 fs/file_table.c:349
 task_work_run+0x1a4/0x2d0 kernel/task_work.c:179
 exit_task_work include/linux/task_work.h:38 [inline]
 do_exit+0xaf3/0x2f60 kernel/exit.c:874
 do_group_exit+0xe0/0x2b0 kernel/exit.c:1024
 __do_sys_exit_group kernel/exit.c:1035 [inline]
 __se_sys_exit_group kernel/exit.c:1033 [inline]
 __x64_sys_exit_group+0x47/0x50 kernel/exit.c:1033
 do_syscall_x64 arch/x86/entry/common.c:50 [inline]
 do_syscall_64+0x3b/0x90 arch/x86/entry/common.c:80
 entry_SYSCALL_64_after_hwframe+0x72/0xdc
RIP: 0033:0x44de86
Code: Unable to access opcode bytes at 0x44de5c.
RSP: 002b:00007fff8410fbc8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
RAX: ffffffffffffffda RBX: 00000000004e5410 RCX: 000000000044de86
RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffffa8
R10: 0000000000411b40 R11: 0000000000000246 R12: 00000000004e5410
R13: 0000000000000001 R14: 0000000000000000 R15: 0000000000000001
 </TASK>
irq event stamp: 0
hardirqs last  enabled at (0): [<0000000000000000>] 0x0
hardirqs last disabled at (0): [<ffffffff8122d29a>] copy_process+0x256a/0x7650 kernel/fork.c:2448
softirqs last  enabled at (0): [<ffffffff8122d2e2>] copy_process+0x25b2/0x7650 kernel/fork.c:2452
softirqs last disabled at (0): [<0000000000000000>] 0x0
---[ end trace 0000000000000000 ]---
------------[ cut here ]------------
WARNING: CPU: 1 PID: 604 at drivers/iommu/iommufd/io_pagetable.c:663 iopt_destroy_table+0x15f/0x1b0 drivers/iommu/iommufd/io_pagetable.c:663
Modules linked in:
CPU: 1 PID: 604 Comm: syz-executor321 Tainted: G    B   W          6.4.0-rc6-5ca8bbe2b782+ #1
Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
RIP: 0010:iopt_destroy_table+0x15f/0x1b0 drivers/iommu/iommufd/io_pagetable.c:663
Code: 5b 41 5c 41 5d 41 5e 5d c3 cc cc cc cc e8 c9 53 0b fe 0f 0b e9 51 ff ff ff e8 bd 53 0b fe 0f 0b e9 76 ff ff ff e8 b1 53 0b fe <0f> 0b eb 9e e8 a8 53 0b fe 0f 0b e8 a1 53 0b fe 5b 41 5c 41 5d 41
RSP: 0018:ffff88801893fb78 EFLAGS: 00010246
RAX: 0000000000000000 RBX: 0000000000000000 RCX: 0000000000000000
RDX: 0000000000000000 RSI: ffff8880129b8000 RDI: 0000000000000002
RBP: ffff88801893fb98 R08: ffffed10033f3f3e R09: ffffed10033f3f3e
R10: ffff888019f9f9ef R11: ffffed10033f3f3d R12: ffff888019f9fa90
R13: ffff888019f9f8a8 R14: ffffffffffffffff R15: ffff88801893fc60
FS:  0000000000000000(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
CR2: 00000000004e5420 CR3: 000000000667e000 CR4: 0000000000750ee0
PKRU: 55555554
Call Trace:
 <TASK>
 iommufd_ioas_destroy+0x53/0x70 drivers/iommu/iommufd/ioas.c:19
 iommufd_fops_release+0x1f7/0x370 drivers/iommu/iommufd/main.c:231
 __fput+0x26d/0xa40 fs/file_table.c:321
 ____fput+0x1e/0x30 fs/file_table.c:349
 task_work_run+0x1a4/0x2d0 kernel/task_work.c:179
 exit_task_work include/linux/task_work.h:38 [inline]
 do_exit+0xaf3/0x2f60 kernel/exit.c:874
 do_group_exit+0xe0/0x2b0 kernel/exit.c:1024
 __do_sys_exit_group kernel/exit.c:1035 [inline]
 __se_sys_exit_group kernel/exit.c:1033 [inline]
 __x64_sys_exit_group+0x47/0x50 kernel/exit.c:1033
 do_syscall_x64 arch/x86/entry/common.c:50 [inline]
 do_syscall_64+0x3b/0x90 arch/x86/entry/common.c:80
 entry_SYSCALL_64_after_hwframe+0x72/0xdc
RIP: 0033:0x44de86
Code: Unable to access opcode bytes at 0x44de5c.
RSP: 002b:00007fff8410fbc8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
RAX: ffffffffffffffda RBX: 00000000004e5410 RCX: 000000000044de86
RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffffa8
R10: 0000000000411b40 R11: 0000000000000246 R12: 00000000004e5410
R13: 0000000000000001 R14: 0000000000000000 R15: 0000000000000001
 </TASK>
irq event stamp: 0
hardirqs last  enabled at (0): [<0000000000000000>] 0x0
hardirqs last disabled at (0): [<ffffffff8122d29a>] copy_process+0x256a/0x7650 kernel/fork.c:2448
softirqs last  enabled at (0): [<ffffffff8122d2e2>] copy_process+0x25b2/0x7650 kernel/fork.c:2452
softirqs last disabled at (0): [<0000000000000000>] 0x0
---[ end trace 0000000000000000 ]---
------------[ cut here ]------------
WARNING: CPU: 1 PID: 605 at drivers/iommu/iommufd/io_pagetable.c:1158 iopt_remove_access+0xb5/0xd0 drivers/iommu/iommufd/io_pagetable.c:1157
Modules linked in:
CPU: 1 PID: 605 Comm: syz-executor321 Tainted: G    B   W          6.4.0-rc6-5ca8bbe2b782+ #1
Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
RIP: 0010:iopt_remove_access+0xb5/0xd0 drivers/iommu/iommufd/io_pagetable.c:1157
Code: 45 85 e4 75 29 e8 4b 2d 0b fe 4c 89 ef e8 33 eb e8 fd 48 89 df e8 2b eb e8 fd 5b 41 5c 41 5d 5d c3 cc cc cc cc e8 2b 2d 0b fe <0f> 0b eb b9 e8 22 2d 0b fe 0f 0b eb ce e8 b9 1d 67 fe eb 90 0f 1f
RSP: 0018:ffff888016c67bb8 EFLAGS: 00010246
RAX: 0000000000000000 RBX: ffff888016b638a8 RCX: 0000000000000000
RDX: 0000000000000000 RSI: ffff888011de4a00 RDI: 0000000000000002
RBP: ffff888016c67bd0 R08: ffffed1002d6c733 R09: ffffed1002d6c733
R10: ffff888016b63993 R11: ffffed1002d6c732 R12: ffff888019d31c00
R13: ffff888016b639e8 R14: ffffffff835430e0 R15: ffff888016c67e68
FS:  0000000001a0a3c0(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
CR2: 0000000020000140 CR3: 0000000014f8e000 CR4: 0000000000750ee0
PKRU: 55555554
Call Trace:
 <TASK>
 __iommufd_access_detach+0x1c2/0x2b0 drivers/iommu/iommufd/device.c:971
 iommufd_access_change_pt+0x149/0x270 drivers/iommu/iommufd/device.c:1006
 iommufd_access_replace+0xb4/0x120 drivers/iommu/iommufd/device.c:1042
 iommufd_test_access_replace_ioas drivers/iommu/iommufd/selftest.c:1025 [inline]
 iommufd_test+0x103d/0x3f00 drivers/iommu/iommufd/selftest.c:1252
 iommufd_fops_ioctl+0x37d/0x510 drivers/iommu/iommufd/main.c:378
 vfs_ioctl fs/ioctl.c:51 [inline]
 __do_sys_ioctl fs/ioctl.c:870 [inline]
 __se_sys_ioctl fs/ioctl.c:856 [inline]
 __x64_sys_ioctl+0x1a3/0x230 fs/ioctl.c:856
 do_syscall_x64 arch/x86/entry/common.c:50 [inline]
 do_syscall_64+0x3b/0x90 arch/x86/entry/common.c:80
 entry_SYSCALL_64_after_hwframe+0x72/0xdc
RIP: 0033:0x44ff3d
Code: db 48 89 d8 5b 5d 41 5c 41 5d 41 5e c3 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 c7 c1 a8 ff ff ff f7 d8 64 89 01 48
RSP: 002b:00007fff8410fc18 EFLAGS: 00000246 ORIG_RAX: 0000000000000010
RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 000000000044ff3d
RDX: 0000000020000000 RSI: 0000000000003ba0 RDI: 0000000000000003
RBP: 0000000000000001 R08: 0000000000411b40 R09: 0000000000411b40
R10: 0000000000411b40 R11: 0000000000000246 R12: 0000000000000001
R13: 0000000000000000 R14: 00000000004004e8 R15: 0000000000000000
 </TASK>
irq event stamp: 0
systemd-journald[137]: Data hash table of /run/log/journal/6ee5b4ede6d941feba9def5bf10a6d8d/system.journal has a fill level at 75.0 (5461 of 7281 items, 4194304 file size, 768 bytes per hash table item), suggesting rotation.
hardirqs last  enabled at (0): [<0000000000000000>] 0x0
systemd-journald[137]: /run/log/journal/6ee5b4ede6d941feba9def5bf10a6d8d/system.journal: Journal header limits reached or header out-of-date, rotating.
hardirqs last disabled at (0): [<ffffffff8122d29a>] copy_process+0x256a/0x7650 kernel/fork.c:2448
softirqs last  enabled at (0): [<ffffffff8122d2e2>] copy_process+0x25b2/0x7650 kernel/fork.c:2452
softirqs last disabled at (0): [<0000000000000000>] 0x0
---[ end trace 0000000000000000 ]---
------------[ cut here ]------------
WARNING: CPU: 1 PID: 605 at drivers/iommu/iommufd/io_pagetable.c:1158 iopt_remove_access+0xb5/0xd0 drivers/iommu/iommufd/io_pagetable.c:1157
Modules linked in:
CPU: 1 PID: 605 Comm: syz-executor321 Tainted: G    B   W          6.4.0-rc6-5ca8bbe2b782+ #1
Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
RIP: 0010:iopt_remove_access+0xb5/0xd0 drivers/iommu/iommufd/io_pagetable.c:1157
Code: 45 85 e4 75 29 e8 4b 2d 0b fe 4c 89 ef e8 33 eb e8 fd 48 89 df e8 2b eb e8 fd 5b 41 5c 41 5d 5d c3 cc cc cc cc e8 2b 2d 0b fe <0f> 0b eb b9 e8 22 2d 0b fe 0f 0b eb ce e8 b9 1d 67 fe eb 90 0f 1f
RSP: 0018:ffff888016c67bd0 EFLAGS: 00010246
RAX: 0000000000000000 RBX: ffff888016b638a8 RCX: 0000000000000000
RDX: 0000000000000000 RSI: ffff888011de4a00 RDI: 0000000000000002
RBP: ffff888016c67be8 R08: ffffed1002d6c733 R09: ffffed1002d6c733
R10: ffff888016b63993 R11: ffffed1002d6c732 R12: ffff888019dd2400
R13: ffff888016b639e8 R14: ffff888022d21100 R15: 0000000000000000
FS:  0000000000000000(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
CR2: 00000000004e5420 CR3: 000000000667e000 CR4: 0000000000750ee0
PKRU: 55555554
Call Trace:
 <TASK>
 iommufd_access_destroy_object+0x65/0x170 drivers/iommu/iommufd/device.c:875
 iommufd_object_destroy_user+0x18e/0x220 drivers/iommu/iommufd/main.c:163
 iommufd_access_destroy+0x43/0x70 drivers/iommu/iommufd/device.c:938
 iommufd_test_staccess_release+0x8d/0xd0 drivers/iommu/iommufd/selftest.c:918
 __fput+0x26d/0xa40 fs/file_table.c:321
 ____fput+0x1e/0x30 fs/file_table.c:349
 task_work_run+0x1a4/0x2d0 kernel/task_work.c:179
 exit_task_work include/linux/task_work.h:38 [inline]
 do_exit+0xaf3/0x2f60 kernel/exit.c:874
 do_group_exit+0xe0/0x2b0 kernel/exit.c:1024
 __do_sys_exit_group kernel/exit.c:1035 [inline]
 __se_sys_exit_group kernel/exit.c:1033 [inline]
 __x64_sys_exit_group+0x47/0x50 kernel/exit.c:1033
 do_syscall_x64 arch/x86/entry/common.c:50 [inline]
 do_syscall_64+0x3b/0x90 arch/x86/entry/common.c:80
 entry_SYSCALL_64_after_hwframe+0x72/0xdc
RIP: 0033:0x44de86
Code: Unable to access opcode bytes at 0x44de5c.
RSP: 002b:00007fff8410fbc8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
RAX: ffffffffffffffda RBX: 00000000004e5410 RCX: 000000000044de86
RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffffa8
R10: 0000000000411b40 R11: 0000000000000246 R12: 00000000004e5410
R13: 0000000000000001 R14: 0000000000000000 R15: 0000000000000001
 </TASK>
irq event stamp: 0
hardirqs last  enabled at (0): [<0000000000000000>] 0x0
hardirqs last disabled at (0): [<ffffffff8122d29a>] copy_process+0x256a/0x7650 kernel/fork.c:2448
softirqs last  enabled at (0): [<ffffffff8122d2e2>] copy_process+0x25b2/0x7650 kernel/fork.c:2452
softirqs last disabled at (0): [<0000000000000000>] 0x0
---[ end trace 0000000000000000 ]---
------------[ cut here ]------------
WARNING: CPU: 1 PID: 605 at drivers/iommu/iommufd/io_pagetable.c:663 iopt_destroy_table+0x15f/0x1b0 drivers/iommu/iommufd/io_pagetable.c:663
Modules linked in:
CPU: 1 PID: 605 Comm: syz-executor321 Tainted: G    B   W          6.4.0-rc6-5ca8bbe2b782+ #1
Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
RIP: 0010:iopt_destroy_table+0x15f/0x1b0 drivers/iommu/iommufd/io_pagetable.c:663
Code: 5b 41 5c 41 5d 41 5e 5d c3 cc cc cc cc e8 c9 53 0b fe 0f 0b e9 51 ff ff ff e8 bd 53 0b fe 0f 0b e9 76 ff ff ff e8 b1 53 0b fe <0f> 0b eb 9e e8 a8 53 0b fe 0f 0b e8 a1 53 0b fe 5b 41 5c 41 5d 41
RSP: 0018:ffff888016c67b78 EFLAGS: 00010246
RAX: 0000000000000000 RBX: 0000000000000000 RCX: 0000000000000000
RDX: 0000000000000000 RSI: ffff888011de4a00 RDI: 0000000000000002
RBP: ffff888016c67b98 R08: ffffed1002d6c73e R09: ffffed1002d6c73e
R10: ffff888016b639ef R11: ffffed1002d6c73d R12: ffff888016b63a90
R13: ffff888016b638a8 R14: ffffffffffffffff R15: ffff888016c67c60
FS:  0000000000000000(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
CR2: 00000000004e5420 CR3: 000000000667e000 CR4: 0000000000750ee0
PKRU: 55555554
Call Trace:
 <TASK>
 iommufd_ioas_destroy+0x53/0x70 drivers/iommu/iommufd/ioas.c:19
 iommufd_fops_release+0x1f7/0x370 drivers/iommu/iommufd/main.c:231
 __fput+0x26d/0xa40 fs/file_table.c:321
 ____fput+0x1e/0x30 fs/file_table.c:349
 task_work_run+0x1a4/0x2d0 kernel/task_work.c:179
 exit_task_work include/linux/task_work.h:38 [inline]
 do_exit+0xaf3/0x2f60 kernel/exit.c:874
 do_group_exit+0xe0/0x2b0 kernel/exit.c:1024
 __do_sys_exit_group kernel/exit.c:1035 [inline]
 __se_sys_exit_group kernel/exit.c:1033 [inline]
 __x64_sys_exit_group+0x47/0x50 kernel/exit.c:1033
 do_syscall_x64 arch/x86/entry/common.c:50 [inline]
 do_syscall_64+0x3b/0x90 arch/x86/entry/common.c:80
 entry_SYSCALL_64_after_hwframe+0x72/0xdc
RIP: 0033:0x44de86
Code: Unable to access opcode bytes at 0x44de5c.
RSP: 002b:00007fff8410fbc8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
RAX: ffffffffffffffda RBX: 00000000004e5410 RCX: 000000000044de86
RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffffa8
R13: 0000000000000001 R14: 0000000000000000 R15: 0000000000000001
 </TASK>
irq event stamp: 0
hardirqs last  enabled at (0): [<0000000000000000>] 0x0
hardirqs last disabled at (0): [<ffffffff8122d29a>] copy_process+0x256a/0x7650 kernel/fork.c:2448
softirqs last  enabled at (0): [<ffffffff8122d2e2>] copy_process+0x25b2/0x7650 kernel/fork.c:2452
softirqs last disabled at (0): [<0000000000000000>] 0x0
---[ end trace 0000000000000000 ]---
------------[ cut here ]------------
WARNING: CPU: 1 PID: 607 at drivers/iommu/iommufd/io_pagetable.c:1158 iopt_remove_access+0xb5/0xd0 drivers/iommu/iommufd/io_pagetable.c:1157
Modules linked in:
CPU: 1 PID: 607 Comm: syz-executor321 Tainted: G    B   W          6.4.0-rc6-5ca8bbe2b782+ #1
Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
RIP: 0010:iopt_remove_access+0xb5/0xd0 drivers/iommu/iommufd/io_pagetable.c:1157
Code: 45 85 e4 75 29 e8 4b 2d 0b fe 4c 89 ef e8 33 eb e8 fd 48 89 df e8 2b eb e8 fd 5b 41 5c 41 5d 5d c3 cc cc cc cc e8 2b 2d 0b fe <0f> 0b eb b9 e8 22 2d 0b fe 0f 0b eb ce e8 b9 1d 67 fe eb 90 0f 1f
RSP: 0018:ffff88801496fbb8 EFLAGS: 00010246
RAX: 0000000000000000 RBX: ffff888011fc68a8 RCX: 0000000000000000
RDX: 0000000000000000 RSI: ffff888015190000 RDI: 0000000000000002
RBP: ffff88801496fbd0 R08: ffffed10023f8d33 R09: ffffed10023f8d33
R10: ffff888011fc6993 R11: ffffed10023f8d32 R12: ffff888019d75c00
R13: ffff888011fc69e8 R14: ffffffff835430e0 R15: ffff88801496fe68
FS:  0000000001a0a3c0(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
CR2: 0000000020000140 CR3: 0000000010344000 CR4: 0000000000750ee0
PKRU: 55555554
Call Trace:
 <TASK>
 __iommufd_access_detach+0x1c2/0x2b0 drivers/iommu/iommufd/device.c:971
 iommufd_access_change_pt+0x149/0x270 drivers/iommu/iommufd/device.c:1006
 iommufd_access_replace+0xb4/0x120 drivers/iommu/iommufd/device.c:1042
 iommufd_test_access_replace_ioas drivers/iommu/iommufd/selftest.c:1025 [inline]
 iommufd_test+0x103d/0x3f00 drivers/iommu/iommufd/selftest.c:1252
 iommufd_fops_ioctl+0x37d/0x510 drivers/iommu/iommufd/main.c:378
 vfs_ioctl fs/ioctl.c:51 [inline]
 __do_sys_ioctl fs/ioctl.c:870 [inline]
 __se_sys_ioctl fs/ioctl.c:856 [inline]
 __x64_sys_ioctl+0x1a3/0x230 fs/ioctl.c:856
 do_syscall_x64 arch/x86/entry/common.c:50 [inline]
 do_syscall_64+0x3b/0x90 arch/x86/entry/common.c:80
 entry_SYSCALL_64_after_hwframe+0x72/0xdc
RIP: 0033:0x44ff3d
Code: db 48 89 d8 5b 5d 41 5c 41 5d 41 5e c3 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 c7 c1 a8 ff ff ff f7 d8 64 89 01 48
RSP: 002b:00007fff8410fc18 EFLAGS: 00000246 ORIG_RAX: 0000000000000010
RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 000000000044ff3d
RDX: 0000000020000000 RSI: 0000000000003ba0 RDI: 0000000000000003
RBP: 0000000000000001 R08: 0000000000411b40 R09: 0000000000411b40
R10: 0000000000411b40 R11: 0000000000000246 R12: 0000000000000001
R13: 0000000000000000 R14: 00000000004004e8 R15: 0000000000000000
 </TASK>
irq event stamp: 0
hardirqs last  enabled at (0): [<0000000000000000>] 0x0
hardirqs last disabled at (0): [<ffffffff8122d29a>] copy_process+0x256a/0x7650 kernel/fork.c:2448
softirqs last  enabled at (0): [<ffffffff8122d2e2>] copy_process+0x25b2/0x7650 kernel/fork.c:2452
softirqs last disabled at (0): [<0000000000000000>] 0x0
---[ end trace 0000000000000000 ]---
------------[ cut here ]------------
WARNING: CPU: 1 PID: 607 at drivers/iommu/iommufd/io_pagetable.c:1158 iopt_remove_access+0xb5/0xd0 drivers/iommu/iommufd/io_pagetable.c:1157
Modules linked in:
CPU: 1 PID: 607 Comm: syz-executor321 Tainted: G    B   W          6.4.0-rc6-5ca8bbe2b782+ #1
Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
RIP: 0010:iopt_remove_access+0xb5/0xd0 drivers/iommu/iommufd/io_pagetable.c:1157
Code: 45 85 e4 75 29 e8 4b 2d 0b fe 4c 89 ef e8 33 eb e8 fd 48 89 df e8 2b eb e8 fd 5b 41 5c 41 5d 5d c3 cc cc cc cc e8 2b 2d 0b fe <0f> 0b eb b9 e8 22 2d 0b fe 0f 0b eb ce e8 b9 1d 67 fe eb 90 0f 1f
RSP: 0018:ffff88801496fbd0 EFLAGS: 00010246
RAX: 0000000000000000 RBX: ffff888011fc68a8 RCX: 0000000000000000
RDX: 0000000000000000 RSI: ffff888015190000 RDI: 0000000000000002
RBP: ffff88801496fbe8 R08: ffffed10023f8d33 R09: ffffed10023f8d33
R10: ffff888011fc6993 R11: ffffed10023f8d32 R12: ffff888019d31400
R13: ffff888011fc69e8 R14: ffff888022dd8d00 R15: 0000000000000000
FS:  0000000000000000(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
CR2: 00000000004e5420 CR3: 000000000667e000 CR4: 0000000000750ee0
PKRU: 55555554
Call Trace:
 <TASK>
 iommufd_access_destroy_object+0x65/0x170 drivers/iommu/iommufd/device.c:875
 iommufd_object_destroy_user+0x18e/0x220 drivers/iommu/iommufd/main.c:163
 iommufd_access_destroy+0x43/0x70 drivers/iommu/iommufd/device.c:938
 iommufd_test_staccess_release+0x8d/0xd0 drivers/iommu/iommufd/selftest.c:918
 __fput+0x26d/0xa40 fs/file_table.c:321
 ____fput+0x1e/0x30 fs/file_table.c:349
 task_work_run+0x1a4/0x2d0 kernel/task_work.c:179
 exit_task_work include/linux/task_work.h:38 [inline]
 do_exit+0xaf3/0x2f60 kernel/exit.c:874
 do_group_exit+0xe0/0x2b0 kernel/exit.c:1024
 __do_sys_exit_group kernel/exit.c:1035 [inline]
 __se_sys_exit_group kernel/exit.c:1033 [inline]
 __x64_sys_exit_group+0x47/0x50 kernel/exit.c:1033
 do_syscall_x64 arch/x86/entry/common.c:50 [inline]
 do_syscall_64+0x3b/0x90 arch/x86/entry/common.c:80
 entry_SYSCALL_64_after_hwframe+0x72/0xdc
RIP: 0033:0x44de86
Code: Unable to access opcode bytes at 0x44de5c.
RSP: 002b:00007fff8410fbc8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
RAX: ffffffffffffffda RBX: 00000000004e5410 RCX: 000000000044de86
RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffffa8
R10: 0000000000411b40 R11: 0000000000000246 R12: 00000000004e5410
R13: 0000000000000001 R14: 0000000000000000 R15: 0000000000000001
 </TASK>
irq event stamp: 0
hardirqs last  enabled at (0): [<0000000000000000>] 0x0
hardirqs last disabled at (0): [<ffffffff8122d29a>] copy_process+0x256a/0x7650 kernel/fork.c:2448
softirqs last  enabled at (0): [<ffffffff8122d2e2>] copy_process+0x25b2/0x7650 kernel/fork.c:2452
softirqs last disabled at (0): [<0000000000000000>] 0x0
---[ end trace 0000000000000000 ]---
------------[ cut here ]------------
WARNING: CPU: 1 PID: 607 at drivers/iommu/iommufd/io_pagetable.c:663 iopt_destroy_table+0x15f/0x1b0 drivers/iommu/iommufd/io_pagetable.c:663
Modules linked in:
CPU: 1 PID: 607 Comm: syz-executor321 Tainted: G    B   W          6.4.0-rc6-5ca8bbe2b782+ #1
Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
RIP: 0010:iopt_destroy_table+0x15f/0x1b0 drivers/iommu/iommufd/io_pagetable.c:663
Code: 5b 41 5c 41 5d 41 5e 5d c3 cc cc cc cc e8 c9 53 0b fe 0f 0b e9 51 ff ff ff e8 bd 53 0b fe 0f 0b e9 76 ff ff ff e8 b1 53 0b fe <0f> 0b eb 9e e8 a8 53 0b fe 0f 0b e8 a1 53 0b fe 5b 41 5c 41 5d 41
RSP: 0018:ffff88801496fb78 EFLAGS: 00010246
RAX: 0000000000000000 RBX: 0000000000000000 RCX: 0000000000000000
RDX: 0000000000000000 RSI: ffff888015190000 RDI: 0000000000000002
RBP: ffff88801496fb98 R08: ffffed10023f8d3e R09: ffffed10023f8d3e
R10: ffff888011fc69ef R11: ffffed10023f8d3d R12: ffff888011fc6a90
R13: ffff888011fc68a8 R14: ffffffffffffffff R15: ffff88801496fc60
FS:  0000000000000000(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
CR2: 00000000004e5420 CR3: 000000000667e000 CR4: 0000000000750ee0
PKRU: 55555554
Call Trace:
 <TASK>
 iommufd_ioas_destroy+0x53/0x70 drivers/iommu/iommufd/ioas.c:19
 iommufd_fops_release+0x1f7/0x370 drivers/iommu/iommufd/main.c:231
 __fput+0x26d/0xa40 fs/file_table.c:321
 ____fput+0x1e/0x30 fs/file_table.c:349
 task_work_run+0x1a4/0x2d0 kernel/task_work.c:179
 exit_task_work include/linux/task_work.h:38 [inline]
 do_exit+0xaf3/0x2f60 kernel/exit.c:874
 do_group_exit+0xe0/0x2b0 kernel/exit.c:1024
 __do_sys_exit_group kernel/exit.c:1035 [inline]
 __se_sys_exit_group kernel/exit.c:1033 [inline]
 __x64_sys_exit_group+0x47/0x50 kernel/exit.c:1033
 do_syscall_x64 arch/x86/entry/common.c:50 [inline]
 do_syscall_64+0x3b/0x90 arch/x86/entry/common.c:80
 entry_SYSCALL_64_after_hwframe+0x72/0xdc
RIP: 0033:0x44de86
Code: Unable to access opcode bytes at 0x44de5c.
RSP: 002b:00007fff8410fbc8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
RAX: ffffffffffffffda RBX: 00000000004e5410 RCX: 000000000044de86
RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffffa8
R10: 0000000000411b40 R11: 0000000000000246 R12: 00000000004e5410
R13: 0000000000000001 R14: 0000000000000000 R15: 0000000000000001
 </TASK>
irq event stamp: 0
hardirqs last  enabled at (0): [<0000000000000000>] 0x0
hardirqs last disabled at (0): [<ffffffff8122d29a>] copy_process+0x256a/0x7650 kernel/fork.c:2448
softirqs last  enabled at (0): [<ffffffff8122d2e2>] copy_process+0x25b2/0x7650 kernel/fork.c:2452
softirqs last disabled at (0): [<0000000000000000>] 0x0
---[ end trace 0000000000000000 ]---
------------[ cut here ]------------
WARNING: CPU: 1 PID: 608 at drivers/iommu/iommufd/io_pagetable.c:1158 iopt_remove_access+0xb5/0xd0 drivers/iommu/iommufd/io_pagetable.c:1157
Modules linked in:
CPU: 1 PID: 608 Comm: syz-executor321 Tainted: G    B   W          6.4.0-rc6-5ca8bbe2b782+ #1
Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
RIP: 0010:iopt_remove_access+0xb5/0xd0 drivers/iommu/iommufd/io_pagetable.c:1157
Code: 45 85 e4 75 29 e8 4b 2d 0b fe 4c 89 ef e8 33 eb e8 fd 48 89 df e8 2b eb e8 fd 5b 41 5c 41 5d 5d c3 cc cc cc cc e8 2b 2d 0b fe <0f> 0b eb b9 e8 22 2d 0b fe 0f 0b eb ce e8 b9 1d 67 fe eb 90 0f 1f
RSP: 0018:ffff888016c67bb8 EFLAGS: 00010246
RAX: 0000000000000000 RBX: ffff88801181f0a8 RCX: 0000000000000000
RDX: 0000000000000000 RSI: ffff888012e52500 RDI: 0000000000000002
RBP: ffff888016c67bd0 R08: ffffed1002303e33 R09: ffffed1002303e33
R10: ffff88801181f193 R11: ffffed1002303e32 R12: ffff888019d40000
R13: ffff88801181f1e8 R14: ffffffff835430e0 R15: ffff888016c67e68
FS:  0000000001a0a3c0(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
CR2: 0000000020000140 CR3: 0000000010344000 CR4: 0000000000750ee0
PKRU: 55555554
Call Trace:
 <TASK>
 __iommufd_access_detach+0x1c2/0x2b0 drivers/iommu/iommufd/device.c:971
 iommufd_access_change_pt+0x149/0x270 drivers/iommu/iommufd/device.c:1006
 iommufd_access_replace+0xb4/0x120 drivers/iommu/iommufd/device.c:1042
 iommufd_test_access_replace_ioas drivers/iommu/iommufd/selftest.c:1025 [inline]
 iommufd_test+0x103d/0x3f00 drivers/iommu/iommufd/selftest.c:1252
 iommufd_fops_ioctl+0x37d/0x510 drivers/iommu/iommufd/main.c:378
 vfs_ioctl fs/ioctl.c:51 [inline]
 __do_sys_ioctl fs/ioctl.c:870 [inline]
 __se_sys_ioctl fs/ioctl.c:856 [inline]
 __x64_sys_ioctl+0x1a3/0x230 fs/ioctl.c:856
 do_syscall_x64 arch/x86/entry/common.c:50 [inline]
 do_syscall_64+0x3b/0x90 arch/x86/entry/common.c:80
 entry_SYSCALL_64_after_hwframe+0x72/0xdc
RIP: 0033:0x44ff3d
Code: db 48 89 d8 5b 5d 41 5c 41 5d 41 5e c3 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 c7 c1 a8 ff ff ff f7 d8 64 89 01 48
RSP: 002b:00007fff8410fc18 EFLAGS: 00000246 ORIG_RAX: 0000000000000010
RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 000000000044ff3d
RDX: 0000000020000000 RSI: 0000000000003ba0 RDI: 0000000000000003
RBP: 0000000000000001 R08: 0000000000411b40 R09: 0000000000411b40
R10: 0000000000411b40 R11: 0000000000000246 R12: 0000000000000001
R13: 0000000000000000 R14: 00000000004004e8 R15: 0000000000000000
 </TASK>
irq event stamp: 0
hardirqs last  enabled at (0): [<0000000000000000>] 0x0
hardirqs last disabled at (0): [<ffffffff8122d29a>] copy_process+0x256a/0x7650 kernel/fork.c:2448
softirqs last  enabled at (0): [<ffffffff8122d2e2>] copy_process+0x25b2/0x7650 kernel/fork.c:2452
softirqs last disabled at (0): [<0000000000000000>] 0x0
---[ end trace 0000000000000000 ]---
------------[ cut here ]------------
WARNING: CPU: 1 PID: 608 at drivers/iommu/iommufd/io_pagetable.c:1158 iopt_remove_access+0xb5/0xd0 drivers/iommu/iommufd/io_pagetable.c:1157
Modules linked in:
CPU: 1 PID: 608 Comm: syz-executor321 Tainted: G    B   W          6.4.0-rc6-5ca8bbe2b782+ #1
Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
RIP: 0010:iopt_remove_access+0xb5/0xd0 drivers/iommu/iommufd/io_pagetable.c:1157
Code: 45 85 e4 75 29 e8 4b 2d 0b fe 4c 89 ef e8 33 eb e8 fd 48 89 df e8 2b eb e8 fd 5b 41 5c 41 5d 5d c3 cc cc cc cc e8 2b 2d 0b fe <0f> 0b eb b9 e8 22 2d 0b fe 0f 0b eb ce e8 b9 1d 67 fe eb 90 0f 1f
RSP: 0018:ffff888016c67bd0 EFLAGS: 00010246
RAX: 0000000000000000 RBX: ffff88801181f0a8 RCX: 0000000000000000
RDX: 0000000000000000 RSI: ffff888012e52500 RDI: 0000000000000002
RBP: ffff888016c67be8 R08: ffffed1002303e33 R09: ffffed1002303e33
R10: ffff88801181f193 R11: ffffed1002303e32 R12: ffff888019d74c00
R13: ffff88801181f1e8 R14: ffff8880114d5b00 R15: 0000000000000000
FS:  0000000000000000(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
CR2: 00000000004e5420 CR3: 000000001503a000 CR4: 0000000000750ee0
PKRU: 55555554
Call Trace:
 <TASK>
 iommufd_access_destroy_object+0x65/0x170 drivers/iommu/iommufd/device.c:875
 iommufd_object_destroy_user+0x18e/0x220 drivers/iommu/iommufd/main.c:163
 iommufd_access_destroy+0x43/0x70 drivers/iommu/iommufd/device.c:938
 iommufd_test_staccess_release+0x8d/0xd0 drivers/iommu/iommufd/selftest.c:918
 __fput+0x26d/0xa40 fs/file_table.c:321
 ____fput+0x1e/0x30 fs/file_table.c:349
 task_work_run+0x1a4/0x2d0 kernel/task_work.c:179
 exit_task_work include/linux/task_work.h:38 [inline]
 do_exit+0xaf3/0x2f60 kernel/exit.c:874
 do_group_exit+0xe0/0x2b0 kernel/exit.c:1024
 __do_sys_exit_group kernel/exit.c:1035 [inline]
 __se_sys_exit_group kernel/exit.c:1033 [inline]
 __x64_sys_exit_group+0x47/0x50 kernel/exit.c:1033
 do_syscall_x64 arch/x86/entry/common.c:50 [inline]
 do_syscall_64+0x3b/0x90 arch/x86/entry/common.c:80
 entry_SYSCALL_64_after_hwframe+0x72/0xdc
RIP: 0033:0x44de86
Code: Unable to access opcode bytes at 0x44de5c.
RSP: 002b:00007fff8410fbc8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
RAX: ffffffffffffffda RBX: 00000000004e5410 RCX: 000000000044de86
RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffffa8
R10: 0000000000411b40 R11: 0000000000000246 R12: 00000000004e5410
R13: 0000000000000001 R14: 0000000000000000 R15: 0000000000000001
 </TASK>
irq event stamp: 0
hardirqs last  enabled at (0): [<0000000000000000>] 0x0
hardirqs last disabled at (0): [<ffffffff8122d29a>] copy_process+0x256a/0x7650 kernel/fork.c:2448
softirqs last  enabled at (0): [<ffffffff8122d2e2>] copy_process+0x25b2/0x7650 kernel/fork.c:2452
softirqs last disabled at (0): [<0000000000000000>] 0x0
---[ end trace 0000000000000000 ]---
------------[ cut here ]------------
WARNING: CPU: 1 PID: 608 at drivers/iommu/iommufd/io_pagetable.c:663 iopt_destroy_table+0x15f/0x1b0 drivers/iommu/iommufd/io_pagetable.c:663
Modules linked in:
CPU: 1 PID: 608 Comm: syz-executor321 Tainted: G    B   W          6.4.0-rc6-5ca8bbe2b782+ #1
Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
RIP: 0010:iopt_destroy_table+0x15f/0x1b0 drivers/iommu/iommufd/io_pagetable.c:663
Code: 5b 41 5c 41 5d 41 5e 5d c3 cc cc cc cc e8 c9 53 0b fe 0f 0b e9 51 ff ff ff e8 bd 53 0b fe 0f 0b e9 76 ff ff ff e8 b1 53 0b fe <0f> 0b eb 9e e8 a8 53 0b fe 0f 0b e8 a1 53 0b fe 5b 41 5c 41 5d 41
RSP: 0018:ffff888016c67b78 EFLAGS: 00010246
RAX: 0000000000000000 RBX: 0000000000000000 RCX: 0000000000000000
RDX: 0000000000000000 RSI: ffff888012e52500 RDI: 0000000000000002
RBP: ffff888016c67b98 R08: ffffed1002303e3e R09: ffffed1002303e3e
R10: ffff88801181f1ef R11: ffffed1002303e3d R12: ffff88801181f290
R13: ffff88801181f0a8 R14: ffffffffffffffff R15: ffff888016c67c60
FS:  0000000000000000(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
CR2: 00007f97c0496000 CR3: 0000000014616000 CR4: 0000000000750ee0
PKRU: 55555554
Call Trace:
 <TASK>
 iommufd_ioas_destroy+0x53/0x70 drivers/iommu/iommufd/ioas.c:19
 iommufd_fops_release+0x1f7/0x370 drivers/iommu/iommufd/main.c:231
 __fput+0x26d/0xa40 fs/file_table.c:321
 ____fput+0x1e/0x30 fs/file_table.c:349
 task_work_run+0x1a4/0x2d0 kernel/task_work.c:179
 exit_task_work include/linux/task_work.h:38 [inline]
 do_exit+0xaf3/0x2f60 kernel/exit.c:874
 do_group_exit+0xe0/0x2b0 kernel/exit.c:1024
 __do_sys_exit_group kernel/exit.c:1035 [inline]
 __se_sys_exit_group kernel/exit.c:1033 [inline]
 __x64_sys_exit_group+0x47/0x50 kernel/exit.c:1033
 do_syscall_x64 arch/x86/entry/common.c:50 [inline]
 do_syscall_64+0x3b/0x90 arch/x86/entry/common.c:80
 entry_SYSCALL_64_after_hwframe+0x72/0xdc
RIP: 0033:0x44de86
Code: Unable to access opcode bytes at 0x44de5c.
RSP: 002b:00007fff8410fbc8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
RAX: ffffffffffffffda RBX: 00000000004e5410 RCX: 000000000044de86
RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffffa8
R10: 0000000000411b40 R11: 0000000000000246 R12: 00000000004e5410
R13: 0000000000000001 R14: 0000000000000000 R15: 0000000000000001
 </TASK>
irq event stamp: 0
hardirqs last  enabled at (0): [<0000000000000000>] 0x0
hardirqs last disabled at (0): [<ffffffff8122d29a>] copy_process+0x256a/0x7650 kernel/fork.c:2448
softirqs last  enabled at (0): [<ffffffff8122d2e2>] copy_process+0x25b2/0x7650 kernel/fork.c:2452
softirqs last disabled at (0): [<0000000000000000>] 0x0
---[ end trace 0000000000000000 ]---
------------[ cut here ]------------
WARNING: CPU: 1 PID: 609 at drivers/iommu/iommufd/io_pagetable.c:1158 iopt_remove_access+0xb5/0xd0 drivers/iommu/iommufd/io_pagetable.c:1157
Modules linked in:
CPU: 1 PID: 609 Comm: syz-executor321 Tainted: G    B   W          6.4.0-rc6-5ca8bbe2b782+ #1
Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
RIP: 0010:iopt_remove_access+0xb5/0xd0 drivers/iommu/iommufd/io_pagetable.c:1157
Code: 45 85 e4 75 29 e8 4b 2d 0b fe 4c 89 ef e8 33 eb e8 fd 48 89 df e8 2b eb e8 fd 5b 41 5c 41 5d 5d c3 cc cc cc cc e8 2b 2d 0b fe <0f> 0b eb b9 e8 22 2d 0b fe 0f 0b eb ce e8 b9 1d 67 fe eb 90 0f 1f
RSP: 0018:ffff888012d87bb8 EFLAGS: 00010246
RAX: 0000000000000000 RBX: ffff8880119218a8 RCX: 0000000000000000
RDX: 0000000000000000 RSI: ffff888015194a00 RDI: 0000000000000002
RBP: ffff888012d87bd0 R08: ffffed1002324333 R09: ffffed1002324333
R10: ffff888011921993 R11: ffffed1002324332 R12: ffff888019e31000
R13: ffff8880119219e8 R14: ffffffff835430e0 R15: ffff888012d87e68
FS:  0000000001a0a3c0(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
CR2: 0000000020000140 CR3: 0000000014e6c000 CR4: 0000000000750ee0
PKRU: 55555554
Call Trace:
 <TASK>
 __iommufd_access_detach+0x1c2/0x2b0 drivers/iommu/iommufd/device.c:971
 iommufd_access_change_pt+0x149/0x270 drivers/iommu/iommufd/device.c:1006
 iommufd_access_replace+0xb4/0x120 drivers/iommu/iommufd/device.c:1042
 iommufd_test_access_replace_ioas drivers/iommu/iommufd/selftest.c:1025 [inline]
 iommufd_test+0x103d/0x3f00 drivers/iommu/iommufd/selftest.c:1252
 iommufd_fops_ioctl+0x37d/0x510 drivers/iommu/iommufd/main.c:378
 vfs_ioctl fs/ioctl.c:51 [inline]
 __do_sys_ioctl fs/ioctl.c:870 [inline]
 __se_sys_ioctl fs/ioctl.c:856 [inline]
 __x64_sys_ioctl+0x1a3/0x230 fs/ioctl.c:856
 do_syscall_x64 arch/x86/entry/common.c:50 [inline]
 do_syscall_64+0x3b/0x90 arch/x86/entry/common.c:80
 entry_SYSCALL_64_after_hwframe+0x72/0xdc
RIP: 0033:0x44ff3d
Code: db 48 89 d8 5b 5d 41 5c 41 5d 41 5e c3 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 c7 c1 a8 ff ff ff f7 d8 64 89 01 48
RSP: 002b:00007fff8410fc18 EFLAGS: 00000246 ORIG_RAX: 0000000000000010
RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 000000000044ff3d
RDX: 0000000020000000 RSI: 0000000000003ba0 RDI: 0000000000000003
RBP: 0000000000000001 R08: 0000000000411b40 R09: 0000000000411b40
R10: 0000000000411b40 R11: 0000000000000246 R12: 0000000000000001
R13: 0000000000000000 R14: 00000000004004e8 R15: 0000000000000000
 </TASK>
irq event stamp: 0
hardirqs last  enabled at (0): [<0000000000000000>] 0x0
hardirqs last disabled at (0): [<ffffffff8122d29a>] copy_process+0x256a/0x7650 kernel/fork.c:2448
softirqs last  enabled at (0): [<ffffffff8122d2e2>] copy_process+0x25b2/0x7650 kernel/fork.c:2452
softirqs last disabled at (0): [<0000000000000000>] 0x0
---[ end trace 0000000000000000 ]---
------------[ cut here ]------------
WARNING: CPU: 1 PID: 609 at drivers/iommu/iommufd/io_pagetable.c:1158 iopt_remove_access+0xb5/0xd0 drivers/iommu/iommufd/io_pagetable.c:1157
Modules linked in:
CPU: 1 PID: 609 Comm: syz-executor321 Tainted: G    B   W          6.4.0-rc6-5ca8bbe2b782+ #1
Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
RIP: 0010:iopt_remove_access+0xb5/0xd0 drivers/iommu/iommufd/io_pagetable.c:1157
Code: 45 85 e4 75 29 e8 4b 2d 0b fe 4c 89 ef e8 33 eb e8 fd 48 89 df e8 2b eb e8 fd 5b 41 5c 41 5d 5d c3 cc cc cc cc e8 2b 2d 0b fe <0f> 0b eb b9 e8 22 2d 0b fe 0f 0b eb ce e8 b9 1d 67 fe eb 90 0f 1f
RSP: 0018:ffff888012d87bd0 EFLAGS: 00010246
RAX: 0000000000000000 RBX: ffff8880119218a8 RCX: 0000000000000000
RDX: 0000000000000000 RSI: ffff888015194a00 RDI: 0000000000000002
RBP: ffff888012d87be8 R08: ffffed1002324333 R09: ffffed1002324333
R10: ffff888011921993 R11: ffffed1002324332 R12: ffff888019d41800
R13: ffff8880119219e8 R14: ffff88800f601300 R15: 0000000000000000
FS:  0000000000000000(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
CR2: 00000000004e5420 CR3: 000000000667e000 CR4: 0000000000750ee0
PKRU: 55555554
Call Trace:
 <TASK>
 iommufd_access_destroy_object+0x65/0x170 drivers/iommu/iommufd/device.c:875
 iommufd_object_destroy_user+0x18e/0x220 drivers/iommu/iommufd/main.c:163
 iommufd_access_destroy+0x43/0x70 drivers/iommu/iommufd/device.c:938
 iommufd_test_staccess_release+0x8d/0xd0 drivers/iommu/iommufd/selftest.c:918
 __fput+0x26d/0xa40 fs/file_table.c:321
 ____fput+0x1e/0x30 fs/file_table.c:349
 task_work_run+0x1a4/0x2d0 kernel/task_work.c:179
 exit_task_work include/linux/task_work.h:38 [inline]
 do_exit+0xaf3/0x2f60 kernel/exit.c:874
 do_group_exit+0xe0/0x2b0 kernel/exit.c:1024
 __do_sys_exit_group kernel/exit.c:1035 [inline]
 __se_sys_exit_group kernel/exit.c:1033 [inline]
 __x64_sys_exit_group+0x47/0x50 kernel/exit.c:1033
 do_syscall_x64 arch/x86/entry/common.c:50 [inline]
 do_syscall_64+0x3b/0x90 arch/x86/entry/common.c:80
 entry_SYSCALL_64_after_hwframe+0x72/0xdc
RIP: 0033:0x44de86
Code: Unable to access opcode bytes at 0x44de5c.
RSP: 002b:00007fff8410fbc8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
RAX: ffffffffffffffda RBX: 00000000004e5410 RCX: 000000000044de86
RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffffa8
R10: 0000000000411b40 R11: 0000000000000246 R12: 00000000004e5410
R13: 0000000000000001 R14: 0000000000000000 R15: 0000000000000001
 </TASK>
irq event stamp: 0
hardirqs last  enabled at (0): [<0000000000000000>] 0x0
hardirqs last disabled at (0): [<ffffffff8122d29a>] copy_process+0x256a/0x7650 kernel/fork.c:2448
softirqs last  enabled at (0): [<ffffffff8122d2e2>] copy_process+0x25b2/0x7650 kernel/fork.c:2452
softirqs last disabled at (0): [<0000000000000000>] 0x0
---[ end trace 0000000000000000 ]---
------------[ cut here ]------------
WARNING: CPU: 1 PID: 609 at drivers/iommu/iommufd/io_pagetable.c:663 iopt_destroy_table+0x15f/0x1b0 drivers/iommu/iommufd/io_pagetable.c:663
Modules linked in:
CPU: 1 PID: 609 Comm: syz-executor321 Tainted: G    B   W          6.4.0-rc6-5ca8bbe2b782+ #1
Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
RIP: 0010:iopt_destroy_table+0x15f/0x1b0 drivers/iommu/iommufd/io_pagetable.c:663
Code: 5b 41 5c 41 5d 41 5e 5d c3 cc cc cc cc e8 c9 53 0b fe 0f 0b e9 51 ff ff ff e8 bd 53 0b fe 0f 0b e9 76 ff ff ff e8 b1 53 0b fe <0f> 0b eb 9e e8 a8 53 0b fe 0f 0b e8 a1 53 0b fe 5b 41 5c 41 5d 41
RSP: 0018:ffff888012d87b78 EFLAGS: 00010246
RAX: 0000000000000000 RBX: 0000000000000000 RCX: 0000000000000000
RDX: 0000000000000000 RSI: ffff888015194a00 RDI: 0000000000000002
RBP: ffff888012d87b98 R08: ffffed100232433e R09: ffffed100232433e
R10: ffff8880119219ef R11: ffffed100232433d R12: ffff888011921a90
R13: ffff8880119218a8 R14: ffffffffffffffff R15: ffff888012d87c60
FS:  0000000000000000(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
CR2: 00000000004e5420 CR3: 000000000667e000 CR4: 0000000000750ee0
PKRU: 55555554
Call Trace:
 <TASK>
 iommufd_ioas_destroy+0x53/0x70 drivers/iommu/iommufd/ioas.c:19
 iommufd_fops_release+0x1f7/0x370 drivers/iommu/iommufd/main.c:231
 __fput+0x26d/0xa40 fs/file_table.c:321
 ____fput+0x1e/0x30 fs/file_table.c:349
 task_work_run+0x1a4/0x2d0 kernel/task_work.c:179
 exit_task_work include/linux/task_work.h:38 [inline]
 do_exit+0xaf3/0x2f60 kernel/exit.c:874
 do_group_exit+0xe0/0x2b0 kernel/exit.c:1024
 __do_sys_exit_group kernel/exit.c:1035 [inline]
 __se_sys_exit_group kernel/exit.c:1033 [inline]
 __x64_sys_exit_group+0x47/0x50 kernel/exit.c:1033
 do_syscall_x64 arch/x86/entry/common.c:50 [inline]
 do_syscall_64+0x3b/0x90 arch/x86/entry/common.c:80
 entry_SYSCALL_64_after_hwframe+0x72/0xdc
RIP: 0033:0x44de86
Code: Unable to access opcode bytes at 0x44de5c.
RSP: 002b:00007fff8410fbc8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
RAX: ffffffffffffffda RBX: 00000000004e5410 RCX: 000000000044de86
RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffffa8
R10: 0000000000411b40 R11: 0000000000000246 R12: 00000000004e5410
R13: 0000000000000001 R14: 0000000000000000 R15: 0000000000000001
 </TASK>
irq event stamp: 0
hardirqs last  enabled at (0): [<0000000000000000>] 0x0
hardirqs last disabled at (0): [<ffffffff8122d29a>] copy_process+0x256a/0x7650 kernel/fork.c:2448
softirqs last  enabled at (0): [<ffffffff8122d2e2>] copy_process+0x25b2/0x7650 kernel/fork.c:2452
softirqs last disabled at (0): [<0000000000000000>] 0x0
---[ end trace 0000000000000000 ]---
------------[ cut here ]------------
WARNING: CPU: 1 PID: 610 at drivers/iommu/iommufd/io_pagetable.c:1158 iopt_remove_access+0xb5/0xd0 drivers/iommu/iommufd/io_pagetable.c:1157
Modules linked in:
CPU: 1 PID: 610 Comm: syz-executor321 Tainted: G    B   W          6.4.0-rc6-5ca8bbe2b782+ #1
Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
RIP: 0010:iopt_remove_access+0xb5/0xd0 drivers/iommu/iommufd/io_pagetable.c:1157
Code: 45 85 e4 75 29 e8 4b 2d 0b fe 4c 89 ef e8 33 eb e8 fd 48 89 df e8 2b eb e8 fd 5b 41 5c 41 5d 5d c3 cc cc cc cc e8 2b 2d 0b fe <0f> 0b eb b9 e8 22 2d 0b fe 0f 0b eb ce e8 b9 1d 67 fe eb 90 0f 1f
RSP: 0018:ffff8880106a7bb8 EFLAGS: 00010246
RAX: 0000000000000000 RBX: ffff88801143d0a8 RCX: 0000000000000000
RDX: 0000000000000000 RSI: ffff8880127f4a00 RDI: 0000000000000002
RBP: ffff8880106a7bd0 R08: ffffed1002287a33 R09: ffffed1002287a33
R10: ffff88801143d193 R11: ffffed1002287a32 R12: ffff888019e52400
R13: ffff88801143d1e8 R14: ffffffff835430e0 R15: ffff8880106a7e68
FS:  0000000001a0a3c0(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
CR2: 0000000020000140 CR3: 0000000013900000 CR4: 0000000000750ee0
PKRU: 55555554
Call Trace:
 <TASK>
 __iommufd_access_detach+0x1c2/0x2b0 drivers/iommu/iommufd/device.c:971
 iommufd_access_change_pt+0x149/0x270 drivers/iommu/iommufd/device.c:1006
 iommufd_access_replace+0xb4/0x120 drivers/iommu/iommufd/device.c:1042
 iommufd_test_access_replace_ioas drivers/iommu/iommufd/selftest.c:1025 [inline]
 iommufd_test+0x103d/0x3f00 drivers/iommu/iommufd/selftest.c:1252
 iommufd_fops_ioctl+0x37d/0x510 drivers/iommu/iommufd/main.c:378
 vfs_ioctl fs/ioctl.c:51 [inline]
 __do_sys_ioctl fs/ioctl.c:870 [inline]
 __se_sys_ioctl fs/ioctl.c:856 [inline]
 __x64_sys_ioctl+0x1a3/0x230 fs/ioctl.c:856
 do_syscall_x64 arch/x86/entry/common.c:50 [inline]
 do_syscall_64+0x3b/0x90 arch/x86/entry/common.c:80
 entry_SYSCALL_64_after_hwframe+0x72/0xdc
RIP: 0033:0x44ff3d
Code: db 48 89 d8 5b 5d 41 5c 41 5d 41 5e c3 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 c7 c1 a8 ff ff ff f7 d8 64 89 01 48
RSP: 002b:00007fff8410fc18 EFLAGS: 00000246 ORIG_RAX: 0000000000000010
RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 000000000044ff3d
RDX: 0000000020000000 RSI: 0000000000003ba0 RDI: 0000000000000003
RBP: 0000000000000001 R08: 0000000000411b40 R09: 0000000000411b40
R10: 0000000000411b40 R11: 0000000000000246 R12: 0000000000000001
R13: 0000000000000000 R14: 00000000004004e8 R15: 0000000000000000
 </TASK>
irq event stamp: 0
hardirqs last  enabled at (0): [<0000000000000000>] 0x0
hardirqs last disabled at (0): [<ffffffff8122d29a>] copy_process+0x256a/0x7650 kernel/fork.c:2448
softirqs last  enabled at (0): [<ffffffff8122d2e2>] copy_process+0x25b2/0x7650 kernel/fork.c:2452
softirqs last disabled at (0): [<0000000000000000>] 0x0
---[ end trace 0000000000000000 ]---
------------[ cut here ]------------
WARNING: CPU: 1 PID: 610 at drivers/iommu/iommufd/io_pagetable.c:1158 iopt_remove_access+0xb5/0xd0 drivers/iommu/iommufd/io_pagetable.c:1157
Modules linked in:
CPU: 1 PID: 610 Comm: syz-executor321 Tainted: G    B   W          6.4.0-rc6-5ca8bbe2b782+ #1
Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
RIP: 0010:iopt_remove_access+0xb5/0xd0 drivers/iommu/iommufd/io_pagetable.c:1157
Code: 45 85 e4 75 29 e8 4b 2d 0b fe 4c 89 ef e8 33 eb e8 fd 48 89 df e8 2b eb e8 fd 5b 41 5c 41 5d 5d c3 cc cc cc cc e8 2b 2d 0b fe <0f> 0b eb b9 e8 22 2d 0b fe 0f 0b eb ce e8 b9 1d 67 fe eb 90 0f 1f
RSP: 0018:ffff8880106a7bd0 EFLAGS: 00010246
RAX: 0000000000000000 RBX: ffff88801143d0a8 RCX: 0000000000000000
RDX: 0000000000000000 RSI: ffff8880127f4a00 RDI: 0000000000000002
RBP: ffff8880106a7be8 R08: ffffed1002287a33 R09: ffffed1002287a33
R10: ffff88801143d193 R11: ffffed1002287a32 R12: ffff888019e30000
R13: ffff88801143d1e8 R14: ffff888022d27400 R15: 0000000000000000
FS:  0000000000000000(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
CR2: 00000000004e5420 CR3: 000000000667e000 CR4: 0000000000750ee0
PKRU: 55555554
Call Trace:
 <TASK>
 iommufd_access_destroy_object+0x65/0x170 drivers/iommu/iommufd/device.c:875
 iommufd_object_destroy_user+0x18e/0x220 drivers/iommu/iommufd/main.c:163
 iommufd_access_destroy+0x43/0x70 drivers/iommu/iommufd/device.c:938
 iommufd_test_staccess_release+0x8d/0xd0 drivers/iommu/iommufd/selftest.c:918
 __fput+0x26d/0xa40 fs/file_table.c:321
 ____fput+0x1e/0x30 fs/file_table.c:349
 task_work_run+0x1a4/0x2d0 kernel/task_work.c:179
 exit_task_work include/linux/task_work.h:38 [inline]
 do_exit+0xaf3/0x2f60 kernel/exit.c:874
 do_group_exit+0xe0/0x2b0 kernel/exit.c:1024
 __do_sys_exit_group kernel/exit.c:1035 [inline]
 __se_sys_exit_group kernel/exit.c:1033 [inline]
 __x64_sys_exit_group+0x47/0x50 kernel/exit.c:1033
 do_syscall_x64 arch/x86/entry/common.c:50 [inline]
 do_syscall_64+0x3b/0x90 arch/x86/entry/common.c:80
 entry_SYSCALL_64_after_hwframe+0x72/0xdc
RIP: 0033:0x44de86
Code: Unable to access opcode bytes at 0x44de5c.
RSP: 002b:00007fff8410fbc8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
RAX: ffffffffffffffda RBX: 00000000004e5410 RCX: 000000000044de86
RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffffa8
R10: 0000000000411b40 R11: 0000000000000246 R12: 00000000004e5410
R13: 0000000000000001 R14: 0000000000000000 R15: 0000000000000001
 </TASK>
irq event stamp: 0
hardirqs last  enabled at (0): [<0000000000000000>] 0x0
hardirqs last disabled at (0): [<ffffffff8122d29a>] copy_process+0x256a/0x7650 kernel/fork.c:2448
softirqs last  enabled at (0): [<ffffffff8122d2e2>] copy_process+0x25b2/0x7650 kernel/fork.c:2452
softirqs last disabled at (0): [<0000000000000000>] 0x0
---[ end trace 0000000000000000 ]---
------------[ cut here ]------------
WARNING: CPU: 1 PID: 610 at drivers/iommu/iommufd/io_pagetable.c:663 iopt_destroy_table+0x15f/0x1b0 drivers/iommu/iommufd/io_pagetable.c:663
Modules linked in:
CPU: 1 PID: 610 Comm: syz-executor321 Tainted: G    B   W          6.4.0-rc6-5ca8bbe2b782+ #1
Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
RIP: 0010:iopt_destroy_table+0x15f/0x1b0 drivers/iommu/iommufd/io_pagetable.c:663
Code: 5b 41 5c 41 5d 41 5e 5d c3 cc cc cc cc e8 c9 53 0b fe 0f 0b e9 51 ff ff ff e8 bd 53 0b fe 0f 0b e9 76 ff ff ff e8 b1 53 0b fe <0f> 0b eb 9e e8 a8 53 0b fe 0f 0b e8 a1 53 0b fe 5b 41 5c 41 5d 41
RSP: 0018:ffff8880106a7b78 EFLAGS: 00010246
RAX: 0000000000000000 RBX: 0000000000000000 RCX: 0000000000000000
RDX: 0000000000000000 RSI: ffff8880127f4a00 RDI: 0000000000000002
RBP: ffff8880106a7b98 R08: ffffed1002287a3e R09: ffffed1002287a3e
R10: ffff88801143d1ef R11: ffffed1002287a3d R12: ffff88801143d290
R13: ffff88801143d0a8 R14: ffffffffffffffff R15: ffff8880106a7c60
FS:  0000000000000000(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
CR2: 00000000004e5420 CR3: 000000000667e000 CR4: 0000000000750ee0
PKRU: 55555554
Call Trace:
 <TASK>
 iommufd_fops_release+0x1f7/0x370 drivers/iommu/iommufd/main.c:231
 __fput+0x26d/0xa40 fs/file_table.c:321
 ____fput+0x1e/0x30 fs/file_table.c:349
 task_work_run+0x1a4/0x2d0 kernel/task_work.c:179
 exit_task_work include/linux/task_work.h:38 [inline]
 do_exit+0xaf3/0x2f60 kernel/exit.c:874
 do_group_exit+0xe0/0x2b0 kernel/exit.c:1024
 __do_sys_exit_group kernel/exit.c:1035 [inline]
 __se_sys_exit_group kernel/exit.c:1033 [inline]
 __x64_sys_exit_group+0x47/0x50 kernel/exit.c:1033
 do_syscall_x64 arch/x86/entry/common.c:50 [inline]
 do_syscall_64+0x3b/0x90 arch/x86/entry/common.c:80
 entry_SYSCALL_64_after_hwframe+0x72/0xdc
RIP: 0033:0x44de86
Code: Unable to access opcode bytes at 0x44de5c.
RSP: 002b:00007fff8410fbc8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
RAX: ffffffffffffffda RBX: 00000000004e5410 RCX: 000000000044de86
RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffffa8
R10: 0000000000411b40 R11: 0000000000000246 R12: 00000000004e5410
R13: 0000000000000001 R14: 0000000000000000 R15: 0000000000000001
 </TASK>
irq event stamp: 0
hardirqs last  enabled at (0): [<0000000000000000>] 0x0
hardirqs last disabled at (0): [<ffffffff8122d29a>] copy_process+0x256a/0x7650 kernel/fork.c:2448
softirqs last  enabled at (0): [<ffffffff8122d2e2>] copy_process+0x25b2/0x7650 kernel/fork.c:2452
softirqs last disabled at (0): [<0000000000000000>] 0x0
---[ end trace 0000000000000000 ]---
------------[ cut here ]------------
WARNING: CPU: 1 PID: 611 at drivers/iommu/iommufd/io_pagetable.c:1158 iopt_remove_access+0xb5/0xd0 drivers/iommu/iommufd/io_pagetable.c:1157
Modules linked in:
CPU: 1 PID: 611 Comm: syz-executor321 Tainted: G    B   W          6.4.0-rc6-5ca8bbe2b782+ #1
Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
RIP: 0010:iopt_remove_access+0xb5/0xd0 drivers/iommu/iommufd/io_pagetable.c:1157
Code: 45 85 e4 75 29 e8 4b 2d 0b fe 4c 89 ef e8 33 eb e8 fd 48 89 df e8 2b eb e8 fd 5b 41 5c 41 5d 5d c3 cc cc cc cc e8 2b 2d 0b fe <0f> 0b eb b9 e8 22 2d 0b fe 0f 0b eb ce e8 b9 1d 67 fe eb 90 0f 1f
RSP: 0018:ffff88800b907bb8 EFLAGS: 00010246
RAX: 0000000000000000 RBX: ffff888016e0b0a8 RCX: 0000000000000000
RDX: 0000000000000000 RSI: ffff88801195ca00 RDI: 0000000000000002
RBP: ffff88800b907bd0 R08: ffffed1002dc1633 R09: ffffed1002dc1633
R10: ffff888016e0b193 R11: ffffed1002dc1632 R12: ffff888019e2a400
R13: ffff888016e0b1e8 R14: ffffffff835430e0 R15: ffff88800b907e68
FS:  0000000001a0a3c0(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
CR2: 0000000020000140 CR3: 000000001529a000 CR4: 0000000000750ee0
PKRU: 55555554
Call Trace:
 <TASK>
 __iommufd_access_detach+0x1c2/0x2b0 drivers/iommu/iommufd/device.c:971
 iommufd_access_change_pt+0x149/0x270 drivers/iommu/iommufd/device.c:1006
 iommufd_access_replace+0xb4/0x120 drivers/iommu/iommufd/device.c:1042
 iommufd_test_access_replace_ioas drivers/iommu/iommufd/selftest.c:1025 [inline]
 iommufd_test+0x103d/0x3f00 drivers/iommu/iommufd/selftest.c:1252
 iommufd_fops_ioctl+0x37d/0x510 drivers/iommu/iommufd/main.c:378
 vfs_ioctl fs/ioctl.c:51 [inline]
 __do_sys_ioctl fs/ioctl.c:870 [inline]
 __se_sys_ioctl fs/ioctl.c:856 [inline]
 __x64_sys_ioctl+0x1a3/0x230 fs/ioctl.c:856
 do_syscall_x64 arch/x86/entry/common.c:50 [inline]
 do_syscall_64+0x3b/0x90 arch/x86/entry/common.c:80
 entry_SYSCALL_64_after_hwframe+0x72/0xdc
RIP: 0033:0x44ff3d
Code: db 48 89 d8 5b 5d 41 5c 41 5d 41 5e c3 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 c7 c1 a8 ff ff ff f7 d8 64 89 01 48
RSP: 002b:00007fff8410fc18 EFLAGS: 00000246 ORIG_RAX: 0000000000000010
RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 000000000044ff3d
RDX: 0000000020000000 RSI: 0000000000003ba0 RDI: 0000000000000003
RBP: 0000000000000001 R08: 0000000000411b40 R09: 0000000000411b40
R10: 0000000000411b40 R11: 0000000000000246 R12: 0000000000000001
R13: 0000000000000000 R14: 00000000004004e8 R15: 0000000000000000
 </TASK>
irq event stamp: 0
hardirqs last  enabled at (0): [<0000000000000000>] 0x0
hardirqs last disabled at (0): [<ffffffff8122d29a>] copy_process+0x256a/0x7650 kernel/fork.c:2448
softirqs last  enabled at (0): [<ffffffff8122d2e2>] copy_process+0x25b2/0x7650 kernel/fork.c:2452
softirqs last disabled at (0): [<0000000000000000>] 0x0
---[ end trace 0000000000000000 ]---
------------[ cut here ]------------
WARNING: CPU: 1 PID: 611 at drivers/iommu/iommufd/io_pagetable.c:1158 iopt_remove_access+0xb5/0xd0 drivers/iommu/iommufd/io_pagetable.c:1157
Modules linked in:
CPU: 1 PID: 611 Comm: syz-executor321 Tainted: G    B   W          6.4.0-rc6-5ca8bbe2b782+ #1
Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
RIP: 0010:iopt_remove_access+0xb5/0xd0 drivers/iommu/iommufd/io_pagetable.c:1157
Code: 45 85 e4 75 29 e8 4b 2d 0b fe 4c 89 ef e8 33 eb e8 fd 48 89 df e8 2b eb e8 fd 5b 41 5c 41 5d 5d c3 cc cc cc cc e8 2b 2d 0b fe <0f> 0b eb b9 e8 22 2d 0b fe 0f 0b eb ce e8 b9 1d 67 fe eb 90 0f 1f
RSP: 0018:ffff88800b907bd0 EFLAGS: 00010246
RAX: 0000000000000000 RBX: ffff888016e0b0a8 RCX: 0000000000000000
RDX: 0000000000000000 RSI: ffff88801195ca00 RDI: 0000000000000002
RBP: ffff88800b907be8 R08: ffffed1002dc1633 R09: ffffed1002dc1633
R10: ffff888016e0b193 R11: ffffed1002dc1632 R12: ffff888019e53c00
R13: ffff888016e0b1e8 R14: ffff8880152fe700 R15: 0000000000000000
FS:  0000000000000000(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
CR2: 00000000004e5420 CR3: 000000000667e000 CR4: 0000000000750ee0
PKRU: 55555554
Call Trace:
 <TASK>
 iommufd_access_destroy_object+0x65/0x170 drivers/iommu/iommufd/device.c:875
 iommufd_object_destroy_user+0x18e/0x220 drivers/iommu/iommufd/main.c:163
 iommufd_access_destroy+0x43/0x70 drivers/iommu/iommufd/device.c:938
 iommufd_test_staccess_release+0x8d/0xd0 drivers/iommu/iommufd/selftest.c:918
 __fput+0x26d/0xa40 fs/file_table.c:321
 ____fput+0x1e/0x30 fs/file_table.c:349
 task_work_run+0x1a4/0x2d0 kernel/task_work.c:179
 exit_task_work include/linux/task_work.h:38 [inline]
 do_exit+0xaf3/0x2f60 kernel/exit.c:874
 do_group_exit+0xe0/0x2b0 kernel/exit.c:1024
 __do_sys_exit_group kernel/exit.c:1035 [inline]
 __se_sys_exit_group kernel/exit.c:1033 [inline]
 __x64_sys_exit_group+0x47/0x50 kernel/exit.c:1033
 do_syscall_x64 arch/x86/entry/common.c:50 [inline]
 do_syscall_64+0x3b/0x90 arch/x86/entry/common.c:80
 entry_SYSCALL_64_after_hwframe+0x72/0xdc
RIP: 0033:0x44de86
Code: Unable to access opcode bytes at 0x44de5c.
RSP: 002b:00007fff8410fbc8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
RAX: ffffffffffffffda RBX: 00000000004e5410 RCX: 000000000044de86
RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffffa8
R10: 0000000000411b40 R11: 0000000000000246 R12: 00000000004e5410
R13: 0000000000000001 R14: 0000000000000000 R15: 0000000000000001
 </TASK>
irq event stamp: 0
hardirqs last  enabled at (0): [<0000000000000000>] 0x0
hardirqs last disabled at (0): [<ffffffff8122d29a>] copy_process+0x256a/0x7650 kernel/fork.c:2448
softirqs last  enabled at (0): [<ffffffff8122d2e2>] copy_process+0x25b2/0x7650 kernel/fork.c:2452
softirqs last disabled at (0): [<0000000000000000>] 0x0
---[ end trace 0000000000000000 ]---
------------[ cut here ]------------
WARNING: CPU: 1 PID: 611 at drivers/iommu/iommufd/io_pagetable.c:663 iopt_destroy_table+0x15f/0x1b0 drivers/iommu/iommufd/io_pagetable.c:663
Modules linked in:
CPU: 1 PID: 611 Comm: syz-executor321 Tainted: G    B   W          6.4.0-rc6-5ca8bbe2b782+ #1
Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
RIP: 0010:iopt_destroy_table+0x15f/0x1b0 drivers/iommu/iommufd/io_pagetable.c:663
Code: 5b 41 5c 41 5d 41 5e 5d c3 cc cc cc cc e8 c9 53 0b fe 0f 0b e9 51 ff ff ff e8 bd 53 0b fe 0f 0b e9 76 ff ff ff e8 b1 53 0b fe <0f> 0b eb 9e e8 a8 53 0b fe 0f 0b e8 a1 53 0b fe 5b 41 5c 41 5d 41
RSP: 0018:ffff88800b907b78 EFLAGS: 00010246
RAX: 0000000000000000 RBX: 0000000000000000 RCX: 0000000000000000
RDX: 0000000000000000 RSI: ffff88801195ca00 RDI: 0000000000000002
RBP: ffff88800b907b98 R08: ffffed1002dc163e R09: ffffed1002dc163e
R10: ffff888016e0b1ef R11: ffffed1002dc163d R12: ffff888016e0b290
R13: ffff888016e0b0a8 R14: ffffffffffffffff R15: ffff88800b907c60
FS:  0000000000000000(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
CR2: 00000000004e5420 CR3: 000000000667e000 CR4: 0000000000750ee0
PKRU: 55555554
Call Trace:
 <TASK>
 iommufd_ioas_destroy+0x53/0x70 drivers/iommu/iommufd/ioas.c:19
 iommufd_fops_release+0x1f7/0x370 drivers/iommu/iommufd/main.c:231
 __fput+0x26d/0xa40 fs/file_table.c:321
 ____fput+0x1e/0x30 fs/file_table.c:349
 task_work_run+0x1a4/0x2d0 kernel/task_work.c:179
 exit_task_work include/linux/task_work.h:38 [inline]
 do_exit+0xaf3/0x2f60 kernel/exit.c:874
 do_group_exit+0xe0/0x2b0 kernel/exit.c:1024
 __do_sys_exit_group kernel/exit.c:1035 [inline]
 __se_sys_exit_group kernel/exit.c:1033 [inline]
 __x64_sys_exit_group+0x47/0x50 kernel/exit.c:1033
 do_syscall_x64 arch/x86/entry/common.c:50 [inline]
 do_syscall_64+0x3b/0x90 arch/x86/entry/common.c:80
 entry_SYSCALL_64_after_hwframe+0x72/0xdc
RIP: 0033:0x44de86
Code: Unable to access opcode bytes at 0x44de5c.
RSP: 002b:00007fff8410fbc8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
RAX: ffffffffffffffda RBX: 00000000004e5410 RCX: 000000000044de86
RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffffa8
R10: 0000000000411b40 R11: 0000000000000246 R12: 00000000004e5410
R13: 0000000000000001 R14: 0000000000000000 R15: 0000000000000001
 </TASK>
irq event stamp: 0
hardirqs last  enabled at (0): [<0000000000000000>] 0x0
hardirqs last disabled at (0): [<ffffffff8122d29a>] copy_process+0x256a/0x7650 kernel/fork.c:2448
softirqs last  enabled at (0): [<ffffffff8122d2e2>] copy_process+0x25b2/0x7650 kernel/fork.c:2452
softirqs last disabled at (0): [<0000000000000000>] 0x0
---[ end trace 0000000000000000 ]---
------------[ cut here ]------------
WARNING: CPU: 1 PID: 612 at drivers/iommu/iommufd/io_pagetable.c:1158 iopt_remove_access+0xb5/0xd0 drivers/iommu/iommufd/io_pagetable.c:1157
Modules linked in:
CPU: 1 PID: 612 Comm: syz-executor321 Tainted: G    B   W          6.4.0-rc6-5ca8bbe2b782+ #1
Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
RIP: 0010:iopt_remove_access+0xb5/0xd0 drivers/iommu/iommufd/io_pagetable.c:1157
Code: 45 85 e4 75 29 e8 4b 2d 0b fe 4c 89 ef e8 33 eb e8 fd 48 89 df e8 2b eb e8 fd 5b 41 5c 41 5d 5d c3 cc cc cc cc e8 2b 2d 0b fe <0f> 0b eb b9 e8 22 2d 0b fe 0f 0b eb ce e8 b9 1d 67 fe eb 90 0f 1f
RSP: 0018:ffff88800fe47bb8 EFLAGS: 00010246
RAX: 0000000000000000 RBX: ffff888016d538a8 RCX: 0000000000000000
RDX: 0000000000000000 RSI: ffff88801195a500 RDI: 0000000000000002
RBP: ffff88800fe47bd0 R08: ffffed1002daa733 R09: ffffed1002daa733
R10: ffff888016d53993 R11: ffffed1002daa732 R12: ffff88800f2a3c00
R13: ffff888016d539e8 R14: ffffffff835430e0 R15: ffff88800fe47e68
FS:  0000000001a0a3c0(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
CR2: 0000000020000140 CR3: 0000000013f1a000 CR4: 0000000000750ee0
PKRU: 55555554
Call Trace:
 <TASK>
 __iommufd_access_detach+0x1c2/0x2b0 drivers/iommu/iommufd/device.c:971
 iommufd_access_change_pt+0x149/0x270 drivers/iommu/iommufd/device.c:1006
 iommufd_access_replace+0xb4/0x120 drivers/iommu/iommufd/device.c:1042
 iommufd_test_access_replace_ioas drivers/iommu/iommufd/selftest.c:1025 [inline]
 iommufd_test+0x103d/0x3f00 drivers/iommu/iommufd/selftest.c:1252
 iommufd_fops_ioctl+0x37d/0x510 drivers/iommu/iommufd/main.c:378
 vfs_ioctl fs/ioctl.c:51 [inline]
 __do_sys_ioctl fs/ioctl.c:870 [inline]
 __se_sys_ioctl fs/ioctl.c:856 [inline]
 __x64_sys_ioctl+0x1a3/0x230 fs/ioctl.c:856
 do_syscall_x64 arch/x86/entry/common.c:50 [inline]
 do_syscall_64+0x3b/0x90 arch/x86/entry/common.c:80
 entry_SYSCALL_64_after_hwframe+0x72/0xdc
RIP: 0033:0x44ff3d
Code: db 48 89 d8 5b 5d 41 5c 41 5d 41 5e c3 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 c7 c1 a8 ff ff ff f7 d8 64 89 01 48
RSP: 002b:00007fff8410fc18 EFLAGS: 00000246 ORIG_RAX: 0000000000000010
RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 000000000044ff3d
RDX: 0000000020000000 RSI: 0000000000003ba0 RDI: 0000000000000003
RBP: 0000000000000001 R08: 0000000000411b40 R09: 0000000000411b40
R10: 0000000000411b40 R11: 0000000000000246 R12: 0000000000000001
R13: 0000000000000000 R14: 00000000004004e8 R15: 0000000000000000
 </TASK>
irq event stamp: 0
hardirqs last  enabled at (0): [<0000000000000000>] 0x0
hardirqs last disabled at (0): [<ffffffff8122d29a>] copy_process+0x256a/0x7650 kernel/fork.c:2448
softirqs last  enabled at (0): [<ffffffff8122d2e2>] copy_process+0x25b2/0x7650 kernel/fork.c:2452
softirqs last disabled at (0): [<0000000000000000>] 0x0
---[ end trace 0000000000000000 ]---
------------[ cut here ]------------
WARNING: CPU: 1 PID: 612 at drivers/iommu/iommufd/io_pagetable.c:1158 iopt_remove_access+0xb5/0xd0 drivers/iommu/iommufd/io_pagetable.c:1157
Modules linked in:
CPU: 1 PID: 612 Comm: syz-executor321 Tainted: G    B   W          6.4.0-rc6-5ca8bbe2b782+ #1
Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
RIP: 0010:iopt_remove_access+0xb5/0xd0 drivers/iommu/iommufd/io_pagetable.c:1157
Code: 45 85 e4 75 29 e8 4b 2d 0b fe 4c 89 ef e8 33 eb e8 fd 48 89 df e8 2b eb e8 fd 5b 41 5c 41 5d 5d c3 cc cc cc cc e8 2b 2d 0b fe <0f> 0b eb b9 e8 22 2d 0b fe 0f 0b eb ce e8 b9 1d 67 fe eb 90 0f 1f
RSP: 0018:ffff88800fe47bd0 EFLAGS: 00010246
RAX: 0000000000000000 RBX: ffff888016d538a8 RCX: 0000000000000000
RDX: 0000000000000000 RSI: ffff88801195a500 RDI: 0000000000000002
RBP: ffff88800fe47be8 R08: ffffed1002daa733 R09: ffffed1002daa733
R10: ffff888016d53993 R11: ffffed1002daa732 R12: ffff888019e2bc00
R13: ffff888016d539e8 R14: ffff88801a1f8500 R15: 0000000000000000
FS:  0000000000000000(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
CR2: 00000000004e5420 CR3: 000000000667e000 CR4: 0000000000750ee0
PKRU: 55555554
Call Trace:
 <TASK>
 iommufd_access_destroy_object+0x65/0x170 drivers/iommu/iommufd/device.c:875
 iommufd_object_destroy_user+0x18e/0x220 drivers/iommu/iommufd/main.c:163
 iommufd_access_destroy+0x43/0x70 drivers/iommu/iommufd/device.c:938
 iommufd_test_staccess_release+0x8d/0xd0 drivers/iommu/iommufd/selftest.c:918
 __fput+0x26d/0xa40 fs/file_table.c:321
 ____fput+0x1e/0x30 fs/file_table.c:349
 task_work_run+0x1a4/0x2d0 kernel/task_work.c:179
 exit_task_work include/linux/task_work.h:38 [inline]
 do_exit+0xaf3/0x2f60 kernel/exit.c:874
 do_group_exit+0xe0/0x2b0 kernel/exit.c:1024
 __do_sys_exit_group kernel/exit.c:1035 [inline]
 __se_sys_exit_group kernel/exit.c:1033 [inline]
 __x64_sys_exit_group+0x47/0x50 kernel/exit.c:1033
 do_syscall_x64 arch/x86/entry/common.c:50 [inline]
 do_syscall_64+0x3b/0x90 arch/x86/entry/common.c:80
 entry_SYSCALL_64_after_hwframe+0x72/0xdc
RIP: 0033:0x44de86
Code: Unable to access opcode bytes at 0x44de5c.
RSP: 002b:00007fff8410fbc8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
RAX: ffffffffffffffda RBX: 00000000004e5410 RCX: 000000000044de86
RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffffa8
R10: 0000000000411b40 R11: 0000000000000246 R12: 00000000004e5410
R13: 0000000000000001 R14: 0000000000000000 R15: 0000000000000001
 </TASK>
irq event stamp: 0
hardirqs last  enabled at (0): [<0000000000000000>] 0x0
hardirqs last disabled at (0): [<ffffffff8122d29a>] copy_process+0x256a/0x7650 kernel/fork.c:2448
softirqs last  enabled at (0): [<ffffffff8122d2e2>] copy_process+0x25b2/0x7650 kernel/fork.c:2452
softirqs last disabled at (0): [<0000000000000000>] 0x0
---[ end trace 0000000000000000 ]---
------------[ cut here ]------------
WARNING: CPU: 1 PID: 612 at drivers/iommu/iommufd/io_pagetable.c:663 iopt_destroy_table+0x15f/0x1b0 drivers/iommu/iommufd/io_pagetable.c:663
Modules linked in:
CPU: 1 PID: 612 Comm: syz-executor321 Tainted: G    B   W          6.4.0-rc6-5ca8bbe2b782+ #1
Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
RIP: 0010:iopt_destroy_table+0x15f/0x1b0 drivers/iommu/iommufd/io_pagetable.c:663
Code: 5b 41 5c 41 5d 41 5e 5d c3 cc cc cc cc e8 c9 53 0b fe 0f 0b e9 51 ff ff ff e8 bd 53 0b fe 0f 0b e9 76 ff ff ff e8 b1 53 0b fe <0f> 0b eb 9e e8 a8 53 0b fe 0f 0b e8 a1 53 0b fe 5b 41 5c 41 5d 41
RSP: 0018:ffff88800fe47b78 EFLAGS: 00010246
RAX: 0000000000000000 RBX: 0000000000000000 RCX: 0000000000000000
RDX: 0000000000000000 RSI: ffff88801195a500 RDI: 0000000000000002
RBP: ffff88800fe47b98 R08: ffffed1002daa73e R09: ffffed1002daa73e
R10: ffff888016d539ef R11: ffffed1002daa73d R12: ffff888016d53a90
R13: ffff888016d538a8 R14: ffffffffffffffff R15: ffff88800fe47c60
FS:  0000000000000000(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
CR2: 00000000004e5420 CR3: 000000000667e000 CR4: 0000000000750ee0
PKRU: 55555554
Call Trace:
 <TASK>
 iommufd_ioas_destroy+0x53/0x70 drivers/iommu/iommufd/ioas.c:19
 iommufd_fops_release+0x1f7/0x370 drivers/iommu/iommufd/main.c:231
 __fput+0x26d/0xa40 fs/file_table.c:321
 ____fput+0x1e/0x30 fs/file_table.c:349
 task_work_run+0x1a4/0x2d0 kernel/task_work.c:179
 exit_task_work include/linux/task_work.h:38 [inline]
 do_exit+0xaf3/0x2f60 kernel/exit.c:874
 do_group_exit+0xe0/0x2b0 kernel/exit.c:1024
 __do_sys_exit_group kernel/exit.c:1035 [inline]
 __se_sys_exit_group kernel/exit.c:1033 [inline]
 __x64_sys_exit_group+0x47/0x50 kernel/exit.c:1033
 do_syscall_x64 arch/x86/entry/common.c:50 [inline]
 do_syscall_64+0x3b/0x90 arch/x86/entry/common.c:80
 entry_SYSCALL_64_after_hwframe+0x72/0xdc
RIP: 0033:0x44de86
Code: Unable to access opcode bytes at 0x44de5c.
RSP: 002b:00007fff8410fbc8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
RAX: ffffffffffffffda RBX: 00000000004e5410 RCX: 000000000044de86
RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffffa8
R10: 0000000000411b40 R11: 0000000000000246 R12: 00000000004e5410
R13: 0000000000000001 R14: 0000000000000000 R15: 0000000000000001
 </TASK>
irq event stamp: 0
hardirqs last  enabled at (0): [<0000000000000000>] 0x0
hardirqs last disabled at (0): [<ffffffff8122d29a>] copy_process+0x256a/0x7650 kernel/fork.c:2448
softirqs last  enabled at (0): [<ffffffff8122d2e2>] copy_process+0x25b2/0x7650 kernel/fork.c:2452
softirqs last disabled at (0): [<0000000000000000>] 0x0
---[ end trace 0000000000000000 ]---
------------[ cut here ]------------
WARNING: CPU: 1 PID: 613 at drivers/iommu/iommufd/io_pagetable.c:1158 iopt_remove_access+0xb5/0xd0 drivers/iommu/iommufd/io_pagetable.c:1157
Modules linked in:
CPU: 1 PID: 613 Comm: syz-executor321 Tainted: G    B   W          6.4.0-rc6-5ca8bbe2b782+ #1
Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
RIP: 0010:iopt_remove_access+0xb5/0xd0 drivers/iommu/iommufd/io_pagetable.c:1157
Code: 45 85 e4 75 29 e8 4b 2d 0b fe 4c 89 ef e8 33 eb e8 fd 48 89 df e8 2b eb e8 fd 5b 41 5c 41 5d 5d c3 cc cc cc cc e8 2b 2d 0b fe <0f> 0b eb b9 e8 22 2d 0b fe 0f 0b eb ce e8 b9 1d 67 fe eb 90 0f 1f
RSP: 0018:ffff888016cffbb8 EFLAGS: 00010246
RAX: 0000000000000000 RBX: ffff8880212270a8 RCX: 0000000000000000
RDX: 0000000000000000 RSI: ffff888011958000 RDI: 0000000000000002
RBP: ffff888016cffbd0 R08: ffffed1004244e33 R09: ffffed1004244e33
R10: ffff888021227193 R11: ffffed1004244e32 R12: ffff888019e23c00
R13: ffff8880212271e8 R14: ffffffff835430e0 R15: ffff888016cffe68
FS:  0000000001a0a3c0(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
CR2: 0000000020000140 CR3: 00000000158a0000 CR4: 0000000000750ee0
PKRU: 55555554
Call Trace:
 <TASK>
 __iommufd_access_detach+0x1c2/0x2b0 drivers/iommu/iommufd/device.c:971
 iommufd_access_change_pt+0x149/0x270 drivers/iommu/iommufd/device.c:1006
 iommufd_access_replace+0xb4/0x120 drivers/iommu/iommufd/device.c:1042
 iommufd_test_access_replace_ioas drivers/iommu/iommufd/selftest.c:1025 [inline]
 iommufd_test+0x103d/0x3f00 drivers/iommu/iommufd/selftest.c:1252
 iommufd_fops_ioctl+0x37d/0x510 drivers/iommu/iommufd/main.c:378
 vfs_ioctl fs/ioctl.c:51 [inline]
 __do_sys_ioctl fs/ioctl.c:870 [inline]
 __se_sys_ioctl fs/ioctl.c:856 [inline]
 __x64_sys_ioctl+0x1a3/0x230 fs/ioctl.c:856
 do_syscall_x64 arch/x86/entry/common.c:50 [inline]
 do_syscall_64+0x3b/0x90 arch/x86/entry/common.c:80
 entry_SYSCALL_64_after_hwframe+0x72/0xdc
RIP: 0033:0x44ff3d
Code: db 48 89 d8 5b 5d 41 5c 41 5d 41 5e c3 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 c7 c1 a8 ff ff ff f7 d8 64 89 01 48
RSP: 002b:00007fff8410fc18 EFLAGS: 00000246 ORIG_RAX: 0000000000000010
RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 000000000044ff3d
RDX: 0000000020000000 RSI: 0000000000003ba0 RDI: 0000000000000003
RBP: 0000000000000001 R08: 0000000000411b40 R09: 0000000000411b40
R10: 0000000000411b40 R11: 0000000000000246 R12: 0000000000000001
R13: 0000000000000000 R14: 00000000004004e8 R15: 0000000000000000
 </TASK>
irq event stamp: 0
hardirqs last  enabled at (0): [<0000000000000000>] 0x0
hardirqs last disabled at (0): [<ffffffff8122d29a>] copy_process+0x256a/0x7650 kernel/fork.c:2448
softirqs last  enabled at (0): [<ffffffff8122d2e2>] copy_process+0x25b2/0x7650 kernel/fork.c:2452
softirqs last disabled at (0): [<0000000000000000>] 0x0
---[ end trace 0000000000000000 ]---
------------[ cut here ]------------
WARNING: CPU: 1 PID: 613 at drivers/iommu/iommufd/io_pagetable.c:1158 iopt_remove_access+0xb5/0xd0 drivers/iommu/iommufd/io_pagetable.c:1157
Modules linked in:
CPU: 1 PID: 613 Comm: syz-executor321 Tainted: G    B   W          6.4.0-rc6-5ca8bbe2b782+ #1
Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
RIP: 0010:iopt_remove_access+0xb5/0xd0 drivers/iommu/iommufd/io_pagetable.c:1157
Code: 45 85 e4 75 29 e8 4b 2d 0b fe 4c 89 ef e8 33 eb e8 fd 48 89 df e8 2b eb e8 fd 5b 41 5c 41 5d 5d c3 cc cc cc cc e8 2b 2d 0b fe <0f> 0b eb b9 e8 22 2d 0b fe 0f 0b eb ce e8 b9 1d 67 fe eb 90 0f 1f
RSP: 0018:ffff888016cffbd0 EFLAGS: 00010246
RAX: 0000000000000000 RBX: ffff8880212270a8 RCX: 0000000000000000
RDX: 0000000000000000 RSI: ffff888011958000 RDI: 0000000000000002
RBP: ffff888016cffbe8 R08: ffffed1004244e33 R09: ffffed1004244e33
R10: ffff888021227193 R11: ffffed1004244e32 R12: ffff88800f2a2800
R13: ffff8880212271e8 R14: ffff888012645400 R15: 0000000000000000
FS:  0000000000000000(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
CR2: 00000000004e5420 CR3: 000000000667e000 CR4: 0000000000750ee0
PKRU: 55555554
Call Trace:
 <TASK>
 iommufd_access_destroy_object+0x65/0x170 drivers/iommu/iommufd/device.c:875
 iommufd_object_destroy_user+0x18e/0x220 drivers/iommu/iommufd/main.c:163
 iommufd_access_destroy+0x43/0x70 drivers/iommu/iommufd/device.c:938
 iommufd_test_staccess_release+0x8d/0xd0 drivers/iommu/iommufd/selftest.c:918
 __fput+0x26d/0xa40 fs/file_table.c:321
 ____fput+0x1e/0x30 fs/file_table.c:349
 task_work_run+0x1a4/0x2d0 kernel/task_work.c:179
 exit_task_work include/linux/task_work.h:38 [inline]
 do_exit+0xaf3/0x2f60 kernel/exit.c:874
 do_group_exit+0xe0/0x2b0 kernel/exit.c:1024
 __do_sys_exit_group kernel/exit.c:1035 [inline]
 __se_sys_exit_group kernel/exit.c:1033 [inline]
 __x64_sys_exit_group+0x47/0x50 kernel/exit.c:1033
 do_syscall_x64 arch/x86/entry/common.c:50 [inline]
 do_syscall_64+0x3b/0x90 arch/x86/entry/common.c:80
 entry_SYSCALL_64_after_hwframe+0x72/0xdc
RIP: 0033:0x44de86
Code: Unable to access opcode bytes at 0x44de5c.
RSP: 002b:00007fff8410fbc8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
RAX: ffffffffffffffda RBX: 00000000004e5410 RCX: 000000000044de86
RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffffa8
R10: 0000000000411b40 R11: 0000000000000246 R12: 00000000004e5410
R13: 0000000000000001 R14: 0000000000000000 R15: 0000000000000001
 </TASK>
irq event stamp: 0
hardirqs last  enabled at (0): [<0000000000000000>] 0x0
hardirqs last disabled at (0): [<ffffffff8122d29a>] copy_process+0x256a/0x7650 kernel/fork.c:2448
softirqs last  enabled at (0): [<ffffffff8122d2e2>] copy_process+0x25b2/0x7650 kernel/fork.c:2452
softirqs last disabled at (0): [<0000000000000000>] 0x0
---[ end trace 0000000000000000 ]---
------------[ cut here ]------------
WARNING: CPU: 1 PID: 613 at drivers/iommu/iommufd/io_pagetable.c:663 iopt_destroy_table+0x15f/0x1b0 drivers/iommu/iommufd/io_pagetable.c:663
Modules linked in:
CPU: 1 PID: 613 Comm: syz-executor321 Tainted: G    B   W          6.4.0-rc6-5ca8bbe2b782+ #1
Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
RIP: 0010:iopt_destroy_table+0x15f/0x1b0 drivers/iommu/iommufd/io_pagetable.c:663
Code: 5b 41 5c 41 5d 41 5e 5d c3 cc cc cc cc e8 c9 53 0b fe 0f 0b e9 51 ff ff ff e8 bd 53 0b fe 0f 0b e9 76 ff ff ff e8 b1 53 0b fe <0f> 0b eb 9e e8 a8 53 0b fe 0f 0b e8 a1 53 0b fe 5b 41 5c 41 5d 41
RSP: 0018:ffff888016cffb78 EFLAGS: 00010246
RAX: 0000000000000000 RBX: 0000000000000000 RCX: 0000000000000000
RDX: 0000000000000000 RSI: ffff888011958000 RDI: 0000000000000002
RBP: ffff888016cffb98 R08: ffffed1004244e3e R09: ffffed1004244e3e
R10: ffff8880212271ef R11: ffffed1004244e3d R12: ffff888021227290
R13: ffff8880212270a8 R14: ffffffffffffffff R15: ffff888016cffc60
FS:  0000000000000000(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
CR2: 00000000004e5420 CR3: 000000000667e000 CR4: 0000000000750ee0
PKRU: 55555554
Call Trace:
 <TASK>
 iommufd_ioas_destroy+0x53/0x70 drivers/iommu/iommufd/ioas.c:19
 iommufd_fops_release+0x1f7/0x370 drivers/iommu/iommufd/main.c:231
 __fput+0x26d/0xa40 fs/file_table.c:321
 ____fput+0x1e/0x30 fs/file_table.c:349
 task_work_run+0x1a4/0x2d0 kernel/task_work.c:179
 exit_task_work include/linux/task_work.h:38 [inline]
 do_exit+0xaf3/0x2f60 kernel/exit.c:874
 do_group_exit+0xe0/0x2b0 kernel/exit.c:1024
 __do_sys_exit_group kernel/exit.c:1035 [inline]
 __se_sys_exit_group kernel/exit.c:1033 [inline]
 __x64_sys_exit_group+0x47/0x50 kernel/exit.c:1033
 do_syscall_x64 arch/x86/entry/common.c:50 [inline]
 do_syscall_64+0x3b/0x90 arch/x86/entry/common.c:80
 entry_SYSCALL_64_after_hwframe+0x72/0xdc
RIP: 0033:0x44de86
Code: Unable to access opcode bytes at 0x44de5c.
RSP: 002b:00007fff8410fbc8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
RAX: ffffffffffffffda RBX: 00000000004e5410 RCX: 000000000044de86
RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffffa8
R10: 0000000000411b40 R11: 0000000000000246 R12: 00000000004e5410
R13: 0000000000000001 R14: 0000000000000000 R15: 0000000000000001
 </TASK>
irq event stamp: 0
hardirqs last  enabled at (0): [<0000000000000000>] 0x0
hardirqs last disabled at (0): [<ffffffff8122d29a>] copy_process+0x256a/0x7650 kernel/fork.c:2448
softirqs last  enabled at (0): [<ffffffff8122d2e2>] copy_process+0x25b2/0x7650 kernel/fork.c:2452
softirqs last disabled at (0): [<0000000000000000>] 0x0
---[ end trace 0000000000000000 ]---
------------[ cut here ]------------
WARNING: CPU: 1 PID: 614 at drivers/iommu/iommufd/io_pagetable.c:1158 iopt_remove_access+0xb5/0xd0 drivers/iommu/iommufd/io_pagetable.c:1157
Modules linked in:
CPU: 1 PID: 614 Comm: syz-executor321 Tainted: G    B   W          6.4.0-rc6-5ca8bbe2b782+ #1
Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
RIP: 0010:iopt_remove_access+0xb5/0xd0 drivers/iommu/iommufd/io_pagetable.c:1157
Code: 45 85 e4 75 29 e8 4b 2d 0b fe 4c 89 ef e8 33 eb e8 fd 48 89 df e8 2b eb e8 fd 5b 41 5c 41 5d 5d c3 cc cc cc cc e8 2b 2d 0b fe <0f> 0b eb b9 e8 22 2d 0b fe 0f 0b eb ce e8 b9 1d 67 fe eb 90 0f 1f
RSP: 0018:ffff888021e3fbb8 EFLAGS: 00010246
RAX: 0000000000000000 RBX: ffff888019cab0a8 RCX: 0000000000000000
RDX: 0000000000000000 RSI: ffff8880167ba500 RDI: 0000000000000002
RBP: ffff888021e3fbd0 R08: ffffed1003395633 R09: ffffed1003395633
R10: ffff888019cab193 R11: ffffed1003395632 R12: ffff888019fee000
R13: ffff888019cab1e8 R14: ffffffff835430e0 R15: ffff888021e3fe68
FS:  0000000001a0a3c0(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
CR2: 0000000020000140 CR3: 0000000014bb4000 CR4: 0000000000750ee0
PKRU: 55555554
Call Trace:
 <TASK>
 __iommufd_access_detach+0x1c2/0x2b0 drivers/iommu/iommufd/device.c:971
 iommufd_access_change_pt+0x149/0x270 drivers/iommu/iommufd/device.c:1006
 iommufd_access_replace+0xb4/0x120 drivers/iommu/iommufd/device.c:1042
 iommufd_test_access_replace_ioas drivers/iommu/iommufd/selftest.c:1025 [inline]
 iommufd_test+0x103d/0x3f00 drivers/iommu/iommufd/selftest.c:1252
 iommufd_fops_ioctl+0x37d/0x510 drivers/iommu/iommufd/main.c:378
 vfs_ioctl fs/ioctl.c:51 [inline]
 __do_sys_ioctl fs/ioctl.c:870 [inline]
 __se_sys_ioctl fs/ioctl.c:856 [inline]
 __x64_sys_ioctl+0x1a3/0x230 fs/ioctl.c:856
 do_syscall_x64 arch/x86/entry/common.c:50 [inline]
 do_syscall_64+0x3b/0x90 arch/x86/entry/common.c:80
 entry_SYSCALL_64_after_hwframe+0x72/0xdc
RIP: 0033:0x44ff3d
Code: db 48 89 d8 5b 5d 41 5c 41 5d 41 5e c3 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 c7 c1 a8 ff ff ff f7 d8 64 89 01 48
RSP: 002b:00007fff8410fc18 EFLAGS: 00000246 ORIG_RAX: 0000000000000010
RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 000000000044ff3d
RDX: 0000000020000000 RSI: 0000000000003ba0 RDI: 0000000000000003
RBP: 0000000000000001 R08: 0000000000411b40 R09: 0000000000411b40
R10: 0000000000411b40 R11: 0000000000000246 R12: 0000000000000001
R13: 0000000000000000 R14: 00000000004004e8 R15: 0000000000000000
 </TASK>
irq event stamp: 0
hardirqs last  enabled at (0): [<0000000000000000>] 0x0
hardirqs last disabled at (0): [<ffffffff8122d29a>] copy_process+0x256a/0x7650 kernel/fork.c:2448
softirqs last  enabled at (0): [<ffffffff8122d2e2>] copy_process+0x25b2/0x7650 kernel/fork.c:2452
softirqs last disabled at (0): [<0000000000000000>] 0x0
---[ end trace 0000000000000000 ]---
------------[ cut here ]------------
WARNING: CPU: 1 PID: 614 at drivers/iommu/iommufd/io_pagetable.c:1158 iopt_remove_access+0xb5/0xd0 drivers/iommu/iommufd/io_pagetable.c:1157
Modules linked in:
CPU: 1 PID: 614 Comm: syz-executor321 Tainted: G    B   W          6.4.0-rc6-5ca8bbe2b782+ #1
Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
RIP: 0010:iopt_remove_access+0xb5/0xd0 drivers/iommu/iommufd/io_pagetable.c:1157
Code: 45 85 e4 75 29 e8 4b 2d 0b fe 4c 89 ef e8 33 eb e8 fd 48 89 df e8 2b eb e8 fd 5b 41 5c 41 5d 5d c3 cc cc cc cc e8 2b 2d 0b fe <0f> 0b eb b9 e8 22 2d 0b fe 0f 0b eb ce e8 b9 1d 67 fe eb 90 0f 1f
RSP: 0018:ffff888021e3fbd0 EFLAGS: 00010246
RAX: 0000000000000000 RBX: ffff888019cab0a8 RCX: 0000000000000000
RDX: 0000000000000000 RSI: ffff8880167ba500 RDI: 0000000000000002
RBP: ffff888021e3fbe8 R08: ffffed1003395633 R09: ffffed1003395633
R10: ffff888019cab193 R11: ffffed1003395632 R12: ffff888019e22000
R13: ffff888019cab1e8 R14: ffff88800eba6700 R15: 0000000000000000
FS:  0000000000000000(0000) GS:ffff88806cb00000(0000) knlGS:0000000000000000
CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
CR2: 00000000004e5420 CR3: 000000000667e000 CR4: 0000000000750ee0
PKRU: 55555554
Call Trace:
 <TASK>
 iommufd_access_destroy_object+0x65/0x170 drivers/iommu/iommufd/device.c:875
 iommufd_object_destroy_user+0x18e/0x220 drivers/iommu/iommufd/main.c:163
 iommufd_access_destroy+0x43/0x70 drivers/iommu/iommufd/device.c:938
 iommufd_test_staccess_release+0x8d/0xd0 drivers/iommu/iommufd/selftest.c:918
 __fput+0x26d/0xa40 fs/file_table.c:321
 ____fput+0x1e/0x30 fs/file_table.c:349
 task_work_run+0x1a4/0x2d0 kernel/task_work.c:179
 exit_task_work include/linux/task_work.h:38 [inline]
 do_exit+0xaf3/0x2f60 kernel/exit.c:874
 do_group_exit+0xe0/0x2b0 kernel/exit.c:1024
 __do_sys_exit_group kernel/exit.c:1035 [inline]
 __se_sys_exit_group kernel/exit.c:1033 [inline]
 __x64_sys_exit_group+0x47/0x50 kernel/exit.c:1033
 do_syscall_x64 arch/x86/entry/common.c:50 [inline]
 do_syscall_64+0x3b/0x90 arch/x86/entry/common.c:80
 entry_SYSCALL_64_after_hwframe+0x72/0xdc
RIP: 0033:0x44de86
Code: Unable to access opcode bytes at 0x44de5c.
RSP: 002b:00007fff8410fbc8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
RAX: ffffffffffffffda RBX: 00000000004e5410 RCX: 000000000044de86
RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffffa8
R10: 0000000000411b40 R11: 0000000000000246 R12: 00000000004e5410
R13: 0000000000000001 R14: 0000000000000000 R15: 0000000000000001
 </TASK>
irq event stamp: 0
hardirqs last  enabled at (0): [<0000000000000000>] 0x0
hardirqs last disabled at (0): [<ffffffff8122d29a>] copy_process+0x256a/0x7650 kernel/fork.c:2448
